<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Tooqing-phaser3</title>
  <style>
    body {
      margin: 0;
    }

    body div.container {
      text-align: center;
    }

    body div.container div#game {
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
  <xiaomin_version id="xiaomin_version" hidden=true></xiaomin_version>
  <script>
    var loadScript = function (list, callback) {
      var loaded = 0;
      var loadNext = function () {
        loadSingleScript(list[loaded], function () {
          loaded++;
          if (loaded >= list.length) {
            callback();
          }
          else {
            loadNext();
          }
        })
      };
      loadNext();
    };

    var loadSingleScript = function (src, callback) {
      var s = document.createElement('script');
      s.async = false;
      s.src = "dist/" + src;
      s.addEventListener('load', function () {
        s.parentNode.removeChild(s);
        s.removeEventListener('load', arguments.callee, false);
        callback();
      }, false);
      document.body.appendChild(s);
    };

    var xhr = new XMLHttpRequest();
    xhr.open('GET', "./test.json", true);
    xhr.addEventListener("load", function () {
      var manifest = JSON.parse(xhr.response);
      var version = manifest.version;
      document.getElementById("xiaomin_version").content = version;
      var list = manifest.loadList;
      loadScript(list, function () {
        loadSingleScript("launcher.js", function () {
          window.onload();
        });
      });
    });
    xhr.send(null)
  </script>
</head>

<body>
  <div class="container">
    <div id="game"></div>
  </div>
</body>

</html>