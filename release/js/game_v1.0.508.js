/*! For license information please see game_v1.0.508.js.LICENSE.txt */
(this.webpackJsonp_name_=this.webpackJsonp_name_||[]).push([["game"],{"./src/pica/render/fall.effect/fall.effect.container.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FallEffectContainer", function() { return FallEffectContainer; });\n/* harmony import */ var _fall_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fall.effect */ "./src/pica/render/fall.effect/fall.effect.ts");\n\nvar FallEffectContainer = /** @class */ (function () {\n    function FallEffectContainer(render) {\n        this.render = render;\n        this.mFalls = [];\n    }\n    FallEffectContainer.prototype.addFall = function (pos, enable) {\n        if (!pos) {\n            return;\n        }\n        var mainScene = this.render.sceneManager.getMainScene();\n        var fall = new _fall_effect__WEBPACK_IMPORTED_MODULE_0__["FallEffect"](mainScene, this.render.scaleRatio);\n        fall.once("remove", this.onRemoveHandler, this);\n        fall.setPosition(pos.x, pos.y);\n        mainScene.layerManager.addToLayer("sceneUILayer", fall);\n    };\n    FallEffectContainer.prototype.onRemoveHandler = function (fall) {\n        if (!fall) {\n            return;\n        }\n    };\n    return FallEffectContainer;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/fall.effect/fall.effect.container.ts?')},"./src/pica/render/fall.effect/fall.effect.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FallEffect", function() { return FallEffect; });\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar FallEffect = /** @class */ (function (_super) {\n    __extends(FallEffect, _super);\n    function FallEffect(scene, scaleRatio) {\n        var _this = _super.call(this, scene) || this;\n        _this.scale = scaleRatio;\n        return _this;\n    }\n    FallEffect.prototype.show = function (status) {\n        this.mStatus = status;\n        this.load();\n    };\n    FallEffect.prototype.load = function () {\n        if (this.scene.textures.exists("fall_effect")) {\n            this.onCompleteHandler();\n        }\n        else {\n            this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.onCompleteHandler, this);\n            this.scene.load.atlas("fall_effect", utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes("ui/fall_effect/falleffect.png"), utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes("ui/fall_effect/falleffect.json"));\n            this.scene.load.start();\n        }\n    };\n    FallEffect.prototype.showEnable = function () {\n        // const config = {\n        //     key: "fill_effect_enable",\n        //     frames: this.scene.anims.generateFrameNames("fall_effect", { prefix: "enable", end: 6, zeroPad: 2 }),\n        //     frameRate: 8,\n        //     repeat: 0\n        // };\n        // this.mDisplay.setPosition(25, -25);\n        // this.scene.anims.create(config);\n        // this.mDisplay.play("fill_effect_enable");\n        this.mDisplay = new EnableDisplay(this.scene, "fall_effect");\n        this.add(this.mDisplay);\n    };\n    FallEffect.prototype.showDisable = function () {\n        // this.mDisplay = this.scene.make.sprite({\n        //     key: "fall_effect",\n        //     frame: "forbid"\n        // }, false).setScale(0.5);\n        this.mDisplay = new DisableDisplay(this.scene, "fall_effect");\n        this.add(this.mDisplay);\n    };\n    FallEffect.prototype.onCompleteHandler = function () {\n        // this.mDisplay = this.scene.make.sprite({\n        //     key: "fall_effect",\n        // }, false);\n        // this.add(this.mDisplay);\n        var _this = this;\n        if (this.mStatus === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_def"].PathReachableStatus.PATH_REACHABLE_AREA || this.mStatus === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_def"].PathReachableStatus.PATH_REACHABLE_WITH_INTERACTION_SPRITE) {\n            this.showEnable();\n        }\n        else {\n            this.showDisable();\n        }\n        // if (this.mType === FallType.Enable) {\n        //     this.createEnable();\n        // } else {\n        //     this.createDisable();\n        // }\n        this.scene.tweens.add({\n            targets: this,\n            duration: 1000,\n            ease: "Expo",\n            delay: 1000,\n            props: { alpha: 0 },\n            onComplete: function () {\n                _this.destroy();\n                _this.emit("remove", _this);\n            }\n        });\n    };\n    return FallEffect;\n}(Phaser.GameObjects.Container));\n\nvar EnableDisplay = /** @class */ (function (_super) {\n    __extends(EnableDisplay, _super);\n    function EnableDisplay(scene, key) {\n        var _this = _super.call(this, scene) || this;\n        _this.mImage = scene.make.sprite({\n            key: key,\n            x: 9,\n            y: -20\n        }, false).setScale(0.5);\n        _this.add(_this.mImage);\n        // const tween = this.scene.tweens.add({\n        //     targets: this.mImage,\n        //     duration: 1000,\n        //     delay: 600,\n        //     props: {\n        //         alpha: 0.6\n        //     },\n        //     onComplete: () => {\n        //         tween.destroy();\n        //         this.mImage.destroy();\n        //         this.mImage = undefined;\n        //     }\n        // })\n        // this.mEllipse = scene.make.graphics(undefined, false);\n        // this.mEllipse.fillStyle(0, 0.6);\n        // this.mEllipse.fillEllipse(0, 0, 30, 15)\n        _this.mEllipse = scene.make.sprite(undefined, false);\n        _this.addAt(_this.mEllipse, 0);\n        var config = {\n            key: "fill_effect_enable",\n            frames: _this.scene.anims.generateFrameNames("fall_effect", { prefix: "enable", end: 6, zeroPad: 2 }),\n            frameRate: 16,\n            repeat: 0\n        };\n        _this.scene.anims.create(config);\n        _this.mImage.play("fill_effect_enable");\n        var ellipseConfig = {\n            key: "fill_effect_ellipse",\n            frames: _this.scene.anims.generateFrameNames("fall_effect", { prefix: "ellipse", end: 7, zeroPad: 2 }),\n            frameRate: 10,\n            repeat: 0\n        };\n        _this.scene.anims.create(ellipseConfig);\n        _this.mEllipse.play("fill_effect_ellipse");\n        return _this;\n    }\n    return EnableDisplay;\n}(Phaser.GameObjects.Container));\nvar DisableDisplay = /** @class */ (function (_super) {\n    __extends(DisableDisplay, _super);\n    function DisableDisplay(scene, key) {\n        var _this = _super.call(this, scene) || this;\n        _this.mImage = scene.make.image({\n            key: key,\n            y: -6,\n            frame: "disable",\n        }, false).setScale(0.5);\n        _this.add(_this.mImage);\n        _this.mEllipse = scene.make.image({\n            key: key,\n            frame: "forbid"\n        }, false).setScale(0.5);\n        _this.add([_this.mImage, _this.mEllipse]);\n        return _this;\n    }\n    return DisableDisplay;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/fall.effect/fall.effect.ts?')},"./src/pica/render/fall.effect/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _fall_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fall.effect */ "./src/pica/render/fall.effect/fall.effect.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FallEffect", function() { return _fall_effect__WEBPACK_IMPORTED_MODULE_0__["FallEffect"]; });\n\n/* harmony import */ var _fall_effect_container__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fall.effect.container */ "./src/pica/render/fall.effect/fall.effect.container.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FallEffectContainer", function() { return _fall_effect_container__WEBPACK_IMPORTED_MODULE_1__["FallEffectContainer"]; });\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/fall.effect/index.ts?')},"./src/pica/render/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui */ "./src/pica/render/ui/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ItemButton", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["ItemButton"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DetailDisplay", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["DetailDisplay"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BackTextButton", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["BackTextButton"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EnergyProgressBar", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["EnergyProgressBar"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ActivityPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["ActivityPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CharacterAttributePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["CharacterAttributePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CharacterEditorPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["CharacterEditorPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CharacterInfoPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["CharacterInfoPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GraphicsProgressBar", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["GraphicsProgressBar"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaHandheldPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaHandheldPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaChatInputPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaChatInputPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaGiftPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaGiftPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaChatPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaChatPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaMainUIPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaMainUIPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRenderUiManager", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaRenderUiManager"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CutInPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["CutInPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["DialogPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoginPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["LoginPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VerifiedPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["VerifiedPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CreateRolePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["CreateRolePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InteractionBubbleCell", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["InteractionBubbleCell"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InteractionBubbleContainer", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["InteractionBubbleContainer"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InteractiveBubblePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["InteractiveBubblePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNavigatePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaNavigatePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBagPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBagPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ElementDetail", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["ElementDetail"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaMarketPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaMarketPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NumberCounter", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["NumberCounter"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MarketItem", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["MarketItem"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaFriendPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaFriendPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaPropFunPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaPropFunPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNoticePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaNoticePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaPartyListPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaPartyListPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorContentPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaManorContentPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorListPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaManorListPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorScrollPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaManorScrollPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaOpenPartyCreatePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaOpenPartyCreatePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaOpenPartyPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaOpenPartyPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["TaskPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorBasePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaManorBasePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorChildPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaManorChildPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicManorInfoPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicManorInfoPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorShopPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaManorShopPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorTipsPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaManorTipsPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessContentPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessContentPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessHistoryPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessHistoryPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessMyStreetPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessMyStreetPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessRankRewardPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessRankRewardPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessRankingDetailPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessRankingDetailPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessRankingPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessRankingPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessStoreCreatePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessStoreCreatePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessStreetListPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessStreetListPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessStreetPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessStreetPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SecondaryMenuPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["SecondaryMenuPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessChoosePlanPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessChoosePlanPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessMarketingPlanPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessMarketingPlanPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessPlanPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessPlanPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRechargePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaRechargePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaDecorateControlPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaDecorateControlPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicRoomUpgradePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicRoomUpgradePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaEquipUpgradeItem", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaEquipUpgradeItem"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaEquipUpgradePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaEquipUpgradePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRoomListPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaRoomListPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RoomDelegate", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["RoomDelegate"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RoomZoon", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["RoomZoon"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaWorkPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaWorkPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaMineCarPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaMineCarPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaHousePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaHousePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaHouseInfoPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaHouseInfoPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaMineSettlePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaMineSettlePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRewardTipPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaRewardTipPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaComposePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaComposePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaItemPopCardPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaItemPopCardPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaMessageBoxPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaMessageBoxPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaElementStoragePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaElementStoragePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CutInMenuPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["CutInMenuPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTreasureOpenPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaTreasureOpenPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTreasurePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaTreasurePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTreasurePreviewPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaTreasurePreviewPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTreasureAllOpenPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaTreasureAllOpenPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaGiftEffectPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaGiftEffectPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaGiftLateralItem", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaGiftLateralItem"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaGiftLaterctPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaGiftLaterctPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaGiftPlayerPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaGiftPlayerPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaFurniFunPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaFurniFunPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewRolePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaNewRolePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewActivityPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaNewActivityPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewChatPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaNewChatPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewHeadPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaNewHeadPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewLeftPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaNewLeftPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewNavigatePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaNewNavigatePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewMainPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaNewMainPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaAvatarPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaAvatarPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaOnlinePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaOnlinePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaEffectMgrPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaEffectMgrPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaFurniUnlockEffectPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaFurniUnlockEffectPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTaskItem", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaTaskItem"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTaskMainPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaTaskMainPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTaskPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaTaskPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTaskSidePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaTaskSidePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaElevatorPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaElevatorPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaCreateRolePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaCreateRolePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaItemTipsPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaItemTipsPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaSingleManager", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaSingleManager"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaFurnitureComposePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaFurnitureComposePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRecastePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaRecastePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRoamListPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaRoamListPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRoamPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaRoamPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRoamDrawPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaRoamDrawPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRoamPreviewPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaRoamPreviewPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreLogPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaExploreLogPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreLogSettlePanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaExploreLogSettlePanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaChapterLevelClue", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaChapterLevelClue"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListBottomPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaExploreListBottomPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListDetailPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaExploreListDetailPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListLevelPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaExploreListLevelPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListPanel", function() { return _ui__WEBPACK_IMPORTED_MODULE_0__["PicaExploreListPanel"]; });\n\n/* harmony import */ var _fall_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fall.effect */ "./src/pica/render/fall.effect/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FallEffect", function() { return _fall_effect__WEBPACK_IMPORTED_MODULE_1__["FallEffect"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FallEffectContainer", function() { return _fall_effect__WEBPACK_IMPORTED_MODULE_1__["FallEffectContainer"]; });\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/index.ts?')},"./src/pica/render/ui sync recursive ^\\.\\/.*$":function(module,exports,__webpack_require__){eval('var map = {\n\t"./": "./src/pica/render/ui/index.ts",\n\t"./Activity/ActivityPanel": "./src/pica/render/ui/Activity/ActivityPanel.ts",\n\t"./Activity/ActivityPanel.ts": "./src/pica/render/ui/Activity/ActivityPanel.ts",\n\t"./Bottom/BottomPanel": "./src/pica/render/ui/Bottom/BottomPanel.ts",\n\t"./Bottom/BottomPanel.ts": "./src/pica/render/ui/Bottom/BottomPanel.ts",\n\t"./Bubble/InteractionBubbleCell": "./src/pica/render/ui/Bubble/InteractionBubbleCell.ts",\n\t"./Bubble/InteractionBubbleCell.ts": "./src/pica/render/ui/Bubble/InteractionBubbleCell.ts",\n\t"./Bubble/InteractionBubbleContainer": "./src/pica/render/ui/Bubble/InteractionBubbleContainer.ts",\n\t"./Bubble/InteractionBubbleContainer.ts": "./src/pica/render/ui/Bubble/InteractionBubbleContainer.ts",\n\t"./Bubble/InteractiveBubblePanel": "./src/pica/render/ui/Bubble/InteractiveBubblePanel.ts",\n\t"./Bubble/InteractiveBubblePanel.ts": "./src/pica/render/ui/Bubble/InteractiveBubblePanel.ts",\n\t"./CharacterInfo/CharacterAttributePanel": "./src/pica/render/ui/CharacterInfo/CharacterAttributePanel.ts",\n\t"./CharacterInfo/CharacterAttributePanel.ts": "./src/pica/render/ui/CharacterInfo/CharacterAttributePanel.ts",\n\t"./CharacterInfo/CharacterEditorPanel": "./src/pica/render/ui/CharacterInfo/CharacterEditorPanel.ts",\n\t"./CharacterInfo/CharacterEditorPanel.ts": "./src/pica/render/ui/CharacterInfo/CharacterEditorPanel.ts",\n\t"./CharacterInfo/CharacterInfoPanel": "./src/pica/render/ui/CharacterInfo/CharacterInfoPanel.ts",\n\t"./CharacterInfo/CharacterInfoPanel.ts": "./src/pica/render/ui/CharacterInfo/CharacterInfoPanel.ts",\n\t"./CharacterInfo/GraphicsProgressBar": "./src/pica/render/ui/CharacterInfo/GraphicsProgressBar.ts",\n\t"./CharacterInfo/GraphicsProgressBar.ts": "./src/pica/render/ui/CharacterInfo/GraphicsProgressBar.ts",\n\t"./Chat/ChatPanel": "./src/pica/render/ui/Chat/ChatPanel.ts",\n\t"./Chat/ChatPanel.ts": "./src/pica/render/ui/Chat/ChatPanel.ts",\n\t"./Components": "./src/pica/render/ui/Components/index.ts",\n\t"./Components/": "./src/pica/render/ui/Components/index.ts",\n\t"./Components/Item.button": "./src/pica/render/ui/Components/Item.button.ts",\n\t"./Components/Item.button.ts": "./src/pica/render/ui/Components/Item.button.ts",\n\t"./Components/back.text.button": "./src/pica/render/ui/Components/back.text.button.ts",\n\t"./Components/back.text.button.ts": "./src/pica/render/ui/Components/back.text.button.ts",\n\t"./Components/detail.display": "./src/pica/render/ui/Components/detail.display.ts",\n\t"./Components/detail.display.ts": "./src/pica/render/ui/Components/detail.display.ts",\n\t"./Components/energy.progress.bar": "./src/pica/render/ui/Components/energy.progress.bar.ts",\n\t"./Components/energy.progress.bar.ts": "./src/pica/render/ui/Components/energy.progress.bar.ts",\n\t"./Components/index": "./src/pica/render/ui/Components/index.ts",\n\t"./Components/index.ts": "./src/pica/render/ui/Components/index.ts",\n\t"./CreateRole/CreateRolePanel": "./src/pica/render/ui/CreateRole/CreateRolePanel.ts",\n\t"./CreateRole/CreateRolePanel.ts": "./src/pica/render/ui/CreateRole/CreateRolePanel.ts",\n\t"./CutIn/CutInPanel": "./src/pica/render/ui/CutIn/CutInPanel.ts",\n\t"./CutIn/CutInPanel.ts": "./src/pica/render/ui/CutIn/CutInPanel.ts",\n\t"./CutInMenu/CutInMenuPanel": "./src/pica/render/ui/CutInMenu/CutInMenuPanel.ts",\n\t"./CutInMenu/CutInMenuPanel.ts": "./src/pica/render/ui/CutInMenu/CutInMenuPanel.ts",\n\t"./Dialog/DialogPanel": "./src/pica/render/ui/Dialog/DialogPanel.ts",\n\t"./Dialog/DialogPanel.ts": "./src/pica/render/ui/Dialog/DialogPanel.ts",\n\t"./GMTools/GMToolsPanel": "./src/pica/render/ui/GMTools/GMToolsPanel.ts",\n\t"./GMTools/GMToolsPanel.ts": "./src/pica/render/ui/GMTools/GMToolsPanel.ts",\n\t"./Login/LoginPanel": "./src/pica/render/ui/Login/LoginPanel.ts",\n\t"./Login/LoginPanel.ts": "./src/pica/render/ui/Login/LoginPanel.ts",\n\t"./Login/VerifiePanel": "./src/pica/render/ui/Login/VerifiePanel.ts",\n\t"./Login/VerifiePanel.ts": "./src/pica/render/ui/Login/VerifiePanel.ts",\n\t"./PicManorInfo/PicManorInfoPanel": "./src/pica/render/ui/PicManorInfo/PicManorInfoPanel.ts",\n\t"./PicManorInfo/PicManorInfoPanel.ts": "./src/pica/render/ui/PicManorInfo/PicManorInfoPanel.ts",\n\t"./PicManorInfo/PicaManorBasePanel": "./src/pica/render/ui/PicManorInfo/PicaManorBasePanel.ts",\n\t"./PicManorInfo/PicaManorBasePanel.ts": "./src/pica/render/ui/PicManorInfo/PicaManorBasePanel.ts",\n\t"./PicManorInfo/PicaManorChildPanel": "./src/pica/render/ui/PicManorInfo/PicaManorChildPanel.ts",\n\t"./PicManorInfo/PicaManorChildPanel.ts": "./src/pica/render/ui/PicManorInfo/PicaManorChildPanel.ts",\n\t"./PicManorInfo/PicaManorShopPanel": "./src/pica/render/ui/PicManorInfo/PicaManorShopPanel.ts",\n\t"./PicManorInfo/PicaManorShopPanel.ts": "./src/pica/render/ui/PicManorInfo/PicaManorShopPanel.ts",\n\t"./PicManorInfo/PicaManorTipsPanel": "./src/pica/render/ui/PicManorInfo/PicaManorTipsPanel.ts",\n\t"./PicManorInfo/PicaManorTipsPanel.ts": "./src/pica/render/ui/PicManorInfo/PicaManorTipsPanel.ts",\n\t"./PicRoomUpgrade/PicRoomUpgradePanel": "./src/pica/render/ui/PicRoomUpgrade/PicRoomUpgradePanel.ts",\n\t"./PicRoomUpgrade/PicRoomUpgradePanel.ts": "./src/pica/render/ui/PicRoomUpgrade/PicRoomUpgradePanel.ts",\n\t"./PicaAvatar/PicaAvatarPanel": "./src/pica/render/ui/PicaAvatar/PicaAvatarPanel.ts",\n\t"./PicaAvatar/PicaAvatarPanel.ts": "./src/pica/render/ui/PicaAvatar/PicaAvatarPanel.ts",\n\t"./PicaBag/PicaBagPanel": "./src/pica/render/ui/PicaBag/PicaBagPanel.ts",\n\t"./PicaBag/PicaBagPanel.ts": "./src/pica/render/ui/PicaBag/PicaBagPanel.ts",\n\t"./PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel": "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel.ts",\n\t"./PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel.ts": "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel.ts",\n\t"./PicaBusinessMarketingPlan/PicaBusinessMarketingPlanPanel": "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessMarketingPlanPanel.ts",\n\t"./PicaBusinessMarketingPlan/PicaBusinessMarketingPlanPanel.ts": "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessMarketingPlanPanel.ts",\n\t"./PicaBusinessMarketingPlan/PicaBusinessPlanPanel": "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessPlanPanel.ts",\n\t"./PicaBusinessMarketingPlan/PicaBusinessPlanPanel.ts": "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessPlanPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessContentPanel": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessContentPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessContentPanel.ts": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessContentPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessHistoryPanel": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessHistoryPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessHistoryPanel.ts": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessHistoryPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessMyStreetPanel": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessMyStreetPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessMyStreetPanel.ts": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessMyStreetPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessRankRewardPanel": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankRewardPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessRankRewardPanel.ts": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankRewardPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessRankingDetailPanel": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingDetailPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessRankingDetailPanel.ts": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingDetailPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessRankingPanel": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessRankingPanel.ts": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessStoreCreatePanel": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStoreCreatePanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessStoreCreatePanel.ts": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStoreCreatePanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessStreetListPanel": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetListPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessStreetListPanel.ts": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetListPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessStreetPanel": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetPanel.ts",\n\t"./PicaBusinessStreet/PicaBusinessStreetPanel.ts": "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetPanel.ts",\n\t"./PicaBusinessStreet/SecondaryMenuPanel": "./src/pica/render/ui/PicaBusinessStreet/SecondaryMenuPanel.ts",\n\t"./PicaBusinessStreet/SecondaryMenuPanel.ts": "./src/pica/render/ui/PicaBusinessStreet/SecondaryMenuPanel.ts",\n\t"./PicaChat/PicaChatInputPanel": "./src/pica/render/ui/PicaChat/PicaChatInputPanel.ts",\n\t"./PicaChat/PicaChatInputPanel.ts": "./src/pica/render/ui/PicaChat/PicaChatInputPanel.ts",\n\t"./PicaChat/PicaChatPanel": "./src/pica/render/ui/PicaChat/PicaChatPanel.ts",\n\t"./PicaChat/PicaChatPanel.ts": "./src/pica/render/ui/PicaChat/PicaChatPanel.ts",\n\t"./PicaChat/PicaGiftPanel": "./src/pica/render/ui/PicaChat/PicaGiftPanel.ts",\n\t"./PicaChat/PicaGiftPanel.ts": "./src/pica/render/ui/PicaChat/PicaGiftPanel.ts",\n\t"./PicaCompose/PicaComposePanel": "./src/pica/render/ui/PicaCompose/PicaComposePanel.ts",\n\t"./PicaCompose/PicaComposePanel.ts": "./src/pica/render/ui/PicaCompose/PicaComposePanel.ts",\n\t"./PicaCreateRole/PicaCreateRolePanel": "./src/pica/render/ui/PicaCreateRole/PicaCreateRolePanel.ts",\n\t"./PicaCreateRole/PicaCreateRolePanel.ts": "./src/pica/render/ui/PicaCreateRole/PicaCreateRolePanel.ts",\n\t"./PicaDecorate/PicaDecoratePanel": "./src/pica/render/ui/PicaDecorate/PicaDecoratePanel.ts",\n\t"./PicaDecorate/PicaDecoratePanel.ts": "./src/pica/render/ui/PicaDecorate/PicaDecoratePanel.ts",\n\t"./PicaDecorateControl/PicaDecorateControlPanel": "./src/pica/render/ui/PicaDecorateControl/PicaDecorateControlPanel.ts",\n\t"./PicaDecorateControl/PicaDecorateControlPanel.ts": "./src/pica/render/ui/PicaDecorateControl/PicaDecorateControlPanel.ts",\n\t"./PicaEffectMgr/PicaEffectMgrPanel": "./src/pica/render/ui/PicaEffectMgr/PicaEffectMgrPanel.ts",\n\t"./PicaEffectMgr/PicaEffectMgrPanel.ts": "./src/pica/render/ui/PicaEffectMgr/PicaEffectMgrPanel.ts",\n\t"./PicaEffectMgr/PicaFurniUnlockEffectPanel": "./src/pica/render/ui/PicaEffectMgr/PicaFurniUnlockEffectPanel.ts",\n\t"./PicaEffectMgr/PicaFurniUnlockEffectPanel.ts": "./src/pica/render/ui/PicaEffectMgr/PicaFurniUnlockEffectPanel.ts",\n\t"./PicaElementStorage/Item": "./src/pica/render/ui/PicaElementStorage/Item.ts",\n\t"./PicaElementStorage/Item.ts": "./src/pica/render/ui/PicaElementStorage/Item.ts",\n\t"./PicaElementStorage/PicaElementStoragePanel": "./src/pica/render/ui/PicaElementStorage/PicaElementStoragePanel.ts",\n\t"./PicaElementStorage/PicaElementStoragePanel.ts": "./src/pica/render/ui/PicaElementStorage/PicaElementStoragePanel.ts",\n\t"./PicaElevator/PicaElevatorPanel": "./src/pica/render/ui/PicaElevator/PicaElevatorPanel.ts",\n\t"./PicaElevator/PicaElevatorPanel.ts": "./src/pica/render/ui/PicaElevator/PicaElevatorPanel.ts",\n\t"./PicaEquipUpgrade/PicaEquipUpgradeItem": "./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradeItem.ts",\n\t"./PicaEquipUpgrade/PicaEquipUpgradeItem.ts": "./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradeItem.ts",\n\t"./PicaEquipUpgrade/PicaEquipUpgradePanel": "./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradePanel.ts",\n\t"./PicaEquipUpgrade/PicaEquipUpgradePanel.ts": "./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradePanel.ts",\n\t"./PicaExploreList/PicaChapterLevelClue": "./src/pica/render/ui/PicaExploreList/PicaChapterLevelClue.ts",\n\t"./PicaExploreList/PicaChapterLevelClue.ts": "./src/pica/render/ui/PicaExploreList/PicaChapterLevelClue.ts",\n\t"./PicaExploreList/PicaExploreListBottomPanel": "./src/pica/render/ui/PicaExploreList/PicaExploreListBottomPanel.ts",\n\t"./PicaExploreList/PicaExploreListBottomPanel.ts": "./src/pica/render/ui/PicaExploreList/PicaExploreListBottomPanel.ts",\n\t"./PicaExploreList/PicaExploreListDetailPanel": "./src/pica/render/ui/PicaExploreList/PicaExploreListDetailPanel.ts",\n\t"./PicaExploreList/PicaExploreListDetailPanel.ts": "./src/pica/render/ui/PicaExploreList/PicaExploreListDetailPanel.ts",\n\t"./PicaExploreList/PicaExploreListLevelPanel": "./src/pica/render/ui/PicaExploreList/PicaExploreListLevelPanel.ts",\n\t"./PicaExploreList/PicaExploreListLevelPanel.ts": "./src/pica/render/ui/PicaExploreList/PicaExploreListLevelPanel.ts",\n\t"./PicaExploreList/PicaExploreListPanel": "./src/pica/render/ui/PicaExploreList/PicaExploreListPanel.ts",\n\t"./PicaExploreList/PicaExploreListPanel.ts": "./src/pica/render/ui/PicaExploreList/PicaExploreListPanel.ts",\n\t"./PicaExploreLog/PicaExploreLogPanel": "./src/pica/render/ui/PicaExploreLog/PicaExploreLogPanel.ts",\n\t"./PicaExploreLog/PicaExploreLogPanel.ts": "./src/pica/render/ui/PicaExploreLog/PicaExploreLogPanel.ts",\n\t"./PicaExploreLog/PicaExploreLogSettlePanel": "./src/pica/render/ui/PicaExploreLog/PicaExploreLogSettlePanel.ts",\n\t"./PicaExploreLog/PicaExploreLogSettlePanel.ts": "./src/pica/render/ui/PicaExploreLog/PicaExploreLogSettlePanel.ts",\n\t"./PicaFriend/PicaFriendPanel": "./src/pica/render/ui/PicaFriend/PicaFriendPanel.ts",\n\t"./PicaFriend/PicaFriendPanel.ts": "./src/pica/render/ui/PicaFriend/PicaFriendPanel.ts",\n\t"./PicaFurniFun/PicaFurniFunPanel": "./src/pica/render/ui/PicaFurniFun/PicaFurniFunPanel.ts",\n\t"./PicaFurniFun/PicaFurniFunPanel.ts": "./src/pica/render/ui/PicaFurniFun/PicaFurniFunPanel.ts",\n\t"./PicaFurnitureCompose/PicaFurnitureComposePanel": "./src/pica/render/ui/PicaFurnitureCompose/PicaFurnitureComposePanel.ts",\n\t"./PicaFurnitureCompose/PicaFurnitureComposePanel.ts": "./src/pica/render/ui/PicaFurnitureCompose/PicaFurnitureComposePanel.ts",\n\t"./PicaGiftEffect/PicaGiftEffectPanel": "./src/pica/render/ui/PicaGiftEffect/PicaGiftEffectPanel.ts",\n\t"./PicaGiftEffect/PicaGiftEffectPanel.ts": "./src/pica/render/ui/PicaGiftEffect/PicaGiftEffectPanel.ts",\n\t"./PicaGiftEffect/PicaGiftLateralItem": "./src/pica/render/ui/PicaGiftEffect/PicaGiftLateralItem.ts",\n\t"./PicaGiftEffect/PicaGiftLateralItem.ts": "./src/pica/render/ui/PicaGiftEffect/PicaGiftLateralItem.ts",\n\t"./PicaGiftEffect/PicaGiftLaterctPanel": "./src/pica/render/ui/PicaGiftEffect/PicaGiftLaterctPanel.ts",\n\t"./PicaGiftEffect/PicaGiftLaterctPanel.ts": "./src/pica/render/ui/PicaGiftEffect/PicaGiftLaterctPanel.ts",\n\t"./PicaGiftEffect/PicaGiftPlayerPanel": "./src/pica/render/ui/PicaGiftEffect/PicaGiftPlayerPanel.ts",\n\t"./PicaGiftEffect/PicaGiftPlayerPanel.ts": "./src/pica/render/ui/PicaGiftEffect/PicaGiftPlayerPanel.ts",\n\t"./PicaHandheld/PicaHandheldPanel": "./src/pica/render/ui/PicaHandheld/PicaHandheldPanel.ts",\n\t"./PicaHandheld/PicaHandheldPanel.ts": "./src/pica/render/ui/PicaHandheld/PicaHandheldPanel.ts",\n\t"./PicaHouse/PicaHouseInfoPanel": "./src/pica/render/ui/PicaHouse/PicaHouseInfoPanel.ts",\n\t"./PicaHouse/PicaHouseInfoPanel.ts": "./src/pica/render/ui/PicaHouse/PicaHouseInfoPanel.ts",\n\t"./PicaHouse/PicaHousePanel": "./src/pica/render/ui/PicaHouse/PicaHousePanel.ts",\n\t"./PicaHouse/PicaHousePanel.ts": "./src/pica/render/ui/PicaHouse/PicaHousePanel.ts",\n\t"./PicaItemPopCard/PicaItemPopCardPanel": "./src/pica/render/ui/PicaItemPopCard/PicaItemPopCardPanel.ts",\n\t"./PicaItemPopCard/PicaItemPopCardPanel.ts": "./src/pica/render/ui/PicaItemPopCard/PicaItemPopCardPanel.ts",\n\t"./PicaMainUI/PicaMainUIPanel": "./src/pica/render/ui/PicaMainUI/PicaMainUIPanel.ts",\n\t"./PicaMainUI/PicaMainUIPanel.ts": "./src/pica/render/ui/PicaMainUI/PicaMainUIPanel.ts",\n\t"./PicaManorList/PicaManorContentPanel": "./src/pica/render/ui/PicaManorList/PicaManorContentPanel.ts",\n\t"./PicaManorList/PicaManorContentPanel.ts": "./src/pica/render/ui/PicaManorList/PicaManorContentPanel.ts",\n\t"./PicaManorList/PicaManorListPanel": "./src/pica/render/ui/PicaManorList/PicaManorListPanel.ts",\n\t"./PicaManorList/PicaManorListPanel.ts": "./src/pica/render/ui/PicaManorList/PicaManorListPanel.ts",\n\t"./PicaManorList/PicaManorScrollPanel": "./src/pica/render/ui/PicaManorList/PicaManorScrollPanel.ts",\n\t"./PicaManorList/PicaManorScrollPanel.ts": "./src/pica/render/ui/PicaManorList/PicaManorScrollPanel.ts",\n\t"./PicaMarket/ElementDetail": "./src/pica/render/ui/PicaMarket/ElementDetail.ts",\n\t"./PicaMarket/ElementDetail.ts": "./src/pica/render/ui/PicaMarket/ElementDetail.ts",\n\t"./PicaMarket/NumberCounter": "./src/pica/render/ui/PicaMarket/NumberCounter.ts",\n\t"./PicaMarket/NumberCounter.ts": "./src/pica/render/ui/PicaMarket/NumberCounter.ts",\n\t"./PicaMarket/PicaMarketPanel": "./src/pica/render/ui/PicaMarket/PicaMarketPanel.ts",\n\t"./PicaMarket/PicaMarketPanel.ts": "./src/pica/render/ui/PicaMarket/PicaMarketPanel.ts",\n\t"./PicaMarket/item": "./src/pica/render/ui/PicaMarket/item.ts",\n\t"./PicaMarket/item.ts": "./src/pica/render/ui/PicaMarket/item.ts",\n\t"./PicaMessageBox/PicaMessageBoxPanel": "./src/pica/render/ui/PicaMessageBox/PicaMessageBoxPanel.ts",\n\t"./PicaMessageBox/PicaMessageBoxPanel.ts": "./src/pica/render/ui/PicaMessageBox/PicaMessageBoxPanel.ts",\n\t"./PicaMineCar/PicaMineCarPanel": "./src/pica/render/ui/PicaMineCar/PicaMineCarPanel.ts",\n\t"./PicaMineCar/PicaMineCarPanel.ts": "./src/pica/render/ui/PicaMineCar/PicaMineCarPanel.ts",\n\t"./PicaMineSettle/PicaMineSettlePanel": "./src/pica/render/ui/PicaMineSettle/PicaMineSettlePanel.ts",\n\t"./PicaMineSettle/PicaMineSettlePanel.ts": "./src/pica/render/ui/PicaMineSettle/PicaMineSettlePanel.ts",\n\t"./PicaNavigate/PicaNavigatePanel": "./src/pica/render/ui/PicaNavigate/PicaNavigatePanel.ts",\n\t"./PicaNavigate/PicaNavigatePanel.ts": "./src/pica/render/ui/PicaNavigate/PicaNavigatePanel.ts",\n\t"./PicaNewMain/PicaNewActivityPanel": "./src/pica/render/ui/PicaNewMain/PicaNewActivityPanel.ts",\n\t"./PicaNewMain/PicaNewActivityPanel.ts": "./src/pica/render/ui/PicaNewMain/PicaNewActivityPanel.ts",\n\t"./PicaNewMain/PicaNewChatPanel": "./src/pica/render/ui/PicaNewMain/PicaNewChatPanel.ts",\n\t"./PicaNewMain/PicaNewChatPanel.ts": "./src/pica/render/ui/PicaNewMain/PicaNewChatPanel.ts",\n\t"./PicaNewMain/PicaNewHeadPanel": "./src/pica/render/ui/PicaNewMain/PicaNewHeadPanel.ts",\n\t"./PicaNewMain/PicaNewHeadPanel.ts": "./src/pica/render/ui/PicaNewMain/PicaNewHeadPanel.ts",\n\t"./PicaNewMain/PicaNewLeftPanel": "./src/pica/render/ui/PicaNewMain/PicaNewLeftPanel.ts",\n\t"./PicaNewMain/PicaNewLeftPanel.ts": "./src/pica/render/ui/PicaNewMain/PicaNewLeftPanel.ts",\n\t"./PicaNewMain/PicaNewMainPanel": "./src/pica/render/ui/PicaNewMain/PicaNewMainPanel.ts",\n\t"./PicaNewMain/PicaNewMainPanel.ts": "./src/pica/render/ui/PicaNewMain/PicaNewMainPanel.ts",\n\t"./PicaNewMain/PicaNewNavigatePanel": "./src/pica/render/ui/PicaNewMain/PicaNewNavigatePanel.ts",\n\t"./PicaNewMain/PicaNewNavigatePanel.ts": "./src/pica/render/ui/PicaNewMain/PicaNewNavigatePanel.ts",\n\t"./PicaNewMain/PicaNewOldMainPanel": "./src/pica/render/ui/PicaNewMain/PicaNewOldMainPanel.ts",\n\t"./PicaNewMain/PicaNewOldMainPanel.ts": "./src/pica/render/ui/PicaNewMain/PicaNewOldMainPanel.ts",\n\t"./PicaNewRole/PicaNewRolePanel": "./src/pica/render/ui/PicaNewRole/PicaNewRolePanel.ts",\n\t"./PicaNewRole/PicaNewRolePanel.ts": "./src/pica/render/ui/PicaNewRole/PicaNewRolePanel.ts",\n\t"./PicaNotice/PicaNoticePanel": "./src/pica/render/ui/PicaNotice/PicaNoticePanel.ts",\n\t"./PicaNotice/PicaNoticePanel.ts": "./src/pica/render/ui/PicaNotice/PicaNoticePanel.ts",\n\t"./PicaOnline/PicaOnlineBottomPanel": "./src/pica/render/ui/PicaOnline/PicaOnlineBottomPanel.ts",\n\t"./PicaOnline/PicaOnlineBottomPanel.ts": "./src/pica/render/ui/PicaOnline/PicaOnlineBottomPanel.ts",\n\t"./PicaOnline/PicaOnlinePanel": "./src/pica/render/ui/PicaOnline/PicaOnlinePanel.ts",\n\t"./PicaOnline/PicaOnlinePanel.ts": "./src/pica/render/ui/PicaOnline/PicaOnlinePanel.ts",\n\t"./PicaOpenParty/PicaOpenPartyCreatePanel": "./src/pica/render/ui/PicaOpenParty/PicaOpenPartyCreatePanel.ts",\n\t"./PicaOpenParty/PicaOpenPartyCreatePanel.ts": "./src/pica/render/ui/PicaOpenParty/PicaOpenPartyCreatePanel.ts",\n\t"./PicaOpenParty/PicaOpenPartyPanel": "./src/pica/render/ui/PicaOpenParty/PicaOpenPartyPanel.ts",\n\t"./PicaOpenParty/PicaOpenPartyPanel.ts": "./src/pica/render/ui/PicaOpenParty/PicaOpenPartyPanel.ts",\n\t"./PicaOrder/PicaOrderPanel": "./src/pica/render/ui/PicaOrder/PicaOrderPanel.ts",\n\t"./PicaOrder/PicaOrderPanel.ts": "./src/pica/render/ui/PicaOrder/PicaOrderPanel.ts",\n\t"./PicaPartyList/PicaMyRoomNavigationPanel": "./src/pica/render/ui/PicaPartyList/PicaMyRoomNavigationPanel.ts",\n\t"./PicaPartyList/PicaMyRoomNavigationPanel.ts": "./src/pica/render/ui/PicaPartyList/PicaMyRoomNavigationPanel.ts",\n\t"./PicaPartyList/PicaPartyListPanel": "./src/pica/render/ui/PicaPartyList/PicaPartyListPanel.ts",\n\t"./PicaPartyList/PicaPartyListPanel.ts": "./src/pica/render/ui/PicaPartyList/PicaPartyListPanel.ts",\n\t"./PicaPartyList/PicaPartyNavigationPanel": "./src/pica/render/ui/PicaPartyList/PicaPartyNavigationPanel.ts",\n\t"./PicaPartyList/PicaPartyNavigationPanel.ts": "./src/pica/render/ui/PicaPartyList/PicaPartyNavigationPanel.ts",\n\t"./PicaPropFun/PicaPropFunPanel": "./src/pica/render/ui/PicaPropFun/PicaPropFunPanel.ts",\n\t"./PicaPropFun/PicaPropFunPanel.ts": "./src/pica/render/ui/PicaPropFun/PicaPropFunPanel.ts",\n\t"./PicaRecaste/PicaRecastePanel": "./src/pica/render/ui/PicaRecaste/PicaRecastePanel.ts",\n\t"./PicaRecaste/PicaRecastePanel.ts": "./src/pica/render/ui/PicaRecaste/PicaRecastePanel.ts",\n\t"./PicaRecharge/PicaRechargePanel": "./src/pica/render/ui/PicaRecharge/PicaRechargePanel.ts",\n\t"./PicaRecharge/PicaRechargePanel.ts": "./src/pica/render/ui/PicaRecharge/PicaRechargePanel.ts",\n\t"./PicaRewardTip/PicaRewardTipPanel": "./src/pica/render/ui/PicaRewardTip/PicaRewardTipPanel.ts",\n\t"./PicaRewardTip/PicaRewardTipPanel.ts": "./src/pica/render/ui/PicaRewardTip/PicaRewardTipPanel.ts",\n\t"./PicaRoam/PicaRoamDrawPanel": "./src/pica/render/ui/PicaRoam/PicaRoamDrawPanel.ts",\n\t"./PicaRoam/PicaRoamDrawPanel.ts": "./src/pica/render/ui/PicaRoam/PicaRoamDrawPanel.ts",\n\t"./PicaRoam/PicaRoamEffectOnePanel": "./src/pica/render/ui/PicaRoam/PicaRoamEffectOnePanel.ts",\n\t"./PicaRoam/PicaRoamEffectOnePanel.ts": "./src/pica/render/ui/PicaRoam/PicaRoamEffectOnePanel.ts",\n\t"./PicaRoam/PicaRoamListPanel": "./src/pica/render/ui/PicaRoam/PicaRoamListPanel.ts",\n\t"./PicaRoam/PicaRoamListPanel.ts": "./src/pica/render/ui/PicaRoam/PicaRoamListPanel.ts",\n\t"./PicaRoam/PicaRoamPanel": "./src/pica/render/ui/PicaRoam/PicaRoamPanel.ts",\n\t"./PicaRoam/PicaRoamPanel.ts": "./src/pica/render/ui/PicaRoam/PicaRoamPanel.ts",\n\t"./PicaRoam/PicaRoamPreviewPanel": "./src/pica/render/ui/PicaRoam/PicaRoamPreviewPanel.ts",\n\t"./PicaRoam/PicaRoamPreviewPanel.ts": "./src/pica/render/ui/PicaRoam/PicaRoamPreviewPanel.ts",\n\t"./PicaRoomList/PicaRoomListPanel": "./src/pica/render/ui/PicaRoomList/PicaRoomListPanel.ts",\n\t"./PicaRoomList/PicaRoomListPanel.ts": "./src/pica/render/ui/PicaRoomList/PicaRoomListPanel.ts",\n\t"./PicaTask/PicaTaskItem": "./src/pica/render/ui/PicaTask/PicaTaskItem.ts",\n\t"./PicaTask/PicaTaskItem.ts": "./src/pica/render/ui/PicaTask/PicaTaskItem.ts",\n\t"./PicaTask/PicaTaskMainPanel": "./src/pica/render/ui/PicaTask/PicaTaskMainPanel.ts",\n\t"./PicaTask/PicaTaskMainPanel.ts": "./src/pica/render/ui/PicaTask/PicaTaskMainPanel.ts",\n\t"./PicaTask/PicaTaskPanel": "./src/pica/render/ui/PicaTask/PicaTaskPanel.ts",\n\t"./PicaTask/PicaTaskPanel.ts": "./src/pica/render/ui/PicaTask/PicaTaskPanel.ts",\n\t"./PicaTask/PicaTaskSidePanel": "./src/pica/render/ui/PicaTask/PicaTaskSidePanel.ts",\n\t"./PicaTask/PicaTaskSidePanel.ts": "./src/pica/render/ui/PicaTask/PicaTaskSidePanel.ts",\n\t"./PicaTreasure/PicaTreasureAllOpenPanel": "./src/pica/render/ui/PicaTreasure/PicaTreasureAllOpenPanel.ts",\n\t"./PicaTreasure/PicaTreasureAllOpenPanel.ts": "./src/pica/render/ui/PicaTreasure/PicaTreasureAllOpenPanel.ts",\n\t"./PicaTreasure/PicaTreasureOpenPanel": "./src/pica/render/ui/PicaTreasure/PicaTreasureOpenPanel.ts",\n\t"./PicaTreasure/PicaTreasureOpenPanel.ts": "./src/pica/render/ui/PicaTreasure/PicaTreasureOpenPanel.ts",\n\t"./PicaTreasure/PicaTreasurePanel": "./src/pica/render/ui/PicaTreasure/PicaTreasurePanel.ts",\n\t"./PicaTreasure/PicaTreasurePanel.ts": "./src/pica/render/ui/PicaTreasure/PicaTreasurePanel.ts",\n\t"./PicaTreasure/PicaTreasurePreviewPanel": "./src/pica/render/ui/PicaTreasure/PicaTreasurePreviewPanel.ts",\n\t"./PicaTreasure/PicaTreasurePreviewPanel.ts": "./src/pica/render/ui/PicaTreasure/PicaTreasurePreviewPanel.ts",\n\t"./PicaWork/PicaWorkOldPanel": "./src/pica/render/ui/PicaWork/PicaWorkOldPanel.ts",\n\t"./PicaWork/PicaWorkOldPanel.ts": "./src/pica/render/ui/PicaWork/PicaWorkOldPanel.ts",\n\t"./PicaWork/PicaWorkPanel": "./src/pica/render/ui/PicaWork/PicaWorkPanel.ts",\n\t"./PicaWork/PicaWorkPanel.ts": "./src/pica/render/ui/PicaWork/PicaWorkPanel.ts",\n\t"./SinglePanel/PicaItemTipsPanel": "./src/pica/render/ui/SinglePanel/PicaItemTipsPanel.ts",\n\t"./SinglePanel/PicaItemTipsPanel.ts": "./src/pica/render/ui/SinglePanel/PicaItemTipsPanel.ts",\n\t"./SinglePanel/PicaSingleManager": "./src/pica/render/ui/SinglePanel/PicaSingleManager.ts",\n\t"./SinglePanel/PicaSingleManager.ts": "./src/pica/render/ui/SinglePanel/PicaSingleManager.ts",\n\t"./Task/TaskPanel": "./src/pica/render/ui/Task/TaskPanel.ts",\n\t"./Task/TaskPanel.ts": "./src/pica/render/ui/Task/TaskPanel.ts",\n\t"./index": "./src/pica/render/ui/index.ts",\n\t"./index.ts": "./src/pica/render/ui/index.ts",\n\t"./pica.Renderuimanager": "./src/pica/render/ui/pica.Renderuimanager.ts",\n\t"./pica.Renderuimanager.ts": "./src/pica/render/ui/pica.Renderuimanager.ts",\n\t"./pica.base.panel": "./src/pica/render/ui/pica.base.panel.ts",\n\t"./pica.base.panel.ts": "./src/pica/render/ui/pica.base.panel.ts"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error("Cannot find module \'" + req + "\'");\n\t\te.code = \'MODULE_NOT_FOUND\';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = "./src/pica/render/ui sync recursive ^\\\\.\\\\/.*$";\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui_sync_^\\.\\/.*$?')},"./src/pica/render/ui/Activity/ActivityPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActivityPanel", function() { return ActivityPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\nvar ActivityPanel = /** @class */ (function (_super) {\n    __extends(ActivityPanel, _super);\n    function ActivityPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].ACTIVITY_NAME;\n        return _this;\n    }\n    ActivityPanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content.x = width - 20 * this.dpr;\n        this.content.y = this.content.height * 0.5 + 90 * this.dpr;\n        this.setSize(w, h);\n        this.mGameScroll.refreshMask();\n    };\n    ActivityPanel.prototype.show = function (param) {\n        if (this.mInitialized) {\n            this.setInteractive();\n        }\n        _super.prototype.show.call(this, param);\n        this.checkUpdateActive();\n    };\n    ActivityPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mGameScroll.addListen();\n    };\n    ActivityPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mGameScroll.removeListen();\n    };\n    ActivityPanel.prototype.updateUIState = function (active) {\n        if (!this.mInitialized) {\n            return;\n        }\n        if (active.name === "activity.taskbtn") {\n            var btn = (this.mGameScroll.getItemAt(3));\n            btn.visible = active.visible;\n            this.mGameScroll.Sort();\n        }\n    };\n    ActivityPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "activity/activity.png", "activity/activity.json");\n        _super.prototype.preload.call(this);\n    };\n    ActivityPanel.prototype.init = function () {\n        var _this = this;\n        var conWidth = 60 * this.dpr, conHeight = 270 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWidth, conHeight);\n        this.add(this.content);\n        this.mGameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: 0,\n            y: 0,\n            width: this.content.width,\n            height: this.content.height - 50 * this.dpr,\n            zoom: this.scale,\n            dpr: this.dpr,\n            align: 2,\n            orientation: 0,\n            space: 10 * this.dpr,\n            selfevent: true,\n            cellupCallBack: function (gameobject) {\n                _this.onPointerUpHandler(gameobject);\n            }\n        });\n        this.content.add(this.mGameScroll);\n        var img = this.scene.make.image({ key: this.key, frame: "home_more" });\n        img.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.content.add(img);\n        img.y = conHeight * 0.5 - img.height * 0.5;\n        for (var i = 0; i < 4; i++) {\n            var frame = "icon_" + (i + 1);\n            var image = this.scene.make.image({ key: this.key, frame: frame });\n            image.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n            image.name = i + 1 + "";\n            this.mGameScroll.addItem(image);\n        }\n        this.mGameScroll.Sort();\n        this.resize(conWidth, conHeight);\n        _super.prototype.init.call(this);\n    };\n    ActivityPanel.prototype.onClickHandler = function (name) {\n        if (name === "4") {\n            this.render.renderEmitter("showPanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICATASK_NAME);\n        }\n        else if (name === "3") {\n            this.render.renderEmitter("showPanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAFRIEND_NAME);\n        }\n        else if (name === "2") {\n            this.render.renderEmitter("showPanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAORDER_NAME);\n        }\n        else if (name === "1") {\n            this.render.renderEmitter("showPanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICARECHARGE_NAME);\n        }\n    };\n    ActivityPanel.prototype.checkUpdateActive = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr, _i, arr_1, data;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.render.mainPeer.getActiveUIData("Activity")];\n                    case 1:\n                        arr = _a.sent();\n                        if (arr) {\n                            for (_i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n                                data = arr_1[_i];\n                                this.updateUIState(data);\n                            }\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ActivityPanel.prototype.onPointerUpHandler = function (gameobject) {\n        var name = gameobject.name;\n        this.onClickHandler(name);\n    };\n    return ActivityPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Activity/ActivityPanel.ts?')},"./src/pica/render/ui/Bottom/BottomPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BottomPanel", function() { return BottomPanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var _PicaNewMain_PicaNewNavigatePanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../PicaNewMain/PicaNewNavigatePanel */ "./src/pica/render/ui/PicaNewMain/PicaNewNavigatePanel.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar BottomPanel = /** @class */ (function (_super) {\n    __extends(BottomPanel, _super);\n    function BottomPanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.chatCatchArr = [];\n        _this.chatMaxLen = 100;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].uicommon, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].iconcommon];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].BOTTOM;\n        return _this;\n    }\n    BottomPanel.prototype.show = function (param) {\n        _super.prototype.show.call(this, param);\n        if (this.initialized) {\n            this.checkUpdateActive();\n        }\n    };\n    BottomPanel.prototype.resize = function (w, h) {\n        var zoom = this.scale;\n        var width = this.scene.cameras.main.width;\n        var height = this.scene.cameras.main.height;\n        this.mInput.resize();\n        this.y = height;\n        this.mNavigate.y = -this.mNavigate.height;\n        this.mInput.y = this.mNavigate.y - this.mInput.height;\n        this.updateOutputLayout();\n    };\n    BottomPanel.prototype.addListen = function () {\n        this.mInput.on("enter", this.onSendMsgHandler, this);\n        this.mInput.on("pointerScene", this.onPointerSceneHandler, this);\n        this.resizeColtroll.addListen();\n        this.resizeColtroll.on("toggleSize", this.onToggleSizeHandler, this);\n        // this.mInput.on("focus", this.onFocusHandler, this);\n        // this.mInput.on("blur", this.onBlurHandler, this);\n    };\n    BottomPanel.prototype.removeListen = function () {\n        this.mInput.on("enter", this.onSendMsgHandler, this);\n        this.mInput.off("pointerScene", this.onPointerSceneHandler, this);\n        this.resizeColtroll.removeListen();\n        this.resizeColtroll.off("toggleSize", this.onToggleSizeHandler, this);\n    };\n    BottomPanel.prototype.appendChat = function (val) {\n        this.chatCatchArr.push(val);\n        if (this.chatCatchArr.length > this.chatMaxLen)\n            this.chatCatchArr.shift();\n        if (this.mOutput) {\n            this.mOutput.appendChat(val);\n        }\n    };\n    BottomPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "bottom/bottom.png", "bottom/bottom.json");\n        _super.prototype.preload.call(this);\n    };\n    BottomPanel.prototype.showKeyboard = function (width, height) {\n        var ch = this.cameraHeight / this.scale;\n        var keyboard = ch - height / this.scale;\n        if (keyboard === 0) {\n            // \n            this.hideKeyboard();\n            return;\n        }\n        this.mInput.y = (-keyboard - this.mInput.height);\n        // this.mOutput.y = this.mInput.y - 1 * this.dpr - this.mOutput.height;\n        // this.resizeColtroll.y = this.mInput.y - this.resizeColtroll.height * 0.5;\n        // this.mOutput.updateLayout();\n        this.updateOutputLayout();\n    };\n    BottomPanel.prototype.hideKeyboard = function () {\n        this.mInput.y = this.mNavigate.y - this.mInput.height;\n        this.updateOutputLayout();\n        // this.mOutput.y = this.mInput.y - 1 * this.dpr - this.mOutput.height;\n        // this.resizeColtroll.y = this.mInput.y - this.resizeColtroll.height * 0.5;\n        // this.mOutput.updateLayout();\n    };\n    BottomPanel.prototype.getInputFocusing = function () {\n        return this.mInput.getFocusing();\n    };\n    BottomPanel.prototype.init = function () {\n        this.mOutput = new OutputContainer(this.scene, this.dpr, this.scale);\n        this.mInput = new InputContainer(this.scene, this.key, this.dpr);\n        this.mNavigate = new _PicaNewMain_PicaNewNavigatePanel__WEBPACK_IMPORTED_MODULE_5__["PicaNewNavigatePanel"](this.scene, this.key, this.dpr);\n        this.mNavigate.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onNavigateHandler));\n        this.resizeColtroll = new ResizeControll(this.scene, this.key, this.dpr);\n        this.add([this.mOutput, this.mInput, this.mNavigate, this.resizeColtroll]);\n        this.resize(this.width, this.mOutput.height + this.mInput.height + this.mNavigate.height);\n        _super.prototype.init.call(this);\n        this.onToggleSizeHandler(false);\n    };\n    BottomPanel.prototype.checkUpdateActive = function () {\n        var _this = this;\n        // this.render.mainPeer.getCurRoom()\n        //     .then((curRoom) => {\n        //         if (curRoom)\n        //             this.setGiftButtonState(curRoom.openingParty);\n        //     });\n        this.render.mainPeer.getActiveUIData(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICACHAT_NAME)\n            .then(function (arr) {\n            if (arr) {\n                for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n                    var data = arr_1[_i];\n                    _this.updateUIState(data);\n                }\n            }\n        });\n    };\n    BottomPanel.prototype.sendChat = function (val) {\n        if (!val) {\n            return;\n        }\n        var mediator = this.mediator;\n        if (!mediator)\n            return;\n        mediator.sendChat(val);\n    };\n    BottomPanel.prototype.onSendMsgHandler = function (val) {\n        this.sendChat(val);\n    };\n    BottomPanel.prototype.onNavigateHandler = function (tag, data) {\n        if (tag === "bag") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].BOTTOM + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICABAG_NAME);\n        }\n        else if (tag === "friend") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].BOTTOM + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAFRIEND_NAME);\n        }\n        else if (tag === "avatar") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].BOTTOM + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAAVATAR_NAME);\n        }\n        else if (tag === "shop") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].BOTTOM + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAMARKET_NAME);\n        }\n        else if (tag === "explore") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].BOTTOM + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEXPLORELIST_NAME);\n        }\n        else if (tag === "home") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].BOTTOM + "_gohome");\n        }\n    };\n    BottomPanel.prototype.onToggleSizeHandler = function (expand) {\n        this.expanded = expand;\n        if (expand) {\n            this.mOutput.expand();\n            this.resizeColtroll.expand();\n        }\n        else {\n            this.mOutput.collapse();\n            this.resizeColtroll.collapse();\n        }\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].CHAT_PANEL_EXTPAND, expand);\n        this.updateOutputLayout();\n    };\n    BottomPanel.prototype.onPointerSceneHandler = function (gameobjects) {\n        if (gameobjects && gameobjects.length > 0) {\n            for (var _i = 0, gameobjects_1 = gameobjects; _i < gameobjects_1.length; _i++) {\n                var gameobject = gameobjects_1[_i];\n                var parent_1 = gameobject.parentContainer;\n                if (parent_1 === this.resizeColtroll)\n                    return;\n            }\n        }\n        this.mInput.blurInput();\n    };\n    BottomPanel.prototype.updateOutputLayout = function () {\n        if (this.expanded) {\n            this.mOutput.x = 0;\n            this.mOutput.y = this.mInput.y - 1 * this.dpr - this.mOutput.height;\n            this.resizeColtroll.y = this.mOutput.y - this.resizeColtroll.height * 0.5;\n            this.mOutput.expand();\n        }\n        else {\n            this.mOutput.x = this.resizeColtroll.width - 1 * this.dpr;\n            this.mOutput.y = this.mInput.y - 1 * this.dpr - this.mOutput.height;\n            this.resizeColtroll.y = this.mInput.y - 1 * this.dpr - this.resizeColtroll.height * 0.5;\n            this.mOutput.collapse();\n        }\n        this.mOutput.updateLayout();\n    };\n    BottomPanel.prototype.onFocusHandler = function () {\n        this.showKeyboard(window.document.documentElement.clientWidth * window.devicePixelRatio, window.document.documentElement.clientHeight * window.devicePixelRatio);\n    };\n    BottomPanel.prototype.onBlurHandler = function () {\n        this.hideKeyboard();\n    };\n    Object.defineProperty(BottomPanel.prototype, "mediator", {\n        get: function () {\n            return this.render.mainPeer[this.key];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return BottomPanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_6__["PicaBasePanel"]));\n\nvar OutputContainer = /** @class */ (function (_super) {\n    __extends(OutputContainer, _super);\n    function OutputContainer(scene, dpr, scaleRatio) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.scaleRatio = scaleRatio;\n        _this.background = _this.scene.make.graphics(undefined, false);\n        _this.background.clear();\n        var width = _this.scene.cameras.main.width;\n        var zoom = _this.scaleRatio;\n        _this.mOutputText = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](_this.scene, 0, 0, "", {\n            fontSize: 12 * _this.dpr + "px",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            stroke: "#000000",\n            strokeThickness: 1 * _this.dpr * zoom,\n            shadow: {\n                offsetX: 0,\n                offsetY: 0,\n                color: "#000",\n                blur: 4,\n                stroke: true,\n                fill: true\n            },\n            wrap: {\n                mode: "char",\n                width: width - 12 * _this.dpr * zoom\n            }\n        });\n        _this.mTextArea = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["TextArea"](_this.scene, {\n            x: width * 0.5 + 8 * _this.dpr * zoom,\n            y: 6 * _this.dpr,\n            textWidth: width - 4 * _this.dpr * zoom,\n            textHeight: 126 * _this.dpr * zoom,\n            text: _this.mOutputText,\n        })\n            .layout();\n        _this.updateLayout();\n        _this.add([\n            _this.background,\n            _this.mTextArea,\n            _this.mOutputText,\n        ]);\n        return _this;\n    }\n    OutputContainer.prototype.resize = function (width, height) {\n        this.setSize(width, height);\n        this.background.clear();\n        this.background.fillStyle(0, 0.6);\n        this.background.fillRect(0, 0, width + 1 * this.dpr, height);\n        this.mTextArea.childrenMap.child.setMinSize(width * this.scaleRatio, height * this.scaleRatio);\n        this.mTextArea.layout();\n        this.mTextArea.setChildOY(4 * this.dpr * this.scaleRatio);\n        this.updateLayout();\n        var textMask = this.mTextArea.childrenMap.text;\n        textMask.y = 4 * this.dpr;\n        this.mTextArea.scrollToBottom();\n    };\n    OutputContainer.prototype.expand = function () {\n        this.resize(this.scene.cameras.main.width, 125.33 * this.dpr);\n        this.mTextArea.setScrollerEnable(true);\n    };\n    OutputContainer.prototype.collapse = function () {\n        this.resize(296 * this.dpr, 40 * this.dpr);\n        this.mTextArea.setScrollerEnable(false);\n    };\n    OutputContainer.prototype.updateLayout = function () {\n        var matrix = this.getWorldTransformMatrix(this.getLocalTransformMatrix());\n        this.mTextArea.setPosition(this.width * this.scaleRatio * 0.5 + 8 * this.dpr, matrix.ty + this.mTextArea.height * 0.5);\n        this.mTextArea.scrollToBottom();\n    };\n    OutputContainer.prototype.appendChat = function (val) {\n        if (this.mTextArea) {\n            this.mTextArea.appendText(val);\n            this.mTextArea.scrollToBottom();\n        }\n    };\n    return OutputContainer;\n}(Phaser.GameObjects.Container));\nvar InputContainer = /** @class */ (function (_super) {\n    __extends(InputContainer, _super);\n    function InputContainer(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.mFocusing = false;\n        _this.background = scene.make.graphics(undefined, false);\n        var text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("chat.placeholder");\n        _this.emoji = scene.make.image({\n            key: key,\n            frame: "home_face",\n        });\n        _this.emoji.x = 12.67 * dpr + _this.emoji.width * 0.5;\n        var w = _this.scene.cameras.main.width;\n        _this.inputText = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["LabelInput"](_this.scene, {\n            width: w - 46 * _this.dpr,\n            height: 16 * _this.dpr,\n            placeholder: text,\n            fontSize: 11 * _this.dpr + "px",\n            color: "#ffffff",\n        }).setOrigin(0, 0.5).setAutoBlur(false);\n        _this.add([_this.background, _this.emoji, _this.inputText]);\n        _this.inputText.on("enter", _this.onEnterHandler, _this);\n        _this.inputText.on("blur", _this.onInputBlurHandler, _this);\n        _this.inputText.on("focus", _this.onInputFocusHandler, _this);\n        return _this;\n    }\n    InputContainer.prototype.resize = function () {\n        var w = this.scene.cameras.main.width;\n        this.setSize(w, 38.33 * this.dpr);\n        this.inputText.x = 46 * this.dpr;\n        this.inputText.y = this.height * 0.5;\n        this.inputText.setSize(this.inputText.width, this.height);\n        this.emoji.y = this.height * 0.5;\n        this.background.clear();\n        this.background.fillStyle(0x000000, 0.6);\n        this.background.fillRect(0, 0, w, this.height);\n        this.background.input = undefined;\n        this.background.setInteractive(new Phaser.Geom.Rectangle(0, 0, w / this.scale, this.height / this.scale), Phaser.Geom.Rectangle.Contains);\n        // this.inputText.resize(w - 46 * this.dpr, this.height);\n    };\n    InputContainer.prototype.setText = function (text) {\n        this.inputText.setText(text);\n    };\n    InputContainer.prototype.blurInput = function () {\n        this.inputText.setBlur();\n    };\n    InputContainer.prototype.getFocusing = function () {\n        return this.mFocusing;\n    };\n    InputContainer.prototype.onEnterHandler = function (text) {\n        this.emit("enter", text);\n        // this.inputText.setBlur();\n        this.inputText.setText("");\n    };\n    InputContainer.prototype.onInputBlurHandler = function () {\n        this.scene.input.off("pointerdown", this.onPointerSceneHandler, this);\n        // this.emit("blur");\n        this.inputText.setBlur();\n    };\n    InputContainer.prototype.onInputFocusHandler = function () {\n        this.scene.input.on("pointerdown", this.onPointerSceneHandler, this);\n        this.mFocusing = true;\n        // this.emit("focus");\n    };\n    InputContainer.prototype.onPointerSceneHandler = function (pointer, currentlyOver) {\n        this.emit("pointerScene", currentlyOver);\n        this.inputText.setBlur();\n        this.mFocusing = false;\n    };\n    return InputContainer;\n}(Phaser.GameObjects.Container));\nvar ResizeControll = /** @class */ (function (_super) {\n    __extends(ResizeControll, _super);\n    function ResizeControll(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.expaned = true;\n        _this.background = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["Button"](_this.scene, key, "home_chat_pack_up_bg");\n        _this.background.tweenEnable = false;\n        _this.bubble = _this.scene.make.image({\n            key: key,\n            frame: "home_chat"\n        });\n        _this.arrow = _this.scene.make.image({\n            key: key,\n            frame: "home_unwind"\n        });\n        // this.arrow = new Button(this.scene, key, "home_unwind");\n        _this.setSize(_this.background.width, _this.background.height);\n        _this.bubble.x = (-_this.width + _this.bubble.width) * 0.5 + 12.67 * dpr;\n        _this.arrow.x = (-_this.width + _this.arrow.width) * 0.5 + 43 * dpr;\n        _this.add([_this.background, _this.bubble, _this.arrow]);\n        _this.x = _this.background.width * 0.5;\n        return _this;\n    }\n    ResizeControll.prototype.addListen = function () {\n        this.background.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onToggleSizeHandler, this);\n    };\n    ResizeControll.prototype.removeListen = function () {\n        this.background.off(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onToggleSizeHandler, this);\n    };\n    ResizeControll.prototype.expand = function () {\n        this.background.setFrame("home_chat_unwind_bg");\n        this.arrow.scaleY = -1;\n        this.expaned = true;\n        this.setSize(this.background.width, this.background.height);\n    };\n    ResizeControll.prototype.collapse = function () {\n        this.background.setFrame("home_chat_pack_up_bg");\n        this.arrow.scaleY = 1;\n        this.expaned = false;\n        this.setSize(this.background.width, this.background.height);\n    };\n    ResizeControll.prototype.getExpaned = function () {\n        return this.expaned;\n    };\n    ResizeControll.prototype.onToggleSizeHandler = function () {\n        this.expaned = !this.expaned;\n        this.emit("toggleSize", this.expaned);\n    };\n    return ResizeControll;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Bottom/BottomPanel.ts?')},"./src/pica/render/ui/Bubble/InteractionBubbleCell.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InteractionBubbleCell", function() { return InteractionBubbleCell; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar InteractionBubbleCell = /** @class */ (function (_super) {\n    __extends(InteractionBubbleCell, _super);\n    function InteractionBubbleCell(scene, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.mWdith = 78;\n        _this.mHeight = 78;\n        _this.width = _this.mWdith * dpr;\n        _this.height = _this.mHeight * dpr;\n        return _this;\n    }\n    InteractionBubbleCell.prototype.setContentData = function (content, handler) {\n        this.content = content;\n        if (this.handler)\n            this.handler.clear();\n        this.handler = handler;\n    };\n    InteractionBubbleCell.prototype.load = function (resName, url, jsonUrl) {\n        this.createAnimation();\n        this.mBubbleAni.load(resName, url, jsonUrl);\n        this.mBubbleAni.play();\n    };\n    InteractionBubbleCell.prototype.show = function () {\n        if (this.mBubbleAni) {\n            this.add(this.mBubbleAni);\n        }\n        this.removeDelay();\n    };\n    InteractionBubbleCell.prototype.hide = function () {\n        if (this.mBubbleAni) {\n            this.remove(this.mBubbleAni);\n        }\n        if (this.mRemoveDelay) {\n            clearTimeout(this.mRemoveDelay);\n            this.mRemoveDelay = null;\n        }\n    };\n    InteractionBubbleCell.prototype.destroy = function () {\n        this.hide();\n        if (this.mBubbleAni) {\n            this.mBubbleAni.destroy();\n        }\n        if (this.handler)\n            this.handler.clear();\n        this.mBubbleAni = null;\n        this.handler = null;\n        _super.prototype.destroy.call(this);\n    };\n    InteractionBubbleCell.prototype.createAnimation = function () {\n        // this.mBubbleAni = new DragonbonesAnimation(this.scene);\n        // this.mBubbleAni = new FrameAnimation(this.scene);\n        this.mBubbleAni = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BubbleAnimation"](this.scene);\n        this.mBubbleAni.width = this.width;\n        this.mBubbleAni.height = this.height;\n        var POINTER_DOWN = Phaser.Input.Events.POINTER_DOWN;\n        this.mBubbleAni.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.mBubbleAni.width * 2, this.mBubbleAni.height * 2), Phaser.Geom.Rectangle.Contains);\n        this.mBubbleAni.on(POINTER_DOWN, this.onBubbleClick, this);\n    };\n    InteractionBubbleCell.prototype.onBubbleClick = function () {\n        if (this.handler)\n            this.handler.runWith(this.content);\n    };\n    InteractionBubbleCell.prototype.removeDelay = function () {\n        var _this = this;\n        this.mRemoveDelay = setTimeout(function () {\n            if (_this.handler)\n                _this.handler.runWith(_this.content.id);\n            _this.hide();\n        }, this.content.duration);\n    };\n    return InteractionBubbleCell;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Bubble/InteractionBubbleCell.ts?')},"./src/pica/render/ui/Bubble/InteractionBubbleContainer.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InteractionBubbleContainer", function() { return InteractionBubbleContainer; });\n/* harmony import */ var _InteractionBubbleCell__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InteractionBubbleCell */ "./src/pica/render/ui/Bubble/InteractionBubbleCell.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar InteractionBubbleContainer = /** @class */ (function (_super) {\n    __extends(InteractionBubbleContainer, _super);\n    function InteractionBubbleContainer(scene, dpr) {\n        return _super.call(this, scene) || this;\n    }\n    Object.defineProperty(InteractionBubbleContainer.prototype, "show", {\n        get: function () {\n            return this.mShow;\n        },\n        set: function (value) {\n            this.mShow = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    InteractionBubbleContainer.prototype.hide = function () {\n        this.mShow = false;\n        if (this.parentContainer) {\n            this.parentContainer.remove(this);\n        }\n    };\n    InteractionBubbleContainer.prototype.setFollow = function (gameObject, fromScene, posFunc) {\n        _super.prototype.setFollow.call(this, gameObject, fromScene, posFunc);\n    };\n    InteractionBubbleContainer.prototype.setBubble = function (content, handler) {\n        this.id = content.id;\n        var resName = content.display["resName"];\n        var resUrl = content.display.texturePath;\n        var jsonUrl = content.display.dataPath;\n        if (!this.mBubble) {\n            this.mBubble = new _InteractionBubbleCell__WEBPACK_IMPORTED_MODULE_0__["InteractionBubbleCell"](this.scene, this.dpr);\n            this.mBubble.load(resName, resUrl, jsonUrl);\n            this.add(this.mBubble);\n        }\n        this.mBubble.setContentData(content, handler);\n        this.mBubble.show();\n        return this.mBubble;\n    };\n    InteractionBubbleContainer.prototype.destroy = function () {\n        this.hide();\n        if (this.mBubble)\n            this.mBubble.destroy();\n        this.mBubble = null;\n        _super.prototype.destroy.call(this);\n    };\n    return InteractionBubbleContainer;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BaseUI"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Bubble/InteractionBubbleContainer.ts?')},"./src/pica/render/ui/Bubble/InteractiveBubblePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InteractiveBubblePanel", function() { return InteractiveBubblePanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _InteractionBubbleContainer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./InteractionBubbleContainer */ "./src/pica/render/ui/Bubble/InteractionBubbleContainer.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InteractiveBubblePanel = /** @class */ (function (_super) {\n    __extends(InteractiveBubblePanel, _super);\n    function InteractiveBubblePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.map = new Map();\n        // this.scale = 1;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].BUBBLE_NAME;\n        return _this;\n    }\n    InteractiveBubblePanel.prototype.resize = function (width, height) {\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(width, height);\n    };\n    InteractiveBubblePanel.prototype.init = function () {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var zoom = this.scale;\n        this.resize(width, height);\n        _super.prototype.init.call(this);\n    };\n    InteractiveBubblePanel.prototype.destroy = function () {\n        if (this.map) {\n            for (var key in this.map) {\n                var bubble = this.map.get(Number(key));\n                if (bubble)\n                    bubble.destroy();\n            }\n            this.map.clear();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    InteractiveBubblePanel.prototype.clearInteractionBubble = function (id) {\n        if (this.map.has(id)) {\n            var bubble = this.map.get(id);\n            bubble.destroy();\n            this.map.delete(id);\n        }\n    };\n    InteractiveBubblePanel.prototype.showInteractionBubble = function (content, ele) {\n        var _this = this;\n        var dpr = this.dpr;\n        content.display["resName"] = null; // "gems";\n        content.display.texturePath = utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getUIRes(dpr, "bubble/bubblebg.png"); // "resources/test/columns";\n        content.display.dataPath = utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getUIRes(dpr, "bubble/tipsicon.png"); // "resources/test/columns";\n        var key = content.id;\n        if (this.mBubble)\n            this.mBubble.hide();\n        if (this.map.has(key)) {\n            this.mBubble = this.map.get(key);\n        }\n        else {\n            this.mBubble = new _InteractionBubbleContainer__WEBPACK_IMPORTED_MODULE_3__["InteractionBubbleContainer"](this.scene, dpr);\n            this.map.set(key, this.mBubble);\n        }\n        this.mBubble.setBubble(content, new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.onInteractiveBubbleHandler));\n        var playScene = this.render.sceneManager.getSceneByName(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["PlayScene"].name);\n        if (!playScene) {\n            utils__WEBPACK_IMPORTED_MODULE_2__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        this.updateBubblePos(ele, playScene);\n        this.mBubble.setFollow(ele, playScene, function (obj) {\n            _this.updateBubblePos(ele, obj.scene);\n        });\n        this.mBubble.show = true;\n        this.add(this.mBubble);\n    };\n    InteractiveBubblePanel.prototype.updateBubblePos = function (gameObject, scene) {\n        var dpr = this.dpr;\n        var zoom = this.render.uiScale;\n        var display = gameObject.getDisplay();\n        if (!display) {\n            return;\n        }\n        var position = display.getWorldTransformMatrix();\n        if (position) {\n            var pos = utils__WEBPACK_IMPORTED_MODULE_2__["Tool"].getPosByScenes(scene, new utils__WEBPACK_IMPORTED_MODULE_2__["Pos"](position.tx, (position.ty - 33 * dpr * zoom)));\n            this.mBubble.setPosition(pos.x, pos.y);\n        }\n    };\n    InteractiveBubblePanel.prototype.update = function () {\n        if (!this.map)\n            return;\n        this.map.forEach(function (bubble) {\n            if (bubble && bubble.show)\n                bubble.updatePos();\n        });\n    };\n    InteractiveBubblePanel.prototype.onInteractiveBubbleHandler = function (data) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_1__["RENDER_PEER"] + "_" + this.key + "_queryinteractive", data);\n    };\n    return InteractiveBubblePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Bubble/InteractiveBubblePanel.ts?')},"./src/pica/render/ui/CharacterInfo/CharacterAttributePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharacterAttributePanel", function() { return CharacterAttributePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar CharacterAttributePanel = /** @class */ (function (_super) {\n    __extends(CharacterAttributePanel, _super);\n    function CharacterAttributePanel(scene, x, y, width, height, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.attriItems = [];\n        _this.setSize(width, height);\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.mspace = 10 * dpr;\n        return _this;\n    }\n    Object.defineProperty(CharacterAttributePanel.prototype, "space", {\n        set: function (value) {\n            this.mspace = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CharacterAttributePanel.prototype.setAttributeData = function (datas) {\n        var len = datas.length;\n        var scaleRadio = (len > 4 ? 2 : 1);\n        var width = this.width;\n        var height = this.height;\n        var cheight = 20 * this.dpr;\n        var cwidth = width / 2;\n        var posy = -height * 0.5 + 10 * this.dpr;\n        for (var _i = 0, _a = this.attriItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n        }\n        for (var i = 0; i < len; i++) {\n            var item = void 0;\n            if (i < this.attriItems.length) {\n                item = this.attriItems[i];\n            }\n            else {\n                item = new PlayerAttributeValue(this.scene, 0, 0, cwidth, cheight, this.key, this.dpr);\n                this.add(item);\n                this.attriItems.push(item);\n            }\n            var x = (width - width / scaleRadio) * 0.5 * (i < 4 ? -1 : 1);\n            var y = posy + cheight * 0.5 + (cheight + this.mspace) * (i % 4);\n            item.setPosition(x, y);\n            item.setInfo(datas[i]);\n            item.visible = true;\n        }\n    };\n    return CharacterAttributePanel;\n}(Phaser.GameObjects.Container));\n\nvar PlayerAttributeValue = /** @class */ (function (_super) {\n    __extends(PlayerAttributeValue, _super);\n    function PlayerAttributeValue(scene, x, y, width, height, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.setSize(width, height);\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["DynamicImage"](_this.scene, 0, 0);\n        _this.icon.x = -width * 0.5 + 10 * dpr;\n        // this.icon.setTexture(key, "health");\n        _this.nameText = _this.scene.make.text({\n            x: _this.icon.x + 13 * dpr, y: 0, text: "Attack:",\n            style: { fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT, fontSize: 11 * dpr, color: "#131313" }\n        }).setOrigin(0, 0.5);\n        _this.valueText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, 0, 0, "100", {\n            color: "#131313",\n            fontSize: 11 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT,\n        }).setOrigin(0, 0.5);\n        _this.valueText.x = _this.nameText.x + _this.nameText.width;\n        _this.add([_this.icon, _this.nameText, _this.valueText]);\n        return _this;\n    }\n    PlayerAttributeValue.prototype.setInfo = function (data) {\n        var _this = this;\n        if (data.display) {\n            var url = utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(data.display.texturePath);\n            this.icon.load(url, this, function () {\n                _this.icon.displayWidth = 20 * _this.dpr;\n                _this.icon.scaleY = _this.icon.scaleX;\n            });\n        }\n        // this.icon.setFrame(data.display.texturePath);\n        this.nameText.text = data.name + ":";\n        this.valueText.text = data.value + (data.tempValue ? this.getRichLabel(data.tempValue) : "");\n        this.valueText.x = this.nameText.x + this.nameText.width + 3 * this.dpr;\n    };\n    PlayerAttributeValue.prototype.getRichLabel = function (tempValue, color) {\n        if (color === void 0) { color = "#0B77CD"; }\n        var label = "[color=" + color + "](+" + tempValue + ")[/color]";\n        return label;\n    };\n    return PlayerAttributeValue;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/CharacterInfo/CharacterAttributePanel.ts?')},"./src/pica/render/ui/CharacterInfo/CharacterEditorPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharacterEditorPanel", function() { return CharacterEditorPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar CharacterEditorPanel = /** @class */ (function (_super) {\n    __extends(CharacterEditorPanel, _super);\n    function CharacterEditorPanel(scene, x, y, width, height, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = 0;\n        _this.key = "";\n        _this.setSize(width, height);\n        _this.key = key;\n        _this.dpr = dpr;\n        var common_key = "common_key";\n        var mfont = "bold " + 15 * _this.dpr + "px Source Han Sans";\n        _this.title = _this.scene.make.text({ x: 0, y: -height * 0.5 + 50 * dpr, text: _this.geti18n("edit_profile"), style: { font: mfont, blod: true, color: "#ffffff", fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        var bg = _this.scene.make.graphics(undefined, false);\n        bg.clear();\n        bg.fillStyle(0xffffff, 0.5);\n        bg.fillRect(0, 0, 247 * dpr, 350 * dpr);\n        bg.setPosition(-width * 0.5, -184 * dpr);\n        var posx = -width * 0.5 + 9 * dpr;\n        var posy = -170 * dpr;\n        var offsetY = 50 * dpr;\n        var nameText = _this.scene.make.text({ x: posx, y: posy, style: { blod: true, color: "#0062BB", fontSize: 15 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0);\n        nameText.setText(_this.geti18n("user_name") + ":");\n        _this.inputText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"](_this.scene, posx + nameText.width + 20 * dpr, posy, 162 * dpr, 27 * dpr, {\n            type: "input",\n            fontSize: 18 * dpr + "px",\n            color: "#0062BB",\n            align: "center",\n            placeholder: _this.geti18n("input_nickname")\n        }).setOrigin(0);\n        var line = _this.createLine(-230 * _this.dpr * 0.5, posy + 32 * _this.dpr);\n        _this.add(bg);\n        _this.add([_this.title, nameText, _this.inputText, line]);\n        _this.idText = _this.createText("I        D:", "", posx, posy + offsetY);\n        _this.constellationText = _this.createText(_this.geti18n("constellation") + ":", "", posx, posy + offsetY * 2);\n        _this.birthdayText = _this.createText(_this.geti18n("birthday") + ":", "", posx, posy + offsetY * 3);\n        _this.cityText = _this.createText(_this.geti18n("city") + ":", "", posx, posy + offsetY * 4);\n        var signText = _this.scene.make.text({ x: posx, y: posy + offsetY * 5, style: { blod: true, color: "#0062BB", fontSize: 15 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0);\n        signText.setText(_this.geti18n("signature") + ":");\n        _this.signInput = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"](_this.scene, posx + signText.width + 20 * dpr, posy + offsetY * 5, 162 * dpr, 76 * dpr, {\n            type: "input",\n            fontSize: 18 * dpr + "px",\n            color: "#0062BB",\n            align: "center",\n            placeholder: _this.geti18n("input_signature")\n        }).setOrigin(0);\n        _this.add([signText, _this.signInput]);\n        var backBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.scene, common_key, "back_arrow", "back_arrow");\n        var saveBtn = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["NinePatchButton"](_this.scene, 0, height * 0.5 - 40 * dpr, 174 * _this.dpr, 37 * _this.dpr, common_key, "yellow_btn", _this.geti18n("save"), {\n            left: 12 * _this.dpr,\n            top: 12 * _this.dpr,\n            right: 12 * _this.dpr,\n            bottom: 12 * _this.dpr\n        });\n        saveBtn.setTextStyle({ fontSize: 16 * _this.dpr, color: "#ED7814" });\n        backBtn.setPosition(posx + 8 * dpr, -height * 0.5 + 50 * dpr);\n        backBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, _this.onBackHandler, _this);\n        saveBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, _this.onSaveHandler, _this);\n        _this.add([backBtn, saveBtn]);\n        return _this;\n    }\n    CharacterEditorPanel.prototype.destroy = function () {\n        if (this.inputText)\n            this.inputText.destroy();\n        if (this.signInput)\n            this.signInput.destroy();\n        _super.prototype.destroy.call(this);\n    };\n    CharacterEditorPanel.prototype.createText = function (name, value, posx, posy) {\n        var nameText = this.scene.make.text({ x: posx, y: posy, style: { blod: true, color: "#0062BB", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0, 0);\n        nameText.setText(name);\n        var valueText = this.scene.make.text({ x: posx + nameText.width + 20 * this.dpr, y: posy, text: value, style: { blod: true, color: "#ffffff", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0, 0);\n        var line = this.createLine(-230 * this.dpr * 0.5, posy + 32 * this.dpr);\n        this.add([nameText, valueText, line]);\n        return valueText;\n    };\n    CharacterEditorPanel.prototype.geti18n = function (name) {\n        return utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("player_info." + name);\n    };\n    CharacterEditorPanel.prototype.createLine = function (posx, posy) {\n        var line = this.scene.make.graphics(undefined, false);\n        line.clear();\n        line.fillStyle(0x0062BB, 0.6);\n        line.fillRect(0, 0, 230 * this.dpr, 3);\n        line.setPosition(posx, posy);\n        return line;\n    };\n    CharacterEditorPanel.prototype.onBackHandler = function () {\n        this.visible = false;\n        this.emit("editorHide");\n    };\n    CharacterEditorPanel.prototype.onSaveHandler = function () {\n    };\n    return CharacterEditorPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/CharacterInfo/CharacterEditorPanel.ts?')},"./src/pica/render/ui/CharacterInfo/CharacterInfoPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharacterInfoPanel", function() { return CharacterInfoPanel; });\n/* harmony import */ var _CharacterEditorPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CharacterEditorPanel */ "./src/pica/render/ui/CharacterInfo/CharacterEditorPanel.ts");\n/* harmony import */ var _CharacterAttributePanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CharacterAttributePanel */ "./src/pica/render/ui/CharacterInfo/CharacterAttributePanel.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\n\nvar Container = Phaser.GameObjects.Container;\n\n\n\n\n\n\nvar CharacterInfoPanel = /** @class */ (function (_super) {\n    __extends(CharacterInfoPanel, _super);\n    function CharacterInfoPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        _this.commonkey = "common_key";\n        _this.isOwner = true;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_5__["ModuleName"].CHARACTERINFO_NAME;\n        return _this;\n    }\n    CharacterInfoPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(w, h);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x000000, 0.66);\n        this.mBackGround.fillRect(0, 0, w, h);\n        this.content.setPosition(w / 2, h / 2);\n        this.mSkillGrideTable.resetMask();\n        this.content.setInteractive();\n        this.mCategoryScroll.refreshMask();\n        var pos = this.mFirendMenu.getWorldTransformMatrix();\n        this.mFirendMenu.addMask(pos.tx - 42 * this.dpr * this.scale, pos.ty, 200 * this.dpr * this.scale, 80 * this.dpr * this.scale);\n    };\n    CharacterInfoPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        if (param && param.length > 0) {\n            this.setPlayerData(param);\n        }\n        this.setInteractive();\n        this.addListen();\n    };\n    CharacterInfoPanel.prototype.hide = function () {\n        _super.prototype.hide.call(this);\n    };\n    CharacterInfoPanel.prototype.update = function (param) {\n        _super.prototype.update.call(this, param);\n        if (param) {\n            this.setPlayerData(param);\n        }\n    };\n    CharacterInfoPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.OnClosePanel, this);\n        this.nickEditor.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onEditorHandler, this);\n        this.privaCharBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onPrivateChatHandler, this);\n        this.addFriendBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onAddFriendHandler, this);\n        // this.tradeBtn.on(String(ClickEvent.Tap), this.onTradingHandler, this);\n        this.mExitBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onExitHandler, this);\n        this.mFirendMenu.register();\n        this.render.emitter.on("track", this.onTrackHandler, this);\n        this.render.emitter.on("invite", this.onIntiveHandler, this);\n        this.mCharacterMenu.register();\n        this.render.emitter.on("addBlack", this.onAddBlacklistHandler, this);\n        this.render.emitter.on("removeBlack", this.onRemoveBlacklistHandler, this);\n    };\n    CharacterInfoPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.OnClosePanel, this);\n        this.nickEditor.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onEditorHandler, this);\n        this.privaCharBtn.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onPrivateChatHandler, this);\n        this.addFriendBtn.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onAddFriendHandler, this);\n        // this.tradeBtn.off(String(ClickEvent.Tap), this.onTradingHandler, this);\n        this.mExitBtn.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onExitHandler, this);\n        this.mFirendMenu.unregister();\n        this.render.emitter.off("track", this.onTrackHandler, this);\n        this.render.emitter.off("invite", this.onIntiveHandler, this);\n        this.mCharacterMenu.unregister();\n        this.render.emitter.off("addBlack", this.onAddBlacklistHandler, this);\n        this.render.emitter.off("removeBlack", this.onRemoveBlacklistHandler, this);\n    };\n    CharacterInfoPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "player_info/player_info.png", "player_info/player_info.json");\n        this.commonkey = picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey;\n        this.addAtlas(this.commonkey, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    CharacterInfoPanel.prototype.init = function () {\n        var _this = this;\n        var wid = this.scaleWidth;\n        var hei = this.scaleHeight;\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, wid, hei);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, wid, hei), Phaser.Geom.Rectangle.Contains);\n        this.add(this.mBackGround);\n        this.bg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: "bg" });\n        this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(this.bg.width, this.bg.height);\n        this.add(this.content);\n        this.content.add(this.bg);\n        this.mainCon = this.scene.make.container(undefined, false);\n        this.mainCon.setSize(this.bg.width, this.bg.height);\n        this.content.add(this.mainCon);\n        var posY = -this.bg.height * 0.5 + 43 * this.dpr;\n        var mfont = "bold " + 15 * this.dpr + "px Source Han Sans";\n        this.labelText = this.scene.make.text({ x: 0, y: posY, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.title"), style: { font: mfont, bold: true, color: "#ffffff", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } }).setOrigin(0.5, 0);\n        this.labelText.setStroke("#8F4300", 1);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["Button"](this.scene, this.commonkey, "close");\n        this.closeBtn.setPosition(this.mainCon.width * 0.5 - this.dpr * 30, posY - this.dpr * 10);\n        this.likeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["Button"](this.scene, this.key, "praise_bef", "praise_bef", "999");\n        this.likeBtn.setTextStyle({ fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT });\n        this.likeBtn.text.setOrigin(0, 0.5).x += 10 * this.dpr;\n        this.likeBtn.setPosition(this.bg.width * 0.5 - 50 * this.dpr, posY + 50 * this.dpr);\n        this.likeBtn.visible = false;\n        this.avatar = new gamecoreRender__WEBPACK_IMPORTED_MODULE_6__["UIDragonbonesDisplay"](this.scene, this.render);\n        this.avatar.scale = this.dpr * 2;\n        this.avatar.x = 0;\n        this.avatar.y = -70 * this.dpr;\n        this.avatar.once("initialized", function () {\n            _this.avatar.play({ name: "idle", flip: false });\n        });\n        this.mainCon.add([this.labelText, this.closeBtn, this.likeBtn, this.avatar]);\n        this.mFirendMenu = new FriendMenu(this.uiManager.render, this.scene, this.dpr, this.scale);\n        this.mFirendMenu.x = this.bg.width * 0.5 - this.mFirendMenu.width - 14 * this.dpr;\n        this.mFirendMenu.y = -this.bg.height * 0.5 + 200 * this.dpr;\n        this.mCharacterMenu = new CharacterMenu(this.uiManager.render, this.scene, this.dpr, this.scale);\n        this.mCharacterMenu.x = this.bg.width * 0.5 - this.mCharacterMenu.width - 14 * this.dpr;\n        this.mCharacterMenu.y = -this.bg.height * 0.5 + 100 * this.dpr;\n        this.mExitBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["NineSliceButton"](this.scene, -this.bg.width * 0.5 + 40 * this.dpr, this.labelText.y + this.labelText.height * 0.5, 48 * this.dpr, 26 * this.dpr, this.commonkey, "yellow_btn_normal_s", "", this.dpr, this.scale, {\n            left: 8 * this.dpr,\n            top: 8 * this.dpr,\n            right: 8 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.mExitBtn.setTextStyle({\n            fontSize: 10 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n        });\n        this.mainCon.add([this.mFirendMenu, this.mCharacterMenu, this.mExitBtn]);\n        var nickPosX = Math.round(-this.bg.width * 0.5 + 25 * this.dpr);\n        var nickPosY = Math.round(this.bg.height * 0.5 - 324 * this.dpr) + 30 * this.dpr;\n        var fontSize = Math.round(13 * this.dpr);\n        this.nickName = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["BBCodeText"](this.scene, nickPosX, nickPosY, "", {})\n            .setOrigin(0, 0.5).setFontSize(fontSize).setFontFamily(utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT);\n        this.nickEditor = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["Button"](this.scene, this.key, "edit", "edit");\n        this.nickEditor.setPosition(this.bg.width * 0.5 - 30 * this.dpr, nickPosY).visible = false;\n        var line1 = this.scene.make.image({ x: 0, y: this.nickName.y + 12 * this.dpr, key: this.key, frame: "splitters" });\n        line1.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        line1.scaleY = this.dpr;\n        this.idText = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["BBCodeText"](this.scene, nickPosX, nickPosY)\n            .setFontSize(fontSize).setOrigin(0, 0.5).setFontFamily(utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT).setColor("#0062BC");\n        var line2 = this.scene.make.image({ x: 0, y: this.idText.y + 12 * this.dpr, key: this.key, frame: "splitters" });\n        line2.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        line2.scaleY = this.dpr;\n        this.titleName = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["BBCodeText"](this.scene, nickPosX, nickPosY + 30 * this.dpr)\n            .setFontSize(fontSize).setOrigin(0, 0.5).setFontFamily(utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT);\n        var line3 = this.scene.make.image({ x: 0, y: this.titleName.y + 12 * this.dpr, key: this.key, frame: "splitters" });\n        line3.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        line3.scaleY = this.dpr;\n        var lvbg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: "level_bg" });\n        lvbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.lvText = this.scene.make.text({ x: 0, y: 0, text: "lv 98", style: { color: "#996600", fontSize: fontSize, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } }).setOrigin(0.5, 0.5);\n        this.lvCon = this.scene.make.container(undefined, false);\n        this.lvCon.setSize(lvbg.width, lvbg.height);\n        this.lvCon.setPosition(-this.content.width * 0.5 + this.lvCon.width * 0.5 + 20 * this.dpr, -this.content.height * 0.5 + 90 * this.dpr);\n        this.lvCon.add([lvbg, this.lvText]);\n        this.mainCon.add([this.nickName, this.nickEditor, line1, line2, line3, this.titleName, this.lvCon]);\n        var bottomWidth = 260 * this.dpr;\n        var bottomHeight = 210 * this.dpr;\n        this.bottomCon = this.scene.make.container(undefined, false);\n        this.bottomCon.setSize(bottomWidth, bottomHeight);\n        this.bottomCon.setPosition(0, this.bg.height * 0.5 - bottomHeight * 0.5 - 30 * this.dpr);\n        this.mainCon.add(this.bottomCon);\n        this.bottombg = this.scene.make.graphics(undefined, false);\n        var scrollHeight = 32 * this.dpr;\n        var scrollY = -bottomHeight * 0.5 + scrollHeight * 0.5 - 3 * this.dpr;\n        this.mCategoryScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["GameScroller"](this.scene, {\n            x: 0,\n            y: scrollY,\n            width: bottomWidth,\n            height: scrollHeight,\n            zoom: this.scale,\n            orientation: 1,\n            dpr: this.dpr,\n            space: 10 * this.dpr,\n            cellupCallBack: function (gameobject) {\n                _this.onSelectSubCategoryHandler(gameobject);\n            }\n        });\n        var propFrame = this.scene.textures.getFrame(this.key, "skill_bg");\n        var capW = propFrame.width + 5 * this.dpr;\n        var capH = propFrame.height + 8 * this.dpr;\n        var gridX = 0, gridwidth = (this.bottomCon.width), gridheight = 200 * this.dpr;\n        var gridY = scrollY + scrollHeight * 0.5 + gridheight * 0.5;\n        this.mSkillGrideTable = this.createGrideTable(gridX, gridY, gridwidth, gridheight, capW, capH, function () {\n            return new CharacterOwnerItem(_this.scene, 0, 0, _this.key, _this.dpr);\n        }, new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onSelectItemHandler));\n        var attrHeigth = 150 * this.dpr;\n        this.mAttrPanel = new _CharacterAttributePanel__WEBPACK_IMPORTED_MODULE_1__["CharacterAttributePanel"](this.scene, gridX, gridY, gridwidth - 30 * this.dpr, attrHeigth, this.key, this.dpr);\n        this.bottomCon.add([this.bottombg, this.mCategoryScroll, this.mSkillGrideTable, this.mAttrPanel]);\n        var bottomBtnPosx = -60 * this.dpr;\n        var bottomBtnPosy = this.bottomCon.height * 0.5 - 20 * this.dpr;\n        this.addFriendBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["NineSliceButton"](this.scene, 0, bottomBtnPosy, 94 * this.dpr, 37 * this.dpr, this.key, "button_g", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.add_friend"), this.dpr, this.scale, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 12 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        this.addFriendBtn.setFrameNormal("button_g");\n        this.privaCharBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["NineSliceButton"](this.scene, bottomBtnPosx, bottomBtnPosy, 94 * this.dpr, 37 * this.dpr, this.commonkey, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.private_chat"), this.dpr, this.scale, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 12 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        // this.tradeBtn = new NineSliceButton(this.scene, -bottomBtnPosx, bottomBtnPosy, 94 * this.dpr, 37 * this.dpr, this.commonkey, "red_btn", i18n.t("player_info.trading"), this.dpr, this.scale, {\n        //     left: 12 * this.dpr,\n        //     top: 12 * this.dpr,\n        //     right: 12 * this.dpr,\n        //     bottom: 12 * this.dpr\n        // });\n        this.addFriendBtn.setTextStyle({ fontSize: 16 * this.dpr, color: "#000000" });\n        this.privaCharBtn.setTextStyle({ fontSize: 16 * this.dpr, color: "#996600" });\n        // this.tradeBtn.setTextStyle({ fontSize: 16 * this.dpr, color: "#ffffff" });\n        this.bottomCon.add([this.addFriendBtn, this.privaCharBtn]);\n        this.content.visible = false;\n        this.resize(wid, hei);\n        _super.prototype.init.call(this);\n        // this.reqPlayerInfo();\n    };\n    CharacterInfoPanel.prototype.reqPlayerInfo = function () {\n        this.render.renderEmitter("queryOwnerInfo");\n    };\n    CharacterInfoPanel.prototype.setPlayerData = function (data) {\n        if (!this.mInitialized) {\n            this.mShowData = data;\n            return;\n        }\n        this.mCharacterData = data;\n        this.content.visible = true;\n        var nickname = data.nickname ? data.nickname : "???";\n        var current_title = data.currentTitle ? data.currentTitle : "???";\n        var exp = data.level && data.level.currentLevelExp ? data.level.currentLevelExp : 0;\n        var nexExp = data.level && data.level.nextLevelExp ? data.level.nextLevelExp : 0;\n        var cid = data.cid || 0;\n        var levle = data.level && data.level.level ? data.level.level : 0;\n        var spaceOffset = this.getspaceStr(1 * this.dpr);\n        if (this.avatar && data.avatarSuit) {\n            var temp = structure__WEBPACK_IMPORTED_MODULE_5__["AvatarSuitType"].getSuitsFromItem(data.avatarSuit);\n            this.avatar.setSuits(temp.suits);\n            this.avatar.load({\n                id: 0,\n                avatar: temp.avatar,\n            });\n        }\n        this.titleName.setText(this.getRichLabel(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.player_title")) + spaceOffset + current_title);\n        var likeBtnLabel = data.like ? data.like + "" : "???";\n        this.likeBtn.setText(likeBtnLabel + "");\n        var likeposx = this.bg.width * 0.5 - this.likeBtn.width * 0.5 - this.likeBtn.text.width;\n        this.likeBtn.x = likeposx - 20 * this.dpr;\n        this.lvText.text = "lv " + levle;\n        this.idText.setText("(52365404)");\n        var subArr = new Map();\n        var lifeSkills = data.lifeSkills ? data.lifeSkills : [];\n        subArr.set(CharacterOptionType.Skill, lifeSkills);\n        if (data.isUser) {\n            this.nickName.setText(this.getRichLabel(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.nick_name")) + spaceOffset + nickname);\n            this.likeBtn.setFrame("praise_aft");\n            subArr.set(CharacterOptionType.Attribute, data.properties ? data.properties : []);\n            subArr.set(CharacterOptionType.Badge, data.badges ? data.badges : []);\n            this.addFriendBtn.visible = false;\n            this.privaCharBtn.visible = false;\n            this.mFirendMenu.visible = false;\n            this.mExitBtn.visible = true;\n            this.bottombg.clear();\n            this.bottombg.fillStyle(0x6AE2FF, 1);\n            this.bottombg.fillRect(-this.bottomCon.width * 0.5, -this.bottomCon.height * 0.5, this.bottomCon.width, this.bottomCon.height);\n            var gridHeight = 200 * this.dpr;\n            this.mSkillGrideTable.setSize(this.mSkillGrideTable.width, gridHeight);\n            var gridx = 0, gridy = this.mCategoryScroll.y + gridHeight * 0.5 + 0 * this.dpr;\n            this.mSkillGrideTable.refreshPos(gridx, gridy);\n            this.mSkillGrideTable.setColumnCount(3);\n            this.isOwner = true;\n            this.mCharacterMenu.visible = false;\n            this.mAttrPanel.setSize(this.mAttrPanel.width, gridHeight);\n            this.mAttrPanel.y = gridy + 15 * this.dpr;\n            this.mAttrPanel.space = 20 * this.dpr;\n        }\n        else {\n            // const remark = (data.remark ? data.remark : i18n.t("player_info.note_nickname"));\n            this.nickName.setText(this.getRichLabel(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.nick_name")) + spaceOffset + nickname);\n            //   this.lvCon.setPosition(this.idText.x + this.lvCon.width * 0.5, -this.mainCon.height * 0.5 + 100 * this.dpr);\n            this.likeBtn.setFrame("praise_bef");\n            subArr.set(CharacterOptionType.Attribute, data.properties ? data.properties : []);\n            subArr.set(CharacterOptionType.Badge, data.badges ? data.badges : []);\n            this.addFriendBtn.visible = data.friend ? !data.friend : false;\n            this.privaCharBtn.visible = data.friend ? data.friend : false;\n            this.mExitBtn.visible = false;\n            this.bottombg.clear();\n            this.bottombg.fillStyle(0x6AE2FF, 1);\n            this.bottombg.fillRect(-this.bottomCon.width * 0.5, -this.bottomCon.height * 0.5, this.bottomCon.width, this.bottomCon.height - 55 * this.dpr);\n            var gridHeight = 150 * this.dpr;\n            this.mSkillGrideTable.setSize(this.mSkillGrideTable.width, gridHeight);\n            var gridx = 0, gridy = this.mCategoryScroll.y + gridHeight * 0.5 + 0 * this.dpr;\n            this.mSkillGrideTable.refreshPos(gridx, gridy);\n            this.mSkillGrideTable.setColumnCount(2);\n            this.isOwner = false;\n            this.mCharacterMenu.visible = true;\n            this.mAttrPanel.setSize(this.mAttrPanel.width, gridHeight);\n            this.mAttrPanel.y = gridy + 15 * this.dpr;\n            this.mAttrPanel.space = 10 * this.dpr;\n        }\n        this.idText.x = this.nickName.x + this.nickName.width * (1 - this.nickName.originX) + 8 * this.dpr;\n        this.mFirendMenu.visible = false;\n        this.setSubCategory(subArr);\n        this.setFriendRelation(structure__WEBPACK_IMPORTED_MODULE_5__["FriendRelationEnum"].Null);\n    };\n    CharacterInfoPanel.prototype.setFriendRelation = function (relation) {\n        if (this.isOwner) {\n            return;\n        }\n        this.mRelation = relation;\n        this.mFirendMenu.visible = relation === structure__WEBPACK_IMPORTED_MODULE_5__["FriendRelationEnum"].Friend;\n        this.mCharacterMenu.setIsBlack(relation === structure__WEBPACK_IMPORTED_MODULE_5__["FriendRelationEnum"].Blacklist);\n        this.addFriendBtn.visible = relation !== structure__WEBPACK_IMPORTED_MODULE_5__["FriendRelationEnum"].Blacklist;\n        if (relation === structure__WEBPACK_IMPORTED_MODULE_5__["FriendRelationEnum"].Followed || relation === structure__WEBPACK_IMPORTED_MODULE_5__["FriendRelationEnum"].Friend) {\n            this.addFriendBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.unfollow"));\n        }\n        else {\n            this.addFriendBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.follow"));\n        }\n    };\n    CharacterInfoPanel.prototype.destroy = function () {\n        this.mSkillGrideTable.destroy();\n        this.mCategoryScroll.destroy();\n        if (this.mBackGround) {\n            this.mBackGround.clear();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    CharacterInfoPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH, createFun, callback) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 3,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellPadX: 24 * this.dpr,\n                zoom: this.scale\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = createFun();\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setItemData(item, _this.isOwner);\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        grid.on("cellTap", function (cell) {\n            if (cell) {\n                callback.runWith(cell);\n            }\n        });\n        return grid;\n    };\n    CharacterInfoPanel.prototype.OnClosePanel = function () {\n        this.render.renderEmitter("hide");\n    };\n    CharacterInfoPanel.prototype.setSubCategory = function (map) {\n        var _this = this;\n        var subNames = [utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.option_live"), utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.option_attribute"), utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.option_badge")];\n        var itemWidth = this.mScene.textures.getFrame(this.key, "title_select").width;\n        var list = this.mCategoryScroll.getItemList().concat();\n        this.mCategoryScroll.clearItems(false);\n        for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {\n            var item = list_1[_i];\n            item.visible = false;\n        }\n        var index = 0;\n        map.forEach(function (value, key) {\n            var item;\n            var titleName = _this.getOptionName(key);\n            if (index < list.length) {\n                item = list[index];\n            }\n            else {\n                item = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["Button"](_this.scene, _this.key, "title_normal", "title_select", titleName);\n                item.width = itemWidth;\n                item.height = 41 * _this.dpr;\n                list.push(item);\n                item.setTextStyle({ color: "#2B4BB5", fontSize: 12 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT });\n                item.disInteractive();\n                item.removeListen();\n            }\n            item.visible = true;\n            item.setText(titleName);\n            item.setData("subData", value);\n            item.setData("optiontype", key);\n            _this.mCategoryScroll.addItem(item);\n            index++;\n        });\n        if (list.length <= 3)\n            this.mCategoryScroll.setAlign(1);\n        else {\n            this.mCategoryScroll.setAlign(2);\n        }\n        this.onSelectSubCategoryHandler(list[0]);\n    };\n    CharacterInfoPanel.prototype.onSelectSubCategoryHandler = function (obj) {\n        // Logger.getInstance().log(obj);\n        if (this.curSelectCategeory) {\n            this.curSelectCategeory.changeNormal();\n            this.curSelectCategeory.setTextColor("#2B4BB5");\n        }\n        obj.changeDown();\n        obj.setTextColor("#996600");\n        this.curSelectCategeory = obj;\n        var datas = obj.getData("subData");\n        var optionType = obj.getData("optiontype");\n        if (optionType === CharacterOptionType.Skill) {\n            this.mSkillGrideTable.setItems(datas);\n            this.mAttrPanel.visible = false;\n            this.mSkillGrideTable.visible = true;\n        }\n        else if (optionType === CharacterOptionType.Attribute) {\n            if (datas)\n                this.mAttrPanel.setAttributeData(datas);\n            this.mAttrPanel.visible = true;\n            this.mSkillGrideTable.setItems([]);\n            this.mSkillGrideTable.visible = false;\n        }\n        else if (optionType === CharacterOptionType.Badge) {\n            this.mAttrPanel.visible = false;\n            this.mSkillGrideTable.visible = false;\n        }\n    };\n    CharacterInfoPanel.prototype.onSelectItemHandler = function (item) {\n    };\n    CharacterInfoPanel.prototype.onEditorHandler = function () {\n        var w = 247 * this.dpr;\n        var h = this.content.height;\n        if (!this.editorPanel)\n            this.editorPanel = new _CharacterEditorPanel__WEBPACK_IMPORTED_MODULE_0__["CharacterEditorPanel"](this.scene, 0, 0, w, h, this.key, this.dpr);\n        this.content.add(this.editorPanel);\n        this.editorPanel.visible = true;\n        this.editorPanel.on("editorHide", this.onEditorPanelHideHandler, this);\n        this.setMainUIVisible(false);\n    };\n    CharacterInfoPanel.prototype.onAddFriendHandler = function () {\n        if (!this.mCharacterData) {\n            return;\n        }\n        switch (this.mRelation) {\n            case structure__WEBPACK_IMPORTED_MODULE_5__["FriendRelationEnum"].Friend:\n            case structure__WEBPACK_IMPORTED_MODULE_5__["FriendRelationEnum"].Followed:\n                this.render.renderEmitter("unfollow", this.mCharacterData.cid);\n                break;\n            case structure__WEBPACK_IMPORTED_MODULE_5__["FriendRelationEnum"].Fans:\n            case structure__WEBPACK_IMPORTED_MODULE_5__["FriendRelationEnum"].Null:\n                this.render.renderEmitter("follow", this.mCharacterData.cid);\n                break;\n        }\n    };\n    CharacterInfoPanel.prototype.onTradingHandler = function () {\n    };\n    CharacterInfoPanel.prototype.onPrivateChatHandler = function () {\n    };\n    CharacterInfoPanel.prototype.onExitHandler = function () {\n        this.mWorld.exitUser();\n    };\n    CharacterInfoPanel.prototype.onEditorPanelHideHandler = function () {\n        this.mainCon.visible = true;\n        this.remove(this.editorPanel);\n        this.editorPanel.off("editorHide", this.onEditorPanelHideHandler, this);\n        this.editorPanel.destroy();\n        this.editorPanel = null;\n        this.setMainUIVisible(true);\n    };\n    CharacterInfoPanel.prototype.setMainUIVisible = function (value) {\n        this.avatar.visible = value;\n        this.mCategoryScroll.visible = value;\n        this.mSkillGrideTable.visible = value;\n        this.mainCon.visible = value;\n    };\n    CharacterInfoPanel.prototype.getRichLabel = function (text, color) {\n        if (color === void 0) { color = "#2B4BB5"; }\n        var label = "[stroke=" + color + "][color=" + color + "]" + text + ":[/color][/stroke]";\n        return label;\n    };\n    CharacterInfoPanel.prototype.getspaceStr = function (num) {\n        var str = "";\n        for (var i = 0; i < num; i++) {\n            str += " ";\n        }\n        return str;\n    };\n    CharacterInfoPanel.prototype.getOptionName = function (type) {\n        var title = "";\n        if (type === CharacterOptionType.Skill) {\n            title = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.option_live");\n        }\n        else if (type === CharacterOptionType.Attribute) {\n            title = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.option_attribute");\n        }\n        else if (type === CharacterOptionType.Badge) {\n            title = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.option_badge");\n        }\n        else if (type === CharacterOptionType.Title) {\n            title = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.option_title");\n        }\n        return title;\n    };\n    CharacterInfoPanel.prototype.onTrackHandler = function () {\n        if (!this.mCharacterData) {\n            return;\n        }\n        this.render.renderEmitter("track", this.mCharacterData.cid);\n    };\n    CharacterInfoPanel.prototype.onIntiveHandler = function () {\n        if (!this.mCharacterData) {\n            return;\n        }\n        this.render.renderEmitter("invite", this.mCharacterData.cid);\n    };\n    CharacterInfoPanel.prototype.onAddBlacklistHandler = function () {\n        if (!this.mCharacterData) {\n            return;\n        }\n        this.render.renderEmitter("addBlack", this.mCharacterData.cid);\n    };\n    CharacterInfoPanel.prototype.onRemoveBlacklistHandler = function () {\n        if (!this.mCharacterData) {\n            return;\n        }\n        this.render.renderEmitter("removeBlack", this.mCharacterData.cid);\n    };\n    return CharacterInfoPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_6__["BasePanel"]));\n\nvar CharacterOptionType;\n(function (CharacterOptionType) {\n    CharacterOptionType[CharacterOptionType["Skill"] = 0] = "Skill";\n    CharacterOptionType[CharacterOptionType["Attribute"] = 1] = "Attribute";\n    CharacterOptionType[CharacterOptionType["Badge"] = 2] = "Badge";\n    CharacterOptionType[CharacterOptionType["Title"] = 3] = "Title";\n    CharacterOptionType[CharacterOptionType["Avatar"] = 4] = "Avatar";\n})(CharacterOptionType || (CharacterOptionType = {}));\nvar CharacterOwnerItem = /** @class */ (function (_super) {\n    __extends(CharacterOwnerItem, _super);\n    function CharacterOwnerItem(scene, x, y, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = 0;\n        var bg = _this.scene.make.image({ x: 0, y: 0, key: key, frame: "skill_bg" });\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.nameText = _this.scene.make.text({ x: -1 * dpr, y: 0, text: "", style: { color: "#996600", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        _this.lvText = _this.scene.make.text({ x: -1 * dpr, y: 0, text: "", style: { color: "#996600", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        _this.progressBar = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ProgressBar"](_this.scene, {\n            x: 48 * dpr / 2,\n            y: 15 * dpr,\n            width: 41 * dpr,\n            height: 4 * dpr,\n            background: {\n                x: 0,\n                y: 0,\n                width: 41 * dpr,\n                height: 4 * dpr,\n                config: {\n                    top: 1 * dpr,\n                    left: 2 * dpr,\n                    right: 2 * dpr,\n                    bottom: 1 * dpr,\n                },\n                key: key,\n                frame: "slider_bg"\n            },\n            bar: {\n                x: 0,\n                y: 0,\n                width: 41 * dpr,\n                height: 4 * dpr,\n                config: {\n                    top: 1 * dpr,\n                    left: 2 * dpr,\n                    right: 2 * dpr,\n                    bottom: 1 * dpr,\n                },\n                key: key,\n                frame: "slider_rate"\n            },\n            dpr: dpr,\n            textConfig: undefined\n        });\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_6__["DynamicImage"](_this.scene, -bg.width * 0.5 + 22 * dpr, 0);\n        _this.add([bg, _this.icon, _this.nameText, _this.lvText, _this.progressBar]);\n        _this.setSize(bg.width, bg.height);\n        _this.dpr = dpr;\n        _this.key = key;\n        return _this;\n        // this.progressBar.setProgress(1, 100);\n    }\n    CharacterOwnerItem.prototype.setItemData = function (data, isOwner) {\n        var _this = this;\n        if (isOwner === void 0) { isOwner = false; }\n        this.itemData = data;\n        this.nameText.text = data.name;\n        var posY = (isOwner ? -16 * this.dpr : -11 * this.dpr);\n        var offsetY = (isOwner ? 20 * this.dpr : 25 * this.dpr);\n        var cheight = 10 * this.dpr;\n        this.nameText.y = posY + cheight * 0.5;\n        this.icon.setTexture(this.key, "test_skillicon");\n        var width = this.icon.width;\n        if (data.level) {\n            this.lvText.text = data.level.level;\n            this.lvText.y = posY + offsetY;\n            this.progressBar.setProgress(data.level.currentLevelExp, data.level.nextLevelExp);\n            this.progressBar.visible = isOwner;\n        }\n        else {\n            this.progressBar.visible = false;\n            this.lvText.visible = false;\n        }\n        var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(data.display.texturePath);\n        this.icon.load(url, this, function () {\n            _this.icon.scale = _this.dpr;\n            var x = -_this.width * 0.5 + width * 0.5 + 6 * _this.dpr;\n            _this.icon.setPosition(x, 0);\n        });\n    };\n    return CharacterOwnerItem;\n}(Container));\nvar Menu = /** @class */ (function (_super) {\n    __extends(Menu, _super);\n    function Menu(render, scene, mDpr, mScale, width, height) {\n        var _this = _super.call(this, scene) || this;\n        _this.render = render;\n        _this.mDpr = mDpr;\n        _this.mScale = mScale;\n        _this.setSize(width, height);\n        _this.draw();\n        return _this;\n    }\n    Menu.prototype.register = function () {\n    };\n    Menu.prototype.unregister = function () {\n    };\n    Menu.prototype.addMask = function (x, y, width, height) {\n        if (!this.maskGraphic) {\n            this.maskGraphic = this.scene.make.graphics(undefined, false);\n        }\n        this.maskGraphic.x = x;\n        this.maskGraphic.y = y;\n        this.maskGraphic.fillRect(-width * 0.5, -height * 0.5, width, height);\n        this.setMask(this.maskGraphic.createGeometryMask());\n    };\n    Menu.prototype.draw = function () {\n        this.createBackground();\n    };\n    Menu.prototype.createBackground = function () {\n        if (!this.background) {\n            this.background = this.scene.make.graphics(undefined, false);\n        }\n        var radius = 3 * this.mDpr;\n        this.background.fillStyle(0x001D9F, 0.2);\n        this.background.fillRoundedRect(0, 0, this.width, this.height, { tl: radius, tr: 0, br: 0, bl: radius });\n        this.addAt(this.background, 0);\n    };\n    return Menu;\n}(Container));\nvar FriendMenu = /** @class */ (function (_super) {\n    __extends(FriendMenu, _super);\n    function FriendMenu(render, scene, dpr, scale) {\n        var _this = _super.call(this, render, scene, dpr, scale, 58 * dpr, 40 * dpr) || this;\n        _this.isExpand = false;\n        return _this;\n    }\n    FriendMenu.prototype.register = function () {\n        this.trackBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onTrackHandler, this);\n        this.inviteBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onInviteHandler, this);\n        var _a = this.operation, width = _a.width, height = _a.height;\n        this.operation.setInteractive(new Phaser.Geom.Rectangle(-width, -height, width * 3, height * 3), Phaser.Geom.Rectangle.Contains);\n        this.operation.on("pointerup", this.onSwitchOperationHandler, this);\n    };\n    FriendMenu.prototype.unregister = function () {\n        this.trackBtn.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onTrackHandler, this);\n        this.inviteBtn.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onInviteHandler, this);\n        this.operation.disableInteractive();\n        this.operation.on("pointerup", this.onSwitchOperationHandler, this);\n    };\n    FriendMenu.prototype.destroy = function () {\n        if (this.operationContaienr)\n            this.operationContaienr.destroy();\n        if (this.operation)\n            this.operation.destroy();\n        if (this.inviteBtn)\n            this.inviteBtn.destroy();\n        if (this.trackBtn)\n            this.trackBtn.destroy();\n        if (this.tween)\n            this.tween.stop();\n        if (this.autoCollapseTime) {\n            clearTimeout(this.autoCollapseTime);\n        }\n        this.buttons = [];\n    };\n    FriendMenu.prototype.expand = function () {\n        var _this = this;\n        if (this.tween && this.tween.isPlaying()) {\n            return;\n        }\n        this.operationContaienr.remove(this.operation);\n        this.operationContaienr.remove(this.background);\n        this.operationContaienr.add(this.buttons);\n        var bound = this.getBounds();\n        this.isExpand = true;\n        if (bound) {\n            var width = bound.width + 8 * this.mDpr;\n            this.setSize(width, this.height);\n            this.createBackground();\n            this.operationContaienr.addAt(this.background, 0);\n            this.operationContaienr.x = bound.width * 0.5;\n            this.tween = this.scene.tweens.add({\n                targets: this.operationContaienr,\n                props: { x: -bound.width * 0.5, alpha: 1 },\n                duration: 100,\n            });\n            this.autoCollapseTime = setTimeout(function () {\n                _this.autoCollapseTime = null;\n                _this.collapse();\n            }, 3000);\n        }\n    };\n    FriendMenu.prototype.collapse = function () {\n        var _this = this;\n        if (this.tween && this.tween.isPlaying()) {\n            return;\n        }\n        if (this.autoCollapseTime) {\n            clearTimeout(this.autoCollapseTime);\n        }\n        this.tween = this.scene.tweens.add({\n            targets: this.operationContaienr,\n            props: { x: this.width * 0.5 },\n            duration: 100,\n            onComplete: function () {\n                _this.operationContaienr.remove(__spreadArrays(_this.buttons), false);\n                _this.operationContaienr.add(_this.operation);\n                _this.setSize(58 * _this.mDpr, 40 * _this.mDpr);\n                _this.createBackground();\n                _this.operationContaienr.addAt(_this.background, 0);\n                _this.operationContaienr.x = 0;\n                _this.isExpand = false;\n            }\n        });\n    };\n    FriendMenu.prototype.draw = function () {\n        // super.draw();\n        this.operationContaienr = this.scene.make.container(undefined, false);\n        this.add(this.operationContaienr);\n        this.buttons = [];\n        this.inviteBtn = this.createButton(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.invite"));\n        this.buttons.push(this.inviteBtn);\n        this.trackBtn = this.createButton(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.track"));\n        this.buttons.push(this.trackBtn);\n        this.operation = this.scene.make.text({\n            x: this.width * 0.5,\n            y: this.height * 0.5,\n            text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.operation"),\n            style: {\n                color: "#FFD248",\n                fontSize: 10 * this.mDpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n            }\n        }, false).setOrigin(0.5);\n        for (var i = 0; i < this.buttons.length; i++) {\n            if (i === 0) {\n                this.buttons[i].x = this.buttons[i].width * 0.5 + 6 * this.mDpr;\n            }\n            else {\n                this.buttons[i].x = this.buttons[i - 1].x + (this.buttons[i - 1].width + this.buttons[i].width) * 0.5 + 6 * this.mDpr;\n            }\n            this.buttons[i].y = this.height * 0.5;\n        }\n        this.collapse();\n        // this.add(this.operation);\n        // const bound = this.getBounds();\n    };\n    FriendMenu.prototype.createBackground = function () {\n        if (!this.background) {\n            this.background = this.scene.make.graphics(undefined, false);\n        }\n        var radius = 3 * this.mDpr;\n        this.background.clear();\n        this.background.fillStyle(0x001D9F, 0.2);\n        this.background.fillRoundedRect(0, 0, this.width, this.height, { tl: radius, tr: 0, br: 0, bl: radius });\n    };\n    FriendMenu.prototype.onTrackHandler = function () {\n        this.render.renderEmitter("track");\n        this.collapse();\n    };\n    FriendMenu.prototype.onInviteHandler = function () {\n        this.render.renderEmitter("invite");\n        this.collapse();\n    };\n    FriendMenu.prototype.onSwitchOperationHandler = function () {\n        this.isExpand ? this.collapse() : this.expand();\n    };\n    FriendMenu.prototype.createButton = function (text) {\n        var dpr = this.mDpr;\n        var scale = this.mScale;\n        var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["NineSliceButton"](this.scene, -0, 0, 48 * dpr, 26 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "yellow_btn_normal_s", text, dpr, scale, {\n            left: 8 * dpr,\n            top: 8 * dpr,\n            right: 8 * dpr,\n            bottom: 10 * dpr\n        });\n        btn.setTextStyle({\n            color: "#996600",\n            fontSize: 10 * dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n        });\n        return btn;\n    };\n    return FriendMenu;\n}(Menu));\nvar CharacterMenu = /** @class */ (function (_super) {\n    __extends(CharacterMenu, _super);\n    function CharacterMenu(render, scene, dpr, scale) {\n        return _super.call(this, render, scene, dpr, scale, 58 * dpr, 36 * dpr) || this;\n    }\n    CharacterMenu.prototype.register = function () {\n        this.addBlacklistBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onAddBlackHandler, this);\n    };\n    CharacterMenu.prototype.unregister = function () {\n        this.addBlacklistBtn.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap), this.onAddBlackHandler, this);\n    };\n    CharacterMenu.prototype.setIsBlack = function (val) {\n        this.isBlack = val;\n        this.addBlacklistBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t(val ? "player_info.remove_black" : "player_info.add_black"));\n    };\n    CharacterMenu.prototype.draw = function () {\n        _super.prototype.draw.call(this);\n        this.addBlacklistBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["NineSliceButton"](this.scene, 0, 0, 55 * this.mDpr, 24 * this.mDpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "red_btn_normal", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.add_black"), this.mDpr, this.mScale, {\n            left: 12 * this.mDpr,\n            top: 12 * this.mDpr,\n            right: 12 * this.mDpr,\n            bottom: 12 * this.mDpr\n        });\n        this.addBlacklistBtn.setTextStyle({\n            color: "#FFFFFF",\n            fontSize: 10 * this.mDpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n        });\n        this.addBlacklistBtn.x = this.width * 0.5;\n        this.addBlacklistBtn.y = 6 * this.mDpr + this.addBlacklistBtn.height * 0.5;\n        this.add(this.addBlacklistBtn);\n    };\n    CharacterMenu.prototype.onAddBlackHandler = function () {\n        this.render.emitter.emit(this.isBlack ? "removeBlack" : "addBlack");\n    };\n    return CharacterMenu;\n}(Menu));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/CharacterInfo/CharacterInfoPanel.ts?')},"./src/pica/render/ui/CharacterInfo/GraphicsProgressBar.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GraphicsProgressBar", function() { return GraphicsProgressBar; });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar GraphicsProgressBar = /** @class */ (function (_super) {\n    __extends(GraphicsProgressBar, _super);\n    function GraphicsProgressBar(scene, x, y, width, height, isHorizontal) {\n        if (isHorizontal === void 0) { isHorizontal = true; }\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.value = 0.5;\n        _this.bgGraphics = _this.scene.make.graphics(undefined, false);\n        _this.barGraphics = _this.scene.make.graphics(undefined, false);\n        _this.add([_this.bgGraphics, _this.barGraphics]);\n        _this.setSize(width, height);\n        _this.bgColor = 0x000000;\n        _this.barColor = 0xff00000;\n        _this.bgGraphics.clear();\n        _this.bgGraphics.fillStyle(_this.bgColor, 1);\n        _this.bgGraphics.fillRect(0, 0, _this.width, _this.height);\n        _this.setValue(_this.value);\n        return _this;\n    }\n    GraphicsProgressBar.prototype.setColor = function (barColor, bgColor) {\n        this.barColor = barColor;\n        if (bgColor)\n            this.bgColor = bgColor;\n        this.bgGraphics.clear();\n        this.bgGraphics.fillStyle(this.bgColor, 1);\n        this.bgGraphics.fillRect(0, 0, this.width, this.height);\n        this.setValue(this.value);\n    };\n    GraphicsProgressBar.prototype.setValue = function (value) {\n        this.value = value;\n        var width = this.width * (this.isHorizontal ? value : 1);\n        var height = this.height * (!this.isHorizontal ? value : 1);\n        this.barGraphics.clear();\n        this.barGraphics.fillStyle(this.barColor, 1);\n        this.barGraphics.fillRect(0, 0, width, height);\n    };\n    GraphicsProgressBar.prototype.setRoundedRectValue = function (value, radius) {\n        this.value = value;\n        var width = this.width * (this.isHorizontal ? value : 1);\n        var height = this.height * (!this.isHorizontal ? value : 1);\n        this.barGraphics.clear();\n        this.barGraphics.fillStyle(this.barColor, 1);\n        this.barGraphics.fillRoundedRect(0, 0, width, height, radius);\n    };\n    return GraphicsProgressBar;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/CharacterInfo/GraphicsProgressBar.ts?')},"./src/pica/render/ui/Chat/ChatPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatPanel", function() { return ChatPanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar ChatPanel = /** @class */ (function (_super) {\n    __extends(ChatPanel, _super);\n    function ChatPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        _this.chatCatchArr = [];\n        _this.chatMaxLen = 100;\n        _this.scale = 1;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].CHAT_NAME;\n        return _this;\n    }\n    ChatPanel.prototype.show = function (param) {\n        _super.prototype.show.call(this, param);\n        if (this.initialized) {\n            this.checkUpdateActive();\n        }\n    };\n    ChatPanel.prototype.resize = function (w, h) {\n        var zoom = this.scale;\n        var width = this.scene.cameras.main.width;\n        var height = this.scene.cameras.main.height;\n        w = width;\n        h = h ? h : 133 * this.dpr;\n        this.mInputPanel.resize();\n        this.setSize(width, h + this.mInputPanel.height);\n        this.y = height - this.height - 54 * this.dpr;\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0, 0.6);\n        this.mBackground.fillRect(0, 0, width / this.scale, h / this.scale);\n        this.mTextArea.childrenMap.child.setMinSize(w, (h - 16 * this.dpr) * zoom);\n        this.mTextArea.layout();\n        this.mTextArea.setPosition(this.width / 2 + 4 * this.dpr, this.y + this.mTextArea.height / 2 + 10 * this.dpr * zoom);\n        var textMask = this.mTextArea.childrenMap.text;\n        textMask.y = 8 * this.dpr;\n        this.mTextArea.scrollToBottom();\n        _super.prototype.resize.call(this, w, h);\n        this.mBackground.input = undefined;\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, width / this.scale, h / this.scale), Phaser.Geom.Rectangle.Contains);\n    };\n    ChatPanel.prototype.addListen = function () {\n        this.mInputPanel.on("enter", this.onSendMsgHandler, this);\n    };\n    ChatPanel.prototype.removeListen = function () {\n        this.mInputPanel.on("enter", this.onSendMsgHandler, this);\n    };\n    ChatPanel.prototype.appendChat = function (val) {\n        this.chatCatchArr.push(val);\n        if (this.chatCatchArr.length > this.chatMaxLen)\n            this.chatCatchArr.shift();\n        if (this.mTextArea) {\n            this.mTextArea.appendText(val);\n            this.mTextArea.scrollToBottom();\n        }\n        // if (this.mInputText && this.mInputText instanceof PicaChatInputPanel) {\n        //     (<PicaChatInputPanel>this.mInputText).appendChat(val);\n        // }\n    };\n    ChatPanel.prototype.init = function () {\n        var width = this.scene.cameras.main.width;\n        var height = this.scene.cameras.main.height;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        var zoom = this.scale;\n        this.mOutputText = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](this.mScene, 0, 0, "", {\n            fontSize: 12 * this.dpr / zoom + "px",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            stroke: "#000000",\n            strokeThickness: 1 * this.dpr * zoom,\n            textMask: false,\n            shadow: {\n                offsetX: 0,\n                offsetY: 0,\n                color: "#000",\n                blur: 4,\n                stroke: true,\n                fill: true\n            },\n            wrap: {\n                mode: "char",\n                width: width - 12 * this.dpr * zoom\n            }\n        });\n        this.mTextArea = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["TextArea"](this.mScene, {\n            x: width / 2 + 4 * this.dpr * zoom,\n            y: 160 * this.dpr * zoom,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, 0.2),\n            textWidth: width - 4 * this.dpr * zoom,\n            textHeight: 126 * this.dpr * zoom,\n            text: this.mOutputText,\n        })\n            .layout();\n        this.mInputPanel = new InputPanle(this.scene, this.dpr);\n        this.mInputPanel.y = 134 * this.dpr;\n        this.add([\n            this.mBackground,\n            this.mTextArea,\n            this.mOutputText,\n            this.mInputPanel\n        ]);\n        this.resize(this.width, 133 * this.dpr);\n        _super.prototype.init.call(this);\n    };\n    ChatPanel.prototype.checkUpdateActive = function () {\n        var _this = this;\n        // this.render.mainPeer.getCurRoom()\n        //     .then((curRoom) => {\n        //         if (curRoom)\n        //             this.setGiftButtonState(curRoom.openingParty);\n        //     });\n        this.render.mainPeer.getActiveUIData(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICACHAT_NAME)\n            .then(function (arr) {\n            if (arr) {\n                for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n                    var data = arr_1[_i];\n                    _this.updateUIState(data);\n                }\n            }\n        });\n    };\n    ChatPanel.prototype.sendChat = function (val) {\n        // this.mInputText = undefined;\n        if (!val) {\n            return;\n        }\n        var mediator = this.mediator;\n        if (!mediator)\n            return;\n        mediator.sendChat(val);\n        // this.render.renderEmitter(RENDER_PEER + "_" + this.key + "_chat", val);\n    };\n    ChatPanel.prototype.onSendMsgHandler = function (val) {\n        this.sendChat(val);\n    };\n    Object.defineProperty(ChatPanel.prototype, "mediator", {\n        get: function () {\n            return this.render.mainPeer[structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].CHAT_NAME];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ChatPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BasePanel"]));\n\nvar InputPanle = /** @class */ (function (_super) {\n    __extends(InputPanle, _super);\n    function InputPanle(scene, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.background = scene.make.graphics(undefined, false);\n        var text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("chat.placeholder");\n        var w = _this.scene.cameras.main.width;\n        _this.inputText = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["LabelInput"](_this.scene, {\n            width: w,\n            height: 16 * _this.dpr,\n            placeholder: text,\n            fontSize: 11 * _this.dpr + "px",\n            color: "#ffffff",\n        }).setOrigin(0, 0.5);\n        _this.add([_this.background, _this.inputText]);\n        _this.inputText.on("enter", _this.onEnterHandler, _this);\n        return _this;\n    }\n    InputPanle.prototype.resize = function () {\n        var w = this.scene.cameras.main.width;\n        this.setSize(w, 38.33 * this.dpr);\n        this.inputText.x = 46 * this.dpr;\n        this.inputText.y = this.height * 0.5;\n        this.background.clear();\n        this.background.fillStyle(0x000000, 0.6);\n        this.background.fillRect(0, 0, w, this.height);\n        this.background.input = undefined;\n        this.background.setInteractive(new Phaser.Geom.Rectangle(0, 0, w / this.scale, this.height / this.scale), Phaser.Geom.Rectangle.Contains);\n        // this.inputText.resize(w - 46 * this.dpr, this.height);\n    };\n    InputPanle.prototype.onEnterHandler = function () {\n        this.emit("enter", this.inputText.text);\n        this.inputText.setBlur();\n        this.inputText.setText("");\n    };\n    return InputPanle;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Chat/ChatPanel.ts?')},"./src/pica/render/ui/Components/Item.button.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ItemButton", function() { return ItemButton; });\n/* harmony import */ var _render_ui_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../render/ui/components */ "./src/render/ui/components/index.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRender__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! picaRender */ "./src/pica/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar ItemButton = /** @class */ (function (_super) {\n    __extends(ItemButton, _super);\n    function ItemButton(scene, key, bg, dpr, zoom, enable) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.bgFrame = "bag_icon_common_bg";\n        _this.selectFrame = "bag_icon_select_bg";\n        _this.rarityFrame = "bag_icon_rare_bg";\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.bgFrame = bg;\n        _this.key = key;\n        _this.bg = scene.make.image({ key: key, frame: bg });\n        _this.selectbg = scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: _this.selectFrame });\n        _this.setSize(_this.selectbg.width, _this.selectbg.height);\n        _this.itemIcon = new _render_ui_components__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](scene, 0, 0);\n        _this.itemIcon.scale = _this.dpr / _this.zoom;\n        _this.countTex = _this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].blackStyle(dpr) })\n            .setOrigin(1)\n            .setPosition(_this.width * 0.5 - 5 * dpr, _this.height * 0.5 - 4 * dpr);\n        _this.starImg = _this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "bag_star_small_1" }).setOrigin(0);\n        _this.starImg.x = -_this.width * 0.5 + 6 * dpr;\n        _this.starImg.y = -_this.height * 0.5 + 6 * dpr;\n        _this.add([_this.selectbg, _this.bg, _this.itemIcon, _this.starImg, _this.countTex]);\n        _this.selectbg.visible = false;\n        _this.enable = enable;\n        _this.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, _this.onTabClickHandler, _this);\n        return _this;\n    }\n    ItemButton.prototype.setStateFrames = function (bg, rarity) {\n        this.bgFrame = bg;\n        this.rarityFrame = rarity;\n    };\n    ItemButton.prototype.setItemData = function (itemData, alldisplay) {\n        var _this = this;\n        if (alldisplay === void 0) { alldisplay = false; }\n        this.itemData = itemData;\n        this.select = false;\n        this.itemIcon.visible = false;\n        this.starImg.visible = false;\n        if (!itemData) {\n            this.countTex.visible = false;\n            this.bg.setTexture(this.key, this.bgFrame);\n            return;\n        }\n        if (itemData.rarity === 5) {\n            this.bg.setTexture(this.key, this.rarityFrame);\n        }\n        else {\n            this.bg.setTexture(this.key, this.bgFrame);\n        }\n        var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(itemData.texturePath);\n        this.itemIcon.load(url, this, function () {\n            _this.itemIcon.visible = true;\n        });\n        if (!alldisplay) {\n            if (itemData.count > 1) {\n                this.countTex.visible = true;\n                this.countTex.setText(itemData.count.toString());\n            }\n            else {\n                this.countTex.visible = false;\n            }\n        }\n        else {\n            this.countTex.visible = true;\n            this.countTex.setText(itemData.count.toString());\n        }\n        if (itemData.grade > 0) {\n            this.starImg.visible = true;\n            var starFrame = "bag_star_small_" + itemData.grade;\n            this.starImg.setFrame(starFrame);\n        }\n        else\n            this.starImg.visible = false;\n    };\n    Object.defineProperty(ItemButton.prototype, "select", {\n        set: function (value) {\n            this.selectbg.visible = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ItemButton.prototype, "BGVisible", {\n        set: function (value) {\n            this.bg.visible = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ItemButton.prototype.showTips = function () {\n        this.onTabClickHandler();\n    };\n    ItemButton.prototype.onTabClickHandler = function () {\n        picaRender__WEBPACK_IMPORTED_MODULE_4__["PicaItemTipsPanel"].Inst.showTips(this, this.itemData);\n    };\n    return ItemButton;\n}(_render_ui_components__WEBPACK_IMPORTED_MODULE_0__["ButtonEventDispatcher"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Components/Item.button.ts?')},"./src/pica/render/ui/Components/back.text.button.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BackTextButton", function() { return BackTextButton; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar BackTextButton = /** @class */ (function (_super) {\n    __extends(BackTextButton, _super);\n    function BackTextButton(scene, dpr) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.dpr = dpr;\n        _this.init();\n        return _this;\n    }\n    BackTextButton.prototype.setText = function (text) {\n        this.titleTex.text = text;\n    };\n    BackTextButton.prototype.setTextStyle = function (style) {\n        this.titleTex.setStyle(style);\n    };\n    BackTextButton.prototype.setFontStyle = function (style) {\n        if (style === void 0) { style = "bold"; }\n        this.titleTex.setFontStyle(style);\n    };\n    BackTextButton.prototype.init = function () {\n        var width = 100 * this.dpr;\n        var height = 40 * this.dpr;\n        this.setSize(width, height);\n        this.enable = true;\n        var closeimg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, frame: "back_arrow" });\n        closeimg.x = -this.width * 0.5 + closeimg.width * 0.5 + 10 * this.dpr;\n        var titleTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].whiteStyle(this.dpr, 20) }).setOrigin(0, 0.5);\n        titleTex.setFontStyle("bold");\n        titleTex.x = closeimg.x + closeimg.width * 0.5 + 10 * this.dpr;\n        this.titleTex = titleTex;\n        this.add([closeimg, titleTex]);\n    };\n    return BackTextButton;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ButtonEventDispatcher"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Components/back.text.button.ts?')},"./src/pica/render/ui/Components/detail.display.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetailDisplay", function() { return DetailDisplay; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var simple_sha1__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! simple-sha1 */ "./node_modules/simple-sha1/browser.js");\n/* harmony import */ var simple_sha1__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(simple_sha1__WEBPACK_IMPORTED_MODULE_2__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar DetailDisplay = /** @class */ (function (_super) {\n    __extends(DetailDisplay, _super);\n    function DetailDisplay(scene, render) {\n        var _this = _super.call(this, scene) || this;\n        _this.render = render;\n        /**\n         * 0 -  1 - 2 - \n         */\n        _this.mFixedSize = 0;\n        _this.curLoadType = DisplayLoadType.None;\n        _this.isLoading = false;\n        _this.mFixScale = 1;\n        return _this;\n    }\n    /**\n     *\n     * @param fixeScale  1;\n     * @param fixedSize 0 -  1 - 2 - \n     */\n    DetailDisplay.prototype.setFixedScale = function (fixeScale, fixedSize) {\n        if (fixeScale === void 0) { fixeScale = 1; }\n        if (fixedSize === void 0) { fixedSize = 0; }\n        this.mFixedSize = fixedSize;\n        this.mFixScale = fixeScale;\n        this.scale = fixeScale;\n        return this;\n    };\n    DetailDisplay.prototype.loadDisplay = function (content) {\n        var display = content.display;\n        if (!display) {\n            return;\n        }\n        if (display.texturePath !== "" && display.dataPath !== "") {\n            var animation = content.animations;\n            if (animation && animation.length > 0) {\n                this.loadElement(content);\n            }\n            else {\n                this.loadUrl(utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(display.texturePath), utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(display.dataPath));\n            }\n        }\n        else {\n            this.loadUrl(display.texturePath, display.dataPath);\n        }\n    };\n    DetailDisplay.prototype.loadElement = function (content) {\n        var _this = this;\n        this.curLoadType = DisplayLoadType.FramesDisplay;\n        this.clearDisplay();\n        this.mDisplay = content;\n        var animation = content.animations;\n        if (!this.mFramesDisplay) {\n            this.mFramesDisplay = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["FramesDisplay"](this.scene, this.render, undefined);\n        }\n        var display = content.display;\n        if (display && animation.length > 0) {\n            var anis = [];\n            var aniName_1 = animation[0].node.name;\n            for (var _i = 0, animation_1 = animation; _i < animation_1.length; _i++) {\n                var ani = animation_1[_i];\n                ani.baseLoc = "0,0";\n                for (var _a = 0, _b = ani.layer; _a < _b.length; _a++) {\n                    var layer = _b[_a];\n                    layer.offsetLoc = { x: 0, y: 0 };\n                }\n                anis.push(new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["AnimationModel"](ani));\n            }\n            var addDisplay_1 = function () {\n                var _a = _this.mFramesDisplay, spriteWidth = _a.spriteWidth, spriteHeight = _a.spriteHeight;\n                if (_this.mFixedSize !== 0) {\n                    _this.scale = 1;\n                    var scaleX = _this.width / spriteWidth;\n                    var scaleY = _this.height / spriteHeight;\n                    var tempscale = scaleX > scaleY ? scaleY : scaleX;\n                    _this.mFramesDisplay.scale = _this.mFixedSize === 1 ? tempscale : Math.round(tempscale);\n                }\n                else {\n                    _this.mFramesDisplay.scale = 1;\n                    _this.scale = _this.mFixScale;\n                }\n                var scale = _this.mFramesDisplay.scale;\n                _this.mFramesDisplay.x = -spriteWidth * 0.5 * scale;\n                _this.mFramesDisplay.y = -spriteHeight * 0.5 * scale;\n                _this.addDisplay();\n            };\n            this.mFramesDisplay.createdHandler = new utils__WEBPACK_IMPORTED_MODULE_1__["Handler"](this, function () {\n                _this.mFramesDisplay.play({ name: aniName_1, flip: false });\n                addDisplay_1();\n            });\n            var animations = new Map();\n            for (var _c = 0, anis_1 = anis; _c < anis_1.length; _c++) {\n                var aniData = anis_1[_c];\n                animations.set(aniData.name, aniData);\n            }\n            var animode = {\n                animations: animations,\n                id: content.id,\n                gene: simple_sha1__WEBPACK_IMPORTED_MODULE_2__["sync"](display.dataPath + display.texturePath),\n                discriminator: "FramesModel",\n                animationName: aniName_1,\n                display: display\n            };\n            if (!this.mFramesDisplay.load(animode)) {\n                addDisplay_1();\n            }\n        }\n    };\n    DetailDisplay.prototype.loadAvatar = function (content, scale, offset) {\n        var _this = this;\n        if (scale === void 0) { scale = 1; }\n        this.curLoadType = DisplayLoadType.DragonbonesDisplay;\n        this.clearDisplay();\n        if (!this.mDragonboneDisplay) {\n            this.mDragonboneDisplay = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["UIDragonbonesDisplay"](this.scene, this.render);\n            if (offset) {\n                this.mDragonboneDisplay.x += offset.x;\n                this.mDragonboneDisplay.y += offset.y;\n            }\n        }\n        this.addDisplay();\n        if (content.suits)\n            this.mDragonboneDisplay.setSuits(content.suits);\n        this.mDragonboneDisplay.once("initialized", function () {\n            _this.mDragonboneDisplay.setBack(false);\n            _this.mDragonboneDisplay.play({ name: "idle", flip: false });\n        });\n        var dbModel = { id: 0, avatar: content.avatar };\n        this.mDragonboneDisplay.load(dbModel);\n        this.mDragonboneDisplay.scale = scale;\n        this.scale = 1;\n    };\n    DetailDisplay.prototype.loadUrl = function (url, data) {\n        this.mUrl = url;\n        this.curLoadType = DisplayLoadType.Image;\n        this.clearDisplay();\n        if (!this.mImage) {\n            this.mImage = this.scene.make.image(undefined, false);\n        }\n        if (this.scene.textures.exists(url)) {\n            this.onCompleteHandler();\n        }\n        else {\n            if (data) {\n                this.scene.load.atlas(url, utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(url), utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(data));\n            }\n            else {\n                this.scene.load.image(url, utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(url));\n            }\n            this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.onCompleteHandler, this);\n            this.scene.load.start();\n        }\n    };\n    DetailDisplay.prototype.loadSprite = function (resName, textureurl, jsonurl, scale) {\n        var _this = this;\n        this.curLoadType = DisplayLoadType.FrameAnimation;\n        this.clearDisplay();\n        if (!this.mFrameAni) {\n            this.mFrameAni = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["FrameAnimation"](this.scene);\n        }\n        this.mFrameAni.load(resName, textureurl, jsonurl, new utils__WEBPACK_IMPORTED_MODULE_1__["Handler"](this, function () {\n            if (scale === undefined) {\n                if (_this.mFixedSize !== 0) {\n                    _this.scale = 1;\n                    var scaleX = _this.width / _this.mFrameAni.width;\n                    var scaleY = _this.height / _this.mFrameAni.height;\n                    var tempscale = scaleX > scaleY ? scaleY : scaleX;\n                    _this.mFrameAni.scale = _this.mFixedSize === 1 ? tempscale : Math.round(tempscale);\n                }\n                else {\n                    _this.mFrameAni.scale = 1;\n                    _this.scale = _this.mFixScale;\n                }\n            }\n            else {\n                _this.mFrameAni.scale = scale;\n                _this.scale = 1;\n            }\n            _this.addDisplay();\n        }));\n    };\n    DetailDisplay.prototype.displayLoading = function (resName, textureurl, jsonurl, scale) {\n        this.loadSprite(resName, textureurl, jsonurl, scale);\n        this.isLoading = true;\n    };\n    DetailDisplay.prototype.setTexture = function (key, frame, scale) {\n        this.curLoadType = DisplayLoadType.Image;\n        this.clearDisplay();\n        if (!this.mImage) {\n            this.mImage = this.scene.make.image({ key: key, frame: frame }, false);\n        }\n        else {\n            this.mImage.setTexture(key, frame);\n        }\n        this.addDisplay();\n        if (scale === undefined) {\n            if (this.mFixedSize !== 0) {\n                this.scale = 1;\n                var scaleX = this.width / this.mImage.width;\n                var scaleY = this.height / this.mImage.height;\n                var tempscale = scaleX > scaleY ? scaleY : scaleX;\n                this.mImage.scale = this.mFixedSize === 1 ? tempscale : Math.round(tempscale);\n            }\n            else {\n                this.mImage.scale = 1;\n                this.scale = this.mFixScale;\n            }\n        }\n        else {\n            this.mImage.scale = scale;\n            this.scale = 1;\n        }\n        this.emit("show", this.mImage);\n    };\n    DetailDisplay.prototype.setNearest = function () {\n        if (this.mImage) {\n            this.mImage.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\n        }\n    };\n    DetailDisplay.prototype.setComplHandler = function (handler) {\n        this.complHandler = handler;\n    };\n    DetailDisplay.prototype.setPlayAnimation = function (ani, back) {\n        if (back === void 0) { back = false; }\n        if (this.mDragonboneDisplay) {\n            this.mDragonboneDisplay.setBack(back);\n            this.mDragonboneDisplay.play(ani);\n        }\n    };\n    Object.defineProperty(DetailDisplay.prototype, "display", {\n        get: function () {\n            return this.mDisplay;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DetailDisplay.prototype.onCompleteHandler = function () {\n        if (!this.scene) {\n            return;\n        }\n        this.addDisplay();\n        if (this.mDisplay) {\n            var display = this.mDisplay.display;\n            var ani = this.mDisplay.animations;\n            if (!ani || ani.length <= 0) {\n                return;\n            }\n            this.mImage.setTexture(this.mDisplay.display.texturePath, ani[0].frameName[0]);\n        }\n        else {\n            this.mImage.setTexture(this.mUrl);\n        }\n        if (this.mFixedSize !== 0) {\n            this.scale = 1;\n            this.mImage.scale = 1;\n            var scaleX = this.width / this.mImage.displayWidth;\n            var scaleY = this.height / this.mImage.displayHeight;\n            var scale = scaleX > scaleY ? scaleY : scaleX;\n            this.mImage.scale = this.mFixedSize === 1 ? scale : Math.round(scale);\n        }\n        else {\n            this.mImage.scale = this.mFixScale;\n            this.mImage.scale = 1;\n            this.setSize(this.mImage.width * this.scale, this.mImage.height * this.scale);\n        }\n        this.emit("show", this.mImage);\n        if (this.complHandler)\n            this.complHandler.run();\n    };\n    DetailDisplay.prototype.clearDisplay = function () {\n        if (this.mImage)\n            this.remove(this.mImage);\n        if (this.mDragonboneDisplay) {\n            this.remove(this.mDragonboneDisplay);\n        }\n        if (this.mFramesDisplay) {\n            this.remove(this.mFramesDisplay);\n        }\n        if (this.mFrameAni) {\n            if (!this.isLoading) {\n                this.remove(this.mFrameAni);\n            }\n        }\n        this.mDisplay = undefined;\n        this.scene.load.off(Phaser.Loader.Events.COMPLETE, this.onCompleteHandler, this);\n    };\n    DetailDisplay.prototype.addDisplay = function () {\n        if (!this.scene)\n            return;\n        if (this.isLoading) {\n            this.remove(this.mFrameAni);\n        }\n        if (this.curLoadType === DisplayLoadType.Image) {\n            this.add(this.mImage);\n        }\n        else if (this.curLoadType === DisplayLoadType.FramesDisplay) {\n            this.add(this.mFramesDisplay);\n        }\n        else if (this.curLoadType === DisplayLoadType.FrameAnimation) {\n            this.add(this.mFrameAni);\n        }\n        else if (this.curLoadType === DisplayLoadType.DragonbonesDisplay) {\n            this.add(this.mDragonboneDisplay);\n        }\n        this.isLoading = false;\n    };\n    return DetailDisplay;\n}(Phaser.GameObjects.Container));\n\nvar DisplayLoadType;\n(function (DisplayLoadType) {\n    DisplayLoadType[DisplayLoadType["None"] = 0] = "None";\n    DisplayLoadType[DisplayLoadType["Image"] = 1] = "Image";\n    DisplayLoadType[DisplayLoadType["DragonbonesDisplay"] = 2] = "DragonbonesDisplay";\n    DisplayLoadType[DisplayLoadType["FramesDisplay"] = 3] = "FramesDisplay";\n    DisplayLoadType[DisplayLoadType["FrameAnimation"] = 4] = "FrameAnimation";\n})(DisplayLoadType || (DisplayLoadType = {}));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Components/detail.display.ts?')},"./src/pica/render/ui/Components/energy.progress.bar.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EnergyProgressBar", function() { return EnergyProgressBar; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar EnergyProgressBar = /** @class */ (function (_super) {\n    __extends(EnergyProgressBar, _super);\n    function EnergyProgressBar(scene, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.init();\n        return _this;\n    }\n    EnergyProgressBar.prototype.setEnergyData = function (value, max) {\n        this.powerTex.setText(value + "/" + max);\n        this.powerPro.setProgress(value, max);\n    };\n    EnergyProgressBar.prototype.init = function () {\n        var width = 83 * this.dpr, height = 18 * this.dpr;\n        this.setSize(width, height);\n        var config = {\n            width: width, height: height,\n            left: 9 * this.dpr, right: 9 * this.dpr, top: 0, bottom: 0\n        };\n        this.powerPro = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ProgressMaskBar"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "explore_physical_bottom", "explore_physical_top", undefined, config, config);\n        this.powerPro.x = 0;\n        this.powerTex = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ImageValue"](this.scene, 43 * this.dpr, 15 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "explore_physical_icon", this.dpr, utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].colorNumberStyle("#ffffff", 11 * this.dpr));\n        this.powerTex.x = -width * 0.5 + 13 * this.dpr;\n        this.powerTex.y = -1 * this.dpr;\n        this.powerTex.setFontStyle("bold");\n        this.powerTex.setStroke("#000000", 2 * this.dpr);\n        this.powerTex.setOffset(-4 * this.dpr, 0);\n        this.powerTex.setLayout(1);\n        this.powerTex.setText("");\n        this.add([this.powerPro, this.powerTex]);\n    };\n    return EnergyProgressBar;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Components/energy.progress.bar.ts?')},"./src/pica/render/ui/Components/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Item_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Item.button */ "./src/pica/render/ui/Components/Item.button.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ItemButton", function() { return _Item_button__WEBPACK_IMPORTED_MODULE_0__["ItemButton"]; });\n\n/* harmony import */ var _detail_display__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./detail.display */ "./src/pica/render/ui/Components/detail.display.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DetailDisplay", function() { return _detail_display__WEBPACK_IMPORTED_MODULE_1__["DetailDisplay"]; });\n\n/* harmony import */ var _back_text_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./back.text.button */ "./src/pica/render/ui/Components/back.text.button.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BackTextButton", function() { return _back_text_button__WEBPACK_IMPORTED_MODULE_2__["BackTextButton"]; });\n\n/* harmony import */ var _energy_progress_bar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./energy.progress.bar */ "./src/pica/render/ui/Components/energy.progress.bar.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EnergyProgressBar", function() { return _energy_progress_bar__WEBPACK_IMPORTED_MODULE_3__["EnergyProgressBar"]; });\n\n\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Components/index.ts?')},"./src/pica/render/ui/CreateRole/CreateRolePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CreateRolePanel", function() { return CreateRolePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar CreateRolePanel = /** @class */ (function (_super) {\n    __extends(CreateRolePanel, _super);\n    function CreateRolePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.mCurPageNum = 0;\n        _this.setTween(false);\n        var container = _this.scene.add.container(0, 0);\n        container.add(_this);\n        _this.scene.scale.on("resize", _this.onResize, _this);\n        _this.mMediator = _this.render.mainPeer[structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].CREATEROLE_NAME];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].CREATEROLE_NAME;\n        return _this;\n        // container.scale = 1 / this.mWorld.uiScale;\n    }\n    CreateRolePanel.prototype.show = function (param) {\n        if (!param)\n            return;\n        this.avatars = this.creatAvatars(param);\n        _super.prototype.show.call(this, param);\n    };\n    CreateRolePanel.prototype.preload = function () {\n        // this.scene.load.atlas(\n        //   this.key,\n        //   Url.getRes("ui/create_role/create_role.png"),\n        //   Url.getRes("ui/create_role/create_role.json")\n        // );\n        this.addAtlas(this.key, "create_role/create_role.png", "create_role/create_role.json");\n        _super.prototype.preload.call(this);\n    };\n    CreateRolePanel.prototype.hide = function () {\n        _super.prototype.hide.call(this);\n    };\n    CreateRolePanel.prototype.resize = function (wid, hei) {\n        if (!this.mBackground) {\n            return;\n        }\n        var scale = this.scale;\n        var width = this.scene.cameras.main.width / scale;\n        var height = this.scene.cameras.main.height / scale;\n        var centerX = this.scene.cameras.main.centerX / scale;\n        // this.setScale(scale);\n        // this.mBackground.setScale(scale);\n        this.mBackground.x = centerX;\n        // this.mBackground.y = 700;\n        this.mFoot.x = centerX;\n        this.mFoot.y = height - (this.mFoot.height >> 1);\n        this.mBackgroundColor.clear();\n        this.mBackgroundColor.fillGradientStyle(0x6f75ff, 0x6f75ff, 0x04cbff, 0x04cbff);\n        this.mBackgroundColor.fillRect(0, 0, width, height);\n        this.mSubmit.x = centerX;\n        this.inputText.x = centerX;\n        this.mInputTextBg.x = centerX;\n        this.dragonbones.x = centerX;\n        this.mNextPageBtn.x = width - 150;\n        this.mRandomBtn.x = this.mInputTextBg.x + this.mInputTextBg.width / 2 - 26 * this.dpr;\n    };\n    CreateRolePanel.prototype.init = function () {\n        // const size = this.mWorld.getSize();\n        // const zoom = this.mWorld.uiScale;\n        var _a = this.scene.cameras.main, width = _a.width, height = _a.height;\n        this.mBackground = this.scene.make.image({\n            key: this.key,\n            frame: "bg.png",\n            x: width >> 1,\n        });\n        this.mBackground.y = this.mBackground.height / 2 + 92 * this.dpr;\n        this.add(this.mBackground);\n        this.mFoot = this.scene.make.image({\n            key: this.key,\n            frame: "bg_foot.png"\n        }, false);\n        this.add(this.mFoot);\n        this.mBackgroundColor = this.scene.make.graphics(undefined, false);\n        this.mBackgroundColor.fillGradientStyle(0x6f75ff, 0x6f75ff, 0x04cbff, 0x04cbff);\n        this.mBackgroundColor.fillRect(0, 0, width, height);\n        this.addAt(this.mBackgroundColor, 0);\n        // this.mInputTextBg = new NinePatch(this.scene, width >> 1, 350 * this.dpr, 255 * this.dpr, 50 * this.dpr, this.key, "input_bg.png", {\n        //   left: 27 * this.dpr,\n        //   top: 24 * this.dpr,\n        //   right: 28 * this.dpr,\n        //   bottom: 24 * this.dpr\n        // });\n        this.mInputTextBg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, width >> 1, 350 * this.dpr, 255 * this.dpr, 50 * this.dpr, this.key, "input_bg.png", {\n            left: 27 * this.dpr,\n            top: 24 * this.dpr,\n            right: 28 * this.dpr,\n            bottom: 24 * this.dpr\n        });\n        this.add(this.mInputTextBg);\n        this.inputText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"](this.scene, width >> 1, 350 * this.dpr, 160 * this.dpr, 80, {\n            type: "input",\n            fontSize: 18 * this.dpr + "px",\n            color: "#717171",\n            align: "center",\n            placeholder: utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("create_role.enter_nick")\n        }).setOrigin(0.5);\n        this.add(this.inputText);\n        var text = utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("create_role.commit");\n        if (this.mShowData && this.mShowData.button) {\n            text = this.mShowData.button.text;\n        }\n        var frame = this.scene.textures.getFrame(this.key, "submit_button_normal");\n        var w = 42;\n        var h = 43;\n        if (frame) {\n            w = frame.width;\n            h = frame.height;\n        }\n        this.mSubmit = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, width >> 1, 445 * this.dpr, 202 * this.dpr, 55 * this.dpr, this.key, "submit_button", text, undefined, undefined, {\n            left: 19 * this.dpr,\n            top: 20 * this.dpr,\n            right: w - 2 - 19 * this.dpr,\n            bottom: h - 2 - 20 * this.dpr\n        });\n        this.mSubmit.setTextStyle({\n            color: "#976400",\n            fontSize: 18 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT,\n        });\n        this.mSubmit.setFontStyle("bold");\n        this.mSubmit.on("pointerup", this.onSubmitHandler, this);\n        this.add(this.mSubmit);\n        this.mPrePageBtn = this.scene.make.image({\n            x: 60 * this.dpr,\n            y: 216 * this.dpr,\n            key: this.key,\n            frame: "arrow_left.png"\n        }).setInteractive();\n        this.mPrePageBtn.on("pointerup", this.onPrePageHandler, this);\n        this.mNextPageBtn = this.scene.make.image({\n            x: width - 60 * this.dpr,\n            y: this.mPrePageBtn.y,\n            key: this.key,\n            frame: "arrow.png"\n        }).setFlipX(true).setInteractive();\n        this.mNextPageBtn.on("pointerup", this.onNextPageHandler, this);\n        this.mRandomBtn = this.scene.make.image({\n            x: this.mInputTextBg.x,\n            y: this.mInputTextBg.y,\n            key: this.key,\n            frame: "random.png"\n        }).setInteractive();\n        this.add([this.mPrePageBtn, this.mNextPageBtn, this.mRandomBtn]);\n        this.mRandomBtn.on("pointerup", this.onRandomNameHandler, this);\n        // const role = this.scene.make.image({\n        //   x: size.width >> 1,\n        //   y: 560,\n        //   key: "role",\n        // }, false);\n        // this.add(role);\n        this.mErrorBg = this.scene.make.image({\n            key: this.key,\n            frame: "tips_bg.png",\n            x: 220 * this.dpr,\n            y: 57 * this.dpr\n        }).setVisible(false);\n        this.mError = this.scene.make.text({\n            x: 127 * this.dpr,\n            y: 30 * this.dpr,\n            style: {\n                color: "#26265d",\n                font: "bold 34px YaHei",\n                wordWrap: {\n                    width: 420,\n                    useAdvancedWrap: true\n                },\n            },\n        }, false).setVisible(false);\n        this.add([this.mErrorBg, this.mError]);\n        this.dragonbones = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["DragonbonesDisplay"](this.scene, this.render);\n        this.dragonbones.scale = this.dpr * 2;\n        this.dragonbones.x = width >> 1;\n        this.dragonbones.y = this.mNextPageBtn.y + 70 * this.dpr;\n        // this.dragonbones.y = 286 * this.dpr;\n        // this.dragonbones.play("idle");\n        this.dragonbones.on("initialized", this.loadDragonbonesComplete, this);\n        this.add(this.dragonbones);\n        this.setPageNum(0);\n        _super.prototype.init.call(this);\n        this.resize(0, 0);\n    };\n    CreateRolePanel.prototype.setAvatars = function (avatars) {\n        // this.avatars = avatars;\n        // this.dragonbones.load(new DragonbonesModel({\n        //   id: 0,\n        //   avatar: avatars[0]\n        // }));\n    };\n    CreateRolePanel.prototype.showError = function (msg) {\n        if (this.mError) {\n            this.mError.text = msg;\n            this.mError.setVisible(true);\n            this.mErrorBg.setVisible(true);\n        }\n    };\n    CreateRolePanel.prototype.setNickName = function (val) {\n        if (this.inputText) {\n            this.inputText.text = val;\n        }\n    };\n    CreateRolePanel.prototype.destroy = function () {\n        if (this.scene)\n            this.scene.scale.off("resize", this.onResize, this);\n        if (this.dragonbones) {\n            this.dragonbones.off("initialized", this.loadDragonbonesComplete, this);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    CreateRolePanel.prototype.creatAvatars = function (content) {\n        var suitGroups = content.avatarSuits;\n        var avatars = [];\n        for (var _i = 0, suitGroups_1 = suitGroups; _i < suitGroups_1.length; _i++) {\n            var group = suitGroups_1[_i];\n            var suits = [];\n            for (var _a = 0, _b = group.avatarSuit; _a < _b.length; _a++) {\n                var item = _b[_a];\n                var suit = { id: item.id, suit_type: item.suitType, slot: item.slot, tag: item.tag, sn: item.sn };\n                suits.push(suit);\n            }\n            var avatar = structure__WEBPACK_IMPORTED_MODULE_2__["AvatarSuitType"].createHasBaseAvatar(suits);\n            avatars.push(avatar);\n        }\n        content.avatars = avatars;\n        return avatars;\n    };\n    CreateRolePanel.prototype.onRandomNameHandler = function () {\n        this.mediator.randomName();\n        this.inputText.setBlur();\n    };\n    CreateRolePanel.prototype.onSubmitHandler = function () {\n        // this.emit("submit", this.inputText.text, this.avatars[this.mCurPageNum]);\n        this.mediator.submit(this.inputText.text, this.mCurPageNum);\n        this.inputText.setBlur();\n        if (this.mError) {\n            this.mError.setVisible(false);\n            this.mErrorBg.setVisible(false);\n        }\n    };\n    CreateRolePanel.prototype.onPrePageHandler = function () {\n        this.setPageNum(this.mCurPageNum - 1);\n        this.inputText.setBlur();\n    };\n    CreateRolePanel.prototype.onNextPageHandler = function () {\n        this.setPageNum(this.mCurPageNum + 1);\n        this.inputText.setBlur();\n    };\n    CreateRolePanel.prototype.setPageNum = function (val) {\n        this.mCurPageNum = val;\n        if (!this.avatars)\n            return;\n        if (this.mCurPageNum < 0) {\n            this.mCurPageNum = this.avatars.length - 1;\n        }\n        else if (this.mCurPageNum >= this.avatars.length) {\n            this.mCurPageNum = 0;\n        }\n        this.dragonbones.load({\n            id: 0,\n            avatar: this.avatars[this.mCurPageNum]\n        });\n        this.dragonbones.startLoad();\n    };\n    CreateRolePanel.prototype.onResize = function (gameSize) {\n        this.resize(gameSize.width, gameSize.height);\n    };\n    CreateRolePanel.prototype.loadDragonbonesComplete = function () {\n        this.dragonbones.play({ name: "idle", flip: false });\n    };\n    Object.defineProperty(CreateRolePanel.prototype, "mediator", {\n        get: function () {\n            if (!this.mMediator) {\n                return;\n            }\n            return this.mMediator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return CreateRolePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/CreateRole/CreateRolePanel.ts?')},"./src/pica/render/ui/CutIn/CutInPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CutInPanel", function() { return CutInPanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar CutInPanel = /** @class */ (function (_super) {\n    __extends(CutInPanel, _super);\n    function CutInPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = "cut_in";\n        return _this;\n    }\n    CutInPanel.prototype.show = function (param) {\n        var _this = this;\n        this.mShowData = param;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (param) {\n            var text = param.text;\n            if (this.mName) {\n                this.mName.setText(text[0].text);\n            }\n        }\n        else {\n            if (this.mName) {\n                this.mName.setText("???");\n            }\n        }\n        var width = this.scene.cameras.main.width;\n        this.x = width + this.width / 2;\n        // this.view.alpha = 0;\n        var _x = this.scene.cameras.main.width / 2;\n        this.scene.tweens.timeline({\n            targets: this,\n            duration: 300,\n            tweens: [{\n                    x: _x,\n                    alpha: 1,\n                    ease: "Sine.easeInOut"\n                }, {\n                    delay: 2000,\n                    y: this.y - 10 * this.dpr,\n                    alpha: 0\n                }],\n            onComplete: function () {\n                _this.emit("close");\n            }\n        });\n    };\n    CutInPanel.prototype.resize = function (w, h) {\n        // this.x = w / 2;\n        this.y = 140 * this.dpr;\n    };\n    CutInPanel.prototype.preload = function () {\n        this.addImage(this.key, "cut_in/cut_in_bg.png");\n        _super.prototype.preload.call(this);\n    };\n    CutInPanel.prototype.init = function () {\n        var background = this.scene.make.image({\n            key: this.key\n        }, false);\n        this.setSize(background.width * this.scale, background.height * this.scale);\n        this.mName = this.scene.make.text({\n            style: {\n                color: "#ffcc33",\n                fontSize: 18 * this.dpr,\n                fotnFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        this.mName.setFontStyle("bold");\n        this.mName.setStroke("#000000", 1 * this.dpr);\n        this.add([background, this.mName]);\n        _super.prototype.init.call(this);\n        this.resize(this.scene.cameras.main.width, this.scene.cameras.main.height);\n    };\n    return CutInPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/CutIn/CutInPanel.ts?')},"./src/pica/render/ui/CutInMenu/CutInMenuPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CutInMenuPanel", function() { return CutInMenuPanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar CutInMenuPanel = /** @class */ (function (_super) {\n    __extends(CutInMenuPanel, _super);\n    function CutInMenuPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.mapPop = new Map();\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].CUTINMENU_NAME;\n        return _this;\n    }\n    CutInMenuPanel.prototype.resize = function (width, height) {\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(width, height);\n    };\n    CutInMenuPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "cutInmenu/cutInmenu.png", "cutInmenu/cutInmenu.json");\n        _super.prototype.preload.call(this);\n    };\n    CutInMenuPanel.prototype.init = function () {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var buttonType = this.buttonType;\n        if (buttonType === "work") {\n            this.rightPopButton = new WorkPopContainer(this.scene, width, this.key, this.dpr);\n        }\n        else if (buttonType === "minecar") {\n            this.rightPopButton = new RightPopContainer(this.scene, width, this.key, this.dpr);\n        }\n        else\n            this.rightPopButton = new RightPopContainer(this.scene, width, this.key, this.dpr);\n        var posx = width + this.rightPopButton.width * 0.5 - 15 * this.dpr;\n        this.rightPopButton.setPosition(posx, height * 0.5 + 20 * this.dpr);\n        this.rightPopButton.setClickHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.onRightClickHandler));\n        this.add(this.rightPopButton);\n        this.resize(width, height);\n        _super.prototype.init.call(this);\n        this.opneButton();\n    };\n    CutInMenuPanel.prototype.onShow = function () {\n        this.setPopData(this.popData);\n    };\n    CutInMenuPanel.prototype.setPopData = function (data) {\n        this.popData = data;\n        if (!this.mInitialized)\n            return;\n        var type = this.buttonType;\n        if (type === "work") {\n            (this.rightPopButton).setCount(data);\n        }\n        else if (type === "minecar") {\n        }\n    };\n    CutInMenuPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    CutInMenuPanel.prototype.opneButton = function () {\n        this.rightPopButton.onTakeBack();\n    };\n    CutInMenuPanel.prototype.onRightClickHandler = function () {\n        var type = this.buttonType;\n        if (type === "work") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].CUTINMENU_NAME + "_openmed", structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAWORK_NAME);\n        }\n        else if (type === "minecar") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].CUTINMENU_NAME + "_openmed", structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAMINECAR_NAME);\n        }\n    };\n    Object.defineProperty(CutInMenuPanel.prototype, "buttonType", {\n        get: function () {\n            var data = this.mShowData;\n            var button = data.button[0];\n            return button.text;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return CutInMenuPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BasePanel"]));\n\nvar RightPopContainer = /** @class */ (function (_super) {\n    __extends(RightPopContainer, _super);\n    function RightPopContainer(scene, width, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.isPop = false;\n        _this.isPlaying = false;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.scaleWidth = width;\n        var minecarbg = _this.scene.make.image({ key: _this.key, frame: "minebag_bg" });\n        minecarbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.bgSprite = _this.scene.make.image({ key: _this.key, frame: "minebag_bg_brth" }, false);\n        _this.bgSprite.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.imgIcon = _this.scene.make.image({ key: _this.key, frame: "minecar" });\n        _this.imgIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.imgIcon.setPosition(-12 * dpr, -_this.imgIcon.height * 0.5);\n        // this.teximg = this.scene.make.image({ key: this.key, frame: "text_minebag" });\n        // this.teximg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        // this.teximg.setPosition(this.minecar.x, 2 * dpr);\n        _this.text = scene.make.text({\n            x: _this.imgIcon.x,\n            y: 2 * dpr,\n            text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.open"),\n            style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].whiteStyle(dpr, 12)\n        }, false).setOrigin(0.5);\n        _this.text.setFontStyle("bold");\n        _this.text.setStroke("#2D1415", 3 * dpr);\n        var arrow = _this.scene.make.image({ key: _this.key, frame: "arow" });\n        arrow.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var arrowcon = scene.make.container(undefined, false);\n        arrowcon.setSize(25 * dpr, 31 * dpr);\n        arrowcon.add(arrow);\n        arrowcon.setPosition(-minecarbg.width * 0.5 + 10 * dpr, 0);\n        _this.add([_this.bgSprite, minecarbg, _this.imgIcon, _this.text, arrowcon]);\n        minecarbg.on("pointerup", _this.onClickHandler, _this);\n        minecarbg.setInteractive();\n        arrowcon.on("pointerup", _this.onTakeBack, _this);\n        arrowcon.setInteractive();\n        _this.setSize(minecarbg.width, minecarbg.height);\n        _this.tween = _this.scene.tweens.add({\n            targets: _this.bgSprite,\n            alpha: { value: 0, duration: 500, ease: "Power1", yoyo: true },\n            repeat: -1\n        });\n        return _this;\n    }\n    RightPopContainer.prototype.setClickHandler = function (handler) {\n        this.clickHandler = handler;\n    };\n    RightPopContainer.prototype.setIconFrame = function (frame) {\n        this.imgIcon.setFrame(frame);\n    };\n    RightPopContainer.prototype.setPopData = function (data) {\n        this.popData = data;\n    };\n    RightPopContainer.prototype.play = function () {\n        this.bgSprite.alpha = 1;\n        this.tween.resume();\n        this.isPop = false;\n    };\n    RightPopContainer.prototype.stop = function () {\n        this.tween.pause();\n        this.bgSprite.alpha = 0;\n        this.isPop = true;\n    };\n    RightPopContainer.prototype.onClickHandler = function () {\n        if (this.clickHandler)\n            this.clickHandler.runWith(this.popData);\n    };\n    RightPopContainer.prototype.onTakeBack = function () {\n        if (!this.isPlaying && !this.isPop) {\n            this.popAnim();\n        }\n        else if (!this.isPlaying && this.isPop) {\n            this.takeback();\n        }\n    };\n    RightPopContainer.prototype.popAnim = function () {\n        this.isPlaying = true;\n        var posTx = this.scaleWidth - 15 * this.dpr;\n        var target = this;\n        this.scene.tweens.add({\n            targets: target,\n            x: { value: posTx, duration: 300, ease: "Bounce.easeOut" },\n            onComplete: function () {\n                target.stop();\n                target.isPlaying = false;\n            }\n        });\n    };\n    RightPopContainer.prototype.takeback = function () {\n        if (this.timeID) {\n            clearTimeout(this.timeID);\n            this.timeID = undefined;\n        }\n        this.isPlaying = true;\n        var posx = this.scaleWidth + this.width * 0.5 - 15 * this.dpr;\n        var target = this;\n        this.scene.tweens.add({\n            targets: target,\n            x: { value: posx, duration: 300, ease: "Bounce.easeOut" },\n            onComplete: function () {\n                target.play();\n                target.isPlaying = false;\n            }\n        });\n    };\n    return RightPopContainer;\n}(Phaser.GameObjects.Container));\nvar WorkPopContainer = /** @class */ (function (_super) {\n    __extends(WorkPopContainer, _super);\n    function WorkPopContainer(scene, width, key, dpr) {\n        var _this = _super.call(this, scene, width, key, dpr) || this;\n        _this.imgIcon.x = -22 * dpr;\n        _this.text.x = _this.imgIcon.x;\n        var countbg = _this.scene.make.image({ key: _this.key, frame: "time" });\n        countbg.x = _this.imgIcon.x + countbg.width * 0.5 + 20 * dpr;\n        countbg.y = 2 * dpr;\n        _this.add(countbg);\n        _this.countTex = scene.make.text({\n            x: countbg.x,\n            y: countbg.y,\n            text: "",\n            style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].whiteStyle(dpr, 10)\n        }, false).setOrigin(0.5);\n        _this.countTex.setFontStyle("bold");\n        _this.add(_this.countTex);\n        _this.setIconFrame("work_icon");\n        _this.text.text = utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("work.title");\n        return _this;\n    }\n    WorkPopContainer.prototype.setCount = function (count) {\n        this.countTex.text = count + "";\n    };\n    WorkPopContainer.prototype.popAnim = function () {\n        this.isPlaying = true;\n        var posTx = this.scaleWidth - 25 * this.dpr;\n        var target = this;\n        this.scene.tweens.add({\n            targets: target,\n            x: { value: posTx, duration: 300, ease: "Bounce.easeOut" },\n            onComplete: function () {\n                target.stop();\n                target.isPlaying = false;\n            }\n        });\n    };\n    WorkPopContainer.prototype.takeback = function () {\n        if (this.timeID) {\n            clearTimeout(this.timeID);\n            this.timeID = undefined;\n        }\n        this.isPlaying = true;\n        var posx = this.scaleWidth + this.width * 0.5 - 15 * this.dpr;\n        var target = this;\n        this.scene.tweens.add({\n            targets: target,\n            x: { value: posx, duration: 300, ease: "Bounce.easeOut" },\n            onComplete: function () {\n                target.play();\n                target.isPlaying = false;\n            }\n        });\n    };\n    return WorkPopContainer;\n}(RightPopContainer));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/CutInMenu/CutInMenuPanel.ts?')},"./src/pica/render/ui/Dialog/DialogPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogPanel", function() { return DialogPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar HorizontalAlignment;\n(function (HorizontalAlignment) {\n    HorizontalAlignment[HorizontalAlignment["HORIZONTAL_LEFT"] = 0] = "HORIZONTAL_LEFT";\n    HorizontalAlignment[HorizontalAlignment["HORIZONTAL_CENTER"] = 1] = "HORIZONTAL_CENTER";\n    HorizontalAlignment[HorizontalAlignment["HORIZONTAL_RIGHT"] = 2] = "HORIZONTAL_RIGHT";\n})(HorizontalAlignment || (HorizontalAlignment = {}));\n/** VerticalAlignment enum. */\nvar VerticalAlignment;\n(function (VerticalAlignment) {\n    VerticalAlignment[VerticalAlignment["VERTICAL_TOP"] = 0] = "VERTICAL_TOP";\n    VerticalAlignment[VerticalAlignment["VERTICAL_CENTER"] = 1] = "VERTICAL_CENTER";\n    VerticalAlignment[VerticalAlignment["VERTICAL_BOTTOM"] = 2] = "VERTICAL_BOTTOM";\n})(VerticalAlignment || (VerticalAlignment = {}));\nvar DialogPanel = /** @class */ (function (_super) {\n    __extends(DialogPanel, _super);\n    function DialogPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].DIALOG_NAME;\n        _this.listItems = [];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].DIALOG_NAME;\n        return _this;\n    }\n    DialogPanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var cheight = 177 * this.dpr;\n        _super.prototype.resize.call(this, width, height);\n        this.content.setPosition(width * 0.5, height - cheight / 2);\n        this.setSize(width, height);\n        this.blackBg.clear();\n        this.blackBg.fillStyle(0, 0.5);\n        this.blackBg.fillRect(0, 0, width, height);\n        this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        this.bg.scaleX = width * 1.5;\n        this.bg.x = 0;\n        this.bg.setInteractive();\n        this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n    };\n    DialogPanel.prototype.preload = function () {\n        this.addAtlas(this.key, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].textureUrl(picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].commonUrl), picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].jsonUrl(picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].commonUrl));\n        _super.prototype.preload.call(this);\n    };\n    DialogPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow) {\n            return;\n        }\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n        this.setDialogData(this.mShowData);\n    };\n    DialogPanel.prototype.init = function () {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var cheight = 177 * this.dpr;\n        this.blackBg = this.scene.make.graphics(undefined, false);\n        this.add(this.blackBg);\n        this.content = this.scene.make.container({ x: 0 * this.dpr, y: (height - cheight) / 2, width: width, height: cheight }, false);\n        this.content.setSize(width, cheight);\n        this.bg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: "menu_bg_l" });\n        this.bg.scaleY = this.scale;\n        this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.bg.displayWidth = width;\n        this.bg.displayHeight = cheight;\n        var whiteGraphic = this.scene.make.graphics(undefined, false);\n        var graphicWidth = width - 30 * this.dpr;\n        var graphicHeight = 122 * this.dpr;\n        whiteGraphic.setPosition(-graphicWidth >> 1, -graphicHeight * 0.5 + 13 * this.dpr);\n        whiteGraphic.clear();\n        whiteGraphic.fillStyle(0xffffff, 1);\n        whiteGraphic.fillRoundedRect(0, 0, graphicWidth, graphicHeight, 8 * this.dpr);\n        this.text = this.scene.make.text({\n            x: -graphicWidth * 0.5 + 20 * this.dpr, y: -graphicHeight * 0.5 + 30 * this.dpr, text: "",\n            style: { color: "#000000", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT }\n        }).setOrigin(0).setWordWrapWidth(graphicWidth - 35 * this.dpr, true);\n        var iconPosx = -width * 0.5 + 38 * this.dpr;\n        var iconPosy = -cheight * 0.5 + 25 * this.dpr;\n        this.npcIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["DynamicImage"](this.scene, iconPosx, iconPosy - 20 * this.dpr);\n        var nameBg = this.scene.make.image({ x: iconPosx + 135 * this.dpr, y: iconPosy, key: this.key, frame: "name_bg" });\n        this.npcName = this.scene.make.text({\n            x: nameBg.x, y: nameBg.y, text: "",\n            style: { fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT }\n        }).setOrigin(0.5);\n        var closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "close_1", "close_1");\n        closeBtn.setPosition(width * 0.5 - 30 * this.dpr, -cheight * 0.5 + 10 * this.dpr);\n        closeBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        closeBtn.visible = false;\n        this.content.add([this.bg, this.npcIcon, whiteGraphic, this.text, nameBg, this.npcName, closeBtn]);\n        this.bg.setInteractive();\n        this.bg.on("pointerdown", this.onNextDialogHandler, this);\n        this.add(this.content);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n        this.mScene.layerManager.addToLayer(gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["MainUIScene"].LAYER_DIALOG, this);\n    };\n    DialogPanel.prototype.setLayoutItems = function (arr) {\n        var len = arr.length;\n        var scaleRadio = (len > 4 ? 2 : 1);\n        var height = 177 * this.dpr;\n        var width = 295 * this.dpr;\n        var cheight = 27 * this.dpr;\n        var cwidth = width / scaleRadio;\n        var offsetY = 4 * this.dpr;\n        if (len === 2)\n            offsetY = 15 * this.dpr;\n        else if (len === 3)\n            offsetY = 10 * this.dpr;\n        var posX = 0;\n        var posy = (124 * this.dpr - (offsetY + cheight) * (len < 4 ? len : 4) - offsetY) / 2 - 42 * this.dpr;\n        for (var _i = 0, _a = this.listItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n        }\n        for (var i = 0; i < len; i++) {\n            var item = void 0;\n            if (i < this.listItems.length) {\n                item = this.listItems[i];\n            }\n            else {\n                item = new NpcDialogueItem(this.scene, this.dpr, this.scale, this.key);\n                this.content.add(item);\n                this.listItems.push(item);\n                item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_1__["Handler"](this, this.onItemHandler));\n            }\n            var x = (width - cwidth) * 0.5 * (i < 4 ? -1 : 1);\n            var y = posy + cheight * 0.5 + (cheight + offsetY) * (i % 4);\n            item.setItemSize(cwidth, cheight);\n            item.setPosition(x, y);\n            item.setItemData(arr[i]);\n            item.visible = true;\n        }\n    };\n    DialogPanel.prototype.setDialogData = function (data) {\n        var _this = this;\n        if (data.text && data.text[1])\n            this.npcName.text = data.text[1].text;\n        if (data.display && data.display[0]) {\n            this.npcIcon.visible = true;\n            var display_1 = data.display[0];\n            var url = utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(display_1.texturePath);\n            this.npcIcon.load(url, this, function () {\n                var width = _this.content.width;\n                var height = _this.content.height;\n                var iconWidth = _this.npcIcon.width;\n                var iconHeight = _this.npcIcon.height;\n                var x = _this.npcIcon.x;\n                var y = -height * 0.5 - 50 * _this.dpr;\n                if (display_1.horizontal === HorizontalAlignment.HORIZONTAL_LEFT) {\n                    x = -width * 0.5 + iconWidth * 0.5; // + 20 * this.dpr;\n                }\n                else if (display_1.horizontal === HorizontalAlignment.HORIZONTAL_CENTER) {\n                    x = 0;\n                }\n                else if (display_1.horizontal === HorizontalAlignment.HORIZONTAL_RIGHT) {\n                    x = width * 0.5 - iconWidth * 0.5 - 20 * _this.dpr;\n                }\n                _this.npcIcon.displayWidth = 212 * _this.dpr;\n                _this.npcIcon.scaleY = _this.npcIcon.scaleX;\n                _this.npcIcon.x = x;\n                _this.npcIcon.y = y;\n            });\n        }\n        else {\n            this.npcIcon.visible = false;\n        }\n        if (data.button && data.button.length > 0) {\n            this.setLayoutItems(data.button);\n            this.text.visible = false;\n        }\n        else {\n            for (var _i = 0, _a = this.listItems; _i < _a.length; _i++) {\n                var item = _a[_i];\n                item.visible = false;\n            }\n            this.text.text = data.text[0].text;\n            this.text.visible = true;\n        }\n    };\n    DialogPanel.prototype.update = function (param) {\n        this.mShowData = param;\n        this.setDialogData(param);\n    };\n    DialogPanel.prototype.onItemHandler = function (item) {\n        for (var _i = 0, _a = this.listItems; _i < _a.length; _i++) {\n            var temp = _a[_i];\n            temp.select = false;\n        }\n        item.select = true;\n        var data = this.showData;\n        this.render.renderEmitter(this.key + "_querydialog", { id: data.id, nodeid: item.itemData.node.id });\n    };\n    DialogPanel.prototype.onNextDialogHandler = function () {\n        var data = this.showData;\n        this.render.renderEmitter(this.key + "_querydialog", { id: data.id, nodeid: 0 });\n    };\n    DialogPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(this.key + "_hide");\n    };\n    return DialogPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["BasePanel"]));\n\nvar NpcDialogueItem = /** @class */ (function (_super) {\n    __extends(NpcDialogueItem, _super);\n    function NpcDialogueItem(scene, dpr, zoom, key) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = 0;\n        _this.zoom = 0;\n        _this.zoom = zoom;\n        _this.dpr = dpr;\n        _this.selectBg = _this.scene.make.image({ x: 0, y: 0, key: key, frame: "select_bg" });\n        _this.arrImg = _this.scene.make.image({ x: -_this.selectBg.width * 0.5, y: 0, key: key, frame: "arrow_r" });\n        _this.content = _this.scene.make.text({\n            x: 0, y: 0, text: "",\n            style: { color: "#000000", fontSize: 15 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT }\n        }).setOrigin(0, 0.5);\n        _this.add([_this.selectBg, _this.arrImg, _this.content]);\n        _this.width = _this.selectBg.width;\n        _this.height = _this.selectBg.height;\n        _this.on("pointerdown", _this.onClickHandler, _this);\n        return _this;\n    }\n    NpcDialogueItem.prototype.setItemData = function (data) {\n        this.itemData = data;\n        this.content.text = data.text;\n        this.select = false;\n    };\n    NpcDialogueItem.prototype.setHandler = function (handler) {\n        this.handler = handler;\n    };\n    Object.defineProperty(NpcDialogueItem.prototype, "select", {\n        set: function (value) {\n            this.selectBg.visible = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NpcDialogueItem.prototype.setItemSize = function (width, height) {\n        _super.prototype.setSize.call(this, width, height);\n        this.selectBg.displayWidth = width;\n        this.arrImg.x = -width * 0.5 * 0.9;\n        this.content.x = this.arrImg.x + 20 * this.dpr * this.zoom;\n        // this.removeInteractive();\n        this.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n    };\n    NpcDialogueItem.prototype.onClickHandler = function () {\n        if (this.handler)\n            this.handler.runWith(this);\n    };\n    return NpcDialogueItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Dialog/DialogPanel.ts?')},"./src/pica/render/ui/GMTools/GMToolsPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GMToolsPanel", function() { return GMToolsPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar GMToolsPanel = /** @class */ (function (_super) {\n    __extends(GMToolsPanel, _super);\n    function GMToolsPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].GM_TOOLS_NAME;\n        return _this;\n    }\n    GMToolsPanel.prototype.show = function (param) {\n        _super.prototype.show.call(this, param);\n        if (this.mInitialized) {\n            this.showButtons();\n        }\n    };\n    GMToolsPanel.prototype.update = function (param) {\n        _super.prototype.update.call(this, param);\n        if (this.mInitialized) {\n            this.showButtons();\n        }\n    };\n    GMToolsPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.command.on("enter", this.onEnterCommandHandler, this);\n        this.closeBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.commitBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCommitCmdHandler, this);\n    };\n    GMToolsPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.command.off("enter", this.onEnterCommandHandler, this);\n        this.closeBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.commitBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCommitCmdHandler, this);\n    };\n    GMToolsPanel.prototype.resize = function () {\n        // const {width, height} = this.scene.cameras.main;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.setSize(this.scaleWidth, this.scaleHeight);\n        this.closeBtn.x = (width - this.closeBtn.width) * 0.5 - 16 * this.dpr;\n        this.closeBtn.y = -(height - this.closeBtn.height) * 0.5 + 16 * this.dpr;\n        this.background.clear();\n        this.background.fillStyle(0x0, 0.6);\n        this.background.fillRect(0, 0, width, height);\n        this.background.x = -width * 0.5;\n        this.background.y = -height * 0.5;\n        this.background.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        this.command.x = -this.width * 0.5 + 20 * this.dpr;\n        this.command.y = -this.height * 0.5 + 60 * this.dpr;\n        this.x = this.cameraWidth * 0.5;\n        this.y = this.cameraHeight * 0.5;\n        this.commitBtn.x = this.command.x + this.command.width + this.commitBtn.width * 0.5 + 16 * this.dpr;\n        this.commitBtn.y = this.command.y + this.command.height * 0.5;\n        this.gridtable.setSize(this.width, height - 110 * this.dpr);\n        this.gridtable.layout();\n        this.gridtable.resetMask();\n    };\n    GMToolsPanel.prototype.preload = function () {\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    GMToolsPanel.prototype.init = function () {\n        var _this = this;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.setSize(width, height);\n        this.background = this.scene.make.graphics(undefined, false);\n        var scale = this.scale;\n        var w = width - 30 * this.dpr;\n        var h = 46 * this.dpr;\n        var graphics = null;\n        if (!this.scene.textures.exists("gmtools_btn")) {\n            graphics = this.scene.make.graphics(undefined, false);\n            graphics.fillStyle(0x008CBA);\n            graphics.fillRoundedRect(0, 0, w, h);\n            graphics.generateTexture("gmtools_btn", w, h);\n        }\n        this.command = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["LabelInput"](this.scene, {\n            width: this.width - 110 * this.dpr,\n            height: 16 * this.dpr,\n            placeholder: "",\n            fontSize: 14 * this.dpr + "px",\n            color: "#666666",\n        }).setOrigin(0, 0);\n        this.command.x = -this.width * 0.5 + 20 * this.dpr;\n        this.command.y = -this.height * 0.5 + 60 * this.dpr;\n        this.command.createBackground(6 * this.dpr, 10 * this.dpr);\n        // const inputBg = this.scene.make.graphics(undefined, false);\n        // inputBg.fillStyle(0xFFFFFF);\n        // inputBg.fillRoundedRect(this.command.x - 6 * this.dpr, this.command.y - 6 * this.dpr, this.command.width + 12 * this.dpr, this.command.height + 12 * this.dpr, 10 * this.dpr);\n        if (!this.scene.textures.exists("gmtools_commit")) {\n            graphics.clear();\n            graphics.fillStyle(0xaaaaa);\n            graphics.fillRoundedRect(0, 0, 50 * this.dpr, 30 * this.dpr);\n            graphics.generateTexture("gmtools_commit", 50 * this.dpr, 30 * this.dpr);\n            graphics.destroy();\n        }\n        this.commitBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, "gmtools_commit", "", "", "");\n        this.commitBtn.setTextStyle({ fontSize: 12 * this.dpr });\n        var capW = w;\n        var capH = 54 * this.dpr;\n        var tableConfig = {\n            x: 0,\n            y: 60 * this.dpr,\n            table: {\n                width: width,\n                height: height - 110 * this.dpr,\n                columns: 1,\n                cellWidth: width,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                zoom: scale,\n                cellPadX: 0,\n                cellPadY: 10 * this.dpr\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new Item(_this.scene, 91 * _this.dpr, 46 * _this.dpr, _this.dpr);\n                    cellContainer.on("targetUI", _this.onTargetUIHandler, _this);\n                }\n                cellContainer.setSize(cell.width, cell.height);\n                cellContainer.setData({ item: item });\n                cellContainer.setItemData(item);\n                return cellContainer;\n            }\n        };\n        this.gridtable = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.gridtable.on("cellTap", function (cell) {\n            if (cell) {\n                var data = cell.item;\n                if (data && data.node) {\n                    _this.onTargetUIHandler(data.node.id);\n                }\n            }\n        });\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "close");\n        this.add([this.background, this.gridtable, this.closeBtn, this.command, this.commitBtn]);\n        _super.prototype.init.call(this);\n        this.resize();\n    };\n    GMToolsPanel.prototype.showButtons = function () {\n        if (!this.mShowData) {\n            return;\n        }\n        var data = this.showData;\n        var buttons = data.button;\n        if (buttons.length >= 1) {\n            this.gridtable.setItems(buttons);\n        }\n        var inputText = data.inputText;\n        if (inputText && inputText.length > 0) {\n            this.command.setData({ item: inputText[0] });\n        }\n    };\n    GMToolsPanel.prototype.onTargetUIHandler = function (id) {\n        if (!this.mShowData || this.mShowData.length < 1) {\n            return;\n        }\n        this.emit("targetUI", this.mShowData.id, id);\n        this.render.renderEmitter(this.key + "_targetUI", { id: this.mShowData.id, componentId: id });\n        this.command.setBlur();\n    };\n    GMToolsPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(this.key + "_close");\n        // this.emit("close");\n    };\n    GMToolsPanel.prototype.onCommitCmdHandler = function () {\n        this.command.setBlur();\n        if (!this.mShowData || this.mShowData.length < 1) {\n            return;\n        }\n        var text = this.command.text;\n        if (!text) {\n            return;\n        }\n        var item = this.command.getData("item");\n        // if (item && item.node) this.emit("targetUI");\n        if (item && item.node) {\n            this.render.renderEmitter(this.key + "_targetUI", { id: this.mShowData.id, componentId: item.node.id, text: text });\n        }\n    };\n    GMToolsPanel.prototype.onEnterCommandHandler = function () {\n        this.onCommitCmdHandler();\n    };\n    return GMToolsPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\nvar Item = /** @class */ (function (_super) {\n    __extends(Item, _super);\n    function Item(scene, width, height, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.scene, "gmtools_btn", "", "", "1");\n        _this.btn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), _this.onBtnHandler, _this);\n        _this.btn.setTextStyle({\n            fontSize: 12 * dpr\n        });\n        _this.btn.removeInteractive();\n        _this.add(_this.btn);\n        return _this;\n    }\n    Item.prototype.setItemData = function (item) {\n        this.item = item;\n        this.btn.setText(item.text);\n    };\n    Item.prototype.onBtnHandler = function () {\n        if (this.item)\n            this.emit("targetUI", this.item.id);\n    };\n    return Item;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/GMTools/GMToolsPanel.ts?')},"./src/pica/render/ui/Login/LoginPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoginPanel", function() { return LoginPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar LoginPanel = /** @class */ (function (_super) {\n    __extends(LoginPanel, _super);\n    function LoginPanel(uimanager) {\n        var _this = _super.call(this, uimanager.scene, uimanager.render) || this;\n        _this.areaCode = "86";\n        _this.downcount = -1;\n        _this.mMediator = _this.render.mainPeer[structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].LOGIN_NAME];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].LOGIN_NAME;\n        return _this;\n    }\n    LoginPanel.prototype.show = function () {\n        _super.prototype.show.call(this);\n        if (this.mInitialized) {\n            this.setInputVisible(true);\n        }\n    };\n    LoginPanel.prototype.hide = function () {\n        _super.prototype.hide.call(this);\n    };\n    LoginPanel.prototype.setInputVisible = function (val) {\n        if (this.mPhoneCodeInput) {\n            this.mPhoneCodeInput.visible = val;\n            this.mPhoneInput.visible = val;\n        }\n    };\n    LoginPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.fetchTime) {\n            clearTimeout(this.fetchTime);\n        }\n    };\n    LoginPanel.prototype.setLoginEnable = function (val) {\n        this.loginBtn.enable = val;\n    };\n    LoginPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "login/login.png", "login/login.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    LoginPanel.prototype.init = function () {\n        // const { width, height } = this.scene.cameras.main;\n        var width = this.scene.cameras.main.width / this.scale;\n        var height = this.scene.cameras.main.height / this.scale;\n        var container = this.scene.add.container(0, 0, this);\n        var scale = this.scale;\n        var backgroundColor = this.scene.make.graphics(undefined, false);\n        backgroundColor.fillRect(0, 0, width, height);\n        backgroundColor.fillGradientStyle(0x6f75ff, 0x6f75ff, 0x01cdff, 0x01cdff);\n        var cloudLeft = this.scene.make.image({\n            x: 0,\n            y: 0,\n            key: this.key,\n            frame: "cloud_left"\n        }, false).setOrigin(0);\n        cloudLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var cloudRight = this.scene.make.image({\n            x: width,\n            y: 0,\n            key: this.key,\n            frame: "cloud_right"\n        }, false).setOrigin(1, 0);\n        cloudRight.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var logo = this.scene.make.image({\n            x: width * 0.5,\n            y: 44 * this.dpr,\n            key: this.key,\n            frame: "logo"\n        }, false).setOrigin(0.5, 0);\n        logo.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var bg = this.scene.make.image({\n            key: this.key,\n            frame: "bg"\n        });\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        bg.x = width * 0.5;\n        bg.y = height - bg.height * 0.5;\n        this.mPhoneInput = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["InputField"](this.scene, 0, 0, 256 * this.dpr, 40 * this.dpr, {\n            type: "tel",\n            maxLength: 11,\n            placeholder: "",\n            color: "#717171",\n            fontSize: 16 * this.dpr + "px"\n        });\n        this.mPhoneInput.on("enter", this.onEnterPhoneHandler, this);\n        var phoneContaier = this.createInput(this.mPhoneInput, width * 0.5, 97 * this.dpr + logo.y + logo.height);\n        var accountData = localStorage.getItem("accountphone");\n        if (accountData) {\n            try {\n                this.mPhoneInput.text = JSON.parse(accountData).account;\n            }\n            catch (_a) {\n            }\n        }\n        this.mPhoneCodeInput = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["InputField"](this.scene, 0, 0, 156 * this.dpr, 40 * this.dpr, {\n            type: "tel",\n            maxLength: 4,\n            placeholder: "",\n            color: "#717171",\n            text: "",\n            fontSize: 16 * this.dpr + "px"\n        }).setOrigin(0, 0.5);\n        this.mPhoneCodeInput.on("enter", this.onEnterCodeHandler, this);\n        var codeContainer = this.createInput(this.mPhoneCodeInput, width * 0.5, 172 * this.dpr + logo.y + logo.height, 256 * this.dpr);\n        // this.mPhoneCodeInput.resize(100 * this.dpr, this.mPhoneCodeInput.height);\n        this.mPhoneCodeInput.x = -codeContainer.width / 2 + 8 * this.dpr;\n        var label1 = this.scene.make.text({\n            x: width * 0.5,\n            text: "\\u62B5\\u5236\\u4E0D\\u826F\\u6E38\\u620F\\uFF0C\\u62D2\\u7EDD\\u76D7\\u7248\\u6E38\\u620F\\u3002\\u6CE8\\u610F\\u81EA\\u6211\\u4FDD\\u62A4\\uFF0C\\u8C28\\u9632\\u53D7\\u9A97\\u4E0A\\u5F53\\u3002\\n\\u9002\\u5EA6\\u6E38\\u620F\\u76CA\\u8111\\uFF0C\\u6C89\\u8FF7\\u6E38\\u620F\\u4F24\\u8EAB\\u3002\\u5408\\u7406\\u5B89\\u6392\\u65F6\\u95F4\\uFF0C\\u4EAB\\u53D7\\u5065\\u5EB7\\u751F\\u6D3B\\u3002",\n            style: {\n                color: "#FFEC48",\n                align: "center",\n                fontSize: 11 * this.dpr + "px",\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        // label1.setResolution(this.dpr);\n        label1.y = height - 50 * this.dpr - label1.height * 0.5;\n        var label2 = this.scene.make.text({\n            x: width * 0.5,\n            text: "\\u672C\\u7F51\\u7EDC\\u6E38\\u620F\\u9002\\u5408\\u5E74\\u6EE116\\u5468\\u5C81\\u4EE5\\u4E0A\\u7684\\u7528\\u6237\\uFF0C\\u8BF7\\u60A8\\u786E\\u8BA4\\u5DF2\\u5982\\u5B9E\\u8FDB\\u884C\\n\\u5B9E\\u540D\\u6CE8\\u518C\\uFF0C\\u4E3A\\u4E86\\u60A8\\u7684\\u5065\\u5EB7\\uFF0C\\u8BF7\\u5408\\u7406\\u63A7\\u5236\\u6E38\\u620F\\u65F6\\u95F4\\u3002",\n            style: {\n                color: "#FFFFFF",\n                align: "center",\n                fontSize: 9.33 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }).setOrigin(0.5);\n        // label2.setResolution(this.dpr);\n        label2.y = height - 16 * this.dpr - label2.height * 0.5;\n        var line = this.scene.make.image({\n            x: 12 * this.dpr,\n            key: this.key,\n            frame: "line",\n        }, false);\n        line.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.fetchCode = this.scene.make.text({\n            text: "",\n            style: {\n                fontSize: 14 * this.dpr + "px",\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n                color: "#2B5AF3"\n            }\n        }, false).setOrigin(0.5).setInteractive();\n        this.fetchCode.x = (codeContainer.width - this.fetchCode.width) * 0.5 - 22 * this.dpr;\n        // this.fetchCode.setResolution(this.dpr);\n        this.fetchCode.on("pointerup", this.onFetchCodeHandler, this);\n        this.fetchCode.on("pointerdown", this.onFetchCodeDownHandler, this);\n        codeContainer.add([line, this.fetchCode]);\n        this.loginBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, width * 0.5, codeContainer.y + codeContainer.height + 33 * this.dpr, 191 * this.dpr, 50 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "yellow_btn", " ", this.dpr, 1, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 14 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        this.loginBtn.setTextStyle({\n            color: "#995E00",\n            fontSize: 22 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n        });\n        this.loginBtn.setFontStyle("bold");\n        this.loginBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Down), this.LoginDownHandler, this);\n        this.loginBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.tryLogin, this);\n        var label = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, 0, 0, "[area=userService][color=#FFEC48][/color][/area][area=privacy][color=#FFEC48][/color][/area]", {\n            color: "#ffffff",\n            fontSize: 11 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n        }).setOrigin(0.5, 0.5).setInteractive().on("areadown", function (key) {\n            if (key === "userService") {\n                // TODO \n                utils__WEBPACK_IMPORTED_MODULE_4__["Helpers"].openUrl("https://picatown.com/con_news/news.php?nid=1201");\n            }\n            else {\n                utils__WEBPACK_IMPORTED_MODULE_4__["Helpers"].openUrl("https://picatown.com/con_news/news.php?nid=1201");\n            }\n        });\n        // label.setResolution(this.dpr);\n        this.acceptBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["CheckBox"](this.scene, this.key, "accept_unchecked", "accept_checked").on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onCheckboxHandler, this);\n        label.x = this.loginBtn.x + 8 * this.dpr;\n        label.y = this.loginBtn.y + this.loginBtn.height * 0.5 + 24 * this.dpr;\n        this.acceptBtn.x = label.x - label.width * 0.5 - 8 * this.dpr;\n        this.acceptBtn.y = label.y;\n        this.acceptBtn.selected = true;\n        this.add([backgroundColor, bg, cloudLeft, cloudRight, logo, phoneContaier, codeContainer, label1, label2, this.loginBtn, this.acceptBtn, label]);\n        _super.prototype.init.call(this);\n    };\n    LoginPanel.prototype.createInput = function (input, x, y, width) {\n        var container = this.scene.make.container({ x: x, y: y }, false);\n        var frame = this.scene.textures.getFrame(this.key, "input_bg");\n        // const height = frame ? frame.height || 50 * this.dpr;\n        var bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, input.x - 8 * this.dpr, input.y, (width ? width : input.width) + 14 * this.dpr, frame.height, this.key, "input_bg", {\n            left: 27 * this.dpr,\n            top: 0 * this.dpr,\n            right: 28 * this.dpr,\n            bottom: 0 * this.dpr\n        }, this.dpr, 1);\n        container.add([input, bg]);\n        container.setSize(bg.width, bg.height);\n        return container;\n    };\n    LoginPanel.prototype.onFetchCodeDownHandler = function () {\n        if (this.mPhoneInput) {\n            this.mPhoneCodeInput.setBlur();\n            this.mPhoneInput.setBlur();\n        }\n    };\n    LoginPanel.prototype.onFetchCodeHandler = function () {\n        var _this = this;\n        var text = this.mPhoneInput.text;\n        if (text.length !== 11) {\n            this.render.onLoginErrorHanler("error", "");\n            return;\n        }\n        if (this.fetchTime) {\n            return;\n        }\n        // this.fetchTime = setTimeout(() => {\n        //     this.fetchTime = null;\n        // }, 60000);\n        this.downcount = 60;\n        this.fetchTime = setInterval(function () {\n            if (--_this.downcount <= 0) {\n                clearInterval(_this.fetchTime);\n                _this.fetchTime = undefined;\n            }\n            if (_this.downcount > 0) {\n                _this.fetchCode.setText("\\u83B7\\u53D6\\u9A8C\\u8BC1\\u7801(" + _this.downcount + ")");\n            }\n            else {\n                _this.fetchCode.setText("\\u83B7\\u53D6\\u9A8C\\u8BC1\\u7801");\n            }\n        }, 1000);\n        this.render.remote[structure__WEBPACK_IMPORTED_MODULE_3__["MAIN_WORKER"]].onFetchCodeHandler();\n    };\n    LoginPanel.prototype.tryLogin = function () {\n        var phone = this.mPhoneInput.text;\n        var code = this.mPhoneCodeInput.text;\n        if (phone.length !== 11) {\n            this.render.onLoginErrorHanler("error", "");\n            return;\n        }\n        if (!code) {\n            this.render.onLoginErrorHanler("error", "");\n            return;\n        }\n        if (!this.mMediator)\n            this.mMediator = this.render.mainPeer[structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].LOGIN_NAME];\n        this.mMediator.login(phone, code, this.areaCode);\n        // this.render.remote[MAIN_WORKER].onLoginHandler();\n    };\n    LoginPanel.prototype.LoginDownHandler = function () {\n        if (this.mPhoneInput) {\n            this.mPhoneCodeInput.setBlur();\n            this.mPhoneInput.setBlur();\n        }\n    };\n    LoginPanel.prototype.onCheckboxHandler = function () {\n        if (this.tryLogin) {\n            this.loginBtn.enable = this.acceptBtn.selected;\n        }\n    };\n    LoginPanel.prototype.onEnterPhoneHandler = function () {\n        this.mPhoneCodeInput.setFocus();\n    };\n    LoginPanel.prototype.onEnterCodeHandler = function () {\n        this.mPhoneCodeInput.setBlur();\n        this.tryLogin();\n    };\n    return LoginPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Login/LoginPanel.ts?')},"./src/pica/render/ui/Login/VerifiePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VerifiedPanel", function() { return VerifiedPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar VerifiedPanel = /** @class */ (function (_super) {\n    __extends(VerifiedPanel, _super);\n    function VerifiedPanel(scene, render) {\n        var _this = _super.call(this, scene, render) || this;\n        _this.isIDCard = /^[1-9]\\d{5}(19|20|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].VERIFIED_NAME;\n        return _this;\n    }\n    VerifiedPanel.prototype.setVerifiedEnable = function (val) {\n        if (this.mIDCardInput) {\n            this.mNameInput.visible = val;\n            this.mIDCardInput.visible = val;\n            this.mVerifiedBtn.enable = val;\n        }\n    };\n    VerifiedPanel.prototype.preload = function () {\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    VerifiedPanel.prototype.init = function () {\n        var _a = this.scene.cameras.main, width = _a.width, height = _a.height;\n        var mask = this.scene.make.graphics(undefined, false);\n        mask.fillStyle(0, 0.6);\n        mask.fillRect(-width * 0.5, -height * 0.5, width, height)\n            .setInteractive(new Phaser.Geom.Rectangle(-width * 0.5, -height * 0.5, width, height), Phaser.Geom.Rectangle.Contains);\n        var container = this.scene.make.container({}, false);\n        var bg = this.scene.make.image({\n            key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key,\n            frame: "bg"\n        }, false);\n        container.setSize(bg.width, bg.height);\n        var title_bg = this.scene.make.image({\n            y: -16.33 * this.dpr - container.height * 0.5,\n            key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key,\n            frame: "title"\n        }, false).setOrigin(0.5, 0);\n        var title = this.scene.make.text({\n            y: title_bg.y + 14.67 * this.dpr,\n            text: "",\n            style: {\n                color: "#905B06",\n                fontSize: 16 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT\n            }\n        }).setOrigin(0.5, 0);\n        this.mNameInput = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"](this.scene, 0, 0, 160 * this.dpr, 36 * this.dpr, {\n            type: "text",\n            placeholder: "",\n            color: "#838383",\n            fontSize: 10 * this.dpr + "px"\n        }).setOrigin(0, 0.5);\n        this.mIDCardInput = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"](this.scene, 0, 0, 160 * this.dpr, 36 * this.dpr, {\n            type: "tel",\n            maxLength: 18,\n            placeholder: "",\n            color: "#838383",\n            fontSize: 10 * this.dpr + "px"\n        }).setOrigin(0, 0.5);\n        var nameContainer = this.createInput(this.mNameInput, "*", 0, 0);\n        nameContainer.x = -nameContainer.width * 0.5;\n        nameContainer.y = 95 * this.dpr + nameContainer.height * 0.5 - container.height * 0.5;\n        var idcardContainer = this.createInput(this.mIDCardInput, "*", 0, nameContainer.y + nameContainer.height + 15 * this.dpr);\n        idcardContainer.x = nameContainer.x;\n        var tips = this.scene.make.text({\n            y: 40 * this.dpr - container.height * 0.5,\n            text: "\\n\\n",\n            style: {\n                align: "center",\n                fontSize: 10 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                color: "#111111"\n            }\n        }, false).setOrigin(0.5, 0);\n        var tips2 = this.scene.make.text({\n            y: container.height * 0.5 - 75 * this.dpr,\n            text: "\\n",\n            style: {\n                align: "center",\n                fontSize: 8 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                color: "#FF0000"\n            }\n        }, false).setOrigin(0.5, 1);\n        this.add([mask, container]);\n        this.mVerifiedBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, container.height * 0.5 - 16 * this.dpr, 110 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "yellow_btn", "", this.dpr, this.scale, {\n            left: 12 * this.dpr * this.scale,\n            top: 12 * this.dpr * this.scale,\n            right: 12 * this.dpr * this.scale,\n            bottom: 12 * this.dpr * this.scale\n        });\n        this.mVerifiedBtn.setTextStyle({\n            color: "#996600",\n            fontSize: 14 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT\n        });\n        this.mVerifiedBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Down), this.onVerifiedDownHandler, this);\n        this.mVerifiedBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onVerifiedHandler, this);\n        this.mVerifiedBtn.y -= this.mVerifiedBtn.height / 2;\n        this.mVerifiedBtn.setFontStyle("bold");\n        container.add([bg, title_bg, title, nameContainer, idcardContainer, tips, tips2, this.mVerifiedBtn]);\n        _super.prototype.init.call(this);\n        this.x = width * this.originX;\n        this.y = height * this.originY;\n        container.y = -this.y * 0.3;\n    };\n    VerifiedPanel.prototype.onVerifiedHandler = function () {\n        var name = this.mNameInput.text;\n        var idCard = this.mIDCardInput.text;\n        if (!name) {\n            this.render.onLoginErrorHanler("error", "[color=#F9361B][/color]");\n            return;\n        }\n        if (!idCard || idCard.length !== 18) {\n            this.render.onLoginErrorHanler("error", "[color=#F9361B][/color]");\n            return;\n        }\n        if (!this.checkIdCard()) {\n            this.render.onLoginErrorHanler("error", "[color=#F9361B]\\n[/color]");\n            return;\n        }\n        this.render.onLoginErrorHanler("error", "[color=#F9361B]\\n[/color]");\n        this.render.remote[structure__WEBPACK_IMPORTED_MODULE_4__["MAIN_WORKER"]].onVerifiedHandler(name, idCard);\n    };\n    VerifiedPanel.prototype.onVerifiedDownHandler = function () {\n        if (this.mNameInput) {\n            this.mNameInput.setBlur();\n            this.mIDCardInput.setBlur();\n        }\n    };\n    VerifiedPanel.prototype.createInput = function (input, name, x, y) {\n        var container = this.scene.make.container({ x: x, y: y }, false);\n        var text = this.scene.make.text({\n            text: name,\n            style: {\n                color: "#ff0000",\n                fontSize: 10 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT\n            }\n        }).setOrigin(0, 0.5);\n        var boder = this.scene.make.graphics(undefined, false);\n        var width = 189 * this.dpr;\n        var height = 36.67 * this.dpr;\n        boder.fillStyle(0xDDDDDD);\n        boder.lineStyle(2 * this.dpr, 0xA1A1A1);\n        boder.fillRoundedRect(text.width, -height * 0.5, width, height, 2 * this.dpr);\n        input.x = text.width + 10 * this.dpr;\n        container.add([text, boder, input]);\n        container.setSize(width + input.x, height);\n        return container;\n    };\n    VerifiedPanel.prototype.checkIdCard = function () {\n        // var city:Object = {11:"", 12:"", 13:"", 14:"", 15:"", 21:"", 22:"", 23:" ", 31:"", 32:"", 33:"", 34:"", 35:"", 36:"", 37:"", 41:"", 42:" ", 43:"", 44:"", 45:"", 46:"", 50:"", 51:"", 52:"", 53:"", 54:" ", 61:"", 62:"", 63:"", 64:"", 65:"", 71:"", 81:"", 82:"", 91:" "};\n        var code = this.mIDCardInput.text;\n        if (this.isIDCard.test(code)) {\n            if (code.length === 18) {\n                var codeAry = code.split("");\n                // (aiWi)(mod 11)\n                // \n                var factor = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];\n                // \n                var parity = ["1", "0", "X", "9", "8", "7", "6", "5", "4", "3", "2"];\n                var sum = 0;\n                var ai = 0;\n                var wi = 0;\n                for (var i = 0; i < 17; i++) {\n                    ai = codeAry[i];\n                    wi = factor[i];\n                    sum += ai * wi;\n                }\n                if (parity[sum % 11] !== codeAry[17].toLocaleUpperCase()) {\n                    return false;\n                }\n                return true;\n            }\n        }\n        return false;\n    };\n    Object.defineProperty(VerifiedPanel.prototype, "verifiedBtn", {\n        get: function () {\n            return this.mVerifiedBtn;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return VerifiedPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Login/VerifiePanel.ts?')},"./src/pica/render/ui/PicManorInfo/PicManorInfoPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicManorInfoPanel", function() { return PicManorInfoPanel; });\n/* harmony import */ var _PicaManorChildPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaManorChildPanel */ "./src/pica/render/ui/PicManorInfo/PicaManorChildPanel.ts");\n/* harmony import */ var _PicaManorShopPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaManorShopPanel */ "./src/pica/render/ui/PicManorInfo/PicaManorShopPanel.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar PicManorInfoPanel = /** @class */ (function (_super) {\n    __extends(PicManorInfoPanel, _super);\n    function PicManorInfoPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAMANORINFO_NAME;\n        return _this;\n    }\n    PicManorInfoPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(w, h);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x000000, 0.66);\n        this.mBackGround.fillRect(0, 0, w, h);\n        this.content.x = w * 0.5;\n        this.content.y = h * 0.5;\n    };\n    PicManorInfoPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n        if (this.mShowData)\n            this.setManorInfo(this.mShowData);\n    };\n    PicManorInfoPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n    };\n    PicManorInfoPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n    };\n    PicManorInfoPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "manor/manor.png", "manor/manor.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].common2Url + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].common3Key, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].textureUrl(picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].common3Url), picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].jsonUrl(picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].common3Url));\n        _super.prototype.preload.call(this);\n    };\n    PicManorInfoPanel.prototype.init = function () {\n        var zoom = this.scale;\n        var wid = this.scaleWidth;\n        var hei = this.scaleHeight;\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, wid * zoom, hei * zoom);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, wid, hei), Phaser.Geom.Rectangle.Contains);\n        this.add(this.mBackGround);\n        this.content = this.scene.make.container(undefined, false);\n        this.add(this.content);\n        this.resize(wid, hei);\n        this.openManorChild();\n        _super.prototype.init.call(this);\n    };\n    PicManorInfoPanel.prototype.setManorInfo = function (data) {\n        this.manorInfo = data;\n        if (this.picChildPanel)\n            this.picChildPanel.setManorInfoData(data);\n    };\n    PicManorInfoPanel.prototype.setShopCategories = function (content) {\n        if (this.picShopPanel)\n            this.picShopPanel.setShopCategories(content);\n    };\n    PicManorInfoPanel.prototype.setShopDatas = function (content) {\n        if (this.picShopPanel)\n            this.picShopPanel.setShopDatas(content);\n    };\n    PicManorInfoPanel.prototype.setManorTips = function () {\n        this.picTipsPanel.setManorTipsData(utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("manor.successtitle"));\n    };\n    PicManorInfoPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicManorInfoPanel.prototype.openManorChild = function () {\n        this.showChildPanel();\n        this.picChildPanel.setTitleText(utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("manor.landstatus"));\n    };\n    PicManorInfoPanel.prototype.openManorShop = function () {\n        this.showShopPanel();\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_getCategories", this.manorInfo.manorIndex);\n    };\n    PicManorInfoPanel.prototype.showChildPanel = function () {\n        var _this = this;\n        if (!this.picChildPanel) {\n            var wid = 334 * this.dpr;\n            var hei = 353 * this.dpr;\n            this.picChildPanel = new _PicaManorChildPanel__WEBPACK_IMPORTED_MODULE_0__["PicaManorChildPanel"](this.scene, this.render, 0, 0, wid, hei, this.dpr, this.scale, this.key);\n            this.picChildPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, function (type, manorName) {\n                if (type !== -1) {\n                    if (_this.manorInfo) {\n                        _this.render.mainPeer.getUserData_CurRoomID()\n                            .then(function (roomid) {\n                            _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + _this.key + "_buyeditor", { roomid: roomid, index: _this.manorInfo.manorIndex, type: type, manorName: manorName });\n                        });\n                    }\n                }\n                else {\n                    _this.openManorShop();\n                    _this.hideChildPanel();\n                }\n            }));\n            this.picChildPanel.setCloseHandler(new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, this.OnCloseHandler));\n        }\n        this.content.add(this.picChildPanel);\n    };\n    PicManorInfoPanel.prototype.hideChildPanel = function () {\n        this.content.remove(this.picChildPanel);\n    };\n    PicManorInfoPanel.prototype.showShopPanel = function () {\n        var _this = this;\n        if (!this.picShopPanel) {\n            var wid = 334 * this.dpr;\n            var hei = 455 * this.dpr;\n            this.picShopPanel = new _PicaManorShopPanel__WEBPACK_IMPORTED_MODULE_1__["PicaManorShopPanel"](this.scene, 0, 0, wid, hei, this.key, this.dpr, this.scale);\n            this.picShopPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, function (type, data) {\n                if (type === "usetype") {\n                    _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + _this.key + "_usingitem", data);\n                }\n                else if (type === "buytype") {\n                    _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + _this.key + "_buyItem", data);\n                }\n            }), new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, function () {\n                _this.hideShopPanel();\n                _this.openManorChild();\n            }));\n            this.picShopPanel.on("queryProp", function (page, category, subCategory) {\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + _this.key + "_queryProp", { page: page, category: category, subCategory: subCategory });\n            }, this);\n        }\n        this.content.add(this.picShopPanel);\n        this.picShopPanel.refreshMask();\n    };\n    PicManorInfoPanel.prototype.hideShopPanel = function () {\n        this.content.remove(this.picShopPanel);\n    };\n    PicManorInfoPanel.prototype.OnCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_hide");\n    };\n    return PicManorInfoPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicManorInfo/PicManorInfoPanel.ts?')},"./src/pica/render/ui/PicManorInfo/PicaManorBasePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaManorBasePanel", function() { return PicaManorBasePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaManorBasePanel = /** @class */ (function (_super) {\n    __extends(PicaManorBasePanel, _super);\n    function PicaManorBasePanel(scene, x, y, width, height, dpr, key) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaManorBasePanel.prototype.setTitleText = function (text) {\n        this.titleText.text = text;\n    };\n    PicaManorBasePanel.prototype.setCloseHandler = function (handler) {\n        this.closeHandler = handler;\n    };\n    PicaManorBasePanel.prototype.create = function () {\n        var width = this.width;\n        var height = this.height;\n        this.createBackground(width, height);\n        var posY = -height * 0.5;\n        this.titlebg = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].common2Key, frame: "title" });\n        this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titlebg.y = posY + 5 * this.dpr;\n        this.add(this.titlebg);\n        this.titleText = this.scene.make.text({ x: 0, y: this.titlebg.y + 2 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("manor.title"), style: { color: "#905C06", fontSize: 21 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        this.titleText.setFontStyle("bold");\n        this.titleText.setResolution(this.dpr);\n        this.add(this.titleText);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "close");\n        this.closeBtn.setDisplaySize(28 * this.dpr, 28 * this.dpr);\n        this.closeBtn.setPosition(this.width * 0.5 - 8 * this.dpr, posY + this.dpr * 7);\n        this.closeBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onCloseHandler, this);\n        this.add(this.closeBtn);\n    };\n    PicaManorBasePanel.prototype.createBackground = function (width, height) {\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, width, height, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "bg", {\n            left: 70 * this.dpr,\n            top: 30 * this.dpr,\n            right: 30 * this.dpr,\n            bottom: 70 * this.dpr\n        });\n        this.add(this.bg);\n    };\n    PicaManorBasePanel.prototype.onCloseHandler = function () {\n        if (this.closeHandler)\n            this.closeHandler.run();\n    };\n    return PicaManorBasePanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicManorInfo/PicaManorBasePanel.ts?')},"./src/pica/render/ui/PicManorInfo/PicaManorChildPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaManorChildPanel", function() { return PicaManorChildPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _PicaManorBasePanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PicaManorBasePanel */ "./src/pica/render/ui/PicManorInfo/PicaManorBasePanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaManorChildPanel = /** @class */ (function (_super) {\n    __extends(PicaManorChildPanel, _super);\n    function PicaManorChildPanel(scene, render, x, y, width, height, dpr, zoom, key) {\n        var _this = _super.call(this, scene, x, y, width, height, dpr, key) || this;\n        _this.zoom = zoom;\n        _this.render = render;\n        return _this;\n    }\n    // "manorname": "",\n    // "manorowner": "",\n    // "manorarea": "",\n    // "manorstatus": "",\n    // "manorprice": "",\n    // "needlevel": "\n    PicaManorChildPanel.prototype.setManorInfoData = function (data) {\n        // const datas = content.storeList;\n        this.nameTitle.text = "";\n        var type = 2;\n        if (data.alreadyBuy) {\n            type = data.myowner ? 1 : 3;\n        }\n        this.setLayout(type, data);\n    };\n    PicaManorChildPanel.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    PicaManorChildPanel.prototype.create = function () {\n        var _this = this;\n        _super.prototype.create.call(this);\n        var posy = -this.height * 0.5;\n        this.headbg = this.scene.make.image({ key: this.key, frame: "finca_master_head frame" });\n        this.headbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.headbg.y = posy + this.headbg.height * 0.5 + 40 * this.dpr;\n        this.add(this.headbg);\n        this.headIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, 0, this.key, "finca_master_head");\n        this.add(this.headIcon);\n        this.headIcon.x = this.headbg.x;\n        this.headIcon.y = this.headbg.y;\n        var namey = this.headbg.y + this.headbg.height * 0.5 + 5 * this.dpr;\n        this.nameTitle = this.scene.make.text({ x: this.headbg.x, y: namey + 10 * this.dpr, text: "", style: { fontSize: 17 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#000000" } }).setOrigin(0.5);\n        this.nameTitle.setFontStyle("bold");\n        this.add(this.nameTitle);\n        this.contentbg = this.scene.make.image({ key: this.key, frame: "finca_message_panel" });\n        this.contentbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.contentbg.y = this.nameTitle.y + this.contentbg.height * 0.5 + 30 * this.dpr;\n        this.add(this.contentbg);\n        this.contentbg.visible = false;\n        this.detailText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, -this.contentbg.width * 0.5 + 20 * this.dpr, this.contentbg.y, "", {\n            fontSize: 13 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            color: "#813D01",\n            align: "left",\n            wrap: {\n                mode: "char",\n                width: 240 * this.dpr\n            }\n        }).setInteractive()\n            .on("areadown", function (key) {\n            utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().debug(key);\n        })\n            .on("areaup", function (key) {\n            // tslint:disable-next-line:no-console\n            new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["InputView"](_this.scene, _this.render).show({\n                title: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.eidtnickname"),\n                placeholder: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.nicknameplaceholder"),\n                handler: new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](_this, function (text) {\n                    if (_this.sendHandler)\n                        _this.sendHandler.runWith([3, text]); // 3: op_pkt_def.PKT_MANOR_OP.PKT_MANOR_OP_Change_Name\n                })\n            });\n        });\n        this.detailText.setOrigin(0, 0.5);\n        this.add(this.detailText);\n        (this.detailText).visible = false;\n        this.detailText.addImage("finca_compile", { key: this.key, frame: "finca_compile", y: 3 * this.dpr, left: 10 * this.dpr, right: 10 * this.dpr });\n        this.detailText.addImage("iv_coin", { key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, frame: "iv_coin", y: -1 * this.dpr, left: 2 * this.dpr, right: 5 * this.dpr });\n        this.detailText.addImage("iv_diamond", { key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, frame: "iv_diamond", y: -1 * this.dpr, left: 2 * this.dpr, right: 5 * this.dpr });\n        this.editorButton = this.createNineButton(130 * this.dpr, 45 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.editorbtn"), "#ffffff");\n        this.editorButton.x = -this.editorButton.width * 0.5 - 10 * this.dpr;\n        this.editorButton.y = this.height * 0.5 - this.editorButton.height * 0.5 - 10 * this.dpr;\n        this.editorButton.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onEditorButtonHandler, this);\n        this.add(this.editorButton);\n        this.editorButton.visible = false;\n        this.shopButton = this.createNineButton(130 * this.dpr, 45 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("common.shop"), "#996600");\n        this.shopButton.x = this.shopButton.width * 0.5 + 10 * this.dpr;\n        this.shopButton.y = this.height * 0.5 - this.shopButton.height * 0.5 - 10 * this.dpr;\n        this.shopButton.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onShopButtonHandler, this);\n        this.add(this.shopButton);\n        this.shopButton.visible = false;\n        this.buyButton = this.createNineButton(181 * this.dpr, 45 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("common.buy"), "#996600");\n        this.buyButton.y = this.height * 0.5 - this.buyButton.height * 0.5 - 10 * this.dpr;\n        this.buyButton.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onBuyButtonHandler, this);\n        this.add(this.buyButton);\n        this.buyButton.visible = false;\n    };\n    /**\n     *\n     * @param type 1 - 2 - 3 -\n     */\n    PicaManorChildPanel.prototype.setLayout = function (type, data) {\n        if (type === 3) {\n            this.nameTitle.text = data.ownerName;\n            this.nameTitle.visible = true;\n            (this.detailText).setLineSpacing(20 * this.dpr);\n            this.headbg.visible = true;\n            this.headbg.y = -this.height * 0.5 + 80 * this.dpr;\n            this.headIcon.y = this.headbg.y;\n            this.nameTitle.y = this.headbg.y + this.headbg.height * 0.5 + 16 * this.dpr;\n            this.contentbg.y = this.contentbg.height * 0.5 + this.nameTitle.y + this.nameTitle.height * 0.5 + 10 * this.dpr;\n            this.detailText.y = this.contentbg.y;\n        }\n        else if (type === 2) {\n            this.nameTitle.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.noowner");\n            this.nameTitle.visible = true;\n            (this.detailText).setLineSpacing(9 * this.dpr);\n            this.headbg.visible = false;\n            this.headIcon.setTexture(this.key, "finca_dereliction_head");\n            this.headIcon.y = -this.height * 0.5 + 68 * this.dpr;\n            this.nameTitle.y = this.headIcon.y + this.headIcon.height * 0.5 + 16 * this.dpr;\n            this.contentbg.y = this.contentbg.height * 0.5 + this.nameTitle.y + this.nameTitle.height * 0.5 + 10 * this.dpr;\n            this.detailText.y = this.contentbg.y;\n            this.buyButton.y = this.height * 0.5 - this.buyButton.height * 0.5 - 22 * this.dpr;\n        }\n        else {\n            this.nameTitle.visible = false;\n            this.headbg.visible = true;\n            this.headIcon.setTexture(this.key, "finca_master_head");\n            this.headIcon.y = this.headbg.y;\n            this.contentbg.y = this.contentbg.height * 0.5 + this.headbg.y + this.headbg.height * 0.5 + 10 * this.dpr;\n            this.detailText.y = this.contentbg.y;\n            (this.detailText).setLineSpacing(14 * this.dpr);\n            this.editorButton.y = this.height * 0.5 - this.editorButton.height * 0.5 - 22 * this.dpr;\n            this.shopButton.y = this.editorButton.y;\n        }\n        this.contentbg.visible = true;\n        (this.detailText).visible = true;\n        this.setButtonActive(type);\n        var text = this.getDetailText(type, data);\n        this.detailText.setText(text);\n    };\n    PicaManorChildPanel.prototype.setButtonActive = function (type) {\n        if (type === 1) {\n            this.editorButton.setInteractive();\n            this.shopButton.setInteractive();\n            this.buyButton.disInteractive();\n            this.editorButton.visible = true;\n            this.shopButton.visible = true;\n            this.buyButton.visible = false;\n        }\n        else if (type === 2) {\n            this.editorButton.disInteractive();\n            this.shopButton.disInteractive();\n            this.buyButton.setInteractive();\n            this.editorButton.visible = false;\n            this.shopButton.visible = false;\n            this.buyButton.visible = true;\n        }\n        else {\n            this.editorButton.disInteractive();\n            this.shopButton.disInteractive();\n            this.buyButton.disInteractive();\n            this.editorButton.visible = false;\n            this.shopButton.visible = false;\n            this.buyButton.visible = false;\n        }\n    };\n    PicaManorChildPanel.prototype.getDetailText = function (type, data) {\n        var text = "";\n        if (type === 3) {\n            text = "" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.manorname") + data.manorName + "\\n" +\n                ("" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.manorarea") + data.streetName);\n        }\n        else if (type === 2) {\n            var img = "iv_coin"; // Coin.getIcon(data.price.coinType);\n            // const powValue = Math.pow(10, data.price.displayPrecision);\n            var price = data.price.price; // Math.floor(data.price.price * powValue) / powValue + "";\n            text = "" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.manorarea") + data.streetName + "\\n" +\n                (utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.manorstatus") + "[color=#FF0000]" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.selling") + "[/color]\\n") +\n                (utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.manorprice") + "[img=" + img + "]" + price + "\\n") +\n                ("" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.needlevel") + "20");\n        }\n        else {\n            text = "" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.manorname") + data.manorName + "[area=aaaa][img=finca_compile][/area]\\n" +\n                ("" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.manorowner") + data.ownerName + "\\n") +\n                ("" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.manorarea") + data.streetName);\n        }\n        return text;\n    };\n    PicaManorChildPanel.prototype.createNineButton = function (width, height, key, frame, text, color) {\n        var nineButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, 0, width, height, key, frame, text, this.dpr, this.zoom, utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].button(this.dpr));\n        this.add(nineButton);\n        nineButton.setTextStyle({ fontSize: 21 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: color });\n        nineButton.setFontStyle("bold");\n        return nineButton;\n    };\n    PicaManorChildPanel.prototype.onEditorButtonHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith([2]); // op_pkt_def.PKT_MANOR_OP.PKT_MANOR_OP_Edit\n    };\n    PicaManorChildPanel.prototype.onShopButtonHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith([-1]);\n    };\n    PicaManorChildPanel.prototype.onBuyButtonHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith([1]); // op_pkt_def.PKT_MANOR_OP.PKT_MANOR_OP_Buy\n    };\n    return PicaManorChildPanel;\n}(_PicaManorBasePanel__WEBPACK_IMPORTED_MODULE_4__["PicaManorBasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicManorInfo/PicaManorChildPanel.ts?')},"./src/pica/render/ui/PicManorInfo/PicaManorShopPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaManorShopPanel", function() { return PicaManorShopPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _PicaBusinessStreet_SecondaryMenuPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../PicaBusinessStreet/SecondaryMenuPanel */ "./src/pica/render/ui/PicaBusinessStreet/SecondaryMenuPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaManorShopPanel = /** @class */ (function (_super) {\n    __extends(PicaManorShopPanel, _super);\n    function PicaManorShopPanel(scene, x, y, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.zoom = zoom;\n        _this.create();\n        return _this;\n    }\n    PicaManorShopPanel.prototype.refreshMask = function () {\n        this.shopgride.resetMask();\n    };\n    PicaManorShopPanel.prototype.create = function () {\n        var width = this.width;\n        var height = this.height;\n        var posY = -height * 0.5;\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, width, height, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common3Key, "bg", utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].background_w(this.dpr));\n        this.add(this.bg);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "close");\n        this.closeBtn.setDisplaySize(28 * this.dpr, 28 * this.dpr);\n        this.closeBtn.setPosition(this.width * 0.5 - 8 * this.dpr, posY + this.dpr * 7);\n        this.closeBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onCloseHandler, this);\n        this.add(this.closeBtn);\n        this.titlebg = this.scene.make.image({ key: this.key, frame: "tag_single" });\n        this.add(this.titlebg);\n        this.titlebg.x = -this.width * 0.5 + this.titlebg.width * 0.5 + 0 * this.dpr;\n        this.titlebg.y = -this.height * 0.5 - this.titlebg.height * 0.5 + 14 * this.dpr;\n        this.imgtitle = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 135 * this.dpr, 16 * this.dpr, this.key, "house_shop", this.dpr);\n        this.imgtitle.setText(utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.manorshop"));\n        this.imgtitle.setFontStyle("bold");\n        this.imgtitle.setTextStyle({ fontSize: 15 * this.dpr });\n        this.imgtitle.x = this.titlebg.x - 30 * this.dpr;\n        this.imgtitle.y = this.titlebg.y;\n        this.add(this.imgtitle);\n        this.secondMenu = new _PicaBusinessStreet_SecondaryMenuPanel__WEBPACK_IMPORTED_MODULE_4__["SecondaryMenuPanel"](this.scene, 0, -this.height * 0.5 + 46 * this.dpr, 302 * this.dpr, 29 * this.dpr, this.dpr, this.zoom, {\n            x: 0,\n            y: -14 * this.dpr,\n            width: this.width - 32 * this.dpr,\n            height: 30 * this.dpr,\n            zoom: this.zoom,\n            dpr: this.dpr,\n            space: 6 * this.dpr,\n            orientation: 1,\n            align: 2\n        });\n        this.secondMenu.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onTabButtonHandler));\n        this.secondMenu.setButtonChangeHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, function (tab) {\n            tab.changeNormal();\n            tab.setTextColor("#FE8737");\n        }), new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, function (tab) {\n            tab.changeDown();\n            tab.setTextColor("#ffffff");\n        }));\n        this.add(this.secondMenu);\n        var graW = 302 * this.dpr, graH = 324 * this.dpr, grax = -graW * 0.5, gray = -graH * 0.5 - 20 * this.dpr;\n        var graphicbg = this.scene.make.graphics(undefined, false);\n        graphicbg.fillStyle(0xFE8737, 1);\n        graphicbg.fillRoundedRect(grax, gray, graW, graH, {\n            tl: 0, tr: 5 * this.dpr, bl: 5 * this.dpr, br: 5 * this.dpr\n        });\n        this.add(graphicbg);\n        var gridWdith = graW - 16 * this.dpr;\n        var gridHeight = 380 * this.dpr;\n        var gridY = 12 * this.dpr;\n        this.shopgride = this.createGrideTable(0, gridY, gridWdith, gridHeight, 126 * this.dpr, 158 * this.dpr);\n        this.corfirmButton = this.createNineButton(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("common.confirm"), "#996600");\n        this.corfirmButton.y = this.height * 0.5 - this.corfirmButton.height * 0.5 - 15 * this.dpr;\n        this.corfirmButton.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onConfirmButtonHandler, this);\n    };\n    PicaManorShopPanel.prototype.setShopCategories = function (content) {\n        var atts = [];\n        for (var _i = 0, _a = content.marketCategory; _i < _a.length; _i++) {\n            var category = _a[_i];\n            var arr = { text: category.category.value, data: category };\n            atts.push(arr);\n        }\n        this.secondMenu.setCategories(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["TabButton"], atts, {\n            width: 97 * this.dpr,\n            height: 29 * this.dpr,\n            key: this.key,\n            normalFrame: "manor_store_uncheck",\n            downFrame: "manor_store_check",\n            textStyle: {\n                fontSize: 15 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                color: "#FE8737",\n            },\n            bold: true\n        });\n    };\n    PicaManorShopPanel.prototype.setShopDatas = function (content) {\n        if (!content.commodities)\n            return;\n        var arrs = content.commodities.sort(function (a, b) {\n            var aid = a.id.replace(/[^0-9]/ig, "");\n            var bid = b.id.replace(/[^0-9]/ig, "");\n            if (Number(aid) > Number(bid))\n                return 1;\n            else\n                return -1;\n        });\n        this.shopgride.setItems(arrs);\n    };\n    PicaManorShopPanel.prototype.setTitleText = function (text) {\n        this.titleText.text = text;\n    };\n    PicaManorShopPanel.prototype.setHandler = function (handler, close) {\n        this.sendHandler = handler;\n        this.closeHandler = close;\n    };\n    PicaManorShopPanel.prototype.createNineButton = function (key, frame, text, color) {\n        var nineButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, 0, 182 * this.dpr, 47 * this.dpr, key, frame, text, this.dpr, this.zoom, {\n            left: 14 * this.dpr,\n            top: 14 * this.dpr,\n            right: 14 * this.dpr,\n            bottom: 14 * this.dpr\n        });\n        this.add(nineButton);\n        nineButton.setTextStyle({ fontSize: 21 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: color });\n        nineButton.setFontStyle("bold");\n        return nineButton;\n    };\n    PicaManorShopPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 2,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                tableOX: 0 * this.dpr,\n                zoom: this.zoom\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new ManorShopItem(_this.scene, 0, 0, capW, capH, _this.key, _this.dpr);\n                    cellContainer.on("buyitem", _this.onBuyItemHandler, _this);\n                    grid.add(cellContainer);\n                }\n                cellContainer.setItemData(item);\n                if (_this.selectedItemData && _this.selectedItemData.id === item.id) {\n                    _this.selectedItemData = item;\n                    _this.selectedItem = cellContainer;\n                }\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        grid.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onSelectItemHandler(cell);\n            }\n        });\n        this.add(grid);\n        return grid;\n    };\n    PicaManorShopPanel.prototype.onTabButtonHandler = function (data) {\n        this.emit("queryProp", 1, data.category.key);\n    };\n    PicaManorShopPanel.prototype.onConfirmButtonHandler = function () {\n        if (this.selectedItemData && this.selectedItemData.manorState === 1) { // op_pkt_def.PKT_MANOR_COMMODITY_STATE.PKT_MANOR_Owned\n            if (this.sendHandler)\n                this.sendHandler.runWith(["usetype", this.selectedItemData.id]);\n        }\n    };\n    PicaManorShopPanel.prototype.onBuyItemHandler = function (data) {\n        var prop = { id: data.id, quantity: 1, category: data.category };\n        if (this.sendHandler)\n            this.sendHandler.runWith(["buytype", prop]);\n    };\n    PicaManorShopPanel.prototype.onSelectItemHandler = function (item) {\n        item.select = true;\n        if (this.selectedItem)\n            this.selectedItem.select = false;\n        this.selectedItem = item;\n        this.selectedItemData = item.shopData;\n        if (!this.selectedItem.select) {\n            this.selectedItem = undefined;\n            this.selectedItemData = undefined;\n        }\n    };\n    PicaManorShopPanel.prototype.onCloseHandler = function () {\n        if (this.closeHandler)\n            this.closeHandler.run();\n    };\n    return PicaManorShopPanel;\n}(Phaser.GameObjects.Container));\n\nvar ManorShopItem = /** @class */ (function (_super) {\n    __extends(ManorShopItem, _super);\n    function ManorShopItem(scene, x, y, width, height, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.mselect = false;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.setSize(width, height);\n        _this.bg = _this.scene.make.image({ key: key, frame: "manor_store_icon_bg" });\n        _this.add(_this.bg);\n        _this.nameText = _this.scene.make.text({\n            x: 0, y: -_this.height * 0.5 + 15 * _this.dpr, text: " ",\n            style: { color: "#2B2B2B", fontSize: 13 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT }\n        }).setOrigin(0.5);\n        _this.add(_this.nameText);\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, -20 * dpr, _this.key, "floor_01");\n        _this.add(_this.icon);\n        var imgvaluebg = _this.scene.make.image({ key: _this.key, frame: "manor_store_price_bg" });\n        _this.imgprice = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](_this.scene, 90 * dpr, 17 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "iv_coin", _this.dpr);\n        _this.imgprice.setLayout(2);\n        _this.imgprice.setTextStyle({ color: "#000000" });\n        _this.imgprice.addAt(imgvaluebg, 0);\n        _this.add(_this.imgprice);\n        _this.tipsText = _this.scene.make.text({\n            x: 0, y: _this.height * 0.5 - 20 * _this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.owned"),\n            style: { color: "#E33922", fontSize: 13 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT }\n        }).setOrigin(0.5);\n        _this.tipsText.setFontStyle("bold");\n        _this.add(_this.tipsText);\n        _this.button = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ThreeSliceButton"](scene, 73 * dpr, 26 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common3Key, utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].threeRedNormal, utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].threeRedNormal, utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.using"));\n        _this.button.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].brownishStyle(dpr));\n        _this.button.y = _this.tipsText.y;\n        _this.button.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, _this.onButtonHandler, _this);\n        _this.add(_this.button);\n        _this.imgprice.y = _this.button.y - _this.button.height * 0.5 - _this.imgprice.height * 0.5 - 2 * dpr;\n        return _this;\n    }\n    ManorShopItem.prototype.setItemData = function (data) {\n        var _this = this;\n        this.shopData = data;\n        this.setButtonState(data);\n        this.nameText.text = data.name || data.shortName;\n        var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(data.icon);\n        this.icon.load(url, this, function () {\n            _this.icon.scale = _this.dpr;\n        });\n    };\n    Object.defineProperty(ManorShopItem.prototype, "select", {\n        get: function () {\n            return this.mselect;\n        },\n        set: function (value) {\n            this.mselect = value;\n            this.bg.setFrame(value ? "store_icon_check" : "manor_store_icon_bg");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ManorShopItem.prototype.setButtonState = function (data) {\n        if (data.manorState === 2) { // op_pkt_def.PKT_MANOR_COMMODITY_STATE.PKT_MANOR_InUse\n            this.button.visible = true;\n            this.button.disInteractive();\n            this.button.setFrameNormal(utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].threeGreenNormal, utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].threeGreenNormal);\n            this.button.setText(utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.using"));\n            this.button.setTextColor(utils__WEBPACK_IMPORTED_MODULE_3__["Color"].black);\n            this.tipsText.visible = false;\n            this.imgprice.visible = false;\n        }\n        else if (data.manorState === 3) { // op_pkt_def.PKT_MANOR_COMMODITY_STATE.PKT_MANOR_NotOwned\n            this.button.visible = true;\n            this.button.setInteractive();\n            this.button.setFrameNormal(utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].threeYellowNormal, utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].threeYellowNormal);\n            this.button.setText(utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("common.buy"));\n            this.button.setTextColor(utils__WEBPACK_IMPORTED_MODULE_3__["Color"].brownish);\n            this.tipsText.visible = false;\n            this.imgprice.visible = true;\n            var price = data.price[0];\n            this.imgprice.setFrameValue(price.price + "", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, utils__WEBPACK_IMPORTED_MODULE_3__["Coin"].getIcon(price.coinType));\n        }\n        else if (data.manorState === 1) { // op_pkt_def.PKT_MANOR_COMMODITY_STATE.PKT_MANOR_Owned\n            this.button.visible = false;\n            this.button.disInteractive();\n            this.tipsText.visible = true;\n            this.imgprice.visible = false;\n        }\n    };\n    ManorShopItem.prototype.onButtonHandler = function () {\n        this.emit("buyitem", this.shopData);\n    };\n    return ManorShopItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicManorInfo/PicaManorShopPanel.ts?')},"./src/pica/render/ui/PicManorInfo/PicaManorTipsPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaManorTipsPanel", function() { return PicaManorTipsPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _PicaManorBasePanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PicaManorBasePanel */ "./src/pica/render/ui/PicManorInfo/PicaManorBasePanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaManorTipsPanel = /** @class */ (function (_super) {\n    __extends(PicaManorTipsPanel, _super);\n    function PicaManorTipsPanel(scene, x, y, width, height, dpr, zoom, key) {\n        return _super.call(this, scene, x, y, width, height, dpr, key) || this;\n    }\n    PicaManorTipsPanel.prototype.setManorTipsData = function (tiptext) {\n        this.contentText.text = tiptext;\n        var type = 1; // 1 - 2 - \n        this.nineButton.setFrameNormal("red_btn_normal");\n        this.nineButton.setText(utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("manor.otherbtn"));\n        this.nineButton.setTextColor("#ffffff");\n    };\n    PicaManorTipsPanel.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    PicaManorTipsPanel.prototype.create = function () {\n        _super.prototype.create.call(this);\n        var cx = 0;\n        this.contentText = this.scene.make.text({ x: cx, y: -10 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t(""), style: { fontSize: 18 * this.dpr, align: "center", fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#111111" } }).setOrigin(0.5);\n        this.contentText.setLineSpacing(20 * this.dpr);\n        this.add(this.contentText);\n        this.nineButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, 0, 110 * this.dpr, 35 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "red_btn_normal", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.takeall"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(this.nineButton);\n        this.nineButton.y = this.height * 0.5 - this.nineButton.height * 0.5 - 15 * this.dpr;\n        this.nineButton.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#ffffff" });\n        this.nineButton.setFontStyle("bold");\n        this.nineButton.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onNineButtonHandler, this);\n    };\n    PicaManorTipsPanel.prototype.createBackground = function (width, height) {\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].common2Key, frame: "bg_universal_box" });\n        this.add(this.bg);\n    };\n    PicaManorTipsPanel.prototype.onNineButtonHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.run();\n    };\n    return PicaManorTipsPanel;\n}(_PicaManorBasePanel__WEBPACK_IMPORTED_MODULE_3__["PicaManorBasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicManorInfo/PicaManorTipsPanel.ts?')},"./src/pica/render/ui/PicRoomUpgrade/PicRoomUpgradePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicRoomUpgradePanel", function() { return PicRoomUpgradePanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicRoomUpgradePanel = /** @class */ (function (_super) {\n    __extends(PicRoomUpgradePanel, _super);\n    function PicRoomUpgradePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.MAX_TIMES = 4;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAROOMUPGRADE_NAME;\n        return _this;\n    }\n    PicRoomUpgradePanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content.x = width * 0.5;\n        this.content.y = height * 0.5;\n        this.setSize(width, height);\n    };\n    PicRoomUpgradePanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.addListen();\n        this.updateData();\n    };\n    PicRoomUpgradePanel.prototype.hide = function () {\n        this.mShow = false;\n        this.removeListen();\n    };\n    PicRoomUpgradePanel.prototype.updateData = function () {\n        var data = this.mShowData; // op_client.OP_VIRTUAL_WORLD_RES_CLIENT_SHOW_UI\n        this.mTitleName.text = data.text[0].text;\n        var lv = data.data[0];\n        this.roomIcon.on(Phaser.Animations.Events.SPRITE_ANIMATION_REPEAT, this.animationRepeat, this);\n        this.mPlayedTimes = 0;\n        this.roomIcon.play("lv" + lv);\n    };\n    PicRoomUpgradePanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.setInteractive(new Phaser.Geom.Rectangle(this.width * 0.5, this.height * 0.5, this.width, this.height), Phaser.Geom.Rectangle.Contains);\n        this.on("pointerup", this.onClickHandler, this);\n    };\n    PicRoomUpgradePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.removeInteractive();\n        this.off("pointerup", this.onClickHandler, this);\n    };\n    PicRoomUpgradePanel.prototype.destroy = function () {\n        this.mPlayedTimes = 0;\n        _super.prototype.destroy.call(this);\n    };\n    PicRoomUpgradePanel.prototype.preload = function () {\n        this.addAtlas(this.key, "e_roomupgrade/e_roomupgrade.png", "e_roomupgrade/e_roomupgrade.json");\n        _super.prototype.preload.call(this);\n    };\n    PicRoomUpgradePanel.prototype.init = function () {\n        if (this.mInitialized)\n            return;\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0, 0.66);\n        this.mBackground.fillRect(0, 0, w, h);\n        this.add(this.mBackground);\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(w, 462 * this.dpr);\n        var conbg = this.scene.make.image({ x: 0, y: -20 * this.dpr, key: this.key, frame: "effect_bg" });\n        this.content.add(conbg);\n        var titleBg = this.scene.make.image({ key: this.key, frame: "tittle_bg" });\n        titleBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        titleBg.y = -this.content.height * 0.5;\n        var font = 22 * this.dpr + "px " + utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT;\n        this.mTitleName = this.scene.make.text({\n            x: 0, y: titleBg.y, text: "",\n            style: { font: font, fill: "#FFF36D" }\n        }).setOrigin(0.5);\n        this.mTitleName.setStroke("#471C1E", 8);\n        this.mTitleName.setShadow(2, 2, "#471C1E", 2, true, true);\n        this.mTitleName.setTint(0xFFF36D, 0xFFF36D, 0xFFAE00, 0xFFAE00);\n        this.content.add([titleBg, this.mTitleName]);\n        var bottomTitle = this.scene.make.text({\n            x: 0, y: this.content.height * 0.5 - 40 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("room_upgrade.clicktocontinue"),\n            style: { fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, fontSize: 16 * this.dpr, color: "#FFF000" }\n        }).setOrigin(0.5);\n        this.roomIcon = this.scene.make.sprite({ key: this.key, frame: "lv1" });\n        this.roomIcon.y = -40 * this.dpr;\n        this.content.add([this.roomIcon, bottomTitle]);\n        this.add(this.content);\n        this.createAnimations();\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicRoomUpgradePanel.prototype.onClickHandler = function () {\n        if (this.mPlayedTimes < this.MAX_TIMES) {\n            return;\n        }\n        var data = this.mShowData; // op_client.OP_VIRTUAL_WORLD_RES_CLIENT_SHOW_UI\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAROOMUPGRADE_NAME + "_querytargetui", data.id);\n    };\n    PicRoomUpgradePanel.prototype.createAnimations = function () {\n        for (var i = 1; i <= 4; i++) {\n            this.scene.anims.create({ key: "lv" + i, frames: this.scene.anims.generateFrameNames(this.key, { prefix: "lv", frames: [i - 1, i] }), duration: 500, repeat: -1 });\n        }\n    };\n    PicRoomUpgradePanel.prototype.animationRepeat = function () {\n        this.mPlayedTimes++;\n        if (this.mPlayedTimes >= this.MAX_TIMES) {\n            this.roomIcon.off(Phaser.Animations.Events.SPRITE_ANIMATION_REPEAT, this.animationRepeat, this);\n        }\n    };\n    return PicRoomUpgradePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicRoomUpgrade/PicRoomUpgradePanel.ts?')},"./src/pica/render/ui/PicaAvatar/PicaAvatarPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaAvatarPanel", function() { return PicaAvatarPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRender */ "./src/pica/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\nvar PicaAvatarPanel = /** @class */ (function (_super) {\n    __extends(PicaAvatarPanel, _super);\n    function PicaAvatarPanel(uiManager, sceneType) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.mSelectedItemData = []; // op_client.ICountablePackageItem\n        _this.mSelectedItems = [];\n        _this.dressAvatarIDS = [];\n        _this.dressAvatarDatas = [];\n        _this.isInitAvatar = false;\n        _this.avatarDirection = 0; // 0-1-\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICAAVATAR_NAME;\n        _this.mSceneType = sceneType;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon];\n        _this.textures = [{ atlasName: "avater_bg_adorn", folder: "texture" }, { atlasName: "avater_bg_stripe", folder: "texture" }];\n        return _this;\n    }\n    PicaAvatarPanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0x01cdff);\n        this.mBackground.fillRect(0, 0, width, height);\n        this.mShelfContainer.setSize(width, 295 * this.dpr);\n        this.mShelfContainer.y = height - this.mShelfContainer.height + 6 * this.dpr;\n        this.mDetailBubble.y = this.mShelfContainer.y - 10 * this.dpr - this.mDetailBubble.height;\n        this.mCategoryScroll.x = width * 0.5;\n        this.mCategoryScroll.y = this.mShelfContainer.y + 20 * this.dpr;\n        this.mBg.x = width / 2;\n        this.mBg.y = this.mBg.height / 2 + 10 * this.dpr;\n        var tempHeight = (height - this.mShelfContainer.height - 80 * this.dpr);\n        this.mDetailDisplay.x = width / 2;\n        this.mDetailDisplay.y = tempHeight * 0.5 + 80 * this.dpr;\n        this.mDetailDisplay.setInteractive(new Phaser.Geom.Rectangle(0, 0, 110 * this.dpr, tempHeight), Phaser.Geom.Rectangle.Contains);\n        this.rotateAvatarBtn.x = width / 2 + 100 * this.dpr;\n        this.rotateAvatarBtn.y = this.mDetailDisplay.y;\n        this.mPropGrid.x = width / 2 + 3 * this.dpr;\n        this.mPropGrid.y = this.mShelfContainer.y + this.mPropGrid.height * 0.5 + 48 * this.dpr;\n        this.mPropGrid.layout();\n        this.mPropGrid.resetMask();\n        this.mCategoryScroll.refreshMask();\n        this.setSize(width, height);\n        this.setInteractive();\n    };\n    PicaAvatarPanel.prototype.setCategories = function (subcategorys) {\n        // subcategorys.unshift({ key: this.seachKey, value: "" });\n        this.mPreCategoryBtn = null;\n        this.mSelectedCategeories = null;\n        var capW = 60 * this.dpr;\n        var capH = 41 * this.dpr;\n        var items = [];\n        this.mCategoryScroll.clearItems();\n        var allCategory = { value: "", key: "" }; // op_def.StrPair\n        allCategory.value = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("common.all");\n        allCategory.key = "alltype";\n        subcategorys.unshift(allCategory);\n        for (var i = 0; i < subcategorys.length; i++) {\n            var item = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["TextButton"](this.scene, this.dpr, 1, subcategorys[i].value, 0, 0);\n            item.x = i * capW;\n            item.y = capH - item.text.height - 20 * this.dpr;\n            item.setData("item", subcategorys[i]);\n            item.setSize(capW, capH);\n            this.mCategoryScroll.addItem(item);\n            item.setChangeColor("#FFD248");\n            items[i] = item;\n            item.setFontSize(17 * this.dpr);\n            item.setFontStyle("bold");\n        }\n        if (items.length > 1)\n            this.onSelectSubCategoryHandler(items[0]);\n        this.updateCategeoriesLoc(false);\n    };\n    PicaAvatarPanel.prototype.setProp = function (props, isupdate) {\n        if (isupdate === void 0) { isupdate = false; }\n        props = !props ? [] : props;\n        this.mSelectedItems.length = 0;\n        var len = props.length;\n        if (len < 24) {\n            props = props.concat(new Array(24 - len));\n        }\n        this.mPropGrid.setItems(props);\n        if (this.dressAvatarDatas.length === 0) {\n            for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n                var prop = props_1[_i];\n                if (prop && prop.rightSubscript === pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_pkt_def"].PKT_Subscript.PKT_SUBSCRIPT_CHECKMARK) {\n                    this.dressAvatarDatas.push(prop);\n                }\n            }\n            if (this.isInitAvatar) {\n                this.initBaseAvatar();\n            }\n            this.isInitAvatar = true;\n        }\n    };\n    PicaAvatarPanel.prototype.setDressAvatarIds = function (ids) {\n        this.dressAvatarIDS = ids;\n        if (this.isInitAvatar) {\n            this.initBaseAvatar();\n        }\n        this.isInitAvatar = true;\n    };\n    PicaAvatarPanel.prototype.initBaseAvatar = function () {\n        var _this = this;\n        if (this.isInitAvatar) {\n            var arr = [];\n            for (var _i = 0, _a = this.dressAvatarIDS; _i < _a.length; _i++) {\n                var id = _a[_i];\n                for (var _b = 0, _c = this.dressAvatarDatas; _b < _c.length; _b++) {\n                    var avatar = _c[_b];\n                    if (avatar.id === id) {\n                        arr.push(avatar);\n                        this.mSelectedItemData.push(avatar);\n                    }\n                }\n            }\n            this.dressAvatarDatas.length = 0;\n            this.dressAvatarDatas = arr;\n            this.displayAvatar();\n            this.mDetailBubble.visible = false;\n        }\n        else {\n            var property_1 = null;\n            this.render.mainPeer.getUserData_PlayerProperty()\n                .then(function (val) {\n                property_1 = val;\n                return _this.serviceTimestamp;\n            })\n                .then(function (t) {\n                _this.mDetailBubble.setProp(null, Math.floor(t / 1000), property_1);\n                _this.mDetailBubble.y = _this.mShelfContainer.y - 10 * _this.dpr - _this.mDetailBubble.height;\n            });\n        }\n    };\n    PicaAvatarPanel.prototype.displayAvatar = function (content) {\n        var _this = this;\n        if (!content) {\n            content = { avatar: {} };\n        }\n        this.render.mainPeer.getPlayerAvatar()\n            .then(function (_a) {\n            var avatar = _a.avatar, suits = _a.suits;\n            avatar = avatar || structure__WEBPACK_IMPORTED_MODULE_4__["AvatarSuitType"].createBaseAvatar();\n            for (var key in avatar) {\n                if (avatar.hasOwnProperty(key)) {\n                    var element = avatar[key];\n                    if (element)\n                        content.avatar[key] = element;\n                }\n            }\n            for (var _i = 0, _b = _this.mSelectedItemData; _i < _b.length; _i++) {\n                var item = _b[_i];\n                var dataAvatar = structure__WEBPACK_IMPORTED_MODULE_4__["AvatarSuitType"].createAvatarBySn(item.suitType, item.sn, item.slot, item.tag, item.version);\n                // const dataAvatar = item.avatar;\n                for (var key in dataAvatar) {\n                    if (dataAvatar.hasOwnProperty(key)) {\n                        var element = dataAvatar[key];\n                        if (element)\n                            content.avatar[key] = element;\n                    }\n                }\n                if (item.suitType === "weapon") {\n                    var suit = { suit_type: item.suitType, tag: item.tag };\n                    content.suits = [suit];\n                }\n            }\n            var offset = new Phaser.Geom.Point(0, 50 * _this.dpr);\n            _this.mDetailDisplay.loadAvatar(content, 2 * _this.dpr, offset);\n            utils__WEBPACK_IMPORTED_MODULE_5__["Logger"].getInstance().error("+++++", _this.mSelectedItemData);\n        });\n    };\n    PicaAvatarPanel.prototype.setSelectedResource = function (content) {\n        if (content.display) {\n            this.mDetailDisplay.loadDisplay(content);\n        }\n        else if (content.avatar) {\n            this.displayAvatar();\n        }\n    };\n    PicaAvatarPanel.prototype.resetAvatar = function (avatar) {\n        var content = { avatar: null }; // op_client.OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_COMMODITY_RESOURCE\n        content.avatar = avatar.avatar;\n        var offset = new Phaser.Geom.Point(0, 50 * this.dpr);\n        this.mDetailDisplay.loadAvatar(content, 2 * this.dpr, offset);\n        this.mSelectedItemData.length = 0;\n    };\n    PicaAvatarPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.saveBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSaveBtnHandler, this);\n        this.resetBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onResetBtnHandler, this);\n        this.rotateAvatarBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRotateAvatarHandler, this);\n    };\n    PicaAvatarPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.saveBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSaveBtnHandler, this);\n        this.resetBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onResetBtnHandler, this);\n        this.rotateAvatarBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRotateAvatarHandler, this);\n    };\n    PicaAvatarPanel.prototype.fetchCategory = function () {\n        this.onSelectedCategory(pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_pkt_def"].PKT_PackageType.AvatarPackage);\n    };\n    PicaAvatarPanel.prototype.destroy = function () {\n        if (this.mCategoryScroll) {\n            this.mCategoryScroll.destroy();\n        }\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    PicaAvatarPanel.prototype.queryRefreshPackage = function (isupdate) {\n        if (isupdate === void 0) { isupdate = false; }\n        this.queryPackege(isupdate);\n    };\n    PicaAvatarPanel.prototype.init = function () {\n        var _this = this;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        var background = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "avater_bg" });\n        background.displayWidth = width;\n        background.x = width * 0.5;\n        this.mBg = this.scene.make.image({\n            key: "avater_bg_stripe"\n        }, false);\n        this.mBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mShelfContainer = this.scene.make.container(undefined, false);\n        this.mShelfContainer.setSize(width, 295 * this.dpr);\n        this.mShelfContainer.y = height - this.mShelfContainer.height;\n        var categoryBg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "avater_nav" });\n        categoryBg.displayWidth = width;\n        categoryBg.x = width * 0.5;\n        categoryBg.y = categoryBg.height * 0.5;\n        this.mShelfContainer.add(categoryBg);\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        this.mCloseBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "back_arrow", "back_arrow");\n        this.mCloseBtn.setPosition(21 * this.dpr, 50 * this.dpr);\n        this.mCloseBtn.setInteractive(new Phaser.Geom.Rectangle(-28 * this.dpr, -20 * this.dpr, 56 * this.dpr, 40 * this.dpr), Phaser.Geom.Rectangle.Contains);\n        var nameBg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "avater_name_bg" });\n        nameBg.x = width * 0.5;\n        nameBg.y = this.mCloseBtn.y;\n        this.nameText = this.scene.make.text({ x: nameBg.x, y: nameBg.y, text: "", style: utils__WEBPACK_IMPORTED_MODULE_5__["UIHelper"].whiteStyle(this.dpr, 14) }).setOrigin(0.5);\n        var leftbg = this.scene.make.image({ key: "avater_bg_adorn" });\n        leftbg.x = leftbg.width * 0.5;\n        leftbg.y = leftbg.height * 0.5;\n        leftbg.scaleX = -1;\n        var rightbg = this.scene.make.image({ key: "avater_bg_adorn" });\n        rightbg.x = width - leftbg.width * 0.5;\n        rightbg.y = leftbg.height * 0.5;\n        var btnwidth = 90 * this.dpr;\n        var btnHeight = 38 * this.dpr;\n        var btnPosX = width - btnwidth / 2 - 20 * this.dpr;\n        var btnPosY = this.mShelfContainer.y - 25 * this.dpr;\n        this.saveBtn = this.createNineButton(btnPosX, btnPosY, btnwidth, btnHeight, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("common.save"), "#996600");\n        this.resetBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "avater_repeal");\n        this.resetBtn.x = width - 30 * this.dpr;\n        this.resetBtn.y = this.mCloseBtn.y;\n        this.rotateAvatarBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "avater_turn_back", "avater_turn_back");\n        this.mDetailDisplay = new picaRender__WEBPACK_IMPORTED_MODULE_2__["DetailDisplay"](this.scene, this.render);\n        this.mDetailDisplay.setComplHandler(new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, function () {\n            _this.mDetailDisplay.visible = true;\n        }));\n        this.mDetailDisplay.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_nothing", 1);\n        this.mDetailDisplay.setNearest();\n        this.mDetailDisplay.on("pointerup", this.onAvatarClickHandler, this);\n        //  this.mDetailDisplay.loadSprite("loading_ui", Url.getUIRes(this.dpr, "loading_ui"), Url.getUIRes(this.dpr, "loading_ui"));\n        this.mDetailDisplay.y = this.mBg.y + this.mBg.height / 2;\n        this.mDetailBubble = new DetailBubble(this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, this.dpr);\n        this.mDetailBubble.x = 10 * this.dpr;\n        this.mCategoryScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: width * 0.5,\n            y: this.mShelfContainer.y + 20 * this.dpr,\n            width: width,\n            height: 41 * this.dpr,\n            zoom: this.scale,\n            orientation: 1,\n            dpr: this.dpr,\n            // valuechangeCallback: (newValue) => {\n            //   this.refreshPos(newValue);\n            // },\n            cellupCallBack: function (gameobject) {\n                _this.onSelectSubCategoryHandler(gameobject);\n            }\n        });\n        this.add([this.mBackground, background, leftbg, rightbg, this.mBg, this.mCloseBtn, nameBg, this.nameText, this.mDetailDisplay, this.mDetailBubble]);\n        this.add([this.mShelfContainer, this.mCategoryScroll, this.saveBtn, this.resetBtn, this.rotateAvatarBtn]);\n        var propFrame = this.scene.textures.getFrame(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "avater_icon_check");\n        var capW = (propFrame.width + 2 * this.dpr);\n        var capH = (propFrame.height + 2 * this.dpr);\n        var tableConfig = {\n            x: 0,\n            y: 0,\n            table: {\n                width: width,\n                height: 260 * this.dpr,\n                columns: 3,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                zoom: this.scale,\n                mask: false,\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new Item(scene, 0, 0, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, _this.dpr, _this.scale);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setProp(item);\n                if (item && _this.isSelectedItemData(item)) {\n                    cellContainer.isSelect = true;\n                    _this.mSelectedItems.push(cellContainer);\n                }\n                else {\n                    var index = _this.mSelectedItems.indexOf(cellContainer);\n                    if (index !== -1)\n                        _this.mSelectedItems.splice(index, 1);\n                }\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onSelectItemHandler(cell);\n            }\n        });\n        this.add(this.mPropGrid);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaAvatarPanel.prototype.createNineButton = function (x, y, width, height, key, frame, text, color) {\n        var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, x, y, width, height, key, frame, text, this.dpr, 1, {\n            left: 14 * this.dpr,\n            top: 14 * this.dpr,\n            right: 15 * this.dpr,\n            bottom: 14 * this.dpr\n        });\n        if (text) {\n            btn.setTextStyle({\n                color: color,\n                fontSize: 16 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT\n            });\n            btn.setFontStyle("bold");\n        }\n        return btn;\n    };\n    PicaAvatarPanel.prototype.setSelectAvatarSuitItem = function (data, cell) {\n        var suit_type = data.suitType;\n        if (!suit_type) {\n            utils__WEBPACK_IMPORTED_MODULE_5__["Logger"].getInstance().error("CountablePackageItem avatar does not exist", data);\n            return;\n        }\n        for (var _i = 0, _a = this.mSelectedItems; _i < _a.length; _i++) {\n            var temp = _a[_i];\n            temp.isSelect = false;\n        }\n        var removeArr = [];\n        for (var _b = 0, _c = this.mSelectedItemData; _b < _c.length; _b++) {\n            var item = _c[_b];\n            if (structure__WEBPACK_IMPORTED_MODULE_4__["SuitAlternativeType"].checkAlternative(suit_type, item.suitType)) {\n                removeArr.push(item);\n            }\n        }\n        for (var _d = 0, removeArr_1 = removeArr; _d < removeArr_1.length; _d++) {\n            var item = removeArr_1[_d];\n            var index = this.mSelectedItemData.indexOf(item);\n            this.mSelectedItemData.splice(index, 1);\n            for (var i = 0; i < this.mSelectedItems.length; i++) {\n                var cell1 = this.mSelectedItems[i];\n                if (cell1.propData === item) {\n                    this.mSelectedItems.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        if (this)\n            this.mSelectedItemData.push(data);\n        this.mSelectedItems.push(cell);\n        cell.isSelect = true;\n        var content = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_client"].OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE_ITEM_RESOURCE();\n        content.avatar = structure__WEBPACK_IMPORTED_MODULE_4__["AvatarSuitType"].createAvatarBySn(data.suitType, data.sn, data.slot, data.tag, data.version);\n        content.animations = data.animations;\n        this.setSelectedResource(content);\n    };\n    PicaAvatarPanel.prototype.isSelectedItemData = function (data) {\n        if (this.mSelectedItemData.length > 0) {\n            // for (const temp of this.mSelectedItemData) {\n            //   if (temp.indexId === data.indexId) {\n            //     return true;\n            //   }\n            // }\n            var temp = this.mSelectedItemData[this.mSelectedItemData.length - 1];\n            if (temp.indexId === data.indexId)\n                return true;\n        }\n        // else {\n        //   if (data.rightSubscript === op_pkt_def.PKT_Subscript.PKT_SUBSCRIPT_CHECKMARK) return true;\n        // }\n        return false;\n    };\n    PicaAvatarPanel.prototype.onSelectSubCategoryHandler = function (gameobject) {\n        var category = gameobject.getData("item"); // op_def.IStrPair\n        if (category) {\n            if (this.mPreCategoryBtn && (this.mPreCategoryBtn instanceof gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["TextButton"])) {\n                this.mPreCategoryBtn.changeNormal();\n            }\n            if (gameobject instanceof gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["TextButton"])\n                gameobject.changeDown();\n            this.mSelectedCategeories = category;\n            this.mPropGrid.setT(0);\n            var isupdate = this.mSelectedItemData.length === 0 ? false : true;\n            this.queryPackege(isupdate);\n            this.mPreCategoryBtn = gameobject;\n        }\n        this.mPropGrid.setT(0);\n    };\n    PicaAvatarPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(this.key + "_close");\n    };\n    PicaAvatarPanel.prototype.queryPackege = function (isupdate) {\n        if (isupdate === void 0) { isupdate = false; }\n        if (this.mSelectedCategeories) {\n            this.render.renderEmitter(this.key + "_queryPackage", { packType: this.categoryType, key: this.mSelectedCategeories.key, isupdate: isupdate });\n        }\n    };\n    PicaAvatarPanel.prototype.onSelectItemHandler = function (cell) {\n        var _this = this;\n        var item = cell.getData("item"); // op_client.ICountablePackageItem\n        if (!item)\n            return;\n        if (this.isSelectedItemData(item)) {\n            cell.isSelect = true;\n            return;\n        }\n        this.mDetailBubble.visible = true;\n        var property = null;\n        this.render.mainPeer.getUserData_PlayerProperty()\n            .then(function (val) {\n            property = val;\n            return _this.serviceTimestamp;\n        })\n            .then(function (t) {\n            _this.mDetailBubble.setProp(item, Math.floor(t / 1000), property);\n            _this.mDetailBubble.y = _this.mShelfContainer.y - 10 * _this.dpr - _this.mDetailBubble.height;\n        });\n        if (item) {\n            this.avatarDirection = 0;\n            this.setSelectAvatarSuitItem(item, cell);\n            this.nameText.text = item.name;\n        }\n    };\n    PicaAvatarPanel.prototype.onSelectedCategory = function (categoryType) {\n        this.categoryType = categoryType;\n        this.render.renderEmitter(this.key + "_queryDressAvatarIDS");\n        this.render.renderEmitter(this.key + "_getCategories", categoryType);\n    };\n    PicaAvatarPanel.prototype.onSaveBtnHandler = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var idsArr, _i, _a, item, result, suitPart, _b, _c, avatar, str;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        this.dressAvatarIDS.length = 0;\n                        this.dressAvatarDatas.length = 0;\n                        idsArr = [];\n                        for (_i = 0, _a = this.mSelectedItemData; _i < _a.length; _i++) {\n                            item = _a[_i];\n                            idsArr.push(item.id);\n                            this.dressAvatarIDS.push(item.id);\n                            this.dressAvatarDatas.push(item);\n                        }\n                        this.render.renderEmitter(this.key + "_querySaveAvatar", idsArr);\n                        result = [];\n                        suitPart = structure__WEBPACK_IMPORTED_MODULE_4__["AvatarSuitType"].suitPart;\n                        for (_b = 0, _c = this.dressAvatarDatas; _b < _c.length; _b++) {\n                            avatar = _c[_b];\n                            result.push({ "parts": suitPart[avatar.suitType], id: avatar.sn });\n                        }\n                        return [4 /*yield*/, this.render.editorCanvasManager.createHeadIcon(result)];\n                    case 1:\n                        str = _d.sent();\n                        this.render.mainPeer.uploadHeadImage(str);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PicaAvatarPanel.prototype.onResetBtnHandler = function () {\n        this.mSelectedItemData.length = 0;\n        for (var _i = 0, _a = this.dressAvatarDatas; _i < _a.length; _i++) {\n            var data = _a[_i];\n            this.mSelectedItemData.push(data);\n        }\n        this.displayAvatar();\n        this.mPropGrid.refresh();\n    };\n    PicaAvatarPanel.prototype.onRotateAvatarHandler = function () {\n        this.avatarDirection++;\n        if (this.avatarDirection >= 2)\n            this.avatarDirection = 0;\n        var data = this.getAvatarAni();\n        var aniData = {\n            name: ("idle"),\n            flip: data.flip\n        };\n        var back = data.back;\n        this.mDetailDisplay.setPlayAnimation(aniData, back);\n    };\n    PicaAvatarPanel.prototype.onAvatarClickHandler = function () {\n        var anis = ["idle", "run", "mining", "crafting"];\n        var ani = anis[Math.floor(Math.random() * (anis.length))];\n        var data = this.getAvatarAni();\n        var aniData = {\n            name: (ani),\n            flip: data.flip,\n            times: 1,\n            playingQueue: {\n                name: "idle", playTimes: -1\n            }\n        };\n        var back = data.back;\n        this.mDetailDisplay.setPlayAnimation(aniData, back);\n    };\n    PicaAvatarPanel.prototype.getAvatarAni = function () {\n        var back = false;\n        var flip = false;\n        switch (this.avatarDirection) {\n            case 0:\n                back = false;\n                flip = false;\n                break;\n            case 1:\n                back = true;\n                flip = true;\n                break;\n            case 2:\n                back = true;\n                flip = true;\n                break;\n            case 3:\n                back = false;\n                flip = true;\n                break;\n        }\n        return {\n            back: back, flip: flip\n        };\n    };\n    PicaAvatarPanel.prototype.updateCategeoriesLoc = function (inputBoo) {\n        var list = this.mCategoryScroll.getItemList();\n        var h = 41 * this.dpr;\n        var preBtn = null;\n        var offset = 30 * this.dpr;\n        var w = this.mScene.cameras.main.width;\n        var tmpW = offset;\n        for (var i = 0; i < list.length; i++) {\n            var item = list[i];\n            if (i > 0) {\n                preBtn = list[i - 1];\n                item.x = preBtn.x + preBtn.width; // - item.width * item.originX;\n            }\n            else {\n                item.x = tmpW;\n            }\n            tmpW += item.width;\n        }\n        this.mCategoryScroll.setAlign();\n    };\n    Object.defineProperty(PicaAvatarPanel.prototype, "serviceTimestamp", {\n        get: function () {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                _this.render.mainPeer.requestCurTime().then(function (t) {\n                    resolve(t);\n                });\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PicaAvatarPanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_7__["PicaBasePanel"]));\n\nvar DetailBubble = /** @class */ (function (_super) {\n    __extends(DetailBubble, _super);\n    // private testText: Phaser.GameObjects.Text;\n    function DetailBubble(scene, key, dpr, zoom) {\n        if (zoom === void 0) { zoom = 1; }\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        var tipsWidth = 100 * dpr;\n        var tipsHeight = 96 * dpr;\n        _this.setSize(tipsWidth, tipsHeight);\n        _this.tipsbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, tipsWidth, tipsHeight, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "tips_bg", {\n            left: 10 * _this.dpr,\n            top: 10 * _this.dpr,\n            right: 10 * _this.dpr,\n            bottom: 10 * _this.dpr\n        }, undefined, undefined, 0);\n        _this.tipsbg.setPosition(tipsWidth * 0.5, tipsHeight * 0.5);\n        _this.tipsbg.alpha = 0.6;\n        _this.tipsText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, 7 * dpr, -tipsHeight + 60 * _this.dpr, "", {\n            color: "#333333",\n            fontSize: 12 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT,\n            lineSpacing: 6 * dpr,\n            padding: {\n                top: 2 * dpr\n            }\n        }).setOrigin(0);\n        _this.tipsText.setWrapMode("char");\n        _this.tipsText.setWrapWidth(200 * dpr);\n        _this.mExpires = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](scene, 7 * dpr, 85 * dpr, "", {\n            fontSize: 12 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT,\n        }).setOrigin(0);\n        _this.add([_this.tipsbg, _this.tipsText, _this.mExpires]);\n        _this.tipsText.addImage("iv_coin", { key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "home_silver", y: -3 * _this.dpr });\n        _this.tipsText.addImage("iv_diamond", { key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "home_diamond", y: -3 * _this.dpr });\n        return _this;\n    }\n    DetailBubble.prototype.setProp = function (prop, servertime, property) {\n        var _this = this;\n        if (!prop) {\n            this.tipsText.setText(utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.empty_backpack"));\n            this.mExpires.text = "";\n            this.resize();\n        }\n        else {\n            this.tipsText.setWrapWidth(undefined);\n            var name_1 = "[color=#32347b][b][size=" + 14 * this.dpr + "]" + (prop.shortName || prop.name) + "[/size][/b][/color]";\n            // let price = "";\n            var source = "";\n            var describle = "";\n            var attri = "";\n            var need = "";\n            var tips = name_1;\n            var maxWidth = 100 * this.dpr;\n            this.tipsText.text = tips;\n            maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            // if (prop.recyclable) {\n            //   // if (prop.sellingPrice) {\n            //   //   price = `${i18n.t("furni_bag.sale_price")}: [img=${Coin.getIcon(prop.sellingPrice.coinType)}] ${prop.sellingPrice.price}`;\n            //   //   tips += `[color=#ff0000][size=${12 * this.dpr}]${price}[/size][/color]`;\n            //   //   this.tipsText.text = price;\n            //   //   maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            //   // }\n            // } else {\n            //   price = i18n.t("furni_bag.not_sale");\n            //   tips += `[color=#ff0000][size=${12 * this.dpr}]${price}[/size][/color]`;\n            //   this.tipsText.text = price;\n            //   maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            // }\n            if (prop.source) {\n                // source = `${i18n.t("furni_bag.source")}${prop.source}`;\n                source = "" + prop.source;\n                tips += "[color=#ffffff][size=" + 12 * this.dpr + "]" + source + "[/size][/color]";\n                this.tipsText.text = source;\n                maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            }\n            if (prop.des && prop.des !== "") {\n                describle = prop.des;\n                tips += "\\n" + describle;\n                this.tipsText.text = describle;\n                maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            }\n            var isline = false;\n            if (prop.affectValues) {\n                var len = prop.affectValues.length;\n                for (var i = 0; i < len; i++) {\n                    var affect = prop.affectValues[i];\n                    if (property.hasProperty(affect.key)) {\n                        var proper = property.getProperty(affect.key);\n                        var value = affect.value > 0 ? "[color=#ffff00]+" + affect.value + "[/color]" : "[color=#ff0000]" + affect.value + "[/color]";\n                        attri += "\\n" + proper.name + ": " + value;\n                    }\n                }\n                if (attri.length > 0) {\n                    if (!isline) {\n                        isline = true;\n                        tips += "\\n-- -- -- -- -- -- -- --";\n                    }\n                    tips += "\\n[color=#ffffff]" + utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.properties") + "[/color]" + ("" + attri);\n                }\n            }\n            if (prop.requireValues) {\n                var len = prop.requireValues.length;\n                for (var i = 0; i < len; i++) {\n                    var require_1 = prop.requireValues[i];\n                    if (property.hasProperty(require_1.key)) {\n                        var proper = property.propertiesMap.get(require_1.key);\n                        var value = proper.value >= require_1.value ? "[color=#00ff00](" + require_1.value + ")[/color]" : "[color=#ff0000](" + require_1.value + ")[/color]";\n                        need += "\\n" + proper.name + ": " + value;\n                    }\n                }\n                if (need.length > 0) {\n                    if (!isline) {\n                        isline = true;\n                        tips += "\\n-- -- -- -- -- -- -- --";\n                    }\n                    tips += "\\n" + utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.needproper") + ":" + need;\n                }\n            }\n            // this.tipsText.setWrapWidth(maxWidth);\n            this.tipsText.text = tips;\n            this.width = this.tipsText.width + 14 * this.dpr;\n            if (prop.expiredTime > 0) {\n                if (!isline) {\n                    isline = true;\n                    tips += "\\n-- -- -- -- -- -- -- --";\n                }\n                var interval_1 = prop.expiredTime - servertime;\n                var timeout_1 = function () {\n                    _this.mExpires.visible = true;\n                    _this.mExpires.text = _this.getDataFormat(interval_1 * 1000);\n                    if (interval_1 > 0) {\n                        _this.timeID = setTimeout(function () {\n                            interval_1 -= 1;\n                            timeout_1();\n                        }, 1000);\n                    }\n                    else {\n                        _this.timeID = undefined;\n                    }\n                };\n                timeout_1();\n            }\n            else {\n                this.mExpires.visible = false;\n                if (this.timeID)\n                    clearTimeout(this.timeID);\n            }\n            this.resize();\n        }\n        return this;\n    };\n    DetailBubble.prototype.resize = function (w, h) {\n        var mixheight = 96 * this.dpr;\n        var height = this.tipsText.height;\n        if (this.mExpires.visible)\n            height += this.mExpires.height + 3 * this.dpr;\n        height += 14 * this.dpr;\n        height = height < mixheight ? mixheight : height;\n        this.setSize(this.width, height);\n        this.tipsbg.resize(this.width, this.height);\n        this.tipsbg.x = this.width * 0.5;\n        this.tipsbg.y = this.height * 0.5;\n        this.tipsText.y = 7 * this.dpr;\n        this.mExpires.y = this.tipsText.y + this.tipsText.height + 3 * this.dpr;\n    };\n    DetailBubble.prototype.getDataFormat = function (time) {\n        var day = Math.floor(time / 86400000);\n        var hour = Math.floor(time / 3600000) % 24;\n        var minute = Math.floor(time / 60000) % 60;\n        var second = Math.floor(time / 1000) % 60;\n        var text = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.timelimit") + ":  ";\n        if (day > 0) {\n            var temptime = day + "-" + this.stringFormat(hour) + ":" + this.stringFormat(minute) + ":" + this.stringFormat(second);\n            text += "[color=#FF0000]" + temptime + "[/color]";\n        }\n        else if (hour > 0 || minute > 0 || second > 0) {\n            var temptime = this.stringFormat(hour) + ":" + this.stringFormat(minute) + ":" + this.stringFormat(second);\n            text += "[color=#FF0000]" + temptime + "[/color]";\n        }\n        else {\n            var temptime = "" + utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.expires");\n            text += "[color=#FF0000]" + temptime + "[/color]";\n        }\n        // else if (minute > 0) {\n        //   const temptime = `${this.stringFormat(minute)}:${this.stringFormat(second)}`;\n        //   text += `[color=#FF0000]${temptime}[/color]`;\n        // } else if (second > 0) {\n        //   const temptime = `${this.stringFormat(second)}`;\n        //   text += `[color=#FF0000]${temptime}[/color]`;\n        // }\n        //  else {\n        //   const temptime = `${i18n.t("furni_bag.expires")}`;\n        //   text += `[color=#FF0000]${temptime}[/color]`;\n        // }\n        return text;\n    };\n    DetailBubble.prototype.stringFormat = function (num) {\n        var str = num + "";\n        if (str.length <= 1) {\n            str = "0" + str;\n        }\n        return str;\n    };\n    return DetailBubble;\n}(Phaser.GameObjects.Container));\nvar Item = /** @class */ (function (_super) {\n    __extends(Item, _super);\n    function Item(scene, x, y, key, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.zoom = 1;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.key = key;\n        var background = scene.make.image({\n            key: key,\n            frame: "avater_icon_uncheck"\n        }, false);\n        background.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.selectbg = scene.make.image({\n            key: key,\n            frame: "avater_icon_check"\n        }, false);\n        _this.selectbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.setSize(background.displayWidth, background.displayHeight);\n        _this.selectIcon = scene.make.image({\n            key: key,\n            frame: "selected"\n        }, false).setOrigin(1).setPosition(_this.width * 0.5, _this.height * 0.5);\n        _this.selectIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mPropImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, 0, 0);\n        _this.mPropImage.scale = dpr / _this.zoom;\n        _this.mCounter = scene.make.text({\n            x: _this.width * 0.5 - 2 * dpr,\n            y: _this.height * 0.5,\n            style: {\n                fontSize: 12 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(1);\n        _this.add([background, _this.selectbg, _this.selectIcon, _this.mPropImage, _this.mCounter]);\n        _this.isSelect = false;\n        _this.isEquip = false;\n        return _this;\n    }\n    Item.prototype.setProp = function (prop) {\n        this.propData = prop;\n        this.isSelect = false;\n        this.isEquip = false;\n        this.mPropImage.visible = false;\n        if (!prop) {\n            // this.mPropImage.setFrame("");\n            this.mCounter.visible = false;\n            return;\n        }\n        if (!prop.tag || JSON.parse(prop.tag).type !== "remove") {\n            this.mPropImage.scale = this.dpr / this.zoom;\n            this.mPropImage.load(utils__WEBPACK_IMPORTED_MODULE_5__["Url"].getOsdRes(prop.texturePath), this, this.onPropLoadCompleteHandler);\n        }\n        else {\n            this.mPropImage.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "backpack_close");\n            this.mPropImage.scale = 1;\n            this.mPropImage.visible = true;\n        }\n        if (prop.count > 1) {\n            this.mCounter.visible = true;\n            this.mCounter.setText(prop.count.toString());\n        }\n        else {\n            this.mCounter.visible = false;\n        }\n        if (prop.rightSubscript === 1) { // op_pkt_def.PKT_Subscript.PKT_SUBSCRIPT_CHECKMARK\n            this.isEquip = true;\n        }\n        else\n            this.isEquip = false;\n    };\n    Item.prototype.onPropLoadCompleteHandler = function () {\n        if (this.mPropImage && this.mPropImage.texture) {\n            var texture = this.mPropImage.texture;\n            this.mPropImage.visible = true;\n            if (texture) {\n                texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\n            }\n        }\n    };\n    Object.defineProperty(Item.prototype, "isSelect", {\n        set: function (value) {\n            this.selectbg.visible = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Item.prototype, "isEquip", {\n        set: function (value) {\n            this.selectIcon.visible = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Item;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaAvatar/PicaAvatarPanel.ts?')},"./src/pica/render/ui/PicaBag/PicaBagPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBagPanel", function() { return PicaBagPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRender */ "./src/pica/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar PicaBagPanel = /** @class */ (function (_super) {\n    __extends(PicaBagPanel, _super);\n    function PicaBagPanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.topBtns = [];\n        _this.mEnableEdit = false;\n        _this.mAttributes = [];\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon];\n        _this.textures = [{ atlasName: "bag_bg", folder: "texture" }];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICABAG_NAME;\n        return _this;\n    }\n    PicaBagPanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.mBackground.x = width * 0.5;\n        this.mBackground.y = height * 0.5;\n        this.mCategoryCon.setSize(width, 79 * this.dpr);\n        this.mCategoryCon.y = height - this.mPropGrid.height - this.mCategoryCon.height * 0.5 - 47 * this.dpr;\n        this.mCategoryCon.x = width * 0.5;\n        this.mDetailBubble.y = this.mCategoryCon.y - 10 * this.dpr - this.mDetailBubble.height;\n        this.mCategoriesBar.y = 40 * this.dpr;\n        this.mCategoriesBar.x = -width * 0.5;\n        this.mCategoriesBar.clear();\n        this.mCategoriesBar.fillStyle(0x3EE1FF);\n        this.mCategoriesBar.fillRect(0, 0, width, 40 * this.dpr);\n        this.mCategoriesBar.fillStyle(0x06B5D5);\n        this.mCategoriesBar.fillRect(0, 40 * this.dpr, width, 3 * this.dpr);\n        this.useBtn.x = width - this.useBtn.width / 2 - 10 * this.dpr;\n        this.useBtn.y = this.mCategoryCon.y - this.useBtn.height / 2;\n        this.recasteBtn.x = this.useBtn.x;\n        this.recasteBtn.y = this.useBtn.y - this.recasteBtn.height - 15 * this.dpr;\n        this.mDetailDisplay.x = width / 2;\n        this.mDetailDisplay.y = (height - 296 * this.dpr - 60 * this.dpr) * 0.5 + 60 * this.dpr;\n        this.mIconBg.x = this.mDetailDisplay.x;\n        this.mIconBg.y = this.mDetailDisplay.y;\n        this.mPropGridBg.clear();\n        this.mPropGridBg.fillStyle(0x7DE5FE);\n        this.mPropGridBg.fillRect(0, 0, this.mPropGrid.width, this.mPropGrid.height + 10 * this.dpr);\n        this.mPropGridBg.y = height - this.mPropGrid.height - 4 * this.dpr;\n        this.mPropGrid.x = width / 2 + 3 * this.dpr;\n        this.mPropGrid.y = height - this.mPropGrid.height * 0.5;\n        this.mPropGrid.layout();\n        this.mPropGrid.resetMask();\n        this.mCategoryScroll.refreshMask();\n        // this.moreButtonPanel.x = width * 0.5;\n        // this.moreButtonPanel.y = height * 0.5;\n        this.setSize(width, height);\n        this.setInteractive();\n    };\n    PicaBagPanel.prototype.setCategories = function (subcategorys) {\n        this.mPreCategoryBtn = null;\n        this.mSelectedCategeories = null;\n        var capW = 60 * this.dpr;\n        var capH = 41 * this.dpr;\n        var items = [];\n        this.mCategoryScroll.clearItems();\n        var allCategory = { value: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("common.all"), key: "alltype" };\n        subcategorys.unshift(allCategory);\n        for (var i = 0; i < subcategorys.length; i++) {\n            var item = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["TextButton"](this.scene, this.dpr, 1, subcategorys[i].value, 0, 0);\n            item.setData("item", subcategorys[i]);\n            item.setSize(capW, capH);\n            this.mCategoryScroll.addItem(item);\n            items[i] = item;\n            item.setFontSize(18 * this.dpr);\n            item.setFontStyle("bold");\n        }\n        this.mCategoryScroll.Sort();\n        this.mCategoryScroll.refreshMask();\n        if (items.length > 1)\n            this.onSelectSubCategoryHandler(items[0]);\n        this.updateCategeoriesLoc(false);\n    };\n    PicaBagPanel.prototype.setProp = function (props, isupdate) {\n        if (isupdate === void 0) { isupdate = false; }\n        props = !props ? [] : props;\n        var subProps = [];\n        var subcategoryType = this.mSelectedCategeories.key;\n        this.mSelectedItem = undefined;\n        var sameid = false;\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n            var prop = props_1[_i];\n            if (this.mSelectedItemData && prop.indexId === this.mSelectedItemData.indexId) {\n                this.mSelectedItemData = prop;\n                sameid = true;\n            }\n            if (subcategoryType === "alltype" || subcategoryType === prop.subcategory) {\n                subProps.push(prop);\n            }\n        }\n        if (isupdate) {\n            if (!this.mSelectedItemData)\n                isupdate = false;\n            if (!sameid)\n                isupdate = false;\n        }\n        var len = subProps.length;\n        if (len < 18) {\n            subProps = subProps.concat(new Array(18 - len));\n        }\n        this.mPropGrid.setItems(subProps);\n        if (!isupdate) {\n            this.mSelectedItemData = undefined;\n            var cell = this.mPropGrid.getCell(0);\n            if (cell.container)\n                this.onSelectItemHandler(cell.container);\n        }\n    };\n    PicaBagPanel.prototype.setMoneyData = function (money, diamond) {\n        money = money || 0;\n        diamond = diamond || 0;\n        this.moneyData = { money: money, diamond: diamond };\n        if (!this.mInitialized)\n            return;\n        this.moneyvalue.setText(money + "");\n        this.diamondvalue.setText(diamond + "");\n    };\n    PicaBagPanel.prototype.setSceneData = function (sceneType, editor) {\n        this.mSceneType = sceneType;\n        this.mEnableEdit = editor;\n        this.sceneData = { sceneType: sceneType, editor: editor };\n        if (!this.mInitialized)\n            return;\n        this.createCategory(sceneType, editor);\n    };\n    PicaBagPanel.prototype.setSelectedResource = function (content) {\n        if (content.display) {\n            this.mDetailDisplay.loadDisplay(content);\n        }\n    };\n    PicaBagPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.useBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onUseBtnHandler, this);\n        this.recasteBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRecasteHandler, this);\n    };\n    PicaBagPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.useBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onUseBtnHandler, this);\n        this.recasteBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRecasteHandler, this);\n    };\n    PicaBagPanel.prototype.destroy = function () {\n        if (this.mCategoryScroll) {\n            this.mCategoryScroll.destroy();\n        }\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    PicaBagPanel.prototype.queryRefreshPackage = function (isupdate) {\n        if (isupdate === void 0) { isupdate = false; }\n        this.queryPackege(isupdate);\n    };\n    PicaBagPanel.prototype.onSellPropsHandler = function (category, prop, count) {\n        this.mCategoryScroll.addListen();\n        this.render.renderEmitter(this.key + "_sellProps", { prop: prop, count: count, category: category });\n    };\n    PicaBagPanel.prototype.onSellPropsFailedHandler = function (prop) {\n        this.mCategoryScroll.addListen();\n    };\n    PicaBagPanel.prototype.onUsePropsHandler = function (prop, count) {\n        this.mCategoryScroll.addListen();\n        this.render.renderEmitter(this.key + "_useprops", { itemid: prop.id, count: count });\n    };\n    PicaBagPanel.prototype.onUsePropsFailedHandler = function (prop) {\n        this.mCategoryScroll.addListen();\n    };\n    PicaBagPanel.prototype.onInitialized = function () {\n        if (this.moneyData) {\n            this.moneyvalue.setText(this.moneyData.money + "");\n            this.diamondvalue.setText(this.moneyData.diamond + "");\n        }\n        if (this.sceneData) {\n            this.createCategory(this.sceneData.sceneType, this.sceneData.editor);\n        }\n    };\n    PicaBagPanel.prototype.init = function () {\n        var _this = this;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.mBackground = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["CommonBackground"](this.scene, 0, 0, width, height);\n        this.mIconBg = this.scene.make.image({\n            key: "bag_bg"\n        }, false);\n        this.mIconBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mCategoryCon = this.scene.make.container(undefined, false);\n        this.mCategoryCon.setSize(width, 295 * this.dpr);\n        this.mCategoryCon.y = height - this.mCategoryCon.height;\n        this.mCategoriesBar = this.scene.make.graphics(undefined, false);\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        this.mCloseBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "back_arrow", "back_arrow");\n        this.mCloseBtn.setPosition(21 * this.dpr, 35 * this.dpr);\n        this.mCloseBtn.setInteractive(new Phaser.Geom.Rectangle(-28 * this.dpr, -20 * this.dpr, 56 * this.dpr, 40 * this.dpr), Phaser.Geom.Rectangle.Contains);\n        var moneybg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, -this.dpr, 190 * this.dpr, 28 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "home_assets_bg", {\n            left: 17 * this.dpr,\n            top: 0 * this.dpr,\n            right: 17 * this.dpr,\n            bottom: 0 * this.dpr\n        });\n        moneybg.x = -moneybg.width * 0.5;\n        var moneyline = this.scene.make.image({ x: moneybg.x, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "home_assets_division" }, false);\n        this.moneyvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 26 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "home_silver", this.dpr, {\n            color: "#ffffff", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].NUMBER\n        });\n        this.moneyvalue.setLayout(1);\n        this.moneyvalue.x = moneybg.x - moneybg.width * 0.5 + 22 * this.dpr;\n        this.diamondvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 26 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "home_diamond", this.dpr, {\n            color: "#ffffff", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].NUMBER\n        });\n        this.diamondvalue.setLayout(1);\n        this.diamondvalue.x = moneybg.x + 22 * this.dpr;\n        this.moneyAddBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "home_praise_bg", "home_praise_bg");\n        var moneyAddicon = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "home_assets_add" }, false);\n        this.moneyAddBtn.add(moneyAddicon);\n        this.moneyAddBtn.x = -this.moneyAddBtn.width * 0.5 - 4 * this.dpr;\n        this.moneyAddBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRechargeHandler, this);\n        this.moneyCon = this.scene.make.container(undefined, false);\n        this.moneyCon.setSize(moneybg.width, moneybg.height);\n        this.moneyCon.add([moneybg, moneyline, this.moneyvalue, this.diamondvalue, this.moneyAddBtn]);\n        this.moneyCon.x = width - 20 * this.dpr;\n        this.moneyCon.y = this.mCloseBtn.y;\n        var nameBg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "avater_name_bg" });\n        nameBg.x = width * 0.5;\n        nameBg.y = this.mCloseBtn.y + 40 * this.dpr;\n        this.nameText = this.scene.make.text({ x: nameBg.x, y: nameBg.y, text: "", style: utils__WEBPACK_IMPORTED_MODULE_5__["UIHelper"].whiteStyle(this.dpr, 14) }).setOrigin(0.5);\n        this.nameText.setFontStyle("bold");\n        this.starImage = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "bag_star_big_1" });\n        this.starImage.x = nameBg.x;\n        this.starImage.y = nameBg.y + nameBg.height * 0.5 + 15 * this.dpr;\n        this.moreButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "online_more");\n        this.moreButton.x = width - this.moreButton.width * 0.5 - 20 * this.dpr;\n        this.moreButton.y = nameBg.y;\n        this.moreButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onMoreHandler, this);\n        this.moreButton.visible = false;\n        var btnwidth = 100 * this.dpr, btnHeight = 40 * this.dpr;\n        var btnPosX = width - btnwidth / 2 - 20 * this.dpr, btnPosY = this.mCategoryCon.y - 25 * this.dpr;\n        this.useBtn = this.createNineButton(btnPosX + 100 * this.dpr, btnPosY, btnwidth, btnHeight, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("common.use"), "#996600");\n        this.recasteBtn = this.createNineButton(this.useBtn.x, this.useBtn.y, btnwidth, btnHeight, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.recaste"), "#996600");\n        this.recasteBtn.visible = false;\n        this.mDetailDisplay = new picaRender__WEBPACK_IMPORTED_MODULE_2__["DetailDisplay"](this.scene, this.render);\n        this.mDetailDisplay.setFixedScale(2 * this.dpr / this.scale);\n        this.mDetailDisplay.setComplHandler(new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, function () {\n            _this.mDetailDisplay.visible = true;\n        }));\n        this.mDetailDisplay.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_nothing", 1);\n        this.mDetailDisplay.setNearest();\n        this.mDetailDisplay.y = this.mIconBg.y + this.mIconBg.height / 2;\n        this.mDetailBubble = new DetailBubble(this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, this.dpr);\n        this.mDetailBubble.x = 10 * this.dpr;\n        this.mCategoryScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: 0,\n            y: 60 * this.dpr,\n            width: width,\n            height: 41 * this.dpr,\n            zoom: this.scale,\n            orientation: 1,\n            dpr: this.dpr,\n            space: 10 * this.dpr,\n            selfevent: true,\n            cellupCallBack: function (gameobject) {\n                _this.onSelectSubCategoryHandler(gameobject);\n            }\n        });\n        this.mPropGridBg = this.scene.make.graphics(undefined, false);\n        this.mCategoryCon.add([this.mCategoriesBar, this.mCategoryScroll]);\n        this.add([this.mBackground, this.mPropGridBg, this.mIconBg, this.mCloseBtn, this.moneyCon, this.mDetailDisplay, nameBg, this.nameText, this.starImage,\n            this.moreButton, this.mDetailBubble, this.mCategoryCon, this.useBtn, this.recasteBtn]);\n        var propFrame = this.scene.textures.getFrame(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_icon_common_bg");\n        var capW = (propFrame.width) + 9 * this.dpr;\n        var capH = (propFrame.height) + 9 * this.dpr;\n        var tableConfig = {\n            x: 0,\n            y: 0,\n            table: {\n                width: width,\n                height: 231 * this.dpr,\n                columns: 3,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                zoom: this.scale,\n                mask: false\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new picaRender__WEBPACK_IMPORTED_MODULE_2__["ItemButton"](scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_icon_common_bg", _this.dpr, _this.scale, false);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setItemData(item);\n                if (item && _this.isSelectedItemData(item)) {\n                    cellContainer.isSelect = true;\n                    _this.mSelectedItem = cellContainer;\n                    _this.mSelectedItemData = item;\n                }\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onSelectItemHandler(cell);\n            }\n        });\n        this.add(this.mPropGrid);\n        // this.moreButtonPanel = new MoreButtonPanel(this.scene, width, height, this.dpr);\n        // this.moreButtonPanel.setHandler(new Handler(this, this.onMoreButtonHandler));\n        // this.add(this.moreButtonPanel);\n        // this.moreButtonPanel.hide();\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaBagPanel.prototype.createCategory = function (sceneType, editor) {\n        var width = this.scaleWidth;\n        var topCapW = 90 * this.dpr;\n        var topCapH = 35 * this.dpr;\n        var topPosY = 23 * this.dpr;\n        this.topCheckBox = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["CheckboxGroup"]();\n        var topCategorys = [3, 1]; // op_pkt_def.PKT_PackageType.PropPackage, op_pkt_def.PKT_PackageType.FurniturePackage, op_pkt_def.PKT_PackageType.AvatarPackage\n        var topBtnTexts = [utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.Props"), utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.furni")];\n        if (sceneType === 2) { // op_def.SceneTypeEnum.EDIT_SCENE_TYPE\n            topCategorys = [5]; // op_pkt_def.PKT_PackageType.PropPackage, op_pkt_def.PKT_PackageType.FurniturePackage, op_pkt_def.PKT_PackageType.AvatarPackage\n            topBtnTexts = [utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.furni")];\n        }\n        var topPosX = -width * 0.5 + topCapW * 0.5 + 1 * this.dpr;\n        var frame = this.scene.textures.getFrame(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_tab_uncheck");\n        var w = 60;\n        var h = 65;\n        if (frame) {\n            w = frame.width;\n            h = frame.height;\n        }\n        var config0 = {\n            left: w / 2,\n            top: 12 * this.dpr,\n            right: 4 * this.dpr,\n            bottom: 2 * this.dpr\n        };\n        for (var key in topCategorys) {\n            var index = Number(key);\n            var category = topCategorys[index];\n            var button = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NinePatchTabButton"](this.scene, topCapW, topCapH, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_tab_uncheck", "bag_tab_select", topBtnTexts[index], [config0]);\n            button.tweenScale = 1;\n            button.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_5__["UIHelper"].whiteStyle(this.dpr, 18));\n            button.setData("data", category);\n            button.setSize(topCapW, topCapH);\n            button.setFontStyle("bold");\n            button.y = topPosY;\n            button.x = topPosX;\n            topPosX += topCapW + 3 * this.dpr;\n            this.topBtns.push(button);\n        }\n        this.topCheckBox.appendItemAll(this.topBtns);\n        this.topCheckBox.on("selected", this.onTopCategoryHandler, this);\n        this.mCategoryCon.add(this.topBtns);\n        if (editor) {\n            var index = topCategorys.indexOf(5); // op_pkt_def.PKT_PackageType.EditFurniturePackage\n            this.topCheckBox.selectIndex(index);\n        }\n        else {\n            this.topCheckBox.selectIndex(0);\n        }\n    };\n    PicaBagPanel.prototype.createNineButton = function (x, y, width, height, key, frame, text, color) {\n        var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, x, y, width, height, key, frame, text, this.dpr, 1, {\n            left: 14 * this.dpr,\n            top: 14 * this.dpr,\n            right: 15 * this.dpr,\n            bottom: 14 * this.dpr\n        });\n        if (text) {\n            btn.setTextStyle({\n                color: color,\n                fontSize: 16 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT\n            });\n            btn.setFontStyle("bold");\n        }\n        return btn;\n    };\n    PicaBagPanel.prototype.setSelectedItem = function (data, cell) {\n        if (this.mSelectedItem) {\n            this.mSelectedItem.select = false;\n        }\n        this.nameText.text = data.name || data.shortName;\n        if (data.grade > 0) {\n            this.starImage.visible = true;\n            var starFrame = "bag_star_big_" + data.grade;\n            this.starImage.setFrame(starFrame);\n        }\n        else\n            this.starImage.visible = false;\n        this.mSelectedItemData = data;\n        this.mSelectedItem = cell;\n        cell.select = true;\n        this.mDetailDisplay.displayLoading("loading_ui", utils__WEBPACK_IMPORTED_MODULE_5__["Url"].getUIRes(this.dpr, "loading_ui"), utils__WEBPACK_IMPORTED_MODULE_5__["Url"].getUIRes(this.dpr, "loading_ui"));\n        var content = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_client"].OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE_ITEM_RESOURCE();\n        content.display = this.categoryType === 1 ? data.animationDisplay : data.display;\n        content.animations = data.animations;\n        this.setSelectedResource(content);\n    };\n    PicaBagPanel.prototype.isSelectedItemData = function (data) {\n        if (!this.mSelectedItemData)\n            return false;\n        if (this.mSelectedItemData.indexId === data.indexId)\n            return true;\n        return false;\n    };\n    PicaBagPanel.prototype.onSelectSubCategoryHandler = function (gameobject) {\n        var category = gameobject.getData("item"); // op_def.IStrPair\n        if (category) {\n            if (this.mPreCategoryBtn && (this.mPreCategoryBtn instanceof gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["TextButton"])) {\n                this.mPreCategoryBtn.changeNormal();\n            }\n            if (gameobject instanceof gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["TextButton"])\n                gameobject.changeDown();\n            this.mSelectedCategeories = category;\n            this.mPropGrid.setT(0);\n            var isupdate = this.mSelectedItemData === undefined ? false : true;\n            this.queryPackege(isupdate);\n            this.mPreCategoryBtn = gameobject;\n        }\n        this.mPropGrid.setT(0);\n    };\n    PicaBagPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(this.key + "_close");\n    };\n    PicaBagPanel.prototype.queryPackege = function (isupdate) {\n        if (isupdate === void 0) { isupdate = false; }\n        if (this.mSelectedCategeories) {\n            this.render.renderEmitter(this.key + "_queryPackage", { packType: this.categoryType, key: this.mSelectedCategeories.key, isupdate: isupdate });\n        }\n    };\n    PicaBagPanel.prototype.onSelectItemHandler = function (cell) {\n        var _this = this;\n        var item = cell.getData("item"); // op_client.ICountablePackageItem\n        if (item && this.mSelectedItemData === item || this.mSelectedItemData && !item)\n            return;\n        this.mDetailBubble.visible = true;\n        var property = null;\n        this.render.mainPeer.getUserData_PlayerProperty()\n            .then(function (val) {\n            property = val;\n            return _this.serviceTimestamp;\n        })\n            .then(function (t) {\n            _this.mDetailBubble.setProp(item, Math.floor(t / 1000), property);\n            _this.mDetailBubble.y = _this.mCategoryCon.y - 10 * _this.dpr - _this.mDetailBubble.height;\n            if (item)\n                _this.setItemAttribute(item, property);\n        });\n        if (item) {\n            if (this.categoryType === 3) {\n                if (item.subcategory !== "PKT_MARKET_TAG_20013") {\n                    this.useBtn.visible = false;\n                }\n                else\n                    this.useBtn.visible = true;\n            }\n            else {\n                this.useBtn.visible = true;\n            }\n            this.setSelectedItem(item, cell);\n        }\n        else {\n            if (this.categoryType !== 2 && this.mSelectedItemData === undefined) { // op_pkt_def.PKT_PackageType.AvatarPackage\n                this.useBtn.visible = false;\n                this.mDetailDisplay.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_nothing", 1);\n                this.mDetailDisplay.setNearest();\n                this.nameText.text = "";\n            }\n        }\n    };\n    PicaBagPanel.prototype.setItemAttribute = function (item, property) {\n        for (var _i = 0, _a = this.mAttributes; _i < _a.length; _i++) {\n            var img = _a[_i];\n            img.visible = false;\n        }\n        if (!item.affectValues)\n            return;\n        var length = item.affectValues.length >= 6 ? 6 : item.affectValues.length;\n        for (var i = 0; i < length; i++) {\n            var affect = item.affectValues[i];\n            var img = void 0;\n            if (i < this.mAttributes.length) {\n                img = this.mAttributes[i];\n                img.visible = true;\n            }\n            else {\n                var bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, 56 * this.dpr, 22 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_attribute_bg", {\n                    left: 12 * this.dpr, right: 12 * this.dpr, top: 0, bottom: 0\n                });\n                img = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImageValue"](this.scene, 56 * this.dpr, 22 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "", this.dpr);\n                img.setOffset(-3 * this.dpr, 0);\n                img.addAt(bg, 0);\n                img.setLayout(2);\n                this.add(img);\n                this.mAttributes.push(img);\n            }\n            if (property.propertiesMap) {\n                var proper = property.propertiesMap.get(affect.key);\n                if (proper) {\n                    var value = affect.value > 0 ? "+" + affect.value : affect.value + "";\n                    if (proper.display) {\n                        img.load(utils__WEBPACK_IMPORTED_MODULE_5__["Url"].getOsdRes(proper.display.texturePath));\n                        img.setText(value);\n                        img.setOffset(-3 * this.dpr, 0);\n                    }\n                    else {\n                        // const temptext = `${proper.name}:${value}`;\n                        img.setText(value);\n                        img.setOffset(-10 * this.dpr, 0);\n                    }\n                }\n                else\n                    img.visible = false;\n            }\n            else\n                img.visible = false;\n        }\n        this.setLayoutAttribute();\n    };\n    PicaBagPanel.prototype.setLayoutAttribute = function () {\n        var arr = [];\n        this.mAttributes.forEach(function (value) {\n            if (value.visible)\n                arr.push(value);\n        });\n        if (arr.length === 0)\n            return;\n        var cellWidth = 56 * this.dpr;\n        var cellHeight = 21 * this.dpr;\n        var space = 23 * this.dpr;\n        var posx = this.scaleWidth * 0.5;\n        var posy = this.nameText.y + 30 * this.dpr;\n        var length = arr.length > 3 ? 3 : arr.length;\n        var allLen = cellWidth * length + space * (length - 1);\n        var offsetx = posx - allLen * 0.5;\n        var index = 0;\n        for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n            var item = arr_1[_i];\n            item.x = offsetx + cellWidth * 0.5;\n            item.y = posy;\n            offsetx += (cellWidth + space);\n            index++;\n            if (index === 3) {\n                offsetx = posx - allLen * 0.5;\n                posy += 13 * this.dpr + cellHeight;\n            }\n        }\n        arr.length = 0;\n    };\n    PicaBagPanel.prototype.onAddFurniToSceneHandler = function () {\n        if (!this.mSelectedItemData) {\n            return;\n        }\n        if (this.mSceneType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_def"].SceneTypeEnum.EDIT_SCENE_TYPE || this.mEnableEdit)\n            this.render.renderEmitter(this.key + "_addFurniToScene", this.mSelectedItemData.id);\n        else {\n            var data = {\n                text: [{ text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.placetips"), node: undefined }]\n            };\n            this.render.mainPeer.showMediator(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICANOTICE_NAME, true, data);\n            this.mCategoryScroll.addListen();\n        }\n    };\n    PicaBagPanel.prototype.onTopCategoryHandler = function (item) {\n        var categoryType = item.getData("data");\n        this.clearCategoryData();\n        this.recasteBtn.visible = false;\n        if (categoryType) {\n            this.onSelectedCategory(categoryType);\n            if (categoryType === 1 || categoryType === 5) { // op_pkt_def.PKT_PackageType.FurniturePackage || op_pkt_def.PKT_PackageType.EditFurniturePackage\n                this.useBtn.setText(utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.add"));\n                if (categoryType === 1)\n                    this.moreButton.visible = true;\n            }\n            else {\n                this.useBtn.setText(utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("common.use"));\n                this.moreButton.visible = false;\n            }\n        }\n    };\n    PicaBagPanel.prototype.clearCategoryData = function () {\n        this.mSelectedItemData = undefined;\n    };\n    PicaBagPanel.prototype.onSelectedCategory = function (categoryType) {\n        this.categoryType = categoryType;\n        this.render.renderEmitter(this.key + "_getCategories", categoryType);\n    };\n    PicaBagPanel.prototype.getPropResource = function (data) {\n        var resource = {};\n        if (data.suitType) {\n            resource.avatar = structure__WEBPACK_IMPORTED_MODULE_4__["AvatarSuitType"].createAvatarBySn(data.suitType, data.sn, data.slot, data.tag, data.version);\n        }\n        else {\n            resource.display = data.display;\n        }\n        resource.suit = [{ suit_type: data.suitType, sn: data.sn, tag: data.tag, version: data.version }];\n        resource.animations = data.animations;\n        return resource;\n    };\n    PicaBagPanel.prototype.onMoreButtonHandler = function (tag) {\n        if (tag === "place") {\n            this.onAddFurniToSceneHandler();\n        }\n        else if (tag === "sell") {\n            this.onSellBtnHandler();\n        }\n    };\n    PicaBagPanel.prototype.onSellBtnHandler = function () {\n        this.mCategoryScroll.removeListen();\n        if (this.mSelectedItemData) {\n            var data = this.mSelectedItemData;\n            if (!data.recyclable)\n                return;\n            var title = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("common.sold");\n            var resource = this.getPropResource(data); // op_client.OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE_ITEM_RESOURCE\n            if (data.avatar) {\n                resource.avatar = data.avatar;\n            }\n            else {\n                resource.display = data.display;\n            }\n            resource.animations = data.animations;\n            var resultHandler = {\n                key: this.key,\n                confirmFunc: "onSellPropsHandler",\n                cancelFunc: "onSellPropsFailedHandler",\n                confirmAddData: this.categoryType\n            };\n            this.showPropFun({ resultHandler: resultHandler, data: data, title: title, resource: resource });\n        }\n    };\n    PicaBagPanel.prototype.onUseBtnHandler = function () {\n        this.mCategoryScroll.removeListen();\n        if (this.mSelectedItemData) {\n            if (this.categoryType === 1 || this.categoryType === 5) {\n                this.onAddFurniToSceneHandler();\n            }\n            else {\n                var data = this.mSelectedItemData;\n                var title = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("common.use");\n                var resource = this.getPropResource(data);\n                var resultHandler = {\n                    key: this.key,\n                    confirmFunc: "onUsePropsHandler",\n                    cancelFunc: "onUsePropsFailedHandler"\n                };\n                this.showPropFun({ resultHandler: resultHandler, data: data, price: false, title: title, resource: resource });\n            }\n        }\n    };\n    PicaBagPanel.prototype.onRechargeHandler = function () {\n    };\n    PicaBagPanel.prototype.onRecasteHandler = function () {\n        if (this.mSelectedItemData.rarity === 5) {\n            var noticedata = {\n                text: [{ text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("recaste.raritytips"), node: undefined }]\n            };\n            this.render.mainPeer.showMediator(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICANOTICE_NAME, true, noticedata);\n            return;\n        }\n        var data = this.mSelectedItemData;\n        this.render.mainPeer.showMediator(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICARECASTE_NAME, true, data);\n    };\n    PicaBagPanel.prototype.onMoreHandler = function () {\n        // if (!this.mSelectedItemData) return;\n        // this.moreButtonPanel.show();\n        // this.moreButtonPanel.setItemData(this.mSelectedItemData, this.categoryType);\n        this.recasteBtn.visible = true;\n        this.moreButton.visible = false;\n    };\n    PicaBagPanel.prototype.updateCategeoriesLoc = function (inputBoo) {\n        var list = this.mCategoryScroll.getItemList();\n        var h = 41 * this.dpr;\n        var preBtn = null;\n        var offset = 30 * this.dpr;\n        var w = this.mScene.cameras.main.width;\n        var tmpW = offset;\n        for (var i = 0; i < list.length; i++) {\n            var item = list[i];\n            if (i > 0) {\n                preBtn = list[i - 1];\n                item.x = preBtn.x + preBtn.width; // - item.width * item.originX;\n            }\n            else {\n                item.x = tmpW;\n            }\n            tmpW += item.width;\n        }\n        this.mCategoryScroll.setAlign();\n    };\n    PicaBagPanel.prototype.showPropFun = function (config) {\n        this.render.mainPeer.showMediator(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICAPROPFUN_NAME, true, config);\n    };\n    Object.defineProperty(PicaBagPanel.prototype, "serviceTimestamp", {\n        get: function () {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                _this.render.mainPeer.requestCurTime().then(function (t) {\n                    resolve(t);\n                });\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PicaBagPanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_7__["PicaBasePanel"]));\n\nvar DetailBubble = /** @class */ (function (_super) {\n    __extends(DetailBubble, _super);\n    // private testText: Phaser.GameObjects.Text;\n    function DetailBubble(scene, key, dpr, zoom) {\n        if (zoom === void 0) { zoom = 1; }\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        var tipsWidth = 100 * dpr;\n        var tipsHeight = 96 * dpr;\n        _this.setSize(tipsWidth, tipsHeight);\n        _this.tipsbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, tipsWidth, tipsHeight, _this.key, "tips_bg", {\n            left: 10 * _this.dpr,\n            top: 10 * _this.dpr,\n            right: 10 * _this.dpr,\n            bottom: 10 * _this.dpr\n        }, undefined, undefined, 0);\n        _this.tipsbg.setPosition(tipsWidth * 0.5, tipsHeight * 0.5);\n        _this.tipsbg.alpha = 0.6;\n        _this.tipsText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, 7 * dpr, -tipsHeight + 60 * _this.dpr, "", {\n            color: "#333333",\n            fontSize: 12 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT,\n            lineSpacing: 5 * dpr,\n            padding: {\n                top: 2 * dpr\n            }\n        }).setOrigin(0);\n        _this.tipsText.setWrapMode("char");\n        _this.tipsText.setWrapWidth(200 * dpr);\n        _this.mExpires = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](scene, 7 * dpr, 85 * dpr, "", {\n            fontSize: 12 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT,\n        }).setOrigin(0);\n        _this.add([_this.tipsbg, _this.tipsText, _this.mExpires]);\n        _this.tipsText.addImage("iv_coin", { key: _this.key, frame: "home_silver", y: -3 * _this.dpr });\n        _this.tipsText.addImage("iv_diamond", { key: _this.key, frame: "home_diamond", y: -3 * _this.dpr });\n        return _this;\n    }\n    DetailBubble.prototype.setProp = function (prop, servertime, property) {\n        var _this = this;\n        if (!prop) {\n            this.tipsText.setText(utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.empty_backpack"));\n            this.mExpires.text = "";\n            this.resize();\n        }\n        else {\n            var name_1 = "[color=#32347b][b][size=" + 14 * this.dpr + "]" + (prop.shortName || prop.name) + "[/size][/b][/color]";\n            // let price = "";\n            var source = "";\n            var describle = "";\n            var attri = "";\n            var need = "";\n            var tips = name_1;\n            var mixWidth = 100 * this.dpr;\n            this.tipsText.text = tips;\n            mixWidth = mixWidth < this.tipsText.width ? this.tipsText.width : mixWidth;\n            // if (prop.recyclable) {\n            //   // if (prop.sellingPrice) {\n            //   //   price = `${i18n.t("furni_bag.sale_price")}: [img=${Coin.getIcon(prop.sellingPrice.coinType)}] ${prop.sellingPrice.price}`;\n            //   //   tips += `[color=#ff0000][size=${12 * this.dpr}]${price}[/size][/color]`;\n            //   //   this.tipsText.text = price;\n            //   //   maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            //   // }\n            // } else {\n            //   price = i18n.t("furni_bag.not_sale");\n            //   tips += `[color=#ff0000][size=${12 * this.dpr}]${price}[/size][/color]`;\n            //   this.tipsText.text = price;\n            //   maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            // }\n            if (prop.source) {\n                // source = `${i18n.t("furni_bag.source")}${prop.source}`;\n                source = "" + prop.source;\n                tips += "[color=#ffffff][size=" + 12 * this.dpr + "]" + source + "[/size][/color]";\n                this.tipsText.text = source;\n                mixWidth = mixWidth < this.tipsText.width ? this.tipsText.width : mixWidth;\n            }\n            if (prop.des && prop.des !== "") {\n                describle = prop.des;\n                tips += "\\n" + describle;\n                this.tipsText.text = describle;\n                mixWidth = mixWidth < this.tipsText.width ? this.tipsText.width : mixWidth;\n            }\n            var isline = false;\n            if (prop.affectValues) {\n                var len = prop.affectValues.length;\n                for (var i = 0; i < len; i++) {\n                    var affect = prop.affectValues[i];\n                    if (property.propertiesMap) {\n                        var proper = property.propertiesMap.get(affect.key);\n                        if (proper) {\n                            var value = affect.value > 0 ? "[color=#ffff00]+" + affect.value + "[/color]" : "[color=#ff0000]" + affect.value + "[/color]";\n                            attri += "\\n" + proper.name + ": " + value;\n                        }\n                    }\n                }\n                if (attri.length > 0) {\n                    if (!isline) {\n                        isline = true;\n                        tips += "\\n-- -- -- -- -- -- -- --";\n                    }\n                    tips += "\\n[color=#ffffff]" + utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.properties") + "[/color]" + ("" + attri);\n                }\n            }\n            if (prop.requireValues) {\n                var len = prop.requireValues.length;\n                for (var i = 0; i < len; i++) {\n                    var require_1 = prop.requireValues[i];\n                    if (property.propertiesMap) {\n                        var proper = property.propertiesMap.get(require_1.key);\n                        if (proper) {\n                            var value = proper.value >= require_1.value ? "[color=#00ff00](" + require_1.value + ")[/color]" : "[color=#ff0000](" + require_1.value + ")[/color]";\n                            need += "\\n" + proper.name + ": " + value;\n                        }\n                    }\n                }\n                if (need.length > 0) {\n                    if (!isline) {\n                        isline = true;\n                        tips += "\\n-- -- -- -- -- -- -- --";\n                    }\n                    tips += "\\n" + utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.needproper") + ":" + need;\n                }\n            }\n            // const wrapwidth = mixWidth > maxWidth ? maxWidth : mixWidth;\n            // this.tipsText.setWrapWidth(wrapwidth);\n            this.tipsText.text = tips;\n            this.width = this.tipsText.width + 14 * this.dpr;\n            if (prop.expiredTime > 0) {\n                if (!isline) {\n                    isline = true;\n                    tips += "\\n-- -- -- -- -- -- -- --";\n                }\n                var interval_1 = prop.expiredTime - servertime;\n                var timeout_1 = function () {\n                    _this.mExpires.visible = true;\n                    _this.mExpires.text = _this.getDataFormat(interval_1 * 1000);\n                    if (interval_1 > 0) {\n                        _this.timeID = setTimeout(function () {\n                            interval_1 -= 1;\n                            timeout_1();\n                        }, 1000);\n                    }\n                    else {\n                        _this.timeID = undefined;\n                    }\n                };\n                timeout_1();\n            }\n            else {\n                this.mExpires.visible = false;\n                if (this.timeID)\n                    clearTimeout(this.timeID);\n            }\n            this.resize();\n        }\n        return this;\n    };\n    DetailBubble.prototype.resize = function (w, h) {\n        var mixheight = 96 * this.dpr;\n        var height = this.tipsText.height;\n        if (this.mExpires.visible)\n            height += this.mExpires.height + 3 * this.dpr;\n        height += 14 * this.dpr;\n        height = height < mixheight ? mixheight : height;\n        this.setSize(this.width, height);\n        this.tipsbg.resize(this.width, this.height);\n        this.tipsbg.x = this.width * 0.5;\n        this.tipsbg.y = this.height * 0.5;\n        this.tipsText.y = 7 * this.dpr;\n        this.mExpires.y = this.tipsText.y + this.tipsText.height + 3 * this.dpr;\n    };\n    DetailBubble.prototype.getDataFormat = function (time) {\n        var day = Math.floor(time / 86400000);\n        var hour = Math.floor(time / 3600000) % 24;\n        var minute = Math.floor(time / 60000) % 60;\n        var second = Math.floor(time / 1000) % 60;\n        var text = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.timelimit") + ":  ";\n        if (day > 0) {\n            var temptime = day + "-" + this.stringFormat(hour) + ":" + this.stringFormat(minute) + ":" + this.stringFormat(second);\n            text += "[color=#FF0000]" + temptime + "[/color]";\n        }\n        else if (hour > 0 || minute > 0 || second > 0) {\n            var temptime = this.stringFormat(hour) + ":" + this.stringFormat(minute) + ":" + this.stringFormat(second);\n            text += "[color=#FF0000]" + temptime + "[/color]";\n        }\n        else {\n            var temptime = "" + utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.expires");\n            text += "[color=#FF0000]" + temptime + "[/color]";\n        }\n        // else if (minute > 0) {\n        //   const temptime = `${this.stringFormat(minute)}:${this.stringFormat(second)}`;\n        //   text += `[color=#FF0000]${temptime}[/color]`;\n        // } else if (second > 0) {\n        //   const temptime = `${this.stringFormat(second)}`;\n        //   text += `[color=#FF0000]${temptime}[/color]`;\n        // }\n        //  else {\n        //   const temptime = `${i18n.t("furni_bag.expires")}`;\n        //   text += `[color=#FF0000]${temptime}[/color]`;\n        // }\n        return text;\n    };\n    DetailBubble.prototype.stringFormat = function (num) {\n        var str = num + "";\n        if (str.length <= 1) {\n            str = "0" + str;\n        }\n        return str;\n    };\n    return DetailBubble;\n}(Phaser.GameObjects.Container));\nvar Item = /** @class */ (function (_super) {\n    __extends(Item, _super);\n    function Item(scene, x, y, key, dpr, zoom) {\n        if (zoom === void 0) { zoom = 1; }\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.key = key;\n        var background = scene.make.image({\n            key: key,\n            frame: "grid_bg"\n        }, false);\n        background.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.selectbg = scene.make.image({\n            key: key,\n            frame: "grid_choose"\n        }, false);\n        _this.selectbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.setSize(background.displayWidth, background.displayHeight);\n        _this.selectIcon = scene.make.image({\n            key: key,\n            frame: "selected"\n        }, false).setOrigin(1).setPosition(_this.width * 0.5, _this.height * 0.5);\n        _this.selectIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mPropImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, 0, 0);\n        _this.mPropImage.scale = dpr / _this.zoom;\n        _this.timeIcon = scene.make.image({ key: key, frame: "time" });\n        _this.timeIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.timeIcon.setPosition(-_this.width * 0.5 + _this.timeIcon.width * 0.5, -_this.height * 0.5 + _this.timeIcon.height * 0.5);\n        _this.mCounter = scene.make.text({\n            x: _this.width * 0.5 - 2 * dpr,\n            y: _this.height * 0.5,\n            style: {\n                fontSize: 12 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(1);\n        _this.add([background, _this.selectbg, _this.selectIcon, _this.mPropImage, _this.timeIcon, _this.mCounter]);\n        _this.isSelect = false;\n        _this.isEquip = false;\n        return _this;\n    }\n    Item.prototype.setProp = function (prop) {\n        this.propData = prop;\n        this.isSelect = false;\n        this.isEquip = false;\n        this.mPropImage.visible = false;\n        if (!prop) {\n            // this.mPropImage.setFrame("");\n            this.mCounter.visible = false;\n            this.timeIcon.visible = false;\n            return;\n        }\n        if (!prop.tag || JSON.parse(prop.tag).type !== "remove") {\n            this.mPropImage.scale = this.dpr / this.zoom;\n            this.mPropImage.load(utils__WEBPACK_IMPORTED_MODULE_5__["Url"].getOsdRes(prop.texturePath), this, this.onPropLoadCompleteHandler);\n        }\n        else {\n            this.mPropImage.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "backpack_close");\n            this.mPropImage.scale = 1;\n            this.mPropImage.visible = true;\n        }\n        this.timeIcon.visible = prop.expiredTime > 0;\n        if (prop.count > 1) {\n            this.mCounter.visible = true;\n            this.mCounter.setText(prop.count.toString());\n        }\n        else {\n            this.mCounter.visible = false;\n        }\n        if (prop.rightSubscript === 1) { // op_pkt_def.PKT_Subscript.PKT_SUBSCRIPT_CHECKMARK\n            this.isEquip = true;\n        }\n        else\n            this.isEquip = false;\n    };\n    Item.prototype.onPropLoadCompleteHandler = function () {\n        if (this.mPropImage && this.mPropImage.texture) {\n            var texture = this.mPropImage.texture;\n            this.mPropImage.visible = true;\n            if (texture) {\n                texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\n            }\n        }\n    };\n    Object.defineProperty(Item.prototype, "isSelect", {\n        set: function (value) {\n            this.selectbg.visible = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Item.prototype, "isEquip", {\n        set: function (value) {\n            this.selectIcon.visible = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Item;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBag/PicaBagPanel.ts?')},"./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessChoosePlanPanel", function() { return PicaBusinessChoosePlanPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaBusinessChoosePlanPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessChoosePlanPanel, _super);\n    function PicaBusinessChoosePlanPanel(scene, x, y, width, height, dpr, zoom, key) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaBusinessChoosePlanPanel.prototype.setPlanData = function (marketPlan) {\n        this.gridtable.setItems(marketPlan);\n        var cells = this.gridtable.getCells();\n        if (cells) {\n            var cell = cells[0];\n            if (cell && cell.container) {\n                this.onGridSelectHandler(cell.container);\n            }\n        }\n    };\n    PicaBusinessChoosePlanPanel.prototype.setHandler = function (cancel, select) {\n        this.cancelHandler = cancel;\n        this.selectHandler = select;\n    };\n    PicaBusinessChoosePlanPanel.prototype.resetMask = function () {\n        this.gridtable.resetMask();\n        this.gameScroll.refreshMask();\n    };\n    PicaBusinessChoosePlanPanel.prototype.create = function () {\n        var _this = this;\n        var posy = -this.height * 0.5;\n        var gridWdith = this.width - 29 * this.dpr;\n        var gridHeight = 100 * this.dpr;\n        var gridY = -this.height * 0.5 + gridHeight * 0.5 + 10 * this.dpr;\n        this.gridtable = this.createGrideTable(0, gridY, gridWdith, gridHeight, 90 * this.dpr, 100 * this.dpr);\n        this.describleText = this.scene.make.text({ x: -this.width * 0.5 + 20 * this.dpr, y: gridY + gridHeight * 0.5 + 10 * this.dpr, text: "This industry has great development potential.", style: { fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#0" } }).setOrigin(0);\n        this.describleText.setWordWrapWidth(this.width - 45 * this.dpr, true);\n        this.add(this.describleText);\n        this.effectText = this.scene.make.text({\n            x: this.describleText.x, y: this.describleText.y + this.describleText.height + 20 * this.dpr,\n            text: "55225sadffqwerqwerqwer",\n            style: {\n                fontSize: 10 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#0",\n                wordWrap: {\n                    width: 244 * this.dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }).setOrigin(0);\n        this.add(this.effectText);\n        this.materialTitle = this.scene.make.text({ x: this.describleText.x, y: this.effectText.y + this.effectText.height + 5 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.material_requirements"), style: { fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#0" } }).setOrigin(0);\n        this.add(this.materialTitle);\n        this.gameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: 0,\n            y: this.materialTitle.y + this.materialTitle.height + 22 * this.dpr,\n            width: this.width - 40 * this.dpr,\n            height: 60 * this.dpr,\n            zoom: this.zoom,\n            dpr: this.dpr,\n            align: 2,\n            orientation: 1,\n            space: 10 * this.dpr,\n            cellupCallBack: function (gameobject) {\n                _this.onMaterialItemHandler(gameobject);\n            }\n        });\n        this.add(this.gameScroll);\n        var cancelBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, -60 * this.dpr, this.height * 0.5 - 7 * this.dpr, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("common.cancel"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(cancelBtn);\n        cancelBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#ffffff" });\n        cancelBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onCancelHandler, this);\n        var selectBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 60 * this.dpr, cancelBtn.y, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.select"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(selectBtn);\n        selectBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onSelectHandler, this);\n        selectBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#996600" });\n        this.iteminfoTips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ItemInfoTips"](this.scene, 121 * this.dpr, 46 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, "tips_bg", this.dpr);\n        this.iteminfoTips.setVisible(false);\n        this.add(this.iteminfoTips);\n    };\n    PicaBusinessChoosePlanPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                tableOY: 5 * this.dpr,\n                zoom: this.zoom\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new PlanTypeItem(_this.scene, 0, 0, capW, capH, _this.key, _this.dpr, _this.zoom);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setPlanData(item);\n                if (_this.curSelectData && item === _this.curSelectData) {\n                    cellContainer.select = true;\n                }\n                else\n                    cellContainer.select = false;\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        grid.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onGridSelectHandler(cell);\n            }\n        });\n        this.add(grid);\n        return grid;\n    };\n    PicaBusinessChoosePlanPanel.prototype.onGridSelectHandler = function (cell) {\n        if (this.curSelectItem)\n            this.curSelectItem.select = false;\n        cell.select = true;\n        var data = cell.palnData;\n        this.gameScroll.clearItems();\n        for (var _i = 0, _a = data.requirements; _i < _a.length; _i++) {\n            var itemdata = _a[_i];\n            var item = new MaterialItem(this.scene, 0, 0, 36 * this.dpr, 36 * this.dpr, this.key, this.dpr, this.zoom);\n            item.setItemData(itemdata);\n            this.gameScroll.addItem(item);\n        }\n        this.gameScroll.Sort();\n        this.describleText.text = data.des;\n        this.effectText.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.effect") + ":" + data.buffDes;\n        this.curSelectItem = cell;\n        this.curSelectData = data;\n    };\n    PicaBusinessChoosePlanPanel.prototype.onCancelHandler = function () {\n        if (this.cancelHandler)\n            this.cancelHandler.run();\n    };\n    PicaBusinessChoosePlanPanel.prototype.onSelectHandler = function () {\n        if (this.selectHandler)\n            this.selectHandler.runWith(this.curSelectData.id);\n        this.onCancelHandler();\n    };\n    PicaBusinessChoosePlanPanel.prototype.onMaterialItemHandler = function (gameobj) {\n        this.iteminfoTips.setVisible(!this.iteminfoTips.visible);\n        if (this.iteminfoTips)\n            if (this.iteminfoTips.visible) {\n                var data = gameobj.itemData;\n                this.iteminfoTips.setItemData(data);\n                this.iteminfoTips.setTipsPosition(gameobj, this, 10 * this.dpr);\n            }\n    };\n    return PicaBusinessChoosePlanPanel;\n}(Phaser.GameObjects.Container));\n\nvar PlanTypeItem = /** @class */ (function (_super) {\n    __extends(PlanTypeItem, _super);\n    function PlanTypeItem(scene, x, y, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.isSelect = false;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.setSize(width, height);\n        _this.bg = _this.scene.make.image({ key: key, frame: "store_bg" });\n        _this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.add(_this.bg);\n        _this.storeIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, 0, 0);\n        _this.storeIcon.setTexture(_this.key, "restaurant_icon");\n        _this.storeIcon.setPosition(0, -8 * dpr);\n        _this.add(_this.storeIcon);\n        _this.storeName = _this.scene.make.text({ x: 0, y: _this.storeIcon.y + _this.storeIcon.height * 0.5 + 10 * dpr, text: "Restaurant", style: { color: "#0", fontSize: 10 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        _this.add(_this.storeName);\n        return _this;\n    }\n    PlanTypeItem.prototype.setPlanData = function (data) {\n        var _this = this;\n        this.palnData = data;\n        var icon = data.icon;\n        if (icon === "" && data.requirements && data.requirements.length > 0) {\n            icon = data.requirements[0].display.texturePath;\n        }\n        var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(icon);\n        this.storeIcon.load(url, this, function () {\n            _this.storeIcon.displayWidth = 46 * _this.dpr;\n            _this.storeIcon.scaleY = _this.storeIcon.scaleX;\n        });\n        this.storeName.text = data.name;\n    };\n    Object.defineProperty(PlanTypeItem.prototype, "select", {\n        get: function () {\n            return this.isSelect;\n        },\n        set: function (value) {\n            this.isSelect = value;\n            var frame = value ? "store_bg_click" : "store_bg";\n            this.bg.setFrame(frame);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PlanTypeItem;\n}(Phaser.GameObjects.Container));\nvar MaterialItem = /** @class */ (function (_super) {\n    __extends(MaterialItem, _super);\n    function MaterialItem(scene, x, y, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.setSize(width, height);\n        var bg = _this.scene.make.image({ key: _this.key, frame: "item_bg" });\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.add(bg);\n        _this.itemIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, 0, 0);\n        _this.add(_this.itemIcon);\n        _this.countText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, bg.width * 0.5, bg.height * 0.5)\n            .setOrigin(1, 0.5).setFontSize(12 * dpr).setFontFamily(utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT);\n        _this.add(_this.countText);\n        return _this;\n    }\n    MaterialItem.prototype.setItemData = function (data) {\n        var _this = this;\n        this.itemData = data;\n        var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(data.display.texturePath);\n        this.itemIcon.load(url, this, function () {\n            _this.itemIcon.displayWidth = 29 * _this.dpr;\n            _this.itemIcon.scaleY = _this.itemIcon.scaleX;\n        });\n        this.countText.text = this.getCountText(data.count, data.neededCount);\n    };\n    MaterialItem.prototype.getCountText = function (count, needcount) {\n        var color = (count >= needcount ? "#0054FF" : "#FF2B2B");\n        var countText = "[stroke=" + color + "][color=" + color + "]" + count + "[/color][/stroke]";\n        var needText = "[stroke=#2D2D2D][color=#2D2D2D]/" + needcount + "[/color][/stroke]";\n        var text = countText + needText;\n        return text;\n    };\n    return MaterialItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel.ts?')},"./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessMarketingPlanPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessMarketingPlanPanel", function() { return PicaBusinessMarketingPlanPanel; });\n/* harmony import */ var _PicaBusinessPlanPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaBusinessPlanPanel */ "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessPlanPanel.ts");\n/* harmony import */ var _PicaBusinessChoosePlanPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaBusinessChoosePlanPanel */ "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var _PicaBusinessStreet_PicaBusinessContentPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../PicaBusinessStreet/PicaBusinessContentPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessContentPanel.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar PicaBusinessMarketingPlanPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessMarketingPlanPanel, _super);\n    function PicaBusinessMarketingPlanPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key2 = "c_street_2";\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICABUSINESSMARKETINGPLAN_NAME;\n        return _this;\n    }\n    PicaBusinessMarketingPlanPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(w, h);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x000000, 0.66);\n        this.mBackGround.fillRect(0, 0, w, h);\n    };\n    PicaBusinessMarketingPlanPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    };\n    PicaBusinessMarketingPlanPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n    };\n    PicaBusinessMarketingPlanPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n    };\n    PicaBusinessMarketingPlanPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "c_street_1/c_street_1.png", "c_street_1/c_street_1.json");\n        this.addAtlas(this.key2, "c_street_2/c_street_2.png", "c_street_2/c_street_2.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaBusinessMarketingPlanPanel.prototype.init = function () {\n        var zoom = this.scale;\n        var wid = this.scaleWidth;\n        var hei = this.scaleHeight;\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, wid * zoom, hei * zoom);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, wid, hei), Phaser.Geom.Rectangle.Contains);\n        this.add(this.mBackGround);\n        var topoffset = 90 * this.dpr;\n        var bottomoffset = 74 * this.dpr;\n        var conWidth = 295 * this.dpr;\n        var conHeight = hei - topoffset - bottomoffset;\n        var conY = topoffset + conHeight * 0.5;\n        var conX = wid * 0.5;\n        this.content = new _PicaBusinessStreet_PicaBusinessContentPanel__WEBPACK_IMPORTED_MODULE_3__["PicaBusinessContentPanel"](this.scene, conX, conY, conWidth, conHeight, this.dpr, this.key, this.key2);\n        this.content.setCloseHandler(new utils__WEBPACK_IMPORTED_MODULE_6__["Handler"](this, this.OnCloseHandler));\n        this.add(this.content);\n        this.resize(wid, hei);\n        _super.prototype.init.call(this);\n        this.setLinear(this.key2);\n        this.openPlanPanel();\n    };\n    PicaBusinessMarketingPlanPanel.prototype.setPlanModels = function (content) {\n        this.picChoosePlanPanel.setPlanData(content.marketPlan);\n    };\n    PicaBusinessMarketingPlanPanel.prototype.setEquipedPlan = function (content) {\n        this.picBusinessPlanPanel.setPlanData(content);\n    };\n    PicaBusinessMarketingPlanPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaBusinessMarketingPlanPanel.prototype.openPlanPanel = function () {\n        this.showMarketingPlanPanel();\n        this.picBusinessPlanPanel.setRender(this.render);\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_4__["RENDER_PEER"] + "_" + this.key + "_querymarketplan");\n    };\n    PicaBusinessMarketingPlanPanel.prototype.openChoosePlanPanel = function () {\n        this.showChoosePlanPanel();\n        this.picChoosePlanPanel.resetMask();\n    };\n    PicaBusinessMarketingPlanPanel.prototype.showMarketingPlanPanel = function () {\n        var _this = this;\n        var topoffset = 90 * this.dpr;\n        var bottomoffset = 74 * this.dpr;\n        this.setContentSize(topoffset, bottomoffset);\n        if (!this.picBusinessPlanPanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picBusinessPlanPanel = new _PicaBusinessPlanPanel__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessPlanPanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key);\n            this.picBusinessPlanPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_6__["Handler"](this, function () {\n                _this.hideMarketingPlanPanel();\n                _this.OnCloseHandler();\n            }), new utils__WEBPACK_IMPORTED_MODULE_6__["Handler"](this, function (data) {\n                _this.hideMarketingPlanPanel();\n                _this.openChoosePlanPanel();\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_4__["RENDER_PEER"] + "_" + _this.key + "_queryplanmodels", data);\n            }));\n        }\n        this.content.add(this.picBusinessPlanPanel);\n        this.picBusinessPlanPanel.resetMask();\n    };\n    PicaBusinessMarketingPlanPanel.prototype.hideMarketingPlanPanel = function () {\n        this.content.remove(this.picBusinessPlanPanel);\n    };\n    PicaBusinessMarketingPlanPanel.prototype.showChoosePlanPanel = function () {\n        var _this = this;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var conWidth = 295 * this.dpr;\n        var conHeight = 320 * this.dpr;\n        var conY = height * 0.5;\n        var conX = width * 0.5;\n        this.content.setPosition(conX, conY);\n        this.content.setContentSize(conWidth, conHeight);\n        if (!this.picChoosePlanPanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picChoosePlanPanel = new _PicaBusinessChoosePlanPanel__WEBPACK_IMPORTED_MODULE_1__["PicaBusinessChoosePlanPanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key);\n            this.picChoosePlanPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_6__["Handler"](this, function () {\n                _this.hideChoosePlanPanel();\n                _this.openPlanPanel();\n            }), new utils__WEBPACK_IMPORTED_MODULE_6__["Handler"](this, function (marketPlanId) {\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_4__["RENDER_PEER"] + "_" + _this.key + "_queryselectplan", marketPlanId);\n            }));\n        }\n        this.content.add(this.picChoosePlanPanel);\n        this.picBusinessPlanPanel.resetMask();\n    };\n    PicaBusinessMarketingPlanPanel.prototype.hideChoosePlanPanel = function () {\n        this.content.remove(this.picChoosePlanPanel);\n    };\n    PicaBusinessMarketingPlanPanel.prototype.setContentSize = function (topoffset, bottomoffset) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var conWidth = 295 * this.dpr;\n        var conHeight = height - topoffset - bottomoffset;\n        var conY = topoffset + conHeight * 0.5;\n        var conX = width * 0.5;\n        this.content.setPosition(conX, conY);\n        this.content.setContentSize(conWidth, conHeight);\n    };\n    PicaBusinessMarketingPlanPanel.prototype.OnCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_4__["RENDER_PEER"] + "_" + this.key + "_hide");\n    };\n    return PicaBusinessMarketingPlanPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessMarketingPlanPanel.ts?')},"./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessPlanPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessPlanPanel", function() { return PicaBusinessPlanPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaBusinessPlanPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessPlanPanel, _super);\n    function PicaBusinessPlanPanel(scene, x, y, width, height, dpr, zoom, key) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaBusinessPlanPanel.prototype.setRender = function (world) {\n        this.render = world;\n    };\n    PicaBusinessPlanPanel.prototype.setPlanData = function (content) {\n        var marketPlanPairs = content.marketPlanPairs;\n        var bg = content.industryBackground !== "" ? content.industryBackground : "market_b";\n        this.topbg.setFrame(bg);\n        this.describleText.text = content.industryDes;\n        this.planBuffText.text = content.industryBuffDes;\n        this.gridtable.setItems(marketPlanPairs);\n    };\n    PicaBusinessPlanPanel.prototype.setHandler = function (cancel, add) {\n        this.cancelHandler = cancel;\n        this.addPlanHandler = add;\n    };\n    PicaBusinessPlanPanel.prototype.resetMask = function () {\n        this.gridtable.resetMask();\n    };\n    PicaBusinessPlanPanel.prototype.create = function () {\n        var posy = -this.height * 0.5;\n        var topWid = 253 * this.dpr, topHei = 73 * this.dpr;\n        this.topbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, topWid, topHei, this.key, "market_b", {\n            left: 6 * this.dpr,\n            top: 0 * this.dpr,\n            right: 6 * this.dpr,\n            bottom: 0 * this.dpr\n        });\n        this.topbg.y = posy + topHei * 0.5 + 10 * this.dpr;\n        this.add(this.topbg);\n        this.describleText = this.scene.make.text({ x: 0, y: this.topbg.y - 15 * this.dpr, text: "Your store is now at a advantage", style: { fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#ffffff" } }).setOrigin(0.5);\n        this.describleText.setWordWrapWidth(200 * this.dpr);\n        this.add(this.describleText);\n        this.planBuffText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, 0, this.topbg.y + 15 * this.dpr, "Store prosperity -10%", { fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#ffffff" })\n            .setOrigin(0.5);\n        this.add(this.planBuffText);\n        this.planBuffText.setWrapWidth(200 * this.dpr);\n        var titlebg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, 135 * this.dpr, 17 * this.dpr, this.key, "subtitle", {\n            left: 13 * this.dpr,\n            top: 0 * this.dpr,\n            right: 13 * this.dpr,\n            bottom: 0 * this.dpr\n        });\n        titlebg.x = 0;\n        titlebg.y = this.topbg.y + this.topbg.height * 0.5 + 40 * this.dpr;\n        this.add(titlebg);\n        var title = this.scene.make.text({ x: 0, y: titlebg.y, text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.marketing_plan"), style: { fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#0" } }).setOrigin(0.5);\n        this.add(title);\n        titlebg.resize(135 * this.dpr, 17 * this.dpr);\n        var gridWdith = this.width - 24 * this.dpr;\n        var gridHeight = this.height - 200 * this.dpr;\n        var gridY = titlebg.y + titlebg.height * 0.5 + 20 * this.dpr + gridHeight * 0.5;\n        this.gridtable = this.createGrideTable(0, gridY, gridWdith, gridHeight, 253 * this.dpr, 63 * this.dpr);\n        var cancelBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, this.height * 0.5 - 7 * this.dpr, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("common.cancel"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(cancelBtn);\n        cancelBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#ffffff" });\n        cancelBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onCancelHandler, this);\n    };\n    PicaBusinessPlanPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                tableOY: 5 * this.dpr,\n                zoom: this.zoom,\n                cellPadX: 8 * this.dpr\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new MarketingPlanItem(_this.scene, 0, 0, capW, capH, _this.key, _this.dpr, _this.zoom);\n                    cellContainer.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](_this, _this.onAddPlanHandler));\n                }\n                cellContainer.setData({ item: item });\n                _this.render.mainPeer.requestCurTime().then(function (t) {\n                    cellContainer.setPlanData(item, t);\n                });\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        grid.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onGridSelectHandler(cell);\n            }\n        });\n        this.add(grid);\n        return grid;\n    };\n    PicaBusinessPlanPanel.prototype.onGridSelectHandler = function (cell) {\n    };\n    PicaBusinessPlanPanel.prototype.onAddPlanHandler = function (data) {\n        if (this.addPlanHandler)\n            this.addPlanHandler.runWith(data.marketPlanType);\n    };\n    PicaBusinessPlanPanel.prototype.onCancelHandler = function () {\n        if (this.cancelHandler)\n            this.cancelHandler.run();\n    };\n    return PicaBusinessPlanPanel;\n}(Phaser.GameObjects.Container));\n\nvar MarketingPlanItem = /** @class */ (function (_super) {\n    __extends(MarketingPlanItem, _super);\n    function MarketingPlanItem(scene, x, y, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.setSize(width, height);\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, width, 53 * dpr, _this.key, "no_plan_bg", {\n            left: 6 * _this.dpr,\n            top: 0 * _this.dpr,\n            right: 6 * _this.dpr,\n            bottom: 0 * _this.dpr\n        });\n        _this.add(_this.bg);\n        var storebg = _this.scene.make.image({ key: _this.key, frame: "plan_icon_bg" });\n        storebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        storebg.x = -_this.width * 0.5 + storebg.width * 0.5 + 5 * dpr;\n        _this.add(storebg);\n        _this.planIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, 0, 0);\n        _this.planIcon.setPosition(storebg.x, 0);\n        _this.add(_this.planIcon);\n        _this.planText = _this.scene.make.text({ x: storebg.x + storebg.width * 0.5 + 10 * dpr, y: 0, style: { color: "#0", fontSize: 10 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        _this.planText.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.plan_title");\n        _this.add(_this.planText);\n        _this.planName = _this.scene.make.text({ x: storebg.x + storebg.width * 0.5 + 10 * dpr, y: -_this.bg.height * 0.5 + 4 * dpr, text: "Plane Name", style: { color: "#ffffff", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.planName);\n        _this.planAtt = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, _this.planName.x, _this.planName.y + _this.planName.height + 4 * dpr, "Competitiveness +10%,  Prosperity +10%", {\n            color: "#0",\n            fontSize: 10 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n        }).setOrigin(0);\n        _this.add(_this.planAtt);\n        var barWdith = 159 * dpr, barHeight = 8 * dpr;\n        var textConfig = {\n            x: 0, y: 0, color: "#ffffff", fontSize: 9 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, halign: 0.5, valign: 0.5\n        };\n        _this.progress = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ProgressBar"](_this.scene, {\n            x: 5 * dpr,\n            y: _this.planAtt.y + _this.planAtt.height + 4 * dpr + barHeight * 0.5,\n            width: barWdith,\n            height: barHeight,\n            background: {\n                x: 0,\n                y: 0,\n                width: barWdith,\n                height: barHeight,\n                config: {\n                    top: 1 * dpr,\n                    left: 5 * dpr,\n                    right: 5 * dpr,\n                    bottom: 1 * dpr,\n                },\n                key: key,\n                frame: "progress_bar_bg"\n            },\n            bar: {\n                x: 0,\n                y: 0,\n                width: barWdith,\n                height: barHeight - dpr,\n                config: {\n                    top: 1 * dpr,\n                    left: 5 * dpr,\n                    right: 5 * dpr,\n                    bottom: 1 * dpr,\n                },\n                key: key,\n                frame: "progress_bar_g"\n            },\n            dpr: dpr,\n            textConfig: textConfig\n        });\n        _this.progress.text.setOrigin(0.5);\n        _this.add(_this.progress);\n        _this.addBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.scene, _this.key, "add_plan", "add_plan");\n        _this.addBtn.x = _this.width * 0.5 - _this.addBtn.width * 0.5 - 20 * dpr;\n        _this.addBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), _this.onAddBtnHandler, _this);\n        _this.add(_this.addBtn);\n        return _this;\n    }\n    MarketingPlanItem.prototype.setPlanData = function (data, unixTime) {\n        var _this = this;\n        if (!data.marketPlan) {\n            this.planName.visible = false;\n            this.planAtt.visible = false;\n            this.progress.visible = false;\n            this.add(this.addBtn);\n            this.bg.setFrame("no_plan_bg");\n        }\n        else {\n            this.planName.visible = true;\n            this.planAtt.visible = true;\n            this.progress.visible = true;\n            this.planText.visible = false;\n            this.bg.setFrame("has_plan_bg");\n            this.remove(this.addBtn);\n            var barframe = "progress_bar_r";\n            var remainTime = Math.floor(data.marketPlan.endTime - unixTime / 1000);\n            var ratio = Math.floor(remainTime / data.marketPlan.totalTime * 100);\n            if (ratio > 30 && ratio <= 50)\n                barframe = "progress_bar_y";\n            else if (ratio > 50)\n                barframe = "progress_bar_g";\n            this.progress.bar.setFrame(barframe);\n            this.progress.setProgress(remainTime, data.marketPlan.totalTime);\n            this.progress.setText(this.getDataFormat(remainTime * 1000));\n            this.planName.text = data.marketPlan.name;\n            this.planAtt.text = data.marketPlan.buffDes;\n            var icon = data.marketPlan.icon !== "" ? data.marketPlan.icon : data.marketPlan.requirements[0].texturePath;\n            if ((icon === "" || !icon) && data.marketPlan.requirements && data.marketPlan.requirements.length > 0) {\n                icon = data.marketPlan.requirements[0].texturePath;\n            }\n            var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(icon);\n            this.planIcon.load(url, this, function () {\n                _this.planIcon.displayWidth = 30 * _this.dpr;\n                _this.planIcon.scaleY = _this.planIcon.scaleX;\n            });\n        }\n        this.planData = data;\n    };\n    MarketingPlanItem.prototype.setHandler = function (addhandler) {\n        this.addBtnHandler = addhandler;\n    };\n    MarketingPlanItem.prototype.onAddBtnHandler = function () {\n        if (this.addBtnHandler)\n            this.addBtnHandler.runWith(this.planData);\n    };\n    MarketingPlanItem.prototype.getDataFormat = function (time) {\n        var day = Math.floor(time / 86400000);\n        var hour = Math.floor(time / 3600000) % 24;\n        var minute = Math.floor(time / 60000) % 60;\n        var second = Math.floor(time / 1000) % 60;\n        var text = "";\n        if (day > 0) {\n            text = day + "  " + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("timeuint.day");\n            if (hour > 0 || minute > 0) {\n                text += this.stringFormat(hour) + ":" + this.stringFormat(minute);\n            }\n        }\n        else if (hour > 0) {\n            if (minute > 0) {\n                text = this.stringFormat(hour) + ":" + this.stringFormat(minute);\n            }\n            else {\n                text = this.stringFormat(hour) + " " + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("timeuint.hour");\n            }\n        }\n        else if (minute > 0)\n            text = this.stringFormat(minute) + " " + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("timeuint.minute");\n        else\n            text = this.stringFormat(second) + " " + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("timeuint.second");\n        return text;\n    };\n    MarketingPlanItem.prototype.stringFormat = function (num) {\n        var str = num + "";\n        if (str.length <= 1) {\n            str = "0" + str;\n        }\n        return str;\n    };\n    return MarketingPlanItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessPlanPanel.ts?')},"./src/pica/render/ui/PicaBusinessStreet/PicaBusinessContentPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessContentPanel", function() { return PicaBusinessContentPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaBusinessContentPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessContentPanel, _super);\n    function PicaBusinessContentPanel(scene, x, y, width, height, dpr, key, key2) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.create();\n        return _this;\n    }\n    PicaBusinessContentPanel.prototype.create = function () {\n        var width = this.width;\n        var height = this.height;\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, width, height, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].common2Key, "bg", {\n            left: 70 * this.dpr,\n            top: 30 * this.dpr,\n            right: 30 * this.dpr,\n            bottom: 70 * this.dpr\n        });\n        this.add(this.bg);\n        var posY = -height * 0.5;\n        this.topbg = this.scene.make.image({ key: this.key, frame: "eaves" });\n        this.topbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.topbg.y = posY - 2 * this.dpr;\n        this.add(this.topbg);\n        this.titlebg = this.scene.make.image({ key: this.key, frame: "title" });\n        this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titlebg.y = posY - 25 * this.dpr;\n        this.add(this.titlebg);\n        this.titleText = this.scene.make.text({\n            x: 0, y: this.titlebg.y - 5 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.commercial_street"),\n            style: { fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#FFD248" }\n        }).setOrigin(0.5, 0);\n        this.titleText.setStroke("#553100", 2 * this.dpr);\n        this.titleText.setShadow(2, 2, "#553100", 4 * this.dpr, true, true);\n        this.titleText.setFontStyle("bold");\n        this.add(this.titleText);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "close");\n        this.closeBtn.setDisplaySize(28 * this.dpr, 28 * this.dpr);\n        this.closeBtn.setPosition(this.width * 0.5 - 8 * this.dpr, posY + this.dpr * 7);\n        this.closeBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onCloseHandler, this);\n        this.add(this.closeBtn);\n        this.setContentSize(width, height);\n    };\n    PicaBusinessContentPanel.prototype.setContentSize = function (width, height) {\n        this.setSize(width, height);\n        this.bg.resize(width, height);\n        var posY = -height * 0.5;\n        this.topbg.y = posY - 2 * this.dpr;\n        this.titlebg.y = posY - 25 * this.dpr;\n        this.titleText.y = this.titlebg.y - 5 * this.dpr;\n        this.closeBtn.setPosition(this.width * 0.5 - 8 * this.dpr, posY + this.dpr * 7);\n    };\n    PicaBusinessContentPanel.prototype.setTitleText = function (text) {\n        this.titleText.text = text;\n    };\n    PicaBusinessContentPanel.prototype.setCloseHandler = function (handler) {\n        this.closeHandler = handler;\n    };\n    PicaBusinessContentPanel.prototype.onCloseHandler = function () {\n        if (this.closeHandler)\n            this.closeHandler.run();\n    };\n    return PicaBusinessContentPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessStreet/PicaBusinessContentPanel.ts?')},"./src/pica/render/ui/PicaBusinessStreet/PicaBusinessHistoryPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessHistoryPanel", function() { return PicaBusinessHistoryPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaBusinessHistoryPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessHistoryPanel, _super);\n    function PicaBusinessHistoryPanel(scene, x, y, width, height, dpr, zoom, key, key2) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaBusinessHistoryPanel.prototype.setHistoryeData = function (datas) {\n        this.gridtable.setItems(datas);\n        this.titleText.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.history_title", { name: datas.length });\n    };\n    PicaBusinessHistoryPanel.prototype.setHandler = function (back) {\n        this.backHandler = back;\n    };\n    PicaBusinessHistoryPanel.prototype.resetMask = function () {\n        this.gridtable.resetMask();\n    };\n    PicaBusinessHistoryPanel.prototype.create = function () {\n        var posy = -this.height * 0.5;\n        var posx = -this.width * 0.5;\n        var titleText = this.scene.make.text({\n            x: posx + 30 * this.dpr, y: posy + 6 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.history_title"),\n            style: { fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#FFC51A" }\n        }).setOrigin(0, 0.5);\n        titleText.setStroke("#553100", 2 * this.dpr);\n        this.add(titleText);\n        this.titleText = titleText;\n        var gridWdith = this.width;\n        var gridHeight = this.height - 80 * this.dpr;\n        var gridY = posy + 33 * this.dpr + gridHeight * 0.5;\n        this.gridtable = this.createGrideTable(0, gridY, gridWdith, gridHeight, 256 * this.dpr, 50 * this.dpr);\n        var backBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, this.height * 0.5 - 7 * this.dpr, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.back"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(backBtn);\n        backBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#ffffff" });\n        backBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onBackHandler, this);\n    };\n    PicaBusinessHistoryPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                tableOX: 19 * this.dpr,\n                zoom: this.zoom\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new PicHistoryItem(_this.scene, 0, 0, capW, capH, _this.key, _this.key2, _this.dpr, _this.zoom);\n                    grid.add(cellContainer);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setStoreData(item);\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        this.add(grid);\n        return grid;\n    };\n    PicaBusinessHistoryPanel.prototype.onBackHandler = function () {\n        if (this.backHandler)\n            this.backHandler.run();\n    };\n    return PicaBusinessHistoryPanel;\n}(Phaser.GameObjects.Container));\n\nvar PicHistoryItem = /** @class */ (function (_super) {\n    __extends(PicHistoryItem, _super);\n    function PicHistoryItem(scene, x, y, width, height, key, key2, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.setSize(width, height);\n        var posx = -_this.width * 0.5;\n        var posy = -_this.height * 0.5;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, width, 45 * dpr, _this.key, "resturant_bg", {\n            left: 4 * _this.dpr,\n            top: 9 * _this.dpr,\n            right: 4 * _this.dpr,\n            bottom: 9 * _this.dpr\n        });\n        _this.add(_this.bg);\n        var iconbg = _this.scene.make.image({ key: key2, frame: "icon_bg_s" });\n        iconbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        iconbg.setPosition(posx + iconbg.width * 0.5 + 3 * dpr, 0);\n        _this.add(iconbg);\n        _this.storeIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, iconbg.x, 0);\n        _this.add(_this.storeIcon);\n        var storeX = iconbg.x + iconbg.width * 0.5 + 10 * dpr;\n        _this.storeName = _this.scene.make.text({ x: storeX, y: posy + 10 * dpr, text: "Restaurant", style: { color: "#FFE11A", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.storeName);\n        _this.playerName = _this.scene.make.text({ x: storeX, y: _this.storeName.y + _this.storeName.height * 0.5 + 10 * dpr, text: "Savings: 13000", style: { color: "#ffffff", fontSize: 11 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.playerName);\n        _this.industryIcon = _this.scene.make.image({ key: _this.key2, frame: "entertainment_tag_s" });\n        _this.industryIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.industryIcon.x = _this.width * 0.5 - _this.industryIcon.width * 0.5;\n        _this.add(_this.industryIcon);\n        return _this;\n        // const praiseIcon = this.scene.make.image({ key: key2, frame: "praise" });\n        // praiseIcon.x = -posx - 80 * dpr;\n        // this.add(praiseIcon);\n        // this.praiseCount = this.scene.make.text({ x: praiseIcon.x + praiseIcon.width * 0.5 + 10 * dpr, y: praiseIcon.y, text: "66666666", style: { color: "#ffffff", fontSize: 12 * dpr, fontFamily: Font.DEFULT_FONT } }).setOrigin(0,0.5);\n        // this.add(this.praiseCount);\n    }\n    PicHistoryItem.prototype.setStoreData = function (data) {\n        this.storeData = data;\n        this.bg.setTexture(this.key2, data.industry + "_bg");\n        this.storeName.text = data.name;\n        this.playerName.text = data.ownerName;\n        this.storeIcon.setTexture(this.key2, data.storeType + "_icon_s");\n        this.industryIcon.setFrame(data.industry + "_tag_s");\n    };\n    return PicHistoryItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessStreet/PicaBusinessHistoryPanel.ts?')},"./src/pica/render/ui/PicaBusinessStreet/PicaBusinessMyStreetPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessMyStreetPanel", function() { return PicaBusinessMyStreetPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaBusinessMyStreetPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessMyStreetPanel, _super);\n    function PicaBusinessMyStreetPanel(scene, x, y, width, height, dpr, zoom, key) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.isCanNewCreate = false;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaBusinessMyStreetPanel.prototype.setMyStoreData = function (content) {\n        var datas = content.storeList;\n        this.storelimitText.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.store_limit") + ":" + (datas.length + "/" + content.storeLimit);\n        this.gridtable.setItems(datas);\n        this.isCanNewCreate = datas.length < content.storeLimit;\n    };\n    PicaBusinessMyStreetPanel.prototype.setHandler = function (takeAll, goOut, newStore, enter) {\n        this.takeAllHandler = takeAll;\n        this.goOutHandler = goOut;\n        this.newStoreHandler = newStore;\n        this.enterRoomHandler = enter;\n    };\n    PicaBusinessMyStreetPanel.prototype.resetMask = function () {\n        this.gridtable.resetMask();\n    };\n    PicaBusinessMyStreetPanel.prototype.create = function () {\n        var posy = -this.height * 0.5;\n        var posx = -this.width * 0.5;\n        var storebg = this.scene.make.image({ key: this.key, frame: "store_icon" });\n        storebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        storebg.x = posx + 30 * this.dpr;\n        storebg.y = posy + 6 * this.dpr;\n        this.add(storebg);\n        var storex = storebg.x + storebg.width * 0.5 + 10 * this.dpr;\n        var storeTitle = this.scene.make.text({ x: storex, y: storebg.y, text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.my_store"), style: { fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#FFC51A" } }).setOrigin(0, 0.5);\n        storeTitle.setStroke("#553100", 2 * this.dpr);\n        this.add(storeTitle);\n        var gridWdith = this.width;\n        var gridHeight = this.height - 68 * this.dpr;\n        var gridY = posy + 28 * this.dpr + gridHeight * 0.5;\n        this.gridtable = this.createGrideTable(0, gridY, gridWdith, gridHeight, 256 * this.dpr, 87 * this.dpr);\n        this.newStoreBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "new_store", "new_store");\n        var btnX = -posx - this.newStoreBtn.width * 0.5 - 20 * this.dpr;\n        this.newStoreBtn.setPosition(btnX, posy + 6 * this.dpr);\n        this.newStoreBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onNewStoreHandler, this);\n        this.add(this.newStoreBtn);\n        this.storelimitText = this.scene.make.text({ x: btnX - this.newStoreBtn.width * 0.5 - 10 * this.dpr, y: posy + 5 * this.dpr, text: "store limit", style: { color: "#0", fontSize: 12 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(1, 0.5);\n        this.add(this.storelimitText);\n        this.storeCountText = this.scene.make.text({ x: btnX + this.newStoreBtn.width * 0.5 + 20 * this.dpr, y: posy, text: "", style: { fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#FFC51A" } }).setOrigin(1, 0);\n        this.add(this.storeCountText);\n        var talkAllBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, -60 * this.dpr, this.height * 0.5 - 7 * this.dpr, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.takeall"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(talkAllBtn);\n        talkAllBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#ffffff" });\n        talkAllBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onTalkAllHandler, this);\n        var goOutBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 60 * this.dpr, talkAllBtn.y, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.goout"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(goOutBtn);\n        goOutBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onGoOutHandler, this);\n        goOutBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#996600" });\n    };\n    PicaBusinessMyStreetPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                tableOX: 19 * this.dpr,\n                zoom: this.zoom\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new MyStoreItem(_this.scene, 0, 0, capW, capH, _this.key, _this.dpr, _this.zoom);\n                    cellContainer.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](_this, _this.onEnterHandler));\n                    grid.add(cellContainer);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setStoreData(item);\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        this.add(grid);\n        return grid;\n    };\n    PicaBusinessMyStreetPanel.prototype.onEnterHandler = function (data) {\n        if (this.enterRoomHandler)\n            this.enterRoomHandler.runWith(data.roomId);\n    };\n    PicaBusinessMyStreetPanel.prototype.onTalkAllHandler = function () {\n        if (this.takeAllHandler)\n            this.takeAllHandler.run();\n    };\n    PicaBusinessMyStreetPanel.prototype.onGoOutHandler = function () {\n        if (this.goOutHandler)\n            this.goOutHandler.run();\n    };\n    PicaBusinessMyStreetPanel.prototype.onNewStoreHandler = function () {\n        if (!this.isCanNewCreate)\n            return;\n        if (this.newStoreHandler)\n            this.newStoreHandler.run();\n    };\n    return PicaBusinessMyStreetPanel;\n}(Phaser.GameObjects.Container));\n\nvar MyStoreItem = /** @class */ (function (_super) {\n    __extends(MyStoreItem, _super);\n    function MyStoreItem(scene, x, y, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.setSize(width, height);\n        var posx = -_this.width * 0.5;\n        var posy = -_this.height * 0.5;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, width, 80 * dpr, _this.key, "resturant_bg", {\n            left: 4 * _this.dpr,\n            top: 9 * _this.dpr,\n            right: 4 * _this.dpr,\n            bottom: 9 * _this.dpr\n        });\n        _this.add(_this.bg);\n        var iconbg = _this.scene.make.image({ key: key, frame: "store_icon_bg" });\n        iconbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        iconbg.setPosition(posx + iconbg.width * 0.5 + 10 * dpr, 0);\n        _this.add(iconbg);\n        _this.storeIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, iconbg.x, 0);\n        _this.add(_this.storeIcon);\n        var storeX = iconbg.x + iconbg.width * 0.5 + 10 * dpr;\n        _this.storeName = _this.scene.make.text({ x: storeX, y: posy + 5 * dpr, text: "Restaurant", style: { color: "#FFE11A", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.storeName);\n        _this.lvimgCon = _this.scene.make.container(undefined, false);\n        _this.lvimgCon.height = 14 * dpr;\n        _this.lvimgCon.setPosition(storeX + 6 * dpr, _this.storeName.y + _this.storeName.height + _this.lvimgCon.height * 0.5 + 2 * dpr);\n        _this.add(_this.lvimgCon);\n        _this.savings = _this.scene.make.text({ x: storeX, y: _this.lvimgCon.y + _this.lvimgCon.height * 0.5 + 2 * dpr, text: "Savings: 13000", style: { color: "#ffffff", fontSize: 10 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.savings);\n        _this.competitiveness = _this.scene.make.text({ x: storeX, y: _this.savings.y + _this.savings.height + 2 * dpr, text: "Competitiveness: 13000", style: { color: "#ffffff", fontSize: 10 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.competitiveness);\n        _this.turnover = _this.scene.make.text({ x: storeX, y: _this.competitiveness.y + _this.competitiveness.height + 2 * dpr, text: "Prosperity: +13000 / Day", style: { color: "#ffffff", fontSize: 10 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.turnover);\n        _this.industryIcon = _this.scene.make.image({ key: _this.key, frame: "entertainment_tag" });\n        _this.industryIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.industryIcon.x = _this.width * 0.5 - _this.industryIcon.width * 0.5;\n        _this.add(_this.industryIcon);\n        var enterBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](scene, -posx, 0, 48 * dpr, 27 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "yellow_btn_normal_s", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.enter"), _this.dpr, zoom, {\n            left: 10 * _this.dpr,\n            top: 10 * _this.dpr,\n            right: 10 * _this.dpr,\n            bottom: 10 * _this.dpr\n        });\n        enterBtn.setTextStyle({ fontSize: 10 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#996600" });\n        enterBtn.x = -posx - enterBtn.width * 0.5 - 10 * dpr;\n        enterBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), _this.onEnterHandler, _this);\n        _this.add(enterBtn);\n        return _this;\n    }\n    MyStoreItem.prototype.setStoreData = function (data) {\n        var industry = data.industry;\n        var storeType = data.storeType;\n        this.bg.setFrame(industry + "_bg");\n        this.storeIcon.setTexture(this.key, storeType + "_icon");\n        this.storeName.text = data.name;\n        this.lvimgCon.removeAll(true);\n        this.setImageInfo(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, this.getLevelImgs(data.roomLevel.level));\n        this.savings.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.savings") + ":" + data.savings + "";\n        this.competitiveness.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.competitiveness") + ":" + data.competitiveness;\n        this.turnover.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.turnover") + ":" + data.turnover;\n        this.industryIcon.setFrame(industry + "_tag");\n        this.storeData = data;\n    };\n    MyStoreItem.prototype.setHandler = function (handler) {\n        this.enterHandler = handler;\n    };\n    MyStoreItem.prototype.setImageInfo = function (key, imgs) {\n        var posX = 0;\n        var space = 15 * this.dpr;\n        for (var _i = 0, imgs_1 = imgs; _i < imgs_1.length; _i++) {\n            var frame = imgs_1[_i];\n            var image = this.scene.make.image({ key: key, frame: frame });\n            image.x = posX;\n            posX += image.width * 0.5 + space;\n            this.lvimgCon.add(image);\n        }\n    };\n    MyStoreItem.prototype.onEnterHandler = function () {\n        if (this.enterHandler)\n            this.enterHandler.runWith(this.storeData);\n    };\n    MyStoreItem.prototype.getLevelImgs = function (level) {\n        var power = 4;\n        level = level ? level : 0;\n        var imgs = [];\n        var bearNum = Math.floor(level / Math.pow(power, 3));\n        var value0 = level % Math.pow(power, 3);\n        var sunNum = Math.floor(value0 / Math.pow(power, 2));\n        var value1 = value0 % Math.pow(power, 2);\n        var moon = Math.floor((value1) / Math.pow(power, 1));\n        var value2 = value1 % Math.pow(power, 1);\n        var star = value2;\n        for (var i = 0; i < bearNum; i++) {\n            imgs.push("bear");\n        }\n        for (var i = 0; i < sunNum; i++) {\n            imgs.push("sun");\n        }\n        for (var i = 0; i < moon; i++) {\n            imgs.push("moon");\n        }\n        for (var i = 0; i < star; i++) {\n            imgs.push("star");\n        }\n        if (level === 0)\n            imgs.push("star");\n        return imgs;\n    };\n    return MyStoreItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessStreet/PicaBusinessMyStreetPanel.ts?')},"./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankRewardPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessRankRewardPanel", function() { return PicaBusinessRankRewardPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaBusinessRankRewardPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessRankRewardPanel, _super);\n    function PicaBusinessRankRewardPanel(scene, x, y, width, height, dpr, zoom, key, key2) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaBusinessRankRewardPanel.prototype.setRankRewardData = function (datas) {\n        this.gridtable.setItems(datas);\n    };\n    PicaBusinessRankRewardPanel.prototype.setHandler = function (back) {\n        this.backHandler = back;\n    };\n    PicaBusinessRankRewardPanel.prototype.resetMask = function () {\n        this.gridtable.resetMask();\n    };\n    PicaBusinessRankRewardPanel.prototype.create = function () {\n        var posy = -this.height * 0.5;\n        var gridWdith = this.width - 20 * this.dpr;\n        var gridHeight = this.height - 70 * this.dpr;\n        var gridY = posy + 23 * this.dpr + gridHeight * 0.5;\n        this.gridtable = this.createGrideTable(-5 * this.dpr, gridY, gridWdith, gridHeight, 256 * this.dpr, 80 * this.dpr);\n        var backBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, this.height * 0.5 - 7 * this.dpr, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.back"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(backBtn);\n        backBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#ffffff" });\n        backBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onBackHandler, this);\n    };\n    PicaBusinessRankRewardPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                tableOX: 19 * this.dpr,\n                zoom: this.zoom\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new PicRankRewardItem(_this.scene, 0, 0, capW, capH, _this.key, _this.key2, _this.dpr, _this.zoom);\n                    grid.add(cellContainer);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setRankRewardData(item);\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        this.add(grid);\n        return grid;\n    };\n    PicaBusinessRankRewardPanel.prototype.onBackHandler = function () {\n        if (this.backHandler)\n            this.backHandler.run();\n    };\n    return PicaBusinessRankRewardPanel;\n}(Phaser.GameObjects.Container));\n\nvar PicRankRewardItem = /** @class */ (function (_super) {\n    __extends(PicRankRewardItem, _super);\n    function PicRankRewardItem(scene, x, y, width, height, key, key2, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.rewardItems = [];\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.setSize(width, height);\n        var bg = _this.scene.make.image({ key: _this.key2, frame: "reward_bg" });\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.add(bg);\n        _this.rankIcon = _this.scene.make.image({ key: key2, frame: "1" });\n        _this.rankIcon.x = -width * 0.5 + _this.rankIcon.width * 0.5 + 10 * dpr;\n        _this.add(_this.rankIcon);\n        var storeX = _this.rankIcon.x;\n        _this.rankText = _this.scene.make.text({ x: storeX, y: 0, text: "3", style: { color: "#0", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        _this.add(_this.rankText);\n        return _this;\n    }\n    PicRankRewardItem.prototype.setRankRewardData = function (data) {\n        if (this.rewardData === data)\n            return;\n        if (data.start === data.end) {\n            this.rankIcon.visible = true;\n            this.rankText.visible = false;\n            this.rankIcon.setFrame(data.start + "");\n        }\n        else {\n            this.rankIcon.visible = false;\n            this.rankText.visible = true;\n            this.rankText.text = data.start + "~" + data.end;\n        }\n        for (var _i = 0, _a = this.rewardItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n        }\n        for (var i = 0; i < data.rewards.length; i++) {\n            var item = void 0;\n            if (i < this.rewardItems.length) {\n                item = this.rewardItems[i];\n            }\n            else {\n                item = new RewardItem(this.scene, 0, 0, 50 * this.dpr, 50 * this.dpr, this.key2, this.dpr, this.zoom);\n                this.add(item);\n                this.rewardItems.push(item);\n            }\n            item.visible = true;\n            item.setRewardData(data.rewards[i]);\n        }\n        this.Sort();\n        this.rewardData = data;\n    };\n    PicRankRewardItem.prototype.Sort = function () {\n        var space = 10 * this.dpr;\n        var value = -50 * this.dpr;\n        for (var _i = 0, _a = this.rewardItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.x = item.width * item.originX + value;\n            value += item.width + space;\n        }\n    };\n    return PicRankRewardItem;\n}(Phaser.GameObjects.Container));\nvar RewardItem = /** @class */ (function (_super) {\n    __extends(RewardItem, _super);\n    function RewardItem(scene, x, y, width, height, key2, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key2 = key2;\n        _this.setSize(width, height);\n        var bg = _this.scene.make.image({ key: _this.key2, frame: "icon_bg_m" });\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.add(bg);\n        _this.itemIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, 0, 0);\n        _this.add(_this.itemIcon);\n        _this.countText = _this.scene.make.text({ x: bg.width * 0.5, y: bg.height * 0.5, text: "4~10", style: { color: "#0", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(1, 0.5);\n        _this.add(_this.countText);\n        return _this;\n    }\n    RewardItem.prototype.setRewardData = function (data) {\n        var _this = this;\n        var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(data.texturePath);\n        this.itemIcon.load(url, this, function () {\n            _this.itemIcon.displayWidth = 43 * _this.dpr;\n            _this.itemIcon.scaleY = _this.itemIcon.scaleX;\n        });\n        this.countText.text = data.count + "";\n    };\n    return RewardItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankRewardPanel.ts?')},"./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingDetailPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessRankingDetailPanel", function() { return PicaBusinessRankingDetailPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaBusinessRankingDetailPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessRankingDetailPanel, _super);\n    function PicaBusinessRankingDetailPanel(scene, x, y, width, height, dpr, zoom, key, key2) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaBusinessRankingDetailPanel.prototype.setRankingDetailData = function (content) {\n        this.content = content;\n        var arr = content.stores;\n        this.gridtable.setItems(arr);\n        if (content.playerStore) {\n            this.myRankItem.visible = true;\n            this.myitembg.visible = true;\n            this.myRankItem.setDetailData(content.playerStore);\n            var posy = -this.height * 0.5;\n            var gridWdith = this.width;\n            var gridHeight = this.height - 125 * this.dpr;\n            var gridY = posy + 30 * this.dpr + gridHeight * 0.5;\n            this.gridtable.y = gridY;\n            this.gridtable.setSize(gridWdith, gridHeight);\n        }\n        else {\n            this.myitembg.visible = false;\n            this.myRankItem.visible = false;\n            var posy = -this.height * 0.5;\n            var gridWdith = this.width;\n            var gridHeight = this.height - 100 * this.dpr;\n            var gridY = posy + 30 * this.dpr + gridHeight * 0.5;\n            this.gridtable.y = gridY;\n            this.gridtable.setSize(gridWdith, gridHeight);\n        }\n        // this.timeText.text = "6 DAY 23:24:16";\n    };\n    PicaBusinessRankingDetailPanel.prototype.setHandler = function (back, reward) {\n        this.backHandler = back;\n        this.rankRewardHandler = reward;\n    };\n    PicaBusinessRankingDetailPanel.prototype.resetMask = function () {\n        this.gridtable.resetMask();\n    };\n    PicaBusinessRankingDetailPanel.prototype.create = function () {\n        var posy = -this.height * 0.5;\n        var posx = -this.width * 0.5;\n        this.timeText = this.scene.make.text({ x: 0, y: posy + 6 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("6 DAY 23:24:16"), style: { fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#D9270F" } }).setOrigin(0.5);\n        this.timeText.setStroke("#553100", 2 * this.dpr);\n        this.add(this.timeText);\n        this.timeText.visible = false;\n        var rankRewardBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, this.timeText.y, 60 * this.dpr, 26 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "yellow_btn_normal_s", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.rank_reward"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 6 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 6 * this.dpr\n        });\n        rankRewardBtn.x = -posx - rankRewardBtn.width * 0.5 - 30 * this.dpr;\n        rankRewardBtn.setTextStyle({ fontSize: 10 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#996600" });\n        rankRewardBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onRankRewardHandler, this);\n        this.add(rankRewardBtn);\n        var gridWdith = this.width;\n        var gridHeight = this.height - 125 * this.dpr;\n        var gridY = posy + 30 * this.dpr + gridHeight * 0.5;\n        this.gridtable = this.createGrideTable(0, gridY, gridWdith, gridHeight, 256 * this.dpr, 50 * this.dpr);\n        this.myitembg = this.scene.make.image({ key: this.key2, frame: "my_rank_bg" });\n        this.myitembg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.myitembg.y = gridY + gridHeight * 0.5 + this.myitembg.height * 0.5 - 3 * this.dpr;\n        this.add(this.myitembg);\n        this.myRankItem = new PicRankingDetailItem(this.scene, 0, this.myitembg.y + 5 * this.dpr, 256 * this.dpr, 50 * this.dpr, this.key, this.key2, this.dpr, this.zoom);\n        this.add(this.myRankItem);\n        var backBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, this.height * 0.5 - 7 * this.dpr, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.back"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(backBtn);\n        backBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#ffffff" });\n        backBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onBackHandler, this);\n    };\n    PicaBusinessRankingDetailPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                tableOX: 19 * this.dpr,\n                zoom: this.zoom\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new PicRankingDetailItem(_this.scene, 0, 0, capW, capH, _this.key, _this.key2, _this.dpr, _this.zoom);\n                    grid.add(cellContainer);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setDetailData(item);\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        this.add(grid);\n        return grid;\n    };\n    PicaBusinessRankingDetailPanel.prototype.onBackHandler = function () {\n        if (this.backHandler)\n            this.backHandler.run();\n        this.content = undefined;\n    };\n    PicaBusinessRankingDetailPanel.prototype.onRankRewardHandler = function () {\n        if (this.rankRewardHandler) {\n            if (this.content) {\n                this.rankRewardHandler.runWith([this.content.key, this.content.type]);\n            }\n        }\n    };\n    return PicaBusinessRankingDetailPanel;\n}(Phaser.GameObjects.Container));\n\nvar PicRankingDetailItem = /** @class */ (function (_super) {\n    __extends(PicRankingDetailItem, _super);\n    function PicRankingDetailItem(scene, x, y, width, height, key, key2, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.setSize(width, height);\n        var posx = -_this.width * 0.5;\n        var posy = -_this.height * 0.5;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, width, 45 * dpr, _this.key, "restaurant_bg", {\n            left: 4 * _this.dpr,\n            top: 9 * _this.dpr,\n            right: 4 * _this.dpr,\n            bottom: 9 * _this.dpr\n        });\n        _this.add(_this.bg);\n        var iconbg = _this.scene.make.image({ key: key2, frame: "icon_bg_s" });\n        iconbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        iconbg.setPosition(posx + iconbg.width * 0.5 + 3 * dpr, 0);\n        _this.add(iconbg);\n        _this.storeIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, iconbg.x, 0);\n        _this.add(_this.storeIcon);\n        var storeX = iconbg.x + iconbg.width * 0.5 + 10 * dpr;\n        _this.storeName = _this.scene.make.text({ x: storeX, y: posy + 10 * dpr, text: "Restaurant", style: { color: "#FFE11A", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.storeName);\n        _this.playerName = _this.scene.make.text({ x: storeX, y: _this.storeName.y + _this.storeName.height * 0.5 + 10 * dpr, text: "Savings: 13000", style: { color: "#ffffff", fontSize: 11 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.playerName);\n        _this.industryIcon = _this.scene.make.image({ key: _this.key2, frame: "restaurant_tag_s" });\n        _this.industryIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.industryIcon.x = _this.width * 0.5 - _this.industryIcon.width * 0.5;\n        _this.add(_this.industryIcon);\n        _this.rankIcon = _this.scene.make.image({ key: key2, frame: "1" });\n        _this.rankIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.rankIcon.x = -posx - 80 * dpr;\n        _this.add(_this.rankIcon);\n        _this.rankText = _this.scene.make.text({ x: storeX, y: 0, text: "Restaurant", style: { color: "#ffffff", fontSize: 18 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        _this.rankText.x = _this.rankIcon.x;\n        _this.add(_this.rankText);\n        _this.praiseCount = _this.scene.make.text({ x: _this.rankIcon.x + _this.rankIcon.width * 0.5 + 10 * dpr, y: _this.rankIcon.y, text: "66666666", style: { color: "#ffffff", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        _this.add(_this.praiseCount);\n        return _this;\n    }\n    PicRankingDetailItem.prototype.setDetailData = function (data) {\n        this.detailData = data;\n        this.storeName.text = data.name;\n        this.playerName.text = data.ownerName;\n        if (data.index < 4 && data.index > 0) {\n            this.rankIcon.visible = true;\n            this.rankText.visible = false;\n            this.rankIcon.setFrame(data.index + "");\n        }\n        else {\n            this.rankIcon.visible = false;\n            this.rankText.visible = true;\n            if (data.index <= 0) {\n                this.rankText.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("business_street.onrank");\n            }\n            else {\n                this.rankText.text = data.index + "";\n            }\n        }\n        this.praiseCount.text = data.value + "";\n        this.storeIcon.setTexture(this.key2, data.storeType + "_icon_s");\n        this.bg.setFrame(data.industryType + "_bg");\n        this.industryIcon.setFrame(data.industryType + "_tag_s");\n    };\n    return PicRankingDetailItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingDetailPanel.ts?')},"./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessRankingPanel", function() { return PicaBusinessRankingPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaBusinessRankingPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessRankingPanel, _super);\n    function PicaBusinessRankingPanel(scene, x, y, width, height, dpr, zoom, key, key2) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.boundOffset = 85;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaBusinessRankingPanel.prototype.create = function () {\n        var _this = this;\n        var posy = -this.height * 0.5;\n        var posx = -this.width * 0.5;\n        var titleText = this.scene.make.text({ x: 0, y: posy + 20 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.ranking_list"), style: { fontSize: 18 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#FFC51A" } }).setOrigin(0.5);\n        titleText.setStroke("#553100", 2 * this.dpr);\n        this.add(titleText);\n        this.titleText = titleText;\n        var titleLine = this.scene.make.image({ x: 0, y: titleText.y + titleText.height * 0.5 + 10 * this.dpr, key: this.key2, frame: "title" });\n        titleLine.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.add(titleLine);\n        var scrollwidth = this.width - 28 * this.dpr;\n        var scrollHeight = this.height - 80 * this.dpr;\n        var scrollY = posy + 33 * this.dpr + scrollHeight * 0.5;\n        this.gameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: 0,\n            y: 0,\n            width: scrollwidth,\n            height: scrollHeight,\n            zoom: this.zoom,\n            dpr: this.dpr,\n            align: 2,\n            orientation: 1,\n            space: 20 * this.dpr,\n            valuechangeCallback: function (value) {\n                _this.onScrollValueChange(value);\n            },\n            cellupCallBack: function (gameobject) {\n                _this.onScrollClickHandler(gameobject);\n            }\n        });\n        this.add(this.gameScroll);\n        var backBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, this.height * 0.5 - 7 * this.dpr, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.back"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(backBtn);\n        backBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#ffffff" });\n        backBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onBackHandler, this);\n    };\n    PicaBusinessRankingPanel.prototype.setRankingData = function (datas) {\n        var item0 = this.scene.make.container(undefined, false);\n        this.boundOffset = 35 * this.dpr;\n        item0.setSize(this.boundOffset, 185 * this.dpr);\n        this.gameScroll.clearItems();\n        this.gameScroll.addItem(item0);\n        for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {\n            var data = datas_1[_i];\n            var item = new PicRankingItem(this.scene, 0, 0, 133 * this.dpr, 185 * this.dpr, this.key, this.key2, this.dpr, this.zoom);\n            item.setRankData(data);\n            this.gameScroll.addItem(item);\n        }\n        var item1 = this.scene.make.container(undefined, false);\n        item1.setSize(this.boundOffset, 185 * this.dpr);\n        this.gameScroll.addItem(item1);\n        this.gameScroll.Sort();\n        this.gameScroll.refreshMask();\n        this.gameScroll.setValue(this.gameScroll.bounds[1]);\n    };\n    PicaBusinessRankingPanel.prototype.setHandler = function (back, rank) {\n        this.backHandler = back;\n        this.rankHandler = rank;\n    };\n    PicaBusinessRankingPanel.prototype.resetMask = function () {\n        this.gameScroll.refreshMask();\n    };\n    PicaBusinessRankingPanel.prototype.show = function () {\n        this.addListen();\n        this.visible = true;\n    };\n    PicaBusinessRankingPanel.prototype.hide = function () {\n        this.removeListen();\n    };\n    PicaBusinessRankingPanel.prototype.onScrollValueChange = function (value) {\n        if (this.gameScroll) {\n            var cellWidth = 133 * this.dpr;\n            var tempRadus = (this.gameScroll.width - cellWidth) * 0.25;\n            var items = this.gameScroll.getItemList();\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                var item = items_1[_i];\n                var dis = Math.abs(item.getWorldTransformMatrix().tx - this.getWorldTransformMatrix().tx) - cellWidth * 0.25;\n                if (dis < 0)\n                    dis = 0;\n                var radio = 1 - Math.abs(dis) / tempRadus;\n                if (item instanceof PicRankingItem)\n                    item.setRadio(radio);\n            }\n            this.gameScroll.Sort(true, false);\n        }\n    };\n    PicaBusinessRankingPanel.prototype.onScrollUpHandler = function () {\n        var _this = this;\n        if (this.gameScroll) {\n            var value_1 = this.gameScroll.getValue();\n            var rightBound = this.gameScroll.bounds[1];\n            var interValue = rightBound - value_1;\n            var index = Math.floor((interValue + 66 * this.dpr) / (133 * this.dpr + 20 * this.dpr));\n            var allLen = this.gameScroll.getItemList().length;\n            if (index >= 0 && index < allLen - 1) {\n                var item = this.gameScroll.getItemAt(index + 1);\n                var dis = item.getWorldTransformMatrix().tx - this.getWorldTransformMatrix().tx;\n                dis *= this.scale;\n                if (dis < 0) {\n                    var max_1 = Math.abs(dis) + value_1;\n                    this.timerID = setInterval(function () {\n                        value_1 += 10 * _this.dpr;\n                        _this.gameScroll.setValue(value_1);\n                        if (value_1 >= max_1) {\n                            _this.gameScroll.setValue(max_1);\n                            clearInterval(_this.timerID);\n                            _this.timerID = undefined;\n                        }\n                    }, 20);\n                }\n                else {\n                    var mix_1 = value_1 - Math.abs(dis);\n                    this.timerID = setInterval(function () {\n                        value_1 -= 10 * _this.dpr;\n                        _this.gameScroll.setValue(value_1);\n                        if (value_1 <= mix_1) {\n                            _this.gameScroll.setValue(mix_1);\n                            clearInterval(_this.timerID);\n                            _this.timerID = undefined;\n                        }\n                    }, 20);\n                }\n            }\n            this.gameScroll.Sort(true, false);\n        }\n    };\n    PicaBusinessRankingPanel.prototype.onScrollClickHandler = function (obj) {\n        if (this.timerID) {\n            clearInterval(this.timerID);\n            this.timerID = undefined;\n        }\n        if (this.rankHandler) {\n            var data = obj.rankData;\n            this.rankHandler.runWith([data.key, data.type]);\n        }\n    };\n    PicaBusinessRankingPanel.prototype.onBackHandler = function () {\n        if (this.backHandler)\n            this.backHandler.run();\n        this.gameScroll.clearItems();\n    };\n    PicaBusinessRankingPanel.prototype.addListen = function () {\n        if (!this.scene)\n            return;\n        this.removeListen();\n        this.scene.input.on("pointerdown", this.pointerDownHandler, this);\n        this.scene.input.on("pointerup", this.pointerUpHandler, this);\n    };\n    PicaBusinessRankingPanel.prototype.removeListen = function () {\n        if (!this.scene)\n            return;\n        this.scene.input.off("pointerdown", this.pointerDownHandler, this);\n        this.scene.input.off("pointerup", this.pointerUpHandler, this);\n    };\n    PicaBusinessRankingPanel.prototype.pointerDownHandler = function (pointer) {\n        if (this.checkPointerInBounds(this.gameScroll, pointer)) {\n            if (this.timerID) {\n                clearInterval(this.timerID);\n                this.timerID = undefined;\n            }\n            if (this.moveTimerID) {\n                clearInterval(this.moveTimerID);\n                this.moveTimerID = undefined;\n            }\n        }\n    };\n    PicaBusinessRankingPanel.prototype.pointerUpHandler = function (pointer) {\n        var _this = this;\n        if (this.checkPointerInBounds(this.gameScroll, pointer)) {\n            setTimeout(function () {\n                if (!_this.gameScroll.isSliding)\n                    _this.onScrollUpHandler();\n                else {\n                    _this.moveTimerID = setInterval(function () {\n                        if (!_this.gameScroll.isSliding) {\n                            _this.onScrollUpHandler();\n                            clearInterval(_this.moveTimerID);\n                            _this.moveTimerID = undefined;\n                        }\n                    }, 20);\n                }\n            }, 20);\n        }\n    };\n    PicaBusinessRankingPanel.prototype.checkPointerInBounds = function (gameObject, pointer) {\n        if (!this.mRectangle) {\n            this.mRectangle = new Phaser.Geom.Rectangle(0, 0, 0, 0);\n        }\n        this.mRectangle.left = -gameObject.width / 2;\n        this.mRectangle.right = gameObject.width / 2;\n        this.mRectangle.top = -gameObject.height / 2;\n        this.mRectangle.bottom = gameObject.height / 2;\n        if (pointer) {\n            var worldMatrix = gameObject.getWorldTransformMatrix();\n            var x = pointer.x - worldMatrix.tx;\n            var y = pointer.y - worldMatrix.ty;\n            if (this.mRectangle.left <= x && this.mRectangle.right >= x && this.mRectangle.top <= y && this.mRectangle.bottom >= y) {\n                return true;\n            }\n            return false;\n        }\n        return false;\n    };\n    return PicaBusinessRankingPanel;\n}(Phaser.GameObjects.Container));\n\nvar PicRankingItem = /** @class */ (function (_super) {\n    __extends(PicRankingItem, _super);\n    function PicRankingItem(scene, x, y, width, height, key, key2, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.radio = 0;\n        _this.imgtype = 1; //  1   2  \n        _this.dpr = dpr;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.setSize(width, height);\n        var posx = -_this.width * 0.5;\n        var posy = -_this.height * 0.5;\n        _this.bg = _this.scene.make.image({ key: _this.key2, frame: "restaurant_rank_bg_s" });\n        _this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.add(_this.bg);\n        _this.titleText = _this.scene.make.text({ x: 0, y: posy, text: "Restaurant", style: { color: "#0555AF", fontSize: 14 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        _this.add(_this.titleText);\n        _this.storebg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, 72 * dpr, 17 * dpr, _this.key2, "store_name_bg_s", {\n            left: 8 * _this.dpr,\n            top: 0 * _this.dpr,\n            right: 8 * _this.dpr,\n            bottom: 0 * _this.dpr\n        });\n        _this.storebg.y = _this.titleText.y + 10 * dpr;\n        _this.add(_this.storebg);\n        _this.storeName = _this.scene.make.text({ x: 0, y: _this.storebg.y, text: "Restaurant", style: { color: "#0", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        _this.add(_this.storeName);\n        _this.storeIcon = _this.scene.make.image({ key: _this.key2, frame: "restaurant_rank_icon_s" });\n        _this.storeIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.storeIcon.y = -posy - _this.storeIcon.height * 0.5 - 5 * dpr;\n        _this.add(_this.storeIcon);\n        return _this;\n    }\n    PicRankingItem.prototype.setRankData = function (data) {\n        this.rankData = data;\n        this.titleText.text = data.name;\n        this.storeName.text = data.champion;\n        this.switchImage(1);\n    };\n    PicRankingItem.prototype.setRadio = function (radio) {\n        var type = 1;\n        if (radio > 1)\n            radio = 1;\n        if (radio > 0) {\n            type = 2;\n        }\n        if (this.imgtype !== type) {\n            this.switchImage(type);\n            this.imgtype = type;\n        }\n        if (type === 2) {\n            this.scale = 1 / this.radio + radio * (1 - 1 / this.radio);\n        }\n        else {\n            this.scale = 1;\n        }\n        this.width = this.bg.displayWidth * this.scale;\n        this.height = this.bg.displayHeight * this.scale;\n    };\n    /**\n     * @param type  1   2  \n     */\n    PicRankingItem.prototype.switchImage = function (type) {\n        var imgname = this.rankData.type;\n        var bgres, titleFont, storebgres, storebgwidth, storebgheight, storefont, storeiconres, ratio;\n        var smallWidth = 133 * this.dpr;\n        var curWidth = 133 * this.dpr;\n        if (type === 1) {\n            bgres = imgname + "_rank_bg_s";\n            titleFont = 14 * this.dpr;\n            storebgres = "store_name_bg_s";\n            storebgwidth = 72 * this.dpr;\n            storebgheight = 14 * this.dpr;\n            storefont = 10 * this.dpr;\n            storeiconres = imgname + "_rank_icon_s";\n            curWidth = 133 * this.dpr;\n            this.storebg.setConfig({\n                left: 8 * this.dpr,\n                top: 0 * this.dpr,\n                right: 8 * this.dpr,\n                bottom: 0 * this.dpr\n            });\n        }\n        else {\n            bgres = imgname + "_rank_bg_m";\n            titleFont = 18 * this.dpr;\n            storebgres = "store_name_bg_m";\n            storebgwidth = 88 * this.dpr;\n            storebgheight = 17 * this.dpr;\n            storefont = 12 * this.dpr;\n            storeiconres = imgname + "_rank_icon_m";\n            curWidth = 163 * this.dpr;\n            this.storebg.setConfig({\n                left: 11 * this.dpr,\n                top: 0 * this.dpr,\n                right: 11 * this.dpr,\n                bottom: 0 * this.dpr\n            });\n        }\n        ratio = curWidth / smallWidth;\n        this.radio = ratio;\n        this.bg.setFrame(bgres);\n        this.titleText.setFontSize(titleFont);\n        this.storebg.setFrame(storebgres);\n        this.storebg.resize(storebgwidth, storebgheight);\n        this.storeName.setFontSize(storefont);\n        this.storeIcon.setFrame(storeiconres);\n        this.setSize(this.bg.width, this.bg.height);\n        this.titleText.y = -this.height * 0.5 + this.titleText.height * 0.5 + 10 * this.dpr * ratio;\n        this.storebg.y = this.titleText.y + this.titleText.height * 0.5 + 10 * this.dpr * ratio;\n        this.storeName.y = this.storebg.y;\n        this.storeIcon.y = this.height * 0.5 - this.storeIcon.height * 0.5 - 10 * this.dpr * ratio;\n    };\n    return PicRankingItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingPanel.ts?')},"./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStoreCreatePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessStoreCreatePanel", function() { return PicaBusinessStoreCreatePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaBusinessStoreCreatePanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessStoreCreatePanel, _super);\n    function PicaBusinessStoreCreatePanel(scene, x, y, width, height, dpr, zoom, key, isfirst) {\n        if (isfirst === void 0) { isfirst = true; }\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.isFirst = true;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.isFirst = isfirst;\n        _this.create();\n        return _this;\n    }\n    PicaBusinessStoreCreatePanel.prototype.setTypeData = function (datas) {\n        if (datas instanceof Array) {\n            this.gridtable.setItems(datas);\n        }\n        else\n            this.gridtable.setItems(datas.roomModels);\n        var cells = this.gridtable.getCells();\n        var cell = cells[0];\n        if (cell && cell.container) {\n            this.onGridSelectHandler(cell.container);\n        }\n        this.gridtable.setT(0);\n    };\n    PicaBusinessStoreCreatePanel.prototype.setTypeInfo = function (data) {\n        this.curSelectData = data;\n        if ("industryType" in data) { // data instanceof op_pkt_def.PKT_INDUSTRY\n            this.recommendedText.text = data.state;\n            this.describleText.text = data.des;\n            this.turnoverText.setText(data.buffDes);\n        }\n        else {\n            var storeData = data;\n            if (storeData.price) {\n                this.coinImg.setFrame(utils__WEBPACK_IMPORTED_MODULE_2__["Coin"].getIcon(storeData.price.coinType));\n                this.coinCount.text = storeData.price.price + "";\n            }\n            this.describleText2.text = storeData.des;\n        }\n    };\n    PicaBusinessStoreCreatePanel.prototype.setHandler = function (cancel, select) {\n        this.cancelHandler = cancel;\n        this.selectHandler = select;\n    };\n    PicaBusinessStoreCreatePanel.prototype.resetMask = function () {\n        this.gridtable.resetMask();\n    };\n    PicaBusinessStoreCreatePanel.prototype.create = function () {\n        var posy = -this.height * 0.5;\n        var titlebg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, 135 * this.dpr, 17 * this.dpr, this.key, "subtitle", {\n            left: 13 * this.dpr,\n            top: 0 * this.dpr,\n            right: 13 * this.dpr,\n            bottom: 0 * this.dpr\n        });\n        titlebg.x = 0;\n        titlebg.y = posy + 10 * this.dpr;\n        this.add(titlebg);\n        var title = this.scene.make.text({ x: 0, y: titlebg.y, text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.choosetheindustry"), style: { fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#0" } }).setOrigin(0.5);\n        this.add(title);\n        var gridWdith = this.width - 24 * this.dpr;\n        var gridHeight = 100 * this.dpr;\n        var gridY = -50 * this.dpr;\n        this.gridtable = this.createGrideTable(0, gridY, gridWdith, gridHeight, 90 * this.dpr, 100 * this.dpr);\n        if (this.isFirst) {\n            this.recommendedText = this.scene.make.text({ x: 0, y: 20 * this.dpr, text: "Recommended", style: { fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#697AFF" } }).setOrigin(0.5, 0);\n            this.recommendedText.setFontStyle("bold");\n            this.add(this.recommendedText);\n            this.describleText = this.scene.make.text({ x: 0, y: this.recommendedText.y + this.recommendedText.height + 10 * this.dpr, text: "This industry has great development potential.", style: { fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#0" } }).setOrigin(0.5, 0);\n            this.add(this.describleText);\n            this.turnoverText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, 0, this.describleText.y + this.describleText.height + 10 * this.dpr)\n                .setOrigin(0.5, 0).setFontSize(11 * this.dpr).setFontFamily(utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT).setColor("#0");\n            this.add(this.turnoverText);\n            title.text = utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.choosetheindustry");\n            titlebg.resize(135 * this.dpr, 17 * this.dpr);\n        }\n        else {\n            this.coinBg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, frame: "price_bg" });\n            this.coinBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n            this.coinBg.y = 30 * this.dpr;\n            this.add(this.coinBg);\n            this.coinImg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, frame: "iv_coin" });\n            this.coinImg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n            this.coinImg.setPosition(this.coinBg.x - this.coinImg.width * 0.5 - 15 * this.dpr, this.coinBg.y);\n            this.add(this.coinImg);\n            this.coinCount = this.scene.make.text({ x: this.coinImg.x + this.coinImg.width * 0.5 + 10 * this.dpr, y: this.coinImg.y, text: "0", style: { fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#0" } }).setOrigin(0, 0.5);\n            this.add(this.coinCount);\n            this.describleText2 = this.scene.make.text({\n                x: 0, y: this.coinCount.y + 50 * this.dpr,\n                text: "55225sadffqwerqwerqwer",\n                style: {\n                    fontSize: 10 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#0",\n                    wordWrap: {\n                        width: 244 * this.dpr,\n                        useAdvancedWrap: true\n                    }\n                }\n            }).setOrigin(0.5);\n            this.add(this.describleText2);\n            title.text = utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.choosestorelike");\n            titlebg.resize(155 * this.dpr, 17 * this.dpr);\n        }\n        var cancelBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, -60 * this.dpr, this.height * 0.5 - 7 * this.dpr, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.cancel"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(cancelBtn);\n        cancelBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#ffffff" });\n        cancelBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onCancelHandler, this);\n        var selectBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 60 * this.dpr, cancelBtn.y, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.select"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(selectBtn);\n        selectBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onSelectHandler, this);\n        selectBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#996600" });\n    };\n    PicaBusinessStoreCreatePanel.prototype.createGrideTable = function (x, y, width, height, capW, capH) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                tableOY: 5 * this.dpr,\n                zoom: this.zoom\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new StoreTypeItem(_this.scene, 0, 0, capW, capH, _this.key, _this.dpr, _this.zoom);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setStoreData(item);\n                if (_this.curSelectData && item === _this.curSelectData) {\n                    cellContainer.select = true;\n                }\n                else\n                    cellContainer.select = false;\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        grid.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onGridSelectHandler(cell);\n            }\n        });\n        this.add(grid);\n        return grid;\n    };\n    PicaBusinessStoreCreatePanel.prototype.onGridSelectHandler = function (cell) {\n        this.setTypeInfo(cell.storeData);\n        if (this.curSelectItem)\n            this.curSelectItem.select = false;\n        cell.select = true;\n        this.curSelectItem = cell;\n    };\n    PicaBusinessStoreCreatePanel.prototype.onCancelHandler = function () {\n        if (this.cancelHandler)\n            this.cancelHandler.run();\n    };\n    PicaBusinessStoreCreatePanel.prototype.onSelectHandler = function () {\n        if (this.selectHandler)\n            this.selectHandler.runWith(this.curSelectData);\n    };\n    return PicaBusinessStoreCreatePanel;\n}(Phaser.GameObjects.Container));\n\nvar StoreTypeItem = /** @class */ (function (_super) {\n    __extends(StoreTypeItem, _super);\n    function StoreTypeItem(scene, x, y, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.isSelect = false;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.setSize(width, height);\n        _this.bg = _this.scene.make.image({ key: key, frame: "store_bg" });\n        _this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.add(_this.bg);\n        _this.storeIcon = _this.scene.make.image({ key: key, frame: "restaurant_icon" });\n        _this.storeIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.storeIcon.setPosition(0, -8 * dpr);\n        _this.add(_this.storeIcon);\n        _this.storeName = _this.scene.make.text({ x: 0, y: _this.storeIcon.y + _this.storeIcon.height * 0.5 + 10 * dpr, text: "Restaurant", style: { color: "#0", fontSize: 10 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        _this.add(_this.storeName);\n        return _this;\n    }\n    StoreTypeItem.prototype.setStoreData = function (data) {\n        this.storeData = data;\n        if ("industryType" in data) { // data instanceof op_pkt_def.PKT_INDUSTRY\n            this.storeIcon.setFrame(data.industryType + "_icon");\n            this.storeName.text = data.name;\n        }\n        else {\n            var storeData = data;\n            this.storeIcon.setFrame(storeData.storeType + "_icon");\n            this.storeName.text = storeData.name;\n        }\n    };\n    Object.defineProperty(StoreTypeItem.prototype, "select", {\n        get: function () {\n            return this.isSelect;\n        },\n        set: function (value) {\n            this.isSelect = value;\n            var frame = value ? "store_bg_click" : "store_bg";\n            this.bg.setFrame(frame);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return StoreTypeItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStoreCreatePanel.ts?')},"./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetListPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessStreetListPanel", function() { return PicaBusinessStreetListPanel; });\n/* harmony import */ var _SecondaryMenuPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SecondaryMenuPanel */ "./src/pica/render/ui/PicaBusinessStreet/SecondaryMenuPanel.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaBusinessStreetListPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessStreetListPanel, _super);\n    function PicaBusinessStreetListPanel(scene, x, y, width, height, dpr, zoom, key, key2) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.curCategoryType = CategoryType.popularity;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaBusinessStreetListPanel.prototype.setIndustryModels = function (content) {\n        var att = [{ text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.popularity"), data: { categoryType: CategoryType.popularity } }, { text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.praise"), data: { categoryType: CategoryType.praise } }];\n        var storeTypeArr = [];\n        for (var _i = 0, _a = content.industry; _i < _a.length; _i++) {\n            var ind = _a[_i];\n            for (var _b = 0, _c = ind.roomModels; _b < _c.length; _b++) {\n                var item = _c[_b];\n                if (storeTypeArr.indexOf(item.storeType) === -1) {\n                    storeTypeArr.push({ type: item.storeType, name: item.name });\n                }\n            }\n        }\n        this.secondaryPanel.setCategories(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["TabButton"], att, {\n            width: 88 * this.dpr,\n            height: 27 * this.dpr,\n            key: this.key2,\n            normalFrame: "navigation_bar_click",\n            downFrame: "navigation_bar_click",\n            textStyle: {\n                fontSize: 14 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n                color: "#ffffff"\n            }\n        }, new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, function (tabs) {\n            for (var _i = 0, tabs_1 = tabs; _i < tabs_1.length; _i++) {\n                var item = tabs_1[_i];\n                item.background.visible = false;\n            }\n        }));\n        this.secondaryPanel.setSubItems(storeTypeArr);\n    };\n    PicaBusinessStreetListPanel.prototype.setStreetListData = function (datas) {\n        this.gridtable.setT(0);\n        this.gridtable.setItems(datas);\n    };\n    PicaBusinessStreetListPanel.prototype.setHandler = function (history, rank, back, query, enter) {\n        this.historyHandler = history;\n        this.rankHandler = rank;\n        this.backHandler = back;\n        this.queryHandler = query;\n        this.enterHandler = enter;\n    };\n    PicaBusinessStreetListPanel.prototype.resetMask = function () {\n        this.gridtable.resetMask();\n    };\n    PicaBusinessStreetListPanel.prototype.create = function () {\n        var _this = this;\n        var posy = -this.height * 0.5;\n        var posx = -this.width * 0.5;\n        var storebg = this.scene.make.image({ key: this.key, frame: "store_icon" });\n        storebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        storebg.x = posx + 30 * this.dpr;\n        storebg.y = posy + 6 * this.dpr;\n        this.add(storebg);\n        var storex = storebg.x + storebg.width * 0.5 + 10 * this.dpr;\n        var storeTitle = this.scene.make.text({ x: storex, y: storebg.y, text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.street"), style: { fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#FFC51A" } }).setOrigin(0, 0.5);\n        storeTitle.setFontStyle("bold");\n        storeTitle.setStroke("#553100", 2 * this.dpr);\n        this.add(storeTitle);\n        this.secondaryPanel = new _SecondaryMenuPanel__WEBPACK_IMPORTED_MODULE_0__["SecondaryMenuPanel"](this.scene, 0, posy + 56 * this.dpr, this.width, 60 * this.dpr, this.dpr, this.zoom, {\n            x: 0,\n            y: -15 * this.dpr,\n            width: this.width - 30 * this.dpr,\n            height: 30 * this.dpr,\n            zoom: this.zoom,\n            dpr: this.dpr,\n            orientation: 1,\n            align: 1\n        });\n        this.add(this.secondaryPanel);\n        var scrollbg = this.scene.make.image({ key: this.key2, frame: "navigation_bar" });\n        scrollbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.secondaryPanel.gameScroll.addAt(scrollbg);\n        this.secondaryPanel.createGrideTable(0, 13 * this.dpr, this.width - 30 * this.dpr, 40 * this.dpr, 65 * this.dpr, 40 * this.dpr, function (cell, cellContainer) {\n            var item = cell.item;\n            if (!cellContainer) {\n                cellContainer = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["TextButton"](_this.scene, _this.dpr, _this.zoom);\n                cellContainer.setFontSize(13 * _this.dpr);\n            }\n            var itemData = cellContainer.getData("itemData");\n            if (itemData !== item) {\n                cellContainer.setText(item.name);\n                cellContainer.setData("itemData", item);\n                if (_this.subCategory === item.type) {\n                    cellContainer.changeDown();\n                }\n                else\n                    cellContainer.changeNormal();\n            }\n            return cellContainer;\n        });\n        this.secondaryPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.onCategoryHandler), new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.onSubCategoryHandle));\n        this.secondaryPanel.setButtonChangeHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, function (button) {\n            button.background.visible = false;\n        }), new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, function (button) {\n            button.background.visible = true;\n            button.changeDown();\n        }));\n        var gridbg = this.scene.make.image({ key: this.key2, frame: "navigation_bar_2" });\n        gridbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.secondaryPanel.gridTable.addAt(gridbg);\n        var gridWdith = this.width;\n        var gridHeight = this.height - 130 * this.dpr;\n        var gridY = posy + 88 * this.dpr + gridHeight * 0.5;\n        this.gridtable = this.createGrideTable(0, gridY, gridWdith, gridHeight, 256 * this.dpr, 50 * this.dpr);\n        var rankBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["Button"](this.scene, this.key2, "ranking", "ranking");\n        var btnX = -posx - rankBtn.width * 0.5 - 20 * this.dpr;\n        rankBtn.setPosition(btnX, posy + 6 * this.dpr);\n        rankBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap), this.onRankHandler, this);\n        this.add(rankBtn);\n        var historyBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["Button"](this.scene, this.key2, "history", "history");\n        historyBtn.setPosition(btnX - rankBtn.width * 0.5 - historyBtn.width * 0.5 - 10 * this.dpr, posy + 6 * this.dpr);\n        historyBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap), this.onHistoryHandler, this);\n        this.add(historyBtn);\n        var backBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSliceButton"](this.scene, 0, this.height * 0.5 - 7 * this.dpr, 92 * this.dpr, 34 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("business_street.back"), this.dpr, this.zoom, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(backBtn);\n        backBtn.setTextStyle({ fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, color: "#ffffff" });\n        backBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap), this.onBackHandler, this);\n    };\n    PicaBusinessStreetListPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                tableOX: 19 * this.dpr,\n                zoom: this.zoom\n            },\n            press: {\n                tapInterval: 50\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            interactive: true,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new PicStreetItem(_this.scene, 0, 0, capW, capH, _this.key, _this.key2, _this.dpr, _this.zoom);\n                    grid.add(cellContainer);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setStoreData(item, _this.curCategoryType);\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["GameGridTable"](this.scene, tableConfig);\n        grid.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onSelectItemHandler(cell);\n            }\n        });\n        // grid.on("cellOut", (cell) => {\n        //     const tween = new TweenCompent(this.scene, cell, { scale: 1, pingpang: false });\n        //     tween.tween();\n        // });\n        grid.on("cellDown", function (cell) {\n            var tween = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["TweenCompent"](_this.scene, cell, { scale: 0.96, pingpang: true });\n            tween.tween();\n        });\n        grid.layout();\n        this.add(grid);\n        return grid;\n    };\n    PicaBusinessStreetListPanel.prototype.onCategoryHandler = function (data) {\n        this.curCategoryType = data.categoryType;\n        if (this.subCategory !== undefined) {\n            var type = this.curCategoryType === CategoryType.popularity ? "popularity" : "praise";\n            this.queryHandler.runWith([type, this.subCategory]);\n        }\n    };\n    PicaBusinessStreetListPanel.prototype.onSubCategoryHandle = function (item) {\n        var data = item.getData("itemData");\n        if (this.curSubCategoryItem)\n            this.curSubCategoryItem.changeNormal();\n        item.changeDown();\n        this.curSubCategoryItem = item;\n        this.subCategory = data.type;\n        var type = this.curCategoryType === CategoryType.popularity ? "popularity" : "praise";\n        if (this.queryHandler)\n            this.queryHandler.runWith([type, this.subCategory]);\n    };\n    PicaBusinessStreetListPanel.prototype.onSelectItemHandler = function (cell) {\n        var storeData = cell.storeData;\n        if (this.enterHandler)\n            this.enterHandler.runWith(storeData.roomId);\n    };\n    PicaBusinessStreetListPanel.prototype.onHistoryHandler = function () {\n        if (this.historyHandler)\n            this.historyHandler.run();\n    };\n    PicaBusinessStreetListPanel.prototype.onRankHandler = function () {\n        if (this.rankHandler)\n            this.rankHandler.run();\n    };\n    PicaBusinessStreetListPanel.prototype.onBackHandler = function () {\n        if (this.backHandler)\n            this.backHandler.run();\n    };\n    return PicaBusinessStreetListPanel;\n}(Phaser.GameObjects.Container));\n\nvar PicStreetItem = /** @class */ (function (_super) {\n    __extends(PicStreetItem, _super);\n    function PicStreetItem(scene, x, y, width, height, key, key2, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.key2 = key2;\n        _this.setSize(width, height);\n        var posx = -_this.width * 0.5;\n        var posy = -_this.height * 0.5;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSlicePatch"](_this.scene, 0, 0, width, 45 * dpr, _this.key, "restaurant_bg", {\n            left: 4 * _this.dpr,\n            top: 9 * _this.dpr,\n            right: 4 * _this.dpr,\n            bottom: 9 * _this.dpr\n        });\n        _this.add(_this.bg);\n        var iconbg = _this.scene.make.image({ key: key2, frame: "icon_bg_s" });\n        iconbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        iconbg.setPosition(posx + iconbg.width * 0.5 + 3 * dpr, 0);\n        _this.add(iconbg);\n        _this.storeIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["DynamicImage"](_this.scene, iconbg.x, 0);\n        _this.add(_this.storeIcon);\n        var storeX = iconbg.x + iconbg.width * 0.5 + 10 * dpr;\n        _this.storeName = _this.scene.make.text({ x: storeX, y: posy + 10 * dpr, text: "", style: { color: "#FFE11A", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.storeName);\n        _this.playerName = _this.scene.make.text({ x: storeX, y: _this.storeName.y + _this.storeName.height * 0.5 + 10 * dpr, text: "", style: { color: "#ffffff", fontSize: 11 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0);\n        _this.add(_this.playerName);\n        _this.industryIcon = _this.scene.make.image({ key: _this.key2, frame: "entertainment_tag_s" });\n        _this.industryIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.industryIcon.x = _this.width * 0.5 - _this.industryIcon.width * 0.5;\n        _this.add(_this.industryIcon);\n        _this.praiseIcon = _this.scene.make.image({ key: key2, frame: "praise" });\n        _this.praiseIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.praiseIcon.x = -posx - 80 * dpr;\n        _this.add(_this.praiseIcon);\n        _this.praiseCount = _this.scene.make.text({ x: _this.praiseIcon.x + _this.praiseIcon.width * 0.5 + 10 * dpr, y: _this.praiseIcon.y, text: "", style: { color: "#ffffff", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        _this.add(_this.praiseCount);\n        return _this;\n    }\n    PicStreetItem.prototype.setStoreData = function (data, categoriesType) {\n        var industry = data.industry;\n        var storeType = data.storeType;\n        this.bg.setFrame(industry + "_bg");\n        this.storeIcon.setTexture(this.key2, storeType + "_icon_s");\n        this.praiseIcon.setFrame(categoriesType === CategoryType.praise ? "praise" : "store_popularity");\n        this.storeName.text = data.name;\n        this.playerName.text = data.ownerName;\n        this.praiseCount.text = (categoriesType === CategoryType.praise ? data.praise : data.popularity) + "";\n        this.industryIcon.setFrame(industry + "_tag_s");\n        this.storeData = data;\n        // this.storeName.removeInteractive();\n        // this.storeName.setInteractive();\n    };\n    return PicStreetItem;\n}(Phaser.GameObjects.Container));\nvar CategoryType;\n(function (CategoryType) {\n    CategoryType[CategoryType["popularity"] = 1] = "popularity";\n    CategoryType[CategoryType["praise"] = 2] = "praise";\n})(CategoryType || (CategoryType = {}));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetListPanel.ts?')},"./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessStreetPanel", function() { return PicaBusinessStreetPanel; });\n/* harmony import */ var _PicaBusinessContentPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaBusinessContentPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessContentPanel.ts");\n/* harmony import */ var _PicaBusinessMyStreetPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaBusinessMyStreetPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessMyStreetPanel.ts");\n/* harmony import */ var _PicaBusinessStoreCreatePanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PicaBusinessStoreCreatePanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStoreCreatePanel.ts");\n/* harmony import */ var _PicaBusinessStreetListPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PicaBusinessStreetListPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetListPanel.ts");\n/* harmony import */ var _PicaBusinessHistoryPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PicaBusinessHistoryPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessHistoryPanel.ts");\n/* harmony import */ var _PicaBusinessRankingPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaBusinessRankingPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingPanel.ts");\n/* harmony import */ var _PicaBusinessRankingDetailPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaBusinessRankingDetailPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingDetailPanel.ts");\n/* harmony import */ var _PicaBusinessRankRewardPanel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./PicaBusinessRankRewardPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankRewardPanel.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\nvar PicaBusinessStreetPanel = /** @class */ (function (_super) {\n    __extends(PicaBusinessStreetPanel, _super);\n    function PicaBusinessStreetPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key2 = "c_street_2";\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_9__["ModuleName"].PICABUSINESSSTREET_NAME;\n        return _this;\n    }\n    PicaBusinessStreetPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(w, h);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x000000, 0.66);\n        this.mBackGround.fillRect(0, 0, w, h);\n    };\n    PicaBusinessStreetPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    };\n    PicaBusinessStreetPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n    };\n    PicaBusinessStreetPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n    };\n    PicaBusinessStreetPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "c_street_1/c_street_1.png", "c_street_1/c_street_1.json");\n        this.addAtlas(this.key2, "c_street_2/c_street_2.png", "c_street_2/c_street_2.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_10__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_10__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_10__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_10__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_10__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_10__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaBusinessStreetPanel.prototype.init = function () {\n        var zoom = this.scale;\n        var wid = this.scaleWidth;\n        var hei = this.scaleHeight;\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, wid * zoom, hei * zoom);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, wid, hei), Phaser.Geom.Rectangle.Contains);\n        this.add(this.mBackGround);\n        var topoffset = 90 * this.dpr;\n        var bottomoffset = 74 * this.dpr;\n        var conWidth = 295 * this.dpr;\n        var conHeight = hei - topoffset - bottomoffset;\n        var conY = topoffset + conHeight * 0.5;\n        var conX = wid * 0.5;\n        this.content = new _PicaBusinessContentPanel__WEBPACK_IMPORTED_MODULE_0__["PicaBusinessContentPanel"](this.scene, conX, conY, conWidth, conHeight, this.dpr, this.key, this.key2);\n        this.content.setCloseHandler(new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, this.OnCloseHandler));\n        this.add(this.content);\n        this.resize(wid, hei);\n        _super.prototype.init.call(this);\n        this.setLinear(this.key2);\n        this.openMyStreet();\n    };\n    PicaBusinessStreetPanel.prototype.setMyStore = function (content) {\n        this.picMyStreetPanel.setMyStoreData(content);\n    };\n    PicaBusinessStreetPanel.prototype.setCommercialStreet = function (content) {\n        if (this.picStreetListPanel)\n            this.picStreetListPanel.setStreetListData(content.commercialStreet);\n    };\n    PicaBusinessStreetPanel.prototype.setIndustryModels = function (content) {\n        this.industryModels = content;\n        if (this.picStoreCreatePanel && this.picStoreCreatePanel.parentContainer) {\n            this.picStoreCreatePanel.setTypeData(content.industry);\n        }\n        if (this.picStreetListPanel && this.picStreetListPanel.parentContainer) {\n            this.picStreetListPanel.setIndustryModels(this.industryModels);\n        }\n    };\n    PicaBusinessStreetPanel.prototype.setStoreRankingList = function (content) {\n        this.picStreetRankingPanel.setRankingData(content.rankChampions);\n    };\n    PicaBusinessStreetPanel.prototype.setStoreRankingDetial = function (content) {\n        this.picRankingDetailPanel.setRankingDetailData(content);\n    };\n    PicaBusinessStreetPanel.prototype.setStoreRankingReward = function (content) {\n        this.picRankRewardPanel.setRankRewardData(content.rewardStage);\n    };\n    PicaBusinessStreetPanel.prototype.setEnterHistory = function (content) {\n        this.picStreetHistoryPanel.setHistoryeData(content.history);\n    };\n    PicaBusinessStreetPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaBusinessStreetPanel.prototype.setSecondStore = function (datas) {\n        this.picSecondStorePanel.setTypeData(datas);\n    };\n    PicaBusinessStreetPanel.prototype.openMyStreet = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + this.key + "_querymystore");\n        this.showMyStreetPanel();\n        this.content.setTitleText(utils__WEBPACK_IMPORTED_MODULE_11__["i18n"].t("business_street.commercial_street"));\n    };\n    PicaBusinessStreetPanel.prototype.openStoreCreatePanel = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + this.key + "_querymodels");\n        this.showStoreCreatePanel();\n        this.content.setTitleText(utils__WEBPACK_IMPORTED_MODULE_11__["i18n"].t("business_street.newstore"));\n    };\n    PicaBusinessStreetPanel.prototype.openSecondStorePanel = function () {\n        this.showSecondStorePanel();\n        this.content.setTitleText(utils__WEBPACK_IMPORTED_MODULE_11__["i18n"].t("business_street.newstore"));\n    };\n    PicaBusinessStreetPanel.prototype.openStoreStreetPanel = function () {\n        this.showStreetListPanel();\n        if (this.industryModels) {\n            this.picStreetListPanel.setIndustryModels(this.industryModels);\n        }\n        else {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + this.key + "_querymodels");\n        }\n        this.content.setTitleText(utils__WEBPACK_IMPORTED_MODULE_11__["i18n"].t("business_street.commercial_street"));\n    };\n    PicaBusinessStreetPanel.prototype.openStreetHistoryPanel = function () {\n        this.showStreetHistoryPanel();\n        this.content.setTitleText(utils__WEBPACK_IMPORTED_MODULE_11__["i18n"].t("business_street.history"));\n    };\n    PicaBusinessStreetPanel.prototype.openStreetRankingPanel = function () {\n        this.showStreetRankingPanel();\n        this.content.setTitleText(utils__WEBPACK_IMPORTED_MODULE_11__["i18n"].t("business_street.ranking"));\n    };\n    PicaBusinessStreetPanel.prototype.openRankingDetailPanel = function () {\n        this.showRankingDetailPanel();\n        this.content.setTitleText(utils__WEBPACK_IMPORTED_MODULE_11__["i18n"].t("business_street.ranking"));\n    };\n    PicaBusinessStreetPanel.prototype.openRankRewardPanel = function () {\n        this.showRankRewardPanel();\n        this.content.setTitleText(utils__WEBPACK_IMPORTED_MODULE_11__["i18n"].t("business_street.rankreward"));\n    };\n    PicaBusinessStreetPanel.prototype.showMyStreetPanel = function () {\n        var _this = this;\n        var topoffset = 90 * this.dpr;\n        var bottomoffset = 74 * this.dpr;\n        this.setContentSize(topoffset, bottomoffset);\n        if (!this.picMyStreetPanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picMyStreetPanel = new _PicaBusinessMyStreetPanel__WEBPACK_IMPORTED_MODULE_1__["PicaBusinessMyStreetPanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key);\n            this.picMyStreetPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + _this.key + "_queryallsaves");\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.openStoreStreetPanel();\n                _this.hideMyStreetPanel();\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.hideMyStreetPanel();\n                _this.openStoreCreatePanel();\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function (roomid, password) {\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + _this.key + "_queryenterroom", { roomid: roomid, password: password });\n            }));\n        }\n        this.content.add(this.picMyStreetPanel);\n        this.picMyStreetPanel.resetMask();\n    };\n    PicaBusinessStreetPanel.prototype.hideMyStreetPanel = function () {\n        this.content.remove(this.picMyStreetPanel);\n    };\n    PicaBusinessStreetPanel.prototype.showStoreCreatePanel = function () {\n        var _this = this;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var conWidth = 295 * this.dpr;\n        var conHeight = 320 * this.dpr;\n        var conY = height * 0.5;\n        var conX = width * 0.5;\n        this.content.setPosition(conX, conY);\n        this.content.setContentSize(conWidth, conHeight);\n        if (!this.picStoreCreatePanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picStoreCreatePanel = new _PicaBusinessStoreCreatePanel__WEBPACK_IMPORTED_MODULE_2__["PicaBusinessStoreCreatePanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key);\n            this.picStoreCreatePanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.openMyStreet();\n                _this.hideStoreCreatePanel();\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function (datas) {\n                _this.openSecondStorePanel();\n                _this.hideStoreCreatePanel();\n                _this.setSecondStore(datas);\n            }));\n        }\n        this.content.add(this.picStoreCreatePanel);\n        this.picStoreCreatePanel.resetMask();\n    };\n    PicaBusinessStreetPanel.prototype.hideStoreCreatePanel = function () {\n        this.content.remove(this.picStoreCreatePanel);\n    };\n    PicaBusinessStreetPanel.prototype.showSecondStorePanel = function () {\n        var _this = this;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var conWidth = 295 * this.dpr;\n        var conHeight = 320 * this.dpr;\n        var conY = height * 0.5;\n        var conX = width * 0.5;\n        this.content.setPosition(conX, conY);\n        this.content.setContentSize(conWidth, conHeight);\n        if (!this.picSecondStorePanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picSecondStorePanel = new _PicaBusinessStoreCreatePanel__WEBPACK_IMPORTED_MODULE_2__["PicaBusinessStoreCreatePanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key, false);\n            this.picSecondStorePanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.openStoreCreatePanel();\n                _this.hideSecondStorePanel();\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function (data) {\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + _this.key + "_querycreatestore", data.modelId);\n            }));\n        }\n        this.content.add(this.picSecondStorePanel);\n        this.picSecondStorePanel.resetMask();\n    };\n    PicaBusinessStreetPanel.prototype.hideSecondStorePanel = function () {\n        this.content.remove(this.picSecondStorePanel);\n    };\n    PicaBusinessStreetPanel.prototype.showStreetListPanel = function () {\n        var _this = this;\n        var topoffset = 90 * this.dpr;\n        var bottomoffset = 74 * this.dpr;\n        this.setContentSize(topoffset, bottomoffset);\n        if (!this.picStreetListPanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picStreetListPanel = new _PicaBusinessStreetListPanel__WEBPACK_IMPORTED_MODULE_3__["PicaBusinessStreetListPanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key, this.key2);\n            this.picStreetListPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.openStreetHistoryPanel();\n                _this.hideStreetListPanel();\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + _this.key + "_queryenterhistory");\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.openStreetRankingPanel();\n                _this.hideStreetListPanel();\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + _this.key + "_queryranklist");\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.hideStreetListPanel();\n                _this.openMyStreet();\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function (storeby, storetype) {\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + _this.key + "_querystreet", { storeby: storeby, storetype: storetype });\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function (roomid, password) {\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + _this.key + "_queryenterroom", { roomid: roomid, password: password });\n            }));\n        }\n        this.content.add(this.picStreetListPanel);\n        this.picStreetListPanel.resetMask();\n    };\n    PicaBusinessStreetPanel.prototype.hideStreetListPanel = function () {\n        this.content.remove(this.picStreetListPanel);\n    };\n    PicaBusinessStreetPanel.prototype.showStreetHistoryPanel = function () {\n        var _this = this;\n        var topoffset = 90 * this.dpr;\n        var bottomoffset = 74 * this.dpr;\n        this.setContentSize(topoffset, bottomoffset);\n        if (!this.picStreetHistoryPanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picStreetHistoryPanel = new _PicaBusinessHistoryPanel__WEBPACK_IMPORTED_MODULE_4__["PicaBusinessHistoryPanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key, this.key2);\n            this.picStreetHistoryPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.hideStreetHistoryPanel();\n                _this.openStoreStreetPanel();\n            }));\n        }\n        this.content.add(this.picStreetHistoryPanel);\n        this.picStreetHistoryPanel.resetMask();\n    };\n    PicaBusinessStreetPanel.prototype.hideStreetHistoryPanel = function () {\n        this.content.remove(this.picStreetHistoryPanel);\n    };\n    PicaBusinessStreetPanel.prototype.showStreetRankingPanel = function () {\n        var _this = this;\n        var topoffset = 110 * this.dpr;\n        var bottomoffset = 94 * this.dpr;\n        this.setContentSize(topoffset, bottomoffset);\n        if (!this.picStreetRankingPanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picStreetRankingPanel = new _PicaBusinessRankingPanel__WEBPACK_IMPORTED_MODULE_5__["PicaBusinessRankingPanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key, this.key2);\n            this.picStreetRankingPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.hideStreetRankingPanel();\n                _this.openStoreStreetPanel();\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function (key, type) {\n                _this.openRankingDetailPanel();\n                _this.hideStreetRankingPanel();\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + _this.key + "_queryrankdetail", { key: key, type: type });\n            }));\n        }\n        this.content.add(this.picStreetRankingPanel);\n        this.picStreetRankingPanel.show();\n        this.picStreetRankingPanel.resetMask();\n    };\n    PicaBusinessStreetPanel.prototype.hideStreetRankingPanel = function () {\n        this.content.remove(this.picStreetRankingPanel);\n        this.picStreetRankingPanel.hide();\n    };\n    PicaBusinessStreetPanel.prototype.showRankingDetailPanel = function () {\n        var _this = this;\n        var topoffset = 90 * this.dpr;\n        var bottomoffset = 74 * this.dpr;\n        this.setContentSize(topoffset, bottomoffset);\n        if (!this.picRankingDetailPanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picRankingDetailPanel = new _PicaBusinessRankingDetailPanel__WEBPACK_IMPORTED_MODULE_6__["PicaBusinessRankingDetailPanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key, this.key2);\n            this.picRankingDetailPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.hideRankingDetailPanel();\n                _this.openStreetRankingPanel();\n            }), new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function (key, type) {\n                _this.hideRankingDetailPanel();\n                _this.openRankRewardPanel();\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + _this.key + "_queryrankreward", { key: key, type: type });\n            }));\n        }\n        this.content.add(this.picRankingDetailPanel);\n        this.picRankingDetailPanel.resetMask();\n    };\n    PicaBusinessStreetPanel.prototype.hideRankingDetailPanel = function () {\n        this.content.remove(this.picRankingDetailPanel);\n    };\n    PicaBusinessStreetPanel.prototype.showRankRewardPanel = function () {\n        var _this = this;\n        var topoffset = 90 * this.dpr;\n        var bottomoffset = 74 * this.dpr;\n        this.setContentSize(topoffset, bottomoffset);\n        if (!this.picRankRewardPanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picRankRewardPanel = new _PicaBusinessRankRewardPanel__WEBPACK_IMPORTED_MODULE_7__["PicaBusinessRankRewardPanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key, this.key2);\n            this.picRankRewardPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_11__["Handler"](this, function () {\n                _this.hideRankRewardPanel();\n                _this.openRankingDetailPanel();\n            }));\n        }\n        this.content.add(this.picRankRewardPanel);\n        this.picRankRewardPanel.resetMask();\n    };\n    PicaBusinessStreetPanel.prototype.hideRankRewardPanel = function () {\n        this.content.remove(this.picRankRewardPanel);\n    };\n    PicaBusinessStreetPanel.prototype.setContentSize = function (topoffset, bottomoffset) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var conWidth = 295 * this.dpr;\n        var conHeight = height - topoffset - bottomoffset;\n        var conY = topoffset + conHeight * 0.5;\n        var conX = width * 0.5;\n        this.content.setPosition(conX, conY);\n        this.content.setContentSize(conWidth, conHeight);\n    };\n    PicaBusinessStreetPanel.prototype.OnCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_9__["RENDER_PEER"] + "_" + this.key + "_hide");\n    };\n    PicaBusinessStreetPanel.prototype.onSelectItemHandler = function (item) {\n    };\n    PicaBusinessStreetPanel.prototype.getRichLabel = function (text, color) {\n        if (color === void 0) { color = "#2B4BB5"; }\n        var label = "[stroke=" + color + "][color=" + color + "]" + text + ":[/color][/stroke]";\n        return label;\n    };\n    PicaBusinessStreetPanel.prototype.getspaceStr = function (num) {\n        var str = "";\n        for (var i = 0; i < num; i++) {\n            str += " ";\n        }\n        return str;\n    };\n    return PicaBusinessStreetPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_8__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetPanel.ts?')},"./src/pica/render/ui/PicaBusinessStreet/SecondaryMenuPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SecondaryMenuPanel", function() { return SecondaryMenuPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar SecondaryMenuPanel = /** @class */ (function (_super) {\n    __extends(SecondaryMenuPanel, _super);\n    function SecondaryMenuPanel(scene, x, y, width, height, dpr, zoom, scrollconfig) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        scrollconfig.cellupCallBack = _this.onSelectCategoryHandler.bind(_this);\n        _this.gameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](_this.scene, scrollconfig);\n        _this.add(_this.gameScroll);\n        return _this;\n    }\n    SecondaryMenuPanel.prototype.setHandler = function (handler, subHandler) {\n        this.categoryHandler = handler;\n        this.subCategoryHandler = subHandler;\n    };\n    SecondaryMenuPanel.prototype.setButtonChangeHandler = function (normal, down, subNormal, subDown) {\n        this.categoryNormalHandler = normal;\n        this.categoryDownHandler = down;\n        this.subNormalHandler = subNormal;\n        this.subDownHandler = subDown;\n    };\n    SecondaryMenuPanel.prototype.setCategories = function (type, categorys, btnConfig, compl) {\n        this.categoryBtn = undefined;\n        this.gameScroll.clearItems();\n        var capW = btnConfig.width;\n        var capH = btnConfig.height;\n        var key = btnConfig.key;\n        var normalFrame = btnConfig.normalFrame;\n        var downFrame = btnConfig.downFrame;\n        var patchConfig = btnConfig.patchConfig;\n        var music = btnConfig.music;\n        var bold = btnConfig.bold;\n        var tabs = [];\n        for (var _i = 0, categorys_1 = categorys; _i < categorys_1.length; _i++) {\n            var data = categorys_1[_i];\n            var text = data.text;\n            var btn = new type(this.scene, key, normalFrame, downFrame, text, music, this.dpr, this.zoom, patchConfig);\n            if (btnConfig.textStyle)\n                btn.setTextStyle(btnConfig.textStyle);\n            btn.setData("category", data.data);\n            btn.disableInteractive();\n            if (bold)\n                btn.setFontStyle("bold");\n            if (capW)\n                btn.width = capW;\n            if (capH)\n                btn.height = capH;\n            this.gameScroll.addItem(btn);\n            tabs.push(btn);\n        }\n        this.gameScroll.Sort(true);\n        this.gameScroll.refreshMask();\n        if (compl)\n            compl.runWith([tabs]);\n        this.onSelectCategoryHandler(tabs[0]);\n    };\n    SecondaryMenuPanel.prototype.setSubItems = function (datas) {\n        if (this.gridTable) {\n            this.subCategoryBtn = undefined;\n            this.gridTable.setItems(datas);\n            this.gridTable.resetMask();\n            var cells = this.gridTable.getCells();\n            if (cells) {\n                var cell = cells[0];\n                if (cell && cell.container) {\n                    this.onSubCategoryHandler(cell.container);\n                }\n            }\n        }\n    };\n    SecondaryMenuPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH, createFun, scrollMode) {\n        var _this = this;\n        if (scrollMode === void 0) { scrollMode = 1; }\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                zoom: this.zoom\n            },\n            scrollMode: scrollMode,\n            clamplChildOY: false,\n            createCellContainerCallback: createFun,\n        };\n        this.gridTable = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.gridTable.layout();\n        this.gridTable.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onSubCategoryHandler(cell);\n            }\n        });\n        this.add(this.gridTable);\n        this.gridTable.resetMask();\n    };\n    SecondaryMenuPanel.prototype.onSelectCategoryHandler = function (obj) {\n        if (this.categoryBtn) {\n            if (this.categoryNormalHandler)\n                this.categoryNormalHandler.runWith(this.categoryBtn);\n            else\n                this.categoryBtn.changeNormal();\n        }\n        if (this.categoryDownHandler)\n            this.categoryDownHandler.runWith(obj);\n        else\n            obj.changeDown();\n        this.categoryBtn = obj;\n        var category = obj.getData("category");\n        if (this.categoryHandler)\n            this.categoryHandler.runWith(category);\n    };\n    SecondaryMenuPanel.prototype.onSubCategoryHandler = function (obj) {\n        if (this.subCategoryBtn) {\n            if (this.subNormalHandler)\n                this.subNormalHandler.runWith(this.subCategoryBtn);\n            else\n                this.subCategoryBtn.changeNormal();\n        }\n        if (this.subDownHandler)\n            this.subDownHandler.runWith(obj);\n        else\n            obj.changeDown();\n        this.subCategoryBtn = obj;\n        if (this.subCategoryHandler)\n            this.subCategoryHandler.runWith(obj);\n    };\n    return SecondaryMenuPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaBusinessStreet/SecondaryMenuPanel.ts?')},"./src/pica/render/ui/PicaChat/PicaChatInputPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaChatInputPanel", function() { return PicaChatInputPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaChatInputPanel = /** @class */ (function (_super) {\n    __extends(PicaChatInputPanel, _super);\n    function PicaChatInputPanel(scene, render, key, chatArr) {\n        var _this = _super.call(this) || this;\n        _this.chatArr = [];\n        _this.maxChatLength = 100;\n        _this.isOpenQuickPanel = false;\n        _this.isSendChat = false;\n        _this.isDispose = false;\n        _this.key = key;\n        _this.render = render;\n        _this.dpr = window.devicePixelRatio;\n        _this.scene = scene;\n        _this.chatArr = chatArr;\n        var width = scene.cameras.main.width;\n        var height = scene.cameras.main.height;\n        _this.mBackground = scene.add.graphics();\n        _this.mBackground.clear();\n        _this.mBackground.fillStyle(0, 0.6);\n        _this.mBackground.fillRect(0, 0, width, height);\n        _this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        _this.bottomCon = scene.add.container(0, 0);\n        _this.bottomCon.setPosition(width * 0.5, height * 0.5);\n        var inputBg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](scene, 0, 0, width, 47 * _this.dpr, _this.key, "chat_Input_bg", {\n            left: 2 * _this.dpr,\n            top: 0 * _this.dpr,\n            right: 2 * _this.dpr,\n            bottom: 0 * _this.dpr,\n        });\n        _this.bottomCon.setSize(width, inputBg.height);\n        _this.bottomCon.add(inputBg);\n        _this.sendBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.scene, _this.key, "chat_quick_2");\n        _this.sendBtn.x =\n            -width * 0.5 + _this.sendBtn.width * 0.5 + 12 * _this.dpr;\n        _this.sendBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), _this.onQuickSendHandler, _this);\n        _this.bottomCon.add(_this.sendBtn);\n        _this.cancelBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](_this.scene, 0, 0, 63 * _this.dpr, 28 * _this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "red_btn_normal", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.cancel"), _this.dpr, 1, {\n            left: 14 * _this.dpr,\n            top: 0,\n            right: 14 * _this.dpr,\n            bottom: 0,\n        });\n        _this.cancelBtn.setTextStyle({\n            color: "#ffffff",\n            fontSize: 16 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n        });\n        _this.cancelBtn.x =\n            width * 0.5 - _this.cancelBtn.width * 0.5 - 12 * _this.dpr;\n        _this.cancelBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), _this.onCancelHandler, _this);\n        _this.bottomCon.add(_this.cancelBtn);\n        var chatbgWidth = Math.abs(_this.sendBtn.x - _this.cancelBtn.x) -\n            _this.sendBtn.width * 0.5 -\n            _this.cancelBtn.width * 0.5 -\n            16 * _this.dpr;\n        var chatbgx = _this.sendBtn.x +\n            _this.sendBtn.width * 0.5 +\n            8 * _this.dpr +\n            chatbgWidth * 0.5;\n        var chatInputbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, chatbgx, 0, chatbgWidth, 36 * _this.dpr, _this.key, "chat_Input", {\n            left: 12 * _this.dpr,\n            top: 0 * _this.dpr,\n            right: 12 * _this.dpr,\n            bottom: 0 * _this.dpr,\n        });\n        _this.bottomCon.add(chatInputbg);\n        _this.mInput = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"](_this.scene, chatbgx - chatbgWidth * 0.5, 0, chatbgWidth, 40 * _this.dpr, {\n            type: "text",\n            placeholder: "",\n            color: "#0",\n            fontSize: 20 * _this.dpr + "px",\n        });\n        _this.mInput.setOrigin(0, 0.5);\n        _this.bottomCon.add(_this.mInput);\n        _this.contentCon = scene.add.container(0, 0);\n        _this.contentCon.setSize(width, 200 * _this.dpr);\n        _this.mOutputText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](scene, -width * 0.5 + 10 * _this.dpr, 0, "", {\n            fontSize: 14 * _this.dpr + "px",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n            stroke: "#000000",\n            strokeThickness: 1 * _this.dpr,\n            textMask: false,\n            lineSpacing: 2 * _this.dpr,\n            shadow: {\n                offsetX: 0,\n                offsetY: 0,\n                color: "#000",\n                blur: 4,\n                stroke: true,\n                fill: true,\n            },\n            wrap: {\n                mode: "char",\n                width: width - 12 * _this.dpr,\n            },\n        }).setOrigin(0, 0.5);\n        _this.mOutputText.setResolution(_this.dpr);\n        _this.gamescroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](scene, {\n            x: 0,\n            y: 0,\n            width: width,\n            height: _this.contentCon.height,\n            zoom: 1,\n            dpr: _this.dpr,\n            align: 0,\n            orientation: 0,\n            selfevent: true\n        });\n        _this.contentCon.add(_this.gamescroll);\n        _this.gamescroll.addItem(_this.mOutputText);\n        _this.quickCon = _this.scene.add.container(0, 0);\n        _this.quickBg = _this.scene.make.image({\n            key: _this.key,\n            frame: "home_quick chat _bg",\n        });\n        _this.quickBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.quickCon.add(_this.quickBg);\n        _this.quickCon.x = width * 0.5;\n        _this.quickChatScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](scene, {\n            x: 0,\n            y: 0,\n            width: width,\n            height: 200 * _this.dpr,\n            zoom: 1,\n            dpr: _this.dpr,\n            align: 2,\n            orientation: 0,\n            cellupCallBack: function (gameobject) {\n                _this.onQuickChatItemHandler(gameobject);\n            },\n        });\n        _this.quickChatScroll.removeListen();\n        _this.quickCon.add(_this.quickChatScroll);\n        _this.mInput.on("blur", _this.onBlurHandler, _this);\n        _this.mInput.on("focus", _this.onFocusHandler, _this);\n        _this.mInput.node.addEventListener("keypress", function (e) {\n            var keycode = e.keyCode || e.which;\n            if (keycode === 13) {\n                _this.isSendChat = true;\n                _this.onSentChat();\n            }\n        });\n        window.addEventListener("native.keyboardshow", _this.onKeyboardHandler.bind(_this));\n        _this.bottomCon.visible = false;\n        _this.contentCon.visible = false;\n        return _this;\n    }\n    PicaChatInputPanel.prototype.setKeywordHeight = function (height) {\n        var camheight = this.scene.cameras.main.height;\n        var camWidth = this.scene.cameras.main.width;\n        // const pktGlobal: any = window["pktGlobal"];\n        var screenHeight = camheight; // pktGlobal.deviceHeight;\n        var statusHeight = 0; // pktGlobal.toolbarHeight;\n        var offsetHeight = screenHeight - height - statusHeight;\n        this.bottomCon.visible = true;\n        this.contentCon.visible = true;\n        this.bottomCon.y = offsetHeight - this.bottomCon.height * 0.5;\n        this.contentCon.height =\n            this.bottomCon.y - this.bottomCon.height * 0.5 - 20 * this.dpr;\n        this.contentCon.y =\n            this.bottomCon.y -\n                this.bottomCon.height * 0.5 -\n                this.contentCon.height * 0.5 -\n                5 * this.dpr;\n        this.contentCon.x = camWidth * 0.5;\n        this.gamescroll.resetSize(camWidth, this.contentCon.height);\n        this.gamescroll.refreshMask();\n        var conHeight = 200 * this.dpr; // camheight - offsetHeight; // height + 20 * this.dpr;\n        this.quickCon.y = this.bottomCon.y - this.bottomCon.height * 0.5;\n        this.quickBg.y = -conHeight * 0.5;\n        this.quickBg.displayWidth = camWidth + 10 * this.dpr;\n        this.quickBg.displayHeight = conHeight;\n        this.quickChatScroll.y = this.quickBg.y;\n        this.quickChatScroll.resetSize(camWidth, conHeight);\n        this.keyboardHeight = height;\n        // this.mInput.text =\n        //     screenHeight +\n        //     "   " +\n        //     height +\n        //     "   " +\n        //     statusHeight +\n        //     "   " +\n        //     this.dpr +\n        //     "   " +\n        //     camheight;\n        // // tslint:disable-next-line:no-console\n        this.setQuickChatItems();\n    };\n    PicaChatInputPanel.prototype.setQuickChatData = function (datas) {\n        if (datas)\n            this.quickChatAtt = datas;\n        this.quickChatAtt.unshift(undefined);\n        this.setKeywordHeight(0);\n        this.onQuickSendHandler();\n        var text = "";\n        for (var _i = 0, _a = this.chatArr; _i < _a.length; _i++) {\n            var chat = _a[_i];\n            text += chat;\n        }\n        this.mOutputText.text = text;\n        this.gamescroll.Sort();\n        utils__WEBPACK_IMPORTED_MODULE_2__["Logger"].getInstance().debug(datas);\n        // this.mInput.setFocus();\n    };\n    PicaChatInputPanel.prototype.appendChat = function (val) {\n        this.chatArr.push(val);\n        if (this.chatArr.length > this.maxChatLength)\n            this.chatArr.shift();\n        var text = "";\n        for (var _i = 0, _a = this.chatArr; _i < _a.length; _i++) {\n            var chat = _a[_i];\n            text += chat;\n        }\n        this.mOutputText.text = text;\n        this.gamescroll.Sort();\n    };\n    PicaChatInputPanel.prototype.onKeyboardHandler = function (e) {\n        utils__WEBPACK_IMPORTED_MODULE_2__["Logger"].getInstance().debug(e.keyboardHeight);\n        if (this.keyboardHeight > 0 && e.keyboardHeight === this.keyboardHeight)\n            return;\n        window.removeEventListener("native.keyboardshow", this.onKeyboardHandler.bind(this));\n        // this.setKeywordHeight(e.keyboardHeight);\n    };\n    PicaChatInputPanel.prototype.setQuickChatItems = function () {\n        this.quickChatScroll.clearItems(true);\n        var camheight = this.scene.cameras.main.height;\n        var camWidth = this.scene.cameras.main.width;\n        for (var i = 0; i < this.quickChatAtt.length; i++) {\n            var text = this.quickChatAtt[i];\n            if (text) {\n                var item = new QuickChatItem(this.scene, camWidth, 30 * this.dpr, this.key, this.dpr, i === 0 ? true : false);\n                this.quickChatScroll.addItem(item);\n                item.setText(text);\n            }\n        }\n        this.quickChatScroll.Sort();\n        this.quickCon.visible = false;\n    };\n    PicaChatInputPanel.prototype.setFirstQuickItem = function () {\n        if (this.quickChatScroll.getItemList().length ===\n            this.quickChatAtt.length) {\n            var list = this.quickChatScroll.getItemList();\n            if (list && list.length > 0) {\n                list[0].setText(this.quickChatAtt[0]);\n            }\n        }\n        else {\n            var camWidth = this.scene.cameras.main.width;\n            var item = new QuickChatItem(this.scene, camWidth, 40 * this.dpr, this.key, this.dpr, true);\n            this.quickChatScroll.addItemAt(item, 0);\n            this.quickChatScroll.Sort();\n            item.setText(this.quickChatAtt[0]);\n        }\n    };\n    PicaChatInputPanel.prototype.onBlurHandler = function () {\n        if (!this.isOpenQuickPanel && !this.isSendChat) {\n            this.onCancelHandler();\n        }\n        this.isSendChat = false;\n    };\n    PicaChatInputPanel.prototype.onFocusHandler = function () {\n        // if (this.isOpenQuickPanel) {\n        //     this.quickCon.visible = false;\n        //     this.quickChatScroll.removeListen();\n        //     this.isOpenQuickPanel = false;\n        // }\n    };\n    PicaChatInputPanel.prototype.onQuickSendHandler = function () {\n        this.isOpenQuickPanel = !this.isOpenQuickPanel;\n        if (this.isOpenQuickPanel) {\n            this.quickCon.visible = true;\n            this.quickChatScroll.addListen();\n        }\n        else {\n            this.mInput.setFocus();\n            this.quickCon.visible = false;\n            this.quickChatScroll.removeListen();\n            this.isOpenQuickPanel = false;\n        }\n        // this.mInput.setBlur();\n    };\n    PicaChatInputPanel.prototype.onSentChat = function () {\n        var chat = this.mInput.text;\n        if (chat !== "") {\n            this.quickChatAtt[0] = chat;\n            this.setFirstQuickItem();\n        }\n        this.mInput.text = "";\n        this.mInput.setFocus();\n        this.sendChat(chat);\n    };\n    PicaChatInputPanel.prototype.sendChat = function (chat) {\n        this.emit("send", chat);\n    };\n    PicaChatInputPanel.prototype.onQuickChatItemHandler = function (item) {\n        // this.sendChat(item.dataChat);\n        this.mInput.text = item.dataChat;\n        this.mInput.setFocus();\n        this.quickCon.visible = false;\n        this.quickChatScroll.removeListen();\n        this.isOpenQuickPanel = false;\n    };\n    PicaChatInputPanel.prototype.onCancelHandler = function () {\n        if (this.isDispose)\n            return;\n        this.isDispose = true;\n        this.mInput.setBlur();\n        this.mBackground.destroy();\n        this.mInput.destroy();\n        this.bottomCon.destroy();\n        this.contentCon.destroy();\n        this.quickCon.destroy();\n        this.gamescroll.clearItems(true);\n        this.scene = undefined;\n        this.render = undefined;\n        this.gamescroll = undefined;\n        this.mOutputText = undefined;\n        this.quickChatScroll = undefined;\n        this.emit("close");\n        this.destroy();\n    };\n    return PicaChatInputPanel;\n}(Phaser.Events.EventEmitter));\n\nvar QuickChatItem = /** @class */ (function (_super) {\n    __extends(QuickChatItem, _super);\n    function QuickChatItem(scene, width, height, key, dpr, first) {\n        if (first === void 0) { first = false; }\n        var _this = _super.call(this, scene) || this;\n        _this.dataChat = "";\n        _this.key = key;\n        _this.setSize(width, height);\n        _this.text = _this.scene.make\n            .text({\n            x: 0,\n            y: 0,\n            text: "",\n            style: {\n                fontSize: 13 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n                color: "#6F6F6F",\n            },\n        })\n            .setOrigin(0, 0.5);\n        _this.text.x = -width * 0.5 + 20 * dpr;\n        _this.add(_this.text);\n        if (first) {\n            var line = _this.scene.make.image({ key: key, frame: "home_divider" });\n            line.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n            line.y = height * 0.5;\n            _this.add(line);\n        }\n        else {\n            var line = _this.scene.make.graphics(undefined);\n            line.clear();\n            line.fillStyle(0x6f6f6f, 0.3);\n            line.fillRect(-width * 0.5 + 20 * dpr, -1, width, 2);\n            line.setPosition(0, height * 0.5);\n            _this.add(line);\n        }\n        return _this;\n    }\n    QuickChatItem.prototype.setText = function (tex) {\n        this.text.text = tex;\n        this.dataChat = tex;\n    };\n    return QuickChatItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaChat/PicaChatInputPanel.ts?')},"./src/pica/render/ui/PicaChat/PicaChatPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaChatPanel", function() { return PicaChatPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _PicaChatInputPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaChatInputPanel */ "./src/pica/render/ui/PicaChat/PicaChatInputPanel.ts");\n/* harmony import */ var _PicaGiftPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaGiftPanel */ "./src/pica/render/ui/PicaChat/PicaGiftPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\nvar ChatChannel;\n(function (ChatChannel) {\n    ChatChannel[ChatChannel["CurrentScene"] = 0] = "CurrentScene";\n    ChatChannel[ChatChannel["World"] = 1] = "World";\n    ChatChannel[ChatChannel["Team"] = 2] = "Team";\n    ChatChannel[ChatChannel["Private"] = 3] = "Private";\n    ChatChannel[ChatChannel["System"] = 4] = "System";\n})(ChatChannel || (ChatChannel = {}));\nvar PicaChatPanel = /** @class */ (function (_super) {\n    __extends(PicaChatPanel, _super);\n    function PicaChatPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        _this.chatCatchArr = [];\n        _this.chatMaxLen = 100;\n        _this.MAX_HEIGHT = 460 * _this.dpr;\n        _this.MIN_HEIGHT = 100 * _this.dpr;\n        _this.scale = 1;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICACHAT_NAME;\n        _this.UIType = apowophaserui__WEBPACK_IMPORTED_MODULE_0__["UIType"].Scene;\n        return _this;\n    }\n    PicaChatPanel.prototype.show = function (param) {\n        _super.prototype.show.call(this, param);\n        this.mShowData = param;\n        if (!this.mInitialized)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.addListen();\n        this.checkUpdateActive();\n    };\n    PicaChatPanel.prototype.resize = function (w, h) {\n        var zoom = this.scale;\n        var width = this.scene.cameras.main.width;\n        var height = this.scene.cameras.main.height;\n        w = width;\n        h = h ? h : 133 * this.dpr;\n        if (this.giftPanel && this.giftPanel.visible)\n            h = 185 * this.dpr;\n        this.setSize(width, h);\n        var frame = this.scene.textures.getFrame(this.key, "title_bg");\n        var scaleRatio = frame ? (width / this.scale) / frame.width : 1;\n        this.mTitleBg.scaleX = scaleRatio;\n        this.mTitleBg.x = (width / this.scale) / 2;\n        this.y = height - this.height;\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0, 0.6);\n        this.mBackground.fillRect(0, 0, width / this.scale, h / this.scale);\n        this.mTextArea.childrenMap.child.setMinSize(w, (h - 16 * this.dpr) * zoom);\n        this.mTextArea.layout();\n        this.mTextArea.setPosition(this.width / 2 + 4 * this.dpr, this.y + this.mTextArea.height / 2 + 10 * this.dpr * zoom);\n        var textMask = this.mTextArea.childrenMap.text;\n        textMask.y = 8 * this.dpr;\n        this.mTextArea.scrollToBottom();\n        if (this.giftPanel) {\n            this.giftPanel.resize();\n            this.giftPanel.y = this.height - this.giftPanel.height * 0.5;\n            this.giftPanel.x = this.width * 0.5;\n        }\n        _super.prototype.resize.call(this, w, h);\n        this.mBackground.input = undefined;\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, width / this.scale, h / this.scale), Phaser.Geom.Rectangle.Contains);\n    };\n    PicaChatPanel.prototype.chatHandler = function (content) {\n        return __awaiter(this, void 0, void 0, function () {\n            var nickName, speaker, color;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.render.mainPeer.getPlayerName(content.chatSenderid)];\n                    case 1:\n                        nickName = _a.sent();\n                        speaker = "";\n                        if (nickName) {\n                            speaker = nickName;\n                        }\n                        else {\n                            if (content.chatSenderid) {\n                                speaker = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("chat.mystery");\n                            }\n                        }\n                        color = "#ffffff";\n                        if (content.chatSetting) {\n                            color = content.chatSetting.textColor;\n                        }\n                        this.showChat("[color=" + color + "][" + this.getChannel(content.chatChannel) + "]" + speaker + ": " + content.chatContext + "[/color]\\n");\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PicaChatPanel.prototype.showChat = function (chat) {\n        this.appendChat(chat);\n    };\n    PicaChatPanel.prototype.getChannel = function (channel) {\n        switch (channel) {\n            case ChatChannel.CurrentScene:\n                return utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("chat.current");\n            case ChatChannel.World:\n                return utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("chat.world");\n            default:\n                return utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("chat.system");\n        }\n    };\n    PicaChatPanel.prototype.setGiftData = function (content) {\n        this.giftPanel.setGiftDatas(content.commodities);\n    };\n    PicaChatPanel.prototype.appendChat = function (val) {\n        this.chatCatchArr.push(val);\n        if (this.chatCatchArr.length > this.chatMaxLen)\n            this.chatCatchArr.shift();\n        if (this.mTextArea) {\n            this.mTextArea.appendText(val);\n            this.mTextArea.scrollToBottom();\n        }\n        if (this.mInputText && this.mInputText instanceof _PicaChatInputPanel__WEBPACK_IMPORTED_MODULE_5__["PicaChatInputPanel"]) {\n            this.mInputText.appendChat(val);\n        }\n    };\n    PicaChatPanel.prototype.isShowChatPanel = function () {\n        if (!this.mTextArea || !this.mTextArea.visible)\n            return false;\n        return true;\n    };\n    PicaChatPanel.prototype.hide = function () {\n        if (this.mTextArea)\n            this.mTextArea.destroy();\n        if (this.mOutputText)\n            this.mOutputText.destroy();\n        this.mShow = false;\n        this.removeListen();\n        // this.removeInteractive();\n        _super.prototype.hide.call(this);\n    };\n    PicaChatPanel.prototype.addListen = function () {\n        _super.prototype.addListen.call(this);\n        if (!this.mInitialized)\n            return;\n        this.mChatBtn.setInteractive();\n        this.mEmojiBtn.setInteractive();\n        if (this.mTextArea.visible)\n            this.mScrollBtn.setInteractive();\n        this.mGiftBtn.setInteractive();\n        this.mTextArea.childrenMap.child.setInteractive();\n        this.mScrollBtn.on("drag", this.onDragHandler, this);\n        this.scene.input.setDraggable(this.mScrollBtn, true);\n        this.mChatBtn.on("pointerup", this.onShowInputHanldler, this);\n        this.mGiftBtn.on("pointerup", this.onGiftHandler, this);\n        this.mEmojiBtn.on("pointerup", this.onEmojiHandler, this);\n        this.render.emitter.on(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].CHAT, this.chatHandler, this);\n        // this.render.emitter.on("queryMarket", this.setGiftData, this);\n        this.render.emitter.on(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_PARTY_STATE, this.setGiftButtonState, this);\n    };\n    PicaChatPanel.prototype.removeListen = function () {\n        _super.prototype.removeListen.call(this);\n        if (!this.mInitialized)\n            return;\n        this.mChatBtn.disableInteractive();\n        this.mEmojiBtn.disableInteractive();\n        this.mScrollBtn.disableInteractive();\n        this.mGiftBtn.disableInteractive();\n        this.mTextArea.childrenMap.child.disableInteractive();\n        this.mEmojiBtn.off("pointerup", this.onEmojiHandler, this);\n        this.mScrollBtn.off("drag", this.onDragHandler, this);\n        this.mChatBtn.off("pointerup", this.onShowInputHanldler, this);\n        this.mGiftBtn.off("pointerup", this.onGiftHandler, this);\n        this.render.emitter.off(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].CHAT, this.chatHandler, this);\n        // this.render.emitter.off("queryMarket", this.setGiftData, this);\n        this.render.emitter.off(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_PARTY_STATE, this.setGiftButtonState, this);\n    };\n    PicaChatPanel.prototype.updateUIState = function (active) {\n        if (!this.mInitialized) {\n            return;\n        }\n        // if (active.name === "picachat.navigatebtn") {\n        //     if (this.mNavigateBtn.visible !== active.visible) {\n        //         this.mNavigateBtn.visible = active.visible;\n        //     }\n        // }\n    };\n    PicaChatPanel.prototype.destroy = function () {\n        if (this.mBackground)\n            this.mBackground.disableInteractive();\n        _super.prototype.destroy.call(this);\n    };\n    PicaChatPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "pica_chat/pica_chat.png", "pica_chat/pica_chat.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaChatPanel.prototype.init = function () {\n        var width = this.scene.cameras.main.width;\n        var height = this.scene.cameras.main.height;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        var zoom = this.scale;\n        this.setSize(width, 135 * this.dpr);\n        this.mTileContainer = this.scene.make.container(undefined, false);\n        this.mScrollBtn = this.scene.make.image({ x: 21 * this.dpr * zoom, key: this.key, frame: "scroll_btn" }, false).setScale(zoom);\n        this.mScrollBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mTitleBg = this.scene.make.image({ key: this.key, frame: "title_bg" }, false).setScale(zoom);\n        this.mChatBtn = this.scene.make.image({ x: 96 * this.dpr * zoom, key: this.key, frame: "chat_icon" }, false).setScale(zoom);\n        this.mHornBtn = this.scene.make.image({ x: 159 * this.dpr * zoom, key: this.key, frame: "horn_icon" }, false).setScale(zoom);\n        this.mEmojiBtn = this.scene.make.image({ x: 218 * this.dpr * zoom, key: this.key, frame: "emoji" }, false).setScale(zoom);\n        this.mGiftBtn = this.scene.make.image({ x: 218 * this.dpr * zoom, key: this.key, frame: "party_gift_icon" }, false).setScale(zoom);\n        // this.mNavigateBtn = this.scene.make.image({ x: 281 * this.dpr, key: this.key, frame: "more_btn" }, false).setScale(zoom);\n        var space = 20 * this.dpr;\n        this.mTitleBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mScrollBtn.x = this.mScrollBtn.width * 0.5 + 5 * this.dpr;\n        this.mScrollBtn.y = -this.mScrollBtn.height / 2 + this.mTitleBg.height;\n        this.mChatBtn.x = this.mScrollBtn.x + this.mScrollBtn.width * 0.5 + space + this.mChatBtn.width * 0.5;\n        this.mChatBtn.y = -this.mChatBtn.height / 2 + this.mTitleBg.height;\n        this.mChatBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mHornBtn.x = this.mChatBtn.x + this.mChatBtn.width * 0.5 + space + this.mHornBtn.width * 0.5;\n        this.mHornBtn.y = -this.mHornBtn.height / 2 + this.mTitleBg.height;\n        this.mHornBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mEmojiBtn.x = this.mHornBtn.x + this.mHornBtn.width * 0.5 + space + this.mEmojiBtn.width * 0.5;\n        this.mEmojiBtn.y = -this.mEmojiBtn.height / 2 + this.mTitleBg.height;\n        this.mEmojiBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mGiftBtn.x = this.mEmojiBtn.x + this.mEmojiBtn.width * 0.5 + space + this.mGiftBtn.width * 0.5;\n        this.mGiftBtn.y = -this.mGiftBtn.height / 2 + this.mTitleBg.height;\n        this.mGiftBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        // this.mNavigateBtn.y = -this.mNavigateBtn.height / 2 + this.mTitleBg.height;\n        // this.mNavigateBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mOutputText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.mScene, 0, 0, "", {\n            fontSize: 14 * this.dpr / zoom + "px",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n            stroke: "#000000",\n            strokeThickness: 1 * this.dpr * zoom,\n            textMask: false,\n            shadow: {\n                offsetX: 0,\n                offsetY: 0,\n                color: "#000",\n                blur: 4,\n                stroke: true,\n                fill: true\n            },\n            wrap: {\n                mode: "char",\n                width: width - 12 * this.dpr * zoom\n            }\n        });\n        this.mOutputText.setResolution(this.dpr);\n        var background = this.scene.make.graphics(undefined, false);\n        this.mTextArea = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["TextArea"](this.mScene, {\n            x: width / 2 + 4 * this.dpr * zoom,\n            y: 160 * this.dpr * zoom,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, 0.2),\n            textWidth: width - 4 * this.dpr * zoom,\n            textHeight: this.MAX_HEIGHT,\n            text: this.mOutputText,\n        })\n            .layout();\n        this.mTileContainer.add([\n            this.mTitleBg,\n            this.mChatBtn,\n            this.mHornBtn,\n            this.mEmojiBtn,\n            this.mGiftBtn,\n            this.mScrollBtn,\n        ]);\n        this.add([\n            this.mBackground,\n            this.mTileContainer,\n            this.mTextArea,\n            this.mOutputText,\n            background,\n        ]);\n        // this.mTextArea.setSliderEnable(false);\n        this.resize(this.width, 133 * this.dpr);\n        _super.prototype.init.call(this);\n        // this.removeInteractive();\n    };\n    PicaChatPanel.prototype.onDragHandler = function (pointer, dragX, dragY) {\n        var height = this.height + (pointer.prevPosition.y - pointer.position.y);\n        if (height > this.MAX_HEIGHT || height < this.MIN_HEIGHT) {\n            return;\n        }\n        this.resize(this.width, height);\n    };\n    PicaChatPanel.prototype.setGiftButtonState = function (isparty) {\n        if (this.giftPanel)\n            this.giftPanel.setGiftActive(isparty);\n    };\n    PicaChatPanel.prototype.onShowNavigateHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_showNavigate");\n    };\n    PicaChatPanel.prototype.onEmojiHandler = function () {\n        var id = this.render.displayManager.user.id;\n        this.render.mainPeer.setDragonBonesQueue(id, [{ animationName: "idle", scale: false, times: 1 }]);\n        this.render.physicalPeer.changePlayerState(id, "jump", 1);\n        // this.render.mainPeer.changePlayerState(id, "jump", 1);\n    };\n    PicaChatPanel.prototype.onGiftHandler = function () {\n        var _this = this;\n        if (!this.giftPanel || !this.giftPanel.visible) {\n            this.hideAllChildPanel();\n            if (!this.giftPanel) {\n                this.giftPanel = new _PicaGiftPanel__WEBPACK_IMPORTED_MODULE_6__["PicaGiftPanel"](this.scene, 0, 0, this.width, 175 * this.dpr, this.key, this.dpr, this.scale);\n                this.giftPanel.y = this.height - this.giftPanel.height * 0.5;\n                this.giftPanel.x = this.width * 0.5;\n                this.add(this.giftPanel);\n                this.giftPanel.resize();\n                this.giftPanel.on("showpropfun", this.showPropFun, this);\n                this.giftPanel.on("buyItem", this.onBuyItemHandler, this);\n                this.giftPanel.on("shownotice", this.showNoticeHandler, this);\n            }\n            this.resize(this.width, 185 * this.dpr);\n            this.giftPanel.show();\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_querymarket");\n            this.render.mainPeer.getCurRoom()\n                .then(function (curRoom) {\n                var openingParty = (curRoom) ? curRoom.openingParty : false;\n                _this.giftPanel.setGiftActive(openingParty);\n            });\n        }\n        else {\n            this.giftPanel.hide();\n            this.showChatTextArea();\n        }\n    };\n    PicaChatPanel.prototype.onShowInputHanldler = function () {\n        var _this = this;\n        // new InputPanel(this.scene);\n        this.hideAllChildPanel();\n        this.showChatTextArea();\n        if (this.mInputText) {\n            return;\n        }\n        var pktGlobal = window["pktGlobal"];\n        if (pktGlobal && pktGlobal.envPlatform === "Cordova") {\n            if (this.scene.cache.json.has("quickchat")) {\n                setTimeout(function () {\n                    _this.openAppInputPanel();\n                }, 20);\n            }\n            else {\n                var jsonUrl = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("/ui/quickchat/" + utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].language + ".json");\n                this.scene.load.json("quickchat", jsonUrl);\n                this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE, this.openAppInputPanel, this);\n                this.scene.load.start();\n            }\n        }\n        else {\n            this.mInputText = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["InputPanel"](this.scene, this.render);\n            this.mInputText.once("close", this.sendChat, this);\n        }\n    };\n    PicaChatPanel.prototype.sendChat = function (val) {\n        this.mInputText = undefined;\n        if (!val) {\n            return;\n        }\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_chat", val);\n    };\n    PicaChatPanel.prototype.openAppInputPanel = function () {\n        if (this.scene.cache.json.has("quickchat")) {\n            this.mInputText = new _PicaChatInputPanel__WEBPACK_IMPORTED_MODULE_5__["PicaChatInputPanel"](this.scene, this.render, this.key, this.chatCatchArr.concat());\n            this.mInputText.once("close", this.appCloseChat, this);\n            this.mInputText.on("send", this.appSendChat, this);\n            var quickArr = this.scene.cache.json.get("quickchat");\n            this.mInputText.setQuickChatData(quickArr.concat());\n            if (this.parentContainer)\n                this.parentContainer.visible = false;\n            this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE, this.openAppInputPanel, this);\n        }\n    };\n    PicaChatPanel.prototype.appSendChat = function (val) {\n        if (!val) {\n            return;\n        }\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_chat", val);\n    };\n    PicaChatPanel.prototype.appCloseChat = function () {\n        this.mInputText.off("send", this.appSendChat, this);\n        this.mInputText = undefined;\n        if (this.parentContainer)\n            this.parentContainer.visible = true;\n    };\n    PicaChatPanel.prototype.checkUpdateActive = function () {\n        var _this = this;\n        this.render.mainPeer.getCurRoom()\n            .then(function (curRoom) {\n            if (curRoom)\n                _this.setGiftButtonState(curRoom.openingParty);\n        });\n        this.render.mainPeer.getActiveUIData(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICACHAT_NAME)\n            .then(function (arr) {\n            if (arr) {\n                for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n                    var data = arr_1[_i];\n                    _this.updateUIState(data);\n                }\n            }\n        });\n    };\n    PicaChatPanel.prototype.hideAllChildPanel = function () {\n        if (this.giftPanel)\n            this.giftPanel.hide();\n        if (this.mTextArea)\n            this.mTextArea.visible = false;\n        this.mScrollBtn.disableInteractive();\n        this.showPanelHandler(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAHANDHELD_NAME, false);\n    };\n    PicaChatPanel.prototype.showChatTextArea = function () {\n        this.mTextArea.visible = true;\n        this.mScrollBtn.setInteractive();\n        this.showPanelHandler(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAHANDHELD_NAME, true);\n    };\n    PicaChatPanel.prototype.onBuyItemHandler = function (prop, data) {\n        var _this = this;\n        var alertView = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["AlertView"](this.uiManager);\n        var price = data.count * data.sellingPrice.price;\n        if (price > 0) {\n            alertView.show({\n                title: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.sendgift"),\n                text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.sendgifttips", { count: prop.quantity, name: data.name || data.shortName }),\n                oy: 302 * this.dpr * this.render.uiScale,\n                callback: function () {\n                    _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + _this.key + "_buyItem", prop);\n                },\n            });\n        }\n        else {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_buyItem", prop);\n        }\n    };\n    PicaChatPanel.prototype.showPropFun = function (config) {\n        this.showPanelHandler(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAPROPFUN_NAME, true, config);\n    };\n    PicaChatPanel.prototype.showNoticeHandler = function (text) {\n        var data = {\n            text: [{ text: text, node: undefined }]\n        }; // op_client.OP_VIRTUAL_WORLD_RES_CLIENT_SHOW_UI\n        this.showPanelHandler(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICANOTICE_NAME, true, data);\n    };\n    PicaChatPanel.prototype.showPanelHandler = function (panelName, isshow, data) {\n        if (!this.render) {\n            return;\n        }\n        if (isshow) {\n            this.render.mainPeer.showMediator(panelName, true, data);\n        }\n        else {\n            this.render.mainPeer.showMediator(panelName, false);\n        }\n    };\n    return PicaChatPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaChat/PicaChatPanel.ts?')},"./src/pica/render/ui/PicaChat/PicaGiftPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaGiftPanel", function() { return PicaGiftPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaGiftPanel = /** @class */ (function (_super) {\n    __extends(PicaGiftPanel, _super);\n    function PicaGiftPanel(scene, x, y, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.init();\n        return _this;\n    }\n    PicaGiftPanel.prototype.resize = function () {\n        if (this.mPropGrid)\n            this.mPropGrid.resetMask();\n    };\n    PicaGiftPanel.prototype.destroy = function () {\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    PicaGiftPanel.prototype.hide = function () {\n        this.visible = false;\n    };\n    PicaGiftPanel.prototype.show = function () {\n        this.visible = true;\n    };\n    PicaGiftPanel.prototype.setGiftDatas = function (datas) {\n        var len = 12 - datas.length;\n        var items = len > 0 ? datas.concat(new Array(len)) : datas;\n        this.mPropGrid.setItems(items);\n        var cell = this.mPropGrid.getCell(0);\n        if (cell && cell.container) {\n            this.onSelectItemHandler(cell.container);\n        }\n    };\n    PicaGiftPanel.prototype.setGiftActive = function (active) {\n        (this.sendButton).enable = active;\n    };\n    PicaGiftPanel.prototype.onUsePropHandler = function (data, tempdata, count) {\n        var prop = {\n            id: data.id,\n            quantity: count,\n            category: tempdata.category\n        };\n        this.curGiftData.remain -= count;\n        if (this.curGiftData.limit > 0 && this.curGiftData.remain <= 0) {\n            this.mPropGrid.refresh();\n        }\n        this.emit("buyItem", prop, data);\n    };\n    PicaGiftPanel.prototype.init = function () {\n        var _this = this;\n        var mBackground = this.scene.make.graphics(undefined, false);\n        mBackground.fillStyle(0x333333, 0.5);\n        mBackground.fillRect(-this.width * 0.5, -this.height * 0.5, this.width, this.height);\n        this.add(mBackground);\n        var propFrame = this.scene.textures.getFrame(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, "equp_bg");\n        var cellWidth = propFrame.width + 10 * this.dpr;\n        var cellHeight = propFrame.height + 10 * this.dpr;\n        var propGridConfig = {\n            x: 0,\n            y: -this.height * 0.5 + 60 * this.dpr,\n            table: {\n                width: this.width - 20 * this.dpr,\n                height: 120 * this.dpr,\n                columns: 2,\n                cellWidth: cellWidth,\n                cellHeight: cellHeight,\n                reuseCellContainer: true,\n                cellOriginX: 0.5,\n                cellOriginY: 0.5,\n                zoom: this.zoom,\n                mask: false\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new PicGiftItem(scene, 0, 0, _this.key, _this.dpr);\n                }\n                cellContainer.setItemData(item);\n                if (item && _this.curGiftData && _this.curGiftData.id === item.id) {\n                    cellContainer.isSelect = true;\n                    _this.curGiftItem = cellContainer;\n                }\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, propGridConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on("cellTap", function (cell) {\n            _this.onSelectItemHandler(cell);\n        });\n        this.add(this.mPropGrid);\n        this.giftName = this.scene.make.text({\n            x: -this.width * 0.5 + 10 * this.dpr, y: this.mPropGrid.y + this.mPropGrid.height * 0.5 + 15 * this.dpr, text: "",\n            style: { fontSize: 16 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#FFD248" }\n        }).setOrigin(0, 0.5);\n        this.add(this.giftName);\n        this.giftPriceImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, this.giftName.y);\n        this.giftPriceImage.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "iv_coin");\n        this.add(this.giftPriceImage);\n        this.giftValue = this.scene.make.text({\n            x: 0, y: this.giftName.y, text: "",\n            style: { fontSize: 16 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#FFD248" }\n        }).setOrigin(0, 0.5);\n        this.add(this.giftValue);\n        this.sendButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, 0, 95 * this.dpr, 36 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "yellow_btn_normal_s", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("chat.givegift"), this.dpr, this.scale, {\n            left: 8 * this.dpr,\n            top: 8 * this.dpr,\n            right: 8 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.add(this.sendButton);\n        this.sendButton.setTextStyle({ fontSize: 16 * this.dpr, color: "#996600", fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT });\n        this.sendButton.setFontStyle("bold");\n        this.sendButton.setPosition(this.width * 0.5 - this.sendButton.width * 0.5 - 10 * this.dpr, this.height * 0.5 - this.sendButton.height * 0.5 - 10 * this.dpr);\n        this.sendButton.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onSendHandler, this);\n        this.giftDescr = this.scene.make.text({\n            x: this.giftName.x, y: this.giftName.y + this.giftName.height * 0.5 + 15 * this.dpr, text: "",\n            style: { fontSize: 14 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#999999" }\n        }).setOrigin(0, 0.5);\n        this.add(this.giftDescr);\n    };\n    PicaGiftPanel.prototype.onSelectItemHandler = function (item) {\n        var data = item.itemData;\n        if (!data)\n            return;\n        if (this.curGiftItem)\n            this.curGiftItem.isSelect = false;\n        item.isSelect = true;\n        this.curGiftItem = item;\n        this.curGiftData = data;\n        this.giftName.text = data.name;\n        var price = data.price[0];\n        this.giftPriceImage.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, utils__WEBPACK_IMPORTED_MODULE_3__["Coin"].getIcon(price.coinType));\n        this.giftPriceImage.x = this.giftName.x + this.giftName.width + 5 * this.dpr + this.giftPriceImage.width * 0.5;\n        this.giftValue.text = price.price + "";\n        this.giftValue.x = this.giftPriceImage.x + this.giftPriceImage.width * 0.5 + 5 * this.dpr;\n        this.giftDescr.text = data.des;\n    };\n    PicaGiftPanel.prototype.onSendHandler = function () {\n        if (!this.curGiftData)\n            return;\n        if (this.curGiftData.limit > 0 && this.curGiftData.remain <= 0) {\n            var tipsdata = { text: [{ text: "", node: undefined }] }; // op_client.OP_VIRTUAL_WORLD_RES_CLIENT_SHOW_UI\n            this.emit("shownotice", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("party.giftsell"));\n            return;\n        }\n        var data = this.getBuyPackageData();\n        var title = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("chat.givegift");\n        var url = this.curGiftData.icon;\n        var slider = data.sellingPrice.price > 0 ? true : false;\n        var resultHandler = { key: this.key, confirmFunc: "onUsePropHandler", confirmAddData: data };\n        var config = {\n            resultHandler: resultHandler, data: data, url: url, title: title, slider: slider,\n            line: true\n        }; // PicaPropFunConfig\n        this.emit("showpropfun", config);\n    };\n    PicaGiftPanel.prototype.getBuyPackageData = function () {\n        var propdata = this.curGiftData; // op_client.IMarketCommodity\n        var itemdata = {\n            id: propdata.id,\n            sellingPrice: propdata.price[0],\n            name: propdata.name,\n            shortName: propdata.shortName,\n            category: propdata.category,\n            count: propdata.price[0].price > 0 ? 99 : 1\n        }; // op_client.CountablePackageItem\n        return itemdata;\n    };\n    return PicaGiftPanel;\n}(Phaser.GameObjects.Container));\n\nvar PicGiftItem = /** @class */ (function (_super) {\n    __extends(PicGiftItem, _super);\n    function PicGiftItem(scene, x, y, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.mIsSelect = false;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.bg = _this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, frame: "equp_bg" });\n        _this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.selectbg = _this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, frame: "selected_icon_bg" });\n        _this.selectbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, 0);\n        _this.add([_this.bg, _this.selectbg, _this.icon]);\n        _this.setSize(_this.selectbg.width, _this.selectbg.height);\n        return _this;\n    }\n    PicGiftItem.prototype.setItemData = function (data) {\n        var _this = this;\n        this.isSelect = false;\n        this.itemData = data;\n        if (!data) {\n            this.icon.visible = false;\n            this.selectbg.visible = false;\n            return;\n        }\n        this.icon.visible = true;\n        this.selectbg.visible = this.mIsSelect;\n        var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(data.icon);\n        this.icon.load(url, this, function () {\n            _this.icon.scale = _this.dpr;\n        });\n        if (data.limit > 0 && data.remain <= 0) {\n            this.icon.setTintFill(0x888888);\n        }\n        else {\n            this.icon.clearTint();\n        }\n    };\n    Object.defineProperty(PicGiftItem.prototype, "isSelect", {\n        get: function () {\n            return this.mIsSelect;\n        },\n        set: function (value) {\n            this.mIsSelect = value;\n            this.selectbg.visible = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PicGiftItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaChat/PicaGiftPanel.ts?')},"./src/pica/render/ui/PicaCompose/PicaComposePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaComposePanel", function() { return PicaComposePanel; });\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var _Components_detail_display__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Components/detail.display */ "./src/pica/render/ui/Components/detail.display.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar PicaComposePanel = /** @class */ (function (_super) {\n    __extends(PicaComposePanel, _super);\n    function PicaComposePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICACOMPOSE_NAME;\n        return _this;\n    }\n    PicaComposePanel.prototype.resize = function (width, height) {\n        _super.prototype.resize.call(this, width, height);\n        this.content.x = width * 0.5;\n        this.content.y = height * 0.5;\n        this.mGrideTable.resetMask();\n        this.materialGameScroll.refreshMask();\n        this.setSize(width, height);\n    };\n    PicaComposePanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    };\n    PicaComposePanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.makeBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap), this.onMakeHandler, this);\n    };\n    PicaComposePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.makeBtn.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap), this.onMakeHandler, this);\n    };\n    PicaComposePanel.prototype.preload = function () {\n        this.addAtlas(this.key, "compose/compose.png", "compose/compose.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaComposePanel.prototype.init = function () {\n        var _this = this;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(width, height);\n        this.add(this.content);\n        var bggraphics = this.scene.make.graphics(undefined, false);\n        bggraphics.clear();\n        bggraphics.fillGradientStyle(0x7062EC, 0x7062EC, 0xCC99F5, 0xCC99F5);\n        bggraphics.fillRect(-width * 0.5, -height * 0.5, width, height);\n        var bg = this.scene.make.image({ key: this.key, frame: "main_bg" });\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        bg.y = -height * 0.5 + bg.height * 0.5;\n        bg.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.cameraWidth, this.cameraHeight), Phaser.Geom.Rectangle.Contains);\n        bg.displayWidth = width;\n        this.content.add([bggraphics, bg]);\n        var titleBg = this.scene.make.image({ key: this.key, frame: "title_bg" });\n        titleBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        titleBg.y = -height * 0.5 + 23 * this.dpr;\n        var titleTex = this.scene.make.text({ x: 0, y: titleBg.y, text: utils__WEBPACK_IMPORTED_MODULE_6__["i18n"].t("compose.title"), style: { color: "#8B5603", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        titleTex.setFontStyle("bold");\n        this.content.add([titleBg, titleTex]);\n        var backBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, "back_arrow", "back_arrow");\n        backBtn.setPosition(-width * 0.5 + 20 * this.dpr, -height * 0.5 + 30 * this.dpr);\n        backBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onBackHandler, this);\n        this.content.add(backBtn);\n        this.mDetailDisplay = new _Components_detail_display__WEBPACK_IMPORTED_MODULE_3__["DetailDisplay"](this.scene, this.render);\n        this.mDetailDisplay.y = -140 * this.dpr;\n        this.mDetailDisplay.setFixedScale(2 * this.dpr / this.scale);\n        this.content.add(this.mDetailDisplay);\n        this.mDetailBubble = new DetailBubble(this.scene, this.dpr);\n        this.mDetailBubble.x = -width * 0.5;\n        this.mDetailBubble.y = height * 0.5 - 360 * this.dpr;\n        this.content.add(this.mDetailBubble);\n        this.makeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSliceButton"](this.scene, Math.ceil(width * 0.5 - 60 * this.dpr), Math.ceil(height * 0.5 - 310 * this.dpr), 106 * this.dpr, 40 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_6__["i18n"].t("compose.make"), this.dpr, 1, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 12 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        this.makeBtn.setTextStyle({ fontSize: 16 * this.dpr, color: "#996600" });\n        // this.makeBtn.on("click", this.onMakeHandler, this);\n        this.content.add(this.makeBtn);\n        var materialConWdith = 360 * this.dpr, materialConHeight = 92 * this.dpr;\n        this.materialCon = this.scene.make.container(undefined, false).setSize(materialConWdith, materialConHeight);\n        this.content.add(this.materialCon);\n        this.materialCon.setPosition(0, height * 0.5 - 230 * this.dpr);\n        var materialbg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: "sourcelist_bg" });\n        materialbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        materialbg.displayWidth = width;\n        var materialTitle = this.scene.make.text({\n            x: 0,\n            y: -materialConHeight * 0.5 + 12 * this.dpr,\n            text: utils__WEBPACK_IMPORTED_MODULE_6__["i18n"].t("compose.needMaterials"),\n            style: {\n                color: "#ffffff",\n                fontSize: 13 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT,\n                wordWrap: {\n                    width: 90 * this.dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false).setOrigin(0.5);\n        var materialLine = this.scene.make.image({ x: -10 * this.dpr, y: materialTitle.y, key: this.key, frame: "sourcelist_title_1" });\n        materialLine.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var materialLine2 = this.scene.make.image({ x: 10 * this.dpr, y: materialTitle.y, key: this.key, frame: "sourcelist_title_1" });\n        materialLine2.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var linePosx = -materialTitle.width * 0.5 - materialLine.width * 0.5 - 10 * this.dpr;\n        materialLine.setPosition(linePosx, materialTitle.y);\n        materialLine2.setPosition(-linePosx, materialTitle.y).rotation = -Math.PI;\n        var materialLine3 = this.scene.make.image({ x: 0, y: materialTitle.y + 12 * this.dpr, key: this.key, frame: "separator" });\n        materialLine3.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.materialCon.add([materialbg, materialTitle, materialLine, materialLine2, materialLine3]);\n        this.materialGameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["GameScroller"](this.scene, {\n            x: 0,\n            y: 10 * this.dpr,\n            width: width,\n            height: 70 * this.dpr,\n            zoom: this.scale,\n            align: 2,\n            orientation: 1,\n            dpr: this.dpr,\n            space: 10 * this.dpr,\n            padding: { left: 10 * this.dpr },\n            cellupCallBack: function (gameobject) {\n                _this.onMaterialItemHandler(gameobject);\n            }\n        });\n        this.materialCon.add(this.materialGameScroll);\n        this.itemtips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["ItemInfoTips"](this.scene, 121 * this.dpr, 46 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, "tips_bg", this.dpr);\n        this.itemtips.setVisible(false);\n        this.content.add(this.itemtips);\n        var propFrame = this.scene.textures.getFrame(this.key, "bprint_bg_2");\n        var capW = propFrame.width + 10 * this.dpr;\n        var capH = propFrame.height + 12 * this.dpr;\n        var gridHeight = 190 * this.dpr;\n        var gridY = height * 0.5 - gridHeight * 0.5 + 20 * this.dpr;\n        var tableConfig = {\n            x: 0,\n            y: gridY,\n            table: {\n                width: width,\n                height: gridHeight,\n                columns: 2,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                zoom: this.scale\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new ComposeItem(scene, _this.key, _this.dpr, _this.scale);\n                }\n                cellContainer.setItemData(item);\n                if (item && _this.mSelectItemData && item.skill.id === _this.mSelectItemData.skill.id) {\n                    cellContainer.select = true;\n                    _this.mSelectItem = cellContainer;\n                }\n                return cellContainer;\n            },\n        };\n        this.mGrideTable = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["GameGridTable"](this.scene, tableConfig);\n        this.mGrideTable.layout();\n        this.mGrideTable.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onSelectItemHandler(cell);\n            }\n        });\n        this.content.add(this.mGrideTable);\n        this.resize(width, height);\n        _super.prototype.init.call(this);\n        if (this.mShowData)\n            this.setComposeData(this.mShowData.skills);\n    };\n    PicaComposePanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaComposePanel.prototype.setComposeData = function (datas) {\n        if (datas && datas.length > 0) {\n            this.mGrideTable.setItems(datas);\n            var cell = this.mSelectItem ? this.mSelectItem : this.mGrideTable.getCell(0).container;\n            this.onSelectItemHandler(cell);\n        }\n    };\n    // public setComposeDetialData(data: op_client.OP_VIRTUAL_WORLD_RES_CLIENT_PKT_CRAFT_QUERY_FORMULA) {\n    //     this.mDetailBubble.setDetailData(data.productName, data.productDes);\n    //     this.setDetailDisplay(data);\n    //     this.setMaterialItems(data.materials);\n    // }\n    PicaComposePanel.prototype.setComposeDetialData = function (data) {\n        this.mDetailBubble.setDetailData(data.productName, data.productDes);\n        this.setDetailDisplay(data);\n        this.setMaterialItems(data.materials);\n    };\n    PicaComposePanel.prototype.setDetailDisplay = function (data) {\n        this.mDetailDisplay.loadSprite("loading_ui", utils__WEBPACK_IMPORTED_MODULE_6__["Url"].getUIRes(this.dpr, "loading_ui"), utils__WEBPACK_IMPORTED_MODULE_6__["Url"].getUIRes(this.dpr, "loading_ui"));\n        var resData = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_client"].OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE_ITEM_RESOURCE();\n        resData.animations = data.productAnimations;\n        resData.display = data.productDisplay;\n        resData.avatar = data.productAvatar;\n        if (resData.display) {\n            this.mDetailDisplay.loadDisplay(resData);\n        }\n        else if (resData.avatar) {\n            var point = new Phaser.Geom.Point();\n            point.x = 0;\n            point.y = 20 * this.dpr;\n            this.mDetailDisplay.loadAvatar(resData, 2 * this.dpr, point);\n        }\n        else {\n            // this.mDetailDisplay.loadUrl(this.mSelectedProp.icon);\n        }\n    };\n    PicaComposePanel.prototype.onSelectItemHandler = function (item) {\n        var data = item.itemData;\n        // this.emit("reqformula", data.id);\n        this.mSelectItemData = item.itemData;\n        this.makeBtn.enable = data.skill.active && data.skill.qualified;\n        if (this.mSelectItem)\n            this.mSelectItem.select = false;\n        this.mSelectItem = item;\n        item.select = true;\n        this.setComposeDetialData(data);\n    };\n    PicaComposePanel.prototype.setMaterialItems = function (datas) {\n        var len = datas.length;\n        var items = [];\n        this.materialGameScroll.clearItems();\n        for (var i = 0; i < len; i++) {\n            var item = new ComposeMaterialItem(this.scene, this.key, this.dpr);\n            item.y = 0;\n            items.push(item);\n            item.setItemData(datas[i]);\n            item.setData("itemData", datas[i]);\n            this.materialGameScroll.addItem(item);\n        }\n        this.materialGameScroll.Sort();\n    };\n    PicaComposePanel.prototype.onMaterialItemHandler = function (item) {\n        this.itemtips.setVisible(true);\n        this.itemtips.setItemData(item.itemData);\n        this.itemtips.setTipsPosition(item, this.content, -10 * this.dpr);\n    };\n    PicaComposePanel.prototype.onMakeHandler = function () {\n        if (this.mSelectItemData) {\n            var content = {\n                text: [{\n                        // text: `${this.mSelectItemData.productName}`\n                        text: utils__WEBPACK_IMPORTED_MODULE_6__["i18n"].t("compose.confirmation", { name: this.mSelectItemData.productName })\n                    }],\n                title: [{\n                        text: utils__WEBPACK_IMPORTED_MODULE_6__["i18n"].t("compose.synthesis")\n                    }],\n                button: [\n                    {\n                        text: utils__WEBPACK_IMPORTED_MODULE_6__["i18n"].t("common.cancel"),\n                        local: true,\n                        param: 0\n                    },\n                    {\n                        text: utils__WEBPACK_IMPORTED_MODULE_6__["i18n"].t("common.confirm"),\n                        local: true,\n                        clickhandler: {\n                            key: this.key,\n                            clickfun: "onConfirmMakeHandler",\n                        },\n                        param: 1\n                    }\n                ]\n            };\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICACOMPOSE_NAME + "_showpanel", { panel: structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICAMESSAGEBOX_NAME, data: content });\n        }\n    };\n    PicaComposePanel.prototype.onConfirmMakeHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICACOMPOSE_NAME + "_reqUseFormula", this.mSelectItemData.skill.id);\n    };\n    PicaComposePanel.prototype.onBackHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICACOMPOSE_NAME + "_hide");\n    };\n    return PicaComposePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\nvar DetailBubble = /** @class */ (function (_super) {\n    __extends(DetailBubble, _super);\n    function DetailBubble(scene, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.mDetailBubble = _this.scene.make.graphics(undefined, false);\n        var bubbleW = 198 * dpr;\n        var bubbleH = 96 * dpr;\n        _this.mDetailBubble = _this.scene.make.graphics(undefined, false);\n        _this.mDetailBubble.fillStyle(0xFFFFFF, 0.1);\n        _this.mDetailBubble.fillRoundedRect(0, 0, bubbleW, bubbleH);\n        _this.mItemName = _this.scene.make.text({\n            x: 7 * _this.dpr,\n            y: 9 * _this.dpr,\n            text: "",\n            style: {\n                fontSize: 12 * _this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT,\n                color: "#8C55E1",\n                align: "center"\n            }\n        });\n        _this.mDesText = _this.scene.make.text({\n            x: 8 * dpr,\n            y: 30 * dpr,\n            style: {\n                color: "#ffffff",\n                fontSize: 10 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT,\n                wordWrap: {\n                    width: 180 * dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false);\n        _this.add([_this.mDetailBubble, _this.mItemName, _this.mDesText]);\n        _this.setSize(bubbleW, bubbleH);\n        return _this;\n    }\n    DetailBubble.prototype.setDetailData = function (name, des) {\n        this.mItemName.setText(name);\n        this.mDesText.setText(des);\n        this.resize();\n    };\n    DetailBubble.prototype.resize = function (w, h) {\n        if (w === undefined)\n            w = this.width;\n        var bubbleH = this.mDesText.height + 60 * this.dpr;\n        if (w === this.width && bubbleH === this.height) {\n            return;\n        }\n        this.mDetailBubble.clear();\n        this.mDetailBubble.fillStyle(0xFFFFFF, 0.1);\n        this.mDetailBubble.fillRoundedRect(0, 0, w, bubbleH);\n        this.setSize(w, bubbleH);\n        // this.mDetailBubbleContainer.y = this.height - this.y - this.mDetailBubbleContainer.height - 6 * this.dpr;\n    };\n    return DetailBubble;\n}(Phaser.GameObjects.Container));\nvar ComposeItem = /** @class */ (function (_super) {\n    __extends(ComposeItem, _super);\n    function ComposeItem(scene, key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.zoom = 1;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.zoom = zoom;\n        _this.bg = _this.scene.make.image({ key: _this.key, frame: "bprint_bg_1" });\n        _this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.itemIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["DynamicImage"](_this.scene, 0, 0);\n        _this.itemIcon.scale = _this.dpr / _this.zoom;\n        var width = _this.width;\n        var height = _this.height;\n        _this.newIcon = _this.scene.make.image({ key: _this.key, frame: "tag_new" });\n        _this.newIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.newIcon.setPosition(-width * 0.5 + 3 * dpr, -height * 0.5 + 3 * dpr);\n        _this.newText = _this.scene.make.text({\n            x: _this.newIcon.x,\n            y: _this.newIcon.y,\n            text: "N",\n            style: {\n                fontSize: 11 * _this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT,\n                color: "#ffffff",\n                align: "center"\n            }\n        }).setOrigin(0.5);\n        _this.qualityIcon = _this.scene.make.image({ key: _this.key, frame: "tag_rank_a" });\n        _this.qualityIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.qualityIcon.setPosition(-width * 0.5 + _this.qualityIcon.width * 0.5 - 2 * dpr, height * 0.5 - _this.qualityIcon.height * 0.5);\n        _this.qualityTex = _this.scene.make.text({\n            x: _this.qualityIcon.x,\n            y: _this.qualityIcon.y,\n            text: "A",\n            style: {\n                fontSize: 11 * _this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT,\n                color: "#ffffff",\n                align: "center"\n            }\n        }).setOrigin(0.5);\n        _this.qualifiedIcon = _this.scene.make.image({ key: _this.key, frame: "tag_ready" }, false);\n        _this.qualifiedIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.qualifiedIcon.setOrigin(1).setPosition(width * 0.5 - 3 * dpr, height * 0.5 - 3 * dpr);\n        _this.lockbg = _this.scene.make.image({ key: _this.key, frame: "bprint_mask" });\n        _this.lockbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.lockIcon = _this.scene.make.image({ key: _this.key, frame: "lock" });\n        _this.lockIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.add([_this.bg, _this.itemIcon, _this.newIcon, _this.newText, _this.qualityIcon, _this.qualityTex, _this.lockbg, _this.lockIcon]);\n        return _this;\n    }\n    ComposeItem.prototype.setItemData = function (data) {\n        this.itemData = data;\n        var skill = data.skill;\n        var active = skill.active;\n        this.newIcon.visible = active;\n        this.newText.visible = active;\n        this.qualityIcon.visible = active;\n        this.qualityTex.visible = active;\n        this.qualityTex.text = skill.quality;\n        this.qualifiedIcon.visible = active && skill.qualified;\n        this.lockbg.visible = !skill.active;\n        this.lockIcon.visible = !skill.active;\n        this.setQualityTexture(skill.quality);\n        if (skill.display)\n            this.setItemIcon(skill.display);\n        this.select = false;\n    };\n    Object.defineProperty(ComposeItem.prototype, "select", {\n        set: function (value) {\n            if (value)\n                this.bg.setFrame("bprint_bg_2");\n            else\n                this.bg.setFrame("bprint_bg_1");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ComposeItem.prototype.setItemIcon = function (display) {\n        var _this = this;\n        var url = utils__WEBPACK_IMPORTED_MODULE_6__["Url"].getOsdRes(display.texturePath);\n        this.itemIcon.load(url, this, function () {\n            _this.itemIcon.setPosition(0, 0);\n        });\n    };\n    ComposeItem.prototype.setQualityTexture = function (quality) {\n        this.qualityIcon.visible = true;\n        if (quality === "A")\n            this.qualityIcon.setFrame("tag_rank_a");\n        else if (quality === "B")\n            this.qualityIcon.setFrame("tag_rank_b");\n        else if (quality === "C")\n            this.qualityIcon.setFrame("tag_rank_c");\n        else\n            this.qualityIcon.visible = false;\n    };\n    return ComposeItem;\n}(Phaser.GameObjects.Container));\nvar ComposeMaterialItem = /** @class */ (function (_super) {\n    __extends(ComposeMaterialItem, _super);\n    function ComposeMaterialItem(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        var bg = _this.scene.make.image({ key: _this.key, frame: "source_bg" });\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.itemIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["DynamicImage"](scene, 0, 0);\n        _this.itemCount = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](_this.scene, 0, 0, "", {})\n            .setOrigin(0.5).setFontSize(11 * dpr).setFontFamily(utils__WEBPACK_IMPORTED_MODULE_6__["Font"].NUMBER);\n        _this.add([bg, _this.itemIcon, _this.itemCount]);\n        _this.setSize(bg.width, bg.height);\n        _this.itemCount.y = _this.height * 0.5;\n        return _this;\n    }\n    ComposeMaterialItem.prototype.setItemData = function (data) {\n        var _this = this;\n        this.itemData = data;\n        this.itemCount.text = this.getCountText(data.count, data.neededCount);\n        var url = utils__WEBPACK_IMPORTED_MODULE_6__["Url"].getOsdRes(data.texturePath);\n        this.itemIcon.load(url, this, function () {\n            _this.itemIcon.scale = _this.dpr;\n            _this.itemIcon.setPosition(0, 0);\n        });\n    };\n    ComposeMaterialItem.prototype.getCountText = function (count, needcount) {\n        var color = (count >= needcount ? "#ffffff" : "#ff0000");\n        var text = "[stroke=" + color + "][color=" + color + "]" + count + "[/color][/stroke]/" + needcount;\n        return text;\n    };\n    return ComposeMaterialItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaCompose/PicaComposePanel.ts?')},"./src/pica/render/ui/PicaCreateRole/PicaCreateRolePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaCreateRolePanel", function() { return PicaCreateRolePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar PicaCreateRolePanel = /** @class */ (function (_super) {\n    __extends(PicaCreateRolePanel, _super);\n    function PicaCreateRolePanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.suitDatasMap = new Map();\n        _this.curSuitMap = new Map();\n        _this.suitItemMap = new Map();\n        _this.setTween(false);\n        var container = _this.scene.add.container(0, 0);\n        container.add(_this);\n        _this.scene.scale.on("resize", _this.onResize, _this);\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon];\n        _this.textures = [{ atlasName: "Create_bg_texture", folder: "texture" }, { atlasName: "Create_role_bg", folder: "texture" }];\n        _this.mMediator = _this.render.mainPeer[structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICACREATEROLE_NAME];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICACREATEROLE_NAME;\n        return _this;\n    }\n    PicaCreateRolePanel.prototype.resize = function (wid, hei) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content.x = width * 0.5;\n        this.content.y = height * 0.5;\n    };\n    PicaCreateRolePanel.prototype.onShow = function () {\n        if (this.showData && this.showData.avatars) {\n            this.setSuitDatas(this.showData.avatars);\n        }\n    };\n    PicaCreateRolePanel.prototype.onResize = function (gameSize) {\n        this.resize(gameSize.width, gameSize.height);\n    };\n    PicaCreateRolePanel.prototype.setSuitDatas = function (datas) {\n        var _this = this;\n        this.suitDatasMap.clear();\n        for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {\n            var data = datas_1[_i];\n            var arr = this.suitDatasMap.get(data.suitType);\n            if (!arr) {\n                arr = [];\n                this.suitDatasMap.set(data.suitType, arr);\n            }\n            arr.push(data);\n        }\n        this.suitDatasMap.forEach(function (value, key) {\n            if (key !== "base" && key !== "costume") {\n                var item = _this.suitItemMap.get(key);\n                item.setSuitDatas(value);\n            }\n            else if (key === "base") {\n                _this.curSuitMap.set(key, value[1]);\n            }\n            else if (key === "costume") {\n                _this.curSuitMap.set(key, value[0]);\n            }\n        });\n        this.onSkinHandler(undefined, this.skinCon.getAt(1));\n        this.onSixHandler(undefined, this.manButton);\n    };\n    PicaCreateRolePanel.prototype.init = function () {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content = this.scene.make.container(undefined, false);\n        this.add(this.content);\n        this.commonBackground = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["CommonBackground"](this.scene, 0, 0, width, height);\n        this.mBottomBg = this.scene.make.image({ key: "Create_bg_texture" });\n        this.mBottomBg.y = height * 0.5 - this.mBottomBg.height * 0.5;\n        var mTopBg = this.scene.make.image({ key: "Create_role_bg" });\n        mTopBg.y = -150 * this.dpr;\n        this.dragonbones = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["UIDragonbonesDisplay"](this.scene, this.render);\n        this.dragonbones.scale = this.dpr * 2.2;\n        this.dragonbones.y = mTopBg.y + 45 * this.dpr;\n        this.dragonbones.on("initialized", this.loadDragonbonesComplete, this);\n        var avatarclickCon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["ButtonEventDispatcher"](this.scene, 0, 0);\n        avatarclickCon.setSize(130 * this.dpr, 130 * this.dpr);\n        avatarclickCon.enable = true;\n        avatarclickCon.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onAvatarClickHandler, this);\n        avatarclickCon.y = this.dragonbones.y - 65 * this.dpr;\n        this.backButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, "back_arrow");\n        this.backButton.x = -width * 0.5 + this.backButton.width * 0.5 + 20 * this.dpr;\n        this.backButton.y = -height * 0.5 + this.backButton.height * 0.5 + 23 * this.dpr;\n        this.backButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onBackHandler, this);\n        this.content.add([this.commonBackground, this.mBottomBg, mTopBg, this.dragonbones, avatarclickCon]);\n        this.createSixCon();\n        this.createSuitCon();\n        _super.prototype.init.call(this);\n        this.resize(0, 0);\n    };\n    PicaCreateRolePanel.prototype.createSixCon = function () {\n        this.sixCon = this.scene.make.container(undefined, false);\n        this.sixCon.y = 70 * this.dpr;\n        this.manButton = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["ToggleButton"](this.scene, 0, 0, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, "Create_gender_uncheck", "Create_gender_select", this.dpr);\n        this.manButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSixHandler, this);\n        this.manIcon = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, frame: "Create_gender_boy" });\n        this.manButton.add(this.manIcon);\n        this.manButton.x = -60 * this.dpr;\n        this.manButton.y = -60 * this.dpr;\n        this.womanButton = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["ToggleButton"](this.scene, 0, 0, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, "Create_gender_uncheck", "Create_gender_select", this.dpr);\n        this.womanButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSixHandler, this);\n        this.womanIcon = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, frame: "Create_gender_girl" });\n        this.womanButton.add(this.womanIcon);\n        this.womanButton.x = -this.manButton.x;\n        this.womanButton.y = this.manButton.y;\n        this.nextButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, 70 * this.dpr, 191 * this.dpr, 55 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("creatrole.next"), this.dpr, this.scale, utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].button(this.dpr));\n        this.nextButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].brownishStyle(this.dpr, 23));\n        // this.nextButton.setFontStyle("bold");\n        this.nextButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onNextHandler, this);\n        this.sixCon.add([this.manButton, this.womanButton, this.nextButton]);\n        this.content.add(this.sixCon);\n    };\n    PicaCreateRolePanel.prototype.createSuitCon = function () {\n        var posy = -40 * this.dpr;\n        var posx = -115 * this.dpr;\n        this.skinCon = this.scene.make.container(undefined, false);\n        for (var i = 0; i < 5; i++) {\n            var indexed = i + 1;\n            var frame = "Create_complexion_" + indexed;\n            var button = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, frame);\n            button.name = indexed + "";\n            button.y = posy;\n            button.x = posx;\n            button.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSkinHandler, this);\n            this.skinCon.add(button);\n            posx += 25 * this.dpr + 32 * this.dpr;\n        }\n        this.selectSkinBg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, frame: "Create_complexion_select" });\n        this.skinCon.add(this.selectSkinBg);\n        posy += 56 * this.dpr;\n        this.suitCon = this.scene.make.container(undefined, false);\n        var tags = ["hair", "eye", "mouse"];\n        var texts = [utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("creatrole.hair"), utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("creatrole.eye"), utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("creatrole.mouth")];\n        for (var i = 0; i < tags.length; i++) {\n            var tag = tags[i];\n            var text = texts[i];\n            var item = new SelectSuitAvatarItem(this.scene, 264 * this.dpr, 33 * this.dpr, this.dpr, tag, text);\n            item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_1__["Handler"](this, this.onSuitDataHandler));\n            item.y = posy;\n            posy += 60 * this.dpr;\n            this.suitCon.add(item);\n            this.suitItemMap.set(tag, item);\n        }\n        this.enterButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, posy + 48 * this.dpr, 191 * this.dpr, 55 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("creatrole.gointo"), this.dpr, this.scale, utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].button(this.dpr));\n        this.enterButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].brownishStyle(this.dpr, 23));\n        this.enterButton.setFontStyle("bold");\n        this.enterButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSubmitHandler, this);\n        this.suitCon.add([this.skinCon, this.enterButton]);\n    };\n    PicaCreateRolePanel.prototype.onSubmitHandler = function () {\n        var ids = [];\n        this.curSuitMap.forEach(function (value, key) {\n            ids.push(value.id);\n        });\n        this.mediator.submit(this.mgender, ids);\n    };\n    PicaCreateRolePanel.prototype.onNextHandler = function () {\n        this.suitCon.visible = true;\n        this.content.add(this.suitCon);\n        this.content.remove(this.sixCon);\n        this.content.add(this.backButton);\n    };\n    PicaCreateRolePanel.prototype.onAvatarClickHandler = function () {\n        var anis = ["walk", "run", "greet01"];\n        var ani = anis[Math.floor(Math.random() * (anis.length))];\n        var aniData = {\n            name: (ani),\n            flip: false,\n            times: 1,\n            playingQueue: {\n                name: "idle", playTimes: -1\n            }\n        };\n        this.dragonbones.play(aniData);\n    };\n    PicaCreateRolePanel.prototype.onSixHandler = function (pointer, button) {\n        if (this.manButton === button) {\n            this.mgender = pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_def"].Gender.Male;\n            this.womanButton.isOn = false;\n        }\n        else if (this.womanButton === button) {\n            this.mgender = pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_def"].Gender.Female;\n            this.manButton.isOn = false;\n        }\n        button.isOn = true;\n        this.setSixedSuitsData(this.mgender);\n    };\n    PicaCreateRolePanel.prototype.setSixedSuitsData = function (gender) {\n        var hairindexed = gender === pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_def"].Gender.Female ? 3 : 0;\n        var eyeIndexed = gender === pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_def"].Gender.Female ? 2 : 0;\n        var mouthIndexed = gender === pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_def"].Gender.Female ? 3 : 1;\n        this.suitItemMap.get("hair").setInexed(hairindexed);\n        this.suitItemMap.get("eye").setInexed(eyeIndexed);\n        this.suitItemMap.get("mouse").setInexed(mouthIndexed);\n        this.displayAvatar();\n    };\n    PicaCreateRolePanel.prototype.onBackHandler = function () {\n        if (this.suitCon.parentContainer) {\n            this.suitCon.visible = false;\n            this.content.remove(this.suitCon);\n        }\n        this.content.add(this.sixCon);\n        this.content.remove(this.backButton);\n    };\n    PicaCreateRolePanel.prototype.onSkinHandler = function (pointer, button) {\n        var suitType = "base";\n        var index = Number(button.name) - 1;\n        var arr = this.suitDatasMap.get(suitType);\n        var data = arr[index];\n        this.curSuitMap.set(suitType, data);\n        this.selectSkinBg.x = button.x;\n        this.selectSkinBg.y = button.y;\n        this.displayAvatar();\n    };\n    PicaCreateRolePanel.prototype.onSuitDataHandler = function (tag, data) {\n        this.curSuitMap.set(tag, data);\n        if (this.suitCon.visible) {\n            this.displayAvatar();\n        }\n    };\n    PicaCreateRolePanel.prototype.displayAvatar = function () {\n        var items = Array.from(this.curSuitMap.values());\n        var avatar = this.creatAvatars(items);\n        this.dragonbones.load({\n            id: 0,\n            avatar: avatar\n        });\n        this.dragonbones.startLoad();\n    };\n    PicaCreateRolePanel.prototype.loadDragonbonesComplete = function () {\n        this.dragonbones.play({ name: "idle", flip: false });\n    };\n    PicaCreateRolePanel.prototype.creatAvatars = function (datas) {\n        var suits = [];\n        for (var _i = 0, datas_2 = datas; _i < datas_2.length; _i++) {\n            var item = datas_2[_i];\n            var suit = { id: item.id, suit_type: item.suitType, slot: item.slot, tag: item.tag, sn: item.sn };\n            suits.push(suit);\n        }\n        var avatar = structure__WEBPACK_IMPORTED_MODULE_2__["AvatarSuitType"].createHasBaseAvatar(suits);\n        return avatar;\n    };\n    Object.defineProperty(PicaCreateRolePanel.prototype, "mediator", {\n        get: function () {\n            if (!this.mMediator) {\n                return;\n            }\n            return this.mMediator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PicaCreateRolePanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_4__["PicaBasePanel"]));\n\nvar SelectSuitAvatarItem = /** @class */ (function (_super) {\n    __extends(SelectSuitAvatarItem, _super);\n    function SelectSuitAvatarItem(scene, width, height, dpr, tag, text) {\n        var _this = _super.call(this, scene) || this;\n        _this.indexed = 0;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.tag = tag;\n        _this.text = text;\n        _this.init();\n        return _this;\n    }\n    SelectSuitAvatarItem.prototype.setSuitDatas = function (datas) {\n        this.suitDatas = datas;\n    };\n    SelectSuitAvatarItem.prototype.setInexed = function (indexed) {\n        this.indexed = indexed;\n        this.updateCurrentSuitData();\n    };\n    SelectSuitAvatarItem.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    SelectSuitAvatarItem.prototype.init = function () {\n        this.leftButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, "Create_arrow_left");\n        this.leftButton.x = -this.width * 0.5 + this.leftButton.width * 0.5;\n        this.leftButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onLeftButtonHandler, this);\n        this.midBackground = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, frame: "Create_name_bg" });\n        this.nameTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].whiteStyle(this.dpr, 18) }).setOrigin(0.5);\n        this.rightButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].uicommon, "Create_arrow_right");\n        this.rightButton.x = this.width * 0.5 - this.rightButton.width * 0.5;\n        this.rightButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRightButtonHandler, this);\n        this.add([this.leftButton, this.midBackground, this.nameTex, this.rightButton]);\n    };\n    SelectSuitAvatarItem.prototype.onLeftButtonHandler = function () {\n        this.indexed--;\n        if (this.indexed === -1)\n            this.indexed = this.suitDatas.length - 1;\n        this.updateCurrentSuitData();\n    };\n    SelectSuitAvatarItem.prototype.onRightButtonHandler = function () {\n        this.indexed++;\n        if (this.indexed === this.suitDatas.length)\n            this.indexed = 0;\n        this.updateCurrentSuitData();\n    };\n    SelectSuitAvatarItem.prototype.updateCurrentSuitData = function () {\n        var suitData = this.suitDatas[this.indexed];\n        this.nameTex.text = this.text + (this.indexed + 1);\n        if (this.send)\n            this.send.runWith([this.tag, suitData]);\n    };\n    return SelectSuitAvatarItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaCreateRole/PicaCreateRolePanel.ts?')},"./src/pica/render/ui/PicaDecorate/PicaDecoratePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaDecoratePanel", function() { return PicaDecoratePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaDecoratePanel = /** @class */ (function (_super) {\n    __extends(PicaDecoratePanel, _super);\n    function PicaDecoratePanel(uiManager) {\n        var _this = _super.call(this, uiManager.render.sceneManager.getMainScene(), uiManager.render) || this;\n        _this.resKey = "decorate";\n        _this.minGrid = 2;\n        _this.maxGrid = 10;\n        _this.offset = new utils__WEBPACK_IMPORTED_MODULE_3__["LogicPos"]();\n        _this.mScaleRatio = 1;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICADECORATE_NAME;\n        _this.mScaleRatio = uiManager.render.scaleRatio;\n        return _this;\n    }\n    PicaDecoratePanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.scene.layerManager.addToLayer("sceneUILayer", this);\n    };\n    PicaDecoratePanel.prototype.addListen = function () {\n        if (this.mCancelBtn)\n            this.mCancelBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCancelHandler, this);\n        if (this.mOkBtn)\n            this.mOkBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onAddHandler, this);\n        if (this.mRecycleBtn)\n            this.mRecycleBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRecycleHandler, this);\n        if (this.mTurnBtn)\n            this.mTurnBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onTurnHandler, this);\n        if (this.mMoveBtn)\n            this.mMoveBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShowMoveMenuHandler, this);\n        if (this.mRepeatBtn)\n            this.mRepeatBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShowRepeatHandler, this);\n        if (this.mExtendBtn)\n            this.mExtendBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShowExtendsHandler, this);\n        if (this.mMoveMenuContainer) {\n            this.mMoveMenuContainer.register();\n            this.mMoveMenuContainer.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onMoveHandler, this);\n        }\n        if (this.mRepeatMenuContainer) {\n            this.mRepeatMenuContainer.register();\n            this.mRepeatMenuContainer.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRepeatHandler, this);\n            this.mRepeatMenuContainer.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, this.onHoldRepeatHandler, this);\n        }\n    };\n    PicaDecoratePanel.prototype.removeListen = function () {\n        if (this.mCancelBtn)\n            this.mCancelBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCancelHandler, this);\n        if (this.mOkBtn)\n            this.mOkBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onAddHandler, this);\n        if (this.mRecycleBtn)\n            this.mRecycleBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRecycleHandler, this);\n        if (this.mTurnBtn)\n            this.mTurnBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onTurnHandler, this);\n        if (this.mMoveBtn)\n            this.mMoveBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShowMoveMenuHandler, this);\n        if (this.mRepeatBtn)\n            this.mRepeatBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShowRepeatHandler, this);\n        if (this.mExtendBtn)\n            this.mExtendBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShowExtendsHandler, this);\n        if (this.mMoveMenuContainer) {\n            this.mMoveMenuContainer.unRegister();\n            this.mMoveMenuContainer.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onMoveHandler, this);\n        }\n        if (this.mRepeatMenuContainer) {\n            this.mRepeatMenuContainer.unRegister();\n            this.mRepeatMenuContainer.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRepeatHandler, this);\n            this.mRepeatMenuContainer.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, this.onHoldRepeatHandler, this);\n        }\n    };\n    PicaDecoratePanel.prototype.setElement = function (id) {\n        this.mDisplayObject = this.render.displayManager.getDisplay(id);\n        if (!this.mInitialized) {\n            return;\n        }\n        if (this.mDisplayObject)\n            this.setPos(this.mDisplayObject.x, this.mDisplayObject.y);\n        this.addListen();\n    };\n    PicaDecoratePanel.prototype.canPut = function (val) {\n        if (val !== this.mCanPut) {\n            this.mCanPut = val;\n            if (!this.mOkBtn) {\n                return;\n            }\n            this.mOkBtn.enable = val;\n        }\n    };\n    PicaDecoratePanel.prototype.setPos = function (x, y, z) {\n        this.x = x * this.mScaleRatio;\n        this.y = (y + this.offset.y) * this.mScaleRatio;\n        this.z = z || 0;\n    };\n    PicaDecoratePanel.prototype.setOffset = function (x, y) {\n        this.offset.x = x;\n        this.offset.y = y;\n        if (this.mDisplayObject)\n            this.setPos(this.mDisplayObject.x, this.mDisplayObject.y);\n    };\n    PicaDecoratePanel.prototype.destroy = function () {\n        if (this.mRepeatMenuContainer) {\n            this.mRepeatMenuContainer.destroy();\n        }\n        if (this.mMoveMenuContainer) {\n            this.mMoveMenuContainer.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    PicaDecoratePanel.prototype.preload = function () {\n        this.addAtlas(this.key, "decorate_edit_menu/decorate_edit_menu.png", "decorate_edit_menu/decorate_edit_menu.json");\n        _super.prototype.preload.call(this);\n    };\n    PicaDecoratePanel.prototype.init = function () {\n        var w = this.scene.cameras.main.width / this.scale;\n        var h = this.scene.cameras.main.height / this.scale;\n        this.mMainMenus = [];\n        this.mMenuContainer = this.scene.make.container({\n            x: w >> 1,\n        }, false);\n        this.mSubMenus = this.scene.make.container({\n            x: w >> 1,\n            y: 60 * this.dpr\n        }, false);\n        this.mOkBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "ok_btn.png");\n        this.mRecycleBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "recycly_btn.png");\n        this.mTurnBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "turn_btn.png");\n        this.mCancelBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "cancel_btn.png");\n        this.mMenuContainer.y = this.mOkBtn.height * 0.5;\n        this.mSubMenus.y = this.mMenuContainer.y + 60 * this.dpr;\n        this.mHorizontalBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "horizontal_btn.png");\n        this.mMoveBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "move_btn.png");\n        this.mRepeatBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "repeat_btn.png");\n        this.mExtendBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "extend_btn.png");\n        this.mMoveMenuContainer = new MoveMenu(this.scene, this.key, this.dpr, this.scale);\n        this.mMoveMenuContainer.y = this.mSubMenus.y + 15 * this.dpr + this.mMoveMenuContainer.height;\n        this.mRepeatMenuContainer = new MoveMenu(this.scene, this.key, this.dpr, this.scale);\n        this.mRepeatMenuContainer.y = this.mMoveMenuContainer.y;\n        var zoom = this.scale;\n        this.add([this.mMenuContainer, this.mSubMenus]);\n        this.mMenuContainer.add([this.mOkBtn, this.mTurnBtn, this.mRecycleBtn, this.mCancelBtn]);\n        this.mSubMenus.add([this.mHorizontalBtn, this.mMoveBtn, this.mRepeatBtn, this.mExtendBtn]);\n        // this.add(this.mSubMenus);\n        var mainMenuW = w - 55 * this.dpr * this.mWorld.uiScale * 2;\n        this.mMenuContainer.x = -mainMenuW >> 1;\n        var list = this.mMenuContainer.list;\n        list.map(function (btn) { return mainMenuW -= btn.width; });\n        var margin = mainMenuW / (list.length - 1) / zoom;\n        for (var i = 1; i < list.length; i++) {\n            var preButton = list[i - 1];\n            var button = list[i];\n            button.x = preButton.width + preButton.x + margin;\n        }\n        mainMenuW = w - 70 * this.dpr * this.mWorld.uiScale * 2;\n        this.mSubMenus.x = -mainMenuW >> 1;\n        var subList = this.mSubMenus.list;\n        subList.map(function (btn) { return mainMenuW -= btn.width; });\n        margin = mainMenuW / (subList.length - 1) / zoom;\n        for (var i = 1; i < subList.length; i++) {\n            var preButton = subList[i - 1];\n            var button = subList[i];\n            button.x = preButton.width + preButton.x + margin;\n        }\n        this.mMoveMenuContainer.x = this.mSubMenus.x + this.mMoveBtn.x + 29 * this.dpr;\n        this.mRepeatMenuContainer.x = this.mSubMenus.x + this.mRepeatBtn.x + 29 * this.dpr;\n        this.mOkBtn.enable = this.mCanPut;\n        _super.prototype.init.call(this);\n        if (this.mDisplayObject)\n            this.setElement(this.mDisplayObject);\n    };\n    PicaDecoratePanel.prototype.onTurnHandler = function () {\n        var mediator = this.mediator;\n        if (mediator) {\n            mediator.turn();\n        }\n    };\n    PicaDecoratePanel.prototype.onRecycleHandler = function () {\n        var mediator = this.mediator;\n        if (mediator) {\n            mediator.recycle();\n        }\n    };\n    PicaDecoratePanel.prototype.onCancelHandler = function () {\n        var mediator = this.mediator;\n        if (mediator) {\n            mediator.cancel();\n        }\n    };\n    PicaDecoratePanel.prototype.onAddHandler = function () {\n        if (this.mCanPut) {\n            var mediator = this.mediator;\n            if (mediator)\n                mediator.putElement();\n        }\n    };\n    PicaDecoratePanel.prototype.onMoveHandler = function (dir) {\n        if (typeof dir !== "number") {\n            return;\n        }\n        var mediator = this.mediator;\n        if (mediator)\n            mediator.moveDir(dir);\n    };\n    PicaDecoratePanel.prototype.onRepeatHandler = function (dir) {\n        var mediator = this.mediator;\n        if (!mediator)\n            return;\n        mediator.repeatAdd(dir, 2);\n    };\n    PicaDecoratePanel.prototype.onHoldRepeatHandler = function (dir) {\n        var mediator = this.mediator;\n        if (!mediator)\n            return;\n        mediator.repeatAdd(dir, 10);\n    };\n    PicaDecoratePanel.prototype.onShowMoveMenuHandler = function () {\n        this.add(this.mMoveMenuContainer);\n        this.remove(this.mRepeatMenuContainer);\n    };\n    PicaDecoratePanel.prototype.onShowRepeatHandler = function () {\n        this.add(this.mRepeatMenuContainer);\n        this.remove(this.mMoveMenuContainer);\n    };\n    PicaDecoratePanel.prototype.onShowExtendsHandler = function () {\n    };\n    Object.defineProperty(PicaDecoratePanel.prototype, "mediator", {\n        get: function () {\n            return this.render.mainPeer[structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICADECORATE_NAME];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PicaDecoratePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\nvar MoveMenu = /** @class */ (function (_super) {\n    __extends(MoveMenu, _super);\n    function MoveMenu(scene, key, dpr, uiScale) {\n        if (dpr === void 0) { dpr = 1; }\n        if (uiScale === void 0) { uiScale = 1; }\n        var _this = _super.call(this, scene) || this;\n        var bg = scene.make.image({\n            key: key,\n            frame: "bg.png"\n        }, false);\n        _this.setSize(bg.displayWidth, bg.displayHeight);\n        _this.mArrow1 = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.scene, key, "arrow_1.png");\n        _this.mArrow1.setData("dir", utils__WEBPACK_IMPORTED_MODULE_3__["Direction"].north_west);\n        _this.mArrow3 = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.scene, key, "arrow_3.png");\n        _this.mArrow3.setData("dir", utils__WEBPACK_IMPORTED_MODULE_3__["Direction"].west_south);\n        _this.mArrow5 = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.scene, key, "arrow_5.png");\n        _this.mArrow5.setData("dir", utils__WEBPACK_IMPORTED_MODULE_3__["Direction"].south_east);\n        _this.mArrow7 = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.scene, key, "arrow_7.png");\n        _this.mArrow7.setData("dir", utils__WEBPACK_IMPORTED_MODULE_3__["Direction"].east_north);\n        _this.mBtns = [_this.mArrow1, _this.mArrow3, _this.mArrow5, _this.mArrow7];\n        _this.add(bg);\n        _this.add(_this.mBtns);\n        var w = _this.width;\n        var totalWidth = _this.width - 20 * dpr;\n        _this.mBtns.map(function (btn) { return totalWidth -= btn.displayWidth; });\n        var space = totalWidth = totalWidth / (_this.mBtns.length - 1);\n        var arrowH = (3 * dpr);\n        for (var i = 0; i < _this.mBtns.length; i++) {\n            if (i === 0) {\n                _this.mBtns[i].x = 10 * dpr + _this.mBtns[i].width / 2 - _this.width / 2;\n            }\n            else {\n                _this.mBtns[i].x = space + _this.mBtns[i - 1].x + _this.mBtns[i - 1].width;\n            }\n            _this.mBtns[i].y = arrowH;\n        }\n        _this.setInteractive();\n        return _this;\n    }\n    MoveMenu.prototype.register = function () {\n        this.mArrow1.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, this.onHoldHandler, this);\n        this.mArrow1.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n        this.mArrow3.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, this.onHoldHandler, this);\n        this.mArrow3.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n        this.mArrow5.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, this.onHoldHandler, this);\n        this.mArrow5.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n        this.mArrow7.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, this.onHoldHandler, this);\n        this.mArrow7.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n    };\n    MoveMenu.prototype.unRegister = function () {\n        this.mArrow1.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, this.onHoldHandler, this);\n        this.mArrow1.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n        this.mArrow3.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, this.onHoldHandler, this);\n        this.mArrow3.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n        this.mArrow5.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, this.onHoldHandler, this);\n        this.mArrow5.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n        this.mArrow7.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, this.onHoldHandler, this);\n        this.mArrow7.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n    };\n    MoveMenu.prototype.onHoldHandler = function (gameobject) {\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, gameobject.getData("dir"));\n    };\n    MoveMenu.prototype.onClickHandler = function (pointer, gameobject) {\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, gameobject.getData("dir"));\n    };\n    return MoveMenu;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaDecorate/PicaDecoratePanel.ts?')},"./src/pica/render/ui/PicaDecorateControl/PicaDecorateControlPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaDecorateControlPanel", function() { return PicaDecorateControlPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaDecorateControlPanel = /** @class */ (function (_super) {\n    __extends(PicaDecorateControlPanel, _super);\n    function PicaDecorateControlPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.mSaving = false;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICADECORATECONTROL_NAME;\n        return _this;\n    }\n    PicaDecorateControlPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mExitBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onExitHandler, this);\n        this.mRecycleAllBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRecycleAllHandler, this);\n        this.mRedoBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRedoHandler, this);\n        this.mFurniBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShowFurniHandler, this);\n        this.mSaveBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSaveHandler, this);\n        this.mDoorBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onGetDoorHandler, this);\n    };\n    PicaDecorateControlPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mExitBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onExitHandler, this);\n        this.mRecycleAllBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRecycleAllHandler, this);\n        this.mRedoBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRedoHandler, this);\n        this.mFurniBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShowFurniHandler, this);\n        this.mSaveBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSaveHandler, this);\n        this.mDoorBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onGetDoorHandler, this);\n    };\n    PicaDecorateControlPanel.prototype.resize = function (w, h) {\n        this.setSize(w, 131 * this.dpr);\n        // this.x = this.width * this.originX;\n        // this.y = this.height * this.originY;\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0, 0.6);\n        this.mBackground.fillRect(0, 0, this.width, this.height);\n        _super.prototype.resize.call(this, w, h);\n    };\n    PicaDecorateControlPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "decorate_control/decorate_control.png", "decorate_control/decorate_control.json");\n        _super.prototype.preload.call(this);\n    };\n    PicaDecorateControlPanel.prototype.init = function () {\n        var w = this.scene.cameras.main.width;\n        var h = this.scene.cameras.main.height;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        this.mTopBtns = [];\n        this.mExitBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "exitBtn.png");\n        this.mRecycleAllBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "recycleAllBtn.png");\n        this.mRedoBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "redoBtn.png");\n        this.mFurniBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "furniBtn.png");\n        this.mSaveBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "saveBtn.png");\n        this.mDoorBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "doorBtn.png");\n        this.mDoorBtn.setPosition(10 * this.dpr + this.mDoorBtn.width * 0.5, 83 * this.dpr + this.mDoorBtn.height * 0.5);\n        this.mStairBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "stairBtn.png");\n        this.mStairBtn.setPosition(64 * this.dpr + this.mStairBtn.width * 0.5, 83 * this.dpr + this.mStairBtn.height * 0.5);\n        this.mTopBtns = [this.mExitBtn, this.mRecycleAllBtn, this.mRedoBtn, this.mFurniBtn, this.mSaveBtn];\n        this.add(this.mBackground);\n        this.add(this.mTopBtns);\n        this.add([this.mDoorBtn, this.mStairBtn]);\n        var zoom = this.render.uiScale;\n        var totalWidth = w - 10 * 2 * this.dpr * zoom;\n        this.mTopBtns.map(function (btn) { return totalWidth -= btn.width * zoom; });\n        var space = totalWidth / (this.mTopBtns.length - 1) / zoom;\n        for (var i = 0; i < this.mTopBtns.length; i++) {\n            if (i > 0) {\n                this.mTopBtns[i].x = space + (this.mTopBtns[i - 1].width * 0.5) + this.mTopBtns[i - 1].x + this.mTopBtns[i].width * 0.5;\n            }\n            else {\n                this.mTopBtns[i].x = 10 * this.dpr + this.mTopBtns[i].width * 0.5;\n            }\n            this.mTopBtns[i].y = 11 * this.dpr + this.mTopBtns[i].height * 0.5;\n        }\n        this.resize(w, h);\n        this.mSaving = false;\n        _super.prototype.init.call(this);\n    };\n    PicaDecorateControlPanel.prototype.onExitHandler = function () {\n        if (this.mSaving) {\n            return;\n        }\n        this.mSaving = true;\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_exit");\n    };\n    PicaDecorateControlPanel.prototype.onRecycleAllHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_recycleAll");\n    };\n    PicaDecorateControlPanel.prototype.onRedoHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_redo");\n    };\n    PicaDecorateControlPanel.prototype.onShowFurniHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_showFurni");\n    };\n    PicaDecorateControlPanel.prototype.onSaveHandler = function () {\n        if (this.mSaving) {\n            return;\n        }\n        this.mSaving = true;\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_save");\n    };\n    PicaDecorateControlPanel.prototype.onGetDoorHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_getDoor");\n    };\n    return PicaDecorateControlPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaDecorateControl/PicaDecorateControlPanel.ts?')},"./src/pica/render/ui/PicaEffectMgr/PicaEffectMgrPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaEffectMgrPanel", function() { return PicaEffectMgrPanel; });\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\n/* harmony import */ var _PicaFurniUnlockEffectPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PicaFurniUnlockEffectPanel */ "./src/pica/render/ui/PicaEffectMgr/PicaFurniUnlockEffectPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaEffectMgrPanel = /** @class */ (function (_super) {\n    __extends(PicaEffectMgrPanel, _super);\n    function PicaEffectMgrPanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.tempQueue = new Map();\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAEFFECTMGR_NAME;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].effectcommon];\n        return _this;\n    }\n    PicaEffectMgrPanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content.x = width / 2;\n        this.content.y = height / 2;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(width, height);\n    };\n    PicaEffectMgrPanel.prototype.init = function () {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(width, height);\n        this.add(this.content);\n        this.furniEffectPanel = new _PicaFurniUnlockEffectPanel__WEBPACK_IMPORTED_MODULE_3__["PicaFurniUnlockEffectPanel"](this.scene, this.render, width, height, this.key, this.dpr);\n        this.content.add(this.furniEffectPanel);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaEffectMgrPanel.prototype.play = function (data, type) {\n        if (!this.mInitialized) {\n            var arr = this.tempQueue.get(type);\n            if (!arr) {\n                arr = data;\n            }\n            else {\n                arr = arr.concat(data);\n            }\n            this.tempQueue.set(type, arr);\n        }\n        else {\n            if (type === "unlock") {\n                this.furniEffectPanel.play(data);\n            }\n        }\n    };\n    PicaEffectMgrPanel.prototype.onShow = function () {\n        var _this = this;\n        if (this.tempQueue.size > 0) {\n            this.tempQueue.forEach(function (value, key) {\n                _this.play(value, key);\n            });\n        }\n    };\n    return PicaEffectMgrPanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_2__["PicaBasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaEffectMgr/PicaEffectMgrPanel.ts?')},"./src/pica/render/ui/PicaEffectMgr/PicaFurniUnlockEffectPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaFurniUnlockEffectPanel", function() { return PicaFurniUnlockEffectPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaFurniUnlockEffectPanel = /** @class */ (function (_super) {\n    __extends(PicaFurniUnlockEffectPanel, _super);\n    function PicaFurniUnlockEffectPanel(scene, render, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.render = render;\n        _this.effectQueue = [];\n        _this.isPlaying = false;\n        _this.setSize(width, height);\n        _this.key = key;\n        _this.dpr = dpr;\n        return _this;\n    }\n    PicaFurniUnlockEffectPanel.prototype.play = function (data) {\n        this.effectQueue = this.effectQueue.concat(data);\n        this.playNext();\n    };\n    PicaFurniUnlockEffectPanel.prototype.playNext = function () {\n        var _this = this;\n        if (this.isPlaying)\n            return;\n        if (this.effectQueue.length > 0) {\n            var data = this.effectQueue.shift();\n            var item = new PicaUnlockEffectItem(this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].effectcommon, this.dpr);\n            item.setItemData(data, utils__WEBPACK_IMPORTED_MODULE_3__["Handler"].create(this, function () {\n                _this.isPlaying = false;\n                _this.playNext();\n            }));\n            var offsetY = -this.height * 0.5 + 100 * this.dpr;\n            var from = offsetY + item.width * 0.5 - 10 * this.dpr;\n            var to = offsetY + 20 * this.dpr;\n            item.x = 0;\n            item.alpha = 0;\n            item.playMove(from, to);\n            this.add(item);\n            this.isPlaying = true;\n        }\n    };\n    return PicaFurniUnlockEffectPanel;\n}(Phaser.GameObjects.Container));\n\nvar PicaUnlockEffectItem = /** @class */ (function (_super) {\n    __extends(PicaUnlockEffectItem, _super);\n    function PicaUnlockEffectItem(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.relativepoints = [0, -67, -50, -59, -52, -59, -54];\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.bg = scene.make.image({ key: key, frame: "repair_popup_bg" });\n        _this.add(_this.bg);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.titletext = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](scene, 0, 0, "", { fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, fontSize: 14 * dpr, color: "#00CCFF", lineSpacing: 4 * dpr }).setOrigin(0);\n        _this.titletext.x = -_this.width * 0.5 + 20 * dpr;\n        _this.titletext.y = -6 * dpr;\n        _this.add(_this.titletext);\n        _this.furinIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, _this.width * 0.5 - 50 * dpr, 0);\n        _this.add(_this.furinIcon);\n        _this.sprite1 = _this.scene.make.image({ key: key, frame: "repair_popup_star1" });\n        _this.sprite1.x = _this.width * 0.5 - _this.sprite1.width * 0.5 - 20 * dpr;\n        _this.sprite1.y = 3 * dpr;\n        _this.sprite1.alpha = 0;\n        _this.sprite2 = _this.scene.make.image({ key: key, frame: "repair_popup_star2" });\n        _this.sprite2.x = -50 * dpr;\n        _this.sprite2.y = -33 * dpr;\n        _this.sprite2.alpha = 0;\n        _this.add([_this.sprite1, _this.sprite2]);\n        return _this;\n    }\n    PicaUnlockEffectItem.prototype.setItemData = function (data, compl) {\n        this.compl = compl;\n        var line1 = "[b][color=#00CCFF]" + data.line1 + "[/color][/b]";\n        if (data.line2) {\n            line1 += "\\n" + ("[b][color=#00CCFF]" + data.line2 + "[/color][/b]");\n        }\n        // `[b][color=#00CCFF]${i18n.t("furni_unlock.successrepair")}\\n${""}*${1}[/color][/b]`\n        this.titletext.setText(line1);\n    };\n    PicaUnlockEffectItem.prototype.playMove = function (from, to) {\n        var _this = this;\n        if (!this.scene)\n            return;\n        var paths = [];\n        this.y = from + this.relativepoints[0] * this.dpr;\n        for (var _i = 0, _a = this.relativepoints; _i < _a.length; _i++) {\n            var value = _a[_i];\n            paths.push({ y: from + value * this.dpr });\n        }\n        this.alpha = 0;\n        var tween = this.scene.tweens.add({\n            targets: this,\n            alpha: { from: 0, to: 1, duration: 200, ease: "Cubic.easeIn" },\n            delay: 50,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n            },\n        });\n        var tween1 = this.scene.tweens.timeline({\n            targets: this,\n            ease: "Linear",\n            tweens: paths,\n            totalDuration: 700,\n            onComplete: function () {\n                if (!_this.scene)\n                    return;\n                _this.playAlphaAni(_this.sprite1);\n                setTimeout(function () {\n                    _this.playAlphaAni(_this.sprite2);\n                }, 300);\n                setTimeout(function () {\n                    _this.playFadeout();\n                }, 3000);\n            }\n        });\n    };\n    PicaUnlockEffectItem.prototype.playAlphaAni = function (target, yoyo, times, duration) {\n        var _this = this;\n        if (yoyo === void 0) { yoyo = true; }\n        if (times === void 0) { times = 0; }\n        if (duration === void 0) { duration = 400; }\n        if (!this.scene)\n            return;\n        var tween = this.scene.tweens.add({\n            targets: target,\n            alpha: {\n                from: 0,\n                to: 1\n            },\n            ease: "Linear",\n            duration: duration,\n            yoyo: yoyo,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                times++;\n                if (times < 2) {\n                    _this.playAlphaAni(target, true, times);\n                }\n                else if (times === 2) {\n                    _this.playAlphaAni(target, false, times, 400);\n                }\n            },\n        });\n    };\n    PicaUnlockEffectItem.prototype.playFadeout = function () {\n        var _this = this;\n        if (!this.scene)\n            return;\n        var tween = this.scene.tweens.add({\n            targets: this,\n            alpha: {\n                from: 1,\n                to: 0\n            },\n            ease: "Linear",\n            duration: 200,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                if (_this.compl)\n                    _this.compl.run();\n                _this.destroy();\n            },\n        });\n    };\n    return PicaUnlockEffectItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaEffectMgr/PicaFurniUnlockEffectPanel.ts?')},"./src/pica/render/ui/PicaElementStorage/Item.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Item", function() { return Item; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Item = /** @class */ (function (_super) {\n    __extends(Item, _super);\n    function Item(scene) {\n        var _this = _super.call(this, scene) || this;\n        var background = scene.make.image({\n            key: "prop_background"\n        }).setOrigin(0, 0);\n        _this.setSize(background.width, background.height);\n        _this.add(background);\n        _this.mImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](_this.scene, 0, 0).setOrigin(0, 0);\n        _this.add(_this.mImage);\n        _this.mCount = scene.make.text(undefined, false);\n        _this.mCount.setAlign("right");\n        _this.mCount.y = _this.height - 20;\n        _this.add(_this.mCount);\n        return _this;\n    }\n    Item.prototype.setProp = function (prop) {\n        var _this = this;\n        this.mProp = prop;\n        if (!this.mCount) {\n            return;\n        }\n        if (prop) {\n            this.mImage.load(utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(prop.texturePath), this, function () {\n                // this.mImage.on("dragstart", this.onPointerUpHandler, this);\n                _this.mImage.setInteractive();\n                _this.scene.input.setDraggable(_this.mImage);\n                var imageScale = 1;\n                if (_this.mImage.width > _this.width) {\n                    imageScale = _this.width / _this.mImage.width;\n                }\n                if (_this.mImage.height > _this.height) {\n                    imageScale = _this.height / _this.mImage.height;\n                }\n                _this.mImage.scale = imageScale;\n            });\n            this.mCount.setText(prop.count > 1 ? prop.count.toString() : "");\n            this.mCount.x = this.width - this.mCount.width;\n        }\n    };\n    Item.prototype.clear = function () {\n        if (!this.count) {\n            return;\n        }\n        if (!this.mProp) {\n            return;\n        }\n        this.mCount.setText("");\n        this.mImage.setTexture(undefined);\n        this.mImage.off("pointerup", this.onPointerUpHandler, this);\n        this.mProp = undefined;\n    };\n    Item.prototype.destroy = function () {\n        this.clear();\n        _super.prototype.destroy.call(this);\n    };\n    Object.defineProperty(Item.prototype, "prop", {\n        get: function () {\n            return this.mProp;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Item.prototype.onPointerUpHandler = function () {\n        this.emit("click", this.mProp);\n    };\n    return Item;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaElementStorage/Item.ts?')},"./src/pica/render/ui/PicaElementStorage/PicaElementStoragePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaElementStoragePanel", function() { return PicaElementStoragePanel; });\n/* harmony import */ var _Item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Item */ "./src/pica/render/ui/PicaElementStorage/Item.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaElementStoragePanel = /** @class */ (function (_super) {\n    __extends(PicaElementStoragePanel, _super);\n    function PicaElementStoragePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.mExpaned = true;\n        _this.mItemNum = 32;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAELEMENTSTORAGE_NAME;\n        _this.setTween(false);\n        _this.dpr /= 2;\n        return _this;\n    }\n    PicaElementStoragePanel.prototype.show = function (param) {\n        _super.prototype.show.call(this, param);\n        if (this.mInitialized) {\n            this.setPackageNum(1);\n        }\n    };\n    PicaElementStoragePanel.prototype.resize = function (oriention) {\n        var size = this.render.getSize();\n        this.scale = this.dpr;\n        if (this.render.game.scale.orientation === Phaser.Scale.Orientation.LANDSCAPE) {\n            this.setSize(683 >> 1, 901 >> 1);\n            this.x = size.width - (this.width * this.dpr) - 10;\n            this.y = size.height - this.height * this.dpr >> 1;\n            this.mBackground.resize(this.width, this.height);\n            this.mBackground.x = this.mBackground.width >> 1;\n            this.mBackground.y = this.mBackground.height >> 1;\n            this.mBorder.resize(655 >> 1, 847 >> 1);\n            this.mBorder.x = 7 + (this.mBorder.width >> 1);\n            this.mBorder.y = 19 + (this.mBorder.height >> 1);\n            this.mSearchInput.x = 40 + 105;\n            this.mSearchInput.y = 40;\n            this.mDragBtn.x = -this.mDragBtn.height;\n            this.mDragBtn.y = this.height >> 1;\n            // for (let i = 0; i < this.mTabs.length; i++) {\n            //     this.mTabs[i].x = 280;\n            //     this.mTabs[i].y = 60 + i * this.mTabs[i].height + 10;\n            // }\n            var len = this.mProps.length;\n            for (var i = 0; i < len; i++) {\n                // this.mProps[i].setPosition((i % 8) * 60 + 20, Math.ceil(i / 8) * 60 + 80);\n                this.mProps[i].x = (i % 4) * 60 + 20;\n                this.mProps[i].y = Math.floor(i / 4) * 60 + 80;\n            }\n        }\n        else {\n            this.setSize(510, 329);\n            this.mBackground.resize(this.width, this.height);\n            this.mBackground.x = this.mBackground.width >> 1;\n            this.mBackground.y = this.mBackground.height >> 1;\n            this.mBorder.resize(496, 303);\n            this.mBorder.x = 7 + (this.mBorder.width >> 1);\n            this.mBorder.y = 19 + (this.mBorder.height >> 1);\n            this.mSearchInput.x = 270;\n            this.mSearchInput.y = 33;\n            this.x = (size.width - this.width * this.dpr >> 1);\n            this.y = size.height - this.height * this.dpr - 10;\n            this.mDragBtn.x = this.width >> 1;\n            this.mDragBtn.y = -this.mDragBtn.height >> 1;\n            var len = this.mProps.length;\n            for (var i = 0; i < len; i++) {\n                // this.mProps[i].setPosition((i % 8) * 60 + 20, Math.ceil(i / 8) * 60 + 80);\n                this.mProps[i].x = (i % 8) * 60 + 20;\n                this.mProps[i].y = Math.floor(i / 8) * 60 + 80;\n            }\n        }\n        this.mPrePageBtn.y = this.height >> 1;\n        this.mNextPageBtn.x = this.width;\n        this.mNextPageBtn.y = this.height >> 1;\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.width, this.height), Phaser.Geom.Rectangle.Contains);\n    };\n    PicaElementStoragePanel.prototype.addListen = function () {\n        _super.prototype.addListen.call(this);\n        if (this.mBackground)\n            this.mBackground.on("pointerout", this.onPointerOutHandler, this);\n        if (this.mDragBtn)\n            this.mDragBtn.on("pointerup", this.switchExpand, this);\n        if (this.mPrePageBtn)\n            this.mPrePageBtn.on("pointerup", this.onPrePageHandler, this);\n        if (this.mNextPageBtn)\n            this.mNextPageBtn.on("pointerup", this.onNextPageHandler, this);\n        if (this.mCloseBtn)\n            this.mCloseBtn.on("pointerup", this.onCloseHandler, this);\n        if (this.scene) {\n            this.scene.input.on("dragstart", this.onDragStartHandler, this);\n            this.scene.input.on("dragend", this.onDragEndHandler, this);\n            this.scene.input.on("drag", this.onDragHandler, this);\n        }\n    };\n    PicaElementStoragePanel.prototype.removeListen = function () {\n        _super.prototype.removeListen.call(this);\n        if (this.mBackground)\n            this.mBackground.off("pointerout", this.onPointerOutHandler, this);\n        if (this.mDragBtn)\n            this.mDragBtn.off("pointerup", this.switchExpand, this);\n        if (this.mPrePageBtn)\n            this.mPrePageBtn.off("pointerup", this.onPrePageHandler, this);\n        if (this.mNextPageBtn)\n            this.mNextPageBtn.off("pointerup", this.onNextPageHandler, this);\n        if (this.mCloseBtn)\n            this.mCloseBtn.off("pointerup", this.onCloseHandler, this);\n        if (this.scene) {\n            this.scene.input.off("dragstart", this.onDragStartHandler, this);\n            this.scene.input.off("dragend", this.onDragEndHandler, this);\n            this.scene.input.off("drag", this.onDragHandler, this);\n        }\n    };\n    PicaElementStoragePanel.prototype.setProps = function (data) {\n        var items = data.items;\n        this.clearItem();\n        for (var i = 0; i < items.length; i++) {\n            if (i >= this.mProps.length) {\n                return;\n            }\n            this.mProps[i].setProp(items[i]);\n        }\n    };\n    PicaElementStoragePanel.prototype.expand = function () {\n        if (this.mExpaned) {\n            return;\n        }\n        var size = this.render.getSize();\n        var props = null;\n        if (this.render.game.scale.orientation === Phaser.Scale.Orientation.LANDSCAPE) {\n            props = { x: size.width - (this.width * this.dpr) - 10 };\n        }\n        else {\n            props = { y: size.height - this.height * this.dpr - 10 };\n        }\n        this.scene.tweens.add({\n            targets: this,\n            duration: 200,\n            ease: "Linear",\n            props: props\n        });\n        this.remove(this.mDragBtn);\n        this.add([this.mPrePageBtn, this.mNextPageBtn]);\n        this.mExpaned = true;\n    };\n    PicaElementStoragePanel.prototype.collapse = function () {\n        if (!this.mExpaned) {\n            return;\n        }\n        var size = this.render.getSize();\n        var props = null;\n        if (this.render.game.scale.orientation === Phaser.Scale.Orientation.LANDSCAPE) {\n            props = { x: size.width };\n        }\n        else {\n            props = { y: size.height };\n        }\n        this.scene.tweens.add({\n            targets: this,\n            duration: 200,\n            ease: "Linear",\n            props: props\n        });\n        this.addAt(this.mDragBtn, 0);\n        this.remove([this.mPrePageBtn, this.mNextPageBtn]);\n        this.mExpaned = false;\n    };\n    PicaElementStoragePanel.prototype.destroy = function () {\n        if (this.scene) {\n            this.scene.input.off("dragstart", this.onDragStartHandler, this);\n            this.scene.input.off("dragend", this.onDragEndHandler, this);\n            this.scene.input.off("drag", this.onDragHandler, this);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    PicaElementStoragePanel.prototype.preload = function () {\n        this.scene.load.image(utils__WEBPACK_IMPORTED_MODULE_4__["Border"].getName(), utils__WEBPACK_IMPORTED_MODULE_4__["Border"].getPNG());\n        this.scene.load.image("button", utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/common/button.png"));\n        this.scene.load.image("prop_background", utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/common/prop_background.png"));\n        this.scene.load.atlas("slip", utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/bag/slip.png"), utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/bag/slip.json"));\n        this.mScene.load.atlas("clsBtn", utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/common/common_clsBtn.png"), utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/common/common_clsBtn.json"));\n        this.scene.load.image(utils__WEBPACK_IMPORTED_MODULE_4__["Background"].getName(), utils__WEBPACK_IMPORTED_MODULE_4__["Background"].getPNG());\n        _super.prototype.preload.call(this);\n    };\n    PicaElementStoragePanel.prototype.init = function () {\n        this.mBackground = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["NinePatch"](this.scene, 0, 0, this.width, this.height, utils__WEBPACK_IMPORTED_MODULE_4__["Background"].getName(), null, utils__WEBPACK_IMPORTED_MODULE_4__["Background"].getConfig());\n        this.mBorder = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["NinePatch"](this.scene, 7, 19, 655 >> 1, 847 >> 1, utils__WEBPACK_IMPORTED_MODULE_4__["Border"].getName(), null, utils__WEBPACK_IMPORTED_MODULE_4__["Border"].getConfig());\n        // this.mBackground.setInteractive();\n        // TODO \n        this.mSearchInput = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["InputText"](this.scene, 40 + 105, 40, 210, 26, {\n            type: "input",\n            fontSize: "14px",\n            color: "#808080",\n            placeholder: ""\n        });\n        var config = {\n            left: 4,\n            top: 4,\n            right: 4,\n            bottom: 4\n        };\n        this.mDragBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSliceButton"](this.scene, 0, -20, 80, 40, "button", "", "", this.dpr, this.scale, config);\n        this.mPrePageBtn = this.scene.make.sprite({\n            key: "slip"\n        }, false);\n        this.mPrePageBtn.setInteractive();\n        this.mNextPageBtn = this.scene.make.sprite({\n            key: "slip"\n        }, false).setFlipX(true);\n        this.mNextPageBtn.setInteractive();\n        this.mProps = [];\n        this.add([this.mBackground, this.mBorder, this.mSearchInput]);\n        for (var i = 0; i < this.mItemNum; i++) {\n            var item = new _Item__WEBPACK_IMPORTED_MODULE_0__["Item"](this.scene);\n            // this.add(item);\n            // this.scene.input.setDraggable(item);\n            // item.on("click", this.onClick, this);\n            this.mProps[i] = item;\n        }\n        this.add(this.mProps);\n        this.add([this.mPrePageBtn, this.mNextPageBtn]);\n        this.mCloseBtn = this.scene.make.image({\n            key: "clsBtn",\n            frame: "btn_normal"\n        }, false).setInteractive().setScale(2);\n        this.add(this.mCloseBtn);\n        _super.prototype.init.call(this);\n        this.resize();\n        this.expand();\n    };\n    PicaElementStoragePanel.prototype.onPrePageHandler = function () {\n        this.setPackageNum(this.mPacgeNum - 1);\n    };\n    PicaElementStoragePanel.prototype.onNextPageHandler = function () {\n        this.setPackageNum(this.mPacgeNum + 1);\n    };\n    PicaElementStoragePanel.prototype.setPackageNum = function (val) {\n        this.mPacgeNum = val < 1 ? 1 : val;\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_queryElement", { page: this.mPacgeNum, perPage: 32 });\n    };\n    PicaElementStoragePanel.prototype.switchExpand = function () {\n        this.mExpaned ? this.collapse() : this.expand();\n    };\n    PicaElementStoragePanel.prototype.onSelectedHandler = function () {\n    };\n    PicaElementStoragePanel.prototype.onClick = function (data) {\n    };\n    PicaElementStoragePanel.prototype.onDragStartHandler = function (pointer, gameobject, dragX, dragY) {\n        var item = gameobject.parentContainer;\n        if (item instanceof _Item__WEBPACK_IMPORTED_MODULE_0__["Item"]) {\n            this.mDragData = item.prop;\n        }\n        if (!this.mDragImage) {\n            this.mDragImage = this.scene.make.image(undefined, false);\n            this.add(this.mDragImage);\n        }\n        this.mDragImage.x = item.x;\n        this.mDragImage.y = item.y;\n        this.mDragImage.setTexture(gameobject.texture.key);\n        this.mDragging = true;\n        // this.mDragImage.texture = gameobject.texture;\n        // Logger.getInstance().log("======", pointer, gameobject);\n    };\n    PicaElementStoragePanel.prototype.onDragEndHandler = function () {\n        if (!this.mDragImage) {\n            return;\n        }\n        this.mDragImage.setTexture(undefined);\n        this.mDragging = false;\n    };\n    PicaElementStoragePanel.prototype.onDragHandler = function (pointer, gameobject, dragX, dragY) {\n        if (!this.mDragImage) {\n            return;\n        }\n        this.mDragImage.x += pointer.x - pointer.prevPosition.x;\n        this.mDragImage.y += pointer.y - pointer.prevPosition.y;\n    };\n    PicaElementStoragePanel.prototype.onPointerOutHandler = function () {\n        if (this.mDragImage && this.mDragging) {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_selectedElement", this.mDragData);\n            this.mDragImage.setTexture(undefined);\n            this.mDragging = false;\n        }\n    };\n    PicaElementStoragePanel.prototype.clearItem = function () {\n        if (!this.mProps)\n            return;\n        this.mProps.map(function (item) { return item.clear(); });\n    };\n    PicaElementStoragePanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_hide");\n    };\n    return PicaElementStoragePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaElementStorage/PicaElementStoragePanel.ts?')},"./src/pica/render/ui/PicaElevator/PicaElevatorPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaElevatorPanel", function() { return PicaElevatorPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaElevatorPanel = /** @class */ (function (_super) {\n    __extends(PicaElevatorPanel, _super);\n    // private itemsPanel: ItemsConsumeFunPanel;\n    function PicaElevatorPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAELEVATOR_NAME;\n        return _this;\n    }\n    PicaElevatorPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, w, h);\n        this.setSize(w, h);\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0, 0.5);\n        this.mBackground.fillRoundedRect(-this.x, -this.y, w, h);\n        this.content.x = w * 0.5;\n        this.content.y = h * 0.5;\n        this.mGameGrid.resetMask();\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n    };\n    PicaElevatorPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n        this.setElevtorDataList(this.mShowData[0]);\n    };\n    PicaElevatorPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on("pointerup", this.OnClosePanel, this);\n    };\n    PicaElevatorPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off("pointerup", this.OnClosePanel, this);\n    };\n    PicaElevatorPanel.prototype.preload = function () {\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaElevatorPanel.prototype.init = function () {\n        var _this = this;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        //   this.mBackground.on("pointerup", this.OnClosePanel, this);\n        this.add(this.mBackground);\n        var conWdith = 295 * this.dpr;\n        var conHeight = 405 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.add(this.content);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, conWdith, conHeight, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "bg", {\n            left: 30 * this.dpr,\n            top: 30 * this.dpr,\n            bottom: 30 * this.dpr,\n            right: 30 * this.dpr,\n        });\n        this.content.add(this.bg);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "close", "close");\n        this.closeBtn.setPosition(this.bg.width * 0.5 - this.dpr * 5, -this.bg.height * 0.5 + this.dpr * 5);\n        this.content.add(this.closeBtn);\n        var tableConfig = {\n            x: 0,\n            y: 0,\n            table: {\n                width: conWdith - 20 * this.dpr,\n                height: conHeight - 30 * this.dpr,\n                columns: 1,\n                cellWidth: conWdith - 20 * this.dpr,\n                cellHeight: 85 * this.dpr,\n                reuseCellContainer: true,\n                zoom: this.scale\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, index = _this.mGameGrid.items.length - cell.index, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new ElevatorItem(_this.scene, _this.key, _this.dpr);\n                }\n                cellContainer.setFloorData(item, index);\n                return cellContainer;\n            },\n        };\n        this.mGameGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.mGameGrid.layout();\n        this.mGameGrid.on("cellTap", function (cell) {\n            _this.onSelectItemHandler(cell.floorData);\n        });\n        this.content.add(this.mGameGrid);\n        this.resize();\n        _super.prototype.init.call(this);\n    };\n    PicaElevatorPanel.prototype.setElevtorDataList = function (ui) {\n        var arr = ui.button.reverse();\n        this.mGameGrid.setItems(arr);\n        this.mGameGrid.setT(1);\n    };\n    PicaElevatorPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaElevatorPanel.prototype.OnClosePanel = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + this.key + "_hide");\n    };\n    PicaElevatorPanel.prototype.onSendHandler = function () {\n    };\n    PicaElevatorPanel.prototype.onSelectItemHandler = function (floorData) {\n        var ui = this.showData[0]; // op_client.OP_VIRTUAL_WORLD_RES_CLIENT_SHOW_UI\n        var texs = floorData.text.split("#");\n        var enabletag = texs[1];\n        var bool = enabletag === "false" ? false : true;\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + this.key + "_queryui", { uiId: ui.id, componentId: floorData.node.id });\n    };\n    return PicaElevatorPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\nvar ElevatorItem = /** @class */ (function (_super) {\n    __extends(ElevatorItem, _super);\n    function ElevatorItem(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.bg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, 0);\n        _this.add(_this.bg);\n        _this.setSize(268 * dpr, 81 * dpr);\n        _this.namebg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, 82 * dpr, 22 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, "floor_title_bg", {\n            left: 15 * _this.dpr,\n            top: 0 * _this.dpr,\n            right: 15 * _this.dpr,\n            bottom: 0 * _this.dpr\n        }, undefined, undefined, 0);\n        _this.namebg.x = _this.width * 0.5 - _this.namebg.width * 0.5 - 10 * dpr;\n        _this.namebg.y = -_this.height * 0.5 + _this.namebg.height * 0.5 + 10 * dpr;\n        _this.add(_this.namebg);\n        _this.nameTex = _this.scene.make.text({\n            x: _this.namebg.x, y: _this.namebg.y, text: "",\n            style: { color: "#22E2FF", fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT, fontSize: 12 * _this.dpr }\n        }).setOrigin(0.5);\n        _this.add(_this.nameTex);\n        _this.levelbg = _this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, frame: "floor_number_unlock" });\n        _this.levelbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.levelbg.x = -_this.width * 0.5 + _this.levelbg.width * 0.5 + 5 * dpr;\n        _this.levelbg.y = _this.height * 0.5 - _this.levelbg.height * 0.5 - 5 * dpr;\n        _this.add(_this.levelbg);\n        _this.levelTex = _this.scene.make.text({\n            x: _this.levelbg.x, y: _this.levelbg.y, text: "",\n            style: { color: "#FAD555", fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].NUMBER, fontSize: 17 * _this.dpr }\n        }).setOrigin(0.5); // .setStroke("#FAD555", 2);\n        _this.add(_this.levelTex);\n        return _this;\n    }\n    ElevatorItem.prototype.setFloorData = function (data, index) {\n        this.floorData = data;\n        var texs = data.text.split("#");\n        var enabletag = texs[1];\n        var bool = enabletag === "false" ? false : true;\n        if (bool) {\n            this.levelbg.setFrame("floor_number_unlock");\n            this.levelTex.setColor("#FAD555");\n            this.nameTex.setColor("#22E2FF");\n        }\n        else {\n            this.levelbg.setFrame("floor_number_lock");\n            this.levelTex.setColor("#BDBDBD");\n            this.nameTex.setColor("#DDDDDD");\n        }\n        this.levelTex.text = (index) + utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("picelevator.floor");\n        this.nameTex.text = texs[0];\n        var lastindex = data.tips.lastIndexOf("/");\n        var frame = data.tips.slice(lastindex + 1, data.tips.length);\n        var burl = data.tips.slice(0, lastindex + 1);\n        var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(burl + frame + ("_" + this.dpr + "x") + ".png");\n        this.bg.load(url, this, function () {\n            // this.bg.scale = this.dpr;\n        });\n    };\n    return ElevatorItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaElevator/PicaElevatorPanel.ts?')},"./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradeItem.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaEquipUpgradeItem", function() { return PicaEquipUpgradeItem; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaEquipUpgradeItem = /** @class */ (function (_super) {\n    __extends(PicaEquipUpgradeItem, _super);\n    function PicaEquipUpgradeItem(scene, container, dpr, zoom, key, commonKey) {\n        var _this = _super.call(this) || this;\n        _this.haveEquiped = false;\n        _this.cellWidth = 0;\n        _this.cellHeight = 0;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.key = key;\n        _this.commonKey = commonKey;\n        _this.mScene = scene;\n        _this.mContainer = container;\n        _this.create();\n        return _this;\n    }\n    PicaEquipUpgradeItem.prototype.setEquipItems = function (data) {\n        var name = data.equipmentType;\n        var items = data.mineEquipments;\n        this.titleName.text = name;\n        var index = 0;\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            if (item.selected) {\n                this.haveEquiped = true;\n                break;\n            }\n            index++;\n        }\n        this.gridTable.setItems(items);\n        if (this.haveEquiped)\n            this.setBgTexture(data["isblue"]);\n    };\n    PicaEquipUpgradeItem.prototype.setTransPosition = function (x, y) {\n        this.bg.x += x;\n        this.bg.y += y;\n        this.titleName.x += x;\n        this.titleName.y += y;\n        this.bottombg.x += x;\n        this.bottombg.y += y;\n        this.equipName.x += x;\n        this.equipName.y += y;\n        this.penetrationText.x += x;\n        this.penetrationText.y += y;\n        this.equipDes.x += x;\n        this.equipDes.y += y;\n        this.topbg.x += x;\n        this.topbg.y += y;\n        this.unlockbtn.x += x;\n        this.unlockbtn.y += y;\n        this.gridTable.refreshPos(x, y - 10 * this.dpr);\n        this.gridTable.resetMask();\n    };\n    Object.defineProperty(PicaEquipUpgradeItem.prototype, "displayList", {\n        get: function () {\n            return [this.bg, this.topbg, this.bottombg, this.titleName, this.equipName, this.penetrationText, this.equipDes];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PicaEquipUpgradeItem.prototype.refreshEquipData = function (data, index) {\n        this.gridTable.items[index] = data;\n        var cells = this.gridTable.getCells();\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            if (cell && cell.container) {\n                var cellData = cell.container.itemData;\n                if (cellData.id === data.id) {\n                    cell.container.setItemData(data);\n                }\n                else {\n                    cell.container.setItemData(cellData);\n                }\n            }\n        }\n        if (this.curSelectItemData.id === data.id)\n            this.curSelectItemData = data;\n        this.updateEquipItem(this.curSelectItemData);\n    };\n    PicaEquipUpgradeItem.prototype.destroy = function () {\n        if (this.unlockbtn)\n            this.unlockbtn.off("pointerup", this.onUnlockEquipHandler, this);\n        _super.prototype.destroy.call(this);\n        if (this.gridTable)\n            this.gridTable.destroy();\n        this.bg = null;\n        this.topbg = null;\n        this.bottombg = null;\n        this.gridTable = null;\n        this.titleName = null;\n        this.equipName = null;\n        this.penetrationText = null;\n        this.equipDes = null;\n        this.unlockbtn = null;\n        this.costNum = null;\n        this.diamondIcon = null;\n        this.curEquipItem = null;\n        this.curSelectItemData = null;\n    };\n    PicaEquipUpgradeItem.prototype.setBgTexture = function (isblue) {\n        var topName = !isblue ? "topbg" : "topbg1";\n        var bottombg = !isblue ? "bottombg" : "bottombg1";\n        var fontColor = !isblue ? "#8F4300" : "#0867AE";\n        this.topbg.setTexture(this.key, topName);\n        this.bottombg.setTexture(this.key, bottombg);\n        this.titleName.setColor(fontColor).setStroke(fontColor, 1);\n        this.equipName.setColor(fontColor).setStroke(fontColor, 1);\n        this.penetrationText.setColor(fontColor).setStroke(fontColor, 1);\n    };\n    PicaEquipUpgradeItem.prototype.create = function () {\n        this.bg = this.mScene.make.image({ x: 0, y: -21 * this.dpr, key: this.key, frame: "bg1" });\n        this.topbg = this.mScene.make.image({ x: 0, y: -61 * this.dpr, key: this.key, frame: "topbg" });\n        this.titleName = this.mScene.make.text({ x: 0, y: this.topbg.y + 0 * this.dpr, text: "", style: { blod: true, color: "#8F4300", fontSize: 14 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT } }).setOrigin(0.5, 0.5);\n        this.titleName.setFontStyle("bold");\n        this.bottombg = this.mScene.make.image({ x: 0, y: 42 * this.dpr, key: this.key, frame: "bottombg" });\n        this.equipName = this.mScene.make.text({ x: -120 * this.dpr, y: 15 * this.dpr, text: "", style: { color: "#8F4300", fontSize: 14 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT } });\n        this.equipName.setFontStyle("bold");\n        this.penetrationText = this.mScene.make.text({ x: -60 * this.dpr, y: 16 * this.dpr, text: ":10", style: { color: "#8F4300", fontSize: 12 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT } });\n        this.equipDes = this.mScene.make.text({ x: -120 * this.dpr, y: 35 * this.dpr, text: "", style: { color: "#000000", fontSize: 10 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT, wordWrap: { width: 130 * this.dpr, useAdvancedWrap: true } } });\n        this.equipDes.setStroke("#000000", 1);\n        this.mContainer.add([this.bg, this.topbg, this.bottombg, this.titleName, this.equipName, this.penetrationText, this.equipDes]);\n        this.createGridTable();\n        this.createBtn();\n    };\n    PicaEquipUpgradeItem.prototype.createGridTable = function () {\n        var _this = this;\n        var propFrame = this.mScene.textures.getFrame(this.key, "equipbg");\n        var capW = (propFrame.width + 10 * this.dpr);\n        var capH = (propFrame.height + 30 * this.dpr);\n        this.cellWidth = capW;\n        this.cellHeight = capH;\n        var config = {\n            x: 0,\n            y: 0,\n            scrollMode: 1,\n            table: {\n                width: 259 * this.dpr,\n                height: 77 * this.dpr,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0,\n                zoom: this.zoom\n            },\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                var index = cell.index;\n                if (cellContainer === null) {\n                    cellContainer = new EquipItemCell(scene, _this.dpr, _this.key);\n                    cellContainer.setSize(capW, capH);\n                    cellContainer.setChildPosition();\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setItemData(item);\n                if (_this.curSelectItemData === item) {\n                    cellContainer.setSelect(true);\n                    _this.curEquipItem = cellContainer;\n                }\n                else\n                    cellContainer.setSelect(false);\n                if (_this.curEquipItem == null) {\n                    if (!_this.haveEquiped || item.selected) {\n                        _this.onSelectItemHandler(cellContainer);\n                    }\n                }\n                // Logger.getInstance().log(item);\n                return cellContainer;\n            }\n        };\n        this.gridTable = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.mScene, config);\n        this.gridTable.layout();\n        this.gridTable.on("cellTap", function (cell) {\n            _this.onSelectItemHandler(cell);\n        });\n        this.mContainer.add(this.gridTable);\n    };\n    PicaEquipUpgradeItem.prototype.onSelectItemHandler = function (cell) {\n        // Logger.getInstance().log(cell.itemData);\n        if (this.curEquipItem)\n            this.curEquipItem.setSelect(false);\n        var data = cell.itemData;\n        this.curSelectItemData = data;\n        this.updateEquipItem(data);\n        cell.setSelect(true);\n        if (this.curEquipItem)\n            this.curEquipItem.setSelect(false);\n        this.curEquipItem = cell;\n        if (data.owned && !data.selected)\n            this.emit("reqEquiped", data.id);\n    };\n    PicaEquipUpgradeItem.prototype.updateEquipItem = function (data) {\n        this.penetrationText.text = data.buffDisplayNames[0];\n        this.equipDes.text = data.description;\n        this.equipName.text = data.name;\n        if (data.owned)\n            this.unlockbtn.visible = false;\n        else\n            this.unlockbtn.visible = true;\n        if (data.qualified) {\n            this.unlockCondition.visible = false;\n            this.unlockbtn.setInteractive();\n            this.unlockBg.clearTint();\n            this.costNum.setColor("#ffffff");\n        }\n        else if (!data.owned) {\n            this.unlockCondition.visible = true;\n            this.unlockCondition.text = data.conditionDisplayNames[0];\n            this.unlockbtn.disableInteractive();\n            this.unlockBg.setTintFill(0x888888);\n            this.costNum.setColor("#999999");\n        }\n        if (data.price === null) {\n            this.costNum.visible = false;\n            this.diamondIcon.visible = false;\n            this.btnName.setPosition(0, 0 * this.dpr);\n        }\n        else {\n            var costPrice = data.price.price;\n            var powValue = Math.pow(10, data.price.displayPrecision);\n            this.costNum.text = Math.floor(costPrice * powValue) / powValue + "";\n            this.costNum.visible = true;\n            this.diamondIcon.visible = true;\n            this.diamondIcon.setTexture(this.commonKey, utils__WEBPACK_IMPORTED_MODULE_1__["Coin"].getIcon(data.price.coinType));\n            this.diamondIcon.setDisplaySize(12 * this.dpr, 12 * this.dpr);\n            this.btnName.setPosition(0, 6 * this.dpr);\n        }\n    };\n    PicaEquipUpgradeItem.prototype.onUnlockEquipHandler = function () {\n        this.emit("reqActive", this.curEquipItem.itemData.id);\n    };\n    PicaEquipUpgradeItem.prototype.createBtn = function () {\n        // this.unlockCondition = this.mScene.make.text({ x: 0, y: -26 * this.dpr, text: "", style: { color: "#000000", fontSize: 10 * this.dpr, fontFamily: Font.DEFULT_FONT } }).setOrigin(0.5, 0.5);\n        this.unlockCondition = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.mScene, 0, -26 * this.dpr, "", {})\n            .setOrigin(0.5).setFontSize(10 * this.dpr).setFontFamily(utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT);\n        this.unlockbtn = this.mScene.make.container(undefined, false);\n        var btnBg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NinePatch"](this.mScene, 0, 0, 88 * this.dpr, 31 * this.dpr, this.commonKey, "yellow_btn_normal", undefined, undefined, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 12 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        this.unlockBg = btnBg;\n        this.diamondIcon = this.mScene.make.image({ x: -13 * this.dpr, y: -8 * this.dpr, key: this.commonKey, frame: "test_diamond" });\n        this.costNum = this.mScene.make.text({ x: -2, y: -8 * this.dpr, text: "1000", style: { color: "#ffffff", fontSize: 10 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        this.btnName = this.mScene.make.text({ x: 0, y: 6 * this.dpr, text: "", style: { color: "#8F4300", fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT } }).setOrigin(0.5, 0.5);\n        this.costNum.setStroke("#ffffff", 1);\n        this.btnName.setStroke("#8F4300", 1);\n        this.unlockCondition.setStroke("#000000", 1);\n        this.unlockbtn.setPosition(70 * this.dpr, 48 * this.dpr);\n        this.unlockbtn.setSize(btnBg.width, btnBg.height);\n        this.unlockbtn.add([this.unlockCondition, btnBg, this.diamondIcon, this.costNum, this.btnName]);\n        this.unlockbtn.on("pointerup", this.onUnlockEquipHandler, this);\n        this.mContainer.add(this.unlockbtn);\n    };\n    return PicaEquipUpgradeItem;\n}(Phaser.Events.EventEmitter));\n\nvar EquipItemCell = /** @class */ (function (_super) {\n    __extends(EquipItemCell, _super);\n    function EquipItemCell(scene, dpr, key) {\n        var _this = _super.call(this, scene) || this;\n        _this.isSelect = false;\n        _this.isUnlock = false;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.create();\n        return _this;\n    }\n    EquipItemCell.prototype.setItemData = function (data) {\n        var _this = this;\n        this.itemData = data;\n        var url = utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(data.display.texturePath);\n        this.equipIcon.load(url, this, function () {\n            _this.equipIcon.scale = _this.dpr;\n        });\n        this.setEquiped(data.selected, data.owned);\n        this.setSelect(this.isSelect);\n    };\n    EquipItemCell.prototype.setSelect = function (isSelect) {\n        this.isSelect = isSelect;\n        var bgName = "equipbg";\n        if (!isSelect) {\n            if (this.isUnlock)\n                bgName = "equipbg2";\n            else\n                bgName = "equipbg1";\n        }\n        if (this.itemData.selected)\n            bgName = "equipbg2";\n        this.bg.setTexture(this.key, bgName);\n    };\n    EquipItemCell.prototype.setChildPosition = function () {\n        var x = this.bg.width * 0.5 + 10 * this.dpr;\n        var y = this.height - 10 * this.dpr;\n        this.bg.setPosition(x, y);\n        x = x + 1 * this.dpr;\n        y = this.height * 0.5 + 2 * this.dpr;\n        this.equipIcon.setPosition(x, y);\n        x = x + 22 * this.dpr;\n        y = 8 * this.dpr;\n        this.unlock.setPosition(x, y);\n    };\n    EquipItemCell.prototype.setEquiped = function (isequiped, unlock) {\n        this.isUnlock = unlock;\n        this.unlock.visible = false;\n        if (isequiped) {\n            this.isUnlock = true;\n            this.unlock.visible = true;\n            this.unlock.setTexture(this.key, "ok");\n        }\n        else if (!this.isUnlock) {\n            this.unlock.visible = true;\n            this.unlock.setTexture(this.key, "lock");\n        }\n    };\n    EquipItemCell.prototype.create = function () {\n        this.bg = this.scene.make.image({ x: 0, y: -10 * this.dpr, key: this.key, frame: "equipbg" });\n        this.equipIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["DynamicImage"](this.scene, 15 * this.dpr, 0 * this.dpr);\n        this.unlock = this.scene.make.image({ x: 30 * this.dpr, y: -10 * this.dpr, key: this.key, frame: "lock" });\n        this.add([this.bg, this.equipIcon, this.unlock]);\n    };\n    return EquipItemCell;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradeItem.ts?')},"./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaEquipUpgradePanel", function() { return PicaEquipUpgradePanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _PicaEquipUpgradeItem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaEquipUpgradeItem */ "./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradeItem.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar PicaEquipUpgradePanel = /** @class */ (function (_super) {\n    __extends(PicaEquipUpgradePanel, _super);\n    function PicaEquipUpgradePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.commonkey = "common_key";\n        _this.equipItems = [];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEQUIPUPGRADE_NAME;\n        return _this;\n    }\n    PicaEquipUpgradePanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(w, h);\n        this.bg.x = w / 2;\n        this.bg.y = h / 2;\n        this.tilteName.x = this.bg.x;\n        this.tilteName.y = this.bg.y - this.bg.height / 2;\n        this.titlebg.x = this.bg.x;\n        this.titlebg.y = this.bg.y - this.bg.height / 2;\n        this.closeBtn.x = this.bg.x + this.bg.width / 2 - 10 * this.dpr;\n        this.closeBtn.y = this.bg.y - this.bg.height / 2 + 10 * this.dpr;\n        this.blackBg.clear();\n        this.blackBg.fillStyle(0, 0.5);\n        this.blackBg.fillRoundedRect(-this.x, -this.y, w, h);\n        this.add([this.blackBg, this.bg, this.closeBtn, this.titlebg, this.tilteName]);\n    };\n    PicaEquipUpgradePanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.refreshData();\n        this.addListen();\n    };\n    PicaEquipUpgradePanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on("pointerup", this.OnClosePanel, this);\n    };\n    PicaEquipUpgradePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off("pointerup", this.OnClosePanel, this);\n    };\n    PicaEquipUpgradePanel.prototype.preload = function () {\n        this.commonkey = picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey;\n        this.addAtlas(this.key, "equip_upgrade/mine_eqpm.png", "equip_upgrade/mine_eqpm.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaEquipUpgradePanel.prototype.init = function () {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        this.setSize(w, h);\n        this.blackBg = this.scene.make.graphics(undefined, false);\n        this.blackBg.clear();\n        this.blackBg.fillStyle(0, 0.5);\n        this.blackBg.fillRoundedRect(0, 0, w, h);\n        this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height), Phaser.Geom.Rectangle.Contains);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NinePatch"](this.scene, 0, 0, 300 * this.dpr, 300 * this.dpr, this.commonkey, "bg", undefined, undefined, {\n            left: 40,\n            top: 40,\n            bottom: 40,\n            right: 40,\n        });\n        var posY = -this.bg.height * 0.5;\n        this.titlebg = this.scene.make.image({ x: 0, y: posY, key: this.key, frame: "titlebg" });\n        this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.tilteName = this.scene.make.text({ x: 0, y: posY, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("equipupgrade.title"), style: { color: "#8F4300", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } }).setOrigin(0.5, 0);\n        this.tilteName.setFontStyle("bold");\n        this.closeBtn = this.scene.make.image({ x: this.bg.width * 0.5 - this.dpr * 5, y: posY + this.dpr * 5, key: this.commonkey, frame: "close" });\n        this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.tilteName.setStroke("#8F4300", 1);\n        this.closeBtn.setInteractive();\n        this.add([this.blackBg, this.bg, this.closeBtn, this.titlebg, this.tilteName]);\n        this.resize(this.scene.cameras.main.width, this.scene.cameras.main.height);\n        _super.prototype.init.call(this);\n    };\n    PicaEquipUpgradePanel.prototype.setEquipDatas = function (content) {\n        this.content = content;\n        if (!this.mInitialized)\n            return;\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        var arr = content.mineEquipments; // this.getEuipDatas();// [content.minePicks, content.minePicks];\n        var height = 175 * this.dpr;\n        var bgHeight = height * arr.length - (arr.length >= 2 ? 40 * (arr.length - 2) : 0);\n        var cellHeight = 155 * this.dpr;\n        this.resetPosition(this.bg.width, bgHeight);\n        var posY = -bgHeight * 0.5 + 100 * this.dpr;\n        var index = 0;\n        for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n            var value = arr_1[_i];\n            value["isblue"] = (index % 2 === 0 ? false : true);\n            var item = new _PicaEquipUpgradeItem__WEBPACK_IMPORTED_MODULE_5__["PicaEquipUpgradeItem"](this.scene, this, this.dpr, this.scale, this.key, this.commonkey);\n            item.on("reqActive", this.onReqActiveEquipment, this);\n            item.on("reqEquiped", this.onReqEquipedEquipment, this);\n            item.setEquipItems(value);\n            item.setTransPosition(w / 2, posY + h / 2);\n            this.equipItems.push(item);\n            posY += cellHeight;\n            index++;\n        }\n        this.resize(w, h);\n    };\n    PicaEquipUpgradePanel.prototype.setActiveEquipment = function (equip) {\n        var index = 0;\n        var changeArr = [];\n        for (var _i = 0, _a = this.content.mineEquipments; _i < _a.length; _i++) {\n            var value = _a[_i];\n            var item = this.equipItems[index];\n            var activeIndex = -1;\n            // tslint:disable-next-line: prefer-for-of\n            for (var i = 0; i < value.mineEquipments.length; i++) {\n                var data = value.mineEquipments[i];\n                if (data.id === equip.id) {\n                    value.mineEquipments[i] = equip;\n                    item.refreshEquipData(equip, i);\n                    activeIndex = i;\n                }\n                else {\n                    if (data.selected)\n                        data.selected = false;\n                }\n            }\n            if (activeIndex >= 0) {\n                item.refreshEquipData(equip, activeIndex);\n            }\n            index++;\n        }\n    };\n    PicaEquipUpgradePanel.prototype.destroy = function () {\n        if (this.equipItems) {\n            for (var _i = 0, _a = this.equipItems; _i < _a.length; _i++) {\n                var item = _a[_i];\n                item.destroy();\n            }\n            this.equipItems.length = 0;\n        }\n        this.equipItems = null;\n        this.content = null;\n        _super.prototype.destroy.call(this);\n    };\n    PicaEquipUpgradePanel.prototype.getEuipDatas = function () {\n        var arr = [];\n        for (var i = 0; i < 3; i++) {\n            var obj = {};\n            obj["name"] = i === 0 ? "" : "";\n            obj["items"] = [];\n            obj["isblue"] = !(i % 2 === 0);\n            for (var j = 0; j < 15; j++) {\n                var item = {};\n                item["name"] = "" + j;\n                item["penetration"] = 10 + j;\n                item["des"] = "describle";\n                item["cost"] = 100 * j;\n                item["unlock"] = false;\n                obj["items"].push(item);\n            }\n            arr.push(obj);\n        }\n        return arr;\n    };\n    PicaEquipUpgradePanel.prototype.refreshData = function () {\n        var upgradeData = this.getData("upgradeData");\n        if (upgradeData)\n            this.setEquipDatas(upgradeData);\n    };\n    PicaEquipUpgradePanel.prototype.resetPosition = function (width, height) {\n        this.bg.resize(width, height);\n        var posY = -height * 0.5;\n        this.titlebg.setPosition(0, posY);\n        this.tilteName.setPosition(0, posY);\n        this.closeBtn.setPosition(width * 0.5 - this.dpr * 8, posY + this.dpr * 8);\n    };\n    PicaEquipUpgradePanel.prototype.OnClosePanel = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEQUIPUPGRADE_NAME + "_hide");\n    };\n    PicaEquipUpgradePanel.prototype.onReqActiveEquipment = function (id) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEQUIPUPGRADE_NAME + "_reqActive", id);\n    };\n    PicaEquipUpgradePanel.prototype.onReqEquipedEquipment = function (id) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEQUIPUPGRADE_NAME + "_reqEquiped", id);\n    };\n    return PicaEquipUpgradePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradePanel.ts?')},"./src/pica/render/ui/PicaExploreList/PicaChapterLevelClue.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaChapterLevelClue", function() { return PicaChapterLevelClue; });\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var _Components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Components */ "./src/pica/render/ui/Components/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar PicaChapterLevelClue = /** @class */ (function (_super) {\n    __extends(PicaChapterLevelClue, _super);\n    function PicaChapterLevelClue(scene, dpr, width, height) {\n        var _this = _super.call(this, scene, picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].uicommon, "bag_icon_common_bg", dpr, 1, false) || this;\n        _this.dpr = dpr;\n        _this.setSize(width, height);\n        _this.gou = _this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].uicommon, frame: "selected" });\n        _this.gou.x = _this.width * 0.5 - _this.gou.width * 0.5;\n        _this.gou.y = _this.height * 0.5 - _this.gou.height * 0.5;\n        _this.add([_this.gou]);\n        _this.BGVisible = false;\n        return _this;\n    }\n    PicaChapterLevelClue.prototype.setItemData = function (data) {\n        _super.prototype.setItemData.call(this, data);\n        this.gou.visible = data.count === 0 ? false : true;\n    };\n    return PicaChapterLevelClue;\n}(_Components__WEBPACK_IMPORTED_MODULE_1__["ItemButton"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaExploreList/PicaChapterLevelClue.ts?')},"./src/pica/render/ui/PicaExploreList/PicaExploreListBottomPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListBottomPanel", function() { return PicaExploreListBottomPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaExploreListBottomPanel = /** @class */ (function (_super) {\n    __extends(PicaExploreListBottomPanel, _super);\n    function PicaExploreListBottomPanel(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene, dpr, zoom) || this;\n        _this.chapterItems = [];\n        _this.curChapterID = 0;\n        _this.unlockChapterID = 0;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.init();\n        return _this;\n    }\n    PicaExploreListBottomPanel.prototype.resize = function (w, h) {\n        this.setSize(w, h);\n        this.leftButton.x = -this.width * 0.5 + 48 * this.dpr;\n        this.rightButton.x = this.width * 0.5 - 48 * this.dpr;\n    };\n    PicaExploreListBottomPanel.prototype.refreshMask = function () {\n        for (var _i = 0, _a = this.chapterItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.refreshMask();\n        }\n    };\n    PicaExploreListBottomPanel.prototype.setChapterDatas = function (data) {\n        this.chapterProDatas = data;\n        this.onChapterProHandler(data.nextChapterId);\n    };\n    PicaExploreListBottomPanel.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    PicaExploreListBottomPanel.prototype.setChapterProData = function () {\n        if (!this.chapterProDatas)\n            return;\n        var chapters = this.chapterProDatas.chapters;\n        var chapterid = this.curChapterID - 2;\n        for (var i = 0; i < 5; i++) {\n            var item = this.chapterItems[i];\n            if (chapterid >= 1) {\n                if (chapterid <= chapters.length) {\n                    var data = chapters[chapterid - 1];\n                    item.setChapterData(data);\n                    if (data.progress !== -1)\n                        this.unlockChapterID = data.chapterId;\n                }\n                else {\n                    item.setChapterData(undefined);\n                }\n            }\n            else {\n                item.setChapterData(undefined);\n            }\n            chapterid += 1;\n        }\n    };\n    PicaExploreListBottomPanel.prototype.init = function () {\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "explore_nav_bg" });\n        this.bg.displayWidth = this.width;\n        this.leftButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, "explore_switch_left");\n        this.rightButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, "explore_switch_right");\n        this.leftButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onLeftClickHandler, this);\n        this.rightButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRightClickHandler, this);\n        this.add([this.bg, this.leftButton, this.rightButton]);\n        this.createChapterItems();\n        this.resize(this.width, this.bg.height);\n    };\n    PicaExploreListBottomPanel.prototype.createChapterItems = function () {\n        var space = 16 * this.dpr;\n        var posx = -91 * this.dpr;\n        var beforItem;\n        for (var i = 0; i < 5; i++) {\n            var zoom = i === 2 ? true : false;\n            var item = new ChapterItemProgress(this.scene, this.dpr, this.zoom, zoom);\n            item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onChapterProHandler));\n            if (i !== 0)\n                posx += item.width * 0.5 + space + (beforItem ? beforItem.width * 0.5 : item.width * 0.5);\n            item.x = posx;\n            this.chapterItems.push(item);\n            beforItem = item;\n        }\n        this.add(this.chapterItems);\n    };\n    PicaExploreListBottomPanel.prototype.onLeftClickHandler = function () {\n        var tempid = this.curChapterID;\n        if (tempid === 1)\n            return;\n        tempid--;\n        if (tempid < 1)\n            tempid = 1;\n        this.onChapterProHandler(tempid);\n    };\n    PicaExploreListBottomPanel.prototype.onRightClickHandler = function () {\n        var tempid = this.curChapterID;\n        if (tempid === this.unlockChapterID)\n            return;\n        tempid++;\n        if (!this.chapterProDatas)\n            tempid = 1;\n        if (tempid > this.unlockChapterID) {\n            tempid = this.unlockChapterID;\n        }\n        this.onChapterProHandler(tempid);\n    };\n    PicaExploreListBottomPanel.prototype.onChapterProHandler = function (chapterID) {\n        if (this.curChapterID === chapterID)\n            return;\n        this.curChapterID = chapterID;\n        this.setChapterProData();\n        if (this.send)\n            this.send.runWith(["chapterdata", chapterID]);\n    };\n    return PicaExploreListBottomPanel;\n}(Phaser.GameObjects.Container));\n\nvar ChapterItemProgress = /** @class */ (function (_super) {\n    __extends(ChapterItemProgress, _super);\n    function ChapterItemProgress(scene, dpr, zoom, isZoom) {\n        var _this = _super.call(this, scene, 0, 0, false) || this;\n        _this.proValue = 0;\n        _this.unlock = false;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.isZoom = isZoom;\n        _this.init();\n        _this.setZoom(isZoom);\n        return _this;\n    }\n    /**\n     *\n     * progress [-1,0,100] -1 ,100\n     */\n    ChapterItemProgress.prototype.setChapterData = function (data) {\n        this.chapterProData = data;\n        if (!data) {\n            this.lockImg.visible = false;\n            this.setProgress(0);\n            this.finishImg.visible = false;\n            this.unlock = false;\n            this.levelTex.visible = false;\n        }\n        else {\n            if (this.chapterProData.progress === -1) {\n                this.unlock = false;\n                this.lockImg.visible = true;\n                this.finishImg.visible = false;\n                this.levelTex.visible = false;\n                this.setProgress(0);\n            }\n            else {\n                this.unlock = true;\n                if (data.progress === 100)\n                    this.finishImg.visible = true;\n                else\n                    this.finishImg.visible = false;\n                this.lockImg.visible = false;\n                this.levelTex.visible = true;\n                this.setProgress(data.progress / 100);\n            }\n            this.levelTex.text = data.chapterId + "";\n        }\n    };\n    ChapterItemProgress.prototype.setProgress = function (value) {\n        var startAngle = -90;\n        var endAngle = 360 * value - 90;\n        this.barmask.clear();\n        this.barmask.fillStyle(0xffffff);\n        this.barmask.slice(0, 0, 43 * this.dpr / this.zoom, Phaser.Math.DegToRad(startAngle), Phaser.Math.DegToRad(endAngle), false);\n        this.barmask.fillPath();\n        this.proValue = value;\n    };\n    ChapterItemProgress.prototype.refreshMask = function () {\n        var world = this.getWorldTransformMatrix();\n        this.barmask.setPosition(world.tx, world.ty);\n    };\n    ChapterItemProgress.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.barmask.destroy();\n    };\n    ChapterItemProgress.prototype.setZoom = function (zoom) {\n        if (zoom) {\n            this.bg.setFrame("explore_sequence_select_bottom");\n            this.lightbg.setFrame("explore_sequence_select_schedule");\n            this.topbg.setFrame("explore_sequence_select_top");\n            this.finishImg.setFrame("explore_sequence_uncheck_big");\n            this.levelTex.setFontSize(24 * this.dpr);\n            this.setSize(this.bg.width, this.bg.height);\n        }\n        else {\n            this.bg.setFrame("explore_sequence_uncheck_bottom");\n            this.lightbg.setFrame("explore_sequence_uncheck_schedule");\n            this.topbg.setFrame("explore_sequence_uncheck_top");\n            this.finishImg.setFrame("explore_sequence_uncheck_small");\n            this.levelTex.setFontSize(16 * this.dpr);\n            this.setSize(this.bg.width, this.bg.height);\n        }\n        this.enable = false;\n        this.enable = true;\n    };\n    ChapterItemProgress.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    ChapterItemProgress.prototype.init = function () {\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "explore_sequence_uncheck_bottom" });\n        this.lightbg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "explore_sequence_uncheck_schedule" });\n        this.topbg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "explore_sequence_uncheck_top" });\n        this.levelTex = this.scene.make.text({ style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].whiteStyle(this.dpr, 16) }).setOrigin(0.5);\n        this.levelTex.setFontStyle("bold");\n        this.finishImg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "explore_sequence_uncheck_small" });\n        this.lockImg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "explore_switch_lock" });\n        this.finishImg.y = this.height * 0.5;\n        this.barmask = this.scene.make.graphics(undefined, false);\n        this.lightbg.mask = this.barmask.createGeometryMask();\n        this.add([this.bg, this.lightbg, this.topbg, this.levelTex, this.finishImg, this.lockImg]);\n        this.setSize(this.bg.width, this.bg.height);\n        this.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n        this.finishImg.visible = false;\n        this.lockImg.visible = false;\n    };\n    ChapterItemProgress.prototype.onClickHandler = function () {\n        if (!this.unlock)\n            return;\n        if (this.send)\n            this.send.runWith(this.chapterProData.chapterId);\n    };\n    return ChapterItemProgress;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"]));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaExploreList/PicaExploreListBottomPanel.ts?')},"./src/pica/render/ui/PicaExploreList/PicaExploreListDetailPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListDetailPanel", function() { return PicaExploreListDetailPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _PicaChapterLevelClue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaChapterLevelClue */ "./src/pica/render/ui/PicaExploreList/PicaChapterLevelClue.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar PicaExploreListDetailPanel = /** @class */ (function (_super) {\n    __extends(PicaExploreListDetailPanel, _super);\n    function PicaExploreListDetailPanel(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.needItems = [];\n        _this.labels = [];\n        _this.needDatas = [];\n        _this.indexed = -1;\n        _this.labelsCount = 0;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.init();\n        _this.setInteractive();\n        return _this;\n    }\n    PicaExploreListDetailPanel.prototype.resize = function (w, h) {\n        this.setSize(w, h);\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0x000000, 0.73);\n        this.blackGraphic.fillRect(0, 0, w, h);\n        this.blackGraphic.x = -w * 0.5;\n        this.blackGraphic.y = -h * 0.5;\n        this.lineGraphic.clear();\n        this.lineGraphic.fillStyle(0x0B0B0B, 1);\n        this.lineGraphic.fillRect(-12 * this.dpr, -this.dpr, 24 * this.dpr, 2 * this.dpr);\n        this.mPropGrid.resetMask();\n    };\n    PicaExploreListDetailPanel.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    PicaExploreListDetailPanel.prototype.setCaptoreResultData = function (data) {\n        var numTex = utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].language !== "zh-CN" ? data.chapter.chapterId + "" : structure__WEBPACK_IMPORTED_MODULE_4__["ChineseUnit"].numberToChinese(data.chapter.chapterId);\n        this.titleTex.text = utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("explore.chaptertitle", { name: numTex });\n        this.captoreTex.text = data.chapter.name;\n        this.captoreDes.text = data.chapter.des;\n        this.taskTex.text = utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("explore.taskneedtips");\n        this.needDatas.length = 0;\n        for (var _i = 0, _a = data.levels; _i < _a.length; _i++) {\n            var level = _a[_i];\n            for (var _b = 0, _c = level.clueItems; _b < _c.length; _b++) {\n                var item = _c[_b];\n                this.needDatas.push(item);\n            }\n        }\n        this.setNeedItems(this.needDatas);\n        var count = Math.ceil(this.needDatas.length / 6);\n        this.setNeedBottomImgs(count);\n        this.setLabelsSelect(0);\n    };\n    PicaExploreListDetailPanel.prototype.setNeedItems = function (datas) {\n        var gridDatas = [];\n        for (var i = 0; i < datas.length; i += 6) {\n            var temps = [];\n            for (var j = i; j < i + 6; j++) {\n                if (j < datas.length)\n                    temps.push(datas[j]);\n            }\n            gridDatas.push(temps);\n        }\n        this.mPropGrid.setItems(gridDatas);\n    };\n    PicaExploreListDetailPanel.prototype.setNeedBottomImgs = function (count) {\n        this.labelsCount = count;\n        for (var _i = 0, _a = this.labels; _i < _a.length; _i++) {\n            var label = _a[_i];\n            label.visible = false;\n        }\n        for (var i = 0; i < count; i++) {\n            var label = void 0;\n            if (i < this.labels.length) {\n                label = this.labels[i];\n            }\n            else {\n                label = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "explore_page_down" });\n                this.content.add(label);\n                this.labels.push(label);\n            }\n            label.visible = true;\n        }\n        this.setLabelLayout(count);\n    };\n    PicaExploreListDetailPanel.prototype.init = function () {\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.add(this.blackGraphic);\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "explore_chapter_total_open" });\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(this.bg.width, this.bg.height);\n        this.add(this.content);\n        this.backButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "close");\n        this.backButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onHideHandler, this);\n        this.backButton.x = this.content.width * 0.5;\n        this.backButton.y = -this.content.height * 0.5;\n        var leftMidx = -75 * this.dpr, rightMidx = 75 * this.dpr;\n        var topy = -this.content.height * 0.5 + 20 * this.dpr;\n        this.titleTex = this.scene.make.text({ style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].colorStyle("#8743B9", 14 * this.dpr) }).setOrigin(0.5);\n        this.titleTex.setFontStyle("bold");\n        this.titleTex.x = leftMidx;\n        this.titleTex.y = topy;\n        this.captoreTex = this.scene.make.text({ style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].blackStyle(this.dpr, 14) }).setOrigin(0.5);\n        this.captoreTex.setFontStyle("bold");\n        this.captoreTex.y = this.titleTex.y + 25 * this.dpr;\n        this.captoreTex.x = leftMidx;\n        this.lineGraphic = this.scene.make.graphics(undefined, false);\n        this.lineGraphic.x = leftMidx;\n        this.lineGraphic.y = this.captoreTex.y + 15 * this.dpr;\n        this.captoreDes = this.scene.make.text({ style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].blackStyle(this.dpr, 11) }).setOrigin(0);\n        this.captoreDes.setWordWrapWidth(117 * this.dpr, true);\n        this.captoreDes.x = leftMidx - 58 * this.dpr;\n        this.captoreDes.y = this.lineGraphic.y + 16 * this.dpr;\n        this.taskTex = this.scene.make.text({ style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].blackStyle(this.dpr, 14) }).setOrigin(0.5);\n        this.taskTex.setFontStyle("bold");\n        this.taskTex.x = rightMidx;\n        this.taskTex.y = this.captoreTex.y;\n        this.mPropGrid = this.createGrid();\n        this.mPropGrid.x = rightMidx + 5 * this.dpr;\n        this.mPropGrid.y = 15 * this.dpr;\n        this.content.add([this.bg, this.backButton, this.titleTex, this.captoreTex, this.lineGraphic, this.captoreDes, this.taskTex, this.mPropGrid]);\n        this.resize(this.width, this.height);\n    };\n    PicaExploreListDetailPanel.prototype.setLabelLayout = function (count) {\n        var cellwidth = 6 * this.dpr, space = 8 * this.dpr, posy = this.content.height * 0.5 - 30 * this.dpr;\n        var rightMidx = 80 * this.dpr;\n        var posx = rightMidx - ((cellwidth * count + space * (count - 1)) * 0.5) + cellwidth * 0.5;\n        for (var i = 0; i < count; i++) {\n            var label = this.labels[i];\n            label.x = posx;\n            label.y = posy;\n            posx += cellwidth + space;\n        }\n    };\n    PicaExploreListDetailPanel.prototype.onHideHandler = function () {\n        if (this.send)\n            this.send.runWith("hide");\n    };\n    PicaExploreListDetailPanel.prototype.createGrid = function () {\n        var _this = this;\n        var capW = 110 * this.dpr;\n        var capH = 157 * this.dpr;\n        var tableConfig = {\n            x: 0,\n            y: 0,\n            table: {\n                width: 110 * this.dpr,\n                height: 157 * this.dpr,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                zoom: this.zoom,\n                mask: true\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = _this.createGridLayout();\n                }\n                cellContainer.setItems(item);\n                return cellContainer;\n            },\n            onScrollValueChange: function (value) {\n                if (value < 0)\n                    value = 0;\n                else if (value > 1)\n                    value = 1;\n                var indexed = Math.floor((value * _this.labelsCount));\n                _this.setLabelsSelect(indexed);\n            }\n        };\n        var mPropGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        mPropGrid.layout();\n        mPropGrid.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onSelectItemHandler(cell, _this.scene.input.activePointer);\n            }\n        });\n        return mPropGrid;\n    };\n    PicaExploreListDetailPanel.prototype.setLabelsSelect = function (indexed) {\n        if (this.indexed === indexed)\n            return;\n        if (indexed >= this.labelsCount)\n            indexed = this.labelsCount - 1;\n        for (var i = 0; i < this.labelsCount; i++) {\n            if (indexed === i) {\n                this.labels[i].setFrame("explore_page_up");\n            }\n            else {\n                this.labels[i].setFrame("explore_page_down");\n            }\n        }\n        this.indexed = indexed;\n    };\n    PicaExploreListDetailPanel.prototype.createGridLayout = function () {\n        var gridlayout = new ChapterGridLayout(this.scene, 120 * this.dpr, 157 * this.dpr, this.dpr, {\n            cellSize: new Phaser.Math.Vector2(45 * this.dpr, 45 * this.dpr),\n            space: new Phaser.Math.Vector2(15 * this.dpr, 5 * this.dpr),\n            startAxis: gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["AxisType"].Vertical,\n            constraint: gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["ConstraintType"].FixedColumnCount,\n            constraintCount: 2,\n            alignmentType: gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["AlignmentType"].UpperCenter\n        });\n        return gridlayout;\n    };\n    PicaExploreListDetailPanel.prototype.onSelectItemHandler = function (obj, pointer) {\n        // obj.showTips();\n        obj.checkPointer(pointer);\n    };\n    return PicaExploreListDetailPanel;\n}(Phaser.GameObjects.Container));\n\nvar ChapterGridLayout = /** @class */ (function (_super) {\n    __extends(ChapterGridLayout, _super);\n    function ChapterGridLayout(scene, width, height, dpr, config) {\n        var _this = _super.call(this, scene, 0, 0, config) || this;\n        _this.items = [];\n        _this.dpr = dpr;\n        _this.setSize(width, height);\n        return _this;\n    }\n    ChapterGridLayout.prototype.setItems = function (datas) {\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n        }\n        for (var i = 0; i < datas.length; i++) {\n            var item = void 0;\n            if (i < this.items.length) {\n                item = this.items[i];\n            }\n            else {\n                item = new _PicaChapterLevelClue__WEBPACK_IMPORTED_MODULE_5__["PicaChapterLevelClue"](this.scene, this.dpr, 43 * this.dpr, 43 * this.dpr);\n                this.add(item);\n                this.items.push(item);\n            }\n            item.visible = true;\n            item.setItemData(datas[i]);\n        }\n        this.Layout();\n    };\n    ChapterGridLayout.prototype.checkPointer = function (pointer) {\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (item.visible) {\n                if (utils__WEBPACK_IMPORTED_MODULE_1__["Tool"].checkPointerContains(item, pointer)) {\n                    item.showTips();\n                }\n            }\n        }\n    };\n    return ChapterGridLayout;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["GridLayoutGroup"]));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaExploreList/PicaExploreListDetailPanel.ts?')},"./src/pica/render/ui/PicaExploreList/PicaExploreListLevelPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListLevelPanel", function() { return PicaExploreListLevelPanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _PicaChapterLevelClue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaChapterLevelClue */ "./src/pica/render/ui/PicaExploreList/PicaChapterLevelClue.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar PicaExploreListLevelPanel = /** @class */ (function (_super) {\n    __extends(PicaExploreListLevelPanel, _super);\n    function PicaExploreListLevelPanel(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.levelItems = [];\n        _this.posValue = 0;\n        _this.topHeight = 0;\n        _this.bottomHeight = 0;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.init();\n        return _this;\n    }\n    PicaExploreListLevelPanel.prototype.resize = function (w, h) {\n        this.setSize(w, h);\n        this.topbg.x = 0;\n        this.topbg.y = -this.height * 0.5 + this.topbg.height * 0.5 - this.topHeight;\n        this.titlebg.x = 0;\n        this.titlebg.y = -this.height * 0.5 + this.titlebg.height * 0.5;\n        this.titleTex.x = this.titlebg.x;\n        this.titleTex.y = this.titlebg.y;\n        var scrollheight = h - this.titlebg.height - 15 * this.dpr;\n        this.captorScroll.resetSize(w, scrollheight);\n        this.captorScroll.x = 0;\n        this.captorScroll.y = this.height * 0.5 - scrollheight * 0.5;\n        this.refreshMask();\n    };\n    PicaExploreListLevelPanel.prototype.refreshMask = function () {\n        this.captorScroll.refreshMask();\n    };\n    PicaExploreListLevelPanel.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    PicaExploreListLevelPanel.prototype.setTopAndBottomHeight = function (top, bottom) {\n        this.topHeight = top;\n        this.bottomHeight = bottom;\n    };\n    PicaExploreListLevelPanel.prototype.setCaptoreResult = function (result, nextLevelID) {\n        this.chapterResult = result;\n        var chapter = result.chapter;\n        var lock = result["lock"];\n        var numTex = utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].language !== "zh-CN" ? chapter.chapterId + "" : structure__WEBPACK_IMPORTED_MODULE_4__["ChineseUnit"].numberToChinese(chapter.chapterId, true);\n        this.titleTex.text = utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("explore.chaptertitle", { name: numTex });\n        this.captorScroll.clearItems(false);\n        this.setForwardDatas(result.chapter, lock);\n        if (!lock)\n            this.setLevelDatas(result.levels, nextLevelID);\n        this.posValue = 0;\n        this.captorScroll.Sort();\n        if (lock) {\n            this.captorScroll.setEnable(false);\n        }\n        else {\n            this.captorScroll.setEnable(true);\n            this.setIndexedLayout(nextLevelID - result.levels[0].levelId);\n        }\n    };\n    PicaExploreListLevelPanel.prototype.setLevelDatas = function (levels, nextLevelID) {\n        for (var _i = 0, _a = this.levelItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n        }\n        for (var i = 0; i < levels.length; i++) {\n            var item = void 0;\n            if (i < this.levelItems.length) {\n                if (i === levels.length - 1) {\n                    item = this.finalItem;\n                }\n                else {\n                    item = this.levelItems[i];\n                }\n            }\n            else {\n                if (i === levels.length - 1) {\n                    if (!this.finalItem) {\n                        if (levels[i].type === 2) {\n                            item = new ChapterLevelEventuallyItem(this.scene, this.dpr);\n                        }\n                        else {\n                            item = new ChapterLevelItem(this.scene, this.dpr);\n                        }\n                        this.finalItem = item;\n                    }\n                    else {\n                        item = this.finalItem;\n                    }\n                }\n                else {\n                    item = new ChapterLevelItem(this.scene, this.dpr);\n                    this.levelItems.push(item);\n                }\n                item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.onChapterLevelHandler));\n            }\n            this.captorScroll.addItem(item);\n            item.visible = true;\n            var data = levels[i];\n            var lock = data.id > nextLevelID ? true : false;\n            item.setLevelData(data, lock);\n        }\n    };\n    PicaExploreListLevelPanel.prototype.setForwardDatas = function (data, lock) {\n        if (!this.forewordItem) {\n            this.forewordItem = new ForewordChapterItem(this.scene, this.dpr);\n            this.forewordItem.on(apowophaserui__WEBPACK_IMPORTED_MODULE_3__["ClickEvent"].Tap, this.onForewordClickHandler, this);\n        }\n        this.forewordItem.setCaptoreData(data);\n        this.captorScroll.addItem(this.forewordItem);\n        if (lock) {\n            this.lockItem = new ChapterLevelLockItem(this.scene, this.dpr);\n            this.lockItem.setHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.onChapterLockHandler));\n            this.captorScroll.addItem(this.lockItem);\n            this.lockItem.setLevelData(data, false);\n        }\n    };\n    PicaExploreListLevelPanel.prototype.init = function () {\n        var _this = this;\n        this.topbg = this.scene.make.image({ key: "explore_mask" });\n        this.titlebg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_title" });\n        this.titleTex = this.scene.make.text({ style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].whiteStyle(this.dpr, 18) }).setOrigin(0.5);\n        this.titleTex.setFontStyle("bold");\n        var scrollheight = this.height - this.titlebg.height - 15 * this.dpr;\n        this.captorScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_3__["GameScroller"](this.scene, {\n            x: 0,\n            y: 0,\n            width: this.width,\n            height: scrollheight,\n            zoom: this.zoom,\n            dpr: this.dpr,\n            align: 2,\n            orientation: 0,\n            space: 10 * this.dpr,\n            mask: false,\n            valuechangeCallback: function (value) {\n                _this.onScrollValueChange(value);\n            },\n            cellupCallBack: function (gameobject) {\n                _this.onScrollClickHandler(gameobject);\n            }\n        });\n        this.add([this.captorScroll, this.topbg, this.titlebg, this.titleTex]);\n        this.resize(this.width, this.height);\n        this.topbg.visible = false;\n    };\n    PicaExploreListLevelPanel.prototype.setIndexedLayout = function (indexed) {\n        var item;\n        if (indexed < this.chapterResult.levels.length - 1) {\n            item = this.levelItems[indexed];\n        }\n        else {\n            item = this.finalItem;\n        }\n        var worldy = item.getWorldTransformMatrix().ty;\n        var thisy = this.captorScroll.getWorldTransformMatrix().ty;\n        var bottomdis = (worldy - thisy) / this.zoom - (this.captorScroll.height * 0.5 - item.height * 0.5);\n        if (bottomdis > 0) {\n            this.captorScroll.setValue(this.posValue - bottomdis);\n        }\n    };\n    PicaExploreListLevelPanel.prototype.onScrollClickHandler = function (obj) {\n        if (obj instanceof ForewordChapterItem) {\n            this.onForewordClickHandler();\n        }\n    };\n    PicaExploreListLevelPanel.prototype.onScrollValueChange = function (value) {\n        if (this.posValue === 0)\n            this.posValue = value;\n        if (value < this.posValue - 20 * this.dpr) {\n            if (this.send)\n                this.send.runWith(["move", true]);\n            this.topbg.visible = true;\n        }\n        else if (this.send) {\n            this.send.runWith(["move", false]);\n            this.topbg.visible = false;\n        }\n        for (var _i = 0, _a = this.levelItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.refreshMask();\n        }\n    };\n    PicaExploreListLevelPanel.prototype.onForewordClickHandler = function () {\n        if (this.send)\n            this.send.runWith(["foreword", this.chapterResult]);\n    };\n    PicaExploreListLevelPanel.prototype.onChapterLevelHandler = function (data) {\n        if (this.send)\n            this.send.runWith(["roomid", data.roomId]);\n    };\n    PicaExploreListLevelPanel.prototype.onChapterLockHandler = function (tag, data) {\n        if (tag === "lockgo") {\n        }\n        else if (tag === "lockfinish") {\n        }\n    };\n    return PicaExploreListLevelPanel;\n}(Phaser.GameObjects.Container));\n\nvar ForewordChapterItem = /** @class */ (function (_super) {\n    __extends(ForewordChapterItem, _super);\n    function ForewordChapterItem(scene, dpr) {\n        var _this = _super.call(this, scene, 0, 0, false) || this;\n        _this.dpr = dpr;\n        _this.init();\n        return _this;\n    }\n    ForewordChapterItem.prototype.setCaptoreData = function (data) {\n        this.captoreData = data;\n        var url = utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getOsdRes(data.texturePath + ("_" + this.dpr + "x.png"));\n        this.icon.load(url);\n    };\n    ForewordChapterItem.prototype.init = function () {\n        var bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_total" });\n        this.setSize(bg.width, bg.height);\n        var title = this.scene.make.text({ text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("explore.foreword"), style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].whiteStyle(this.dpr, 11) }).setOrigin(0.5);\n        title.setFontStyle("bold");\n        title.x = -3 * this.dpr;\n        title.y = -this.height * 0.5 + 23 * this.dpr;\n        this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](this.scene, 0, 0);\n        this.add([bg, title, this.icon]);\n    };\n    return ForewordChapterItem;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ButtonEventDispatcher"]));\nvar ChapterLevelBaseItem = /** @class */ (function (_super) {\n    __extends(ChapterLevelBaseItem, _super);\n    function ChapterLevelBaseItem(scene, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.unlock = false;\n        _this.dpr = dpr;\n        _this.init();\n        return _this;\n    }\n    ChapterLevelBaseItem.prototype.refreshMask = function () {\n    };\n    ChapterLevelBaseItem.prototype.setLevelData = function (data, lock) {\n        this.chapterData = data;\n        this.unlock = !lock;\n    };\n    ChapterLevelBaseItem.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    ChapterLevelBaseItem.prototype.init = function () {\n    };\n    return ChapterLevelBaseItem;\n}(Phaser.GameObjects.Container));\nvar ChapterLevelItem = /** @class */ (function (_super) {\n    __extends(ChapterLevelItem, _super);\n    function ChapterLevelItem(scene, dpr) {\n        var _this = _super.call(this, scene, dpr) || this;\n        _this.clueItms = [];\n        return _this;\n    }\n    ChapterLevelItem.prototype.refreshMask = function () {\n        this.starProgress.refreshMask();\n    };\n    ChapterLevelItem.prototype.setLevelData = function (data, lock) {\n        _super.prototype.setLevelData.call(this, data, lock);\n        this.levelTex.text = data.id + "";\n        this.leftLine.x = this.levelTex.x - this.leftLine.width * 0.5 - this.levelTex.width * 0.5 - 2 * this.dpr;\n        this.rightLine.x = this.levelTex.x + this.rightLine.width * 0.5 + this.levelTex.width * 0.5 + 2 * this.dpr;\n        var tempto = this.getProgressValue(data.progress);\n        this.starProgress.setProgress(tempto, 500);\n        var url = utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getOsdRes(data.texturePath + ("_" + this.dpr + "x.png"));\n        this.icon.load(url);\n        this.nameTex.text = data.name;\n        this.energyImg.setText("-" + data.costEnergy);\n        this.lockimg.visible = lock;\n        this.icon.visible = !lock;\n        if (lock) {\n            this.unlockTex.visible = true;\n            this.unlockTex.text = utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("explore.unlock"); // + "\\n" + "";\n            this.openButton.setFrameNormal("butt_gray");\n            this.openButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].whiteStyle(this.dpr, 13));\n            this.energyImg.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].blackStyle(this.dpr, 13));\n        }\n        else {\n            this.unlockTex.visible = false;\n            this.openButton.setFrameNormal("yellow_btn_normal");\n            this.openButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr, 13));\n            this.energyImg.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr, 13));\n            this.setClueData(data.clueItems);\n        }\n    };\n    ChapterLevelItem.prototype.setClueData = function (datas) {\n        for (var _i = 0, _a = this.clueItms; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n        }\n        if (!datas)\n            return;\n        for (var i = 0; i < datas.length; i++) {\n            var item = void 0;\n            if (i < this.clueItms.length) {\n                item = this.clueItms[i];\n            }\n            else {\n                item = new _PicaChapterLevelClue__WEBPACK_IMPORTED_MODULE_5__["PicaChapterLevelClue"](this.scene, this.dpr, 43 * this.dpr, 43 * this.dpr);\n                item.enable = true;\n                this.clueItms.push(item);\n                this.add(item);\n            }\n            item.visible = true;\n            item.setItemData(datas[i]);\n        }\n        this.setLayoutItems(datas.length);\n    };\n    ChapterLevelItem.prototype.setLayoutItems = function (count) {\n        var rightMidx = this.width * 0.5 - 94 * this.dpr;\n        var posy = -15 * this.dpr;\n        if (count === 1) {\n            this.clueItms[0].x = rightMidx;\n            this.clueItms[0].y = posy;\n        }\n        else {\n            var cellwidth = 42 * this.dpr, space = 16 * this.dpr;\n            var posx = rightMidx - (cellwidth + space) * 0.5;\n            for (var i = 0; i < 2; i++) {\n                var item = this.clueItms[i];\n                item.x = posx;\n                item.y = posy;\n                posx += cellwidth + space;\n            }\n        }\n    };\n    ChapterLevelItem.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    ChapterLevelItem.prototype.init = function () {\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_checkpoint" });\n        // this.imgMask = this.scene.make.image({ key: UIAtlasName.explorelog, frame: "explore_chapter_checkpoint" });\n        this.setSize(this.bg.width, this.bg.height);\n        var leftMidX = -this.width * 0.5 + 85 * this.dpr;\n        var rightMidx = this.width * 0.5 - 85 * this.dpr;\n        var topy = -this.height * 0.5 + 18 * this.dpr;\n        this.levelTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].colorStyle("#5885FD", this.dpr * 17) }).setOrigin(0.5);\n        this.levelTex.setFontStyle("bold");\n        this.levelTex.y = topy;\n        this.levelTex.x = leftMidX;\n        this.leftLine = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_explore_chapter_left" });\n        this.leftLine.x = leftMidX - this.leftLine.width;\n        this.leftLine.y = topy + 2 * this.dpr;\n        this.rightLine = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_explore_chapter_right" });\n        this.rightLine.x = leftMidX + this.rightLine.width;\n        this.rightLine.y = this.leftLine.y;\n        this.nameTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].colorStyle("#8743B9", this.dpr * 14) }).setOrigin(0.5);\n        this.nameTex.setFontStyle("bold");\n        this.nameTex.x = rightMidx;\n        this.nameTex.y = topy + 4 * this.dpr;\n        this.starProgress = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ProgressMaskBar"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, "explore_star_empty", "explore_star_full");\n        this.starProgress.x = leftMidX;\n        this.starProgress.y = topy + this.leftLine.height * 0.5 + this.starProgress.height * 0.5 + 5 * this.dpr;\n        this.iconbg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_scene_bg" });\n        this.iconbg.x = leftMidX;\n        this.iconbg.y = this.starProgress.y + this.starProgress.height * 0.5 + this.iconbg.height * 0.5 + 5 * this.dpr;\n        this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](this.scene, this.iconbg.x, this.iconbg.y);\n        this.lockimg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_scene_lock" });\n        this.lockimg.x = this.iconbg.x;\n        this.lockimg.y = this.iconbg.y;\n        this.unlockTex = this.scene.make.text({ style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].blackStyle(this.dpr, 11) }).setOrigin(0);\n        this.unlockTex.setWordWrapWidth(106 * this.dpr, true);\n        this.unlockTex.x = rightMidx - 53 * this.dpr;\n        this.unlockTex.y = topy + 20 * this.dpr;\n        var frames = ["butt_yellow_left_s", "butt_yellow_middle_s", "butt_yellow_right_s"];\n        // this.openButton = new ThreeSliceButton(this.scene, 88 * this.dpr, 30 * this.dpr, UIAtlasName.uicommon, frames, frames, i18n.t("explore.open"));\n        this.openButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_3__["NineSliceButton"](this.scene, 0, 0, 88 * this.dpr, 32 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("explore.open"), this.dpr, 1, utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].button(this.dpr));\n        this.openButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr, 13));\n        this.openButton.setFontStyle("bold");\n        this.openButton.setTextOffset(-15 * this.dpr, 0);\n        this.openButton.x = rightMidx;\n        this.openButton.y = this.height * 0.5 - this.openButton.height * 0.5 - 24 * this.dpr;\n        this.openButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_3__["ClickEvent"].Tap, this.onClickHandler, this);\n        this.energyImg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ImageValue"](this.scene, 43 * this.dpr, 15 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "explore_physical_icon", this.dpr, utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr, 14));\n        this.energyImg.x = 14 * this.dpr;\n        this.energyImg.setOffset(-4 * this.dpr, 0);\n        this.energyImg.setLayout(1);\n        this.energyImg.setText("");\n        this.openButton.add(this.energyImg);\n        this.add([this.bg, this.leftLine, this.rightLine, this.levelTex, this.nameTex, this.starProgress, this.iconbg, this.icon, this.lockimg, this.unlockTex, this.openButton]);\n    };\n    ChapterLevelItem.prototype.getProgressValue = function (value) {\n        var score = 75.75;\n        var riado = Math.floor(value / 100);\n        var temprem = Math.floor(value % 100);\n        var intvalue = riado * score + 30.3 * (riado);\n        intvalue = intvalue < 0 ? 0 : intvalue;\n        var tempto = intvalue + temprem / 100 * score;\n        return tempto;\n    };\n    ChapterLevelItem.prototype.onClickHandler = function () {\n        if (!this.unlock)\n            return;\n        if (this.send)\n            this.send.runWith([this.chapterData]);\n    };\n    return ChapterLevelItem;\n}(ChapterLevelBaseItem));\nvar ChapterLevelLockItem = /** @class */ (function (_super) {\n    __extends(ChapterLevelLockItem, _super);\n    function ChapterLevelLockItem(scene, dpr) {\n        return _super.call(this, scene, dpr) || this;\n    }\n    ChapterLevelLockItem.prototype.setLevelData = function (data, lock) {\n        _super.prototype.setLevelData.call(this, data, lock);\n        this.rightTex.text = utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("explore.unlocktips", { name: data.requiredPlayerLevel });\n    };\n    ChapterLevelLockItem.prototype.init = function () {\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_checkpoint" });\n        this.setSize(this.bg.width, this.bg.height);\n        var leftMidX = -80 * this.dpr;\n        var rightMidx = 80 * this.dpr;\n        var topy = -this.height * 0.5 + 23 * this.dpr;\n        this.nameTex = this.scene.make.text({ text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("explore.nextleveltips"), style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].colorStyle("#8743B9", this.dpr * 14) }).setOrigin(0.5);\n        this.nameTex.setFontStyle("bold");\n        this.nameTex.x = 0;\n        this.nameTex.y = topy;\n        this.leftLine = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_explore_chapter_left" });\n        this.leftLine.x = -this.nameTex.width * 0.5 - this.leftLine.width * 0.5 - 5 * this.dpr;\n        this.leftLine.y = topy;\n        this.rightLine = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_explore_chapter_right" });\n        this.rightLine.x = this.nameTex.width * 0.5 + this.rightLine.width * 0.5 + 5 * this.dpr;\n        this.rightLine.y = this.leftLine.y;\n        this.leftbg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_scene_bg" });\n        this.leftbg.x = leftMidX;\n        this.leftbg.y = topy + this.leftbg.height * 0.5 + 20 * this.dpr;\n        this.leftTex = this.scene.make.text({ text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("explore.finishchaptertips"), style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].colorStyle("#8743B9", this.dpr * 14) }).setOrigin(0.5);\n        this.leftTex.x = this.leftbg.x;\n        this.leftTex.y = this.leftbg.y;\n        this.rightbg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_scene_bg" });\n        this.rightbg.x = rightMidx;\n        this.rightbg.y = topy + this.leftbg.height * 0.5 + 20 * this.dpr;\n        this.rightTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].colorStyle("#8743B9", this.dpr * 14) }).setOrigin(0.5);\n        this.rightTex.x = this.rightbg.x;\n        this.rightTex.y = this.rightbg.y;\n        // const frames = ["butt_yellow_left_s", "butt_yellow_middle_s", "butt_yellow_right_s"];\n        this.goButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_3__["NineSliceButton"](this.scene, 0, 0, 88 * this.dpr, 32 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("task.go"), this.dpr, 1, utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].button(this.dpr));\n        this.goButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr, 13));\n        this.goButton.setFontStyle("bold");\n        this.goButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_3__["ClickEvent"].Tap, this.onGoClickHandler, this);\n        this.goButton.x = -this.goButton.width * 0.5 - 30 * this.dpr;\n        this.goButton.y = this.height * 0.5 - 10 * this.dpr;\n        this.finishButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_3__["NineSliceButton"](this.scene, 0, 0, 88 * this.dpr, 32 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("explore.finish"), this.dpr, 1, utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].button(this.dpr));\n        this.finishButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr, 13));\n        this.finishButton.setFontStyle("bold");\n        this.finishButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_3__["ClickEvent"].Tap, this.onFinishClickHandler, this);\n        this.finishButton.x = this.finishButton.width * 0.5 + 30 * this.dpr;\n        this.finishButton.y = this.height * 0.5 - 10 * this.dpr;\n        this.add([this.bg, this.leftLine, this.rightLine, this.nameTex, this.leftbg, this.leftTex, this.rightbg, this.rightTex, this.goButton, this.finishButton]);\n    };\n    ChapterLevelLockItem.prototype.onGoClickHandler = function () {\n        if (this.send)\n            this.send.runWith(["lockgo", this.chapterData]);\n    };\n    ChapterLevelLockItem.prototype.onFinishClickHandler = function () {\n        if (this.send)\n            this.send.runWith(["lockfinish", this.chapterData]);\n    };\n    return ChapterLevelLockItem;\n}(ChapterLevelBaseItem));\nvar ChapterLevelEventuallyItem = /** @class */ (function (_super) {\n    __extends(ChapterLevelEventuallyItem, _super);\n    function ChapterLevelEventuallyItem(scene, dpr) {\n        return _super.call(this, scene, dpr) || this;\n    }\n    ChapterLevelEventuallyItem.prototype.setLevelData = function (data, lock) {\n        _super.prototype.setLevelData.call(this, data, lock);\n        var url = utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getOsdRes(data.texturePath + ("_" + this.dpr + "x.png"));\n        this.icon.load(url);\n        if (lock) {\n            this.iconbg2.visible = false;\n            this.openButton.setFrameNormal("butt_gray");\n            this.openButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].whiteStyle(this.dpr, 13));\n        }\n        else {\n            this.iconbg2.visible = true;\n            this.openButton.setFrameNormal("yellow_btn_normal");\n            this.openButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr, 13));\n        }\n    };\n    ChapterLevelEventuallyItem.prototype.init = function () {\n        var offsetHeight = 10 * this.dpr;\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_end_checkpoint" });\n        this.setSize(this.bg.width, this.bg.height + offsetHeight * 2);\n        this.bg.y = -offsetHeight;\n        var topy = -this.height * 0.5 + 20 * this.dpr;\n        this.nameTex = this.scene.make.text({ text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("explore.eventuallytips"), style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].colorStyle("#8743B9", this.dpr * 14) }).setOrigin(0.5);\n        this.nameTex.setFontStyle("bold");\n        this.nameTex.y = topy;\n        this.leftLine = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_end_left" });\n        this.leftLine.y = this.nameTex.y;\n        this.leftLine.x = -this.nameTex.width * 0.5 - this.leftLine.width * 0.5 - 10 * this.dpr;\n        this.rightLine = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_end_right" });\n        this.rightLine.y = this.leftLine.y;\n        this.rightLine.x = this.nameTex.width * 0.5 + this.rightLine.width * 0.5 + 10 * this.dpr;\n        this.iconbg1 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_end_close" });\n        this.iconbg1.y = 4 * this.dpr - offsetHeight;\n        this.iconbg2 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_end_undraw" });\n        this.iconbg2.y = this.iconbg1.y;\n        this.iconbg3 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].explorelog, frame: "explore_chapter_end_curtain" });\n        this.iconbg3.y = this.iconbg2.y;\n        this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](this.scene, 0, 0);\n        this.icon.y = this.iconbg3.y;\n        // const frames = ["butt_yellow_left_s", "butt_yellow_middle_s", "butt_yellow_right_s"];\n        this.openButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_3__["NineSliceButton"](this.scene, 0, 0, 88 * this.dpr, 32 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("explore.open"), this.dpr, 1, utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].button(this.dpr));\n        this.openButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr, 13));\n        this.openButton.setFontStyle("bold");\n        this.openButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_3__["ClickEvent"].Tap, this.onGoClickHandler, this);\n        this.openButton.x = 0;\n        this.openButton.y = this.height * 0.5 - 6 * this.dpr - offsetHeight * 2;\n        this.add([this.bg, this.iconbg1, this.icon, this.iconbg2, this.iconbg3, this.leftLine, this.rightLine, this.nameTex, this.openButton]);\n    };\n    ChapterLevelEventuallyItem.prototype.onGoClickHandler = function () {\n        if (this.send)\n            this.send.runWith(this.chapterData);\n    };\n    return ChapterLevelEventuallyItem;\n}(ChapterLevelBaseItem));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaExploreList/PicaExploreListLevelPanel.ts?')},"./src/pica/render/ui/PicaExploreList/PicaExploreListPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListPanel", function() { return PicaExploreListPanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\n/* harmony import */ var _PicaExploreListDetailPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaExploreListDetailPanel */ "./src/pica/render/ui/PicaExploreList/PicaExploreListDetailPanel.ts");\n/* harmony import */ var _Components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Components */ "./src/pica/render/ui/Components/index.ts");\n/* harmony import */ var _PicaExploreListBottomPanel__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./PicaExploreListBottomPanel */ "./src/pica/render/ui/PicaExploreList/PicaExploreListBottomPanel.ts");\n/* harmony import */ var _PicaExploreListLevelPanel__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./PicaExploreListLevelPanel */ "./src/pica/render/ui/PicaExploreList/PicaExploreListLevelPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\nvar PicaExploreListPanel = /** @class */ (function (_super) {\n    __extends(PicaExploreListPanel, _super);\n    function PicaExploreListPanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon1, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon];\n        _this.textures = [{ atlasName: "explore_bg_stripe_top", folder: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog }, { atlasName: "explore_bg_stripe_middle", folder: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog },\n            { atlasName: "explore_mask", folder: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog }];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEXPLORELIST_NAME;\n        return _this;\n    }\n    PicaExploreListPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, w, h);\n        this.setSize(w, h);\n        this.bg.x = w * 0.5;\n        this.bg.y = h * 0.5;\n        this.topbg.y = this.topbg.height * 0.5;\n        this.topbg.x = w * 0.5;\n        this.midbg.y = this.topbg.y + this.midbg.height * 0.5;\n        this.midbg.x = this.topbg.x;\n        this.mBackBtn.x = this.mBackBtn.width * 0.5 + 8 * this.dpr;\n        this.mBackBtn.y = this.mBackBtn.height * 0.5 + 12 * this.dpr;\n        this.energyProgress.x = w - this.energyProgress.width * 0.5 - 17 * this.dpr;\n        this.energyProgress.y = this.mBackBtn.y;\n        var topHeight = 63 * this.dpr;\n        var bottomHeight = 56 * this.dpr;\n        var conHeight = h - topHeight - bottomHeight;\n        this.levelPanel.x = w * 0.5;\n        this.levelPanel.y = topHeight + conHeight * 0.5;\n        this.levelPanel.setTopAndBottomHeight(topHeight, bottomHeight);\n        this.levelPanel.resize(w, conHeight);\n        this.bottomPanel.x = w * 0.5;\n        this.bottomPanel.y = h - this.bottomPanel.height * 0.5;\n        this.bottomPanel.resize(w, 57 * this.dpr);\n    };\n    PicaExploreListPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mBackBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onBackHandler, this);\n    };\n    PicaExploreListPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mBackBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onBackHandler, this);\n    };\n    PicaExploreListPanel.prototype.init = function () {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        var topHeight = 63 * this.dpr;\n        var bottomHeight = 56 * this.dpr;\n        this.setSize(w, h);\n        this.bg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["CommonBackground"](this.scene, 0, 0, w, h, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog, "explore_bg", 0xf6f0dc);\n        this.topbg = this.scene.make.image({ key: "explore_bg_stripe_top" });\n        this.midbg = this.scene.make.image({ key: "explore_bg_stripe_middle" });\n        this.mBackBtn = new _Components__WEBPACK_IMPORTED_MODULE_7__["BackTextButton"](this.scene, this.dpr);\n        this.mBackBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("explore.title"));\n        this.energyProgress = new _Components__WEBPACK_IMPORTED_MODULE_7__["EnergyProgressBar"](this.scene, this.dpr);\n        var conHeight = h - topHeight - bottomHeight;\n        this.levelPanel = new _PicaExploreListLevelPanel__WEBPACK_IMPORTED_MODULE_9__["PicaExploreListLevelPanel"](this.scene, this.width, conHeight, this.dpr, this.scale);\n        this.levelPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onLevelPanelHandler));\n        this.bottomPanel = new _PicaExploreListBottomPanel__WEBPACK_IMPORTED_MODULE_8__["PicaExploreListBottomPanel"](this.scene, this.width, 57 * this.dpr, this.dpr, this.scale);\n        this.bottomPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onBottomPanelHandler));\n        this.add([this.bg, this.topbg, this.midbg, this.levelPanel, this.mBackBtn, this.energyProgress, this.bottomPanel]);\n        this.resize(w, h);\n        _super.prototype.init.call(this);\n    };\n    PicaExploreListPanel.prototype.onShow = function () {\n        if (this.mShowData)\n            this.setExploreChapters(this.mShowData);\n        if (this.tempDatas)\n            this.setEnergyData(this.tempDatas.value, this.tempDatas.max);\n    };\n    PicaExploreListPanel.prototype.setExploreChapterResult = function (content) {\n        var nextLevelID = this.mShowData.nextLevelId;\n        this.levelPanel.setCaptoreResult(content, nextLevelID);\n    };\n    PicaExploreListPanel.prototype.setExploreChapters = function (data) {\n        this.mShowData = data;\n        if (!this.mInitialized)\n            return;\n        this.bottomPanel.setChapterDatas(data);\n    };\n    PicaExploreListPanel.prototype.setEnergyData = function (value, max) {\n        this.tempDatas = { value: value, max: max };\n        if (!this.mInitialized)\n            return;\n        this.energyProgress.setEnergyData(value, max);\n    };\n    PicaExploreListPanel.prototype.openDetialPanel = function () {\n        var wid = this.width;\n        var hei = this.height;\n        if (!this.detialPanel) {\n            this.detialPanel = new _PicaExploreListDetailPanel__WEBPACK_IMPORTED_MODULE_6__["PicaExploreListDetailPanel"](this.scene, wid, hei, this.dpr, this.scale);\n            this.detialPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onDetialHandler));\n            this.detialPanel.y = -20 * this.dpr;\n        }\n        this.add(this.detialPanel);\n        this.detialPanel.visible = true;\n        this.detialPanel.x = wid * 0.5;\n        this.detialPanel.y = hei * 0.5;\n        this.detialPanel.resize(wid, hei);\n    };\n    PicaExploreListPanel.prototype.hideDetailPanel = function () {\n        this.detialPanel.visible = false;\n    };\n    PicaExploreListPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaExploreListPanel.prototype.onBackHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEXPLORELIST_NAME + "_hide");\n    };\n    PicaExploreListPanel.prototype.onDetialHandler = function (tag, data) {\n        if (tag === "hide") {\n            this.hideDetailPanel();\n        }\n    };\n    PicaExploreListPanel.prototype.onLevelPanelHandler = function (tag, data) {\n        if (tag === "foreword") {\n            this.openDetialPanel();\n            this.detialPanel.setCaptoreResultData(data);\n        }\n        else if (tag === "roomid") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEXPLORELIST_NAME + "_queyenterroom", data);\n        }\n        else if (tag === "move") {\n            if (data) {\n                this.topbg.visible = false;\n                this.midbg.visible = false;\n            }\n            else {\n                this.topbg.visible = true;\n                this.midbg.visible = true;\n            }\n        }\n    };\n    PicaExploreListPanel.prototype.onBottomPanelHandler = function (tag, data) {\n        if (tag === "chapterdata") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEXPLORELIST_NAME + "_queyexplorechapter", data);\n        }\n    };\n    return PicaExploreListPanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_5__["PicaBasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaExploreList/PicaExploreListPanel.ts?')},"./src/pica/render/ui/PicaExploreLog/PicaExploreLogPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaExploreLogPanel", function() { return PicaExploreLogPanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\n/* harmony import */ var _PicaExploreLogSettlePanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaExploreLogSettlePanel */ "./src/pica/render/ui/PicaExploreLog/PicaExploreLogSettlePanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar PicaExploreLogPanel = /** @class */ (function (_super) {\n    __extends(PicaExploreLogPanel, _super);\n    function PicaExploreLogPanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon1];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEXPLORELOG_NAME;\n        return _this;\n    }\n    PicaExploreLogPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(w, h);\n        this.goOutBtn.x = w - this.goOutBtn.width * 0.5 - 10 * this.dpr;\n        this.goOutBtn.y = this.goOutBtn.height * 0.5 + 10 * this.dpr;\n        this.continueProgress.x = w * 0.5;\n        this.continueProgress.y = -this.continueProgress.height * 0.5;\n        this.continueText.x = this.continueProgress.x + this.continueProgress.width * 0.5 + 5 * this.dpr;\n        this.continueText.y = this.continueProgress.y;\n        this.expProgress.x = w - this.expProgress.width * 0.5 - 40 * this.dpr;\n        this.expProgress.y = h - 240 * this.dpr;\n        this.textCon.y = this.expProgress.y + 55 * this.dpr;\n        this.textCon.x = w * 0.5;\n        this.expProgress.refreshMask();\n        this.textCon.refreshMask();\n    };\n    PicaExploreLogPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.goOutBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onGoOutHandler, this);\n    };\n    PicaExploreLogPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.goOutBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onGoOutHandler, this);\n    };\n    PicaExploreLogPanel.prototype.init = function () {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        this.setSize(w, h);\n        this.goOutBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog, "checkpoint_abort");\n        this.expProgress = new ExploreTimeProgress(this.scene, this.dpr, this.scale);\n        this.expProgress.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onProClickHandler));\n        this.continueProgress = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ProgressMaskBar"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog, "checkpoint_progress bar_bottom", "checkpoint_progress bar_top");\n        this.continueProgress.visible = false;\n        this.continueText = this.scene.make.text({ style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].yellowStyle(this.dpr, 24) }).setOrigin(0, 0.5);\n        this.continueText.setFontStyle("bold italic");\n        this.textCon = new ExploreTipsTextsCon(this.scene, w, 138 * this.dpr, this.dpr, this.scale);\n        this.add([this.goOutBtn, this.expProgress, this.continueProgress, this.continueText, this.textCon]);\n        this.resize(w, h);\n        _super.prototype.init.call(this);\n        this.setTimeProgress(30000);\n    };\n    PicaExploreLogPanel.prototype.setExploreDatas = function (texts) {\n        this.textCon.setTextTips(texts);\n    };\n    PicaExploreLogPanel.prototype.setExploreCountDown = function (content) {\n        var _this = this;\n        this.continueProgress.setProgress(100, 100);\n        this.continueText.text = "x" + content.combo;\n        if (!this.continueProgress.visible) {\n            this.continueProgress.visible = true;\n            var to = this.continueProgress.height * 0.5 + 20 * this.dpr;\n            this.continueText.scale = 0.01;\n            utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].playtPosYTween(this.scene, this.continueProgress, 0, to, 300, "Bounce.easeOut", undefined, new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, function () {\n                if (!_this.scene)\n                    return;\n                _this.playRotateTween(0, 100, content.seconds * 1000);\n                _this.continueText.alpha = 1;\n                utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].playScaleTween(_this.scene, _this.continueText, 0.1, 1, 200, "Back.easeInOut", undefined);\n            }), new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, function () {\n                if (!_this.scene)\n                    return;\n                _this.continueProgress.refreshMask();\n                _this.continueText.y = _this.continueProgress.y;\n            }));\n        }\n        else {\n            this.playRotateTween(0, 100, content.seconds * 1000);\n            this.continueText.scale = 0.1;\n            this.continueText.alpha = 1;\n            utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].playScaleTween(this.scene, this.continueText, 0.1, 1, 200, "Linear", undefined);\n        }\n    };\n    PicaExploreLogPanel.prototype.setExploreSettleDatas = function (content) {\n        this.openSettlePanel();\n        this.settlePanel.setSettleData(content);\n        this.clearRotateTween();\n    };\n    PicaExploreLogPanel.prototype.setTimeProgress = function (time) {\n        var _this = this;\n        this.expProgress.setProgress(0);\n        this.clearTimer();\n        var temp = 0;\n        this.timer = setInterval(function () {\n            var value = temp / time;\n            temp += 20;\n            _this.expProgress.setProgress(value);\n            if (value >= 1)\n                _this.clearTimer();\n        }, 20);\n    };\n    PicaExploreLogPanel.prototype.openSettlePanel = function () {\n        var wid = this.width;\n        var hei = this.height;\n        if (!this.settlePanel) {\n            this.settlePanel = new _PicaExploreLogSettlePanel__WEBPACK_IMPORTED_MODULE_6__["PicaExploreLogSettlePanel"](this.scene, wid, hei, this.dpr, this.scale);\n            this.settlePanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onSettleHandler));\n            this.settlePanel.y = -20 * this.dpr;\n        }\n        this.add(this.settlePanel);\n        this.settlePanel.x = wid * 0.5;\n        this.settlePanel.y = hei * 0.5;\n        this.settlePanel.resize(wid, hei);\n    };\n    PicaExploreLogPanel.prototype.hideSettlePanel = function () {\n        this.settlePanel.visible = false;\n    };\n    PicaExploreLogPanel.prototype.setTipsLayout = function (extpand) {\n        var offset = extpand ? this.scaleHeight - 360 * this.dpr : this.scaleHeight - 240 * this.dpr;\n        this.expProgress.y = offset;\n        this.textCon.y = this.expProgress.y + 55 * this.dpr;\n        this.expProgress.refreshMask();\n        this.textCon.refreshMask();\n    };\n    PicaExploreLogPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.clearTimer();\n    };\n    PicaExploreLogPanel.prototype.onProClickHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEXPLORELOG_NAME + "_queryexplorehint");\n        this.setTimeProgress(30000);\n    };\n    PicaExploreLogPanel.prototype.onGoOutHandler = function () {\n        var _this = this;\n        utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].createMessageBox(this.render, this, this.key, utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("explore.exit"), utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("explore.exittips"), function () {\n            _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEXPLORELOG_NAME + "_querygohome");\n        });\n    };\n    PicaExploreLogPanel.prototype.onSettleHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEXPLORELOG_NAME + "_showexplorelist");\n        this.hideSettlePanel();\n    };\n    PicaExploreLogPanel.prototype.clearTimer = function () {\n        if (this.timer) {\n            clearInterval(this.timer);\n            this.timer = undefined;\n        }\n    };\n    PicaExploreLogPanel.prototype.playRotateTween = function (from, to, duration) {\n        var _this = this;\n        if (!this.scene)\n            return;\n        this.clearRotateTween();\n        this.rotateTween = this.scene.tweens.addCounter({\n            from: from,\n            to: to,\n            ease: "Linear",\n            duration: duration,\n            onUpdate: function (cope, param) {\n                if (!_this.scene) {\n                    _this.rotateTween.stop();\n                    _this.rotateTween.remove();\n                }\n                _this.continueProgress.setProgress(to - param.value, to);\n                if (param.value === to) {\n                    utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].playAlphaTween(_this.scene, _this.continueProgress, 1, 0, 500, "Linear", undefined, new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](_this, function () {\n                        if (!_this.scene)\n                            return;\n                        _this.continueProgress.visible = false;\n                        _this.continueProgress.y = -_this.continueProgress.height * 0.5;\n                        _this.continueProgress.alpha = 1;\n                    }), new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](_this, function (value) {\n                        _this.continueText.alpha = value;\n                    }));\n                }\n            },\n            onComplete: function () {\n                _this.clearRotateTween();\n            },\n        });\n    };\n    PicaExploreLogPanel.prototype.clearRotateTween = function () {\n        if (this.rotateTween) {\n            this.rotateTween.stop();\n            this.rotateTween.remove();\n            this.rotateTween = undefined;\n        }\n    };\n    return PicaExploreLogPanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_5__["PicaBasePanel"]));\n\nvar ExploreTimeProgress = /** @class */ (function (_super) {\n    __extends(ExploreTimeProgress, _super);\n    function ExploreTimeProgress(scene, dpr, zoom) {\n        var _this = _super.call(this, scene, 0, 0, false) || this;\n        _this.proValue = 0;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.init();\n        _this.enable = true;\n        return _this;\n    }\n    ExploreTimeProgress.prototype.setProgress = function (value) {\n        var startAngle = -90;\n        var endAngle = 360 * value - 90;\n        this.barmask.clear();\n        this.barmask.fillStyle(0xffffff);\n        this.barmask.slice(0, 0, 43 * this.dpr / this.zoom, Phaser.Math.DegToRad(startAngle), Phaser.Math.DegToRad(endAngle), false);\n        this.barmask.fillPath();\n        if (value >= 1) {\n            this.lightIcon.setFrame("checkpoint_prompt_icon_light");\n        }\n        else {\n            this.lightIcon.setFrame("checkpoint_prompt_icon_gray");\n        }\n        this.proValue = value;\n    };\n    ExploreTimeProgress.prototype.refreshMask = function () {\n        var world = this.getWorldTransformMatrix();\n        this.barmask.setPosition(world.tx, world.ty);\n    };\n    ExploreTimeProgress.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.barmask.destroy();\n    };\n    ExploreTimeProgress.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    ExploreTimeProgress.prototype.init = function () {\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog, frame: "checkpoint_prompt_bottom" });\n        this.lightbg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog, frame: "checkpoint_prompt_schedule" });\n        this.topbg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog, frame: "checkpoint_prompt_top" });\n        this.lightIcon = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog, frame: "checkpoint_prompt_icon_gray" });\n        this.barmask = this.scene.make.graphics(undefined, false);\n        this.lightbg.mask = this.barmask.createGeometryMask();\n        this.add([this.bg, this.lightbg, this.topbg, this.lightIcon]);\n        this.setSize(this.bg.width, this.bg.height);\n        this.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onClickHandler, this);\n    };\n    ExploreTimeProgress.prototype.onClickHandler = function () {\n        if (this.send && this.proValue >= 1)\n            this.send.run();\n    };\n    return ExploreTimeProgress;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ButtonEventDispatcher"]));\nvar ExploreTipsTextsCon = /** @class */ (function (_super) {\n    __extends(ExploreTipsTextsCon, _super);\n    function ExploreTipsTextsCon(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.tipsItems = [];\n        _this.tweens = [];\n        _this.texts = [];\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.maskGrap = _this.scene.make.graphics(undefined, false);\n        _this.maskGrap.clear();\n        _this.maskGrap.fillStyle(0, 1);\n        _this.maskGrap.fillRect(-width * 0.5 * zoom, -height * 0.5 * zoom, width * zoom, height * zoom);\n        _this.mask = _this.maskGrap.createGeometryMask();\n        return _this;\n    }\n    ExploreTipsTextsCon.prototype.refreshMask = function () {\n        var world = this.getWorldTransformMatrix();\n        this.maskGrap.setPosition(world.tx, world.ty);\n    };\n    ExploreTipsTextsCon.prototype.setTextTips = function (texts) {\n        var bwidth = 107 * this.dpr, bheight = 25 * this.dpr;\n        var posX = -this.width * 0.5 + bwidth * 0.5 + 7 * this.dpr;\n        var first = this.tipsItems.length === 0 ? true : false;\n        for (var i = 0; i < texts.length; i++) {\n            var text = texts[i];\n            var before = this.texts[i];\n            if (before !== text && text !== "") {\n                var button = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSliceButton"](this.scene, 0, 0, bwidth, bheight, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].explorelog, "checkpoint_aims_bg", text, this.dpr, this.scale, {\n                    left: 10 * this.dpr, right: 10 * this.dpr, top: 0 * this.dpr, bottom: 0 * this.dpr\n                });\n                button.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].colorStyle("#FFEE5D", 11 * this.dpr));\n                button.x = posX;\n                var replaceItem = this.tipsItems[i];\n                if (!first)\n                    this.replaceAnimation(button, replaceItem);\n                this.add(button);\n                this.tipsItems[i] = button;\n            }\n            else {\n                if (text === "") {\n                    var replaceItem = this.tipsItems[i];\n                    if (!first)\n                        this.replaceAnimation(undefined, replaceItem);\n                }\n            }\n            posX += bwidth + 12 * this.dpr;\n            this.texts[i] = text;\n        }\n        if (first)\n            this.firstAnimation();\n    };\n    ExploreTipsTextsCon.prototype.firstAnimation = function () {\n        var delay = 0;\n        for (var _i = 0, _a = this.tipsItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.y = this.height * 0.5;\n            this.playtPosYTween(item, this.height * 0.5, 0, 600, undefined, delay);\n            delay += 50;\n        }\n    };\n    ExploreTipsTextsCon.prototype.replaceAnimation = function (source, target) {\n        if (target) {\n            target.y = 0;\n            this.playtPosYTween(target, 0, -this.height * 0.5, 600 * this.dpr, new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, function () {\n                target.destroy();\n            }));\n            this.playAlphaTween(target, 1, 0, 500);\n        }\n        if (source) {\n            source.y = this.height * 0.5;\n            this.playtPosYTween(source, this.height * 0.5, 0, 600);\n        }\n    };\n    ExploreTipsTextsCon.prototype.playtPosYTween = function (obj, from, to, duration, compl, delay) {\n        var _this = this;\n        if (duration === void 0) { duration = 500; }\n        if (!this.scene)\n            return;\n        var tweenY = this.scene.tweens.add({\n            targets: obj,\n            y: {\n                from: from,\n                to: to\n            },\n            ease: "Bounce.easeOut",\n            duration: duration,\n            delay: delay,\n            onComplete: function () {\n                tweenY.stop();\n                tweenY.remove();\n                _this.removeTween(tweenY);\n                if (compl)\n                    compl.run();\n            },\n        });\n        this.tweens.push(tweenY);\n    };\n    ExploreTipsTextsCon.prototype.playAlphaTween = function (obj, from, to, duration, compl, delay) {\n        var _this = this;\n        if (duration === void 0) { duration = 500; }\n        if (!this.scene)\n            return;\n        var tweenAlpha = this.scene.tweens.add({\n            targets: obj,\n            alpha: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: duration,\n            delay: delay,\n            onComplete: function () {\n                tweenAlpha.stop();\n                tweenAlpha.remove();\n                _this.removeTween(tweenAlpha);\n                if (compl)\n                    compl.runWith(to);\n            },\n        });\n        this.tweens.push(tweenAlpha);\n    };\n    ExploreTipsTextsCon.prototype.removeTween = function (tween) {\n        var index = this.tweens.indexOf(tween);\n        if (index !== -1)\n            this.tweens.splice(index, 1);\n    };\n    return ExploreTipsTextsCon;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaExploreLog/PicaExploreLogPanel.ts?')},"./src/pica/render/ui/PicaExploreLog/PicaExploreLogSettlePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaExploreLogSettlePanel", function() { return PicaExploreLogSettlePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var _Components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Components */ "./src/pica/render/ui/Components/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaExploreLogSettlePanel = /** @class */ (function (_super) {\n    __extends(PicaExploreLogSettlePanel, _super);\n    function PicaExploreLogSettlePanel(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene, 0, 0, false) || this;\n        _this.tweens = [];\n        _this.curTempScore = 0;\n        _this.allScore = 0;\n        _this.isPlayed = false;\n        _this.finished = false;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.init();\n        _this.enable = true;\n        _this.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, _this.onClickHandler, _this);\n        return _this;\n    }\n    PicaExploreLogSettlePanel.prototype.resize = function (w, h) {\n        this.setSize(w, h);\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0, 0.8);\n        this.blackGraphic.fillRect(-w * 0.5, -h * 0.5, w, h);\n    };\n    PicaExploreLogSettlePanel.prototype.init = function () {\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.add(this.blackGraphic);\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(this.width, this.height);\n        this.add(this.content);\n        var posY = -200 * this.dpr;\n        this.titleimage = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "Settlement_title" }, false);\n        this.titleimage.y = posY;\n        this.starPro = new gamecoreRender__WEBPACK_IMPORTED_MODULE_4__["ProgressMaskBar"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, "Settlement_star_default", "Settlement_star_Light");\n        this.starPro.y = this.titleimage.y + this.titleimage.height * 0.5 + this.starPro.height * 0.5 + 5 * this.dpr;\n        this.starText = this.scene.make.text({\n            x: 0, y: this.titleimage.y + 40 * this.dpr, text: "", style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].whiteStyle(this.dpr, 11)\n        }).setOrigin(0.5);\n        this.starText.y = this.starPro.y + this.starPro.height * 0.5 + 10 * this.dpr;\n        this.starText.visible = false;\n        this.scorebg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "Settlement_score_bg" });\n        this.scorebg.y = this.starText.y + 15 * this.dpr + this.scorebg.height * 0.5;\n        this.scoreTex = this.scene.make.text({\n            x: 0, y: this.scorebg.y, text: "", style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].colorStyle("#FFE057", 39 * this.dpr)\n        }).setOrigin(0.5);\n        this.lightImg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "Settlement_light" });\n        this.lightImg.y = this.scoreTex.y;\n        this.lightImg.visible = false;\n        this.scoreTipsCon = this.scene.make.container(undefined, false);\n        this.scoreTipsCon.setSize(244 * this.dpr, 160 * this.dpr);\n        this.scoreTipsCon.y = this.scorebg.y + this.scoreTipsCon.height * 0.5;\n        this.maskGraphic = this.scene.make.graphics(undefined, false);\n        this.maskWidth = 336 * this.dpr;\n        this.maskHeight = 215 * this.dpr;\n        this.content.add([this.titleimage, this.starPro, this.starText, this.scorebg, this.scoreTex, this.lightImg, this.scoreTipsCon]);\n    };\n    PicaExploreLogSettlePanel.prototype.setHandler = function (close) {\n        this.closeHandler = close;\n    };\n    PicaExploreLogSettlePanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.tweens.length > 0) {\n            for (var _i = 0, _a = this.tweens; _i < _a.length; _i++) {\n                var tween = _a[_i];\n                tween.stop();\n                tween.remove();\n            }\n        }\n        this.tweens.length = 0;\n    };\n    PicaExploreLogSettlePanel.prototype.setSettleData = function (content) {\n        if (!content)\n            return;\n        this.initParam();\n        this.settleData = content;\n        this.scoreDatas = this.getScoreArr(content);\n        this.playScoreTipsAnimation();\n        this.curLayoutGroup = this.createLayoutGroup(content.rewards);\n        this.curLayoutGroup.y = this.height * 0.5;\n        this.curLayoutGroup.visible = false;\n        this.setLayoutMask(this.maskWidth, this.maskHeight);\n        var previous = this.getProgressValue(content.previousProgress);\n        this.starPro.setProgress(previous, 500);\n    };\n    PicaExploreLogSettlePanel.prototype.initParam = function () {\n        this.isPlayed = false;\n        this.allScore = 0;\n        this.curTempScore = 0;\n        this.scoreTex.text = this.allScore + "";\n    };\n    PicaExploreLogSettlePanel.prototype.getScoreArr = function (content) {\n        var arrs = [];\n        if (content.pointBase >= 0) {\n            arrs.push({ tip: utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("explore.basetips"), score: content.pointBase });\n            this.allScore += content.pointBase;\n        }\n        if (content.pointTime >= 0) {\n            arrs.push({ tip: utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("explore.timetips"), score: content.pointTime });\n            this.allScore += content.pointTime;\n        }\n        if (content.pointAccuracy >= 0) {\n            arrs.push({ tip: utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("explore.accuracytips"), score: content.pointAccuracy });\n            this.allScore += content.pointAccuracy;\n        }\n        if (content.pointHint >= 0) {\n            arrs.push({ tip: utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("explore.hinttips"), score: content.pointHint });\n            this.allScore += content.pointHint;\n        }\n        return arrs;\n    };\n    PicaExploreLogSettlePanel.prototype.setLayoutMask = function (width, height) {\n        var maskW = width, maskH = height;\n        this.maskGraphic.clear();\n        this.maskGraphic.fillStyle(0);\n        this.maskGraphic.fillRect(-maskW * 0.5 * this.zoom, -maskH * 0.5 * this.zoom, maskW * this.zoom, maskH * this.zoom);\n        var worldpos = this.getWorldTransformMatrix();\n        var offsety = height * 0.5 + 30 * this.dpr;\n        this.maskGraphic.setPosition(worldpos.tx, worldpos.ty + offsety);\n        this.curLayoutGroup.setMask(this.maskGraphic.createGeometryMask());\n    };\n    PicaExploreLogSettlePanel.prototype.excuteNextDatas = function (fadeIn) {\n        var datas = this.scoreDatas;\n        if (datas.length > 0) {\n            var data = datas.shift();\n            var obj = new ScoreTipsPanel(this.scene, 100 * this.dpr, 45 * this.dpr, this.dpr, this.zoom);\n            obj.setTextData(data.tip, data.score);\n            obj.y = this.scoreTipsCon.height * 0.5 + 10 * this.dpr;\n            this.scoreTipsCon.add(obj);\n            if (fadeIn === true) {\n                this.playScoreTipsFadeIn(obj);\n            }\n            else if (fadeIn === false) {\n                this.playScoreTipsFadeOut(obj);\n            }\n            obj.alpha = 0;\n            return obj;\n        }\n        else {\n            this.isPlayed = true;\n            if (fadeIn)\n                this.curFadeInObj = undefined;\n            else\n                this.curFadeOutObj = undefined;\n        }\n        return undefined;\n    };\n    PicaExploreLogSettlePanel.prototype.playScoreTipsAnimation = function () {\n        var _this = this;\n        var obj = this.excuteNextDatas(undefined);\n        obj.y = 0;\n        this.playAlphaTween(obj, 0, 1, 500, new utils__WEBPACK_IMPORTED_MODULE_1__["Handler"](this, function () {\n            _this.playScoreTipsFadeOut(obj);\n        }));\n    };\n    PicaExploreLogSettlePanel.prototype.clearScoreAnimation = function () {\n        if (this.tweens.length > 0) {\n            for (var _i = 0, _a = this.tweens; _i < _a.length; _i++) {\n                var tween = _a[_i];\n                tween.stop();\n                tween.remove();\n            }\n        }\n        if (this.scoreTimer) {\n            clearInterval(this.scoreTimer);\n            this.scoreTimer = undefined;\n        }\n        this.tweens.length = 0;\n        this.scoreTipsCon.removeAll(true);\n        this.lightImg.visible = false;\n        this.scoreTex.text = this.allScore + "";\n        this.starPro.setProgress(this.settleData.latestProgress, 500);\n    };\n    PicaExploreLogSettlePanel.prototype.playCalculateScoreAnimation = function (score, time, compl) {\n        var _this = this;\n        var radio = 30;\n        var step = score / (time / radio); /*30ms--*/\n        var curScore = this.curTempScore;\n        var count = 0; // \n        var initial = 0;\n        this.scoreTimer = setInterval(function () {\n            count = count + step;\n            if (count >= score) {\n                clearInterval(_this.scoreTimer);\n                count = score;\n                _this.curTempScore += score;\n                _this.scoreTimer = undefined;\n                if (compl)\n                    compl.run();\n            }\n            var t = Math.floor(count);\n            if (t === initial)\n                return;\n            initial = t;\n            _this.scoreTex.text = curScore + initial + "";\n        }, radio);\n        this.playLightAnimation();\n    };\n    PicaExploreLogSettlePanel.prototype.playScoreTipsFadeIn = function (object) {\n        var from = this.scoreTipsCon.height * 0.5, to = 0;\n        object.y = from;\n        object.alpha = 0;\n        this.playtPosYTween(object, from, to, 500);\n        this.playAlphaTween(object, 0, 1, 500);\n        this.curFadeInObj = object;\n    };\n    PicaExploreLogSettlePanel.prototype.playScoreTipsFadeOut = function (object) {\n        var _this = this;\n        var from = 0, to = -this.scoreTipsCon.height * 0.5, delay = 300;\n        object.y = from;\n        object.alpha = 1;\n        this.playtPosYTween(object, from, to, 500, undefined);\n        this.playAlphaTween(object, 1, 0, 500, new utils__WEBPACK_IMPORTED_MODULE_1__["Handler"](this, function () {\n            _this.playCalculateScoreAnimation(object.value, 300, new utils__WEBPACK_IMPORTED_MODULE_1__["Handler"](_this, function () {\n                if (_this.isPlayed) {\n                    _this.playLayoutAnimation();\n                    _this.lightImg.visible = false;\n                    _this.playStarAnimation(_this.settleData.previousProgress, _this.settleData.latestProgress, 500);\n                }\n                if (_this.curFadeInObj)\n                    _this.playScoreTipsFadeOut(_this.curFadeInObj);\n            }));\n            object.destroy();\n        }));\n        if (this.scene)\n            this.excuteNextDatas(true);\n        this.curFadeOutObj = object;\n    };\n    PicaExploreLogSettlePanel.prototype.playStarAnimation = function (from, to, max) {\n        var _this = this;\n        var allTime = 5000;\n        var duration = allTime * ((to - from) / max);\n        var riado = Math.floor(to / 100);\n        var temprem = Math.floor(to % 100);\n        var tempto = this.getProgressValue(to);\n        var tempfrom = this.getProgressValue(from);\n        var tween = this.scene.tweens.addCounter({\n            from: tempfrom,\n            to: tempto,\n            ease: "Linear",\n            duration: duration,\n            onUpdate: function (cope, param) {\n                _this.starPro.setProgress(param.value, max);\n            },\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                _this.removeTween(tween);\n            },\n        });\n        this.tweens.push(tween);\n        var width = 196 * this.dpr;\n        var cellWidth = 29 * this.dpr;\n        var space = 12 * this.dpr;\n        this.starText.text = temprem + "%";\n        this.starText.x = -width * 0.5 + riado * (cellWidth + space) + cellWidth * 0.5;\n        this.starText.visible = true;\n    };\n    PicaExploreLogSettlePanel.prototype.getProgressValue = function (value) {\n        var score = 75.75;\n        var riado = Math.floor(value / 100);\n        var temprem = Math.floor(value % 100);\n        var intvalue = riado * score + 30.3 * (riado);\n        intvalue = intvalue < 0 ? 0 : intvalue;\n        var tempto = intvalue + temprem / 100 * score;\n        return tempto;\n    };\n    PicaExploreLogSettlePanel.prototype.playLayoutAnimation = function () {\n        var group = this.curLayoutGroup;\n        var to = this.maskHeight * 0.5 + 30 * this.dpr;\n        var from = to + this.maskHeight + 20 * this.dpr;\n        group.y = from;\n        this.curLayoutGroup.visible = true;\n        this.playItemTween(group, from, to, 620);\n    };\n    PicaExploreLogSettlePanel.prototype.playItemTween = function (gameobjet, from, to, delay) {\n        var _this = this;\n        var tweenIn = this.scene.tweens.add({\n            targets: gameobjet,\n            y: {\n                from: from,\n                to: to\n            },\n            ease: "Back.easeOut",\n            duration: 400,\n            delay: delay,\n            onComplete: function () {\n                tweenIn.stop();\n                tweenIn.remove();\n                _this.removeTween(tweenIn);\n                _this.finished = true;\n            },\n        });\n        this.tweens.push(tweenIn);\n    };\n    PicaExploreLogSettlePanel.prototype.playLightAnimation = function () {\n        var _this = this;\n        if (this.lightImg.visible)\n            return;\n        this.lightImg.visible = true;\n        this.lightImg.alpha = 0;\n        var duration = 100;\n        var handler = new utils__WEBPACK_IMPORTED_MODULE_1__["Handler"](this, function (value) {\n            if (!_this.lightImg.visible)\n                return;\n            if (value === 1) {\n                _this.playAlphaTween(_this.lightImg, 1, 0.8, 60, handler);\n            }\n            else {\n                _this.playAlphaTween(_this.lightImg, 0.8, 1, 60, handler);\n            }\n        });\n        this.playAlphaTween(this.lightImg, 0, 1, duration, handler);\n    };\n    PicaExploreLogSettlePanel.prototype.playtPosYTween = function (obj, from, to, duration, compl, delay) {\n        var _this = this;\n        if (duration === void 0) { duration = 500; }\n        if (!this.scene)\n            return;\n        var tweenY = this.scene.tweens.add({\n            targets: obj,\n            y: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: duration,\n            delay: delay,\n            onComplete: function () {\n                tweenY.stop();\n                tweenY.remove();\n                _this.removeTween(tweenY);\n                if (compl)\n                    compl.run();\n            },\n        });\n        this.tweens.push(tweenY);\n    };\n    PicaExploreLogSettlePanel.prototype.playAlphaTween = function (obj, from, to, duration, compl, delay) {\n        var _this = this;\n        if (duration === void 0) { duration = 500; }\n        if (!this.scene)\n            return;\n        var tweenAlpha = this.scene.tweens.add({\n            targets: obj,\n            alpha: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: duration,\n            delay: delay,\n            onComplete: function () {\n                tweenAlpha.stop();\n                tweenAlpha.remove();\n                _this.removeTween(tweenAlpha);\n                if (compl)\n                    compl.runWith(to);\n            },\n        });\n        this.tweens.push(tweenAlpha);\n    };\n    PicaExploreLogSettlePanel.prototype.removeTween = function (tween) {\n        var index = this.tweens.indexOf(tween);\n        if (index !== -1)\n            this.tweens.splice(index, 1);\n    };\n    PicaExploreLogSettlePanel.prototype.createLayoutGroup = function (arr) {\n        var group = new RewardLayoutGroup(this.scene, 0, this.maskHeight, 235 * this.dpr, this.maskHeight, this.dpr, this.zoom);\n        this.content.add(group);\n        group.setRewardDatas(arr);\n        return group;\n    };\n    PicaExploreLogSettlePanel.prototype.onClickHandler = function () {\n        if (!this.isPlayed) {\n            this.clearScoreAnimation();\n            this.isPlayed = true;\n            this.playLayoutAnimation();\n        }\n        else if (this.finished) {\n            if (this.closeHandler)\n                this.closeHandler.run();\n        }\n    };\n    return PicaExploreLogSettlePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_4__["ButtonEventDispatcher"]));\n\nvar ScoreTipsPanel = /** @class */ (function (_super) {\n    __extends(ScoreTipsPanel, _super);\n    function ScoreTipsPanel(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.value = 0;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.init();\n        return _this;\n    }\n    ScoreTipsPanel.prototype.setTextData = function (title, value) {\n        this.title.text = title;\n        this.valueTex.text = "+" + value;\n        this.value = value;\n    };\n    ScoreTipsPanel.prototype.init = function () {\n        this.title = this.scene.make.text({\n            x: 0, y: 0, text: "", style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].whiteStyle(this.dpr)\n        }).setOrigin(0.5);\n        this.title.y = -12 * this.dpr;\n        this.valueTex = this.scene.make.text({\n            x: 0, y: 0, text: "", style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].whiteStyle(this.dpr, 24)\n        }).setOrigin(0.5);\n        this.valueTex.y = 11 * this.dpr;\n        this.add([this.title, this.valueTex]);\n    };\n    return ScoreTipsPanel;\n}(Phaser.GameObjects.Container));\nvar RewardLayoutGroup = /** @class */ (function (_super) {\n    __extends(RewardLayoutGroup, _super);\n    function RewardLayoutGroup(scene, x, y, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.bg = _this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].explorelog, frame: "Settlement_reward_bg" });\n        _this.content = _this.scene.make.container(undefined, false);\n        _this.content.y = 10 * dpr;\n        _this.add([_this.bg, _this.content]);\n        return _this;\n    }\n    RewardLayoutGroup.prototype.setRewardDatas = function (datas) {\n        if (!datas)\n            return;\n        var len = datas.length;\n        for (var i = 0; i < len; i++) {\n            var prop = new _Components__WEBPACK_IMPORTED_MODULE_3__["ItemButton"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon1, "roam_reward_ordinary_bg", this.dpr, this.zoom, true);\n            prop.setStateFrames("roam_reward_ordinary_bg", "roam_reward_rare_bg");\n            prop.setItemData(datas[i]);\n            this.content.add(prop);\n        }\n        this.setLayout();\n    };\n    RewardLayoutGroup.prototype.setLayout = function () {\n        var list = this.content.list;\n        if (list.length === 0)\n            return;\n        var cell = list[0];\n        var len = list.length;\n        var cellwidth = cell.width, cellHeight = cell.height;\n        var tempWidth = 0, tempHeight = 0;\n        if (len <= 3) {\n            var space = len === 2 ? 20 * this.dpr : 10 * this.dpr;\n            var width = len * cellwidth + space * (len - 1);\n            for (var i = 0; i < len; i++) {\n                var item = list[i];\n                item.x = -width * 0.5 + (cellwidth + space) * i + cellwidth * 0.5;\n            }\n        }\n        else if (len === 4) {\n            var spaceW = 20 * this.dpr, spaceH = 15 * this.dpr;\n            for (var i = 0; i < 2; i++) {\n                for (var j = 0; j < 2; j++) {\n                    var item = (list[i * 2 + j]);\n                    item.x = -(cellwidth + spaceW) * 0.5 + (cellwidth + spaceW) * j;\n                    item.y = -(cellHeight + spaceH) * 0.5 + (cellHeight + spaceH) * i;\n                }\n            }\n        }\n        else if (len === 5) {\n            var spaceW = 10 * this.dpr, spaceH = 15 * this.dpr;\n            var width = 3 * cellwidth + spaceW * 2;\n            var height = 2 * cellHeight + spaceH;\n            for (var i = 0; i < 3; i++) {\n                var item = (list[i]);\n                item.x = -width * 0.5 + (cellwidth + spaceW) * i + cellwidth * 0.5;\n                item.y = -height * 0.5 + cellHeight * 0.5;\n            }\n            for (var j = 0; j < 2; j++) {\n                var item = (list[j + 3]);\n                item.x = -(2 * cellwidth + spaceW) * 0.5 + cellwidth * 0.5 + (cellwidth + spaceW) * j;\n                item.y = height * 0.5 - cellHeight * 0.5;\n            }\n        }\n        else if (len === 6) {\n            var spaceW = 10 * this.dpr, spaceH = 15 * this.dpr;\n            var width = 3 * cellwidth + spaceW * 2;\n            var height = 2 * cellHeight + spaceH;\n            for (var i = 0; i < 2; i++) {\n                for (var j = 0; j < 3; j++) {\n                    var item = (list[i * 3 + j]);\n                    item.x = -width * 0.5 + (cellwidth + spaceW) * j + cellwidth * 0.5;\n                    item.y = -height * 0.5 + (cellHeight + spaceH) * i + cellHeight * 0.5;\n                }\n            }\n        }\n        else {\n            var spaceW = 10 * this.dpr, spaceH = 10 * this.dpr;\n            var hcount = 4;\n            var roundlen = Math.floor(list.length / hcount);\n            var remainder = list.length % hcount;\n            var width = hcount * cellwidth + spaceW * (hcount - 1);\n            var heightLen = roundlen + (remainder === 0 ? 0 : 1);\n            var height = heightLen * cellHeight + spaceH * (heightLen - 1);\n            for (var i = 0; i < roundlen; i++) {\n                for (var j = 0; j < hcount; j++) {\n                    var item = (list[i * hcount + j]);\n                    item.x = -width * 0.5 + (cellwidth + spaceW) * j + cellwidth * 0.5;\n                    item.y = -height * 0.5 + (cellHeight + spaceH) * i + cellHeight * 0.5;\n                }\n            }\n            var remaWdith = remainder * cellwidth + spaceW * (remainder - 1);\n            for (var j = 0; j < remainder; j++) {\n                var item = (list[j + roundlen * hcount]);\n                item.x = -remaWdith * 0.5 + cellwidth * 0.5 + (cellwidth + spaceW) * j;\n                item.y = height * 0.5 - cellHeight * 0.5;\n            }\n            tempWidth = width;\n            tempHeight = height;\n            if (this.width < tempWidth)\n                this.width = tempWidth;\n            if (this.height < tempHeight)\n                this.height = tempHeight;\n        }\n    };\n    return RewardLayoutGroup;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaExploreLog/PicaExploreLogSettlePanel.ts?')},"./src/pica/render/ui/PicaFriend/PicaFriendPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaFriendPanel", function() { return PicaFriendPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Container = Phaser.GameObjects.Container;\n\n\n\n\n\n\nvar PicaFriendPanel = /** @class */ (function (_super) {\n    __extends(PicaFriendPanel, _super);\n    function PicaFriendPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAFRIEND_NAME;\n        _this.mSubContanerMap = new Map();\n        _this.mSubContanerMap.set(structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Blacklist, BlackContainer);\n        _this.mSubContanerMap.set(structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Search, SearchContainer);\n        _this.mSubContanerMap.set(structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Notice, NoticeContainer);\n        return _this;\n        // this.mSubContanerMap.set(FriendChannel.NewFriend, NewFriendContainer);\n        // this.mSubContanerMap.set(FriendChannel.NewFans, NewFansContainer);\n    }\n    PicaFriendPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(w, h);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x000000, 0.66);\n        this.mBackGround.fillRect(0, 0, w, h);\n        this.content.setPosition(w / 2, h / 2);\n        if (this.friendContainer.parentContainer)\n            this.friendContainer.resize();\n    };\n    PicaFriendPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n        this.friendContainer.setChannel(structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Friends);\n    };\n    PicaFriendPanel.prototype.hide = function () {\n        _super.prototype.hide.call(this);\n    };\n    PicaFriendPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.OnClosePanel, this);\n        this.friendContainer.register();\n        this.friendContainer.on("shwoAddFriend", this.onShowAddFriendHandler, this);\n        this.friendContainer.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].FETCH_FRIEND, this.onFetchFriendHandler, this);\n        this.friendContainer.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_ATTRIBUTES, this.onReqFriendAttributesHandler, this);\n        this.friendContainer.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].RENDERER_EVENT, this.onRendererEventHandler, this);\n        this.friendContainer.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_PLAYER_LIST, this.onReqFriendListHandler, this);\n        // this.friendContainer.on(EventType.FOLLOW, this.onReqFollowFriendHandler, this);\n        // this.friendContainer.on(EventType.UNFOLLOW, this.onUnfollowFriendHanlder, this);\n    };\n    PicaFriendPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.OnClosePanel, this);\n        this.friendContainer.off("shwoAddFriend", this.onShowAddFriendHandler, this);\n        this.friendContainer.off(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].FETCH_FRIEND, this.onFetchFriendHandler, this);\n        this.friendContainer.off(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_ATTRIBUTES, this.onReqFriendAttributesHandler, this);\n        this.friendContainer.off(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].RENDERER_EVENT, this.onRendererEventHandler, this);\n        this.friendContainer.off(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_PLAYER_LIST, this.onReqFriendListHandler, this);\n        // this.friendContainer.off(EventType.FOLLOW, this.onReqFollowFriendHandler, this);\n        // this.friendContainer.off(EventType.UNFOLLOW, this.onUnfollowFriendHanlder, this);\n        this.friendContainer.unregister();\n    };\n    PicaFriendPanel.prototype.setFriend = function (type, friends) {\n        var subContaienr = this.mSubContanerMap.get(type);\n        if (subContaienr) {\n            if (this.mShowingSubContainer)\n                this.mShowingSubContainer.setItems(friends);\n            return;\n        }\n        if (this.friendContainer) {\n            this.friendContainer.setFriends(type, friends);\n        }\n    };\n    PicaFriendPanel.prototype.updateFriend = function (content) {\n        if (this.mShowingSubContainer) {\n            this.mShowingSubContainer.updateFriends(content);\n        }\n        else {\n            this.friendContainer.updateFriends(content);\n        }\n    };\n    PicaFriendPanel.prototype.updateRelation = function (relations) {\n        if (this.mShowingSubContainer && this.mShowingSubContainer instanceof SearchContainer) {\n            this.mShowingSubContainer.updateRelation(relations);\n        }\n    };\n    PicaFriendPanel.prototype.filterById = function (id) {\n        if (this.mShowingSubContainer) {\n            this.mShowingSubContainer.filterById(id);\n        }\n        else if (this.friendContainer) {\n            this.friendContainer.filterById(id);\n        }\n    };\n    PicaFriendPanel.prototype.fetchCurrentFriend = function () {\n        if (this.friendContainer) {\n            this.friendContainer.fetchCurrentFriend();\n        }\n    };\n    PicaFriendPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "friend_list/friend_list.png", "friend_list/friend_list.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaFriendPanel.prototype.init = function () {\n        var zoom = this.scale;\n        var wid = this.scaleWidth;\n        var hei = this.scaleHeight;\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0.5);\n        this.mBackGround.fillRect(0, 0, wid * zoom, hei * zoom);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, wid, hei), Phaser.Geom.Rectangle.Contains);\n        this.bg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: "phone" });\n        this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(this.bg.width, this.bg.height);\n        this.content.add(this.bg);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "close");\n        this.closeBtn.setPosition(this.content.width * 0.5 - this.dpr * 30, (-this.bg.height + this.closeBtn.height) * 0.5 + 25 * this.dpr);\n        this.friendContainer = new MainContainer(this.render.uiManager, this.bg.width, this.bg.height, this.key, this.dpr, this.scale);\n        this.content.add([this.friendContainer, this.closeBtn]);\n        this.add([this.mBackGround, this.content]);\n        this.resize(wid, hei);\n        _super.prototype.init.call(this);\n    };\n    PicaFriendPanel.prototype.destroy = function () {\n        if (this.friendContainer)\n            this.friendContainer.destroy();\n        if (this.mShowingSubContainer)\n            this.mShowingSubContainer.destroy();\n        _super.prototype.destroy.call(this);\n    };\n    PicaFriendPanel.prototype.OnClosePanel = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + this.key + "_hide");\n    };\n    PicaFriendPanel.prototype.onFetchFriendHandler = function (index) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].FETCH_FRIEND, index);\n    };\n    PicaFriendPanel.prototype.onReqFriendAttributesHandler = function (id) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_ATTRIBUTES, id);\n    };\n    PicaFriendPanel.prototype.onShowAddFriendHandler = function (type) {\n        if (this.mShowingSubContainer) {\n            this.mShowingSubContainer.destroy();\n        }\n        var classType = this.mSubContanerMap.get(type);\n        if (!classType)\n            return;\n        this.mShowingSubContainer = new classType(this.uiManager, this.bg.width, this.bg.height, this.key, this.dpr, this.scale);\n        this.mShowingSubContainer.register();\n        this.mShowingSubContainer.on("hide", this.onHideSearchHandler, this);\n        this.mShowingSubContainer.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_ATTRIBUTES, this.onReqFriendAttributesHandler, this);\n        this.mShowingSubContainer.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].RENDERER_EVENT, this.onRendererEventHandler, this);\n        this.mShowingSubContainer.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_PLAYER_LIST, this.onReqFriendListHandler, this);\n        this.mShowingSubContainer.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_RELATION, this.onReqFriendRelationHandler, this);\n        this.content.remove(this.friendContainer);\n        this.content.add(this.mShowingSubContainer);\n        this.mShowingSubContainer.resize();\n        var eventName = this.mShowingSubContainer.fetchEventName();\n        if (eventName)\n            this.render.renderEmitter(eventName);\n    };\n    PicaFriendPanel.prototype.onHideSearchHandler = function () {\n        this.content.add(this.friendContainer);\n        if (this.mShowingSubContainer) {\n            this.mShowingSubContainer.unregister();\n            this.mShowingSubContainer.destroy();\n            this.mShowingSubContainer = null;\n        }\n        this.friendContainer.fetchCurrentFriend();\n    };\n    PicaFriendPanel.prototype.onReqFriendListHandler = function (ids) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_PLAYER_LIST, ids);\n    };\n    PicaFriendPanel.prototype.onRendererEventHandler = function (event, args) {\n        if (event)\n            this.render.renderEmitter(event, args);\n    };\n    PicaFriendPanel.prototype.onReqFriendRelationHandler = function (friends) {\n        if (!friends) {\n            return;\n        }\n        var ids = friends.map(function (friend) { return friend.id; });\n        if (ids.length > 0)\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_RELATION, ids);\n        // for (const friend of friends) {\n        //     friend.relation = this.friendContainer.checkRelation(friend);\n        // }\n        // this.mShowingSubContainer.updateFriends(friends);\n    };\n    return PicaFriendPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\nvar FriendContainer = /** @class */ (function (_super) {\n    __extends(FriendContainer, _super);\n    function FriendContainer(uiManager, width, height, key, dpr, uiScale) {\n        var _this = _super.call(this, uiManager.scene, 0, 0) || this;\n        _this.uiManager = uiManager;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.uiScale = uiScale;\n        _this.render = uiManager.render;\n        _this.setSize(width, height);\n        return _this;\n    }\n    FriendContainer.prototype.draw = function () {\n        var posY = 49 * this.dpr - this.height * 0.5;\n        this.titleText = this.scene.make.text({ x: 0, y: posY, style: { fontSize: 16 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT, color: "#0" } }).setOrigin(0.5, 0);\n        this.titleText.setFontStyle("bold");\n        this.add(this.titleText);\n    };\n    FriendContainer.prototype.createGrideTable = function (x, y, width, height, capW, capH, createFun, callback, createCallback) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                zoom: this.uiScale,\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = createFun(_this.scene, cell);\n                }\n                if (item.type === structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Null) {\n                    cell.setHeight(11 * _this.dpr);\n                }\n                else {\n                    if (cell.height !== capH) {\n                        cell.setHeight(capH);\n                    }\n                }\n                cellContainer.setSize(cell.width, cell.height);\n                cellContainer.setData({ item: item });\n                cellContainer.setItemData(item);\n                if (createCallback) {\n                    createCallback(cell, cellContainer);\n                }\n                return cellContainer;\n            }\n        };\n        // 830\n        // 1140\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        grid.on("cellTap", function (cell) {\n            if (cell) {\n                callback.runWith(cell);\n            }\n        });\n        this.add(grid);\n        return grid;\n    };\n    FriendContainer.prototype.sortByName = function (array) {\n        return array.sort(function (a, b) {\n            return a.nickname.localeCompare(b.nickname, utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].language);\n        });\n    };\n    FriendContainer.prototype.sortByCreate = function (ary) {\n        return ary.sort(function (a, b) {\n            return b.createAt - a.createAt;\n        });\n    };\n    FriendContainer.prototype.sortByOnlien = function (array) {\n        return array.sort(function (a, b) {\n            var aLv = a.lv ? 1 : 0;\n            var bLv = b.lv ? 1 : 0;\n            if (a.type === structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Menu || b.type === structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Menu) {\n                return 1;\n            }\n            if (a.type === structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Null || b.type === structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Null) {\n                return 1;\n            }\n            return bLv - aLv;\n        });\n    };\n    return FriendContainer;\n}(Container));\nvar MainContainer = /** @class */ (function (_super) {\n    __extends(MainContainer, _super);\n    // private friendList: FriendList;\n    function MainContainer(uiManager, width, height, key, dpr, uiScale) {\n        var _this = _super.call(this, uiManager, width, height, key, dpr, uiScale) || this;\n        _this.friendDatas = new Map();\n        _this.draw();\n        return _this;\n    }\n    MainContainer.prototype.register = function () {\n        this.searchInput.on("textchange", this.onTextChangeHandler, this);\n        this.searchBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSeachHandler, this);\n        this.onlineCheckBox.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCheckoutOnlineHandler, this);\n        this.addFriendBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShowAddFriendHandler, this);\n    };\n    MainContainer.prototype.unregister = function () {\n        this.searchInput.off("textchange", this.onTextChangeHandler, this);\n        this.searchBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSeachHandler, this);\n        this.onlineCheckBox.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCheckoutOnlineHandler, this);\n        this.addFriendBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShowAddFriendHandler, this);\n    };\n    MainContainer.prototype.resize = function () {\n        if (this.friendTabel) {\n            this.friendTabel.resetMask();\n        }\n    };\n    MainContainer.prototype.setChannel = function (val) {\n        if (this.channelGroup) {\n            this.channelGroup.selectIndex(val);\n        }\n    };\n    MainContainer.prototype.updateFriends = function (content) {\n        var playerInfos = content.playerInfos;\n        var platformFriend = null;\n        var friends = this.friendDatas.get(this.channelGroup.selectedIndex);\n        if (!friends) {\n            return;\n        }\n        var _loop_1 = function (player) {\n            platformFriend = friends.find(function (friend) { return friend.id === player.platformId; });\n            if (platformFriend) {\n                platformFriend.nickname = player.nickname;\n                if (player.level)\n                    platformFriend.lv = player.level.level;\n            }\n        };\n        for (var _i = 0, playerInfos_1 = playerInfos; _i < playerInfos_1.length; _i++) {\n            var player = playerInfos_1[_i];\n            _loop_1(player);\n        }\n        this.showFriend(this.channelGroup.selectedIndex, friends);\n        // this.friendTabel.setItems(this.showingFriends);\n    };\n    MainContainer.prototype.setFriends = function (type, data) {\n        var result = [];\n        var target = null;\n        var ids = [];\n        var relation;\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n            var friend = data_1[_i];\n            if (type === structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Followes) {\n                target = friend.followed_user;\n                relation = structure__WEBPACK_IMPORTED_MODULE_2__["FriendRelationEnum"].Followed;\n            }\n            else if (type === structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Fans) {\n                target = friend.user;\n                relation = structure__WEBPACK_IMPORTED_MODULE_2__["FriendRelationEnum"].Fans;\n            }\n            else {\n                target = friend;\n                relation = structure__WEBPACK_IMPORTED_MODULE_2__["FriendRelationEnum"].Friend;\n            }\n            if (target) {\n                var createAt = 0;\n                if (target.createAt) {\n                    createAt = Date.parse(target.createAt);\n                }\n                result.push({ type: type, id: target._id, nickname: target.nickname, relation: relation, createAt: createAt });\n                ids.push(target._id);\n            }\n        }\n        this.friendDatas.set(type, result);\n        if (ids.length > 0)\n            this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_PLAYER_LIST, ids);\n        this.showFriend(type, result);\n    };\n    MainContainer.prototype.showFriend = function (type, data) {\n        // let result: FriendData[] = [];\n        var title = "";\n        var friendType = "";\n        switch (type) {\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Friends:\n                this.sortByOnlien(data);\n                title = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.title");\n                friendType = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.friends");\n                var menu = [{ type: structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Menu, menuData: { type: structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Notice } }, { type: structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Menu, menuData: { type: structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Blacklist } }, { type: structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Null }];\n                data = menu.concat(data);\n                break;\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Fans:\n                title = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.fans");\n                friendType = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.fans");\n                break;\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Followes:\n                title = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.follow");\n                friendType = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.fans");\n                break;\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Blacklist:\n                title = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.blacklist");\n                break;\n        }\n        if (type !== structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Friends) {\n            this.sortByCreate(data);\n        }\n        this.sortByOnlien(data);\n        this.showingFriends = data;\n        // this.friendList.setItems(this.showingFriends);\n        this.friendTabel.setItems(this.showingFriends);\n        if (title)\n            this.titleText.setText(title);\n        var friends = this.friendDatas.get(this.channelGroup.selectedIndex);\n        if (friends)\n            this.friendNum.setText(friendType + ": " + friends.length);\n        if (this.friendTabel) {\n            this.friendTabel.setT(0);\n        }\n    };\n    MainContainer.prototype.filterById = function (id) {\n        if (!this.showingFriends) {\n            return;\n        }\n        var friends = this.friendDatas.get(this.channelGroup.selectedIndex);\n        if (friends) {\n            friends = friends.filter(function (friend) { return friend.id !== id; });\n        }\n        this.showingFriends = this.showingFriends.filter(function (friend) { return friend.id !== id; });\n        this.friendTabel.setItems(this.showingFriends);\n    };\n    MainContainer.prototype.fetchCurrentFriend = function () {\n        if (!this.channelGroup || this.channelGroup.selectedIndex < 0) {\n            return;\n        }\n        this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].FETCH_FRIEND, this.channelGroup.selectedIndex);\n    };\n    MainContainer.prototype.draw = function () {\n        var _this = this;\n        _super.prototype.draw.call(this);\n        var posY = -this.height * 0.5 + 17.33 * this.dpr;\n        this.friendNum = this.scene.make.text({ x: 0, y: posY, text: "", style: { color: "#ffffff", fontSize: 12 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } }).setOrigin(0.5, 0);\n        this.add(this.friendNum);\n        this.topContent = this.scene.make.container(undefined, false);\n        this.add(this.topContent);\n        var topbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, 276 * this.dpr, 33 * this.dpr, this.key, "min_pic_bg", {\n            left: 5 * this.dpr,\n            top: 5 * this.dpr,\n            right: 5 * this.dpr,\n            bottom: 5 * this.dpr\n        });\n        this.topContent.setPosition(0, 73.67 * this.dpr + (topbg.height - this.height) * 0.5);\n        this.onlineCheckBox = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["CheckBox"](this.scene, this.key, "online_unchecked", "online_checked");\n        this.onlineCheckBox.setPosition(12 * this.dpr - topbg.width * 0.5, 0);\n        var boxtitle = this.scene.make.text({ x: 6.67 * this.dpr + this.onlineCheckBox.width * 0.5, y: 0, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.olinetitle"), style: { fontSize: 9.33 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT, color: "#0098D8" } }).setOrigin(0, 0.5);\n        this.onlineCheckBox.add(boxtitle);\n        this.searchBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "search");\n        this.searchBtn.x = topbg.width * 0.5 - 39 * this.dpr - this.searchBtn.width * 0.5;\n        this.addFriendBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "add");\n        this.addFriendBtn.x = topbg.width * 0.5 - 7.33 * this.dpr - this.addFriendBtn.width * 0.5;\n        this.searchInput = new SearchInput(this.render.uiManager, {\n            x: 0,\n            y: 0,\n            width: 80 * this.dpr,\n            height: 22 * this.dpr,\n            placeholder: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.search_friends_notes"),\n            fontSize: 12 * this.dpr + "px",\n            color: "#666666",\n        }, this.key, this.dpr).setOrigin(0, 0.5);\n        this.topContent.add([topbg, this.onlineCheckBox, this.searchInput, this.searchBtn, this.addFriendBtn]);\n        var tableFont = {\n            fontSize: 14 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n        };\n        var friendsTab = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["TabButton"](this.scene, this.key, "friend_default", "friend_select", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.friends"));\n        friendsTab.y = this.height * 0.5 - 14 * this.dpr - friendsTab.height * 0.5;\n        friendsTab.setTextStyle(tableFont);\n        var fansTab = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["TabButton"](this.scene, this.key, "fans_default", "fans_select", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.fans"));\n        fansTab.y = friendsTab.y;\n        fansTab.setTextStyle(tableFont);\n        var followsTab = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["TabButton"](this.scene, this.key, "follow_default", "follow_select", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.follow"));\n        followsTab.y = friendsTab.y;\n        followsTab.setTextStyle(tableFont);\n        friendsTab.x = (-fansTab.width - friendsTab.width) * 0.5 - 0.67 * this.dpr;\n        followsTab.x = (fansTab.width + followsTab.width) * 0.5 + 0.67 * this.dpr;\n        // this.navigate = new NavigateContaienr(this.scene, this.width * 0.5 - 23 * this.dpr, 53 * this.dpr, 10 * this.dpr, 330 * this.dpr, this.dpr);\n        this.add([friendsTab, fansTab, followsTab]);\n        this.channelGroup = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["CheckboxGroup"]();\n        this.channelGroup.on("selected", this.onSelectChannelHandler, this);\n        this.channelGroup.appendItemAll([friendsTab, fansTab, followsTab]);\n        this.friendTabel = this.createGrideTable(0, this.topContent.y + this.topContent.height + 380 * this.dpr * 0.5 + 18 * this.dpr, 275 * this.dpr, 380 * this.dpr, 275 * this.dpr, 36 * this.dpr, function (scene, cell) {\n            var item = new PicFriendItem(_this.render.uiManager, 0, 0, _this.key, _this.dpr);\n            item.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_ATTRIBUTES, _this.onFtechPlayerHandler, _this);\n            // item.on(EventType.FOLLOW, this.onReqFollowFriendHandler, this);\n            // item.on(EventType.UNFOLLOW, this.onReqUnfollowFriendHandler, this);\n            item.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].RENDERER_EVENT, _this.onRendererEventHandler, _this);\n            return item;\n        }, new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onSelectItemHandler));\n        // this.add(this.navigate);\n    };\n    MainContainer.prototype.onRendererEventHandler = function (event) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].RENDERER_EVENT, event, args);\n    };\n    MainContainer.prototype.onFtechPlayerHandler = function (friend) {\n        if (friend.lv !== undefined) {\n            this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_ATTRIBUTES, friend.id);\n        }\n        this.searchInput.setBlur();\n    };\n    MainContainer.prototype.onSelectChannelHandler = function (item) {\n        this.fetchCurrentFriend();\n    };\n    MainContainer.prototype.onSelectItemHandler = function (item) {\n        var data = item.getData("item");\n        if (!data || !data.menuData) {\n            return;\n        }\n        if (data.type === structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Menu) {\n            this.emit("shwoAddFriend", data.menuData.type);\n        }\n    };\n    MainContainer.prototype.onCheckoutOnlineHandler = function () {\n        var result = this.showingFriends;\n        if (this.onlineCheckBox.selected) {\n            var tmp = this.showingFriends.slice(0);\n            result = tmp.filter(function (friend) { return friend.online === true; });\n        }\n        this.friendTabel.setItems(result);\n    };\n    MainContainer.prototype.onShowAddFriendHandler = function () {\n        this.emit("shwoAddFriend", structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Search);\n        this.searchInput.setBlur();\n    };\n    MainContainer.prototype.onSeachHandler = function () {\n        var text = this.searchInput.text;\n        if (!text) {\n            this.friendTabel.setItems(this.showingFriends);\n            return;\n        }\n        var result = this.showingFriends.slice(0);\n        result = result.filter(function (friend) {\n            if (friend.nickname && friend.nickname.indexOf(text) > -1) {\n                return true;\n            }\n            return false;\n        });\n        this.friendTabel.setItems(result);\n    };\n    MainContainer.prototype.onTextChangeHandler = function () {\n        this.onSeachHandler();\n    };\n    return MainContainer;\n}(FriendContainer));\nvar PicFriendItem = /** @class */ (function (_super) {\n    __extends(PicFriendItem, _super);\n    function PicFriendItem(uiManager, x, y, key, dpr) {\n        var _this = _super.call(this, uiManager.scene, x, y) || this;\n        _this.mDpr = 0;\n        _this.render = uiManager.render;\n        _this.setSize(275 * dpr, 36 * dpr);\n        _this.mDpr = dpr;\n        _this.mKey = key;\n        return _this;\n    }\n    PicFriendItem.prototype.setItemData = function (data) {\n        this.itemData = data;\n        if (this.currnetType !== data.type) {\n            this.currnetType = data.type;\n            if (this.currentRender) {\n                this.currentRender.destroy();\n                this.currentRender = null;\n            }\n            this.currentRender = this.createRenderer(data.type);\n        }\n        if (!this.currentRender)\n            return;\n        this.currentRender.setItemData(data);\n    };\n    PicFriendItem.prototype.createAddBtn = function (text) {\n        var width = 48 * this.mDpr;\n        var height = 24 * this.mDpr;\n        return new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, (this.width - width) * 0.5 - 18 * this.mDpr, 0, width, height, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "yellow_btn_normal_s", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("common.add"), this.mDpr, this.scale, {\n            left: 10 * this.mDpr,\n            top: 10 * this.mDpr,\n            right: 10 * this.mDpr,\n            bottom: 10 * this.mDpr\n        });\n    };\n    PicFriendItem.prototype.onHeadhandler = function () {\n        this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_ATTRIBUTES, this.itemData);\n    };\n    PicFriendItem.prototype.createRenderer = function (type) {\n        // TODO \n        switch (type) {\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Fans:\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Search:\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Friends:\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Followes:\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Blacklist:\n                return new FriendRenderer(this.scene, this);\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Null:\n                return new NullRenderer(this.scene, this);\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Menu:\n                return new MenuRenderer(this.scene, this);\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Notice:\n                return new NoticeRenderer(this.scene, this);\n        }\n    };\n    Object.defineProperty(PicFriendItem.prototype, "key", {\n        get: function () {\n            return this.mKey;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(PicFriendItem.prototype, "dpr", {\n        get: function () {\n            return this.mDpr;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PicFriendItem;\n}(Container));\nvar MenuRenderer = /** @class */ (function () {\n    function MenuRenderer(scene, owner) {\n        this.scene = scene;\n        this.owner = owner;\n        this.icon = this.scene.make.image({\n            x: 7.44 * this.owner.dpr - this.owner.width * 0.5,\n            key: owner.key,\n            frame: "black_list"\n        }, false).setOrigin(0, 0.5);\n        this.text = this.scene.make.text({\n            x: this.icon.x + this.icon.width + 9.67 * owner.dpr,\n            style: {\n                fontSize: 9.33 * owner.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n                color: "#000000"\n            }\n        }).setOrigin(0, 0.5);\n        this.arrow = this.scene.make.image({\n            x: owner.width * 0.5 - 20 * owner.dpr,\n            key: owner.key,\n            frame: "arrow"\n        }).setOrigin(1, 0.5);\n        this.owner.add([this.icon, this.text, this.arrow]);\n    }\n    MenuRenderer.prototype.setItemData = function (data) {\n        var menudata = data.menuData;\n        if (!menudata) {\n            return;\n        }\n        switch (menudata.type) {\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Notice:\n                this.icon.setFrame("notice");\n                this.text.text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.notice");\n                break;\n            case structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Blacklist:\n                this.icon.setFrame("black_list");\n                this.text.text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.blacklist");\n                break;\n        }\n    };\n    MenuRenderer.prototype.destroy = function () {\n        if (this.icon)\n            this.icon.destroy();\n        if (this.text)\n            this.text.destroy();\n        if (this.arrow)\n            this.arrow.destroy();\n    };\n    return MenuRenderer;\n}());\nvar NoticeRenderer = /** @class */ (function () {\n    function NoticeRenderer(scene, owner) {\n        this.scene = scene;\n        this.owner = owner;\n        this.icon = this.scene.make.image({\n            x: 7.44 * this.owner.dpr - this.owner.width * 0.5,\n            key: owner.key,\n            frame: "notice_icon"\n        }, false).setOrigin(0, 0.5);\n        this.text = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, this.icon.x + this.icon.width + 9.67 * owner.dpr, 0, "", {\n            fontSize: 9.33 * owner.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n            color: "#000000"\n        });\n        this.text.setOrigin(0, 0.5);\n        this.owner.add([this.icon, this.text]);\n    }\n    NoticeRenderer.prototype.setItemData = function (data) {\n        this.text.setText("[color=#00dffc]" + data.nickname + "[/color] " + utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.followed_you"));\n    };\n    NoticeRenderer.prototype.destroy = function () {\n        if (this.icon)\n            this.icon.destroy();\n        if (this.text)\n            this.text.destroy();\n    };\n    return NoticeRenderer;\n}());\nvar NullRenderer = /** @class */ (function () {\n    function NullRenderer(scene, owner) {\n        this.owner = owner;\n        this.graphics = scene.make.graphics(undefined, false);\n        this.graphics.fillStyle(0xF5F5F5);\n        this.graphics.fillRect(-this.owner.width * 0.5, -18 * owner.dpr, this.owner.width, this.owner.height);\n        // this.graphics.fillRect(0, 0, this.owner.width * 2, this.owner.height * 2);\n        owner.add(this.graphics);\n    }\n    NullRenderer.prototype.setItemData = function (data) {\n    };\n    NullRenderer.prototype.destroy = function () {\n        if (this.graphics)\n            this.graphics.destroy();\n    };\n    return NullRenderer;\n}());\nvar FriendRenderer = /** @class */ (function () {\n    function FriendRenderer(scene, owner) {\n        this.scene = scene;\n        this.owner = owner;\n        this.icon = scene.make.image({ x: 7.44 * owner.dpr - owner.width * 0.5, key: owner.key, frame: "offline_head" }).setOrigin(0, 0.5).setInteractive().on("pointerup", this.onHeadhandler, this);\n        this.icon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.nameText = scene.make.text({\n            x: this.icon.x + this.icon.width + 9.67 * owner.dpr, y: -this.icon.height * 0.5 + 1 * owner.dpr, style: {\n                fontSize: 10 * owner.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n                color: "#6F75FF"\n            }\n        }, false);\n        this.level = scene.make.text({\n            x: this.nameText.x,\n            y: this.nameText.y + 18 * owner.dpr,\n            text: "",\n            style: {\n                fontSize: 8 * owner.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n                color: "#6F75FF"\n            }\n        });\n        this.addBtn = this.createAddBtn(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.follow"));\n        this.addBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onAddHandler, this);\n        this.owner.add(this.addBtn);\n        owner.add([this.icon, this.nameText, this.level, this.addBtn]);\n    }\n    FriendRenderer.prototype.setItemData = function (data) {\n        this.itemData = data;\n        this.nameText.text = data.nickname;\n        var lv = data.lv ? utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.lv") + "\\uFF1A" + data.lv : utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.unregistered_game");\n        this.level.setText(lv);\n        if (this.curRelation !== data.relation) {\n            this.curRelation = data.relation;\n            this.updateRelation();\n        }\n    };\n    FriendRenderer.prototype.destroy = function () {\n        if (!this.owner) {\n            return;\n        }\n        var list = this.owner.list;\n        while (list.length) {\n            list[list.length - 1].destroy();\n        }\n    };\n    FriendRenderer.prototype.updateRelation = function () {\n        if (this.curRelation && this[this.curRelation]) {\n            this[this.curRelation]();\n        }\n        else {\n            this.addBtn.visible = false;\n            this.friendEvnet = null;\n        }\n    };\n    FriendRenderer.prototype.fans = function () {\n        this.addBtn.visible = true;\n        this.addBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.follow"));\n        this.friendEvnet = structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].FOLLOW;\n    };\n    FriendRenderer.prototype.followed = function () {\n        this.addBtn.visible = true;\n        this.addBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.unfollow"));\n        this.friendEvnet = structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].UNFOLLOW;\n    };\n    FriendRenderer.prototype.blacklist = function () {\n        this.addBtn.visible = true;\n        this.addBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.remove"));\n        this.friendEvnet = structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REMOVE_FROM_BLACKLIST;\n    };\n    FriendRenderer.prototype.null = function () {\n        this.fans();\n    };\n    FriendRenderer.prototype.createAddBtn = function (text) {\n        // TODO \n        var _a = this.owner, width = _a.width, height = _a.height, key = _a.key, dpr = _a.dpr;\n        var btnW = 48 * dpr;\n        var btnH = 24 * dpr;\n        var button = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, (width - btnW) * 0.5 - 18 * dpr, 0, btnW, btnH, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "yellow_btn_normal_s", text, dpr, 1, {\n            left: 10 * dpr,\n            top: 6 * dpr,\n            right: 10 * dpr,\n            bottom: 6 * dpr\n        });\n        button.setTextStyle({\n            fontSize: 9 * dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n        });\n        return button;\n    };\n    FriendRenderer.prototype.onHeadhandler = function () {\n        this.owner.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_ATTRIBUTES, this.itemData);\n    };\n    FriendRenderer.prototype.onAddHandler = function () {\n        if (this.friendEvnet && this.itemData)\n            this.owner.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].RENDERER_EVENT, this.friendEvnet, this.itemData.id);\n        // this.owner.emit(EventType.FOLLOW, this.itemData);\n    };\n    return FriendRenderer;\n}());\nvar SubFriendContainer = /** @class */ (function (_super) {\n    __extends(SubFriendContainer, _super);\n    function SubFriendContainer(uiManager, width, height, key, dpr, uiScale) {\n        var _this = _super.call(this, uiManager, width, height, key, dpr, uiScale) || this;\n        _this.draw();\n        return _this;\n    }\n    SubFriendContainer.prototype.register = function () {\n        this.backBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onBackHandler, this);\n    };\n    SubFriendContainer.prototype.unregister = function () {\n        this.backBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onBackHandler, this);\n    };\n    SubFriendContainer.prototype.resize = function () {\n        if (this.gridTable) {\n            this.gridTable.resetMask();\n        }\n    };\n    SubFriendContainer.prototype.setItems = function (items) {\n        this.items = items;\n        if (this.gridTable)\n            this.gridTable.setItems(items);\n    };\n    SubFriendContainer.prototype.filterById = function (id) {\n        if (!this.items || this.items.length < 1) {\n            return;\n        }\n        if (this.items) {\n            this.items = this.items.filter(function (friend) { return friend.id !== id; });\n        }\n        if (this.gridTable)\n            this.gridTable.setItems(this.items);\n    };\n    SubFriendContainer.prototype.updateFriends = function (data) {\n    };\n    SubFriendContainer.prototype.fetchEventName = function () {\n        return "";\n    };\n    SubFriendContainer.prototype.destroy = function () {\n        this.unregister();\n        if (this.gridTable) {\n            this.gridTable.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    SubFriendContainer.prototype.draw = function () {\n        var _this = this;\n        _super.prototype.draw.call(this);\n        this.backBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "back");\n        this.backBtn.setPosition((-this.width + this.backBtn.width) * 0.5 + 21.67 * this.dpr, (-this.height + this.backBtn.height) * 0.5 + 47 * this.dpr);\n        this.gridTable = this.createGrideTable(0, 18 * this.dpr, 275 * this.dpr, 400 * this.dpr, 275 * this.dpr, 36 * this.dpr, function () {\n            var item = new PicFriendItem(_this.uiManager, 0, 0, _this.key, _this.dpr);\n            item.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_ATTRIBUTES, _this.onFtechPlayerHandler, _this);\n            item.on(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].RENDERER_EVENT, _this.onRendererEventHandler, _this);\n            return item;\n        }, new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this.onItemClickHandler));\n        this.add([this.backBtn]);\n    };\n    SubFriendContainer.prototype.onBackHandler = function () {\n        this.emit("hide");\n    };\n    SubFriendContainer.prototype.onItemClickHandler = function () {\n    };\n    SubFriendContainer.prototype.onFtechPlayerHandler = function (friend) {\n        this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_ATTRIBUTES, friend.id);\n    };\n    SubFriendContainer.prototype.onRendererEventHandler = function (event) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].RENDERER_EVENT, event, args);\n    };\n    return SubFriendContainer;\n}(FriendContainer));\nvar SearchContainer = /** @class */ (function (_super) {\n    __extends(SearchContainer, _super);\n    function SearchContainer(uiManager, width, height, key, dpr, uiScale) {\n        var _this = _super.call(this, uiManager, width, height, key, dpr, uiScale) || this;\n        _this.friendType = structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Search;\n        return _this;\n    }\n    SearchContainer.prototype.setItems = function (data) {\n        // const players = data\n        if (!data) {\n            return;\n        }\n        var result = [];\n        var ids = [];\n        for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\n            var player = data_2[_i];\n            var platformId = player.platformId, nickname = player.nickname, level = player.level;\n            result.push({ type: this.friendType, nickname: nickname, id: platformId, lv: level.level });\n        }\n        this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_FRIEND_RELATION, result);\n        this.items = result;\n        // super.setItems(result);\n    };\n    SearchContainer.prototype.updateRelation = function (relations) {\n        if (!this.items) {\n            return;\n        }\n        var _loop_2 = function (relation) {\n            var friend = this_1.items.find(function (f) { return f.id === relation.id; });\n            friend.relation = relation.relation;\n        };\n        var this_1 = this;\n        for (var _i = 0, relations_1 = relations; _i < relations_1.length; _i++) {\n            var relation = relations_1[_i];\n            _loop_2(relation);\n        }\n        this.updateFriends(this.items);\n    };\n    SearchContainer.prototype.updateFriends = function (items) {\n        this.items = items;\n        if (this.gridTable)\n            this.gridTable.setItems(items);\n    };\n    SearchContainer.prototype.draw = function () {\n        _super.prototype.draw.call(this);\n        this.titleText.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.search"));\n        var topbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, 276 * this.dpr, 33 * this.dpr, this.key, "min_pic_bg", {\n            left: 5 * this.dpr,\n            top: 5 * this.dpr,\n            right: 5 * this.dpr,\n            bottom: 5 * this.dpr\n        });\n        topbg.setPosition(0, 73.67 * this.dpr + (topbg.height - this.height) * 0.5);\n        this.searchInput = new SearchInput(this.uiManager, {\n            x: 0,\n            y: 0,\n            width: 80 * this.dpr,\n            height: 22 * this.dpr,\n            placeholder: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.search_friends_notes"),\n            fontSize: 12 * this.dpr + "px",\n            color: "#666666",\n        }, this.key, this.dpr).setOrigin(0, 0.5);\n        this.searchInput.setPosition(0, topbg.y);\n        this.searchInput.on("search", this.onSearchHandler, this);\n        this.gridTable.y = topbg.height;\n        this.gridTable.layout();\n        this.add([topbg, this.searchInput]);\n    };\n    SearchContainer.prototype.onSearchHandler = function (text) {\n        this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].RENDERER_EVENT, structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].SEARCH_FRIEND, text);\n        this.resize();\n    };\n    return SearchContainer;\n}(SubFriendContainer));\nvar BlackContainer = /** @class */ (function (_super) {\n    __extends(BlackContainer, _super);\n    function BlackContainer(uiManager, width, heigth, key, dpr, uiScale) {\n        var _this = _super.call(this, uiManager, width, heigth, key, dpr, uiScale) || this;\n        _this.friendType = structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Blacklist;\n        return _this;\n    }\n    BlackContainer.prototype.draw = function () {\n        _super.prototype.draw.call(this);\n        this.titleText.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.blacklist"));\n    };\n    BlackContainer.prototype.setItems = function (data) {\n        if (!data) {\n            return;\n        }\n        var result = [];\n        var ids = [];\n        var banUser = null;\n        for (var _i = 0, data_3 = data; _i < data_3.length; _i++) {\n            var friend = data_3[_i];\n            banUser = friend.ban_user;\n            if (banUser) {\n                ids.push(banUser._id);\n                result.push({ type: structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Blacklist, id: banUser._id, nickname: banUser.nickname, relation: structure__WEBPACK_IMPORTED_MODULE_2__["FriendRelationEnum"].Blacklist });\n            }\n        }\n        _super.prototype.setItems.call(this, result);\n        if (ids.length > 0) {\n            this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_PLAYER_LIST, ids);\n        }\n    };\n    BlackContainer.prototype.updateFriends = function (content) {\n        var playerInfos = content.playerInfos;\n        var platformFriend = null;\n        var _loop_3 = function (player) {\n            platformFriend = this_2.items.find(function (friend) { return friend.id === player.platformId; });\n            if (platformFriend) {\n                platformFriend.nickname = player.nickname;\n                if (player.level)\n                    platformFriend.lv = player.level.level;\n            }\n        };\n        var this_2 = this;\n        for (var _i = 0, playerInfos_2 = playerInfos; _i < playerInfos_2.length; _i++) {\n            var player = playerInfos_2[_i];\n            _loop_3(player);\n        }\n        if (this.gridTable)\n            this.gridTable.setItems(this.items);\n    };\n    BlackContainer.prototype.fetchEventName = function () {\n        return structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_BLACKLIST;\n    };\n    return BlackContainer;\n}(SubFriendContainer));\nvar SearchInput = /** @class */ (function (_super) {\n    __extends(SearchInput, _super);\n    function SearchInput(uiManager, config, key, dpr) {\n        var _this = _super.call(this, uiManager.scene, config) || this;\n        _this.render = uiManager.render;\n        _this.searchBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.scene, key, "search_blue");\n        _this.searchBtn.x = config.width + 4 * dpr + _this.searchBtn.width * 0.5;\n        _this.searchBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, _this.onSearchHandler, _this);\n        _this.add(_this.searchBtn);\n        var background = uiManager.scene.make.graphics(undefined, false);\n        background.fillStyle(0xFFFFFF);\n        background.fillRoundedRect(-5 * dpr, -config.height * 0.5, config.width + 14 * dpr + _this.searchBtn.width, config.height, config.height * 0.5);\n        _this.addAt(background, 0);\n        _this.setOrigin(0, 0.5);\n        return _this;\n    }\n    SearchInput.prototype.onSearchHandler = function () {\n        this.setBlur();\n        this.emit("search", this.text);\n    };\n    return SearchInput;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["LabelInput"]));\nvar NoticeContainer = /** @class */ (function (_super) {\n    __extends(NoticeContainer, _super);\n    function NoticeContainer(uiManager, width, heigth, key, dpr, uiScale) {\n        var _this = _super.call(this, uiManager, width, heigth, key, dpr, uiScale) || this;\n        _this.friendType = structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Search;\n        return _this;\n    }\n    NoticeContainer.prototype.draw = function () {\n        _super.prototype.draw.call(this);\n        this.titleText.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.notice"));\n    };\n    NoticeContainer.prototype.setItems = function (data) {\n        if (!data) {\n            return;\n        }\n        var result = [];\n        var ids = [];\n        var now = Date.now();\n        var showTiems = 72 * 60 * 60 * 1000;\n        for (var _i = 0, data_4 = data; _i < data_4.length; _i++) {\n            var friend = data_4[_i];\n            if (friend.created_at) {\n                var create_at = Date.parse(friend.created_at);\n                if (now - create_at < showTiems) {\n                    var user = friend.user;\n                    if (user) {\n                        result.push({ type: structure__WEBPACK_IMPORTED_MODULE_2__["FriendChannel"].Notice, id: user._id, nickname: user.nickname });\n                        ids.push(user._id);\n                    }\n                }\n            }\n        }\n        _super.prototype.setItems.call(this, result);\n        if (ids.length > 0) {\n            this.emit(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_PLAYER_LIST, ids);\n        }\n    };\n    NoticeContainer.prototype.updateFriends = function (content) {\n        var playerInfos = content.playerInfos;\n        var platformFriend = null;\n        var _loop_4 = function (player) {\n            platformFriend = this_3.items.find(function (friend) { return friend.id === player.platformId; });\n            if (platformFriend) {\n                platformFriend.nickname = player.nickname;\n                if (player.level)\n                    platformFriend.lv = player.level.level;\n            }\n        };\n        var this_3 = this;\n        for (var _i = 0, playerInfos_3 = playerInfos; _i < playerInfos_3.length; _i++) {\n            var player = playerInfos_3[_i];\n            _loop_4(player);\n        }\n        if (this.gridTable)\n            this.gridTable.setItems(this.items);\n    };\n    NoticeContainer.prototype.fetchEventName = function () {\n        return structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].REQ_NEW_FANS;\n    };\n    return NoticeContainer;\n}(SubFriendContainer));\nvar NavigateContaienr = /** @class */ (function (_super) {\n    __extends(NavigateContaienr, _super);\n    function NavigateContaienr(scene, x, y, width, height, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.setSize(width, height);\n        _this.chars = [];\n        for (var i = 0; i < 26; i++) {\n            _this.chars.push(String.fromCharCode(i + 65));\n        }\n        _this.chars.push("#");\n        _this.texts = [];\n        var pading = height / _this.chars.length;\n        var style = {\n            color: "#0",\n            fontSize: 8 * dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n        };\n        var _w = 0;\n        var _h = 0;\n        for (var i = 0; i < _this.chars.length; i++) {\n            var text = _this.scene.make.text({\n                y: i * pading - _this.height * 0.5,\n                text: _this.chars[i],\n                style: style,\n            }).setOrigin(0.5);\n            _this.texts[i] = text;\n            if (!_w) {\n                _w = text.width + 8 * dpr;\n                _h = text.height + 2 * dpr;\n            }\n        }\n        _this.selected = _this.scene.make.graphics(undefined, false);\n        _this.selected.fillStyle(0x2F87FA);\n        _this.selected.fillRect(-_w * 0.5, -_h * 0.5, _w, _h);\n        _this.add(_this.selected);\n        _this.selected.x = _this.texts[0].x;\n        _this.selected.y = _this.texts[0].y;\n        _this.add(_this.texts);\n        return _this;\n    }\n    NavigateContaienr.prototype.checkSlider = function (nickname) {\n        if (!nickname) {\n            this.selected.visible = false;\n            return;\n        }\n        this.selected.visible = true;\n        for (var i = 0; i < this.chars.length; i++) {\n            // Logger.getInstance().log("====>>: ", this.chars[i], nickname, nickname.localeCompare(this.chars[i]));\n            if (nickname.localeCompare(this.chars[i]) > -1) {\n                this.selected.x = this.texts[i].x;\n                this.selected.y = this.texts[i].y;\n                return;\n            }\n        }\n    };\n    return NavigateContaienr;\n}(Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaFriend/PicaFriendPanel.ts?')},"./src/pica/render/ui/PicaFurniFun/PicaFurniFunPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaFurniFunPanel", function() { return PicaFurniFunPanel; });\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRender */ "./src/pica/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar PicaFurniFunPanel = /** @class */ (function (_super) {\n    __extends(PicaFurniFunPanel, _super);\n    function PicaFurniFunPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICAFURNIFUN_NAME;\n        return _this;\n    }\n    PicaFurniFunPanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0, 0.66);\n        this.blackGraphic.fillRect(0, 0, width, height);\n        this.content.x = Math.floor(width / 2);\n        this.content.y = Math.floor(height / 2);\n        this.setSize(width * this.scale, height * this.scale);\n        this.materialGameScroll.refreshMask();\n    };\n    PicaFurniFunPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n        this.setFuritDisplay();\n        this.setMaterialsData(this._getMaterialData());\n    };\n    PicaFurniFunPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.confirmBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onConfirmBtnClick, this);\n        this.closeBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.OnClosePanel, this);\n    };\n    PicaFurniFunPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.confirmBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onConfirmBtnClick, this);\n        this.closeBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.OnClosePanel, this);\n    };\n    PicaFurniFunPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "furni_unlock/furni_unlock.png", "furni_unlock/furni_unlock.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaFurniFunPanel.prototype.init = function () {\n        var _this = this;\n        var width = this.cameraWidth;\n        var height = this.cameraHeight;\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.blackGraphic.setInteractive(new Phaser.Geom.Rectangle(0, 0, width / this.scale, height / this.scale), Phaser.Geom.Rectangle.Contains);\n        this.add(this.blackGraphic);\n        this.content = this.scene.make.container(undefined, false);\n        var bgwidth = 295 * this.dpr, bgheight = 400 * this.dpr;\n        this.content.setSize(bgwidth, bgheight);\n        this.add(this.content);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSlicePatch"](this.scene, 0, 0, bgwidth, bgheight, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, "bg", {\n            left: 20 * this.dpr,\n            top: 20 * this.dpr,\n            right: 20 * this.dpr,\n            bottom: 40 * this.dpr\n        });\n        this.content.add(this.bg);\n        var posY = -this.bg.height * 0.5;\n        this.titleimage = this.scene.make.image({ x: 0, y: posY + 5 * this.dpr, key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, frame: "title" }, false);\n        this.titleimage.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titleName = this.scene.make.text({\n            x: 0, y: this.titleimage.y + 2 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_6__["i18n"].t("furni_unlock.title"),\n            style: { color: "#905B06", fontFamily: utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT, fontSize: 16 * this.dpr }\n        }).setOrigin(0.5, 0.5).setFontStyle("bold");\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, "close");\n        this.closeBtn.x = this.bg.width * 0.5 - this.dpr * 8;\n        this.closeBtn.y = posY + this.dpr * 7;\n        this.content.add([this.titleimage, this.titleName, this.closeBtn]);\n        this.itemName = this.scene.make.text({\n            x: 0, y: this.titleimage.y + this.titleimage.height * 0.5 + 13 * this.dpr, text: "",\n            style: { color: "#FFC51A", fontFamily: utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT, fontSize: 14 * this.dpr }\n        }).setFontStyle("bold").setStroke("#996600", 4).setOrigin(0.5);\n        this.content.add(this.itemName);\n        this.bgicon = this.scene.make.image({ key: this.key, frame: "bg_f" });\n        this.bgicon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.bgicon.y = this.itemName.y + this.bgicon.height * 0.5 + 13 * this.dpr;\n        this.content.add([this.bg, this.bgicon]);\n        this.mDetailDisplay = new picaRender__WEBPACK_IMPORTED_MODULE_3__["DetailDisplay"](this.scene, this.render);\n        this.mDetailDisplay.setTexture(this.key, "bg_f");\n        this.mDetailDisplay.y = this.bgicon.y; // this.bgicon.height / 2;\n        this.mDetailDisplay.setFixedScale(this.dpr / this.scale);\n        this.mDetailDisplay.setSize(72 * this.dpr, 72 * this.dpr);\n        this.content.add(this.mDetailDisplay);\n        var materialConWdith = 360 * this.dpr, materialConHeight = 92 * this.dpr;\n        this.materialCon = this.scene.make.container(undefined, false).setSize(materialConWdith, materialConHeight);\n        this.content.add(this.materialCon);\n        this.materialCon.setPosition(0, -posY - materialConHeight * 0.5 - 66 * this.dpr);\n        var materialTitle = this.scene.make.text({\n            x: 0,\n            y: -materialConHeight * 0.5 + 12 * this.dpr,\n            text: utils__WEBPACK_IMPORTED_MODULE_6__["i18n"].t("furni_unlock.needMaterials"),\n            style: {\n                color: "#253FCA",\n                fontSize: 12 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        var materialLine = this.scene.make.image({ key: this.key, frame: "sourcelist_title" });\n        materialLine.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var materialLine2 = this.scene.make.image({ key: this.key, frame: "sourcelist_title" });\n        materialLine2.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var linePosx = -materialTitle.width * 0.5 - materialLine.width * 0.5 - 10 * this.dpr;\n        materialLine.setPosition(linePosx, materialTitle.y);\n        materialLine2.setPosition(-linePosx, materialTitle.y).rotation = -Math.PI;\n        this.materialCon.add([materialTitle, materialLine, materialLine2]);\n        this.materialGameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["GameScroller"](this.scene, {\n            x: 0,\n            y: 2 * this.dpr,\n            width: 240 * this.dpr,\n            height: 90 * this.dpr,\n            zoom: this.scale,\n            dpr: this.dpr,\n            align: 2,\n            orientation: 1,\n            space: 20 * this.dpr,\n            valuechangeCallback: undefined,\n            cellupCallBack: function (gameobject) {\n                _this.onMaterialItemHandler(gameobject);\n            }\n        });\n        this.materialCon.add(this.materialGameScroll);\n        var tipsWidth = 145 * this.dpr;\n        var tipsHeight = 55 * this.dpr;\n        this.itemtips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["ItemInfoTips"](this.scene, tipsWidth, tipsHeight, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, "tips_bg", this.dpr, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.itemtips.x = -this.width * 0.5 + tipsWidth * 0.5 + 10 * this.dpr;\n        this.itemtips.y = -this.height * 0.5 + 70 * this.dpr;\n        this.itemtips.setVisible(false);\n        this.itemtips.setHandler(new utils__WEBPACK_IMPORTED_MODULE_6__["Handler"](this, this.onItemTipsHideHandler));\n        this.content.add(this.itemtips);\n        this.confirmBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSliceButton"](this.scene, 0, -posY - 35 * this.dpr, 100 * this.dpr, 40 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, "yellow_btn_over", utils__WEBPACK_IMPORTED_MODULE_6__["i18n"].t("furni_unlock.unlock"), this.dpr, this.scale, {\n            left: 15 * this.dpr,\n            top: 15 * this.dpr,\n            right: 15 * this.dpr,\n            bottom: 15 * this.dpr\n        });\n        this.confirmBtn.setTextStyle({\n            color: "#976400",\n            fontSize: 12 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT,\n            stroke: "#976400",\n        });\n        this.confirmBtn.setTextOffset(10 * this.dpr, 0);\n        var repairicon = this.scene.make.image({ key: this.key, frame: "repair_icon" });\n        repairicon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        repairicon.x = -28 * this.dpr;\n        this.confirmBtn.add(repairicon);\n        this.content.add(this.confirmBtn);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaFurniFunPanel.prototype.destroy = function () {\n        this.removeListen();\n        if (this.confirmBtn)\n            this.confirmBtn.destroy();\n        this.confirmBtn = null;\n        _super.prototype.destroy.call(this);\n    };\n    PicaFurniFunPanel.prototype.setFuritDisplay = function () {\n        var sprite = this._getDisplayData();\n        var display = sprite.displayInfo;\n        var resData = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_client"].OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_COMMODITY_RESOURCE();\n        resData.display = display.display;\n        var animas = this.createProtocolObject(display.animations);\n        if (animas.length > 1) {\n            var arr = [];\n            for (var _i = 0, animas_1 = animas; _i < animas_1.length; _i++) {\n                var ani = animas_1[_i];\n                if (ani.node.name !== "lock") {\n                    ani.frameName = ani.layer[0].frameName;\n                    arr.push(ani);\n                }\n            }\n            if (arr.length === 0)\n                arr.push(animas[0]);\n            resData.animations = arr;\n        }\n        else {\n            resData.animations = animas;\n        }\n        this.mDetailDisplay.loadDisplay(resData);\n        this.itemName.text = sprite.nickname;\n    };\n    PicaFurniFunPanel.prototype.isTeamBuild = function () {\n        return this.mShowData.tag && this.mShowData.tag === "teambuild";\n    };\n    PicaFurniFunPanel.prototype._getDisplayData = function () {\n        if (this.isTeamBuild()) {\n            return this.mShowData.element;\n        }\n        else {\n            return this.mShowData;\n        }\n    };\n    PicaFurniFunPanel.prototype._getMaterialData = function () {\n        if (this.isTeamBuild()) {\n            return this.mShowData.materials;\n        }\n        else {\n            return this.materials;\n        }\n    };\n    PicaFurniFunPanel.prototype.setMaterialsData = function (materials) {\n        this.materials = materials;\n        if (!this.mInitialized || !materials)\n            return;\n        this.setMaterialItems(this.materials);\n    };\n    PicaFurniFunPanel.prototype.createProtocolObject = function (animations) {\n        var anis = [];\n        animations.forEach(function (model) {\n            var modelData = { node: model["mNode"], baseLoc: "0,0", originPoint: [0, 0], layer: [] };\n            var animodel = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["AnimationModel"](modelData);\n            Object.assign(animodel, model);\n            var ani = animodel.createProtocolObject();\n            anis.push(ani);\n        }, this);\n        return anis;\n    };\n    PicaFurniFunPanel.prototype.setMaterialItems = function (datas) {\n        var len = datas.length;\n        this.materialGameScroll.clearItems();\n        for (var i = 0; i < len; i++) {\n            var item = new MaterialItem(this.scene, this.key, this.dpr, this.scale);\n            item.y = 0;\n            item.setItemData(datas[i]);\n            item.setData("itemData", datas[i]);\n            this.materialGameScroll.addItem(item);\n        }\n        this.materialGameScroll.Sort();\n        // this.onMaterialItemHandler(datas[0]);\n    };\n    PicaFurniFunPanel.prototype.onConfirmBtnClick = function () {\n        var data = this.showData;\n        if (!data)\n            return;\n        if (this.isTeamBuild()) {\n            this.render.renderEmitter(this.key + "_queryTeamBuild", [data.element.id]);\n        }\n        else {\n            this.render.renderEmitter(this.key + "_queryunlock", [data.id]);\n        }\n        this.OnClosePanel();\n    };\n    PicaFurniFunPanel.prototype.OnClosePanel = function () {\n        this.render.renderEmitter(this.key + "_close");\n    };\n    PicaFurniFunPanel.prototype.onMaterialItemHandler = function (gameobject) {\n        this.itemtips.setVisible(false);\n        if (this.selectMaterial && this.selectMaterial !== gameobject) {\n            this.selectMaterial.select = false;\n        }\n        gameobject.select = !gameobject.select;\n        if (gameobject.select) {\n            this.itemtips.setItemData(gameobject.itemData);\n            this.itemtips.setVisible(true);\n        }\n        this.selectMaterial = gameobject;\n        this.setTipsPosition(gameobject);\n    };\n    PicaFurniFunPanel.prototype.onItemTipsHideHandler = function () {\n        if (this.selectMaterial)\n            this.selectMaterial.select = false;\n    };\n    PicaFurniFunPanel.prototype.setTipsPosition = function (gameobject) {\n        var posx = gameobject.x;\n        var posy = gameobject.y;\n        var tempobject = gameobject;\n        while (tempobject.parentContainer !== this.content) {\n            posx += tempobject.parentContainer.x;\n            posy += tempobject.parentContainer.y;\n            tempobject = tempobject.parentContainer;\n        }\n        if (posx - this.itemtips.width * 0.5 < -this.content.width * 0.5) {\n            this.itemtips.x = this.itemtips.width * 0.5 - this.content.width * 0.5 + 20 * this.dpr;\n        }\n        else if (posx + this.itemtips.width * 0.5 > this.content.width * 0.5) {\n            this.itemtips.x = this.content.width * 0.5 - this.itemtips.width * 0.5 - 20 * this.dpr;\n        }\n        else {\n            this.itemtips.x = posx;\n        }\n        this.itemtips.y = posy - this.itemtips.height * 0.5 + 5 * this.dpr;\n    };\n    return PicaFurniFunPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\nvar MaterialItem = /** @class */ (function (_super) {\n    __extends(MaterialItem, _super);\n    function MaterialItem(scene, key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.mselect = false;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.zoom = zoom;\n        _this.bg = _this.scene.make.image({ key: _this.key, frame: "bg_m" });\n        _this.itemIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["DynamicImage"](scene, 0, 0);\n        _this.itemIcon.scale = _this.dpr / _this.zoom;\n        _this.itemCount = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](_this.scene, 0, 15 * dpr, "10/20", { color: "#000000" })\n            .setOrigin(0.5).setFontSize(11 * dpr).setFontFamily(utils__WEBPACK_IMPORTED_MODULE_6__["Font"].DEFULT_FONT);\n        _this.add([_this.bg, _this.itemIcon, _this.itemCount]);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.itemCount.y = _this.height * 0.5 + 8 * dpr;\n        return _this;\n    }\n    MaterialItem.prototype.setItemData = function (data) {\n        this.itemData = data;\n        this.itemCount.text = this.getCountText(data);\n        var url = utils__WEBPACK_IMPORTED_MODULE_6__["Url"].getOsdRes(data.texturePath);\n        this.itemIcon.load(url, this, function () {\n        });\n    };\n    Object.defineProperty(MaterialItem.prototype, "select", {\n        get: function () {\n            return this.mselect;\n        },\n        set: function (value) {\n            this.bg.setFrame(value ? "bg_select" : "bg_m");\n            this.mselect = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MaterialItem.prototype.getCountText = function (data) {\n        var color = (data.count >= data.neededCount ? "#000000" : "#ff0000");\n        var text = "[color=" + color + "]" + data.count + "[/color]/" + data.neededCount;\n        if (data.hasOwnProperty("recommended")) {\n            text = data.recommended + "/" + text;\n        }\n        return text;\n    };\n    return MaterialItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaFurniFun/PicaFurniFunPanel.ts?')},"./src/pica/render/ui/PicaFurnitureCompose/PicaFurnitureComposePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaFurnitureComposePanel", function() { return PicaFurnitureComposePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRender */ "./src/pica/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar PicaFurnitureComposePanel = /** @class */ (function (_super) {\n    __extends(PicaFurnitureComposePanel, _super);\n    function PicaFurnitureComposePanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.mSelectedItemData = [];\n        _this.subCategoryType = 1;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICAFURNITURECOMPOSE_NAME;\n        return _this;\n    }\n    PicaFurnitureComposePanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.mBackground.x = width * 0.5;\n        this.mBackground.y = height * 0.5;\n        this.topBackground.x = width * 0.5;\n        this.topBackground.y = this.topBackground.height * 0.5;\n        var categoryConHeight = 79 * this.dpr;\n        var topHeight = height - this.mPropGrid.height - categoryConHeight * 0.5 - 47 * this.dpr;\n        this.furiAnimation.x = width * 0.5;\n        this.furiAnimation.y = topHeight * 0.5 + 7 * this.dpr;\n        this.mCategoryCon.setSize(width, 79 * this.dpr);\n        this.mCategoryCon.y = topHeight;\n        this.mCategoryCon.x = width * 0.5;\n        this.mCategoriesBar.y = 40 * this.dpr;\n        this.mCategoriesBar.x = -width * 0.5;\n        this.mCategoriesBar.clear();\n        this.mCategoriesBar.fillStyle(0xA56BFE);\n        this.mCategoriesBar.fillRect(0, 0, width, 40 * this.dpr);\n        this.mCategoriesBar.fillStyle(0x824CD4);\n        this.mCategoriesBar.fillRect(0, 40 * this.dpr, width, 3 * this.dpr);\n        this.composeBtn.x = width - this.composeBtn.width / 2 - 20 * this.dpr;\n        this.composeBtn.y = this.mCategoryCon.y - this.composeBtn.height / 2 + 35 * this.dpr;\n        this.mPropGridBg.clear();\n        this.mPropGridBg.fillStyle(0xCE7AF3);\n        this.mPropGridBg.fillRect(0, 0, this.mPropGrid.width, this.mPropGrid.height + 10 * this.dpr);\n        this.mPropGridBg.y = height - this.mPropGrid.height - 4 * this.dpr;\n        this.mPropGrid.x = width / 2 + 3 * this.dpr;\n        this.mPropGrid.y = height - this.mPropGrid.height * 0.5;\n        this.mPropGrid.layout();\n        this.mPropGrid.resetMask();\n        this.mCategoryScroll.refreshMask();\n        this.setSize(width, height);\n        this.setInteractive();\n    };\n    PicaFurnitureComposePanel.prototype.setCategories = function () {\n        var subcategorys = [{ name: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furnicompose.onestar"), value: 1 }, { name: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furnicompose.twostar"), value: 2 },\n            { name: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furnicompose.threestar"), value: 3 }, { name: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furnicompose.fourstar"), value: 4 }];\n        this.mPreCategoryBtn = null;\n        this.mSelectedCategeories = null;\n        var capW = 60 * this.dpr;\n        var capH = 41 * this.dpr;\n        var items = [];\n        this.mCategoryScroll.clearItems();\n        for (var i = 0; i < subcategorys.length; i++) {\n            var item = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["TextButton"](this.scene, this.dpr, 1, subcategorys[i].name, 0, 0);\n            item.setData("item", subcategorys[i]);\n            item.setSize(capW, capH);\n            this.mCategoryScroll.addItem(item);\n            item.setChangeColor("#FFE63C");\n            items[i] = item;\n            item.setFontSize(16 * this.dpr);\n            item.setFontStyle("bold");\n        }\n        this.mCategoryScroll.setAlign(1);\n        this.mCategoryScroll.Sort();\n        this.mCategoryScroll.refreshMask();\n        if (items.length > 1)\n            this.onSelectSubCategoryHandler(items[0]);\n    };\n    PicaFurnitureComposePanel.prototype.setGridProp = function (props) {\n        this.setProps(props);\n        this.mPropGrid.setT(0);\n        this.updateSelectItemDatas(props);\n    };\n    PicaFurnitureComposePanel.prototype.updateGridProp = function (props) {\n        this.setProps(props);\n        this.updateSelectItemDatas(props);\n    };\n    PicaFurnitureComposePanel.prototype.setProps = function (props) {\n        props = !props ? [] : props;\n        var len = props.length;\n        if (len < 24) {\n            props = props.concat(new Array(24 - len));\n        }\n        this.mPropGrid.setItems(props);\n    };\n    PicaFurnitureComposePanel.prototype.setStarData = function (value) {\n        this.starCount = value;\n        if (!this.mInitialized)\n            return;\n        this.starvalue.setText(value + "");\n    };\n    PicaFurnitureComposePanel.prototype.updateSelectItemDatas = function (props) {\n        var tempArr = [];\n        for (var _i = 0, _a = this.mSelectedItemData; _i < _a.length; _i++) {\n            var item = _a[_i];\n            for (var _b = 0, props_1 = props; _b < props_1.length; _b++) {\n                var prop = props_1[_b];\n                if (item && prop.indexId === item.indexId) {\n                    tempArr.push(prop);\n                }\n            }\n        }\n        this.mSelectedItemData.length = 0;\n        this.mSelectedItemData = tempArr;\n    };\n    PicaFurnitureComposePanel.prototype.setComposeResult = function (reward) {\n    };\n    PicaFurnitureComposePanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.composeBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onComposeBtnHandler, this);\n    };\n    PicaFurnitureComposePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.composeBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onComposeBtnHandler, this);\n    };\n    PicaFurnitureComposePanel.prototype.destroy = function () {\n        if (this.mCategoryScroll) {\n            this.mCategoryScroll.destroy();\n        }\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    PicaFurnitureComposePanel.prototype.queryRefreshPackage = function (update) {\n        this.queryPackege(update);\n    };\n    PicaFurnitureComposePanel.prototype.onInitialized = function () {\n        if (this.starCount) {\n            this.starvalue.setText(this.starCount + "");\n        }\n    };\n    PicaFurnitureComposePanel.prototype.init = function () {\n        var _this = this;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.mBackground = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["CommonBackground"](this.scene, 0, 0, width, height, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, "synthetic_bg", 0xc97af3);\n        this.topBackground = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_bg_stripe" });\n        this.mCategoryCon = this.scene.make.container(undefined, false);\n        this.mCategoryCon.setSize(width, 295 * this.dpr);\n        this.mCategoryCon.y = height - this.mCategoryCon.height;\n        this.mCategoriesBar = this.scene.make.graphics(undefined, false);\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        this.mCloseBtn = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"](this.scene, 0, 0);\n        this.mCloseBtn.setSize(100 * this.dpr, 40 * this.dpr);\n        this.mCloseBtn.enable = true;\n        this.mCloseBtn.x = this.mCloseBtn.width * 0.5 + 10 * this.dpr;\n        this.mCloseBtn.y = 35 * this.dpr;\n        var closeimg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "back_arrow" });\n        closeimg.x = -this.mCloseBtn.width * 0.5 + closeimg.width * 0.5 + 10 * this.dpr;\n        var titleTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_5__["UIHelper"].whiteStyle(this.dpr, 18) }).setOrigin(0, 0.5);\n        titleTex.text = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("compose.title");\n        titleTex.x = closeimg.x + closeimg.width * 0.5 + 10 * this.dpr;\n        this.mCloseBtn.add([closeimg, titleTex]);\n        this.furiAnimation = new FuriComposeAnimation(this.scene, this.dpr, this.scale);\n        this.furiAnimation.setHandler(new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, this.onFuriComposeAnimationHandler));\n        var starbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, -this.dpr, 80 * this.dpr, 28 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "home_assets_bg", {\n            left: 17 * this.dpr,\n            top: 0 * this.dpr,\n            right: 17 * this.dpr,\n            bottom: 0 * this.dpr\n        });\n        starbg.x = -starbg.width * 0.5;\n        this.starvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 26 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "Recast_pica star_big", this.dpr, {\n            color: "#ffffff", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].NUMBER\n        });\n        this.starvalue.setLayout(1);\n        this.starvalue.x = starbg.x - starbg.width * 0.5 + 22 * this.dpr;\n        this.starCountCon = this.scene.make.container(undefined, false);\n        this.starCountCon.setSize(starbg.width, starbg.height);\n        this.starCountCon.add([starbg, this.starvalue]);\n        this.starCountCon.x = width - 20 * this.dpr;\n        this.starCountCon.y = this.mCloseBtn.y;\n        var btnwidth = 100 * this.dpr, btnHeight = 40 * this.dpr;\n        var btnPosX = width - btnwidth / 2 - 20 * this.dpr, btnPosY = this.mCategoryCon.y - 25 * this.dpr;\n        this.composeBtn = this.createNineButton(btnPosX + 100 * this.dpr, btnPosY, btnwidth, btnHeight, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("compose.title"), "#996600");\n        this.mCategoryScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: 0,\n            y: 60 * this.dpr,\n            width: width,\n            height: 41 * this.dpr,\n            zoom: this.scale,\n            orientation: 1,\n            dpr: this.dpr,\n            space: 28 * this.dpr,\n            selfevent: true,\n            cellupCallBack: function (gameobject) {\n                _this.onSelectSubCategoryHandler(gameobject);\n            }\n        });\n        this.mPropGridBg = this.scene.make.graphics(undefined, false);\n        this.mCategoryCon.add([this.mCategoriesBar, this.mCategoryScroll]);\n        this.add([this.mBackground, this.topBackground, this.mPropGridBg, this.mCloseBtn, this.furiAnimation, this.starCountCon, this.mCategoryCon, this.composeBtn]);\n        var propFrame = this.scene.textures.getFrame(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_icon_common_bg");\n        var capW = (propFrame.width) + 9 * this.dpr;\n        var capH = (propFrame.height) + 9 * this.dpr;\n        var tableConfig = {\n            x: 0,\n            y: 0,\n            table: {\n                width: width,\n                height: 231 * this.dpr,\n                columns: 3,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                zoom: this.scale,\n                mask: false\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new picaRender__WEBPACK_IMPORTED_MODULE_2__["ItemButton"](scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, "synthetic_icon_bg", _this.dpr, _this.scale, false);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setItemData(item, true);\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onSelectItemHandler(cell);\n            }\n        });\n        this.add(this.mPropGrid);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaFurnitureComposePanel.prototype.createNineButton = function (x, y, width, height, key, frame, text, color) {\n        var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, x, y, width, height, key, frame, text, this.dpr, 1, {\n            left: 14 * this.dpr,\n            top: 14 * this.dpr,\n            right: 15 * this.dpr,\n            bottom: 14 * this.dpr\n        });\n        if (text) {\n            btn.setTextStyle({\n                color: color,\n                fontSize: 16 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT\n            });\n            btn.setFontStyle("bold");\n        }\n        return btn;\n    };\n    PicaFurnitureComposePanel.prototype.onSelectSubCategoryHandler = function (gameobject) {\n        var category = gameobject.getData("item"); // op_def.IStrPair\n        if (category) {\n            if (this.mPreCategoryBtn)\n                this.mPreCategoryBtn.changeNormal();\n            gameobject.changeDown();\n            this.mSelectedCategeories = category;\n            this.subCategoryType = category.value;\n            this.queryPackege(false);\n            this.mPreCategoryBtn = gameobject;\n        }\n        this.mPropGrid.setT(0);\n        this.furiAnimation.clearItemDatas(true);\n        this.furiAnimation.setStarType(this.subCategoryType);\n    };\n    PicaFurnitureComposePanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(this.key + "_close");\n    };\n    PicaFurnitureComposePanel.prototype.queryPackege = function (update) {\n        if (this.mSelectedCategeories) {\n            this.render.renderEmitter(this.key + "_queryfuripackage", { type: this.subCategoryType, update: update });\n        }\n    };\n    PicaFurnitureComposePanel.prototype.onSelectItemHandler = function (cell) {\n        var item = cell.getData("item"); // op_client.ICountablePackageItem\n        if (!item)\n            return;\n        this.checkSelectItemDatas(item, true);\n    };\n    PicaFurnitureComposePanel.prototype.onComposeBtnHandler = function () {\n        if (this.mSelectedItemData && this.mSelectedItemData.length === 5) {\n            if (this.starCount < this.subCategoryType) {\n                var data = {\n                    text: [{ text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furnicompose.starpicatips"), node: undefined }]\n                };\n                this.render.mainPeer.showMediator(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICANOTICE_NAME, true, data);\n                return;\n            }\n            var ids = [];\n            for (var _i = 0, _a = this.mSelectedItemData; _i < _a.length; _i++) {\n                var data = _a[_i];\n                ids.push(data.id);\n            }\n            this.render.renderEmitter(this.key + "_queryfuricompose", ids);\n            this.furiAnimation.playComposeAnimation();\n            this.mSelectedItemData.length = 0;\n        }\n        else {\n            var data = {\n                text: [{ text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furnicompose.selecttips"), node: undefined }]\n            };\n            this.render.mainPeer.showMediator(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICANOTICE_NAME, true, data);\n        }\n    };\n    PicaFurnitureComposePanel.prototype.checkSelectItemDatas = function (data, add) {\n        if (add && this.mSelectedItemData.length === 5)\n            return;\n        var havedCount = 0;\n        var indexed = -1;\n        for (var i = 0; i < this.mSelectedItemData.length; i++) {\n            var item = this.mSelectedItemData[i];\n            if (item.indexId === data.indexId) {\n                havedCount++;\n                indexed = i;\n            }\n        }\n        if (add) {\n            // if (havedCount < data.count) {\n            if (data.count > 0) {\n                this.mSelectedItemData.push(data);\n                this.furiAnimation.setItemData(data, this.subCategoryType);\n                data.count--;\n            }\n        }\n        else {\n            if (indexed !== -1) {\n                var tempdata = this.mSelectedItemData.splice(indexed, 1)[0];\n                tempdata.count++;\n            }\n        }\n        this.mPropGrid.refresh();\n    };\n    PicaFurnitureComposePanel.prototype.onFuriComposeAnimationHandler = function (tag, data) {\n        if (tag === "remove") {\n            this.checkSelectItemDatas(data, false);\n        }\n    };\n    return PicaFurnitureComposePanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_6__["PicaBasePanel"]));\n\nvar FuriComposeAnimation = /** @class */ (function (_super) {\n    __extends(FuriComposeAnimation, _super);\n    function FuriComposeAnimation(scene, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.starImgList = [];\n        _this.itemList = [];\n        _this.indexeds = [0, 0, 0, 0, 0];\n        _this.tweens = [];\n        _this.canPlay = false;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.init();\n        _this.setSize(_this.bgring1.width, _this.bgring1.height);\n        return _this;\n    }\n    FuriComposeAnimation.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    FuriComposeAnimation.prototype.setStarType = function (starType) {\n        this.starType = starType;\n        this.bgstarLev.setFrame("synthetic_center_star" + (starType + 1));\n        this.spendStarTex.text = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furnicompose.spendstar", { name: starType });\n        this.bgstarLev.visible = true;\n    };\n    FuriComposeAnimation.prototype.setItemData = function (data, starType) {\n        this.starType = starType;\n        var indexed = -1;\n        var haveSameCount = 0;\n        for (var i = 0; i < this.indexeds.length; i++) {\n            var value = this.indexeds[i];\n            if (value === 0) {\n                if (indexed === -1)\n                    indexed = i;\n            }\n            else {\n                var item = this.itemList[i];\n                if (item.itemData.indexId === data.indexId) {\n                    haveSameCount++;\n                }\n            }\n        }\n        if (indexed !== -1 && data.count > 0) {\n            this.indexeds[indexed] = 1;\n            var item = this.itemList[indexed];\n            item.setItemData(data);\n            this.starImgList[indexed].visible = true;\n            this.playAnimation();\n            // this.spendStarTex.text = i18n.t("furnicompose.spendstar", { name: starType });\n        }\n        this.displayStarImg();\n    };\n    FuriComposeAnimation.prototype.removeItemData = function (indexed) {\n        this.indexeds[indexed] = 0;\n        var item = this.itemList[indexed];\n        if (item.itemData) {\n            if (this.send)\n                this.send.runWith(["remove", item.itemData]);\n            item.setItemData(undefined);\n        }\n        this.displayStarImg();\n        var canPlay = false;\n        for (var _i = 0, _a = this.indexeds; _i < _a.length; _i++) {\n            var value = _a[_i];\n            if (value === 1)\n                canPlay = true;\n        }\n        if (canPlay) {\n            this.playAnimation();\n        }\n        else {\n            this.stopAnimation();\n        }\n    };\n    FuriComposeAnimation.prototype.clearItemDatas = function (send) {\n        for (var i = 0; i < this.indexeds.length; i++) {\n            this.indexeds[i] = 0;\n            var item = this.itemList[i];\n            if (item.itemData) {\n                if (send && this.send)\n                    this.send.runWith(["remove", item.itemData]);\n                item.setItemData(undefined);\n            }\n        }\n        this.stopTweens();\n        this.displayStarImg();\n        this.stopAnimation();\n        this.layoutItemsPosition();\n    };\n    FuriComposeAnimation.prototype.playComposeAnimation = function () {\n        var duration = 200;\n        for (var _i = 0, _a = this.itemList; _i < _a.length; _i++) {\n            var item = _a[_i];\n            this.playMove(item, 0, 0, duration);\n        }\n    };\n    FuriComposeAnimation.prototype.update = function () {\n        if (this.canPlay) {\n            this.bgring1.rotation += 0.04;\n            this.bgring2.rotation -= 0.015;\n            this.bgring3.rotation += 0.02;\n        }\n    };\n    FuriComposeAnimation.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.stopAnimation();\n        this.stopTweens();\n    };\n    FuriComposeAnimation.prototype.init = function () {\n        this.bgring1 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_ring_1" });\n        this.bgring2 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_ring_2" });\n        this.bgring3 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_ring_3" });\n        this.bgring4 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_ring_4" });\n        this.bgring5 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_ring_5" });\n        this.bgring6 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_ring_6" });\n        this.bgringstar = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_star_default" });\n        this.bgstarLev = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_center_star2" });\n        this.bglightstar = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_star_illume_5" });\n        this.bglightstar.y = 3 * this.dpr;\n        this.spendStarTex = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, 0, this.bgring1.height * 0.5 + 15 * this.dpr, "", utils__WEBPACK_IMPORTED_MODULE_5__["UIHelper"].whiteStyle(this.dpr, 11)).setOrigin(0.5);\n        this.add([this.bgring1, this.bgring2, this.bgring3, this.bgring4, this.bgring5, this.bgring6, this.bgringstar, this.bgstarLev, this.bglightstar, this.spendStarTex]);\n        this.createStarImg();\n        this.createItem();\n        this.bglightstar.visible = false;\n        this.bgstarLev.visible = false;\n    };\n    FuriComposeAnimation.prototype.createStarImg = function () {\n        var angle = Math.PI * 2 / 5 - 0.0096;\n        for (var i = 0; i < 5; i++) {\n            var star = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_star_illume_1" });\n            star.rotation = -angle * i + 0.0005;\n            this.starImgList.push(star);\n            star.visible = false;\n            star.y = 3 * this.dpr;\n            star.x = -2 * this.dpr;\n        }\n        this.add(this.starImgList);\n    };\n    FuriComposeAnimation.prototype.createItem = function () {\n        for (var i = 0; i < 5; i++) {\n            var item = new FuriComposeItem(this.scene, this.dpr, this.zoom);\n            this.itemList.push(item);\n            item.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onItemHandler, this);\n        }\n        this.add(this.itemList);\n        this.layoutItemsPosition();\n    };\n    FuriComposeAnimation.prototype.layoutItemsPosition = function () {\n        var angle = 3 * Math.PI / 2 - (Math.PI * 2 / 5);\n        var radiu = 108 * this.dpr;\n        for (var i = 0; i < this.itemList.length; i++) {\n            var item = this.itemList[i];\n            var tempangle = angle - (Math.PI * 2 / 5) * i;\n            item.y = Math.sin(tempangle) * radiu;\n            item.x = Math.cos(tempangle) * radiu;\n        }\n    };\n    FuriComposeAnimation.prototype.displayStarImg = function () {\n        var havedCount = 0;\n        for (var i = 0; i < this.indexeds.length; i++) {\n            var value = this.indexeds[i];\n            this.starImgList[i].visible = value === 0 ? false : true;\n            if (value === 0) {\n                this.starImgList[i].visible = false;\n            }\n            else {\n                this.starImgList[i].visible = true;\n                havedCount++;\n            }\n        }\n        if (havedCount === 5) {\n            this.bglightstar.visible = true;\n            for (var _i = 0, _a = this.starImgList; _i < _a.length; _i++) {\n                var starimg = _a[_i];\n                starimg.visible = false;\n            }\n        }\n        else {\n            this.bglightstar.visible = false;\n        }\n    };\n    FuriComposeAnimation.prototype.playAnimation = function () {\n        this.canPlay = true;\n        if (!this.timerID) {\n            this.timerID = setInterval(this.update.bind(this), 20);\n        }\n    };\n    FuriComposeAnimation.prototype.stopAnimation = function () {\n        this.canPlay = false;\n        this.bgring1.rotation = 0;\n        this.bgring2.rotation = 0;\n        this.bgring3.rotation = 0;\n        if (this.timerID) {\n            this.timerID = clearInterval(this.timerID);\n            this.timerID = undefined;\n        }\n    };\n    FuriComposeAnimation.prototype.onItemHandler = function (pointer, gameobject) {\n        var indexed = this.itemList.indexOf(gameobject);\n        this.removeItemData(indexed);\n    };\n    FuriComposeAnimation.prototype.playMove = function (tagert, x, y, duration) {\n        var _this = this;\n        if (!this.scene)\n            return;\n        var tween = this.scene.tweens.add({\n            targets: tagert,\n            x: { value: 0 },\n            y: { value: 3 * this.dpr },\n            ease: "Linear",\n            duration: duration,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                _this.clearItemDatas(false);\n            },\n        });\n        this.tweens.push(tween);\n    };\n    FuriComposeAnimation.prototype.stopTweens = function () {\n        for (var _i = 0, _a = this.tweens; _i < _a.length; _i++) {\n            var tween = _a[_i];\n            tween.stop();\n            tween.remove();\n        }\n        this.tweens.length = 0;\n    };\n    return FuriComposeAnimation;\n}(Phaser.GameObjects.Container));\nvar FuriComposeItem = /** @class */ (function (_super) {\n    __extends(FuriComposeItem, _super);\n    function FuriComposeItem(scene, dpr, zoom) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.init();\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.enable = true;\n        return _this;\n    }\n    FuriComposeItem.prototype.setItemData = function (data) {\n        this.itemData = data;\n        this.lightbg.alpha = 0;\n        this.icon.alpha = 0;\n        if (!data) {\n            this.icon.visible = false;\n        }\n        else {\n            var url = utils__WEBPACK_IMPORTED_MODULE_5__["Url"].getOsdRes(data.texturePath);\n            this.icon.load(url);\n            this.icon.visible = true;\n            this.playAlphaAni([this.icon, this.lightbg]);\n        }\n    };\n    FuriComposeItem.prototype.init = function () {\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_default" });\n        this.lightbg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].effectcommon, frame: "synthetic_Light" });\n        this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, 0);\n        this.icon.scale = this.dpr / this.zoom;\n        this.add([this.bg, this.lightbg, this.icon]);\n        this.lightbg.alpha = 0;\n        this.icon.alpha = 0;\n    };\n    FuriComposeItem.prototype.playAlphaAni = function (target) {\n        if (!this.scene)\n            return;\n        var tween = this.scene.tweens.add({\n            targets: target,\n            alpha: {\n                from: 0,\n                to: 1\n            },\n            ease: "Linear",\n            duration: 300,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n            },\n        });\n    };\n    return FuriComposeItem;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"]));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaFurnitureCompose/PicaFurnitureComposePanel.ts?')},"./src/pica/render/ui/PicaGiftEffect/PicaGiftEffectPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaGiftEffectPanel", function() { return PicaGiftEffectPanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _PicaGiftLaterctPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PicaGiftLaterctPanel */ "./src/pica/render/ui/PicaGiftEffect/PicaGiftLaterctPanel.ts");\n/* harmony import */ var _PicaGiftPlayerPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PicaGiftPlayerPanel */ "./src/pica/render/ui/PicaGiftEffect/PicaGiftPlayerPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaGiftEffectPanel = /** @class */ (function (_super) {\n    __extends(PicaGiftEffectPanel, _super);\n    function PicaGiftEffectPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAGIFTEFFECT_NAME;\n        return _this;\n    }\n    PicaGiftEffectPanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content.x = width / 2;\n        this.content.y = height / 2;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(width * this.scale, height * this.scale);\n    };\n    PicaGiftEffectPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n    };\n    PicaGiftEffectPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "gifteffect/gifteffect.png", "gifteffect/gifteffect.json");\n        _super.prototype.preload.call(this);\n    };\n    PicaGiftEffectPanel.prototype.init = function () {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(width, height);\n        this.add(this.content);\n        this.laterctPanel = new _PicaGiftLaterctPanel__WEBPACK_IMPORTED_MODULE_2__["PicaGiftLaterctPanel"](this.scene, this.mWorld, width, height, this.key, this.dpr);\n        this.playerPanel = new _PicaGiftPlayerPanel__WEBPACK_IMPORTED_MODULE_3__["PicaGiftPlayerPanel"](this.scene, this.mWorld, width, height, this.key, this.dpr);\n        this.content.add(this.laterctPanel);\n        this.content.add(this.playerPanel);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n        this.play(undefined);\n    };\n    PicaGiftEffectPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaGiftEffectPanel.prototype.play = function (data) {\n        if (!this.mInitialized)\n            return;\n        this.laterctPanel.play(data);\n        this.playerPanel.play(data);\n    };\n    return PicaGiftEffectPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaGiftEffect/PicaGiftEffectPanel.ts?')},"./src/pica/render/ui/PicaGiftEffect/PicaGiftLateralItem.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaGiftLateralItem", function() { return PicaGiftLateralItem; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaGiftLateralItem = /** @class */ (function (_super) {\n    __extends(PicaGiftLateralItem, _super);\n    function PicaGiftLateralItem(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.giftCount = 0;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.bg = scene.make.image({ key: key, frame: "gift_bg" });\n        _this.add(_this.bg);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.headicon = scene.make.image({ key: key, frame: "gift_head" });\n        _this.headicon.x = -_this.width * 0.5 + _this.headicon.width * 0.5 + 2 * dpr;\n        _this.add(_this.headicon);\n        _this.titletext = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](scene, 0, 0, "", utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].whiteStyle(dpr)).setOrigin(0);\n        _this.titletext.x = _this.headicon.x + _this.headicon.width * 0.5 + 10 * dpr;\n        _this.titletext.y = -_this.height * 0.5 + 2 * dpr;\n        _this.add(_this.titletext);\n        _this.giftIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, _this.width * 0.5 - 50 * dpr, 0);\n        _this.add(_this.giftIcon);\n        _this.countTex = _this.scene.make.text({\n            x: _this.width * 0.5 - 5 * dpr, y: 0, text: "", padding: {\n                left: 0,\n                right: 10 * dpr,\n            },\n            style: { fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, fontSize: 28 * dpr, color: "#FCF863" }\n        }).setFontStyle("bold italic").setStroke("#C25E0D", 2 * dpr).setOrigin(0.5);\n        _this.add(_this.countTex);\n        return _this;\n    }\n    PicaGiftLateralItem.prototype.setItemData = function (compl) {\n        this.compl = compl;\n        this.titletext.setText("" + "\\n" + utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.give") + "[color=#FFFF41]" + "" + "[/color]");\n        // this.giftIcon\n        this.countTex.text = "";\n        this.giftCount = Math.floor(Math.random() * 50);\n    };\n    PicaGiftLateralItem.prototype.playMove = function (from, to) {\n        var _this = this;\n        var tween = this.scene.tweens.add({\n            targets: this,\n            x: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: 300,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                _this.playCount();\n            },\n        });\n    };\n    PicaGiftLateralItem.prototype.playCount = function () {\n        var _this = this;\n        var temp = this.getCountTweenData(this.giftCount);\n        var tempcount = 0;\n        var addNum = temp.acc === 0 ? 1 : 0;\n        var tweenFun = function () {\n            addNum += temp.acc;\n            tempcount += addNum;\n            if (tempcount > _this.giftCount)\n                tempcount = _this.giftCount;\n            _this.countTex.text = "x" + tempcount;\n            var tween = _this.scene.tweens.add({\n                targets: _this.countTex,\n                scale: {\n                    from: 0.5,\n                    to: 1\n                },\n                ease: "Linear",\n                duration: temp.duration,\n                onComplete: function () {\n                    tween.stop();\n                    tween.remove();\n                    if (tempcount < _this.giftCount) {\n                        setTimeout(function () {\n                            tweenFun();\n                        }, temp.interval);\n                    }\n                    else {\n                        setTimeout(function () {\n                            _this.playAlpha();\n                        }, 1000);\n                    }\n                },\n            });\n        };\n        tweenFun();\n    };\n    PicaGiftLateralItem.prototype.playAlpha = function () {\n        var _this = this;\n        var tween = this.scene.tweens.add({\n            targets: this,\n            alpha: {\n                from: 1,\n                to: 0\n            },\n            ease: "Linear",\n            duration: 200,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                if (_this.compl)\n                    _this.compl.run();\n                _this.destroy();\n            },\n        });\n    };\n    PicaGiftLateralItem.prototype.getCountTweenData = function (count) {\n        var data;\n        if (count < 10) {\n            data = { duration: 300, interval: 20, acc: 0 };\n        }\n        else if (count >= 10 && count < 30) {\n            data = { duration: 300, interval: 20, acc: 1 };\n        }\n        else if (count >= 30) {\n            data = { duration: 300, interval: 20, acc: 2 };\n        }\n        return data;\n    };\n    return PicaGiftLateralItem;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaGiftEffect/PicaGiftLateralItem.ts?')},"./src/pica/render/ui/PicaGiftEffect/PicaGiftLaterctPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaGiftLaterctPanel", function() { return PicaGiftLaterctPanel; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _PicaGiftLateralItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaGiftLateralItem */ "./src/pica/render/ui/PicaGiftEffect/PicaGiftLateralItem.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar PicaGiftLaterctPanel = /** @class */ (function (_super) {\n    __extends(PicaGiftLaterctPanel, _super);\n    function PicaGiftLaterctPanel(scene, render, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.render = render;\n        _this.giftQueue = [];\n        _this.isPlaying = false;\n        _this.setSize(width, height);\n        _this.key = key;\n        _this.dpr = dpr;\n        return _this;\n    }\n    PicaGiftLaterctPanel.prototype.play = function (data) {\n        this.giftQueue = this.giftQueue.concat(new Array(30));\n        this.playNext();\n    };\n    PicaGiftLaterctPanel.prototype.playNext = function () {\n        var _this = this;\n        if (this.isPlaying)\n            return;\n        if (this.giftQueue.length > 0) {\n            var data = this.giftQueue.shift();\n            var item = new _PicaGiftLateralItem__WEBPACK_IMPORTED_MODULE_1__["PicaGiftLateralItem"](this.scene, this.key, this.dpr);\n            item.setItemData(utils__WEBPACK_IMPORTED_MODULE_0__["Handler"].create(this, function () {\n                _this.isPlaying = false;\n                _this.playNext();\n            }));\n            var from = -this.width * 0.5 - item.width * 0.5 - 10 * this.dpr;\n            var to = -this.width * 0.5 + item.width * 0.5 + 10 * this.dpr;\n            item.x = from;\n            item.y = this.height * 0.5 - 100 * this.dpr;\n            item.playMove(from, to);\n            this.add(item);\n            this.isPlaying = true;\n        }\n    };\n    return PicaGiftLaterctPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaGiftEffect/PicaGiftLaterctPanel.ts?')},"./src/pica/render/ui/PicaGiftEffect/PicaGiftPlayerPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaGiftPlayerPanel", function() { return PicaGiftPlayerPanel; });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar PicaGiftPlayerPanel = /** @class */ (function (_super) {\n    __extends(PicaGiftPlayerPanel, _super);\n    function PicaGiftPlayerPanel(scene, render, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.render = render;\n        _this.giftQueue = [];\n        _this.isPlaying = false;\n        _this.setSize(width, height);\n        _this.key = key;\n        _this.dpr = dpr;\n        return _this;\n    }\n    PicaGiftPlayerPanel.prototype.play = function (data) {\n        this.giftQueue.push(new Array(30));\n        this.playNext();\n    };\n    PicaGiftPlayerPanel.prototype.playNext = function () {\n        // if (this.isPlaying) return;\n        // if (this.giftQueue.length > 0) {\n        //     const data = this.giftQueue.shift();\n        //     const item = new PicaGiftLateralItem(this.scene, this.key, this.dpr);\n        //     item.setItemData(Handler.create(this, () => {\n        //         this.isPlaying = false;\n        //         this.playNext();\n        //     }));\n        //     item.playMove(-this.width * 0.5 - item.width * 0.5, -this.width * 0.5 + item.width * 0.5);\n        //     this.add(item);\n        //     this.isPlaying = true;\n        // }\n    };\n    return PicaGiftPlayerPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaGiftEffect/PicaGiftPlayerPanel.ts?')},"./src/pica/render/ui/PicaHandheld/PicaHandheldPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaHandheldPanel", function() { return PicaHandheldPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaHandheldPanel = /** @class */ (function (_super) {\n    __extends(PicaHandheldPanel, _super);\n    function PicaHandheldPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.isExtendsGrid = false;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAHANDHELD_NAME;\n        return _this;\n    }\n    PicaHandheldPanel.prototype.resize = function (w, h) {\n        var scale = this.scale;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.setSize(width, height);\n        this.updateLayout();\n        this.isExtendsGrid = false;\n    };\n    PicaHandheldPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.addListen();\n        this.updateData();\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAHANDHELD_NAME + "_handheldlist");\n    };\n    PicaHandheldPanel.prototype.hide = function () {\n        this.mShow = false;\n        this.removeListen();\n        _super.prototype.hide.call(this);\n    };\n    PicaHandheldPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.handeldEqiped.addListen();\n    };\n    PicaHandheldPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.handeldEqiped.removeListen();\n    };\n    PicaHandheldPanel.prototype.destroy = function () {\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    PicaHandheldPanel.prototype.setEqipedDatas = function (content) {\n        var datas = content.handheld;\n        datas = datas.sort(function (a, b) {\n            if (a.latestUse >= b.latestUse)\n                return 1;\n            else\n                return -1;\n        });\n        var useArr = datas.splice(0, 3);\n        datas = datas.sort(function (a, b) {\n            if (a.recommended >= b.recommended)\n                return 1;\n            else\n                return -1;\n        });\n        datas = useArr.concat(datas);\n        var emptyData = { id: "empty_handed", count: 0 };\n        var curr;\n        if (content.currentHandheldId === "" || !content.currentHandheldId) {\n            curr = emptyData;\n        }\n        else {\n            for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {\n                var data = datas_1[_i];\n                if (data.id === content.currentHandheldId) {\n                    curr = data;\n                    break;\n                }\n            }\n        }\n        datas.unshift(emptyData);\n        this.handeldEqiped.setItemData(curr);\n        if (this.isExtendsGrid) {\n            var len = 14;\n            var templen = len - datas.length;\n            var alldata = templen > 0 ? datas.concat(new Array(templen)) : datas;\n            this.mPropGrid.setItems(alldata);\n            if (curr) {\n                var cells = this.mPropGrid.getCells();\n                for (var _a = 0, cells_1 = cells; _a < cells_1.length; _a++) {\n                    var cell = cells_1[_a];\n                    if (cell && cell.container) {\n                        var container = cell.container;\n                        if (container.itemData === curr) {\n                            container.isSelect = true;\n                            this.curHandheldItem = cell;\n                        }\n                        else\n                            container.isSelect = false;\n                    }\n                }\n            }\n        }\n    };\n    PicaHandheldPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "hand_equp/hand_equp.png", "hand_equp/hand_equp.json");\n        _super.prototype.preload.call(this);\n    };\n    PicaHandheldPanel.prototype.init = function () {\n        var _this = this;\n        if (this.mInitialized)\n            return;\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        this.gridContent = this.scene.make.container(undefined, false);\n        this.add(this.gridContent);\n        this.gridContent.setSize(w, 150 * this.dpr);\n        this.gridContent.x = w * 0.5;\n        this.gridContent.y = h - this.gridContent.height * 0.5 - 200 * this.dpr;\n        var mBackground = this.scene.make.graphics(undefined, false);\n        mBackground.fillStyle(0x333333, 0.5);\n        mBackground.fillRect(-w * 0.5, -this.gridContent.height * 0.5, w, 150 * this.dpr);\n        this.gridContent.add(mBackground);\n        this.handeldEqiped = new HandheldEqiped(this.scene, 0, 0, this.key, this.dpr);\n        this.handeldEqiped.setClickHandler(new utils__WEBPACK_IMPORTED_MODULE_1__["Handler"](this, this.onHandheldEqipedHandler), new utils__WEBPACK_IMPORTED_MODULE_1__["Handler"](this, this.onShortcutHandler));\n        this.add(this.handeldEqiped);\n        var propFrame = this.scene.textures.getFrame(this.key, "equp_bg");\n        var cellWidth = propFrame.width + 10 * this.dpr;\n        var cellHeight = propFrame.height + 10 * this.dpr;\n        var propGridConfig = {\n            x: 0,\n            y: 0,\n            table: {\n                width: w - 20 * this.dpr,\n                height: 120 * this.dpr,\n                columns: 2,\n                cellWidth: cellWidth,\n                cellHeight: cellHeight,\n                reuseCellContainer: true,\n                cellOriginX: 0.5,\n                cellOriginY: 0.5,\n                zoom: this.scale\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new HandheldItem(scene, 0, 0, _this.key, _this.dpr);\n                }\n                cellContainer.setItemData(item);\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, propGridConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on("cellTap", function (cell) {\n            _this.onSelectItemHandler(cell);\n        });\n        this.gridContent.add(this.mPropGrid);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaHandheldPanel.prototype.updateData = function () {\n        this.updateLayout();\n    };\n    PicaHandheldPanel.prototype.updateLayout = function () {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var x = width - this.handeldEqiped.width * 0.5 - 8 * this.dpr;\n        var y = 0;\n        this.gridContent.y = height - this.gridContent.height * 0.5;\n        if (!this.isExtendsGrid) {\n            y = height - this.handeldEqiped.height * 0.5 - 10 * this.dpr;\n            this.gridContent.visible = false;\n            this.handeldEqiped.waiting();\n            if (!this.handeldEqiped.isEmptyHanded)\n                this.handeldEqiped.showShortcut();\n        }\n        else {\n            y = height - this.handeldEqiped.height * 0.5 - this.gridContent.height;\n            this.gridContent.visible = true;\n            this.mPropGrid.resetMask();\n            this.handeldEqiped.normal();\n            this.handeldEqiped.hideShortcut();\n        }\n        this.handeldEqiped.setPosition(x, y);\n    };\n    PicaHandheldPanel.prototype.onSelectItemHandler = function (item) {\n        var data = item.itemData;\n        if (!data)\n            return;\n        if (this.curHandheldItem)\n            this.curHandheldItem.isSelect = false;\n        item.isSelect = true;\n        this.curHandheldItem = item;\n        if (item.isEmptyHanded) {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAHANDHELD_NAME + "_clearhandheld");\n        }\n        else {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAHANDHELD_NAME + "_changehandheld", data.id);\n        }\n    };\n    PicaHandheldPanel.prototype.onHandheldEqipedHandler = function (data) {\n        this.isExtendsGrid = !this.isExtendsGrid;\n        if (!this.isExtendsGrid) {\n            this.mPropGrid.setItems([]);\n            this.gridContent.visible = false;\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAHANDHELD_NAME + "_openeqiped", false);\n        }\n        else {\n            this.gridContent.visible = true;\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAHANDHELD_NAME + "_handheldlist");\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAHANDHELD_NAME + "_openeqiped", true);\n        }\n        this.updateLayout();\n    };\n    PicaHandheldPanel.prototype.onShortcutHandler = function (data) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAHANDHELD_NAME + "_clearhandheld");\n    };\n    return PicaHandheldPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["BasePanel"]));\n\nvar HandheldItem = /** @class */ (function (_super) {\n    __extends(HandheldItem, _super);\n    function HandheldItem(scene, x, y, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.mIsSelect = false;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.bg = _this.scene.make.image({ key: key, frame: "equp_bg" });\n        _this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.selectbg = _this.scene.make.image({ key: key, frame: "click_bg" });\n        _this.selectbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["DynamicImage"](scene, 0, 0);\n        _this.add([_this.bg, _this.selectbg, _this.icon]);\n        _this.setSize(_this.selectbg.width, _this.selectbg.height);\n        _this.isSelect = false;\n        return _this;\n    }\n    HandheldItem.prototype.setItemData = function (data) {\n        var _this = this;\n        this.itemData = data;\n        if (!data) {\n            this.icon.visible = false;\n            this.selectbg.visible = false;\n            return;\n        }\n        this.icon.visible = true;\n        this.selectbg.visible = this.mIsSelect;\n        if (this.isEmptyHanded) {\n            this.icon.setTexture(this.key, "empty_handed");\n        }\n        else {\n            var display = data.display;\n            var url = utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(display.texturePath);\n            this.icon.load(url, this, function () {\n                _this.icon.scale = 1;\n                _this.icon.displayWidth = 34 * _this.dpr;\n                _this.icon.scaleY = _this.icon.scaleX;\n            });\n        }\n    };\n    Object.defineProperty(HandheldItem.prototype, "isSelect", {\n        get: function () {\n            return this.mIsSelect;\n        },\n        set: function (value) {\n            this.mIsSelect = value;\n            this.selectbg.visible = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HandheldItem.prototype, "isEmptyHanded", {\n        get: function () {\n            if (this.itemData && this.itemData.id === "empty_handed")\n                return true;\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return HandheldItem;\n}(Phaser.GameObjects.Container));\nvar HandheldEqiped = /** @class */ (function (_super) {\n    __extends(HandheldEqiped, _super);\n    function HandheldEqiped(scene, x, y, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.isExtendsGrid = false;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.bg = _this.scene.make.image({ key: key, frame: "button_h" });\n        _this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.shortcutCon = _this.scene.make.container(undefined, false);\n        _this.shortcutbg = _this.scene.make.image({ key: key, frame: "superscript_h" });\n        _this.shortcutbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.shortcutIcon = _this.scene.make.image({ key: key, frame: "hand" });\n        _this.shortcutIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.shortcutCon.add([_this.shortcutbg, _this.shortcutIcon]);\n        var shortcutWidth = 40 * dpr;\n        _this.shortcutCon.setSize(shortcutWidth, shortcutWidth);\n        _this.shortcutbg.x = -_this.shortcutCon.width * 0.5 + _this.shortcutbg.width * 0.5 - 5 * dpr;\n        _this.shortcutbg.y = _this.shortcutCon.height * 0.5 - _this.shortcutbg.height * 0.5 + 5 * dpr;\n        _this.shortcutIcon.x = _this.shortcutbg.x;\n        _this.shortcutIcon.y = _this.shortcutbg.y;\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["DynamicImage"](scene, 0, 0);\n        _this.icon.setTexture(_this.key, "empty_handed");\n        _this.shortcutCon.on("pointerup", _this.onShortcutHandler, _this);\n        _this.add([_this.bg, _this.icon, _this.shortcutCon]);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.shortcutCon.setPosition(_this.width * 0.5 + shortcutWidth * 0.5 - 20 * dpr, -_this.height * 0.5 - shortcutWidth * 0.5 + 15 * dpr);\n        _this.on("pointerup", _this.onClickHandler, _this);\n        _this.hideShortcut();\n        return _this;\n    }\n    HandheldEqiped.prototype.normal = function () {\n        this.bg.setFrame("button_h");\n        this.setChildAlpha(1);\n    };\n    HandheldEqiped.prototype.waiting = function () {\n        this.bg.setFrame("button_h");\n        this.setChildAlpha(0.5);\n    };\n    HandheldEqiped.prototype.setItemData = function (data) {\n        var _this = this;\n        this.itemData = data;\n        if (!this.isEmptyHanded) {\n            var display = data.display;\n            var url = utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(display.texturePath);\n            this.icon.load(url, this, function () {\n                _this.icon.displayWidth = 24 * _this.dpr;\n                _this.icon.scaleY = _this.icon.scaleX;\n            });\n            if (!this.isExtendsGrid)\n                this.showShortcut();\n        }\n        else {\n            this.icon.setScale(1);\n            this.icon.setTexture(this.key, "empty_handed");\n            this.hideShortcut();\n        }\n    };\n    HandheldEqiped.prototype.addListen = function () {\n        this.setInteractive();\n        this.shortcutCon.setInteractive();\n    };\n    HandheldEqiped.prototype.removeListen = function () {\n        this.disableInteractive();\n        this.shortcutCon.disableInteractive();\n    };\n    HandheldEqiped.prototype.setClickHandler = function (cliclhandler, shortcutHandler) {\n        this.clickHandler = cliclhandler;\n        this.shortcutHandler = shortcutHandler;\n    };\n    HandheldEqiped.prototype.setChildAlpha = function (alpha) {\n        this.bg.setAlpha(alpha);\n        this.icon.setAlpha(alpha);\n        this.shortcutbg.setAlpha(alpha);\n        this.shortcutIcon.setAlpha(alpha);\n    };\n    HandheldEqiped.prototype.hideShortcut = function () {\n        this.shortcutCon.visible = false;\n        this.shortcutCon.disableInteractive();\n    };\n    HandheldEqiped.prototype.showShortcut = function () {\n        this.shortcutCon.visible = true;\n        this.shortcutCon.setInteractive();\n    };\n    Object.defineProperty(HandheldEqiped.prototype, "isCanShowShortcut", {\n        get: function () {\n            if (!this.isEmptyHanded) {\n                return true;\n            }\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HandheldEqiped.prototype, "isEmptyHanded", {\n        get: function () {\n            if (!this.itemData || this.itemData.id === "empty_handed")\n                return true;\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    HandheldEqiped.prototype.onShortcutHandler = function () {\n        if (this.shortcutHandler)\n            this.shortcutHandler.runWith(this.itemData);\n    };\n    HandheldEqiped.prototype.onClickHandler = function () {\n        this.isExtendsGrid = !this.isExtendsGrid;\n        if (this.clickHandler)\n            this.clickHandler.runWith(this.itemData);\n    };\n    return HandheldEqiped;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaHandheld/PicaHandheldPanel.ts?')},"./src/pica/render/ui/PicaHouse/PicaHouseInfoPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaHouseInfoPanel", function() { return PicaHouseInfoPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaHouseInfoPanel = /** @class */ (function (_super) {\n    __extends(PicaHouseInfoPanel, _super);\n    function PicaHouseInfoPanel(scene, x, y, width, height, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.setSize(width, height);\n        _this.createAttribute();\n        return _this;\n    }\n    PicaHouseInfoPanel.prototype.setAttributeData = function (data, isSelf) {\n        this.roomname.setTextInfo(utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("room_info.roomname"), data.name);\n        var level = 0;\n        var curExp = 0;\n        var nexExp = 0;\n        if (data.roomLevel) {\n            level = data.roomLevel.level;\n            curExp = data.roomLevel.currentLevelExp ? data.roomLevel.currentLevelExp : 0;\n            nexExp = data.roomLevel.nextLevelExp ? data.roomLevel.nextLevelExp : 0;\n        }\n        this.roomlevel.setImageInfo(utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("room_info.roomlevel"), picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, this.getLevelImgs(level));\n        var expvalue = "[color=#0D8288]" + curExp + "[/color]/" + nexExp;\n        this.expvalue.setTextInfo(utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("room_info.expvalue"), expvalue);\n        this.popvalue.setTextInfo(utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("room_info.popvalue"), data.popularity + "");\n        this.goodvalue.setTextInfo(utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("room_info.goodvalue"), data.praise + "");\n        if (data.roomType === "store") {\n            this.compviness.visible = true;\n            this.turnover.visible = true;\n            this.deprecia.visible = true;\n            this.compviness.setTextInfo(utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("room_info.compveness"), data.competitiveness + "");\n            var turnovervalue = "";\n            if (data.turnoverProp.tempValue > 0) {\n                turnovervalue = data.turnoverProp.value + "(+" + data.turnoverProp.tempValue + ")";\n            }\n            else if (data.turnoverProp.tempValue < 0) {\n                turnovervalue = data.turnoverProp.value + "[color=#ff0000](" + data.turnoverProp.tempValue + ")[/color]";\n            }\n            else {\n                turnovervalue = "" + data.turnoverProp.value;\n            }\n            this.turnover.setTextInfo(utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("room_info.turnover"), turnovervalue);\n            this.deprecia.setTextInfo(utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("room_info.depreciation"), Math.floor(data.undepreciated * 100) + "%");\n            this.add([this.compviness, this.turnover, this.deprecia, this.helptips]);\n            if (isSelf) {\n                this.deprecia.add([this.renovateBtn, this.help]);\n            }\n            else {\n                this.deprecia.remove([this.renovateBtn, this.help]);\n            }\n        }\n        else {\n            this.compviness.visible = false;\n            this.turnover.visible = false;\n            this.deprecia.visible = false;\n            this.remove([this.compviness, this.turnover, this.deprecia, this.helptips]);\n        }\n    };\n    PicaHouseInfoPanel.prototype.setHandler = function (equirements) {\n        this.equirementsHandler = equirements;\n    };\n    PicaHouseInfoPanel.prototype.createAttribute = function () {\n        var posy = -this.height * 0.5 + 10 * this.dpr;\n        var itemHeight = 20 * this.dpr;\n        var itemWidth = this.width;\n        var space = 20 * this.dpr + itemHeight;\n        this.roomname = new HouseAttributeValue(this.scene, 0, posy, itemWidth, itemHeight, this.dpr);\n        posy += space;\n        this.roomlevel = new HouseAttributeValue(this.scene, 0, posy, itemWidth, itemHeight, this.dpr);\n        posy += space;\n        this.expvalue = new HouseAttributeValue(this.scene, 0, posy, itemWidth, itemHeight, this.dpr);\n        posy += space;\n        this.popvalue = new HouseAttributeValue(this.scene, 0, posy, itemWidth, itemHeight, this.dpr);\n        posy += space;\n        this.goodvalue = new HouseAttributeValue(this.scene, 0, posy, itemWidth, itemHeight, this.dpr);\n        posy += space;\n        this.compviness = new HouseAttributeValue(this.scene, 0, posy, itemWidth, itemHeight, this.dpr);\n        posy += space;\n        this.turnover = new HouseAttributeValue(this.scene, 0, posy, itemWidth, itemHeight, this.dpr);\n        posy += space;\n        this.deprecia = new HouseAttributeValue(this.scene, 0, posy, itemWidth, itemHeight, this.dpr);\n        this.renovateBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "order_yellow_butt", "order_yellow_butt", utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("room_info.renovate"));\n        this.renovateBtn.scale = 1.1;\n        this.renovateBtn.setTextStyle({ fontSize: 12 * this.dpr, color: "#ED7814" });\n        this.renovateBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onRenovateHandler, this);\n        this.renovateBtn.x = this.width * 0.5 - 60 * this.dpr;\n        this.help = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, "icon_tips", "icon_tips");\n        this.help.x = this.width * 0.5 - 20 * this.dpr;\n        this.help.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onHelpHandler, this);\n        this.deprecia.add([this.renovateBtn, this.help]);\n        this.helptips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["ItemInfoTips"](this.scene, 140 * this.dpr, 46 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, "tips_bg", this.dpr);\n        this.helptips.x = 60 * this.dpr;\n        this.helptips.y = this.deprecia.y - 20 * this.dpr;\n        this.helptips.setText(utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("room_info.helptips"), 1);\n        this.helptips.setInvalidArea(utils__WEBPACK_IMPORTED_MODULE_1__["Tool"].getRectangle(this.help, this.scene));\n        this.helptips.setVisible(false);\n        this.add([this.roomname, this.roomlevel, this.expvalue, this.popvalue, this.goodvalue]);\n    };\n    PicaHouseInfoPanel.prototype.onRenovateHandler = function () {\n        if (this.equirementsHandler)\n            this.equirementsHandler.run();\n    };\n    PicaHouseInfoPanel.prototype.onHelpHandler = function () {\n        this.helptips.setVisible(!this.helptips.visible);\n    };\n    PicaHouseInfoPanel.prototype.getLevelImgs = function (level) {\n        var power = 4;\n        level = level ? level : 0;\n        var imgs = [];\n        var bearNum = Math.floor(level / Math.pow(power, 3));\n        var value0 = level % Math.pow(power, 3);\n        var sunNum = Math.floor(value0 / Math.pow(power, 2));\n        var value1 = value0 % Math.pow(power, 2);\n        var moon = Math.floor((value1) / Math.pow(power, 1));\n        var value2 = value1 % Math.pow(power, 1);\n        var star = value2;\n        for (var i = 0; i < bearNum; i++) {\n            imgs.push("bear");\n        }\n        for (var i = 0; i < sunNum; i++) {\n            imgs.push("sun");\n        }\n        for (var i = 0; i < moon; i++) {\n            imgs.push("moon");\n        }\n        for (var i = 0; i < star; i++) {\n            imgs.push("star");\n        }\n        if (level === 0)\n            imgs.push("star");\n        return imgs;\n    };\n    PicaHouseInfoPanel.prototype.getpopImgs = function () {\n        return ["popularity", "popularity", "popularity", "popularity", "popularity"];\n    };\n    PicaHouseInfoPanel.prototype.getgoodImgs = function () {\n        return ["good", "good", "good", "good1", "good1"];\n    };\n    return PicaHouseInfoPanel;\n}(Phaser.GameObjects.Container));\n\nvar HouseAttributeValue = /** @class */ (function (_super) {\n    __extends(HouseAttributeValue, _super);\n    function HouseAttributeValue(scene, x, y, width, height, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.setSize(width, height);\n        _this.nameText = _this.scene.make.text({\n            x: -width * 0.5 + 15 * dpr, y: 0, text: "",\n            style: { fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT, fontSize: 14 * dpr, color: "#FFC51A" }\n        }).setOrigin(0, 0.5).setResolution(dpr);\n        _this.valueText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, 0, 0, "", {\n            color: "#000000",\n            fontSize: 13 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT,\n        }).setOrigin(0, 0.5).setResolution(dpr);\n        _this.imgCon = _this.scene.make.container(undefined, false);\n        _this.imgCon.x = 10 * dpr;\n        _this.add([_this.nameText, _this.valueText, _this.imgCon]);\n        return _this;\n    }\n    HouseAttributeValue.prototype.setTextInfo = function (name, value) {\n        this.nameText.text = name;\n        this.valueText.text = value;\n    };\n    HouseAttributeValue.prototype.setImageInfo = function (name, key, imgs) {\n        this.nameText.text = name;\n        var posX = 0;\n        var space = 10 * this.dpr;\n        for (var _i = 0, imgs_1 = imgs; _i < imgs_1.length; _i++) {\n            var frame = imgs_1[_i];\n            var image = this.scene.make.image({ key: key, frame: frame });\n            image.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n            image.x = posX;\n            posX += image.width * 0.5 + space;\n            this.imgCon.add(image);\n        }\n        this.valueText.visible = false;\n    };\n    return HouseAttributeValue;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaHouse/PicaHouseInfoPanel.ts?')},"./src/pica/render/ui/PicaHouse/PicaHousePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaHousePanel", function() { return PicaHousePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var _PicaHouseInfoPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PicaHouseInfoPanel */ "./src/pica/render/ui/PicaHouse/PicaHouseInfoPanel.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar PicaHousePanel = /** @class */ (function (_super) {\n    __extends(PicaHousePanel, _super);\n    function PicaHousePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAHOUSE_NAME;\n        return _this;\n    }\n    PicaHousePanel.prototype.resize = function (w, h) {\n        var scale = this.scale;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content.x = width * 0.5;\n        this.content.y = height * 0.5;\n        this.setSize(width, height);\n        this.itemsPanel.y = this.height * 0.5 - 60 * this.dpr;\n        this.itemsPanel.x = this.width * 0.5;\n    };\n    PicaHousePanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.addListen();\n        this.updateData();\n    };\n    PicaHousePanel.prototype.hide = function () {\n        this.mShow = false;\n        this.removeListen();\n    };\n    PicaHousePanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on("pointerup", this.onCloseHandler, this);\n        this.editorRoomBtn.on("pointerup", this.onEnterEditorHandler, this);\n    };\n    PicaHousePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off("pointerup", this.onCloseHandler, this);\n        this.editorRoomBtn.off("pointerup", this.onEnterEditorHandler, this);\n    };\n    PicaHousePanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaHousePanel.prototype.setRoomInfoData = function (content, isSelf) {\n        if (isSelf === void 0) { isSelf = true; }\n        this.mRoomInfoData = content;\n        if (!this.mInitialized)\n            return;\n        var bgwidth = 295 * this.dpr;\n        var bgheight = 370 * this.dpr;\n        if (content.roomType === "store") {\n            bgheight = 460 * this.dpr;\n            this.content.setSize(bgwidth, bgheight);\n            this.bg.resize(bgwidth, bgheight);\n            //  this.closeShopBtn.visible = true;\n            this.roomInfoBtn.y = -this.content.height * 0.5 - this.roomInfoBtn.height * 0.5 + 5 * this.dpr;\n            this.roomSettingBtn.y = this.roomInfoBtn.y;\n            this.closeBtn.y = -this.bg.height * 0.5 + this.dpr * 5;\n            this.editorRoomBtn.y = this.content.height * 0.5 - 30 * this.dpr;\n            this.houseInfoPanel.y = -this.content.height * 0.5 + this.houseInfoPanel.height * 0.5 + 30 * this.dpr;\n            //  this.closeShopBtn.on(String(ClickEvent.Tap), this.onCloseShopHandler, this);\n        }\n        else {\n            this.closeShopBtn.visible = false;\n        }\n        this.houseInfoPanel.setAttributeData(content, isSelf);\n        this.roomSettingBtn.visible = isSelf;\n        this.editorRoomBtn.visible = isSelf;\n    };\n    PicaHousePanel.prototype.on_REFURBISH_REQUIREMENTS = function (content) {\n        var _this = this;\n        this.itemsPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, function () {\n            _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAHOUSE_NAME + "_queryrefurbish", _this.mRoomInfoData.roomId);\n        }));\n        this.itemsPanel.setItemDatas(content.requirements);\n    };\n    PicaHousePanel.prototype.preload = function () {\n        this.addAtlas(this.key, "room_information/room_information.png", "room_information/room_information.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaHousePanel.prototype.init = function () {\n        var _this = this;\n        if (this.mInitialized)\n            return;\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        this.mBackground.fillStyle(0, 0.66);\n        this.mBackground.fillRect(0, 0, w, h);\n        this.add(this.mBackground);\n        this.content = this.scene.make.container(undefined, false);\n        var bgwidth = 295 * this.dpr, bgheight = 370 * this.dpr;\n        this.content.setSize(bgwidth, bgheight);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, bgwidth, bgheight, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, "bg", {\n            left: 20 * this.dpr,\n            top: 20 * this.dpr,\n            right: 20 * this.dpr,\n            bottom: 60 * this.dpr\n        });\n        this.content.add(this.bg);\n        this.closeBtn = this.scene.make.image({ x: this.bg.width * 0.5 - this.dpr * 5, y: -this.bg.height * 0.5 + this.dpr * 5, key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, frame: "close" }).setScale(1.3);\n        this.closeBtn.setInteractive();\n        this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.content.add([this.closeBtn]);\n        this.roomInfoBtn = this.createTabButton(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_info.infobtn"), "small_information");\n        this.roomSettingBtn = this.createTabButton(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_info.setting"), "small_setting");\n        this.roomInfoBtn.setPosition(-this.roomInfoBtn.width * 0.5 - 2 * this.dpr, -this.content.height * 0.5 - this.roomInfoBtn.height * 0.5 + 3 * this.dpr);\n        this.roomSettingBtn.setPosition(this.roomSettingBtn.width * 0.5 + 2 * this.dpr, this.roomInfoBtn.y);\n        this.topCheckBox = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["CheckboxGroup"]();\n        this.topCheckBox.appendItemAll([this.roomInfoBtn, this.roomSettingBtn]);\n        this.topCheckBox.on("selected", this.onTabBtnHandler, this);\n        this.content.add([this.roomInfoBtn, this.roomSettingBtn]);\n        this.houseInfoPanel = new _PicaHouseInfoPanel__WEBPACK_IMPORTED_MODULE_2__["PicaHouseInfoPanel"](this.scene, 0, 0, this.content.width - 40 * this.dpr, this.content.height - 70 * this.dpr, this.key, this.dpr);\n        this.houseInfoPanel.y = -this.content.height * 0.5 + this.houseInfoPanel.height * 0.5 + 30 * this.dpr;\n        this.houseInfoPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, function () {\n            _this.itemsPanel.visible = true;\n            _this.add(_this.itemsPanel);\n            _this.itemsPanel.resetMask();\n            if (_this.mRoomInfoData.undepreciated < 1) {\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAHOUSE_NAME + "_queryrequirements", _this.mRoomInfoData.roomId);\n            }\n            else {\n                _this.itemsPanel.setContent(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_info.renovatetips"));\n                _this.itemsPanel.setHandler(null);\n            }\n        }));\n        this.content.add(this.houseInfoPanel);\n        this.closeShopBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, this.houseInfoPanel.height - 30 * this.dpr, 94 * this.dpr, 29 * this.dpr, this.key, "close_shop", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_info.closeshop"), this.dpr, this.scale, {\n            left: 14 * this.dpr,\n            top: 0 * this.dpr,\n            right: 14 * this.dpr,\n            bottom: 0 * this.dpr\n        });\n        this.closeShopBtn.setTextStyle({\n            color: "#C12914",\n            fontSize: 12 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n        });\n        var shopBtnY = this.houseInfoPanel.y + this.houseInfoPanel.height * 0.5 + this.closeShopBtn.height * 0.5 + 20 * this.dpr;\n        this.closeShopBtn.y = shopBtnY;\n        this.houseInfoPanel.add(this.closeShopBtn);\n        this.closeShopBtn.visible = false;\n        var btnY = this.content.height * 0.5;\n        this.editorRoomBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, btnY - 30 * this.dpr, 100 * this.dpr, 35 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, "button_g", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_info.editorroom"), this.dpr, this.scale, {\n            left: 16 * this.dpr,\n            top: 16 * this.dpr,\n            right: 16 * this.dpr,\n            bottom: 16 * this.dpr\n        });\n        this.editorRoomBtn.setTextStyle({\n            color: "#022B55",\n            fontSize: 12 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n        });\n        this.editorRoomBtn.setTextOffset(10 * this.dpr, 0);\n        var editorx = -this.editorRoomBtn.width * 0.5 + 8 * this.dpr;\n        var eidtorimg = this.scene.make.image({ x: editorx, y: -3 * this.dpr, key: this.key, frame: "renovation" });\n        eidtorimg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.editorRoomBtn.add(eidtorimg);\n        this.content.add(this.editorRoomBtn);\n        this.editorRoomBtn.visible = false;\n        this.topCheckBox.selectIndex(0);\n        this.itemsPanel = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ItemsConsumeFunPanel"](this.scene, 278 * this.dpr, 198 * this.dpr, this.dpr, this.scale);\n        this.itemsPanel.createBackGrphaic(w, h);\n        this.itemsPanel.setTextInfo(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_info.renovate").toUpperCase(), utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_info.needmaterials"));\n        this.itemsPanel.visible = false;\n        this.add(this.content);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaHousePanel.prototype.updateData = function () {\n        if (this.mRoomInfoData) {\n            this.setRoomInfoData(this.mRoomInfoData);\n        }\n    };\n    PicaHousePanel.prototype.onTabBtnHandler = function (btn) {\n        if (this.roomInfoBtn === btn) {\n            this.houseInfoPanel.visible = true;\n        }\n        else {\n            this.houseInfoPanel.visible = false;\n        }\n        if (this.roomSettingBtn === btn) {\n            this.houseInfoPanel.visible = false;\n        }\n        else {\n        }\n    };\n    PicaHousePanel.prototype.createTabButton = function (text, icon) {\n        var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["TabButton"](this.scene, this.key, "default tab", "check tab", text);\n        btn.setTextStyle({ fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT, fontSize: 12 * this.dpr, color: "#ffffff" });\n        btn.setTextOffset(13 * this.dpr, 0);\n        var img = this.scene.make.image({ key: this.key, frame: icon });\n        btn.add(img);\n        img.x = -btn.width * 0.5 + img.width * 0.5 + 7 * this.dpr;\n        return btn;\n    };\n    PicaHousePanel.prototype.onCloseShopHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAHOUSE_NAME + "_closeshop", this.mRoomInfoData);\n    };\n    PicaHousePanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAHOUSE_NAME + "_hide");\n    };\n    PicaHousePanel.prototype.onEnterEditorHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAHOUSE_NAME + "_scenedecorate");\n    };\n    return PicaHousePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaHouse/PicaHousePanel.ts?')},"./src/pica/render/ui/PicaItemPopCard/PicaItemPopCardPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaItemPopCardPanel", function() { return PicaItemPopCardPanel; });\n/* harmony import */ var copy_text_to_clipboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! copy-text-to-clipboard */ "./node_modules/copy-text-to-clipboard/index.js");\n/* harmony import */ var copy_text_to_clipboard__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(copy_text_to_clipboard__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _Components_detail_display__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Components/detail.display */ "./src/pica/render/ui/Components/detail.display.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaItemPopCardPanel = /** @class */ (function (_super) {\n    __extends(PicaItemPopCardPanel, _super);\n    function PicaItemPopCardPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.mPressDelay = 1000;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAITEMPOPCARD_NAME;\n        _this.setTween(false);\n        return _this;\n    }\n    PicaItemPopCardPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mDetailDisplay.on("show", this.onShowHandler, this);\n        this.on("pointerup", this.onCloseHandler, this);\n        this.mCloseBtn.on("pointerup", this.onCloseHandler, this);\n        this.mNickName.on("pointerup", this.onPointerNickNameHandler, this);\n        this.mNickName.on("pointerdown", this.onPointerNickNameDownHandler, this);\n        this.mDesText.on("pointerdown", this.onPointerDesDownHandler, this);\n        this.mDesText.on("pointerup", this.onPointerNickNameHandler, this);\n    };\n    PicaItemPopCardPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mDetailDisplay.off("show", this.onShowHandler, this);\n        this.off("pointerup", this.onCloseHandler, this);\n        this.mCloseBtn.off("pointerup", this.onCloseHandler, this);\n        this.mNickName.off("pointerup", this.onPointerNickNameHandler, this);\n        this.mNickName.off("pointerdown", this.onPointerNickNameDownHandler, this);\n        this.mDesText.off("pointerdown", this.onPointerDesDownHandler, this);\n        this.mDesText.off("pointerup", this.onPointerNickNameHandler, this);\n    };\n    PicaItemPopCardPanel.prototype.resize = function (w, h) {\n        // const scale = this.scene.cameras.main.height / 1920;\n        var zoom = this.render.uiScale;\n        var width = this.scene.cameras.main.width / zoom;\n        var height = this.scene.cameras.main.height / zoom;\n        var centerX = this.scene.cameras.main.centerX / zoom;\n        var centerY = this.scene.cameras.main.centerY / zoom;\n        // this.setScale(scale);\n        this.setSize(width, height);\n        // this.mCardContainer.setScale(scale);\n        this.mCardContainer.x = centerX; // - this.mCardContainer.width / 2;\n        this.mCardContainer.y = centerY; // - this.mCardContainer.height / 2;\n        this.mCloseBtn.x = centerX;\n        this.mCloseBtn.y = centerY + this.mCardContainer.height / 2 + 48 * this.dpr;\n        _super.prototype.resize.call(this, w, h);\n    };\n    PicaItemPopCardPanel.prototype.setProp = function () {\n        if (!this.mShowData) {\n            return;\n        }\n        var prop = this.mShowData[0].prop;\n        if (!prop) {\n            return;\n        }\n        this.mDesText.setText(prop.des);\n        this.mNickName.setText(prop.name);\n        if (prop.source) {\n            this.mSource.setText(prop.source);\n        }\n        else {\n            this.mSource.setText("");\n        }\n        var resource = this.mShowData[0].display; // op_client.IOP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_COMMODITY_RESOURCE\n        if (resource) {\n            if (resource.display) {\n                this.mDetailDisplay.loadDisplay(resource);\n            }\n            else if (resource.avatar) {\n                this.mDetailDisplay.loadAvatar(resource.avatar);\n            }\n            else {\n                this.mDetailDisplay.loadUrl(prop.icon);\n            }\n        }\n    };\n    PicaItemPopCardPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "item_pop_card/item_pop_card.png", "item_pop_card/item_pop_card.json");\n        // this.scene.load.atlas(this.key, Url.getRes("ui/item_pop_card/item_pop_card.png"), Url.getRes("ui/item_pop_card/item_pop_card.json"));\n        _super.prototype.preload.call(this);\n    };\n    PicaItemPopCardPanel.prototype.init = function () {\n        this.mCardContainer = this.scene.make.container({\n            width: 325 * this.dpr,\n            height: 468 * this.dpr\n        }, false);\n        this.mCardContainer.setSize(325 * this.dpr, 468 * this.dpr);\n        this.mCardContainer.setInteractive();\n        this.mBorder = this.scene.make.graphics(undefined, false);\n        this.mBorder.fillGradientStyle(0x6f75ff, 0x6f75ff, 0x01cdff, 0x01cdff);\n        this.mBorder.fillRect(-this.mCardContainer.width / 2, -this.mCardContainer.height / 2, this.mCardContainer.width, this.mCardContainer.height);\n        // this.mBorder.setInteractive();\n        var background = this.scene.make.image({\n            key: this.key,\n            frame: "bg.png"\n        }, false);\n        background.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        background.y = 23 * this.dpr - background.height / 2;\n        var nickNameBg = this.scene.make.image({\n            y: 42 * this.dpr,\n            key: this.key,\n            frame: "name_bg.png"\n        });\n        nickNameBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mNickName = this.scene.make.text({\n            y: 42 * this.dpr,\n            style: {\n                fontSize: 18 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5).setInteractive();\n        var desBg = this.scene.make.image({\n            y: 138 * this.dpr,\n            key: this.key,\n            frame: "des_bg.png"\n        }, false);\n        desBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mDesText = this.scene.make.text({\n            x: desBg.x - desBg.width / 2 + 12 * this.dpr,\n            y: desBg.y - desBg.height / 2 + 10 * this.dpr,\n            style: {\n                fontSize: 10 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                wordWrap: {\n                    width: 240 * this.dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false).setInteractive();\n        this.mDetailDisplay = new _Components_detail_display__WEBPACK_IMPORTED_MODULE_4__["DetailDisplay"](this.scene, this.render);\n        this.mDetailDisplay.setFixedScale(this.dpr * 2 / this.scale);\n        this.mCloseBtn = this.scene.make.image({\n            key: this.key,\n            frame: "close.png"\n        }, false).setInteractive();\n        this.mCloseBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mSource = this.scene.make.text({\n            x: desBg.x - desBg.width / 2 + 12 * this.dpr,\n            y: desBg.y + desBg.height / 2 - 23 * this.dpr,\n            style: {\n                fontSize: 10 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT\n            }\n        }, false);\n        this.add(this.mCardContainer);\n        this.mCardContainer.add([this.mBorder, background, desBg, this.mDetailDisplay, nickNameBg, this.mNickName, this.mDesText, this.mSource]);\n        this.add(this.mCloseBtn);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n        this.setInteractive();\n        this.setProp();\n    };\n    PicaItemPopCardPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_close");\n        clearTimeout(this.mPressTime);\n        this.mNickNameDown = false;\n    };\n    PicaItemPopCardPanel.prototype.onPointerNickNameHandler = function () {\n        clearTimeout(this.mPressTime);\n        this.mNickNameDown = false;\n    };\n    PicaItemPopCardPanel.prototype.onPointerNickNameDownHandler = function () {\n        var _this = this;\n        // this.mNickNameDown = true;\n        this.mPressTime = setTimeout(function () {\n            _this.copyName();\n        }, this.mPressDelay);\n    };\n    PicaItemPopCardPanel.prototype.onPointerDesDownHandler = function () {\n        var _this = this;\n        this.mPressTime = setTimeout(function () {\n            _this.copyDes();\n        }, this.mPressDelay);\n    };\n    PicaItemPopCardPanel.prototype.copyName = function () {\n        if (this.mNickName) {\n            copy_text_to_clipboard__WEBPACK_IMPORTED_MODULE_0__(this.mNickName.text);\n            var content = {\n                noticeContext: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("item.copy_suc", { name: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("item.name") })\n            };\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["MessageType"].SHOW_NOTICE, { content: content });\n        }\n    };\n    PicaItemPopCardPanel.prototype.copyDes = function () {\n        if (this.mDesText) {\n            copy_text_to_clipboard__WEBPACK_IMPORTED_MODULE_0__(this.mDesText.text);\n            var content = {\n                noticeContext: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("item.copy_suc", { name: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("item.des") })\n            };\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["MessageType"].SHOW_NOTICE, { content: content });\n        }\n    };\n    PicaItemPopCardPanel.prototype.onShowHandler = function (image) {\n        this.mDetailDisplay.y = -this.mCardContainer.height / 4;\n    };\n    return PicaItemPopCardPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaItemPopCard/PicaItemPopCardPanel.ts?')},"./src/pica/render/ui/PicaMainUI/PicaMainUIPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaMainUIPanel", function() { return PicaMainUIPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\nvar PicaMainUIPanel = /** @class */ (function (_super) {\n    __extends(PicaMainUIPanel, _super);\n    function PicaMainUIPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.isSceneNameActive = false;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAMAINUI_NAME;\n        return _this;\n    }\n    PicaMainUIPanel.prototype.show = function (param) {\n        _super.prototype.show.call(this, param);\n        if (this.mInitialized) {\n            this.setInteractive();\n            this.update(this.mShowData);\n            this.checkUpdateActive();\n        }\n    };\n    PicaMainUIPanel.prototype.resize = function (w, h) {\n        var width = this.scene.cameras.main.width / this.scale;\n        var height = this.scene.cameras.main.height / this.scale;\n        _super.prototype.resize.call(this, width, height);\n        this.mCoinValue.x = width - this.mCoinValue.width / 2 - 5 * this.dpr;\n        this.mDiamondValue.x = width - this.mDiamondValue.width / 2 - 5 * this.dpr;\n    };\n    PicaMainUIPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "main_ui/mainui.png", "main_ui/mainui.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaMainUIPanel.prototype.addListen = function () {\n        _super.prototype.addListen.call(this);\n        if (!this.mInitialized)\n            return;\n        if (!this.roomCon) {\n            utils__WEBPACK_IMPORTED_MODULE_4__["Logger"].getInstance().fatal(PicaMainUIPanel.name + ": sceneName does not exist!");\n            return;\n        }\n        this.roomCon.on("pointerup", this.onOpenRoomPanel, this);\n        this.render.emitter.on(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_ROOM_INFO, this.onUpdateRoomHandler, this);\n        this.render.emitter.on(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_PLAYER_INFO, this.onUpdatePlayerHandler, this);\n        this.render.emitter.on(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_PARTY_STATE, this.onUpdatePartyHandler, this);\n    };\n    PicaMainUIPanel.prototype.removeListen = function () {\n        _super.prototype.removeListen.call(this);\n        if (!this.mInitialized)\n            return;\n        if (!this.roomCon) {\n            utils__WEBPACK_IMPORTED_MODULE_4__["Logger"].getInstance().fatal(PicaMainUIPanel.name + ": sceneName does not exist!");\n            return;\n        }\n        this.roomCon.off("pointerup", this.onOpenRoomPanel, this);\n        this.render.emitter.off(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_ROOM_INFO, this.onUpdateRoomHandler, this);\n        this.render.emitter.off(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_PLAYER_INFO, this.onUpdatePlayerHandler, this);\n        this.render.emitter.off(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_PARTY_STATE, this.onUpdatePartyHandler, this);\n    };\n    PicaMainUIPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.playerInfo = undefined;\n        this.roomInfo = undefined;\n    };\n    PicaMainUIPanel.prototype.update = function (param) {\n        _super.prototype.update.call(this);\n        if (param) {\n            if (!param.hasOwnProperty("roomId")) {\n                this.playerInfo = param;\n            }\n            else {\n                this.roomInfo = param;\n            }\n        }\n        if (this.playerInfo) {\n            this.updatePlayerInfo(this.playerInfo);\n        }\n        if (this.roomInfo) {\n            this.updateRoomInfo(this.roomInfo);\n        }\n    };\n    PicaMainUIPanel.prototype.updatePlayerInfo = function (player) {\n        this.playerInfo = player;\n        if (!this.mInitialized)\n            return;\n        if (player.level) {\n            var level = player.level;\n            this.playerLv.text = level.level + "";\n        }\n        if (player.coin !== undefined)\n            this.mCoinValue.setText(this.getCoin().value + "" || 0 + "");\n        if (player.diamond !== undefined)\n            this.mDiamondValue.setText(this.getDiamond().value + "" || 0 + "");\n        if (player.energy) {\n            var energy = player.energy;\n            if (energy) {\n                this.mStrengthValue.setValue(energy.currentValue, energy.max);\n            }\n            else {\n                this.mStrengthValue.setValue(0, 100);\n            }\n        }\n        this.mSceneName.rightIcon.visible = this.isSelfRoom;\n    };\n    PicaMainUIPanel.prototype.updateDetail = function (detail) {\n        var _this = this;\n        if (!detail) {\n            return;\n        }\n        if (!this.headImage) {\n            this.headImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["DynamicImage"](this.scene, 0, 0);\n            this.headImage.setScale(this.dpr);\n            this.add(this.headImage);\n        }\n        this.headImage.load(utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(detail.avatar), this, function () {\n            _this.headImage.x = _this.headImage.width * 0.5 + 4 * _this.dpr;\n            _this.headImage.y = _this.headImage.height * 0.5 + 4 * _this.dpr;\n        });\n    };\n    PicaMainUIPanel.prototype.getCoin = function () {\n        for (var _i = 0, _a = this.playerInfo.properties; _i < _a.length; _i++) {\n            var proper = _a[_i];\n            if (!proper.hasOwnProperty("id")) {\n                utils__WEBPACK_IMPORTED_MODULE_4__["Logger"].getInstance().error(proper.key + "  ID");\n                continue;\n            }\n            if (proper.id === "IV0000001") {\n                return proper;\n            }\n        }\n    };\n    PicaMainUIPanel.prototype.getDiamond = function () {\n        for (var _i = 0, _a = this.playerInfo.properties; _i < _a.length; _i++) {\n            var proper = _a[_i];\n            if (!proper.hasOwnProperty("id")) {\n                utils__WEBPACK_IMPORTED_MODULE_4__["Logger"].getInstance().error(proper.key + "  ID");\n                continue;\n            }\n            if (proper.id === "IV0000002") {\n                return proper;\n            }\n        }\n    };\n    PicaMainUIPanel.prototype.updateRoomInfo = function (room) {\n        this.roomInfo = room;\n        if (!this.mInitialized)\n            return;\n        this.roomCon.setSize(60 * this.dpr, 30 * this.dpr);\n        if (room.name) {\n            this.mSceneName.setText(room.name);\n            this.roomCon.setSize(this.mSceneName.rightbound * 2, 30 * this.dpr);\n        }\n        this.roomCon.setInteractive();\n        this.isSceneNameActive = true;\n        if (room.playerCount) {\n            // TODO \n            this.mCounter.setText("" + room.playerCount);\n        }\n        this.mCounter.x = this.mSceneName.x + this.mSceneName.rightbound + 5 * this.dpr;\n        this.praiseBtn.visible = false;\n        if (room.roomType) {\n            if (room.roomType === "room" || room.roomType === "store") {\n                this.praiseBtn.visible = true;\n            }\n            this.praiseBtn.setText(room.praise + "");\n            this.praiseBtn.selected = room.hasPraised;\n            if (room.hasPraised) {\n                this.praiseBtn.setTextColor("#8E99C1");\n                this.praiseImg.setFrame("praise_after");\n            }\n            else {\n                this.praiseBtn.setTextColor("#ffffff");\n                this.praiseImg.setFrame("praise_before");\n            }\n        }\n        this.mSceneName.rightIcon.visible = this.isSelfRoom;\n        this.partyBtn.visible = this.isSelfRoom;\n        if (room.openingParty) {\n            this.partyBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("common.manager"));\n        }\n        else {\n            this.partyBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("main_ui.party"));\n        }\n    };\n    Object.defineProperty(PicaMainUIPanel.prototype, "isSelfRoom", {\n        get: function () {\n            if (!this.playerInfo || !this.roomInfo)\n                return false;\n            var rooms = this.playerInfo.rooms;\n            var curRoomid = this.roomInfo.roomId;\n            for (var _i = 0, rooms_1 = rooms; _i < rooms_1.length; _i++) {\n                var room = rooms_1[_i];\n                if (room.roomId === curRoomid)\n                    return true;\n            }\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PicaMainUIPanel.prototype.updateUIState = function (active) {\n        if (!this.mInitialized) {\n            return;\n        }\n        if (active.name === "mainui.playerinfo") {\n            this.playerCon.visible = active.visible;\n        }\n        if (active.name === "mainui.roominfo") {\n            this.roomCon.visible = active.visible;\n        }\n        if (active.name === "mainui.headbtn") {\n            // this.playerIcon.visible = active.visible;\n            if (!active.disabled) {\n                this.playerIcon.setInteractive();\n            }\n            else {\n                this.playerIcon.removeInteractive();\n            }\n        }\n        if (active.name === "mainui.entereditorbtn") {\n            this.mSceneName.visible = active.visible;\n            if (this.isSceneNameActive) {\n                if (!active.disabled) {\n                    this.roomCon.setSize(this.mSceneName.rightbound * 2, 30 * this.dpr);\n                    this.roomCon.setInteractive();\n                }\n                else {\n                    this.roomCon.removeInteractive();\n                }\n            }\n        }\n    };\n    PicaMainUIPanel.prototype.init = function () {\n        var w = this.scene.cameras.main.width;\n        var h = this.scene.cameras.main.height;\n        this.playerCon = this.scene.make.container(undefined, false);\n        this.playerCon.y = 25 * this.dpr;\n        this.add(this.playerCon);\n        this.mCoinValue = new ValueContainer(this.scene, this.key, "coin", this.dpr);\n        this.mDiamondValue = new ValueContainer(this.scene, this.key, "diamond", this.dpr);\n        this.mDiamondValue.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onOpenRechargeHandler));\n        this.mDiamondValue.y = 35 * this.dpr;\n        var frame = this.scene.textures.getFrame(this.key, "strength_progress");\n        this.mStrengthValue = new ProgressValue(this.scene, this.key, "strength_icon", this.dpr);\n        this.mStrengthValue.x = 76 * this.dpr;\n        var ninePatch = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 68 * this.dpr / 2, this.mStrengthValue.height / 2 - frame.height - 1 * this.dpr, 92 * this.dpr, frame.height, this.key, "strength_progress", {\n            left: 8 * this.dpr,\n            top: 3 * this.dpr,\n            right: frame.width - 2 - 8 * this.dpr,\n            bottom: frame.height - 1 - 3 * this.dpr\n        });\n        this.mStrengthValue.setProgress(ninePatch, this.scale);\n        this.playerIcon = this.scene.make.image({ key: this.key, frame: "head" });\n        this.playerIcon.x = -this.mStrengthValue.width * 0.5 - 8 * this.dpr;\n        this.mStrengthValue.add(this.playerIcon);\n        this.playerIcon.on("pointerup", this.onHeadHandler, this);\n        this.playerIcon.setInteractive();\n        this.mStrengthValue.setValue(1000, 1000);\n        this.mStrengthValue.setInteractive();\n        this.mStrengthValue.on("pointerup", this.onStrengthHandler, this);\n        var lvx = this.playerIcon.x + this.playerIcon.width * 0.5 - 2 * this.dpr;\n        var lvy = this.playerIcon.y + this.playerIcon.height * 0.5 - 10 * this.dpr;\n        this.playerLv = this.scene.make.text({ text: "0", x: lvx, y: lvy, style: { fontSize: 11 * this.dpr, bold: true, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT, color: "#356EE3" } }, false).setOrigin(1, 0);\n        this.playerLv.setShadow(0, 0, "#ffffff", 2);\n        this.playerLv.setStroke("#356EE3", 2);\n        this.playerLv.setShadowStroke(true);\n        this.mStrengthValue.add(this.playerLv);\n        //  this.mExpProgress = new ExpProgress(this.scene, this.key, this.dpr, this.scale, this.mWorld);\n        this.playerCon.add([this.mStrengthValue, this.mCoinValue, this.mDiamondValue]);\n        this.roomCon = this.scene.make.container(undefined, false);\n        this.roomCon.y = this.playerCon.y + 32 * this.dpr;\n        this.add(this.roomCon);\n        this.mSceneName = new SceneName(this.scene, this.key, "room_icon", "setting_icon", this.dpr);\n        this.mSceneName.setText("");\n        this.mSceneName.x = 18 * this.dpr;\n        this.mCounter = new IconText(this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "home_persons", this.dpr);\n        this.mCounter.setText("");\n        this.mCounter.x = this.mSceneName.x + this.mSceneName.rightbound + 5 * this.dpr;\n        this.mCounter.y = this.mSceneName.y;\n        this.mCounter.setColor("#28D5F5");\n        this.textToolTip = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["TextToolTips"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "tips_bg", this.dpr, this.scale);\n        this.textToolTip.setSize(160 * this.dpr, 45).visible = false;\n        this.praiseBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["CheckBox"](this.scene, this.key, "praise_before_bg", "praise_after_bg", "1");\n        this.praiseBtn.y = this.mSceneName.y + this.mSceneName.height + this.praiseBtn.height * 0.5 + 20 * this.dpr;\n        this.praiseBtn.x = 8 * this.dpr + this.praiseBtn.width * 0.5;\n        this.praiseBtn.setTextStyle({ fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT });\n        this.praiseBtn.setTextOffset(10 * this.dpr, 0);\n        this.praiseBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onPraiseHandler, this);\n        this.praiseImg = this.scene.make.image({ key: this.key, frame: "praise_before" });\n        this.praiseImg.x = -10 * this.dpr;\n        this.praiseBtn.add(this.praiseImg);\n        this.partyBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "home_party_bg", "home_party_bg", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("main_ui.party"));\n        this.partyBtn.x = this.praiseBtn.x + this.praiseBtn.width * 0.5 + this.partyBtn.width * 0.5 + 5 * this.dpr;\n        this.partyBtn.y = this.praiseBtn.y;\n        this.partyBtn.setTextOffset(8 * this.dpr, 0);\n        this.partyBtn.setTextStyle({ fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT });\n        this.partyBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onPartyHandler, this);\n        this.roomCon.add([this.mSceneName, this.mCounter, this.praiseBtn, this.partyBtn, this.textToolTip]);\n        this.roomCon.setSize(this.mSceneName.rightbound * 2, 30 * this.dpr);\n        this.resize(w, h);\n        _super.prototype.init.call(this);\n    };\n    PicaMainUIPanel.prototype.onOpenRoomPanel = function () {\n        this.render.renderEmitter("openroompanel");\n    };\n    PicaMainUIPanel.prototype.onHeadHandler = function () {\n        this.render.renderEmitter("showPanel", structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].CHARACTERINFO_NAME);\n    };\n    PicaMainUIPanel.prototype.onStrengthHandler = function () {\n        var _this = this;\n        if (this.playerInfo) {\n            var energy = this.playerInfo.energy;\n            var rep = energy.currentValue + "/" + energy.max + "\\n";\n            var text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("main_ui.energy_tips", { "name": rep, "interpolation": { "escapeValue": false } });\n            if (!this.textToolTip.visible)\n                this.scene.input.on("pointerdown", this.onTextToolTipHandler, this);\n            this.textToolTip.setDelayText(text, 3000, new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, function () {\n                _this.scene.input.off("pointerdown", _this.onTextToolTipHandler, _this);\n            }));\n            this.textToolTip.setPosition(120 * this.dpr, 20 * this.dpr);\n        }\n    };\n    PicaMainUIPanel.prototype.onTextToolTipHandler = function () {\n        this.textToolTip.visible = false;\n        this.scene.input.off("pointerdown", this.onTextToolTipHandler, this);\n    };\n    PicaMainUIPanel.prototype.checkUpdateActive = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr, _i, arr_1, data;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.mWorld.mainPeer.getActiveUIData("PicaMainUI")];\n                    case 1:\n                        arr = _a.sent();\n                        if (arr) {\n                            for (_i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n                                data = arr_1[_i];\n                                this.updateUIState(data);\n                            }\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PicaMainUIPanel.prototype.onUpdatePlayerHandler = function (content) {\n        this.playerInfo = content;\n        this.updatePlayerInfo(content);\n    };\n    PicaMainUIPanel.prototype.onUpdateRoomHandler = function (content) {\n        this.roomInfo = content;\n        this.updateRoomInfo(content);\n    };\n    PicaMainUIPanel.prototype.onUpdatePartyHandler = function (party) {\n        if (this.roomInfo)\n            this.updateRoomInfo(this.roomInfo);\n    };\n    PicaMainUIPanel.prototype.onPraiseHandler = function (pointer, box) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].QUERY_PRAISE, box.selected);\n    };\n    PicaMainUIPanel.prototype.onPartyHandler = function () {\n        this.render.renderEmitter("showPanel", structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAOPENPARTY_NAME);\n    };\n    PicaMainUIPanel.prototype.onOpenRechargeHandler = function () {\n        this.render.renderEmitter("showPanel", structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICARECHARGE_NAME);\n        // this.render.editorCanvasManager.createHeadIcon(this.render.editorCanvasManager.AVATAR_CANVAS_TEST_DATA);\n    };\n    return PicaMainUIPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\nvar ValueContainer = /** @class */ (function (_super) {\n    __extends(ValueContainer, _super);\n    function ValueContainer(scene, key, leftIcon, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        var _this = _super.call(this, scene) || this;\n        _this.init(key, leftIcon, dpr);\n        return _this;\n    }\n    ValueContainer.prototype.setText = function (val) {\n        this.mText.setText(val);\n    };\n    ValueContainer.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    ValueContainer.prototype.init = function (key, leftIcon, dpr) {\n        var bg = this.scene.make.image({\n            key: key,\n            frame: "home_progress_bottom"\n        }, false);\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mLeft = this.scene.make.image({\n            key: key,\n            frame: leftIcon,\n        }, false);\n        this.mLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mText = this.scene.make.text({\n            text: "0",\n            width: bg.width,\n            height: bg.height,\n            style: {\n                fontSize: 14 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].NUMBER\n            }\n        }, false).setOrigin(0.5);\n        this.mText.setStroke("#000000", 1 * dpr);\n        this.mText.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mAddBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, key, "add_btn", "add_btn");\n        this.setSize(bg.width, bg.height);\n        this.mLeft.x = -bg.width * 0.5 + 5 * dpr;\n        this.mLeft.y = bg.y + bg.height * 0.5 - this.mLeft.height * 0.5;\n        this.mAddBtn.x = this.width * this.originX - this.mAddBtn.width * this.originX - 5 * dpr;\n        this.mText.x = 4 * dpr;\n        this.add([bg, this.mLeft, this.mText, this.mAddBtn]);\n        this.mAddBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onAddHandler, this);\n    };\n    ValueContainer.prototype.onAddHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.run();\n    };\n    return ValueContainer;\n}(Phaser.GameObjects.Container));\nvar IconText = /** @class */ (function (_super) {\n    __extends(IconText, _super);\n    function IconText(scene, key, frame, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        var _this = _super.call(this, scene) || this;\n        var icon = scene.make.image({\n            key: key,\n            frame: frame\n        }, false);\n        _this.mText = scene.make.text({\n            style: {\n                fontSize: 14 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        _this.mText.x = icon.width / 2 + 4 * dpr;\n        // this.mText.y = -icon.height / 2;\n        _this.mText.setStroke("#000000", 2 * dpr);\n        _this.add([icon, _this.mText]);\n        return _this;\n    }\n    IconText.prototype.setText = function (val) {\n        this.mText.setText(val);\n    };\n    IconText.prototype.setStroke = function (color, thickness) {\n        this.mText.setStroke(color, thickness);\n    };\n    IconText.prototype.setColor = function (color) {\n        this.mText.setColor(color);\n    };\n    return IconText;\n}(Phaser.GameObjects.Container));\nvar SceneName = /** @class */ (function (_super) {\n    __extends(SceneName, _super);\n    function SceneName(scene, key, leftFrame, rightFrame, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        var _this = _super.call(this, scene, key, leftFrame, dpr) || this;\n        _this.mDpr = dpr;\n        _this.mRightIcon = scene.make.image({\n            y: 2 * dpr,\n            key: key,\n            frame: rightFrame\n        }, false);\n        _this.add(_this.mRightIcon);\n        _this.mRightIcon.y = 8 * dpr;\n        _this.mRightIcon.x = 10 * dpr;\n        return _this;\n    }\n    SceneName.prototype.setText = function (val) {\n        _super.prototype.setText.call(this, val);\n    };\n    Object.defineProperty(SceneName.prototype, "rightbound", {\n        get: function () {\n            return this.mText.x + this.mText.width + 10 * this.mDpr;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SceneName.prototype, "rightIcon", {\n        get: function () {\n            return this.mRightIcon;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return SceneName;\n}(IconText));\nvar ExpProgress = /** @class */ (function (_super) {\n    __extends(ExpProgress, _super);\n    function ExpProgress(scene, key, dpr, scale, render) {\n        var _this = _super.call(this, scene) || this;\n        var width = render.getSize().width / scale;\n        var frame = _this.scene.textures.getFrame(key, "exp_bg");\n        _this.setSize(width, frame.height);\n        var progressW = _this.width;\n        var progressH = _this.height;\n        _this.mProgressBar = new ProgressBar(scene, dpr);\n        _this.mProgressBar.setSize(_this.width, _this.height);\n        var bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, progressW / 2, progressH / 2, progressW, progressH, key, "exp_bg", {\n            left: 8 * dpr,\n            top: 3 * dpr,\n            right: frame.width - 2 - 8 * dpr,\n            bottom: frame.height - 1 - 3 * dpr\n        });\n        _this.mProgressBar.setBackground(bg);\n        frame = _this.scene.textures.getFrame(key, "exp_progress");\n        var progres = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, progressW / 2, progressH / 2, width, frame.height, key, "exp_progress", {\n            left: 8 * dpr,\n            top: 3 * dpr,\n            right: frame.width - 2 - 10 * dpr,\n            bottom: frame.height - 1 - 5 * dpr\n        });\n        _this.mProgressBar.setProgress(progres, scale);\n        _this.mProgressBar.setRatio(0.5);\n        _this.mCurrentLv = scene.make.text({\n            text: "57",\n            style: {\n                fontSize: 10 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false);\n        _this.mCurrentLv.setStroke("#000000", 1 * dpr);\n        _this.mNextLv = scene.make.text({\n            text: "58",\n            style: {\n                fontSize: 10 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0);\n        _this.mNextLv.setStroke("#000000", 1 * dpr);\n        _this.mNextLv.x = _this.width - _this.mNextLv.width;\n        _this.add([_this.mProgressBar, _this.mCurrentLv, _this.mNextLv]);\n        return _this;\n    }\n    ExpProgress.prototype.setLv = function (val, ratio) {\n        this.mCurrentLv.setText(val.toString());\n        this.mNextLv.setText((val + 1).toString());\n        this.mNextLv.x = this.width - this.mNextLv.width;\n        this.mProgressBar.setRatio(ratio);\n    };\n    return ExpProgress;\n}(Phaser.GameObjects.Container));\nvar ProgressValue = /** @class */ (function (_super) {\n    __extends(ProgressValue, _super);\n    function ProgressValue(scene, key, leftIcon, dpr) {\n        return _super.call(this, scene, key, leftIcon, dpr) || this;\n    }\n    ProgressValue.prototype.setProgress = function (progres, scale) {\n        this.mProgress.setProgress(progres, scale);\n    };\n    ProgressValue.prototype.setValue = function (val, maxValue) {\n        if (this.mText) {\n            this.mText.text = val + "/" + maxValue;\n            this.mProgress.setRatio(val / maxValue);\n        }\n    };\n    ProgressValue.prototype.setInteractive = function (shape) {\n        shape = shape || new Phaser.Geom.Rectangle(0, 0, this.width, this.height);\n        _super.prototype.setInteractive.call(this, shape, Phaser.Geom.Rectangle.Contains);\n        return this;\n    };\n    ProgressValue.prototype.init = function (key, leftIcon, dpr) {\n        var bg = this.scene.make.image({\n            key: key,\n            frame: "home_progress_bottom"\n        }, false);\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.setSize(bg.width, bg.height);\n        this.mLeft = this.scene.make.image({\n            key: key,\n            frame: leftIcon,\n        }, false);\n        this.mLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mProgress = new ProgressBar(this.scene, dpr);\n        this.mProgress.x = -this.width / 2 + 10 * dpr;\n        this.mProgress.y = 4 * dpr;\n        this.mText = this.scene.make.text({\n            text: "0",\n            width: bg.width,\n            height: bg.height,\n            style: {\n                fontSize: 10 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].NUMBER\n            }\n        }, false).setOrigin(0.5);\n        this.mText.setStroke("#000000", 1 * dpr);\n        this.mText.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mAddBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, key, "add_btn", "add_btn");\n        this.setSize(bg.width, bg.height);\n        this.mLeft.x = -this.width * this.originX + 13 * dpr;\n        this.mAddBtn.x = this.width * this.originX - 10 * dpr;\n        //  this.mText.y = (this.height - this.mText.height) / 2;\n        this.add([bg, this.mProgress, this.mLeft, this.mText, this.mAddBtn]);\n    };\n    return ProgressValue;\n}(ValueContainer));\nvar ProgressBar = /** @class */ (function (_super) {\n    __extends(ProgressBar, _super);\n    function ProgressBar(scene, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        return _this;\n    }\n    ProgressBar.prototype.setBackground = function (bg) {\n        this.addAt(bg, 0);\n    };\n    ProgressBar.prototype.setProgress = function (progress, scale) {\n        this.mScale = scale;\n        this.mProgress = progress;\n        this.add(this.mProgress);\n        this.setSize(progress.width * this.mScale, progress.height * this.mScale);\n        var worldpos = progress.getWorldTransformMatrix();\n        this.worldpos = new Phaser.Geom.Point(worldpos.tx, worldpos.ty);\n        this.mMaskGraphics = this.scene.make.graphics(undefined, false);\n        this.mMaskGraphics.fillStyle(0xFF9900);\n        this.mMaskGraphics.fillRect(0, 0, this.width, this.height + 8 * this.dpr);\n        this.mProgress.mask = new Phaser.Display.Masks.GeometryMask(this.scene, this.mMaskGraphics);\n        this.mMaskGraphics.y = worldpos.ty + this.height + 4 * this.dpr;\n        this.mMaskGraphics.x = worldpos.tx;\n    };\n    ProgressBar.prototype.setRatio = function (ratio) {\n        if (!this.mMaskGraphics) {\n            return;\n        }\n        this.mMaskGraphics.x = this.worldpos.x + 4 * this.dpr - this.mProgress.width * 0.5 + ((this.width * ratio) - this.width);\n    };\n    return ProgressBar;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaMainUI/PicaMainUIPanel.ts?')},"./src/pica/render/ui/PicaManorList/PicaManorContentPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaManorContentPanel", function() { return PicaManorContentPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaManorContentPanel = /** @class */ (function (_super) {\n    __extends(PicaManorContentPanel, _super);\n    function PicaManorContentPanel(scene, x, y, width, height, dpr, key) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.create();\n        return _this;\n    }\n    PicaManorContentPanel.prototype.create = function () {\n        var width = this.width;\n        var height = this.height;\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, width, height, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "bg", {\n            left: 70 * this.dpr,\n            top: 30 * this.dpr,\n            right: 30 * this.dpr,\n            bottom: 70 * this.dpr\n        });\n        this.add(this.bg);\n        var posY = -height * 0.5;\n        this.titlebg = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].common2Key, frame: "title" });\n        this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titlebg.y = posY + 3 * this.dpr;\n        this.add(this.titlebg);\n        this.titleText = this.scene.make.text({ x: 0, y: this.titlebg.y + 2 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("manor.title"), style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].titleYellowStyle_m(this.dpr) }).setOrigin(0.5);\n        this.titleText.setFontStyle("bold");\n        this.titleText.setResolution(this.dpr);\n        this.add(this.titleText);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "close");\n        this.closeBtn.setDisplaySize(28 * this.dpr, 28 * this.dpr);\n        this.closeBtn.setPosition(this.width * 0.5 - 8 * this.dpr, posY + this.dpr * 7);\n        this.closeBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onCloseHandler, this);\n        this.add(this.closeBtn);\n        this.setContentSize(width, height);\n    };\n    PicaManorContentPanel.prototype.setContentSize = function (width, height) {\n        this.setSize(width, height);\n        this.bg.resize(width, height);\n        var posY = -height * 0.5;\n        this.titlebg.y = posY + 5 * this.dpr;\n        this.titleText.y = this.titlebg.y + 2 * this.dpr;\n        this.closeBtn.setPosition(this.width * 0.5 - 8 * this.dpr, posY + this.dpr * 7);\n    };\n    PicaManorContentPanel.prototype.setTitleText = function (text) {\n        this.titleText.text = text;\n    };\n    PicaManorContentPanel.prototype.setCloseHandler = function (handler) {\n        this.closeHandler = handler;\n    };\n    PicaManorContentPanel.prototype.onCloseHandler = function () {\n        if (this.closeHandler)\n            this.closeHandler.run();\n    };\n    return PicaManorContentPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaManorList/PicaManorContentPanel.ts?')},"./src/pica/render/ui/PicaManorList/PicaManorListPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaManorListPanel", function() { return PicaManorListPanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _PicaManorContentPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PicaManorContentPanel */ "./src/pica/render/ui/PicaManorList/PicaManorContentPanel.ts");\n/* harmony import */ var _PicaManorScrollPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaManorScrollPanel */ "./src/pica/render/ui/PicaManorList/PicaManorScrollPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar PicaManorListPanel = /** @class */ (function (_super) {\n    __extends(PicaManorListPanel, _super);\n    function PicaManorListPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAMANORLIST_NAME;\n        return _this;\n    }\n    PicaManorListPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(w, h);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x000000, 0.66);\n        this.mBackGround.fillRect(0, 0, w, h);\n    };\n    PicaManorListPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    };\n    PicaManorListPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n    };\n    PicaManorListPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n    };\n    PicaManorListPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "manor/manor.png", "manor/manor.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaManorListPanel.prototype.init = function () {\n        var zoom = this.scale;\n        var wid = this.scaleWidth;\n        var hei = this.scaleHeight;\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, wid * zoom, hei * zoom);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, wid, hei), Phaser.Geom.Rectangle.Contains);\n        this.add(this.mBackGround);\n        var topoffset = 90 * this.dpr;\n        var bottomoffset = 74 * this.dpr;\n        var conWidth = 295 * this.dpr;\n        var conHeight = hei - topoffset - bottomoffset;\n        var conY = topoffset + conHeight * 0.5;\n        var conX = wid * 0.5;\n        this.content = new _PicaManorContentPanel__WEBPACK_IMPORTED_MODULE_4__["PicaManorContentPanel"](this.scene, conX, conY, conWidth, conHeight, this.dpr, this.key);\n        this.content.setCloseHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.OnCloseHandler));\n        this.add(this.content);\n        this.resize(wid, hei);\n        _super.prototype.init.call(this);\n        this.openManorList();\n    };\n    PicaManorListPanel.prototype.setManorList = function (content) {\n        this.picScrollPanel.setManorListData(content);\n    };\n    PicaManorListPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaManorListPanel.prototype.openManorList = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_querylist");\n        this.showScrollPanel();\n        this.content.setTitleText(utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.title"));\n    };\n    PicaManorListPanel.prototype.showScrollPanel = function () {\n        var _this = this;\n        var topoffset = 90 * this.dpr;\n        var bottomoffset = 74 * this.dpr;\n        this.setContentSize(topoffset, bottomoffset);\n        if (!this.picScrollPanel) {\n            var wid = this.content.width;\n            var hei = this.content.height - 50 * this.dpr;\n            this.picScrollPanel = new _PicaManorScrollPanel__WEBPACK_IMPORTED_MODULE_5__["PicaManorScrollPanel"](this.scene, 0, 0, wid, hei, this.dpr, this.scale, this.key);\n            this.picScrollPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, function (roomid) {\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + _this.key + "_queryenter", roomid);\n            }));\n        }\n        this.content.add(this.picScrollPanel);\n        this.picScrollPanel.resetMask();\n    };\n    PicaManorListPanel.prototype.hideScrollPanel = function () {\n        this.content.remove(this.picScrollPanel);\n    };\n    PicaManorListPanel.prototype.setContentSize = function (topoffset, bottomoffset) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var conWidth = 334 * this.dpr;\n        var conHeight = 452 * this.dpr; // height - topoffset - bottomoffset;\n        var conY = height * 0.5;\n        var conX = width * 0.5;\n        this.content.setPosition(conX, conY);\n        this.content.setContentSize(conWidth, conHeight);\n    };\n    PicaManorListPanel.prototype.OnCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_hide");\n    };\n    PicaManorListPanel.prototype.onSelectItemHandler = function (item) {\n    };\n    return PicaManorListPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaManorList/PicaManorListPanel.ts?')},"./src/pica/render/ui/PicaManorList/PicaManorScrollPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaManorScrollPanel", function() { return PicaManorScrollPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaManorScrollPanel = /** @class */ (function (_super) {\n    __extends(PicaManorScrollPanel, _super);\n    function PicaManorScrollPanel(scene, x, y, width, height, dpr, zoom, key) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaManorScrollPanel.prototype.setManorListData = function (content) {\n        var street = content.street.sort(function (a, b) {\n            if (a.streetId > b.streetId)\n                return -1;\n            else\n                return 1;\n        });\n        this.gridtable.setItems(street);\n    };\n    PicaManorScrollPanel.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    PicaManorScrollPanel.prototype.resetMask = function () {\n        this.gridtable.resetMask();\n    };\n    PicaManorScrollPanel.prototype.create = function () {\n        var posy = -this.height * 0.5;\n        var posx = -this.width * 0.5;\n        var storebg = this.scene.make.image({ key: this.key, frame: "finca_list_block" });\n        storebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        storebg.x = posx + 35 * this.dpr;\n        storebg.y = posy + 30 * this.dpr;\n        this.add(storebg);\n        var storex = storebg.x + storebg.width * 0.5 + 5 * this.dpr;\n        var storeTitle = this.scene.make.text({\n            x: storex, y: storebg.y, text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("manor.title"), style: { fontSize: 12 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT, color: "#FFC51A" }\n        }).setOrigin(0, 0.5);\n        storeTitle.setFontStyle("bold");\n        storeTitle.setStroke("#553100", 2 * this.dpr);\n        this.add(storeTitle);\n        var line = this.scene.make.graphics(undefined, false);\n        line.clear();\n        line.fillStyle(0x000000, 0.11);\n        line.fillRect(-this.width * 0.5 + 20 * this.dpr, storebg.y + 20 * this.dpr, 256 * this.dpr, 2);\n        this.add(line);\n        var gridWdith = 293 * this.dpr;\n        var gridHeight = 360 * this.dpr;\n        var gridY = posy + 53 * this.dpr + gridHeight * 0.5;\n        this.gridtable = this.createGrideTable(0, gridY, gridWdith, gridHeight, 293 * this.dpr, 58 * this.dpr);\n    };\n    PicaManorScrollPanel.prototype.createGrideTable = function (x, y, width, height, capW, capH) {\n        var _this = this;\n        var tableConfig = {\n            x: x,\n            y: y,\n            table: {\n                width: width,\n                height: height,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                tableOX: 0 * this.dpr,\n                zoom: this.zoom\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new ManorItem(_this.scene, 0, 0, capW, capH, _this.key, _this.dpr, _this.zoom);\n                    grid.add(cellContainer);\n                }\n                cellContainer.setManorData(item);\n                return cellContainer;\n            },\n        };\n        var grid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        grid.layout();\n        grid.on("cellTap", this.onGridTableHandler, this);\n        this.add(grid);\n        return grid;\n    };\n    PicaManorScrollPanel.prototype.onGridTableHandler = function (item) {\n        this.onEnterHandler(item.manorData);\n    };\n    PicaManorScrollPanel.prototype.onEnterHandler = function (data) {\n        if (this.sendHandler)\n            this.sendHandler.runWith(data.roomId);\n    };\n    PicaManorScrollPanel.prototype.onSearchBtnHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.run();\n    };\n    PicaManorScrollPanel.prototype.onFiltrateHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.run();\n    };\n    PicaManorScrollPanel.prototype.onSortBtnHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.run();\n    };\n    return PicaManorScrollPanel;\n}(Phaser.GameObjects.Container));\n\nvar ManorItem = /** @class */ (function (_super) {\n    __extends(ManorItem, _super);\n    function ManorItem(scene, x, y, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.setSize(width, height);\n        var posx = -_this.width * 0.5;\n        var posy = -_this.height * 0.5;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, width, 50 * dpr, _this.key, "list_bg", {\n            left: 10 * _this.dpr,\n            top: 0 * _this.dpr,\n            right: 10 * _this.dpr,\n            bottom: 0 * _this.dpr\n        });\n        _this.add(_this.bg);\n        var storeX = -_this.width * 0.5 + 10 * dpr;\n        _this.manorName = _this.scene.make.text({ x: storeX, y: 0, text: "", style: { color: "#333333", fontSize: 15 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        _this.manorName.setFontStyle("bold");\n        _this.add(_this.manorName);\n        _this.playerCount = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](scene, 30 * dpr, 20 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "home_persons", dpr, {\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            fontSize: 15 * dpr,\n            color: "#333333",\n        });\n        _this.playerCount.setFontStyle("bold");\n        _this.playerCount.x = _this.width * 0.5 - 35 * dpr;\n        _this.add(_this.playerCount);\n        _this.playerCount.setText("100");\n        return _this;\n    }\n    ManorItem.prototype.setManorData = function (data) {\n        this.manorData = data;\n        this.manorName.text = data.name;\n        this.playerCount.setText(data.playerCount + "");\n    };\n    return ManorItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaManorList/PicaManorScrollPanel.ts?')},"./src/pica/render/ui/PicaMarket/ElementDetail.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ElementDetail", function() { return ElementDetail; });\n/* harmony import */ var _Components_detail_display__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Components/detail.display */ "./src/pica/render/ui/Components/detail.display.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _NumberCounter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./NumberCounter */ "./src/pica/render/ui/PicaMarket/NumberCounter.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar ElementDetail = /** @class */ (function (_super) {\n    __extends(ElementDetail, _super);\n    function ElementDetail(scene, render, $key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.render = render;\n        _this.key = $key;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setPosition(0, 0);\n        _this.mCounter = new _NumberCounter__WEBPACK_IMPORTED_MODULE_2__["NumberCounter"](_this.scene, $key, 360, 700, _this.dpr, render.uiScale);\n        var frame = _this.scene.textures.getFrame(_this.key, "yellow_button_normal");\n        var w = 60;\n        var h = 65;\n        if (frame) {\n            w = frame.width;\n            h = frame.height;\n        }\n        _this.mBuyBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSliceButton"](_this.scene, 440, 700, 81 * _this.dpr, 41 * _this.dpr, _this.key, "yellow_button", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("common.buy"), _this.dpr, _this.scale, {\n            left: 14 * _this.dpr,\n            top: 14 * _this.dpr,\n            right: w - 2 - 14 * _this.dpr,\n            bottom: h - 2 - 14 * _this.dpr\n        });\n        _this.mBuyBtn.setTextStyle({\n            color: "#976400",\n            fontSize: 16 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT\n        });\n        _this.mBuyBtn.setFontStyle("bold");\n        _this.mBuyBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap), _this.onBuyHandler, _this);\n        _this.mPriceContainer = _this.scene.make.container(undefined, false);\n        _this.mPriceIcon = _this.scene.make.image({\n            x: -78,\n            key: _this.key,\n            frame: "iv_coin"\n        }, false);\n        _this.mPriceIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mPriceText = _this.scene.make.text({\n            x: 0,\n            style: {\n                fontSize: 14 * _this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].NUMBER\n            }\n        }).setOrigin(0.5);\n        var priceBg = _this.scene.make.image({\n            key: _this.key,\n            frame: "price_bg"\n        });\n        priceBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mDetailDisplay = new _Components_detail_display__WEBPACK_IMPORTED_MODULE_0__["DetailDisplay"](_this.scene, _this.render);\n        _this.mDetailDisplay.setFixedScale(2 * _this.dpr / _this.zoom);\n        _this.mDetailDisplay.y = 110 * _this.dpr;\n        _this.mDetailBubble = new DetailBubble(_this.scene, _this.key, _this.dpr);\n        _this.mDetailBubble.x = 4 * _this.dpr;\n        _this.mDetailBubble.y = 400 * _this.dpr;\n        _this.add([_this.mDetailDisplay, _this.mPriceContainer, _this.mCounter, _this.mBuyBtn, _this.mDetailBubble]);\n        _this.mPriceContainer.add([priceBg, _this.mPriceIcon, _this.mPriceText]);\n        // this.mDetailBubble.visible = false;\n        _this.addActionListener();\n        return _this;\n    }\n    ElementDetail.prototype.resize = function (w, h) {\n        var width = w;\n        var height = h / 2 - 150;\n        var centerX = w / 2;\n        this.mBuyBtn.x = width - this.mBuyBtn.displayWidth / 2 - 10 * this.dpr;\n        this.mBuyBtn.y = this.height - this.y - this.mBuyBtn.displayHeight / 2 - 12 * this.dpr;\n        var counterX = this.mBuyBtn.x - this.mBuyBtn.displayWidth / 2 - this.mCounter.displayWidth / 2 - 17 * this.dpr;\n        this.mCounter.x = counterX;\n        this.mCounter.y = this.mBuyBtn.y;\n        this.mDetailBubble.x = 4 * this.dpr;\n        this.mDetailBubble.y = this.mCounter.y - 70 * this.dpr;\n        this.mPriceContainer.x = this.mCounter.x;\n        this.mPriceContainer.y = this.mCounter.y - 35 * this.dpr;\n        this.mDetailDisplay.x = centerX;\n        this.mDetailDisplay.y = (this.height - this.y) / 2;\n        var clickW = width * 0.8;\n        var clickH = height * 0.7;\n        this.setInteractive(new Phaser.Geom.Rectangle((width >> 1) + (width - clickW >> 1), height >> 1, clickW, clickH), Phaser.Geom.Rectangle.Contains);\n        this.mCounter.resize();\n        this.mDetailBubble.visible = true;\n    };\n    ElementDetail.prototype.addActionListener = function () {\n        if (!this.mCounter) {\n            return;\n        }\n        this.mCounter.addActionListener();\n        this.mCounter.on("change", this.onChangeCounterHandler, this);\n        this.on("pointerup", this.onPointerUpHandler, this);\n    };\n    ElementDetail.prototype.removeActionListener = function () {\n        if (!this.mCounter) {\n            return;\n        }\n        this.mCounter.removeActionListener();\n        this.mCounter.off("change", this.onChangeCounterHandler, this);\n        this.off("gameobjectup", this.onPointerUpHandler, this);\n    };\n    ElementDetail.prototype.setProp = function (prop) {\n        var _this = this;\n        this.mSelectedProp = prop;\n        if (prop.price && prop.price.length > 0) {\n            this.mPriceIcon.setTexture(this.key, utils__WEBPACK_IMPORTED_MODULE_3__["Coin"].getIcon(prop.price[0].coinType));\n            this.updatePrice(prop.price[0].price.toString());\n        }\n        else {\n            this.mPriceText.setText("");\n        }\n        var property = null;\n        this.render.mainPeer.getUserData_PlayerProperty()\n            .then(function (val) {\n            property = val;\n            return _this.serviceTimestamp;\n        })\n            .then(function (t) {\n            _this.mDetailBubble.setProp(prop, Math.floor(t / 1000), property);\n            _this.mDetailBubble.y = _this.height - _this.y - _this.mDetailBubble.height - 6 * _this.dpr;\n            _this.mCounter.setCounter(1);\n        });\n    };\n    ElementDetail.prototype.setResource = function (content) {\n        var _this = this;\n        if (content.display) {\n            this.mDetailDisplay.loadDisplay(content);\n        }\n        else if (content.avatar) {\n            this.render.mainPeer.getPlayerAvatar()\n                .then(function (_a) {\n                var avatar = _a.avatar, suits = _a.suits;\n                for (var key in avatar) {\n                    if (avatar.hasOwnProperty(key)) {\n                        var element = avatar[key];\n                        if (element && !content.avatar[key])\n                            content.avatar[key] = element;\n                    }\n                }\n                if (suits) {\n                    var newsuit = content.suits[0];\n                    for (var _i = 0, suits_1 = suits; _i < suits_1.length; _i++) {\n                        var suit = suits_1[_i];\n                        if (suit.suit_type !== newsuit.suit_type) {\n                            content.suits.push(suit);\n                        }\n                    }\n                }\n                var offset = new Phaser.Geom.Point(0, 35 * 2);\n                _this.mDetailDisplay.loadAvatar(content, 2 * _this.dpr, offset);\n            });\n        }\n        else {\n            this.mDetailDisplay.loadUrl(this.mSelectedProp.icon);\n        }\n    };\n    Object.defineProperty(ElementDetail.prototype, "serviceTimestamp", {\n        get: function () {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                _this.render.mainPeer.requestCurTime().then(function (t) {\n                    resolve(t);\n                });\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ElementDetail.prototype.updatePrice = function (price) {\n        this.mPriceText.setText(price);\n        this.mPriceIcon.x = this.mPriceText.x - this.mPriceText.width / 2 - 16 * this.dpr;\n    };\n    ElementDetail.prototype.onBuyHandler = function () {\n        if (!this.mSelectedProp) {\n            return;\n        }\n        var prop = { id: null, quantity: null, category: null }; // op_def.OrderCommodities.create()\n        prop.id = this.mSelectedProp.id;\n        prop.quantity = this.mCounter.number;\n        prop.category = this.mSelectedProp.category;\n        this.emit("buyItem", prop);\n    };\n    ElementDetail.prototype.onChangeCounterHandler = function (num) {\n        if (!this.mSelectedProp) {\n            return;\n        }\n        if (!this.mSelectedProp.price || this.mSelectedProp.price.length < 1) {\n            return;\n        }\n        this.updatePrice((this.mSelectedProp.price[0].price * this.mCounter.number).toString());\n    };\n    ElementDetail.prototype.onPointerUpHandler = function () {\n        // this.emit("popItemCard", this.mSelectedProp, this.mDetailDisplay.display);\n        this.mCounter.setBlur();\n    };\n    return ElementDetail;\n}(Phaser.GameObjects.Container));\n\nvar DetailBubble = /** @class */ (function (_super) {\n    __extends(DetailBubble, _super);\n    // private testText: Phaser.GameObjects.Text;\n    function DetailBubble(scene, key, dpr, zoom) {\n        if (zoom === void 0) { zoom = 1; }\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        var tipsWidth = 100 * dpr;\n        var tipsHeight = 96 * dpr;\n        _this.setSize(tipsWidth, tipsHeight);\n        _this.tipsbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSlicePatch"](_this.scene, 0, 0, tipsWidth, tipsHeight, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].uicommon, "tips_bg", {\n            left: 10 * _this.dpr,\n            top: 10 * _this.dpr,\n            right: 10 * _this.dpr,\n            bottom: 10 * _this.dpr\n        }, undefined, undefined, 0.5);\n        _this.tipsbg.setPosition(tipsWidth * 0.5, tipsHeight * 0.5);\n        _this.tipsbg.alpha = 0.6;\n        _this.tipsText = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](_this.scene, 7 * dpr, -tipsHeight + 60 * _this.dpr, "", {\n            color: "#333333",\n            fontSize: 10 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            lineSpacing: 6 * dpr,\n            padding: {\n                top: 2 * dpr\n            }\n        }).setOrigin(0);\n        _this.tipsText.setWrapMode("string");\n        _this.mExpires = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](scene, 7 * dpr, 85 * dpr, "", {\n            fontSize: 10 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n        }).setOrigin(0);\n        _this.add([_this.tipsbg, _this.tipsText, _this.mExpires]);\n        _this.tipsText.addImage("iv_coin", { key: picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].commonKey, frame: "iv_coin" });\n        _this.tipsText.addImage("iv_diamond", { key: picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].commonKey, frame: "iv_diamond" });\n        return _this;\n    }\n    DetailBubble.prototype.setProp = function (prop, servertime, property) {\n        if (!prop) {\n            this.tipsText.setText(utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("furni_bag.empty_backpack"));\n            this.mExpires.text = "";\n            this.resize();\n        }\n        else {\n            this.tipsText.setWrapWidth(undefined);\n            var name_1 = "[color=#32347b][b][size=" + 14 * this.dpr + "]" + (prop.shortName || prop.name) + "[/size][/b][/color]";\n            // let price = "";\n            // let source = "";\n            var describle = "";\n            var attri = "";\n            var need = "";\n            var tips = name_1 + "\\n";\n            var maxWidth = 100 * this.dpr;\n            // if (prop.price && prop.price.length > 0) {\n            //   price = `${i18n.t("furni_bag.sale_price")}[img=${Coin.getIcon(prop.price[0].coinType)}] x${prop.price[0].price}`;\n            //   tips += `[color=#ff0000]${price}[/color]` + "\\n";\n            //   this.tipsText.text = price;\n            //   maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            // }\n            this.tipsText.text = tips;\n            maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            // if (prop.source) {\n            //   source = `${i18n.t("furni_bag.source")}${prop.source}`;\n            //   tips += `[color=#ffffff][size=${12 * this.dpr}]${source}[/size][/color]`;\n            //   this.tipsText.text = source;\n            //   maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            // }\n            if (prop.des && prop.des !== "") {\n                describle = prop.des;\n                tips += "\\n" + describle;\n                this.tipsText.text = describle;\n                maxWidth = maxWidth < this.tipsText.width ? this.tipsText.width : maxWidth;\n            }\n            var isline = false;\n            if (prop.affectValues) {\n                var len = prop.affectValues.length;\n                for (var i = 0; i < len; i++) {\n                    var affect = prop.affectValues[i];\n                    if (property.propertiesMap.has(affect.key)) {\n                        var proper = property.propertiesMap.get(affect.key);\n                        var value = affect.value > 0 ? "[color=#ffff00]+" + affect.value + "[/color]" : "[color=#ff0000]" + affect.value + "[/color]";\n                        attri += "\\n" + (proper.name + ": " + value);\n                    }\n                }\n                if (attri.length > 0) {\n                    if (!isline) {\n                        isline = true;\n                        tips += "\\n-- -- -- -- -- -- -- --";\n                    }\n                    tips += "\\n[color=#ffffff]" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("furni_bag.properties") + "[/color]" + ("" + attri);\n                }\n            }\n            if (prop.requireValues) {\n                var len = prop.requireValues.length;\n                for (var i = 0; i < len; i++) {\n                    var require_1 = prop.requireValues[i];\n                    if (property.propertiesMap.has(require_1.key)) {\n                        var proper = property.propertiesMap.get(require_1.key);\n                        var value = proper.value >= require_1.value ? "[color=#00ff00](" + require_1.value + ")[/color]" : "[color=#00ff00](" + require_1.value + ")[/color]";\n                        need += "\\n" + proper.name + ": " + value;\n                    }\n                }\n                if (need.length > 0) {\n                    if (!isline) {\n                        isline = true;\n                        tips += "\\n-- -- -- -- -- -- -- --";\n                    }\n                    tips += "\\n" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("furni_bag.needproper") + ":" + need;\n                }\n            }\n            this.tipsText.setWrapWidth(maxWidth);\n            this.tipsText.text = tips;\n            this.width = maxWidth + 14 * this.dpr;\n            // if (prop.expiredTime > 0) {\n            //   if (!isline) {\n            //     isline = true;\n            //     tips += "\\n-- -- -- -- -- -- -- --";\n            //   }\n            //   let interval = prop.expiredTime - servertime;\n            //   const timeout = () => {\n            //     (<any>this.mExpires).visible = true;\n            //     this.mExpires.text = this.getDataFormat(interval * 1000);\n            //     if (interval > 0) {\n            //       this.timeID = setTimeout(() => {\n            //         interval -= 1;\n            //         timeout();\n            //       }, 1000);\n            //     } else {\n            //       this.timeID = undefined;\n            //     }\n            //   };\n            //   timeout();\n            // } else {\n            //   (<any>this.mExpires).visible = false;\n            //   if (this.timeID) clearTimeout(this.timeID);\n            // }\n            this.resize();\n        }\n        return this;\n    };\n    DetailBubble.prototype.resize = function (w, h) {\n        var mixheight = 96 * this.dpr;\n        var height = this.tipsText.height;\n        if (this.mExpires.visible)\n            height += this.mExpires.height + 3 * this.dpr;\n        height += 14 * this.dpr;\n        height = height < mixheight ? mixheight : height;\n        this.setSize(this.width, height);\n        this.tipsbg.resize(this.width, this.height);\n        this.tipsbg.x = this.width * 0.5;\n        this.tipsbg.y = this.height * 0.5;\n        this.tipsText.y = 7 * this.dpr;\n        this.mExpires.y = this.tipsText.y + this.tipsText.height + 3 * this.dpr;\n    };\n    DetailBubble.prototype.getDataFormat = function (time) {\n        var day = Math.floor(time / 86400000);\n        var hour = Math.floor(time / 3600000) % 24;\n        var minute = Math.floor(time / 60000) % 60;\n        var second = Math.floor(time / 1000) % 60;\n        var text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("furni_bag.timelimit") + ":  ";\n        if (day > 0) {\n            var temptime = day + "-" + this.stringFormat(hour) + ":" + this.stringFormat(minute) + ":" + this.stringFormat(second);\n            text += "[color=#FF0000]" + temptime + "[/color]";\n        }\n        else if (hour > 0 || minute > 0 || second > 0) {\n            var temptime = this.stringFormat(hour) + ":" + this.stringFormat(minute) + ":" + this.stringFormat(second);\n            text += "[color=#FF0000]" + temptime + "[/color]";\n        }\n        else {\n            var temptime = "" + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("furni_bag.expires");\n            text += "[color=#FF0000]" + temptime + "[/color]";\n        }\n        // else if (minute > 0) {\n        //   const temptime = `${this.stringFormat(minute)}:${this.stringFormat(second)}`;\n        //   text += `[color=#FF0000]${temptime}[/color]`;\n        // } else if (second > 0) {\n        //   const temptime = `${this.stringFormat(second)}`;\n        //   text += `[color=#FF0000]${temptime}[/color]`;\n        // }\n        //  else {\n        //   const temptime = `${i18n.t("furni_bag.expires")}`;\n        //   text += `[color=#FF0000]${temptime}[/color]`;\n        // }\n        return text;\n    };\n    DetailBubble.prototype.stringFormat = function (num) {\n        var str = num + "";\n        if (str.length <= 1) {\n            str = "0" + str;\n        }\n        return str;\n    };\n    DetailBubble.prototype.getComparTag = function (value) {\n        var tag = "";\n        switch (value) {\n            case 1:\n                tag = "=";\n            case 2:\n                tag = "!=";\n            case 3:\n                tag = "<=";\n            case 4:\n                tag = "<";\n            case 5:\n                tag = ">=";\n            case 6:\n                tag = ">";\n            default:\n                tag = "=";\n        }\n        return tag;\n    };\n    return DetailBubble;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaMarket/ElementDetail.ts?')},"./src/pica/render/ui/PicaMarket/NumberCounter.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NumberCounter", function() { return NumberCounter; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar NumberCounter = /** @class */ (function (_super) {\n    __extends(NumberCounter, _super);\n    function NumberCounter(scene, key, x, y, dpr, zoom) {\n        if (dpr === void 0) { dpr = 1; }\n        if (zoom === void 0) { zoom = 1; }\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.pressDelay = 500;\n        _this.mMinNum = 1;\n        _this.mMaxNum = 99;\n        _this.zoom = 1;\n        _this.zoom = zoom;\n        _this.mBackground = _this.scene.make.image({\n            key: key,\n            frame: "input_bg"\n        });\n        _this.mBackground.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mReduceBtn = _this.scene.make.image({\n            key: key,\n            frame: "reduce",\n        }, false).setInteractive();\n        _this.mReduceBtn.x = -(_this.mBackground.displayWidth / 2) - _this.mReduceBtn.displayWidth / 2 - 7 * dpr;\n        _this.mReduceBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mIncreaseBtn = _this.scene.make.image({\n            key: key,\n            frame: "increase",\n        }, false).setInteractive();\n        _this.mIncreaseBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mIncreaseBtn.x = (_this.mBackground.displayWidth + _this.mIncreaseBtn.displayWidth) / 2 + 7 * dpr;\n        _this.mLabelInput = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["LabelInput"](_this.scene, {\n            x: 0,\n            y: 0,\n            width: _this.mBackground.height,\n            height: 26 * dpr,\n            fontSize: 14 * dpr + "px",\n            color: "#666666",\n            align: "center",\n            type: "number",\n        });\n        _this.mLabelInput.setOrigin(0.5);\n        _this.mLabelInput.setText("1");\n        _this.mLabelInput.on("textchange", _this.onTextChangeHandler, _this);\n        _this.mLabelInput.on("blur", _this.onTextBlurHandler, _this);\n        _this.mLabelInput.on("focus", _this.onFocusHandler, _this);\n        _this.add([_this.mBackground, _this.mLabelInput, _this.mReduceBtn, _this.mIncreaseBtn]);\n        _this.setSize(_this.mIncreaseBtn.displayWidth + _this.mReduceBtn.displayWidth + _this.mBackground.displayWidth + 14 * dpr, _this.mBackground.displayHeight);\n        return _this;\n    }\n    NumberCounter.prototype.resize = function () {\n    };\n    NumberCounter.prototype.setMinNumber = function (val) {\n        this.mMinNum = val;\n    };\n    NumberCounter.prototype.setMaxNumber = function (val) {\n        this.mMaxNum = val;\n    };\n    NumberCounter.prototype.addActionListener = function () {\n        this.mIncreaseBtn.on("pointerup", this.onIncreaseHandler, this);\n        this.mIncreaseBtn.on("pointerdown", this.onIncreaseDownHandler, this);\n        this.mReduceBtn.on("pointerup", this.onReduceHandler, this);\n        this.mReduceBtn.on("pointerdown", this.onReduceDownHandler, this);\n    };\n    NumberCounter.prototype.removeActionListener = function () {\n        this.mIncreaseBtn.off("pointerup", this.onIncreaseHandler, this);\n        this.mIncreaseBtn.off("pointerdown", this.onIncreaseDownHandler, this);\n        this.mReduceBtn.off("pointerup", this.onReduceHandler, this);\n        this.mReduceBtn.off("pointerdown", this.onReduceDownHandler, this);\n        if (this.scene)\n            this.scene.input.off("pointerdown", this.pointerDownHandler, this);\n    };\n    NumberCounter.prototype.setCounter = function (num) {\n        if (isNaN(num) || num < 0) {\n            num = 0;\n        }\n        if (num > this.mMaxNum) {\n            num = this.mMaxNum;\n        }\n        this.mLabelInput.setText(num.toString());\n        this.emit("change", num);\n    };\n    NumberCounter.prototype.setBlur = function () {\n        this.mLabelInput.setBlur();\n    };\n    NumberCounter.prototype.destroy = function () {\n        this.removeActionListener();\n        _super.prototype.destroy.call(this);\n    };\n    Object.defineProperty(NumberCounter.prototype, "number", {\n        get: function () {\n            return parseInt(this.mLabelInput.text, 10);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NumberCounter.prototype.onReduceHandler = function () {\n        var num = parseInt(this.mLabelInput.text, 10);\n        num--;\n        if (num < this.mMinNum)\n            num = this.mMinNum;\n        this.setCounter(num);\n        this.clearTween();\n    };\n    NumberCounter.prototype.onIncreaseHandler = function () {\n        var num = parseInt(this.mLabelInput.text, 10);\n        this.setCounter(++num);\n        this.clearTween();\n    };\n    NumberCounter.prototype.onTextChangeHandler = function () {\n        this.setCounter(parseInt(this.mLabelInput.text, 10));\n    };\n    NumberCounter.prototype.onTextBlurHandler = function () {\n        var num = parseInt(this.mLabelInput.text, 0);\n        if (num < this.mMinNum) {\n            num = this.mMinNum;\n        }\n        else if (num > this.mMaxNum) {\n            num = this.mMaxNum;\n        }\n        this.mLabelInput.setText(num.toString());\n        this.emit("change", num);\n    };\n    NumberCounter.prototype.onReduceDownHandler = function () {\n        var _this = this;\n        this.pressTimeout = setTimeout(function () {\n            _this.delayTweenNumber(_this.mMinNum);\n        }, this.pressDelay);\n        this.setBlur();\n    };\n    NumberCounter.prototype.onIncreaseDownHandler = function () {\n        var _this = this;\n        this.pressTimeout = setTimeout(function () {\n            _this.delayTweenNumber(_this.mMaxNum);\n        }, this.pressDelay);\n        this.setBlur();\n    };\n    NumberCounter.prototype.delayTweenNumber = function (to) {\n        var _this = this;\n        var number = this.number;\n        this.tween = this.scene.tweens.addCounter({\n            from: number,\n            to: to,\n            onUpdate: function () {\n                _this.setCounter(_this.tween.getValue() >> 0);\n            },\n            duration: Math.abs(number - to) * 50\n        });\n    };\n    NumberCounter.prototype.clearTween = function () {\n        clearTimeout(this.pressTimeout);\n        if (this.tween) {\n            this.tween.stop();\n            this.tween = undefined;\n        }\n    };\n    NumberCounter.prototype.pointerDownHandler = function (pointer) {\n        if (!this.checkPointerInBounds(this, pointer)) {\n            this.mLabelInput.setBlur();\n            this.scene.input.off("pointerdown", this.pointerDownHandler, this);\n        }\n    };\n    NumberCounter.prototype.onFocusHandler = function () {\n        this.scene.input.on("pointerdown", this.pointerDownHandler, this);\n    };\n    NumberCounter.prototype.checkPointerInBounds = function (gameObject, pointer, isCell) {\n        if (isCell === void 0) { isCell = false; }\n        if (!this.mRectangle) {\n            this.mRectangle = new Phaser.Geom.Rectangle(0, 0, 0, 0);\n        }\n        var zoom = this.zoom ? this.zoom : 1;\n        this.mRectangle.left = -gameObject.width / 2;\n        this.mRectangle.right = gameObject.width / 2;\n        this.mRectangle.top = -gameObject.height / 2;\n        this.mRectangle.bottom = gameObject.height / 2;\n        if (pointer) {\n            var worldMatrix = gameObject.getWorldTransformMatrix();\n            var x = (pointer.x - worldMatrix.tx) / zoom;\n            var y = (pointer.y - worldMatrix.ty) / zoom;\n            if (this.mRectangle.left <= x && this.mRectangle.right >= x && this.mRectangle.top <= y && this.mRectangle.bottom >= y) {\n                return true;\n            }\n            return false;\n        }\n        return false;\n    };\n    return NumberCounter;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaMarket/NumberCounter.ts?')},"./src/pica/render/ui/PicaMarket/PicaMarketPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaMarketPanel", function() { return PicaMarketPanel; });\n/* harmony import */ var _ElementDetail__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ElementDetail */ "./src/pica/render/ui/PicaMarket/ElementDetail.ts");\n/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./item */ "./src/pica/render/ui/PicaMarket/item.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_7__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar PicaMarketPanel = /** @class */ (function (_super) {\n    __extends(PicaMarketPanel, _super);\n    function PicaMarketPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICAMARKET_NAME;\n        _this.mSubTabs = [];\n        _this.mTabs = [];\n        return _this;\n    }\n    PicaMarketPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mSelectItem.on("buyItem", this.onBuyItemHandler, this);\n        this.mSelectItem.on("popItemCard", this.onPopItemCardHandler, this);\n    };\n    PicaMarketPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mSelectItem.off("buyItem", this.onBuyItemHandler, this);\n        this.mSelectItem.off("popItemCard", this.onPopItemCardHandler, this);\n        //  this.mCloseBtn.off(ClickEvent.Tap, this.onCloseHandler, this);\n    };\n    PicaMarketPanel.prototype.resize = function (w, h) {\n        // super.resize(w, h);\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.setSize(width, height);\n        this.mTIle.x = width / 2;\n        var shelfHeight = 290 * this.dpr;\n        this.mBackgroundColor.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        this.mShelfContainer.setSize(width, shelfHeight);\n        this.mShelfContainer.setPosition(0, height - this.mShelfContainer.height);\n        this.mShelfBackground.clear();\n        this.mShelfBackground.fillStyle(0x02ccff);\n        this.mShelfBackground.fillRect(0, 0, this.mShelfContainer.width, this.mShelfContainer.height);\n        this.mShelfBackground.y = this.mSubCategeoriesContainer.y + 43 * this.dpr;\n        this.mSelectItem.resize(width, height);\n        this.mCategoriesBar.clear();\n        this.mCategoriesBar.fillStyle(0x3ee1ff);\n        this.mCategoriesBar.fillRect(0, 0, width, 40 * this.dpr);\n        this.mCategoriesBar.fillStyle(0x04b3d3);\n        this.mCategoriesBar.fillRect(0, 40 * this.dpr, width, 3 * this.dpr);\n        this.mSubCategeoriesContainer.setSize(width, 43 * this.dpr);\n    };\n    PicaMarketPanel.prototype.setCategories = function (content) {\n        if (!this.mCategoriesContainer) {\n            return;\n        }\n        this.mCategoriesContainer.removeAll(true);\n        var categorys = content.marketCategory;\n        this.mTabs = [];\n        var frame = this.scene.textures.getFrame(this.key, "categories_normal");\n        var w = 60;\n        var h = 65;\n        if (frame) {\n            w = frame.width;\n            h = frame.height;\n        }\n        var config0 = {\n            left: w / 2,\n            top: 12 * this.dpr,\n            right: 4 * this.dpr,\n            bottom: 2 * this.dpr\n        };\n        var group = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["CheckboxGroup"]();\n        var capW = 77 * this.dpr;\n        var capH = 38 * this.dpr;\n        for (var i = 0; i < categorys.length; i++) {\n            var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["NinePatchTabButton"](this.scene, capW, capH, this.key, "categories_normal", "categories_down", categorys[i].category.value, [config0], 1, 1);\n            // btn.removeAllListeners();\n            btn.setTextStyle({\n                fontSize: 18 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT,\n            });\n            this.mTabs[i] = btn;\n            btn.setData("category", categorys[i]);\n            btn.x = i * 80 * this.dpr + capW / 2;\n            btn.y = capH / 2;\n            // this.add(btn);\n        }\n        this.mCategoriesContainer.setSize(this.mTabs.length * capW, capH);\n        this.mShelfContainer.add(this.mTabs);\n        this.layoutCategories();\n        group.on("selected", this.onSelectCategoryHandler, this);\n        group.appendItemAll(this.mTabs);\n        group.selectIndex(0);\n    };\n    PicaMarketPanel.prototype.setProp = function (content) {\n        this.clearCategories(this.mItems);\n        this.mItems = [];\n        var commodities = content.commodities;\n        this.mPropGrid.setItems(commodities);\n        this.mPropGrid.layout();\n        this.mPropGrid.setT(0);\n        if (commodities.length > 0)\n            this.onSelectItemHandler(commodities[0]);\n    };\n    PicaMarketPanel.prototype.setCommodityResource = function (content) {\n        if (this.mSelectItem) {\n            this.mSelectItem.setResource(content);\n            this.mSelectItem.setData("display", content);\n        }\n    };\n    PicaMarketPanel.prototype.destroy = function () {\n        if (this.mSubCategorisScroll) {\n            this.mSubCategorisScroll.destroy();\n        }\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    PicaMarketPanel.prototype.onPropConfirmHandler = function (prop, count) {\n        this.render.renderEmitter(this.key + "_buyItem", prop);\n    };\n    PicaMarketPanel.prototype.layoutCategories = function () {\n        this.mCategoriesBar.y = this.mCategoriesContainer.height + this.mShelfContainer.y;\n        this.mSubCategeoriesContainer.addAt(this.mCategoriesBar, 0);\n        this.mPropContainer.y = this.mSubCategeoriesContainer.y + 43 * this.dpr + this.mSubCategeoriesContainer.height + 9 * this.dpr;\n        this.mShelfBackground.y = this.mSubCategeoriesContainer.y + 43 * this.dpr;\n        this.mSubCategorisScroll.y = this.mCategoriesBar.y + (25 * this.dpr);\n        this.randomCon.y = this.mSubCategorisScroll.y;\n        this.mPropGrid.y = this.mCategoriesBar.y + this.mSubCategeoriesContainer.height + this.mPropGrid.height * 0.5 + 5 * this.dpr;\n        this.mPropGrid.layout();\n        this.mSubCategorisScroll.layout();\n        this.mSubCategorisScroll.resetMask();\n        this.mPropGrid.resetMask();\n    };\n    PicaMarketPanel.prototype.preload = function () {\n        // this.scene.load.atlas(this.key, Url.getUIRes(this.dpr, "market/market"), Url.getUIRes(this.dpr, "market/market.json"));\n        this.addAtlas(this.key, "market/market.png", "market/market.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_6__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_6__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_6__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaMarketPanel.prototype.init = function () {\n        var _this = this;\n        if (this.mInitialized)\n            return;\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        this.mBackgroundColor = this.scene.make.graphics(undefined, false);\n        this.mBackgroundColor.fillGradientStyle(0x6f75ff, 0x6f75ff, 0x04cbff, 0x04cbff);\n        // this.mBackgroundColor.fillStyle(0x6f75ff);\n        this.mBackgroundColor.fillRect(0, 0, w, h);\n        this.add(this.mBackgroundColor);\n        this.mShelfContainer = this.scene.make.container({\n            x: (w / 2),\n            y: h\n        }, false).setSize(w, 290 * this.dpr);\n        var frame = this.scene.textures.getFrame(this.key, "bg");\n        var countW = Math.ceil(w / (frame.width));\n        var countH = Math.ceil((h - this.mShelfContainer.height + frame.height) / (frame.height));\n        for (var i = 0; i < countW; i++) {\n            for (var j = 0; j < countH; j++) {\n                var bg = this.scene.make.image({\n                    x: i * frame.width,\n                    y: j * frame.height,\n                    key: this.key,\n                    frame: "bg"\n                }, false);\n                bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n                this.add(bg);\n            }\n        }\n        this.mShelfBackground = this.scene.make.graphics(undefined, false);\n        this.mCloseBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_6__["UIAtlasName"].uicommon, "back_arrow", "back_arrow");\n        this.mCloseBtn.setPosition(21 * this.dpr, 35 * this.dpr);\n        this.mCloseBtn.setInteractive(new Phaser.Geom.Rectangle(-28 * this.dpr, -20 * this.dpr, 56 * this.dpr, 40 * this.dpr), Phaser.Geom.Rectangle.Contains);\n        this.mCloseBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_2__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.mPropContainer = this.scene.make.container(undefined, false);\n        this.mCategoriesContainer = this.scene.make.container(undefined, false);\n        this.mSubCategeoriesContainer = this.scene.make.container(undefined, false);\n        this.mShelfContainer.add([this.mShelfBackground, this.mCategoriesContainer, this.mPropContainer]);\n        this.add([this.mShelfContainer, this.mSubCategeoriesContainer]);\n        this.mSelectItem = new _ElementDetail__WEBPACK_IMPORTED_MODULE_0__["ElementDetail"](this.scene, this.render, this.key, this.dpr, this.scale);\n        this.mSelectItem.setSize(w, h - this.mShelfContainer.height);\n        this.mTIle = this.scene.make.text({\n            text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("market.title"),\n            y: 30 * this.dpr,\n            style: {\n                fontSize: 36 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT\n            }\n        }).setOrigin(0.5);\n        this.add([this.mTIle, this.mSelectItem, this.mCloseBtn]);\n        _super.prototype.init.call(this);\n        this.mCategoriesBar = this.scene.make.graphics(undefined, false);\n        var capW = 56 * this.dpr;\n        var capH = 41 * this.dpr;\n        var config = {\n            x: w / 2,\n            y: 0,\n            table: {\n                width: w,\n                height: 50 * this.dpr,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                zoom: this.scale,\n                mask: false\n            },\n            scrollMode: 1,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["TextButton"](scene, _this.dpr);\n                }\n                var subCategories = cellContainer.getData("item");\n                if (subCategories !== item) {\n                    cellContainer.setText(item.value);\n                    cellContainer.setData({ item: item });\n                    if (item && _this.mPreSubCategoris && _this.mPreSubCategoris.key === item.key) {\n                        cellContainer.changeDown();\n                    }\n                    else {\n                        cellContainer.changeNormal();\n                    }\n                }\n                return cellContainer;\n            },\n        };\n        this.mSubCategorisScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["GameGridTable"](this.scene, config);\n        this.mSubCategorisScroll.on("cellTap", function (cell, index) {\n            _this.onSelectSubCategoryHandler(cell);\n        });\n        this.add(this.mSubCategorisScroll);\n        this.randomCon = this.scene.make.container(undefined, false);\n        this.randomCon.x = w * 0.5;\n        this.randomCon.visible = false;\n        this.add(this.randomCon);\n        this.randomRefeshTime = this.scene.make.text({\n            x: -w * 0.5 + 10 * this.dpr, y: -12 * this.dpr,\n            text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("market.refreshtime"),\n            style: {\n                color: "#007AAE",\n                fontSize: 13 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT\n            }\n        }).setOrigin(0, 0.5);\n        var btnWidth = 80 * this.dpr, btnHeight = 30 * this.dpr;\n        this.randomRefreshBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["NineSliceButton"](this.scene, w * 0.5, this.randomRefeshTime.y, btnWidth, btnHeight, picaRes__WEBPACK_IMPORTED_MODULE_6__["UIAtlasKey"].commonKey, "button_g", utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("market.refresh"), this.dpr, this.scale, {\n            left: 15 * this.dpr,\n            top: 15 * this.dpr,\n            right: 15 * this.dpr,\n            bottom: 15 * this.dpr\n        });\n        this.randomRefreshBtn.x = w * 0.5 - this.randomRefreshBtn.width * 0.5 - 10 * this.dpr;\n        this.randomRefreshBtn.setTextOffset(0, 5 * this.dpr);\n        this.randomRefreshBtn.setTextStyle({\n            color: "#0",\n            fontSize: 13 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT\n        });\n        this.randomRefreshBtn.setFontStyle("bold");\n        this.refreshIcon = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_6__["UIAtlasKey"].commonKey, frame: "iv_coin" }).setScale(0.8);\n        this.refreshIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.refreshIcon.setPosition(-10 * this.dpr, -8 * this.dpr);\n        this.refreshNeedCount = this.scene.make.text({\n            x: 0 * this.dpr, y: this.refreshIcon.y,\n            text: "100",\n            style: {\n                fontSize: 10 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT\n            }\n        }).setOrigin(0, 0.5);\n        this.randomRefreshBtn.add([this.refreshIcon, this.refreshNeedCount]);\n        this.randomCon.add([this.randomRefeshTime, this.randomRefreshBtn]);\n        var propFrame = this.scene.textures.getFrame(this.key, "border");\n        var cellWidth = propFrame.width + 6 * this.dpr;\n        var cellHeight = propFrame.height + 10 * this.dpr;\n        var propGridConfig = {\n            x: w / 2 + 4 * this.dpr,\n            y: 0,\n            table: {\n                width: w,\n                height: 224 * this.dpr,\n                columns: 3,\n                cellWidth: cellWidth,\n                cellHeight: cellHeight,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0,\n                zoom: this.scale,\n                mask: false\n            },\n            scroller: {\n                backDeceleration: false,\n                slidingDeceleration: false\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new _item__WEBPACK_IMPORTED_MODULE_1__["MarketItem"](scene, 0, 0, _this.dpr, _this.scale);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setProp(item);\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["GameGridTable"](this.scene, propGridConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on("cellTap", function (cell) {\n            var data = cell.getData("item");\n            if (data) {\n                _this.onSelectItemHandler(data);\n            }\n        });\n        this.add(this.mPropGrid);\n        this.resize(0, 0);\n        this.render.renderEmitter(this.key + "_getCategories");\n    };\n    PicaMarketPanel.prototype.setSelect = function () {\n        // this.mSelectItem.setProp();\n    };\n    PicaMarketPanel.prototype.clearCategories = function (tabs) {\n        if (!tabs) {\n            return;\n        }\n        tabs.map(function (tab) { return tab.destroy(); });\n        tabs = undefined;\n    };\n    PicaMarketPanel.prototype.onSelectCategoryHandler = function (gameobject) {\n        if (!this.mSubCategeoriesContainer) {\n            return;\n        }\n        this.mSubCategorisScroll.setT(0);\n        this.mPreSubCategoris = null;\n        this.clearCategories(this.mSubTabs);\n        var subcategory = gameobject.getData("category"); // op_def.IMarketCategory\n        this.mSelectedCategories = gameobject;\n        if (subcategory) {\n            var subcategorys = subcategory.subcategory;\n            if (this.mSubCategorisScroll) {\n                this.mSubCategorisScroll.setItems(subcategorys);\n                this.mSubCategorisScroll.layout();\n                var cell = this.mSubCategorisScroll.getCell(0);\n                this.onSelectSubCategoryHandler(cell.container);\n            }\n        }\n    };\n    PicaMarketPanel.prototype.onSelectSubCategoryHandler = function (gameobject) {\n        if (!this.mSelectedCategories) {\n            return;\n        }\n        if (!(gameobject instanceof gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["TextButton"])) {\n            return;\n        }\n        var categories = this.mSelectedCategories.getData("category"); // op_def.IMarketCategory\n        if (!categories) {\n            return;\n        }\n        var subCategories = gameobject.getData("item");\n        if (!subCategories) {\n            return;\n        }\n        this.queryProp(categories.category.key, subCategories.key);\n        this.mPreSubCategoris = subCategories;\n        if (this.mPreSubCategorisItem)\n            this.mPreSubCategorisItem.changeNormal();\n        gameobject.changeDown();\n        this.mPreSubCategorisItem = gameobject;\n    };\n    PicaMarketPanel.prototype.queryProp = function (category, subCategory) {\n        this.render.renderEmitter(this.key + "_queryProp", { page: 1, category: category, subCategory: subCategory });\n    };\n    PicaMarketPanel.prototype.onSelectItemHandler = function (prop) {\n        this.mSelectItem.setProp(prop);\n        this.mSelectItem.setData("propdata", prop);\n        if (!prop.suitType || prop.suitType === "") {\n            // this.render.renderEmitter(this.key + "_queryPropResource", prop);\n            var content = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_7__["op_client"].OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE_ITEM_RESOURCE();\n            content.display = prop.animationDisplay ? prop.animationDisplay : prop.display;\n            content.animations = prop.animations;\n            this.setCommodityResource(content);\n        }\n        else {\n            var content = this.getCommodityResource(prop);\n            this.setCommodityResource(content);\n        }\n    };\n    PicaMarketPanel.prototype.onBuyItemHandler = function (prop) {\n        var itemdata = this.getBuyPackageData();\n        itemdata.count = prop.quantity;\n        var data = itemdata;\n        var title = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("market.payment");\n        var resource = this.mSelectItem.getData("display");\n        var resultHandler = { key: this.key, confirmFunc: "onPropConfirmHandler", confirmAddData: prop };\n        this.showPropFun({ resultHandler: resultHandler, data: data, resource: resource, slider: false, title: title });\n    };\n    PicaMarketPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(this.key + "_close");\n    };\n    PicaMarketPanel.prototype.onPopItemCardHandler = function (prop, display) {\n        if (prop) {\n            this.render.renderEmitter(this.key + "_popItemCard", { prop: prop, display: display });\n        }\n    };\n    PicaMarketPanel.prototype.getBuyPackageData = function () {\n        var propdata = this.mSelectItem.getData("propdata"); // op_client.IMarketCommodity\n        var itemdata = { id: null, sellingPrice: null, name: null, shortName: null, count: 1 }; // op_client.CountablePackageItem.create()\n        itemdata.id = propdata.id;\n        itemdata.sellingPrice = propdata.price[0];\n        itemdata.name = propdata.name;\n        itemdata.shortName = propdata.shortName;\n        return itemdata;\n    };\n    PicaMarketPanel.prototype.showPropFun = function (config) {\n        this.render.mainPeer.showMediator(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICAPROPFUN_NAME, true, config);\n    };\n    PicaMarketPanel.prototype.getCommodityResource = function (data) {\n        var content = {};\n        content.avatar = structure__WEBPACK_IMPORTED_MODULE_4__["AvatarSuitType"].createAvatarBySn(data.suitType, data.sn, data.slot, data.tag, data.version);\n        content.suits = [{ suit_type: data.suitType, sn: data.sn, tag: data.tag, version: data.version }];\n        return content;\n    };\n    return PicaMarketPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_3__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaMarket/PicaMarketPanel.ts?')},"./src/pica/render/ui/PicaMarket/item.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MarketItem", function() { return MarketItem; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar MarketItem = /** @class */ (function (_super) {\n    __extends(MarketItem, _super);\n    function MarketItem(scene, x, y, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.zoom = 1;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.mBackground = _this.scene.make.image({\n            key: structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAMARKET_NAME,\n            frame: "border"\n        }, false).setOrigin(0);\n        _this.mBackground.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mBorder = _this.scene.make.image({\n            x: 3 * dpr,\n            y: 3 * dpr,\n            key: structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAMARKET_NAME,\n            frame: "item_border"\n        }, false).setOrigin(0);\n        _this.mBorder.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mPropImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](scene, 0, 0);\n        _this.mPropImage.scale = _this.dpr / _this.zoom;\n        _this.mNickName = _this.scene.make.text({\n            x: 62 * _this.dpr,\n            y: 6 * _this.dpr,\n            style: {\n                fontSize: 13 * _this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n                color: "#3399cc"\n            }\n        }, false);\n        _this.mCoinIcon = _this.scene.make.image({\n            x: 45 * _this.dpr,\n            y: 40 * _this.dpr,\n            key: structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAMARKET_NAME,\n        }, false).setOrigin(0);\n        var priceBg = _this.scene.make.image({\n            x: 62 * _this.dpr,\n            y: 39 * _this.dpr,\n            key: structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAMARKET_NAME,\n            frame: "price_border"\n        }, false).setOrigin(0);\n        _this.mPriceText = _this.scene.make.text({\n            x: 92 * _this.dpr,\n            y: 49 * _this.dpr,\n            style: {\n                fontSize: 13 * _this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].NUMBER,\n                color: "#996600"\n            }\n        }).setOrigin(0.5);\n        _this.mTagIcon = _this.scene.make.image({\n            key: structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAMARKET_NAME,\n            frame: "tip_red",\n            x: -86 * _this.dpr,\n            y: -34 * _this.dpr\n        }, false).setOrigin(0);\n        _this.add([_this.mBackground, _this.mBorder, _this.mPropImage, _this.mNickName, priceBg, _this.mCoinIcon, _this.mPriceText]);\n        _this.setSize(_this.mBackground.displayWidth, _this.mBackground.displayHeight);\n        return _this;\n    }\n    MarketItem.prototype.setProp = function (content) {\n        this.mProp = content;\n        if (content.icon) {\n            var url = utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getOsdRes(content.icon || content.texturePath);\n            this.mPropImage.load(url, this, this.onPropLoadComplete);\n        }\n        else {\n            utils__WEBPACK_IMPORTED_MODULE_2__["Logger"].getInstance().error(content.name + " : " + content.id + " icon value is empty");\n        }\n        this.mPropImage.x = this.mBorder.x + this.mBorder.displayWidth / 2;\n        this.mPropImage.y = this.mBorder.y + this.mBorder.displayHeight / 2;\n        var nickname = content.shortName || content.name;\n        if (nickname.length > 4) {\n            var maxWidth = 50 * this.dpr;\n            for (var i = 4; i < nickname.length; i++) {\n                var text = nickname.slice(0, i);\n                var width = this.mNickName.setText(text).width;\n                if (width > maxWidth) {\n                    text += "...";\n                    nickname = text;\n                    break;\n                }\n            }\n        }\n        this.mNickName.setText(nickname);\n        this.mPriceText.setText(content.price[0].price.toString());\n        var coinIcon = utils__WEBPACK_IMPORTED_MODULE_2__["Coin"].getIcon(content.price[0].coinType);\n        this.mCoinIcon.setFrame(coinIcon);\n    };\n    MarketItem.prototype.onPropLoadComplete = function () {\n        if (this.mPropImage) {\n            var texture = this.mPropImage.texture;\n            if (texture) {\n                texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n            }\n        }\n    };\n    MarketItem.prototype.onPointerUpHandler = function () {\n        this.emit("select", this.mProp);\n    };\n    return MarketItem;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaMarket/item.ts?')},"./src/pica/render/ui/PicaMessageBox/PicaMessageBoxPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaMessageBoxPanel", function() { return PicaMessageBoxPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaMessageBoxPanel = /** @class */ (function (_super) {\n    __extends(PicaMessageBoxPanel, _super);\n    function PicaMessageBoxPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAMESSAGEBOX_NAME;\n        return _this;\n    }\n    PicaMessageBoxPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        var data = param;\n        this.mButtons = [];\n        if (data) {\n            if (data.text && data.text[0]) {\n                this.mText.setText(data.text[0].text);\n                this.mText.x = -this.mText.width / 2;\n                this.mText.y = -this.mText.height;\n            }\n            if (data.title) {\n                this.mTitleLabel.setText(data.title.text);\n            }\n        }\n        var buttons = data.button.sort(function (a, b) {\n            if (a.param > b.param)\n                return 1;\n            else\n                return -1;\n        });\n        if (buttons) {\n            var btnWid = 114 * this.dpr;\n            var btnHei = 40 * this.dpr;\n            var w = (this.width - 30 * this.dpr) / buttons.length;\n            this.mButtonContaier.y = this.height / 2 - btnHei;\n            var frame = this.scene.textures.getFrame(this.key, "yellow_btn_normal");\n            if (!frame) {\n                return;\n            }\n            var config = {\n                left: 13 * this.dpr,\n                top: 13 * this.dpr,\n                bottom: frame.width - 2 - 13 * this.dpr,\n                right: frame.height - 2 - 13 * this.dpr\n            };\n            var totalW = w * buttons.length;\n            var posx = -totalW * 0.5;\n            // tslint:disable-next-line:prefer-for-of\n            for (var i = 0; i < buttons.length; i++) {\n                var txt = buttons[i] ? buttons[i].text : "";\n                var paramn = buttons[i].param;\n                var imgframe = paramn === 1 ? "yellow_btn" : "red_btn";\n                var color = (paramn === 1 ? utils__WEBPACK_IMPORTED_MODULE_3__["Color"].brownish : utils__WEBPACK_IMPORTED_MODULE_3__["Color"].white);\n                var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.mScene, 0, 0, btnWid, btnHei, this.key, imgframe, txt, this.dpr, this.scale, config, undefined, buttons[i]);\n                btn.setTextStyle({\n                    fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                    fontSize: 16 * this.dpr,\n                    color: color\n                });\n                btn.setFontStyle("bold");\n                btn.x = posx + w * 0.5;\n                posx += w;\n                this.mButtons.push(btn);\n                btn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n            }\n            this.mButtonContaier.add(this.mButtons);\n            this.mButtonContaier.x = 0;\n        }\n        this.resize(0, 0);\n    };\n    PicaMessageBoxPanel.prototype.resize = function (w, h) {\n        var width = this.scene.cameras.main.width;\n        var height = this.scene.cameras.main.height;\n        this.x = width / 2;\n        this.y = height / 2;\n        _super.prototype.resize.call(this, w, h);\n        this.border.setInteractive(new Phaser.Geom.Rectangle(-width * 0.5, -height * 0.5, width, height), Phaser.Geom.Rectangle.Contains);\n    };\n    PicaMessageBoxPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "pica_message_box/pica_message_box.png", "pica_message_box/pica_message_box.json");\n        _super.prototype.preload.call(this);\n    };\n    PicaMessageBoxPanel.prototype.init = function () {\n        var _a = this.scene.cameras.main, width = _a.width, height = _a.height;\n        var border = this.scene.make.graphics(undefined, false);\n        border.fillStyle(0, 0.6);\n        border.fillRect(-width * 0.5, -height * 0.5, width, height);\n        this.add(border);\n        this.border = border;\n        var background = this.scene.make.image({ key: this.key, frame: "bg_universal_box" });\n        this.add(background);\n        this.setSize(background.width, background.height);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "close");\n        this.closeBtn.setDisplaySize(28 * this.dpr, 28 * this.dpr);\n        this.closeBtn.setPosition(this.width * 0.5 - 5 * this.dpr, -this.height * 0.5 + this.dpr * 4);\n        this.closeBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onCloseHandler, this);\n        this.add(this.closeBtn);\n        this.mButtonContaier = this.scene.make.container(undefined, false);\n        var title = this.scene.make.image({\n            y: -background.height / 2,\n            key: this.key,\n            frame: "title"\n        });\n        title.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mTitleLabel = this.scene.make.text({\n            y: title.y - 6 * this.dpr,\n            style: {\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                fontSize: 16 * this.dpr,\n                color: "#3366cc"\n            }\n        }, false).setOrigin(0.5);\n        this.mText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.mScene, 0, 0, "", {\n            fontSize: 14 * this.dpr + "px",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            color: "#000000",\n            origin: { x: 0.5, y: 0.5 },\n            wrap: {\n                mode: "char",\n                width: this.width\n            },\n            align: "center"\n        });\n        // this.mText.x = -this.mWidth / 2 + 10;\n        // this.mText.y = -this.mHeight / 2 + 10;\n        this.add([background, title, this.mTitleLabel, this.mText, this.mButtonContaier]);\n        _super.prototype.init.call(this);\n        this.resize(width, height);\n        this.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n    };\n    PicaMessageBoxPanel.prototype.onClickHandler = function (pointer, gameobject) {\n        if (!gameobject) {\n            return;\n        }\n        var btn = gameobject.getBtnData();\n        if (!btn) {\n            return;\n        }\n        if (btn.local) {\n            if (btn.clickhandler) {\n                var panel = this.render.uiManager.getPanel("" + btn.clickhandler.key);\n                if (panel && btn.clickhandler.clickfun) {\n                    var clickfun = panel[btn.clickhandler.clickfun];\n                    clickfun.apply(panel, btn.data);\n                }\n            }\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_hide");\n        }\n        else {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_click", btn);\n        }\n    };\n    PicaMessageBoxPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_hide");\n    };\n    return PicaMessageBoxPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaMessageBox/PicaMessageBoxPanel.ts?')},"./src/pica/render/ui/PicaMineCar/PicaMineCarPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaMineCarPanel", function() { return PicaMineCarPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaMineCarPanel = /** @class */ (function (_super) {\n    __extends(PicaMineCarPanel, _super);\n    function PicaMineCarPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        _this.mFilterItem = [];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAMINECAR_NAME;\n        _this.disInteractive();\n        return _this;\n    }\n    PicaMineCarPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(w, h);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, w, h);\n        this.mBg.x = w / 2;\n        this.mBg.y = this.mBg.displayHeight / 2 + 107 * this.dpr;\n        this.carIcon.x = this.mBg.x / 2 - 4 * this.dpr;\n        this.carIcon.y = this.mBg.y - (this.mBg.displayHeight - this.carIcon.displayHeight) / 2 + 4 * this.dpr;\n        this.mCloseBtn.x = this.mBg.x + this.mBg.displayWidth / 2;\n        this.mCloseBtn.y = this.mBg.y - (this.mBg.displayHeight - this.mCloseBtn.displayHeight) / 2 + 10 * this.dpr;\n        this.mCounter.x = this.mBg.x / 2;\n        this.mCounter.y = this.mBg.y + (this.mBg.displayHeight - this.mDiscardBtn.displayHeight) / 2 - 16 * this.dpr;\n        this.mCounter.setResolution(this.dpr);\n        this.mTips.x = this.mBg.x + 20 * this.dpr;\n        this.mTips.y = this.mBg.y - this.mBg.displayHeight / 2 - 15 * this.dpr;\n        this.mDiscardBtn.x = this.mBg.x + this.mBg.displayWidth / 2 - this.mDiscardBtn.displayWidth / 2 - 9 * this.dpr;\n        this.mDiscardBtn.y = this.mBg.y + this.mBg.displayHeight / 2 - this.mDiscardBtn.displayHeight / 2 - 9 * this.dpr;\n        this.categoriesBg.x = this.mBg.x;\n        this.categoriesBg.y = this.mBg.y - this.mBg.displayHeight / 2 + this.categoriesBg.displayHeight / 2 + 38 * this.dpr;\n        this.mPropGrid.refreshPos(this.mBg.x + 2 * this.dpr, this.mBg.y + 6 * this.dpr);\n        this.mCategoryTable.refreshPos(this.mBg.x, this.mBg.y - this.mBg.displayHeight / 2 + this.categoriesBg.displayHeight / 2 + 44 * this.dpr);\n        this.mPropGrid.resetMask();\n        this.mCategoryTable.resetMask();\n    };\n    PicaMineCarPanel.prototype.show = function (param) {\n        _super.prototype.show.call(this, param);\n    };\n    PicaMineCarPanel.prototype.setCategories = function (subcategorys) {\n        this.mPreSelectedCategorie = undefined;\n        this.mPreSelectedCategorieData = undefined;\n        this.mCategoryTable.setItems(subcategorys);\n    };\n    PicaMineCarPanel.prototype.setCategoriesData = function (subcategorys) {\n        this.mDiscardBtn.changeState(DiscardEnum.Discard);\n        this.setCategories(subcategorys);\n    };\n    PicaMineCarPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.removeListen();\n        this.mCloseBtn.on("pointerup", this.onCloseHandler, this);\n        this.mDiscardBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.enterDiscardMode, this);\n    };\n    PicaMineCarPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.off("pointerup", this.onCloseHandler, this);\n        this.mDiscardBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.enterDiscardMode, this);\n    };\n    PicaMineCarPanel.prototype.setProp = function (items, limit) {\n        var mineItem = items || [];\n        this.mLimit = limit || 0;\n        this.mFilterItem.length = 0;\n        for (var _i = 0, mineItem_1 = mineItem; _i < mineItem_1.length; _i++) {\n            var item = mineItem_1[_i];\n            this.mFilterItem.push({ item: item });\n        }\n        var len = this.mLimit - this.mFilterItem.length;\n        for (var i = 0; i < len; i++) {\n            this.mFilterItem.push({ item: null });\n        }\n        this.mPropGrid.setItems(this.mFilterItem);\n        this.mCounter.setText(mineItem.length + "/" + this.mLimit);\n    };\n    PicaMineCarPanel.prototype.destroy = function () {\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        if (this.mCategoryTable) {\n            this.mCategoryTable.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    PicaMineCarPanel.prototype.queryRefreshPackage = function () {\n        if (this.mPreSelectedCategorieData) {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_querypackage", { type: 4, key: this.mPreSelectedCategorieData.key }); // op_pkt_def.PKT_PackageType.MinePackage\n        }\n    };\n    PicaMineCarPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "mine_car/mine_car.png", "mine_car/mine_car.json");\n        _super.prototype.preload.call(this);\n    };\n    PicaMineCarPanel.prototype.init = function () {\n        var _this = this;\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        this.setSize(w, h);\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, w, h);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        this.mBg = this.scene.make\n            .image({\n            key: this.key,\n            frame: "bg.png",\n        });\n        this.mBg.x = w / 2;\n        this.mBg.y = h / 2;\n        // this.mPanel.setSize(bg.displayWidth, bg.displayHeight);\n        this.carIcon = this.scene.make\n            .image({\n            key: this.key,\n            frame: "car_icon.png",\n        }, false);\n        this.carIcon.x = (-(this.mBg.width - this.carIcon.width)) / 2 + 28 * this.dpr;\n        this.carIcon.y = (-(this.mBg.height - this.carIcon.height / 2)) / 2 + 10 * this.dpr;\n        this.mCloseBtn = this.scene.make\n            .image({\n            key: this.key,\n            frame: "close_btn.png",\n        }, false);\n        this.mCloseBtn.setInteractive();\n        this.mCloseBtn.x = (this.mBg.width) / 2;\n        this.mCloseBtn.y = (-(this.mBg.height - this.mCloseBtn.height)) / 2 + 10 * this.dpr;\n        this.mCloseBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mCounter = this.scene.make.text({\n            text: "25/50",\n            style: {\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                color: "#FFFFFF",\n                fontSize: 12 * this.dpr,\n            },\n        }, false);\n        this.mCounter.x = -this.displayWidth / 2 + 17 * this.dpr;\n        this.mCounter.y = this.displayHeight / 2 - 18 * this.dpr - this.mCounter.height;\n        this.mCounter.setFontStyle("bold");\n        this.mTips = new Tips(this.scene, this.key, this.dpr);\n        this.mTips.x = 40 * this.dpr;\n        this.mTips.y = (-(this.mBg.height + this.mTips.height)) / 2 + 15 * this.dpr;\n        this.mDiscardBtn = new DiscardButton(this.scene, this.key, "yellow_btn.png", undefined, "");\n        (this.mDiscardBtn.x = ((this.mBg.width - this.mDiscardBtn.displayWidth)) / 2 - 17 * this.dpr),\n            (this.mDiscardBtn.y = ((this.mBg.height - this.mDiscardBtn.displayHeight)) / 2 - 10 * this.dpr),\n            this.mDiscardBtn.setTextStyle({\n                color: "##996600",\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                fontSize: 10 * this.dpr,\n            });\n        this.mDiscardBtn.changeState(DiscardEnum.Discard);\n        this.categoriesBg = this.scene.make\n            .image({\n            key: this.key,\n            frame: "nav_bg.png",\n        });\n        this.categoriesBg.y = -(this.displayHeight - this.categoriesBg.displayHeight) / 2 + 36 * this.dpr;\n        var propFrame = this.scene.textures.getFrame(this.key, "item_border.png");\n        var capW = propFrame.width + 4 * this.dpr;\n        var capH = propFrame.height + 4 * this.dpr;\n        // this.cellHeight = capH;\n        var gridW = 236 * this.dpr;\n        var propConfig = {\n            x: -7 * this.dpr,\n            y: -16 * this.dpr,\n            table: {\n                width: gridW,\n                height: 295 * this.dpr,\n                columns: 4,\n                cellsCount: 25,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0,\n                zoom: this.scale\n                // mask: false\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new PackageItem(scene, _this.key, _this.dpr);\n                }\n                // if (cellContainer.itemData !== item) {\n                cellContainer.setData({ item: item });\n                cellContainer.setProp(item);\n                // }\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, propConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on("cellTap", function (cell) {\n            // const item = cell.getData("item");\n            // if (item) {\n            _this.onSelectItemHandler(cell);\n            // }\n        });\n        var btnFrame = this.scene.textures.getFrame(this.key, "nav_btn_normal.png");\n        var categoryTableConfig = {\n            x: -9 * this.dpr,\n            y: -155 * this.dpr,\n            table: {\n                width: gridW,\n                height: this.categoriesBg.displayHeight,\n                cellWidth: btnFrame.width + 4 * this.dpr,\n                cellHeight: btnFrame.height,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0,\n                zoom: this.scale\n                // mask: false\n            },\n            scrollMode: 1,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new CategorieButton(scene, _this.key, "nav_btn_normal.png", "nav_btn_down.png", "1");\n                    cellContainer.setTextStyle({\n                        color: "#566ddb",\n                        fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                        fontSize: 10 * _this.dpr\n                    });\n                    cellContainer.setFontStyle("bold");\n                }\n                cellContainer.setText(item.value);\n                cellContainer.setData("data", item);\n                if (_this.mPreSelectedCategorieData === item) {\n                    cellContainer.changeDown();\n                    _this.mPreSelectedCategorie = cellContainer;\n                }\n                else {\n                    cellContainer.changeNormal();\n                }\n                if (!_this.mPreSelectedCategorie) {\n                    _this.onClickCategoryHandler(cellContainer);\n                }\n                return cellContainer;\n            }\n        };\n        this.mCategoryTable = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, categoryTableConfig);\n        this.mCategoryTable.layout();\n        this.mCategoryTable.on("cellTap", function (cell) {\n            _this.onClickCategoryHandler(cell);\n        });\n        // this.add(this.mPanel);\n        this.add([\n            this.mBackGround,\n            this.mBg,\n            this.carIcon,\n            this.mCounter,\n            this.categoriesBg,\n            this.mPropGrid,\n            this.mCategoryTable,\n            this.mCloseBtn,\n            this.mDiscardBtn,\n        ]);\n        this.resize(this.scene.cameras.main.width, this.scene.cameras.main.height);\n        _super.prototype.init.call(this);\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_querycategory");\n    };\n    PicaMineCarPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_close");\n    };\n    PicaMineCarPanel.prototype.onSelectItemHandler = function (packageItem) {\n        if (this.mDiscardBtn && this.mDiscardBtn.buttonState !== DiscardEnum.Discard) {\n            packageItem.switchSelect();\n            this.checkMode();\n            return;\n        }\n        if (packageItem && packageItem.item.item) {\n            if (!this.mTips.parentContainer) {\n                this.add(this.mTips);\n            }\n            this.mTips.setItem(packageItem.item.item);\n        }\n        else {\n            this.remove(this.mTips);\n        }\n    };\n    PicaMineCarPanel.prototype.onClickCategoryHandler = function (item) {\n        var data = item.getData("data");\n        if (data) {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + this.key + "_querypackage", { type: 4, key: data.key }); // op_pkt_def.PKT_PackageType.MinePackage\n            if (this.mPreSelectedCategorie) {\n                this.mPreSelectedCategorie.changeNormal();\n            }\n            item.changeDown();\n            this.mPreSelectedCategorie = item;\n            this.mPreSelectedCategorieData = data;\n        }\n    };\n    PicaMineCarPanel.prototype.checkMode = function () {\n        if (!this.mFilterItem || this.mFilterItem.length < 1) {\n            return;\n        }\n        for (var _i = 0, _a = this.mFilterItem; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (item.selected) {\n                this.mDiscardBtn.changeState(DiscardEnum.Sutmit);\n                return;\n            }\n        }\n        this.mDiscardBtn.changeState(DiscardEnum.Cancel);\n    };\n    PicaMineCarPanel.prototype.onDiscardSelectedItem = function () {\n        var _this = this;\n        if (!this.mFilterItem || this.mFilterItem.length < 1) {\n            return;\n        }\n        // const selected = this.mAllItem.filter((item) => item.selected);\n        var selected = [];\n        var label = [];\n        for (var _i = 0, _a = this.mFilterItem; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (item.item && item.selected) {\n                selected.push(item.item);\n                label.push(item.item.name + "*" + item.item.count);\n            }\n        }\n        new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["AlertView"](this.uiManager).show({\n            text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("minecar.confirmation", { name: "" + label.join("") }),\n            title: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("minecar.discard"),\n            oy: 302 * this.dpr * this.render.uiScale,\n            callback: function () {\n                _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + _this.key + "_discard", selected);\n            },\n        });\n    };\n    PicaMineCarPanel.prototype.enterDiscardMode = function () {\n        if (!this.mFilterItem) {\n            return;\n        }\n        var state = this.mDiscardBtn.buttonState;\n        var visible = false;\n        if (state === DiscardEnum.Discard) {\n            this.mDiscardBtn.changeState(DiscardEnum.Cancel);\n            visible = true;\n        }\n        else {\n            if (state === DiscardEnum.Sutmit) {\n                this.onDiscardSelectedItem();\n            }\n            this.mDiscardBtn.changeState(DiscardEnum.Discard);\n        }\n        if (this.mFilterItem.length > 0 && this.mFilterItem[0].selectVisible !== visible) {\n            this.mFilterItem.map(function (item) {\n                item.selectVisible = visible;\n                item.selected = false;\n            });\n            this.mPropGrid.setItems(this.mFilterItem);\n        }\n    };\n    return PicaMineCarPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\nvar PackageItem = /** @class */ (function (_super) {\n    __extends(PackageItem, _super);\n    function PackageItem(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        var border = _this.scene.make\n            .image({\n            key: key,\n            frame: "item_border.png",\n        }, false)\n            .setOrigin(0);\n        _this.setSize(border.width, border.height);\n        _this.mItemImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, 0, 0);\n        _this.mItemImage.setOrigin(0);\n        _this.mItemImage.setScale(dpr);\n        _this.mCounter = _this.scene.make\n            .text({\n            x: border.displayWidth - 2 * dpr,\n            y: border.displayHeight - 1 * dpr,\n            style: {\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                fontSize: 9 * dpr,\n                color: "#566DDB",\n            },\n        })\n            .setOrigin(1);\n        _this.mCounter.setFontStyle("bold");\n        _this.mSelectedIcon = _this.scene.make.image({\n            key: key,\n            frame: "icon_normal.png",\n        }, false);\n        _this.mSelectedIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mSelectedIcon.x = border.width - 2 * dpr - (_this.mSelectedIcon.width) / 2;\n        _this.mSelectedIcon.y = 2 * dpr + (_this.mSelectedIcon.height) / 2;\n        // this.mSelectedIcon.x = 0;\n        // this.mSelectedIcon.y = 0;\n        _this.add(border);\n        _this.add([_this.mItemImage, _this.mCounter, _this.mSelectedIcon]);\n        return _this;\n    }\n    PackageItem.prototype.setProp = function (data) {\n        this.itemData = data;\n        var packageItem = data.item;\n        if (!data || !packageItem) {\n            this.mItemImage.visible = false;\n            this.mCounter.visible = false;\n            this.mSelectedIcon.visible = false;\n            return;\n        }\n        if (this.itemData) {\n            this.mItemImage.load(utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(packageItem.display.texturePath), this, this.onLoadCompleteHandler);\n            this.mItemImage.visible = true;\n            if (packageItem.count > 1) {\n                this.mCounter.setText(packageItem.count.toString());\n                this.mCounter.visible = true;\n            }\n            else {\n                this.mCounter.visible = false;\n            }\n            this.mSelectedIcon.visible = (this.itemData.selectVisible ? true : false);\n            this.setSelected();\n        }\n    };\n    PackageItem.prototype.switchSelect = function () {\n        if (!this.itemData.item) {\n            return;\n        }\n        this.itemData.selected = !this.itemData.selected;\n        this.setSelected();\n    };\n    Object.defineProperty(PackageItem.prototype, "item", {\n        get: function () {\n            return this.itemData;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PackageItem.prototype.onLoadCompleteHandler = function () {\n        if (this.mItemImage) {\n            this.mItemImage.x = (this.width - this.mItemImage.displayWidth) >> 1;\n            this.mItemImage.y = (this.height - this.mItemImage.displayHeight) >> 1;\n        }\n    };\n    PackageItem.prototype.setSelected = function () {\n        if (this.itemData.selected) {\n            this.mSelectedIcon.setFrame("icon_selected.png");\n        }\n        else {\n            this.mSelectedIcon.setFrame("icon_normal.png");\n        }\n    };\n    return PackageItem;\n}(Phaser.GameObjects.Container));\nvar Tips = /** @class */ (function (_super) {\n    __extends(Tips, _super);\n    function Tips(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.mDpr = dpr;\n        var bg = _this.scene.make.image({\n            key: key,\n            frame: "tips_bg.png",\n        }, false);\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.mName = _this.scene.make.text({\n            x: -bg.width / 2 + 12 * dpr,\n            y: -bg.height / 2 + 5 * dpr,\n            style: {\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                fontSize: 10 * dpr,\n                color: "#000000",\n            },\n        }, false);\n        _this.mDes = _this.scene.make\n            .text({\n            x: _this.mName.x,\n            style: {\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                fontSize: 10 * dpr,\n                color: "#000000",\n            },\n        }, false)\n            .setOrigin(0, 1);\n        _this.add([bg, _this.mName, _this.mDes]);\n        _this.setSize(bg.width, bg.height);\n        return _this;\n    }\n    Tips.prototype.setItem = function (item) {\n        if (!item) {\n            return;\n        }\n        var tmpY = this.y;\n        var tmpAlpha = this.alpha;\n        this.y = tmpY + 50 * this.mDpr;\n        this.alpha = 0;\n        this.scene.tweens.add({\n            targets: this,\n            props: {\n                alpha: tmpAlpha,\n                y: tmpY,\n            },\n            duration: 200,\n            ease: Phaser.Math.Easing.Elastic.Out,\n        });\n        this.mName.setText(item.shortName || item.name);\n        this.mDes.setText(item.des);\n    };\n    return Tips;\n}(Phaser.GameObjects.Container));\nvar DiscardButton = /** @class */ (function (_super) {\n    __extends(DiscardButton, _super);\n    function DiscardButton(scene, key, frame, downFrame, text) {\n        return _super.call(this, scene, key, frame, downFrame, text) || this;\n    }\n    DiscardButton.prototype.changeState = function (val) {\n        if (this.mState === val) {\n            return;\n        }\n        this.mState = val;\n        switch (val) {\n            case DiscardEnum.Cancel:\n                this.setText("");\n                this.setFrame("gray_btn.png");\n                break;\n            case DiscardEnum.Sutmit:\n                this.setText("");\n                this.setFrame("yellow_btn.png");\n                break;\n            default:\n                this.setText("");\n                this.setFrame("yellow_btn.png");\n                break;\n        }\n    };\n    Object.defineProperty(DiscardButton.prototype, "buttonState", {\n        get: function () {\n            return this.mState;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DiscardButton;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"]));\nvar DiscardEnum;\n(function (DiscardEnum) {\n    DiscardEnum[DiscardEnum["Discard"] = 0] = "Discard";\n    DiscardEnum[DiscardEnum["Cancel"] = 1] = "Cancel";\n    DiscardEnum[DiscardEnum["Sutmit"] = 2] = "Sutmit";\n})(DiscardEnum || (DiscardEnum = {}));\nvar CategorieButton = /** @class */ (function (_super) {\n    __extends(CategorieButton, _super);\n    function CategorieButton(scene, key, frame, downFrame, text) {\n        var _this = _super.call(this, scene, key, frame, downFrame, text) || this;\n        _this.disInteractive();\n        _this.removeListen();\n        _this.mBackground.setOrigin(0, 0);\n        if (_this.mText) {\n            _this.mText.setPosition(_this.mBackground.width / 2, _this.mBackground.height / 2);\n        }\n        return _this;\n    }\n    return CategorieButton;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["TabButton"]));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaMineCar/PicaMineCarPanel.ts?')},"./src/pica/render/ui/PicaMineSettle/PicaMineSettlePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaMineSettlePanel", function() { return PicaMineSettlePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaMineSettlePanel = /** @class */ (function (_super) {\n    __extends(PicaMineSettlePanel, _super);\n    function PicaMineSettlePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAMINESETTLE_NAME;\n        return _this;\n    }\n    PicaMineSettlePanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.bg.x = width / 2;\n        this.bg.y = height / 2;\n        this.titleimage.x = width / 2;\n        this.titleimage.y = this.bg.y - this.bg.displayHeight / 2 - 8 * this.dpr;\n        this.confirmBtn.x = width / 2;\n        this.confirmBtn.y = this.bg.y + 100 * this.dpr;\n        this.titleName.x = width / 2;\n        this.titleName.y = this.titleimage.y + 32 * this.dpr;\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0, 0.66);\n        this.blackGraphic.fillRect(0, 0, width, height);\n        this.mPropGrid.refreshPos(width / 2, this.bg.y - 2 * this.dpr);\n        this.mPropGrid.resetMask();\n        this.setSize(width, height);\n    };\n    PicaMineSettlePanel.prototype.show = function (param) {\n        this.mShowData = param;\n        this.refreshData();\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    };\n    PicaMineSettlePanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.confirmBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onConfirmBtnClick, this);\n    };\n    PicaMineSettlePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.confirmBtn.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onConfirmBtnClick, this);\n    };\n    PicaMineSettlePanel.prototype.preload = function () {\n        this.addAtlas(this.key, "minesettle/settlement.png", "minesettle/settlement.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaMineSettlePanel.prototype.init = function () {\n        var _this = this;\n        var width = this.cameraWidth;\n        var height = this.cameraHeight;\n        this.bg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["NinePatch"](this.scene, 0, 0, 293 * this.dpr, 260 * this.dpr, this.key, "bg", {\n            left: 10,\n            top: 10,\n            right: 10,\n            bottom: 10\n        });\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.blackGraphic.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        var propFrame = this.scene.textures.getFrame(this.key, "icon_test");\n        var capW = (propFrame.width + 20 * this.dpr);\n        var capH = (propFrame.height + 25 * this.dpr);\n        var config = {\n            x: 0,\n            y: 0,\n            table: {\n                width: 280 * this.dpr,\n                height: 160 * this.dpr,\n                columns: 5,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0,\n                cellPadX: 18 * this.dpr,\n                zoom: this.scale\n            },\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new MineSettleItem(scene, _this.dpr);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setItemData(item);\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, config);\n        this.mPropGrid.layout();\n        this.mPropGrid.on("cellTap", function (cell) {\n            var data = cell.itemData;\n            if (data) {\n                _this.onSelectItemHandler(data);\n            }\n        });\n        this.titleimage = this.scene.make.image({ x: 0, y: -this.bg.displayWidth * 0.5 - 10 * this.dpr, key: this.key, frame: "title" }, false);\n        this.titleimage.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titleName = this.scene.make.text({\n            x: 0, y: this.titleimage.y + 32 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("minesettle.settle"),\n            style: { fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT }\n        }).setOrigin(0.5, 0.5);\n        this.confirmBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, 100 * this.dpr, 90 * this.dpr, 40 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("minesettle.savebag"), this.dpr, this.scale, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.confirmBtn.setTextStyle({\n            color: "#976400",\n            fontSize: 16 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n        });\n        this.add([this.blackGraphic, this.bg, this.titleimage, this.titleName, this.confirmBtn]);\n        this.add(this.mPropGrid);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaMineSettlePanel.prototype.setMineSettlePacket = function (content) {\n        if (this.mInitialized) {\n            this.mPropGrid.setItems(content.items);\n        }\n    };\n    PicaMineSettlePanel.prototype.destroy = function () {\n        if (this.mPropGrid)\n            this.mPropGrid.destroy();\n        if (this.confirmBtn)\n            this.confirmBtn.destroy();\n        this.mPropGrid = null;\n        this.confirmBtn = null;\n        _super.prototype.destroy.call(this);\n    };\n    PicaMineSettlePanel.prototype.refreshData = function () {\n        var settleData = this.getData("settleData");\n        if (settleData)\n            this.setMineSettlePacket(settleData);\n    };\n    PicaMineSettlePanel.prototype.onSelectItemHandler = function (data) {\n    };\n    PicaMineSettlePanel.prototype.onConfirmBtnClick = function (pointer) {\n        if (!this.checkPointerDis(pointer))\n            return;\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_hide");\n    };\n    PicaMineSettlePanel.prototype.checkPointerDis = function (pointer) {\n        if (!this.render)\n            return true;\n        return Math.abs(pointer.downX - pointer.upX) < 10 * this.render.uiRatio * this.render.uiScale &&\n            Math.abs(pointer.downY - pointer.upY) < 10 * this.render.uiRatio * this.render.uiScale;\n    };\n    return PicaMineSettlePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\nvar MineSettleItem = /** @class */ (function (_super) {\n    __extends(MineSettleItem, _super);\n    function MineSettleItem(scene, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, 0);\n        _this.itemCount = _this.scene.make.text({\n            text: "600",\n            style: {\n                fontSize: 18,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false);\n        _this.itemCount.setOrigin(0.5, 0);\n        _this.icon.setOrigin(0, 0);\n        _this.icon.setScale(_this.dpr);\n        // this.icon.setSize(50, 50);\n        _this.itemCount.setPosition(0, _this.icon.height);\n        _this.add(_this.icon);\n        _this.add(_this.itemCount);\n        return _this;\n    }\n    MineSettleItem.prototype.setItemData = function (data) {\n        var _this = this;\n        this.itemData = data;\n        this.itemCount.setFontSize(this.dpr * 14);\n        this.itemCount.text = data.count + "";\n        var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(data.texturePath);\n        this.icon.load(url, this, function () {\n            ///  this.icon.setDisplaySize(33 * this.dpr, 33 * this.dpr);\n            _this.icon.setScale(33 * _this.dpr / _this.icon.width);\n            _this.icon.setPosition(0, 3 * _this.dpr);\n            _this.itemCount.setPosition(_this.icon.displayWidth * 0.5, _this.icon.x + _this.icon.displayHeight + 3 * _this.dpr);\n        });\n    };\n    MineSettleItem.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.icon)\n            this.icon.destroy();\n        if (this.itemCount)\n            this.itemCount.destroy();\n        this.itemData = null;\n        this.icon = null;\n        this.itemCount = null;\n        this.scene = null;\n    };\n    return MineSettleItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaMineSettle/PicaMineSettlePanel.ts?')},"./src/pica/render/ui/PicaNavigate/PicaNavigatePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaNavigatePanel", function() { return PicaNavigatePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaNavigatePanel = /** @class */ (function (_super) {\n    __extends(PicaNavigatePanel, _super);\n    function PicaNavigatePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key_lang = "key_lang";\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICANAVIGATE_NAME;\n        _this.UIType = apowophaserui__WEBPACK_IMPORTED_MODULE_0__["UIType"].Scene;\n        _this.setTween(false);\n        _this.setInteractive();\n        return _this;\n    }\n    PicaNavigatePanel.prototype.resize = function (w, h) {\n        var zoom = this.scale;\n        w = w ? w : this.mBackground.width * zoom;\n        h = h ? h : this.mBackground.height * zoom;\n        this.setSize(w, h);\n        var width = this.scene.cameras.main.width / zoom;\n        var height = this.scene.cameras.main.height;\n        var frame = this.scene.textures.getFrame(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "menu_bg");\n        var scaleRatio = width / frame.width * this.dpr;\n        this.mBackground.scaleX = scaleRatio;\n        this.mBackground.x = width / 2;\n        this.mBackground.setInteractive();\n        this.mCloseBtn.x = width - this.mCloseBtn.width / 2 - 3 * this.dpr;\n        this.mGoHomeBtn.x = this.mCloseBtn.x - this.mCloseBtn.width * 0.5 - this.mGoHomeBtn.width * 0.5 - 24 * this.dpr;\n        this.y = height - this.height / 2;\n        _super.prototype.resize.call(this, w, h);\n    };\n    PicaNavigatePanel.prototype.addListen = function () {\n        if (!this.mInitialized || !this.interactiveBoo)\n            return;\n        this.mMapBtn.on("pointerup", this.onShowMapHandler, this);\n        this.mShopBtn.on("pointerup", this.onShowShopHandler, this);\n        this.mBagBtn.on("pointerup", this.onShowBagHandler, this);\n        this.mFamilyBtn.on("pointerup", this.onShowFamilyHandler, this);\n        this.mGoHomeBtn.on("pointerup", this.onShowGoHomeHandler, this);\n        this.mCloseBtn.on("pointerup", this.onCloseHandler, this);\n    };\n    PicaNavigatePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mMapBtn.off("pointerup", this.onShowMapHandler, this);\n        this.mShopBtn.off("pointerup", this.onShowShopHandler, this);\n        this.mBagBtn.off("pointerup", this.onShowBagHandler, this);\n        this.mFamilyBtn.off("pointerup", this.onShowFamilyHandler, this);\n        this.mGoHomeBtn.on("pointerup", this.onShowGoHomeHandler, this);\n        this.mCloseBtn.off("pointerup", this.onCloseHandler, this);\n    };\n    PicaNavigatePanel.prototype.hide = function () {\n        this.mShow = false;\n        _super.prototype.hide.call(this);\n        this.removeListen();\n    };\n    PicaNavigatePanel.prototype.show = function (param) {\n        _super.prototype.show.call(this, param);\n        this.checkUpdateActive();\n        this.addListen();\n    };\n    PicaNavigatePanel.prototype.updateUIState = function (active) {\n        if (!this.mInitialized) {\n            return;\n        }\n        if (active.name === "picanavigate.mapbtn") {\n            this.mMapBtn.visible = active.visible;\n            if (!active.disabled)\n                this.mMapBtn.setInteractive();\n            else\n                this.mMapBtn.removeInteractive();\n        }\n        if (active.name === "picanavigate.marketbtn") {\n            this.mShopBtn.visible = active.visible;\n            if (!active.disabled)\n                this.mShopBtn.setInteractive();\n            else\n                this.mShopBtn.removeInteractive();\n        }\n        if (active.name === "picanavigate.bagbtn") {\n            this.mBagBtn.visible = active.visible;\n            if (!active.disabled)\n                this.mBagBtn.setInteractive();\n            else\n                this.mBagBtn.removeInteractive();\n        }\n        if (active.name === "picanavigate.gohomebtn") {\n            this.mGoHomeBtn.visible = active.visible;\n            if (!active.disabled)\n                this.mGoHomeBtn.setInteractive();\n            else\n                this.mGoHomeBtn.removeInteractive();\n        }\n    };\n    Object.defineProperty(PicaNavigatePanel.prototype, "isZh_CN", {\n        get: function () {\n            if (utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].language !== "zh-CN") {\n                return false;\n            }\n            return true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PicaNavigatePanel.prototype.preload = function () {\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".json");\n        var lang = "cn";\n        if (!this.isZh_CN) {\n            lang = "en";\n        }\n        this.addAtlas(this.key_lang, "pica_navigate/pica_navigate" + ("_" + lang + ".png"), "pica_navigate/pica_navigate" + ("_" + lang + ".json"));\n        _super.prototype.preload.call(this);\n    };\n    PicaNavigatePanel.prototype.init = function () {\n        this.mBackground = this.createImage(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "menu_bg");\n        this.mBackground.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mMapBtn = this.createButton(this.key_lang, "map_btn");\n        this.mShopBtn = this.createButton(this.key_lang, "shop_btn");\n        this.mBagBtn = this.createButton(this.key_lang, "bag_btn");\n        this.mFamilyBtn = this.createButton(this.key_lang, "family_btn");\n        this.mGoHomeBtn = this.createImage(this.key_lang, "home_btn").setInteractive();\n        this.mCloseBtn = this.createImage(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "close_1").setInteractive();\n        var list = [this.mMapBtn, this.mShopBtn, this.mBagBtn, this.mFamilyBtn, this.mGoHomeBtn];\n        this.add([this.mBackground]);\n        this.add(list);\n        this.add(this.mCloseBtn);\n        var preItem;\n        for (var i = 0; i < list.length; i++) {\n            if (i === 0) {\n                list[i].x = 10.33 * this.dpr + list[i].width * 0.5;\n            }\n            else {\n                preItem = list[i - 1];\n                list[i].x = preItem.x + 12 * this.dpr + (list[i].width + preItem.width) * 0.5;\n                // pad = list[i].width * 0.5;\n            }\n            // list[i].x = i * 50 * this.dpr + list[i].width * 0.5 + pad;\n        }\n        var zoom = this.scale;\n        this.resize(this.mBackground.width * zoom, this.mBackground.height * zoom);\n        _super.prototype.init.call(this);\n    };\n    PicaNavigatePanel.prototype.createButton = function (key, frame) {\n        var button;\n        if (this.isZh_CN)\n            button = this.createImage(key, frame);\n        else\n            button = this.createSprite(key, frame);\n        button.setInteractive();\n        return button;\n    };\n    PicaNavigatePanel.prototype.createImage = function (key, frame) {\n        return this.scene.make.image({\n            key: key,\n            frame: frame\n        }, false);\n    };\n    PicaNavigatePanel.prototype.createSprite = function (key, frame) {\n        var sprite = this.scene.make.sprite({ key: this.key_lang, frame: frame + "_1" });\n        this.scene.anims.create({ key: frame, frames: this.scene.anims.generateFrameNames(this.key_lang, { prefix: frame + "_", frames: [1, 3] }), duration: 500, repeat: -1 });\n        sprite.play(frame);\n        return sprite;\n    };\n    PicaNavigatePanel.prototype.onShowMapHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_showPanel", structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAPARTYLIST_NAME);\n    };\n    PicaNavigatePanel.prototype.onShowShopHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_showPanel", structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAMARKET_NAME);\n    };\n    PicaNavigatePanel.prototype.onShowBagHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_showPanel", structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICABAG_NAME);\n    };\n    PicaNavigatePanel.prototype.onShowFamilyHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_showPanel", structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAGIFTEFFECT_NAME);\n    };\n    PicaNavigatePanel.prototype.onShowGoHomeHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_goHome");\n    };\n    PicaNavigatePanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_close");\n    };\n    PicaNavigatePanel.prototype.checkUpdateActive = function () {\n        var _this = this;\n        this.render.mainPeer.getActiveUIData(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAHANDHELD_NAME)\n            .then(function (arr) {\n            if (arr) {\n                for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n                    var data = arr_1[_i];\n                    _this.updateUIState(data);\n                }\n            }\n        });\n    };\n    return PicaNavigatePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaNavigate/PicaNavigatePanel.ts?')},"./src/pica/render/ui/PicaNewMain/PicaNewActivityPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaNewActivityPanel", function() { return PicaNewActivityPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar PicaNewActivityPanel = /** @class */ (function (_super) {\n    __extends(PicaNewActivityPanel, _super);\n    function PicaNewActivityPanel(scene, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.listPosY = [];\n        _this.isFold = false;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.init();\n        return _this;\n    }\n    PicaNewActivityPanel.prototype.init = function () {\n        var activityButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].iconcommon, "home_activity", "home_activity");\n        activityButton.y = -this.height * 0.5 + activityButton.height * 0.5;\n        this.activityButton = activityButton;\n        this.activityButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onActivityHandler, this);\n        var indentButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].iconcommon, "home_indent", "home_indent");\n        indentButton.y = activityButton.y + activityButton.height * 0.5 + 15 * this.dpr + indentButton.height * 0.5;\n        this.indentButton = indentButton;\n        this.indentButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onIndentHandler, this);\n        var rechargeButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].iconcommon, "home_recharge", "home_recharge");\n        rechargeButton.y = indentButton.y + indentButton.height * 0.5 + 15 * this.dpr + rechargeButton.height * 0.5;\n        this.rechargeButton = rechargeButton;\n        this.rechargeButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRechargeHandler, this);\n        var emailButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].iconcommon, "home_email", "home_email");\n        emailButton.y = rechargeButton.y + rechargeButton.height * 0.5 + 15 * this.dpr + emailButton.height * 0.5;\n        this.emailButton = emailButton;\n        this.emailButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onEmailHandler, this);\n        this.roamButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].iconcommon, "home_roam", "home_roam");\n        this.roamButton.y = activityButton.y;\n        this.roamButton.x = activityButton.x - this.roamButton.width * 0.5 - activityButton.width * 0.5 - 15 * this.dpr;\n        this.roamButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRoamHandler, this);\n        this.arrowButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "home_more_2", "home_more_2");\n        this.arrowButton.y = emailButton.y + emailButton.height * 0.5 + 10 * this.dpr + this.arrowButton.height * 0.5;\n        this.arrowButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onArrowHandler, this);\n        this.listBtns = [activityButton, indentButton, rechargeButton, emailButton];\n        this.listBtns2 = [this.roamButton];\n        this.listPosY = [activityButton.y, indentButton.y, rechargeButton.y, emailButton.y];\n        this.add(this.listBtns);\n        this.add(this.listBtns2);\n        this.add(this.arrowButton);\n    };\n    PicaNewActivityPanel.prototype.addListen = function () {\n        this.indentButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onIndentHandler, this);\n        this.rechargeButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRechargeHandler, this);\n        this.emailButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onEmailHandler, this);\n    };\n    PicaNewActivityPanel.prototype.removeListen = function () {\n        this.indentButton.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onIndentHandler, this);\n        this.rechargeButton.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRechargeHandler, this);\n        this.emailButton.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onEmailHandler, this);\n    };\n    PicaNewActivityPanel.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    PicaNewActivityPanel.prototype.onActivityHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["activity"]);\n    };\n    PicaNewActivityPanel.prototype.onIndentHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["indent"]);\n    };\n    PicaNewActivityPanel.prototype.onRechargeHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["recharge"]);\n    };\n    PicaNewActivityPanel.prototype.onEmailHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["email"]);\n    };\n    PicaNewActivityPanel.prototype.onRoamHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["roam"]);\n    };\n    PicaNewActivityPanel.prototype.onArrowHandler = function () {\n        this.isFold = !this.isFold;\n        if (this.isFold) {\n            this.foldButtons();\n        }\n        else\n            this.unfoldButtons();\n    };\n    PicaNewActivityPanel.prototype.foldButtons = function () {\n        var _this = this;\n        var from = this.listPosY[this.listPosY.length - 1];\n        var to = this.listPosY[0];\n        var tween = this.scene.tweens.addCounter({\n            from: from,\n            to: to,\n            ease: "Linear",\n            duration: 150,\n            onUpdate: function (cope, param) {\n                _this.updateAllButtons(param.value);\n            },\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                _this.arrowButton.setFrameNormal("home_more_1");\n                _this.removeListen();\n            },\n        });\n    };\n    PicaNewActivityPanel.prototype.unfoldButtons = function () {\n        var _this = this;\n        var from = this.listPosY[0];\n        var to = this.listPosY[this.listPosY.length - 1];\n        var tween = this.scene.tweens.addCounter({\n            from: from,\n            to: to,\n            ease: "Linear",\n            duration: 150,\n            onUpdate: function (cope, param) {\n                _this.updateAllButtons(param.value);\n            },\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                _this.arrowButton.setFrameNormal("home_more_2");\n                _this.addListen();\n            },\n        });\n    };\n    PicaNewActivityPanel.prototype.updateAllButtons = function (tempY) {\n        this.updateButtons(tempY, this.listBtns);\n        this.updateButtons(tempY, this.listBtns2);\n        var lastButton = this.listBtns[this.listBtns.length - 1];\n        this.arrowButton.y = lastButton.y + lastButton.height * 0.5 + 10 * this.dpr + this.arrowButton.height * 0.5;\n        if (lastButton.y === this.listPosY[0]) {\n            this.listBtns2[0].visible = false;\n        }\n        else\n            this.listBtns2[0].visible = true;\n    };\n    PicaNewActivityPanel.prototype.updateButtons = function (tempY, buttons) {\n        var lowY = this.listPosY[0];\n        var dis = this.listPosY[this.listPosY.length - 1] - tempY;\n        for (var i = 1; i < buttons.length; i++) {\n            var button = buttons[i];\n            var posy = this.listPosY[i] - dis;\n            button.y = posy;\n            var maxY = this.listPosY[i];\n            if (posy > maxY)\n                posy = maxY;\n            if (posy < lowY)\n                posy = lowY;\n            var alpha = (posy - lowY) / (button.height * 0.5);\n            alpha = alpha < 0 ? 0 : alpha;\n            alpha = alpha > 1 ? 1 : alpha;\n            button.alpha = alpha;\n            button.y = posy;\n        }\n    };\n    return PicaNewActivityPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaNewMain/PicaNewActivityPanel.ts?')},"./src/pica/render/ui/PicaNewMain/PicaNewChatPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaNewChatPanel", function() { return PicaNewChatPanel; });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar PicaNewChatPanel = /** @class */ (function (_super) {\n    __extends(PicaNewChatPanel, _super);\n    function PicaNewChatPanel(scene, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        return _this;\n    }\n    return PicaNewChatPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaNewMain/PicaNewChatPanel.ts?')},"./src/pica/render/ui/PicaNewMain/PicaNewHeadPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaNewHeadPanel", function() { return PicaNewHeadPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaNewHeadPanel = /** @class */ (function (_super) {\n    __extends(PicaNewHeadPanel, _super);\n    function PicaNewHeadPanel(scene, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.money = 0;\n        _this.diamond = 0;\n        _this.praise = false;\n        _this.isself = false;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.init();\n        return _this;\n    }\n    PicaNewHeadPanel.prototype.init = function () {\n        this.headCon = this.scene.make.container(undefined, false);\n        this.moneyCon = this.scene.make.container(undefined, false);\n        this.sceneCon = this.scene.make.container(undefined, false);\n        this.add([this.headCon, this.sceneCon]);\n        var headbg = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].iconcommon, frame: "home_head_bg" }, false);\n        var headclickCon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"](this.scene, 0, 0);\n        headclickCon.setSize(40 * this.dpr, 40 * this.dpr);\n        headclickCon.enable = true;\n        headclickCon.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onHeadHandler, this);\n        var vipmark = this.scene.make.image({ x: 0, y: 10 * this.dpr, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].iconcommon, frame: "home_vip_mark" }, false);\n        this.levelTex = this.scene.make.text({\n            x: 0, y: 0, text: "", style: { color: "#0089D3", fontSize: 14 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].NUMBER }\n        }).setStroke("#ffffff", 2 * this.dpr).setFontStyle("bold").setOrigin(0.5);\n        this.powerPro = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ProgressMaskBar"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_progress_bottom", "strength_progress", undefined, {\n            width: 41 * this.dpr, height: 11 * this.dpr, left: 4 * this.dpr, right: 4 * this.dpr, top: 0, bottom: 0\n        });\n        this.powerPro.x = 0;\n        this.powerPro.y = headbg.height * 0.5 + this.powerPro.height * 0.5 - 4 * this.dpr;\n        this.powerTex = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 43 * this.dpr, 15 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "strength_icon", this.dpr, {\n            color: "#ffffff", fontSize: 8 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].NUMBER\n        });\n        this.powerTex.y = this.powerPro.y;\n        this.powerTex.x = -2 * this.dpr;\n        this.powerTex.setFontStyle("bold");\n        this.powerTex.setStroke("#000000", 2 * this.dpr);\n        this.powerTex.setOffset(-4 * this.dpr, 0);\n        this.powerTex.setLayout(2);\n        this.powerTex.setText("");\n        this.powerAddBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "add_btn", "add_btn");\n        this.powerAddBtn.x = this.powerPro.x + this.powerPro.width * 0.5 + 7 * this.dpr;\n        this.powerAddBtn.y = this.powerPro.y;\n        this.powerAddBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onEnergyHandler, this);\n        this.headCon.add([this.powerPro, headbg, vipmark, this.levelTex, headclickCon, this.powerTex, this.powerAddBtn]);\n        this.headCon.x = -this.width * 0.5 + 33 * this.dpr;\n        this.headCon.y = -2 * this.dpr;\n        var moneybg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, -this.dpr, 190 * this.dpr, 28 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_assets_bg", {\n            left: 17 * this.dpr,\n            top: 0 * this.dpr,\n            right: 17 * this.dpr,\n            bottom: 0 * this.dpr\n        });\n        moneybg.x = -moneybg.width * 0.5;\n        var moneyline = this.scene.make.image({ x: moneybg.x, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "home_assets_division" }, false);\n        this.moneyvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 26 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_silver", this.dpr, {\n            color: "#ffffff", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].NUMBER\n        });\n        this.moneyvalue.setLayout(1);\n        this.moneyvalue.x = moneybg.x - moneybg.width * 0.5 + 22 * this.dpr;\n        this.diamondvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 26 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_diamond", this.dpr, {\n            color: "#ffffff", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].NUMBER\n        });\n        this.diamondvalue.setLayout(1);\n        this.diamondvalue.x = moneybg.x + 22 * this.dpr;\n        this.moneyAddBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_praise_bg", "home_praise_bg");\n        var moneyAddicon = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "home_assets_add" }, false);\n        this.moneyAddBtn.add(moneyAddicon);\n        this.moneyAddBtn.x = -this.moneyAddBtn.width * 0.5 - 4 * this.dpr;\n        this.moneyAddBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRechargeHandler, this);\n        this.moneyCon.add([moneybg, moneyline, this.moneyvalue, this.diamondvalue, this.moneyAddBtn]);\n        this.moneyCon.x = this.width * 0.5 - 10 * this.dpr;\n        this.moneyCon.y = -5 * this.dpr;\n        var peoplebg = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "home_persons_bg" }, false);\n        peoplebg.x = -peoplebg.width * 0.5;\n        this.peoplebg = peoplebg;\n        this.peoplevalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 45 * this.dpr, 27 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_persons", this.dpr, {\n            color: "#ffffff", fontSize: 12 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT\n        });\n        this.peoplevalue.setLayout(2);\n        this.peoplevalue.setText("0");\n        this.peoplevalue.x = peoplebg.x - 2 * this.dpr;\n        var peopeclickCon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"](this.scene, 0, 0);\n        peopeclickCon.setSize(40 * this.dpr, 40 * this.dpr);\n        peopeclickCon.enable = true;\n        peopeclickCon.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onOpenOnlineHandler, this);\n        peopeclickCon.x = this.peoplevalue.x;\n        var praisebg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, -this.dpr, 50 * this.dpr, 27 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_mapname_bg", {\n            left: 16 * this.dpr,\n            top: 0 * this.dpr,\n            right: 16 * this.dpr,\n            bottom: 0 * this.dpr\n        }, this.dpr, this.scale, 0);\n        praisebg.x = -peoplebg.width - 15 * this.dpr - praisebg.width * 0.5;\n        this.sceneTex = this.scene.make.text({\n            x: praisebg.x - 10 * this.dpr, y: 0, text: "", style: { color: "#FFF449", fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT }\n        }).setOrigin(0.5);\n        this.praisebg = praisebg;\n        this.praiseButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_praise_bg", "home_praise_bg");\n        this.praiseImg = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "home_praise" }, false);\n        this.praiseButton.add(this.praiseImg);\n        this.praiseButton.x = -peoplebg.width - 29 * this.dpr;\n        this.praiseButton.y = 0;\n        this.praiseButton.visible = false;\n        var sceneclickCon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"](this.scene, 0, 0);\n        sceneclickCon.setSize(100 * this.dpr, 30 * this.dpr);\n        sceneclickCon.enable = true;\n        sceneclickCon.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onOpenHouseHandler, this);\n        sceneclickCon.x = praisebg.x;\n        this.sceneCon.add([peoplebg, this.peoplevalue, peopeclickCon, praisebg, this.sceneTex, sceneclickCon, this.praiseButton]);\n        this.sceneCon.x = this.width * 0.5 - 10 * this.dpr;\n        this.sceneCon.y = -5 * this.dpr;\n    };\n    PicaNewHeadPanel.prototype.setHeadData = function (level, energy, money, diamond) {\n        if (level)\n            this.levelTex.text = level.value + "";\n        if (energy) {\n            this.powerTex.setText(energy.value + "/" + energy.max);\n            this.powerPro.setProgress(energy.value, energy.max);\n        }\n        money = money || 0;\n        this.moneyvalue.setText(money + "");\n        diamond = diamond || 0;\n        this.diamondvalue.setText(diamond + "");\n        if (this.money !== money || this.diamond !== diamond) {\n            this.moveMoneyCon();\n        }\n        this.money = money;\n        this.diamond = diamond;\n    };\n    PicaNewHeadPanel.prototype.setSceneData = function (sceneName, isPraise, people, roomType, isself) {\n        if (isself === void 0) { isself = false; }\n        this.sceneTex.text = sceneName;\n        this.praise = isPraise;\n        this.isself = isself;\n        this.peoplevalue.setText(people + "");\n        this.praiseButton.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onPraiseHandler, this);\n        if (this.canPraise(roomType)) {\n            this.praiseButton.visible = true;\n            this.praiseButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onPraiseHandler, this);\n            if (isself) {\n                this.praiseImg.setFrame("home_set");\n            }\n            else {\n                this.praiseImg.setFrame(isPraise ? "home_praise_1" : "home_praise");\n            }\n            var bgwidth = this.sceneTex.width + 40 * this.dpr;\n            bgwidth = bgwidth < 60 * this.dpr ? 60 * this.dpr : bgwidth;\n            this.praisebg.resize(bgwidth, 25 * this.dpr);\n            this.praisebg.x = -this.peoplebg.width - 15 * this.dpr - this.praisebg.width * 0.5;\n            this.sceneTex.x = this.praisebg.x - 11 * this.dpr;\n        }\n        else {\n            var bgwidth = this.sceneTex.width + 20 * this.dpr;\n            bgwidth = bgwidth < 40 * this.dpr ? 40 * this.dpr : bgwidth;\n            this.praisebg.resize(bgwidth, 25 * this.dpr);\n            this.praiseButton.visible = false;\n            this.praisebg.x = -this.peoplebg.width - 15 * this.dpr - this.praisebg.width * 0.5;\n            this.sceneTex.x = this.praisebg.x;\n        }\n    };\n    PicaNewHeadPanel.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    PicaNewHeadPanel.prototype.onHeadHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["head"]);\n    };\n    PicaNewHeadPanel.prototype.onEnergyHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["energy"]);\n    };\n    PicaNewHeadPanel.prototype.onPraiseHandler = function () {\n        if (this.isself) {\n            if (this.sendHandler)\n                this.sendHandler.runWith(["party"]);\n        }\n        else if (this.sendHandler)\n            this.sendHandler.runWith(["praise", !this.praise]);\n    };\n    PicaNewHeadPanel.prototype.onRechargeHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["recharge"]);\n    };\n    PicaNewHeadPanel.prototype.onOpenHouseHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["room"]);\n    };\n    PicaNewHeadPanel.prototype.onOpenOnlineHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith("online");\n    };\n    PicaNewHeadPanel.prototype.moveMoneyCon = function () {\n        var _this = this;\n        if (!this.scene)\n            return;\n        var from = this.width + 190 * this.dpr;\n        var to = this.width * 0.5 - 10 * this.dpr;\n        this.moneyCon.x = from;\n        this.moneyCon.alpha = 1;\n        this.add(this.moneyCon);\n        this.clearTween();\n        this.moneyTween = this.scene.tweens.add({\n            targets: this.moneyCon,\n            x: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: 600,\n            onComplete: function () {\n                _this.clearTween();\n                _this.fadeOutHeadCon();\n            },\n        });\n    };\n    PicaNewHeadPanel.prototype.fadeOutHeadCon = function () {\n        var _this = this;\n        if (!this.scene)\n            return;\n        this.moneyTween = this.scene.tweens.add({\n            targets: this.moneyCon,\n            alpha: {\n                from: 1,\n                to: 0.2\n            },\n            ease: "Linear",\n            duration: 150,\n            delay: 3000,\n            onComplete: function () {\n                _this.clearTween();\n                _this.remove(_this.moneyCon);\n            },\n        });\n    };\n    PicaNewHeadPanel.prototype.canPraise = function (roomType) {\n        if (roomType !== "room" && roomType !== "store")\n            return false;\n        return true;\n    };\n    PicaNewHeadPanel.prototype.clearTween = function () {\n        if (this.moneyTween) {\n            this.moneyTween.stop();\n            this.moneyTween.remove();\n            this.moneyTween = undefined;\n        }\n    };\n    return PicaNewHeadPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaNewMain/PicaNewHeadPanel.ts?')},"./src/pica/render/ui/PicaNewMain/PicaNewLeftPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaNewLeftPanel", function() { return PicaNewLeftPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar PicaNewLeftPanel = /** @class */ (function (_super) {\n    __extends(PicaNewLeftPanel, _super);\n    function PicaNewLeftPanel(scene, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.init();\n        return _this;\n    }\n    PicaNewLeftPanel.prototype.init = function () {\n        var mapButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].iconcommon, "home_map", "home_map");\n        mapButton.y = -this.height * 0.5 + mapButton.height * 0.5;\n        mapButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onMapButtonHandler, this);\n        var taskButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].iconcommon, "home_task", "home_task");\n        taskButton.y = mapButton.y + mapButton.height * 0.5 + 20 * this.dpr + taskButton.height * 0.5;\n        taskButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onTaskButtonHandler, this);\n        this.add([mapButton, taskButton]);\n    };\n    PicaNewLeftPanel.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    PicaNewLeftPanel.prototype.onMapButtonHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["maphome"]);\n    };\n    PicaNewLeftPanel.prototype.onTaskButtonHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["task"]);\n    };\n    return PicaNewLeftPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaNewMain/PicaNewLeftPanel.ts?')},"./src/pica/render/ui/PicaNewMain/PicaNewMainPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaNewMainPanel", function() { return PicaNewMainPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\n/* harmony import */ var _PicaNewActivityPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaNewActivityPanel */ "./src/pica/render/ui/PicaNewMain/PicaNewActivityPanel.ts");\n/* harmony import */ var _PicaNewChatPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaNewChatPanel */ "./src/pica/render/ui/PicaNewMain/PicaNewChatPanel.ts");\n/* harmony import */ var _PicaNewHeadPanel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./PicaNewHeadPanel */ "./src/pica/render/ui/PicaNewMain/PicaNewHeadPanel.ts");\n/* harmony import */ var _PicaNewLeftPanel__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./PicaNewLeftPanel */ "./src/pica/render/ui/PicaNewMain/PicaNewLeftPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n// import { PicaNewNavigatePanel } from "./PicaNewNavigatePanel";\nvar PicaNewMainPanel = /** @class */ (function (_super) {\n    __extends(PicaNewMainPanel, _super);\n    function PicaNewMainPanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.isFold = false;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].iconcommon];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME;\n        return _this;\n    }\n    PicaNewMainPanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.foldButton.x = this.foldButton.width * 0.5 + 5 * this.dpr;\n        this.foldButton.y = this.foldButton.height * 0.5 + 5 * this.dpr;\n        this.headPanel.x = width * 0.5;\n        this.headPanel.y = this.headPanel.height * 0.5;\n        this.leftPanel.x = this.leftPanel.width * 0.5 + 10 * this.dpr;\n        this.leftPanel.y = this.headPanel.height + this.leftPanel.height * 0.5 + 20 * this.dpr;\n        this.activityPanel.x = width - this.activityPanel.width * 0.5 - 10 * this.dpr;\n        this.activityPanel.y = this.headPanel.height + this.activityPanel.height * 0.5 + 0 * this.dpr;\n        // this.navigatePanel.x = width * 0.5;\n        // this.navigatePanel.y = height - this.navigatePanel.height * 0.5;\n        // this.chatPanel.x = width * 0.5;\n        // this.chatPanel.y = height - this.navigatePanel.height - this.chatPanel.height * 0.5;\n        _super.prototype.resize.call(this, width, height);\n    };\n    PicaNewMainPanel.prototype.addListen = function () {\n        _super.prototype.addListen.call(this);\n    };\n    PicaNewMainPanel.prototype.removeListen = function () {\n        _super.prototype.removeListen.call(this);\n    };\n    PicaNewMainPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaNewMainPanel.prototype.hide = function () {\n        _super.prototype.hide.call(this);\n    };\n    PicaNewMainPanel.prototype.update = function (param) {\n        _super.prototype.update.call(this);\n    };\n    PicaNewMainPanel.prototype.setPlayerInfo = function (level, energy, money, diamond) {\n        this.headData = { level: level, energy: energy, money: money, diamond: diamond };\n        if (!this.mInitialized)\n            return;\n        this.headPanel.setHeadData(level, energy, money, diamond);\n    };\n    PicaNewMainPanel.prototype.setRoomInfo = function (sceneName, isPraise, people, roomType, isself) {\n        if (isself === void 0) { isself = false; }\n        this.sceneData = { sceneName: sceneName, isPraise: isPraise, people: people, roomType: roomType, isself: isself };\n        if (!this.mInitialized)\n            return;\n        this.headPanel.setSceneData(sceneName, isPraise, people, roomType, isself);\n    };\n    PicaNewMainPanel.prototype.updateUIState = function (active) {\n    };\n    PicaNewMainPanel.prototype.init = function () {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.foldButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "home_retract");\n        this.foldButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onFoldButtonHandler, this);\n        this.add(this.foldButton);\n        this.headPanel = new _PicaNewHeadPanel__WEBPACK_IMPORTED_MODULE_7__["PicaNewHeadPanel"](this.scene, width, 70 * this.dpr, this.key, this.dpr);\n        this.headPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onHeadHandler));\n        this.add(this.headPanel);\n        this.leftPanel = new _PicaNewLeftPanel__WEBPACK_IMPORTED_MODULE_8__["PicaNewLeftPanel"](this.scene, 40 * this.dpr, 170 * this.dpr, this.key, this.dpr);\n        this.leftPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onLeftHandler));\n        this.add(this.leftPanel);\n        this.activityPanel = new _PicaNewActivityPanel__WEBPACK_IMPORTED_MODULE_5__["PicaNewActivityPanel"](this.scene, 40 * this.dpr, 170 * this.dpr, this.key, this.dpr);\n        this.activityPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onActivityHandler));\n        this.add(this.activityPanel);\n        this.chatPanel = new _PicaNewChatPanel__WEBPACK_IMPORTED_MODULE_6__["PicaNewChatPanel"](this.scene, width, 201 * this.dpr, this.key, this.dpr);\n        this.add(this.chatPanel);\n        // this.navigatePanel = new PicaNewNavigatePanel(this.scene, width, 56 * this.dpr, this.key, this.dpr);\n        // this.navigatePanel.setHandler(new Handler(this, this.onNavigateHandler));\n        // this.add(this.navigatePanel);\n        this.resize(width, height);\n        _super.prototype.init.call(this);\n    };\n    PicaNewMainPanel.prototype.onInitialized = function () {\n        if (this.headData)\n            this.headPanel.setHeadData(this.headData.level, this.headData.energy, this.headData.money, this.headData.diamond);\n        if (this.sceneData)\n            this.headPanel.setSceneData(this.sceneData.sceneName, this.sceneData.isPraise, this.sceneData.people, this.sceneData.roomType, this.sceneData.isself);\n    };\n    PicaNewMainPanel.prototype.onFoldButtonHandler = function () {\n        this.isFold = !this.isFold;\n        if (this.isFold) {\n            this.foldButton.setFrameNormal("home_spread", "home_spread");\n            this.headPanel.visible = false;\n            this.leftPanel.visible = false;\n            this.activityPanel.visible = false;\n        }\n        else {\n            this.foldButton.setFrameNormal("home_retract", "home_retract");\n            this.headPanel.visible = true;\n            this.leftPanel.visible = true;\n            this.activityPanel.visible = true;\n        }\n    };\n    PicaNewMainPanel.prototype.onHeadHandler = function (tag, data) {\n        if (tag === "head") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].CHARACTERINFO_NAME);\n        }\n        else if (tag === "energy") {\n            // this.render.renderEmitter(ModuleName.PICANEWMAIN_NAME + "_showPanel", ModuleName.PICARECHARGE_NAME);\n        }\n        else if (tag === "praise") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["EventType"].QUERY_PRAISE, data);\n        }\n        else if (tag === "recharge") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICARECHARGE_NAME);\n        }\n        else if (tag === "room") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_openhousepanel");\n        }\n        else if (tag === "party") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAOPENPARTY_NAME);\n        }\n        else if (tag === "online") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAONLINE_NAME);\n        }\n    };\n    PicaNewMainPanel.prototype.onLeftHandler = function (tag, data) {\n        if (tag === "maphome") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAPARTYLIST_NAME);\n        }\n        else if (tag === "task") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICATASK_NAME);\n        }\n    };\n    PicaNewMainPanel.prototype.onActivityHandler = function (tag, data) {\n        if (tag === "activity") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAORDER_NAME);\n        }\n        else if (tag === "indent") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAPARTYLIST_NAME);\n        }\n        else if (tag === "recharge") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAFURNITURECOMPOSE_NAME);\n        }\n        else if (tag === "email") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAROAM_NAME);\n        }\n        else if (tag === "roam") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAROAM_NAME);\n        }\n    };\n    PicaNewMainPanel.prototype.onNavigateHandler = function (tag, data) {\n        if (tag === "bag") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICABAG_NAME);\n        }\n        else if (tag === "friend") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAFRIEND_NAME);\n        }\n        else if (tag === "avatar") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAAVATAR_NAME);\n        }\n        else if (tag === "shop") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAMARKET_NAME);\n        }\n        else if (tag === "explore") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWMAIN_NAME + "_showpanel", structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAEXPLORELIST_NAME);\n        }\n    };\n    return PicaNewMainPanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_4__["PicaBasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaNewMain/PicaNewMainPanel.ts?')},"./src/pica/render/ui/PicaNewMain/PicaNewNavigatePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaNewNavigatePanel", function() { return PicaNewNavigatePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaNewNavigatePanel = /** @class */ (function (_super) {\n    __extends(PicaNewNavigatePanel, _super);\n    function PicaNewNavigatePanel(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.init();\n        return _this;\n    }\n    PicaNewNavigatePanel.prototype.init = function () {\n        var shape = this.scene.make.graphics(undefined, false);\n        var w = this.scene.cameras.main.width;\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, frame: "bg" }).setOrigin(0);\n        this.bg.displayWidth = w;\n        // this.bg.x = w * 0.5;\n        this.setSize(this.bg.width, this.bg.height);\n        var bagButton = this.createButton("home_bag");\n        bagButton.x = -this.width * 0.5 + bagButton.width * 0.5 + 1 * this.dpr;\n        this.bagButton = bagButton;\n        var friendButton = this.createButton("home_friend");\n        friendButton.x = bagButton.x + bagButton.width * 0.5 + 0 * this.dpr + friendButton.width * 0.5;\n        this.friendButton = friendButton;\n        var avatarButton = this.createButton("home_avater");\n        avatarButton.x = friendButton.x + friendButton.width * 0.5 + 0 * this.dpr + avatarButton.width * 0.5;\n        this.avatarButton = avatarButton;\n        var shopButton = this.createButton("home_shop");\n        shopButton.x = avatarButton.x + avatarButton.width * 0.5 + 0 * this.dpr + shopButton.width * 0.5;\n        this.shopButton = shopButton;\n        var exploreButton = this.createButton("home_explore");\n        exploreButton.x = shopButton.x + shopButton.width * 0.5 + 0 * this.dpr + exploreButton.width * 0.5;\n        this.exploreButton = exploreButton;\n        var homeButton = this.createButton("home_home");\n        homeButton.x = exploreButton.x + exploreButton.width * 0.5 + 0 * this.dpr + homeButton.width * 0.5;\n        this.homeButton = homeButton;\n        this.add([this.bg, bagButton, friendButton, avatarButton, shopButton, exploreButton, homeButton]);\n        this.addListen();\n        // this.render.emitter.emit(EventType.NAVIGATE_RESIZE, this.width, this.height);\n    };\n    PicaNewNavigatePanel.prototype.addListen = function () {\n        this.bagButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onBagHandler, this);\n        this.friendButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onFriendHandler, this);\n        this.avatarButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onAvatarHandler, this);\n        this.shopButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShopHandler, this);\n        this.exploreButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onExploreHandler, this);\n        this.homeButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onHomeHandler, this);\n    };\n    PicaNewNavigatePanel.prototype.removeListen = function () {\n        this.bagButton.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onBagHandler, this);\n        this.friendButton.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onFriendHandler, this);\n        this.avatarButton.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onAvatarHandler, this);\n        this.shopButton.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onShopHandler, this);\n        this.exploreButton.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onExploreHandler, this);\n        this.homeButton.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onHomeHandler, this);\n    };\n    PicaNewNavigatePanel.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    PicaNewNavigatePanel.prototype.onBagHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["bag"]);\n    };\n    PicaNewNavigatePanel.prototype.onFriendHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["friend"]);\n    };\n    PicaNewNavigatePanel.prototype.onAvatarHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["avatar"]);\n    };\n    PicaNewNavigatePanel.prototype.onShopHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["shop"]);\n    };\n    PicaNewNavigatePanel.prototype.onExploreHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["explore"]);\n    };\n    PicaNewNavigatePanel.prototype.onHomeHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["home"]);\n    };\n    PicaNewNavigatePanel.prototype.createButton = function (frame) {\n        if (this.isZh_CN)\n            frame = frame + "_1";\n        var button = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].iconcommon, frame, frame);\n        button.y = (this.height) * 0.5;\n        return button;\n    };\n    Object.defineProperty(PicaNewNavigatePanel.prototype, "isZh_CN", {\n        get: function () {\n            if (utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].language !== "zh-CN") {\n                return false;\n            }\n            return true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PicaNewNavigatePanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaNewMain/PicaNewNavigatePanel.ts?')},"./src/pica/render/ui/PicaNewMain/PicaNewOldMainPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaNewOldMainPanel", function() { return PicaNewOldMainPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\nvar PicaNewOldMainPanel = /** @class */ (function (_super) {\n    __extends(PicaNewOldMainPanel, _super);\n    function PicaNewOldMainPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.isSceneNameActive = false;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAMAINUI_NAME;\n        return _this;\n    }\n    PicaNewOldMainPanel.prototype.show = function (param) {\n        _super.prototype.show.call(this, param);\n        if (this.mInitialized) {\n            this.setInteractive();\n            this.update(this.mShowData);\n            this.checkUpdateActive();\n        }\n    };\n    PicaNewOldMainPanel.prototype.resize = function (w, h) {\n        var width = this.scene.cameras.main.width / this.scale;\n        var height = this.scene.cameras.main.height / this.scale;\n        _super.prototype.resize.call(this, width, height);\n        this.mCoinValue.x = width - this.mCoinValue.width / 2 - 5 * this.dpr;\n        this.mDiamondValue.x = width - this.mDiamondValue.width / 2 - 5 * this.dpr;\n    };\n    PicaNewOldMainPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "main_ui/mainui.png", "main_ui/mainui.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaNewOldMainPanel.prototype.addListen = function () {\n        _super.prototype.addListen.call(this);\n        if (!this.mInitialized)\n            return;\n        if (!this.roomCon) {\n            utils__WEBPACK_IMPORTED_MODULE_4__["Logger"].getInstance().fatal(PicaNewOldMainPanel.name + ": sceneName does not exist!");\n            return;\n        }\n        this.roomCon.on("pointerup", this.onOpenRoomPanel, this);\n        this.render.emitter.on(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_ROOM_INFO, this.onUpdateRoomHandler, this);\n        this.render.emitter.on(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_PLAYER_INFO, this.onUpdatePlayerHandler, this);\n        this.render.emitter.on(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_PARTY_STATE, this.onUpdatePartyHandler, this);\n    };\n    PicaNewOldMainPanel.prototype.removeListen = function () {\n        _super.prototype.removeListen.call(this);\n        if (!this.mInitialized)\n            return;\n        if (!this.roomCon) {\n            utils__WEBPACK_IMPORTED_MODULE_4__["Logger"].getInstance().fatal(PicaNewOldMainPanel.name + ": sceneName does not exist!");\n            return;\n        }\n        this.roomCon.off("pointerup", this.onOpenRoomPanel, this);\n        this.render.emitter.off(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_ROOM_INFO, this.onUpdateRoomHandler, this);\n        this.render.emitter.off(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_PLAYER_INFO, this.onUpdatePlayerHandler, this);\n        this.render.emitter.off(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].UPDATE_PARTY_STATE, this.onUpdatePartyHandler, this);\n    };\n    PicaNewOldMainPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.playerInfo = undefined;\n        this.roomInfo = undefined;\n    };\n    PicaNewOldMainPanel.prototype.update = function (param) {\n        _super.prototype.update.call(this);\n        if (param) {\n            if (!param.hasOwnProperty("roomId")) {\n                this.playerInfo = param;\n            }\n            else {\n                this.roomInfo = param;\n            }\n        }\n        if (this.playerInfo) {\n            this.updatePlayerInfo(this.playerInfo);\n        }\n        if (this.roomInfo) {\n            this.updateRoomInfo(this.roomInfo);\n        }\n    };\n    PicaNewOldMainPanel.prototype.updatePlayerInfo = function (player) {\n        this.playerInfo = player;\n        if (!this.mInitialized)\n            return;\n        if (player.level) {\n            var level = player.level;\n            this.playerLv.text = level.level + "";\n        }\n        if (player.coin !== undefined)\n            this.mCoinValue.setText(this.getCoin().value + "" || 0 + "");\n        if (player.diamond !== undefined)\n            this.mDiamondValue.setText(this.getDiamond().value + "" || 0 + "");\n        if (player.energy) {\n            var energy = player.energy;\n            if (energy) {\n                this.mStrengthValue.setValue(energy.currentValue, energy.max);\n            }\n            else {\n                this.mStrengthValue.setValue(0, 100);\n            }\n        }\n        this.mSceneName.rightIcon.visible = this.isSelfRoom;\n    };\n    PicaNewOldMainPanel.prototype.getCoin = function () {\n        for (var _i = 0, _a = this.playerInfo.properties; _i < _a.length; _i++) {\n            var proper = _a[_i];\n            if (!proper.hasOwnProperty("id")) {\n                utils__WEBPACK_IMPORTED_MODULE_4__["Logger"].getInstance().error(proper.key + "  ID");\n                continue;\n            }\n            if (proper.id === "IV0000001") {\n                return proper;\n            }\n        }\n    };\n    PicaNewOldMainPanel.prototype.getDiamond = function () {\n        for (var _i = 0, _a = this.playerInfo.properties; _i < _a.length; _i++) {\n            var proper = _a[_i];\n            if (!proper.hasOwnProperty("id")) {\n                utils__WEBPACK_IMPORTED_MODULE_4__["Logger"].getInstance().error(proper.key + "  ID");\n                continue;\n            }\n            if (proper.id === "IV0000002") {\n                return proper;\n            }\n        }\n    };\n    PicaNewOldMainPanel.prototype.updateRoomInfo = function (room) {\n        this.roomInfo = room;\n        if (!this.mInitialized)\n            return;\n        this.roomCon.setSize(60 * this.dpr, 30 * this.dpr);\n        if (room.name) {\n            this.mSceneName.setText(room.name);\n            this.roomCon.setSize(this.mSceneName.rightbound * 2, 30 * this.dpr);\n        }\n        this.roomCon.setInteractive();\n        this.isSceneNameActive = true;\n        if (room.playerCount) {\n            // TODO \n            this.mCounter.setText("" + room.playerCount);\n        }\n        this.mCounter.x = this.mSceneName.x + this.mSceneName.rightbound + 5 * this.dpr;\n        this.praiseBtn.visible = false;\n        if (room.roomType) {\n            if (room.roomType === "room" || room.roomType === "store") {\n                this.praiseBtn.visible = true;\n            }\n            this.praiseBtn.setText(room.praise + "");\n            this.praiseBtn.selected = room.hasPraised;\n            if (room.hasPraised) {\n                this.praiseBtn.setTextColor("#8E99C1");\n                this.praiseImg.setFrame("praise_after");\n            }\n            else {\n                this.praiseBtn.setTextColor("#ffffff");\n                this.praiseImg.setFrame("praise_before");\n            }\n        }\n        this.mSceneName.rightIcon.visible = this.isSelfRoom;\n        this.partyBtn.visible = this.isSelfRoom;\n        if (room.openingParty) {\n            this.partyBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("common.manager"));\n        }\n        else {\n            this.partyBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("main_ui.party"));\n        }\n    };\n    Object.defineProperty(PicaNewOldMainPanel.prototype, "isSelfRoom", {\n        get: function () {\n            if (!this.playerInfo || !this.roomInfo)\n                return false;\n            var rooms = this.playerInfo.rooms;\n            var curRoomid = this.roomInfo.roomId;\n            for (var _i = 0, rooms_1 = rooms; _i < rooms_1.length; _i++) {\n                var room = rooms_1[_i];\n                if (room.roomId === curRoomid)\n                    return true;\n            }\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PicaNewOldMainPanel.prototype.updateUIState = function (active) {\n        if (!this.mInitialized) {\n            return;\n        }\n        if (active.name === "mainui.playerinfo") {\n            this.playerCon.visible = active.visible;\n        }\n        if (active.name === "mainui.roominfo") {\n            this.roomCon.visible = active.visible;\n        }\n        if (active.name === "mainui.headbtn") {\n            // this.playerIcon.visible = active.visible;\n            if (!active.disabled) {\n                this.playerIcon.setInteractive();\n            }\n            else {\n                this.playerIcon.removeInteractive();\n            }\n        }\n        if (active.name === "mainui.entereditorbtn") {\n            this.mSceneName.visible = active.visible;\n            if (this.isSceneNameActive) {\n                if (!active.disabled) {\n                    this.roomCon.setSize(this.mSceneName.rightbound * 2, 30 * this.dpr);\n                    this.roomCon.setInteractive();\n                }\n                else {\n                    this.roomCon.removeInteractive();\n                }\n            }\n        }\n    };\n    PicaNewOldMainPanel.prototype.init = function () {\n        var w = this.scene.cameras.main.width;\n        var h = this.scene.cameras.main.height;\n        this.playerCon = this.scene.make.container(undefined, false);\n        this.playerCon.y = 25 * this.dpr;\n        this.add(this.playerCon);\n        this.mCoinValue = new ValueContainer(this.scene, this.key, "coin", this.dpr);\n        this.mDiamondValue = new ValueContainer(this.scene, this.key, "diamond", this.dpr);\n        this.mDiamondValue.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onOpenRechargeHandler));\n        this.mDiamondValue.y = 35 * this.dpr;\n        var frame = this.scene.textures.getFrame(this.key, "strength_progress");\n        this.mStrengthValue = new ProgressValue(this.scene, this.key, "strength_icon", this.dpr);\n        this.mStrengthValue.x = 76 * this.dpr;\n        var ninePatch = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 68 * this.dpr / 2, this.mStrengthValue.height / 2 - frame.height - 1 * this.dpr, 92 * this.dpr, frame.height, this.key, "strength_progress", {\n            left: 8 * this.dpr,\n            top: 3 * this.dpr,\n            right: frame.width - 2 - 8 * this.dpr,\n            bottom: frame.height - 1 - 3 * this.dpr\n        });\n        this.mStrengthValue.setProgress(ninePatch, this.scale);\n        this.playerIcon = this.scene.make.image({ key: this.key, frame: "head" });\n        this.playerIcon.x = -this.mStrengthValue.width * 0.5 - 8 * this.dpr;\n        this.mStrengthValue.add(this.playerIcon);\n        this.playerIcon.on("pointerup", this.onHeadHandler, this);\n        this.playerIcon.setInteractive();\n        this.mStrengthValue.setValue(1000, 1000);\n        this.mStrengthValue.setInteractive();\n        this.mStrengthValue.on("pointerup", this.onStrengthHandler, this);\n        var lvx = this.playerIcon.x + this.playerIcon.width * 0.5 - 2 * this.dpr;\n        var lvy = this.playerIcon.y + this.playerIcon.height * 0.5 - 10 * this.dpr;\n        this.playerLv = this.scene.make.text({ text: "0", x: lvx, y: lvy, style: { fontSize: 11 * this.dpr, bold: true, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT, color: "#356EE3" } }, false).setOrigin(1, 0);\n        this.playerLv.setShadow(0, 0, "#ffffff", 2);\n        this.playerLv.setStroke("#356EE3", 2);\n        this.playerLv.setShadowStroke(true);\n        this.mStrengthValue.add(this.playerLv);\n        //  this.mExpProgress = new ExpProgress(this.scene, this.key, this.dpr, this.scale, this.mWorld);\n        this.playerCon.add([this.mStrengthValue, this.mCoinValue, this.mDiamondValue]);\n        this.roomCon = this.scene.make.container(undefined, false);\n        this.roomCon.y = this.playerCon.y + 32 * this.dpr;\n        this.add(this.roomCon);\n        this.mSceneName = new SceneName(this.scene, this.key, "room_icon", "setting_icon", this.dpr);\n        this.mSceneName.setText("");\n        this.mSceneName.x = 18 * this.dpr;\n        this.mCounter = new IconText(this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "home_persons", this.dpr);\n        this.mCounter.setText("");\n        this.mCounter.x = this.mSceneName.x + this.mSceneName.rightbound + 5 * this.dpr;\n        this.mCounter.y = this.mSceneName.y;\n        this.mCounter.setColor("#28D5F5");\n        this.textToolTip = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["TextToolTips"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "tips_bg", this.dpr, this.scale);\n        this.textToolTip.setSize(160 * this.dpr, 45).visible = false;\n        this.praiseBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["CheckBox"](this.scene, this.key, "praise_before_bg", "praise_after_bg", "1");\n        this.praiseBtn.y = this.mSceneName.y + this.mSceneName.height + this.praiseBtn.height * 0.5 + 20 * this.dpr;\n        this.praiseBtn.x = 8 * this.dpr + this.praiseBtn.width * 0.5;\n        this.praiseBtn.setTextStyle({ fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT });\n        this.praiseBtn.setTextOffset(10 * this.dpr, 0);\n        this.praiseBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onPraiseHandler, this);\n        this.praiseImg = this.scene.make.image({ key: this.key, frame: "praise_before" });\n        this.praiseImg.x = -10 * this.dpr;\n        this.praiseBtn.add(this.praiseImg);\n        this.partyBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "home_party_bg", "home_party_bg", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("main_ui.party"));\n        this.partyBtn.x = this.praiseBtn.x + this.praiseBtn.width * 0.5 + this.partyBtn.width * 0.5 + 5 * this.dpr;\n        this.partyBtn.y = this.praiseBtn.y;\n        this.partyBtn.setTextOffset(8 * this.dpr, 0);\n        this.partyBtn.setTextStyle({ fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT });\n        this.partyBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onPartyHandler, this);\n        this.roomCon.add([this.mSceneName, this.mCounter, this.praiseBtn, this.partyBtn, this.textToolTip]);\n        this.roomCon.setSize(this.mSceneName.rightbound * 2, 30 * this.dpr);\n        this.resize(w, h);\n        _super.prototype.init.call(this);\n    };\n    PicaNewOldMainPanel.prototype.onOpenRoomPanel = function () {\n        this.render.renderEmitter("openroompanel");\n    };\n    PicaNewOldMainPanel.prototype.onHeadHandler = function () {\n        this.render.renderEmitter("showPanel", structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].CHARACTERINFO_NAME);\n    };\n    PicaNewOldMainPanel.prototype.onStrengthHandler = function () {\n        var _this = this;\n        if (this.playerInfo) {\n            var energy = this.playerInfo.energy;\n            var rep = energy.currentValue + "/" + energy.max + "\\n";\n            var text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("main_ui.energy_tips", { "name": rep, "interpolation": { "escapeValue": false } });\n            if (!this.textToolTip.visible)\n                this.scene.input.on("pointerdown", this.onTextToolTipHandler, this);\n            this.textToolTip.setDelayText(text, 3000, new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, function () {\n                _this.scene.input.off("pointerdown", _this.onTextToolTipHandler, _this);\n            }));\n            this.textToolTip.setPosition(120 * this.dpr, 20 * this.dpr);\n        }\n    };\n    PicaNewOldMainPanel.prototype.onTextToolTipHandler = function () {\n        this.textToolTip.visible = false;\n        this.scene.input.off("pointerdown", this.onTextToolTipHandler, this);\n    };\n    PicaNewOldMainPanel.prototype.checkUpdateActive = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr, _i, arr_1, data;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.mWorld.mainPeer.getActiveUIData("PicaMainUI")];\n                    case 1:\n                        arr = _a.sent();\n                        if (arr) {\n                            for (_i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n                                data = arr_1[_i];\n                                this.updateUIState(data);\n                            }\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PicaNewOldMainPanel.prototype.onUpdatePlayerHandler = function (content) {\n        this.playerInfo = content;\n        this.updatePlayerInfo(content);\n    };\n    PicaNewOldMainPanel.prototype.onUpdateRoomHandler = function (content) {\n        this.roomInfo = content;\n        this.updateRoomInfo(content);\n    };\n    PicaNewOldMainPanel.prototype.onUpdatePartyHandler = function (party) {\n        if (this.roomInfo)\n            this.updateRoomInfo(this.roomInfo);\n    };\n    PicaNewOldMainPanel.prototype.onPraiseHandler = function (pointer, box) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].QUERY_PRAISE, box.selected);\n    };\n    PicaNewOldMainPanel.prototype.onPartyHandler = function () {\n        this.render.renderEmitter("showPanel", structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAOPENPARTY_NAME);\n    };\n    PicaNewOldMainPanel.prototype.onOpenRechargeHandler = function () {\n        this.render.renderEmitter("showPanel", structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICARECHARGE_NAME);\n    };\n    return PicaNewOldMainPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\nvar ValueContainer = /** @class */ (function (_super) {\n    __extends(ValueContainer, _super);\n    function ValueContainer(scene, key, leftIcon, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        var _this = _super.call(this, scene) || this;\n        _this.init(key, leftIcon, dpr);\n        return _this;\n    }\n    ValueContainer.prototype.setText = function (val) {\n        this.mText.setText(val);\n    };\n    ValueContainer.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    ValueContainer.prototype.init = function (key, leftIcon, dpr) {\n        var bg = this.scene.make.image({\n            key: key,\n            frame: "home_progress_bottom"\n        }, false);\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mLeft = this.scene.make.image({\n            key: key,\n            frame: leftIcon,\n        }, false);\n        this.mLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mText = this.scene.make.text({\n            text: "0",\n            width: bg.width,\n            height: bg.height,\n            style: {\n                fontSize: 14 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].NUMBER\n            }\n        }, false).setOrigin(0.5);\n        this.mText.setStroke("#000000", 1 * dpr);\n        this.mText.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mAddBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, key, "add_btn", "add_btn");\n        this.setSize(bg.width, bg.height);\n        this.mLeft.x = -bg.width * 0.5 + 5 * dpr;\n        this.mLeft.y = bg.y + bg.height * 0.5 - this.mLeft.height * 0.5;\n        this.mAddBtn.x = this.width * this.originX - this.mAddBtn.width * this.originX - 5 * dpr;\n        this.mText.x = 4 * dpr;\n        this.add([bg, this.mLeft, this.mText, this.mAddBtn]);\n        this.mAddBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onAddHandler, this);\n    };\n    ValueContainer.prototype.onAddHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.run();\n    };\n    return ValueContainer;\n}(Phaser.GameObjects.Container));\nvar IconText = /** @class */ (function (_super) {\n    __extends(IconText, _super);\n    function IconText(scene, key, frame, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        var _this = _super.call(this, scene) || this;\n        var icon = scene.make.image({\n            key: key,\n            frame: frame\n        }, false);\n        _this.mText = scene.make.text({\n            style: {\n                fontSize: 14 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        _this.mText.x = icon.width / 2 + 4 * dpr;\n        // this.mText.y = -icon.height / 2;\n        _this.mText.setStroke("#000000", 2 * dpr);\n        _this.add([icon, _this.mText]);\n        return _this;\n    }\n    IconText.prototype.setText = function (val) {\n        this.mText.setText(val);\n    };\n    IconText.prototype.setStroke = function (color, thickness) {\n        this.mText.setStroke(color, thickness);\n    };\n    IconText.prototype.setColor = function (color) {\n        this.mText.setColor(color);\n    };\n    return IconText;\n}(Phaser.GameObjects.Container));\nvar SceneName = /** @class */ (function (_super) {\n    __extends(SceneName, _super);\n    function SceneName(scene, key, leftFrame, rightFrame, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        var _this = _super.call(this, scene, key, leftFrame, dpr) || this;\n        _this.mDpr = dpr;\n        _this.mRightIcon = scene.make.image({\n            y: 2 * dpr,\n            key: key,\n            frame: rightFrame\n        }, false);\n        _this.add(_this.mRightIcon);\n        _this.mRightIcon.y = 8 * dpr;\n        _this.mRightIcon.x = 10 * dpr;\n        return _this;\n    }\n    SceneName.prototype.setText = function (val) {\n        _super.prototype.setText.call(this, val);\n    };\n    Object.defineProperty(SceneName.prototype, "rightbound", {\n        get: function () {\n            return this.mText.x + this.mText.width + 10 * this.mDpr;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SceneName.prototype, "rightIcon", {\n        get: function () {\n            return this.mRightIcon;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return SceneName;\n}(IconText));\nvar ExpProgress = /** @class */ (function (_super) {\n    __extends(ExpProgress, _super);\n    function ExpProgress(scene, key, dpr, scale, render) {\n        var _this = _super.call(this, scene) || this;\n        var width = render.getSize().width / scale;\n        var frame = _this.scene.textures.getFrame(key, "exp_bg");\n        _this.setSize(width, frame.height);\n        var progressW = _this.width;\n        var progressH = _this.height;\n        _this.mProgressBar = new ProgressBar(scene, dpr);\n        _this.mProgressBar.setSize(_this.width, _this.height);\n        var bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, progressW / 2, progressH / 2, progressW, progressH, key, "exp_bg", {\n            left: 8 * dpr,\n            top: 3 * dpr,\n            right: frame.width - 2 - 8 * dpr,\n            bottom: frame.height - 1 - 3 * dpr\n        });\n        _this.mProgressBar.setBackground(bg);\n        frame = _this.scene.textures.getFrame(key, "exp_progress");\n        var progres = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, progressW / 2, progressH / 2, width, frame.height, key, "exp_progress", {\n            left: 8 * dpr,\n            top: 3 * dpr,\n            right: frame.width - 2 - 10 * dpr,\n            bottom: frame.height - 1 - 5 * dpr\n        });\n        _this.mProgressBar.setProgress(progres, scale);\n        _this.mProgressBar.setRatio(0.5);\n        _this.mCurrentLv = scene.make.text({\n            text: "57",\n            style: {\n                fontSize: 10 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false);\n        _this.mCurrentLv.setStroke("#000000", 1 * dpr);\n        _this.mNextLv = scene.make.text({\n            text: "58",\n            style: {\n                fontSize: 10 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0);\n        _this.mNextLv.setStroke("#000000", 1 * dpr);\n        _this.mNextLv.x = _this.width - _this.mNextLv.width;\n        _this.add([_this.mProgressBar, _this.mCurrentLv, _this.mNextLv]);\n        return _this;\n    }\n    ExpProgress.prototype.setLv = function (val, ratio) {\n        this.mCurrentLv.setText(val.toString());\n        this.mNextLv.setText((val + 1).toString());\n        this.mNextLv.x = this.width - this.mNextLv.width;\n        this.mProgressBar.setRatio(ratio);\n    };\n    return ExpProgress;\n}(Phaser.GameObjects.Container));\nvar ProgressValue = /** @class */ (function (_super) {\n    __extends(ProgressValue, _super);\n    function ProgressValue(scene, key, leftIcon, dpr) {\n        return _super.call(this, scene, key, leftIcon, dpr) || this;\n    }\n    ProgressValue.prototype.setProgress = function (progres, scale) {\n        this.mProgress.setProgress(progres, scale);\n    };\n    ProgressValue.prototype.setValue = function (val, maxValue) {\n        if (this.mText) {\n            this.mText.text = val + "/" + maxValue;\n            this.mProgress.setRatio(val / maxValue);\n        }\n    };\n    ProgressValue.prototype.setInteractive = function (shape) {\n        shape = shape || new Phaser.Geom.Rectangle(0, 0, this.width, this.height);\n        _super.prototype.setInteractive.call(this, shape, Phaser.Geom.Rectangle.Contains);\n        return this;\n    };\n    ProgressValue.prototype.init = function (key, leftIcon, dpr) {\n        var bg = this.scene.make.image({\n            key: key,\n            frame: "home_progress_bottom"\n        }, false);\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.setSize(bg.width, bg.height);\n        this.mLeft = this.scene.make.image({\n            key: key,\n            frame: leftIcon,\n        }, false);\n        this.mLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mProgress = new ProgressBar(this.scene, dpr);\n        this.mProgress.x = -this.width / 2 + 10 * dpr;\n        this.mProgress.y = 4 * dpr;\n        this.mText = this.scene.make.text({\n            text: "0",\n            width: bg.width,\n            height: bg.height,\n            style: {\n                fontSize: 10 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].NUMBER\n            }\n        }, false).setOrigin(0.5);\n        this.mText.setStroke("#000000", 1 * dpr);\n        this.mText.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mAddBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, key, "add_btn", "add_btn");\n        this.setSize(bg.width, bg.height);\n        this.mLeft.x = -this.width * this.originX + 13 * dpr;\n        this.mAddBtn.x = this.width * this.originX - 10 * dpr;\n        //  this.mText.y = (this.height - this.mText.height) / 2;\n        this.add([bg, this.mProgress, this.mLeft, this.mText, this.mAddBtn]);\n    };\n    return ProgressValue;\n}(ValueContainer));\nvar ProgressBar = /** @class */ (function (_super) {\n    __extends(ProgressBar, _super);\n    function ProgressBar(scene, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        return _this;\n    }\n    ProgressBar.prototype.setBackground = function (bg) {\n        this.addAt(bg, 0);\n    };\n    ProgressBar.prototype.setProgress = function (progress, scale) {\n        this.mScale = scale;\n        this.mProgress = progress;\n        this.add(this.mProgress);\n        this.setSize(progress.width * this.mScale, progress.height * this.mScale);\n        var worldpos = progress.getWorldTransformMatrix();\n        this.worldpos = new Phaser.Geom.Point(worldpos.tx, worldpos.ty);\n        this.mMaskGraphics = this.scene.make.graphics(undefined, false);\n        this.mMaskGraphics.fillStyle(0xFF9900);\n        this.mMaskGraphics.fillRect(0, 0, this.width, this.height + 8 * this.dpr);\n        this.mProgress.mask = new Phaser.Display.Masks.GeometryMask(this.scene, this.mMaskGraphics);\n        this.mMaskGraphics.y = worldpos.ty + this.height + 4 * this.dpr;\n        this.mMaskGraphics.x = worldpos.tx;\n    };\n    ProgressBar.prototype.setRatio = function (ratio) {\n        if (!this.mMaskGraphics) {\n            return;\n        }\n        this.mMaskGraphics.x = this.worldpos.x + 4 * this.dpr - this.mProgress.width * 0.5 + ((this.width * ratio) - this.width);\n    };\n    return ProgressBar;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaNewMain/PicaNewOldMainPanel.ts?')},"./src/pica/render/ui/PicaNewRole/PicaNewRolePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaNewRolePanel", function() { return PicaNewRolePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaNewRolePanel = /** @class */ (function (_super) {\n    __extends(PicaNewRolePanel, _super);\n    function PicaNewRolePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.followed = false;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWROLE_NAME;\n        _this.UIType = apowophaserui__WEBPACK_IMPORTED_MODULE_0__["UIType"].Scene;\n        return _this;\n    }\n    PicaNewRolePanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, w, h);\n        this.setSize(w, h);\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0x000000, 0.66);\n        this.blackGraphic.fillRect(0, 0, w, h);\n        this.content.x = w * 0.5;\n        this.content.y = h + this.content.height * 0.5 + 10 * this.dpr;\n        this.content.setInteractive();\n        this.setInteractive(new Phaser.Geom.Rectangle(0, 0, w * 2, h * 2), Phaser.Geom.Rectangle.Contains);\n        var fromy = this.scaleHeight + this.content.height * 0.5 + 10 * this.dpr;\n        var toy = this.scaleHeight - this.content.height * 0.5;\n        this.playMove(fromy, toy);\n    };\n    PicaNewRolePanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.addListen();\n        this.render.renderEmitter(this.key + "_initialized");\n        this.setRoleData(this.roleData);\n        this.setFollowButton(this.followed);\n    };\n    PicaNewRolePanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.openBigBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onOpeningCharacterHandler, this);\n        this.followBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onFollowHandler, this);\n        this.tradingBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onTradingHandler, this);\n        this.on("pointerdown", this.OnClosePanel, this);\n    };\n    PicaNewRolePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.openBigBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onOpeningCharacterHandler, this);\n        this.followBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onFollowHandler, this);\n        this.tradingBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onTradingHandler, this);\n        this.off("pointerdown", this.OnClosePanel, this);\n    };\n    PicaNewRolePanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaNewRolePanel.prototype.preload = function () {\n        this.addAtlas(this.key, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].textureUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommonurl), picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].jsonUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommonurl));\n        _super.prototype.preload.call(this);\n    };\n    PicaNewRolePanel.prototype.init = function () {\n        var conWdith = this.scaleWidth;\n        var conHeight = 87 * this.dpr;\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.add(this.blackGraphic);\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.add(this.content);\n        this.bg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ThreeSlicePath"](this.scene, 0, 0, conWdith, 87 * this.dpr, this.key, ["people_panel_bg_left", "people_panel_bg_middle", "people_panel_bg_right"], this.dpr);\n        this.bg.y = conHeight * 0.5 - this.bg.height * 0.5;\n        this.content.add(this.bg);\n        this.headAvatar = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["UIDragonbonesDisplay"](this.scene, this.render);\n        this.headAvatar.x = -conWdith * 0.5 + 60 * this.dpr;\n        this.headAvatar.y = 35 * this.dpr;\n        this.headAvatar.scale = this.dpr * 2;\n        this.headAvatar.visible = false;\n        this.content.add(this.headAvatar);\n        this.nameImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 20 * this.dpr, this.key, "people_woman", this.dpr);\n        this.nameImage.setOffset(-this.dpr, 0);\n        this.nameImage.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].whiteStyle(this.dpr, 14));\n        this.nameImage.setLayout(1);\n        this.nameImage.setText("");\n        this.nameImage.x = this.headAvatar.x + 70 * this.dpr;\n        this.nameImage.y = -conHeight * 0.5 + 15 * this.dpr;\n        this.content.add(this.nameImage);\n        this.levelLabel = this.scene.make.text({ x: this.nameImage.x - 8 * this.dpr, y: this.nameImage.y + 20 * this.dpr, text: "", style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].whiteStyle(this.dpr) });\n        this.levelLabel.setOrigin(0, 0.5);\n        this.content.add(this.levelLabel);\n        // this.vipvalue = new ImageValue(this.scene, 60 * this.dpr, 20 * this.dpr, UIAtlasKey.commonKey, "iv_coin", this.dpr);\n        // this.vipvalue.setOffset(-this.dpr, 0);\n        // this.vipvalue.setTextStyle({ color: "#FFEA00" });\n        // this.vipvalue.setLayout(1);\n        // this.vipvalue.x = this.levelLabel.x + this.levelLabel.width +  20* this.dpr;\n        // this.vipvalue.y = this.levelLabel.y;\n        // this.content.add(this.vipvalue);\n        this.openBigBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "people_minute", "people_minute");\n        this.openBigBtn.setSize(20 * this.dpr, 20 * this.dpr);\n        this.openBigBtn.removeInteractive();\n        this.openBigBtn.setInteractive();\n        this.openBigBtn.y = -conHeight * 0.5 + 15 * this.dpr;\n        this.openBigBtn.x = conWdith * 0.5 - 20 * this.dpr;\n        this.content.add(this.openBigBtn);\n        var fnormals = ["butt_yellow_left_s", "butt_yellow_middle_s", "butt_yellow_right_s"];\n        this.followBtn = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ThreeSliceButton"](this.scene, 84 * this.dpr, 31 * this.dpr, this.key, fnormals, fnormals, utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.follow"));\n        this.followBtn.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].brownishStyle(this.dpr));\n        this.followBtn.y = conHeight * 0.5 - this.followBtn.height * 0.5 - 5 * this.dpr;\n        this.followBtn.x = -this.followBtn.width * 0.5 + 20 * this.dpr;\n        this.content.add(this.followBtn);\n        var tnormals = ["butt_red_left_s", "butt_red_middle_s", "butt_red_right_s"];\n        this.tradingBtn = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ThreeSliceButton"](this.scene, 84 * this.dpr, 31 * this.dpr, this.key, tnormals, tnormals, utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("player_info.trading"));\n        this.tradingBtn.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].brownishStyle(this.dpr));\n        this.tradingBtn.y = this.followBtn.y;\n        this.tradingBtn.x = this.tradingBtn.width * 0.5 + 40 * this.dpr;\n        this.content.add(this.tradingBtn);\n        this.resize();\n        _super.prototype.init.call(this);\n    };\n    PicaNewRolePanel.prototype.setRoleData = function (content) {\n        var _this = this;\n        this.roleData = content;\n        if (!this.mInitialized || !this.roleData)\n            return;\n        var temp = structure__WEBPACK_IMPORTED_MODULE_2__["AvatarSuitType"].getSuitsFromItem(content.avatarSuit);\n        var dbModel = { id: content.id, avatar: temp.avatar };\n        this.headAvatar.visible = false;\n        this.headAvatar.setSuits(temp.suits);\n        this.headAvatar.once("replacefinished", function () {\n            _this.headAvatar.play({ name: "idle", flip: false });\n            _this.headAvatar.visible = true;\n        });\n        this.headAvatar.load(dbModel);\n        this.nameImage.setFrameValue(content.nickname, this.key, "people_man");\n        this.levelLabel.text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("common.lv") + " " + content.level.level;\n        var tnormals = ["butt_gray_left_s", "butt_gray_middle_s", "butt_gray_right_s"];\n        this.tradingBtn.setFrameNormal(tnormals, tnormals);\n        this.tradingBtn.setTextColor("#000000");\n        this.tradingBtn.setEnable(false, false);\n    };\n    PicaNewRolePanel.prototype.setFollowButton = function (follow) {\n        this.followed = follow;\n        if (!this.mInitialized)\n            return;\n        this.followBtn.setText(follow ? utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.unfollow") : utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("friendlist.follow"));\n    };\n    PicaNewRolePanel.prototype.playMove = function (from, to) {\n        var tween = this.scene.tweens.add({\n            targets: this.content,\n            y: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: 150,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n            },\n        });\n    };\n    PicaNewRolePanel.prototype.onOpeningCharacterHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWROLE_NAME + "_openingcharacter", this.roleData);\n        this.OnClosePanel();\n    };\n    PicaNewRolePanel.prototype.onFollowHandler = function () {\n        if (this.roleData === undefined)\n            return;\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWROLE_NAME + "_followcharacter", { uid: this.roleData.cid, follow: this.followed });\n    };\n    PicaNewRolePanel.prototype.onTradingHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANEWROLE_NAME + "_tradingcharacter", this.roleData);\n    };\n    PicaNewRolePanel.prototype.OnClosePanel = function () {\n        this.render.renderEmitter(this.key + "_hide");\n    };\n    return PicaNewRolePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaNewRole/PicaNewRolePanel.ts?')},"./src/pica/render/ui/PicaNotice/PicaNoticePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaNoticePanel", function() { return PicaNoticePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaNoticePanel = /** @class */ (function (_super) {\n    __extends(PicaNoticePanel, _super);\n    function PicaNoticePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.isbigbg = false;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICANOTICE_NAME;\n        return _this;\n    }\n    PicaNoticePanel.prototype.show = function (param) {\n        var _this = this;\n        if (param && Array.isArray(param) && param.length > 0) {\n            param = param[0];\n        }\n        this.mShowData = param;\n        if (param) {\n            if (param.display && param.display.length > 0)\n                this.isbigbg = true;\n        }\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (param) {\n            var text = param.text;\n            if (this.mContent && text && text.length > 0) {\n                this.mContent.setText(text[0].text);\n                if (this.isbigbg)\n                    this.mContent.y = -this.bg.height * 0.5 + this.mContent.height * 0.5 + 2 * this.dpr;\n            }\n            var display = param.display;\n            if (this.imageIcon && display && display.length > 0) {\n                var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(display[0].texturePath);\n                this.imageIcon.load(url, this, function () {\n                    _this.imageIcon.scale = _this.dpr;\n                    if (_this.mContent && _this.mContent.text !== "")\n                        _this.imageIcon.y = _this.bg.height * 0.5 - _this.imageIcon.displayHeight * 0.5 - 2 * _this.dpr;\n                });\n            }\n            var width = this.scene.cameras.main.width;\n            // this.view.alpha = 0;\n            this.scene.tweens.timeline({\n                targets: this,\n                duration: 500,\n                tweens: [{\n                        y: "-=" + 20 * this.dpr,\n                        ease: "Bounce.easeOut",\n                    }, {\n                        delay: 2000,\n                        y: "-=" + 20 * this.dpr,\n                        ease: "Linear",\n                        alpha: 0\n                    }],\n                onComplete: function () {\n                    _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["RENDER_PEER"] + "_" + _this.key + "_close");\n                }\n            });\n        }\n    };\n    PicaNoticePanel.prototype.resize = function () {\n        this.x = this.scene.cameras.main.width / 2;\n        this.y = 170 * this.dpr;\n    };\n    PicaNoticePanel.prototype.preload = function () {\n        var url = this.isbigbg ? "pica_notice/bg_big.png" : "pica_notice/bg.png";\n        var key = this.isbigbg ? "pica_notice_bg_big" : "pica_notice_bg";\n        this.addImage(key, url);\n        _super.prototype.preload.call(this);\n    };\n    PicaNoticePanel.prototype.init = function () {\n        var key = this.isbigbg ? "pica_notice_bg_big" : "pica_notice_bg";\n        this.bg = this.scene.make.image({\n            key: key\n        }, false);\n        this.mContent = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.mScene, 0, 0, "", {\n            fontSize: 16 * this.dpr + "px",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            stroke: "#000000",\n            strokeThickness: 1 * this.dpr,\n            align: "center",\n            textMask: false,\n            shadow: {\n                offsetX: 0,\n                offsetY: 0,\n                color: "#000",\n                blur: 4,\n                stroke: true,\n                fill: true\n            },\n            wrap: {\n                mode: "char",\n                width: this.bg.width * this.scale - 12 * this.dpr\n            }\n        }).setOrigin(0.5, 0.5);\n        this.mContent.setFontStyle("bold");\n        this.add([this.bg, this.mContent]);\n        if (this.isbigbg) {\n            this.imageIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, 0);\n            this.add(this.imageIcon);\n        }\n        this.mScene.layerManager.addToLayer(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["MainUIScene"].LAYER_TOOLTIPS, this);\n        _super.prototype.init.call(this);\n        this.resize();\n    };\n    return PicaNoticePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaNotice/PicaNoticePanel.ts?')},"./src/pica/render/ui/PicaOnline/PicaOnlineBottomPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaOnlineBottomPanel", function() { return PicaOnlineBottomPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaOnlineBottomPanel = /** @class */ (function (_super) {\n    __extends(PicaOnlineBottomPanel, _super);\n    function PicaOnlineBottomPanel(scene, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.isblack = false;\n        _this.setSize(width, height);\n        _this.setInteractive();\n        _this.init();\n        return _this;\n    }\n    PicaOnlineBottomPanel.prototype.init = function () {\n        var conWdith = this.width;\n        var conHeight = 69 * this.dpr;\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0x000000, 0.66);\n        this.blackGraphic.fillRect(0, 0, this.width, this.height);\n        this.blackGraphic.x = -this.width * 0.5;\n        this.blackGraphic.y = -this.height * 0.5;\n        this.add(this.blackGraphic);\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.add(this.content);\n        this.bg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ThreeSlicePath"](this.scene, 0, 0, conWdith, 87 * this.dpr, this.key, ["people_panel_bg_left", "people_panel_bg_middle", "people_panel_bg_right"], this.dpr);\n        this.bg.y = conHeight * 0.5 - this.bg.height * 0.5 + 18 * this.dpr;\n        this.content.add(this.bg);\n        this.headIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, 0);\n        this.headIcon.x = -conWdith * 0.5 + 40 * this.dpr;\n        this.headIcon.y = 0 * this.dpr;\n        this.headIcon.scale = this.dpr;\n        this.headIcon.visible = false;\n        this.content.add(this.headIcon);\n        this.nameText = this.scene.make.text({ x: -conWdith * 0.5 + 96 * this.dpr, y: -conHeight * 0.5 + 15 * this.dpr, text: "", style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].whiteStyle(this.dpr, 14) });\n        this.nameText.setFontStyle("bold");\n        this.nameText.setOrigin(0, 0.5);\n        this.content.add(this.nameText);\n        var fnormals = ["butt_yellow_left_s", "butt_yellow_middle_s", "butt_yellow_right_s"];\n        this.reportBtn = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ThreeSliceButton"](this.scene, 84 * this.dpr, 31 * this.dpr, this.key, fnormals, fnormals, utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("player_info.report"));\n        this.reportBtn.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr));\n        this.reportBtn.y = conHeight * 0.5 - this.reportBtn.height * 0.5 - 5 * this.dpr;\n        this.reportBtn.x = this.reportBtn.width * 0.5 + 20 * this.dpr;\n        this.reportBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onReportHandler, this);\n        this.content.add(this.reportBtn);\n        var tnormals = ["butt_red_left_s", "butt_red_middle_s", "butt_red_right_s"];\n        this.blackBtn = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ThreeSliceButton"](this.scene, 84 * this.dpr, 31 * this.dpr, this.key, tnormals, tnormals, utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("player_info.blockuer"));\n        this.blackBtn.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].whiteStyle(this.dpr));\n        this.blackBtn.y = this.reportBtn.y;\n        this.blackBtn.x = -this.blackBtn.width * 0.5 - 5 * this.dpr;\n        this.blackBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onBlockHandler, this);\n        this.content.add(this.blackBtn);\n        this.content.x = 0;\n        this.content.y = this.height * 0.5 + this.content.height * 0.5 + 10 * this.dpr;\n        this.content.setInteractive();\n    };\n    PicaOnlineBottomPanel.prototype.setRoleData = function (data, isblock) {\n        var _this = this;\n        this.roleData = data;\n        this.isblack = isblock;\n        if (!this.roleData)\n            return;\n        this.headIcon.visible = false;\n        this.nameText.text = data.nickname;\n        if (data.avatar) {\n            var url = utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getOsdRes(data["avatar"]);\n            this.headIcon.load(url, this, function () {\n                _this.headIcon.visible = true;\n            });\n        }\n        this.blackBtn.setText(isblock ? utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("player_info.remove_black") : utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("player_info.blockuer"));\n    };\n    PicaOnlineBottomPanel.prototype.refreshBlack = function (isblack) {\n        this.setRoleData(this.roleData, isblack);\n    };\n    PicaOnlineBottomPanel.prototype.setHandler = function (handler) {\n        this.sendHandler = handler;\n    };\n    PicaOnlineBottomPanel.prototype.addListen = function () {\n        this.reportBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onReportHandler, this);\n        this.blackBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onBlockHandler, this);\n        this.on("pointerdown", this.onCloseHandler, this);\n    };\n    PicaOnlineBottomPanel.prototype.removeListen = function () {\n        this.reportBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onReportHandler, this);\n        this.blackBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onBlockHandler, this);\n        this.off("pointerdown", this.onCloseHandler, this);\n    };\n    PicaOnlineBottomPanel.prototype.show = function () {\n        this.addListen();\n        this.visible = true;\n        var tempy = this.height * 0.5 + this.content.height * 0.5 + 10 * this.dpr;\n        this.content.y = tempy;\n        var fromy = tempy;\n        var toy = this.height * 0.5 - this.content.height * 0.5;\n        this.playMove(fromy, toy);\n    };\n    PicaOnlineBottomPanel.prototype.hide = function () {\n        this.removeListen();\n        this.visible = false;\n    };\n    PicaOnlineBottomPanel.prototype.playMove = function (from, to) {\n        var tween = this.scene.tweens.add({\n            targets: this.content,\n            y: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: 150,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n            },\n        });\n    };\n    PicaOnlineBottomPanel.prototype.onReportHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["report"]);\n    };\n    PicaOnlineBottomPanel.prototype.onBlockHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["block", { uid: this.roleData.platformId, black: !this.isblack }]);\n    };\n    PicaOnlineBottomPanel.prototype.onCloseHandler = function () {\n        this.hide();\n        if (this.sendHandler)\n            this.sendHandler.runWith(["close"]);\n    };\n    return PicaOnlineBottomPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaOnline/PicaOnlineBottomPanel.ts?')},"./src/pica/render/ui/PicaOnline/PicaOnlinePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaOnlinePanel", function() { return PicaOnlinePanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _PicaOnlineBottomPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaOnlineBottomPanel */ "./src/pica/render/ui/PicaOnline/PicaOnlineBottomPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar PicaOnlinePanel = /** @class */ (function (_super) {\n    __extends(PicaOnlinePanel, _super);\n    function PicaOnlinePanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAONLINE_NAME;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon];\n        return _this;\n    }\n    PicaOnlinePanel.prototype.resize = function (w, h) {\n        var scale = this.scale;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0x01CDFF, 1);\n        this.mBackground.fillRect(0, 0, this.content.width, height);\n        this.mBackground.x = -this.content.width * 0.5;\n        this.mBackground.y = -height * 0.5;\n        this.content.x = width + this.content.width * 0.5 + 10 * this.dpr;\n        this.content.y = height * 0.5;\n        this.bottomPanel.x = width * 0.5;\n        this.bottomPanel.y = height * 0.5;\n        this.setSize(width, height);\n    };\n    PicaOnlinePanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mBlack.on("pointerup", this.onCloseHandler, this);\n    };\n    PicaOnlinePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mBlack.off("pointerup", this.onCloseHandler, this);\n    };\n    PicaOnlinePanel.prototype.destroy = function () {\n        this.removeListen();\n        _super.prototype.destroy.call(this);\n    };\n    PicaOnlinePanel.prototype.setOnlineDatas = function (datas, people, userid) {\n        this.onlineData = datas;\n        this.userid = userid;\n        this.people = people;\n        if (!this.mInitialized)\n            return;\n        this.peopleImg.setText(people + "");\n        this.mGameGrid.setItems(datas);\n    };\n    PicaOnlinePanel.prototype.setBlackList = function (blacklist) {\n        this.blackList = blacklist;\n        if (!this.mInitialized)\n            return;\n        this.refreshBottomPanel();\n    };\n    PicaOnlinePanel.prototype.setAvatarList = function (avatars) {\n        for (var _i = 0, _a = this.onlineData; _i < _a.length; _i++) {\n            var player = _a[_i];\n            for (var _b = 0, avatars_1 = avatars; _b < avatars_1.length; _b++) {\n                var data = avatars_1[_b];\n                var id = data._id;\n                var avatar = data.avatar;\n                if (player.platformId === id) {\n                    player.avatar = avatar;\n                }\n            }\n        }\n        if (!this.mInitialized)\n            return;\n        this.mGameGrid.refresh();\n    };\n    PicaOnlinePanel.prototype.onInitialized = function () {\n        if (this.onlineData)\n            this.mGameGrid.setItems(this.onlineData);\n        if (this.people)\n            this.peopleImg.setText(this.people + "");\n    };\n    PicaOnlinePanel.prototype.init = function () {\n        var _this = this;\n        if (this.mInitialized)\n            return;\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        this.mBlack = this.scene.make.graphics(undefined, false);\n        this.mBlack.fillStyle(0, 0.66);\n        this.mBlack.fillRect(0, 0, w, h);\n        this.mBlack.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        this.add(this.mBlack);\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        this.content = this.scene.make.container(undefined, false);\n        var bgwidth = 237 * this.dpr;\n        this.content.setSize(bgwidth, h);\n        this.content.setInteractive();\n        this.bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, frame: "online_bg" });\n        this.bg.displayWidth = bgwidth;\n        this.bg.y = -h * 0.5 + this.bg.height * 0.5;\n        this.titleTex = this.scene.make.text({ x: 0, y: 0, text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("online.title"), style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].whiteStyle(this.dpr, 18) }).setOrigin(0, 0.5);\n        this.titleTex.setFontStyle("bold");\n        this.titleTex.x = -this.content.width * 0.5 + 10 * this.dpr;\n        this.titleTex.y = -this.content.height * 0.5 + 20 * this.dpr;\n        this.peopleImg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ImageValue"](this.scene, 50 * this.dpr, 20 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "online_people", this.dpr);\n        this.peopleImg.setOffset(-this.dpr, 0);\n        this.peopleImg.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].whiteStyle(this.dpr, 14));\n        this.peopleImg.setLayout(3);\n        this.peopleImg.setText("1000");\n        this.peopleImg.x = this.content.width * 0.5 - 30 * this.dpr;\n        this.peopleImg.y = this.titleTex.y;\n        var simpleHandler = new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onSimpleHandler);\n        var tableConfig = {\n            x: 0,\n            y: 25 * this.dpr,\n            table: {\n                width: bgwidth,\n                height: h - 40 * this.dpr,\n                columns: 1,\n                cellWidth: bgwidth,\n                cellHeight: 50 * this.dpr,\n                reuseCellContainer: true,\n                zoom: this.scale\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, index = cell.index, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new OnlineItem(_this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, _this.dpr);\n                    cellContainer.setHandler(simpleHandler);\n                }\n                cellContainer.setPlayerInfo(item, index);\n                return cellContainer;\n            },\n        };\n        this.mGameGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_5__["GameGridTable"](this.scene, tableConfig);\n        this.mGameGrid.layout();\n        this.mGameGrid.on("cellTap", this.onGridTableHandler, this);\n        this.content.add([this.mBackground, this.bg, this.titleTex, this.peopleImg, this.mGameGrid]);\n        this.add(this.content);\n        this.bottomPanel = new _PicaOnlineBottomPanel__WEBPACK_IMPORTED_MODULE_6__["PicaOnlineBottomPanel"](this.scene, w, h, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, this.dpr);\n        this.bottomPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onBottomPanelHandler));\n        this.add(this.bottomPanel);\n        this.bottomPanel.visible = false;\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n        this.playMove();\n    };\n    PicaOnlinePanel.prototype.onGridTableHandler = function (item) {\n        var playerData = item.playerData;\n        this.render.renderEmitter(this.key + "_openingcharacter", playerData.platformId);\n    };\n    PicaOnlinePanel.prototype.playMove = function () {\n        var _this = this;\n        var width = this.scaleWidth;\n        var from = width + this.content.width * 0.5 + 10 * this.dpr;\n        var to = width - this.content.width * 0.5;\n        var tween = this.scene.tweens.add({\n            targets: this.content,\n            x: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: 300,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                _this.mGameGrid.resetMask();\n            },\n        });\n    };\n    PicaOnlinePanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(this.key + "_close");\n    };\n    PicaOnlinePanel.prototype.onSimpleHandler = function (data) {\n        if (data.platformId === this.userid) {\n            this.render.renderEmitter(this.key + "_openingcharacter", data.platformId);\n        }\n        else {\n            this.add(this.bottomPanel);\n            this.bottomPanel.show();\n            var black = this.blackList.indexOf(data.platformId) !== -1;\n            this.bottomPanel.setRoleData(data, black);\n        }\n    };\n    PicaOnlinePanel.prototype.refreshBottomPanel = function () {\n        if (this.bottomPanel.visible) {\n            var platformId = this.bottomPanel.roleData.platformId;\n            var black = this.blackList.indexOf(platformId) !== -1;\n            this.bottomPanel.refreshBlack(black);\n        }\n    };\n    PicaOnlinePanel.prototype.onBottomPanelHandler = function (tag, data) {\n        if (tag === "report") {\n        }\n        else if (tag === "block") {\n            this.render.renderEmitter(this.key + "_block", data);\n        }\n        else if (tag === "close") {\n            this.closeBottomPanel();\n        }\n    };\n    PicaOnlinePanel.prototype.closeBottomPanel = function () {\n        this.bottomPanel.hide();\n        this.remove(this.bottomPanel);\n    };\n    return PicaOnlinePanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_4__["PicaBasePanel"]));\n\nvar OnlineItem = /** @class */ (function (_super) {\n    __extends(OnlineItem, _super);\n    function OnlineItem(scene, key, dpr) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.setSize(237 * dpr, 48 * dpr);\n        _this.headicon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](_this.scene, 0, 0);\n        _this.headicon.x = -_this.width * 0.5 + 10 * _this.dpr;\n        _this.headicon.y = 0;\n        _this.headicon.scale = _this.dpr * 0.8;\n        _this.headicon.visible = false;\n        _this.add(_this.headicon);\n        _this.nameImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ImageValue"](_this.scene, 60 * _this.dpr, 20 * _this.dpr, _this.key, "people_woman", _this.dpr);\n        _this.nameImage.setOffset(-_this.dpr, 0);\n        _this.nameImage.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].whiteStyle(_this.dpr, 14));\n        _this.nameImage.setLayout(1);\n        _this.nameImage.setText("");\n        _this.nameImage.x = _this.headicon.x + 70 * _this.dpr;\n        _this.nameImage.y = -_this.height * 0.5 + 15 * _this.dpr;\n        _this.add(_this.nameImage);\n        _this.levelLabel = _this.scene.make.text({ x: _this.nameImage.x - 8 * _this.dpr, y: _this.nameImage.y + 20 * _this.dpr, text: "", style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].whiteStyle(_this.dpr) });\n        _this.levelLabel.setOrigin(0, 0.5);\n        _this.add(_this.levelLabel);\n        _this.vipImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ImageValue"](_this.scene, 60 * _this.dpr, 20 * _this.dpr, _this.key, "people_woman", _this.dpr);\n        _this.vipImage.setOffset(-_this.dpr, 0);\n        _this.vipImage.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].whiteStyle(_this.dpr, 14));\n        _this.vipImage.setLayout(1);\n        _this.vipImage.setText("");\n        _this.vipImage.x = _this.levelLabel.x + 70 * _this.dpr;\n        _this.vipImage.y = -_this.width * 0.5 + 15 * _this.dpr;\n        // this.add(this.vipImage);\n        _this.line = _this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, frame: "online_divider" });\n        _this.line.y = _this.height * 0.5;\n        _this.add(_this.line);\n        _this.simpleButton = new apowophaserui__WEBPACK_IMPORTED_MODULE_5__["Button"](_this.scene, _this.key, "online_more");\n        _this.simpleButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_5__["ClickEvent"].Tap, _this.onSimpleClickHandler, _this);\n        _this.simpleButton.x = _this.width * 0.5 - _this.simpleButton.width * 0.5 - 10 * dpr;\n        // this.simpleButton.setSize(60 * this.dpr, 20 * this.dpr);\n        // this.simpleButton.removeInteractive();\n        // this.simpleButton.setInteractive();\n        // this.simpleButton["setInteractiveSize"](60 * this.dpr, 20 * this.dpr);\n        _this.add(_this.simpleButton);\n        return _this;\n    }\n    OnlineItem.prototype.setPlayerInfo = function (data) {\n        var _this = this;\n        this.playerData = data;\n        this.nameImage.setText(data.nickname);\n        this.levelLabel.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("common.lv") + " " + data.level.level;\n        this.headicon.visible = false;\n        if (data["avatar"]) {\n            var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(data["avatar"]);\n            this.headicon.load(url, this, function () {\n                _this.headicon.x = -_this.width * 0.5 + _this.headicon.displayWidth * 0.5 + 10 * _this.dpr;\n                _this.headicon.visible = true;\n            });\n        }\n    };\n    OnlineItem.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    OnlineItem.prototype.onSimpleClickHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith(this.playerData);\n    };\n    return OnlineItem;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["ButtonEventDispatcher"]));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaOnline/PicaOnlinePanel.ts?')},"./src/pica/render/ui/PicaOpenParty/PicaOpenPartyCreatePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaOpenPartyCreatePanel", function() { return PicaOpenPartyCreatePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaOpenPartyCreatePanel = /** @class */ (function (_super) {\n    __extends(PicaOpenPartyCreatePanel, _super);\n    function PicaOpenPartyCreatePanel(uiManager, x, y, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, uiManager.scene, x, y) || this;\n        _this.uiManager = uiManager;\n        _this.itemCount = 0;\n        _this.expiredTime = 0;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.render = uiManager.render;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    PicaOpenPartyCreatePanel.prototype.resize = function () {\n        if (this.gamegride)\n            this.gamegride.resetMask();\n    };\n    PicaOpenPartyCreatePanel.prototype.hide = function () {\n        this.visible = false;\n        this.changeInputState(false);\n    };\n    PicaOpenPartyCreatePanel.prototype.show = function () {\n        this.visible = true;\n        this.changeInputState(true);\n    };\n    PicaOpenPartyCreatePanel.prototype.destroy = function (fromScene) {\n        _super.prototype.destroy.call(this, fromScene);\n        if (this.timer)\n            this.timer.clear();\n    };\n    PicaOpenPartyCreatePanel.prototype.setPartyData = function (content, username, servertime) {\n        this.partyData = content;\n        this.setPartyInfoType(!content.created);\n        var timeticket = content.ticketsCount;\n        var topic = content.topics;\n        this.timeSlider.setValue(0, 0, 1);\n        this.partyTimevalue.text = "x" + timeticket;\n        if (content.created) {\n            this.mNameInput.text = content.name;\n            this.describleInput.text = content.des;\n            this.setExpiredValue(content.expired, servertime);\n        }\n        else {\n            this.mNameInput.text = utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.defaultname", { name: username });\n            this.describleInput.text = utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.describletitle");\n        }\n        this.gamegride.setItems(topic);\n        var cell;\n        if (content.created) {\n            var items = content.topics;\n            var index = 0;\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                var temp = items_1[_i];\n                if (temp.key === content.topic.key) {\n                    cell = temp;\n                    break;\n                }\n                index++;\n            }\n            this.gamegride.setT(index / items.length);\n            cell = this.gamegride.getCell(index);\n        }\n        else {\n            cell = this.gamegride.getCell(0);\n        }\n        if (cell && cell.container) {\n            this.onGridTableHandler(cell.container);\n        }\n    };\n    PicaOpenPartyCreatePanel.prototype.setExpiredValue = function (expiredTime, servertime) {\n        var _this = this;\n        this.expiredTime = expiredTime;\n        var interval = expiredTime - servertime;\n        if (interval < 0) {\n            if (this.timer)\n                this.timer.clear();\n            return;\n        }\n        if (!this.timer)\n            this.timer = new structure__WEBPACK_IMPORTED_MODULE_4__["TimerCountDown"](new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, function (_interval, text) {\n                _this.overageValue.text = text;\n                if (_interval <= 0) {\n                    _this.emit("querytheme");\n                    // if (this.timer) this.timer.clear();\n                }\n            }));\n        this.timer.execute(interval);\n    };\n    PicaOpenPartyCreatePanel.prototype.setPartyInfoType = function (create) {\n        if (create) {\n            this.partyNameTitle.text = "[b]" + utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partyname") + "[/b]";\n            this.partyThemeTitle.text = "[b]" + utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partytheme") + "[/b]";\n            this.describleTitle.text = "[b]" + utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partydescrible") + "[/b]";\n            this.partyTimeTitle.text = "[b]" + utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partytime") + "[/b]";\n            (this.overageTitle).visible = false;\n            this.overageValue.visible = false;\n            this.partyTimeTitle.y = this.describleTitle.y + 70 * this.dpr;\n            this.timeSlider.y = this.partyTimeTitle.y;\n            this.openBtn.setText(utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partyopen"));\n        }\n        else {\n            this.partyNameTitle.text = "[b]" + utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.modifyname") + "[/b]";\n            this.partyThemeTitle.text = "[b]" + utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.modifytheme") + "[/b]";\n            this.describleTitle.text = "[b]" + utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.modifydescrible") + "[/b]";\n            this.partyTimeTitle.text = "[b]" + utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.suppletime") + "[/b]";\n            (this.overageTitle).visible = true;\n            this.overageValue.visible = true;\n            this.partyTimeTitle.y = this.overageValue.y + 45 * this.dpr;\n            this.timeSlider.y = this.partyTimeTitle.y;\n            this.openBtn.setText(utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.confirm"));\n        }\n        this.partyTimeLable.y = this.partyTimeTitle.y + 34 * this.dpr;\n        this.partyCardImage.y = this.partyTimeLable.y;\n        this.partyTimevalue.y = this.partyTimeLable.y;\n    };\n    PicaOpenPartyCreatePanel.prototype.changeInputState = function (visible) {\n        // this.visible = visible;\n        this.describleInput.visible = visible;\n        (this.describleInput.node).style.display = visible ? "true" : "none";\n        this.mNameInput.visible = visible;\n        (this.mNameInput.node).style.display = visible ? "true" : "none";\n        if (visible)\n            this.openBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onOpenPartyHandler, this);\n        else\n            this.openBtn.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onOpenPartyHandler, this);\n    };\n    PicaOpenPartyCreatePanel.prototype.create = function () {\n        var _this = this;\n        this.partyNameTitle = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, -this.width * 0.5 + 10 * this.dpr, -this.height * 0.5 + 10 * this.dpr, utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partyname"), { fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, fontSize: 11 * this.dpr, color: "#000000" });\n        this.partyNameTitle.setOrigin(0, 0.5).setResolution(this.dpr);\n        // this.partyNameTitle.setStroke("#000000", 2);\n        this.add(this.partyNameTitle);\n        this.mNameInput = this.createInput(this.partyNameTitle.x + this.partyNameTitle.width + 13 * this.dpr, this.partyNameTitle.y, 190 * this.dpr, 37 * this.dpr, 13 * this.dpr);\n        this.mNameInput.on("textchange", this.onTextChangeHandler, this);\n        this.partyThemeTitle = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, this.partyNameTitle.x, this.partyNameTitle.y + 65 * this.dpr, utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partytheme"), { fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, fontSize: 11 * this.dpr, color: "#000000" });\n        this.partyThemeTitle.setOrigin(0, 0.5).setResolution(this.dpr);\n        //  this.partyThemeTitle.setStroke("#000000", 2);\n        this.add(this.partyThemeTitle);\n        var tableConfig = {\n            x: 30 * this.dpr,\n            y: this.partyThemeTitle.y + 7 * this.dpr,\n            table: {\n                width: 200 * this.dpr,\n                height: 90 * this.dpr,\n                columns: 1,\n                cellWidth: 70 * this.dpr,\n                cellHeight: 70 * this.dpr,\n                reuseCellContainer: true,\n                zoom: this.zoom,\n                padding: { left: -10 * this.dpr }\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new PicPartyThemeItem(_this.scene, 65 * _this.dpr, 70 * _this.dpr, _this.key, _this.dpr);\n                }\n                cellContainer.setThemeData(item);\n                if (_this.curPartyData && _this.curPartyData.key === item.key) {\n                    cellContainer.select = true;\n                    _this.curSelectItem = cellContainer;\n                }\n                return cellContainer;\n            },\n        };\n        this.gamegride = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.gamegride.layout();\n        this.gamegride.on("cellTap", this.onGridTableHandler, this);\n        this.add(this.gamegride);\n        this.describleTitle = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, this.partyThemeTitle.x, this.partyThemeTitle.y + 80 * this.dpr, utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partydescrible"), { fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, fontSize: 11 * this.dpr, color: "#000000" });\n        this.describleTitle.setOrigin(0, 0.5).setResolution(this.dpr);\n        this.add(this.describleTitle);\n        this.describleInput = this.createInput(this.describleTitle.x + this.describleTitle.width + 13 * this.dpr, this.describleTitle.y + 10 * this.dpr, 190 * this.dpr, 52 * this.dpr, 12 * this.dpr, "textarea");\n        this.overageTitle = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, this.describleTitle.x, this.describleTitle.y + 65 * this.dpr, "[b]" + utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.overagetime") + "[/b]", { fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, fontSize: 11 * this.dpr, color: "#000000" });\n        this.overageTitle.setOrigin(0, 0.5).setResolution(this.dpr);\n        this.add(this.overageTitle);\n        this.overageValue = this.scene.make.text({ x: this.overageTitle.x + this.overageTitle.width + 30 * this.dpr, y: this.overageTitle.y, text: "", style: { fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, fontSize: 11 * this.dpr, color: "#333333" } });\n        this.overageValue.setOrigin(0, 0.5).setResolution(this.dpr);\n        this.add(this.overageValue);\n        this.partyTimeTitle = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, this.overageTitle.x, this.overageTitle.y + 50 * this.dpr, utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partytime"), { fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, fontSize: 11 * this.dpr, color: "#000000" });\n        this.partyTimeTitle.setOrigin(0, 0.5).setResolution(this.dpr);\n        this.add(this.partyTimeTitle);\n        var sliderWidth = 190 * this.dpr;\n        var sliderHeight = 4 * this.dpr;\n        var sliderx = this.partyTimeTitle.x + this.partyTimeTitle.width + 10 * this.dpr + sliderWidth * 0.5;\n        this.createSlider(sliderx, this.partyTimeTitle.y, sliderWidth, sliderHeight);\n        this.partyTimeLable = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, this.partyTimeTitle.x + 50 * this.dpr, this.partyTimeTitle.y + 40 * this.dpr, utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partycardlabel"), { fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, fontSize: 11 * this.dpr, color: "#000000" });\n        this.partyTimeLable.setOrigin(0, 0.5).setResolution(this.dpr);\n        this.partyTimeLable.x = -this.partyTimeLable.width * 0.5 - 20 * this.dpr;\n        this.add(this.partyTimeLable);\n        this.partyCardImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, this.partyTimeLable.y);\n        this.partyCardImage.setTexture(this.key, "party_card");\n        this.partyCardImage.x = this.partyTimeLable.x + this.partyTimeLable.width + this.partyCardImage.width * 0.5;\n        this.add(this.partyCardImage);\n        this.partyTimevalue = this.scene.make.text({ x: this.partyCardImage.x + this.partyCardImage.width * 0.5 + 2 * this.dpr, y: this.partyCardImage.y, text: "", style: { fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT, fontSize: 14 * this.dpr, color: "#000000" } });\n        this.partyTimevalue.setOrigin(0, 0.5).setResolution(this.dpr);\n        this.partyTimevalue.setStroke("#000000", 2);\n        this.add(this.partyTimevalue);\n        this.openBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, this.height * 0.5 + 2 * this.dpr, 100 * this.dpr, 33 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partyopen"), this.dpr, this.scale, {\n            left: 14 * this.dpr,\n            top: 0 * this.dpr,\n            right: 14 * this.dpr,\n            bottom: 0 * this.dpr\n        });\n        this.openBtn.setTextStyle({\n            color: "#996600",\n            fontSize: 13 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT\n        });\n        this.openBtn.setFontStyle("bold");\n        this.add(this.openBtn);\n    };\n    PicaOpenPartyCreatePanel.prototype.createSlider = function (x, y, width, height) {\n        var sliderbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, 8, 7 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, "slider_bg", {\n            left: 3,\n            top: 1,\n            right: 3,\n            bottom: 1\n        });\n        var indicator = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, 8, 7 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, "slider_rate", {\n            left: 3,\n            top: 1,\n            right: 3,\n            bottom: 1\n        });\n        this.thumb = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, frame: "block" });\n        this.thumb.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.itemCountText = this.scene.make.text({\n            x: 0, y: 0,\n            style: {\n                color: "#744803",\n                fontSize: 12 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT\n            }\n        }, false).setFontStyle("bold").setOrigin(0.5);\n        this.timeSlider = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameSlider"](this.scene, {\n            x: x, y: y, width: width, height: height,\n            orientation: 1,\n            background: sliderbg,\n            indicator: indicator,\n            thumb: this.thumb,\n            offsetX: this.thumb.width * 0.5,\n            valuechangeCallback: this.onSliderValueHandler,\n            valuechangeCallbackScope: this,\n            value: 0.5\n        });\n        this.timeSlider.add(this.itemCountText);\n        this.timeSlider.setValue(0);\n        this.add(this.timeSlider);\n    };\n    PicaOpenPartyCreatePanel.prototype.onSliderValueHandler = function (value) {\n        var count = this.partyData ? this.partyData.ticketsCount : 0;\n        this.itemCountText.x = this.thumb.x;\n        this.itemCount = Math.ceil(value * count);\n        if (this.itemCount > count)\n            this.itemCount = count;\n        this.itemCountText.text = this.itemCount + "";\n    };\n    PicaOpenPartyCreatePanel.prototype.onTextChangeHandler = function () {\n        var width = 170 * this.dpr;\n        var len = this.mNameInput.text.length;\n        this.mNameInput.text = utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].spliceText(width, this.mNameInput.text, 13 * this.dpr, this.scene);\n    };\n    PicaOpenPartyCreatePanel.prototype.onOpenPartyHandler = function () {\n        var _this = this;\n        if (this.curPartyData) {\n            var topic_1 = this.curPartyData.key;\n            var name_1 = this.mNameInput.text;\n            var des_1 = this.describleInput.text;\n            var ticket_1 = this.itemCount;\n            var created_1 = this.partyData.created;\n            if (ticket_1 > 0) {\n                (this.describleInput.node).style.display = "none";\n                this.describleInput.visible = false;\n                new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["AlertView"](this.uiManager).show({\n                    title: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("main_ui.party"),\n                    text: !created_1 ? utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.openconfirm", { count: ticket_1 }) : utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.modifyconfirm", { count: ticket_1 }),\n                    oy: 302 * this.dpr * this.render.uiScale,\n                    callback: function () {\n                        _this.emit("openparty", topic_1, name_1, des_1, ticket_1, created_1);\n                    },\n                    cancelback: function () {\n                        (_this.describleInput.node).style.display = "true";\n                        _this.describleInput.visible = true;\n                    }\n                });\n            }\n            else {\n                if (created_1) {\n                    this.emit("openparty", topic_1, name_1, des_1, ticket_1, created_1);\n                }\n                else {\n                    this.emit("showtips", "PicaNotice", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.ticketinsuff"));\n                }\n            }\n        }\n    };\n    PicaOpenPartyCreatePanel.prototype.onGridTableHandler = function (item) {\n        if (this.curSelectItem)\n            this.curSelectItem.select = false;\n        item.select = true;\n        this.curPartyData = item.partyData;\n        this.curSelectItem = item;\n    };\n    PicaOpenPartyCreatePanel.prototype.createInput = function (x, y, width, height, font, type) {\n        if (type === void 0) { type = "text"; }\n        var mblackbg = this.scene.make.graphics(undefined, false);\n        mblackbg.fillStyle(0xA4EFF3, 0.66);\n        mblackbg.fillRoundedRect(0, -height * 0.5, width, height, 6 * this.dpr);\n        mblackbg.setPosition(x, y);\n        this.add(mblackbg);\n        var input = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"](this.scene, x + width * 0.5 + 8 * this.dpr, y, width, height - 10 * this.dpr, {\n            type: type,\n            placeholder: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("party.partydescrible"),\n            color: "#055C62",\n            fontSize: font + "px"\n        });\n        this.add(input);\n        return input;\n    };\n    return PicaOpenPartyCreatePanel;\n}(Phaser.GameObjects.Container));\n\nvar PicPartyThemeItem = /** @class */ (function (_super) {\n    __extends(PicPartyThemeItem, _super);\n    function PicPartyThemeItem(scene, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.setSize(width, height);\n        _this.selectbg = _this.scene.make.image({ key: key, frame: "party_selected_bg" });\n        _this.selectbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, 0);\n        _this.icon.setTexture(key, "party_icon_1");\n        _this.value = scene.make.text({ x: 0, y: 0, text: "10", style: { color: "#333333", fontSize: 11 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT } });\n        _this.value.setOrigin(0.5, 0);\n        _this.value.y = _this.height * 0.5 - 7 * dpr;\n        _this.value.setWordWrapWidth(_this.width, true);\n        _this.add([_this.selectbg, _this.icon, _this.value]);\n        _this.selectbg.visible = false;\n        return _this;\n    }\n    PicPartyThemeItem.prototype.setThemeData = function (topic) {\n        this.selectbg.visible = false;\n        this.partyData = topic;\n        this.value.text = topic.name;\n        var texturepath = topic.display.texturePath;\n        var lastindex = texturepath.lastIndexOf("/");\n        var frame = texturepath.slice(lastindex + 1, texturepath.length);\n        var burl = texturepath.slice(0, lastindex + 1);\n        var url = utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getOsdRes(burl + frame + ("_" + this.dpr + "x") + ".png");\n        this.icon.load(url);\n    };\n    Object.defineProperty(PicPartyThemeItem.prototype, "select", {\n        set: function (select) {\n            this.selectbg.visible = select;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PicPartyThemeItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaOpenParty/PicaOpenPartyCreatePanel.ts?')},"./src/pica/render/ui/PicaOpenParty/PicaOpenPartyPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaOpenPartyPanel", function() { return PicaOpenPartyPanel; });\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var _PicaOpenPartyCreatePanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaOpenPartyCreatePanel */ "./src/pica/render/ui/PicaOpenParty/PicaOpenPartyCreatePanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\nvar PicaOpenPartyPanel = /** @class */ (function (_super) {\n    __extends(PicaOpenPartyPanel, _super);\n    function PicaOpenPartyPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAOPENPARTY_NAME;\n        return _this;\n    }\n    PicaOpenPartyPanel.prototype.resize = function (w, h) {\n        var scale = this.scale;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content.x = width * 0.5;\n        this.content.y = height * 0.5;\n        this.setSize(width, height);\n        this.partyCreatePanel.resize();\n    };\n    PicaOpenPartyPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.addListen();\n    };\n    PicaOpenPartyPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on("pointerup", this.onCloseHandler, this);\n    };\n    PicaOpenPartyPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off("pointerup", this.onCloseHandler, this);\n    };\n    PicaOpenPartyPanel.prototype.destroy = function () {\n        this.removeListen();\n        _super.prototype.destroy.call(this);\n    };\n    PicaOpenPartyPanel.prototype.setPartyData = function (content, isSelf) {\n        if (isSelf === void 0) { isSelf = true; }\n        return __awaiter(this, void 0, void 0, function () {\n            var username;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.settingBtn.visible = isSelf;\n                        return [4 /*yield*/, this.render.mainPeer.getRoomUserName()];\n                    case 1:\n                        username = _a.sent();\n                        this.partyCreatePanel.setPartyData(content, username, Math.ceil(this.render.mainPeer.getClockNow() / 1000));\n                        if (content.created) {\n                            this.partyBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.partymgr"));\n                        }\n                        else {\n                            this.partyBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("main_ui.party"));\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PicaOpenPartyPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "party/party.png", "party/party.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaOpenPartyPanel.prototype.init = function () {\n        if (this.mInitialized)\n            return;\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        this.mBackground.fillStyle(0, 0.66);\n        this.mBackground.fillRect(0, 0, w, h);\n        this.add(this.mBackground);\n        this.content = this.scene.make.container(undefined, false);\n        var bgwidth = 295 * this.dpr, bgheight = 450 * this.dpr;\n        this.content.setSize(bgwidth, bgheight);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSlicePatch"](this.scene, 0, 0, bgwidth, bgheight, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, "bg", {\n            left: 20 * this.dpr,\n            top: 20 * this.dpr,\n            right: 20 * this.dpr,\n            bottom: 60 * this.dpr\n        });\n        this.content.add(this.bg);\n        this.closeBtn = this.scene.make.image({ x: this.bg.width * 0.5 - this.dpr * 5, y: -this.bg.height * 0.5 + this.dpr * 5, key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, frame: "close" }).setScale(1.3);\n        this.closeBtn.setInteractive();\n        this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.content.add([this.closeBtn]);\n        this.partyBtn = this.createTabButton(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("main_ui.party"));\n        this.settingBtn = this.createTabButton(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("common.setting"));\n        this.partyBtn.setPosition(-this.partyBtn.width * 0.5 - 2 * this.dpr, -this.content.height * 0.5 - this.partyBtn.height * 0.5 + 3 * this.dpr);\n        this.settingBtn.setPosition(this.settingBtn.width * 0.5 + 2 * this.dpr, this.partyBtn.y);\n        this.topCheckBox = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["CheckboxGroup"]();\n        this.topCheckBox.appendItemAll([this.partyBtn, this.settingBtn]);\n        this.topCheckBox.on("selected", this.onTabBtnHandler, this);\n        this.content.add([this.partyBtn, this.settingBtn]);\n        this.partyCreatePanel = new _PicaOpenPartyCreatePanel__WEBPACK_IMPORTED_MODULE_6__["PicaOpenPartyCreatePanel"](this.uiManager, 0, 0, this.content.width - 20 * this.dpr, this.content.height - 70 * this.dpr, this.key, this.dpr, this.scale);\n        this.partyCreatePanel.on("openparty", this.onOpenPartyHandler, this);\n        this.partyCreatePanel.on("showtips", this.showPanelHandler, this);\n        this.partyCreatePanel.on("querytheme", this.onQueryThemeHandler, this);\n        this.partyCreatePanel.y = 0;\n        this.content.add(this.partyCreatePanel);\n        // const mblackbg = this.scene.make.graphics(undefined, false);\n        // mblackbg.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        // mblackbg.fillStyle(0, 0.66);\n        // mblackbg.fillRect(-w * 0.5, -h * 0.5 + this.itemsPanel.y, w, h);\n        this.add(this.content);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n        this.topCheckBox.selectIndex(0);\n    };\n    PicaOpenPartyPanel.prototype.onTabBtnHandler = function (btn) {\n        if (this.partyBtn === btn) {\n            this.partyCreatePanel.show();\n            this.onQueryThemeHandler();\n        }\n        else {\n            this.partyCreatePanel.hide();\n        }\n        if (this.settingBtn === btn) {\n        }\n        else {\n        }\n    };\n    PicaOpenPartyPanel.prototype.createTabButton = function (text) {\n        var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["TabButton"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, "default_tab", "check_tab", text);\n        btn.tweenEnable = false;\n        btn.setTextStyle({ fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT, fontSize: 16 * this.dpr, color: "#ffffff" });\n        btn.setTextOffset(0, 0);\n        return btn;\n    };\n    PicaOpenPartyPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAOPENPARTY_NAME + "_close");\n    };\n    PicaOpenPartyPanel.prototype.onOpenPartyHandler = function (topic, name, des, ticket, created) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAOPENPARTY_NAME + "_queryopen", { topic: topic, name: name, des: des, ticket: ticket });\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAOPENPARTY_NAME + "_close");\n        // const mgr = this.mWorld.getDataMgr<CacheDataManager>(DataMgrType.CacheMgr);\n        this.showPanelHandler("PicaNotice", !created ? utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.opentips") : utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.modifytips"));\n    };\n    PicaOpenPartyPanel.prototype.showPanelHandler = function (panelName, text) {\n        if (!this.mWorld) {\n            return;\n        }\n        var data = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_client"].OP_VIRTUAL_WORLD_RES_CLIENT_SHOW_UI();\n        data.text = [{ text: text, node: undefined }];\n        this.render.mainPeer.showMediator(panelName, true, data);\n    };\n    PicaOpenPartyPanel.prototype.onQueryThemeHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAOPENPARTY_NAME + "_querytheme");\n    };\n    return PicaOpenPartyPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaOpenParty/PicaOpenPartyPanel.ts?')},"./src/pica/render/ui/PicaOrder/PicaOrderPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaOrderPanel", function() { return PicaOrderPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\nvar PicaOrderPanel = /** @class */ (function (_super) {\n    __extends(PicaOrderPanel, _super);\n    function PicaOrderPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAORDER_NAME;\n        return _this;\n    }\n    PicaOrderPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, w, h);\n        this.setSize(w, h);\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0, 0.5);\n        this.mBackground.fillRoundedRect(-this.x, -this.y, w, h);\n        this.content.x = w * 0.5;\n        this.content.y = h * 0.5 + 10 * this.dpr;\n        this.mGameGrid.resetMask();\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        // this.itemsPanel.y = this.height * 0.5 - 60 * this.dpr;\n        // this.itemsPanel.x = this.width * 0.5;\n    };\n    PicaOrderPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    };\n    PicaOrderPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on("pointerup", this.OnClosePanel, this);\n    };\n    PicaOrderPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off("pointerup", this.OnClosePanel, this);\n    };\n    PicaOrderPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "order/order.png", "order/order.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].common2Url + ".json");\n        utils__WEBPACK_IMPORTED_MODULE_4__["Logger"].getInstance().debug("=====>> dpr", this.dpr);\n        _super.prototype.preload.call(this);\n    };\n    PicaOrderPanel.prototype.init = function () {\n        var _this = this;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        this.add(this.mBackground);\n        var conWdith = 295 * this.dpr;\n        var conHeight = 454 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.add(this.content);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, conWdith, conHeight, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "bg", {\n            left: 30 * this.dpr,\n            top: 30 * this.dpr,\n            bottom: 30 * this.dpr,\n            right: 30 * this.dpr,\n        });\n        var posY = -conHeight * 0.5;\n        this.titlebg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: "order_title_bg" });\n        this.titlebg.y = posY - this.titlebg.height * 0.5 + 2 * this.dpr;\n        var titlebg2 = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: "order_title" });\n        titlebg2.y = this.titlebg.y + 34 * this.dpr;\n        this.tilteName = this.scene.make.text({ x: 0, y: posY - 18 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("order.title"), style: { color: "#905B06", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } }).setOrigin(0.5, 0);\n        this.closeBtn = this.scene.make.image({ x: conWdith * 0.5 - this.dpr * 5, y: posY + this.dpr * 5, key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, frame: "close" });\n        this.tilteName.setStroke("#8F4300", 2);\n        this.tilteName.setResolution(this.dpr);\n        this.closeBtn.setInteractive();\n        this.orderProgressPanel = new OrderProgressPanel(this.scene, 252 * this.dpr, 45 * this.dpr, this.key, this.dpr);\n        this.orderProgressPanel.y = -conHeight * 0.5 + 20 * this.dpr;\n        this.orderProgressPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onProgressHandler));\n        var tableConfig = {\n            x: 0,\n            y: 15 * this.dpr,\n            table: {\n                width: conWdith - 40 * this.dpr,\n                height: conHeight - 110 * this.dpr,\n                columns: 1,\n                cellWidth: conWdith - 40 * this.dpr,\n                cellHeight: 70 * this.dpr,\n                reuseCellContainer: true,\n                zoom: this.scale\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, index = cell.index, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new OrderItem(_this.uiManager, _this.key, _this.dpr);\n                    cellContainer.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](_this, _this.onSendHandler), new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](_this, _this.onRefreshOrderList), new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](_this, _this.onItemInfoTips));\n                    cellContainer.on("pointerdown", _this.onClickDownHandler, _this);\n                }\n                cellContainer.setOrderData(item, index);\n                return cellContainer;\n            },\n        };\n        this.mGameGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.mGameGrid.layout();\n        this.goldImageValue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 50 * this.dpr, 14 * this.dpr, this.key, "iv_coin_s", this.dpr);\n        this.goldImageValue.setFrameValue("", this.key, "order_precious");\n        this.goldImageValue.setTextStyle({\n            color: "#144B99", fontSize: 10 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n        });\n        this.goldImageValue.setFontStyle("bold");\n        this.goldImageValue.y = conHeight * 0.5 - 25 * this.dpr;\n        this.goldImageValue.visible = false;\n        this.orderProgressPanel.visible = false;\n        this.itemtips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ItemInfoTips"](this.scene, 121 * this.dpr, 46 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, "tips_bg", this.dpr);\n        this.itemtips.setVisible(false);\n        this.content.add([this.bg, this.closeBtn, this.titlebg, titlebg2, this.tilteName, this.orderProgressPanel, this.mGameGrid, this.goldImageValue, this.itemtips]);\n        this.resize();\n        _super.prototype.init.call(this);\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAORDER_NAME + "_questlist");\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAORDER_NAME + "_questprogress");\n    };\n    PicaOrderPanel.prototype.setOrderDataList = function (content) {\n        this.goldImageValue.visible = true;\n        this.orderProgressPanel.visible = true;\n        var orders = content.orders;\n        this.mGameGrid.setItems(orders);\n        this.royalOrderLimit = content.royalOrderLimit;\n        this.goldImageValue.setText(this.royalOrderLimit.currentValue + "/" + this.royalOrderLimit.max);\n        this.goldImageValue.resetSize();\n        this.goldImageValue.x = this.content.width * 0.5 - this.goldImageValue.width * 0.5 - 20 * this.dpr;\n    };\n    PicaOrderPanel.prototype.setOrderProgress = function (content) {\n        this.progressData = content;\n        this.orderProgressPanel.setProgressDatas(content);\n    };\n    PicaOrderPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaOrderPanel.prototype.OnClosePanel = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAORDER_NAME + "_hide");\n    };\n    PicaOrderPanel.prototype.onSendHandler = function (index, orderOperator) {\n        var _this = this;\n        if (orderOperator === 2) { // op_pkt_def.PKT_Order_Operator.PKT_ORDER_DELETE\n            var alertView = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["AlertView"](this.uiManager);\n            alertView.show({\n                text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("order.refreshtips"),\n                title: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("order.refreshtitle"),\n                oy: 302 * this.dpr * this.mWorld.uiScale,\n                callback: function () {\n                    _this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAORDER_NAME + "_changeorder", { index: index, orderOperator: orderOperator });\n                },\n            });\n        }\n        else {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAORDER_NAME + "_changeorder", { index: index, orderOperator: orderOperator });\n        }\n    };\n    PicaOrderPanel.prototype.onProgressHandler = function (index, item) {\n        if (!this.progressData)\n            return;\n        var data = item.progressData;\n        if (!data.received) {\n            if (data.targetValue <= this.progressData.currentProgressValue) {\n                this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAORDER_NAME + "_questreward", index);\n            }\n            else {\n                this.itemtips.setItemData(data.rewards[0]);\n                this.showItemTipsState(item);\n            }\n        }\n    };\n    PicaOrderPanel.prototype.onRefreshOrderList = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAORDER_NAME + "_questlist");\n    };\n    PicaOrderPanel.prototype.onItemInfoTips = function (item) {\n        var data = item.itemData;\n        this.itemtips.setItemData(data);\n        this.showItemTipsState(item, 10 * this.dpr);\n    };\n    PicaOrderPanel.prototype.onClickDownHandler = function () {\n        this.itemtips.setVisible(false);\n    };\n    PicaOrderPanel.prototype.showItemTipsState = function (item, offsety) {\n        if (offsety === void 0) { offsety = 0; }\n        var posx = this.itemtips.x;\n        var posy = this.itemtips.y;\n        this.setTipsPosition(item, offsety);\n        if (posx !== this.itemtips.x || posy !== this.itemtips.y) {\n            this.itemtips.setVisible(true);\n        }\n        else {\n            this.itemtips.setVisible(!this.itemtips.visible);\n        }\n    };\n    PicaOrderPanel.prototype.setTipsPosition = function (gameobject, offsety) {\n        if (offsety === void 0) { offsety = 0; }\n        var posx = gameobject.x;\n        var posy = gameobject.y;\n        var tempobject = gameobject;\n        while (tempobject.parentContainer !== this.content) {\n            posx += tempobject.parentContainer.x;\n            posy += tempobject.parentContainer.y;\n            tempobject = tempobject.parentContainer;\n        }\n        if (posx - this.itemtips.width * 0.5 < -this.content.width * 0.5) {\n            this.itemtips.x = this.itemtips.width * 0.5 - this.content.width * 0.5 + 20 * this.dpr;\n        }\n        else if (posx + this.itemtips.width * 0.5 > this.content.width * 0.5) {\n            this.itemtips.x = this.content.width * 0.5 - this.itemtips.width * 0.5 - 20 * this.dpr;\n        }\n        else {\n            this.itemtips.x = posx;\n        }\n        this.itemtips.y = posy - this.itemtips.height * 0.5 + 10 * this.dpr + offsety;\n    };\n    return PicaOrderPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\nvar OrderItem = /** @class */ (function (_super) {\n    __extends(OrderItem, _super);\n    function OrderItem(uiManager, key, dpr) {\n        var _this = _super.call(this, uiManager.scene) || this;\n        _this.materialItems = [];\n        _this.imageValues = [];\n        _this.orderRewards = [];\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.mScene = uiManager.scene;\n        _this.mRender = uiManager.render;\n        _this.bg = _this.mScene.make.image({ key: key, frame: "order_ordinary_bg" });\n        // this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.add(_this.bg);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.headbg = _this.mScene.make.image({ key: key, frame: "order_ordinary_head_bg" });\n        // this.headbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.add(_this.headbg);\n        _this.headbg.x = -_this.width * 0.5 + _this.headbg.width * 0.5 + 4 * dpr;\n        _this.headbg.y = 5 * dpr;\n        _this.headIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.mScene, _this.headbg.x, 0);\n        // this.headIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.add(_this.headIcon);\n        _this.refreshBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.mScene, _this.key, "order_delete_bg", "order_delete_bg");\n        _this.refreshBtn.x = _this.width * 0.5 - _this.refreshBtn.width * 0.5;\n        _this.refreshBtn.y = -_this.height * 0.5 + _this.refreshBtn.height * 0.5;\n        _this.add(_this.refreshBtn);\n        var deleteicon = _this.mScene.make.image({ key: key, frame: "order_delete" });\n        // deleteicon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.refreshBtn.add(deleteicon);\n        _this.sendBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.mScene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "order_green_butt", "order_green_butt", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("order.send"));\n        _this.sendBtn.x = _this.width * 0.5 - _this.sendBtn.width * 0.5 - 5 * dpr;\n        _this.sendBtn.setTextStyle({ fontSize: 10 * dpr });\n        _this.add(_this.sendBtn);\n        _this.sendTitle = _this.mScene.make.text({ x: _this.width * 0.5 - 5 * dpr, y: 0, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("order.deliverying"), style: { color: "#ffffff", fontSize: 13 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        _this.sendTitle.setOrigin(1, 0.5);\n        _this.add(_this.sendTitle);\n        _this.acceleBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](_this.mScene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "order_red_butt", "order_red_butt", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("order.accele"));\n        _this.acceleBtn.x = 20 * dpr;\n        _this.acceleBtn.y = 0;\n        _this.acceleBtn.setTextStyle({ fontSize: 11 * dpr });\n        _this.add(_this.acceleBtn);\n        _this.acceleSpend = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](_this.mScene, 30 * dpr, 10 * dpr, _this.key, "iv_coin_s", _this.dpr);\n        _this.acceleSpend.x = _this.acceleBtn.x;\n        _this.acceleSpend.y = _this.acceleBtn.y - _this.acceleBtn.height * 0.5 - 10 * dpr;\n        _this.add(_this.acceleSpend);\n        _this.calcuTime = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](_this.mScene, 30 * dpr, 10 * dpr, _this.key, "iv_coin_s", dpr);\n        _this.add(_this.calcuTime);\n        _this.calcuTime.setTextStyle({\n            color: "#144B99", fontSize: 10 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n        });\n        _this.calcuTime.setFontStyle("bold");\n        _this.calcuTime.x = _this.acceleBtn.x;\n        _this.calcuTime.y = _this.acceleBtn.y + _this.acceleBtn.height * 0.5 + 10 * dpr;\n        _this.sendBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), _this.onSendHandler, _this);\n        _this.acceleBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), _this.onAcceleHandler, _this);\n        _this.refreshBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), _this.onRefreshHandler, _this);\n        _this.setInteractive();\n        return _this;\n    }\n    OrderItem.prototype.setHandler = function (send, refresh, tips) {\n        this.sendHandler = send;\n        this.tipsHandler = tips;\n        this.refreshHandler = refresh;\n    };\n    OrderItem.prototype.setOrderData = function (data, index) {\n        var _this = this;\n        this.orderData = data;\n        this.index = index;\n        this.hideAllElement();\n        this.bg.setFrame(data.questType === 5 ? "order_precious_bg" : "order_ordinary_bg"); // op_pkt_def.PKT_Quest_Type.ORDER_QUEST_ROYAL_MISSION\n        if (data.stage !== 4) { // op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_END\n            var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(data.display.texturePath);\n            this.headIcon.load(url, this, function () {\n                _this.headIcon.scale = 1;\n                _this.headIcon.scaleY = 49 * _this.dpr / _this.headIcon.displayHeight;\n                _this.headIcon.scaleX = _this.headIcon.scaleY;\n            });\n            this.headIcon.visible = true;\n        }\n        if (data.stage === 1) { // op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_ACCEPTABLE\n            this.deliveryState(data);\n            this.orderOperator = 0; // op_pkt_def.PKT_Order_Operator.PKT_ORDER_DELIVERY\n        }\n        else if (data.stage === 2) { // op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_PROCESSING\n            this.deliveryingState(data);\n        }\n        else if (data.stage === 3) { // op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED\n            this.rewardState(data);\n            this.orderOperator = 3; // op_pkt_def.PKT_Order_Operator.PKT_ORDER_GET_REWARD\n        }\n        else if (data.stage === 4) { // op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_END\n            this.cooldownState(data);\n            this.orderOperator = 1; // op_pkt_def.PKT_Order_Operator.PKT_ORDER_SPEED_UP\n        }\n    };\n    OrderItem.prototype.destroy = function (fromScene) {\n        if (this.timeID) {\n            clearTimeout(this.timeID);\n            this.timeID = undefined;\n        }\n        _super.prototype.destroy.call(this, fromScene);\n    };\n    OrderItem.prototype.getServiceTimestamp = function () {\n        return this.mRender.mainPeer.now();\n    };\n    OrderItem.prototype.onAcceleHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith([this.index, this.orderOperator]);\n    };\n    OrderItem.prototype.onSendHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith([this.index, this.orderOperator]);\n    };\n    OrderItem.prototype.onRefreshHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith([this.index, 2]); // op_pkt_def.PKT_Order_Operator.PKT_ORDER_DELETE\n    };\n    OrderItem.prototype.deliveryState = function (data) {\n        var questType = data.questType;\n        this.headbg.setFrame(questType === 5 ? "order_precious_head_bg" : "order_ordinary_head_bg"); // op_pkt_def.PKT_Quest_Type.ORDER_QUEST_ROYAL_MISSION\n        this.refreshBtn.visible = true;\n        this.refreshBtn.setInteractive();\n        this.refreshBtn.setFrameNormal(questType === 5 ? "order_precious_delete_bg" : "order_delete_bg"); // op_pkt_def.PKT_Quest_Type.ORDER_QUEST_ROYAL_MISSION\n        var offsetpos = -this.width * 0.5 + 58 * this.dpr;\n        var isenough = true;\n        for (var i = 0; i < data.targets.length; i++) {\n            var itemData = data.targets[i];\n            var item = void 0;\n            if (i < this.materialItems.length) {\n                item = this.materialItems[i];\n            }\n            else {\n                item = new MaterialItem(this.scene, this.key, this.dpr);\n                this.add(item);\n                this.materialItems.push(item);\n                item.setHandler(this.tipsHandler);\n                item.addListen();\n            }\n            item.setMaterialData(itemData);\n            item.x = offsetpos + item.width * 0.5;\n            offsetpos += item.width + 8 * this.dpr;\n            item.y = -10 * this.dpr;\n            item.visible = true;\n            if (isenough)\n                isenough = itemData.count >= itemData.neededCount;\n        }\n        if (isenough) {\n            this.sendBtn.setFrameNormal("order_green_butt");\n            this.sendBtn.setInteractive();\n        }\n        else {\n            this.sendBtn.setFrameNormal("order_gray_butt");\n            this.sendBtn.disInteractive();\n        }\n        this.sendBtn.visible = true;\n        this.sendBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("order.send"));\n        this.sendBtn.setTextColor("#ffffff");\n        offsetpos = -this.width * 0.5 + 58 * this.dpr;\n        for (var i = 0; i < data.rewards.length; i++) {\n            var reward = data.rewards[i];\n            var item = void 0;\n            if (i < this.imageValues.length) {\n                item = this.imageValues[i];\n            }\n            else {\n                item = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 30 * this.dpr, 13 * this.dpr, this.key, "iv_coin_s", this.dpr);\n                this.add(item);\n                this.imageValues.push(item);\n            }\n            item.setOffset(0, this.dpr);\n            item.setFrameValue("" + reward.count, this.key, this.getIconName(reward.texturePath) + "_s");\n            item.setTextStyle({ color: questType === 5 ? "#ffffff" : "#2154BD" }); // op_pkt_def.PKT_Quest_Type.ORDER_QUEST_ROYAL_MISSION\n            item.x = offsetpos + item.width * 0.5;\n            offsetpos += item.width + 20 * this.dpr;\n            item.y = this.height * 0.5 - item.height * 0.5 - 4 * this.dpr;\n            item.visible = true;\n        }\n    };\n    OrderItem.prototype.deliveryingState = function (data) {\n        var _this = this;\n        if (!this.deliverybg) {\n            this.deliverybg = this.scene.make.image({ key: this.key, frame: "order_transport" });\n            // this.deliverybg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n            this.addAt(this.deliverybg, 1);\n            this.deliverybg.x = this.width * 0.5 - this.deliverybg.width * 0.5 - 10 * this.dpr;\n        }\n        else\n            this.deliverybg.visible = true;\n        this.headbg.setFrame("order_ordinary_head_bg");\n        // this.refreshBtn.visible = true;\n        // this.refreshBtn.setInteractive();\n        // this.refreshBtn.setFrameNormal("order_delete_bg");\n        this.sendTitle.visible = true;\n        if (this.timeID) {\n            clearTimeout(this.timeID);\n            this.timeID = undefined;\n        }\n        var timeextu = function () { return __awaiter(_this, void 0, void 0, function () {\n            var timeStamp, intervalTime, minute, second, timetext;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getServiceTimestamp()];\n                    case 1:\n                        timeStamp = _a.sent();\n                        intervalTime = Math.ceil(data.deliveryDeadline - timeStamp / 1000);\n                        if (intervalTime < 0)\n                            intervalTime = 0;\n                        minute = Math.floor(intervalTime / 60);\n                        second = intervalTime % 60;\n                        timetext = (minute < 10 ? "0" + minute : minute + "") + ":" + (second < 10 ? "0" + second : second + "");\n                        this.calcuTime.visible = true;\n                        this.calcuTime.setFrameValue(timetext, this.key, "order_time");\n                        this.calcuTime.resetSize();\n                        this.calcuTime.x = this.width * 0.5 - this.calcuTime.width * 0.5 - 10 * this.dpr;\n                        this.calcuTime.y = this.height * 0.5 - this.calcuTime.height * 0.5 - 5 * this.dpr;\n                        if (intervalTime > 0)\n                            this.timeID = setTimeout(function () {\n                                timeextu();\n                            }, 1000); // intervalTime >= 60 ? 60000 : intervalTime * 1000\n                        else {\n                            if (this.timeID && this.refreshHandler)\n                                this.refreshHandler.run();\n                            this.timeID = undefined;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        timeextu();\n        var offsetpos = -this.width * 0.5 + 60 * this.dpr;\n        for (var i = 0; i < data.rewards.length; i++) {\n            var reward = data.rewards[i];\n            var item = void 0;\n            if (i < this.imageValues.length) {\n                item = this.imageValues[i];\n            }\n            else {\n                item = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 30 * this.dpr, 13 * this.dpr, this.key, "iv_coin_s", this.dpr);\n                this.add(item);\n                this.imageValues.push(item);\n            }\n            item.setFrameValue("" + reward.count, this.key, this.getIconName(reward.display.texturePath) + "_s");\n            item.setTextStyle({ color: "#2154BD" });\n            item.x = offsetpos + item.width * 0.5;\n            offsetpos += item.width + 20 * this.dpr;\n            item.y = this.height * 0.5 - item.height * 0.5 - 4 * this.dpr;\n            item.visible = true;\n        }\n    };\n    OrderItem.prototype.rewardState = function (data) {\n        this.headbg.setFrame("order_ordinary_head_bg");\n        // this.refreshBtn.visible = true;\n        // this.refreshBtn.setInteractive();\n        // this.refreshBtn.setFrameNormal("order_delete_bg");\n        this.sendBtn.visible = true;\n        this.sendBtn.setInteractive();\n        this.sendBtn.setFrameNormal("order_yellow_butt");\n        this.sendBtn.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("order.receive"));\n        this.sendBtn.setTextColor("#9A6600");\n        var offsetpos = -this.width * 0.5 + 60 * this.dpr;\n        for (var i = 0; i < data.rewards.length; i++) {\n            var reward = data.rewards[i];\n            var item = void 0;\n            if (i < this.orderRewards.length) {\n                item = this.orderRewards[i];\n            }\n            else {\n                item = new OrderRewardItem(this.scene, this.key, this.dpr);\n                this.add(item);\n                this.orderRewards.push(item);\n            }\n            item.x = offsetpos + item.width * 0.5;\n            offsetpos += item.width + 20 * this.dpr;\n            item.y = -6 * this.dpr;\n            item.visible = true;\n            item.setItemData(reward);\n        }\n    };\n    OrderItem.prototype.cooldownState = function (data) {\n        var _this = this;\n        this.headbg.setFrame("order_unknown_head");\n        this.headIcon.visible = false;\n        // this.refreshBtn.visible = false;\n        // this.refreshBtn.disInteractive();\n        this.acceleBtn.visible = true;\n        this.acceleBtn.setInteractive();\n        this.acceleSpend.visible = true;\n        this.calcuTime.visible = true;\n        this.calcuTime.y = this.acceleBtn.y + this.acceleBtn.height * 0.5 + 10 * this.dpr;\n        if (this.timeID) {\n            clearTimeout(this.timeID);\n            this.timeID = undefined;\n        }\n        var timeextu = function () { return __awaiter(_this, void 0, void 0, function () {\n            var timeStamp, intervalTime, minute, second, timetext;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getServiceTimestamp()];\n                    case 1:\n                        timeStamp = _a.sent();\n                        intervalTime = Math.ceil(data.refreshDeadline - timeStamp / 1000);\n                        if (intervalTime < 0)\n                            intervalTime = 0;\n                        minute = Math.floor(intervalTime / 60);\n                        second = intervalTime % 60;\n                        timetext = (minute < 10 ? "0" + minute : minute + "") + ":" + (second < 10 ? "0" + second : second + "");\n                        this.calcuTime.visible = true;\n                        this.calcuTime.setFrameValue(timetext, this.key, "order_time");\n                        this.calcuTime.resetSize();\n                        this.calcuTime.x = this.acceleBtn.x;\n                        this.acceleSpend.setFrameValue(minute + "", this.key, "iv_diamond_s");\n                        if (intervalTime > 0)\n                            this.timeID = setTimeout(function () {\n                                timeextu();\n                            }, 1000); // intervalTime >= 60 ? 60000 : intervalTime * 1000\n                        else {\n                            if (this.timeID && this.refreshHandler)\n                                this.refreshHandler.run();\n                            this.timeID = undefined;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        timeextu();\n    };\n    OrderItem.prototype.getIconName = function (url) {\n        var texturepath = url;\n        var lastindex = texturepath.lastIndexOf("/");\n        var lastindex2 = texturepath.lastIndexOf(".");\n        var frame = texturepath.slice(lastindex + 1, lastindex2);\n        return frame;\n    };\n    OrderItem.prototype.hideAllElement = function () {\n        this.refreshBtn.visible = false;\n        this.refreshBtn.disInteractive();\n        this.sendBtn.visible = false;\n        this.sendBtn.disInteractive();\n        this.sendTitle.visible = false;\n        this.acceleBtn.visible = false;\n        this.acceleBtn.disInteractive();\n        this.acceleSpend.visible = false;\n        this.calcuTime.visible = false;\n        if (this.deliverybg)\n            this.deliverybg.visible = false;\n        for (var _i = 0, _a = this.materialItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n            item.removeListen();\n        }\n        for (var _b = 0, _c = this.orderRewards; _b < _c.length; _b++) {\n            var item = _c[_b];\n            item.visible = false;\n        }\n        for (var _d = 0, _e = this.imageValues; _d < _e.length; _d++) {\n            var item = _e[_d];\n            item.visible = false;\n        }\n        if (this.timeID) {\n            clearTimeout(this.timeID);\n            this.timeID = undefined;\n        }\n    };\n    return OrderItem;\n}(Phaser.GameObjects.Container));\nvar MaterialItem = /** @class */ (function (_super) {\n    __extends(MaterialItem, _super);\n    function MaterialItem(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.bg = scene.make.image({ key: key, frame: "order_demand_icon" });\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, -5 * dpr);\n        _this.icon.setSize(15 * dpr, 15 * dpr);\n        _this.value = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, 0, _this.height * 0.5 - 10 * dpr, "60/30", {\n            color: "#0",\n            fontSize: 8 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n        }).setOrigin(0.5);\n        _this.add([_this.bg, _this.icon, _this.value]);\n        _this.setInteractive();\n        return _this;\n    }\n    MaterialItem.prototype.setMaterialData = function (data) {\n        var _this = this;\n        this.itemData = data;\n        var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(data.texturePath);\n        this.icon.load(url, this, function () {\n            _this.icon.scale = 1;\n            _this.icon.scaleX = 15 * _this.dpr / _this.icon.displayWidth;\n            _this.icon.scaleY = _this.icon.scaleX;\n        });\n        this.value.text = data.count + "/" + data.neededCount;\n    };\n    MaterialItem.prototype.setHandler = function (tips) {\n        this.tipsHandler = tips;\n    };\n    MaterialItem.prototype.addListen = function () {\n        this.on("pointerup", this.onClickHandler, this);\n    };\n    MaterialItem.prototype.removeListen = function () {\n        this.off("pointerdown", this.onClickHandler, this);\n    };\n    MaterialItem.prototype.destroy = function (fromScene) {\n        this.removeListen();\n        _super.prototype.destroy.call(this, fromScene);\n    };\n    MaterialItem.prototype.onClickHandler = function () {\n        if (this.tipsHandler)\n            this.tipsHandler.runWith(this);\n    };\n    return MaterialItem;\n}(Phaser.GameObjects.Container));\nvar OrderRewardItem = /** @class */ (function (_super) {\n    __extends(OrderRewardItem, _super);\n    function OrderRewardItem(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.bg = scene.make.image({ key: key, frame: "order_reward" });\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.icon = scene.make.image({ key: key, frame: "order_silver_middle" });\n        _this.add([_this.bg, _this.icon]);\n        return _this;\n    }\n    OrderRewardItem.prototype.setItemData = function (data) {\n        this.imageValue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 30 * this.dpr, 13 * this.dpr, this.key, undefined, this.dpr);\n        this.imageValue.setFrameValue("" + data.count, this.key, this.getIconName(data.texturePath) + "_s");\n        this.imageValue.x = -4 * this.dpr;\n        this.imageValue.y = this.height - this.imageValue.height * 0.5 + 2 * this.dpr;\n        this.imageValue.setOffset(0, this.dpr);\n        this.imageValue.setTextStyle({ color: "#2154BD" });\n        this.add([this.imageValue]);\n        this.icon.setFrame(this.getIconName(data.texturePath));\n    };\n    OrderRewardItem.prototype.getIconName = function (url) {\n        var texturepath = url;\n        var lastindex = texturepath.lastIndexOf("/");\n        var lastindex2 = texturepath.lastIndexOf(".");\n        var frame = texturepath.slice(lastindex + 1, lastindex2);\n        return frame;\n    };\n    return OrderRewardItem;\n}(Phaser.GameObjects.Container));\nvar OrderProgressPanel = /** @class */ (function (_super) {\n    __extends(OrderProgressPanel, _super);\n    function OrderProgressPanel(scene, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.progressItems = [];\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        var barConfig = {\n            x: 0 * dpr / 2,\n            y: 15 * dpr,\n            width: 251 * dpr,\n            height: 11 * dpr,\n            background: {\n                x: 0,\n                y: 0,\n                width: 251 * dpr,\n                height: 11 * dpr,\n                config: {\n                    top: 0 * dpr,\n                    left: 7 * dpr,\n                    right: 7 * dpr,\n                    bottom: 0 * dpr,\n                },\n                key: key,\n                frame: "order_progress_bottom"\n            },\n            bar: {\n                x: 0,\n                y: 0,\n                width: 251 * dpr,\n                height: 11 * dpr,\n                config: {\n                    top: 0 * dpr,\n                    left: 7 * dpr,\n                    right: 7 * dpr,\n                    bottom: 0 * dpr,\n                },\n                key: key,\n                frame: "order_progress_top"\n            },\n            dpr: dpr,\n            textConfig: undefined\n        };\n        _this.progress = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ProgressBar"](scene, barConfig);\n        _this.add(_this.progress);\n        return _this;\n    }\n    OrderProgressPanel.prototype.setProgressDatas = function (content) {\n        var len = content.steps.length;\n        var maxvalue = 100;\n        for (var i = 0; i < len; i++) {\n            var data = content.steps[i];\n            var item = void 0;\n            if (i < this.progressItems.length) {\n                item = this.progressItems[i];\n            }\n            else {\n                item = new OrderProgressItem(this.scene, 0, 0, this.key, this.dpr);\n                this.add(item);\n                this.progressItems.push(item);\n                item.setHandler(this.receiveHandler);\n            }\n            item.x = -this.width * 0.5 + this.width * (i + 1) / len - 16 * this.dpr;\n            item.y = 15 * this.dpr;\n            item.setItemData(data, i, content.currentProgressValue);\n            maxvalue = data.targetValue;\n        }\n        this.progress.setProgress(content.currentProgressValue, maxvalue);\n    };\n    OrderProgressPanel.prototype.setHandler = function (handler) {\n        this.receiveHandler = handler;\n    };\n    return OrderProgressPanel;\n}(Phaser.GameObjects.Container));\nvar OrderProgressItem = /** @class */ (function (_super) {\n    __extends(OrderProgressItem, _super);\n    function OrderProgressItem(scene, x, y, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](scene, key, "order_progress_unfinished", "order_progress_unfinished");\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, 0);\n        _this.text = scene.make.text({ x: 0, y: _this.bg.height * 0.5 + 10 * dpr, text: "10", style: { color: "#2154BD", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        _this.text.setFontStyle("bold");\n        _this.text.setOrigin(0.5);\n        _this.finishIcon = scene.make.image({ key: key, frame: "order_progress_ok" });\n        // this.finishIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.balckgraphic = scene.make.graphics(undefined, false);\n        _this.balckgraphic.clear();\n        _this.balckgraphic.fillStyle(0, 0.5);\n        _this.balckgraphic.fillCircle(0, 0, 16 * dpr);\n        _this.add([_this.bg, _this.icon, _this.text, _this.balckgraphic, _this.finishIcon]);\n        _this.finishIcon.visible = false;\n        return _this;\n    }\n    OrderProgressItem.prototype.setItemData = function (data, index, curvalue) {\n        var _this = this;\n        this.progressData = data;\n        this.index = index;\n        this.text.text = data.targetValue + "";\n        if (data.rewards) {\n            var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(data.rewards[0].texturePath);\n            this.icon.load(url, this, function () {\n                _this.icon.scale = 1;\n                _this.icon.scaleY = 29 * _this.dpr / _this.icon.displayHeight;\n                _this.icon.scaleX = _this.icon.scaleY;\n            });\n        }\n        this.finishIcon.visible = false;\n        this.balckgraphic.visible = false;\n        if (data.targetValue <= curvalue) {\n            this.bg.setFrameNormal("order_progress_finished", "order_progress_finished");\n            if (data.received) {\n                this.finishIcon.visible = true;\n                this.balckgraphic.visible = true;\n            }\n            this.text.setColor("#2154BD");\n        }\n        else {\n            this.bg.setFrameNormal("order_progress_unfinished", "order_progress_unfinished");\n            this.text.setColor("#989898");\n        }\n        if (!data.received) {\n            this.bg.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onReceiveHandler, this);\n            this.bg.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onReceiveHandler, this);\n        }\n        else {\n            this.bg.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onReceiveHandler, this);\n        }\n    };\n    OrderProgressItem.prototype.setHandler = function (receive) {\n        this.receiveHandler = receive;\n    };\n    OrderProgressItem.prototype.onReceiveHandler = function () {\n        if (this.receiveHandler)\n            this.receiveHandler.runWith([this.index, this]);\n    };\n    return OrderProgressItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaOrder/PicaOrderPanel.ts?')},"./src/pica/render/ui/PicaPartyList/PicaMyRoomNavigationPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaMyRoomNavigationPanel", function() { return PicaMyRoomNavigationPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaMyRoomNavigationPanel = /** @class */ (function (_super) {\n    __extends(PicaMyRoomNavigationPanel, _super);\n    function PicaMyRoomNavigationPanel(scene, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.setSize(width, height);\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.create();\n        return _this;\n    }\n    PicaMyRoomNavigationPanel.prototype.create = function () {\n        var _this = this;\n        this.gameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: 0,\n            y: 10 * this.dpr,\n            width: this.width,\n            height: this.height,\n            zoom: this.zoom,\n            align: 2,\n            orientation: 0,\n            dpr: this.dpr,\n            space: 10 * this.dpr,\n            padding: { top: 10 * this.dpr },\n            cellupCallBack: function (gameobject) {\n                _this.onGameScrollHandler(gameobject);\n            }\n        });\n        this.add(this.gameScroll);\n    };\n    PicaMyRoomNavigationPanel.prototype.clear = function () {\n        this.gameScroll.clearItems(true);\n    };\n    PicaMyRoomNavigationPanel.prototype.refreshMask = function () {\n        this.gameScroll.refreshMask();\n    };\n    PicaMyRoomNavigationPanel.prototype.setHandler = function (handler) {\n        this.sendHandler = handler;\n    };\n    PicaMyRoomNavigationPanel.prototype.setRoomDataList = function (content) {\n        var _this = this;\n        this.gameScroll.clearItems(true);\n        this.setMyRoomDatas(content.selfRooms, new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, function () {\n            _this.setHistoryDatas(content.historyRooms);\n        }));\n    };\n    PicaMyRoomNavigationPanel.prototype.setMyRoomDatas = function (datas, compl) {\n        var titleimg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 78 * this.dpr, 15 * this.dpr, this.key, "my_house", this.dpr, {\n            color: "#FFC51A", fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT\n        });\n        titleimg.setStroke("#744803", 2 * this.dpr);\n        titleimg.x = -this.width * 0.5 + 20 * this.dpr;\n        titleimg.setFrameValue(utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("room_list.my_room"), this.key, "my_house");\n        this.gameScroll.addItem(titleimg);\n        this.createRoomItemByFrame(datas, "my_home_bg", "#744803", compl);\n    };\n    PicaMyRoomNavigationPanel.prototype.createRoomItemByFrame = function (datas, bg, color, compl) {\n        var _this = this;\n        if (bg === void 0) { bg = "list_bg"; }\n        if (color === void 0) { color = "#333333"; }\n        var frameCount = 5;\n        var indexed = 0;\n        var framefun = function () {\n            var temps = datas.slice(indexed, indexed + frameCount);\n            for (var _i = 0, temps_1 = temps; _i < temps_1.length; _i++) {\n                var data = temps_1[_i];\n                var item = new RoomListItem(_this.scene, _this.key, _this.dpr, bg, color);\n                item.setRoomData(data);\n                _this.gameScroll.addItem(item);\n            }\n            _this.gameScroll.Sort(true);\n            indexed += frameCount;\n            if (indexed < datas.length) {\n                setTimeout(function () {\n                    framefun();\n                }, 20);\n            }\n            else {\n                if (compl)\n                    compl.run();\n            }\n        };\n        framefun();\n    };\n    PicaMyRoomNavigationPanel.prototype.setHistoryDatas = function (datas) {\n        var titleimg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 78 * this.dpr, 30 * this.dpr, this.key, "footprint", this.dpr, {\n            color: "#FFC51A", fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT\n        });\n        titleimg.setStroke("#744803", 2 * this.dpr);\n        titleimg.x = -this.width * 0.5 + 20 * this.dpr;\n        titleimg.setFrameValue(utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("room_list.my_history"), this.key, "footprint");\n        this.gameScroll.addItem(titleimg);\n        this.createRoomItemByFrame(datas);\n    };\n    PicaMyRoomNavigationPanel.prototype.onGameScrollHandler = function (item) {\n        if (item && item.roomData)\n            this.onSendHandler(item.roomData);\n    };\n    PicaMyRoomNavigationPanel.prototype.onSendHandler = function (data) {\n        if (this.sendHandler)\n            this.sendHandler.runWith(data.roomId);\n    };\n    return PicaMyRoomNavigationPanel;\n}(Phaser.GameObjects.Container));\n\nvar RoomListItem = /** @class */ (function (_super) {\n    __extends(RoomListItem, _super);\n    function RoomListItem(scene, key, dpr, bg, titlecolor) {\n        if (bg === void 0) { bg = "list_bg"; }\n        if (titlecolor === void 0) { titlecolor = "#333333"; }\n        var _this = _super.call(this, scene) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, 254 * dpr, 40 * dpr, _this.key, bg, {\n            left: 12 * _this.dpr,\n            top: 0 * _this.dpr,\n            right: 12 * _this.dpr,\n            bottom: 0 * _this.dpr\n        });\n        _this.add(_this.bg);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.roomName = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, -_this.width * 0.5 + 10 * dpr, -_this.height * 0.5 + 5 * dpr, "", {\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            fontSize: 12 * dpr,\n            color: titlecolor\n        });\n        _this.roomName.setOrigin(0);\n        _this.add(_this.roomName);\n        _this.roomOwnerName = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageBBCodeValue"](scene, 50 * dpr, 20 * dpr, key, "user", dpr, {\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            fontSize: 11 * dpr,\n            color: "#333333"\n        });\n        _this.roomOwnerName.x = _this.roomName.x + _this.roomOwnerName.width * 0.5;\n        _this.roomOwnerName.y = _this.roomName.y + 25 * dpr;\n        _this.add(_this.roomOwnerName);\n        _this.playerCount = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageBBCodeValue"](scene, 30 * dpr, 20 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "home_persons", dpr, {\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            fontSize: 12 * dpr,\n            color: "#333333"\n        });\n        _this.playerCount.x = _this.width * 0.5 - 35 * dpr;\n        _this.add(_this.playerCount);\n        return _this;\n    }\n    RoomListItem.prototype.setRoomData = function (data) {\n        this.roomData = data;\n        this.roomName.text = "[b]" + data.name + "[/b]";\n        this.playerCount.setText("[b]" + data.playerCount + "[/b]");\n        this.roomOwnerName.setText(data.ownerName);\n    };\n    return RoomListItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaPartyList/PicaMyRoomNavigationPanel.ts?')},"./src/pica/render/ui/PicaPartyList/PicaPartyListPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaPartyListPanel", function() { return PicaPartyListPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _PicaPartyNavigationPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaPartyNavigationPanel */ "./src/pica/render/ui/PicaPartyList/PicaPartyNavigationPanel.ts");\n/* harmony import */ var _PicaMyRoomNavigationPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaMyRoomNavigationPanel */ "./src/pica/render/ui/PicaPartyList/PicaMyRoomNavigationPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar PicaPartyListPanel = /** @class */ (function (_super) {\n    __extends(PicaPartyListPanel, _super);\n    function PicaPartyListPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAPARTYLIST_NAME;\n        return _this;\n    }\n    PicaPartyListPanel.prototype.resize = function (w, h) {\n        var scale = this.scale;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content.x = width * 0.5;\n        this.content.y = height * 0.5 + 20 * this.dpr;\n        this.setSize(width, height);\n    };\n    PicaPartyListPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.addListen();\n    };\n    PicaPartyListPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on("pointerup", this.onCloseHandler, this);\n    };\n    PicaPartyListPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off("pointerup", this.onCloseHandler, this);\n    };\n    PicaPartyListPanel.prototype.destroy = function () {\n        this.removeListen();\n        _super.prototype.destroy.call(this);\n    };\n    PicaPartyListPanel.prototype.setPartyListData = function (content, isSelf) {\n        if (isSelf === void 0) { isSelf = true; }\n        this.mPartyData = content;\n        this.partyNavigationPanel.setPartyDataList(content);\n    };\n    PicaPartyListPanel.prototype.setOnlineProgress = function (content) {\n        this.partyNavigationPanel.setSignProgress(content);\n    };\n    PicaPartyListPanel.prototype.setRoomListData = function (content) {\n        this.myRoomNavigationPanel.setRoomDataList(content);\n    };\n    PicaPartyListPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "party/party.png", "party/party.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaPartyListPanel.prototype.init = function () {\n        if (this.mInitialized)\n            return;\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        this.mBackground.fillStyle(0, 0.66);\n        this.mBackground.fillRect(0, 0, w, h);\n        this.add(this.mBackground);\n        this.content = this.scene.make.container(undefined, false);\n        var bgwidth = 295 * this.dpr, bgheight = 490 * this.dpr;\n        this.content.setSize(bgwidth, bgheight);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, bgwidth, bgheight, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "bg", {\n            left: 20 * this.dpr,\n            top: 20 * this.dpr,\n            right: 20 * this.dpr,\n            bottom: 60 * this.dpr\n        });\n        this.content.add(this.bg);\n        this.closeBtn = this.scene.make.image({ x: this.bg.width * 0.5 - this.dpr * 5, y: -this.bg.height * 0.5 + this.dpr * 5, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, frame: "close" }).setScale(1.3);\n        this.closeBtn.setInteractive();\n        this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.content.add([this.closeBtn]);\n        this.navigationBtn = this.createTabButton(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.navigation"));\n        this.mineBtn = this.createTabButton(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.mine"));\n        // this.searchBtn = this.createTabButton(i18n.t("common.search"));\n        this.navigationBtn.setPosition(-this.navigationBtn.width - 2 * this.dpr, -this.content.height * 0.5 - this.navigationBtn.height * 0.5 + 5 * this.dpr);\n        this.mineBtn.setPosition(this.navigationBtn.x + this.navigationBtn.width + 2 * this.dpr, this.navigationBtn.y);\n        // this.searchBtn.setPosition(this.mineBtn.x + this.mineBtn.width + 2 * this.dpr, this.navigationBtn.y);\n        this.topCheckBox = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["CheckboxGroup"]();\n        this.topCheckBox.appendItemAll([this.navigationBtn, this.mineBtn]);\n        this.topCheckBox.on("selected", this.onTabBtnHandler, this);\n        this.content.add([this.navigationBtn, this.mineBtn]);\n        this.add(this.content);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n        this.topCheckBox.selectIndex(0);\n    };\n    PicaPartyListPanel.prototype.onTabBtnHandler = function (btn) {\n        if (this.navigationBtn === btn) {\n            this.openPartyNavigationPanel();\n            this.hideRoomNavigationPanel();\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_querylist");\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_questprogress");\n        }\n        else if (this.mineBtn === btn) {\n            this.openRoomNavigationPanel();\n            this.hidePartyNavigationPanel();\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_getMyRoomList");\n        }\n        else if (this.searchBtn === btn) {\n        }\n    };\n    PicaPartyListPanel.prototype.openPartyNavigationPanel = function () {\n        if (!this.partyNavigationPanel) {\n            this.partyNavigationPanel = new _PicaPartyNavigationPanel__WEBPACK_IMPORTED_MODULE_5__["PicaPartyNavigationPanel"](this.scene, this.content.width - 40 * this.dpr, this.content.height - 40 * this.dpr, this.key, this.dpr, this.scale);\n            this.partyNavigationPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onPartyListHandler));\n            this.partyNavigationPanel.y = 0 * this.dpr;\n            this.partyNavigationPanel.on("questreward", this.onProgressRewardHandler, this);\n        }\n        this.content.add(this.partyNavigationPanel);\n        this.partyNavigationPanel.refreshMask();\n    };\n    PicaPartyListPanel.prototype.hidePartyNavigationPanel = function () {\n        if (this.partyNavigationPanel)\n            this.content.remove(this.partyNavigationPanel);\n    };\n    PicaPartyListPanel.prototype.openRoomNavigationPanel = function () {\n        if (!this.myRoomNavigationPanel) {\n            this.myRoomNavigationPanel = new _PicaMyRoomNavigationPanel__WEBPACK_IMPORTED_MODULE_6__["PicaMyRoomNavigationPanel"](this.scene, this.content.width - 40 * this.dpr, this.content.height - 34 * this.dpr, this.key, this.dpr, this.scale);\n            this.myRoomNavigationPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onEnterRoomHandler));\n            this.myRoomNavigationPanel.y = -10 * this.dpr;\n        }\n        this.content.add(this.myRoomNavigationPanel);\n        this.myRoomNavigationPanel.refreshMask();\n    };\n    PicaPartyListPanel.prototype.hideRoomNavigationPanel = function () {\n        if (this.myRoomNavigationPanel) {\n            this.myRoomNavigationPanel.clear();\n            this.content.remove(this.myRoomNavigationPanel);\n        }\n    };\n    PicaPartyListPanel.prototype.createTabButton = function (text) {\n        var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["TabButton"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, "default_tab_s", "check_tab_s", text);\n        btn.tweenEnable = false;\n        btn.setTextStyle({ fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT, fontSize: 16 * this.dpr, color: "#ffffff" });\n        return btn;\n    };\n    PicaPartyListPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_close");\n    };\n    PicaPartyListPanel.prototype.onPartyListHandler = function (tag, data) {\n        if (tag === "hotel" || tag === "pictown" || tag === "partylist") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_queryenter", data.roomId);\n        }\n        else if (tag === "progress") {\n        }\n    };\n    PicaPartyListPanel.prototype.onProgressRewardHandler = function (index) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_questreward", index);\n    };\n    PicaPartyListPanel.prototype.onEnterRoomHandler = function (roomID) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_queryenter", roomID);\n    };\n    return PicaPartyListPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaPartyList/PicaPartyListPanel.ts?')},"./src/pica/render/ui/PicaPartyList/PicaPartyNavigationPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaPartyNavigationPanel", function() { return PicaPartyNavigationPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaPartyNavigationPanel = /** @class */ (function (_super) {\n    __extends(PicaPartyNavigationPanel, _super);\n    function PicaPartyNavigationPanel(scene, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.setSize(width, height);\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.create();\n        return _this;\n    }\n    PicaPartyNavigationPanel.prototype.create = function () {\n        var _this = this;\n        this.signProgressPanel = new SignProgressPanel(this.scene, 252 * this.dpr, 45 * this.dpr, this.key, this.dpr);\n        this.signProgressPanel.y = -this.height * 0.5 + 15 * this.dpr;\n        this.signProgressPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onProgressHandler));\n        this.add(this.signProgressPanel);\n        var tableConfig = {\n            x: 0,\n            y: 60 * this.dpr,\n            table: {\n                width: 254 * this.dpr,\n                height: 330 * this.dpr,\n                columns: 1,\n                cellWidth: 254 * this.dpr,\n                cellHeight: 50 * this.dpr,\n                reuseCellContainer: true,\n                zoom: this.zoom\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, index = cell.index, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new PartyListItem(_this.scene, _this.key, _this.dpr);\n                }\n                cellContainer.setPartyData(item, index);\n                return cellContainer;\n            },\n        };\n        this.mGameGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.mGameGrid.layout();\n        this.mGameGrid.on("cellTap", this.onGridTableHandler, this);\n        this.add(this.mGameGrid);\n        this.noPartyImg = this.scene.make.image({ key: this.key, frame: "no_party" });\n        this.noPartyImg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.noPartyImg.y = 20 * this.dpr;\n        this.add(this.noPartyImg);\n        this.noPartyText = this.scene.make.text({ x: 0, y: this.noPartyImg.y + this.noPartyImg.height * 0.5 + 10 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.nopartytips"), style: { color: "#AAAAAA", fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        this.add(this.noPartyText);\n        this.itemtips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ItemInfoTips"](this.scene, 121 * this.dpr, 46 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].common2Key, "tips_bg", this.dpr);\n        this.itemtips.setVisible(false);\n        this.add(this.itemtips);\n        this.hotelBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "hotel", "hotel", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.hotel"));\n        this.hotelBtn.text.setOrigin(0, 1);\n        this.hotelBtn.tweenScale = 0.88;\n        this.hotelBtn.setTextStyle({ fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT, color: "#FFDE00", stroke: "#222222", strokeThickness: 2 * this.dpr });\n        this.hotelBtn.setTextOffset(-this.hotelBtn.width * 0.5 + 5 * this.dpr, this.hotelBtn.height * 0.5 - 2 * this.dpr);\n        this.hotelBtn.setPosition(-this.hotelBtn.width * 0.5 - 18 * this.dpr, this.signProgressPanel.y + this.signProgressPanel.height * 0.5 + this.hotelBtn.height * 0.5 + 20 * this.dpr);\n        this.hotelBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onHotelHandler, this);\n        this.add(this.hotelBtn);\n        this.picatownBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "town", "town", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.picatown"));\n        this.picatownBtn.text.setOrigin(0, 1);\n        this.picatownBtn.tweenScale = 0.88;\n        this.picatownBtn.setTextStyle({ fontSize: 13 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT, color: "#FFDE00", stroke: "#222222", strokeThickness: 2 * this.dpr });\n        this.picatownBtn.setTextOffset(-this.picatownBtn.width * 0.5 + 5 * this.dpr, this.picatownBtn.height * 0.5 - 2 * this.dpr);\n        this.picatownBtn.setPosition(this.picatownBtn.width * 0.5 - 10 * this.dpr, this.hotelBtn.y);\n        this.picatownBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onPicatownHandler, this);\n        this.add(this.picatownBtn);\n    };\n    PicaPartyNavigationPanel.prototype.refreshMask = function () {\n        this.mGameGrid.resetMask();\n    };\n    PicaPartyNavigationPanel.prototype.setHandler = function (handler) {\n        this.sendHandler = handler;\n    };\n    PicaPartyNavigationPanel.prototype.setPartyDataList = function (content) {\n        this.partyData = content;\n        if (content.party.length > 0) {\n            this.mGameGrid.setItems(content.party);\n            this.mGameGrid.visible = true;\n            this.noPartyText.visible = false;\n            this.noPartyImg.visible = false;\n        }\n        else {\n            this.noPartyText.visible = true;\n            this.noPartyImg.visible = true;\n            this.mGameGrid.visible = false;\n        }\n    };\n    PicaPartyNavigationPanel.prototype.setSignProgress = function (content) {\n        this.progressData = content;\n        this.signProgressPanel.setProgressDatas(content);\n    };\n    PicaPartyNavigationPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaPartyNavigationPanel.prototype.onGridTableHandler = function (item) {\n        this.onSendHandler(item.partyData);\n    };\n    PicaPartyNavigationPanel.prototype.onHotelHandler = function () {\n        if (!this.partyData)\n            return;\n        if (this.sendHandler)\n            this.sendHandler.runWith(["hotel", this.partyData.hotel]);\n    };\n    PicaPartyNavigationPanel.prototype.onPicatownHandler = function () {\n        if (!this.partyData)\n            return;\n        if (this.sendHandler)\n            this.sendHandler.runWith(["pictown", this.partyData.picatown]);\n    };\n    PicaPartyNavigationPanel.prototype.onSendHandler = function (data) {\n        if (this.sendHandler)\n            this.sendHandler.runWith(["partylist", data]);\n    };\n    PicaPartyNavigationPanel.prototype.onProgressHandler = function (index, item) {\n        if (!this.progressData)\n            return;\n        var data = item.progressData;\n        if (!data.received) {\n            if (data.targetValue <= this.progressData.currentProgressValue) {\n                this.emit("questreward", index);\n            }\n            else {\n                this.itemtips.setItemData(data.rewards[0]);\n                this.showItemTipsState(item);\n            }\n        }\n    };\n    PicaPartyNavigationPanel.prototype.showItemTipsState = function (item, offsety) {\n        if (offsety === void 0) { offsety = 0; }\n        var posx = this.itemtips.x;\n        var posy = this.itemtips.y;\n        this.setTipsPosition(item, offsety);\n        if (posx !== this.itemtips.x || posy !== this.itemtips.y) {\n            this.itemtips.setVisible(true);\n        }\n        else {\n            this.itemtips.setVisible(!this.itemtips.visible);\n        }\n    };\n    PicaPartyNavigationPanel.prototype.setTipsPosition = function (gameobject, offsety) {\n        if (offsety === void 0) { offsety = 0; }\n        var posx = gameobject.x;\n        var posy = gameobject.y;\n        var tempobject = gameobject;\n        while (tempobject.parentContainer !== this) {\n            posx += tempobject.parentContainer.x;\n            posy += tempobject.parentContainer.y;\n            tempobject = tempobject.parentContainer;\n        }\n        if (posx - this.itemtips.width * 0.5 < -this.width * 0.5) {\n            this.itemtips.x = this.itemtips.width * 0.5 - this.width * 0.5 + 20 * this.dpr;\n        }\n        else if (posx + this.itemtips.width * 0.5 > this.width * 0.5) {\n            this.itemtips.x = this.width * 0.5 - this.itemtips.width * 0.5 - 20 * this.dpr;\n        }\n        else {\n            this.itemtips.x = posx;\n        }\n        this.itemtips.y = posy - this.itemtips.height * 0.5 + 10 * this.dpr + offsety;\n    };\n    return PicaPartyNavigationPanel;\n}(Phaser.GameObjects.Container));\n\nvar PartyListItem = /** @class */ (function (_super) {\n    __extends(PartyListItem, _super);\n    function PartyListItem(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, 254 * dpr, 40 * dpr, _this.key, "list_bg", {\n            left: 12 * _this.dpr,\n            top: 0 * _this.dpr,\n            right: 12 * _this.dpr,\n            bottom: 0 * _this.dpr\n        });\n        _this.add(_this.bg);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.imagIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, 0);\n        _this.imagIcon.setTexture(_this.key, "party_icon_1");\n        _this.imagIcon.x = -_this.width * 0.5 + _this.imagIcon.width * 0.5 + 8 * dpr;\n        _this.imagIcon.y = -_this.height * 0.5 + _this.imagIcon.height * 0.5 + 5 * dpr;\n        _this.add(_this.imagIcon);\n        _this.hotImageValue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageBBCodeValue"](scene, 30 * dpr, 10 * dpr, key, "hot", dpr, {\n            fontSize: 9 * dpr,\n            color: "#FFDD00",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n            stroke: "#666666",\n            strokeThickness: 2 * dpr,\n        });\n        _this.hotImageValue.setOffset(-3 * dpr, 0);\n        _this.hotImageValue.x = -_this.width * 0.5 + _this.hotImageValue.width * 0.5 + 8 * dpr;\n        _this.hotImageValue.y = _this.height * 0.5 - _this.hotImageValue.height * 0.5 - 5 * dpr;\n        _this.add(_this.hotImageValue);\n        _this.partyName = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, -_this.width * 0.5 + 45 * dpr, -_this.height * 0.5 + 5 * dpr, "", {\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n            fontSize: 12 * dpr,\n            color: "#333333"\n        });\n        _this.partyName.setOrigin(0);\n        _this.add(_this.partyName);\n        _this.partyOwnerName = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageBBCodeValue"](scene, 50 * dpr, 20 * dpr, key, "user", dpr, {\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n            fontSize: 11 * dpr,\n            color: "#333333"\n        });\n        _this.partyOwnerName.x = _this.partyName.x + _this.partyOwnerName.width * 0.5;\n        _this.partyOwnerName.y = _this.partyName.y + 25 * dpr;\n        _this.add(_this.partyOwnerName);\n        _this.playerCount = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageBBCodeValue"](scene, 30 * dpr, 20 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasKey"].commonKey, "home_persons", dpr, {\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n            fontSize: 12 * dpr,\n            color: "#333333"\n        });\n        _this.playerCount.x = _this.width * 0.5 - 35 * dpr;\n        _this.add(_this.playerCount);\n        return _this;\n    }\n    PartyListItem.prototype.setPartyData = function (data) {\n        this.partyData = data;\n        var texturepath = data.topic.display.texturePath;\n        var lastindex = texturepath.lastIndexOf("/");\n        var frame = texturepath.slice(lastindex + 1, texturepath.length);\n        var burl = texturepath.slice(0, lastindex + 1);\n        var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(burl + frame + ("_s_" + this.dpr + "x") + ".png");\n        this.imagIcon.load(url);\n        this.hotImageValue.setText(this.getHotText(data.focus));\n        this.partyName.text = "[b]" + data.name + "[/b]";\n        this.playerCount.setText("[b]" + data.playerCount + "[/b]");\n        this.partyOwnerName.setText(data.ownerName);\n    };\n    PartyListItem.prototype.getHotText = function (value) {\n        var text = value + "";\n        if (utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].language === "en") {\n            if (text.length >= 4 && text.length < 7) {\n                text = Math.floor(value / 100) / 10 + utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("quantityunit.k");\n            }\n            else if (text.length >= 7) {\n                text = Math.floor(value / 100000) / 10 + utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("quantityunit.m");\n            }\n        }\n        else {\n            text = structure__WEBPACK_IMPORTED_MODULE_3__["ChineseUnit"].getChineseUnit(value, 1);\n        }\n        return "[stroke]" + text + " [/stroke]";\n    };\n    return PartyListItem;\n}(Phaser.GameObjects.Container));\nvar SignProgressPanel = /** @class */ (function (_super) {\n    __extends(SignProgressPanel, _super);\n    function SignProgressPanel(scene, width, height, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.progressItems = [];\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        var barConfig = {\n            x: 0 * dpr / 2,\n            y: 15 * dpr,\n            width: 218 * dpr,\n            height: 11 * dpr,\n            background: {\n                x: 0,\n                y: 0,\n                width: 251 * dpr,\n                height: 11 * dpr,\n                config: {\n                    top: 0 * dpr,\n                    left: 7 * dpr,\n                    right: 7 * dpr,\n                    bottom: 0 * dpr,\n                },\n                key: key,\n                frame: "order_progress_bottom"\n            },\n            bar: {\n                x: 0,\n                y: 0,\n                width: 251 * dpr,\n                height: 11 * dpr,\n                config: {\n                    top: 0 * dpr,\n                    left: 7 * dpr,\n                    right: 7 * dpr,\n                    bottom: 0 * dpr,\n                },\n                key: key,\n                frame: "order_progress_top"\n            },\n            dpr: dpr,\n            textConfig: undefined\n        };\n        _this.progress = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ProgressBar"](scene, barConfig);\n        _this.add(_this.progress);\n        _this.text = scene.make.text({ x: _this.width / 2, y: -_this.height * 0.5 + 11 * dpr, text: "", style: { color: "#6666FF", fontSize: 13 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        // this.text.setStroke("#6666FF", 1 * dpr);\n        _this.text.setOrigin(1, 0.5);\n        _this.add(_this.text);\n        return _this;\n    }\n    SignProgressPanel.prototype.setProgressDatas = function (content) {\n        var len = content.steps.length;\n        var maxvalue = 100;\n        var width = this.progress.width;\n        var nextValue = 0;\n        for (var i = 0; i < len; i++) {\n            var data = content.steps[i];\n            var item = void 0;\n            if (i < this.progressItems.length) {\n                item = this.progressItems[i];\n            }\n            else {\n                item = new SignProgressItem(this.scene, 0, 0, this.key, this.dpr);\n                this.add(item);\n                this.progressItems.push(item);\n                item.setHandler(this.receiveHandler);\n            }\n            item.x = -width * 0.5 + (len > 1 ? width * (i) / (len - 1) : width * 0.5);\n            item.y = 15 * this.dpr;\n            item.setItemData(data, i, content.currentProgressValue);\n            maxvalue = data.targetValue;\n            if (data.targetValue > content.currentProgressValue && nextValue === 0) {\n                nextValue = data.targetValue;\n            }\n            // Logger.getInstance().log("current: ", content.currentProgressValue, "maxvalue: ", maxvalue);\n        }\n        this.progress.setProgress(content.currentProgressValue, maxvalue);\n        this.initCountDown(nextValue - content.currentProgressValue, maxvalue === nextValue);\n        // this.initCountDown(100, maxvalue === nextValue);\n    };\n    SignProgressPanel.prototype.setHandler = function (handler) {\n        this.receiveHandler = handler;\n    };\n    SignProgressPanel.prototype.destroy = function () {\n        clearInterval(this.timerID);\n        _super.prototype.destroy.call(this);\n    };\n    SignProgressPanel.prototype.initCountDown = function (time, isLast) {\n        var _this = this;\n        if (this.timerID) {\n            clearTimeout(this.timerID);\n            this.timerID = undefined;\n        }\n        var interval = 1000;\n        var timeextu = function () {\n            var minute = Math.floor(time / 60);\n            var second = time % 60;\n            var timetext = (minute < 10 ? "0" + minute : minute + "") + ":" + (second < 10 ? "0" + second : second + "");\n            _this.text.text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.progresstips", { timer: timetext });\n            time--;\n            if (time > 0) {\n                _this.timerID = setTimeout(function () {\n                    timeextu();\n                }, interval);\n                return;\n            }\n            else {\n                _this.text.text = "";\n                _this.timerID = undefined;\n            }\n        };\n        timeextu();\n    };\n    return SignProgressPanel;\n}(Phaser.GameObjects.Container));\nvar SignProgressItem = /** @class */ (function (_super) {\n    __extends(SignProgressItem, _super);\n    function SignProgressItem(scene, x, y, key, dpr) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](scene, key, "order_progress_unfinished", "order_progress_unfinished");\n        _this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, 0);\n        _this.text = scene.make.text({ x: 2 * dpr, y: -_this.bg.height * 0.5 - 8 * dpr, text: "10", style: { color: "#FFDD00", fontSize: 13 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        _this.text.setStroke("#905B06", 2 * dpr).setOrigin(0.5);\n        _this.finishIcon = scene.make.image({ key: key, frame: "order_progress_ok" });\n        _this.finishIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.balckgraphic = scene.make.graphics(undefined, false);\n        _this.balckgraphic.clear();\n        _this.balckgraphic.fillStyle(0, 0.5);\n        _this.balckgraphic.fillCircle(0, 0, 16 * dpr);\n        _this.add([_this.bg, _this.icon, _this.text, _this.balckgraphic, _this.finishIcon]);\n        _this.finishIcon.visible = false;\n        return _this;\n    }\n    SignProgressItem.prototype.setItemData = function (data, index, curvalue) {\n        var _this = this;\n        this.progressData = data;\n        this.index = index;\n        this.text.text = index === 0 ? utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("common.sign") : utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("party.onlinetime", { name: Math.floor(data.targetValue / 60) });\n        this.text.visible = index === 0 ? true : false;\n        if (data.rewards && data.rewards.length > 0) {\n            var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(data.rewards[0].display.texturePath);\n            this.icon.load(url, this, function () {\n                _this.icon.scale = 1;\n                _this.icon.scaleY = 29 * _this.dpr / _this.icon.displayHeight;\n                _this.icon.scaleX = _this.icon.scaleY;\n            });\n        }\n        this.finishIcon.visible = false;\n        this.balckgraphic.visible = false;\n        if (data.targetValue <= curvalue) {\n            this.bg.setFrameNormal("order_progress_finished", "order_progress_finished");\n            if (data.received) {\n                this.finishIcon.visible = true;\n                this.balckgraphic.visible = true;\n            }\n            this.icon.clearTint();\n        }\n        else {\n            this.bg.setFrameNormal("order_progress_unfinished", "order_progress_unfinished");\n            this.icon.setTint(0x8B8B7A);\n        }\n        if (!data.received) {\n            this.bg.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onReceiveHandler, this);\n            this.bg.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onReceiveHandler, this);\n        }\n        else {\n            this.bg.off(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onReceiveHandler, this);\n        }\n    };\n    SignProgressItem.prototype.setHandler = function (receive) {\n        this.receiveHandler = receive;\n    };\n    SignProgressItem.prototype.onReceiveHandler = function () {\n        if (this.receiveHandler)\n            this.receiveHandler.runWith([this.index, this]);\n    };\n    return SignProgressItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaPartyList/PicaPartyNavigationPanel.ts?')},"./src/pica/render/ui/PicaPropFun/PicaPropFunPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaPropFunPanel", function() { return PicaPropFunPanel; });\n/* harmony import */ var _Components_detail_display__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Components/detail.display */ "./src/pica/render/ui/Components/detail.display.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar PicaPropFunPanel = /** @class */ (function (_super) {\n    __extends(PicaPropFunPanel, _super);\n    function PicaPropFunPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        _this.itemCount = 1;\n        _this.line = false;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAPROPFUN_NAME;\n        return _this;\n    }\n    PicaPropFunPanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0, 0.66);\n        this.blackGraphic.fillRect(0, 0, width, height);\n        this.content.x = width / 2;\n        this.content.y = height / 2;\n        this.setSize(width * this.scale, height * this.scale);\n    };\n    PicaPropFunPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n        var config = this.mShowData; // PicPropFunConfig\n        this.setProp(config);\n        this.updateData();\n    };\n    PicaPropFunPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.cancelBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onCancelBtnHandler, this);\n        this.confirmBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onConfirmBtnHandler, this);\n    };\n    PicaPropFunPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.cancelBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onCancelBtnHandler, this);\n        this.confirmBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, this.onConfirmBtnHandler, this);\n    };\n    PicaPropFunPanel.prototype.preload = function () {\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaPropFunPanel.prototype.init = function () {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        var dpr = this.dpr;\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.blackGraphic.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        this.add(this.blackGraphic);\n        this.content = this.scene.make.container(undefined, false);\n        var bgwidth = 299 * this.dpr, bgheight = 305 * this.dpr;\n        this.content.setSize(bgwidth, bgheight);\n        this.add(this.content);\n        var bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSlicePatch"](this.scene, 0, 0, bgwidth, bgheight, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, "bg", {\n            left: 20 * this.dpr,\n            top: 20 * this.dpr,\n            right: 30 * this.dpr,\n            bottom: 40 * this.dpr\n        });\n        bg.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        var posY = -bg.height * 0.5 + 3 * dpr;\n        var titlebg = this.scene.make.image({ x: 0, y: posY, key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, frame: "title" });\n        titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titleName = this.scene.make.text({\n            x: 0, y: posY + 3 * dpr, text: "",\n            style: {\n                color: "#905B06",\n                fontSize: 16 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        this.titleName.setFontStyle("bold");\n        this.itemName = this.scene.make.text({\n            x: 0, y: posY + 40 * dpr,\n            style: {\n                color: "#000000",\n                fontSize: 15 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        var iconOffset = -40 * dpr;\n        this.mDetailDisplay = new _Components_detail_display__WEBPACK_IMPORTED_MODULE_0__["DetailDisplay"](this.scene, this.render);\n        this.mDetailDisplay.setFixedScale(this.dpr / this.scale);\n        this.mDetailDisplay.y = iconOffset;\n        var priceOffset = 30 * dpr;\n        this.priceBg = this.scene.make.image({ x: 0, y: priceOffset, key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, frame: "price_bg" });\n        this.priceBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.pricText = this.scene.make.text({\n            x: 0, y: priceOffset,\n            style: {\n                color: "#000000",\n                fontSize: 15 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        this.mCoinIcon = this.scene.make.image({ x: -45 * this.dpr, y: priceOffset, key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, frame: "iv_coin" }, false).setOrigin(0.5);\n        this.mCoinIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var sliderbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSlicePatch"](this.scene, 0, 0, 8, 7 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, "slider_bg", {\n            left: 3,\n            top: 1,\n            right: 3,\n            bottom: 1\n        });\n        var indicator = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSlicePatch"](this.scene, 0, 0, 8, 7 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, "slider_rate", {\n            left: 3,\n            top: 1,\n            right: 3,\n            bottom: 1\n        });\n        var thumb = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].common2Key, frame: "block" });\n        this.thumb = thumb;\n        this.itemCountText = this.scene.make.text({\n            x: 0, y: 0,\n            style: {\n                color: "#744803",\n                fontSize: 15 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        this.slider = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["GameSlider"](this.scene, {\n            x: 0, y: 70 * dpr, width: 136 * dpr, height: 7 * dpr, orientation: 1,\n            background: sliderbg,\n            indicator: indicator,\n            thumb: thumb,\n            offsetX: thumb.width * 0.5,\n            valuechangeCallback: this.onSliderValueHandler,\n            valuechangeCallbackScope: this,\n            value: 0.5\n        });\n        this.slider.add(this.itemCountText);\n        this.slider.setValue(0);\n        var bottomOffsetY = bg.height * 0.5 - 30 * dpr;\n        var bottomOffsetX = -66 * dpr;\n        this.cancelBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSliceButton"](this.scene, bottomOffsetX, bottomOffsetY, 112 * dpr, 36 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, "red_btn", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("common.cancel"), dpr, this.scale, {\n            left: 12 * dpr,\n            top: 12 * dpr,\n            right: 12 * dpr,\n            bottom: 12 * dpr\n        });\n        this.confirmBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSliceButton"](this.scene, -bottomOffsetX, bottomOffsetY, 112 * dpr, 36 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("common.confirm"), dpr, this.scale, {\n            left: 12 * dpr,\n            top: 12 * dpr,\n            right: 12 * dpr,\n            bottom: 12 * dpr\n        });\n        this.cancelBtn.setTextStyle({ color: "#FFFFFF", fontSize: 16 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT });\n        this.confirmBtn.setTextStyle({ color: "#976400", fontSize: 16 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT });\n        this.content.add([bg, titlebg, this.titleName, this.itemName, this.mDetailDisplay, this.priceBg, this.mCoinIcon, this.pricText, this.slider, this.cancelBtn, this.confirmBtn]);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaPropFunPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaPropFunPanel.prototype.setProp = function (config) {\n        this.prop = config;\n        var price = (config.price !== undefined ? config.price : true);\n        price = this.prop.data.sellingPrice ? price : false;\n        var slider = (config.slider !== undefined ? config.slider : true);\n        this.line = config.line || false;\n        this.itemData = this.prop.data;\n        if (slider)\n            this.itemCount = 1;\n        else\n            this.itemCount = this.itemData.count;\n        if (config.resource)\n            this.setResource(config.resource);\n        if (config.url)\n            this.mDetailDisplay.loadUrl(config.url);\n        this.itemName.text = this.itemData.name || this.itemData.shortName;\n        this.itemCountText.text = this.itemCount + "";\n        if (config.title) {\n            this.titleName.text = config.title;\n        }\n        if (price) {\n            this.pricText.visible = true;\n            this.priceBg.visible = true;\n            this.mCoinIcon.visible = true;\n            this.slider.y = 70 * this.dpr;\n            this.pricText.text = utils__WEBPACK_IMPORTED_MODULE_4__["Coin"].getName(this.itemData.sellingPrice.coinType) + " x " + this.itemData.sellingPrice.price * this.itemCount;\n            var coinIcon = utils__WEBPACK_IMPORTED_MODULE_4__["Coin"].getIcon(this.itemData.sellingPrice.coinType);\n            this.mCoinIcon.setFrame(coinIcon);\n        }\n        else {\n            this.pricText.visible = false;\n            this.priceBg.visible = false;\n            this.mCoinIcon.visible = false;\n            this.slider.y = 50 * this.dpr;\n        }\n        if (config.resultHandler.key && config.resultHandler.key.length > 0) {\n            var panel = this.uiManager.getPanel("" + config.resultHandler.key);\n            if (panel) {\n                if (config.resultHandler.confirmFunc && config.resultHandler.confirmFunc in panel && typeof panel[config.resultHandler.confirmFunc] === "function") {\n                    this.confirmHandler = panel[config.resultHandler.confirmFunc];\n                }\n                if (config.resultHandler.confirmAddData) {\n                    this.confirmHandlerAddData = config.resultHandler.confirmAddData;\n                }\n                if (config.resultHandler.cancelFunc && config.resultHandler.cancelFunc in panel && typeof panel[config.resultHandler.cancelFunc] === "function") {\n                    this.cancelHandler = panel[config.resultHandler.cancelFunc];\n                }\n            }\n        }\n        this.slider.visible = slider;\n        this.slider.setValue(0);\n    };\n    PicaPropFunPanel.prototype.setResource = function (content) {\n        if (content) {\n            if (content.display) {\n                this.mDetailDisplay.loadDisplay(content);\n            }\n            else if (content.avatar) {\n                this.mDetailDisplay.loadAvatar(content, 2, new Phaser.Geom.Point(0, 35 * 2));\n            }\n        }\n        else {\n            this.mDetailDisplay.loadUrl(this.itemData.texturePath);\n        }\n    };\n    PicaPropFunPanel.prototype.updateData = function () {\n        if (this.itemCountText)\n            this.itemCountText.text = this.itemCount + "";\n        if (this.pricText && this.itemData && this.itemData.sellingPrice)\n            this.pricText.text = utils__WEBPACK_IMPORTED_MODULE_4__["Coin"].getName(this.itemData.sellingPrice.coinType) + " x " + this.itemData.sellingPrice.price * this.itemCount;\n    };\n    PicaPropFunPanel.prototype.onCancelBtnHandler = function () {\n        var panel = this.uiManager.getPanel("" + this.prop.resultHandler.key);\n        if (panel) {\n            if (this.cancelHandler) {\n                this.cancelHandler.apply(panel, this.itemData);\n            }\n        }\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_close");\n    };\n    PicaPropFunPanel.prototype.onConfirmBtnHandler = function () {\n        if (this.confirmHandler) {\n            var panel = this.uiManager.getPanel("" + this.prop.resultHandler.key);\n            if (panel) {\n                if (this.confirmHandlerAddData) {\n                    this.confirmHandler.apply(panel, [this.confirmHandlerAddData, this.itemData, this.itemCount]);\n                }\n                else {\n                    this.confirmHandler.apply(panel, [this.itemData, this.itemCount]);\n                }\n            }\n        }\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["RENDER_PEER"] + "_" + this.key + "_close");\n    };\n    PicaPropFunPanel.prototype.onSliderValueHandler = function (value) {\n        this.itemCountText.x = this.thumb.x;\n        this.itemCount = this.line ? this.calcuSliderValue(value) : this.lineSliderValue(value);\n        this.updateData();\n    };\n    PicaPropFunPanel.prototype.calcuSliderValue = function (value) {\n        var allcount = this.itemData ? this.itemData.count : 1;\n        var count = 0;\n        var line = 10;\n        var num = 4;\n        if (allcount <= line * num) {\n            count = Math.round(allcount * value);\n        }\n        else {\n            if (value <= 1 / num) {\n                count = line * num * value;\n            }\n            else {\n                var mcount = allcount - line;\n                if (mcount <= line * num) {\n                    count = line + mcount * (value - 1 / num) / (1 - 1 / num);\n                }\n                else {\n                    var ncount = mcount / num;\n                    count = line;\n                    for (var i = 1; i < num; i++) {\n                        var fcount = ncount + mcount / (num * (num - 1)) * (i - 1);\n                        if (value > i / num && value <= (i + 1) / num) {\n                            count += fcount * (value - i / num) / (1 / num);\n                            break;\n                        }\n                        else {\n                            count += fcount;\n                        }\n                    }\n                }\n            }\n        }\n        count = Math.round(count);\n        if (count < 1)\n            count = 1;\n        return count;\n    };\n    PicaPropFunPanel.prototype.lineSliderValue = function (value) {\n        var allcount = this.itemData ? this.itemData.count : 1;\n        var count = Math.round(allcount * value);\n        return count;\n    };\n    return PicaPropFunPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaPropFun/PicaPropFunPanel.ts?')},"./src/pica/render/ui/PicaRecaste/PicaRecastePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaRecastePanel", function() { return PicaRecastePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRender */ "./src/pica/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar PicaRecastePanel = /** @class */ (function (_super) {\n    __extends(PicaRecastePanel, _super);\n    function PicaRecastePanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.tempData = {};\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon];\n        _this.textures = [{ atlasName: "Recast_aims_icon_bg", folder: "texture" }, { atlasName: "Recast_bg_texture", folder: "texture" }];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICARECASTE_NAME;\n        return _this;\n    }\n    PicaRecastePanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.mBackground.x = width * 0.5;\n        this.mBackground.y = height * 0.5;\n        this.mTopBg.x = width * 0.5;\n        this.mTopBg.y = this.mTopBg.height * 0.5;\n        var categoryConHeight = 79 * this.dpr;\n        var topHeight = height - this.mPropGrid.height - categoryConHeight * 0.5 - 47 * this.dpr;\n        this.mCategoryCon.setSize(width, 79 * this.dpr);\n        this.mCategoryCon.y = topHeight;\n        this.mCategoryCon.x = width * 0.5;\n        this.mCategoriesBar.y = 40 * this.dpr;\n        this.mCategoriesBar.x = -width * 0.5;\n        this.mCategoriesBar.clear();\n        this.mCategoriesBar.fillStyle(0x3EE1FF);\n        this.mCategoriesBar.fillRect(0, 0, width, 40 * this.dpr);\n        this.confirmBtn.x = width - this.confirmBtn.width / 2 - 10 * this.dpr;\n        this.confirmBtn.y = this.mCategoryCon.y - this.confirmBtn.height / 2 + 25 * this.dpr;\n        this.labelTipTex.x = 15 * this.dpr;\n        this.labelTipTex.y = this.confirmBtn.y;\n        this.displayPanel.x = width * 0.5;\n        this.displayPanel.y = topHeight * 0.5 + 17 * this.dpr;\n        this.mPropGridBg.clear();\n        this.mPropGridBg.fillStyle(0x7DE5FE);\n        this.mPropGridBg.fillRect(0, 0, this.mPropGrid.width, this.mPropGrid.height + 10 * this.dpr);\n        this.mPropGridBg.y = height - this.mPropGrid.height - 4 * this.dpr;\n        this.mPropGrid.x = width / 2 + 3 * this.dpr;\n        this.mPropGrid.y = height - this.mPropGrid.height * 0.5;\n        this.mPropGrid.layout();\n        this.mPropGrid.resetMask();\n        this.mCategoryScroll.refreshMask();\n        this.setSize(width, height);\n        this.setInteractive();\n    };\n    PicaRecastePanel.prototype.setRecasteResult = function (data) {\n        if (data) {\n            this.mRecasteItemData.count--;\n            this.displayPanel.setRecasteItemData(this.mRecasteItemData);\n        }\n    };\n    PicaRecastePanel.prototype.setCategories = function (subcategorys) {\n        this.tempData.subcategory = subcategorys;\n        if (!this.mInitialized || !subcategorys)\n            return;\n        this.mPreCategoryBtn = null;\n        this.mSelectedCategeories = null;\n        var capW = 60 * this.dpr;\n        var capH = 41 * this.dpr;\n        var items = [];\n        this.mCategoryScroll.clearItems();\n        var allCategory = { value: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("common.all"), key: "alltype" };\n        subcategorys.unshift(allCategory);\n        for (var i = 0; i < subcategorys.length; i++) {\n            var item = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["TextButton"](this.scene, this.dpr, 1, subcategorys[i].value, 0, 0);\n            item.setData("item", subcategorys[i]);\n            item.setSize(capW, capH);\n            this.mCategoryScroll.addItem(item);\n            items[i] = item;\n            item.setFontSize(18 * this.dpr);\n            item.setFontStyle("bold");\n            var lineImg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "Recast_nav_Select" });\n            lineImg.y = 21 * this.dpr;\n            item.add(lineImg);\n            lineImg.visible = false;\n            item.setData("lineImg", lineImg);\n        }\n        this.mCategoryScroll.Sort();\n        this.mCategoryScroll.refreshMask();\n        if (items.length > 1)\n            this.onSelectSubCategoryHandler(items[0]);\n    };\n    PicaRecastePanel.prototype.onShow = function () {\n        this.setStarData(this.starCount);\n        this.setRecasteItemData(this.mShowData);\n        this.setCategories(this.tempData.subcategory);\n    };\n    PicaRecastePanel.prototype.setProp = function (props) {\n        props = !props ? [] : props;\n        var len = props.length;\n        if (len < 18) {\n            props = props.concat(new Array(18 - len));\n        }\n        this.mPropGrid.setItems(props);\n    };\n    PicaRecastePanel.prototype.setStarData = function (value) {\n        this.starCount = value;\n        if (!this.mInitialized)\n            return;\n        this.starvalue.setText(value + "");\n    };\n    PicaRecastePanel.prototype.setRecasteItemData = function (data) {\n        this.mRecasteItemData = data;\n        this.displayPanel.setRecasteItemData(data);\n    };\n    PicaRecastePanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.confirmBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onConfirmBtnHandler, this);\n    };\n    PicaRecastePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        this.confirmBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onConfirmBtnHandler, this);\n    };\n    PicaRecastePanel.prototype.destroy = function () {\n        if (this.mCategoryScroll) {\n            this.mCategoryScroll.destroy();\n        }\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    PicaRecastePanel.prototype.queryRecasteList = function () {\n        if (this.mSelectedCategeories) {\n            var subCate = this.mSelectedCategeories;\n            this.render.renderEmitter(this.key + "_queryrecastelist", { type: subCate.key, star: this.mRecasteItemData.grade });\n        }\n    };\n    PicaRecastePanel.prototype.onInitialized = function () {\n        if (this.starCount) {\n            this.starvalue.setText(this.starCount + "");\n        }\n    };\n    PicaRecastePanel.prototype.init = function () {\n        var _this = this;\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.mBackground = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["CommonBackground"](this.scene, 0, 0, width, height);\n        this.mTopBg = this.scene.make.image({\n            key: "Recast_bg_texture"\n        }, false);\n        this.displayPanel = new RecasteDisplayPanel(this.scene, width, 248 * this.dpr, this.render, this.dpr, this.scale);\n        this.mTopBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mCategoryCon = this.scene.make.container(undefined, false);\n        this.mCategoryCon.setSize(width, 295 * this.dpr);\n        this.mCategoryCon.y = height - this.mCategoryCon.height;\n        // const navbgline = this.scene.make.image({ key: UIAtlasName.uicommon, frame: "Recast_nav_line" });\n        // navbgline.y = 20 * this.dpr;\n        this.mCategoriesBar = this.scene.make.graphics(undefined, false);\n        this.mCategoryCon.add(this.mCategoriesBar);\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        this.mCloseBtn = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"](this.scene, 0, 0);\n        this.mCloseBtn.setSize(100 * this.dpr, 40 * this.dpr);\n        this.mCloseBtn.enable = true;\n        this.mCloseBtn.x = this.mCloseBtn.width * 0.5 + 10 * this.dpr;\n        this.mCloseBtn.y = 35 * this.dpr;\n        var closeimg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "back_arrow" });\n        closeimg.x = -this.mCloseBtn.width * 0.5 + closeimg.width * 0.5 + 10 * this.dpr;\n        var titleTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_5__["UIHelper"].whiteStyle(this.dpr, 18) }).setOrigin(0, 0.5);\n        titleTex.setFontStyle("bold");\n        titleTex.text = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furni_bag.recaste");\n        titleTex.x = closeimg.x + closeimg.width * 0.5 + 10 * this.dpr;\n        this.mCloseBtn.add([closeimg, titleTex]);\n        var starbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, -this.dpr, 80 * this.dpr, 28 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "home_assets_bg", {\n            left: 17 * this.dpr,\n            top: 0 * this.dpr,\n            right: 17 * this.dpr,\n            bottom: 0 * this.dpr\n        });\n        starbg.x = -starbg.width * 0.5;\n        this.starvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 26 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "Recast_pica star_big", this.dpr, {\n            color: "#ffffff", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].NUMBER\n        });\n        this.starvalue.setLayout(1);\n        this.starvalue.x = starbg.x - starbg.width * 0.5 + 22 * this.dpr;\n        this.starCountCon = this.scene.make.container(undefined, false);\n        this.starCountCon.setSize(starbg.width, starbg.height);\n        this.starCountCon.add([starbg, this.starvalue]);\n        this.starCountCon.x = width - 20 * this.dpr;\n        this.starCountCon.y = this.mCloseBtn.y;\n        var btnwidth = 100 * this.dpr, btnHeight = 40 * this.dpr;\n        var btnPosX = width - btnwidth / 2 - 20 * this.dpr, btnPosY = this.mCategoryCon.y - 25 * this.dpr;\n        this.confirmBtn = this.createNineButton(btnPosX + 100 * this.dpr, btnPosY, btnwidth, btnHeight, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("common.confirm"), "#996600");\n        this.labelTipTex = this.scene.make.text({ text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("recaste.tip"), style: utils__WEBPACK_IMPORTED_MODULE_5__["UIHelper"].colorStyle("#FAF916", this.dpr * 14) }).setOrigin(0, 0.5);\n        this.mCategoryScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: 0,\n            y: 60 * this.dpr,\n            width: width,\n            height: 44 * this.dpr,\n            zoom: this.scale,\n            orientation: 1,\n            dpr: this.dpr,\n            space: 10 * this.dpr,\n            selfevent: true,\n            cellupCallBack: function (gameobject) {\n                _this.onSelectSubCategoryHandler(gameobject);\n            }\n        });\n        this.mPropGridBg = this.scene.make.graphics(undefined, false);\n        this.mCategoryCon.add(this.mCategoryScroll);\n        this.add([this.mBackground, this.mPropGridBg, this.mTopBg, this.displayPanel, this.mCloseBtn, this.starCountCon, this.mCategoryCon, this.confirmBtn, this.labelTipTex]);\n        var propFrame = this.scene.textures.getFrame(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_icon_common_bg");\n        var capW = (propFrame.width) + 9 * this.dpr;\n        var capH = (propFrame.height) + 9 * this.dpr;\n        var tableConfig = {\n            x: 0,\n            y: 0,\n            table: {\n                width: width,\n                height: 231 * this.dpr,\n                columns: 3,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                zoom: this.scale,\n                mask: false\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new picaRender__WEBPACK_IMPORTED_MODULE_2__["ItemButton"](scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_icon_common_bg", _this.dpr, _this.scale, false);\n                }\n                cellContainer.setData({ item: item });\n                cellContainer.setItemData(item);\n                if (_this.mSelectedItemData && item && _this.mSelectedItemData.id === item.id) {\n                    cellContainer.isSelect = true;\n                    _this.mSelectedItem = cellContainer;\n                }\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on("cellTap", function (cell) {\n            if (cell) {\n                _this.onSelectItemHandler(cell);\n            }\n        });\n        this.add(this.mPropGrid);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaRecastePanel.prototype.createNineButton = function (x, y, width, height, key, frame, text, color) {\n        var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, x, y, width, height, key, frame, text, this.dpr, 1, {\n            left: 14 * this.dpr,\n            top: 14 * this.dpr,\n            right: 15 * this.dpr,\n            bottom: 14 * this.dpr\n        });\n        if (text) {\n            btn.setTextStyle({\n                color: color,\n                fontSize: 16 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT\n            });\n            btn.setFontStyle("bold");\n        }\n        return btn;\n    };\n    PicaRecastePanel.prototype.onSelectSubCategoryHandler = function (gameobject) {\n        var category = gameobject.getData("item"); // op_def.IStrPair\n        if (category) {\n            if (this.mPreCategoryBtn) {\n                this.mPreCategoryBtn.changeNormal();\n                var preline = this.mPreCategoryBtn.getData("lineImg");\n                preline.visible = false;\n            }\n            gameobject.changeDown();\n            this.mSelectedCategeories = category;\n            this.mPropGrid.setT(0);\n            this.queryRecasteList();\n            this.mPreCategoryBtn = gameobject;\n            var selectlin = gameobject.getData("lineImg");\n            selectlin.visible = true;\n        }\n        this.mPropGrid.setT(0);\n    };\n    PicaRecastePanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(this.key + "_close");\n    };\n    PicaRecastePanel.prototype.onSelectItemHandler = function (cell) {\n        var item = cell.getData("item"); // op_client.ICountablePackageItem\n        if (item && this.mSelectedItemData === item || !item)\n            return;\n        this.mSelectedItemData = item;\n        this.displayPanel.setRecasteTargetData(item);\n        if (this.mSelectedItem)\n            this.mSelectedItem.select = false;\n        cell.select = true;\n        this.mSelectedItem = cell;\n    };\n    PicaRecastePanel.prototype.onConfirmBtnHandler = function () {\n        var notice;\n        if (this.mSelectedItemData) {\n            if (this.starCount < this.mSelectedItemData.grade) {\n                notice = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("furnicompose.starpicatips");\n            }\n            else if (this.mRecasteItemData.count === 0) {\n                notice = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("recaste.counttips");\n            }\n            else if (this.mRecasteItemData.id === this.mSelectedItemData.id) {\n                notice = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("recaste.sametips");\n            }\n        }\n        else {\n            notice = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("recaste.selecttips");\n        }\n        if (notice) {\n            var data = {\n                text: [{ text: notice, node: undefined }]\n            };\n            this.render.mainPeer.showMediator(structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICANOTICE_NAME, true, data);\n            return;\n        }\n        this.render.renderEmitter(this.key + "_queryrecaste", { consumedId: this.mRecasteItemData.id, targetId: this.mSelectedItemData.id });\n    };\n    return PicaRecastePanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_7__["PicaBasePanel"]));\n\nvar RecasteDisplayPanel = /** @class */ (function (_super) {\n    __extends(RecasteDisplayPanel, _super);\n    function RecasteDisplayPanel(scene, width, height, render, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.render = render;\n        _this.init();\n        return _this;\n    }\n    RecasteDisplayPanel.prototype.setRecasteItemData = function (data) {\n        this.recasteItem.setItemData(data, true);\n        this.starvalue.setText(data.grade + "");\n    };\n    RecasteDisplayPanel.prototype.setRecasteTargetData = function (data) {\n        this.recasteTarget.displayLoading("loading_ui", utils__WEBPACK_IMPORTED_MODULE_5__["Url"].getUIRes(this.dpr, "loading_ui"), utils__WEBPACK_IMPORTED_MODULE_5__["Url"].getUIRes(this.dpr, "loading_ui"), this.dpr / this.zoom);\n        var content = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_6__["op_client"].OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE_ITEM_RESOURCE();\n        content.display = data.animationDisplay;\n        content.animations = data.animations;\n        this.recasteTarget.loadDisplay(content);\n        this.starLevelImg.setFrame("Recast_star_big_" + data.grade);\n        this.nameTex.text = data.name || data.shortName;\n        this.starLevelImg.visible = true;\n    };\n    RecasteDisplayPanel.prototype.init = function () {\n        var _this = this;\n        var rightbg = this.scene.make.image({ key: "Recast_aims_icon_bg" });\n        rightbg.x = this.width * 0.5 - rightbg.width * 0.5 - 15 * this.dpr;\n        this.recasteItem = new picaRender__WEBPACK_IMPORTED_MODULE_2__["ItemButton"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "Recast_default_icon_bg", this.dpr, this.zoom, false);\n        this.recasteItem.x = -this.width * 0.5 + this.recasteItem.width * 0.5 + 20 * this.dpr;\n        this.recasteItem.y = 0;\n        var arrowbg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "Recast_arrow" });\n        arrowbg.x = this.recasteItem.x + this.recasteItem.width * 0.5 + arrowbg.width * 0.5 + 6 * this.dpr;\n        arrowbg.y = this.recasteItem.y;\n        this.starvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 20 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "Recast_pica star_small", this.dpr, utils__WEBPACK_IMPORTED_MODULE_5__["UIHelper"].colorNumberStyle("#ffffff", 20 * this.dpr));\n        this.starvalue.x = arrowbg.x - 11 * this.dpr;\n        this.starvalue.y = arrowbg.y - 10 * this.dpr;\n        this.nameTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_5__["UIHelper"].colorStyle("#FFFF00", 14 * this.dpr) }).setOrigin(0, 0.5);\n        this.nameTex.setFontStyle("bold");\n        this.nameTex.x = rightbg.x - rightbg.width * 0.5;\n        this.nameTex.y = rightbg.y - rightbg.height * 0.5 - 18 * this.dpr;\n        this.starLevelImg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, frame: "Recast_star_big_1" }).setOrigin(1, 0.5);\n        this.starLevelImg.x = rightbg.x + rightbg.width * 0.5 - this.starLevelImg.width * 0.5 - 12 * this.dpr;\n        this.starLevelImg.y = rightbg.y - rightbg.height * 0.5 + this.starLevelImg.height * 0.5 + 8 * this.dpr;\n        this.starLevelImg.visible = false;\n        this.recasteTarget = new picaRender__WEBPACK_IMPORTED_MODULE_2__["DetailDisplay"](this.scene, this.render);\n        this.recasteTarget.setFixedScale(2 * this.dpr / this.zoom);\n        this.recasteTarget.setComplHandler(new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, function () {\n            _this.recasteTarget.visible = true;\n        }));\n        this.recasteTarget.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_nothing", 1);\n        this.recasteTarget.setNearest();\n        this.recasteTarget.x = rightbg.x;\n        this.recasteTarget.y = rightbg.y;\n        this.add([rightbg, this.recasteItem, this.recasteTarget, arrowbg, this.starvalue, this.nameTex, this.starLevelImg]);\n    };\n    return RecasteDisplayPanel;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaRecaste/PicaRecastePanel.ts?')},"./src/pica/render/ui/PicaRecharge/PicaRechargePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaRechargePanel", function() { return PicaRechargePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaRechargePanel = /** @class */ (function (_super) {\n    __extends(PicaRechargePanel, _super);\n    function PicaRechargePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICARECHARGE_NAME;\n        return _this;\n    }\n    PicaRechargePanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, w, h);\n        this.setSize(w, h);\n        this.mBackground.clear();\n        this.mBackground.fillGradientStyle(0x6f75ff, 0x6f75ff, 0x04cbff, 0x04cbff);\n        this.mBackground.fillRect(0, 0, w, h);\n        this.content.setSize(w, h);\n        this.content.x = w * 0.5;\n        this.content.y = h * 0.5;\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        this.top.y = -h * 0.5 + this.top.height * 0.5;\n        this.bottom.y = h * 0.5 - this.bottom.height * 0.5;\n        var defaultHeight = 640 * this.dpr;\n        if (height < defaultHeight) {\n            this.middle.y = this.top.y + this.top.height + this.middle.height * 0.5;\n        }\n        else {\n            this.middle.y = 28 * this.dpr;\n        }\n        var fixedHeight = this.top.height + this.bottom.height;\n        this.bg.scaleY = 1;\n        this.bg.displayHeight = h - fixedHeight + 60 * this.dpr;\n        if (this.gamescroll) {\n            this.gamescroll.refreshMask();\n        }\n    };\n    PicaRechargePanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    };\n    PicaRechargePanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on("pointerup", this.OnClosePanel, this);\n    };\n    PicaRechargePanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off("pointerup", this.OnClosePanel, this);\n    };\n    PicaRechargePanel.prototype.preload = function () {\n        this.addAtlas(this.key, "recharge/recharge.png", "recharge/recharge.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].textureUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl), picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].jsonUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl));\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].textureUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].common2Url), picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].jsonUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].common2Url));\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common3Key, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].textureUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].common3Url), picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].jsonUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].common3Url));\n        _super.prototype.preload.call(this);\n    };\n    PicaRechargePanel.prototype.init = function () {\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        this.add(this.mBackground);\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(width, height);\n        this.add(this.content);\n        this.bg = this.scene.make.image({ key: this.key, frame: "recharge_bg" });\n        this.bg.scale = 1;\n        this.bg.displayHeight = height - (96 * this.dpr + 50 * this.dpr);\n        this.bg.y = 23 * this.dpr;\n        this.content.add(this.bg);\n        this.top = this.scene.make.container(undefined, false);\n        this.top.setSize(width, 100 * this.dpr);\n        this.top.y = -height * 0.5 + this.top.height * 0.5;\n        this.content.add(this.top);\n        var posY = -this.top.height * 0.5;\n        this.topbg = this.scene.make.image({ key: this.key, frame: "recharge_head" });\n        this.topbg.y = posY + this.topbg.height * 0.5 + 43 * this.dpr;\n        this.titlebg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: "recharge_text" });\n        this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titlebg.y = posY + 45 * this.dpr;\n        this.tilteName = this.scene.make.text({ x: 0, y: this.titlebg.y + 2 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("recharge.title"), style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].titleYellowStyle_m(this.dpr) }).setOrigin(0.5);\n        this.tilteName.setFontStyle("bold");\n        this.tilteName.setResolution(this.dpr);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "back_arrow", "back_arrow");\n        this.closeBtn.x = -width * 0.5 + this.closeBtn.width * 0.5 + this.dpr * 15;\n        this.closeBtn.y = posY + this.closeBtn.height * 0.5 + 10 * this.dpr;\n        this.diamondvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ValueContainer"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common3Key, "diamond", this.dpr);\n        this.diamondvalue.x = width * 0.5 - 46 * this.dpr;\n        this.diamondvalue.y = this.closeBtn.y;\n        this.top.add([this.topbg, this.titlebg, this.tilteName, this.closeBtn, this.diamondvalue]);\n        this.createMiddle(width, height);\n        this.createBottom(width, 50 * this.dpr);\n        this.itemtips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ItemInfoTips"](this.scene, 150 * this.dpr, 46 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, "tips_bg", this.dpr);\n        this.itemtips.setVisible(false);\n        this.content.add(this.itemtips);\n        this.resize();\n        _super.prototype.init.call(this);\n        // this.emit("questlist");\n        this.setDataList();\n    };\n    PicaRechargePanel.prototype.setDataList = function () {\n        var _this = this;\n        if (this.gamescroll) {\n            for (var i = 0; i < 3; i++) {\n                var item = new TwoRechargeItem(this.scene, this.width, 110 * this.dpr, this.key, this.dpr, this.scale);\n                item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, function (value) {\n                    _this.buy("com.tooqing.app.60diamond", "");\n                }));\n                item.setTwoData();\n                this.gamescroll.addItem(item);\n            }\n            this.gamescroll.Sort();\n        }\n        else {\n            for (var i = 0; i < 6; i++) {\n                var item = new RechargeItem(this.scene, this.key, this.dpr, this.scale);\n                item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, function (value) {\n                    _this.buy("com.tooqing.app.60diamond", "");\n                }));\n                this.gridlayout.add(item);\n            }\n            this.gridlayout.Layout();\n        }\n    };\n    PicaRechargePanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaRechargePanel.prototype.createMiddle = function (width, height) {\n        this.middle = this.scene.make.container(undefined, false);\n        this.content.add(this.middle);\n        this.banner = new RechargeBanner(this.scene, 0, 0, 308 * this.dpr, 96 * this.dpr, this.key, "recharge_banner", this.scale);\n        this.middle.add(this.banner);\n        var fixedHeight = 150 * this.dpr;\n        var mHeight = height - fixedHeight;\n        var defaultHeight = 640 * this.dpr - fixedHeight;\n        if (mHeight < defaultHeight) {\n            this.middle.setSize(width, mHeight);\n            this.middle.y = this.top.y + this.top.height + this.middle.height * 0.5;\n            this.banner.y = -this.middle.height * 0.5 + this.banner.height * 0.5;\n            var topline = this.scene.make.image({ key: this.key, frame: "recharge_division" });\n            topline.y = this.banner.y + this.banner.height * 0.5 + topline.height * 0.5;\n            this.middle.add(topline);\n            var scrollHeight = mHeight - 110 * this.dpr;\n            var scrolly = scrollHeight * 0.5 + topline.y + topline.height * 0.5;\n            this.gamescroll = this.createGameScroll(0, scrolly, width, scrollHeight);\n            this.middle.add(this.gamescroll);\n        }\n        else {\n            this.middle.setSize(width, 500 * this.dpr);\n            this.middle.y = 28 * this.dpr;\n            this.banner.y = -this.middle.height * 0.5 + this.banner.height * 0.5 + 3 * this.dpr;\n            var lineposy = this.banner.y + this.banner.height * 0.5 - this.dpr;\n            for (var i = 0; i < 4; i++) {\n                var topline = this.scene.make.image({ key: this.key, frame: "recharge_division" });\n                topline.y = lineposy + topline.height * 0.5;\n                lineposy += 131 * this.dpr;\n                this.middle.add(topline);\n            }\n            this.gridlayout = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["GridLayoutGroup"](this.scene, 0, 0, {\n                cellSize: new Phaser.Math.Vector2(149 * this.dpr, 110 * this.dpr),\n                space: new Phaser.Math.Vector2(10 * this.dpr, 21 * this.dpr),\n                startAxis: gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["AxisType"].Horizontal,\n                constraint: gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ConstraintType"].FixedColumnCount,\n                constraintCount: 2,\n                alignmentType: gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["AlignmentType"].UpperCenter\n            });\n            this.gridlayout.y = this.banner.y + this.banner.height * 0.5 + 21 * this.dpr;\n            this.middle.add(this.gridlayout);\n        }\n    };\n    PicaRechargePanel.prototype.createBottom = function (width, height) {\n        this.bottom = this.scene.make.container(undefined, false);\n        this.bottom.setSize(width, height);\n        this.content.add(this.bottom);\n        this.bottom.y = this.scaleHeight * 0.5 - height * 0.5;\n        var bottombg = this.scene.make.image({ key: this.key, frame: "recharge_nav_bg" });\n        this.bottom.add(bottombg);\n        var tabCapW = 102 * this.dpr;\n        var tabCapH = 41 * this.dpr;\n        var offsetx = 15 * this.dpr;\n        var topStyle = utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].blueStyle(this.dpr, 15);\n        this.checkBox = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["CheckboxGroup"]();\n        var topCategorys = [TabButtonType.GIFT, TabButtonType.PRIVILEGE, TabButtonType.DIAMONO];\n        var topBtnTexts = [utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("recharge.gift"), utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("recharge.privilege"), utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("recharge.diamond")];\n        var bottomPosX = -(tabCapW * topCategorys.length + offsetx * (topCategorys.length - 1)) * 0.5;\n        for (var i = 0; i < topCategorys.length; i++) {\n            var category = topCategorys[i];\n            var button = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["TabButton"](this.scene, this.key, "recharge_tab_uncheck", "recharge_tab_check", topBtnTexts[i]);\n            button.setTextStyle(topStyle);\n            button.setData("data", category);\n            button.setSize(tabCapW, tabCapH);\n            button.setFontStyle("bold");\n            button.y = 1 * this.dpr;\n            button.x = bottomPosX + tabCapW * 0.5;\n            bottomPosX += tabCapW + offsetx;\n            this.checkBox.appendItem(button);\n            this.bottom.add(button);\n        }\n        this.checkBox.on("selected", this.onTabButtonHandler, this);\n        this.checkBox.selectIndex(0);\n    };\n    PicaRechargePanel.prototype.createGameScroll = function (x, y, width, height) {\n        var gamescroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            zoom: this.scale,\n            align: 2,\n            orientation: 0,\n            dpr: this.dpr,\n            space: 20 * this.dpr,\n            selfEvent: true,\n            padding: { top: 10 * this.dpr, bottom: 10 * this.dpr }\n        });\n        return gamescroll;\n    };\n    PicaRechargePanel.prototype.buy = function (productId, productName) {\n        if (window.IAP) {\n            window.IAP.buy(productId, function () {\n                alert("\\u8D2D\\u4E70" + productName + "\\u6210\\u529F\\uFF0C\\u7B49\\u5F85\\u53D1\\u8D27\\uFF01");\n            });\n        }\n    };\n    PicaRechargePanel.prototype.onTabButtonHandler = function (button) {\n    };\n    PicaRechargePanel.prototype.OnClosePanel = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICARECHARGE_NAME + "_hide");\n    };\n    PicaRechargePanel.prototype.onPointerUpHandler = function (gameobject) {\n    };\n    PicaRechargePanel.prototype.onSendHandler = function (id) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICARECHARGE_NAME + "_questwork", id);\n    };\n    PicaRechargePanel.prototype.onItemInfoTips = function (data, isdown, pos) {\n        this.itemtips.visible = isdown;\n        this.itemtips.x = pos.x * this.scale - this.content.x;\n        this.itemtips.y = pos.y * this.scale - this.content.y - 30 * this.dpr;\n        this.itemtips.setText(this.getDesText(data));\n    };\n    PicaRechargePanel.prototype.getDesText = function (data) {\n        if (!data)\n            data = { "sellingPrice": true, tradable: false };\n        var text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.attri", { "name": "" + data.name, "value": data.neededCount });\n        return text;\n    };\n    return PicaRechargePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\nvar RechargeItem = /** @class */ (function (_super) {\n    __extends(RechargeItem, _super);\n    function RechargeItem(scene, key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.giftbags = [];\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        var width = 149 * dpr, height = 108 * dpr;\n        _this.setSize(width, height);\n        _this.bg = _this.scene.make.image({ key: key, frame: "recharge_diamond_bg" });\n        _this.add(_this.bg);\n        _this.title = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, 0, 0, "", { color: "#ffffff", fontSize: 14 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT })\n            .setOrigin(0.5);\n        _this.title.x = 0;\n        _this.title.y = -height * 0.5 + 10 * dpr;\n        _this.add(_this.title);\n        _this.imgicon = _this.scene.make.image({ key: key, frame: "recharge_diamond_1.99" });\n        _this.add(_this.imgicon);\n        _this.imgicon.x = -_this.width * 0.5 + 48 * dpr;\n        _this.imgicon.y = 2 * dpr;\n        _this.tipsbg = _this.scene.make.image({ key: key, frame: "recharge_first_purchase" });\n        _this.add(_this.tipsbg);\n        _this.tipsbg.x = _this.width * 0.5 - _this.tipsbg.width * 0.5 + 3 * dpr;\n        _this.tipsbg.y = -_this.height * 0.5 + _this.tipsbg.height * 0.5 + 23 * dpr;\n        _this.tipsvalue = _this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].whiteStyle(dpr) });\n        _this.tipsvalue.setOrigin(0, 0.5);\n        _this.add(_this.tipsvalue);\n        _this.tipsvalue.x = -_this.width * 0.5 + 3 * dpr;\n        _this.tipsvalue.y = _this.tipsbg.y - 7 * dpr;\n        _this.tipstext = _this.scene.make.text({ text: "First Purchase", style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].whiteStyle(dpr, 11) });\n        _this.tipstext.setOrigin(1, 0.5);\n        _this.add(_this.tipstext);\n        // this.tipstext.x = this.tipsvalue.x - 2 * dpr;\n        // this.tipstext.y = this.tipsvalue.y + 24 * dpr;\n        _this.tipstext.x = _this.width * 0.5 - 3 * dpr;\n        _this.tipstext.y = _this.tipsbg.y - 3 * dpr;\n        _this.purchaseBtn = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ThreeSliceButton"](scene, 63 * dpr, 22 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common3Key, utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].threeYellowNormal, utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].threeYellowNormal, "$ 1.99");\n        _this.purchaseBtn.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].brownishStyle(dpr));\n        _this.purchaseBtn.setFontStyle("bold");\n        _this.add(_this.purchaseBtn);\n        _this.purchaseBtn.x = _this.width * 0.5 - _this.purchaseBtn.width * 0.5 - 10 * dpr;\n        _this.purchaseBtn.y = _this.height * 0.5 - _this.purchaseBtn.height * 0.5 - 9 * dpr;\n        _this.purchaseBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), _this.onSendHandler, _this);\n        _this.setRechargeData(undefined);\n        return _this;\n    }\n    RechargeItem.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    RechargeItem.prototype.setRechargeData = function (data) {\n        this.rechargeData = data;\n        this.title.text = "[color=#FFE400]" + 100 + "[/color]" + "Diamond";\n        this.setPropItems();\n    };\n    RechargeItem.prototype.setPropItems = function () {\n        for (var _i = 0, _a = this.giftbags; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n            item.enable = false;\n        }\n        var matrr = [];\n        var posx = 0;\n        if (matrr.length === 1) {\n            if (this.addimg)\n                this.addimg.visible = false;\n            posx = this.width * 0.5 - 55 * this.dpr;\n        }\n        else {\n            posx += 20 * this.dpr;\n            if (!this.addimg) {\n                this.addimg = this.scene.make.image({ key: this.key, frame: "recharge_diamond_gift" });\n                this.add(this.addimg);\n            }\n            else {\n                this.addimg.visible = true;\n            }\n        }\n        for (var i = 0; i < matrr.length; i++) {\n            var item = void 0;\n            var tempdata = matrr[i];\n            if (i < this.giftbags.length) {\n                item = this.giftbags[i];\n            }\n            else {\n                item = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["PropItem"](this.scene, this.key, "recharge_diamond_gift", this.dpr, this.zoom);\n                item.enable = true;\n                this.giftbags.push(item);\n                this.add(item);\n            }\n            item.setItemData(tempdata);\n            item.visible = true;\n            item.x = posx + item.width * 0.5;\n            item.y = 0;\n            posx += item.width + 20 * this.dpr;\n        }\n    };\n    RechargeItem.prototype.onSendHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.runWith([100]);\n    };\n    return RechargeItem;\n}(Phaser.GameObjects.Container));\nvar TwoRechargeItem = /** @class */ (function (_super) {\n    __extends(TwoRechargeItem, _super);\n    function TwoRechargeItem(scene, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.bottombg = _this.scene.make.image({ key: key, frame: "recharge_division" });\n        _this.setSize(width, height);\n        _this.add(_this.bottombg);\n        _this.bottombg.y = _this.height * 0.5 + _this.bottombg.height * 0.5 - 1 * dpr;\n        return _this;\n    }\n    TwoRechargeItem.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    TwoRechargeItem.prototype.setTwoData = function () {\n        for (var i = 0; i < 2; i++) {\n            var item = new RechargeItem(this.scene, this.key, this.dpr, this.scale);\n            item.setHandler(this.sendHandler);\n            this.add(item);\n            item.x = -item.width * 0.5 - 5 * this.dpr + i * (item.width + 10 * this.dpr);\n        }\n    };\n    return TwoRechargeItem;\n}(Phaser.GameObjects.Container));\nvar RechargeBanner = /** @class */ (function (_super) {\n    __extends(RechargeBanner, _super);\n    function RechargeBanner(scene, x, y, width, height, key, frame, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.key = key;\n        _this.frame = frame;\n        _this.banners = [];\n        _this.setSize(width, height);\n        _this.setBannerData();\n        _this.enable = true;\n        return _this;\n    }\n    RechargeBanner.prototype.setBannerData = function () {\n        var x = 0;\n        for (var i = 0; i < 6; i++) {\n            var img = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, 0, this.key, this.frame);\n            this.banners.push(img);\n            img.x = x;\n            x += img.width + 10 * this.dpr;\n        }\n        this.add(this.banners);\n    };\n    RechargeBanner.prototype.onPointerMoveHandler = function (pointer) {\n        _super.prototype.onPointerMoveHandler.call(this, pointer);\n        if (this.banners.length > 1) {\n            this.moveBanner(pointer.deltaX);\n        }\n    };\n    RechargeBanner.prototype.onPointerUpHandler = function (pointer) {\n        if (!this.interactiveBoo) {\n            if (this.soundGroup && this.soundGroup.disabled)\n                this.playSound(this.soundGroup.disabled);\n            return;\n        }\n        if (this.mTweenBoo) {\n            this.tween(false, this.pointerUp.bind(this, pointer));\n        }\n        else {\n            this.pointerUp(pointer);\n        }\n    };\n    RechargeBanner.prototype.moveBanner = function (detla) {\n        for (var _i = 0, _a = this.banners; _i < _a.length; _i++) {\n            var img = _a[_i];\n            img.x += detla;\n        }\n    };\n    RechargeBanner.prototype.tween = function (left, callback) {\n        var _this = this;\n        this.mTweening = true;\n        if (this.mTween) {\n            this.mTween.stop();\n            this.mTween.remove();\n            this.mTween = undefined;\n        }\n        this.mTween = this.scene.tweens.add({\n            targets: this.list,\n            duration: 45,\n            ease: "Linear",\n            x: 0,\n            onComplete: function () {\n                _this.tweenComplete();\n                if (callback)\n                    callback();\n            },\n            onCompleteParams: [this]\n        });\n    };\n    RechargeBanner.prototype.tweenComplete = function () {\n        this.mTweening = false;\n        if (this.mTween) {\n            this.mTween.stop();\n            this.mTween.remove();\n            this.mTween = undefined;\n        }\n    };\n    return RechargeBanner;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["SoundButton"]));\nvar TabButtonType;\n(function (TabButtonType) {\n    TabButtonType[TabButtonType["GIFT"] = 0] = "GIFT";\n    TabButtonType[TabButtonType["PRIVILEGE"] = 1] = "PRIVILEGE";\n    TabButtonType[TabButtonType["DIAMONO"] = 2] = "DIAMONO";\n})(TabButtonType || (TabButtonType = {}));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaRecharge/PicaRechargePanel.ts?')},"./src/pica/render/ui/PicaRewardTip/PicaRewardTipPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaRewardTipPanel", function() { return PicaRewardTipPanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaRewardTipPanel = /** @class */ (function (_super) {\n    __extends(PicaRewardTipPanel, _super);\n    function PicaRewardTipPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        _this.mTips = []; // op_client.IOP_VIRTUAL_WORLD_REQ_CLIENT_SHOW_REWARD_TIPS\n        _this.showingList = [];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAREWARDTIP_NAME;\n        return _this;\n    }\n    PicaRewardTipPanel.prototype.show = function () {\n        _super.prototype.show.call(this);\n        if (this.mInitialized) {\n            if (this.showingList.length === 0)\n                this.showAward();\n        }\n        this.mScene.layerManager.addToLayer(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["MainUIScene"].LAYER_TOOLTIPS, this);\n    };\n    PicaRewardTipPanel.prototype.appendAward = function (tips) {\n        // const award = new AwardItem(this.scene);\n        // this.add(award);\n        this.mTips.push(tips);\n        this.show();\n    };\n    PicaRewardTipPanel.prototype.addAward = function () {\n    };\n    PicaRewardTipPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.mTips) {\n            this.mTips = [];\n        }\n    };\n    PicaRewardTipPanel.prototype.preload = function () {\n        this.addImage(this.key, "reaward_tips/bg.png");\n        _super.prototype.preload.call(this);\n    };\n    PicaRewardTipPanel.prototype.init = function () {\n        this.setSize(20, 20);\n        _super.prototype.init.call(this);\n        this.y = 250 * this.dpr;\n    };\n    PicaRewardTipPanel.prototype.showAward = function () {\n        if (this.mTips.length < 1) {\n            return;\n        }\n        if (!this.scene) {\n            return;\n        }\n        if (this.showingList.length >= 3) {\n            return;\n        }\n        for (var _i = 0, _a = this.showingList; _i < _a.length; _i++) {\n            var item = _a[_i];\n            // item.y -= 30 * this.dpr;\n            item.beUp();\n        }\n        // TODO \n        var award = new AwardItem(this.scene, this.key, this.dpr, this.scale);\n        award.once("destroy", this.onDestroyHanlder, this);\n        award.once("show", this.onAwardItemShowHandler, this);\n        award.setProp(this.mTips.pop());\n        // award.y = -(this.showingList.length * 30 * this.dpr);\n        this.add(award);\n        this.showingList.push(award);\n    };\n    PicaRewardTipPanel.prototype.onAwardItemShowHandler = function () {\n        this.showAward();\n    };\n    PicaRewardTipPanel.prototype.onDestroyHanlder = function (item) {\n        var index = this.showingList.indexOf(item);\n        if (index > -1) {\n            this.showingList.splice(index, 1);\n        }\n        this.showAward();\n    };\n    return PicaRewardTipPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BasePanel"]));\n\nvar AwardItem = /** @class */ (function (_super) {\n    __extends(AwardItem, _super);\n    function AwardItem(scene, key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.mBg = _this.scene.make.image({\n            key: key,\n        }, false);\n        _this.mScaleRatio = dpr * zoom;\n        _this.mImage = new gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](_this.scene, 0, 0);\n        _this.mImage.setScale(dpr);\n        _this.mImage.setOrigin(0.5, 1);\n        _this.mImage.y = _this.mBg.height * zoom / 2;\n        _this.mLabel = _this.scene.make.text({\n            x: _this.mBg.width * _this.originX - 6 * _this.mScaleRatio,\n            style: {\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n                fontSize: 11 * _this.mScaleRatio,\n                color: "#00FF00"\n            }\n        }, false).setOrigin(1, 0.5);\n        // this.add([this.mBg, this.mImage, this.mLabel]);\n        _this.addAt(_this.mBg, 0);\n        _this.add([_this.mImage, _this.mLabel]);\n        _this.setSize(_this.mBg.width * zoom, _this.mBg.height * zoom);\n        return _this;\n    }\n    AwardItem.prototype.setProp = function (award) {\n        if (!award) {\n            return;\n        }\n        if (award.display && award.display.texturePath) {\n            this.mImage.load(utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getOsdRes(award.display.texturePath));\n        }\n        this.mLabel.setText(award.text);\n        this.showTween();\n    };\n    AwardItem.prototype.showTween = function () {\n        var _this = this;\n        var self = this;\n        this.scene.tweens.add({\n            targets: this,\n            props: {\n                x: "+=" + this.width * 0.3\n            },\n            ease: "Bounce.easeOut",\n            onComplete: function () {\n                _this.emit("show");\n                _this.closeDelay = setTimeout(function () {\n                    _this.closeTween();\n                }, 1000);\n            },\n            duration: 300\n        });\n    };\n    AwardItem.prototype.closeTween = function () {\n        var _this = this;\n        if (!this.scene) {\n            return;\n        }\n        this.scene.tweens.add({\n            targets: this,\n            props: {\n                y: "-=" + 50 * this.mScaleRatio,\n                alpha: "0"\n            },\n            ease: "Linear",\n            duration: 300,\n            onComplete: function () {\n                _this.destroy();\n            }\n        });\n    };\n    AwardItem.prototype.beUp = function () {\n        var _this = this;\n        clearTimeout(this.closeDelay);\n        this.scene.tweens.add({\n            targets: this,\n            props: {\n                y: "-=" + 50 * this.mScaleRatio\n            },\n            ease: "Linear",\n            duration: 300,\n            onComplete: function () {\n                _this.closeDelay = setTimeout(function () {\n                    _this.closeTween();\n                }, 1000);\n            }\n        });\n    };\n    return AwardItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaRewardTip/PicaRewardTipPanel.ts?')},"./src/pica/render/ui/PicaRoam/PicaRoamDrawPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaRoamDrawPanel", function() { return PicaRoamDrawPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaRoamDrawPanel = /** @class */ (function (_super) {\n    __extends(PicaRoamDrawPanel, _super);\n    function PicaRoamDrawPanel(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.money = 0;\n        _this.token = 0;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.init();\n        _this.setInteractive();\n        return _this;\n    }\n    PicaRoamDrawPanel.prototype.resize = function (width, height) {\n        var w = width || this.width;\n        var h = height || this.height;\n        this.setSize(w, h);\n        this.drawProgress.refreshMask();\n    };\n    PicaRoamDrawPanel.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    PicaRoamDrawPanel.prototype.init = function () {\n        this.bg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["CommonBackground"](this.scene, 0, 0, this.width, this.height, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, "roam_bg", 0x72e7fb);\n        var topbg = this.scene.make.image({ key: "roam_topic" });\n        topbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var topbg1 = this.scene.make.image({ key: "roam_stripe" });\n        topbg1.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        topbg.y = -this.height * 0.5 + topbg.height * 0.5;\n        topbg1.y = -this.height * 0.5 + topbg1.height * 0.5;\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "back_arrow", "back_arrow");\n        this.closeBtn.setPosition(-this.width * 0.5 + 21 * this.dpr, -this.height * 0.5 + 35 * this.dpr);\n        this.closeBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        var moneybg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, -this.dpr, 190 * this.dpr, 28 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_assets_bg", {\n            left: 17 * this.dpr,\n            top: 0 * this.dpr,\n            right: 17 * this.dpr,\n            bottom: 0 * this.dpr\n        });\n        moneybg.x = -moneybg.width * 0.5;\n        var moneyline = this.scene.make.image({ x: moneybg.x, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "home_assets_division" }, false);\n        this.moneyvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 26 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_silver", this.dpr, {\n            color: "#ffffff", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].NUMBER\n        });\n        this.moneyvalue.setLayout(1);\n        this.moneyvalue.x = moneybg.x - moneybg.width * 0.5 + 22 * this.dpr;\n        this.tokenvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 26 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "roam_ordinary_icon", this.dpr, {\n            color: "#ffffff", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].NUMBER\n        });\n        this.tokenvalue.setLayout(1);\n        this.tokenvalue.x = moneybg.x + 22 * this.dpr;\n        this.moneyAddBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_praise_bg", "home_praise_bg");\n        var moneyAddicon = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "home_assets_add" }, false);\n        this.moneyAddBtn.add(moneyAddicon);\n        this.moneyAddBtn.x = -this.moneyAddBtn.width * 0.5 - 4 * this.dpr;\n        this.moneyAddBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onRechargeHandler, this);\n        this.moneyCon = this.scene.make.container(undefined, false);\n        this.moneyCon.setSize(moneybg.width, moneybg.height);\n        this.moneyCon.add([moneybg, moneyline, this.moneyvalue, this.tokenvalue, this.moneyAddBtn]);\n        this.moneyCon.x = this.width * 0.5 - 20 * this.dpr;\n        this.moneyCon.y = this.closeBtn.y;\n        var previewBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.scene, 0, 0, 76 * this.dpr, 30 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "home_persons_bg", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.previewtex"), this.dpr, this.zoom, {\n            left: 20 * this.dpr, right: 20 * this.dpr, top: 0, bottom: 0\n        });\n        previewBtn.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].whiteStyle(this.dpr));\n        previewBtn.setFontStyle("bold");\n        previewBtn.x = this.width * 0.5 - previewBtn.width * 0.5 - 15 * this.dpr;\n        previewBtn.y = this.moneyCon.y + this.moneyCon.height * 0.5 + previewBtn.height * 0.5 + 15 * this.dpr;\n        previewBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onDrawPreviewHandler, this);\n        this.cloudPanel = new CloudDisplayItem(this.scene, this.width, 137 * this.dpr, this.dpr);\n        this.cloudPanel.y = this.height * 0.5 - this.cloudPanel.height * 0.5;\n        this.drawProgress = new RoamDrawProgress(this.scene, this.dpr, this.zoom);\n        this.drawProgress.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onProgressHandler));\n        this.drawProgress.y = topbg.y + topbg.height * 0.5 - 66 * this.dpr;\n        this.oneRoamItem = new RoamDrawItem(this.scene, this.dpr, this.zoom);\n        this.oneRoamItem.x = -this.oneRoamItem.width * 0.5 - 10 * this.dpr;\n        this.oneRoamItem.y = this.height * 0.5 - this.oneRoamItem.height * 0.5 - 60 * this.dpr;\n        this.oneRoamItem.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onRoamDrawHandler, ["one"]));\n        this.tenRoamItem = new RoamDrawItem(this.scene, this.dpr, this.zoom);\n        this.tenRoamItem.x = -this.oneRoamItem.x;\n        this.tenRoamItem.y = this.oneRoamItem.y;\n        this.tenRoamItem.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onRoamDrawHandler, ["ten"]));\n        this.bottomtips = this.scene.make.text({ text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.bottomtips"), style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].blackStyle(this.dpr, 14) }).setOrigin(0.5);\n        this.bottomtips.y = this.height * 0.5 - 20 * this.dpr;\n        this.add([this.bg, topbg1, topbg, this.closeBtn, this.moneyCon, previewBtn, this.cloudPanel, this.drawProgress, this.oneRoamItem, this.tenRoamItem, this.bottomtips]);\n        this.resize();\n    };\n    PicaRoamDrawPanel.prototype.setRoamDatas = function (datas) {\n        this.poolDatas = datas;\n        for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {\n            var data = datas_1[_i];\n            if (data.drawTime === 1)\n                this.oneRoamItem.setRoamData(data);\n            else {\n                this.tenRoamItem.setRoamData(data);\n                if (!data["diamond"]) {\n                    this.drawProgress.visible = true;\n                    for (var i = 0; i < data.progressAward.length; i++) {\n                        var reward = data.progressAward[i];\n                        if (!reward.received) {\n                            var intervalTime = data.progressExpireTime * 1000 - data["unixTime"];\n                            this.drawProgress.setRoadLvData(data.progress, intervalTime, i + 1, reward);\n                            break;\n                        }\n                    }\n                }\n                else {\n                    this.drawProgress.visible = false;\n                }\n            }\n        }\n    };\n    PicaRoamDrawPanel.prototype.setMoneyData = function (money, token, tokenId) {\n        var moneyframe = "home_silver";\n        var tokenframe = "roam_ordinary_icon";\n        if (tokenId === "IV0000002") {\n            moneyframe = "home_diamond";\n            tokenframe = "roam_advanced_icon";\n        }\n        this.moneyvalue.setFrameValue(money + "", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, moneyframe);\n        this.tokenvalue.setFrameValue(token + "", picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, tokenframe);\n        this.money = money;\n        this.token = token;\n        this.tokenid = tokenId;\n    };\n    PicaRoamDrawPanel.prototype.onRoamDrawHandler = function (tag, roamData) {\n        if (tag === "one") {\n            roamData["one"] = true;\n            if (!roamData["free"] && this.token < roamData.drawTime && this.money < roamData.unitPrice * roamData.drawTime) {\n                var moneyName = this.tokenid === "IV0000002" ? utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("coin.diamond") : utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("coin.coin");\n                var text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.moneytips", { name: moneyName });\n                if (this.send)\n                    this.send.runWith(["notice", text]);\n                return;\n            }\n        }\n        else if (tag === "ten") {\n            roamData["one"] = false;\n            if (!roamData["free"] && this.token < roamData.drawTime) {\n                var moneyName = this.tokenid === "IV0000002" ? utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("coin.diamond") : utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("coin.coin");\n                var moneytag = this.tokenid === "IV0000002" ? utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("coin.gold") : utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("coin.silver");\n                var tokenvalue = roamData.drawTime - this.token;\n                var value = roamData.unitPrice * tokenvalue;\n                if (value <= this.money) {\n                    var text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.paytips", { name: value + moneyName, count: tokenvalue, tag: moneytag });\n                    if (this.send)\n                        this.send.runWith(["pay", { tokenID: this.tokenid, id: roamData.id, value: value, text: text }]);\n                }\n                else {\n                    var text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.moneytips", { name: moneyName });\n                    if (this.send)\n                        this.send.runWith(["notice", text]);\n                }\n                return;\n            }\n        }\n        if (this.send)\n            this.send.runWith(["draw", roamData]);\n    };\n    PicaRoamDrawPanel.prototype.onCloseHandler = function () {\n        if (this.send)\n            this.send.runWith("close");\n    };\n    PicaRoamDrawPanel.prototype.onRechargeHandler = function () {\n    };\n    PicaRoamDrawPanel.prototype.onDrawPreviewHandler = function () {\n        if (this.send)\n            this.send.runWith("preview");\n    };\n    PicaRoamDrawPanel.prototype.onProgressHandler = function (tag, data) {\n        if (tag === "help") {\n        }\n        else if (tag === "reward") {\n            if (this.send)\n                this.send.runWith(["progressrewards", data]);\n        }\n    };\n    return PicaRoamDrawPanel;\n}(Phaser.GameObjects.Container));\n\nvar RoamDrawProgress = /** @class */ (function (_super) {\n    __extends(RoamDrawProgress, _super);\n    function RoamDrawProgress(scene, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.init();\n        return _this;\n    }\n    RoamDrawProgress.prototype.refreshMask = function () {\n        this.progreItem.refreshMask();\n    };\n    RoamDrawProgress.prototype.init = function () {\n        var progressBg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, frame: "roam_lv_bg" });\n        progressBg.y = 0;\n        this.setSize(progressBg.width, progressBg.height);\n        this.progreItem = new ProgressItem(this.scene, this.dpr, this.zoom);\n        this.progreItem.y = -13 * this.dpr;\n        this.progreTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].whiteStyle(this.dpr) }).setOrigin(0.5);\n        this.progreTex.setFontStyle("bold");\n        this.progreTex.y = this.progreItem.y;\n        this.roamLevTex = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, 0, 0, "", utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].blackStyle(this.dpr)).setOrigin(0.5);\n        this.roamLevTex.y = progressBg.height * 0.5 + 15 * this.dpr;\n        this.roamLevHelp = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon1, "icon_tips");\n        this.roamLevHelp.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onHelpHandler, this);\n        this.roamLevHelp.y = this.roamLevTex.y;\n        this.roamLevHelp.x = this.roamLevTex.x + this.roamLevTex.width * 0.5 + 15 * this.dpr;\n        this.roamLevTips = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].blackStyle(this.dpr) }).setOrigin(0.5);\n        this.roamLevTips.y = this.roamLevTex.y + 20 * this.dpr;\n        this.resetTimeTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].redStyle(this.dpr, 8) }).setOrigin(0.5);\n        this.resetTimeTex.setStroke("#ffffff", this.dpr);\n        this.resetTimeTex.y = 20 * this.dpr;\n        this.add([progressBg, this.progreItem, this.progreTex, this.roamLevTex, this.roamLevHelp, this.roamLevTips, this.resetTimeTex]);\n        this.on("pointerup", this.onRecivedRewardHandler, this);\n    };\n    RoamDrawProgress.prototype.setRoadLvData = function (progress, expireTime, index, data) {\n        this.indexed = index;\n        this.expireTime = expireTime;\n        this.roamLevTex.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.roamlv", { name: "" }) + (" [color=#FF693A][size=" + 14 * this.dpr + "][b]LV" + index + "[/b][/size][/color]");\n        progress = progress > data.targetValue ? progress = data.targetValue : progress;\n        this.progreTex.text = progress + "/" + data.targetValue;\n        this.progreItem.setProgress(progress, data.targetValue);\n        if (progress >= data.targetValue) {\n            this.setInteractive();\n        }\n        else {\n            this.disableInteractive();\n        }\n        this.roamLevTips.text = data.rewards[0].des;\n        if (expireTime > 0) {\n            this.resetTimeTex.visible = true;\n            this.resetTimeTex.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.resettips", { name: utils__WEBPACK_IMPORTED_MODULE_3__["TimeUtils"].getDataFormat(expireTime, false) });\n            this.loopTimeOut(expireTime);\n        }\n        else {\n            this.resetTimeTex.visible = false;\n        }\n        this.roamLevHelp.x = this.roamLevTex.x + this.roamLevTex.width * 0.5 + this.roamLevHelp.width * 0.5 + 20 * this.dpr;\n    };\n    RoamDrawProgress.prototype.setHandler = function (handler) {\n        this.send = handler;\n    };\n    RoamDrawProgress.prototype.onHelpHandler = function () {\n        if (!this.visible)\n            return;\n        if (this.send)\n            this.send.runWith("help");\n    };\n    RoamDrawProgress.prototype.onRecivedRewardHandler = function () {\n        if (!this.visible)\n            return;\n        if (this.send)\n            this.send.runWith(["reward", this.indexed]);\n    };\n    RoamDrawProgress.prototype.loopTimeOut = function (time) {\n        var _this = this;\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = undefined;\n        }\n        var excute = function () {\n            _this.timer = setTimeout(function () {\n                if (!_this.scene)\n                    return;\n                time -= 1000;\n                if (time > 0) {\n                    excute();\n                    _this.resetTimeTex.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.resettips", { name: utils__WEBPACK_IMPORTED_MODULE_3__["TimeUtils"].getDataFormat(time, false) });\n                }\n                else {\n                    _this.resetTimeTex.visible = false;\n                }\n            }, 1000);\n        };\n        excute();\n    };\n    return RoamDrawProgress;\n}(Phaser.GameObjects.Container));\nvar ProgressItem = /** @class */ (function (_super) {\n    __extends(ProgressItem, _super);\n    function ProgressItem(scene, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.max = 1;\n        _this.value = 0;\n        _this.animkey = "roamlv1";\n        _this.animkey2 = "roamlv2";\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.init();\n        return _this;\n    }\n    ProgressItem.prototype.init = function () {\n        this.progreimg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, frame: "roam_lv" });\n        this.setSize(this.progreimg.width, this.progreimg.height);\n        this.sprite = this.createSprite(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, this.animkey, "roam_lv_1_", [1, 6], 9, -1);\n        this.sprite2 = this.createSprite(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, this.animkey2, "roam_lv_2_", [1, 6], 9, -1);\n        this.graphic = this.scene.make.graphics(undefined, false);\n        this.graphic.clear();\n        this.graphic.fillStyle(0xfebf17, 1);\n        this.graphic.fillRect(-this.width * 0.5, 0, this.width, this.height);\n        this.imgMask = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, frame: "roam_lv" });\n        this.mask = new Phaser.Display.Masks.BitmapMask(this.scene, this.imgMask);\n        this.add([this.progreimg, this.graphic, this.sprite, this.sprite2]);\n    };\n    ProgressItem.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.imgMask.destroy(true);\n    };\n    ProgressItem.prototype.refreshMask = function () {\n        var world = this.getWorldTransformMatrix();\n        this.imgMask.x = world.tx;\n        this.imgMask.y = world.ty;\n    };\n    ProgressItem.prototype.setProgress = function (value, max) {\n        this.value = value;\n        this.max = max;\n        var radio = value / max;\n        var height = radio * this.height;\n        var y = this.height * 0.5 - height;\n        this.sprite.y = y;\n        this.sprite2.y = y;\n        this.graphic.y = y + 7 * this.dpr;\n        if (value >= max) {\n            this.progreimg.visible = true;\n            this.sprite.visible = false;\n            this.sprite2.visible = false;\n            this.graphic.visible = false;\n        }\n        else {\n            this.progreimg.visible = false;\n            this.sprite.visible = true;\n            this.sprite2.visible = true;\n            this.graphic.visible = true;\n        }\n    };\n    ProgressItem.prototype.createSprite = function (key, animkey, frame, indexs, frameRate, repeat) {\n        if (frameRate === void 0) { frameRate = 30; }\n        if (repeat === void 0) { repeat = 0; }\n        var sprite = this.scene.make.sprite({ key: key, frame: frame + "1" });\n        this.scene.anims.create({ key: animkey, frames: this.scene.anims.generateFrameNames(key, { prefix: frame + "", start: indexs[0], end: indexs[1] }), frameRate: frameRate, repeat: repeat });\n        sprite.play(animkey);\n        return sprite;\n    };\n    return ProgressItem;\n}(Phaser.GameObjects.Container));\nvar RoamDrawItem = /** @class */ (function (_super) {\n    __extends(RoamDrawItem, _super);\n    function RoamDrawItem(scene, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(158 * dpr, 77 * dpr);\n        _this.drawTips = _this.scene.make.text({\n            x: 0, y: -_this.height * 0.5 + 5 * dpr, text: "",\n            style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].blackStyle(dpr)\n        }).setOrigin(0.5);\n        _this.drawButton = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BackgroundScaleButton"](_this.scene, 158 * dpr, 65 * _this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, "roam_butt_one", "roam_butt_one_1", undefined, _this.dpr, 1, false);\n        _this.drawButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, _this.onButtonHandler, _this);\n        _this.drawButton.y = 15 * dpr;\n        _this.add([_this.drawTips, _this.drawButton]);\n        return _this;\n    }\n    RoamDrawItem.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    RoamDrawItem.prototype.setRoamData = function (data) {\n        this.roamData = data;\n        var normal = data.drawTime === 1 ? "roam_butt_one" : "roam_butt_ten";\n        var down = data.drawTime === 1 ? "roam_butt_one_1" : "roam_butt_ten_1";\n        if (data.tokenId === "IV0000002") {\n            normal = data.drawTime === 1 ? "roam_diamond_butt_one" : "roam_diamond_butt_ten";\n            down = data.drawTime === 1 ? "roam_diamond_butt_one_1" : "roam_diamond_butt_ten_1";\n        }\n        this.drawButton.setFrameNormal(normal, down);\n        if (data["free"]) {\n            this.drawTips.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.drawfreetips");\n            this.drawTips.visible = true;\n        }\n        else {\n            if (data.nextFreeTime !== undefined) {\n                var interval = data.nextFreeTime * 1000 - data["unixTime"];\n                if (interval > 0) {\n                    this.drawTips.visible = true;\n                    this.drawTips.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.endtips", { name: utils__WEBPACK_IMPORTED_MODULE_3__["TimeUtils"].getDataFormat(interval, false) });\n                    this.loopTimeOut(interval);\n                }\n                else {\n                    this.drawTips.visible = true;\n                    this.drawTips.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.drawfreetips");\n                }\n            }\n            else {\n                this.drawTips.visible = false;\n            }\n        }\n    };\n    RoamDrawItem.prototype.onButtonHandler = function () {\n        if (this.send)\n            this.send.runWith(this.roamData);\n    };\n    RoamDrawItem.prototype.loopTimeOut = function (time) {\n        var _this = this;\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = undefined;\n        }\n        var excute = function () {\n            _this.timer = setTimeout(function () {\n                if (!_this.scene)\n                    return;\n                time -= 1000;\n                if (time > 0) {\n                    _this.drawTips.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.endtips", { name: utils__WEBPACK_IMPORTED_MODULE_3__["TimeUtils"].getDataFormat(time, false) });\n                    excute();\n                }\n                else {\n                    _this.drawTips.text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.drawfreetips");\n                    _this.roamData["free"] = true;\n                }\n            }, 1000);\n        };\n        excute();\n    };\n    return RoamDrawItem;\n}(Phaser.GameObjects.Container));\nvar CloudDisplayItem = /** @class */ (function (_super) {\n    __extends(CloudDisplayItem, _super);\n    function CloudDisplayItem(scene, width, height, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.setSize(width, height);\n        _this.init();\n        return _this;\n    }\n    CloudDisplayItem.prototype.init = function () {\n        var bottomY = this.height * 0.5;\n        this.left_in = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, frame: "rome_cloud_right_3" });\n        this.left_in.x = -this.width * 0.5 + this.left_in.width;\n        this.left_in.y = bottomY - this.left_in.height * 0.5 - 23 * this.dpr;\n        this.center = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, frame: "rome_cloud_center" });\n        this.center.y = bottomY - this.center.height * 0.5;\n        this.right_in = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, frame: "rome_cloud_left_2" });\n        this.right_in.x = this.width * 0.5 - this.right_in.width * 0.5 - 7 * this.dpr;\n        this.right_in.y = bottomY - this.right_in.height * 0.5 - 30 * this.dpr;\n        this.left_out = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, frame: "rome_cloud_right_2" });\n        this.left_out.x = -this.width * 0.5 + this.left_out.width * 0.5;\n        this.left_out.y = bottomY - this.left_out.height * 0.5;\n        this.right_out = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, frame: "rome_cloud_left_1" });\n        this.right_out.x = this.width * 0.5 - this.right_out.width * 0.5;\n        this.right_out.y = bottomY - this.right_out.height * 0.5;\n        this.right_out_2 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, frame: "rome_cloud_right_1" });\n        this.right_out_2.x = -this.width * 0.5 + this.right_out_2.width * 0.5 + 48 * this.dpr;\n        this.right_out_2.y = bottomY - this.right_out_2.height * 0.5;\n        this.add([this.left_in, this.center, this.right_in, this.left_out, this.right_out, this.right_out_2]);\n    };\n    return CloudDisplayItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaRoam/PicaRoamDrawPanel.ts?')},"./src/pica/render/ui/PicaRoam/PicaRoamEffectOnePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaRoamEffectOnePanel", function() { return PicaRoamEffectOnePanel; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar PicaRoamEffectOnePanel = /** @class */ (function (_super) {\n    __extends(PicaRoamEffectOnePanel, _super);\n    function PicaRoamEffectOnePanel(scene, width, height, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.isOne = true;\n        _this.loopTimes = 0;\n        _this.setSize(width, height);\n        _this.init();\n        _this.setInteractive();\n        return _this;\n    }\n    PicaRoamEffectOnePanel.prototype.init = function () {\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0, 1);\n        this.blackGraphic.fillRect(-this.width * 0.5, -this.height * 0.5, this.width * 2, this.height * 2);\n        this.blackGraphic.visible = false;\n        this.blackGraphic.alpha = 0;\n        this.video = this.scene.make.video({ key: "roamone" });\n        this.video.on("complete", this.onCompleteHandler, this);\n        this.add([this.video, this.blackGraphic]);\n    };\n    PicaRoamEffectOnePanel.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    PicaRoamEffectOnePanel.prototype.setRewardDatas = function (datas, one) {\n        this.rewardDatas = datas;\n        this.isOne = one;\n        if (one) {\n            if (this.video.getVideoKey() !== "roamone")\n                this.video.changeSource("roamone", true);\n            else\n                this.video.play();\n        }\n        else {\n            if (this.video.getVideoKey() !== "roamtenrepead")\n                this.video.changeSource("roamtenrepead", true, false);\n            else\n                this.video.play();\n            this.loopTimes = 1;\n        }\n        this.setVideoSize();\n        this.video.visible = true;\n        this.blackGraphic.visible = false;\n    };\n    PicaRoamEffectOnePanel.prototype.play = function () {\n        if (this.video)\n            this.video.play(false);\n    };\n    PicaRoamEffectOnePanel.prototype.onCompleteHandler = function () {\n        if (!this.isOne && this.loopTimes > 0) {\n            this.loopTimes--;\n            if (this.loopTimes === 0) {\n                this.video.changeSource("roamreward", true, false);\n            }\n            else\n                this.video.play();\n            return;\n        }\n        if (this.send)\n            this.send.runWith("compl");\n        this.blackGraphic.alpha = 0;\n        this.blackGraphic.visible = true;\n        utils__WEBPACK_IMPORTED_MODULE_0__["UIHelper"].playAlphaTween(this.scene, this.blackGraphic, 0, 1);\n    };\n    PicaRoamEffectOnePanel.prototype.setVideoSize = function () {\n        this.video.scale = 1;\n        var scaleX = this.width / this.video.displayWidth;\n        var scaleY = this.height / this.video.displayHeight;\n        this.video.scale = scaleX > scaleY ? scaleX : scaleY;\n    };\n    return PicaRoamEffectOnePanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaRoam/PicaRoamEffectOnePanel.ts?')},"./src/pica/render/ui/PicaRoam/PicaRoamListPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaRoamListPanel", function() { return PicaRoamListPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaRoamListPanel = /** @class */ (function (_super) {\n    __extends(PicaRoamListPanel, _super);\n    function PicaRoamListPanel(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.poolsStatus = new Map();\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.init();\n        return _this;\n    }\n    PicaRoamListPanel.prototype.resize = function (width, height) {\n        var w = width || this.width;\n        var h = height || this.height;\n        this.setSize(w, h);\n        this.mGameGrid.resetMask();\n    };\n    PicaRoamListPanel.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    PicaRoamListPanel.prototype.init = function () {\n        var _this = this;\n        var conWdith = 340 * this.dpr;\n        var conHeight = 455 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.content.setInteractive();\n        this.add(this.content);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, conWdith, conHeight, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon1, "bg", {\n            left: 30 * this.dpr,\n            top: 30 * this.dpr,\n            bottom: 30 * this.dpr,\n            right: 30 * this.dpr,\n        });\n        var posY = -conHeight * 0.5;\n        this.titlebg = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon1, frame: "title" });\n        this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titlebg.y = posY + 3 * this.dpr;\n        this.titleTex = this.scene.make.text({ x: 0, y: this.titlebg.y + 2 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.title"), style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].titleYellowStyle_m(this.dpr) }).setOrigin(0.5);\n        this.titleTex.setFontStyle("bold");\n        this.titleTex.setResolution(this.dpr);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "close", "close");\n        this.closeBtn.setPosition(this.bg.width * 0.5 - this.dpr * 5, -this.bg.height * 0.5 + this.dpr * 5);\n        this.closeBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        var tableConfig = {\n            x: 0,\n            y: 10 * this.dpr,\n            table: {\n                width: conWdith - 10 * this.dpr,\n                height: conHeight - 50 * this.dpr,\n                columns: 1,\n                cellWidth: conWdith - 10 * this.dpr,\n                cellHeight: 120 * this.dpr,\n                reuseCellContainer: true,\n                zoom: this.zoom\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, index = _this.mGameGrid.items.length - cell.index, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new RoamItem(_this.scene, _this.dpr, _this.zoom);\n                }\n                cellContainer.setRoamData(item, index);\n                return cellContainer;\n            },\n        };\n        this.mGameGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.mGameGrid.layout();\n        this.mGameGrid.on("cellTap", function (cell) {\n            _this.onSelectItemHandler(cell.roamData);\n        });\n        this.content.add([this.bg, this.titlebg, this.titleTex, this.closeBtn, this.mGameGrid]);\n        this.resize();\n    };\n    PicaRoamListPanel.prototype.setRoamDataList = function (datas) {\n        this.poolsStatus.clear();\n        for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {\n            var data = datas_1[_i];\n            if (this.poolsStatus.has(data.tokenId)) {\n                var tempArr = this.poolsStatus.get(data.tokenId);\n                tempArr.push(data);\n            }\n            else {\n                var tempArr = [data];\n                this.poolsStatus.set(data.tokenId, tempArr);\n            }\n        }\n        var tempDatas = [];\n        this.poolsStatus.forEach(function (value) {\n            tempDatas.push(value[0]);\n        });\n        this.mGameGrid.setItems(tempDatas);\n        this.mGameGrid.setT(0);\n    };\n    PicaRoamListPanel.prototype.getRoamTokenDatas = function () {\n        return this.poolsStatus.get(this.tokenId);\n    };\n    PicaRoamListPanel.prototype.onSelectItemHandler = function (roamData) {\n        this.tokenId = roamData.tokenId;\n        if (this.send)\n            this.send.runWith(["roam", this.poolsStatus.get(roamData.tokenId)]);\n    };\n    PicaRoamListPanel.prototype.onCloseHandler = function () {\n        if (this.send)\n            this.send.runWith("close");\n    };\n    return PicaRoamListPanel;\n}(Phaser.GameObjects.Container));\n\nvar RoamItem = /** @class */ (function (_super) {\n    __extends(RoamItem, _super);\n    function RoamItem(scene, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(302 * dpr, 110 * dpr);\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](scene, 0, 0, _this.width, _this.height, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, "roam_list_bg", {\n            left: 7 * dpr, top: 0, right: 7 * dpr, bottom: 0\n        });\n        _this.dybg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, 0);\n        _this.nameTex = _this.scene.make.text({\n            x: _this.width * 0.5 - 20 * dpr, y: -20 * dpr, text: "",\n            style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].colorStyle("#1F95F8", 22 * dpr)\n        }).setOrigin(1, 0.5);\n        _this.nameTex.setPadding(0, 0, 3 * dpr, 0);\n        _this.nameTex.setFontStyle("bold italic");\n        _this.nameTex.setStroke("#ffffff", 2 * dpr);\n        _this.desTex = _this.scene.make.text({\n            x: _this.width * 0.5 - 10 * dpr, y: 10 * dpr, text: "",\n            style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].colorStyle("#FFFD50", 22 * dpr)\n        }).setOrigin(0.5);\n        _this.desTex.setPadding(0, 0, 3 * dpr, 0);\n        _this.desTex.setFontStyle("bold italic");\n        var gradient = _this.desTex.context.createLinearGradient(0, 0, 0, _this.desTex.height);\n        gradient.addColorStop(0, "#FFFD50");\n        gradient.addColorStop(1, "#FAB600");\n        _this.desTex.setFill(gradient);\n        _this.timebg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, 84 * dpr, 32 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, "roam_countbg", {\n            left: 3 * dpr, top: 0, right: 3 * dpr, bottom: 0\n        }, 0);\n        _this.timetips = _this.scene.make.text({ text: utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.timeendtips"), style: utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].whiteStyle(dpr, 11) }).setOrigin(0.5);\n        _this.timeTex = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, 0, 0, "", utils__WEBPACK_IMPORTED_MODULE_3__["UIHelper"].blackStyle(dpr, 8)).setOrigin(0.5);\n        (_this.timeTex).setPadding(3 * dpr, 3 * dpr, 3 * dpr, 0);\n        _this.timebg.x = -_this.width * 0.5 + _this.timebg.width * 0.5 + 3 * dpr;\n        _this.timebg.y = _this.height * 0.5 - _this.timebg.height * 0.5 - 5 * dpr;\n        _this.timetips.x = _this.timebg.x;\n        _this.timetips.y = _this.timebg.y - 8 * dpr;\n        _this.timeTex.x = _this.timebg.x;\n        _this.timeTex.y = _this.timebg.y + 10 * dpr;\n        _this.add([_this.bg, _this.dybg, _this.nameTex, _this.desTex, _this.timebg, _this.timetips, _this.timeTex]);\n        _this.desTex.visible = false;\n        _this.nameTex.visible = false;\n        return _this;\n    }\n    RoamItem.prototype.setRoamData = function (data) {\n        this.roamData = data;\n        // this.desTex.text = "";\n        // this.nameTex.text = "";\n        if (data.tokenId === "IV0000002") {\n            this.dybg.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, "roan_banner_diamond");\n            var time = 604800000;\n            this.timeTex.text = this.getTimeTex(time);\n            this.loopTimeOut(time);\n            this.timeTex["visible"] = true;\n            this.timebg.visible = true;\n        }\n        else {\n            this.dybg.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].roam, "roan_banner_silver");\n            this.timeTex["visible"] = false;\n            this.timebg.visible = false;\n        }\n    };\n    RoamItem.prototype.loopTimeOut = function (time) {\n        var _this = this;\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = undefined;\n        }\n        var excute = function () {\n            _this.timer = setTimeout(function () {\n                if (!_this.scene)\n                    return;\n                time -= 60000;\n                if (time < 0)\n                    time = 0;\n                _this.timeTex.text = _this.getTimeTex(time);\n                if (time > 0) {\n                    excute();\n                }\n            }, 60000);\n        };\n        excute();\n    };\n    RoamItem.prototype.getTimeTex = function (time) {\n        var day = Math.floor(time / 86400000);\n        var hour = Math.floor(time / 3600000) % 24;\n        var minutes = Math.floor(time / 60000) % 60;\n        var text = "";\n        if (day !== 0 || hour !== 0 || minutes !== 0) {\n            text = this.timeFormat(day) + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("timeuint.day") + this.timeFormat(hour) + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("timeuint.hour") + this.timeFormat(minutes) + utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("timeuint.minutes");\n        }\n        else {\n            text = utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("roam.timeend");\n        }\n        return text;\n    };\n    RoamItem.prototype.timeFormat = function (time) {\n        return "[color=#724DF4][size=" + 14 * this.dpr + "][b]" + time + "[/b][/size][/color]";\n    };\n    return RoamItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaRoam/PicaRoamListPanel.ts?')},"./src/pica/render/ui/PicaRoam/PicaRoamPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaRoamPanel", function() { return PicaRoamPanel; });\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\n/* harmony import */ var _PicaRoamListPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PicaRoamListPanel */ "./src/pica/render/ui/PicaRoam/PicaRoamListPanel.ts");\n/* harmony import */ var _PicaRoamDrawPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaRoamDrawPanel */ "./src/pica/render/ui/PicaRoam/PicaRoamDrawPanel.ts");\n/* harmony import */ var _PicaRoamPreviewPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaRoamPreviewPanel */ "./src/pica/render/ui/PicaRoam/PicaRoamPreviewPanel.ts");\n/* harmony import */ var _PicaRoamEffectOnePanel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./PicaRoamEffectOnePanel */ "./src/pica/render/ui/PicaRoam/PicaRoamEffectOnePanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar PicaRoamPanel = /** @class */ (function (_super) {\n    __extends(PicaRoamPanel, _super);\n    function PicaRoamPanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.isOneDraw = true;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAROAM_NAME;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].uicommon, picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].uicommon1, picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].roam, { atlasName: "roam_effect_1", folder: "roam_effect", foldType: picaRes__WEBPACK_IMPORTED_MODULE_0__["FolderType"].NORMAL }];\n        _this.textures = [{ atlasName: "roam_stripe", folder: "roam" }, { atlasName: "roam_topic", folder: "roam" },\n            { atlasName: "roamone", folder: "roam_effect", foldType: picaRes__WEBPACK_IMPORTED_MODULE_0__["FolderType"].NORMAL, uiType: picaRes__WEBPACK_IMPORTED_MODULE_0__["UILoadType"].video },\n            { atlasName: "roamtenrepead", folder: "roam_effect", foldType: picaRes__WEBPACK_IMPORTED_MODULE_0__["FolderType"].NORMAL, uiType: picaRes__WEBPACK_IMPORTED_MODULE_0__["UILoadType"].video },\n            { atlasName: "roamreward", folder: "roam_effect", foldType: picaRes__WEBPACK_IMPORTED_MODULE_0__["FolderType"].NORMAL, uiType: picaRes__WEBPACK_IMPORTED_MODULE_0__["UILoadType"].video }];\n        return _this;\n    }\n    PicaRoamPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, w, h);\n        this.setSize(w, h);\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0, 0.5);\n        this.mBackground.fillRoundedRect(-this.x, -this.y, w, h);\n        this.content.x = w * 0.5;\n        this.content.y = h * 0.5;\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n    };\n    PicaRoamPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n    };\n    PicaRoamPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n    };\n    PicaRoamPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.roamListPanel)\n            this.roamListPanel.destroy();\n        if (this.roamDrawPanel)\n            this.roamDrawPanel.destroy();\n        if (this.roamPreviewPanel)\n            this.roamPreviewPanel.destroy();\n    };\n    PicaRoamPanel.prototype.init = function () {\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        //   this.mBackground.on("pointerup", this.OnClosePanel, this);\n        this.add(this.mBackground);\n        var conWdith = 295 * this.dpr;\n        var conHeight = 405 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.add(this.content);\n        this.resize();\n        _super.prototype.init.call(this);\n    };\n    PicaRoamPanel.prototype.onShow = function () {\n        this.openRoamList();\n        if (this.tempDatas) {\n            this.roamListPanel.setRoamDataList(this.tempDatas);\n        }\n    };\n    PicaRoamPanel.prototype.setRoamDataList = function (pools) {\n        this.tempDatas = pools;\n        if (!this.mInitialized)\n            return;\n        this.roamListPanel.setRoamDataList(pools);\n        if (this.roamDrawPanel) {\n            var datas = this.roamListPanel.getRoamTokenDatas();\n            this.roamDrawPanel.setRoamDatas(datas);\n        }\n    };\n    PicaRoamPanel.prototype.openRoamEffectOnePanel = function (datas) {\n        this.showRoamEffectOnePanel();\n        this.roamEffectOnePanel.setRewardDatas(datas, this.isOneDraw);\n    };\n    PicaRoamPanel.prototype.hideRoamEffectOnePanel = function () {\n        //  this.content.remove(this.roamEffectOnePanel);\n        this.roamEffectOnePanel.visible = false;\n    };\n    PicaRoamPanel.prototype.payDrawHandler = function (id) {\n        this.render.renderEmitter(this.key + "_queryroamdraw", id);\n        this.isOneDraw = false;\n    };\n    PicaRoamPanel.prototype.setRoamTokenData = function (money, token, tokenId) {\n        if (this.roamDrawPanel)\n            this.roamDrawPanel.setMoneyData(money, token, tokenId);\n    };\n    PicaRoamPanel.prototype.openRoamList = function () {\n        this.showRoamListPanel();\n    };\n    PicaRoamPanel.prototype.showRoamListPanel = function () {\n        if (!this.roamListPanel) {\n            this.roamListPanel = new _PicaRoamListPanel__WEBPACK_IMPORTED_MODULE_4__["PicaRoamListPanel"](this.scene, this.scaleWidth, this.scaleHeight, this.dpr, this.scale);\n            this.roamListPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.onRoamListHandler));\n        }\n        this.content.add(this.roamListPanel);\n        this.roamListPanel.visible = true;\n        this.roamListPanel.resize(this.scaleWidth, this.scaleHeight);\n        this.render.renderEmitter(this.key + "_updatepools");\n    };\n    PicaRoamPanel.prototype.hideRoamListPanel = function () {\n        // this.content.remove(this.roamListPanel);\n        this.roamListPanel.visible = false;\n    };\n    PicaRoamPanel.prototype.openRoamDrawPanel = function (data) {\n        this.showRoamDrawPanel();\n        this.roamDrawPanel.setRoamDatas(data);\n        var temp = data[0];\n        var obj = { tokenId: temp.tokenId, alterId: temp.alterTokenId };\n        this.render.renderEmitter(this.key + "_updatetoken", obj);\n        this.tokenId = temp.tokenId;\n    };\n    PicaRoamPanel.prototype.showRoamDrawPanel = function () {\n        if (!this.roamDrawPanel) {\n            this.roamDrawPanel = new _PicaRoamDrawPanel__WEBPACK_IMPORTED_MODULE_5__["PicaRoamDrawPanel"](this.scene, this.scaleWidth, this.scaleHeight, this.dpr, this.scale);\n            this.roamDrawPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.onRoamDrawHandler));\n        }\n        this.content.add(this.roamDrawPanel);\n        this.roamDrawPanel.visible = true;\n        this.roamDrawPanel.resize(this.scaleWidth, this.scaleHeight);\n    };\n    PicaRoamPanel.prototype.hideRoamDrawPanel = function () {\n        // this.content.remove(this.roamDrawPanel);\n        this.roamDrawPanel.visible = false;\n    };\n    PicaRoamPanel.prototype.showRoamPreviewPanel = function () {\n        if (!this.roamPreviewPanel) {\n            this.roamPreviewPanel = new _PicaRoamPreviewPanel__WEBPACK_IMPORTED_MODULE_6__["PicaRoamPreviewPanel"](this.scene, this.scaleWidth, this.scaleHeight, this.dpr, this.scale);\n            this.roamPreviewPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.onRoamPreviewHandler));\n        }\n        this.content.add(this.roamPreviewPanel);\n        this.roamPreviewPanel.visible = true;\n        this.roamPreviewPanel.resize(this.scaleWidth, this.scaleHeight);\n    };\n    PicaRoamPanel.prototype.hideRoamPreviewPanel = function () {\n        //  this.content.remove(this.roamPreviewPanel);\n        this.roamPreviewPanel.visible = false;\n    };\n    PicaRoamPanel.prototype.showRoamEffectOnePanel = function () {\n        if (!this.roamEffectOnePanel) {\n            this.roamEffectOnePanel = new _PicaRoamEffectOnePanel__WEBPACK_IMPORTED_MODULE_7__["PicaRoamEffectOnePanel"](this.scene, this.scaleWidth, this.scaleHeight, this.dpr);\n            this.roamEffectOnePanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.onRoamEffectOneHandler));\n        }\n        this.content.add(this.roamEffectOnePanel);\n        this.roamEffectOnePanel.visible = true;\n    };\n    PicaRoamPanel.prototype.onRoamListHandler = function (tag, data) {\n        if (tag === "close") {\n            this.onCloseHandler();\n        }\n        else if (tag === "roam") {\n            this.openRoamDrawPanel(data);\n        }\n    };\n    PicaRoamPanel.prototype.onRoamDrawHandler = function (tag, data) {\n        if (tag === "close") {\n            this.hideRoamDrawPanel();\n            this.showRoamListPanel();\n        }\n        else if (tag === "draw") {\n            this.render.renderEmitter(this.key + "_queryroamdraw", data.id);\n            this.isOneDraw = data.one;\n        }\n        else if (tag === "notice") {\n            var tempdata = {\n                text: [{ text: data, node: undefined }]\n            };\n            this.render.mainPeer.showMediator(structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICANOTICE_NAME, true, tempdata);\n            return;\n        }\n        else if (tag === "pay") {\n            var content = utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].createMessageBoxConfig(data.text, utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("roam.title"), this.key, "payDrawHandler", [data.id]);\n            this.render.mainPeer.showMediator(structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICAMESSAGEBOX_NAME, true, content);\n        }\n        else if (tag === "preview") {\n            this.showRoamPreviewPanel();\n        }\n        else if (tag === "progressrewards") {\n            this.render.renderEmitter(this.key + "_queryprogressrewards", data);\n        }\n    };\n    PicaRoamPanel.prototype.onRoamPreviewHandler = function (tag, data) {\n        if (tag === "close") {\n            this.hideRoamPreviewPanel();\n        }\n    };\n    PicaRoamPanel.prototype.onRoamEffectOneHandler = function (tag) {\n        this.render.renderEmitter(this.key + "_queryrareeffect");\n    };\n    PicaRoamPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(this.key + "_hide");\n    };\n    return PicaRoamPanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_3__["PicaBasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaRoam/PicaRoamPanel.ts?')},"./src/pica/render/ui/PicaRoam/PicaRoamPreviewPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaRoamPreviewPanel", function() { return PicaRoamPreviewPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaRoamPreviewPanel = /** @class */ (function (_super) {\n    __extends(PicaRoamPreviewPanel, _super);\n    function PicaRoamPreviewPanel(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.poolsStatus = new Map();\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setInteractive();\n        _this.init();\n        return _this;\n    }\n    PicaRoamPreviewPanel.prototype.resize = function (width, height) {\n        var w = width || this.width;\n        var h = height || this.height;\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0, 0.8);\n        this.mBackground.fillRoundedRect(-w * 0.5, -h * 0.5, w, h);\n        this.setSize(w, h);\n        this.mGameGrid.resetMask();\n    };\n    PicaRoamPreviewPanel.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    PicaRoamPreviewPanel.prototype.init = function () {\n        var _this = this;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        this.add(this.mBackground);\n        var conWdith = 340 * this.dpr;\n        var conHeight = 455 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.content.setInteractive();\n        this.add(this.content);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, conWdith, conHeight, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon1, "bg", {\n            left: 30 * this.dpr,\n            top: 30 * this.dpr,\n            bottom: 30 * this.dpr,\n            right: 30 * this.dpr,\n        });\n        var posY = -conHeight * 0.5;\n        this.titlebg = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon1, frame: "title" });\n        this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titlebg.y = posY + 3 * this.dpr;\n        this.titleTex = this.scene.make.text({ x: 0, y: this.titlebg.y + 2 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("roam.previewtex"), style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].titleYellowStyle_m(this.dpr) }).setOrigin(0.5);\n        this.titleTex.setFontStyle("bold");\n        this.titleTex.setResolution(this.dpr);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "close", "close");\n        this.closeBtn.setPosition(this.bg.width * 0.5 - this.dpr * 5, -this.bg.height * 0.5 + this.dpr * 5);\n        this.closeBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCloseHandler, this);\n        var tableConfig = {\n            x: 0,\n            y: 10 * this.dpr,\n            table: {\n                width: conWdith - 10 * this.dpr,\n                height: conHeight - 50 * this.dpr,\n                columns: 1,\n                cellWidth: conWdith - 10 * this.dpr,\n                cellHeight: 38 * this.dpr,\n                reuseCellContainer: true,\n                zoom: this.zoom\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            createCellContainerCallback: function (cell, cellContainer) {\n                var scene = cell.scene, index = cell.index, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new RoamPreviewItem(_this.scene, _this.dpr, _this.zoom);\n                }\n                cellContainer.setRoamData(item, index % 2 === 0 ? 0 : 1);\n                return cellContainer;\n            },\n        };\n        this.mGameGrid = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameGridTable"](this.scene, tableConfig);\n        this.mGameGrid.layout();\n        this.mGameGrid.on("cellTap", function (cell) {\n            _this.onSelectItemHandler(cell.roamData);\n        });\n        this.content.add([this.bg, this.titlebg, this.titleTex, this.closeBtn, this.mGameGrid]);\n        this.resize();\n        this.loadPreviewJson();\n    };\n    PicaRoamPreviewPanel.prototype.setRoamDrawData = function (datas) {\n        this.mGameGrid.setItems(datas);\n        this.mGameGrid.setT(0);\n    };\n    PicaRoamPreviewPanel.prototype.loadPreviewJson = function () {\n        var jsonUrl = utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getRes("ui/roampreview/preview.json");\n        this.scene.load.json("roampreview", jsonUrl);\n        this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE, this.loadJsonComplete, this);\n        this.scene.load.start();\n    };\n    PicaRoamPreviewPanel.prototype.loadJsonComplete = function () {\n        if (this.scene.cache.json.has("roampreview")) {\n            this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE, this.loadJsonComplete, this);\n            var arr = this.scene.cache.json.get("roampreview");\n            var tempArr = [];\n            for (var i = 0; i < arr.length; i += 2) {\n                var tarr = [arr[i], arr[i + 1]];\n                tempArr.push(tarr);\n            }\n            this.setRoamDrawData(tempArr);\n        }\n    };\n    PicaRoamPreviewPanel.prototype.onSelectItemHandler = function (roamData) {\n    };\n    PicaRoamPreviewPanel.prototype.onCloseHandler = function () {\n        if (this.send)\n            this.send.runWith("close");\n    };\n    return PicaRoamPreviewPanel;\n}(Phaser.GameObjects.Container));\n\nvar RoamPreviewItem = /** @class */ (function (_super) {\n    __extends(RoamPreviewItem, _super);\n    function RoamPreviewItem(scene, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(311 * dpr, 38 * dpr);\n        _this.bg = _this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].roam, frame: "roam_preview_list" });\n        _this.bg.displayWidth = _this.width;\n        _this.leftItem = new PreviewCellItem(_this.scene, 155 * dpr, 38 * dpr, dpr);\n        _this.rightItem = new PreviewCellItem(_this.scene, 155 * dpr, 38 * dpr, dpr);\n        _this.leftItem.x = -_this.leftItem.width * 0.5;\n        _this.rightItem.x = _this.leftItem.width * 0.5;\n        _this.add([_this.bg, _this.leftItem, _this.rightItem]);\n        return _this;\n    }\n    RoamPreviewItem.prototype.setRoamData = function (data, alpha) {\n        this.leftItem.setDrawData(data[0]);\n        this.rightItem.setDrawData(data[1]);\n        this.bg.alpha = alpha;\n    };\n    return RoamPreviewItem;\n}(Phaser.GameObjects.Container));\nvar PreviewCellItem = /** @class */ (function (_super) {\n    __extends(PreviewCellItem, _super);\n    function PreviewCellItem(scene, width, height, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.init();\n        return _this;\n    }\n    PreviewCellItem.prototype.init = function () {\n        this.nameTex = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].blackStyle(this.dpr) }).setOrigin(0, 0.5);\n        this.image = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].roam, frame: "roam_preview_star_1" });\n        this.value = this.scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].blackStyle(this.dpr) }).setOrigin(0, 0.5);\n        this.add([this.nameTex, this.image, this.value]);\n    };\n    PreviewCellItem.prototype.setDrawData = function (data) {\n        this.nameTex.text = data.name;\n        if (data.star > 0) {\n            this.image.visible = true;\n            this.image.setFrame("roam_preview_star_" + data.star);\n        }\n        else {\n            this.image.visible = false;\n        }\n        this.value.text = data.prob + "%";\n        this.nameTex.x = -this.width * 0.5 + 15 * this.dpr;\n        this.image.x = this.nameTex.x + this.nameTex.width + this.image.width * 0.5 + 3 * this.dpr;\n        this.value.x = this.width * 0.5 - this.value.width - 15 * this.dpr;\n    };\n    return PreviewCellItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaRoam/PicaRoamPreviewPanel.ts?')},"./src/pica/render/ui/PicaRoomList/PicaRoomListPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaRoomListPanel", function() { return PicaRoomListPanel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoomDelegate", function() { return RoomDelegate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoomZoon", function() { return RoomZoon; });\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar PicaRoomListPanel = /** @class */ (function (_super) {\n    __extends(PicaRoomListPanel, _super);\n    function PicaRoomListPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.mSelectIndex = 0;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAROOMLIST_NAME;\n        return _this;\n    }\n    PicaRoomListPanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content.x = width >> 1;\n        this.content.y = height >> 1;\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, width, height);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        _super.prototype.resize.call(this, width, height);\n        this.setSize(width, height);\n    };\n    PicaRoomListPanel.prototype.updateRoomList = function (content) {\n        if (!content) {\n            return;\n        }\n        this.mRoomDele.updateList(content);\n    };\n    PicaRoomListPanel.prototype.updateMyRoomList = function (content) {\n        if (!content) {\n            return;\n        }\n        this.mMyRoomDele.updateList(content);\n    };\n    PicaRoomListPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.on("pointerup", this.onCloseHandler, this);\n        this.mSeachBtn.on("pointerup", this.onSeachHandler, this);\n    };\n    PicaRoomListPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.off("pointerup", this.onCloseHandler, this);\n        this.mSeachBtn.off("pointerup", this.onSeachHandler, this);\n    };\n    PicaRoomListPanel.prototype.destroy = function () {\n        if (this.mScroller)\n            this.mScroller.destroy();\n        _super.prototype.destroy.call(this);\n    };\n    PicaRoomListPanel.prototype.preload = function () {\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(this.key, "pica_roomlist/pica_roomlist.png", "pica_roomlist/pica_roomlist.json");\n        _super.prototype.preload.call(this);\n    };\n    PicaRoomListPanel.prototype.init = function () {\n        var _this = this;\n        this.setSize(this.scaleWidth, this.scaleWidth);\n        var zoom = this.mWorld.uiScale;\n        var background = this.scene.make.image({\n            key: this.key,\n            frame: "bg.png"\n        }, false).setInteractive();\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        // this.mBackGround.clear();\n        // this.mBackGround.fillStyle(0x6AE2FF, 0);\n        // this.mBackGround.fillRect(0, 0, wid * zoom, hei * zoom);\n        // this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height), Phaser.Geom.Rectangle.Contains);\n        this.mCloseBtn = this.scene.make.image({\n            key: this.key,\n            frame: "close_btn.png"\n        }, false).setInteractive();\n        this.mCloseBtn.x = background.width / 2 - this.mCloseBtn.width / 2 - 2 * this.dpr;\n        this.mCloseBtn.y = -background.height / 2 + this.mCloseBtn.height / 2;\n        this.mRoomDeleBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["TabButton"](this.scene, this.key, "checkbox_normal", "checkbox_down", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_list.visit"));\n        this.mRoomDeleBtn.x = -54 * this.dpr;\n        this.mRoomDeleBtn.y = -background.height / 2 + this.mRoomDeleBtn.displayHeight / 2 - 4 * this.dpr;\n        this.mRoomDeleBtn.setTextStyle({\n            color: "#3333cc",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n            fontSize: 14 * this.dpr\n        });\n        this.mRoomDeleBtn.setFontStyle("bold");\n        this.mMyRoomDeleBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["TabButton"](this.scene, this.key, "checkbox_normal", "checkbox_down", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_list.my"));\n        this.mMyRoomDeleBtn.x = 54 * this.dpr;\n        this.mMyRoomDeleBtn.y = this.mRoomDeleBtn.y;\n        this.mMyRoomDeleBtn.setTextStyle({\n            color: "#3333cc",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n            fontSize: 16 * this.dpr\n        });\n        this.mMyRoomDeleBtn.setFontStyle("bold");\n        var checkbox = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["CheckboxGroup"]();\n        checkbox.appendItemAll([this.mRoomDeleBtn, this.mMyRoomDeleBtn]);\n        checkbox.on("selected", this.onSelectedHandler, this);\n        this.mSelectIndex = 0;\n        this.mRoomContainer = this.scene.make.container(undefined, false);\n        this.mRoomContainer.setSize(282 * this.dpr, 362 * this.dpr);\n        this.mRoomContainer.y = -background.height / 2 + 11 * this.dpr * zoom;\n        this.mSeachBtn = this.scene.make.image({\n            key: this.key,\n            frame: "seach_btn.png"\n        }, false).setInteractive();\n        this.mSeachBtn.y = background.height / 2 - this.mSeachBtn.height / 2 + 12 * this.dpr;\n        var seachText = this.scene.make.text({\n            x: -35 * this.dpr,\n            y: this.mSeachBtn.y,\n            text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_list.seach"),\n            style: {\n                color: "#996600",\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n                fontSize: 14 * this.dpr\n            }\n        }, false).setOrigin(0.5);\n        var roomText = this.scene.make.text({\n            x: 35 * this.dpr,\n            y: this.mSeachBtn.y,\n            text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_list.room"),\n            style: {\n                color: "#996600",\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n                fontSize: 14 * this.dpr\n            }\n        }, false).setOrigin(0.5);\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(background.width, background.height);\n        this.content.add([background, this.mRoomContainer, this.mCloseBtn, this.mSeachBtn, seachText, roomText]);\n        this.add([this.mBackGround, this.content]);\n        _super.prototype.init.call(this);\n        this.resize(0, 0);\n        var w = this.mRoomContainer.width * this.scale;\n        var h = this.mRoomContainer.height * this.scale;\n        var config = {\n            x: this.scaleWidth - w / this.scale >> 1,\n            y: this.content.y - this.content.height / 2 + 20 * this.dpr * this.scale,\n            clickX: 0,\n            clickY: 0,\n            width: this.scaleWidth,\n            height: h,\n            boundPad0: -40 * this.dpr * zoom,\n            zoom: zoom,\n            dpr: this.dpr,\n            // bounds: [\n            //   this.y,\n            //   this.y - h - 100 * this.dpr + (350 * this.dpr / 2)\n            // ],\n            value: this.content.y,\n            valuechangeCallback: function (newValue) {\n                _this.mRoomContainer.y = newValue - _this.content.y - h / 2;\n            },\n            cellupCallBack: function (gameobject) {\n                gameobject.onEnterRoomHandler();\n            },\n            overminCallbackScope: this,\n            overminCallback: function () {\n                if (_this.mRoomDele && _this.mSelectIndex === 0)\n                    _this.mRoomDele.overminHandler();\n                if (!_this.mMyRoomDele && _this.mSelectIndex === 1)\n                    _this.mMyRoomDele.overminHandler();\n            }\n        };\n        this.mScroller = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BaseScroller"](this.scene, this.mRoomContainer, config);\n        this.content.add([this.mRoomDeleBtn, this.mMyRoomDeleBtn, this.mCloseBtn]);\n        checkbox.selectIndex(0);\n    };\n    PicaRoomListPanel.prototype.showRoomList = function () {\n        if (this.mMyRoomDele) {\n            this.mMyRoomDele.removeFromContainer();\n            this.mMyRoomDele.off("enterRoom", this.onEnterRoomHandler, this);\n        }\n        if (!this.mRoomDele)\n            this.mRoomDele = new RoomDelegate(this.mRoomContainer, this.mScroller, this.scene, this.mWorld, this.key, this.dpr);\n        this.mRoomDele.on("enterRoom", this.onEnterRoomHandler, this);\n        this.mRoomDele.addToContainer();\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAROOMLIST_NAME + "_getRoomList");\n    };\n    PicaRoomListPanel.prototype.showMyRoomList = function () {\n        if (this.mRoomDele) {\n            this.mRoomDele.removeFromContainer();\n            this.mRoomDele.off("enterRoom", this.onEnterRoomHandler, this);\n        }\n        if (!this.mMyRoomDele)\n            this.mMyRoomDele = new MyRoomDelegate(this.mRoomContainer, this.mScroller, this.mWorld, this.scene, this.key, this.dpr);\n        this.mMyRoomDele.on("enterRoom", this.onEnterRoomHandler, this);\n        this.mMyRoomDele.addToContainer();\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAROOMLIST_NAME + "_getMyRoomList");\n    };\n    PicaRoomListPanel.prototype.onEnterRoomHandler = function (room) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAROOMLIST_NAME + "_enterRoom", room);\n    };\n    PicaRoomListPanel.prototype.onSelectedHandler = function (gameobject) {\n        if (!(gameobject instanceof apowophaserui__WEBPACK_IMPORTED_MODULE_1__["Button"])) {\n            return;\n        }\n        this.mRoomContainer.removeAll(false);\n        switch (gameobject) {\n            case this.mRoomDeleBtn:\n                this.showRoomList();\n                this.mSelectIndex = 0;\n                break;\n            case this.mMyRoomDeleBtn:\n                this.showMyRoomList();\n                this.mSelectIndex = 1;\n                break;\n        }\n        (gameobject).setTextColor("#996600");\n        if (this.preTabButton) {\n            this.preTabButton.setTextColor("#3333cc");\n        }\n        this.preTabButton = gameobject;\n    };\n    PicaRoomListPanel.prototype.onSeachHandler = function () {\n        // TODO seach\n    };\n    PicaRoomListPanel.prototype.onCloseHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICAROOMLIST_NAME + "_close");\n    };\n    return PicaRoomListPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\nvar RoomDelegate = /** @class */ (function (_super) {\n    __extends(RoomDelegate, _super);\n    function RoomDelegate(container, scroller, scene, render, key, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        var _this = _super.call(this) || this;\n        _this.mChildPad = 0;\n        _this.mDpr = 1;\n        _this.mHeight = 0;\n        _this.mDpr = dpr;\n        _this.mRender = render;\n        _this.mChildPad = 0;\n        _this.mScene = scene;\n        _this.mContainer = container;\n        _this.mScroller = scroller;\n        _this.mKey = key;\n        _this.init();\n        return _this;\n    }\n    RoomDelegate.prototype.addListen = function () {\n        this.mPopularityRoom.on("enterRoom", this.onEnterRoomHandler, this);\n        this.mPlayerRoom.on("enterRoom", this.onEnterRoomHandler, this);\n    };\n    RoomDelegate.prototype.removeListen = function () {\n        this.mPopularityRoom.off("enterRoom", this.onEnterRoomHandler, this);\n        this.mPlayerRoom.off("enterRoom", this.onEnterRoomHandler, this);\n    };\n    RoomDelegate.prototype.updateList = function (content) {\n        this.mContent = content;\n        this.mScroller.clearInteractiveObject();\n        this.mHeight = this.activity.height;\n        this.mChildPad = this.activity.height + 14 * this.mDpr;\n        if (!this.mContent) {\n            return;\n        }\n        this.mPopularityRoom.addItem(content.popularRooms, this.mChildPad);\n    };\n    RoomDelegate.prototype.addToContainer = function () {\n        this.addListen();\n        this.refreshPos();\n    };\n    RoomDelegate.prototype.removeFromContainer = function () {\n        this.removeListen();\n        if (this.mPopularityRoom)\n            this.mPopularityRoom.clear();\n        if (this.mPlayerRoom)\n            this.mPlayerRoom.clear();\n    };\n    RoomDelegate.prototype.destroy = function () {\n        this.removeListen();\n        if (this.mPlayerRoom)\n            this.mPopularityRoom.destroy();\n        if (this.mPopularityRoom)\n            this.mPopularityRoom.destroy();\n        if (this.mScroller)\n            this.mScroller.destroy();\n        if (this.activity)\n            this.activity.destroy();\n        _super.prototype.destroy.call(this);\n    };\n    RoomDelegate.prototype.overminHandler = function () {\n        var hei = this.mPlayerRoom.updateItem();\n        if (!hei)\n            return;\n        if (this.mPlayerRoom.mRefreshRooms) {\n            this.mHeight += hei;\n            this.mContainer.add(this.mPlayerRoom.mRefreshRooms);\n            this.setUpdateScrollInteractive(this.mPlayerRoom.mRefreshRooms);\n        }\n    };\n    RoomDelegate.prototype.setUpdateScrollInteractive = function (roomList) {\n        for (var i = 0, len = roomList.length; i < len; i++) {\n            var roomItem = roomList[i];\n            this.mScroller.setInteractiveObject(roomItem);\n        }\n        this.mScroller.refreshBound(this.mHeight);\n    };\n    RoomDelegate.prototype.init = function () {\n        var _this = this;\n        this.activity = this.mScene.make.image({\n            key: this.mKey,\n            frame: "activity_title.png"\n        }, false);\n        this.activity.y = this.activity.height / 2 + 2 * this.mDpr;\n        this.mChildPad += this.activity.height / 2 + 18 * this.mDpr;\n        this.mPopularityRoom = new PopularRoomZoon(this.mScene, this.mKey, "popularity_icon.png", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_list.popularity_room"), this.mDpr, this.mRender.uiScale, 0, this.mChildPad, function (hei) {\n            if (_this.mPopularityRoom.roomList)\n                _this.setScrollInteractive(_this.mPopularityRoom.roomList);\n            _this.mHeight += hei;\n            _this.refreshPos();\n            _this.mChildPad += _this.mPopularityRoom.height;\n            _this.mPlayerRoom.addItem(_this.mContent.playerRooms, _this.mChildPad);\n        });\n        this.mPlayerRoom = new RoomZoon(this.mScene, this.mKey, "player_icon.png", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_list.player_room"), this.mDpr, this.mRender.uiScale, 0, this.mChildPad, function (hei) {\n            if (_this.mPlayerRoom.roomList)\n                _this.setScrollInteractive(_this.mPlayerRoom.roomList);\n            _this.mHeight += hei;\n            _this.refreshPos();\n            _this.mScroller.refreshBound(_this.mHeight);\n            _this.mScroller.setValue(_this.mContainer.parentContainer.y);\n        });\n        this.mScroller.refreshBound(this.activity.height);\n        this.mScroller.setValue(this.mContainer.parentContainer.y);\n    };\n    RoomDelegate.prototype.refreshPos = function () {\n        var _this = this;\n        if (this.activity) {\n            this.activity.setTexture(this.mKey, "activity_title.png");\n            this.mContainer.add(this.activity);\n        }\n        if (this.mPopularityRoom) {\n            if (this.mPopularityRoom.showList) {\n                this.mContainer.add(this.mPopularityRoom.showList);\n                if (this.mPopularityRoom.roomList) {\n                    this.mPopularityRoom.roomList.forEach(function (item) {\n                        _this.mContainer.add(item);\n                    });\n                }\n            }\n        }\n        if (this.mPlayerRoom) {\n            if (this.mPlayerRoom.showList) {\n                this.mContainer.add(this.mPlayerRoom.showList);\n                if (this.mPlayerRoom.roomList) {\n                    this.mPlayerRoom.roomList.forEach(function (item) {\n                        _this.mContainer.add(item);\n                    });\n                }\n            }\n        }\n        // const zoom: number = this.mWorld.uiScale;\n        // const baseHei: number = 362 * this.mDpr;\n        // let topY: number = this.mContainer.parentContainer.y;\n        // Logger.getInstance().log(this.mContainer.height);\n        // let bottomY: number = 0;\n        // if (this.mHeight > baseHei) {\n        //   topY = topY;\n        //   bottomY = topY - this.mHeight + baseHei - 25 * this.mDpr * zoom;\n        // } else {\n        //   topY = topY;\n        //   bottomY = topY;\n        // }\n        // this.mScroller.resize(this.mScroller.width, this.mHeight, topY, bottomY);\n    };\n    RoomDelegate.prototype.onEnterRoomHandler = function (room) {\n        this.emit("enterRoom", room);\n    };\n    RoomDelegate.prototype.setScrollInteractive = function (roomList) {\n        for (var i = 0, len = roomList.length; i < len; i++) {\n            var roomItem = roomList[i];\n            this.mScroller.setInteractiveObject(roomItem);\n        }\n        this.refreshPos();\n    };\n    return RoomDelegate;\n}(Phaser.Events.EventEmitter));\n\nvar MyRoomDelegate = /** @class */ (function (_super) {\n    __extends(MyRoomDelegate, _super);\n    function MyRoomDelegate(container, scroller, render, scene, key, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        return _super.call(this, container, scroller, scene, render, key, dpr) || this;\n    }\n    MyRoomDelegate.prototype.addListen = function () {\n        this.mMyRoom.on("enterRoom", this.onEnterRoomHandler, this);\n        this.mMyHistory.on("enterRoom", this.onEnterRoomHandler, this);\n    };\n    MyRoomDelegate.prototype.removeListen = function () {\n        this.mMyRoom.off("enterRoom", this.onEnterRoomHandler, this);\n        this.mMyHistory.off("enterRoom", this.onEnterRoomHandler, this);\n    };\n    MyRoomDelegate.prototype.addToContainer = function () {\n        this.addListen();\n        this.refreshPos();\n    };\n    MyRoomDelegate.prototype.removeFromContainer = function () {\n        this.removeListen();\n        if (this.mMyRoom)\n            this.mMyRoom.clear();\n        if (this.mMyHistory)\n            this.mMyHistory.clear();\n    };\n    MyRoomDelegate.prototype.updateList = function (content) {\n        if (!this.mMyRoom) {\n            return;\n        }\n        this.mContent = content;\n        this.mScroller.clearInteractiveObject();\n        this.mHeight = this.activity.height;\n        this.mChildPad = this.activity.height + 14 * this.mDpr;\n        this.mMyRoom.addItem(content.selfRooms, this.mChildPad);\n    };\n    MyRoomDelegate.prototype.overminHandler = function () {\n        var hei = this.mMyHistory.updateItem();\n        if (!hei)\n            return;\n        if (this.mMyHistory.mRefreshRooms) {\n            this.mHeight += hei;\n            this.mContainer.add(this.mMyHistory.mRefreshRooms);\n            this.setUpdateScrollInteractive(this.mMyHistory.mRefreshRooms);\n        }\n    };\n    MyRoomDelegate.prototype.destroy = function () {\n        if (this.mMyRoom)\n            this.mMyRoom.destroy();\n        if (this.mMyHistory)\n            this.mMyHistory.destroy();\n        _super.prototype.destroy.call(this);\n    };\n    MyRoomDelegate.prototype.refreshPos = function () {\n        var _this = this;\n        if (this.activity) {\n            this.activity.setTexture(this.mKey, "activity_title.png");\n            this.mContainer.add(this.activity);\n        }\n        if (this.mMyRoom) {\n            if (this.mMyRoom.showList) {\n                this.mContainer.add(this.mMyRoom.showList);\n                if (this.mMyRoom.roomList) {\n                    this.mMyRoom.roomList.forEach(function (item) {\n                        _this.mContainer.add(item);\n                    });\n                }\n            }\n        }\n        if (this.mMyHistory) {\n            if (this.mMyHistory.showList) {\n                this.mContainer.add(this.mMyHistory.showList);\n                if (this.mMyHistory.roomList) {\n                    this.mMyHistory.roomList.forEach(function (item) {\n                        _this.mContainer.add(item);\n                    });\n                }\n            }\n        }\n        // const zoom: number = this.mWorld.uiScale;\n        // const baseHei: number = 362 * this.mDpr;\n        // let topY: number = this.mContainer.parentContainer.y;\n        // let bottomY: number = 0;\n        // if (this.mHeight > baseHei) {\n        //   topY = topY;\n        //   bottomY = topY - this.mHeight + baseHei - 25 * this.mDpr * zoom;\n        // } else {\n        //   topY = topY;\n        //   bottomY = topY;\n        // }\n        // this.mScroller.resize(this.mScroller.width, this.mHeight, topY, bottomY);\n    };\n    MyRoomDelegate.prototype.init = function () {\n        var _this = this;\n        this.activity = this.mScene.make.image({\n            key: this.mKey,\n            frame: "activity_title.png"\n        }, false);\n        this.activity.y = this.activity.height / 2 + 2 * this.mDpr;\n        this.mChildPad = this.activity.height + 14 * this.mDpr;\n        this.mMyRoom = new MyRoomZoon(this.mScene, this.mKey, "my_room_icon.png", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_list.my_room"), this.mDpr, this.mRender.uiScale, 0, this.mChildPad, function (hei) {\n            if (_this.mMyRoom.roomList)\n                _this.setScrollInteractive(_this.mMyRoom.roomList);\n            _this.mHeight += hei;\n            _this.refreshPos();\n            _this.mChildPad += _this.mMyRoom.height;\n            _this.mMyHistory.addItem(_this.mContent.historyRooms, _this.mChildPad);\n        });\n        this.mMyHistory = new RoomZoon(this.mScene, this.mKey, "history_icon.png", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_list.my_history"), this.mDpr, this.mRender.uiScale, 0, this.mChildPad, function (hei) {\n            if (_this.mMyHistory.roomList)\n                _this.setScrollInteractive(_this.mMyHistory.roomList);\n            _this.mHeight += hei;\n            _this.refreshPos();\n            _this.mScroller.refreshBound(_this.mHeight);\n            _this.mScroller.setValue(_this.mContainer.parentContainer.y);\n        });\n        this.mScroller.refreshBound(this.activity.height);\n        this.mScroller.setValue(this.mContainer.parentContainer.y);\n    };\n    MyRoomDelegate.prototype.onEnterRoomHandler = function (room) {\n        this.emit("enterRoom", room);\n    };\n    return MyRoomDelegate;\n}(RoomDelegate));\nvar RoomZoon = /** @class */ (function (_super) {\n    __extends(RoomZoon, _super);\n    /**\n     *\n     * @param scene\n     * @param key\n     * @param iconFrame\n     * @param label\n     * @param dpr\n     * @param scrollMode 0   1 \n     * @param pad\n     * @param addCallBack\n     */\n    function RoomZoon(scene, key, iconFrame, label, dpr, uiscale, scrollMode, pad, addCallBack) {\n        if (scrollMode === void 0) { scrollMode = 0; }\n        if (pad === void 0) { pad = 0; }\n        var _this = _super.call(this) || this;\n        _this.mWidth = 0;\n        _this.mHeight = 0;\n        _this.mPad1 = 0;\n        _this.mShowList = [];\n        _this.mScene = scene;\n        _this.mKey = key;\n        _this.mDpr = dpr;\n        _this.uiScale = uiscale;\n        _this.mPad = pad;\n        _this.mOrientaction = scrollMode;\n        _this.mIconFrame = iconFrame;\n        _this.mLabel = label;\n        _this.icon = scene.make.image({\n            key: key,\n            frame: iconFrame\n        }, false);\n        _this.icon.x = scrollMode ? -254 * dpr / 2 + pad : -254 * dpr / 2;\n        _this.icon.y = scrollMode ? 0 : pad;\n        _this.text = scene.make.text({\n            text: label,\n            style: {\n                color: "#ffcc33",\n                fontSize: 16 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        _this.text.setStroke("#663300", 2 * dpr);\n        _this.text.x = scrollMode ? _this.icon.x + _this.icon.width / 2 + 4 * dpr + pad : _this.icon.x + _this.icon.width / 2 + 4 * dpr;\n        _this.text.y = scrollMode ? 0 : pad;\n        _this.mWidth = _this.icon.width;\n        _this.mHeight = _this.icon.height;\n        _this.mAddCallBack = addCallBack;\n        _this.mRooms = [];\n        return _this;\n    }\n    Object.defineProperty(RoomZoon.prototype, "showList", {\n        get: function () {\n            return this.mShowList;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RoomZoon.prototype, "roomList", {\n        get: function () {\n            return this.mRooms;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    RoomZoon.prototype.addItem = function (rooms, pad) {\n        if (pad === void 0) { pad = 0; }\n        this.icon = this.mScene.make.image({\n            key: this.mKey,\n            frame: this.mIconFrame\n        }, false);\n        this.text = this.mScene.make.text({\n            text: this.mLabel,\n            style: {\n                color: "#ffcc33",\n                fontSize: 16 * this.mDpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        this.text.setStroke("#663300", 2 * this.mDpr);\n        this.icon.x = this.mOrientaction ? -254 * this.mDpr / 2 + pad : -254 * this.mDpr / 2;\n        this.icon.y = this.mOrientaction ? 0 : pad;\n        this.text.x = this.mOrientaction ? this.icon.x + this.icon.width / 2 + 4 * this.mDpr + pad : this.icon.x + this.icon.width / 2 + 4 * this.mDpr;\n        this.text.y = this.mOrientaction ? 0 : pad;\n        this.mShowList.push(this.icon);\n        this.mShowList.push(this.text);\n        this.mHeight = this.icon.height;\n        this.mPad = pad ? pad : this.mPad;\n        this.mPad1 = pad;\n        var zoom = this.uiScale;\n        var tmpWid = this.mOrientaction ? this.mPad + pad : 0;\n        var tmpHei = 6 * this.mDpr * zoom;\n        if (rooms.length > 0) {\n            var len = rooms.length;\n            // Logger.getInstance().log("len:" + len);\n            this.mPad += this.icon.height + 12 * this.mDpr * zoom;\n            for (var i = 0; i < len; i++) {\n                if (i * (RoomItem.Hei + tmpHei) + this.mPad <= 362 * this.mDpr + RoomItem.Hei + tmpHei) {\n                    var room = new RoomItem(this.mScene, this.mKey, this.mDpr);\n                    room.setInfo(rooms[0]);\n                    rooms.splice(0, 1);\n                    room.on("enterRoom", this.onEnterRoomHandler, this);\n                    room.x = tmpWid;\n                    var roomY = i * (RoomItem.Hei + tmpHei) + this.mPad;\n                    this.mRooms.push(room);\n                    room.y = roomY;\n                    this.mHeight += RoomItem.Hei + tmpHei;\n                }\n                // this.mHeight += RoomItem.Hei + tmpHei;\n            }\n            this.mRoomDatas = rooms;\n        }\n        this.mHeight += tmpHei;\n        if (this.mAddCallBack) {\n            this.mAddCallBack(this.mHeight);\n        }\n    };\n    RoomZoon.prototype.updateItem = function () {\n        var dataList = this.mRoomDatas.slice(0, 10);\n        var len = dataList.length;\n        if (len < 1)\n            return 0;\n        var zoom = this.uiScale;\n        var tmpWid = this.mOrientaction ? this.mPad + this.mPad1 : 0;\n        var tmpHei = 6 * this.mDpr * zoom;\n        var roomLen = this.mRooms.length;\n        this.mRefreshRooms = [];\n        var hei = 0;\n        for (var i = 0; i < len; i++) {\n            var room = new RoomItem(this.mScene, this.mKey, this.mDpr);\n            room.setInfo(dataList[i]);\n            room.on("enterRoom", this.onEnterRoomHandler, this);\n            room.x = tmpWid;\n            var roomY = (i + roomLen) * (RoomItem.Hei + tmpHei) + this.mPad;\n            room.y = roomY;\n            this.mRefreshRooms.push(room);\n            this.mRooms.push(room);\n            this.mHeight += RoomItem.Hei + tmpHei;\n            hei += RoomItem.Hei + tmpHei;\n        }\n        // Logger.getInstance().log(roomLen);\n        this.mRoomDatas.splice(0, 10);\n        return hei;\n        // if (this.mAddCallBack) {\n        //   this.mAddCallBack(this.mHeight);\n        // }\n    };\n    Object.defineProperty(RoomZoon.prototype, "width", {\n        get: function () {\n            return this.mWidth;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RoomZoon.prototype, "height", {\n        get: function () {\n            return this.mHeight;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    RoomZoon.prototype.destroy = function () {\n        this.clear();\n        _super.prototype.destroy.call(this);\n    };\n    RoomZoon.prototype.clear = function () {\n        for (var _i = 0, _a = this.mRooms; _i < _a.length; _i++) {\n            var room = _a[_i];\n            room.destroy();\n        }\n        for (var _b = 0, _c = this.mShowList; _b < _c.length; _b++) {\n            var show = _c[_b];\n            show.destroy();\n        }\n        this.icon.destroy();\n        this.text.destroy();\n        this.mShowList.length = 0;\n        this.mRooms.length = 0;\n    };\n    RoomZoon.prototype.onEnterRoomHandler = function (room) {\n        this.emit("enterRoom", room);\n    };\n    return RoomZoon;\n}(Phaser.Events.EventEmitter));\n\nvar MyRoomZoon = /** @class */ (function (_super) {\n    __extends(MyRoomZoon, _super);\n    function MyRoomZoon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MyRoomZoon.prototype.addItem = function (rooms, pad) {\n        if (pad === void 0) { pad = 0; }\n        // this.clear();\n        this.icon = this.mScene.make.image({\n            key: this.mKey,\n            frame: this.mIconFrame\n        }, false);\n        this.text = this.mScene.make.text({\n            text: this.mLabel,\n            style: {\n                color: "#ffcc33",\n                fontSize: 16 * this.mDpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        this.text.setStroke("#663300", 2 * this.mDpr);\n        this.icon.x = this.mOrientaction ? -254 * this.mDpr / 2 + pad : -254 * this.mDpr / 2;\n        this.icon.y = this.mOrientaction ? 0 : pad;\n        this.text.x = this.mOrientaction ? this.icon.x + this.icon.width / 2 + 4 * this.mDpr + pad : this.icon.x + this.icon.width / 2 + 4 * this.mDpr;\n        this.text.y = this.mOrientaction ? 0 : pad;\n        this.mShowList.push(this.icon);\n        this.mShowList.push(this.text);\n        this.mHeight = this.icon.height;\n        this.mPad = pad ? pad : this.mPad;\n        var zoom = this.uiScale;\n        var tmpWid = this.mOrientaction ? this.mPad + pad : 0;\n        var tmpHei = 6 * this.mDpr * zoom;\n        if (rooms.length > 0) {\n            this.mPad += this.icon.height + 14 * this.mDpr * zoom;\n            // TODO \n            for (var i = 0; i < rooms.length; i++) {\n                var room = new MyRoomItem(this.mScene, this.mKey, this.mDpr);\n                room.setInfo(rooms[i]);\n                room.on("enterRoom", this.onEnterRoomHandler, this);\n                room.x = tmpWid;\n                var roomY = i * (RoomItem.Hei + tmpHei) + this.mPad;\n                room.y = roomY;\n                this.mRooms[i] = room;\n                this.mHeight += RoomItem.Hei + tmpHei;\n            }\n        }\n        this.mHeight += tmpHei;\n        if (this.mAddCallBack) {\n            // Logger.getInstance().log("myroomheight:" + this.mHeight);\n            this.mAddCallBack(this.mHeight);\n        }\n    };\n    return MyRoomZoon;\n}(RoomZoon));\nvar PopularRoomZoon = /** @class */ (function (_super) {\n    __extends(PopularRoomZoon, _super);\n    function PopularRoomZoon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PopularRoomZoon.prototype.addItem = function (rooms, pad) {\n        if (pad === void 0) { pad = 0; }\n        // this.clear();\n        this.icon = this.mScene.make.image({\n            key: this.mKey,\n            frame: this.mIconFrame\n        }, false);\n        this.text = this.mScene.make.text({\n            text: this.mLabel,\n            style: {\n                color: "#ffcc33",\n                fontSize: 16 * this.mDpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        this.text.setStroke("#663300", 2 * this.mDpr);\n        this.icon.x = this.mOrientaction ? -254 * this.mDpr / 2 + pad : -254 * this.mDpr / 2;\n        this.icon.y = this.mOrientaction ? 0 : pad;\n        this.text.x = this.mOrientaction ? this.icon.x + this.icon.width / 2 + 4 * this.mDpr + pad : this.icon.x + this.icon.width / 2 + 4 * this.mDpr;\n        this.text.y = this.mOrientaction ? 0 : pad;\n        this.mShowList.push(this.icon);\n        this.mShowList.push(this.text);\n        this.mHeight = this.icon.height;\n        this.mPad = pad ? pad : this.mPad;\n        var zoom = this.uiScale;\n        var tmpWid = this.mOrientaction ? this.mPad : 0;\n        var tmpHei = 6 * this.mDpr * zoom;\n        if (rooms.length > 0) {\n            this.mPad += this.icon.height + 12 * this.mDpr * zoom;\n            for (var i = 0; i < rooms.length; i++) {\n                var room = new PopularRoomItem(this.mScene, this.mKey, this.mDpr);\n                room.setInfo(rooms[i]);\n                room.setRank(i + 1);\n                room.on("enterRoom", this.onEnterRoomHandler, this);\n                room.x = tmpWid;\n                var roomY = i * (room.height + tmpHei) + this.mPad;\n                room.y = roomY;\n                this.mHeight += room.height + tmpHei;\n                this.mRooms[i] = room;\n            }\n        }\n        this.mHeight += tmpHei;\n        if (this.mAddCallBack) {\n            // Logger.getInstance().log("popheight:" + this.mHeight);\n            this.mAddCallBack(this.mHeight);\n        }\n        return this.mHeight;\n    };\n    return PopularRoomZoon;\n}(RoomZoon));\nvar RoomItem = /** @class */ (function (_super) {\n    __extends(RoomItem, _super);\n    function RoomItem(scene, key, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        var _this = _super.call(this, scene) || this;\n        _this.mKey = key;\n        _this.mDpr = dpr;\n        _this.init(key, dpr);\n        return _this;\n    }\n    RoomItem.prototype.setInfo = function (room) {\n        if (room) {\n            if (room.name)\n                this.mNickName.setText(room.name);\n            if (room.playerCount)\n                this.mCounter.setText(room.playerCount.toString());\n        }\n        this.mCounterIcon.x = this.mCounter.x - this.mCounter.width / 2 - this.mCounterIcon.width / 2 - 4 * this.mDpr;\n        // this.crateLabel(op_def.EditModeRoomPrivacy.EDIT_MODE_ROOM_LOCKED);\n        this.mRoom = room;\n    };\n    RoomItem.prototype.roomData = function () {\n        return this.mRoom;\n    };\n    RoomItem.prototype.onEnterRoomHandler = function (pointer) {\n        if (this.mRoom) {\n            this.emit("enterRoom", this.mRoom.roomId);\n        }\n    };\n    RoomItem.prototype.init = function (key, dpr) {\n        this.mBackground = this.scene.make.image({\n            key: key,\n            frame: "room_gray.png"\n        }, false).setInteractive();\n        this.setSize(this.mBackground.width, this.mBackground.height);\n        RoomItem.Hei = this.mBackground.height;\n        this.mNickName = this.scene.make.text({\n            style: {\n                color: "#000000",\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n                fontSize: 14 * dpr\n            }\n        }, false);\n        this.mNickName.x = -this.width / 2 + 12 * dpr;\n        this.mNickName.y = -(this.mNickName.height) / 2;\n        this.mCounterIcon = this.scene.make.image({\n            key: picaRes__WEBPACK_IMPORTED_MODULE_5__["UIAtlasKey"].commonKey,\n            frame: "home_persons"\n        }, false);\n        this.mCounter = this.scene.make.text({\n            style: {\n                color: "#000000",\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n                fontSize: 14 * dpr\n            }\n        }, false).setOrigin(0.5);\n        this.mCounter.x = this.width / 2 - 23 * dpr;\n        this.add([this.mBackground, this.mNickName, this.mCounterIcon, this.mCounter]);\n    };\n    RoomItem.prototype.crateLabel = function (state) {\n        // TODO \n        var frame = "";\n        var text = "";\n        if (state === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_def"].EditModeRoomPrivacy.EDIT_MODE_ROOM_LOCKED) {\n            frame = "passworld_label.png";\n            text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_list.password");\n        }\n        else if (state === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_def"].EditModeRoomPrivacy.EDIT_MODE_ROOM_PRIVATE) {\n            frame = "close_label.png";\n            text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("room_list.close");\n        }\n        if (frame === "" || text === "") {\n            return;\n        }\n        this.mLabelImg = this.scene.make.image({\n            key: this.mKey,\n            frame: frame\n        }, false);\n        this.mLabelText = this.scene.make.text({\n            text: text,\n            style: {\n                color: "#666666",\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT,\n                fontSize: 12 * this.mDpr\n            }\n        }, false).setOrigin(0, 0.5);\n        this.add([this.mLabelImg, this.mLabelText]);\n        this.mLabelImg.x = this.width / 2 - 85 * this.mDpr;\n        this.mLabelText.x = this.mLabelImg.x - 7 * this.mDpr;\n    };\n    return RoomItem;\n}(Phaser.GameObjects.Container));\nvar MyRoomItem = /** @class */ (function (_super) {\n    __extends(MyRoomItem, _super);\n    function MyRoomItem(scene, key, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        return _super.call(this, scene, key, dpr) || this;\n    }\n    MyRoomItem.prototype.init = function (key, dpr) {\n        _super.prototype.init.call(this, key, dpr);\n        if (this.mBackground) {\n            this.mBackground.setFrame("room_yellow.png");\n        }\n        if (this.mNickName) {\n            this.mNickName.setColor("#663300");\n            this.mCounter.setColor("#663300");\n        }\n    };\n    return MyRoomItem;\n}(RoomItem));\nvar PopularRoomItem = /** @class */ (function (_super) {\n    __extends(PopularRoomItem, _super);\n    function PopularRoomItem(scene, key, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        return _super.call(this, scene, key, dpr) || this;\n    }\n    PopularRoomItem.prototype.setRank = function (num) {\n        if (this.mRankImage) {\n            this.mRankImage.setTexture(this.mKey, "rank_" + num + ".png");\n            this.mRankImage.x = -this.width / 2 + this.mRankImage.width / 2 - 2 * this.mDpr;\n            this.add(this.mRankImage);\n        }\n    };\n    PopularRoomItem.prototype.init = function (key, dpr) {\n        _super.prototype.init.call(this, key, dpr);\n        this.mRankImage = this.scene.make.image(undefined, false);\n        this.mNickName.x = -this.width / 2 + 37 * dpr;\n    };\n    return PopularRoomItem;\n}(MyRoomItem));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaRoomList/PicaRoomListPanel.ts?')},"./src/pica/render/ui/PicaTask/PicaTaskItem.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaTaskItem", function() { return PicaTaskItem; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _Components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Components */ "./src/pica/render/ui/Components/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar PicaTaskItem = /** @class */ (function (_super) {\n    __extends(PicaTaskItem, _super);\n    function PicaTaskItem(scene, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.mIsExtend = false;\n        _this.zoom = 1;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        var conWidth = 272 * dpr;\n        var conHeight = 70 * dpr;\n        _this.setSize(conWidth, conHeight);\n        _this.content = scene.make.container(undefined, false);\n        _this.content.setSize(conWidth, conHeight);\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, conWidth, conHeight, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "task_list_bg", {\n            left: 6 * dpr,\n            top: 6 * dpr,\n            bottom: 6 * dpr,\n            right: 6 * dpr,\n        });\n        var posx = -conWidth * 0.5, posy = -conHeight * 0.5;\n        var headbg = scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "task_head_frame" });\n        headbg.x = posx + 25 * dpr;\n        _this.headIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, headbg.x, 0);\n        _this.headIcon.scale = dpr / _this.zoom;\n        _this.headIcon.y = -10 * dpr;\n        _this.taskName = scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].whiteStyle(dpr) }).setOrigin(0, 0.5);\n        _this.taskName.x = _this.headIcon.x + 28 * dpr;\n        _this.taskName.y = -conHeight * 0.5 + 15 * dpr;\n        _this.taskDes = scene.make.text({ text: "", style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].colorStyle("#FFF449", 12 * dpr) }).setOrigin(0);\n        _this.taskDes.x = _this.taskName.x;\n        _this.taskDes.y = _this.taskName.y + 15 * dpr;\n        _this.taskButton = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ThreeSliceButton"](_this.scene, 62 * dpr, 25 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].threeYellowSmall, utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].threeYellowSmall, utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("task.receive"));\n        _this.taskButton.setFontStyle("bold");\n        _this.taskButton.x = conWidth * 0.5 - _this.taskButton.width * 0.5 - 10 * dpr;\n        _this.taskButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, _this.onTaskButtonHandler, _this);\n        _this.arrow = _this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "task_list_arrow" });\n        _this.arrow.y = conHeight * 0.5 - _this.arrow.height * 0.5;\n        _this.content.add([_this.bg, headbg, _this.headIcon, _this.taskName, _this.taskDes, _this.taskButton, _this.arrow]);\n        _this.add(_this.content);\n        _this.setSize(conWidth, conHeight);\n        return _this;\n    }\n    PicaTaskItem.prototype.setTaskData = function (data) {\n        this.questData = data;\n        this.taskName.text = data.name + this.getProgressStr(data);\n        this.setTextLimit(this.taskName, this.taskName.text);\n        this.setTextLimit(this.taskDes, data.detail);\n        var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(data.display.texturePath);\n        this.headIcon.load(url, this, function () {\n        });\n        if (data.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_3__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_PROCESSING) {\n            this.taskButton.setFrameNormal(utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].threeGreenSmall);\n            this.taskButton.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("task.go"));\n            this.taskButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].colorStyle("#022B55", 12 * this.dpr));\n        }\n        else if (data.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_3__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED || this.questData.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_3__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_END) {\n            this.taskButton.setFrameNormal(utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].threeYellowSmall);\n            this.taskButton.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("task.receive"));\n            this.taskButton.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].brownishStyle(this.dpr));\n        }\n    };\n    PicaTaskItem.prototype.setTaskDetail = function (data) {\n        if (this.mExtend)\n            this.mExtend.setItemData(data);\n    };\n    PicaTaskItem.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    PicaTaskItem.prototype.setExtend = function (isExtend, haveCallBack) {\n        if (haveCallBack === void 0) { haveCallBack = true; }\n        if (isExtend) {\n            this.openExtend();\n            if (haveCallBack)\n                if (this.send)\n                    this.send.runWith(["extend", { extend: true, item: this }]);\n        }\n        else {\n            this.closeExtend();\n            if (haveCallBack) {\n                if (this.send)\n                    this.send.runWith(["extend", { extend: false, item: this }]);\n            }\n        }\n    };\n    Object.defineProperty(PicaTaskItem.prototype, "extend", {\n        get: function () {\n            return this.mIsExtend;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PicaTaskItem.prototype.getProgressStr = function (data) {\n        if (data.targets) {\n            for (var _i = 0, _a = data.targets; _i < _a.length; _i++) {\n                var target = _a[_i];\n                if (target.neededCount) {\n                    return " (" + target.count + "/" + target.neededCount + ")";\n                }\n            }\n        }\n        return "";\n    };\n    PicaTaskItem.prototype.onTaskButtonHandler = function () {\n        if (this.questData.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_3__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_PROCESSING) {\n            if (this.send)\n                this.send.runWith(["go", this.questData]);\n        }\n        else if (this.questData.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_3__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED) {\n            if (this.send)\n                this.send.runWith(["finish", this.questData.id]);\n        }\n    };\n    PicaTaskItem.prototype.openExtend = function () {\n        if (!this.mExtend) {\n            this.mExtend = new TaskItemExtend(this.scene, this.width, 0, this.dpr, this.zoom);\n            this.mExtend.setHandler(this.send);\n            this.add(this.mExtend);\n        }\n        this.mExtend.setItemData(this.questData);\n        this.mExtend.visible = true;\n        this.height = this.content.height + this.mExtend.height;\n        this.content.y = -this.height * 0.5 + this.content.height * 0.5;\n        this.mExtend.y = this.content.y + this.content.height * 0.5;\n        this.mIsExtend = true;\n        // this.mExtend.setItemData(this.questData);\n        this.arrow.visible = false;\n    };\n    PicaTaskItem.prototype.closeExtend = function () {\n        if (this.mExtend)\n            this.mExtend.visible = false;\n        this.height = this.content.height;\n        this.content.y = 0;\n        this.mIsExtend = false;\n        this.arrow.visible = true;\n    };\n    PicaTaskItem.prototype.setTextLimit = function (text, content, limit) {\n        if (limit === void 0) { limit = 15; }\n        if (content.length > limit) {\n            var maxWidth = 155 * this.dpr;\n            for (var i = 4; i < content.length; i++) {\n                var str = content.slice(0, i);\n                var width = text.setText(str).width;\n                if (width > maxWidth) {\n                    str += "...";\n                    text.setText(str);\n                    break;\n                }\n            }\n        }\n        else {\n            text.setText(content);\n        }\n    };\n    return PicaTaskItem;\n}(Phaser.GameObjects.Container));\n\nvar TaskItemExtend = /** @class */ (function (_super) {\n    __extends(TaskItemExtend, _super);\n    function TaskItemExtend(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.needArr = [];\n        _this.rewardArr = [];\n        _this.dpr = 0;\n        _this.zoom = 1;\n        _this.width = width;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, width, height, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "task_list_unfold_bg", {\n            left: 4,\n            top: 4,\n            right: 4,\n            bottom: 4\n        });\n        var posx = -width * 0.5 + 10 * dpr;\n        var posy = -height * 0.5 + 8 * dpr;\n        _this.taskLabel = scene.make.text({ x: posx, y: posy, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("task.objective"), style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].colorStyle("#625AC6", 12 * dpr) });\n        _this.taskLabel.setFontStyle("bold");\n        _this.taskTex = scene.make.text({ x: posx, y: posy + 18 * dpr, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("task.collect_materials"), style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].colorStyle("#625AC6", 12 * dpr) });\n        _this.taskTex.setWordWrapWidth(width - 10 * dpr, true);\n        _this.rewardLabel = scene.make.text({ x: posx, y: posy + 90 * dpr, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("task.rewards"), style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].colorStyle("#625AC6", 12 * dpr) });\n        _this.rewardLabel.setFontStyle("bold");\n        var line = scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "task_reward_divider" });\n        line.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        line.setPosition(-10 * dpr, posy + 110 * dpr);\n        _this.line = line;\n        _this.add([_this.bg, _this.taskLabel, _this.taskTex, _this.rewardLabel, line]);\n        _this.setSize(width, height);\n        return _this;\n    }\n    TaskItemExtend.prototype.setItemData = function (questData) {\n        var taskPosy = 0;\n        var cellHeight = 67 * this.dpr;\n        this.taskTex.text = this.getTaskTargetText(questData);\n        this.createTaskCells(this.needArr, questData.targets, true);\n        taskPosy = this.taskTex.y + this.taskTex.height + 8 * this.dpr;\n        if (questData.targets.length > 0) {\n            if (this.hasTargetWithDisplay(questData)) {\n                taskPosy += cellHeight * 0.5;\n                this.sortItem(this.needArr, taskPosy);\n                taskPosy += cellHeight * 0.5 + 15 * this.dpr;\n            }\n        }\n        this.rewardLabel.y = taskPosy;\n        taskPosy += this.rewardLabel.height + 5 * this.dpr;\n        this.line.y = taskPosy;\n        taskPosy += 5 * this.dpr;\n        this.createTaskCells(this.rewardArr, questData.rewards, false);\n        taskPosy += cellHeight * 0.5;\n        this.sortItem(this.rewardArr, taskPosy);\n        this.height = taskPosy + cellHeight * 0.5 + 10 * this.dpr;\n        this.bg.resize(this.width, this.height);\n        this.bg.y = this.height * 0.5;\n    };\n    TaskItemExtend.prototype.sortItem = function (taskcells, posY) {\n        if (posY === void 0) { posY = 0; }\n        var posx = -this.width * 0.5 + 10 * this.dpr;\n        var list = taskcells;\n        var value = 0;\n        var offsetx = 10 * this.dpr;\n        for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {\n            var item = list_1[_i];\n            item.x = posx + item.width * item.originX + value;\n            item.y = posY;\n            value += item.width + offsetx;\n        }\n    };\n    TaskItemExtend.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    TaskItemExtend.prototype.createTaskCells = function (arr, dataArr, isTask) {\n        if (isTask === void 0) { isTask = true; }\n        for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n            var item = arr_1[_i];\n            item.visible = false;\n        }\n        for (var i = 0; i < dataArr.length; i++) {\n            var item = void 0;\n            if (i < arr.length) {\n                item = arr[i];\n            }\n            else {\n                if (dataArr[i].texturePath) {\n                    item = new _Components__WEBPACK_IMPORTED_MODULE_5__["ItemButton"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "bag_icon_common_bg", this.dpr, this.zoom, true);\n                    item.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onTaskCellHandler, this);\n                    arr.push(item);\n                    this.add(item);\n                }\n            }\n            if (item) {\n                item.visible = true;\n                item.setItemData(dataArr[i]);\n            }\n        }\n        return arr;\n    };\n    TaskItemExtend.prototype.hasTargetWithDisplay = function (questData) {\n        for (var _i = 0, _a = questData.targets; _i < _a.length; _i++) {\n            var target = _a[_i];\n            if (target.texturePath)\n                return true;\n        }\n    };\n    TaskItemExtend.prototype.getTaskTargetText = function (questData) {\n        var targets = questData.targets;\n        var text = questData.detail + this.getProgressStr(questData);\n        // if (targets.length === 0) {\n        //     text = questData.detail;\n        // } else {\n        //     text = i18n.t("task.collect_materials");\n        //     for (const item of targets) {\n        //         text += `${item.name}*${item.neededCount}`;\n        //     }\n        // }\n        return text;\n    };\n    TaskItemExtend.prototype.getProgressStr = function (data) {\n        if (data.targets) {\n            for (var _i = 0, _a = data.targets; _i < _a.length; _i++) {\n                var target = _a[_i];\n                if (target.neededCount) {\n                    return " (" + target.count + "/" + target.neededCount + ")";\n                }\n            }\n        }\n        return "";\n    };\n    TaskItemExtend.prototype.onTaskCellHandler = function (pointer, gameobject) {\n        if (this.send)\n            this.send.runWith(["item", gameobject]);\n    };\n    return TaskItemExtend;\n}(Phaser.GameObjects.Container));\nvar TaskCell = /** @class */ (function (_super) {\n    __extends(TaskCell, _super);\n    function TaskCell(scene, dpr, zoom) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.bg = scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "task_icon_bg" });\n        _this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.itemIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, 0);\n        _this.itemIcon.scale = _this.dpr / _this.zoom;\n        _this.countTex = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, 0, 0, "", utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].colorNumberStyle("#ffffff", 12 * dpr))\n            .setOrigin(0.5).setStroke("#000000", 2 * dpr);\n        _this.countTex.setPosition(_this.width * 0.5, _this.height * 0.5 - 2 * dpr);\n        _this.add([_this.bg, _this.itemIcon, _this.countTex]);\n        _this.enable = true;\n        return _this;\n    }\n    TaskCell.prototype.setCellData = function (itemData, isTask) {\n        if (isTask === void 0) { isTask = true; }\n        this.itemData = itemData;\n        var frame = isTask ? "task_icon_bg" : "task_reward_bg";\n        this.bg.setTexture(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame);\n        var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(itemData.texturePath);\n        this.itemIcon.load(url, this, function () {\n        });\n        if (!isTask) {\n            this.countTex.text = "[stroke=#2D2D2D][color=#ffffff]" + itemData.count + "[/color][/stroke]";\n            this.countTex.x = this.width * 0.5 - 2 * this.dpr;\n            this.countTex.y = this.height * 0.5;\n            this.countTex.setOrigin(1, 1);\n        }\n        else {\n            this.countTex.text = this.getCountText(itemData.count, itemData.neededCount);\n            this.countTex.setOrigin(0.5);\n            this.countTex.x = 0;\n            this.countTex.y = this.height * 0.5 + 7 * this.dpr;\n        }\n    };\n    TaskCell.prototype.getCountText = function (count, needcount) {\n        var color = (count >= needcount ? "#0054FF" : "#FF0000");\n        var countText = "[color=" + color + "]" + count + "[/color]";\n        var needText = "[color=#2D2D2D]/" + needcount + "[/color]";\n        var text = "" + countText + needText;\n        return text;\n    };\n    return TaskCell;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"]));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaTask/PicaTaskItem.ts?')},"./src/pica/render/ui/PicaTask/PicaTaskMainPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaTaskMainPanel", function() { return PicaTaskMainPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _PicaTaskItem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaTaskItem */ "./src/pica/render/ui/PicaTask/PicaTaskItem.ts");\n/* harmony import */ var _SinglePanel_PicaItemTipsPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../SinglePanel/PicaItemTipsPanel */ "./src/pica/render/ui/SinglePanel/PicaItemTipsPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar PicaTaskMainPanel = /** @class */ (function (_super) {\n    __extends(PicaTaskMainPanel, _super);\n    function PicaTaskMainPanel(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.taskItems = [];\n        _this.isMoveFinish = false;\n        _this.isFinishGroup = false;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.init();\n        return _this;\n    }\n    PicaTaskMainPanel.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    PicaTaskMainPanel.prototype.refreshMask = function () {\n        this.gameScroller.refreshMask();\n        if (this.mainItem)\n            this.mainItem.refreshMask();\n    };\n    PicaTaskMainPanel.prototype.setTaskDatas = function (content, questType) {\n        if (this.curTaskItem)\n            this.curTaskItem.setExtend(false);\n        if (!this.mainItem) {\n            this.mainItem = new MainTaskItem(this.scene, 272 * this.dpr, 126 * this.dpr, this.dpr, this.zoom);\n            this.gameScroller.addItem(this.mainItem);\n            this.mainItem.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onRewardHandler));\n        }\n        this.mainItem.setMainTaskData(content, questType);\n        if (this.questType !== questType) {\n            var tempArr = this.getTaskQuests(content.quests, undefined);\n            this.setTaskItems(tempArr);\n            var tempitems = [];\n            for (var _i = 0, _a = this.taskItems; _i < _a.length; _i++) {\n                var item = _a[_i];\n                if (item.visible)\n                    tempitems.push(item);\n            }\n        }\n        else {\n            var tempArr = this.getTaskQuests(content.quests, this.taskGroupData.quests);\n            this.setTaskItems(tempArr);\n            var tempitems = [];\n            for (var _b = 0, _c = this.taskItems; _b < _c.length; _b++) {\n                var item = _c[_b];\n                if (item.visible)\n                    tempitems.push(item);\n            }\n            if (this.isFinishGroup) {\n                this.mainTaskAnimation = new MainTaskAnimation(this.scene, this.mainItem, tempitems, this.width, this.dpr);\n                if (this.isMoveFinish)\n                    this.mainTaskAnimation.playIntoAnimation();\n                this.isFinishGroup = false;\n            }\n            else {\n                var animation = new MainTaskGooutAnimation(this.scene, tempitems, this.width, this.dpr);\n                animation.playGoOutAnimation();\n            }\n        }\n        this.taskGroupData = content;\n        this.questType = questType;\n    };\n    PicaTaskMainPanel.prototype.setTaskDetail = function (quest) {\n        if (this.curTaskItem && quest) {\n            if (this.curTaskItem.questData.id === quest.id) {\n                this.curTaskItem.setTaskDetail(quest);\n            }\n        }\n    };\n    PicaTaskMainPanel.prototype.setTaskItems = function (quests) {\n        for (var _i = 0, _a = this.taskItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var task = item;\n            task.visible = false;\n        }\n        for (var i = 0; i < quests.length; i++) {\n            var item = void 0;\n            if (i < this.taskItems.length) {\n                item = this.taskItems[i];\n            }\n            else {\n                item = new _PicaTaskItem__WEBPACK_IMPORTED_MODULE_5__["PicaTaskItem"](this.scene, this.dpr, this.zoom);\n                this.gameScroller.addItem(item);\n                item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_3__["Handler"](this, this.onTaskItemHandler));\n                this.taskItems.push(item);\n            }\n            item.setTaskData(quests[i]);\n            item.visible = true;\n            item.x = 0;\n        }\n        this.gameScroller.Sort();\n    };\n    PicaTaskMainPanel.prototype.getTaskQuests = function (quests, before) {\n        var tempArr = [];\n        for (var _i = 0, quests_1 = quests; _i < quests_1.length; _i++) {\n            var quest = quests_1[_i];\n            if (quest.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_4__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_PROCESSING || quest.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_4__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED) {\n                tempArr.push(quest);\n            }\n            else if (quest.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_4__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_END) {\n                if (before) {\n                    for (var _a = 0, before_1 = before; _a < before_1.length; _a++) {\n                        var item = before_1[_a];\n                        if (item.id === quest.id && item.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_4__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED) {\n                            tempArr.push(quest);\n                        }\n                    }\n                }\n            }\n        }\n        return tempArr;\n    };\n    PicaTaskMainPanel.prototype.playIntoAnimation = function () {\n        if (this.mainTaskAnimation)\n            this.mainTaskAnimation.playIntoAnimation();\n    };\n    PicaTaskMainPanel.prototype.playGoOutAnimation = function () {\n    };\n    PicaTaskMainPanel.prototype.moveFinish = function () {\n        this.isMoveFinish = true;\n        if (this.mainTaskAnimation)\n            this.mainTaskAnimation.playIntoAnimation();\n    };\n    PicaTaskMainPanel.prototype.init = function () {\n        var _this = this;\n        this.gameScroller = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: 0,\n            y: 0 * this.dpr,\n            width: this.width,\n            height: this.height,\n            zoom: this.zoom,\n            dpr: this.dpr,\n            align: 2,\n            orientation: 0,\n            space: 10 * this.dpr,\n            padding: { top: 2 * this.dpr },\n            selfevent: true,\n            cellupCallBack: function (gameobject) {\n                _this.onPointerUpHandler(gameobject);\n            }\n        });\n        this.itemTips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ItemInfoTips"](this.scene, 121 * this.dpr, 46 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "tips_bg", this.dpr);\n        this.itemTips.setVisible(false);\n        this.add([this.gameScroller, this.itemTips]);\n    };\n    PicaTaskMainPanel.prototype.onPointerUpHandler = function (gameobject) {\n        if (!(gameobject instanceof MainTaskItem)) {\n            var extend_1 = gameobject.extend ? false : true;\n            gameobject.setExtend(extend_1, true);\n        }\n    };\n    PicaTaskMainPanel.prototype.onTaskItemHandler = function (tag, data) {\n        if (tag === "extend") {\n            var extend_2 = data.extend;\n            var item = data.item;\n            this.onExtendsHandler(extend_2, item);\n        }\n        else if (tag === "go") {\n        }\n        else if (tag === "finish") {\n            this.send.runWith(["finish", data]);\n        }\n        else if (tag === "item") {\n            this.onMaterialItemHandler(data);\n        }\n    };\n    PicaTaskMainPanel.prototype.onRewardHandler = function (id) {\n        if (this.send)\n            this.send.runWith(["reward", id]);\n        this.isFinishGroup = true;\n    };\n    PicaTaskMainPanel.prototype.onExtendsHandler = function (isExtend, item) {\n        if (this.curTaskItem) {\n            this.curTaskItem.setExtend(false, false);\n        }\n        if (isExtend) {\n            this.curTaskItem = item;\n        }\n        else\n            this.curTaskItem = null;\n        this.gameScroller.Sort(true);\n    };\n    PicaTaskMainPanel.prototype.onMaterialItemHandler = function (gameobj) {\n        // this.itemTips.setVisible(true);\n        // const data = gameobj.itemData;\n        // this.itemTips.setItemData(data);\n        // this.itemTips.setTipsPosition(gameobj, this, 10 * this.dpr);\n        _SinglePanel_PicaItemTipsPanel__WEBPACK_IMPORTED_MODULE_6__["PicaItemTipsPanel"].Inst.showTips(gameobj, gameobj.itemData);\n    };\n    return PicaTaskMainPanel;\n}(Phaser.GameObjects.Container));\n\nvar MainTaskItem = /** @class */ (function (_super) {\n    __extends(MainTaskItem, _super);\n    function MainTaskItem(scene, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.isFinish = false;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        _this.init();\n        return _this;\n    }\n    MainTaskItem.prototype.refreshMask = function () {\n        // this.progress.refreshMask();\n    };\n    MainTaskItem.prototype.setMainTaskData = function (content, questType) {\n        this.titleTex.text = content.name;\n        this.taskDes.text = content.des;\n        var max = 100;\n        var fvalue = this.getFinishProgress(content);\n        if (this.questType !== questType) {\n            this.progress.setProgress(fvalue, max);\n        }\n        else {\n            var from = this.previousProgress;\n            var allTime = 2000;\n            var duration = allTime * fvalue / max;\n            this.playProgressTween(from, fvalue, max, duration);\n        }\n        this.progressTex.text = fvalue + "%";\n        this.isFinish = fvalue === max;\n        this.previousProgress = fvalue;\n        this.mainData = content;\n        var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(content.reward.texturePath);\n        this.rewardsImg.load(url, this, function () {\n        });\n    };\n    MainTaskItem.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    MainTaskItem.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.intervalTimer)\n            clearInterval(this.intervalTimer);\n    };\n    MainTaskItem.prototype.init = function () {\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, this.width, this.height, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, "task_chapter_bg", {\n            left: 8 * this.dpr, top: 8 * this.dpr, right: 8 * this.dpr, bottom: 8 * this.dpr\n        });\n        this.titleCon = this.scene.make.container(undefined, false);\n        this.titleCon.y = -this.height * 0.5 + 21 * this.dpr;\n        var leftTitleBg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "task_chapter_title_left" });\n        var rightTitleBg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "task_chapter_title_right" });\n        var middleTitleBg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "task_chapter_title_middle" });\n        middleTitleBg.y = -5 * this.dpr;\n        leftTitleBg.x = -middleTitleBg.width * 0.5 - leftTitleBg.width * 0.5 + 7 * this.dpr;\n        rightTitleBg.x = middleTitleBg.width * 0.5 + rightTitleBg.width * 0.5 - 7 * this.dpr;\n        this.titleTex = this.scene.make.text({\n            text: "", style: {\n                fontSize: 12 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                color: "#FFF6CA"\n            }\n        }).setOrigin(0.5);\n        this.titleTex.setFontStyle("bold");\n        this.titleTex.y = middleTitleBg.y;\n        this.titleCon.add([leftTitleBg, middleTitleBg, rightTitleBg, this.titleTex]);\n        this.taskDes = this.scene.make.text({\n            x: -this.width * 0.5 + 12 * this.dpr,\n            y: -2 * this.dpr,\n            text: "", style: {\n                fontSize: 12 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                color: "#8C6003"\n            }\n        }).setOrigin(0, 0.5);\n        this.taskDes.setWordWrapWidth(160 * this.dpr, true);\n        var rewardbg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "task_chapter_gift_bg" });\n        rewardbg.x = this.width * 0.5 - 10 * this.dpr - rewardbg.width * 0.5;\n        rewardbg.y = 10 * this.dpr;\n        var rewardButton = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"](this.scene, 0, 0);\n        rewardButton.setSize(rewardbg.width, rewardbg.height);\n        rewardButton.enable = true;\n        rewardButton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onReceiveAwardHandler, this);\n        rewardButton.x = rewardbg.x;\n        rewardButton.y = rewardbg.y;\n        this.rewardRotateImg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, frame: "task_chapter_gift_bg1" });\n        this.rewardRotateImg.x = rewardbg.x;\n        this.rewardRotateImg.y = rewardbg.y;\n        this.rewardsImg = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, 0);\n        this.rewardsImg.x = rewardbg.x;\n        this.rewardsImg.y = rewardbg.y;\n        this.rewardsImg.scale = this.dpr / this.zoom;\n        var config = { width: 153 * this.dpr, height: 11 * this.dpr, correct: 0 };\n        var barbgs = ["task_chapter_progress_bott_left", "task_chapter_progress_bott_middle", "task_chapter_progress_bott_right"];\n        var bars = ["task_chapter_progress_top_left", "task_chapter_progress_top_middle", "task_chapter_progress_top_right"];\n        this.progress = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ProgressThreeBar"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon, barbgs, bars, undefined, config, config);\n        this.progress.x = -this.width * 0.5 + this.progress.width * 0.5 + 15 * this.dpr;\n        this.progress.y = 34 * this.dpr;\n        this.progressTex = this.scene.make.text({\n            x: this.progress.x,\n            y: this.progress.y + 15 * this.dpr,\n            text: "", style: {\n                fontSize: 12 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                color: "#794400"\n            }\n        }).setOrigin(0.5);\n        this.add([this.bg, this.titleCon, this.taskDes, this.progress, this.progressTex, rewardbg, this.rewardRotateImg, this.rewardsImg, rewardButton]);\n    };\n    MainTaskItem.prototype.onReceiveAwardHandler = function () {\n        if (this.isFinish && !this.mainData.rewardsReceived) {\n            if (this.send)\n                this.send.runWith([this.mainData.id]);\n        }\n    };\n    MainTaskItem.prototype.getFinishProgress = function (content) {\n        return content.progress;\n    };\n    MainTaskItem.prototype.playProgressTween = function (from, to, max, duration) {\n        var _this = this;\n        if (!this.scene)\n            return;\n        var tween = this.scene.tweens.addCounter({\n            from: from,\n            to: to,\n            ease: "Linear",\n            duration: duration,\n            onUpdate: function (cope, param) {\n                if (!_this.scene) {\n                    tween.stop();\n                    tween.remove();\n                    return;\n                }\n                var value = param.value;\n                _this.progress.setProgress(value, max);\n                _this.progressTex.text = Math.floor((value * 1000 / max)) / 10 + "%";\n            },\n            onComplete: function () {\n                tween.stop();\n                if (to === max) {\n                    _this.playRotateTween();\n                }\n            },\n        });\n    };\n    MainTaskItem.prototype.playRotateTween = function () {\n        var _this = this;\n        if (!this.scene)\n            return;\n        if (this.intervalTimer)\n            clearInterval(this.intervalTimer);\n        this.intervalTimer = setInterval(function () {\n            if (!_this.scene) {\n                if (_this.intervalTimer)\n                    clearInterval(_this.intervalTimer);\n                return;\n            }\n            _this.rewardRotateImg.rotation += 0.1;\n        }, 30);\n    };\n    return MainTaskItem;\n}(Phaser.GameObjects.Container));\nvar MainTaskAnimation = /** @class */ (function () {\n    function MainTaskAnimation(scene, mainItem, taskItems, width, dpr) {\n        this.listPosY = [];\n        this.tempItems = [];\n        this.isDispose = false;\n        this.indexed = -1;\n        this.scene = scene;\n        this.mainItem = mainItem;\n        this.taskItems = taskItems;\n        this.width = width;\n        this.dpr = dpr;\n        this.setItemLayout();\n    }\n    MainTaskAnimation.prototype.playIntoAnimation = function () {\n        var _this = this;\n        this.mainItem.refreshMask();\n        this.playMoveX(this.mainItem, this.mainItem.x, 0, false);\n        setTimeout(function () {\n            _this.mainItem.refreshMask();\n            _this.playNextAnimation();\n        }, 300);\n    };\n    MainTaskAnimation.prototype.dispose = function () {\n        this.tempItems.length = 0;\n        this.taskItems.length = 0;\n        this.mainItem = undefined;\n        this.taskItems = undefined;\n        this.tempItems = undefined;\n        this.isDispose = true;\n    };\n    MainTaskAnimation.prototype.setItemLayout = function () {\n        this.mainItem.x = -this.width - 10 * this.dpr;\n        for (var _i = 0, _a = this.taskItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.x = -this.width - 10 * this.dpr;\n            this.listPosY.push(item.y);\n        }\n    };\n    MainTaskAnimation.prototype.playNextAnimation = function () {\n        if (this.isDispose)\n            return;\n        if (this.taskItems.length === 0)\n            return;\n        if (this.indexed === -1) {\n            this.indexed = this.taskItems.length - 1;\n        }\n        else {\n            this.indexed--;\n        }\n        var nextItem = this.taskItems[this.indexed];\n        nextItem.y = this.listPosY[0];\n        nextItem.alpha = 0;\n        this.tempItems.push(nextItem);\n        this.playMoveX(nextItem, nextItem.x, 0, true);\n        this.playAlpha(nextItem, 0, 1, "Cubic.easeIn");\n    };\n    MainTaskAnimation.prototype.playMoveX = function (target, from, to, moveY) {\n        var _this = this;\n        if (this.isDispose)\n            return;\n        var tween = this.scene.tweens.add({\n            targets: target,\n            x: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: 300,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                if (moveY) {\n                    if (_this.indexed > 0)\n                        _this.playMoveY();\n                    else\n                        _this.dispose();\n                }\n            },\n        });\n    };\n    MainTaskAnimation.prototype.playAlpha = function (target, from, to, ease) {\n        if (this.isDispose)\n            return;\n        var tween = this.scene.tweens.add({\n            targets: target,\n            alpha: {\n                from: from,\n                to: to\n            },\n            ease: ease,\n            duration: 250,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n            },\n        });\n    };\n    MainTaskAnimation.prototype.playMoveY = function () {\n        var _this = this;\n        if (this.isDispose)\n            return;\n        var from = 0;\n        var to = this.listPosY[this.indexed] - this.listPosY[this.indexed - 1];\n        var tempvalue = 0;\n        var tween = this.scene.tweens.addCounter({\n            from: from,\n            to: to,\n            ease: "Linear",\n            duration: 200,\n            onUpdate: function (cope, param) {\n                var interval = param.value - tempvalue;\n                for (var _i = 0, _a = _this.tempItems; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    item.y += interval;\n                }\n                tempvalue = param.value;\n            },\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                _this.playNextAnimation();\n            },\n        });\n    };\n    return MainTaskAnimation;\n}());\nvar MainTaskGooutAnimation = /** @class */ (function () {\n    function MainTaskGooutAnimation(scene, taskItems, width, dpr) {\n        this.listPosY = [];\n        this.tempItems = [];\n        this.isDispose = false;\n        this.scene = scene;\n        this.taskItems = taskItems;\n        this.width = width;\n        this.dpr = dpr;\n        this.setItemLayout();\n    }\n    MainTaskGooutAnimation.prototype.playGoOutAnimation = function () {\n        var _this = this;\n        var tempArr = [];\n        var tempYArr = [];\n        var tempYIndexeds = [];\n        var lenght = this.taskItems.length - 1;\n        for (var i = lenght; i >= 0; i--) {\n            var item = this.taskItems[i];\n            if (item.questData.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_4__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_END) {\n                tempArr.push(item);\n                this.taskItems.splice(i, 1);\n                if (i < this.taskItems.length) {\n                    var arr = this.taskItems.slice(i, this.taskItems.length);\n                    tempYArr.push(arr);\n                    tempYIndexeds.push(i);\n                }\n            }\n        }\n        var from = 0;\n        var to = this.width + 10 * this.dpr;\n        if (tempArr.length > 0) {\n            this.playMoveX(tempArr, from, to);\n            this.playAlpha(tempArr, 0, 1, "Cubic.easeOut");\n            setTimeout(function () {\n                for (var i = 0; i < tempYArr.length; i++) {\n                    var arr = tempYArr[i];\n                    var indexed = tempYIndexeds[i];\n                    _this.playMoveGooutY(arr, indexed);\n                }\n            }, 300);\n        }\n    };\n    MainTaskGooutAnimation.prototype.dispose = function () {\n        this.tempItems.length = 0;\n        this.taskItems.length = 0;\n        this.taskItems = undefined;\n        this.tempItems = undefined;\n        this.isDispose = true;\n    };\n    MainTaskGooutAnimation.prototype.setItemLayout = function () {\n        for (var _i = 0, _a = this.taskItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            this.listPosY.push(item.y);\n        }\n    };\n    MainTaskGooutAnimation.prototype.playMoveX = function (target, from, to) {\n        var _this = this;\n        if (this.isDispose)\n            return;\n        var tween = this.scene.tweens.add({\n            targets: target,\n            x: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: 300,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                if (!_this.scene)\n                    return;\n                for (var _i = 0, target_1 = target; _i < target_1.length; _i++) {\n                    var item = target_1[_i];\n                    item.visible = false;\n                }\n            },\n        });\n    };\n    MainTaskGooutAnimation.prototype.playAlpha = function (target, from, to, ease) {\n        if (this.isDispose)\n            return;\n        var tween = this.scene.tweens.add({\n            targets: target,\n            alpha: {\n                from: from,\n                to: to\n            },\n            ease: ease,\n            duration: 250,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n            },\n        });\n    };\n    MainTaskGooutAnimation.prototype.playMoveGooutY = function (tempArr, indexed) {\n        var _this = this;\n        if (this.isDispose)\n            return;\n        var from = 0;\n        var to = this.listPosY[indexed + 1] - this.listPosY[indexed];\n        var tempvalue = 0;\n        var tween = this.scene.tweens.addCounter({\n            from: from,\n            to: to,\n            ease: "Linear",\n            duration: 200,\n            onUpdate: function (cope, param) {\n                var interval = param.value - tempvalue;\n                for (var _i = 0, tempArr_1 = tempArr; _i < tempArr_1.length; _i++) {\n                    var item = tempArr_1[_i];\n                    item.y -= interval;\n                }\n                tempvalue = param.value;\n            },\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                if (!_this.isDispose) {\n                    _this.dispose();\n                }\n            },\n        });\n    };\n    return MainTaskGooutAnimation;\n}());\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaTask/PicaTaskMainPanel.ts?')},"./src/pica/render/ui/PicaTask/PicaTaskPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaTaskPanel", function() { return PicaTaskPanel; });\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\n/* harmony import */ var _PicaTaskMainPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaTaskMainPanel */ "./src/pica/render/ui/PicaTask/PicaTaskMainPanel.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_7__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar PicaTaskPanel = /** @class */ (function (_super) {\n    __extends(PicaTaskPanel, _super);\n    function PicaTaskPanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICATASK_NAME;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon];\n        return _this;\n    }\n    PicaTaskPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, w, h);\n        this.setSize(w, h);\n        this.blackBg.clear();\n        this.blackBg.fillStyle(0, 0.5);\n        this.blackBg.fillRect(-this.x, -this.y, w, h);\n        this.bg.clear();\n        this.bg.fillStyle(0, 0.6);\n        this.bg.fillRect(0, 0, this.content.width, h);\n        this.bg.x = -this.content.width * 0.5;\n        this.bg.y = -this.content.height * 0.5;\n        this.rewardLine.clear();\n        this.rewardLine.fillStyle(0xffffff, 0.6);\n        this.rewardLine.fillRect(-136 * this.dpr, 0, 272 * this.dpr, 1 * this.dpr);\n        this.selectLine.clear();\n        this.selectLine.fillStyle(0xFFF449, 0.5);\n        this.selectLine.fillRect(-29 * this.dpr, 0, 58 * this.dpr, 2 * this.dpr);\n        this.content.x = -this.content.width * 0.5 - 10 * this.dpr;\n        this.content.y = h * 0.5;\n        this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        this.mainPanel.refreshMask();\n    };\n    PicaTaskPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.blackBg.on("pointerup", this.OnClosePanel, this);\n    };\n    PicaTaskPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.blackBg.off("pointerup", this.OnClosePanel, this);\n    };\n    PicaTaskPanel.prototype.init = function () {\n        this.setSize(this.scaleWidth, this.scaleHeight);\n        this.blackBg = this.scene.make.graphics(undefined, false);\n        var conWdith = 300 * this.dpr;\n        var conHeight = this.height;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.content.setInteractive();\n        this.add([this.blackBg, this.content]);\n        this.bg = this.scene.make.graphics(undefined, false);\n        this.tilteName = this.scene.make.text({ text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("task.title"), style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].whiteStyle(this.dpr, 18) });\n        this.tilteName.setOrigin(0, 0.5);\n        this.tilteName.setFontStyle("bold");\n        this.tilteName.x = -conWdith * 0.5 + 20 * this.dpr;\n        this.tilteName.y = -conHeight * 0.5 + 40 * this.dpr;\n        this.selectLine = this.scene.make.graphics(undefined, false);\n        this.rewardLine = this.scene.make.graphics(undefined, false);\n        this.rewardLine.x = 0;\n        this.rewardLine.y = this.tilteName.y + 55 * this.dpr;\n        this.content.add([this.bg, this.tilteName, this.rewardLine, this.selectLine]);\n        var mainHeight = this.height * 0.5 - this.rewardLine.y - 10 * this.dpr;\n        this.mainPanel = new _PicaTaskMainPanel__WEBPACK_IMPORTED_MODULE_6__["PicaTaskMainPanel"](this.scene, this.content.width, mainHeight, this.dpr, this.scale);\n        this.mainPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onMainPanelHandler));\n        this.mainPanel.y = this.height * 0.5 - mainHeight * 0.5;\n        this.content.add(this.mainPanel);\n        this.createOptionButtons();\n        this.resize();\n        _super.prototype.init.call(this);\n        this.playMove();\n    };\n    PicaTaskPanel.prototype.createOptionButtons = function () {\n        var arr = [{ text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("task.main_quest"), type: pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_MAIN_MISSION }, { text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("task.daily_quest"), type: pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_DAILY_GOAL }];\n        var allLin = 272 * this.dpr;\n        var cellwidth = allLin / arr.length;\n        var cellHeight = 20 * this.dpr;\n        var posx = -allLin / 2;\n        var posy = -this.height * 0.5 + 75 * this.dpr;\n        var tempitem;\n        // tslint:disable-next-line:prefer-for-of\n        for (var i = 0; i < arr.length; i++) {\n            var data = arr[i];\n            var item = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ToggleColorButton"](this.scene, cellwidth, 20 * this.dpr, this.dpr, data.text);\n            item.on(apowophaserui__WEBPACK_IMPORTED_MODULE_7__["ClickEvent"].Tap, this.onToggleButtonHandler, this);\n            item.x = posx + cellwidth * 0.5;\n            item.y = posy;\n            item.setData("item", data.type);\n            item.setSize(cellwidth, cellHeight);\n            this.content.add(item);\n            item.setChangeColor("#FFF449");\n            item.setFontSize(14 * this.dpr);\n            posx += cellwidth;\n            if (!tempitem)\n                tempitem = item;\n        }\n        tempitem.isOn = true;\n        this.onToggleButtonHandler(undefined, tempitem);\n    };\n    PicaTaskPanel.prototype.setTaskDatas = function (content) {\n        this.mainPanel.setTaskDatas(content, this.questType);\n    };\n    PicaTaskPanel.prototype.setTaskDetail = function (quest) {\n    };\n    PicaTaskPanel.prototype.onToggleButtonHandler = function (pointer, toggle) {\n        if (this.curToggleItem === toggle)\n            return;\n        if (this.curToggleItem)\n            this.curToggleItem.isOn = false;\n        this.curToggleItem = toggle;\n        this.questType = toggle.getData("item");\n        this.selectLine.x = toggle.x;\n        this.selectLine.y = toggle.y + 20 * this.dpr;\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICATASK_NAME + "_questlist", this.questType);\n    };\n    PicaTaskPanel.prototype.onMainPanelHandler = function (tag, data) {\n        if (tag === "finish") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICATASK_NAME + "_submitquest", data);\n        }\n        else if (tag === "go") {\n        }\n        else if (tag === "detail") {\n            // this.render.renderEmitter(ModuleName.PICATASK_NAME + "_questdetail", { id: data, type: this.questType });\n        }\n        else if (tag === "reward") {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICATASK_NAME + "_queryreward", this.questType);\n        }\n    };\n    PicaTaskPanel.prototype.OnClosePanel = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICATASK_NAME + "_hide");\n    };\n    PicaTaskPanel.prototype.playMove = function () {\n        var _this = this;\n        var from = -this.content.width * 0.5 - 10 * this.dpr;\n        var to = this.content.width * 0.5;\n        var tween = this.scene.tweens.add({\n            targets: this.content,\n            x: {\n                from: from,\n                to: to\n            },\n            ease: "Linear",\n            duration: 300,\n            onComplete: function () {\n                tween.stop();\n                tween.remove();\n                _this.mainPanel.refreshMask();\n                _this.mainPanel.moveFinish();\n            },\n        });\n    };\n    return PicaTaskPanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_5__["PicaBasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaTask/PicaTaskPanel.ts?')},"./src/pica/render/ui/PicaTask/PicaTaskSidePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaTaskSidePanel", function() { return PicaTaskSidePanel; });\nvar PicaTaskSidePanel = /** @class */ (function () {\n    function PicaTaskSidePanel() {\n    }\n    return PicaTaskSidePanel;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaTask/PicaTaskSidePanel.ts?')},"./src/pica/render/ui/PicaTreasure/PicaTreasureAllOpenPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaTreasureAllOpenPanel", function() { return PicaTreasureAllOpenPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var _Components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Components */ "./src/pica/render/ui/Components/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaTreasureAllOpenPanel = /** @class */ (function (_super) {\n    __extends(PicaTreasureAllOpenPanel, _super);\n    function PicaTreasureAllOpenPanel(scene, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.lightAniKey = "treasurelight";\n        _this.starAniKey = "treasurestar";\n        _this.indexed = 0;\n        _this.isDispose = false;\n        _this.tweens = [];\n        _this.maskWidth = 0;\n        _this.maskHeight = 0;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.key = key;\n        _this.setSize(width, height);\n        _this.init();\n        return _this;\n    }\n    PicaTreasureAllOpenPanel.prototype.resize = function (w, h) {\n        this.setSize(w, h);\n        var worldpos = this.getWorldTransformMatrix();\n        this.maskGraphic.setPosition(worldpos.tx, worldpos.ty);\n    };\n    PicaTreasureAllOpenPanel.prototype.addListen = function () {\n        this.confirmBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onConfirmBtnClick, this);\n    };\n    PicaTreasureAllOpenPanel.prototype.removeListen = function () {\n        this.confirmBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onConfirmBtnClick, this);\n    };\n    PicaTreasureAllOpenPanel.prototype.init = function () {\n        var posY = -this.height * 0.5;\n        var titlebgline = this.scene.make.image({ x: 0, y: posY + 5 * this.dpr, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].treasure, frame: "treasure_title_bg" }, false);\n        this.titleimage = this.scene.make.image({ x: 0, y: titlebgline.y, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].treasure, frame: utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("treasure.titleimg") }, false);\n        this.titleimage.alpha = 0;\n        // this.pageCount = this.scene.make.text({\n        //     x: 0, y: this.titleimage.y + 40 * this.dpr, text: "1/6",\n        //     style: { color: "#FFE400", fontFamily: Font.DEFULT_FONT, fontSize: 16 * this.dpr }\n        // }).setOrigin(0.5).setFontStyle("bold");\n        // this.pageCount.visible = false;\n        this.add([titlebgline, this.titleimage]);\n        this.lightSprite = this.createSprite(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].circleeffect, this.lightAniKey, "", [1, 16]);\n        this.lightSprite.x = 5 * this.dpr;\n        this.add(this.lightSprite);\n        this.starSprite = this.createSprite(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].stareffect, this.starAniKey, "star", [1, 18], 10, -1);\n        this.add(this.starSprite);\n        this.starSprite.x = this.lightSprite.y;\n        var maskW = this.maskWidth = this.width, maskH = this.maskHeight = 200 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(maskW, maskH);\n        this.add(this.content);\n        this.maskGraphic = this.scene.make.graphics(undefined, false);\n        this.maskGraphic.fillStyle(0);\n        this.maskGraphic.fillRect(-maskW * 0.5 * this.zoom, -maskH * 0.5 * this.zoom, maskW * this.zoom, maskH * this.zoom);\n        var worldpos = this.getWorldTransformMatrix();\n        this.maskGraphic.setPosition(worldpos.tx, worldpos.ty);\n        this.content.setMask(this.maskGraphic.createGeometryMask());\n        // this.pagedown = this.scene.make.text({\n        //     x: 0, y: -posY - 45 * this.dpr, text: i18n.t("treasure.pagedown"),\n        //     style: { color: "#96F7FF", fontFamily: Font.DEFULT_FONT, fontSize: 12 * this.dpr }\n        // }).setOrigin(0.5);\n        // this.add(this.pagedown);\n        // this.pagedown.visible = false;\n        this.confirmBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].treasure, "butt", "butt", utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("common.confirm"));\n        this.confirmBtn.y = -posY - 8 * this.dpr;\n        this.confirmBtn.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].brownishStyle(this.dpr, 20));\n        this.confirmBtn.setFontStyle("bold");\n        this.confirmBtn.alpha = 0;\n        this.add(this.confirmBtn);\n    };\n    PicaTreasureAllOpenPanel.prototype.setHandler = function (close) {\n        this.closeHandler = close;\n    };\n    PicaTreasureAllOpenPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.isDispose = true;\n        if (this.tweens.length > 0) {\n            for (var _i = 0, _a = this.tweens; _i < _a.length; _i++) {\n                var tween = _a[_i];\n                tween.stop();\n                tween.remove();\n            }\n        }\n        this.tweens.length = 0;\n    };\n    PicaTreasureAllOpenPanel.prototype.setTreasureData = function (datas) {\n        if (!datas)\n            return;\n        this.treasureData = datas;\n        var tempdatas = this.getNextDatas();\n        var group = this.createLayoutGroup(tempdatas);\n        var offsety = (group.height - this.maskHeight) * 0.5;\n        this.setLayoutPanel(group.width, group.height);\n        this.playAnimation();\n        var from = 280 * this.dpr + offsety;\n        group.y = from;\n        this.playItemTween(group, from, offsety, 620);\n        this.curLayoutGroup = group;\n    };\n    PicaTreasureAllOpenPanel.prototype.setLayoutPanel = function (width, height) {\n        var maskW = this.width, maskH = height + 40 * this.dpr;\n        this.maskGraphic.clear();\n        this.maskGraphic.fillStyle(0);\n        this.maskGraphic.fillRect(-maskW * 0.5 * this.zoom, -maskH * 0.5 * this.zoom, maskW * this.zoom, maskH * this.zoom);\n        var worldpos = this.getWorldTransformMatrix();\n        var offsety = (height - this.maskHeight) * 0.5;\n        this.maskGraphic.setPosition(worldpos.tx, worldpos.ty + offsety);\n        this.confirmBtn.y = this.height * 0.5 + 38 * this.dpr + offsety;\n    };\n    PicaTreasureAllOpenPanel.prototype.playAnimation = function () {\n        var _this = this;\n        this.titleimage.alpha = 0;\n        this.lightSprite.play(this.lightAniKey);\n        setTimeout(function () {\n            _this.starSprite.play(_this.starAniKey);\n        }, 208);\n        var titleTween = this.scene.tweens.add({\n            targets: this.titleimage,\n            alpha: {\n                from: 0,\n                to: 1\n            },\n            duration: 300,\n            onComplete: function () {\n                titleTween.stop();\n                titleTween.remove();\n            },\n        });\n        this.tweens.push(titleTween);\n        var buttonTween = this.scene.tweens.add({\n            targets: this.confirmBtn,\n            alpha: {\n                from: 0,\n                to: 1\n            },\n            duration: 200,\n            delay: 720,\n            onComplete: function () {\n                buttonTween.stop();\n                buttonTween.remove();\n            },\n        });\n        this.tweens.push(buttonTween);\n    };\n    PicaTreasureAllOpenPanel.prototype.playItemTween = function (gameobjet, from, to, delay) {\n        var _this = this;\n        var tweenIn = this.scene.tweens.add({\n            targets: gameobjet,\n            y: {\n                from: from,\n                to: to\n            },\n            ease: "Back.easeOut",\n            duration: 300,\n            delay: delay,\n            onComplete: function () {\n                tweenIn.stop();\n                tweenIn.remove();\n                _this.playPageCount();\n            },\n        });\n        this.tweens.push(tweenIn);\n        var target = this.curLayoutGroup;\n        if (target) {\n            var tweenOut_1 = this.scene.tweens.add({\n                targets: target,\n                alpha: {\n                    from: 1,\n                    to: 0\n                },\n                duration: 200,\n                onComplete: function () {\n                    tweenOut_1.stop();\n                    tweenOut_1.remove();\n                    target.destroy();\n                },\n            });\n            this.tweens.push(tweenOut_1);\n        }\n    };\n    PicaTreasureAllOpenPanel.prototype.playPageCount = function () {\n        if (this.isDispose)\n            return;\n        // const len = this.treasureData.length;\n        // if (len < 6) return;\n        // this.pageCount.visible = true;\n        // this.pagedown.visible = true;\n        // const total = Math.ceil(len / 6);\n        // const index = Math.ceil(this.indexed / 6);\n        // this.pageCount.text = index + " /" + total;\n    };\n    PicaTreasureAllOpenPanel.prototype.getNextDatas = function () {\n        var datas = this.treasureData;\n        if (this.indexed >= datas.length)\n            return undefined;\n        var start = this.indexed;\n        var end = datas.length;\n        this.indexed = end;\n        return datas.slice(start, end);\n    };\n    PicaTreasureAllOpenPanel.prototype.createLayoutGroup = function (arr) {\n        var group = new RewardLayoutGroup(this.scene, 0, this.maskHeight, 235 * this.dpr, this.maskHeight, this.dpr, this.zoom);\n        this.content.add(group);\n        group.setRewardDatas(arr);\n        return group;\n    };\n    PicaTreasureAllOpenPanel.prototype.createSprite = function (key, animkey, frame, indexs, frameRate, repeat) {\n        if (frameRate === void 0) { frameRate = 30; }\n        if (repeat === void 0) { repeat = 0; }\n        var sprite = this.scene.make.sprite({ key: key, frame: frame + "1" });\n        this.scene.anims.create({ key: animkey, frames: this.scene.anims.generateFrameNames(key, { prefix: frame + "", start: indexs[0], end: indexs[1] }), frameRate: frameRate, repeat: repeat });\n        return sprite;\n    };\n    PicaTreasureAllOpenPanel.prototype.onConfirmBtnClick = function () {\n        var datas = this.getNextDatas();\n        if (datas) {\n            var group = this.createLayoutGroup(datas);\n            var offsety = (group.height - this.maskHeight) * 0.5;\n            var from = 280 * this.dpr + offsety;\n            group.y = from;\n            this.playItemTween(group, from, offsety, 200);\n            this.curLayoutGroup = group;\n        }\n        else {\n            if (this.closeHandler)\n                this.closeHandler.run();\n        }\n    };\n    return PicaTreasureAllOpenPanel;\n}(Phaser.GameObjects.Container));\n\nvar RewardLayoutGroup = /** @class */ (function (_super) {\n    __extends(RewardLayoutGroup, _super);\n    function RewardLayoutGroup(scene, x, y, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        return _this;\n    }\n    RewardLayoutGroup.prototype.setRewardDatas = function (datas) {\n        if (!datas)\n            return;\n        var len = datas.length;\n        for (var i = 0; i < len; i++) {\n            var prop = new _Components__WEBPACK_IMPORTED_MODULE_3__["ItemButton"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon1, "roam_reward_ordinary_bg", this.dpr, this.zoom, true);\n            prop.setStateFrames("roam_reward_ordinary_bg", "roam_reward_rare_bg");\n            prop.setItemData(datas[i]);\n            this.add(prop);\n        }\n        this.setLayout();\n    };\n    RewardLayoutGroup.prototype.setLayout = function () {\n        var list = this.list;\n        if (list.length === 0)\n            return;\n        var cell = list[0];\n        var len = list.length;\n        var cellwidth = cell.width, cellHeight = cell.height;\n        var tempWidth = 0, tempHeight = 0;\n        if (len <= 3) {\n            var space = len === 2 ? 20 * this.dpr : 10 * this.dpr;\n            var width = len * cellwidth + space * (len - 1);\n            for (var i = 0; i < len; i++) {\n                var item = list[i];\n                item.x = -width * 0.5 + (cellwidth + space) * i + cellwidth * 0.5;\n            }\n        }\n        else if (len === 4) {\n            var spaceW = 20 * this.dpr, spaceH = 15 * this.dpr;\n            for (var i = 0; i < 2; i++) {\n                for (var j = 0; j < 2; j++) {\n                    var item = (list[i * 2 + j]);\n                    item.x = -(cellwidth + spaceW) * 0.5 + (cellwidth + spaceW) * j;\n                    item.y = -(cellHeight + spaceH) * 0.5 + (cellHeight + spaceH) * i;\n                }\n            }\n        }\n        else if (len === 5) {\n            var spaceW = 10 * this.dpr, spaceH = 15 * this.dpr;\n            var width = 3 * cellwidth + spaceW * 2;\n            var height = 2 * cellHeight + spaceH;\n            for (var i = 0; i < 3; i++) {\n                var item = (list[i]);\n                item.x = -width * 0.5 + (cellwidth + spaceW) * i + cellwidth * 0.5;\n                item.y = -height * 0.5 + cellHeight * 0.5;\n            }\n            for (var j = 0; j < 2; j++) {\n                var item = (list[j + 3]);\n                item.x = -(2 * cellwidth + spaceW) * 0.5 + cellwidth * 0.5 + (cellwidth + spaceW) * j;\n                item.y = height * 0.5 - cellHeight * 0.5;\n            }\n        }\n        else if (len === 6) {\n            var spaceW = 10 * this.dpr, spaceH = 15 * this.dpr;\n            var width = 3 * cellwidth + spaceW * 2;\n            var height = 2 * cellHeight + spaceH;\n            for (var i = 0; i < 2; i++) {\n                for (var j = 0; j < 3; j++) {\n                    var item = (list[i * 3 + j]);\n                    item.x = -width * 0.5 + (cellwidth + spaceW) * j + cellwidth * 0.5;\n                    item.y = -height * 0.5 + (cellHeight + spaceH) * i + cellHeight * 0.5;\n                }\n            }\n        }\n        else {\n            var spaceW = 10 * this.dpr, spaceH = 10 * this.dpr;\n            var hcount = 4;\n            var roundlen = Math.floor(list.length / hcount);\n            var remainder = list.length % hcount;\n            var width = hcount * cellwidth + spaceW * (hcount - 1);\n            var heightLen = roundlen + (remainder === 0 ? 0 : 1);\n            var height = heightLen * cellHeight + spaceH * (heightLen - 1);\n            for (var i = 0; i < roundlen; i++) {\n                for (var j = 0; j < hcount; j++) {\n                    var item = (list[i * hcount + j]);\n                    item.x = -width * 0.5 + (cellwidth + spaceW) * j + cellwidth * 0.5;\n                    item.y = -height * 0.5 + (cellHeight + spaceH) * i + cellHeight * 0.5;\n                }\n            }\n            var remaWdith = remainder * cellwidth + spaceW * (remainder - 1);\n            for (var j = 0; j < remainder; j++) {\n                var item = (list[j + roundlen * hcount]);\n                item.x = -remaWdith * 0.5 + cellwidth * 0.5 + (cellwidth + spaceW) * j;\n                item.y = height * 0.5 - cellHeight * 0.5;\n            }\n            tempWidth = width;\n            tempHeight = height;\n            if (this.width < tempWidth)\n                this.width = tempWidth;\n            if (this.height < tempHeight)\n                this.height = tempHeight;\n        }\n    };\n    return RewardLayoutGroup;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaTreasure/PicaTreasureAllOpenPanel.ts?')},"./src/pica/render/ui/PicaTreasure/PicaTreasureOpenPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaTreasureOpenPanel", function() { return PicaTreasureOpenPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var _Components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Components */ "./src/pica/render/ui/Components/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PicaTreasureOpenPanel = /** @class */ (function (_super) {\n    __extends(PicaTreasureOpenPanel, _super);\n    function PicaTreasureOpenPanel(scene, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.lightAniKey = "treasurelight";\n        _this.starAniKey = "treasurestar";\n        _this.indexed = 0;\n        _this.isDispose = false;\n        _this.tweens = [];\n        _this.maskWidth = 0;\n        _this.maskHeight = 0;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.key = key;\n        _this.setSize(width, height);\n        _this.init();\n        return _this;\n    }\n    PicaTreasureOpenPanel.prototype.resize = function (w, h) {\n        this.setSize(w, h);\n        var worldpos = this.getWorldTransformMatrix();\n        this.maskGraphic.setPosition(worldpos.tx, worldpos.ty);\n    };\n    PicaTreasureOpenPanel.prototype.addListen = function () {\n        this.confirmBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onConfirmBtnClick, this);\n    };\n    PicaTreasureOpenPanel.prototype.removeListen = function () {\n        this.confirmBtn.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onConfirmBtnClick, this);\n    };\n    PicaTreasureOpenPanel.prototype.init = function () {\n        var posY = -this.height * 0.5;\n        var titlebgline = this.scene.make.image({ x: 0, y: posY + 5 * this.dpr, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].treasure, frame: "treasure_title_bg" }, false);\n        this.titleimage = this.scene.make.image({ x: 0, y: titlebgline.y, key: picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].treasure, frame: utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("treasure.titleimg") }, false);\n        this.titleimage.alpha = 0;\n        this.pageCount = this.scene.make.text({\n            x: 0, y: this.titleimage.y + 40 * this.dpr, text: "1/6",\n            style: { color: "#FFE400", fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT, fontSize: 16 * this.dpr }\n        }).setOrigin(0.5).setFontStyle("bold");\n        this.pageCount.visible = false;\n        this.add([titlebgline, this.titleimage, this.pageCount]);\n        this.lightSprite = this.createSprite(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].circleeffect, this.lightAniKey, "", [1, 16]);\n        this.lightSprite.x = 5 * this.dpr;\n        this.add(this.lightSprite);\n        this.starSprite = this.createSprite(picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].stareffect, this.starAniKey, "star", [1, 18], 10, -1);\n        this.add(this.starSprite);\n        this.starSprite.x = this.lightSprite.y;\n        var maskW = this.maskWidth = this.width, maskH = this.maskHeight = 180 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(maskW, maskH);\n        this.add(this.content);\n        this.maskGraphic = this.scene.make.graphics(undefined, false);\n        this.maskGraphic.fillStyle(0);\n        this.maskGraphic.fillRect(-maskW * 0.5 * this.zoom, -maskH * 0.5 * this.zoom, maskW * this.zoom, maskH * this.zoom);\n        var worldpos = this.getWorldTransformMatrix();\n        this.maskGraphic.setPosition(worldpos.tx, worldpos.ty);\n        this.content.setMask(this.maskGraphic.createGeometryMask());\n        this.pagedown = this.scene.make.text({\n            x: 0, y: -posY - 45 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("treasure.pagedown"),\n            style: { color: "#96F7FF", fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT, fontSize: 12 * this.dpr }\n        }).setOrigin(0.5);\n        this.add(this.pagedown);\n        this.pagedown.visible = false;\n        this.confirmBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].treasure, "butt", "butt", utils__WEBPACK_IMPORTED_MODULE_1__["i18n"].t("common.confirm"));\n        this.confirmBtn.y = -posY - 8 * this.dpr;\n        this.confirmBtn.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].brownishStyle(this.dpr, 20));\n        this.confirmBtn.setFontStyle("bold");\n        this.confirmBtn.alpha = 0;\n        this.add(this.confirmBtn);\n    };\n    PicaTreasureOpenPanel.prototype.setHandler = function (close) {\n        this.closeHandler = close;\n    };\n    PicaTreasureOpenPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.isDispose = true;\n        if (this.tweens.length > 0) {\n            for (var _i = 0, _a = this.tweens; _i < _a.length; _i++) {\n                var tween = _a[_i];\n                tween.stop();\n                tween.remove();\n            }\n        }\n        this.tweens.length = 0;\n    };\n    PicaTreasureOpenPanel.prototype.setTreasureData = function (datas) {\n        if (!datas)\n            return;\n        this.treasureData = datas;\n        var tempdatas = this.getNextDatas();\n        var group = this.createLayoutGroup(tempdatas);\n        this.playAnimation();\n        var offsety = 160 * this.dpr + (group.height - this.maskHeight) * 0.5;\n        this.playItemTween(group, offsety, 620);\n        this.curLayoutGroup = group;\n    };\n    PicaTreasureOpenPanel.prototype.playAnimation = function () {\n        var _this = this;\n        this.titleimage.alpha = 0;\n        this.lightSprite.play(this.lightAniKey);\n        setTimeout(function () {\n            _this.starSprite.play(_this.starAniKey);\n        }, 208);\n        var titleTween = this.scene.tweens.add({\n            targets: this.titleimage,\n            alpha: {\n                from: 0,\n                to: 1\n            },\n            duration: 300,\n            onComplete: function () {\n                titleTween.stop();\n                titleTween.remove();\n            },\n        });\n        this.tweens.push(titleTween);\n        var buttonTween = this.scene.tweens.add({\n            targets: this.confirmBtn,\n            alpha: {\n                from: 0,\n                to: 1\n            },\n            duration: 200,\n            delay: 720,\n            onComplete: function () {\n                buttonTween.stop();\n                buttonTween.remove();\n            },\n        });\n        this.tweens.push(buttonTween);\n    };\n    PicaTreasureOpenPanel.prototype.playItemTween = function (gameobjet, from, delay) {\n        var _this = this;\n        var tweenIn = this.scene.tweens.add({\n            targets: gameobjet,\n            y: {\n                from: from,\n                to: 0\n            },\n            ease: "Back.easeOut",\n            duration: 300,\n            delay: delay,\n            onComplete: function () {\n                tweenIn.stop();\n                tweenIn.remove();\n                _this.playPageCount();\n            },\n        });\n        this.tweens.push(tweenIn);\n        var target = this.curLayoutGroup;\n        if (target) {\n            var tweenOut_1 = this.scene.tweens.add({\n                targets: target,\n                alpha: {\n                    from: 1,\n                    to: 0\n                },\n                duration: 200,\n                onComplete: function () {\n                    tweenOut_1.stop();\n                    tweenOut_1.remove();\n                    target.destroy();\n                },\n            });\n            this.tweens.push(tweenOut_1);\n        }\n    };\n    PicaTreasureOpenPanel.prototype.playPageCount = function () {\n        if (this.isDispose)\n            return;\n        var len = this.treasureData.length;\n        if (len < 6)\n            return;\n        this.pageCount.visible = true;\n        this.pagedown.visible = true;\n        var total = Math.ceil(len / 6);\n        var index = Math.ceil(this.indexed / 6);\n        this.pageCount.text = index + " /" + total;\n    };\n    PicaTreasureOpenPanel.prototype.getNextDatas = function () {\n        var datas = this.treasureData;\n        if (this.indexed >= datas.length)\n            return undefined;\n        var start = this.indexed;\n        var end = datas.length >= start + 6 ? start + 6 : datas.length;\n        this.indexed = end;\n        return datas.slice(start, end);\n    };\n    PicaTreasureOpenPanel.prototype.createLayoutGroup = function (arr) {\n        var group = new RewardLayoutGroup(this.scene, 0, this.maskHeight, 235 * this.dpr, this.maskHeight, this.dpr, this.zoom);\n        this.content.add(group);\n        group.setRewardDatas(arr);\n        return group;\n    };\n    PicaTreasureOpenPanel.prototype.createSprite = function (key, animkey, frame, indexs, frameRate, repeat) {\n        if (frameRate === void 0) { frameRate = 30; }\n        if (repeat === void 0) { repeat = 0; }\n        var sprite = this.scene.make.sprite({ key: key, frame: frame + "1" });\n        this.scene.anims.create({ key: animkey, frames: this.scene.anims.generateFrameNames(key, { prefix: frame + "", start: indexs[0], end: indexs[1] }), frameRate: frameRate, repeat: repeat });\n        return sprite;\n    };\n    PicaTreasureOpenPanel.prototype.onConfirmBtnClick = function () {\n        var datas = this.getNextDatas();\n        if (datas) {\n            var group = this.createLayoutGroup(datas);\n            var offsety = 160 * this.dpr + (group.height - this.height) * 0.5;\n            this.playItemTween(group, offsety, 200);\n            this.curLayoutGroup = group;\n        }\n        else {\n            if (this.closeHandler)\n                this.closeHandler.run();\n        }\n    };\n    return PicaTreasureOpenPanel;\n}(Phaser.GameObjects.Container));\n\nvar RewardLayoutGroup = /** @class */ (function (_super) {\n    __extends(RewardLayoutGroup, _super);\n    function RewardLayoutGroup(scene, x, y, width, height, dpr, zoom) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.setSize(width, height);\n        return _this;\n    }\n    RewardLayoutGroup.prototype.setRewardDatas = function (datas) {\n        if (!datas)\n            return;\n        var len = datas.length;\n        for (var i = 0; i < len; i++) {\n            var prop = new _Components__WEBPACK_IMPORTED_MODULE_3__["ItemButton"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_2__["UIAtlasName"].uicommon1, "roam_reward_ordinary_bg", this.dpr, this.zoom, true);\n            prop.setStateFrames("roam_reward_ordinary_bg", "roam_reward_rare_bg");\n            prop.setItemData(datas[i]);\n            this.add(prop);\n        }\n        this.setLayout();\n    };\n    RewardLayoutGroup.prototype.setLayout = function () {\n        var list = this.list;\n        if (list.length === 0)\n            return;\n        var cell = list[0];\n        var len = list.length;\n        var cellwidth = cell.width, cellHeight = cell.height;\n        if (len <= 3) {\n            var space = len === 2 ? 20 * this.dpr : 10 * this.dpr;\n            var width = len * cellwidth + space * (len - 1);\n            for (var i = 0; i < len; i++) {\n                var item = list[i];\n                item.x = -width * 0.5 + (cellwidth + space) * i + cellwidth * 0.5;\n            }\n        }\n        else if (len === 4) {\n            var spaceW = 20 * this.dpr, spaceH = 15 * this.dpr;\n            for (var i = 0; i < 2; i++) {\n                for (var j = 0; j < 2; j++) {\n                    var item = (list[i * 2 + j]);\n                    item.x = -(cellwidth + spaceW) * 0.5 + (cellwidth + spaceW) * j;\n                    item.y = -(cellHeight + spaceH) * 0.5 + (cellHeight + spaceH) * i;\n                }\n            }\n        }\n        else if (len === 5) {\n            var spaceW = 10 * this.dpr, spaceH = 15 * this.dpr;\n            var width = 3 * cellwidth + spaceW * 2;\n            var height = 2 * cellHeight + spaceH;\n            for (var i = 0; i < 3; i++) {\n                var item = (list[i]);\n                item.x = -width * 0.5 + (cellwidth + spaceW) * i + cellwidth * 0.5;\n                item.y = -height * 0.5 + cellHeight * 0.5;\n            }\n            for (var j = 0; j < 2; j++) {\n                var item = (list[j + 3]);\n                item.x = -(2 * cellwidth + spaceW) * 0.5 + cellwidth * 0.5 + (cellwidth + spaceW) * j;\n                item.y = height * 0.5 - cellHeight * 0.5;\n            }\n        }\n        else if (len === 6) {\n            var spaceW = 10 * this.dpr, spaceH = 15 * this.dpr;\n            var width = 3 * cellwidth + spaceW * 2;\n            var height = 2 * cellHeight + spaceH;\n            for (var i = 0; i < 2; i++) {\n                for (var j = 0; j < 3; j++) {\n                    var item = (list[i * 3 + j]);\n                    item.x = -width * 0.5 + (cellwidth + spaceW) * j + cellwidth * 0.5;\n                    item.y = -height * 0.5 + (cellHeight + spaceH) * i + cellHeight * 0.5;\n                }\n            }\n        }\n    };\n    return RewardLayoutGroup;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaTreasure/PicaTreasureOpenPanel.ts?')},"./src/pica/render/ui/PicaTreasure/PicaTreasurePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaTreasurePanel", function() { return PicaTreasurePanel; });\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\n/* harmony import */ var _PicaTreasureAllOpenPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PicaTreasureAllOpenPanel */ "./src/pica/render/ui/PicaTreasure/PicaTreasureAllOpenPanel.ts");\n/* harmony import */ var _PicaTreasureOpenPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PicaTreasureOpenPanel */ "./src/pica/render/ui/PicaTreasure/PicaTreasureOpenPanel.ts");\n/* harmony import */ var _PicaTreasurePreviewPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaTreasurePreviewPanel */ "./src/pica/render/ui/PicaTreasure/PicaTreasurePreviewPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar PicaTreasurePanel = /** @class */ (function (_super) {\n    __extends(PicaTreasurePanel, _super);\n    function PicaTreasurePanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].treasure, picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].uicommon1, picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].uicommon,\n            picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].circleeffect, picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].stareffect];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].PICATREASURE_NAME;\n        return _this;\n    }\n    PicaTreasurePanel.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        _super.prototype.resize.call(this, width, height);\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0, 0.88);\n        this.blackGraphic.fillRect(0, 0, width, height);\n        this.content.x = width / 2;\n        this.content.y = height / 2;\n        this.setSize(width * this.scale, height * this.scale);\n    };\n    PicaTreasurePanel.prototype.onShow = function () {\n        this.setInteractive();\n        this.setTreasureData(this.showData);\n    };\n    PicaTreasurePanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.previewPanel)\n            this.previewPanel.destroy();\n        if (this.treasureOpenPanel)\n            this.treasureOpenPanel.destroy();\n        if (this.treasureAllOpenPanel)\n            this.treasureAllOpenPanel.destroy();\n    };\n    PicaTreasurePanel.prototype.init = function () {\n        var width = this.cameraWidth;\n        var height = this.cameraHeight;\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.blackGraphic.setInteractive(new Phaser.Geom.Rectangle(0, 0, width / this.scale, height / this.scale), Phaser.Geom.Rectangle.Contains);\n        this.add(this.blackGraphic);\n        this.content = this.scene.make.container(undefined, false);\n        this.add(this.content);\n        this.resize(0, 0);\n        _super.prototype.init.call(this);\n    };\n    PicaTreasurePanel.prototype.setTreasureData = function (data) {\n        this.trasureData = data;\n        if (!this.mInitialized)\n            return;\n        if (!data)\n            return;\n        if (data.type === "preview") {\n            this.setPreviewData(data.data);\n        }\n        else if (data.type === "open") {\n            this.setTreasureOpenData(data.data);\n        }\n        else if (data.type === "roamdraw") {\n            this.setTreasureAllOpenData(data.data);\n        }\n        else {\n            this.setPreviewData(data.data);\n        }\n    };\n    PicaTreasurePanel.prototype.setPreviewData = function (data) {\n        this.openPreviewPanel();\n        this.previewPanel.setTreasureData(data);\n    };\n    PicaTreasurePanel.prototype.setTreasureOpenData = function (datas) {\n        this.openTreasureOpenPanel();\n        this.treasureOpenPanel.setTreasureData(datas);\n    };\n    PicaTreasurePanel.prototype.setTreasureAllOpenData = function (datas) {\n        this.openTreasureAllOpenPanel();\n        this.treasureAllOpenPanel.setTreasureData(datas);\n    };\n    PicaTreasurePanel.prototype.openPreviewPanel = function () {\n        var _this = this;\n        var wid = 334 * this.dpr;\n        var hei = 353 * this.dpr;\n        if (!this.previewPanel) {\n            this.previewPanel = new _PicaTreasurePreviewPanel__WEBPACK_IMPORTED_MODULE_6__["PicaTreasurePreviewPanel"](this.scene, this.render, wid, hei, this.key, this.dpr, this.scale);\n            this.previewPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, function () {\n                _this.hidePreviewPanel();\n                _this.setTreasureOpenData(new Array(6));\n            }), new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.OnCloseHandler));\n        }\n        this.content.add(this.previewPanel);\n        this.previewPanel.resize(wid, hei);\n        this.previewPanel.addListen();\n    };\n    PicaTreasurePanel.prototype.hidePreviewPanel = function () {\n        this.content.remove(this.previewPanel);\n        this.previewPanel.removeListen();\n    };\n    PicaTreasurePanel.prototype.openTreasureOpenPanel = function () {\n        var wid = this.width;\n        var hei = 310 * this.dpr;\n        if (!this.treasureOpenPanel) {\n            this.treasureOpenPanel = new _PicaTreasureOpenPanel__WEBPACK_IMPORTED_MODULE_5__["PicaTreasureOpenPanel"](this.scene, wid, hei, this.key, this.dpr, this.scale);\n            this.treasureOpenPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.OnCloseHandler));\n            this.treasureOpenPanel.y = -20 * this.dpr;\n        }\n        this.content.add(this.treasureOpenPanel);\n        this.treasureOpenPanel.resize(wid, hei);\n        this.treasureOpenPanel.addListen();\n    };\n    PicaTreasurePanel.prototype.hideOpenPanel = function () {\n        this.content.remove(this.treasureOpenPanel);\n        this.treasureOpenPanel.removeListen();\n    };\n    PicaTreasurePanel.prototype.openTreasureAllOpenPanel = function () {\n        var wid = this.width;\n        var hei = 320 * this.dpr;\n        if (!this.treasureAllOpenPanel) {\n            this.treasureAllOpenPanel = new _PicaTreasureAllOpenPanel__WEBPACK_IMPORTED_MODULE_4__["PicaTreasureAllOpenPanel"](this.scene, wid, hei, this.key, this.dpr, this.scale);\n            this.treasureAllOpenPanel.setHandler(new utils__WEBPACK_IMPORTED_MODULE_2__["Handler"](this, this.OnCloseHandler));\n            this.treasureAllOpenPanel.y = -20 * this.dpr;\n        }\n        this.content.add(this.treasureAllOpenPanel);\n        this.treasureAllOpenPanel.resize(wid, hei);\n        this.treasureAllOpenPanel.addListen();\n    };\n    PicaTreasurePanel.prototype.hideAllOpenPanel = function () {\n        this.content.remove(this.treasureAllOpenPanel);\n        this.treasureAllOpenPanel.removeListen();\n    };\n    PicaTreasurePanel.prototype.OnCloseHandler = function () {\n        this.render.renderEmitter(this.key + "_close");\n    };\n    return PicaTreasurePanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_3__["PicaBasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaTreasure/PicaTreasurePanel.ts?')},"./src/pica/render/ui/PicaTreasure/PicaTreasurePreviewPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaTreasurePreviewPanel", function() { return PicaTreasurePreviewPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRender */ "./src/pica/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var _Components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Components */ "./src/pica/render/ui/Components/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaTreasurePreviewPanel = /** @class */ (function (_super) {\n    __extends(PicaTreasurePreviewPanel, _super);\n    function PicaTreasurePreviewPanel(scene, render, width, height, key, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        _this.render = render;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.key = key;\n        _this.setSize(width, height);\n        _this.init();\n        return _this;\n    }\n    PicaTreasurePreviewPanel.prototype.resize = function (w, h) {\n        this.setSize(w, h);\n        this.rewardGameScroll.refreshMask();\n    };\n    PicaTreasurePreviewPanel.prototype.addListen = function () {\n        this.confirmBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onConfirmBtnClick, this);\n        this.closeBtn.on("pointerup", this.OnClosePanel, this);\n    };\n    PicaTreasurePreviewPanel.prototype.removeListen = function () {\n        this.confirmBtn.off("click", this.onConfirmBtnClick, this);\n        this.closeBtn.on("pointerup", this.OnClosePanel, this);\n    };\n    PicaTreasurePreviewPanel.prototype.init = function () {\n        var _this = this;\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, this.width, this.height, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon1, "bg1", utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].background_w(this.dpr));\n        this.add(this.bg);\n        var posY = -this.bg.height * 0.5;\n        this.titleimage = this.scene.make.image({ x: 0, y: posY + 5 * this.dpr, key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon1, frame: "title" }, false);\n        this.titleimage.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titleName = this.scene.make.text({\n            x: 0, y: this.titleimage.y + 2 * this.dpr, text: "",\n            style: utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].titleYellowStyle_m(this.dpr)\n        }).setOrigin(0.5).setFontStyle("bold");\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "close");\n        this.closeBtn.setDisplaySize(28 * this.dpr, 28 * this.dpr);\n        this.closeBtn.setPosition(this.width * 0.5 - 8 * this.dpr, posY + this.dpr * 7);\n        this.add([this.titleimage, this.titleName, this.closeBtn]);\n        this.bgicon = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].treasure, frame: "treasure_bg" });\n        this.bgicon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.bgicon.y = this.titleName.y + this.bgicon.height * 0.5 + 34 * this.dpr;\n        this.add([this.bg, this.bgicon]);\n        this.mDetailDisplay = new picaRender__WEBPACK_IMPORTED_MODULE_1__["DetailDisplay"](this.scene, this.render);\n        this.mDetailDisplay.y = this.bgicon.y;\n        this.mDetailDisplay.setFixedScale(this.dpr / this.scale);\n        this.mDetailDisplay.setSize(72 * this.dpr, 72 * this.dpr);\n        this.add(this.mDetailDisplay);\n        var rewardConWdith = 360 * this.dpr, rewardConHeight = 92 * this.dpr;\n        this.rewardCon = this.scene.make.container(undefined, false).setSize(rewardConWdith, rewardConHeight);\n        this.add(this.rewardCon);\n        this.rewardCon.setPosition(0, -posY - rewardConHeight * 0.5 - 68 * this.dpr);\n        var rewardTitle = this.scene.make.text({\n            x: 0,\n            y: -rewardConHeight * 0.5 + 8 * this.dpr,\n            text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("treasure.tipslabel"),\n            style: {\n                color: "#253FCA",\n                fontSize: 12 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        var materialLine = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].treasure, frame: "treasure_decorate_left" });\n        materialLine.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var materialLine2 = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].treasure, frame: "treasure_decorate_right" });\n        materialLine2.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var linePosx = -rewardTitle.width * 0.5 - materialLine.width * 0.5 - 10 * this.dpr;\n        materialLine.setPosition(linePosx, rewardTitle.y);\n        materialLine2.setPosition(-linePosx, rewardTitle.y);\n        this.rewardCon.add([rewardTitle, materialLine, materialLine2]);\n        this.rewardGameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: 0,\n            y: 2 * this.dpr,\n            width: 295 * this.dpr,\n            height: 90 * this.dpr,\n            zoom: this.zoom,\n            dpr: this.dpr,\n            align: 2,\n            orientation: 1,\n            space: 10 * this.dpr,\n            valuechangeCallback: undefined,\n            cellupCallBack: function (gameobject) {\n                _this.onRewardItemHandler(gameobject);\n            }\n        });\n        this.rewardCon.add(this.rewardGameScroll);\n        this.confirmBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].treasure, "butt", "butt", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.open"));\n        this.confirmBtn.y = -posY - 38 * this.dpr;\n        this.confirmBtn.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr, 20));\n        this.confirmBtn.setFontStyle("bold");\n        this.add(this.confirmBtn);\n    };\n    PicaTreasurePreviewPanel.prototype.setHandler = function (send, close) {\n        this.sendHandler = send;\n        this.closeHandler = close;\n    };\n    PicaTreasurePreviewPanel.prototype.setTreasureData = function (datas) {\n        this.titleName.text = "";\n        this.setTreasureItems(datas);\n    };\n    PicaTreasurePreviewPanel.prototype.setTreasureItems = function (datas) {\n        var len = 10; // datas.length;\n        this.rewardGameScroll.clearItems();\n        for (var i = 0; i < len; i++) {\n            var item = new _Components__WEBPACK_IMPORTED_MODULE_4__["ItemButton"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].uicommon, "bag_icon_common_bg", this.dpr, this.zoom, false);\n            item.y = 0;\n            this.rewardGameScroll.addItem(item);\n        }\n        this.rewardGameScroll.Sort();\n    };\n    PicaTreasurePreviewPanel.prototype.onConfirmBtnClick = function () {\n        var data = this.treasureData;\n        if (this.sendHandler)\n            this.sendHandler.run();\n    };\n    PicaTreasurePreviewPanel.prototype.OnClosePanel = function () {\n        if (this.closeHandler)\n            this.closeHandler.run();\n    };\n    PicaTreasurePreviewPanel.prototype.onRewardItemHandler = function (gameobject) {\n        if (this.selectMaterial && this.selectMaterial !== gameobject) {\n            this.selectMaterial.select = false;\n        }\n        gameobject.select = !gameobject.select;\n        this.selectMaterial = gameobject;\n    };\n    return PicaTreasurePreviewPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaTreasure/PicaTreasurePreviewPanel.ts?')},"./src/pica/render/ui/PicaWork/PicaWorkOldPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaWorkPanel", function() { return PicaWorkPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaWorkPanel = /** @class */ (function (_super) {\n    __extends(PicaWorkPanel, _super);\n    function PicaWorkPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAWORK_NAME;\n        _this.workItems = [];\n        return _this;\n    }\n    PicaWorkPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, w, h);\n        this.setSize(w, h);\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0, 0.5);\n        this.mBackground.fillRoundedRect(-this.x, -this.y, w, h);\n        this.content.x = w * 0.5;\n        this.content.y = h * 0.5;\n        this.mGameScroll.refreshMask();\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        this.itemtips.setInvalidArea(utils__WEBPACK_IMPORTED_MODULE_4__["Tool"].getRectangle(this.helpBtn, this.scene));\n    };\n    PicaWorkPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    };\n    PicaWorkPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on("pointerup", this.OnClosePanel, this);\n    };\n    PicaWorkPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off("pointerup", this.OnClosePanel, this);\n    };\n    PicaWorkPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "work/work.png", "work/work.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl + ".json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].common2Url + ".png", picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].common2Url + ".json");\n        _super.prototype.preload.call(this);\n    };\n    PicaWorkPanel.prototype.init = function () {\n        var _this = this;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        this.add(this.mBackground);\n        var conWdith = 295 * this.dpr;\n        var conHeight = 454 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.add(this.content);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, conWdith, conHeight, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "bg", {\n            left: 30 * this.dpr,\n            top: 30 * this.dpr,\n            bottom: 30 * this.dpr,\n            right: 30 * this.dpr,\n        });\n        var posY = -conHeight * 0.5;\n        this.titlebg = this.scene.make.image({ x: 0, y: 0, key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, frame: "title" });\n        this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titlebg.y = posY + 3 * this.dpr;\n        this.tilteName = this.scene.make.text({ x: 0, y: this.titlebg.y + 2 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.title"), style: { color: "#905C06", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        this.closeBtn = this.scene.make.image({ x: conWdith * 0.5 - this.dpr * 5, y: posY + this.dpr * 5, key: picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, frame: "close" });\n        this.tilteName.setStroke("#905C06", 2);\n        this.tilteName.setResolution(this.dpr);\n        this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.closeBtn.setInteractive();\n        this.timesPorgress = new ProgressItem(this.scene, 76 * this.dpr, 14 * this.dpr, this.key, "slider_orange", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.worktimes"), this.dpr);\n        this.timesPorgress.setImageValue(this.key, "icon_work");\n        this.timesPorgress.y = -conHeight * 0.5 + 40 * this.dpr;\n        this.timesPorgress.x = -43 * this.dpr;\n        this.powerProgress = new ProgressItem(this.scene, 76 * this.dpr, 14 * this.dpr, this.key, "slider_blue", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.vim"), this.dpr);\n        this.powerProgress.setImageValue(this.key, "icon_strength");\n        this.powerProgress.y = this.timesPorgress.y;\n        this.powerProgress.x = 70 * this.dpr;\n        this.helpBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "icon_tips", "icon_tips");\n        this.helpBtn.y = this.powerProgress.y;\n        this.helpBtn.x = this.powerProgress.x + this.powerProgress.width * 0.5 + 5 * this.dpr + this.helpBtn.width * 0.5;\n        this.helpBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onHelpHandler, this);\n        this.mGameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["GameScroller"](this.scene, {\n            x: 0,\n            y: 18 * this.dpr,\n            width: conWdith,\n            height: conHeight - 70 * this.dpr,\n            zoom: this.scale,\n            dpr: this.dpr,\n            align: 2,\n            orientation: 0,\n            space: 10 * this.dpr,\n            selfevent: true,\n            cellupCallBack: function (gameobject) {\n                _this.onPointerUpHandler(gameobject);\n            }\n        });\n        this.itemtips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ItemInfoTips"](this.scene, 150 * this.dpr, 46 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, "tips_bg", this.dpr);\n        this.itemtips.setVisible(false);\n        this.content.add([this.bg, this.closeBtn, this.titlebg, this.tilteName, this.timesPorgress, this.powerProgress, this.helpBtn, this.mGameScroll, this.itemtips]);\n        this.resize();\n        _super.prototype.init.call(this);\n        this.emit("questlist");\n    };\n    PicaWorkPanel.prototype.setWorkDataList = function (content) {\n        var datas = content.jobs;\n        this.mGameScroll.clearItems(false);\n        for (var _i = 0, _a = this.workItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n        }\n        for (var i = 0; i < datas.length; i++) {\n            var item = void 0;\n            if (i < this.workItems.length) {\n                item = this.workItems[i];\n            }\n            else {\n                item = new WorkItem(this.scene, this.key, this.dpr);\n                this.workItems.push(item);\n                item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onSendHandler), new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onItemInfoTips));\n            }\n            item.visible = true;\n            item.setJobData(datas[i]);\n            this.mGameScroll.addItem(item);\n        }\n        this.mGameScroll.Sort();\n    };\n    PicaWorkPanel.prototype.setProgressData = function (enery, work) {\n        if (work)\n            this.timesPorgress.setProgressDatas(work);\n        if (enery)\n            this.powerProgress.setProgressDatas(enery);\n    };\n    PicaWorkPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaWorkPanel.prototype.onHelpHandler = function () {\n        this.itemtips.setVisible(!this.itemtips.visible);\n        this.itemtips.setText(utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.worktips"));\n        this.itemtips.setTipsPosition(this.helpBtn, this.content);\n    };\n    PicaWorkPanel.prototype.OnClosePanel = function () {\n        this.emit("hide");\n    };\n    PicaWorkPanel.prototype.onPointerUpHandler = function (gameobject) {\n        if (this.selectItem)\n            this.selectItem.setExtend(false);\n        gameobject.setExtend(true);\n        this.selectItem = gameobject;\n        this.mGameScroll.Sort(true);\n    };\n    PicaWorkPanel.prototype.onSendHandler = function (id) {\n        this.emit("questwork", id);\n    };\n    PicaWorkPanel.prototype.onItemInfoTips = function (data, isdown, pos) {\n        this.itemtips.visible = isdown;\n        this.itemtips.x = pos.x * this.scale - this.content.x;\n        this.itemtips.y = pos.y * this.scale - this.content.y - 30 * this.dpr;\n        this.itemtips.setText(this.getDesText(data));\n    };\n    PicaWorkPanel.prototype.getDesText = function (data) {\n        if (!data)\n            data = { "sellingPrice": true, tradable: false };\n        var text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.attri", { "name": "" + data.name, "value": data.neededCount });\n        return text;\n    };\n    return PicaWorkPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\nvar WorkItem = /** @class */ (function (_super) {\n    __extends(WorkItem, _super);\n    function WorkItem(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.imageValues = [];\n        _this.isExtend = false;\n        _this.pointTimestamp = 0;\n        _this.key = key;\n        _this.dpr = dpr;\n        var width = 256 * dpr, height = 68 * dpr;\n        _this.setSize(width, height);\n        _this.topCon = scene.make.container(undefined, false);\n        _this.add(_this.topCon);\n        _this.topCon.setSize(width, height);\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, width, height, _this.key, "bg_default", {\n            left: 6 * _this.dpr,\n            top: 0 * _this.dpr,\n            bottom: 0 * _this.dpr,\n            right: 6 * dpr\n        });\n        _this.headIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](scene, 0, 0);\n        _this.title = scene.make.text({ x: -_this.width * 0.5 + 60 * dpr, y: -height * 0.5 + 5 * dpr, text: "", style: { color: "#ffffff", fontSize: 13 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        _this.salaryvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](scene, 60 * dpr, 20 * dpr, _this.key, undefined, _this.dpr);\n        _this.salaryvalue.setTextStyle({ color: "#FFEA00" });\n        _this.salaryvalue.setFrameValue("", picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "iv_coin");\n        _this.salaryvalue.x = _this.width * 0.5 - 30 * dpr;\n        _this.salaryvalue.y = -_this.height * 0.5 + 10 * dpr;\n        _this.salaryLabel = scene.make.text({ x: _this.salaryvalue.x - _this.salaryvalue.width * 0.5 - 5 * dpr, y: _this.salaryvalue.y, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.salary") + ":", style: { color: "#ffffff", fontSize: 11 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        _this.salaryLabel.setOrigin(1, 0.5);\n        _this.worklabel = scene.make.text({ x: -_this.width * 0.5 + 60 * dpr, y: _this.height * 0.5 - 12 * dpr, text: "", style: { color: "#ffffff", fontSize: 11 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        _this.worklabel.setOrigin(0, 0.5);\n        _this.topCon.add([_this.bg, _this.headIcon, _this.title, _this.salaryvalue, _this.salaryLabel, _this.worklabel]);\n        var bottomHeight = 46 * dpr;\n        _this.bottomCon = scene.make.container(undefined, false);\n        _this.bottomCon.setSize(width, bottomHeight);\n        _this.workbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, _this.width, bottomHeight, _this.key, "bg_a_unfold", {\n            left: 6 * _this.dpr,\n            top: 0 * _this.dpr,\n            bottom: 0 * _this.dpr,\n            right: 6 * dpr\n        });\n        _this.workBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](scene, 0, 0, 90 * dpr, 36 * dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.title"), dpr, undefined, {\n            left: 14 * _this.dpr,\n            top: 14 * _this.dpr,\n            bottom: 14 * _this.dpr,\n            right: 14 * dpr\n        });\n        _this.workBtn.x = 0;\n        _this.workBtn.setTextStyle({ fontSize: 12 * dpr, color: "#996600", fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT });\n        _this.workBtn.setFontStyle("bold");\n        _this.bottomCon.add([_this.workbg, _this.workBtn]);\n        _this.workBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), _this.onWorkHandler, _this);\n        return _this;\n    }\n    WorkItem.prototype.setHandler = function (send, tips) {\n        this.sendHandler = send;\n        this.tipsHandler = tips;\n    };\n    WorkItem.prototype.setJobData = function (data) {\n        var _this = this;\n        this.jobData = data;\n        var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(data.display.texturePath);\n        this.headIcon.load(url, this, function () {\n            _this.headIcon.scale = 1;\n            _this.headIcon.scaleX = 45 * _this.dpr / _this.headIcon.displayHeight;\n            _this.headIcon.scaleY = _this.headIcon.scaleX;\n            _this.headIcon.x = -_this.width * 0.5 + _this.headIcon.displayWidth * 0.5 + 10 * _this.dpr;\n        });\n        this.title.text = data.name;\n        var rewardTex = "0";\n        if (data.rewards) {\n            var countRange = data.rewards[0].countRange;\n            rewardTex = countRange.start + "~" + countRange.stop;\n        }\n        this.salaryvalue.setText(rewardTex);\n        this.salaryvalue.x = this.width * 0.5 - this.salaryvalue.width * 0.5 - 10 * this.dpr;\n        this.salaryLabel.x = this.salaryvalue.x - this.salaryvalue.width * 0.5 - 5 * this.dpr;\n        this.worklabel.text = data.detail;\n        var matrr = data.targets;\n        for (var _i = 0, _a = this.imageValues; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n        }\n        var posx = -this.width * 0.5 + 55 * this.dpr;\n        for (var i = 0; i < matrr.length; i++) {\n            var item = void 0;\n            var tempdata = matrr[i];\n            if (i < this.imageValues.length) {\n                item = this.imageValues[i];\n            }\n            else {\n                item = new PointerImageValue(this.scene, 35 * this.dpr, 15 * this.dpr, this.key, this.dpr);\n                this.topCon.add(item);\n                this.imageValues.push(item);\n                item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onTipsandler));\n            }\n            var tempurl = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(tempdata.display.texturePath);\n            item.setUrlValue(tempurl, tempdata.neededCount);\n            item.setTextStyle({ color: (tempdata.count >= tempdata.neededCount ? "#000000" : "#E71313") });\n            item.setImageData(tempdata);\n            item.visible = true;\n            item.x = posx + item.width * 0.5;\n            item.y = 0;\n            posx += item.width + 20 * this.dpr;\n        }\n    };\n    WorkItem.prototype.setExtend = function (extend) {\n        if (this.isExtend === extend)\n            return;\n        this.isExtend = extend;\n        this.bottomCon.visible = extend;\n        if (extend) {\n            this.add(this.bottomCon);\n            var height = this.topCon.height + this.bottomCon.height;\n            this.setSize(this.width, height);\n            this.topCon.y = -height * 0.5 + this.topCon.height * 0.5;\n            this.bottomCon.y = this.topCon.y + this.topCon.height * 0.5 + this.bottomCon.height * 0.5;\n            this.bg.setFrame("bg_click");\n        }\n        else {\n            this.remove(this.bottomCon);\n            var height = this.topCon.height;\n            this.setSize(this.width, height);\n            this.topCon.y = 0;\n            this.bg.setFrame("bg_default");\n        }\n    };\n    WorkItem.prototype.destroy = function (fromScene) {\n        _super.prototype.destroy.call(this, fromScene);\n    };\n    WorkItem.prototype.onWorkHandler = function () {\n        var curTimestamp = new Date().getTime();\n        if (this.pointTimestamp > curTimestamp)\n            return;\n        this.pointTimestamp = curTimestamp + 1000;\n        if (this.sendHandler)\n            this.sendHandler.runWith(this.jobData.id);\n    };\n    WorkItem.prototype.onTipsandler = function (item, isdown) {\n        var worldpos = item.getWorldTransformMatrix();\n        if (this.tipsHandler)\n            this.tipsHandler.runWith([item.imageData, isdown, new Phaser.Geom.Point(worldpos.tx, worldpos.ty)]);\n    };\n    return WorkItem;\n}(Phaser.GameObjects.Container));\nvar PointerImageValue = /** @class */ (function (_super) {\n    __extends(PointerImageValue, _super);\n    function PointerImageValue(scene, width, height, key, dpr) {\n        var _this = _super.call(this, scene, width, height, key, undefined, dpr) || this;\n        _this.addListen();\n        return _this;\n    }\n    PointerImageValue.prototype.setImageData = function (data) {\n        this.imageData = data;\n    };\n    PointerImageValue.prototype.setUrlValue = function (url, value) {\n        var _this = this;\n        this.value.text = value;\n        this.icon.load(url, this, function () {\n            _this.icon.scale = 1;\n            _this.icon.scaleY = 14 * _this.dpr / _this.icon.displayHeight;\n            _this.icon.scaleX = _this.icon.scaleY;\n            _this.value.x = _this.icon.x + _this.icon.displayWidth * 0.5 + 10 * _this.dpr;\n            _this.resetSize();\n        });\n    };\n    PointerImageValue.prototype.addListen = function () {\n        this.setInteractive();\n        this.on("pointerdown", this.onClickDownHandler, this);\n        this.scene.input.on("pointerup", this.onClickUpHandler, this);\n    };\n    PointerImageValue.prototype.removeListen = function () {\n        this.disableInteractive();\n        this.off("pointerdown", this.onClickDownHandler, this);\n        this.scene.input.off("pointerup", this.onClickUpHandler, this);\n    };\n    PointerImageValue.prototype.destroy = function (fromScene) {\n        this.removeListen();\n        _super.prototype.destroy.call(this, fromScene);\n    };\n    PointerImageValue.prototype.setHandler = function (tips) {\n        this.tipsHandler = tips;\n    };\n    PointerImageValue.prototype.create = function () {\n        this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, 0);\n        this.value = this.scene.make.text({ x: 0, y: this.offset.y, text: "10", style: { color: "#ffffff", fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        this.value.setOrigin(0, 0.5);\n        this.add([this.icon, this.value]);\n    };\n    PointerImageValue.prototype.onClickDownHandler = function () {\n        var pos = new Phaser.Geom.Point();\n        if (this.tipsHandler)\n            this.tipsHandler.runWith([this, true]);\n    };\n    PointerImageValue.prototype.onClickUpHandler = function () {\n        if (this.tipsHandler)\n            this.tipsHandler.runWith([this, false]);\n    };\n    return PointerImageValue;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"]));\nvar ProgressItem = /** @class */ (function (_super) {\n    __extends(ProgressItem, _super);\n    function ProgressItem(scene, width, height, key, frame, title, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        var barConfig = {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height,\n            background: {\n                x: 0,\n                y: 0,\n                width: width,\n                height: height,\n                config: {\n                    top: 0 * dpr,\n                    left: 7 * dpr,\n                    right: 7 * dpr,\n                    bottom: 0 * dpr,\n                },\n                key: key,\n                frame: "slider_bottom"\n            },\n            bar: {\n                x: 0,\n                y: 0,\n                width: width - 4 * dpr,\n                height: height - 4 * dpr,\n                config: {\n                    top: 0 * dpr,\n                    left: 7 * dpr,\n                    right: 7 * dpr,\n                    bottom: 0 * dpr,\n                },\n                key: key,\n                frame: frame\n            },\n            dpr: dpr,\n            textConfig: undefined\n        };\n        _this.progress = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ProgressBar"](scene, barConfig);\n        _this.add(_this.progress);\n        _this.imgvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](scene, _this.width - 20 * dpr, _this.height, key, undefined, dpr);\n        _this.imgvalue.y = dpr;\n        _this.add(_this.imgvalue);\n        _this.imgvalue.setTextStyle({ fontSize: 10 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].NUMBER });\n        _this.imgvalue.setTextFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.title = scene.make.text({ x: -_this.progress.width * 0.5 - 3 * dpr, y: 0, text: title, style: { color: "#6A7AFF", fontSize: 9 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        _this.title.setOrigin(1, 0.5);\n        _this.add(_this.title);\n        return _this;\n    }\n    ProgressItem.prototype.setImageValue = function (key, frame) {\n        this.imgvalue.setFrameValue("", key, frame);\n    };\n    ProgressItem.prototype.setProgressDatas = function (value) {\n        this.progress.setProgress(value.value, value.max);\n        this.imgvalue.setText(value.value + "/" + value.max);\n    };\n    return ProgressItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaWork/PicaWorkOldPanel.ts?')},"./src/pica/render/ui/PicaWork/PicaWorkPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaWorkPanel", function() { return PicaWorkPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaWorkPanel = /** @class */ (function (_super) {\n    __extends(PicaWorkPanel, _super);\n    function PicaWorkPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.imageValues = [];\n        _this.curProgress = 0;\n        _this.isWorking = false;\n        _this.moneyAniKey = "workemoeny";\n        _this.starAniKey = "workstar";\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_2__["ModuleName"].PICAWORK_NAME;\n        return _this;\n    }\n    PicaWorkPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, w, h);\n        this.setSize(w, h);\n        this.content.x = w * 0.5;\n        this.content.y = h - this.content.height * 0.5;\n        this.content.setInteractive();\n    };\n    PicaWorkPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.addListen();\n        this.render.renderEmitter(this.key + "_initialized");\n    };\n    PicaWorkPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on("pointerup", this.OnClosePanel, this);\n    };\n    PicaWorkPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off("pointerup", this.OnClosePanel, this);\n    };\n    PicaWorkPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    PicaWorkPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "work/work.png", "work/work.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].textureUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl), picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].jsonUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].commonUrl));\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].textureUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].common2Url), picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].jsonUrl(picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasName"].common2Url));\n        _super.prototype.preload.call(this);\n    };\n    PicaWorkPanel.prototype.init = function () {\n        var conWdith = this.scaleWidth;\n        var conHeight = 153 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.add(this.content);\n        this.bg = this.scene.make.image({ key: this.key, frame: "work_bg" });\n        this.bg.y = conHeight * 0.5 - this.bg.height * 0.5;\n        this.headIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, 0, this.key, "work_npc");\n        this.headIcon.x = -conWdith * 0.5 + 65 * this.dpr;\n        this.headIcon.y = -5 * this.dpr;\n        this.headIcon.scale = this.dpr;\n        this.headIcon.visible = false;\n        var namebg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, 95 * this.dpr, 24 * this.dpr, this.key, "work_name", {\n            left: 14 * this.dpr,\n            top: 0 * this.dpr,\n            bottom: 0 * this.dpr,\n            right: 14 * this.dpr,\n        });\n        namebg.x = -conWdith * 0.5 + namebg.width * 0.5 + 15 * this.dpr;\n        namebg.y = 35 * this.dpr;\n        this.titleName = this.scene.make.text({ x: namebg.x, y: namebg.y, text: "", style: { color: "#FFE11A", fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } }).setOrigin(0.5);\n        this.salaryLabel = this.scene.make.text({ x: -conWdith * 0.5 + 20 * this.dpr, y: this.bg.y + 7 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.salary") + ":", style: utils__WEBPACK_IMPORTED_MODULE_4__["UIHelper"].whiteStyle(this.dpr, 11) });\n        this.salaryLabel.setOrigin(0, 0.5);\n        this.salaryvalue = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"](this.scene, 60 * this.dpr, 20 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].commonKey, "iv_coin", this.dpr);\n        this.salaryvalue.setOffset(-this.dpr, 0);\n        this.salaryvalue.setTextStyle({ color: "#FFEA00" });\n        this.salaryvalue.setLayout(1);\n        this.salaryvalue.x = this.salaryLabel.x + this.salaryLabel.width + this.salaryvalue.width * 0.5 + 3 * this.dpr;\n        this.salaryvalue.y = this.salaryLabel.y;\n        this.workbutton = new ProgressItem(this.scene, 132 * this.dpr, 35 * this.dpr, this.key, "progress_top", utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.title"), this.dpr);\n        this.workbutton.x = 30 * this.dpr;\n        this.workbutton.y = 5 * this.dpr;\n        this.workbutton.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSendHandler, this);\n        this.starSprite = this.createSprite(this.key, this.starAniKey, "star", [1, 30], 24);\n        this.moneySprite = this.createSprite(this.key, this.moneyAniKey, "workover", [1, 10], 24);\n        this.starSprite.x = this.workbutton.x;\n        this.starSprite.y = this.workbutton.y;\n        this.moneySprite.x = this.starSprite.x;\n        this.moneySprite.y = this.starSprite.y;\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "close", "close");\n        this.closeBtn.y = this.bg.y + 2 * this.dpr;\n        this.closeBtn.x = this.content.width * 0.5 - this.closeBtn.width * 0.5 - 10 * this.dpr;\n        this.itemtips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ItemInfoTips"](this.scene, 150 * this.dpr, 46 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_3__["UIAtlasKey"].common2Key, "tips_bg", this.dpr);\n        this.itemtips.setVisible(false);\n        this.content.add([this.headIcon, this.bg, this.closeBtn, namebg, this.titleName, this.salaryLabel, this.salaryvalue, this.workbutton, this.starSprite, this.moneySprite, this.closeBtn, this.itemtips]);\n        this.resize();\n        _super.prototype.init.call(this);\n        this.render.renderEmitter(this.key + "_questlist");\n    };\n    PicaWorkPanel.prototype.setWorkData = function (jobData) {\n        this.setJobData(jobData);\n        this.workbutton.setProgressDatas(0, 100);\n    };\n    PicaWorkPanel.prototype.setWorkChance = function (count) {\n        if (count <= 0)\n            this.workbutton.disInteractive();\n        else\n            this.workbutton.setInteractive();\n    };\n    PicaWorkPanel.prototype.setJobData = function (data) {\n        var _this = this;\n        this.jobData = data;\n        var url = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(data.display.texturePath);\n        this.headIcon.load(url, this, function () {\n            _this.headIcon.scale = _this.dpr;\n        });\n        this.headIcon.visible = true;\n        this.titleName.text = data.name;\n        var rewardTex = "0";\n        if (data.rewards) {\n            var countRange = data.rewards[0].countRange;\n            rewardTex = countRange.start + "~" + countRange.stop;\n        }\n        this.salaryvalue.setText(rewardTex);\n        var matrr = data.targets;\n        for (var _i = 0, _a = this.imageValues; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n        }\n        var posx = this.salaryvalue.x + this.salaryvalue.width * 0.5 + 20 * this.dpr;\n        for (var i = 0; i < matrr.length; i++) {\n            var item = void 0;\n            var tempdata = matrr[i];\n            if (i < this.imageValues.length) {\n                item = this.imageValues[i];\n            }\n            else {\n                item = new PointerImageValue(this.scene, 35 * this.dpr, 15 * this.dpr, this.key, this.dpr);\n                this.content.add(item);\n                this.imageValues.push(item);\n                item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_4__["Handler"](this, this.onItemInfoTips));\n            }\n            var tempurl = utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getOsdRes(tempdata.texturePath);\n            item.setUrlValue(tempurl, tempdata.neededCount);\n            item.setTextStyle({ color: (tempdata.count >= tempdata.neededCount ? "#000000" : "#E71313") });\n            item.setImageData(tempdata);\n            item.visible = true;\n            item.x = posx + item.width * 0.5;\n            item.y = this.salaryLabel.y;\n            item.visible = true;\n            posx += item.width + 20 * this.dpr;\n        }\n    };\n    PicaWorkPanel.prototype.createSprite = function (key, animkey, frame, indexs, frameRate, repeat, compl) {\n        if (frameRate === void 0) { frameRate = 30; }\n        if (repeat === void 0) { repeat = 0; }\n        var sprite = this.scene.make.sprite({ key: key, frame: frame + "1" });\n        sprite.visible = false;\n        var anima = this.scene.anims.create({ key: animkey, frames: this.scene.anims.generateFrameNames(key, { prefix: frame + "", start: indexs[0], end: indexs[1] }), frameRate: frameRate, repeat: repeat });\n        anima.removeAllListeners();\n        anima.on(Phaser.Animations.Events.ANIMATION_COMPLETE, function () {\n            sprite.visible = false;\n            if (compl)\n                compl.run();\n        }, this);\n        anima.on(Phaser.Animations.Events.ANIMATION_START, function () {\n            sprite.visible = true;\n        }, this);\n        return sprite;\n    };\n    PicaWorkPanel.prototype.calculateTimeout = function () {\n        var _this = this;\n        this.isWorking = true;\n        this.interTimeerID = setTimeout(function () {\n            _this.curProgress += 0.1;\n            _this.workbutton.setProgressDatas(_this.curProgress, 100);\n            if (_this.curProgress < 100) {\n                _this.calculateTimeout();\n            }\n            else {\n                _this.isWorking = false;\n                _this.curProgress = 0;\n                _this.workbutton.setProgressDatas(_this.curProgress, 100);\n                _this.render.renderEmitter(_this.key + "_questwork");\n                _this.interTimeerID = undefined;\n                _this.moneySprite.play(_this.moneyAniKey);\n            }\n        }, 20);\n    };\n    PicaWorkPanel.prototype.OnClosePanel = function () {\n        if (this.interTimeerID)\n            clearTimeout(this.interTimeerID);\n        this.render.renderEmitter(this.key + "_hide");\n    };\n    PicaWorkPanel.prototype.onSendHandler = function (id) {\n        this.curProgress += 3;\n        if (!this.isWorking)\n            this.calculateTimeout();\n        this.starSprite.play(this.starAniKey, true);\n    };\n    PicaWorkPanel.prototype.onItemInfoTips = function (item) {\n        var data = item.imageData;\n        this.itemtips.visible = true;\n        this.itemtips.setTipsPosition(item, this);\n        this.itemtips.setText(this.getDesText(data));\n    };\n    PicaWorkPanel.prototype.getDesText = function (data) {\n        if (!data)\n            data = { "sellingPrice": true, tradable: false };\n        var text = utils__WEBPACK_IMPORTED_MODULE_4__["i18n"].t("work.attri", { "name": "" + data.name, "value": data.neededCount });\n        return text;\n    };\n    return PicaWorkPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\nvar PointerImageValue = /** @class */ (function (_super) {\n    __extends(PointerImageValue, _super);\n    function PointerImageValue(scene, width, height, key, dpr) {\n        var _this = _super.call(this, scene, width, height, key, undefined, dpr) || this;\n        _this.addListen();\n        return _this;\n    }\n    PointerImageValue.prototype.setImageData = function (data) {\n        this.imageData = data;\n    };\n    PointerImageValue.prototype.setUrlValue = function (url, value) {\n        var _this = this;\n        this.value.text = value;\n        this.icon.load(url, this, function () {\n            _this.icon.scale = 1;\n            _this.icon.scaleY = 14 * _this.dpr / _this.icon.displayHeight;\n            _this.icon.scaleX = _this.icon.scaleY;\n            _this.value.x = _this.icon.x + _this.icon.displayWidth * 0.5 + 10 * _this.dpr;\n            _this.resetSize();\n        });\n    };\n    PointerImageValue.prototype.addListen = function () {\n        this.setInteractive();\n        this.on("pointerdown", this.onClickDownHandler, this);\n        this.scene.input.on("pointerup", this.onClickUpHandler, this);\n    };\n    PointerImageValue.prototype.removeListen = function () {\n        this.disableInteractive();\n        this.off("pointerdown", this.onClickDownHandler, this);\n        this.scene.input.off("pointerup", this.onClickUpHandler, this);\n    };\n    PointerImageValue.prototype.destroy = function (fromScene) {\n        this.removeListen();\n        _super.prototype.destroy.call(this, fromScene);\n    };\n    PointerImageValue.prototype.setHandler = function (tips) {\n        this.tipsHandler = tips;\n    };\n    PointerImageValue.prototype.create = function () {\n        this.icon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](this.scene, 0, 0);\n        this.value = this.scene.make.text({ x: 0, y: this.offset.y, text: "10", style: { color: "#ffffff", fontSize: 11 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        this.value.setOrigin(0, 0.5);\n        this.add([this.icon, this.value]);\n    };\n    PointerImageValue.prototype.onClickDownHandler = function () {\n        var pos = new Phaser.Geom.Point();\n        if (this.tipsHandler)\n            this.tipsHandler.runWith([this, true]);\n    };\n    PointerImageValue.prototype.onClickUpHandler = function () {\n        if (this.tipsHandler)\n            this.tipsHandler.runWith([this, false]);\n    };\n    return PointerImageValue;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ImageValue"]));\nvar ProgressItem = /** @class */ (function (_super) {\n    __extends(ProgressItem, _super);\n    function ProgressItem(scene, width, height, key, frame, title, dpr) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.setSize(width, height);\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.progress = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ProgressMaskBar"](scene, key, "progress_bottom", "progress_top");\n        _this.add(_this.progress);\n        _this.title = scene.make.text({ x: 0, y: 0, text: title, style: { color: "#512103", fontSize: 14 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_4__["Font"].DEFULT_FONT } });\n        _this.title.setFontStyle("bold");\n        _this.title.setOrigin(0.5);\n        _this.add(_this.title);\n        _this.enable = true;\n        _this.mDuration = 35;\n        return _this;\n    }\n    ProgressItem.prototype.setProgressDatas = function (value, max) {\n        this.progress.setProgress(value, max);\n    };\n    return ProgressItem;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"]));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/PicaWork/PicaWorkPanel.ts?')},"./src/pica/render/ui/SinglePanel/PicaItemTipsPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaItemTipsPanel", function() { return PicaItemTipsPanel; });\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var _pica_base_panel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../pica.base.panel */ "./src/pica/render/ui/pica.base.panel.ts");\n/* harmony import */ var _PicaSingleManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PicaSingleManager */ "./src/pica/render/ui/SinglePanel/PicaSingleManager.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar PicaItemTipsPanel = /** @class */ (function (_super) {\n    __extends(PicaItemTipsPanel, _super);\n    function PicaItemTipsPanel(uimgr) {\n        var _this = _super.call(this, uimgr) || this;\n        _this.atlasNames = [picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].uicommon];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_4__["ModuleName"].PICAITEMTIPSPANEL_NAME;\n        _this.uiLayer = gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["MainUIScene"].LAYER_TOOLTIPS;\n        return _this;\n    }\n    Object.defineProperty(PicaItemTipsPanel, "Inst", {\n        get: function () {\n            if (!this.mInstance) {\n                this.mInstance = _PicaSingleManager__WEBPACK_IMPORTED_MODULE_3__["PicaSingleManager"].createSinglePanel(PicaItemTipsPanel);\n            }\n            return this.mInstance;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PicaItemTipsPanel.prototype.showTips = function (gameobj, data) {\n        if (!this.mInitialized)\n            this.show({ gameobj: gameobj, data: data });\n        else\n            this.displayTips(gameobj, data);\n    };\n    PicaItemTipsPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        PicaItemTipsPanel.mInstance = undefined;\n    };\n    PicaItemTipsPanel.prototype.onShow = function () {\n        if (!this.mShowData)\n            return;\n        var obj = this.mShowData;\n        this.displayTips(obj.gameobj, obj.data);\n    };\n    PicaItemTipsPanel.prototype.init = function () {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.setSize(width, height);\n        this.itemTips = new gamecoreRender__WEBPACK_IMPORTED_MODULE_1__["ItemInfoTips"](this.scene, 121 * this.dpr, 46 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].uicommon, "tips_bg", this.dpr);\n        this.itemTips.setVisible(false);\n        this.add(this.itemTips);\n        _super.prototype.init.call(this);\n    };\n    PicaItemTipsPanel.prototype.displayTips = function (gameobj, data) {\n        this.itemTips.setVisible(true);\n        this.itemTips.setItemData(data);\n        this.setTipsPosition(gameobj, -gameobj.height * 0.5 - 5 * this.dpr);\n    };\n    PicaItemTipsPanel.prototype.setTipsPosition = function (gameobject, offsety) {\n        if (offsety === void 0) { offsety = 0; }\n        var worldpos = gameobject.getWorldTransformMatrix();\n        var tx = worldpos.tx / this.scale;\n        var ty = worldpos.ty / this.scale;\n        var tipsWidth = this.itemTips.width;\n        var left = tipsWidth * 0.5 + 10 * this.dpr;\n        var right = this.width - tipsWidth * 0.5 - 10 * this.dpr;\n        if (tx < left) {\n            tx = left;\n        }\n        else if (tx > right) {\n            tx = right;\n        }\n        ty += offsety;\n        this.itemTips.x = tx;\n        this.itemTips.y = ty;\n    };\n    return PicaItemTipsPanel;\n}(_pica_base_panel__WEBPACK_IMPORTED_MODULE_2__["PicaBasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/SinglePanel/PicaItemTipsPanel.ts?')},"./src/pica/render/ui/SinglePanel/PicaSingleManager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaSingleManager", function() { return PicaSingleManager; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n\nvar PicaSingleManager = /** @class */ (function () {\n    // protected uiMgr: UiManager;\n    function PicaSingleManager(uiMgr) {\n        this.uiMgr = uiMgr;\n        this.singleMap = new Map();\n        this.uiMgr = uiMgr;\n        PicaSingleManager.Intsance = this;\n    }\n    PicaSingleManager.prototype.destroy = function () {\n        this.clearSingleMap();\n    };\n    PicaSingleManager.prototype.clearSingleMap = function () {\n        var map = this.singleMap;\n        map.forEach(function (value, key) {\n            value.destroy();\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug(value);\n        });\n        map.clear();\n    };\n    // tslint:disable-next-line:member-ordering\n    PicaSingleManager.createSinglePanel = function (c) {\n        var inst = this.Intsance;\n        var panel = new c(this.Intsance.uiMgr);\n        inst.singleMap.set(c.name, panel);\n        return panel;\n    };\n    return PicaSingleManager;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/SinglePanel/PicaSingleManager.ts?')},"./src/pica/render/ui/Task/TaskPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskPanel", function() { return TaskPanel; });\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar TaskPanel = /** @class */ (function (_super) {\n    __extends(TaskPanel, _super);\n    function TaskPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.taskItems = [];\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICATASK_NAME;\n        return _this;\n    }\n    TaskPanel.prototype.resize = function (width, height) {\n        var w = this.scaleWidth;\n        var h = this.scaleHeight;\n        _super.prototype.resize.call(this, w, h);\n        this.setSize(w, h);\n        this.blackBg.clear();\n        this.blackBg.fillStyle(0, 0.5);\n        this.blackBg.fillRoundedRect(-this.x, -this.y, w, h);\n        this.content.x = w * 0.5;\n        this.content.y = h * 0.5;\n        this.mGameScroll.refreshMask();\n        this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n    };\n    TaskPanel.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    };\n    TaskPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on("pointerup", this.OnClosePanel, this);\n    };\n    TaskPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off("pointerup", this.OnClosePanel, this);\n    };\n    TaskPanel.prototype.preload = function () {\n        this.addAtlas(this.key, "task/task.png", "task/task.json");\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].commonUrl + ".png", picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasName"].commonUrl + ".json");\n        _super.prototype.preload.call(this);\n    };\n    TaskPanel.prototype.init = function () {\n        this.setSize(this.scaleWidth, this.scaleWidth);\n        this.blackBg = this.scene.make.graphics(undefined, false);\n        this.add(this.blackBg);\n        var conWdith = 300 * this.dpr;\n        var conHeight = 418 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.add(this.content);\n        this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSlicePatch"](this.scene, 0, 0, conWdith, conHeight, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].commonKey, "bg", {\n            left: 40,\n            top: 40,\n            bottom: 50,\n            right: 50,\n        });\n        var bgwidth = this.bg.width;\n        var bgHeight = this.bg.height;\n        var posY = -this.bg.height * 0.5;\n        this.titlebg = this.scene.make.image({ x: 0, y: posY, key: this.key, frame: "title" });\n        this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.titlebg.y = posY - this.titlebg.height * 0.5 + 20 * this.dpr;\n        var mfont = "bold " + 15 * this.dpr + "px Source Han Sans";\n        this.tilteName = this.scene.make.text({ x: 0, y: posY - 12 * this.dpr, text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.title"), style: { font: mfont, color: "#8F4300", fontSize: 15 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT } }).setOrigin(0.5, 0);\n        this.closeBtn = this.scene.make.image({ x: this.bg.width * 0.5 - this.dpr * 5, y: posY + this.dpr * 5, key: picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].commonKey, frame: "close" });\n        this.tilteName.setStroke("#8F4300", 1);\n        this.tilteName.setResolution(this.dpr);\n        this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.closeBtn.setInteractive();\n        var container = this.scene.make.container(undefined, false);\n        container.setSize(80 * this.dpr, 30 * this.dpr);\n        container.setPosition(-bgwidth * 0.5 + 70 * this.dpr, -bgHeight * 0.5 + 30 * this.dpr);\n        container.setInteractive();\n        container.on("pointerup", this.onOpenOptionHandler, this);\n        this.optionText = this.scene.make.text({ x: -30 * this.dpr, y: 0, text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.all_task"), style: { color: "#8F4300", fontSize: 16 * this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        this.optionArrow = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: "drop_down" });\n        this.optionArrow.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.optionArrow.x = this.optionText.x + this.optionText.width + 10 * this.dpr;\n        container.add([this.optionText, this.optionArrow]);\n        var optionWidth = 253 * this.dpr;\n        var optionLine = this.scene.make.graphics(undefined, false);\n        optionLine.clear();\n        optionLine.fillStyle(0xc0c0c0, 1);\n        optionLine.fillRect(-optionWidth * 0.5, -1, optionWidth, 2);\n        optionLine.y = -bgHeight * 0.5 + 50 * this.dpr;\n        this.optionCon = this.scene.make.container(undefined, false);\n        this.optionCon.visible = false;\n        this.optionCon.y = -bgHeight * 0.5 + 50 * this.dpr;\n        this.mGameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["GameScroller"](this.scene, {\n            x: 0,\n            y: 18 * this.dpr,\n            width: bgwidth,\n            height: bgHeight - 70 * this.dpr,\n            zoom: this.scale,\n            dpr: this.dpr,\n            align: 2,\n            orientation: 0,\n            space: 20 * this.dpr,\n            padding: { top: 2 * this.dpr }\n        });\n        this.content.add([this.bg, this.closeBtn, this.titlebg, this.tilteName, this.mGameScroll, container, optionLine, this.optionCon]);\n        this.resize();\n        _super.prototype.init.call(this);\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICATASK_NAME + "_questlist");\n    };\n    TaskPanel.prototype.setTaskDatas = function (quests) {\n        if (!this.mInitialized)\n            return;\n        if (this.curTaskItem)\n            this.curTaskItem.setExtend(false);\n        this.taskDatas = quests;\n        this.setTaskOptions();\n        this.setTaskItems(quests);\n        this.onTaskOptionHandler(this.curOptionItem);\n    };\n    TaskPanel.prototype.setTaskOptions = function () {\n        var enumArr = [0, pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_MAIN_MISSION, pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_SIDE_MISSION, pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_DAILY_GOAL];\n        var list = this.optionCon.list;\n        for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {\n            var option = list_1[_i];\n            option.visible = false;\n        }\n        for (var i = 0; i < enumArr.length; i++) {\n            var option = void 0;\n            if (i < list.length) {\n                option = list[i];\n            }\n            else {\n                option = new TaskOption(this.scene, this.key, this.dpr);\n                option.setHandler(new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, this.onTaskOptionHandler));\n                this.optionCon.add(option);\n            }\n            option.visible = true;\n            option.setOptionData(enumArr[i]);\n        }\n        var value = 0;\n        var offsety = 2;\n        for (var _a = 0, list_2 = list; _a < list_2.length; _a++) {\n            var item = list_2[_a];\n            item.y = item.height * item.originY + value;\n            value += item.height + offsety;\n        }\n        if (!this.curOptionItem)\n            this.curOptionItem = list[0];\n    };\n    TaskPanel.prototype.setTaskDetail = function (quest) {\n        if (this.curTaskItem && quest) {\n            if (this.curTaskItem.questData.id === quest.id) {\n                this.curTaskItem.setTaskDetail(quest);\n            }\n        }\n    };\n    TaskPanel.prototype.setTaskItems = function (quests) {\n        for (var _i = 0, _a = this.taskItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var task = item;\n            task.visible = false;\n        }\n        for (var i = 0; i < quests.length; i++) {\n            var item = void 0;\n            if (i < this.taskItems.length) {\n                item = this.taskItems[i];\n            }\n            else {\n                item = new TaskItem(this.scene, this.key, this.dpr);\n                this.mGameScroll.addItem(item);\n                item.setHandler(new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, this.onExtendsHandler), new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, this.onFinishHandler));\n                this.taskItems.push(item);\n            }\n            item.setTaskData(quests[i]);\n            item.visible = true;\n        }\n        this.mGameScroll.Sort();\n    };\n    TaskPanel.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    TaskPanel.prototype.OnClosePanel = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICATASK_NAME + "_hide");\n    };\n    TaskPanel.prototype.onFinishHandler = function (id) {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICATASK_NAME + "_submitquest", id);\n    };\n    TaskPanel.prototype.onExtendsHandler = function (isExtend, item) {\n        if (this.curTaskItem) {\n            this.curTaskItem.setExtend(false, false);\n        }\n        this.curTaskItem = item;\n        if (isExtend) {\n            this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["ModuleName"].PICATASK_NAME + "_questdetail", item.questData.id);\n        }\n        else\n            this.curTaskItem = null;\n        this.mGameScroll.Sort(true);\n    };\n    TaskPanel.prototype.onOpenOptionHandler = function () {\n        var visible = this.optionCon.visible;\n        this.optionCon.visible = !visible;\n        this.optionArrow.scaleY = (visible ? -1 : 1);\n    };\n    TaskPanel.prototype.onTaskOptionHandler = function (taskOption) {\n        var list = this.optionCon.list;\n        for (var _i = 0, list_3 = list; _i < list_3.length; _i++) {\n            var option = list_3[_i];\n            option.changeNormal();\n        }\n        var optionData = taskOption.optionData;\n        var arr;\n        if (optionData === 0) {\n            arr = this.taskDatas;\n        }\n        else {\n            arr = this.taskDatas.filter(function (data) {\n                if (data.questType === taskOption.optionData)\n                    return true;\n                else\n                    return false;\n            });\n        }\n        this.setTaskItems(arr);\n        this.optionCon.visible = false;\n        this.curOptionItem = taskOption;\n        taskOption.changeDown();\n        this.optionText.text = taskOption.optionText;\n        this.optionArrow.x = this.optionText.x + this.optionText.width + 10 * this.dpr;\n    };\n    return TaskPanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\nvar TaskItem = /** @class */ (function (_super) {\n    __extends(TaskItem, _super);\n    function TaskItem(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        var width = 254 * dpr;\n        var height = 45 * dpr;\n        _this.content = scene.make.container(undefined, false);\n        _this.content.setSize(width, height);\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSlicePatch"](_this.scene, 0, 0, width, height, key, "main_bg", {\n            left: 6 * dpr,\n            top: 6 * dpr,\n            bottom: 6 * dpr,\n            right: 6 * dpr,\n        });\n        var posx = -width * 0.5, posy = -height * 0.5;\n        var headbg = scene.make.image({ key: key, frame: "head_border" });\n        headbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        headbg.x = posx + 25 * dpr;\n        _this.headIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["DynamicImage"](scene, headbg.x, 0);\n        _this.headIcon.setTexture(key, "head_test");\n        _this.typeBg = scene.make.image({ key: key, frame: "tag_main" });\n        _this.typeBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.typeBg.setPosition(posx + _this.typeBg.width * 0.5, posy + _this.typeBg.height * 0.5 - 2 * dpr);\n        _this.typeTex = scene.make.text({ x: 0, y: 0, text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.m"), style: { color: "#ffffff", fontSize: 10 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT } });\n        _this.typeTex.setOrigin(0.5).setPosition(_this.typeBg.x - 1 * dpr, _this.typeBg.y);\n        _this.taskName = scene.make.text({ x: _this.headIcon.x + 20 * dpr, y: -9 * dpr, text: "", style: { color: "#ffffff", fontSize: 13 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        _this.taskDes = scene.make.text({ x: _this.headIcon.x + 25 * dpr, y: 10 * dpr, text: "", style: { color: "#ffffff", fontSize: 12 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        _this.finish = scene.make.image({ key: key, frame: "done" });\n        _this.finish.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.finish.setPosition(width * 0.5 - 30 * dpr, 4 * dpr);\n        _this.openBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["Button"](scene, key, "open", "open");\n        _this.setExtendBtn(_this.openBtn);\n        _this.openBtn.setPosition(width * 0.5 - 25 * dpr, 4 * dpr);\n        _this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["Button"](scene, key, "close");\n        _this.setExtendBtn(_this.closeBtn);\n        _this.closeBtn.setPosition(_this.openBtn.x, _this.openBtn.y).visible = false;\n        _this.openBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, _this.onOpenHandler, _this);\n        _this.closeBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, _this.onCloseHandler, _this);\n        _this.content.add([_this.bg, headbg, _this.headIcon, _this.typeBg, _this.typeTex, _this.taskName, _this.taskDes, _this.finish, _this.openBtn, _this.closeBtn]);\n        _this.add(_this.content);\n        _this.setSize(width, height);\n        return _this;\n    }\n    TaskItem.prototype.setTaskData = function (data) {\n        this.questData = data;\n        var typeTag = this.getQuestTypeTag(data.questType);\n        this.typeBg.setFrame(typeTag[0]);\n        this.typeTex.text = typeTag[1];\n        this.setTextLimit(this.taskName, typeTag[2] + data.name, 12);\n        this.bg.setFrame(typeTag[3]);\n        // this.taskDes.text = data.detail;\n        this.setTextLimit(this.taskDes, data.detail);\n        this.taskDes.setColor(typeTag[4]);\n        this.finish.visible = (data.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED);\n    };\n    TaskItem.prototype.setTaskDetail = function (data) {\n        var typeTag = this.getQuestTypeTag(data.questType);\n        if (this.extend)\n            this.extend.setItemData(data, typeTag[5]);\n    };\n    TaskItem.prototype.setHandler = function (extend, finish) {\n        this.extendHandler = extend;\n        this.finishHandler = finish;\n    };\n    TaskItem.prototype.setExtend = function (isExtend, haveCallBack) {\n        if (haveCallBack === void 0) { haveCallBack = true; }\n        if (isExtend) {\n            if (haveCallBack)\n                this.onOpenHandler();\n            else\n                this.openExtend();\n        }\n        else {\n            if (haveCallBack)\n                this.onCloseHandler();\n            else\n                this.closeExtend();\n        }\n    };\n    TaskItem.prototype.onOpenHandler = function () {\n        this.openExtend();\n        if (this.extendHandler)\n            this.extendHandler.runWith([true, this]);\n    };\n    TaskItem.prototype.openExtend = function () {\n        if (!this.extend) {\n            this.extend = new TaskItemExtend(this.scene, this.key, this.dpr);\n            this.extend.setFinishHandler(new utils__WEBPACK_IMPORTED_MODULE_5__["Handler"](this, this.onFinishHandler));\n            this.add(this.extend);\n            this.extend.y = this.height * 0.5 + this.extend.height * 0.5;\n        }\n        this.extend.visible = true;\n        this.height = this.content.height + this.extend.height;\n        this.content.y = -this.height * 0.5 + this.content.height * 0.5;\n        this.extend.y = -this.height * 0.5 + this.content.height + this.extend.height * 0.5;\n        this.openBtn.visible = false;\n        this.closeBtn.visible = true;\n    };\n    TaskItem.prototype.setExtendBtn = function (button) {\n        var width = 60 * this.dpr;\n        var height = 60 * this.dpr;\n        var bg = this.scene.make.graphics(undefined, false);\n        bg.clear();\n        bg.fillStyle(0xF6F6F6, 0);\n        bg.fillRect(-width * 0.5, -height * 0.5, width, height);\n        button.addAt(bg, 0);\n        button.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n    };\n    TaskItem.prototype.onFinishHandler = function () {\n        if (this.finishHandler)\n            this.finishHandler.runWith(this.questData.id);\n    };\n    TaskItem.prototype.onCloseHandler = function () {\n        this.closeExtend();\n        if (this.extendHandler)\n            this.extendHandler.runWith([false, this]);\n    };\n    TaskItem.prototype.closeExtend = function () {\n        if (this.extend)\n            this.extend.visible = false;\n        this.height = this.content.height;\n        this.content.y = 0;\n        this.openBtn.visible = true;\n        this.closeBtn.visible = false;\n    };\n    TaskItem.prototype.getQuestTypeTag = function (questType) {\n        var typeTag = [];\n        if (questType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_MAIN_MISSION) {\n            typeTag[0] = "tag_main";\n            typeTag[1] = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.m");\n            typeTag[2] = "" + utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.main");\n            typeTag[3] = "main_bg";\n            typeTag[4] = "#4C42C8";\n            typeTag[5] = "#8780E0";\n            return typeTag;\n        }\n        else if (questType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_SIDE_MISSION) {\n            typeTag[0] = "tag_side";\n            typeTag[1] = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.s");\n            typeTag[2] = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.side");\n            typeTag[3] = "side_bg";\n            typeTag[4] = "#CB0A1D";\n            typeTag[5] = "#F4919B";\n            return typeTag;\n        }\n        else if (questType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_DAILY_GOAL) {\n            typeTag[0] = "tag_daly";\n            typeTag[1] = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.d");\n            typeTag[2] = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.daily");\n            typeTag[3] = "daly_bg";\n            typeTag[4] = "#866107";\n            typeTag[5] = "#F1D56C";\n            return typeTag;\n        }\n    };\n    TaskItem.prototype.setTextLimit = function (text, content, limit) {\n        if (limit === void 0) { limit = 15; }\n        if (content.length > limit) {\n            var maxWidth = 155 * this.dpr;\n            for (var i = 4; i < content.length; i++) {\n                var str = content.slice(0, i);\n                var width = text.setText(str).width;\n                if (width > maxWidth) {\n                    str += "...";\n                    text.setText(str);\n                    break;\n                }\n            }\n        }\n        else {\n            text.setText(content);\n        }\n    };\n    return TaskItem;\n}(Phaser.GameObjects.Container));\nvar TaskItemExtend = /** @class */ (function (_super) {\n    __extends(TaskItemExtend, _super);\n    function TaskItemExtend(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.needArr = [];\n        _this.rewardArr = [];\n        _this.dpr = 0;\n        var width = 253 * dpr;\n        var height = 202 * dpr;\n        _this.dpr = dpr;\n        var bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSlicePatch"](_this.scene, 0, 0, width, height, key, "detail_bg", {\n            left: 4,\n            top: 4,\n            right: 4,\n            bottom: 4\n        });\n        var posx = -width * 0.5 + 10 * dpr;\n        var posy = -height * 0.5 + 5 * dpr;\n        _this.taskLabel = scene.make.text({ x: posx, y: posy, text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.objective"), style: { color: "#8F4300", fontSize: 12 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT } });\n        _this.taskTex = scene.make.text({ x: posx, y: posy + 18 * dpr, text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.collect_materials"), style: { color: "#8F4300", fontSize: 12 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT } });\n        _this.taskTex.setWordWrapWidth(width - 10 * dpr, true);\n        _this.rewardLabel = scene.make.text({ x: posx, y: posy + 90 * dpr, text: utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.rewards"), style: { color: "#8F4300", fontSize: 12 * _this.dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT } });\n        var line = scene.make.image({ key: key, frame: "reward_cutline" });\n        line.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        line.setPosition(0, posy + 110 * dpr);\n        _this.line = line;\n        _this.finishBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSliceButton"](_this.scene, Math.ceil(width * 0.5 - 40 * _this.dpr), Math.ceil(height * 0.5 - 25 * _this.dpr), 60 * _this.dpr, 30 * _this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].commonKey, "button_g", utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.submit_task"), _this.dpr, _this.scale, {\n            left: 12 * _this.dpr,\n            top: 12 * _this.dpr,\n            right: 12 * _this.dpr,\n            bottom: 12 * _this.dpr\n        });\n        _this.finishBtn.setTextStyle({ fontSize: 12 * dpr, color: "#000000" });\n        _this.finishBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap, _this.onFinishHandler, _this);\n        _this.add([bg, _this.taskLabel, _this.taskTex, _this.rewardLabel, line, _this.finishBtn]);\n        _this.setSize(width, height);\n        _this.key = key;\n        _this.finishBtn.visible = false;\n        return _this;\n    }\n    TaskItemExtend.prototype.setItemData = function (questData, color) {\n        this.taskLabel.setColor(color);\n        this.taskTex.setColor(color);\n        this.rewardLabel.setColor(color);\n        var taskPosy = 0;\n        var cellHeight = 33 * this.dpr;\n        this.taskTex.text = this.getTaskTargetText(questData);\n        this.createTaskCells(this.needArr, questData.targets, true);\n        taskPosy = this.taskTex.y + this.taskTex.height + 5 * this.dpr;\n        if (questData.targets.length > 0) {\n            taskPosy += cellHeight * 0.5;\n            this.sortItem(this.needArr, taskPosy);\n            taskPosy += cellHeight * 0.5 + 8 * this.dpr;\n        }\n        this.rewardLabel.y = taskPosy;\n        taskPosy += this.rewardLabel.height + 5 * this.dpr;\n        this.line.y = taskPosy;\n        taskPosy += 5 * this.dpr;\n        this.createTaskCells(this.rewardArr, questData.rewards, false);\n        taskPosy += cellHeight * 0.5;\n        this.sortItem(this.rewardArr, taskPosy);\n        this.finishBtn.visible = (questData.stage === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED);\n    };\n    TaskItemExtend.prototype.setFinishHandler = function (comp) {\n        this.finishHandler = comp;\n    };\n    TaskItemExtend.prototype.sortItem = function (taskcells, posY) {\n        if (posY === void 0) { posY = 0; }\n        var posx = -this.width * 0.5 + 10 * this.dpr;\n        var list = taskcells;\n        var value = 0;\n        var offsetx = 10 * this.dpr;\n        for (var _i = 0, list_4 = list; _i < list_4.length; _i++) {\n            var item = list_4[_i];\n            item.x = posx + item.width * item.originX + value;\n            item.y = posY;\n            value += item.width + offsetx;\n        }\n    };\n    TaskItemExtend.prototype.createTaskCells = function (arr, dataArr, isTask) {\n        if (isTask === void 0) { isTask = true; }\n        for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n            var item = arr_1[_i];\n            item.visible = false;\n        }\n        for (var i = 0; i < dataArr.length; i++) {\n            var item = void 0;\n            if (i < arr.length) {\n                item = arr[i];\n            }\n            else {\n                item = new TaskCell(this.scene, this.key, this.dpr);\n                arr.push(item);\n                this.add(item);\n            }\n            item.visible = true;\n            item.setCellData(dataArr[i], isTask);\n        }\n        return arr;\n    };\n    TaskItemExtend.prototype.onFinishHandler = function () {\n        if (this.finishHandler)\n            this.finishHandler.run();\n    };\n    TaskItemExtend.prototype.getTaskTargetText = function (questData) {\n        var targets = questData.targets;\n        var text = questData.detail;\n        // if (targets.length === 0) {\n        //     text = questData.detail;\n        // } else {\n        //     text = i18n.t("task.collect_materials");\n        //     for (const item of targets) {\n        //         text += `${item.name}*${item.neededCount}`;\n        //     }\n        // }\n        return text;\n    };\n    return TaskItemExtend;\n}(Phaser.GameObjects.Container));\nvar TaskCell = /** @class */ (function (_super) {\n    __extends(TaskCell, _super);\n    function TaskCell(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.bg = scene.make.image({ key: key, frame: "task_bg" });\n        _this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.itemIcon = new gamecoreRender__WEBPACK_IMPORTED_MODULE_2__["DynamicImage"](scene, 0, 0);\n        _this.countTex = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](_this.scene, 0, 0)\n            .setOrigin(0.5).setFontSize(12 * dpr).setFontFamily(utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT);\n        _this.countTex.setPosition(_this.width * 0.5, _this.height * 0.5 - 2 * dpr);\n        _this.add([_this.bg, _this.itemIcon, _this.countTex]);\n        return _this;\n    }\n    TaskCell.prototype.setCellData = function (itemData, isTask) {\n        var _this = this;\n        if (isTask === void 0) { isTask = true; }\n        var frame = isTask ? "task_bg" : "reward_bg";\n        this.bg.setTexture(this.key, frame);\n        var url = utils__WEBPACK_IMPORTED_MODULE_5__["Url"].getOsdRes(itemData.display.texturePath);\n        this.itemIcon.load(url, this, function () {\n            _this.itemIcon.scale = _this.dpr * 0.6;\n        });\n        if (!isTask) {\n            this.countTex.text = "[stroke=#666666][color=#666666]" + itemData.count + "[/color][/stroke]";\n        }\n        else {\n            this.countTex.text = this.getCountText(itemData.count, itemData.neededCount);\n        }\n    };\n    TaskCell.prototype.getCountText = function (count, needcount) {\n        var color = (count >= needcount ? "#0054FF" : "#FF2B2B");\n        var countText = "[stroke=" + color + "][color=" + color + "]" + count + "[/color][/stroke]";\n        var needText = "[stroke=#2D2D2D][color=#2D2D2D]" + needcount + "[/color][/stroke]";\n        var text = countText + "/" + needText;\n        return text;\n    };\n    return TaskCell;\n}(Phaser.GameObjects.Container));\nvar TaskOption = /** @class */ (function (_super) {\n    __extends(TaskOption, _super);\n    function TaskOption(scene, key, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = 0;\n        var width = 256 * dpr;\n        var height = 30 * dpr;\n        _this.dpr = dpr;\n        _this.bg = scene.make.graphics(undefined, false);\n        _this.text = scene.make.text({ x: 0, y: 0, text: "", style: { color: "#666666", fontSize: 15 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_5__["Font"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        _this.bg.clear();\n        _this.bg.fillStyle(0xF6F6F6, 1);\n        _this.bg.fillRect(-width * 0.5, -height * 0.5, width, height);\n        var optionLine = _this.scene.make.graphics(undefined, false);\n        optionLine.clear();\n        optionLine.fillStyle(0xcccccc, 1);\n        optionLine.fillRect(-width * 0.5, height * 0.5, width, 2);\n        _this.add([_this.bg, _this.text, optionLine]);\n        _this.setSize(width, height);\n        _this.bg.setInteractive(new Phaser.Geom.Rectangle(-width * 0.5, -height * 0.5, width, height), Phaser.Geom.Rectangle.Contains);\n        _this.bg.on("pointerup", _this.onClickHandler, _this);\n        return _this;\n    }\n    TaskOption.prototype.setSize = function (width, height) {\n        _super.prototype.setSize.call(this, width, height);\n        this.text.setPosition(-width * 0.5 + 20 * this.dpr, 0);\n        this.changeNormal();\n        return this;\n    };\n    TaskOption.prototype.setOptionData = function (data) {\n        this.optionData = data;\n        if (data === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_MAIN_MISSION) {\n            this.text.text = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.main_quest");\n        }\n        else if (data === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_SIDE_MISSION) {\n            this.text.text = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.side_quest");\n        }\n        else if (data === pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_pkt_def"].PKT_Quest_Type.QUEST_DAILY_GOAL) {\n            this.text.text = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.daily_quest");\n        }\n        else {\n            this.text.text = utils__WEBPACK_IMPORTED_MODULE_5__["i18n"].t("task.all_task");\n        }\n        this.optionText = this.text.text;\n    };\n    TaskOption.prototype.changeDown = function () {\n        this.bg.clear();\n        this.bg.fillStyle(0xDFE6FF, 1);\n        this.bg.fillRect(-this.width * 0.5, -this.height * 0.5, this.width, this.height);\n    };\n    TaskOption.prototype.changeNormal = function () {\n        this.bg.clear();\n        this.bg.fillStyle(0xF6F6F6, 1);\n        this.bg.fillRect(-this.width * 0.5, -this.height * 0.5, this.width, this.height);\n    };\n    TaskOption.prototype.setHandler = function (handler) {\n        this.clickHandler = handler;\n    };\n    TaskOption.prototype.onClickHandler = function () {\n        if (this.clickHandler)\n            this.clickHandler.runWith(this);\n    };\n    return TaskOption;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/Task/TaskPanel.ts?')},"./src/pica/render/ui/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Components */ "./src/pica/render/ui/Components/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ItemButton", function() { return _Components__WEBPACK_IMPORTED_MODULE_0__["ItemButton"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DetailDisplay", function() { return _Components__WEBPACK_IMPORTED_MODULE_0__["DetailDisplay"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BackTextButton", function() { return _Components__WEBPACK_IMPORTED_MODULE_0__["BackTextButton"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EnergyProgressBar", function() { return _Components__WEBPACK_IMPORTED_MODULE_0__["EnergyProgressBar"]; });\n\n/* harmony import */ var _Activity_ActivityPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Activity/ActivityPanel */ "./src/pica/render/ui/Activity/ActivityPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ActivityPanel", function() { return _Activity_ActivityPanel__WEBPACK_IMPORTED_MODULE_1__["ActivityPanel"]; });\n\n/* harmony import */ var _CharacterInfo_CharacterAttributePanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CharacterInfo/CharacterAttributePanel */ "./src/pica/render/ui/CharacterInfo/CharacterAttributePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CharacterAttributePanel", function() { return _CharacterInfo_CharacterAttributePanel__WEBPACK_IMPORTED_MODULE_2__["CharacterAttributePanel"]; });\n\n/* harmony import */ var _CharacterInfo_CharacterEditorPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CharacterInfo/CharacterEditorPanel */ "./src/pica/render/ui/CharacterInfo/CharacterEditorPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CharacterEditorPanel", function() { return _CharacterInfo_CharacterEditorPanel__WEBPACK_IMPORTED_MODULE_3__["CharacterEditorPanel"]; });\n\n/* harmony import */ var _CharacterInfo_CharacterInfoPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CharacterInfo/CharacterInfoPanel */ "./src/pica/render/ui/CharacterInfo/CharacterInfoPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CharacterInfoPanel", function() { return _CharacterInfo_CharacterInfoPanel__WEBPACK_IMPORTED_MODULE_4__["CharacterInfoPanel"]; });\n\n/* harmony import */ var _CharacterInfo_GraphicsProgressBar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CharacterInfo/GraphicsProgressBar */ "./src/pica/render/ui/CharacterInfo/GraphicsProgressBar.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GraphicsProgressBar", function() { return _CharacterInfo_GraphicsProgressBar__WEBPACK_IMPORTED_MODULE_5__["GraphicsProgressBar"]; });\n\n/* harmony import */ var _PicaHandheld_PicaHandheldPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PicaHandheld/PicaHandheldPanel */ "./src/pica/render/ui/PicaHandheld/PicaHandheldPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaHandheldPanel", function() { return _PicaHandheld_PicaHandheldPanel__WEBPACK_IMPORTED_MODULE_6__["PicaHandheldPanel"]; });\n\n/* harmony import */ var _PicaChat_PicaChatInputPanel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./PicaChat/PicaChatInputPanel */ "./src/pica/render/ui/PicaChat/PicaChatInputPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaChatInputPanel", function() { return _PicaChat_PicaChatInputPanel__WEBPACK_IMPORTED_MODULE_7__["PicaChatInputPanel"]; });\n\n/* harmony import */ var _PicaChat_PicaGiftPanel__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./PicaChat/PicaGiftPanel */ "./src/pica/render/ui/PicaChat/PicaGiftPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaGiftPanel", function() { return _PicaChat_PicaGiftPanel__WEBPACK_IMPORTED_MODULE_8__["PicaGiftPanel"]; });\n\n/* harmony import */ var _PicaChat_PicaChatPanel__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./PicaChat/PicaChatPanel */ "./src/pica/render/ui/PicaChat/PicaChatPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaChatPanel", function() { return _PicaChat_PicaChatPanel__WEBPACK_IMPORTED_MODULE_9__["PicaChatPanel"]; });\n\n/* harmony import */ var _PicaMainUI_PicaMainUIPanel__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./PicaMainUI/PicaMainUIPanel */ "./src/pica/render/ui/PicaMainUI/PicaMainUIPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaMainUIPanel", function() { return _PicaMainUI_PicaMainUIPanel__WEBPACK_IMPORTED_MODULE_10__["PicaMainUIPanel"]; });\n\n/* harmony import */ var _pica_Renderuimanager__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./pica.Renderuimanager */ "./src/pica/render/ui/pica.Renderuimanager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRenderUiManager", function() { return _pica_Renderuimanager__WEBPACK_IMPORTED_MODULE_11__["PicaRenderUiManager"]; });\n\n/* harmony import */ var _CutIn_CutInPanel__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./CutIn/CutInPanel */ "./src/pica/render/ui/CutIn/CutInPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CutInPanel", function() { return _CutIn_CutInPanel__WEBPACK_IMPORTED_MODULE_12__["CutInPanel"]; });\n\n/* harmony import */ var _Dialog_DialogPanel__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./Dialog/DialogPanel */ "./src/pica/render/ui/Dialog/DialogPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DialogPanel", function() { return _Dialog_DialogPanel__WEBPACK_IMPORTED_MODULE_13__["DialogPanel"]; });\n\n/* harmony import */ var _Login_LoginPanel__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Login/LoginPanel */ "./src/pica/render/ui/Login/LoginPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoginPanel", function() { return _Login_LoginPanel__WEBPACK_IMPORTED_MODULE_14__["LoginPanel"]; });\n\n/* harmony import */ var _Login_VerifiePanel__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./Login/VerifiePanel */ "./src/pica/render/ui/Login/VerifiePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VerifiedPanel", function() { return _Login_VerifiePanel__WEBPACK_IMPORTED_MODULE_15__["VerifiedPanel"]; });\n\n/* harmony import */ var _CreateRole_CreateRolePanel__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./CreateRole/CreateRolePanel */ "./src/pica/render/ui/CreateRole/CreateRolePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CreateRolePanel", function() { return _CreateRole_CreateRolePanel__WEBPACK_IMPORTED_MODULE_16__["CreateRolePanel"]; });\n\n/* harmony import */ var _Bubble_InteractionBubbleCell__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./Bubble/InteractionBubbleCell */ "./src/pica/render/ui/Bubble/InteractionBubbleCell.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InteractionBubbleCell", function() { return _Bubble_InteractionBubbleCell__WEBPACK_IMPORTED_MODULE_17__["InteractionBubbleCell"]; });\n\n/* harmony import */ var _Bubble_InteractionBubbleContainer__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./Bubble/InteractionBubbleContainer */ "./src/pica/render/ui/Bubble/InteractionBubbleContainer.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InteractionBubbleContainer", function() { return _Bubble_InteractionBubbleContainer__WEBPACK_IMPORTED_MODULE_18__["InteractionBubbleContainer"]; });\n\n/* harmony import */ var _Bubble_InteractiveBubblePanel__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./Bubble/InteractiveBubblePanel */ "./src/pica/render/ui/Bubble/InteractiveBubblePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InteractiveBubblePanel", function() { return _Bubble_InteractiveBubblePanel__WEBPACK_IMPORTED_MODULE_19__["InteractiveBubblePanel"]; });\n\n/* harmony import */ var _PicaNavigate_PicaNavigatePanel__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./PicaNavigate/PicaNavigatePanel */ "./src/pica/render/ui/PicaNavigate/PicaNavigatePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNavigatePanel", function() { return _PicaNavigate_PicaNavigatePanel__WEBPACK_IMPORTED_MODULE_20__["PicaNavigatePanel"]; });\n\n/* harmony import */ var _PicaBag_PicaBagPanel__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./PicaBag/PicaBagPanel */ "./src/pica/render/ui/PicaBag/PicaBagPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBagPanel", function() { return _PicaBag_PicaBagPanel__WEBPACK_IMPORTED_MODULE_21__["PicaBagPanel"]; });\n\n/* harmony import */ var _Components_detail_display__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./Components/detail.display */ "./src/pica/render/ui/Components/detail.display.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _PicaMarket_ElementDetail__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./PicaMarket/ElementDetail */ "./src/pica/render/ui/PicaMarket/ElementDetail.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ElementDetail", function() { return _PicaMarket_ElementDetail__WEBPACK_IMPORTED_MODULE_23__["ElementDetail"]; });\n\n/* harmony import */ var _PicaMarket_PicaMarketPanel__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./PicaMarket/PicaMarketPanel */ "./src/pica/render/ui/PicaMarket/PicaMarketPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaMarketPanel", function() { return _PicaMarket_PicaMarketPanel__WEBPACK_IMPORTED_MODULE_24__["PicaMarketPanel"]; });\n\n/* harmony import */ var _PicaMarket_NumberCounter__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./PicaMarket/NumberCounter */ "./src/pica/render/ui/PicaMarket/NumberCounter.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NumberCounter", function() { return _PicaMarket_NumberCounter__WEBPACK_IMPORTED_MODULE_25__["NumberCounter"]; });\n\n/* harmony import */ var _PicaMarket_item__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./PicaMarket/item */ "./src/pica/render/ui/PicaMarket/item.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MarketItem", function() { return _PicaMarket_item__WEBPACK_IMPORTED_MODULE_26__["MarketItem"]; });\n\n/* harmony import */ var _PicaFriend_PicaFriendPanel__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./PicaFriend/PicaFriendPanel */ "./src/pica/render/ui/PicaFriend/PicaFriendPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaFriendPanel", function() { return _PicaFriend_PicaFriendPanel__WEBPACK_IMPORTED_MODULE_27__["PicaFriendPanel"]; });\n\n/* harmony import */ var _PicaPropFun_PicaPropFunPanel__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./PicaPropFun/PicaPropFunPanel */ "./src/pica/render/ui/PicaPropFun/PicaPropFunPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaPropFunPanel", function() { return _PicaPropFun_PicaPropFunPanel__WEBPACK_IMPORTED_MODULE_28__["PicaPropFunPanel"]; });\n\n/* harmony import */ var _PicaNotice_PicaNoticePanel__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./PicaNotice/PicaNoticePanel */ "./src/pica/render/ui/PicaNotice/PicaNoticePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNoticePanel", function() { return _PicaNotice_PicaNoticePanel__WEBPACK_IMPORTED_MODULE_29__["PicaNoticePanel"]; });\n\n/* harmony import */ var _PicaPartyList_PicaPartyListPanel__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./PicaPartyList/PicaPartyListPanel */ "./src/pica/render/ui/PicaPartyList/PicaPartyListPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaPartyListPanel", function() { return _PicaPartyList_PicaPartyListPanel__WEBPACK_IMPORTED_MODULE_30__["PicaPartyListPanel"]; });\n\n/* harmony import */ var _PicaManorList_PicaManorContentPanel__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./PicaManorList/PicaManorContentPanel */ "./src/pica/render/ui/PicaManorList/PicaManorContentPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorContentPanel", function() { return _PicaManorList_PicaManorContentPanel__WEBPACK_IMPORTED_MODULE_31__["PicaManorContentPanel"]; });\n\n/* harmony import */ var _PicaManorList_PicaManorListPanel__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./PicaManorList/PicaManorListPanel */ "./src/pica/render/ui/PicaManorList/PicaManorListPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorListPanel", function() { return _PicaManorList_PicaManorListPanel__WEBPACK_IMPORTED_MODULE_32__["PicaManorListPanel"]; });\n\n/* harmony import */ var _PicaManorList_PicaManorScrollPanel__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./PicaManorList/PicaManorScrollPanel */ "./src/pica/render/ui/PicaManorList/PicaManorScrollPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorScrollPanel", function() { return _PicaManorList_PicaManorScrollPanel__WEBPACK_IMPORTED_MODULE_33__["PicaManorScrollPanel"]; });\n\n/* harmony import */ var _PicaOpenParty_PicaOpenPartyCreatePanel__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./PicaOpenParty/PicaOpenPartyCreatePanel */ "./src/pica/render/ui/PicaOpenParty/PicaOpenPartyCreatePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaOpenPartyCreatePanel", function() { return _PicaOpenParty_PicaOpenPartyCreatePanel__WEBPACK_IMPORTED_MODULE_34__["PicaOpenPartyCreatePanel"]; });\n\n/* harmony import */ var _PicaOpenParty_PicaOpenPartyPanel__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./PicaOpenParty/PicaOpenPartyPanel */ "./src/pica/render/ui/PicaOpenParty/PicaOpenPartyPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaOpenPartyPanel", function() { return _PicaOpenParty_PicaOpenPartyPanel__WEBPACK_IMPORTED_MODULE_35__["PicaOpenPartyPanel"]; });\n\n/* harmony import */ var _Task_TaskPanel__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./Task/TaskPanel */ "./src/pica/render/ui/Task/TaskPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskPanel", function() { return _Task_TaskPanel__WEBPACK_IMPORTED_MODULE_36__["TaskPanel"]; });\n\n/* harmony import */ var _PicManorInfo_PicaManorBasePanel__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./PicManorInfo/PicaManorBasePanel */ "./src/pica/render/ui/PicManorInfo/PicaManorBasePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorBasePanel", function() { return _PicManorInfo_PicaManorBasePanel__WEBPACK_IMPORTED_MODULE_37__["PicaManorBasePanel"]; });\n\n/* harmony import */ var _PicManorInfo_PicaManorChildPanel__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./PicManorInfo/PicaManorChildPanel */ "./src/pica/render/ui/PicManorInfo/PicaManorChildPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorChildPanel", function() { return _PicManorInfo_PicaManorChildPanel__WEBPACK_IMPORTED_MODULE_38__["PicaManorChildPanel"]; });\n\n/* harmony import */ var _PicManorInfo_PicManorInfoPanel__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./PicManorInfo/PicManorInfoPanel */ "./src/pica/render/ui/PicManorInfo/PicManorInfoPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicManorInfoPanel", function() { return _PicManorInfo_PicManorInfoPanel__WEBPACK_IMPORTED_MODULE_39__["PicManorInfoPanel"]; });\n\n/* harmony import */ var _PicManorInfo_PicaManorShopPanel__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./PicManorInfo/PicaManorShopPanel */ "./src/pica/render/ui/PicManorInfo/PicaManorShopPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorShopPanel", function() { return _PicManorInfo_PicaManorShopPanel__WEBPACK_IMPORTED_MODULE_40__["PicaManorShopPanel"]; });\n\n/* harmony import */ var _PicManorInfo_PicaManorTipsPanel__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./PicManorInfo/PicaManorTipsPanel */ "./src/pica/render/ui/PicManorInfo/PicaManorTipsPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaManorTipsPanel", function() { return _PicManorInfo_PicaManorTipsPanel__WEBPACK_IMPORTED_MODULE_41__["PicaManorTipsPanel"]; });\n\n/* harmony import */ var _PicaBusinessStreet_PicaBusinessContentPanel__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./PicaBusinessStreet/PicaBusinessContentPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessContentPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessContentPanel", function() { return _PicaBusinessStreet_PicaBusinessContentPanel__WEBPACK_IMPORTED_MODULE_42__["PicaBusinessContentPanel"]; });\n\n/* harmony import */ var _PicaBusinessStreet_PicaBusinessHistoryPanel__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./PicaBusinessStreet/PicaBusinessHistoryPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessHistoryPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessHistoryPanel", function() { return _PicaBusinessStreet_PicaBusinessHistoryPanel__WEBPACK_IMPORTED_MODULE_43__["PicaBusinessHistoryPanel"]; });\n\n/* harmony import */ var _PicaBusinessStreet_PicaBusinessMyStreetPanel__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./PicaBusinessStreet/PicaBusinessMyStreetPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessMyStreetPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessMyStreetPanel", function() { return _PicaBusinessStreet_PicaBusinessMyStreetPanel__WEBPACK_IMPORTED_MODULE_44__["PicaBusinessMyStreetPanel"]; });\n\n/* harmony import */ var _PicaBusinessStreet_PicaBusinessRankRewardPanel__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./PicaBusinessStreet/PicaBusinessRankRewardPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankRewardPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessRankRewardPanel", function() { return _PicaBusinessStreet_PicaBusinessRankRewardPanel__WEBPACK_IMPORTED_MODULE_45__["PicaBusinessRankRewardPanel"]; });\n\n/* harmony import */ var _PicaBusinessStreet_PicaBusinessRankingDetailPanel__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./PicaBusinessStreet/PicaBusinessRankingDetailPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingDetailPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessRankingDetailPanel", function() { return _PicaBusinessStreet_PicaBusinessRankingDetailPanel__WEBPACK_IMPORTED_MODULE_46__["PicaBusinessRankingDetailPanel"]; });\n\n/* harmony import */ var _PicaBusinessStreet_PicaBusinessRankingPanel__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./PicaBusinessStreet/PicaBusinessRankingPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessRankingPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessRankingPanel", function() { return _PicaBusinessStreet_PicaBusinessRankingPanel__WEBPACK_IMPORTED_MODULE_47__["PicaBusinessRankingPanel"]; });\n\n/* harmony import */ var _PicaBusinessStreet_PicaBusinessStoreCreatePanel__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./PicaBusinessStreet/PicaBusinessStoreCreatePanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStoreCreatePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessStoreCreatePanel", function() { return _PicaBusinessStreet_PicaBusinessStoreCreatePanel__WEBPACK_IMPORTED_MODULE_48__["PicaBusinessStoreCreatePanel"]; });\n\n/* harmony import */ var _PicaBusinessStreet_PicaBusinessStreetListPanel__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./PicaBusinessStreet/PicaBusinessStreetListPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetListPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessStreetListPanel", function() { return _PicaBusinessStreet_PicaBusinessStreetListPanel__WEBPACK_IMPORTED_MODULE_49__["PicaBusinessStreetListPanel"]; });\n\n/* harmony import */ var _PicaBusinessStreet_PicaBusinessStreetPanel__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./PicaBusinessStreet/PicaBusinessStreetPanel */ "./src/pica/render/ui/PicaBusinessStreet/PicaBusinessStreetPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessStreetPanel", function() { return _PicaBusinessStreet_PicaBusinessStreetPanel__WEBPACK_IMPORTED_MODULE_50__["PicaBusinessStreetPanel"]; });\n\n/* harmony import */ var _PicaBusinessStreet_SecondaryMenuPanel__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./PicaBusinessStreet/SecondaryMenuPanel */ "./src/pica/render/ui/PicaBusinessStreet/SecondaryMenuPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SecondaryMenuPanel", function() { return _PicaBusinessStreet_SecondaryMenuPanel__WEBPACK_IMPORTED_MODULE_51__["SecondaryMenuPanel"]; });\n\n/* harmony import */ var _PicaBusinessMarketingPlan_PicaBusinessChoosePlanPanel__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel */ "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessChoosePlanPanel", function() { return _PicaBusinessMarketingPlan_PicaBusinessChoosePlanPanel__WEBPACK_IMPORTED_MODULE_52__["PicaBusinessChoosePlanPanel"]; });\n\n/* harmony import */ var _PicaBusinessMarketingPlan_PicaBusinessMarketingPlanPanel__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./PicaBusinessMarketingPlan/PicaBusinessMarketingPlanPanel */ "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessMarketingPlanPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessMarketingPlanPanel", function() { return _PicaBusinessMarketingPlan_PicaBusinessMarketingPlanPanel__WEBPACK_IMPORTED_MODULE_53__["PicaBusinessMarketingPlanPanel"]; });\n\n/* harmony import */ var _PicaBusinessMarketingPlan_PicaBusinessPlanPanel__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./PicaBusinessMarketingPlan/PicaBusinessPlanPanel */ "./src/pica/render/ui/PicaBusinessMarketingPlan/PicaBusinessPlanPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaBusinessPlanPanel", function() { return _PicaBusinessMarketingPlan_PicaBusinessPlanPanel__WEBPACK_IMPORTED_MODULE_54__["PicaBusinessPlanPanel"]; });\n\n/* harmony import */ var _PicaRecharge_PicaRechargePanel__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./PicaRecharge/PicaRechargePanel */ "./src/pica/render/ui/PicaRecharge/PicaRechargePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRechargePanel", function() { return _PicaRecharge_PicaRechargePanel__WEBPACK_IMPORTED_MODULE_55__["PicaRechargePanel"]; });\n\n/* harmony import */ var _PicaDecorateControl_PicaDecorateControlPanel__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./PicaDecorateControl/PicaDecorateControlPanel */ "./src/pica/render/ui/PicaDecorateControl/PicaDecorateControlPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaDecorateControlPanel", function() { return _PicaDecorateControl_PicaDecorateControlPanel__WEBPACK_IMPORTED_MODULE_56__["PicaDecorateControlPanel"]; });\n\n/* harmony import */ var _PicRoomUpgrade_PicRoomUpgradePanel__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./PicRoomUpgrade/PicRoomUpgradePanel */ "./src/pica/render/ui/PicRoomUpgrade/PicRoomUpgradePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicRoomUpgradePanel", function() { return _PicRoomUpgrade_PicRoomUpgradePanel__WEBPACK_IMPORTED_MODULE_57__["PicRoomUpgradePanel"]; });\n\n/* harmony import */ var _PicaEquipUpgrade_PicaEquipUpgradeItem__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./PicaEquipUpgrade/PicaEquipUpgradeItem */ "./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradeItem.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaEquipUpgradeItem", function() { return _PicaEquipUpgrade_PicaEquipUpgradeItem__WEBPACK_IMPORTED_MODULE_58__["PicaEquipUpgradeItem"]; });\n\n/* harmony import */ var _PicaEquipUpgrade_PicaEquipUpgradePanel__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./PicaEquipUpgrade/PicaEquipUpgradePanel */ "./src/pica/render/ui/PicaEquipUpgrade/PicaEquipUpgradePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaEquipUpgradePanel", function() { return _PicaEquipUpgrade_PicaEquipUpgradePanel__WEBPACK_IMPORTED_MODULE_59__["PicaEquipUpgradePanel"]; });\n\n/* harmony import */ var _PicaRoomList_PicaRoomListPanel__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./PicaRoomList/PicaRoomListPanel */ "./src/pica/render/ui/PicaRoomList/PicaRoomListPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRoomListPanel", function() { return _PicaRoomList_PicaRoomListPanel__WEBPACK_IMPORTED_MODULE_60__["PicaRoomListPanel"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RoomDelegate", function() { return _PicaRoomList_PicaRoomListPanel__WEBPACK_IMPORTED_MODULE_60__["RoomDelegate"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RoomZoon", function() { return _PicaRoomList_PicaRoomListPanel__WEBPACK_IMPORTED_MODULE_60__["RoomZoon"]; });\n\n/* harmony import */ var _PicaWork_PicaWorkOldPanel__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./PicaWork/PicaWorkOldPanel */ "./src/pica/render/ui/PicaWork/PicaWorkOldPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaWorkPanel", function() { return _PicaWork_PicaWorkOldPanel__WEBPACK_IMPORTED_MODULE_61__["PicaWorkPanel"]; });\n\n/* harmony import */ var _PicaMineCar_PicaMineCarPanel__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./PicaMineCar/PicaMineCarPanel */ "./src/pica/render/ui/PicaMineCar/PicaMineCarPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaMineCarPanel", function() { return _PicaMineCar_PicaMineCarPanel__WEBPACK_IMPORTED_MODULE_62__["PicaMineCarPanel"]; });\n\n/* harmony import */ var _PicaHouse_PicaHousePanel__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./PicaHouse/PicaHousePanel */ "./src/pica/render/ui/PicaHouse/PicaHousePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaHousePanel", function() { return _PicaHouse_PicaHousePanel__WEBPACK_IMPORTED_MODULE_63__["PicaHousePanel"]; });\n\n/* harmony import */ var _PicaHouse_PicaHouseInfoPanel__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./PicaHouse/PicaHouseInfoPanel */ "./src/pica/render/ui/PicaHouse/PicaHouseInfoPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaHouseInfoPanel", function() { return _PicaHouse_PicaHouseInfoPanel__WEBPACK_IMPORTED_MODULE_64__["PicaHouseInfoPanel"]; });\n\n/* harmony import */ var _PicaMineSettle_PicaMineSettlePanel__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./PicaMineSettle/PicaMineSettlePanel */ "./src/pica/render/ui/PicaMineSettle/PicaMineSettlePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaMineSettlePanel", function() { return _PicaMineSettle_PicaMineSettlePanel__WEBPACK_IMPORTED_MODULE_65__["PicaMineSettlePanel"]; });\n\n/* harmony import */ var _PicaRewardTip_PicaRewardTipPanel__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./PicaRewardTip/PicaRewardTipPanel */ "./src/pica/render/ui/PicaRewardTip/PicaRewardTipPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRewardTipPanel", function() { return _PicaRewardTip_PicaRewardTipPanel__WEBPACK_IMPORTED_MODULE_66__["PicaRewardTipPanel"]; });\n\n/* harmony import */ var _PicaCompose_PicaComposePanel__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./PicaCompose/PicaComposePanel */ "./src/pica/render/ui/PicaCompose/PicaComposePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaComposePanel", function() { return _PicaCompose_PicaComposePanel__WEBPACK_IMPORTED_MODULE_67__["PicaComposePanel"]; });\n\n/* harmony import */ var _PicaItemPopCard_PicaItemPopCardPanel__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./PicaItemPopCard/PicaItemPopCardPanel */ "./src/pica/render/ui/PicaItemPopCard/PicaItemPopCardPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaItemPopCardPanel", function() { return _PicaItemPopCard_PicaItemPopCardPanel__WEBPACK_IMPORTED_MODULE_68__["PicaItemPopCardPanel"]; });\n\n/* harmony import */ var _PicaMessageBox_PicaMessageBoxPanel__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./PicaMessageBox/PicaMessageBoxPanel */ "./src/pica/render/ui/PicaMessageBox/PicaMessageBoxPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaMessageBoxPanel", function() { return _PicaMessageBox_PicaMessageBoxPanel__WEBPACK_IMPORTED_MODULE_69__["PicaMessageBoxPanel"]; });\n\n/* harmony import */ var _PicaElementStorage_PicaElementStoragePanel__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./PicaElementStorage/PicaElementStoragePanel */ "./src/pica/render/ui/PicaElementStorage/PicaElementStoragePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaElementStoragePanel", function() { return _PicaElementStorage_PicaElementStoragePanel__WEBPACK_IMPORTED_MODULE_70__["PicaElementStoragePanel"]; });\n\n/* harmony import */ var _CutInMenu_CutInMenuPanel__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./CutInMenu/CutInMenuPanel */ "./src/pica/render/ui/CutInMenu/CutInMenuPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CutInMenuPanel", function() { return _CutInMenu_CutInMenuPanel__WEBPACK_IMPORTED_MODULE_71__["CutInMenuPanel"]; });\n\n/* harmony import */ var _PicaTreasure_PicaTreasureOpenPanel__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./PicaTreasure/PicaTreasureOpenPanel */ "./src/pica/render/ui/PicaTreasure/PicaTreasureOpenPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTreasureOpenPanel", function() { return _PicaTreasure_PicaTreasureOpenPanel__WEBPACK_IMPORTED_MODULE_72__["PicaTreasureOpenPanel"]; });\n\n/* harmony import */ var _PicaTreasure_PicaTreasurePanel__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./PicaTreasure/PicaTreasurePanel */ "./src/pica/render/ui/PicaTreasure/PicaTreasurePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTreasurePanel", function() { return _PicaTreasure_PicaTreasurePanel__WEBPACK_IMPORTED_MODULE_73__["PicaTreasurePanel"]; });\n\n/* harmony import */ var _PicaTreasure_PicaTreasurePreviewPanel__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./PicaTreasure/PicaTreasurePreviewPanel */ "./src/pica/render/ui/PicaTreasure/PicaTreasurePreviewPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTreasurePreviewPanel", function() { return _PicaTreasure_PicaTreasurePreviewPanel__WEBPACK_IMPORTED_MODULE_74__["PicaTreasurePreviewPanel"]; });\n\n/* harmony import */ var _PicaTreasure_PicaTreasureAllOpenPanel__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./PicaTreasure/PicaTreasureAllOpenPanel */ "./src/pica/render/ui/PicaTreasure/PicaTreasureAllOpenPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTreasureAllOpenPanel", function() { return _PicaTreasure_PicaTreasureAllOpenPanel__WEBPACK_IMPORTED_MODULE_75__["PicaTreasureAllOpenPanel"]; });\n\n/* harmony import */ var _PicaGiftEffect_PicaGiftEffectPanel__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./PicaGiftEffect/PicaGiftEffectPanel */ "./src/pica/render/ui/PicaGiftEffect/PicaGiftEffectPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaGiftEffectPanel", function() { return _PicaGiftEffect_PicaGiftEffectPanel__WEBPACK_IMPORTED_MODULE_76__["PicaGiftEffectPanel"]; });\n\n/* harmony import */ var _PicaGiftEffect_PicaGiftLateralItem__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./PicaGiftEffect/PicaGiftLateralItem */ "./src/pica/render/ui/PicaGiftEffect/PicaGiftLateralItem.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaGiftLateralItem", function() { return _PicaGiftEffect_PicaGiftLateralItem__WEBPACK_IMPORTED_MODULE_77__["PicaGiftLateralItem"]; });\n\n/* harmony import */ var _PicaGiftEffect_PicaGiftLaterctPanel__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./PicaGiftEffect/PicaGiftLaterctPanel */ "./src/pica/render/ui/PicaGiftEffect/PicaGiftLaterctPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaGiftLaterctPanel", function() { return _PicaGiftEffect_PicaGiftLaterctPanel__WEBPACK_IMPORTED_MODULE_78__["PicaGiftLaterctPanel"]; });\n\n/* harmony import */ var _PicaGiftEffect_PicaGiftPlayerPanel__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ./PicaGiftEffect/PicaGiftPlayerPanel */ "./src/pica/render/ui/PicaGiftEffect/PicaGiftPlayerPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaGiftPlayerPanel", function() { return _PicaGiftEffect_PicaGiftPlayerPanel__WEBPACK_IMPORTED_MODULE_79__["PicaGiftPlayerPanel"]; });\n\n/* harmony import */ var _PicaFurniFun_PicaFurniFunPanel__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ./PicaFurniFun/PicaFurniFunPanel */ "./src/pica/render/ui/PicaFurniFun/PicaFurniFunPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaFurniFunPanel", function() { return _PicaFurniFun_PicaFurniFunPanel__WEBPACK_IMPORTED_MODULE_80__["PicaFurniFunPanel"]; });\n\n/* harmony import */ var _PicaNewRole_PicaNewRolePanel__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ./PicaNewRole/PicaNewRolePanel */ "./src/pica/render/ui/PicaNewRole/PicaNewRolePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewRolePanel", function() { return _PicaNewRole_PicaNewRolePanel__WEBPACK_IMPORTED_MODULE_81__["PicaNewRolePanel"]; });\n\n/* harmony import */ var _PicaNewMain_PicaNewActivityPanel__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ./PicaNewMain/PicaNewActivityPanel */ "./src/pica/render/ui/PicaNewMain/PicaNewActivityPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewActivityPanel", function() { return _PicaNewMain_PicaNewActivityPanel__WEBPACK_IMPORTED_MODULE_82__["PicaNewActivityPanel"]; });\n\n/* harmony import */ var _PicaNewMain_PicaNewChatPanel__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ./PicaNewMain/PicaNewChatPanel */ "./src/pica/render/ui/PicaNewMain/PicaNewChatPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewChatPanel", function() { return _PicaNewMain_PicaNewChatPanel__WEBPACK_IMPORTED_MODULE_83__["PicaNewChatPanel"]; });\n\n/* harmony import */ var _PicaNewMain_PicaNewHeadPanel__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ./PicaNewMain/PicaNewHeadPanel */ "./src/pica/render/ui/PicaNewMain/PicaNewHeadPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewHeadPanel", function() { return _PicaNewMain_PicaNewHeadPanel__WEBPACK_IMPORTED_MODULE_84__["PicaNewHeadPanel"]; });\n\n/* harmony import */ var _PicaNewMain_PicaNewLeftPanel__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ./PicaNewMain/PicaNewLeftPanel */ "./src/pica/render/ui/PicaNewMain/PicaNewLeftPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewLeftPanel", function() { return _PicaNewMain_PicaNewLeftPanel__WEBPACK_IMPORTED_MODULE_85__["PicaNewLeftPanel"]; });\n\n/* harmony import */ var _PicaNewMain_PicaNewNavigatePanel__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ./PicaNewMain/PicaNewNavigatePanel */ "./src/pica/render/ui/PicaNewMain/PicaNewNavigatePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewNavigatePanel", function() { return _PicaNewMain_PicaNewNavigatePanel__WEBPACK_IMPORTED_MODULE_86__["PicaNewNavigatePanel"]; });\n\n/* harmony import */ var _PicaNewMain_PicaNewMainPanel__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ./PicaNewMain/PicaNewMainPanel */ "./src/pica/render/ui/PicaNewMain/PicaNewMainPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaNewMainPanel", function() { return _PicaNewMain_PicaNewMainPanel__WEBPACK_IMPORTED_MODULE_87__["PicaNewMainPanel"]; });\n\n/* harmony import */ var _PicaAvatar_PicaAvatarPanel__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ./PicaAvatar/PicaAvatarPanel */ "./src/pica/render/ui/PicaAvatar/PicaAvatarPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaAvatarPanel", function() { return _PicaAvatar_PicaAvatarPanel__WEBPACK_IMPORTED_MODULE_88__["PicaAvatarPanel"]; });\n\n/* harmony import */ var _PicaOnline_PicaOnlinePanel__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ./PicaOnline/PicaOnlinePanel */ "./src/pica/render/ui/PicaOnline/PicaOnlinePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaOnlinePanel", function() { return _PicaOnline_PicaOnlinePanel__WEBPACK_IMPORTED_MODULE_89__["PicaOnlinePanel"]; });\n\n/* harmony import */ var _PicaEffectMgr_PicaEffectMgrPanel__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ./PicaEffectMgr/PicaEffectMgrPanel */ "./src/pica/render/ui/PicaEffectMgr/PicaEffectMgrPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaEffectMgrPanel", function() { return _PicaEffectMgr_PicaEffectMgrPanel__WEBPACK_IMPORTED_MODULE_90__["PicaEffectMgrPanel"]; });\n\n/* harmony import */ var _PicaEffectMgr_PicaFurniUnlockEffectPanel__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ./PicaEffectMgr/PicaFurniUnlockEffectPanel */ "./src/pica/render/ui/PicaEffectMgr/PicaFurniUnlockEffectPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaFurniUnlockEffectPanel", function() { return _PicaEffectMgr_PicaFurniUnlockEffectPanel__WEBPACK_IMPORTED_MODULE_91__["PicaFurniUnlockEffectPanel"]; });\n\n/* harmony import */ var _PicaTask_PicaTaskItem__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ./PicaTask/PicaTaskItem */ "./src/pica/render/ui/PicaTask/PicaTaskItem.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTaskItem", function() { return _PicaTask_PicaTaskItem__WEBPACK_IMPORTED_MODULE_92__["PicaTaskItem"]; });\n\n/* harmony import */ var _PicaTask_PicaTaskMainPanel__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ./PicaTask/PicaTaskMainPanel */ "./src/pica/render/ui/PicaTask/PicaTaskMainPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTaskMainPanel", function() { return _PicaTask_PicaTaskMainPanel__WEBPACK_IMPORTED_MODULE_93__["PicaTaskMainPanel"]; });\n\n/* harmony import */ var _PicaTask_PicaTaskPanel__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! ./PicaTask/PicaTaskPanel */ "./src/pica/render/ui/PicaTask/PicaTaskPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTaskPanel", function() { return _PicaTask_PicaTaskPanel__WEBPACK_IMPORTED_MODULE_94__["PicaTaskPanel"]; });\n\n/* harmony import */ var _PicaTask_PicaTaskSidePanel__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! ./PicaTask/PicaTaskSidePanel */ "./src/pica/render/ui/PicaTask/PicaTaskSidePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaTaskSidePanel", function() { return _PicaTask_PicaTaskSidePanel__WEBPACK_IMPORTED_MODULE_95__["PicaTaskSidePanel"]; });\n\n/* harmony import */ var _PicaElevator_PicaElevatorPanel__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! ./PicaElevator/PicaElevatorPanel */ "./src/pica/render/ui/PicaElevator/PicaElevatorPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaElevatorPanel", function() { return _PicaElevator_PicaElevatorPanel__WEBPACK_IMPORTED_MODULE_96__["PicaElevatorPanel"]; });\n\n/* harmony import */ var _PicaCreateRole_PicaCreateRolePanel__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! ./PicaCreateRole/PicaCreateRolePanel */ "./src/pica/render/ui/PicaCreateRole/PicaCreateRolePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaCreateRolePanel", function() { return _PicaCreateRole_PicaCreateRolePanel__WEBPACK_IMPORTED_MODULE_97__["PicaCreateRolePanel"]; });\n\n/* harmony import */ var _SinglePanel_PicaItemTipsPanel__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! ./SinglePanel/PicaItemTipsPanel */ "./src/pica/render/ui/SinglePanel/PicaItemTipsPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaItemTipsPanel", function() { return _SinglePanel_PicaItemTipsPanel__WEBPACK_IMPORTED_MODULE_98__["PicaItemTipsPanel"]; });\n\n/* harmony import */ var _SinglePanel_PicaSingleManager__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! ./SinglePanel/PicaSingleManager */ "./src/pica/render/ui/SinglePanel/PicaSingleManager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaSingleManager", function() { return _SinglePanel_PicaSingleManager__WEBPACK_IMPORTED_MODULE_99__["PicaSingleManager"]; });\n\n/* harmony import */ var _PicaFurnitureCompose_PicaFurnitureComposePanel__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! ./PicaFurnitureCompose/PicaFurnitureComposePanel */ "./src/pica/render/ui/PicaFurnitureCompose/PicaFurnitureComposePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaFurnitureComposePanel", function() { return _PicaFurnitureCompose_PicaFurnitureComposePanel__WEBPACK_IMPORTED_MODULE_100__["PicaFurnitureComposePanel"]; });\n\n/* harmony import */ var _PicaRecaste_PicaRecastePanel__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! ./PicaRecaste/PicaRecastePanel */ "./src/pica/render/ui/PicaRecaste/PicaRecastePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRecastePanel", function() { return _PicaRecaste_PicaRecastePanel__WEBPACK_IMPORTED_MODULE_101__["PicaRecastePanel"]; });\n\n/* harmony import */ var _PicaRoam_PicaRoamListPanel__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! ./PicaRoam/PicaRoamListPanel */ "./src/pica/render/ui/PicaRoam/PicaRoamListPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRoamListPanel", function() { return _PicaRoam_PicaRoamListPanel__WEBPACK_IMPORTED_MODULE_102__["PicaRoamListPanel"]; });\n\n/* harmony import */ var _PicaRoam_PicaRoamPanel__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! ./PicaRoam/PicaRoamPanel */ "./src/pica/render/ui/PicaRoam/PicaRoamPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRoamPanel", function() { return _PicaRoam_PicaRoamPanel__WEBPACK_IMPORTED_MODULE_103__["PicaRoamPanel"]; });\n\n/* harmony import */ var _PicaRoam_PicaRoamDrawPanel__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! ./PicaRoam/PicaRoamDrawPanel */ "./src/pica/render/ui/PicaRoam/PicaRoamDrawPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRoamDrawPanel", function() { return _PicaRoam_PicaRoamDrawPanel__WEBPACK_IMPORTED_MODULE_104__["PicaRoamDrawPanel"]; });\n\n/* harmony import */ var _PicaRoam_PicaRoamPreviewPanel__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! ./PicaRoam/PicaRoamPreviewPanel */ "./src/pica/render/ui/PicaRoam/PicaRoamPreviewPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaRoamPreviewPanel", function() { return _PicaRoam_PicaRoamPreviewPanel__WEBPACK_IMPORTED_MODULE_105__["PicaRoamPreviewPanel"]; });\n\n/* harmony import */ var _PicaExploreLog_PicaExploreLogPanel__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! ./PicaExploreLog/PicaExploreLogPanel */ "./src/pica/render/ui/PicaExploreLog/PicaExploreLogPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreLogPanel", function() { return _PicaExploreLog_PicaExploreLogPanel__WEBPACK_IMPORTED_MODULE_106__["PicaExploreLogPanel"]; });\n\n/* harmony import */ var _PicaExploreLog_PicaExploreLogSettlePanel__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! ./PicaExploreLog/PicaExploreLogSettlePanel */ "./src/pica/render/ui/PicaExploreLog/PicaExploreLogSettlePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreLogSettlePanel", function() { return _PicaExploreLog_PicaExploreLogSettlePanel__WEBPACK_IMPORTED_MODULE_107__["PicaExploreLogSettlePanel"]; });\n\n/* harmony import */ var _PicaExploreList_PicaChapterLevelClue__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! ./PicaExploreList/PicaChapterLevelClue */ "./src/pica/render/ui/PicaExploreList/PicaChapterLevelClue.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaChapterLevelClue", function() { return _PicaExploreList_PicaChapterLevelClue__WEBPACK_IMPORTED_MODULE_108__["PicaChapterLevelClue"]; });\n\n/* harmony import */ var _PicaExploreList_PicaExploreListBottomPanel__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(/*! ./PicaExploreList/PicaExploreListBottomPanel */ "./src/pica/render/ui/PicaExploreList/PicaExploreListBottomPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListBottomPanel", function() { return _PicaExploreList_PicaExploreListBottomPanel__WEBPACK_IMPORTED_MODULE_109__["PicaExploreListBottomPanel"]; });\n\n/* harmony import */ var _PicaExploreList_PicaExploreListDetailPanel__WEBPACK_IMPORTED_MODULE_110__ = __webpack_require__(/*! ./PicaExploreList/PicaExploreListDetailPanel */ "./src/pica/render/ui/PicaExploreList/PicaExploreListDetailPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListDetailPanel", function() { return _PicaExploreList_PicaExploreListDetailPanel__WEBPACK_IMPORTED_MODULE_110__["PicaExploreListDetailPanel"]; });\n\n/* harmony import */ var _PicaExploreList_PicaExploreListLevelPanel__WEBPACK_IMPORTED_MODULE_111__ = __webpack_require__(/*! ./PicaExploreList/PicaExploreListLevelPanel */ "./src/pica/render/ui/PicaExploreList/PicaExploreListLevelPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListLevelPanel", function() { return _PicaExploreList_PicaExploreListLevelPanel__WEBPACK_IMPORTED_MODULE_111__["PicaExploreListLevelPanel"]; });\n\n/* harmony import */ var _PicaExploreList_PicaExploreListPanel__WEBPACK_IMPORTED_MODULE_112__ = __webpack_require__(/*! ./PicaExploreList/PicaExploreListPanel */ "./src/pica/render/ui/PicaExploreList/PicaExploreListPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PicaExploreListPanel", function() { return _PicaExploreList_PicaExploreListPanel__WEBPACK_IMPORTED_MODULE_112__["PicaExploreListPanel"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/index.ts?')},"./src/pica/render/ui/pica.Renderuimanager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaRenderUiManager", function() { return PicaRenderUiManager; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var _SinglePanel_PicaSingleManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SinglePanel/PicaSingleManager */ "./src/pica/render/ui/SinglePanel/PicaSingleManager.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaRenderUiManager = /** @class */ (function (_super) {\n    __extends(PicaRenderUiManager, _super);\n    function PicaRenderUiManager(mRender) {\n        var _this = _super.call(this, mRender) || this;\n        _this.mAtalsManager = new picaRes__WEBPACK_IMPORTED_MODULE_1__["AtlasManager"]();\n        _this.singleManager = new _SinglePanel_PicaSingleManager__WEBPACK_IMPORTED_MODULE_2__["PicaSingleManager"](_this);\n        _this.mAtalsManager.init(mRender);\n        return _this;\n    }\n    PicaRenderUiManager.prototype.getUrlDatas = function (atlas, loadType) {\n        if (loadType === void 0) { loadType = picaRes__WEBPACK_IMPORTED_MODULE_1__["UILoadType"].atlas; }\n        return this.mAtalsManager.getUrlDatas(atlas, loadType);\n    };\n    PicaRenderUiManager.prototype.showAlertView = function (text, ok, cancel, callBack) {\n        if (cancel === void 0) { cancel = false; }\n        _super.prototype.showAlertView.call(this, text, ok, cancel, callBack);\n    };\n    PicaRenderUiManager.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.singleManager.destroy();\n    };\n    PicaRenderUiManager.prototype._showPanel = function (type, param) {\n        if (!this.mPanelMap) {\n            this.mPanelMap = new Map();\n        }\n        var className = type + "Panel";\n        var ns = __webpack_require__("./src/pica/render/ui sync recursive ^\\\\.\\\\/.*$")("./" + type + "/" + className);\n        var panel = new ns[className](this);\n        if (!panel) {\n            _super.prototype._showPanel.call(this, type, param);\n            // Logger.getInstance().error(`error ${type} no panel can show!!!`);\n            return;\n        }\n        this.mPanelMap.set(type, panel);\n        panel.show(param);\n        return panel;\n    };\n    return PicaRenderUiManager;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["UiManager"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/pica.Renderuimanager.ts?')},"./src/pica/render/ui/pica.base.panel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PicaBasePanel", function() { return PicaBasePanel; });\n/* harmony import */ var gamecoreRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gamecoreRender */ "./src/render/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar PicaBasePanel = /** @class */ (function (_super) {\n    __extends(PicaBasePanel, _super);\n    function PicaBasePanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        return _this;\n    }\n    PicaBasePanel.prototype.initResource = function () {\n        var datas;\n        if (this.atlasNames) {\n            var uimanager = (this.uiManager);\n            datas = uimanager.getUrlDatas(this.atlasNames);\n        }\n        if (this.textures) {\n            var uimanager = (this.uiManager);\n            var tempdatas = uimanager.getUrlDatas(this.textures, picaRes__WEBPACK_IMPORTED_MODULE_1__["UILoadType"].texture);\n            datas = datas ? datas.concat(tempdatas) : tempdatas;\n        }\n        if (datas) {\n            for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {\n                var data = datas_1[_i];\n                if (!this.cacheExists(picaRes__WEBPACK_IMPORTED_MODULE_1__["UILoadType"][data.uiType], data.atlasName)) {\n                    if (data.uiType === picaRes__WEBPACK_IMPORTED_MODULE_1__["UILoadType"].atlas) {\n                        this.setResourcesData("atlas", data.atlasName, data.atlasUrl, data.jsonUrl, data.foldType);\n                    }\n                    else if (data.uiType === picaRes__WEBPACK_IMPORTED_MODULE_1__["UILoadType"].texture) {\n                        this.setResourcesData("image", data.atlasName, data.atlasUrl, undefined, data.foldType);\n                    }\n                    else if (data.uiType === picaRes__WEBPACK_IMPORTED_MODULE_1__["UILoadType"].video) {\n                        this.setResourcesData("video", data.atlasName, data.atlasUrl, undefined, data.foldType);\n                    }\n                }\n            }\n        }\n    };\n    PicaBasePanel.prototype.preload = function () {\n        this.initResource();\n        _super.prototype.preload.call(this);\n    };\n    PicaBasePanel.prototype.setLinear = function (key) {\n        _super.prototype.setLinear.call(this, key);\n        if (this.atlasNames) {\n            for (var _i = 0, _a = this.atlasNames; _i < _a.length; _i++) {\n                var atlas = _a[_i];\n                if (typeof atlas === "string") {\n                    _super.prototype.setLinear.call(this, atlas);\n                }\n                else {\n                    _super.prototype.setLinear.call(this, atlas.atlasName);\n                }\n            }\n        }\n    };\n    PicaBasePanel.prototype.setResourcesData = function (type, key, texture, data, foldType) {\n        if (this.cacheExists(type, key))\n            return;\n        if (!this.mResources) {\n            this.mResources = new Map();\n        }\n        this.mResources.set(key, {\n            dpr: this.dpr,\n            type: type,\n            texture: texture,\n            data: data,\n            foldType: foldType\n        });\n    };\n    PicaBasePanel.prototype.addResources = function (key, resource) {\n        if (resource.type) {\n            if (this.scene.load[resource.type]) {\n                resource.foldType = resource.foldType || picaRes__WEBPACK_IMPORTED_MODULE_1__["FolderType"].DPR;\n                var textureUrl = resource.foldType === picaRes__WEBPACK_IMPORTED_MODULE_1__["FolderType"].DPR ? utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getUIRes(resource.dpr, resource.texture) : utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getNormalUIRes(resource.texture);\n                var jsonUrl = resource.foldType === picaRes__WEBPACK_IMPORTED_MODULE_1__["FolderType"].DPR ? utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getUIRes(resource.dpr, resource.data) : utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getNormalUIRes(resource.data);\n                if (resource.type !== "video") {\n                    this.scene.load[resource.type](key, textureUrl, jsonUrl);\n                }\n                else {\n                    this.scene.load.video(key, textureUrl, undefined, undefined, true);\n                }\n            }\n        }\n    };\n    PicaBasePanel.prototype.cacheExists = function (type, key) {\n        if (type === "image" || type === "atlas" || type === "texture") {\n            return this.scene.textures.exists(key);\n        }\n        else if (type === "json" || type === "video") {\n            return this.scene.cache[type].exists(key);\n        }\n        return false;\n    };\n    return PicaBasePanel;\n}(gamecoreRender__WEBPACK_IMPORTED_MODULE_0__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/render/ui/pica.base.panel.ts?')},"./src/pica/res/atlas.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FolderType", function() { return FolderType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UILoadType", function() { return UILoadType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AtlasUrlData", function() { return AtlasUrlData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AtlasManager", function() { return AtlasManager; });\n/* harmony import */ var _ui_atlas_name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui.atlas.name */ "./src/pica/res/ui.atlas.name.ts");\n\nvar FolderType;\n(function (FolderType) {\n    FolderType[FolderType["DPR"] = 1] = "DPR";\n    FolderType[FolderType["NORMAL"] = 2] = "NORMAL";\n    FolderType[FolderType["OSD"] = 3] = "OSD";\n})(FolderType || (FolderType = {}));\nvar UILoadType;\n(function (UILoadType) {\n    UILoadType[UILoadType["none"] = 1] = "none";\n    UILoadType[UILoadType["atlas"] = 2] = "atlas";\n    UILoadType[UILoadType["font"] = 3] = "font";\n    UILoadType[UILoadType["texture"] = 4] = "texture";\n    UILoadType[UILoadType["video"] = 5] = "video";\n    UILoadType[UILoadType["json"] = 6] = "json";\n})(UILoadType || (UILoadType = {}));\nvar AtlasUrlData = /** @class */ (function () {\n    function AtlasUrlData(atlasName, url, jsonUrl, uiType) {\n        if (uiType === void 0) { uiType = UILoadType.none; }\n        this.uiType = UILoadType.none;\n        this.foldType = FolderType.DPR;\n        this.atlasName = atlasName;\n        this.atlasUrl = url;\n        this.jsonUrl = jsonUrl;\n        this.uiType = uiType;\n    }\n    return AtlasUrlData;\n}());\n\nvar AtlasManager = /** @class */ (function () {\n    function AtlasManager() {\n        this.atlasMap = new Map();\n    }\n    AtlasManager.prototype.init = function (render) {\n        this.render = render;\n        this.add(_ui_atlas_name__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].uicommon, UILoadType.atlas);\n        this.add(_ui_atlas_name__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].iconcommon, UILoadType.atlas);\n        this.add(_ui_atlas_name__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].effectcommon, UILoadType.atlas);\n    };\n    AtlasManager.prototype.add = function (atlasName, loadType, folder, foldType) {\n        if (loadType === void 0) { loadType = UILoadType.none; }\n        var data;\n        folder = folder || atlasName;\n        foldType = foldType || FolderType.DPR;\n        if (loadType === UILoadType.atlas) {\n            var url = folder + "/" + atlasName;\n            data = new AtlasUrlData(atlasName, url + ".png", url + ".json", UILoadType.atlas);\n        }\n        else if (loadType === UILoadType.font) {\n            var url = folder + "/" + atlasName;\n            data = new AtlasUrlData(atlasName, url + ".ttf", undefined, UILoadType.font);\n        }\n        else if (loadType === UILoadType.texture) {\n            var url = folder + "/" + atlasName;\n            data = new AtlasUrlData(atlasName, url + ".png", undefined, UILoadType.texture);\n        }\n        else if (loadType === UILoadType.video) {\n            var url = folder + "/" + atlasName;\n            data = new AtlasUrlData(atlasName, url + ".mp4", undefined, UILoadType.video);\n        }\n        data.foldType = foldType;\n        this.atlasMap.set(atlasName, data);\n        return data;\n    };\n    AtlasManager.prototype.getUrlDatas = function (atlas, loadType) {\n        if (loadType === void 0) { loadType = UILoadType.atlas; }\n        var tempUrls = [];\n        for (var _i = 0, atlas_1 = atlas; _i < atlas_1.length; _i++) {\n            var obj = atlas_1[_i];\n            var name_1 = void 0, folder = void 0, foldType = void 0;\n            if (typeof obj === "object") {\n                name_1 = obj.atlasName;\n                folder = obj.folder;\n                loadType = obj.uiType || loadType;\n                foldType = obj.foldType;\n            }\n            else {\n                name_1 = obj;\n            }\n            if (this.atlasMap.has(name_1)) {\n                var urlData = this.atlasMap.get(name_1);\n                tempUrls.push(urlData);\n            }\n            else {\n                var data = this.add(name_1, loadType, folder, foldType);\n                tempUrls.push(data);\n            }\n        }\n        return tempUrls;\n    };\n    AtlasManager.prototype.loadAtlas = function (urls, arr, comp, progress) {\n    };\n    AtlasManager.prototype.isAtlasLoaded = function (atlasName) {\n        return false;\n    };\n    AtlasManager.prototype.loadTexture = function (textureName, extend) {\n        if (extend === void 0) { extend = ".png"; }\n    };\n    AtlasManager.prototype.unloadAtlas = function (atlasName) {\n    };\n    AtlasManager.prototype.loadFont = function (fontName, compl) {\n    };\n    return AtlasManager;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/res/atlas.manager.ts?')},"./src/pica/res/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ui_atlas_name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui.atlas.name */ "./src/pica/res/ui.atlas.name.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UIAtlasName", function() { return _ui_atlas_name__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UIAtlasKey", function() { return _ui_atlas_name__WEBPACK_IMPORTED_MODULE_0__["UIAtlasKey"]; });\n\n/* harmony import */ var _atlas_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./atlas.manager */ "./src/pica/res/atlas.manager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AtlasManager", function() { return _atlas_manager__WEBPACK_IMPORTED_MODULE_1__["AtlasManager"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AtlasUrlData", function() { return _atlas_manager__WEBPACK_IMPORTED_MODULE_1__["AtlasUrlData"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UILoadType", function() { return _atlas_manager__WEBPACK_IMPORTED_MODULE_1__["UILoadType"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FolderType", function() { return _atlas_manager__WEBPACK_IMPORTED_MODULE_1__["FolderType"]; });\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/res/index.ts?')},"./src/pica/res/ui.atlas.name.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UIAtlasName", function() { return UIAtlasName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UIAtlasKey", function() { return UIAtlasKey; });\nvar UIAtlasName = /** @class */ (function () {\n    function UIAtlasName() {\n    }\n    UIAtlasName.jsonUrl = function (name) {\n        return name + ".json";\n    };\n    UIAtlasName.textureUrl = function (name) {\n        return name + ".png";\n    };\n    UIAtlasName.commonUrl = "ui_base/ui_base";\n    UIAtlasName.common2Url = "ui_base2/ui_base2";\n    UIAtlasName.common3Url = "ui_base3/ui_base3";\n    UIAtlasName.uicommonurl = "ui_common/ui_common";\n    UIAtlasName.uibase = "ui_base";\n    UIAtlasName.uibase2 = "ui_base2";\n    UIAtlasName.uibase3 = "ui_base3";\n    UIAtlasName.uicommon = "ui_common";\n    UIAtlasName.uicommon1 = "ui_common1";\n    UIAtlasName.roam = "roam";\n    UIAtlasName.iconcommon = "icon_common";\n    UIAtlasName.effectcommon = "effect_common";\n    UIAtlasName.stareffect = "stareffect";\n    UIAtlasName.circleeffect = "circleeffect";\n    UIAtlasName.explorelog = "explorelog";\n    UIAtlasName.treasure = "treasure";\n    return UIAtlasName;\n}());\n\nvar UIAtlasKey = /** @class */ (function () {\n    function UIAtlasKey() {\n    }\n    UIAtlasKey.commonKey = "common_key";\n    UIAtlasKey.common2Key = "common2_key";\n    UIAtlasKey.common3Key = "common3_key";\n    UIAtlasKey.uicommonKey = "uicommon_key";\n    return UIAtlasKey;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/pica/res/ui.atlas.name.ts?')},"./src/render/account/account.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Account", function() { return Account; });\nvar Account = /** @class */ (function () {\n    function Account() {\n        // TODO\n        // 1. \n        // 2. \n    }\n    Account.prototype.getAccountData = function () {\n        return this.accountData;\n    };\n    // public accountData(): Promise<any> {\n    //     return new Promise<any>((resolve) => {\n    //         resolve(this.accountData);\n    //     });\n    // }\n    Account.prototype.setAccount = function (val) {\n        // this.clear();\n        // Object.assign(this.mCurAccountData, val);\n        this.accountData = {\n            id: val.id,\n            fingerprint: val.fingerprint,\n            refreshToken: val.refreshToken,\n            expire: val.expire,\n            accessToken: val.token || val.accessToken\n        };\n        this.saveLocalStorage();\n    };\n    Account.prototype.refreshToken = function (data) {\n        if (this.accountData) {\n            var newExpire = data.newExpire, newFingerprint = data.newFingerprint, newToken = data.newToken;\n            this.accountData.expire = newExpire;\n            this.accountData.fingerprint = newFingerprint;\n            this.accountData.accessToken = newToken;\n            this.saveLocalStorage();\n        }\n    };\n    Account.prototype.saveLocalStorage = function () {\n        if (!this.accountData) {\n            return;\n        }\n        var _a = this.accountData, id = _a.id, fingerprint = _a.fingerprint, refreshToken = _a.refreshToken, expire = _a.expire, accessToken = _a.accessToken;\n        localStorage.setItem("token", JSON.stringify({ id: id, fingerprint: fingerprint, refreshToken: refreshToken, expire: expire, accessToken: accessToken }));\n    };\n    Account.prototype.clear = function () {\n        this.accountData = {\n            accessToken: "",\n            expire: 0,\n            fingerprint: "",\n            id: "",\n            refreshToken: ""\n        };\n    };\n    Account.prototype.destroy = function () {\n        this.clear();\n        localStorage.removeItem("token");\n        this.enterGame(undefined, undefined, undefined, undefined);\n    };\n    Account.prototype.enterGame = function (gameId, virtualWorldId, sceneId, loc) {\n        this.gameId = gameId;\n        this.virtualWorldId = virtualWorldId;\n        this.sceneID = sceneId;\n        this.loc = loc;\n    };\n    Object.defineProperty(Account.prototype, "gameID", {\n        get: function () {\n            return this.gameId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Account.prototype, "sceneId", {\n        get: function () {\n            return this.sceneID;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Account;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/account/account.ts?')},"./src/render/account/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _account__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./account */ "./src/render/account/account.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Account", function() { return _account__WEBPACK_IMPORTED_MODULE_0__["Account"]; });\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/account/index.ts?')},"./src/render/cameras/cameras.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CamerasManager", function() { return CamerasManager; });\n/* harmony import */ var baseRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! baseRender */ "./src/base/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar CamerasManager = /** @class */ (function (_super) {\n    __extends(CamerasManager, _super);\n    function CamerasManager(render) {\n        var _this = _super.call(this) || this;\n        _this.render = render;\n        _this.MINI_VIEW_SIZE = 50;\n        _this.VIEW_PORT_SIZE = 50;\n        _this.viewPort = new Phaser.Geom.Rectangle();\n        _this.miniViewPort = new Phaser.Geom.Rectangle();\n        _this.mCameras = [];\n        _this.zoom = _this.render.scaleRatio;\n        return _this;\n    }\n    CamerasManager.prototype.startRoomPlay = function (scene) {\n        this.mMain = scene.cameras.main;\n    };\n    CamerasManager.prototype.pan = function (x, y, duration) {\n        var _this = this;\n        x *= this.zoom;\n        y *= this.zoom;\n        for (var _i = 0, _a = this.mCameras; _i < _a.length; _i++) {\n            var cam = _a[_i];\n            cam.pan(x, y, duration);\n        }\n        return new Promise(function (resolve, reject) {\n            _this.mMain.once(Phaser.Cameras.Scene2D.Events.PAN_COMPLETE, function () {\n                resolve();\n            });\n        });\n    };\n    Object.defineProperty(CamerasManager.prototype, "camera", {\n        get: function () {\n            return this.mMain;\n        },\n        set: function (camera) {\n            this.mMain = camera;\n            this.addCamera(camera);\n            this.setViewPortSize();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CamerasManager.prototype.resize = function (width, height) {\n        utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().debug("resize");\n        this.resetCameraSize(width, height);\n        utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().debug("camera ===== resize");\n        if (this.mTarget) {\n            utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().debug("target ===== resize");\n            this.startFollow(this.mTarget);\n        }\n    };\n    CamerasManager.prototype.scrollTargetPoint = function (x, y, effect) {\n        var _this = this;\n        if (!this.mMain) {\n            return;\n        }\n        this.stopFollow();\n        if (effect) {\n            this.pan(x, y, 1000).then(function () {\n                _this.render.syncCameraScroll();\n            });\n        }\n        else {\n            this.setScroll(x, y);\n            this.render.syncCameraScroll();\n        }\n    };\n    CamerasManager.prototype.destroy = function () {\n        utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().debug("camerasmanager destroy");\n        this.mMain = undefined;\n        this.mTarget = undefined;\n        this.mCameras = [];\n    };\n    CamerasManager.prototype.resetCameraSize = function (width, height) {\n        utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().debug("resetCamerSize");\n        this.render.mainPeer.resetGameraSize(width, height);\n    };\n    CamerasManager.prototype.setViewPortSize = function () {\n        if (!this.mMain) {\n            utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().error("camera does not exist");\n            return;\n        }\n        var size = this.render.getCurrentRoomSize();\n        if (!size) {\n            utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().error("room size does not exist");\n            return;\n        }\n        var viewW = (this.VIEW_PORT_SIZE + this.VIEW_PORT_SIZE) * (size.tileWidth / 2);\n        var viewH = (this.VIEW_PORT_SIZE + this.VIEW_PORT_SIZE) * (size.tileHeight / 2);\n        // const viewW = this.mMain.width * 2;\n        // const viewH = this.mMain.height * 2;\n        this.viewPort.setSize(viewW, viewH);\n        var miniViewW = (this.MINI_VIEW_SIZE + this.MINI_VIEW_SIZE) * (size.tileWidth / 2);\n        var miniviewH = (this.MINI_VIEW_SIZE + this.MINI_VIEW_SIZE) * (size.tileHeight / 2);\n        this.miniViewPort.setSize(miniViewW, miniviewH);\n    };\n    return CamerasManager;\n}(baseRender__WEBPACK_IMPORTED_MODULE_0__["BaseCamerasManager"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/cameras/cameras.manager.ts?')},"./src/render/cameras/editor.cameras.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditorCamerasManager", function() { return EditorCamerasManager; });\n/* harmony import */ var _cameras_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cameras.manager */ "./src/render/cameras/cameras.manager.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar EditorCamerasManager = /** @class */ (function (_super) {\n    __extends(EditorCamerasManager, _super);\n    function EditorCamerasManager() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EditorCamerasManager.prototype.centerCameas = function () {\n        // if (!this.mMain || !this.mRoomService) {\n        //     return;\n        // }\n        // const roomSize = this.mRoomService.roomSize;\n        // this.mMain.setScroll(\n        //     (roomSize.sceneWidth - this.mMain.width) >> 1,\n        //     (roomSize.sceneHeight - this.mMain.height) >> 1\n        // );\n        // const cameraView = this.mMain.worldView;\n        // const pkt = new PBpacket(op_editor.OPCODE._OP_CLIENT_REQ_EDITOR_RESET_CAMERA);\n        // const content: op_editor.IOP_CLIENT_REQ_EDITOR_RESET_CAMERA = pkt.content;\n        // content.x = this.mMain.scrollX;\n        // content.y = this.mMain.scrollY;\n        // content.width = this.mMain.width;\n        // content.height = this.mMain.height;\n        // this.connection.send(pkt);\n    };\n    EditorCamerasManager.prototype.offsetScroll = function (x, y) {\n        if (!this.mMain) {\n            return;\n        }\n        for (var _i = 0, _a = this.mCameras; _i < _a.length; _i++) {\n            var camera = _a[_i];\n            camera.scrollX += x / this.zoom;\n            camera.scrollY += y / this.zoom;\n        }\n        // this.mMain.scrollX += x / this.zoom;\n        // this.mMain.scrollY += y / this.zoom;\n        // this.mCamera.setScroll(x, y);\n        // const pkt = new PBpacket(op_editor.OPCODE._OP_CLIENT_REQ_EDITOR_RESET_CAMERA);\n        // const content: op_editor.IOP_CLIENT_REQ_EDITOR_RESET_CAMERA = pkt.content;\n        // content.x = this.mMain.scrollX / this.zoom;\n        // content.y = this.mMain.scrollY / this.zoom;\n        // content.width = 0;\n        // content.height = 0;\n        // this.connection.send(pkt);\n    };\n    EditorCamerasManager.prototype.syncCameraScroll = function () {\n        // const pkt = new PBpacket(op_editor.OPCODE._OP_CLIENT_REQ_EDITOR_RESET_CAMERA);\n        // const content: op_editor.IOP_CLIENT_REQ_EDITOR_RESET_CAMERA = pkt.content;\n        // content.x = this.mMain.scrollX / this.zoom;\n        // content.y = this.mMain.scrollY / this.zoom;\n        // content.width = 0;\n        // content.height = 0;\n        // this.connection.send(pkt);\n    };\n    return EditorCamerasManager;\n}(_cameras_manager__WEBPACK_IMPORTED_MODULE_0__["CamerasManager"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/cameras/editor.cameras.manager.ts?')},"./src/render/cameras/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _cameras_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cameras.manager */ "./src/render/cameras/cameras.manager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CamerasManager", function() { return _cameras_manager__WEBPACK_IMPORTED_MODULE_0__["CamerasManager"]; });\n\n/* harmony import */ var _editor_cameras_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./editor.cameras.manager */ "./src/render/cameras/editor.cameras.manager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EditorCamerasManager", function() { return _editor_cameras_manager__WEBPACK_IMPORTED_MODULE_1__["EditorCamerasManager"]; });\n\n/* harmony import */ var _play_camera__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./play.camera */ "./src/render/cameras/play.camera.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlayCamera", function() { return _play_camera__WEBPACK_IMPORTED_MODULE_2__["PlayCamera"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/cameras/index.ts?')},"./src/render/cameras/play.camera.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlayCamera", function() { return PlayCamera; });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar PlayCamera = /** @class */ (function (_super) {\n    __extends(PlayCamera, _super);\n    function PlayCamera(x, y, width, height, pixelRatio, moveRatio) {\n        var _this = _super.call(this, x, y, width, height) || this;\n        _this.pixelRatio = pixelRatio;\n        _this.moveRatio = moveRatio || 1;\n        return _this;\n    }\n    PlayCamera.prototype.setPixelRatio = function (val) {\n        this.pixelRatio = val;\n    };\n    PlayCamera.prototype.startFollow = function (target, roundPixels, lerpX, lerpY, offsetX, offsetY) {\n        if (roundPixels === undefined) {\n            roundPixels = false;\n        }\n        if (lerpX === undefined) {\n            lerpX = 1;\n        }\n        if (lerpY === undefined) {\n            lerpY = lerpX;\n        }\n        if (offsetX === undefined) {\n            offsetX = 0;\n        }\n        if (offsetY === undefined) {\n            offsetY = offsetX;\n        }\n        this._follow = target;\n        this.roundPixels = roundPixels;\n        // lerpX = Clamp(lerpX, 0, 1);\n        // lerpY = Clamp(lerpY, 0, 1);\n        this.lerp.set(lerpX, lerpY);\n        this.followOffset.set(offsetX, offsetY);\n        var originX = this.width / 2;\n        var originY = this.height / 2;\n        var pos = this._follow.getPosition();\n        var fx = pos.x * this.pixelRatio * this.moveRatio - offsetX;\n        var fy = pos.y * this.pixelRatio * this.moveRatio - offsetY;\n        this.midPoint.set(fx, fy);\n        this.scrollX = fx - originX;\n        this.scrollY = fy - originY;\n        if (this.useBounds) {\n            this.scrollX = this.clampX(this.scrollX);\n            this.scrollY = this.clampY(this.scrollY);\n        }\n        return this;\n    };\n    PlayCamera.prototype.preRender = function (resolution) {\n        var width = this.width;\n        var height = this.height;\n        var halfWidth = width * 0.5;\n        var halfHeight = height * 0.5;\n        var zoom = this.zoom * resolution;\n        var matrix = this.matrix;\n        var originX = width * this.originX;\n        var originY = height * this.originY;\n        var follow = this._follow;\n        var deadzone = this.deadzone;\n        var sx = this.scrollX;\n        var sy = this.scrollY;\n        if (deadzone) {\n            // CenterOn(deadzone, this.midPoint.x, this.midPoint.y);\n        }\n        if (follow && !this.panEffect.isRunning) {\n            var pos = follow.getPosition();\n            var fx = (pos.x * this.pixelRatio * this.moveRatio - this.followOffset.x);\n            var fy = (pos.y * this.pixelRatio * this.moveRatio - this.followOffset.y);\n            if (deadzone) {\n                if (fx < deadzone.x) {\n                    sx = this.linear(sx, sx - (deadzone.x - fx), this.lerp.x);\n                }\n                else if (fx > deadzone.right) {\n                    sx = this.linear(sx, sx + (fx - deadzone.right), this.lerp.x);\n                }\n                if (fy < deadzone.y) {\n                    sy = this.linear(sy, sy - (deadzone.y - fy), this.lerp.y);\n                }\n                else if (fy > deadzone.bottom) {\n                    sy = this.linear(sy, sy + (fy - deadzone.bottom), this.lerp.y);\n                }\n            }\n            else {\n                sx = this.linear(sx, fx - originX, this.lerp.x);\n                sy = this.linear(sy, fy - originY, this.lerp.y);\n            }\n        }\n        if (this.useBounds) {\n            sx = this.clampX(sx);\n            sy = this.clampY(sy);\n        }\n        if (this.roundPixels) {\n            originX = Math.round(originX);\n            originY = Math.round(originY);\n        }\n        //  Values are in pixels and not impacted by zooming the Camera\n        this.scrollX = sx;\n        this.scrollY = sy;\n        var midX = sx + halfWidth;\n        var midY = sy + halfHeight;\n        //  The center of the camera, in world space, so taking zoom into account\n        //  Basically the pixel value of what it\'s looking at in the middle of the cam\n        this.midPoint.set(midX, midY);\n        var displayWidth = width / zoom;\n        var displayHeight = height / zoom;\n        this.worldView.setTo(midX - (displayWidth / 2), midY - (displayHeight / 2), displayWidth, displayHeight);\n        matrix.applyITRS(this.x + originX, this.y + originY, this.rotation, zoom, zoom);\n        matrix.translate(-originX, -originY);\n        this.shakeEffect.preRender();\n    };\n    PlayCamera.prototype.linear = function (p0, p1, t) {\n        return (p1 - p0) * t + p0;\n    };\n    return PlayCamera;\n}(Phaser.Cameras.Scene2D.Camera));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/cameras/play.camera.ts?')},"./src/render/display/animation/animation.model.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnimationModel", function() { return AnimationModel; });\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n\n\nvar AnimationModel = /** @class */ (function () {\n    function AnimationModel(ani) {\n        var tmpBaseLoc = ani.baseLoc.split(",");\n        this.mNode = ani.node;\n        this.id = ani.node.id;\n        this.name = ani.node.name;\n        this.frameName = ani.frameName;\n        if (!ani.frameName || this.frameName.length < 1) {\n            // Logger.getInstance().fatal(`Animation: ${ani.id} frames is invalid`);\n        }\n        this.loop = ani.loop;\n        if (!ani.loop) {\n            // Logger.getInstance().fatal(`Animation: ${ani.id} loop is invalid`);\n        }\n        if (!ani.frameRate) {\n            // Logger.getInstance().fatal(`Animation: ${ani.id} frameRate is invalid`);\n        }\n        if (ani.originPoint) {\n            // Logger.getInstance().fatal(`Animation: ${ani.id} originPoint is invalid`);\n        }\n        if (!ani.baseLoc) {\n            // Logger.getInstance().fatal(`Animation: ${ani.id} baseLoc is invalid`);\n        }\n        this.frameRate = ani.frameRate;\n        this.baseLoc = new utils__WEBPACK_IMPORTED_MODULE_1__["LogicPoint"](parseInt(tmpBaseLoc[0], 10), parseInt(tmpBaseLoc[1], 10));\n        var origin = ani.originPoint;\n        this.originPoint = new utils__WEBPACK_IMPORTED_MODULE_1__["LogicPoint"](origin[0], origin[1]);\n        if (typeof ani.collisionArea === "string") {\n            this.collisionArea = this.stringToArray(ani.collisionArea, ",", "&") || [[0]];\n        }\n        else {\n            this.collisionArea = ani.collisionArea || [[0]];\n        }\n        if (typeof ani.walkableArea === "string") {\n            this.walkableArea = this.stringToArray(ani.walkableArea, ",", "&") || [[0]];\n        }\n        else {\n            this.walkableArea = ani.walkableArea || [[0]];\n        }\n        // this.mInteractiveArea = [{x: 0, y: 0}];\n        this.interactiveArea = ani.interactiveArea;\n        this.changeLayer(ani.layer);\n        this.mountLayer = ani.mountLayer;\n    }\n    AnimationModel.prototype.changeLayer = function (layer) {\n        this.layer = layer;\n        if (this.layer.length < 1) {\n            this.layer = [{\n                    frameName: this.frameName,\n                    offsetLoc: this.baseLoc\n                }];\n        }\n    };\n    AnimationModel.prototype.createProtocolObject = function () {\n        var ani = pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_gameconfig_01"].AnimationData.create();\n        ani.node = this.mNode;\n        ani.baseLoc = this.baseLoc.x + "," + this.baseLoc.y;\n        ani.node.name = this.name;\n        ani.loop = this.loop;\n        ani.frameRate = this.frameRate;\n        ani.frameName = this.frameName;\n        ani.originPoint = [this.originPoint.x, this.originPoint.y];\n        ani.walkOriginPoint = [this.originPoint.x, this.originPoint.y];\n        ani.walkableArea = this.arrayToString(this.walkableArea, ",", "&");\n        ani.collisionArea = this.arrayToString(this.collisionArea, ",", "&");\n        ani.interactiveArea = this.interactiveArea;\n        var layers = [];\n        for (var _i = 0, _a = this.layer; _i < _a.length; _i++) {\n            var layer = _a[_i];\n            layers.push(pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__["op_gameconfig_01"].AnimationLayer.create(layer));\n        }\n        ani.layer = layers;\n        this.changeLayer(ani.layer);\n        ani.mountLayer = this.mountLayer;\n        return ani;\n    };\n    AnimationModel.prototype.stringToArray = function (string, fristJoin, lastJoin) {\n        if (!string) {\n            return;\n        }\n        var tmp = string.split(lastJoin);\n        var result = [];\n        for (var _i = 0, tmp_1 = tmp; _i < tmp_1.length; _i++) {\n            var ary = tmp_1[_i];\n            var tmpAry = ary.split(fristJoin);\n            result.push(tmpAry.map(function (value) { return parseInt(value, 10); }));\n        }\n        return result;\n    };\n    AnimationModel.prototype.arrayToString = function (array, fristJoin, lastJoin) {\n        if (!array)\n            return "";\n        var tmp = [];\n        for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\n            var ary = array_1[_i];\n            tmp.push(ary.join(fristJoin));\n        }\n        return tmp.join(lastJoin);\n    };\n    return AnimationModel;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/animation/animation.model.ts?')},"./src/render/display/animation/base.animation.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BaseAnimation", function() { return BaseAnimation; });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar BaseAnimation = /** @class */ (function (_super) {\n    __extends(BaseAnimation, _super);\n    function BaseAnimation(scene) {\n        var _this = _super.call(this, scene) || this;\n        _this.loaded = false;\n        _this.isPlaying = false;\n        _this.loop = false;\n        return _this;\n    }\n    BaseAnimation.prototype.load = function (resName, resUrl, data) {\n        this.destroy();\n        this.resName = resName ? resName : resUrl;\n        this.curAniName = resName;\n        this.resUrl = resUrl;\n    };\n    BaseAnimation.prototype.play = function (aniName) {\n        if (aniName)\n            this.curAniName = aniName;\n        this.isPlaying = true;\n    };\n    BaseAnimation.prototype.destroy = function () {\n        if (this.animUrlData)\n            this.animUrlData.dispose();\n        this.animUrlData = undefined;\n        this.curAniName = undefined;\n        this.isPlaying = false;\n        this.loaded = false;\n        this.loop = false;\n    };\n    BaseAnimation.prototype.onLoadComplete = function (loader, totalComplete, totalFailed) {\n    };\n    return BaseAnimation;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/animation/base.animation.ts?')},"./src/render/display/animation/bubble.animation.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BubbleAnimation", function() { return BubbleAnimation; });\n/* harmony import */ var _base_animation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.animation */ "./src/render/display/animation/base.animation.ts");\n/* harmony import */ var _ianimationbase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ianimationbase */ "./src/render/display/animation/ianimationbase.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar BubbleAnimation = /** @class */ (function (_super) {\n    __extends(BubbleAnimation, _super);\n    function BubbleAnimation(scene) {\n        return _super.call(this, scene) || this;\n    }\n    BubbleAnimation.prototype.load = function (resName, resUrl, data) {\n        _super.prototype.load.call(this, resName, resUrl, data);\n        this.animUrlData = new _ianimationbase__WEBPACK_IMPORTED_MODULE_1__["AnimationUrlData"]();\n        if (resName)\n            this.animUrlData.setData(this.resName, this.resUrl);\n        else\n            this.animUrlData.setDisplayData(resUrl, data);\n        this.scene.load.image(this.resName, this.animUrlData.pngUrl);\n        this.scene.load.image(this.animUrlData.jsonUrl, this.animUrlData.jsonUrl);\n        this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.onLoadComplete, this);\n        this.scene.load.start();\n    };\n    BubbleAnimation.prototype.play = function (aniName) {\n        _super.prototype.play.call(this, aniName);\n        if (!this.frameAnim)\n            return;\n        this.setScale(0.2, 0.2);\n        this.y = 50;\n        this.scene.tweens.add({\n            targets: this,\n            y: { value: -100, duration: 300, ease: "Bounce.easeOut" },\n            scaleX: { value: 1, duration: 300, ease: "Bounce.easeOut" },\n            scaleY: { value: 1, duration: 300, ease: "Bounce.easeOut" },\n        });\n    };\n    BubbleAnimation.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.frameAnim)\n            this.frameAnim.destroy();\n        if (this.bubblebg)\n            this.bubblebg.destroy();\n        this.frameAnim = null;\n        this.bubblebg = null;\n    };\n    BubbleAnimation.prototype.onLoadComplete = function (loader, totalComplete, totalFailed) {\n        this.loaded = true;\n        this.bubblebg = this.scene.add.image(0, 0, this.resName);\n        this.frameAnim = this.scene.add.image(0, 0, this.animUrlData.jsonUrl);\n        this.add([this.bubblebg, this.frameAnim]);\n        if (this.isPlaying)\n            this.play();\n    };\n    return BubbleAnimation;\n}(_base_animation__WEBPACK_IMPORTED_MODULE_0__["BaseAnimation"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/animation/bubble.animation.ts?')},"./src/render/display/animation/dragonbones.animation.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DragonbonesAnimation", function() { return DragonbonesAnimation; });\n/* harmony import */ var _base_animation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.animation */ "./src/render/display/animation/base.animation.ts");\n/* harmony import */ var _ianimationbase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ianimationbase */ "./src/render/display/animation/ianimationbase.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar DragonbonesAnimation = /** @class */ (function (_super) {\n    __extends(DragonbonesAnimation, _super);\n    function DragonbonesAnimation(scene) {\n        return _super.call(this, scene) || this;\n    }\n    DragonbonesAnimation.prototype.load = function (resName, resUrl, data) {\n        _super.prototype.load.call(this, resName, resUrl, data);\n        this.animUrlData = new _ianimationbase__WEBPACK_IMPORTED_MODULE_1__["AnimationUrlData"]();\n        if (resName)\n            this.animUrlData.setData(this.resName, this.resUrl, true, ".dbbin");\n        else\n            this.animUrlData.setDisplayData(resUrl, data);\n        this.scene.load.dragonbone(this.resName, this.animUrlData.pngUrl, this.animUrlData.jsonUrl, this.animUrlData.boneUrl, this.animUrlData.textureXhrSettings, this.animUrlData.atlasXhrSettings, this.animUrlData.boneXhrSettings);\n        this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.onLoadComplete, this);\n        this.scene.load.start();\n    };\n    DragonbonesAnimation.prototype.play = function (aniName) {\n        _super.prototype.play.call(this, aniName);\n        if (!this.armatureDisplay)\n            return;\n        this.armatureDisplay.animation.play(aniName);\n    };\n    DragonbonesAnimation.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.armatureDisplay)\n            this.armatureDisplay.destroy();\n        this.armatureDisplay = null;\n    };\n    // TODO  armature->\n    DragonbonesAnimation.prototype.onLoadComplete = function (loader, totalComplete, totalFailed) {\n        this.loaded = true;\n        this.armatureDisplay = this.scene.add.armature("mecha_1002_101d", this.resName);\n        this.add(this.armatureDisplay);\n        if (this.isPlaying)\n            this.play(this.curAniName);\n    };\n    return DragonbonesAnimation;\n}(_base_animation__WEBPACK_IMPORTED_MODULE_0__["BaseAnimation"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/animation/dragonbones.animation.ts?')},"./src/render/display/animation/frame.animation.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FrameAnimation", function() { return FrameAnimation; });\n/* harmony import */ var _base_animation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.animation */ "./src/render/display/animation/base.animation.ts");\n/* harmony import */ var _ianimationbase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ianimationbase */ "./src/render/display/animation/ianimationbase.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar FrameAnimation = /** @class */ (function (_super) {\n    __extends(FrameAnimation, _super);\n    function FrameAnimation(scene) {\n        return _super.call(this, scene) || this;\n    }\n    FrameAnimation.prototype.load = function (resName, resUrl, data, compl) {\n        _super.prototype.load.call(this, resName, resUrl, data);\n        this.complHandler = compl;\n        this.animUrlData = new _ianimationbase__WEBPACK_IMPORTED_MODULE_1__["AnimationUrlData"]();\n        if (resName)\n            this.animUrlData.setData(this.resName, this.resUrl);\n        else\n            this.animUrlData.setDisplayData(resUrl, data);\n        this.scene.load.atlas(this.resName, this.animUrlData.pngUrl, this.animUrlData.jsonUrl, this.animUrlData.textureXhrSettings, this.animUrlData.atlasXhrSettings);\n        this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.onLoadComplete, this);\n        this.scene.load.start();\n    };\n    FrameAnimation.prototype.play = function (aniName) {\n        _super.prototype.play.call(this, aniName);\n        if (!this.frameAnim)\n            return;\n        this.frameAnim.play(this.curAniName);\n    };\n    FrameAnimation.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.frameAnim)\n            this.frameAnim.destroy();\n        this.frameAnim = null;\n        this.complHandler = undefined;\n    };\n    FrameAnimation.prototype.onLoadComplete = function (loader, totalComplete, totalFailed) {\n        this.loaded = true;\n        // this.scene.anims.generateFrameNames(this.resName, { prefix: "diamond_", end: 15, zeroPad: 4 }),\n        if (!this.scene.anims.exists(this.curAniName)) {\n            this.scene.anims.create({\n                key: this.curAniName,\n                frames: this.scene.anims.generateFrameNames(this.resName),\n                // frames: this.scene.anims.generateFrameNames(this.resName, { prefix: "loading_ui_", start: 1, end: 45, zeroPad: 2 }),\n                repeat: -1\n            });\n        }\n        if (!this.frameAnim) {\n            this.frameAnim = this.scene.add.sprite(0, 0, this.resName);\n            this.add(this.frameAnim);\n        }\n        if (this.width === 0) {\n            this.setSize(this.frameAnim.width, this.frameAnim.height);\n            this.scale = 1;\n        }\n        else {\n            this.scale = this.width / this.frameAnim.displayWidth;\n        }\n        if (!this.isPlaying)\n            this.play(this.curAniName);\n        if (this.complHandler)\n            this.complHandler.run();\n    };\n    return FrameAnimation;\n}(_base_animation__WEBPACK_IMPORTED_MODULE_0__["BaseAnimation"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/animation/frame.animation.ts?')},"./src/render/display/animation/ianimationbase.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnimationUrlData", function() { return AnimationUrlData; });\nvar AnimationUrlData = /** @class */ (function () {\n    function AnimationUrlData() {\n    }\n    AnimationUrlData.prototype.setData = function (resName, resUrl, isbone, extension) {\n        if (isbone === void 0) { isbone = false; }\n        if (extension === void 0) { extension = ".json"; }\n        this.resName = resName;\n        this.resUrl = resUrl;\n        this.pngUrl = resUrl + "/" + resName + (!isbone ? ".png" : "_tex.png");\n        this.jsonUrl = resUrl + "/" + resName + (!isbone ? ".json" : "_tex.json");\n        if (isbone)\n            this.boneUrl = resUrl + "/" + resName + "_ske" + extension;\n        this.responseType = extension === ".dbbin" ? "arraybuffer" : null;\n        this.boneXhrSettings = this.responseType ? { responseType: "arraybuffer" } : null;\n    };\n    AnimationUrlData.prototype.setDisplayData = function (pngUrl, jsonUrl, extension) {\n        if (extension === void 0) { extension = ".json"; }\n        this.pngUrl = pngUrl;\n        this.jsonUrl = jsonUrl;\n        this.responseType = extension === ".dbbin" ? "arraybuffer" : null;\n        this.boneXhrSettings = this.responseType ? { responseType: "arraybuffer" } : null;\n    };\n    AnimationUrlData.prototype.dispose = function () {\n        this.textureXhrSettings = null;\n        this.atlasXhrSettings = null;\n        this.boneXhrSettings = null;\n    };\n    return AnimationUrlData;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/animation/ianimationbase.ts?')},"./src/render/display/bubble/bubble.container.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BubbleContainer", function() { return BubbleContainer; });\n/* harmony import */ var _bubble__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bubble */ "./src/render/display/bubble/bubble.ts");\n/* harmony import */ var _ui_components_dynamic_image__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ui/components/dynamic.image */ "./src/render/ui/components/dynamic.image.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar BubbleContainer = /** @class */ (function (_super) {\n    __extends(BubbleContainer, _super);\n    function BubbleContainer(scene, scale) {\n        var _this = _super.call(this, scene) || this;\n        _this.mBubbles = [];\n        _this.mScale = scale;\n        _this.mArrow = new _ui_components_dynamic_image__WEBPACK_IMPORTED_MODULE_1__["DynamicImage"](_this.scene, 0, 0);\n        _this.mArrow.scale = scale;\n        _this.mArrow.load(utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getRes("ui/chat/bubble_arrow.png"));\n        _this.add(_this.mArrow);\n        return _this;\n    }\n    BubbleContainer.prototype.addBubble = function (text, bubbleSetting) {\n        var bubble = this.createBubble(bubbleSetting);\n        var len = this.mBubbles.length;\n        var bul = null;\n        var h = 0;\n        bubble.show(text, bubbleSetting);\n        for (var i = len - 1; i >= 0; i--) {\n            bul = this.mBubbles[i];\n            h += bul.minHeight + 5 * this.mScale;\n            bul.tweenTo(-h);\n        }\n        this.add(bubble);\n        this.mArrow.y = 4 * this.mScale;\n    };\n    BubbleContainer.prototype.follow = function (target) {\n        if (this.mBubbles.length === 0) {\n            return;\n        }\n        var position = target.getPosition();\n        if (!position) {\n            return;\n        }\n        this.updatePos(position.x, position.y - 110);\n    };\n    BubbleContainer.prototype.updatePos = function (x, y) {\n        this.x = x * this.mScale;\n        this.y = y * this.mScale;\n    };\n    BubbleContainer.prototype.destroy = function (fromScene) {\n        if (!this.mBubbles)\n            return;\n        var len = this.mBubbles.length;\n        var bul = null;\n        for (var i = len - 1; i >= 0; i--) {\n            bul = this.mBubbles[i];\n            if (!bul)\n                continue;\n            bul.destroy();\n        }\n        this.mBubbles = null;\n        this.removeFormParent();\n        _super.prototype.destroy.call(this, fromScene);\n    };\n    BubbleContainer.prototype.removeFormParent = function () {\n        if (this.parentContainer) {\n            this.parentContainer.remove(this);\n        }\n    };\n    BubbleContainer.prototype.createBubble = function (bubbleSetting) {\n        if (!bubbleSetting)\n            return;\n        var bubble = new _bubble__WEBPACK_IMPORTED_MODULE_0__["Bubble"](this.scene, this.mScale);\n        this.mBubbles.push(bubble);\n        var duration = bubbleSetting.duration ? bubbleSetting.duration : 5000;\n        bubble.durationRemove(duration, this.onRemoveBubble, this);\n        return bubble;\n    };\n    BubbleContainer.prototype.onRemoveBubble = function (bubble) {\n        if (!bubble) {\n            return;\n        }\n        this.mBubbles = this.mBubbles.filter(function (val) { return bubble !== val; });\n        this.remove(bubble);\n        bubble.destroy();\n        if (this.mBubbles.length === 0) {\n            this.removeFormParent();\n        }\n    };\n    return BubbleContainer;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/bubble/bubble.container.ts?')},"./src/render/display/bubble/bubble.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bubble", function() { return Bubble; });\n/* harmony import */ var _ui_components_dynamic_ninepatch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../ui/components/dynamic.ninepatch */ "./src/render/ui/components/dynamic.ninepatch.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Bubble = /** @class */ (function (_super) {\n    __extends(Bubble, _super);\n    function Bubble(scene, scale) {\n        var _this = _super.call(this, scene) || this;\n        _this.mMinWidth = 0;\n        _this.mMinHeight = 0;\n        _this.mScale = scale;\n        _this.x = -40 * scale;\n        return _this;\n    }\n    Bubble.prototype.show = function (text, bubble) {\n        this.mChatContent = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](this.scene, 0, 4 * this.mScale, text, {\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n            fontSize: 14 * this.mScale,\n            color: "#000000",\n            origin: { x: 0, y: 0 },\n            wrap: { width: 200 * this.mScale, mode: "character" }\n        });\n        this.add(this.mChatContent);\n        var _minH = 36 * this.mScale;\n        var _minW = 60 * this.mScale;\n        this.mMinHeight = this.mChatContent.height + 18 * this.mScale;\n        this.mMinHeight = this.mMinHeight < _minH ? _minH : this.mMinHeight;\n        this.mMinWidth = this.mChatContent.width + 20 * this.mScale;\n        this.mMinWidth = this.mMinWidth < _minW ? _minW : this.mMinWidth;\n        this.mBubbleBg = new _ui_components_dynamic_ninepatch__WEBPACK_IMPORTED_MODULE_0__["DynamicNinepatch"](this.scene, this);\n        var res = utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getOsdRes(bubble.bubbleResource || "platformitem/thumbnail/bubble_01.png");\n        this.mBubbleBg.load(res, {\n            width: this.mMinWidth,\n            height: this.mMinHeight,\n            key: res,\n            columns: [34, 2, 32],\n            rows: [42, 2, 9]\n        }, this.onComplete, this);\n    };\n    Bubble.prototype.tweenTo = function (toY) {\n        this.mToY = toY;\n        this.scene.tweens.add({\n            targets: this,\n            y: toY,\n            alpha: 1,\n            duration: 200\n        });\n    };\n    Bubble.prototype.durationRemove = function (duration, callback, callbackContext) {\n        var _this = this;\n        this.mTweenCompleteCallback = callback;\n        this.mTweenCallContext = callbackContext;\n        this.mRemoveDelay = setTimeout(function () {\n            _this.removeTween();\n        }, duration);\n    };\n    Bubble.prototype.removeTween = function () {\n        var _this = this;\n        var endY = this.mToY - 30;\n        var tween = this.scene.tweens.add({\n            targets: this,\n            y: endY,\n            alpha: 0,\n            duration: 200,\n            onComplete: function () {\n                if (_this.mTweenCompleteCallback) {\n                    _this.mTweenCompleteCallback.call(_this.mTweenCallContext, _this);\n                }\n            }\n        });\n    };\n    Bubble.prototype.destroy = function () {\n        if (this.mChatContent) {\n            this.mChatContent.destroy(true);\n        }\n        this.mChatContent = null;\n        this.mMinWidth = 0;\n        this.mMinHeight = 0;\n        this.mToY = 0;\n        this.mTweenCompleteCallback = null;\n        this.mTweenCallContext = null;\n        if (this.mRemoveDelay) {\n            clearTimeout(this.mRemoveDelay);\n        }\n        _super.prototype.destroy.call(this, true);\n    };\n    Bubble.prototype.onComplete = function (img) {\n        if (img && this.scene) {\n            img.setOrigin(0, 0);\n            this.addAt(img, 0);\n            var bound = this.getBounds();\n            this.mChatContent.x = this.mMinWidth - this.mChatContent.width >> 1;\n            this.mChatContent.y = (this.mMinHeight - this.mChatContent.height >> 1) + 6;\n        }\n    };\n    Object.defineProperty(Bubble.prototype, "minWidth", {\n        get: function () {\n            return this.mMinWidth;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bubble.prototype, "minHeight", {\n        get: function () {\n            return this.mMinHeight;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Bubble;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/bubble/bubble.ts?')},"./src/render/display/debugs/astar.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Astar", function() { return Astar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AstarDebugger", function() { return AstarDebugger; });\n/* harmony import */ var _scenes_play_scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../scenes/play.scene */ "./src/render/scenes/play.scene.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n\n\nvar Astar = /** @class */ (function () {\n    function Astar(render) {\n        this.render = render;\n        this.CIRCLE_RADIUS_POINTS = 2;\n        this.CIRCLE_RADIUS_START_POSITION = 4;\n        this.CIRCLE_RADIUS_TARGET_POSITION = 4;\n        this.CIRCLE_COLOR_POINTS_PASS = 0x00FF00;\n        this.CIRCLE_COLOR_POINTS_NOTPASS = 0xFF0000;\n        this.CIRCLE_COLOR_START_POSITION = 0xFFFF00;\n        this.CIRCLE_COLOR_TARGET_POSITION = 0xFFFF00;\n        this.LINE_COLOR_PATH = 0xFFFF00;\n        // \n        this.mShowAllPoints = false;\n        this.mPoints = new Map();\n        this.mStartPos = null;\n        this.mTargetPos = null;\n        this.mPath = null;\n        AstarDebugger.getInstance().setDebugger(this);\n    }\n    Astar.prototype.destroy = function () {\n        this.clearAll();\n        if (this.mAstarSize)\n            this.mAstarSize = null;\n        AstarDebugger.getInstance().setDebugger(null);\n    };\n    Astar.prototype.initData = function (map, size) {\n        this.mAstarSize = size;\n        if (AstarDebugger.getInstance().isDebug) {\n            this.drawPoints();\n        }\n        else {\n            this.clearAll();\n        }\n    };\n    Astar.prototype.updateData = function (x, y, val) {\n        if (!this.mAstarSize)\n            return;\n        if (AstarDebugger.getInstance().isDebug) {\n            this.drawPoints();\n        }\n        else {\n            this.clearAll();\n        }\n    };\n    Astar.prototype.showPath = function (start, tar, path) {\n        if (!this.mAstarSize)\n            return;\n        if (AstarDebugger.getInstance().isDebug) {\n            this.drawPath(start, tar, path);\n        }\n        else {\n            this.clearPath();\n        }\n    };\n    Astar.prototype.drawPoints = function () {\n        var _this = this;\n        if (!this.mShowAllPoints)\n            return;\n        if (!this.mAstarSize)\n            return;\n        var scene = this.render.sceneManager.getMainScene();\n        if (!scene || !(scene instanceof _scenes_play_scene__WEBPACK_IMPORTED_MODULE_0__["PlayScene"])) {\n            return;\n        }\n        this.clearAll();\n        var _loop_1 = function (y) {\n            var _loop_2 = function (x) {\n                this_1.render.physicalPeer.isWalkableAt(x, y)\n                    .then(function (walkable) {\n                    var color = _this.getColorByValue(walkable);\n                    var pos = new utils__WEBPACK_IMPORTED_MODULE_1__["LogicPos"](x, y);\n                    pos = utils__WEBPACK_IMPORTED_MODULE_1__["Position45"].transformTo90(pos, _this.mAstarSize);\n                    pos.y += _this.mAstarSize.tileHeight / 2;\n                    var newGraphics = _this.drawCircle(scene, pos, color, _this.CIRCLE_RADIUS_POINTS);\n                    _this.mPoints.set(new utils__WEBPACK_IMPORTED_MODULE_1__["LogicPos"](x, y), newGraphics);\n                });\n            };\n            for (var x = 0; x < this_1.mAstarSize.cols; x++) {\n                _loop_2(x);\n            }\n        };\n        var this_1 = this;\n        for (var y = 0; y < this.mAstarSize.rows; y++) {\n            _loop_1(y);\n        }\n    };\n    Astar.prototype.clearAll = function () {\n        this.mPoints.forEach(function (value) {\n            value.destroy();\n        });\n        this.mPoints.clear();\n        this.clearPath();\n    };\n    Astar.prototype.clearPath = function () {\n        if (this.mStartPos) {\n            this.mStartPos.destroy();\n            this.mStartPos = null;\n        }\n        if (this.mTargetPos) {\n            this.mTargetPos.destroy();\n            this.mTargetPos = null;\n        }\n        if (this.mPath) {\n            this.mPath.destroy();\n            this.mPath = null;\n        }\n    };\n    Astar.prototype.drawPath = function (start, tar, path) {\n        if (!this.mAstarSize)\n            return;\n        var scene = this.render.sceneManager.getMainScene();\n        if (!scene || !(scene instanceof _scenes_play_scene__WEBPACK_IMPORTED_MODULE_0__["PlayScene"])) {\n            return;\n        }\n        this.clearPath();\n        this.mStartPos = this.drawCircle(scene, start, this.CIRCLE_COLOR_START_POSITION, this.CIRCLE_RADIUS_START_POSITION);\n        this.mTargetPos = this.drawCircle(scene, tar, this.CIRCLE_COLOR_TARGET_POSITION, this.CIRCLE_RADIUS_TARGET_POSITION);\n        if (path.length > 1) {\n            this.mPath = this.drawLine(scene, path, this.LINE_COLOR_PATH);\n        }\n    };\n    Astar.prototype.drawCircle = function (scene, pos, color, radius) {\n        var graphics = scene.make.graphics(undefined, false);\n        graphics.clear();\n        graphics.fillStyle(color, 1);\n        graphics.fillCircle(pos.x, pos.y, radius);\n        scene.layerManager.addToLayer("middleLayer", graphics);\n        return graphics;\n    };\n    Astar.prototype.drawLine = function (scene, path, color) {\n        var graphics = scene.make.graphics(undefined, false);\n        graphics.lineStyle(1, color);\n        graphics.beginPath();\n        for (var i = 0; i < path.length - 1; i++) {\n            var iPo = path[i];\n            var point = new utils__WEBPACK_IMPORTED_MODULE_1__["LogicPos"](iPo.x, iPo.y);\n            graphics.moveTo(point.x, point.y);\n            iPo = path[i + 1];\n            point = new utils__WEBPACK_IMPORTED_MODULE_1__["LogicPos"](iPo.x, iPo.y);\n            graphics.lineTo(point.x, point.y);\n        }\n        graphics.closePath();\n        graphics.strokePath();\n        scene.layerManager.addToLayer("middleLayer", graphics);\n        return graphics;\n    };\n    Astar.prototype.getColorByValue = function (val) {\n        return val ? this.CIRCLE_COLOR_POINTS_PASS : this.CIRCLE_COLOR_POINTS_NOTPASS;\n    };\n    return Astar;\n}());\n\nvar AstarDebugger = /** @class */ (function () {\n    function AstarDebugger() {\n        this.isDebug = false;\n        this.mAstar = null;\n    }\n    AstarDebugger.getInstance = function () {\n        if (!AstarDebugger._instance)\n            AstarDebugger._instance = new AstarDebugger();\n        return AstarDebugger._instance;\n    };\n    AstarDebugger.prototype.setDebugger = function (grids) {\n        this.mAstar = grids;\n    };\n    AstarDebugger.prototype.q = function () {\n        this.isDebug = false;\n        if (this.mAstar) {\n            this.mAstar.clearAll();\n        }\n    };\n    AstarDebugger.prototype.v = function () {\n        this.isDebug = true;\n        if (this.mAstar) {\n            this.mAstar.drawPoints();\n        }\n    };\n    return AstarDebugger;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/debugs/astar.ts?')},"./src/render/display/debugs/editor.mode.debugger.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditorModeDebugger", function() { return EditorModeDebugger; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n\nvar EditorModeDebugger = /** @class */ (function () {\n    function EditorModeDebugger(render) {\n        this.render = render;\n        this.isDebug = false;\n        EditorModeDebugger._instance = this;\n    }\n    EditorModeDebugger.getInstance = function () {\n        if (!EditorModeDebugger._instance) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("SortDebugger not created");\n        }\n        return EditorModeDebugger._instance;\n    };\n    // export\n    EditorModeDebugger.prototype.getIsDebug = function () {\n        return this.isDebug;\n    };\n    EditorModeDebugger.prototype.q = function () {\n        if (this.isDebug) {\n            this.render.mainPeer.elementsHideReferenceArea();\n        }\n        this.isDebug = false;\n    };\n    EditorModeDebugger.prototype.v = function () {\n        if (!this.isDebug) {\n            this.render.mainPeer.elementsShowReferenceArea();\n        }\n        this.isDebug = true;\n    };\n    return EditorModeDebugger;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/debugs/editor.mode.debugger.ts?')},"./src/render/display/debugs/grids.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Grids", function() { return Grids; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GridsDebugger", function() { return GridsDebugger; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _scenes_play_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../scenes/play.scene */ "./src/render/scenes/play.scene.ts");\n\n\nvar Grids = /** @class */ (function () {\n    function Grids(render) {\n        this.render = render;\n        GridsDebugger.getInstance().setDebugger(this);\n    }\n    Grids.prototype.destroy = function () {\n        if (this.mGraphic)\n            this.mGraphic.destroy();\n        this.mRoomSize = null;\n        GridsDebugger.getInstance().setDebugger(null);\n    };\n    Grids.prototype.setData = function (posObj) {\n        this.mRoomSize = posObj;\n        if (GridsDebugger.getInstance().isDebug) {\n            this.show();\n        }\n        else {\n            this.hide();\n        }\n    };\n    Grids.prototype.show = function () {\n        if (!this.mRoomSize)\n            return;\n        var scene = this.render.sceneManager.getMainScene();\n        if (!scene || !(scene instanceof _scenes_play_scene__WEBPACK_IMPORTED_MODULE_1__["PlayScene"])) {\n            return;\n        }\n        if (this.mGraphic)\n            this.mGraphic.destroy();\n        this.mGraphic = scene.make.graphics(undefined, false);\n        this.mGraphic.clear();\n        this.mGraphic.lineStyle(1, 0x00FF00);\n        this.mGraphic.beginPath();\n        for (var i = 0; i <= this.mRoomSize.rows; i++) {\n            this.drawLine(this.mRoomSize, this.mGraphic, 0, i, this.mRoomSize.cols, i);\n        }\n        for (var i = 0; i <= this.mRoomSize.cols; i++) {\n            this.drawLine(this.mRoomSize, this.mGraphic, i, 0, i, this.mRoomSize.rows);\n        }\n        this.mGraphic.closePath();\n        this.mGraphic.strokePath();\n        scene.layerManager.addToLayer("middleLayer", this.mGraphic);\n    };\n    Grids.prototype.hide = function () {\n        if (this.mGraphic)\n            this.mGraphic.destroy();\n    };\n    Grids.prototype.drawLine = function (posObj, graphics, startX, endX, startY, endY) {\n        var point = new utils__WEBPACK_IMPORTED_MODULE_0__["LogicPos"](startX, endX);\n        point = utils__WEBPACK_IMPORTED_MODULE_0__["Position45"].transformTo90(point, posObj);\n        graphics.moveTo(point.x, point.y);\n        point = new utils__WEBPACK_IMPORTED_MODULE_0__["LogicPos"](startY, endY);\n        point = utils__WEBPACK_IMPORTED_MODULE_0__["Position45"].transformTo90(point, posObj);\n        graphics.lineTo(point.x, point.y);\n    };\n    return Grids;\n}());\n\nvar GridsDebugger = /** @class */ (function () {\n    function GridsDebugger() {\n        this.isDebug = false;\n        this.mGrids = null;\n    }\n    GridsDebugger.getInstance = function () {\n        if (!GridsDebugger._instance)\n            GridsDebugger._instance = new GridsDebugger();\n        return GridsDebugger._instance;\n    };\n    GridsDebugger.prototype.setDebugger = function (grids) {\n        this.mGrids = grids;\n    };\n    GridsDebugger.prototype.q = function () {\n        this.isDebug = false;\n        if (this.mGrids) {\n            this.mGrids.hide();\n        }\n    };\n    GridsDebugger.prototype.v = function () {\n        this.isDebug = true;\n        if (this.mGrids) {\n            this.mGrids.show();\n        }\n    };\n    return GridsDebugger;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/debugs/grids.ts?')},"./src/render/display/debugs/matter.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MatterBodies", function() { return MatterBodies; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _scenes_play_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../scenes/play.scene */ "./src/render/scenes/play.scene.ts");\n\n\nvar MatterBodies = /** @class */ (function () {\n    function MatterBodies(render) {\n        this.render = render;\n        var scene = this.render.sceneManager.getSceneByName(_scenes_play_scene__WEBPACK_IMPORTED_MODULE_1__["PlayScene"].name);\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("no matter scene");\n            return;\n        }\n        this.mGraphics = scene.make.graphics(undefined, false);\n        scene.layerManager.addToLayer("middleLayer", this.mGraphics);\n    }\n    MatterBodies.prototype.update = function () {\n        if (this.mGraphics)\n            this.mGraphics.clear();\n    };\n    MatterBodies.prototype.renderWireframes = function (bodies) {\n        var graphics = this.mGraphics;\n        if (!graphics)\n            return;\n        graphics.clear();\n        if (!bodies)\n            return;\n        graphics.lineStyle(1, 0xFF0000);\n        graphics.beginPath();\n        var dpr = this.render.scaleRatio;\n        for (var _i = 0, bodies_1 = bodies; _i < bodies_1.length; _i++) {\n            var bodie = bodies_1[_i];\n            graphics.moveTo(bodie[0].x / dpr, bodie[0].y / dpr);\n            for (var j = 1; j < bodie.length; j++) {\n                graphics.lineTo(bodie[j].x / dpr, bodie[j].y / dpr);\n            }\n            graphics.lineTo(bodie[0].x / dpr, bodie[0].y / dpr);\n        }\n        graphics.strokePath();\n    };\n    MatterBodies.prototype.destroy = function () {\n        if (this.mGraphics) {\n            this.mGraphics.destroy();\n        }\n    };\n    return MatterBodies;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/debugs/matter.ts?')},"./src/render/display/debugs/server.pointer.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServerPosition", function() { return ServerPosition; });\n/* harmony import */ var _scenes_play_scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../scenes/play.scene */ "./src/render/scenes/play.scene.ts");\n\nvar ServerPosition = /** @class */ (function () {\n    function ServerPosition(render) {\n        var scene = render.sceneManager.getSceneByName(_scenes_play_scene__WEBPACK_IMPORTED_MODULE_0__["PlayScene"].name);\n        this.dpr = render.scaleRatio;\n        this.mGridhics = scene.make.graphics(undefined, false);\n        scene.layerManager.addToLayer("middleLayer", this.mGridhics);\n    }\n    ServerPosition.prototype.draw = function (x, y) {\n        this.mGridhics.clear();\n        this.mGridhics.fillStyle(0x00FF00, 1);\n        this.mGridhics.fillCircle(x, y, 2 * this.dpr);\n    };\n    ServerPosition.prototype.destroy = function () {\n        if (this.mGridhics)\n            this.mGridhics.destroy();\n    };\n    return ServerPosition;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/debugs/server.pointer.ts?')},"./src/render/display/debugs/sort.debugger.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SortDebugger", function() { return SortDebugger; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _scenes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../scenes */ "./src/render/scenes/index.ts");\n\n\nvar SortDebugger = /** @class */ (function () {\n    function SortDebugger(render) {\n        this.render = render;\n        this.isDebug = false;\n        this.RECT_COLOR = 0x00ff00;\n        SortDebugger._instance = this;\n        this.mData = new Map();\n        this.mGraphics = new Map();\n    }\n    SortDebugger.getInstance = function () {\n        if (!SortDebugger._instance) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("SortDebugger not created");\n        }\n        return SortDebugger._instance;\n    };\n    SortDebugger.prototype.q = function () {\n        this.isDebug = false;\n        this.clear();\n    };\n    SortDebugger.prototype.v = function () {\n        if (!this.isDebug) {\n            this.redraw();\n        }\n        this.isDebug = true;\n    };\n    SortDebugger.prototype.clear = function () {\n        this.mGraphics.forEach(function (graphics) {\n            graphics.destroy();\n        });\n        this.mGraphics.clear();\n    };\n    // sort\n    SortDebugger.prototype.addDisplayObject = function (id, x, y, w, h) {\n        var _this = this;\n        var rect = new Rect(x, y, w, h);\n        this.mData.set(id, rect);\n        if (!this.isDebug)\n            return;\n        var scene = this.render.sceneManager.getMainScene();\n        if (!scene || !(scene instanceof _scenes__WEBPACK_IMPORTED_MODULE_1__["PlayScene"])) {\n            return;\n        }\n        this.render.mainPeer.getCurrentRoomSize()\n            .then(function (size) {\n            if (_this.mGraphics.get(id)) {\n                _this.mGraphics.get(id).destroy();\n            }\n            _this.mGraphics.set(id, _this.drawObj(scene, _this.RECT_COLOR, rect, size));\n        });\n    };\n    SortDebugger.prototype.redraw = function () {\n        var _this = this;\n        this.clear();\n        var scene = this.render.sceneManager.getMainScene();\n        if (!scene || !(scene instanceof _scenes__WEBPACK_IMPORTED_MODULE_1__["PlayScene"])) {\n            return;\n        }\n        this.render.mainPeer.getCurrentRoomSize()\n            .then(function (size) {\n            _this.mData.forEach(function (rect, id) {\n                _this.mGraphics.set(id, _this.drawObj(scene, _this.RECT_COLOR, rect, size));\n            });\n        });\n    };\n    SortDebugger.prototype.drawObj = function (scene, color, rect, posObj) {\n        utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug("#sort drawRect: ", rect);\n        var pos1 = new utils__WEBPACK_IMPORTED_MODULE_0__["LogicPos"](rect.x, rect.y);\n        // pos1 = Position45.transformTo90(pos1, posObj);\n        var pos2 = new utils__WEBPACK_IMPORTED_MODULE_0__["LogicPos"](rect.x + rect.w, rect.y);\n        // pos2 = Position45.transformTo90(pos2, posObj);\n        var pos3 = new utils__WEBPACK_IMPORTED_MODULE_0__["LogicPos"](rect.x + rect.w, rect.y + rect.h);\n        // pos3 = Position45.transformTo90(pos3, posObj);\n        var pos4 = new utils__WEBPACK_IMPORTED_MODULE_0__["LogicPos"](rect.x, rect.y + rect.h);\n        // pos4 = Position45.transformTo90(pos4, posObj);\n        var graphics = scene.make.graphics(undefined, false);\n        graphics.lineStyle(1, color);\n        graphics.fillStyle(color, 1);\n        graphics.moveTo(pos1.x, pos1.y);\n        graphics.lineTo(pos2.x, pos2.y);\n        graphics.lineTo(pos3.x, pos3.y);\n        graphics.lineTo(pos4.x, pos4.y);\n        graphics.lineTo(pos1.x, pos1.y);\n        graphics.fillPath();\n        scene.layerManager.addToLayer("middleLayer", graphics);\n        return graphics;\n    };\n    return SortDebugger;\n}());\n\nvar Rect = /** @class */ (function () {\n    function Rect(x, y, w, h) {\n        this.x = x;\n        this.y = y;\n        this.w = w;\n        this.h = h;\n    }\n    return Rect;\n}());\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/debugs/sort.debugger.ts?')},"./src/render/display/display.movement.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DisplayMovement", function() { return DisplayMovement; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n\n/**\n * Render\n */\nvar DisplayMovement = /** @class */ (function () {\n    function DisplayMovement(scene, display, render) {\n        this.scene = scene;\n        this.display = display;\n        this.render = render;\n    }\n    DisplayMovement.prototype.destroy = function () {\n    };\n    DisplayMovement.prototype.doMove = function (moveData) {\n        var _this = this;\n        if (!moveData.posPath) {\n            return;\n        }\n        this.moveData = moveData;\n        var line = moveData.tweenLineAnim;\n        if (line) {\n            line.stop();\n            line.destroy();\n        }\n        var paths = [];\n        var posPath = moveData.posPath;\n        var index = 0;\n        for (var _i = 0, posPath_1 = posPath; _i < posPath_1.length; _i++) {\n            var path = posPath_1[_i];\n            var duration = path.duration;\n            var direction = path.direction;\n            paths.push({\n                x: path.x,\n                y: path.y,\n                direction: direction,\n                duration: duration,\n                onStartParams: direction,\n                onCompleteParams: { duration: duration, index: index },\n                onStart: function (tween, target, params) {\n                    _this.onCheckDirection(params);\n                },\n                onComplete: function (tween, targets, params) {\n                    _this.onMovePathPointComplete(params);\n                }\n            });\n            index++;\n        }\n        moveData.tweenLineAnim = this.scene.tweens.timeline({\n            targets: this,\n            ease: "Linear",\n            tweens: paths,\n            onStart: function () {\n                _this.onMoveStart();\n            },\n            onComplete: function () {\n                _this.onMoveComplete();\n            },\n            onUpdate: function () {\n                _this.onMoving();\n            },\n            onCompleteParams: [this.display],\n        });\n    };\n    DisplayMovement.prototype.onCheckDirection = function (dir) {\n        if (typeof dir !== "number") {\n            return this.display.direction;\n        }\n        utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug("dir:====", dir);\n        if (dir !== this.display.displayInfo.avatarDir) {\n            // this.display.displayInfo.avatarDir = dir; // direction set\n            this.display.direction = dir;\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug("renderSetDirection:=====", dir);\n            this.render.setDirection(this.display.id, dir);\n        }\n    };\n    DisplayMovement.prototype.onMovePathPointComplete = function (params) {\n        if (!this.moveData) {\n            return;\n        }\n        this.moveData.step += 1;\n    };\n    DisplayMovement.prototype.onMoveStart = function () {\n        this.render.mainPeer.displayStartMove(this.display.id);\n    };\n    DisplayMovement.prototype.onMoveComplete = function () {\n        if (this.moveData.tweenLineAnim)\n            this.moveData.tweenLineAnim.stop();\n        this.render.mainPeer.displayCompleteMove(this.display.id);\n        this.stopMove();\n    };\n    DisplayMovement.prototype.onMoving = function () {\n        var now = this.render.mainPeer.now();\n        if (now - (this.moveData.tweenLastUpdate || 0) >= 50) {\n            this.display.setDepth(0);\n            this.moveData.tweenLastUpdate = now;\n        }\n        this.display.updateTopDisplay();\n    };\n    DisplayMovement.prototype.stopMove = function () {\n        if (this.moveData && this.moveData.posPath) {\n            delete this.moveData.posPath;\n            if (this.moveData.arrivalTime)\n                this.moveData.arrivalTime = 0;\n            if (this.moveData.tweenLineAnim) {\n                this.moveData.tweenLineAnim.stop();\n                this.moveData.tweenLineAnim.destroy();\n            }\n        }\n        this.render.mainPeer.displayStopMove(this.display.id);\n    };\n    return DisplayMovement;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/display.movement.ts?')},"./src/render/display/display.object.ts":function(module,exports){eval("\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/display.object.ts?")},"./src/render/display/dragonbones/dragonbones.display.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DragonbonesDisplay", function() { return DragonbonesDisplay; });\n/* harmony import */ var baseRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! baseRender */ "./src/base/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _loadqueue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../loadqueue */ "./src/render/loadqueue/index.ts");\n/* harmony import */ var _element_top_display__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../element.top.display */ "./src/render/display/element.top.display.ts");\n/* harmony import */ var _display_movement__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../display.movement */ "./src/render/display/display.movement.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\nvar DragonbonesDisplay = /** @class */ (function (_super) {\n    __extends(DragonbonesDisplay, _super);\n    function DragonbonesDisplay(scene, render, id, uuid, type) {\n        var _this = _super.call(this, scene) || this;\n        _this.render = render;\n        _this.uuid = uuid;\n        _this.mID = undefined;\n        _this.mNodeType = undefined;\n        _this.mSortX = 0;\n        _this.mSortY = 0;\n        _this.mName = undefined;\n        _this.mID = id;\n        _this.mNodeType = type;\n        _this.mLoadQueue = new _loadqueue__WEBPACK_IMPORTED_MODULE_3__["LoadQueue"](scene);\n        _this.mLoadQueue.on("QueueProgress", _this.fileComplete, _this);\n        _this.mLoadQueue.on("QueueError", _this.fileError, _this);\n        _this.mMovement = new _display_movement__WEBPACK_IMPORTED_MODULE_5__["DisplayMovement"](scene, _this, render);\n        return _this;\n    }\n    DragonbonesDisplay.prototype.load = function (display, field) {\n        field = !field ? structure__WEBPACK_IMPORTED_MODULE_2__["DisplayField"].STAGE : field;\n        if (field !== structure__WEBPACK_IMPORTED_MODULE_2__["DisplayField"].STAGE) {\n            return Promise.reject("field is not STAGE");\n        }\n        return _super.prototype.load.call(this, display);\n    };\n    DragonbonesDisplay.prototype.startLoad = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (!_this.mLoadQueue || _this.mCreated) {\n                resolve(null);\n                return;\n            }\n            _this.mLoadQueue.once("QueueComplete", function () {\n                resolve(null);\n            }, _this);\n            _this.mLoadQueue.startLoad();\n        });\n    };\n    DragonbonesDisplay.prototype.destroy = function () {\n        if (this.mLoadQueue) {\n            this.mLoadQueue.off("QueueProgress", this.fileComplete, this);\n            this.mLoadQueue.off("QueueError", this.fileError, this);\n            this.mLoadQueue.destroy();\n        }\n        if (this.mReferenceArea) {\n            this.mReferenceArea.destroy();\n            this.mReferenceArea = undefined;\n        }\n        if (this.mTopDisplay) {\n            this.mTopDisplay.destroy();\n        }\n        if (this.mMovement) {\n            this.mMovement.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    Object.defineProperty(DragonbonesDisplay.prototype, "id", {\n        get: function () {\n            return this.mID;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DragonbonesDisplay.prototype, "nodeType", {\n        get: function () {\n            return this.mNodeType;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DragonbonesDisplay.prototype, "titleMask", {\n        get: function () {\n            return this.mTitleMask;\n        },\n        set: function (val) {\n            this.mTitleMask = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DragonbonesDisplay.prototype.setRootMount = function (gameObject) {\n        _super.prototype.setRootMount.call(this, gameObject);\n        this.updateTopDisplay();\n    };\n    DragonbonesDisplay.prototype.showRefernceArea = function (area, origin) {\n        return __awaiter(this, void 0, void 0, function () {\n            var roomSize;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!area || area.length <= 0 || !origin)\n                            return [2 /*return*/];\n                        if (!this.mReferenceArea) {\n                            this.mReferenceArea = new baseRender__WEBPACK_IMPORTED_MODULE_0__["ReferenceArea"](this.scene);\n                        }\n                        return [4 /*yield*/, this.render.mainPeer.getCurrentRoomSize()];\n                    case 1:\n                        roomSize = _a.sent();\n                        this.mReferenceArea.draw(area, origin, roomSize.tileWidth, roomSize.tileHeight);\n                        this.addAt(this.mReferenceArea, 0);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    DragonbonesDisplay.prototype.hideRefernceArea = function () {\n        if (this.mReferenceArea) {\n            this.mReferenceArea.destroy();\n            this.mReferenceArea = undefined;\n        }\n    };\n    DragonbonesDisplay.prototype.updateTopDisplay = function () {\n        if (this.mTopDisplay)\n            this.mTopDisplay.update();\n    };\n    DragonbonesDisplay.prototype.showNickname = function (name) {\n        if (name === undefined) {\n            name = this.mName;\n        }\n        this.mName = name;\n        if (!this.mTopDisplay) {\n            this.mTopDisplay = new _element_top_display__WEBPACK_IMPORTED_MODULE_4__["ElementTopDisplay"](this.scene, this, this.render.scaleRatio);\n        }\n        if (!this.checkShowNickname())\n            return;\n        this.mTopDisplay.showNickname(name);\n    };\n    DragonbonesDisplay.prototype.showTopDisplay = function (data) {\n        if (!data) {\n            if (this.mTopDisplay)\n                this.mTopDisplay.destroy();\n            this.mTopDisplay = undefined;\n            return;\n        }\n        if (!this.mTopDisplay)\n            this.mTopDisplay = new _element_top_display__WEBPACK_IMPORTED_MODULE_4__["ElementTopDisplay"](this.scene, this, this.render.scaleRatio);\n        this.mTopDisplay.loadState(data);\n    };\n    DragonbonesDisplay.prototype.showBubble = function (text, setting) {\n        if (!this.mTopDisplay) {\n            this.mTopDisplay = new _element_top_display__WEBPACK_IMPORTED_MODULE_4__["ElementTopDisplay"](this.scene, this, this.render.scaleRatio);\n        }\n        this.mTopDisplay.showBubble(text, setting);\n    };\n    DragonbonesDisplay.prototype.clearBubble = function () {\n        if (!this.mTopDisplay)\n            return;\n        this.mTopDisplay.clearBubble();\n    };\n    DragonbonesDisplay.prototype.created = function () {\n        _super.prototype.created.call(this);\n        this.render.mainPeer.elementDisplayReady(this.id);\n        this.render.renderEmitter("dragonBones_initialized");\n    };\n    Object.defineProperty(DragonbonesDisplay.prototype, "projectionSize", {\n        get: function () {\n            if (!this.mProjectionSize) {\n                this.mProjectionSize = { offset: { x: 0, y: 0 }, width: 0, height: 0 };\n            }\n            return this.mProjectionSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DragonbonesDisplay.prototype.play = function (val) {\n        _super.prototype.play.call(this, val);\n        this.fetchProjection();\n    };\n    DragonbonesDisplay.prototype.doMove = function (moveData) {\n        this.mMovement.doMove(moveData);\n    };\n    DragonbonesDisplay.prototype.setPosition = function (x, y, z, w) {\n        _super.prototype.setPosition.call(this, x, y, z, w);\n        this.updateTopDisplay();\n        return this;\n    };\n    DragonbonesDisplay.prototype.addEffect = function (display) {\n        if (!display) {\n            return utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().error("Failed to add effect, display does not exist");\n        }\n        var backend = display.getSprite(structure__WEBPACK_IMPORTED_MODULE_2__["DisplayField"].BACKEND);\n        if (backend) {\n            this.addAt(backend, structure__WEBPACK_IMPORTED_MODULE_2__["DisplayField"].BACKEND);\n        }\n        var frontend = display.getSprite(structure__WEBPACK_IMPORTED_MODULE_2__["DisplayField"].FRONTEND);\n        if (frontend) {\n            this.addAt(frontend, structure__WEBPACK_IMPORTED_MODULE_2__["DisplayField"].FRONTEND);\n        }\n    };\n    DragonbonesDisplay.prototype.removeEffect = function () {\n    };\n    DragonbonesDisplay.prototype.mount = function (ele, targetIndex) {\n    };\n    DragonbonesDisplay.prototype.unmount = function (ele) {\n    };\n    Object.defineProperty(DragonbonesDisplay.prototype, "sortX", {\n        get: function () {\n            return this.mSortX;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DragonbonesDisplay.prototype, "sortY", {\n        get: function () {\n            return this.mSortY;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DragonbonesDisplay.prototype.loadCompleteHander = function () {\n        this.closePlaceholder();\n    };\n    DragonbonesDisplay.prototype.createArmatureDisplay = function (loader, totalComplete, totalFailed) {\n        if (!this.scene)\n            return;\n        _super.prototype.createArmatureDisplay.call(this, loader, totalComplete, totalFailed);\n        this.play({ name: "idle", flip: false });\n    };\n    DragonbonesDisplay.prototype.refreshAvatar = function () {\n        _super.prototype.refreshAvatar.call(this);\n    };\n    DragonbonesDisplay.prototype.fetchProjection = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.id)\n                            return [2 /*return*/];\n                        _a = this;\n                        return [4 /*yield*/, this.render.mainPeer.fetchProjectionSize(this.id)];\n                    case 1:\n                        _a.mProjectionSize = _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    DragonbonesDisplay.prototype.fileComplete = function (progress, key, type) {\n        if (key !== this.resourceName || type !== "image") {\n            return;\n        }\n        this.createArmatureDisplay();\n    };\n    DragonbonesDisplay.prototype.fileError = function (key) {\n        if (key !== this.resourceName)\n            return;\n        // TODO: retrycatch\n        this.created();\n    };\n    DragonbonesDisplay.prototype.onArmatureLoopComplete = function (event) {\n        _super.prototype.onArmatureLoopComplete.call(this, event);\n        if (!this.mArmatureDisplay || !this.mAnimation) {\n            return;\n        }\n        this.render.mainPeer.completeDragonBonesAnimationQueue(this.id);\n    };\n    DragonbonesDisplay.prototype.loadDragonBones = function (pngUrl, jsonUrl, dbbinUrl) {\n        this.mLoadQueue.add([{\n                type: _loadqueue__WEBPACK_IMPORTED_MODULE_3__["LoadType"].DRAGONBONES,\n                key: this.resourceName,\n                textureUrl: pngUrl,\n                jsonUrl: jsonUrl,\n                boneUrl: dbbinUrl\n            }]);\n    };\n    DragonbonesDisplay.prototype.generateReplaceTextureKey = function () {\n        return _super.prototype.generateReplaceTextureKey.call(this) + (this.uuid || 0);\n    };\n    DragonbonesDisplay.prototype.checkShowNickname = function () {\n        return (this.mTitleMask & structure__WEBPACK_IMPORTED_MODULE_2__["TitleMask"].TQ_NickName) > 0;\n    };\n    Object.defineProperty(DragonbonesDisplay.prototype, "nickname", {\n        get: function () {\n            return this.mName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DragonbonesDisplay;\n}(baseRender__WEBPACK_IMPORTED_MODULE_0__["BaseDragonbonesDisplay"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/dragonbones/dragonbones.display.ts?')},"./src/render/display/dragonbones/uidragonbones.display.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UIDragonbonesDisplay", function() { return UIDragonbonesDisplay; });\n/* harmony import */ var _dragonbones_display__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dragonbones.display */ "./src/render/display/dragonbones/dragonbones.display.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar UIDragonbonesDisplay = /** @class */ (function (_super) {\n    __extends(UIDragonbonesDisplay, _super);\n    function UIDragonbonesDisplay() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mInteractive = false;\n        _this.isBack = false;\n        return _this;\n    }\n    UIDragonbonesDisplay.prototype.play = function (val) {\n        val.name = this.getAnimationName(val.name) + (this.isBack ? "_back" : "");\n        _super.prototype.play.call(this, val);\n        if (this.mArmatureDisplay) {\n            if (this.mArmatureDisplay.hasDBEventListener(dragonBones.EventObject.LOOP_COMPLETE)) {\n                this.mArmatureDisplay.removeDBEventListener(dragonBones.EventObject.LOOP_COMPLETE, this.onArmatureLoopComplete, this);\n            }\n            if (val.times > 0) {\n                this.mArmatureDisplay.addDBEventListener(dragonBones.EventObject.LOOP_COMPLETE, this.onArmatureLoopComplete, this);\n            }\n        }\n    };\n    UIDragonbonesDisplay.prototype.setBack = function (back) {\n        this.isBack = back;\n    };\n    UIDragonbonesDisplay.prototype.setCompleteHandler = function (compl) {\n        this.mComplHandler = compl;\n    };\n    UIDragonbonesDisplay.prototype.setSuits = function (suits) {\n        if (suits) {\n            for (var _i = 0, suits_1 = suits; _i < suits_1.length; _i++) {\n                var suit = suits_1[_i];\n                if (suit.suit_type === "weapon") {\n                    if (suit.tag) {\n                        this.AniAction = JSON.parse(suit.tag).action;\n                        return;\n                    }\n                }\n            }\n        }\n        this.AniAction = undefined;\n    };\n    UIDragonbonesDisplay.prototype.getAnimationName = function (name) {\n        if (this.AniAction) {\n            if (name === "idle")\n                return this.AniAction[0];\n            else if (name === "walk")\n                return this.AniAction[1];\n        }\n        return name;\n    };\n    Object.defineProperty(UIDragonbonesDisplay.prototype, "back", {\n        get: function () {\n            return this.isBack;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    UIDragonbonesDisplay.prototype.onArmatureLoopComplete = function (event) {\n        if (!this.mArmatureDisplay || !this.mAnimation) {\n            return;\n        }\n        this.mArmatureDisplay.removeDBEventListener(dragonBones.EventObject.LOOP_COMPLETE, this.onArmatureLoopComplete, this);\n        var queue = this.mAnimation.playingQueue;\n        if (!queue || queue.name === undefined) {\n            if (this.mComplHandler)\n                this.mComplHandler.run();\n        }\n        else {\n            var runAni = {\n                name: queue.name,\n                times: queue.playTimes,\n                flip: this.mAnimation.flip\n            };\n            this.play(runAni);\n        }\n    };\n    return UIDragonbonesDisplay;\n}(_dragonbones_display__WEBPACK_IMPORTED_MODULE_0__["DragonbonesDisplay"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/dragonbones/uidragonbones.display.ts?')},"./src/render/display/element.top.display.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ElementTopDisplay", function() { return ElementTopDisplay; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _bubble_bubble_container__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bubble/bubble.container */ "./src/render/display/bubble/bubble.container.ts");\n/* harmony import */ var baseRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! baseRender */ "./src/base/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n/**\n * \n */\nvar ElementTopDisplay = /** @class */ (function (_super) {\n    __extends(ElementTopDisplay, _super);\n    function ElementTopDisplay(scene, owner, dpr) {\n        var _this = _super.call(this, scene, owner, dpr) || this;\n        _this.isDispose = false;\n        return _this;\n    }\n    ElementTopDisplay.prototype.showNickname = function (name) {\n        if (!this.mOwner) {\n            return;\n        }\n        var follow = this.mFollows.get(baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowEnum"].Nickname);\n        var nickname = null;\n        if (follow) {\n            nickname = follow.object;\n        }\n        else {\n            nickname = this.scene.make.text({\n                style: {\n                    fontSize: 12 * this.mDpr,\n                    fontFamily: utils__WEBPACK_IMPORTED_MODULE_0__["Font"].DEFULT_FONT\n                }\n            }).setOrigin(0.5).setStroke("#000000", 2 * this.mDpr);\n            follow = new baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowObject"](nickname, this.mOwner, this.mDpr);\n            this.mFollows.set(baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowEnum"].Nickname, follow);\n        }\n        nickname.text = name;\n        if (!this.mOwner.topPoint)\n            return;\n        this.addToSceneUI(nickname);\n        follow.setOffset(0, this.mOwner.topPoint.y);\n        follow.update();\n    };\n    ElementTopDisplay.prototype.hideNickname = function () {\n        this.removeFollowObject(baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowEnum"].Nickname);\n    };\n    ElementTopDisplay.prototype.showBubble = function (text, setting) {\n        var scene = this.scene;\n        if (!scene) {\n            return;\n        }\n        if (!this.mBubble) {\n            this.mBubble = new _bubble_bubble_container__WEBPACK_IMPORTED_MODULE_1__["BubbleContainer"](scene, this.mDpr);\n        }\n        this.mBubble.addBubble(text, setting);\n        this.mBubble.follow(this.mOwner);\n        this.addToSceneUI(this.mBubble);\n    };\n    ElementTopDisplay.prototype.clearBubble = function () {\n        if (!this.mBubble) {\n            return;\n        }\n        this.mBubble.destroy();\n        this.mBubble = null;\n    };\n    ElementTopDisplay.prototype.loadState = function (state) {\n        var _this = this;\n        var key = "state_" + state;\n        if (this.scene.cache.json.exists(key)) {\n            this.showStateHandler(this.scene.cache.json.get(key));\n        }\n        else {\n            var fn = function (_key) {\n                if (key === _key) {\n                    _this.showStateHandler(_this.scene.cache.json.get(key));\n                }\n            };\n            this.scene.load.once("filecomplete-json-" + key, fn, this);\n            this.scene.load.json(key, utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("config/base/state/" + state + ".json"));\n            this.scene.load.start();\n        }\n    };\n    ElementTopDisplay.prototype.showUIState = function (state) {\n        var _this = this;\n        if (state.type !== "text") {\n            var pngurl_1 = state.image.display.texturepath;\n            var jsonurl = state.image.display.datapath;\n            this.loadAtals(pngurl_1, jsonurl, this, function () {\n                var follow;\n                var sprite;\n                var frame = state.image.img;\n                if (state.type === "sprite") {\n                    var animation = state.image.animation;\n                    var frames_1 = animation.frame;\n                    _this.scene.anims.create({ key: animation.anikey, frames: _this.scene.anims.generateFrameNames(pngurl_1, { prefix: frame + "_", frames: frames_1 }), duration: animation.duration, repeat: animation.repeat });\n                    if (_this.mFollows.has(baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowEnum"].Sprite)) {\n                        follow = _this.mFollows.get(baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowEnum"].Sprite);\n                        sprite = follow.object;\n                    }\n                    else {\n                        sprite = _this.scene.make.sprite({ key: pngurl_1, frame: frame + "_1" });\n                        follow = new baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowObject"](sprite, _this.mOwner, _this.mDpr);\n                        _this.mFollows.set(baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowEnum"].Sprite, follow);\n                    }\n                    sprite.play(animation.anikey);\n                }\n                else {\n                    if (_this.mFollows.has(baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowEnum"].Sprite)) {\n                        follow = _this.mFollows.get(baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowEnum"].Sprite);\n                        sprite = follow.object;\n                        sprite.setTexture(pngurl_1, frame);\n                    }\n                    else {\n                        sprite = _this.scene.make.image({ key: pngurl_1, frame: frame });\n                        follow = new baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowObject"](sprite, _this.mOwner, _this.mDpr);\n                        _this.mFollows.set(baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowEnum"].Sprite, follow);\n                    }\n                }\n                var point = _this.getYOffset();\n                follow.setOffset(0, point.y);\n                _this.addToSceneUI(sprite);\n                follow.update();\n            });\n        }\n    };\n    ElementTopDisplay.prototype.getYOffset = function () {\n        var pos = new Phaser.Geom.Point();\n        pos.x = 0, pos.y = this.mOwner.topPoint.y;\n        // if (this.mFollows.has(FollowEnum.Nickname)) {\n        //     const follow = this.mFollows.get(FollowEnum.Nickname);\n        //     if (follow && follow.object) {\n        //         pos.y += (<any>(follow.object)).height * 0.5;\n        //     }\n        // }\n        return pos;\n    };\n    ElementTopDisplay.prototype.addDisplay = function () {\n        var _this = this;\n        if (this.mFollows) {\n            this.mFollows.forEach(function (follow) {\n                if (follow.object)\n                    _this.addToSceneUI(follow.object);\n            });\n        }\n    };\n    ElementTopDisplay.prototype.removeDisplay = function () {\n        if (this.mFollows) {\n            this.mFollows.forEach(function (follow) { return follow.remove(); });\n        }\n    };\n    ElementTopDisplay.prototype.hasTopPoint = function () {\n        // return this.mOwner && this.mOwner.hasOwnProperty("topPoint");\n        return this.mOwner && this.mOwner.topPoint;\n    };\n    ElementTopDisplay.prototype.hasNickName = function () {\n        if (this.mFollows.has(baseRender__WEBPACK_IMPORTED_MODULE_2__["FollowEnum"].Nickname))\n            return true;\n        return false;\n    };\n    ElementTopDisplay.prototype.destroy = function () {\n        if (this.mFollows) {\n            this.mFollows.forEach(function (follow) { return follow.destroy(); });\n            this.mFollows.clear();\n            this.mFollows = undefined;\n        }\n        if (this.mBubble) {\n            this.mBubble.destroy();\n            this.mBubble = undefined;\n        }\n    };\n    ElementTopDisplay.prototype.update = function () {\n        if (this.mFollows) {\n            this.mFollows.forEach(function (follow) { return follow.update(); });\n        }\n        if (this.mBubble) {\n            this.mBubble.follow(this.mOwner);\n        }\n    };\n    ElementTopDisplay.prototype.addToSceneUI = function (obj) {\n        if (!this.mOwner || !obj) {\n            return;\n        }\n        this.scene.layerManager.addToLayer("sceneUILayer", obj);\n    };\n    // private removeFollowObject(key: FollowEnum) {\n    //     if (!this.mFollows) return;\n    //     if (this.mFollows.has(key)) {\n    //         const follow = this.mFollows.get(key);\n    //         if (follow) {\n    //             follow.destroy();\n    //             this.mFollows.delete(key);\n    //         }\n    //     }\n    // }\n    ElementTopDisplay.prototype.loadAtals = function (pngurl, jsonurl, context, callback) {\n        var _this = this;\n        if (this.scene.textures.exists(pngurl)) {\n            if (!this.isDispose && callback)\n                callback.call(context);\n        }\n        else {\n            this.scene.load.atlas(pngurl, utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getUIRes(this.mDpr, pngurl), utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getUIRes(this.mDpr, jsonurl));\n            this.scene.load.once(Phaser.Loader.Events.COMPLETE, function () {\n                if (!_this.isDispose && callback)\n                    callback.call(context);\n            }, this);\n            this.scene.load.start();\n        }\n    };\n    ElementTopDisplay.prototype.showStateHandler = function (json) {\n        this.showUIState(json);\n    };\n    return ElementTopDisplay;\n}(baseRender__WEBPACK_IMPORTED_MODULE_2__["TopDisplay"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/element.top.display.ts?')},"./src/render/display/frames/frames.display.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FramesDisplay", function() { return FramesDisplay; });\n/* harmony import */ var baseRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! baseRender */ "./src/base/render/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _element_top_display__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../element.top.display */ "./src/render/display/element.top.display.ts");\n/* harmony import */ var _display_movement__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../display.movement */ "./src/render/display/display.movement.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n/**\n * \n */\nvar FramesDisplay = /** @class */ (function (_super) {\n    __extends(FramesDisplay, _super);\n    function FramesDisplay(scene, render, id, type) {\n        var _this = _super.call(this, scene, id, type) || this;\n        _this.render = render;\n        _this.mID = undefined;\n        _this.mName = undefined;\n        _this.mID = id;\n        _this.mMovement = new _display_movement__WEBPACK_IMPORTED_MODULE_4__["DisplayMovement"](scene, _this, render);\n        return _this;\n    }\n    FramesDisplay.prototype.startLoad = function () {\n        this.scene.load.start();\n        return Promise.resolve(null);\n    };\n    FramesDisplay.prototype.destroy = function () {\n        if (this.mReferenceArea) {\n            this.mReferenceArea.destroy();\n            this.mReferenceArea = undefined;\n        }\n        if (this.mChildMap) {\n            this.mChildMap.clear();\n            this.mChildMap = null;\n        }\n        if (this.mTopDisplay) {\n            this.mTopDisplay.destroy();\n        }\n        if (this.mMovement) {\n            this.mMovement.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    Object.defineProperty(FramesDisplay.prototype, "titleMask", {\n        get: function () {\n            return this.mTitleMask;\n        },\n        set: function (val) {\n            this.mTitleMask = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FramesDisplay.prototype.setRootMount = function (gameObject) {\n        _super.prototype.setRootMount.call(this, gameObject);\n        this.updateTopDisplay();\n    };\n    FramesDisplay.prototype.showRefernceArea = function (area, origin) {\n        return __awaiter(this, void 0, void 0, function () {\n            var roomSize;\n            return __generator(this, function (_a) {\n                if (!area || area.length <= 0 || !origin)\n                    return [2 /*return*/];\n                if (!this.mReferenceArea) {\n                    this.mReferenceArea = new baseRender__WEBPACK_IMPORTED_MODULE_0__["ReferenceArea"](this.scene);\n                    this.addChildMap("reference", this.mReferenceArea);\n                }\n                roomSize = this.render.mainPeer.getCurrentRoomSize();\n                this.mReferenceArea.draw(area, origin, roomSize.tileWidth, roomSize.tileHeight);\n                this.addAt(this.mReferenceArea, 0);\n                return [2 /*return*/];\n            });\n        });\n    };\n    FramesDisplay.prototype.hideRefernceArea = function () {\n        if (this.mReferenceArea) {\n            this.mReferenceArea.destroy();\n            this.mReferenceArea = undefined;\n        }\n    };\n    FramesDisplay.prototype.updateTopDisplay = function () {\n        if (this.mTopDisplay)\n            this.mTopDisplay.update();\n    };\n    FramesDisplay.prototype.showNickname = function (name) {\n        if (name === undefined) {\n            name = this.mName;\n        }\n        this.mName = name;\n        if (!this.mTopDisplay) {\n            this.mTopDisplay = new _element_top_display__WEBPACK_IMPORTED_MODULE_3__["ElementTopDisplay"](this.scene, this, this.render.scaleRatio);\n        }\n        if (!this.checkShowNickname())\n            return;\n        this.mTopDisplay.showNickname(name);\n    };\n    FramesDisplay.prototype.showTopDisplay = function (data) {\n        if (!data) {\n            if (this.mTopDisplay)\n                this.mTopDisplay.destroy();\n            this.mTopDisplay = undefined;\n            return;\n        }\n        if (!this.mTopDisplay)\n            this.mTopDisplay = new _element_top_display__WEBPACK_IMPORTED_MODULE_3__["ElementTopDisplay"](this.scene, this, this.render.scaleRatio);\n        this.mTopDisplay.loadState(data);\n    };\n    FramesDisplay.prototype.showBubble = function (text, setting) {\n        if (!this.mTopDisplay) {\n            this.mTopDisplay = new _element_top_display__WEBPACK_IMPORTED_MODULE_3__["ElementTopDisplay"](this.scene, this, this.render.scaleRatio);\n        }\n        this.mTopDisplay.showBubble(text, setting);\n    };\n    FramesDisplay.prototype.clearBubble = function () {\n        if (!this.mTopDisplay)\n            return;\n        this.mTopDisplay.clearBubble();\n    };\n    FramesDisplay.prototype.created = function () {\n        _super.prototype.created.call(this);\n        this.render.mainPeer.elementDisplayReady(this.id);\n    };\n    FramesDisplay.prototype.play = function (val) {\n        _super.prototype.play.call(this, val);\n        this.fetchProjection();\n    };\n    FramesDisplay.prototype.doMove = function (moveData) {\n        this.mMovement.doMove(moveData);\n    };\n    FramesDisplay.prototype.setPosition = function (x, y, z, w) {\n        _super.prototype.setPosition.call(this, x, y, z, w);\n        this.updateTopDisplay();\n        return this;\n    };\n    FramesDisplay.prototype.addEffect = function (display) {\n        if (!display) {\n            return utils__WEBPACK_IMPORTED_MODULE_2__["Logger"].getInstance().error("Failed to add effect, display does not exist");\n        }\n        var backend = display.getSprite(structure__WEBPACK_IMPORTED_MODULE_1__["DisplayField"].BACKEND);\n        if (backend) {\n            this.addAt(backend, structure__WEBPACK_IMPORTED_MODULE_1__["DisplayField"].BACKEND);\n        }\n        var frontend = display.getSprite(structure__WEBPACK_IMPORTED_MODULE_1__["DisplayField"].FRONTEND);\n        if (frontend) {\n            this.addAt(frontend, structure__WEBPACK_IMPORTED_MODULE_1__["DisplayField"].FRONTEND);\n        }\n    };\n    FramesDisplay.prototype.removeEffect = function () {\n        var data = this.mDisplayDatas.get(structure__WEBPACK_IMPORTED_MODULE_1__["DisplayField"].Effect);\n        if (data) {\n            this.mDisplayDatas.delete(structure__WEBPACK_IMPORTED_MODULE_1__["DisplayField"].Effect);\n            this.removeDisplay(structure__WEBPACK_IMPORTED_MODULE_1__["DisplayField"].BACKEND);\n            this.removeDisplay(structure__WEBPACK_IMPORTED_MODULE_1__["DisplayField"].FRONTEND);\n        }\n    };\n    // public mount(display: FramesDisplay | DragonbonesDisplay, targetIndex?: number) {\n    //     if (!display) return;\n    //     if (this.mDisplays.size <= 0) {\n    //         return;\n    //     }\n    //     if (!this.mCurAnimation) {\n    //         return;\n    //     }\n    //     if (!this.mCurAnimation.mountLayer) {\n    //         Logger.getInstance().error(`mountLyaer does not exist ${this.mAnimation}`);\n    //         return;\n    //     }\n    //     const {index, mountPoint} = this.mCurAnimation.mountLayer;\n    //     if (targetIndex === undefined) targetIndex = 0;\n    //     if (targetIndex >= mountPoint.length) {\n    //         Logger.getInstance().error("mount index does not exist");\n    //         return;\n    //     }\n    //     let {x} = mountPoint[targetIndex];\n    //     if (this.mAnimation.flip) {\n    //         x = 0 - x;\n    //     }\n    //     display.x = x;\n    //     display.y = mountPoint[targetIndex].y;\n    //     if (!this.mMountContainer) {\n    //         this.mMountContainer = this.scene.make.container(undefined, false);\n    //     }\n    //     if (!this.mMountContainer.parentContainer) {\n    //         const container = <Phaser.GameObjects.Container> this.mSprites.get(DisplayField.STAGE);\n    //         if (container) container.addAt(this.mMountContainer, index);\n    //     }\n    //     this.mMountContainer.addAt(display, targetIndex);\n    //     display.setRootMount(this);\n    //     this.mMountList[targetIndex] = display;\n    //     if (this.mMainSprite) {\n    //         // \n    //         this.mMainSprite.off("animationupdate", this.onAnimationUpdateHandler, this);\n    //         this.mMainSprite.on("animationupdate", this.onAnimationUpdateHandler, this);\n    //     }\n    // }\n    FramesDisplay.prototype.unmount = function (display) {\n        if (!this.mMountContainer) {\n            return;\n        }\n        _super.prototype.unmount.call(this, display);\n        this.render.displayManager.addToSurfaceLayer(display);\n        //     display.setRootMount(undefined);\n        //     const index = this.mMountList.indexOf(display);\n        //     display.visible = true;\n        //     if (index > -1) {\n        //         this.mMountList.splice(index, 1);\n        //     }\n        //     const list = this.mMountContainer.list;\n        //     if (list.length <= 0 && this.mDisplays.size > 0) {\n        //         this.mDisplays[0].off("animationupdate", this.onAnimationUpdateHandler, this);\n        //     }\n    };\n    FramesDisplay.prototype.scaleTween = function () {\n        var _this = this;\n        if (this.mMountContainer && this.mMountContainer.list.length > 0) {\n            return;\n        }\n        if (this.mScaleTween) {\n            return;\n        }\n        var tmp = this.scale;\n        this.mScaleTween = this.scene.tweens.add({\n            targets: this,\n            duration: 100,\n            scale: tmp * 1.25,\n            yoyo: true,\n            repeat: 0,\n            onComplete: function () {\n                _this.scale = 1;\n                if (_this.mScaleTween) {\n                    // this.mScaleTween.destroy();\n                    _this.mScaleTween = undefined;\n                }\n            },\n        });\n    };\n    FramesDisplay.prototype.addChildMap = function (key, display) {\n        if (!this.mChildMap) {\n            this.mChildMap = new Map();\n        }\n        this.mChildMap.set(key, display);\n    };\n    FramesDisplay.prototype.fetchProjection = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.id)\n                            return [2 /*return*/];\n                        _a = this;\n                        return [4 /*yield*/, this.render.mainPeer.fetchProjectionSize(this.id)];\n                    case 1:\n                        _a.mProjectionSize = _b.sent();\n                        this.updateSort();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    FramesDisplay.prototype.completeFrameAnimationQueue = function () {\n        _super.prototype.completeFrameAnimationQueue.call(this);\n        this.render.mainPeer.completeFrameAnimationQueue(this.id);\n    };\n    FramesDisplay.prototype.checkShowNickname = function () {\n        return (this.mTitleMask & structure__WEBPACK_IMPORTED_MODULE_1__["TitleMask"].TQ_NickName) > 0;\n    };\n    FramesDisplay.prototype.clearDisplay = function () {\n        _super.prototype.clearDisplay.call(this);\n        if (this.mMountContainer && this.mMountContainer.parentContainer) {\n            this.mMountContainer.parentContainer.remove(this.mMountContainer);\n        }\n    };\n    FramesDisplay.prototype.onAnimationUpdateHandler = function (ani, frame) {\n        if (!this.mMountContainer || !this.mCurAnimation)\n            return;\n        var frameVisible = this.mCurAnimation.mountLayer.frameVisible;\n        if (!frameVisible) {\n            return;\n        }\n        var index = frame.index - 1;\n        if (index > frameVisible.length) {\n            return;\n        }\n        for (var i = 0; i < this.mMountList.length; i++) {\n            this.mMountList[i].visible = this.getMaskValue(frameVisible[index], i);\n        }\n    };\n    FramesDisplay.prototype.getMaskValue = function (mask, idx) {\n        return ((mask >> idx) % 2) === 1;\n    };\n    Object.defineProperty(FramesDisplay.prototype, "nickname", {\n        get: function () {\n            return this.mName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return FramesDisplay;\n}(baseRender__WEBPACK_IMPORTED_MODULE_0__["BaseFramesDisplay"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/frames/frames.display.ts?')},"./src/render/display/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _element_top_display__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element.top.display */ "./src/render/display/element.top.display.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ElementTopDisplay", function() { return _element_top_display__WEBPACK_IMPORTED_MODULE_0__["ElementTopDisplay"]; });\n\n/* harmony import */ var _dragonbones_dragonbones_display__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dragonbones/dragonbones.display */ "./src/render/display/dragonbones/dragonbones.display.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DragonbonesDisplay", function() { return _dragonbones_dragonbones_display__WEBPACK_IMPORTED_MODULE_1__["DragonbonesDisplay"]; });\n\n/* harmony import */ var _frames_frames_display__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./frames/frames.display */ "./src/render/display/frames/frames.display.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FramesDisplay", function() { return _frames_frames_display__WEBPACK_IMPORTED_MODULE_2__["FramesDisplay"]; });\n\n/* harmony import */ var _animation_bubble_animation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./animation/bubble.animation */ "./src/render/display/animation/bubble.animation.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BubbleAnimation", function() { return _animation_bubble_animation__WEBPACK_IMPORTED_MODULE_3__["BubbleAnimation"]; });\n\n/* harmony import */ var _animation_dragonbones_animation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./animation/dragonbones.animation */ "./src/render/display/animation/dragonbones.animation.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DragonbonesAnimation", function() { return _animation_dragonbones_animation__WEBPACK_IMPORTED_MODULE_4__["DragonbonesAnimation"]; });\n\n/* harmony import */ var _animation_frame_animation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./animation/frame.animation */ "./src/render/display/animation/frame.animation.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FrameAnimation", function() { return _animation_frame_animation__WEBPACK_IMPORTED_MODULE_5__["FrameAnimation"]; });\n\n/* harmony import */ var _animation_ianimationbase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./animation/ianimationbase */ "./src/render/display/animation/ianimationbase.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AnimationUrlData", function() { return _animation_ianimationbase__WEBPACK_IMPORTED_MODULE_6__["AnimationUrlData"]; });\n\n/* harmony import */ var _animation_animation_model__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./animation/animation.model */ "./src/render/display/animation/animation.model.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AnimationModel", function() { return _animation_animation_model__WEBPACK_IMPORTED_MODULE_7__["AnimationModel"]; });\n\n/* harmony import */ var _bubble_bubble__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./bubble/bubble */ "./src/render/display/bubble/bubble.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Bubble", function() { return _bubble_bubble__WEBPACK_IMPORTED_MODULE_8__["Bubble"]; });\n\n/* harmony import */ var _bubble_bubble_container__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./bubble/bubble.container */ "./src/render/display/bubble/bubble.container.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BubbleContainer", function() { return _bubble_bubble_container__WEBPACK_IMPORTED_MODULE_9__["BubbleContainer"]; });\n\n/* harmony import */ var _dragonbones_uidragonbones_display__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./dragonbones/uidragonbones.display */ "./src/render/display/dragonbones/uidragonbones.display.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UIDragonbonesDisplay", function() { return _dragonbones_uidragonbones_display__WEBPACK_IMPORTED_MODULE_10__["UIDragonbonesDisplay"]; });\n\n/* harmony import */ var _display_object__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./display.object */ "./src/render/display/display.object.ts");\n/* harmony import */ var _display_object__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_display_object__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _display_object__WEBPACK_IMPORTED_MODULE_11__) if(["default","ElementTopDisplay","DragonbonesDisplay","FramesDisplay","BubbleAnimation","DragonbonesAnimation","FrameAnimation","AnimationUrlData","AnimationModel","Bubble","BubbleContainer","UIDragonbonesDisplay"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _display_object__WEBPACK_IMPORTED_MODULE_11__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _debugs_grids__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./debugs/grids */ "./src/render/display/debugs/grids.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Grids", function() { return _debugs_grids__WEBPACK_IMPORTED_MODULE_12__["Grids"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GridsDebugger", function() { return _debugs_grids__WEBPACK_IMPORTED_MODULE_12__["GridsDebugger"]; });\n\n/* harmony import */ var _debugs_astar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./debugs/astar */ "./src/render/display/debugs/astar.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Astar", function() { return _debugs_astar__WEBPACK_IMPORTED_MODULE_13__["Astar"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AstarDebugger", function() { return _debugs_astar__WEBPACK_IMPORTED_MODULE_13__["AstarDebugger"]; });\n\n/* harmony import */ var _debugs_sort_debugger__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./debugs/sort.debugger */ "./src/render/display/debugs/sort.debugger.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SortDebugger", function() { return _debugs_sort_debugger__WEBPACK_IMPORTED_MODULE_14__["SortDebugger"]; });\n\n/* harmony import */ var _debugs_editor_mode_debugger__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./debugs/editor.mode.debugger */ "./src/render/display/debugs/editor.mode.debugger.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EditorModeDebugger", function() { return _debugs_editor_mode_debugger__WEBPACK_IMPORTED_MODULE_15__["EditorModeDebugger"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/display/index.ts?')},"./src/render/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _account__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./account */ "./src/render/account/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Account", function() { return _account__WEBPACK_IMPORTED_MODULE_0__["Account"]; });\n\n/* harmony import */ var _cameras__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cameras */ "./src/render/cameras/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CamerasManager", function() { return _cameras__WEBPACK_IMPORTED_MODULE_1__["CamerasManager"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EditorCamerasManager", function() { return _cameras__WEBPACK_IMPORTED_MODULE_1__["EditorCamerasManager"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlayCamera", function() { return _cameras__WEBPACK_IMPORTED_MODULE_1__["PlayCamera"]; });\n\n/* harmony import */ var _display__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./display */ "./src/render/display/index.ts");\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _display__WEBPACK_IMPORTED_MODULE_2__) if(["default","Account","CamerasManager","EditorCamerasManager","PlayCamera"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _display__WEBPACK_IMPORTED_MODULE_2__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./input */ "./src/render/input/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InputManager", function() { return _input__WEBPACK_IMPORTED_MODULE_3__["InputManager"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "JoystickManager", function() { return _input__WEBPACK_IMPORTED_MODULE_3__["JoystickManager"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MouseEvent", function() { return _input__WEBPACK_IMPORTED_MODULE_3__["MouseEvent"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MouseManager", function() { return _input__WEBPACK_IMPORTED_MODULE_3__["MouseManager"]; });\n\n/* harmony import */ var _managers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./managers */ "./src/render/managers/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NodeType", function() { return _managers__WEBPACK_IMPORTED_MODULE_4__["NodeType"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DisplayManager", function() { return _managers__WEBPACK_IMPORTED_MODULE_4__["DisplayManager"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LocalStorageManager", function() { return _managers__WEBPACK_IMPORTED_MODULE_4__["LocalStorageManager"]; });\n\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./render */ "./src/render/render.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Render", function() { return _render__WEBPACK_IMPORTED_MODULE_5__["Render"]; });\n\n/* harmony import */ var _scenes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scenes */ "./src/render/scenes/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BasicScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["BasicScene"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CreateRoleScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["CreateRoleScene"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GamePauseScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["GamePauseScene"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoadingScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["LoadingScene"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoginAccountScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["LoginAccountScene"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoginScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["LoginScene"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MainUIScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["MainUIScene"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlayScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["PlayScene"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RoomScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["RoomScene"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SceneManager", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["SceneManager"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelectRoleScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["SelectRoleScene"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SkyBoxScene", function() { return _scenes__WEBPACK_IMPORTED_MODULE_6__["SkyBoxScene"]; });\n\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ui */ "./src/render/ui/index.ts");\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _ui__WEBPACK_IMPORTED_MODULE_7__) if(["default","Account","CamerasManager","EditorCamerasManager","PlayCamera","InputManager","JoystickManager","MouseEvent","MouseManager","NodeType","DisplayManager","LocalStorageManager","Render","BasicScene","CreateRoleScene","GamePauseScene","LoadingScene","LoginAccountScene","LoginScene","MainUIScene","PlayScene","RoomScene","SceneManager","SelectRoleScene","SkyBoxScene"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _ui__WEBPACK_IMPORTED_MODULE_7__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _loadqueue__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./loadqueue */ "./src/render/loadqueue/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoadQueue", function() { return _loadqueue__WEBPACK_IMPORTED_MODULE_8__["LoadQueue"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoadType", function() { return _loadqueue__WEBPACK_IMPORTED_MODULE_8__["LoadType"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoadingTips", function() { return _loadqueue__WEBPACK_IMPORTED_MODULE_8__["LoadingTips"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/index.ts?')},"./src/render/input/decorate.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DecorateManager", function() { return DecorateManager; });\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar DecorateManager = /** @class */ (function (_super) {\n    __extends(DecorateManager, _super);\n    function DecorateManager(scene, render) {\n        var _this = _super.call(this) || this;\n        _this.render = render;\n        _this.mSelecting = false;\n        _this.mDisplayManager = _this.render.displayManager;\n        _this.mDpr = _this.render.scaleRatio;\n        return _this;\n    }\n    DecorateManager.prototype.setElement = function (id) {\n        this.mSelectorElement = this.mDisplayManager.getDisplay(id);\n        var mediator = this.mediator;\n        mediator.setElement(id, true);\n        this.mSelecting = true;\n    };\n    DecorateManager.prototype.moveElement = function (pointer) {\n        if (!this.mSelectorElement || !pointer) {\n            return;\n        }\n        var mediator = this.mediator;\n        var x = pointer.worldX / this.mDpr;\n        var y = pointer.worldY / this.mDpr;\n        mediator.moveElement(x, y);\n        // const panel = this.render.uiManager.getPanel(ModuleName.PICADECORATE_NAME);\n        // this.mSelectorElement.x = pointer.worldX / this.mDpr;\n        // this.mSelectorElement.y = pointer.worldY / this.mDpr;\n        // if (panel) {\n        //     (<any>panel).setElement(this.mSelectorElement.id);\n        // }\n    };\n    DecorateManager.prototype.isDragging = function () {\n        return this.mSelectorElement && this.mSelecting;\n    };\n    Object.defineProperty(DecorateManager.prototype, "mediator", {\n        get: function () {\n            return this.render.mainPeer[structure__WEBPACK_IMPORTED_MODULE_0__["ModuleName"].PICADECORATE_NAME];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DecorateManager.prototype, "selecting", {\n        get: function () {\n            return this.mSelecting;\n        },\n        set: function (val) {\n            this.mSelecting = val;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DecorateManager;\n}(Phaser.Events.EventEmitter));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/input/decorate.manager.ts?')},"./src/render/input/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _input_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./input.manager */ "./src/render/input/input.manager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InputManager", function() { return _input_manager__WEBPACK_IMPORTED_MODULE_0__["InputManager"]; });\n\n/* harmony import */ var _joystick_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./joystick.manager */ "./src/render/input/joystick.manager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "JoystickManager", function() { return _joystick_manager__WEBPACK_IMPORTED_MODULE_1__["JoystickManager"]; });\n\n/* harmony import */ var _mouse_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mouse.manager */ "./src/render/input/mouse.manager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MouseEvent", function() { return _mouse_manager__WEBPACK_IMPORTED_MODULE_2__["MouseEvent"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MouseManager", function() { return _mouse_manager__WEBPACK_IMPORTED_MODULE_2__["MouseManager"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/input/index.ts?')},"./src/render/input/input.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InputManager", function() { return InputManager; });\n/* harmony import */ var _joystick_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./joystick.manager */ "./src/render/input/joystick.manager.ts");\n/* harmony import */ var _mouse_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mouse.manager */ "./src/render/input/mouse.manager.ts");\n\n\nvar InputManager = /** @class */ (function () {\n    function InputManager(render) {\n        this.render = render;\n        this.mMouseManager = new _mouse_manager__WEBPACK_IMPORTED_MODULE_1__["MouseManager"](render);\n    }\n    InputManager.prototype.showJoystick = function () {\n        this.mJoystickManager = new _joystick_manager__WEBPACK_IMPORTED_MODULE_0__["JoystickManager"](this.render);\n        this.mJoystickManager.setScene(this.mScene);\n    };\n    InputManager.prototype.setScene = function (scene) {\n        this.mScene = scene;\n        this.mMouseManager.changeScene(scene);\n        if (this.mJoystickManager)\n            this.mJoystickManager.setScene(scene);\n    };\n    InputManager.prototype.resize = function (width, height) {\n        this.mMouseManager.resize(width, height);\n    };\n    InputManager.prototype.update = function (time, delta) {\n    };\n    InputManager.prototype.destroy = function () {\n        if (this.mMouseManager)\n            this.mMouseManager.destroy();\n        if (this.mJoystickManager)\n            this.mJoystickManager.destroy();\n    };\n    return InputManager;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/input/input.manager.ts?')},"./src/render/input/joystick.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JoystickManager", function() { return JoystickManager; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ "./node_modules/net-socket-packet/dist/index.js");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar JoystickManager = /** @class */ (function (_super) {\n    __extends(JoystickManager, _super);\n    function JoystickManager(render) {\n        var _this = _super.call(this) || this;\n        _this.render = render;\n        _this.mScaleRatio = render.scaleRatio;\n        _this.mJoystick = _this.render.mainPeer["JoystickManager"];\n        return _this;\n    }\n    JoystickManager.prototype.setScene = function (scene) {\n        this.scene = scene;\n        if (!scene) {\n            return;\n        }\n        this.onListener();\n    };\n    JoystickManager.prototype.onListener = function () {\n        this.scene.input.on("pointerdown", this.onDownHandler, this);\n        this.scene.input.on("pointerup", this.onUpHandler, this);\n    };\n    JoystickManager.prototype.offListener = function () {\n        // this.parentCon.visible = false;\n        this.scene.input.off("pointermove", this.onPointerMoveHandler, this);\n        this.scene.input.off("pointerdown", this.onDownHandler, this);\n        this.scene.input.off("pointerup", this.onUpHandler, this);\n    };\n    JoystickManager.prototype.destroy = function () {\n        this.offListener();\n    };\n    JoystickManager.prototype.onPointerMoveHandler = function (pointer) {\n        this.calcAngle(pointer);\n    };\n    JoystickManager.prototype.onDownHandler = function (pointer) {\n        this.scene.input.on("pointermove", this.onPointerMoveHandler, this);\n        this.calcAngle(pointer);\n        this.start();\n    };\n    JoystickManager.prototype.onUpHandler = function (pointer) {\n        this.scene.input.off("pointermove", this.onPointerMoveHandler, this);\n        if ((pointer.downX - pointer.upX) > 10 * this.mScaleRatio || Math.abs(pointer.downY - pointer.upY) > 10 * this.mScaleRatio) {\n            this.stop();\n        }\n    };\n    JoystickManager.prototype.calcAngle = function (pointer) {\n        if (!this.mJoystick) {\n            return;\n        }\n        this.mJoystick.calcAngle(Math.ceil(pointer.worldX / this.mScaleRatio), Math.ceil(pointer.worldY / this.mScaleRatio));\n    };\n    JoystickManager.prototype.start = function () {\n        if (!this.mJoystick) {\n            return;\n        }\n        this.mJoystick.start();\n    };\n    JoystickManager.prototype.stop = function () {\n        if (!this.mJoystick) {\n            return;\n        }\n        this.mJoystick.stop();\n    };\n    return JoystickManager;\n}(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__["PacketHandler"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/input/joystick.manager.ts?')},"./src/render/input/motion.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MotionManager", function() { return MotionManager; });\n/* harmony import */ var _managers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../managers */ "./src/render/managers/index.ts");\n/* harmony import */ var _scenes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scenes */ "./src/render/scenes/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\nvar MotionManager = /** @class */ (function () {\n    // private curDirection: number = 0;\n    function MotionManager(render) {\n        this.render = render;\n        this.dirty = false;\n        this.holdDelay = 200;\n        this.scaleRatio = render.scaleRatio;\n    }\n    MotionManager.prototype.addListener = function () {\n        if (!this.scene) {\n            return;\n        }\n        this.scene.input.on("pointerup", this.onPointerUpHandler, this);\n        this.scene.input.on("pointerdown", this.onPointerDownHandler, this);\n        this.scene.input.on("gameobjectdown", this.onGameObjectDownHandler, this);\n        this.scene.input.on("gameobjectup", this.onGameObjectUpHandler, this);\n    };\n    MotionManager.prototype.removeListener = function () {\n        if (!this.scene) {\n            return;\n        }\n        this.scene.input.off("pointerup", this.onPointerUpHandler, this);\n        this.scene.input.off("pointerdown", this.onPointerDownHandler, this);\n        this.scene.input.off("pointermove", this.onPointerMoveHandler, this);\n        this.scene.input.off("gameobjectdown", this.onGameObjectDownHandler, this);\n        this.scene.input.off("gameobjectup", this.onGameObjectUpHandler, this);\n    };\n    MotionManager.prototype.resize = function (width, height) {\n        this.scaleRatio = this.render.scaleRatio;\n    };\n    MotionManager.prototype.update = function (time, delta) {\n        if (this.dirty === false)\n            return;\n        this.curtime += delta;\n        if (this.curtime < 200) {\n            return;\n        }\n        this.curtime = 0;\n        var pointer = this.scene.input.activePointer;\n        if (pointer.camera) {\n            if (pointer.camera.scene && pointer.camera.scene.sys.settings.key === _scenes__WEBPACK_IMPORTED_MODULE_1__["MainUIScene"].name) {\n                this.dirty = false;\n                this.scene.input.off("pointermove", this.onPointerMoveHandler, this);\n                this.clearGameObject();\n                return;\n            }\n        }\n        if (!pointer || !this.render.displayManager.user || !this.render.displayManager)\n            return;\n        var _a = this.render.displayManager.user, x = _a.x, y = _a.y;\n        var tmpX = pointer.worldX / this.scaleRatio - x;\n        var tmpY = pointer.worldY / this.scaleRatio - y;\n        var position = this.scene.cameras.main.getWorldPoint(pointer.x - tmpX, pointer.y - tmpY);\n        this.start(position.x / this.scaleRatio, position.y / this.scaleRatio);\n    };\n    MotionManager.prototype.setScene = function (scene) {\n        this.removeListener();\n        this.scene = scene;\n        if (!this.scene) {\n            return;\n        }\n        this.addListener();\n    };\n    MotionManager.prototype.destroy = function () {\n        this.removeListener();\n    };\n    MotionManager.prototype.start = function (worldX, worldY, id) {\n        // const user = this.render.user;\n        // if (!user) {\n        //     return;\n        // }\n        // this.render.user.moveMotion(worldX, worldY, id);\n        // this.render.mainPeer.moveMotion(worldX, worldY, id);\n        this.render.physicalPeer.moveMotion(worldX, worldY, id);\n    };\n    MotionManager.prototype.movePath = function (x, y, z, targets, id) {\n        // const user = this.render.user;\n        // if (!user) {\n        //     return;\'\n        // }\n        // this.render.user.findPath(worldX, worldY, id);\n        // const startPos = this.render.displayManager.user.getPosition();\n        this.render.physicalPeer.findPath(targets, id);\n    };\n    MotionManager.prototype.stop = function () {\n        this.render.physicalPeer.stopMove();\n        // this.render.user.stopMove();\n    };\n    MotionManager.prototype.onPointerUpHandler = function (pointer) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, ele, targets, x, y;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.dirty = false;\n                        this.scene.input.off("pointermove", this.onPointerMoveHandler, this);\n                        if (!(Math.abs(pointer.downX - pointer.upX) >= 5 * this.render.scaleRatio && Math.abs(pointer.downY - pointer.upY) >= 5 * this.render.scaleRatio || pointer.upTime - pointer.downTime > this.holdDelay)) return [3 /*break*/, 1];\n                        this.stop();\n                        return [3 /*break*/, 5];\n                    case 1:\n                        if (!this.gameObject) return [3 /*break*/, 4];\n                        id = this.gameObject.getData("id");\n                        if (!id) return [3 /*break*/, 3];\n                        ele = this.render.displayManager.getDisplay(id);\n                        if (ele.nodeType === _managers__WEBPACK_IMPORTED_MODULE_0__["NodeType"].CharacterNodeType) {\n                            // TODO\n                            this.render.mainPeer.activePlayer(id);\n                            this.clearGameObject();\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.render.physicalPeer.getInteractivePosition(id)];\n                    case 2:\n                        targets = _a.sent();\n                        if (!targets || targets.length === 0) {\n                            x = ele.x, y = ele.y;\n                            targets = [{ x: x, y: y }];\n                        }\n                        this.movePath(pointer.worldX / this.render.scaleRatio, pointer.worldY / this.render.scaleRatio, 0, targets, id);\n                        _a.label = 3;\n                    case 3: return [3 /*break*/, 5];\n                    case 4:\n                        this.movePath(pointer.worldX / this.render.scaleRatio, pointer.worldY / this.render.scaleRatio, 0, [new utils__WEBPACK_IMPORTED_MODULE_2__["LogicPos"](pointer.worldX / this.scaleRatio, pointer.worldY / this.scaleRatio)]);\n                        _a.label = 5;\n                    case 5:\n                        this.clearGameObject();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MotionManager.prototype.onPointerDownHandler = function (pointer) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                this.scene.input.on("pointermove", this.onPointerMoveHandler, this);\n                this.holdTime = setTimeout(function () {\n                    _this.dirty = true;\n                }, this.holdDelay);\n                return [2 /*return*/];\n            });\n        });\n    };\n    MotionManager.prototype.onPointerMoveHandler = function (pointer) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.dirty = true;\n                return [2 /*return*/];\n            });\n        });\n    };\n    MotionManager.prototype.onPointeroutHandler = function () {\n        this.dirty = false;\n        this.scene.input.off("pointermove", this.onPointerMoveHandler, this);\n        this.stop();\n        clearTimeout(this.holdTime);\n    };\n    MotionManager.prototype.onGameObjectDownHandler = function (pointer, gameObject) {\n        this.gameObject = gameObject;\n    };\n    MotionManager.prototype.onGameObjectUpHandler = function (pointer, gameObject) {\n    };\n    MotionManager.prototype.clearGameObject = function () {\n        this.gameObject = null;\n        clearTimeout(this.holdTime);\n    };\n    return MotionManager;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/input/motion.manager.ts?')},"./src/render/input/mouse.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MouseEvent", function() { return MouseEvent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MouseManager", function() { return MouseManager; });\n/* harmony import */ var _display_frames_frames_display__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../display/frames/frames.display */ "./src/render/display/frames/frames.display.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _managers_display_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../managers/display.manager */ "./src/render/managers/display.manager.ts");\n\n\n\nvar MouseEvent;\n(function (MouseEvent) {\n    MouseEvent[MouseEvent["RightMouseDown"] = 1] = "RightMouseDown";\n    MouseEvent[MouseEvent["RightMouseUp"] = 2] = "RightMouseUp";\n    MouseEvent[MouseEvent["LeftMouseDown"] = 3] = "LeftMouseDown";\n    MouseEvent[MouseEvent["LeftMouseUp"] = 4] = "LeftMouseUp";\n    MouseEvent[MouseEvent["WheelDown"] = 5] = "WheelDown";\n    MouseEvent[MouseEvent["WheelUp"] = 6] = "WheelUp";\n    MouseEvent[MouseEvent["RightMouseHolding"] = 7] = "RightMouseHolding";\n    MouseEvent[MouseEvent["LeftMouseHolding"] = 8] = "LeftMouseHolding";\n    MouseEvent[MouseEvent["Tap"] = 9] = "Tap";\n})(MouseEvent || (MouseEvent = {}));\nvar MouseManager = /** @class */ (function () {\n    function MouseManager(render) {\n        this.render = render;\n        this.running = false;\n        this.mDownDelay = 1000;\n        this.delay = 500;\n        this.zoom = this.render.scaleRatio || 1;\n    }\n    Object.defineProperty(MouseManager.prototype, "clickID", {\n        get: function () {\n            return this.mClickID;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MouseManager.prototype.changeScene = function (scene) {\n        this.pause();\n        this.mGameObject = null;\n        this.mScene = scene;\n        if (!this.mScene)\n            return;\n        // scene.input.on("gameobjectup", this.groundUp, this);\n        scene.input.on("gameobjectdown", this.groundDown, this);\n        scene.input.on("pointerdown", this.pointerDownHandler, this);\n        this.resume();\n    };\n    MouseManager.prototype.resize = function (width, height) {\n        this.zoom = this.render.scaleRatio || 1;\n    };\n    MouseManager.prototype.pause = function () {\n        this.running = false;\n    };\n    MouseManager.prototype.resume = function () {\n        this.running = true;\n    };\n    MouseManager.prototype.onUpdate = function (pointer, gameobject) {\n        if (this.running === false || pointer === undefined) {\n            return;\n        }\n        var events = [];\n        if (pointer.leftButtonDown()) {\n            events.push(MouseEvent.LeftMouseDown);\n        }\n        else if (pointer.leftButtonReleased()) {\n            events.push(MouseEvent.LeftMouseUp);\n        }\n        if (pointer.middleButtonDown()) {\n            events.push(MouseEvent.WheelDown);\n        }\n        else if (pointer.middleButtonReleased()) {\n            events.push(MouseEvent.WheelUp);\n        }\n        if (pointer.rightButtonDown()) {\n            events.push(MouseEvent.RightMouseDown);\n        }\n        else if (pointer.rightButtonReleased()) {\n            events.push(MouseEvent.RightMouseUp);\n        }\n        var id = 0;\n        var com = null;\n        if (gameobject && gameobject.parentContainer) {\n            id = gameobject.parentContainer.getData("id");\n            // TODO \n            com = gameobject.parentContainer.parentContainer || gameobject.parentContainer;\n        }\n        if (pointer.isDown === false) {\n            var diffX = Math.abs(pointer.downX - pointer.upX);\n            var diffY = Math.abs(pointer.downY - pointer.upY);\n            if (diffX < 10 && diffY < 10) {\n                // events.push(MouseEvent.Tap);\n                // this.render.emitter.emit(ClickEvent.Tap, pointer, gameobject);\n                if (gameobject && gameobject.parentContainer) {\n                    // const displsy = gameobject.parentContainer.parentContainer || gameobject.parentContainer;\n                    // let nodeType = -1;\n                    // if (displsy && displsy instanceof IDisplayObject) {\n                    //     nodeType = displsy.nodeType;\n                    // }\n                    if (com && com instanceof _display_frames_frames_display__WEBPACK_IMPORTED_MODULE_0__["FramesDisplay"]) {\n                        if (com.nodeType === _managers_display_manager__WEBPACK_IMPORTED_MODULE_2__["NodeType"].ElementNodeType) {\n                            com.scaleTween();\n                        }\n                    }\n                    // this.render.mainPeer.onTapHandler({ id, x: pointer.worldX / this.render.scaleRatio, y: pointer.worldY / this.render.scaleRatio, nodeType });\n                }\n                else {\n                    // this.render.mainPeer.onTapHandler({ x: pointer.worldX / this.render.scaleRatio, y: pointer.worldY / this.render.scaleRatio });\n                }\n            }\n        }\n        if (events.length === 0) {\n            return;\n        }\n        this.sendMouseEvent(events, id, { x: pointer.worldX / this.zoom, y: pointer.worldY / this.zoom });\n    };\n    Object.defineProperty(MouseManager.prototype, "enable", {\n        get: function () {\n            if (this.mScene) {\n                return this.mScene.input.mouse.enabled;\n            }\n            return false;\n        },\n        /**\n         * \n         */\n        set: function (value) {\n            if (this.mScene) {\n                this.mScene.input.mouse.enabled = value;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MouseManager.prototype.destroy = function () {\n        this.mScene = null;\n        this.running = false;\n        this.debounce = null;\n        if (this.mScene) {\n            this.mScene.input.off("gameobjectdown", this.groundDown, this);\n            this.mScene.input.off("pointerdown", this.pointerDownHandler, this);\n        }\n        this.pause();\n    };\n    MouseManager.prototype.groundDown = function (pointer, gameObject) {\n        this.mGameObject = gameObject;\n        this.mDownTime = setTimeout(this.holdHandler.bind(this), this.mDownDelay, pointer, gameObject);\n    };\n    MouseManager.prototype.groundUp = function (pointer, gameObject) {\n        // this.mGameObject = null;\n        this.onUpdate(pointer, gameObject);\n    };\n    MouseManager.prototype.pointerDownHandler = function (pointer, gameobject) {\n        var _this = this;\n        if (this.debounce) {\n            this.mGameObject = null;\n            return;\n        }\n        this.debounce = setTimeout(function () {\n            _this.debounce = null;\n        }, this.delay);\n        this.mScene.input.off("pointerup", this.onPointerUpHandler, this);\n        this.mScene.input.once("pointerup", this.onPointerUpHandler, this);\n        if (this.render) {\n            if (this.render.emitter) {\n                this.render.emitter.emit(structure__WEBPACK_IMPORTED_MODULE_1__["MessageType"].SCENE_BACKGROUND_CLICK, pointer);\n            }\n        }\n        this.onUpdate(pointer, this.mGameObject);\n    };\n    MouseManager.prototype.onPointerUpHandler = function (pointer) {\n        clearTimeout(this.mDownTime);\n        this.onUpdate(pointer, this.mGameObject);\n        this.mGameObject = null;\n    };\n    MouseManager.prototype.holdHandler = function (pointer, gameobject) {\n        // this.worldService.emitter.emit(MessageType.PRESS_ELEMENT, pointer, gameobject);\n        clearTimeout(this.mDownTime);\n        if (Math.abs(pointer.downX - pointer.x) > 5 * this.zoom || Math.abs(pointer.downY - pointer.y) > 5 * this.zoom) {\n            return;\n        }\n        var id = 0;\n        var com = null;\n        if (gameobject && gameobject.parentContainer) {\n            id = gameobject.parentContainer.getData("id");\n            // TODO \n            com = gameobject.parentContainer.parentContainer || gameobject.parentContainer;\n            this.sendMouseEvent([MouseEvent.LeftMouseHolding], id, { x: pointer.worldX / this.zoom, y: pointer.worldY / this.zoom });\n        }\n    };\n    MouseManager.prototype.sendMouseEvent = function (mouseEvent, id, point3f) {\n        this.mClickID = id;\n        this.render.mainPeer.sendMouseEvent(id, mouseEvent, point3f);\n        // const pkt: PBpacket = new PBpacket(op_virtual_world.OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_MOUSE_EVENT);\n        // const content: op_virtual_world.IOP_CLIENT_REQ_VIRTUAL_WORLD_MOUSE_EVENT = pkt.content;\n        // content.id = id;\n        // content.mouseEvent = mouseEvent;\n        // content.point3f = point3f;\n        // this.mConnect.send(pkt);\n    };\n    return MouseManager;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/input/mouse.manager.ts?')},"./src/render/loadqueue/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _load_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./load.queue */ "./src/render/loadqueue/load.queue.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoadQueue", function() { return _load_queue__WEBPACK_IMPORTED_MODULE_0__["LoadQueue"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoadType", function() { return _load_queue__WEBPACK_IMPORTED_MODULE_0__["LoadType"]; });\n\n/* harmony import */ var _loading_tips__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loading.tips */ "./src/render/loadqueue/loading.tips.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoadingTips", function() { return _loading_tips__WEBPACK_IMPORTED_MODULE_1__["LoadingTips"]; });\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/loadqueue/index.ts?')},"./src/render/loadqueue/load.queue.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoadType", function() { return LoadType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoadQueue", function() { return LoadQueue; });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar LoadType;\n(function (LoadType) {\n    LoadType[LoadType["IMAGE"] = 0] = "IMAGE";\n    LoadType[LoadType["JSON"] = 1] = "JSON";\n    LoadType[LoadType["ALTAS"] = 2] = "ALTAS";\n    LoadType[LoadType["DRAGONBONES"] = 3] = "DRAGONBONES";\n})(LoadType || (LoadType = {}));\nvar LoadState;\n(function (LoadState) {\n    LoadState[LoadState["NONE"] = 0] = "NONE";\n    LoadState[LoadState["PRELOAD"] = 1] = "PRELOAD";\n    LoadState[LoadState["PROGRESS"] = 2] = "PROGRESS";\n    LoadState[LoadState["COMPLETE"] = 3] = "COMPLETE";\n    LoadState[LoadState["ERROR"] = 4] = "ERROR";\n    LoadState[LoadState["RETRY"] = 5] = "RETRY";\n})(LoadState || (LoadState = {}));\nvar LoadQueue = /** @class */ (function (_super) {\n    __extends(LoadQueue, _super);\n    function LoadQueue(scene) {\n        var _this = _super.call(this) || this;\n        _this.scene = scene;\n        _this.mQueue = [];\n        return _this;\n    }\n    LoadQueue.prototype.add = function (list) {\n        var _this = this;\n        list.forEach(function (loadObject) {\n            if (loadObject) {\n                var type = loadObject.type;\n                var key = loadObject.key;\n                var altasUrl = loadObject.altasUrl, textureUrl = loadObject.textureUrl, jsonUrl = loadObject.jsonUrl, boneUrl = loadObject.boneUrl;\n                switch (type) {\n                    case LoadType.ALTAS:\n                        _this.scene.load.atlas(key, altasUrl);\n                        break;\n                    case LoadType.IMAGE:\n                        _this.scene.load.image(key, textureUrl);\n                        break;\n                    case LoadType.JSON:\n                        _this.scene.load.json(key, jsonUrl);\n                        break;\n                    case LoadType.DRAGONBONES:\n                        _this.scene.load.dragonbone(key, textureUrl, jsonUrl, boneUrl, null, null, { responseType: "arraybuffer" });\n                        break;\n                }\n                _this.mQueue.push(loadObject);\n                // loadloadstartLoad\n                // if (!this.scene.load.isLoading() && this.scene.load.isReady()) {\n                //     this.startLoad();\n                // }\n            }\n        });\n    };\n    // add\n    LoadQueue.prototype.startLoad = function () {\n        this.mQueue.forEach(function (loadObject) {\n            loadObject.state = LoadState.PROGRESS;\n        });\n        this.addListen();\n        this.scene.load.start();\n    };\n    LoadQueue.prototype.destroy = function () {\n        this.removeListen();\n        if (this.mQueue)\n            this.mQueue = null;\n        _super.prototype.destroy.call(this);\n    };\n    LoadQueue.prototype.addListen = function () {\n        // loadqueueload\n        this.removeListen();\n        this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE, this.fileComplete, this);\n        this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.totalComplete, this);\n        this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR, this.fileLoadError, this);\n    };\n    LoadQueue.prototype.removeListen = function () {\n        this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE, this.fileComplete, this);\n        this.scene.load.off(Phaser.Loader.Events.COMPLETE, this.totalComplete, this);\n        this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR, this.fileLoadError, this);\n    };\n    LoadQueue.prototype.totalComplete = function () {\n        this.emit("QueueComplete");\n        this.clearQueue();\n    };\n    LoadQueue.prototype.fileComplete = function (key, type) {\n        this.emit("QueueProgress", this.scene.load.progress, key, type);\n    };\n    LoadQueue.prototype.fileLoadError = function (file) {\n        // Logger.getInstance().log("queue load error", file);\n        this.emit("QueueError", file.key);\n    };\n    LoadQueue.prototype.clearQueue = function () {\n        this.removeListen();\n        if (!this.mQueue)\n            return;\n        this.mQueue.length = 0;\n        this.mQueue = [];\n    };\n    return LoadQueue;\n}(Phaser.Events.EventEmitter));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/loadqueue/load.queue.ts?')},"./src/render/loadqueue/loading.tips.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoadingTips", function() { return LoadingTips; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n\nvar LoadingTips = /** @class */ (function () {\n    function LoadingTips() {\n    }\n    //  socket\n    LoadingTips.enterWorld = function () {\n        return utils__WEBPACK_IMPORTED_MODULE_0__["i18n"].t("loading.enter_game");\n    };\n    // \n    LoadingTips.loginGame = function () {\n        return utils__WEBPACK_IMPORTED_MODULE_0__["i18n"].t("loading.logging");\n    };\n    //   _OP_GATEWAY_RES_CLIENT_VIRTUAL_WORLD_INIT\n    LoadingTips.downloadGameConfig = function () {\n        return utils__WEBPACK_IMPORTED_MODULE_0__["i18n"].t("loading.downloading_config");\n    };\n    //   op_client.IOP_VIRTUAL_WORLD_RES_CLIENT_ENTER_SCENE\n    LoadingTips.downloadSceneConfig = function () {\n        return utils__WEBPACK_IMPORTED_MODULE_0__["i18n"].t("loading.downloading_scene_config");\n    };\n    //  piconfig\n    LoadingTips.parseConfig = function () {\n        return utils__WEBPACK_IMPORTED_MODULE_0__["i18n"].t("loading.parse_config");\n    };\n    // \n    LoadingTips.loadingResources = function () {\n        return utils__WEBPACK_IMPORTED_MODULE_0__["i18n"].t("loading.loading_resources");\n    };\n    // scene\n    LoadingTips.createScene = function () {\n        return utils__WEBPACK_IMPORTED_MODULE_0__["i18n"].t("loading.create_scene");\n    };\n    //   _OP_CLIENT_REQ_GATEWAY_GAME_CREATED \n    LoadingTips.waitEnterRoom = function () {\n        return utils__WEBPACK_IMPORTED_MODULE_0__["i18n"].t("loading.wait_enter_room");\n    };\n    return LoadingTips;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/loadqueue/loading.tips.ts?')},"./src/render/managers/display.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NodeType", function() { return NodeType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DisplayManager", function() { return DisplayManager; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _display_frames_frames_display__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../display/frames/frames.display */ "./src/render/display/frames/frames.display.ts");\n/* harmony import */ var _scenes_play_scene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scenes/play.scene */ "./src/render/scenes/play.scene.ts");\n/* harmony import */ var _display_dragonbones_dragonbones_display__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../display/dragonbones/dragonbones.display */ "./src/render/display/dragonbones/dragonbones.display.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _base_render_sky_box_block_manager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../base/render/sky.box/block.manager */ "./src/base/render/sky.box/block.manager.ts");\n/* harmony import */ var _display_debugs_matter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../display/debugs/matter */ "./src/render/display/debugs/matter.ts");\n/* harmony import */ var _display_debugs_server_pointer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../display/debugs/server.pointer */ "./src/render/display/debugs/server.pointer.ts");\n/* harmony import */ var picaRender__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! picaRender */ "./src/pica/render/index.ts");\n/* harmony import */ var _display_debugs_astar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../display/debugs/astar */ "./src/render/display/debugs/astar.ts");\n/* harmony import */ var _display_debugs_grids__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../display/debugs/grids */ "./src/render/display/debugs/grids.ts");\n\n\n\n\n\n\n\n\n\n\n\nvar NodeType;\n(function (NodeType) {\n    NodeType[NodeType["UnknownNodeType"] = 0] = "UnknownNodeType";\n    NodeType[NodeType["GameNodeType"] = 1] = "GameNodeType";\n    NodeType[NodeType["SceneNodeType"] = 2] = "SceneNodeType";\n    NodeType[NodeType["ElementNodeType"] = 3] = "ElementNodeType";\n    NodeType[NodeType["TerrainNodeType"] = 4] = "TerrainNodeType";\n    NodeType[NodeType["CharacterNodeType"] = 5] = "CharacterNodeType";\n    NodeType[NodeType["LocationType"] = 6] = "LocationType";\n    NodeType[NodeType["MovableType"] = 7] = "MovableType";\n    NodeType[NodeType["DisplayType"] = 8] = "DisplayType";\n    NodeType[NodeType["AttributeType"] = 9] = "AttributeType";\n    NodeType[NodeType["FunctionType"] = 10] = "FunctionType";\n    NodeType[NodeType["AnimationsType"] = 11] = "AnimationsType";\n    NodeType[NodeType["EventType"] = 12] = "EventType";\n    NodeType[NodeType["MapSizeType"] = 13] = "MapSizeType";\n    NodeType[NodeType["UIType"] = 14] = "UIType";\n    NodeType[NodeType["TimerType"] = 15] = "TimerType";\n    NodeType[NodeType["PackageType"] = 16] = "PackageType";\n    NodeType[NodeType["PackageItemType"] = 17] = "PackageItemType";\n    NodeType[NodeType["AvatarType"] = 18] = "AvatarType";\n    NodeType[NodeType["SettingsType"] = 19] = "SettingsType";\n    NodeType[NodeType["CampType"] = 20] = "CampType";\n    NodeType[NodeType["MutexType"] = 21] = "MutexType";\n    NodeType[NodeType["AnimationDataType"] = 22] = "AnimationDataType";\n    NodeType[NodeType["ForkType"] = 23] = "ForkType";\n    NodeType[NodeType["ButtonType"] = 24] = "ButtonType";\n    NodeType[NodeType["TextType"] = 25] = "TextType";\n    NodeType[NodeType["AccessType"] = 26] = "AccessType";\n    NodeType[NodeType["SpawnPointType"] = 27] = "SpawnPointType";\n    NodeType[NodeType["CommodityType"] = 28] = "CommodityType";\n    NodeType[NodeType["ShopType"] = 29] = "ShopType";\n    NodeType[NodeType["PaletteType"] = 30] = "PaletteType";\n    NodeType[NodeType["TerrainCollectionType"] = 31] = "TerrainCollectionType";\n    NodeType[NodeType["AssetsType"] = 32] = "AssetsType";\n    NodeType[NodeType["MossType"] = 33] = "MossType";\n    NodeType[NodeType["MossCollectionType"] = 34] = "MossCollectionType";\n    NodeType[NodeType["SceneryType"] = 35] = "SceneryType";\n    NodeType[NodeType["ModsType"] = 36] = "ModsType";\n    NodeType[NodeType["InputTextType"] = 37] = "InputTextType";\n})(NodeType || (NodeType = {}));\nvar DisplayManager = /** @class */ (function () {\n    function DisplayManager(render) {\n        this.render = render;\n        this.loading = false;\n        // ====id\n        this.uuid = 0;\n        this.sceneManager = render.sceneManager;\n        this.displays = new Map();\n        this.scenerys = new Map();\n        this.preLoadList = [];\n    }\n    Object.defineProperty(DisplayManager.prototype, "user", {\n        get: function () {\n            return this.mUser;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DisplayManager.prototype.update = function (time, delta) {\n        if (this.preLoadList && this.preLoadList.length > 0 && !this.loading) {\n            this.loading = true;\n            this.loadProgress();\n        }\n    };\n    DisplayManager.prototype.resize = function (width, height) {\n        this.scenerys.forEach(function (scenery) {\n            scenery.resize(width, height);\n        });\n    };\n    DisplayManager.prototype.updateModel = function (id, data) {\n        var scene = this.sceneManager.getMainScene();\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        var display = this.displays.get(id);\n        if (display) {\n            display.load(data);\n            this.render.mainPeer.elementDisplaySyncReady(id);\n        }\n    };\n    DisplayManager.prototype.addDragonbonesDisplay = function (id, data, layer) {\n        if (!data) {\n            return;\n        }\n        var scene = this.sceneManager.getMainScene();\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        var display;\n        if (!this.displays.has(id)) {\n            display = new _display_dragonbones_dragonbones_display__WEBPACK_IMPORTED_MODULE_3__["DragonbonesDisplay"](scene, this.render, id, this.uuid++, NodeType.CharacterNodeType);\n            this.displays.set(id, display);\n            this.preLoadList.push(display);\n        }\n        else {\n            display = this.displays.get(id);\n        }\n        display.load(data);\n        scene.layerManager.addToLayer(layer.toString(), display);\n    };\n    DisplayManager.prototype.addUserDragonbonesDisplay = function (data, isUser, layer) {\n        if (isUser === void 0) { isUser = false; }\n        if (!data) {\n            return;\n        }\n        var scene = this.sceneManager.getMainScene();\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        var display;\n        if (!this.displays.has(data.id)) {\n            display = new _display_dragonbones_dragonbones_display__WEBPACK_IMPORTED_MODULE_3__["DragonbonesDisplay"](scene, this.render, data.id, this.uuid++, NodeType.CharacterNodeType);\n            this.displays.set(data.id, display);\n        }\n        else {\n            display = this.displays.get(data.id);\n        }\n        // \n        display.load(data);\n        display.startLoad();\n        scene.layerManager.addToLayer(layer.toString(), display);\n        if (isUser)\n            this.mUser = display;\n        return display;\n    };\n    DisplayManager.prototype.addTerrainDisplay = function (id, data, layer) {\n        if (!data) {\n            return;\n        }\n        var scene = this.sceneManager.getMainScene();\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        var display;\n        if (!this.displays.has(id)) {\n            display = new _display_frames_frames_display__WEBPACK_IMPORTED_MODULE_1__["FramesDisplay"](scene, this.render, id, NodeType.TerrainNodeType);\n            this.displays.set(id, display);\n        }\n        else {\n            display = this.displays.get(id);\n        }\n        display.load(data);\n        scene.layerManager.addToLayer(layer.toString(), display);\n        return display;\n    };\n    DisplayManager.prototype.addFramesDisplay = function (id, data, layer, field) {\n        if (!data) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug("addFramesDisplay ====>", id);\n            return;\n        }\n        var scene = this.sceneManager.getMainScene();\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        var display;\n        if (!this.displays.has(id)) {\n            if (id === 57255261)\n                utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug("no load obj render", data);\n            display = new _display_frames_frames_display__WEBPACK_IMPORTED_MODULE_1__["FramesDisplay"](scene, this.render, id, NodeType.ElementNodeType);\n            this.displays.set(id, display);\n        }\n        else {\n            display = this.displays.get(id);\n        }\n        display.load(data, field);\n        scene.layerManager.addToLayer(layer.toString(), display);\n        return display;\n    };\n    DisplayManager.prototype.addToSurfaceLayer = function (display) {\n        var scene = this.sceneManager.getMainScene();\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        scene.layerManager.addToLayer(_scenes_play_scene__WEBPACK_IMPORTED_MODULE_2__["PlayScene"].LAYER_SURFACE, display);\n    };\n    DisplayManager.prototype.removeDisplay = function (displayID) {\n        if (!this.displays.has(displayID)) {\n            // Logger.getInstance().error("BaseDisplay not found: ", displayID);\n            return;\n        }\n        var display = this.displays.get(displayID);\n        display.destroy();\n        this.displays.delete(displayID);\n    };\n    DisplayManager.prototype.addFillEffect = function (x, y, status) {\n        var mainScene = this.render.sceneManager.getMainScene();\n        var fall = new picaRender__WEBPACK_IMPORTED_MODULE_8__["FallEffect"](mainScene, this.render.scaleRatio);\n        fall.show(status);\n        fall.setPosition(x, y);\n        mainScene.layerManager.addToLayer("sceneUILayer", fall);\n    };\n    DisplayManager.prototype.load = function (displayID, data, field) {\n        if (!this.displays.has(displayID)) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", displayID);\n            return;\n        }\n        var display = this.displays.get(displayID);\n        display.load(data, field);\n    };\n    DisplayManager.prototype.changeAlpha = function (displayID, val) {\n        if (!this.displays.has(displayID)) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", displayID);\n            return;\n        }\n        var display = this.displays.get(displayID);\n        display.changeAlpha(val);\n    };\n    DisplayManager.prototype.fadeIn = function (displayID) {\n        if (!this.displays.has(displayID)) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", displayID);\n            return;\n        }\n        var display = this.displays.get(displayID);\n        display.fadeIn();\n    };\n    DisplayManager.prototype.fadeOut = function (displayID) {\n        if (!this.displays.has(displayID)) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", displayID);\n            return;\n        }\n        var display = this.displays.get(displayID);\n        display.fadeOut();\n    };\n    DisplayManager.prototype.play = function (displayID, animation, field, times) {\n        if (!this.displays.has(displayID)) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", displayID);\n            return;\n        }\n        var display = this.displays.get(displayID);\n        display.play(animation);\n    };\n    DisplayManager.prototype.mount = function (displayID, targetID, targetIndex) {\n        var display = this.displays.get(displayID);\n        if (!display) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", displayID);\n            return;\n        }\n        var target = this.displays.get(targetID);\n        if (!target) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", targetID);\n            return;\n        }\n        target.setRootMount(display);\n        display.mount(target, targetIndex);\n    };\n    DisplayManager.prototype.unmount = function (displayID, targetID) {\n        var display = this.displays.get(displayID);\n        if (!display) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", displayID);\n            return;\n        }\n        var target = this.displays.get(targetID);\n        if (!target) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", targetID);\n            return;\n        }\n        target.setRootMount(null);\n        display.unmount(target);\n    };\n    DisplayManager.prototype.addEffect = function (targetID, effectID, display) {\n        var target = this.getDisplay(targetID);\n        var effect = this.addFramesDisplay(effectID, display, structure__WEBPACK_IMPORTED_MODULE_4__["DisplayField"].Effect);\n        if (!target || !effect) {\n            return;\n        }\n        effect.once("initialized", function () {\n            target.addEffect(effect);\n        });\n    };\n    DisplayManager.prototype.removeEffect = function (displayID) {\n        var display = this.displays.get(displayID);\n        if (!display) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", displayID);\n            return;\n        }\n        display.removeEffect();\n        display.destroy();\n    };\n    DisplayManager.prototype.showEffect = function (displayID) {\n        if (!this.displays.has(displayID)) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("BaseDisplay not found: ", displayID);\n            return;\n        }\n        var display = this.displays.get(displayID);\n        // display.showEffect();\n    };\n    DisplayManager.prototype.setModel = function (sprite) {\n        var display = this.displays.get(sprite.id);\n        if (!display)\n            return;\n        if (!sprite.pos)\n            sprite.pos = new utils__WEBPACK_IMPORTED_MODULE_0__["LogicPos"](0, 0, 0);\n        display.titleMask = sprite.titleMask;\n        display.setPosition(sprite.pos.x, sprite.pos.y, sprite.pos.z);\n        display.changeAlpha(sprite.alpha);\n    };\n    DisplayManager.prototype.addSkybox = function (scenery) {\n        var skybox = new _base_render_sky_box_block_manager__WEBPACK_IMPORTED_MODULE_5__["BlockManager"](scenery, this.render);\n        this.scenerys.set(scenery.id, skybox);\n    };\n    DisplayManager.prototype.updateSkyboxState = function (state) {\n        this.scenerys.forEach(function (scenery) {\n            scenery.setState(state);\n        });\n    };\n    DisplayManager.prototype.removeSkybox = function (id) {\n        var scenery = this.scenerys.get(id);\n        if (!scenery) {\n            return;\n        }\n        scenery.destroy();\n        this.scenerys.delete(id);\n    };\n    DisplayManager.prototype.getDisplay = function (id) {\n        return this.displays.get(id);\n    };\n    DisplayManager.prototype.displayDoMove = function (id, moveData) {\n        var display = this.getDisplay(id);\n        if (display)\n            display.doMove(moveData);\n    };\n    DisplayManager.prototype.showNickname = function (id, name) {\n        var display = this.getDisplay(id);\n        if (!display) {\n            return utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug("can\'t show nickname " + name);\n        }\n        display.showNickname(name);\n        // if (display) display.showNickname(name);\n    };\n    DisplayManager.prototype.showTopDisplay = function (id, state) {\n        var display = this.getDisplay(id);\n        if (!display) {\n            return;\n        }\n        display.showTopDisplay(state);\n    };\n    DisplayManager.prototype.showMatterDebug = function (bodies) {\n        if (!this.matterBodies) {\n            this.matterBodies = new _display_debugs_matter__WEBPACK_IMPORTED_MODULE_6__["MatterBodies"](this.render);\n        }\n        this.matterBodies.renderWireframes(bodies);\n    };\n    DisplayManager.prototype.hideMatterDebug = function () {\n        if (this.matterBodies) {\n            this.matterBodies.destroy();\n            this.matterBodies = undefined;\n        }\n    };\n    DisplayManager.prototype.showGridsDebug = function (size) {\n        if (!this.mGridsDebug) {\n            this.mGridsDebug = new _display_debugs_grids__WEBPACK_IMPORTED_MODULE_10__["Grids"](this.render);\n        }\n        this.mGridsDebug.setData(size);\n    };\n    DisplayManager.prototype.hideGridsDebug = function () {\n        if (this.mGridsDebug) {\n            this.mGridsDebug.destroy();\n            this.mGridsDebug = null;\n        }\n    };\n    DisplayManager.prototype.showAstarDebug_init = function (map, posObj) {\n        if (!this.mAstarDebug) {\n            this.mAstarDebug = new _display_debugs_astar__WEBPACK_IMPORTED_MODULE_9__["Astar"](this.render);\n        }\n        this.mAstarDebug.initData(map, posObj);\n    };\n    DisplayManager.prototype.showAstarDebug_update = function (x, y, val) {\n        if (!this.mAstarDebug) {\n            // Logger.getInstance().error("AstarDebug not init");\n            return;\n        }\n        this.mAstarDebug.updateData(x, y, val);\n    };\n    DisplayManager.prototype.showAstarDebug_findPath = function (start, tar, path) {\n        if (!this.mAstarDebug) {\n            // Logger.getInstance().error("AstarDebug not init");\n            return;\n        }\n        this.mAstarDebug.showPath(start, tar, path);\n    };\n    DisplayManager.prototype.hideAstarDebug = function () {\n        if (this.mAstarDebug) {\n            this.mAstarDebug.destroy();\n            this.mAstarDebug = null;\n        }\n    };\n    DisplayManager.prototype.drawServerPosition = function (x, y) {\n        if (!this.serverPosition) {\n            this.serverPosition = new _display_debugs_server_pointer__WEBPACK_IMPORTED_MODULE_7__["ServerPosition"](this.render);\n        }\n        this.serverPosition.draw(x, y);\n    };\n    DisplayManager.prototype.destroy = function () {\n        this.loading = false;\n        if (this.preLoadList) {\n            this.preLoadList.length = 0;\n            this.preLoadList = [];\n        }\n        if (this.displays) {\n            this.displays.forEach(function (display) {\n                if (display)\n                    display.destroy();\n            });\n            this.displays.clear();\n        }\n        if (this.scenerys) {\n            this.scenerys.forEach(function (block) {\n                if (block)\n                    block.destroy();\n            });\n            this.scenerys.clear();\n        }\n        if (this.matterBodies) {\n            this.matterBodies.destroy();\n            this.matterBodies = null;\n        }\n        if (this.serverPosition) {\n            this.serverPosition.destroy();\n            this.serverPosition = null;\n        }\n        if (this.mAstarDebug) {\n            this.mAstarDebug.destroy();\n            this.mAstarDebug = null;\n        }\n        if (this.mGridsDebug) {\n            this.mGridsDebug.destroy();\n            this.mGridsDebug = null;\n        }\n    };\n    DisplayManager.prototype.loadProgress = function () {\n        var _this = this;\n        var display = this.preLoadList.shift();\n        if (!display) {\n            this.loading = false;\n            return;\n        }\n        display.startLoad()\n            .then(function () {\n            _this.loadProgress();\n        })\n            .catch(function () {\n            _this.loadProgress();\n        });\n    };\n    return DisplayManager;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/managers/display.manager.ts?')},"./src/render/managers/editor.canvas.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditorCanvasManager", function() { return EditorCanvasManager; });\n/* harmony import */ var _editor_canvas_avatar_avatar_editor_canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../editor/canvas/avatar/avatar.editor.canvas */ "./src/editor/canvas/avatar/avatar.editor.canvas.ts");\n/* harmony import */ var _editor_canvas_avatar_avatar_editor_dragonbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../editor/canvas/avatar/avatar.editor.dragonbone */ "./src/editor/canvas/avatar/avatar.editor.dragonbone.ts");\n\n\nvar EditorCanvasManager = /** @class */ (function () {\n    function EditorCanvasManager(render) {\n        this.render = render;\n        this.AVATAR_CANVAS_TEST_DATA = [{ id: "5facff1a67d3b140e835e1d0", parts: ["head_hair"] }];\n        this.AVATAR_CANVAS_RESOURCE_PATH = "https://osd-alpha.tooqing.com";\n        this.AVATAR_CANVAS_PARENT = "avatarCanvas";\n        this.SCENEKEY_SNAPSHOT = "AvatarEditorSnapshotScene";\n    }\n    EditorCanvasManager.prototype.destroy = function () {\n        if (this.render.game) {\n            this.render.game.scene.stop(this.SCENEKEY_SNAPSHOT);\n            this.render.game.scene.remove(this.SCENEKEY_SNAPSHOT);\n        }\n    };\n    EditorCanvasManager.prototype.createHeadIcon = function (sets) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (!_this.render.game.scene.getScene(_this.SCENEKEY_SNAPSHOT))\n                _this.render.game.scene.add(_this.SCENEKEY_SNAPSHOT, _editor_canvas_avatar_avatar_editor_canvas__WEBPACK_IMPORTED_MODULE_0__["AvatarEditorScene"], false);\n            _this.render.sceneManager.currentScene.scene.launch(_this.SCENEKEY_SNAPSHOT, {\n                onCreated: function (s) {\n                    _this.render.game.scene.sendToBack(_this.SCENEKEY_SNAPSHOT);\n                    var a = new _editor_canvas_avatar_avatar_editor_dragonbone__WEBPACK_IMPORTED_MODULE_1__["AvatarEditorDragonbone"](s, _this.AVATAR_CANVAS_RESOURCE_PATH, _this.render.emitter, false, sets, function (dragonbone) {\n                        dragonbone.generateHeadIcon().then(function (src) {\n                            resolve(src);\n                            dragonbone.destroy();\n                            _this.render.game.scene.stop(_this.SCENEKEY_SNAPSHOT);\n                            _this.render.game.scene.remove(_this.SCENEKEY_SNAPSHOT);\n                        });\n                    });\n                }\n            });\n        });\n    };\n    return EditorCanvasManager;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/managers/editor.canvas.manager.ts?')},"./src/render/managers/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _display_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./display.manager */ "./src/render/managers/display.manager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NodeType", function() { return _display_manager__WEBPACK_IMPORTED_MODULE_0__["NodeType"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DisplayManager", function() { return _display_manager__WEBPACK_IMPORTED_MODULE_0__["DisplayManager"]; });\n\n/* harmony import */ var _local_storage_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./local.storage.manager */ "./src/render/managers/local.storage.manager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LocalStorageManager", function() { return _local_storage_manager__WEBPACK_IMPORTED_MODULE_1__["LocalStorageManager"]; });\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/managers/index.ts?')},"./src/render/managers/local.storage.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocalStorageManager", function() { return LocalStorageManager; });\nvar LocalStorageManager = /** @class */ (function () {\n    function LocalStorageManager() {\n    }\n    LocalStorageManager.prototype.setItem = function (key, value) {\n        localStorage.setItem(key, value);\n    };\n    LocalStorageManager.prototype.removeItem = function (key) {\n        localStorage.removeItem(key);\n    };\n    LocalStorageManager.prototype.getItem = function (key) {\n        return localStorage.getItem(key);\n    };\n    LocalStorageManager.prototype.clear = function () {\n        localStorage.clear();\n    };\n    LocalStorageManager.prototype.destroy = function () {\n        this.clear();\n    };\n    return LocalStorageManager;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/managers/local.storage.manager.ts?')},"./src/render/render.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__dirname) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Render", function() { return Render; });\n/* harmony import */ var tooqinggamephaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tooqinggamephaser */ "./node_modules/tooqinggamephaser/dist/phaser.js-exposed");\n/* harmony import */ var tooqinggamephaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tooqinggamephaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dragonBones__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dragonBones */ "./lib/dragonBones/dragonBones.js-exposed");\n/* harmony import */ var dragonBones__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dragonBones__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var webworker_rpc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! webworker-rpc */ "./node_modules/webworker-rpc/release/index.js");\n/* harmony import */ var webworker_rpc__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! net-socket-packet */ "./node_modules/net-socket-packet/dist/index.js");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! pixelpai_proto */ "./node_modules/pixelpai_proto/protocols.js");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _account_account__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./account/account */ "./src/render/account/account.ts");\n/* harmony import */ var _scenes_scene_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./scenes/scene.manager */ "./src/render/scenes/scene.manager.ts");\n/* harmony import */ var _scenes_login_scene__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./scenes/login.scene */ "./src/render/scenes/login.scene.ts");\n/* harmony import */ var _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./managers/local.storage.manager */ "./src/render/managers/local.storage.manager.ts");\n/* harmony import */ var _scenes_play_scene__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./scenes/play.scene */ "./src/render/scenes/play.scene.ts");\n/* harmony import */ var _cameras_cameras_manager__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./cameras/cameras.manager */ "./src/render/cameras/cameras.manager.ts");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! path */ "./node_modules/path-browserify/index.js");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _managers_display_manager__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./managers/display.manager */ "./src/render/managers/display.manager.ts");\n/* harmony import */ var _input_input_manager__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./input/input.manager */ "./src/render/input/input.manager.ts");\n/* harmony import */ var picaRender__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! picaRender */ "./src/pica/render/index.ts");\n/* harmony import */ var _scenes_game_pause_scene__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./scenes/game.pause.scene */ "./src/render/scenes/game.pause.scene.ts");\n/* harmony import */ var _managers_editor_canvas_manager__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./managers/editor.canvas.manager */ "./src/render/managers/editor.canvas.manager.ts");\n/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../version */ "./version.js");\n/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_version__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _display_debugs_astar__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./display/debugs/astar */ "./src/render/display/debugs/astar.ts");\n/* harmony import */ var _display_debugs_editor_mode_debugger__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./display/debugs/editor.mode.debugger */ "./src/render/display/debugs/editor.mode.debugger.ts");\n/* harmony import */ var _display_debugs_grids__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./display/debugs/grids */ "./src/render/display/debugs/grids.ts");\n/* harmony import */ var _display_debugs_sort_debugger__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./display/debugs/sort.debugger */ "./src/render/display/debugs/sort.debugger.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // TODO: pica\n\n\n\n\n\n\n\n// import Stats from "../../Stat";\nfor (var key in pixelpai_proto__WEBPACK_IMPORTED_MODULE_5__) {\n    net_socket_packet__WEBPACK_IMPORTED_MODULE_4__["PBpacket"].addProtocol(pixelpai_proto__WEBPACK_IMPORTED_MODULE_5__[key]);\n}\nvar MoveStyle;\n(function (MoveStyle) {\n    MoveStyle[MoveStyle["DIRECTION_MOVE_STYLE"] = 1] = "DIRECTION_MOVE_STYLE";\n    MoveStyle[MoveStyle["FOLLOW_MOUSE_MOVE_STYLE"] = 2] = "FOLLOW_MOUSE_MOVE_STYLE";\n    MoveStyle[MoveStyle["PATH_MOVE_STYLE"] = 3] = "PATH_MOVE_STYLE";\n})(MoveStyle || (MoveStyle = {}));\nvar Render = /** @class */ (function (_super) {\n    __extends(Render, _super);\n    function Render(config, callBack) {\n        var _this = _super.call(this, structure__WEBPACK_IMPORTED_MODULE_13__["RENDER_PEER"]) || this;\n        _this.isConnect = false;\n        _this.DEFAULT_WIDTH = 360;\n        _this.DEFAULT_HEIGHT = 640;\n        _this._moveStyle = 0;\n        _this.isPause = false;\n        _this.emitter = new Phaser.Events.EventEmitter();\n        _this.mConfig = config;\n        _this.mCallBack = callBack;\n        _this.gridsDebugger = _display_debugs_grids__WEBPACK_IMPORTED_MODULE_22__["GridsDebugger"].getInstance();\n        _this.astarDebugger = _display_debugs_astar__WEBPACK_IMPORTED_MODULE_20__["AstarDebugger"].getInstance();\n        _this.sortDebugger = new _display_debugs_sort_debugger__WEBPACK_IMPORTED_MODULE_23__["SortDebugger"](_this);\n        _this.editorModeDebugger = new _display_debugs_editor_mode_debugger__WEBPACK_IMPORTED_MODULE_21__["EditorModeDebugger"](_this);\n        _this.mConnectFailFunc = _this.mConfig.connectFail;\n        _this.mGameCreatedFunc = _this.mConfig.game_created;\n        _this.mConfig.hasConnectFail = _this.mConnectFailFunc ? true : false;\n        _this.mConfig.hasCloseGame = _this.mConfig.closeGame ? true : false;\n        _this.mConfig.hasGameCreated = _this.mConfig.game_created ? true : false;\n        _this.mConfig.hasReload = _this.mConfig.reload ? true : false;\n        // rpc\n        delete _this.mConfig.connectFail;\n        delete _this.mConfig.game_created;\n        delete _this.mConfig.closeGame;\n        // Logger.getInstance().debug("connectfail===>", this.mConnectFailFunc, this.mConfig);\n        _this.initConfig();\n        utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().log("Render version ====>:", "v" + _version__WEBPACK_IMPORTED_MODULE_19___default.a);\n        _this.linkTo(structure__WEBPACK_IMPORTED_MODULE_13__["MAIN_WORKER"], structure__WEBPACK_IMPORTED_MODULE_13__["MAIN_WORKER_URL"]).onceReady(function () {\n            _this.mMainPeer = _this.remote[structure__WEBPACK_IMPORTED_MODULE_13__["MAIN_WORKER"]].MainPeer;\n            _this.mMainPeer.updateFps();\n            _this.createGame();\n            utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().debug("worker onReady");\n        });\n        _this.linkTo(structure__WEBPACK_IMPORTED_MODULE_13__["PHYSICAL_WORKER"], structure__WEBPACK_IMPORTED_MODULE_13__["PHYSICAL_WORKER_URL"]).onceReady(function () {\n            _this.mPhysicalPeer = _this.remote[structure__WEBPACK_IMPORTED_MODULE_13__["PHYSICAL_WORKER"]].PhysicalPeer;\n            _this.mPhysicalPeer.setScaleRatio(Math.ceil(_this.mConfig.devicePixelRatio || 1));\n            _this.mPhysicalPeer.start();\n            utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().debug("Physcialworker onReady");\n        });\n        return _this;\n        // this.linkTo(HEARTBEAT_WORKER, HEARTBEAT_WORKER_URL).onceReady(() => {\n        //     this.mHeartPeer = this.remote[HEARTBEAT_WORKER].HeartBeatPeer;\n        //     this.mMainPeer.updateFps();\n        //     Logger.getInstance().debug("heartBeatworker onReady in Render");\n        // });\n        // const len = 3;\n        // const statList = [];\n        // for (let i = 0; i < len; i++) {\n        //     const stats = new Stats();\n        //     // stats.dom.style.position = \'relative\';\n        //     stats.dom.style.left = 80 * i + "px";\n        //     stats.showPanel(i); // 0: fps, 1: ms, 2: mb, 3+: custom\n        //     document.body.appendChild(stats.dom);\n        //     statList.push(stats);\n        // }\n        // function animate() {\n        //     for (let i = 0, tmpLen = statList.length; i < tmpLen; i++) {\n        //         const stats = statList[i];\n        //         stats.begin();\n        //         stats.end();\n        //     }\n        //     requestAnimationFrame(animate);\n        // }\n        // requestAnimationFrame(animate);\n    }\n    Object.defineProperty(Render.prototype, "physicalPeer", {\n        get: function () {\n            return this.mPhysicalPeer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Render.prototype.setKeyBoardHeight = function (height) {\n        throw new Error("Method not implemented.");\n    };\n    Object.defineProperty(Render.prototype, "config", {\n        get: function () {\n            return this.mConfig;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "uiRatio", {\n        get: function () {\n            return this.mUIRatio;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "uiScale", {\n        get: function () {\n            return this.mUIScale;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "scaleRatio", {\n        get: function () {\n            return this.mScaleRatio;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "account", {\n        get: function () {\n            return this.mAccount;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "uiManager", {\n        get: function () {\n            return this.mUiManager;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "sceneManager", {\n        get: function () {\n            return this.mSceneManager;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "camerasManager", {\n        get: function () {\n            return this.mCameraManager;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "displayManager", {\n        get: function () {\n            return this.mDisplayManager;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "localStorageManager", {\n        get: function () {\n            return this.mLocalStorageManager;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "editorCanvasManager", {\n        get: function () {\n            return this.mEditorCanvasManager;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "game", {\n        get: function () {\n            return this.mGame;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Render.prototype.getSize = function () {\n        if (!this.mGame)\n            return;\n        return this.mGame.scale.gameSize;\n    };\n    Render.prototype.createGame = function () {\n        var _this = this;\n        this.newGame().then(function () {\n            _this.createManager();\n            _this.remote[structure__WEBPACK_IMPORTED_MODULE_13__["MAIN_WORKER"]].MainPeer.createGame(_this.mConfig);\n        });\n    };\n    Render.prototype.createManager = function () {\n        if (!this.mUiManager)\n            this.mUiManager = new picaRender__WEBPACK_IMPORTED_MODULE_16__["PicaRenderUiManager"](this);\n        if (!this.mCameraManager)\n            this.mCameraManager = new _cameras_cameras_manager__WEBPACK_IMPORTED_MODULE_11__["CamerasManager"](this);\n        if (!this.mLocalStorageManager)\n            this.mLocalStorageManager = new _managers_local_storage_manager__WEBPACK_IMPORTED_MODULE_9__["LocalStorageManager"]();\n        if (!this.mSceneManager)\n            this.mSceneManager = new _scenes_scene_manager__WEBPACK_IMPORTED_MODULE_7__["SceneManager"](this);\n        if (!this.mInputManager)\n            this.mInputManager = new _input_input_manager__WEBPACK_IMPORTED_MODULE_15__["InputManager"](this);\n        if (!this.mDisplayManager)\n            this.mDisplayManager = new _managers_display_manager__WEBPACK_IMPORTED_MODULE_14__["DisplayManager"](this);\n        if (!this.mEditorCanvasManager)\n            this.mEditorCanvasManager = new _managers_editor_canvas_manager__WEBPACK_IMPORTED_MODULE_18__["EditorCanvasManager"](this);\n    };\n    // manmager\n    Render.prototype.destroyManager = function () {\n        if (this.mUiManager) {\n            this.mUiManager.destroy();\n            this.mUiManager = undefined;\n        }\n        if (this.mCameraManager) {\n            this.mCameraManager.destroy();\n            this.mCameraManager = undefined;\n        }\n        // if (this.mLocalStorageManager) {\n        //     this.mLocalStorageManager.destroy();\n        //     this.mLocalStorageManager = undefined;\n        // }\n        if (this.mSceneManager) {\n            this.mSceneManager.destroy();\n            this.mSceneManager = undefined;\n        }\n        if (this.mInputManager) {\n            this.mInputManager.destroy();\n            this.mInputManager = undefined;\n        }\n        if (this.mDisplayManager) {\n            this.mDisplayManager.destroy();\n            this.mDisplayManager = undefined;\n        }\n        if (this.mEditorCanvasManager) {\n            this.mEditorCanvasManager.destroy();\n            this.mEditorCanvasManager = undefined;\n        }\n    };\n    // scenemanager\n    Render.prototype.clearManager = function () {\n        if (this.mUiManager)\n            this.mUiManager.destroy();\n        if (this.mCameraManager)\n            this.mCameraManager.destroy();\n        // if (this.mLocalStorageManager)\n        //     this.mLocalStorageManager.destroy();\n        if (this.mSceneManager)\n            this.mSceneManager.destroy();\n        if (this.mInputManager)\n            this.mInputManager.destroy();\n        if (this.mDisplayManager)\n            this.mDisplayManager.destroy();\n        // if (this.mEditorCanvasManager)\n        //     this.mEditorCanvasManager.destroy();\n    };\n    Render.prototype.enterGame = function () {\n        this.remote[structure__WEBPACK_IMPORTED_MODULE_13__["MAIN_WORKER"]].MainPeer.loginEnterWorld();\n        // const loginScene: LoginScene = this.mGame.scene.getScene(LoginScene.name) as LoginScene;\n        this.mGame.scene.remove(_scenes_login_scene__WEBPACK_IMPORTED_MODULE_8__["LoginScene"].name);\n        // this.uiManager.destroy();\n        // this.uiManager.addPackListener();\n        // loginScene.remove();\n        // this.mLoadingManager.start(LoadingTips.enterGame());\n    };\n    Render.prototype.resize = function (width, height) {\n        var panel = this.uiManager.getPanel(structure__WEBPACK_IMPORTED_MODULE_13__["ModuleName"].BOTTOM);\n        if (panel) {\n            var inputs = this.game.domContainer.getElementsByTagName("input");\n            if (inputs && inputs.length > 0) {\n                // tslint:disable-next-line:prefer-for-of\n                // for (let i = 0; i < inputs.length; i++) {\n                //     if (window.document.activeElement === inputs[i]) {\n                //         panel.showKeyboard(width * this.mConfig.devicePixelRatio, height * this.mConfig.devicePixelRatio);\n                //         return;\n                //     }\n                // }\n                // panel.hideKeyboard();\n                if (panel.getInputFocusing()) {\n                    panel.showKeyboard(width * this.mConfig.devicePixelRatio, height * this.mConfig.devicePixelRatio);\n                    return;\n                }\n                panel.hideKeyboard();\n                return;\n            }\n        }\n        // Logger.getInstance().debug("input: ", input);\n        if (this.mConfig) {\n            this.mConfig.width = width;\n            this.mConfig.height = height;\n        }\n        var w = width * this.mConfig.devicePixelRatio;\n        var h = height * this.mConfig.devicePixelRatio;\n        this.mScaleRatio = Math.ceil(this.mConfig.devicePixelRatio || 1);\n        this.mConfig.scale_ratio = this.mScaleRatio;\n        this.mUIRatio = Math.round(this.mConfig.devicePixelRatio || 1);\n        var scaleW = (width / this.DEFAULT_WIDTH) * (this.mConfig.devicePixelRatio / this.mUIRatio);\n        this.mUIScale = this.game.device.os.desktop ? 1 : scaleW;\n        if (this.mGame) {\n            this.mGame.scale.zoom = 1 / this.mConfig.devicePixelRatio;\n            this.mGame.scale.resize(w, h);\n            var scenes = this.mGame.scene.scenes;\n            for (var _i = 0, scenes_1 = scenes; _i < scenes_1.length; _i++) {\n                var scene = scenes_1[_i];\n                var camera = scene.cameras.main;\n                if (camera && camera.setPixelRatio)\n                    camera.setPixelRatio(this.mScaleRatio);\n                // scene.setViewPort(camera.x, camera.y, w, h);\n                // scene.cameras.main.setViewport(0, 0, w, h);\n            }\n        }\n        if (this.mUiManager) {\n            this.mUiManager.resize(w, h);\n        }\n        if (this.mInputManager) {\n            this.mInputManager.resize(w, h);\n        }\n        if (this.mDisplayManager) {\n            this.mDisplayManager.resize(w, h);\n        }\n        if (this.mCameraManager) {\n            this.mCameraManager.resize(width, height);\n        }\n        // if (this.mSceneManager) this.mSceneManager.resize(width, height);\n    };\n    Render.prototype.onOrientationChange = function (oriation, newWidth, newHeight) {\n    };\n    Render.prototype.scaleChange = function (scale) {\n    };\n    Render.prototype.enableClick = function () {\n        var playScene = this.sceneManager.getMainScene();\n        if (playScene)\n            playScene.input.enabled = true;\n        var uiScene = this.game.scene.getScene("MainUIScene");\n        if (uiScene)\n            uiScene.input.enabled = true;\n    };\n    Render.prototype.disableClick = function () {\n        var playScene = this.sceneManager.getMainScene();\n        if (playScene)\n            playScene.input.enabled = false;\n        var uiScene = this.game.scene.getScene("MainUIScene");\n        if (uiScene)\n            uiScene.input.enabled = false;\n    };\n    Render.prototype.keyboardDidShow = function (keyboardHeight) {\n        var bottom = this.uiManager.getPanel(structure__WEBPACK_IMPORTED_MODULE_13__["ModuleName"].BOTTOM);\n        var width = this.mConfig.width;\n        var height = this.mConfig.height - keyboardHeight;\n        if (bottom) {\n            bottom.showKeyboard(width * this.mConfig.devicePixelRatio, height * this.mConfig.devicePixelRatio);\n        }\n    };\n    Render.prototype.keyboardDidHide = function () {\n        var bottom = this.uiManager.getPanel(structure__WEBPACK_IMPORTED_MODULE_13__["ModuleName"].BOTTOM);\n        if (bottom) {\n            bottom.hideKeyboard();\n        }\n    };\n    Render.prototype.startFullscreen = function () {\n    };\n    Render.prototype.stopFullscreen = function () {\n    };\n    Render.prototype.setGameConfig = function (config) {\n    };\n    Render.prototype.updatePalette = function (palette) {\n        this.mainPeer.updatePalette(palette);\n    };\n    Render.prototype.updateMoss = function (moss) {\n        this.mainPeer.updateMoss(moss);\n    };\n    Render.prototype.restart = function (config, callBack) {\n    };\n    Render.prototype.initUI = function () {\n        this.remote[structure__WEBPACK_IMPORTED_MODULE_13__["MAIN_WORKER"]].MainPeer.initUI();\n    };\n    Render.prototype.startRoomPlay = function () {\n        this.remote[structure__WEBPACK_IMPORTED_MODULE_13__["MAIN_WORKER"]].MainPeer.startRoomPlay();\n    };\n    Render.prototype.updateRoom = function (time, delta) {\n        // this.remote[MAIN_WORKER].MainPeer.updateRoom(time, delta);\n        this.mInputManager.update(time, delta);\n        this.mDisplayManager.update(time, delta);\n    };\n    Render.prototype.destroy = function () {\n        var _this = this;\n        this.mainPeer.destroy();\n        this.physicalPeer.destroy();\n        return new Promise(function (resolve, reject) {\n            if (_this.mGame) {\n                _this.destroyManager();\n                _this.mGame.events.off(Phaser.Core.Events.FOCUS, _this.onFocus, _this);\n                _this.mGame.events.off(Phaser.Core.Events.BLUR, _this.onBlur, _this);\n                _this.mGame.scale.off("enterfullscreen", _this.onFullScreenChange, _this);\n                _this.mGame.scale.off("leavefullscreen", _this.onFullScreenChange, _this);\n                _this.mGame.scale.off("orientationchange", _this.onOrientationChange, _this);\n                _this.mGame.plugins.removeGlobalPlugin("rexButton");\n                _this.mGame.plugins.removeGlobalPlugin("rexNinePatchPlugin");\n                _this.mGame.plugins.removeGlobalPlugin("rexInputText");\n                _this.mGame.plugins.removeGlobalPlugin("rexBBCodeTextPlugin");\n                _this.mGame.plugins.removeGlobalPlugin("rexMoveTo");\n                _this.mGame.plugins.removeScenePlugin("DragonBones");\n                _this.mGame.events.once(Phaser.Core.Events.DESTROY, function () {\n                    _this.mGame = undefined;\n                    _super.prototype.destroy.call(_this);\n                    resolve();\n                });\n                _this.mGame.destroy(true);\n            }\n            else {\n                _super.prototype.destroy.call(_this);\n                resolve();\n            }\n        });\n    };\n    Object.defineProperty(Render.prototype, "curTime", {\n        get: function () {\n            return this._curTime;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Render.prototype, "moveStyle", {\n        get: function () {\n            return this._moveStyle;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Render.prototype.initGameConfig = function (config) {\n        this.remote[structure__WEBPACK_IMPORTED_MODULE_13__["MAIN_WORKER"]].MainPeer.initGameConfig(JSON.stringify(config));\n    };\n    // public startConnect(gateway: ServerAddress) {\n    //     this.remote[MAIN_WORKER].MainPeer.startConnect(gateway.host, gateway.port, gateway.secure);\n    // }\n    Render.prototype.newGame = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this.mGame) {\n                resolve(true);\n            }\n            // Logger.getInstance().debug("dragonbones: ", dragonBones);\n            _this.gameConfig = {\n                type: Phaser.AUTO,\n                parent: _this.mConfig.parent,\n                loader: {\n                    timeout: 10000,\n                },\n                disableContextMenu: true,\n                transparent: false,\n                backgroundColor: 0x0,\n                resolution: 1,\n                fps: {\n                    target: 45,\n                    forceSetTimeOut: true\n                },\n                dom: {\n                    createContainer: true,\n                },\n                plugins: {\n                    scene: [\n                        {\n                            key: "DragonBones",\n                            plugin: dragonBones.phaser.plugin.DragonBonesScenePlugin,\n                            mapping: "dragonbone",\n                        },\n                    ],\n                },\n                render: {\n                    pixelArt: true,\n                    roundPixels: true,\n                },\n                scale: {\n                    mode: Phaser.Scale.NONE,\n                    width: _this.mConfig.width * window.devicePixelRatio,\n                    height: _this.mConfig.height * window.devicePixelRatio,\n                    zoom: 1 / window.devicePixelRatio,\n                },\n            };\n            Object.assign(_this.gameConfig, _this.mConfig);\n            _this.mGame = new tooqinggamephaser__WEBPACK_IMPORTED_MODULE_0__["Game"](_this.gameConfig);\n            _this.mGame.input.mouse.capture = true;\n            if (_this.mGame.device.os.desktop) {\n                _this.mUIScale = 1;\n                _this.mConfig.platform = "pc";\n            }\n            else {\n                _this.mConfig.platform = "nopc";\n            }\n            resolve(true);\n        });\n    };\n    Render.prototype.closeConnect = function (boo) {\n        this.mainPeer.closeConnect(boo);\n    };\n    Render.prototype.send = function (packet) {\n        this.mainPeer.send(packet.Serialization);\n    };\n    Render.prototype.terminate = function () {\n        this.mainPeer.terminate();\n    };\n    Render.prototype.changeScene = function (scene) {\n        if (this.mInputManager)\n            this.mInputManager.setScene(scene);\n    };\n    Render.prototype.onFocus = function () {\n        this.resumeScene();\n    };\n    Render.prototype.onBlur = function () {\n        this.pauseScene();\n    };\n    Render.prototype.syncClock = function (times) {\n        this.mainPeer.syncClock(times);\n    };\n    Render.prototype.clearClock = function () {\n        this.mainPeer.clearClock();\n    };\n    Render.prototype.destroyClock = function () {\n        this.mainPeer.destroyClock();\n    };\n    Render.prototype.exitUser = function () {\n        this.mainPeer.exitUser();\n    };\n    Render.prototype.requestCurTime = function () {\n        this.mainPeer.requestCurTime();\n    };\n    Render.prototype.setDirection = function (id, direction) {\n        this.mainPeer.setDirection(id, direction);\n    };\n    Render.prototype.onLoginErrorHanlerCallBack = function (name, idcard) {\n    };\n    Render.prototype.onShowErrorHandlerCallBack = function (error, okText) {\n    };\n    Render.prototype.getCurrentRoomSize = function () {\n        return this.mainPeer.getCurrentRoomSize();\n    };\n    Render.prototype.getCurrentRoomMiniSize = function () {\n        return this.mainPeer.getCurrentRoomMiniSize();\n    };\n    Render.prototype.syncCameraScroll = function () {\n        if (this.mMainPeer)\n            this.mMainPeer.syncCameraScroll();\n    };\n    Render.prototype.renderEmitter = function (eventType, data) {\n        if (this.mMainPeer)\n            this.mMainPeer.renderEmitter(eventType, data);\n    };\n    Render.prototype.renderToPhysicalEmitter = function (eventType, data) {\n        if (this.physicalPeer)\n            this.physicalPeer.renderEmitter(eventType, data);\n    };\n    Render.prototype.showMediator = function (name, isShow) {\n        if (this.mMainPeer)\n            this.mMainPeer.showMediator(name, isShow);\n    };\n    Render.prototype.getMainScene = function () {\n        return this.mSceneManager.getMainScene();\n    };\n    Render.prototype.destroyAccount = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        if (_this.mAccount) {\n                            _this.mAccount.destroy();\n                        }\n                        resolve();\n                    })];\n            });\n        });\n    };\n    Render.prototype.reconnect = function () {\n        this.createGame();\n    };\n    Render.prototype.showLogin = function () {\n        if (this.sceneManager)\n            this.mSceneManager.startScene(structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].LOGIN_SCENE, this);\n    };\n    Render.prototype.hideLogin = function () {\n        if (this.sceneManager)\n            this.sceneManager.stopScene(structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].LOGIN_SCENE);\n    };\n    Render.prototype.checkContains = function (id, x, y) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var boo = _this.mCameraManager.checkContains(new utils__WEBPACK_IMPORTED_MODULE_3__["Pos"](x, y));\n            resolve(boo);\n        });\n    };\n    Render.prototype.showCreateRolePanel = function (data) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var createPanel = function () {\n                _this.mUiManager.showPanel(structure__WEBPACK_IMPORTED_MODULE_13__["ModuleName"].PICACREATEROLE_NAME, data).then(function (panel) {\n                    if (!panel) {\n                        reject(false);\n                        return;\n                    }\n                    panel.addExportListener(function () {\n                        resolve(true);\n                    });\n                });\n            };\n            if (_this.mUiManager.scene && _this.mUiManager.scene.scene.key === structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].CREATE_ROLE_SCENE) {\n                createPanel();\n            }\n            else {\n                _this.mSceneManager.startScene(structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].CREATE_ROLE_SCENE, {\n                    callBack: function () {\n                        createPanel();\n                    }\n                });\n            }\n        });\n    };\n    Render.prototype.updateModel = function (id, displayInfo) {\n        if (this.displayManager)\n            this.displayManager.updateModel(id, displayInfo);\n    };\n    Render.prototype.showCreateRole = function (params) {\n        if (this.mSceneManager)\n            this.mSceneManager.startScene(structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].CREATE_ROLE_SCENE, { render: this, params: params });\n    };\n    Render.prototype.hideCreateRole = function () {\n        if (this.mSceneManager)\n            this.mSceneManager.stopScene(structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].CREATE_ROLE_SCENE);\n    };\n    Render.prototype.showPlay = function (params) {\n        if (this.mSceneManager)\n            this.mSceneManager.startScene(structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].PLAY_SCENE, { render: this, params: params });\n    };\n    Render.prototype.updateFPS = function () {\n        if (!this.game)\n            return;\n        var scene = this.game.scene.getScene(structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].MAINUI_SCENE);\n        if (!scene || !scene.scene.isVisible || !scene.scene.isActive || !scene.scene.isPaused)\n            return;\n        scene.updateFPS();\n    };\n    Render.prototype.endFPS = function () {\n    };\n    Render.prototype.hidePlay = function () {\n        if (this.mSceneManager)\n            this.mSceneManager.stopScene(structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].PLAY_SCENE);\n    };\n    Render.prototype.showPanel = function (panelName, params) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.mUiManager.showPanel(panelName, params).then(function (panel) {\n                if (!panel) {\n                    reject(false);\n                    return;\n                }\n                panel.addExportListener(function () {\n                    resolve(true);\n                });\n            });\n        });\n    };\n    Render.prototype.hidePanel = function (panelName) {\n        if (this.mUiManager)\n            this.mUiManager.hidePanel(panelName);\n    };\n    Render.prototype.reload = function () {\n        utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().log("game relaod =====>");\n        window.location.reload();\n    };\n    Render.prototype.showJoystick = function () {\n        if (this.mInputManager)\n            this.mInputManager.showJoystick();\n    };\n    Render.prototype.setInputVisible = function (allow) {\n    };\n    Render.prototype.setLoginEnable = function (allow) {\n    };\n    Render.prototype.onShowVerified = function () {\n    };\n    Render.prototype.setVerifiedEnable = function (enable) {\n    };\n    Render.prototype.onShowErrorHandler = function (error, okText) {\n        this.onShowErrorHandlerCallBack(error, okText);\n    };\n    Render.prototype.onLoginErrorHanler = function (name, idcard) {\n        this.onLoginErrorHanlerCallBack(name, idcard);\n    };\n    Render.prototype.updateCharacterPackage = function () {\n        this.emitter.emit(structure__WEBPACK_IMPORTED_MODULE_13__["MessageType"].UPDATED_CHARACTER_PACKAGE);\n    };\n    Render.prototype.displayReady = function (id, animation) {\n        var display = this.mDisplayManager.getDisplay(id);\n        if (!display || !animation)\n            return;\n        display.play(animation);\n        display.showNickname();\n    };\n    Render.prototype.soundChangeRoom = function (roomID) {\n    };\n    Render.prototype.playSound = function (content) {\n    };\n    Render.prototype.onConnected = function () {\n        this.isConnect = true;\n    };\n    Render.prototype.onDisConnected = function () {\n        this.isConnect = false;\n    };\n    Render.prototype.onConnectError = function (error) {\n        this.isConnect = false;\n    };\n    Render.prototype.connectFail = function () {\n        this.isConnect = false;\n        if (this.mConnectFailFunc)\n            this.mConnectFailFunc();\n        // this.mWorld.connectFail();\n    };\n    Render.prototype.updateUIState = function (panelName, ui) {\n        this.uiManager.updateUIState(panelName, ui);\n    };\n    Render.prototype.setMoveStyle = function (moveStyle) {\n        this._moveStyle = moveStyle;\n    };\n    Render.prototype.onEnterRoom = function (scene) {\n    };\n    Render.prototype.scaleTween = function (id, type) {\n    };\n    Render.prototype.getRenderPosition = function (id, type) {\n        // todo\n        return [];\n    };\n    Render.prototype.createAccount = function (gameID, worldID, sceneID, locX, locY, locZ) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (!_this.mAccount) {\n                _this.mAccount = new _account_account__WEBPACK_IMPORTED_MODULE_6__["Account"]();\n            }\n            var now = new Date().getTime();\n            utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().debug("createAccount ====>", now);\n            _this.exportProperty(_this.mAccount, _this, structure__WEBPACK_IMPORTED_MODULE_13__["ModuleName"].ACCOUNT_NAME).onceReady(function () {\n                utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().debug("createAccountExport ====>", new Date().getTime() - now);\n                _this.mAccount.enterGame(gameID, worldID, sceneID, { locX: locX, locY: locY, locZ: locZ });\n                resolve(true);\n            });\n        });\n        // if (this.mainPeer) this.mainPeer.createAccount(gameID, worldID, sceneID, loc);\n    };\n    Render.prototype.refreshAccount = function (account) {\n        this.account.refreshToken(account);\n    };\n    Render.prototype.getAccount = function () {\n        return this.mAccount;\n    };\n    Render.prototype.setAccount = function (val) {\n        this.mAccount.setAccount(val);\n    };\n    Render.prototype.getWorldView = function () {\n        var _this = this;\n        if (!this.sceneManager)\n            return;\n        return new Promise(function (resolve, reject) {\n            var playScene = _this.sceneManager.getMainScene();\n            if (playScene) {\n                var camera = playScene.cameras.main;\n                var rect = camera.worldView;\n                var x = rect.x, y = rect.y;\n                var obj = {\n                    x: x,\n                    y: y,\n                    width: camera.width,\n                    height: camera.height,\n                    zoom: camera.zoom,\n                    scrollX: camera.scrollX,\n                    scrollY: camera.scrollY\n                };\n                resolve(obj);\n            }\n        });\n    };\n    Render.prototype.onClockReady = function () {\n        // this.mWorld.onClockReady();\n    };\n    Render.prototype.showAlert = function (text, title) {\n        // render\n    };\n    Render.prototype.showLoading = function (data) {\n        var _this = this;\n        if (!this.mSceneManager) {\n            // Logger.getInstance().error("no game created");\n            return;\n        }\n        data.callBack = function () {\n            if (data.sceneName)\n                _this.mSceneManager.startScene(data.sceneName);\n        };\n        data.dpr = this.uiRatio;\n        this.mSceneManager.startScene(structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].LOADING_SCENE, data);\n    };\n    Render.prototype.updateProgress = function (progress) {\n        if (progress > 1)\n            progress = 1;\n        progress.toFixed(2);\n        if (this.mSceneManager)\n            this.mSceneManager.showProgress(progress);\n    };\n    Render.prototype.hideLoading = function () {\n        if (!this.mSceneManager) {\n            // Logger.getInstance().error("no game created");\n            return;\n        }\n        this.mSceneManager.sleepScene(structure__WEBPACK_IMPORTED_MODULE_13__["SceneName"].LOADING_SCENE);\n    };\n    Render.prototype.onForceOfflineHandler = function () {\n        this.uiManager.showAlertView(utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("common.offline"), true);\n    };\n    // @Export([webworker_rpc.ParamType.str, webworker_rpc.ParamType.str, webworker_rpc.ParamType.str, webworker_rpc.ParamType.str])\n    // public sceneAddLoadRes(sceneName: string, type: string, key: string, source: string) {\n    // }\n    // @Export([webworker_rpc.ParamType.str])\n    // public sceneStartLoad(secenName: string) {\n    // }\n    Render.prototype.loadStart = function (str, scene) {\n    };\n    Render.prototype.roomPause = function (roomID) {\n    };\n    Render.prototype.roomResume = function (roomID) {\n    };\n    Render.prototype.removeScene = function (sceneName) {\n        if (this.sceneManager)\n            this.sceneManager.remove(sceneName);\n    };\n    Render.prototype.showCreatePanelError = function (content) {\n    };\n    Render.prototype.createSetNickName = function (name) {\n    };\n    Render.prototype.renderReconnect = function () {\n    };\n    Render.prototype.createAnotherGame = function (gameId, worldId, sceneId, px, py, pz) {\n        // this.newGame().then(() => {\n        //     // todo sceneManager loginScene.name\n        // });\n        utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().debug("gotoanothergame ====>");\n        this.account.enterGame(gameId, worldId, sceneId, { x: px, y: py, z: pz });\n    };\n    Render.prototype.setCamerasBounds = function (x, y, width, height) {\n        if (this.mCameraManager)\n            this.mCameraManager.setBounds(x, y, width, height);\n    };\n    Render.prototype.setCamerasScroll = function (x, y, effect) {\n        if (!this.mCameraManager) {\n            return;\n        }\n        this.mCameraManager.scrollTargetPoint(x, y, effect);\n    };\n    Render.prototype.setInteractive = function (id, type) {\n        if (!this.mDisplayManager)\n            return;\n        var display = this.mDisplayManager.getDisplay(id);\n        if (display)\n            display.setInteractive();\n    };\n    Render.prototype.disableInteractive = function (id, type) {\n        var display = this.mDisplayManager.getDisplay(id);\n        if (display)\n            display.disableInteractive();\n    };\n    Render.prototype.fadeIn = function (id, type) {\n    };\n    Render.prototype.fadeOut = function (id, type) {\n    };\n    Render.prototype.fadeAlpha = function (id, type, alpha) {\n    };\n    Render.prototype.getCurTime = function (curTime) {\n        return this._curTime = curTime;\n    };\n    Render.prototype.createGameCallBack = function (keyEvents) {\n        this.mGame.events.on(Phaser.Core.Events.FOCUS, this.onFocus, this);\n        this.mGame.events.on(Phaser.Core.Events.BLUR, this.onBlur, this);\n        if (window.screen.width > window.screen.height) {\n            if (this.mConfig.width > this.mConfig.height) {\n                this.resize(this.mConfig.width, this.mConfig.height);\n            }\n            else {\n                this.resize(this.mConfig.height, this.mConfig.width);\n            }\n        }\n        else {\n            if (this.mConfig.width < this.mConfig.height) {\n                this.resize(this.mConfig.width, this.mConfig.height);\n            }\n            else {\n                this.resize(this.mConfig.height, this.mConfig.width);\n            }\n        }\n        if (this.mGameCreatedFunc)\n            this.mGameCreatedFunc.call(this);\n        this.gameCreated(keyEvents);\n    };\n    Render.prototype.addFillEffect = function (posX, posY, status) {\n        this.displayManager.addFillEffect(posX, posY, status);\n    };\n    Render.prototype.clearRoom = function () {\n        this.clearManager();\n    };\n    Render.prototype.clearGame = function (boo) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this.mGame) {\n                _this.destroyManager();\n                _this.mGame.events.off(Phaser.Core.Events.FOCUS, _this.onFocus, _this);\n                _this.mGame.events.off(Phaser.Core.Events.BLUR, _this.onBlur, _this);\n                _this.mGame.scale.off("enterfullscreen", _this.onFullScreenChange, _this);\n                _this.mGame.scale.off("leavefullscreen", _this.onFullScreenChange, _this);\n                _this.mGame.scale.off("orientationchange", _this.onOrientationChange, _this);\n                _this.mGame.plugins.removeGlobalPlugin("rexButton");\n                _this.mGame.plugins.removeGlobalPlugin("rexNinePatchPlugin");\n                _this.mGame.plugins.removeGlobalPlugin("rexInputText");\n                _this.mGame.plugins.removeGlobalPlugin("rexBBCodeTextPlugin");\n                _this.mGame.plugins.removeGlobalPlugin("rexMoveTo");\n                _this.mGame.plugins.removeScenePlugin("DragonBones");\n                _this.mGame.events.once(Phaser.Core.Events.DESTROY, function () {\n                    _this.mGame = undefined;\n                    if (boo) {\n                        _this.newGame().then(function () {\n                            _this.createManager();\n                            resolve();\n                        });\n                        return;\n                    }\n                    resolve();\n                });\n                _this.mGame.destroy(true);\n            }\n            else {\n                resolve();\n            }\n        });\n    };\n    Render.prototype.getMessage = function (val) {\n        return utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t(val);\n    };\n    Render.prototype.setLocalStorage = function (key, value) {\n        if (this.localStorageManager)\n            this.localStorageManager.setItem(key, value);\n    };\n    Render.prototype.getLocalStorage = function (key) {\n        return this.localStorageManager ? this.localStorageManager.getItem(key) : "";\n    };\n    Render.prototype.removeLocalStorage = function (key) {\n        if (this.localStorageManager)\n            this.localStorageManager.removeItem(key);\n    };\n    Render.prototype.createPanel = function (name, key) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (!_this.uiManager) {\n                reject("uiManager not found");\n                return;\n            }\n            var panel = _this.uiManager.showPanel(name);\n            _this.exportProperty(panel, _this, key).onceReady(function () {\n                resolve(true);\n            });\n        });\n    };\n    Render.prototype.roomstartPlay = function () {\n        if (!this.mSceneManager || !this.mCameraManager)\n            return;\n        var scene = this.mSceneManager.getMainScene();\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        this.mCameraManager.camera = scene.cameras.main;\n    };\n    Render.prototype.drawGrids = function (posObj) {\n        if (!this.displayManager)\n            return;\n        this.displayManager.showGridsDebug(posObj);\n    };\n    Render.prototype.drawAstar_init = function (map, posObj) {\n        if (!this.displayManager)\n            return;\n        this.displayManager.showAstarDebug_init(map, posObj);\n    };\n    Render.prototype.drawAstar_update = function (x, y, val) {\n        if (!this.displayManager)\n            return;\n        this.displayManager.showAstarDebug_update(x, y, val);\n    };\n    Render.prototype.drawAstar_findPath = function (start, tar, points) {\n        if (!this.displayManager)\n            return;\n        this.displayManager.showAstarDebug_findPath(start, tar, points);\n    };\n    Render.prototype.roomReady = function () {\n        if (!this.mSceneManager || !this.mCameraManager)\n            return;\n        var scene = this.mSceneManager.getMainScene();\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        if (scene instanceof _scenes_play_scene__WEBPACK_IMPORTED_MODULE_10__["PlayScene"])\n            scene.onRoomCreated();\n    };\n    Render.prototype.playAnimation = function (id, animation, field, times) {\n        if (!this.mDisplayManager)\n            return;\n        var display = this.mDisplayManager.getDisplay(id);\n        if (display)\n            display.play(animation);\n    };\n    Render.prototype.setCameraScroller = function (actorX, actorY) {\n        // Logger.getInstance().debug("syncCameraScroll");\n        if (!this.mSceneManager || !this.mCameraManager)\n            return;\n        var scene = this.mSceneManager.getMainScene();\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        var sceneScrale = scene.scale;\n        this.mCameraManager.setScroll(actorX * this.scaleRatio - sceneScrale.width / 2, actorY * this.scaleRatio - sceneScrale.height / 2);\n        this.syncCameraScroll();\n    };\n    Render.prototype.createDragonBones = function (id, displayInfo, layer) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.addDragonbonesDisplay(id, displayInfo, layer);\n    };\n    Render.prototype.createUserDragonBones = function (displayInfo, layer) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.addUserDragonbonesDisplay(displayInfo, true, layer);\n    };\n    Render.prototype.createFramesDisplay = function (id, displayInfo, layer) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.addFramesDisplay(id, displayInfo, layer);\n        else\n            utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().debug("no displayManager ====>");\n    };\n    Render.prototype.createTerrainDisplay = function (id, displayInfo, layer) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.addTerrainDisplay(id, displayInfo, layer);\n    };\n    Render.prototype.setModel = function (sprite) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.setModel(sprite);\n    };\n    Render.prototype.updateDirection = function (id, dir) {\n        if (this.mDisplayManager) {\n            var display = this.mDisplayManager.getDisplay(id);\n            display.setDirection(dir);\n        }\n    };\n    Render.prototype.addSkybox = function (scenery) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.addSkybox(scenery);\n    };\n    Render.prototype.removeSkybox = function (id) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.removeSkybox(id);\n    };\n    Render.prototype.showMatterDebug = function (vertices) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.showMatterDebug(vertices);\n    };\n    Render.prototype.hideMatterDebug = function () {\n        if (this.mDisplayManager)\n            this.mDisplayManager.hideMatterDebug();\n    };\n    Render.prototype.drawServerPosition = function (x, y) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.drawServerPosition(x, y);\n    };\n    Render.prototype.changeAlpha = function (id, alpha) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.changeAlpha(id, alpha);\n    };\n    Render.prototype.removeBlockObject = function (id) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.removeDisplay(id);\n    };\n    Render.prototype.setPosition = function (id, x, y, z) {\n        if (!this.mDisplayManager)\n            return;\n        var display = this.mDisplayManager.getDisplay(id);\n        if (display)\n            display.setPosition(x, y, z);\n    };\n    Render.prototype.showBubble = function (id, text, setting) {\n        if (!this.mDisplayManager)\n            return;\n        var display = this.mDisplayManager.getDisplay(id);\n        if (display)\n            display.showBubble(text, setting);\n    };\n    Render.prototype.clearBubble = function (id) {\n        var display = this.mDisplayManager.getDisplay(id);\n        if (display)\n            display.clearBubble();\n    };\n    Render.prototype.startFollow = function (id) {\n        // Logger.getInstance().debug("target ===== startFollow");\n        var display = this.mDisplayManager.getDisplay(id);\n        if (display)\n            this.mCameraManager.startFollow(display);\n    };\n    Render.prototype.stopFollow = function () {\n        if (this.mCameraManager)\n            this.mCameraManager.stopFollow();\n    };\n    Render.prototype.cameraFollow = function (id, effect) {\n        return __awaiter(this, void 0, void 0, function () {\n            var target;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        target = this.mDisplayManager.getDisplay(id);\n                        if (!target) return [3 /*break*/, 4];\n                        if (!(effect === "liner")) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.mCameraManager.pan(target.x, target.y, target.y)];\n                    case 1:\n                        _a.sent();\n                        this.mCameraManager.startFollow(target);\n                        return [3 /*break*/, 3];\n                    case 2:\n                        this.mCameraManager.startFollow(target);\n                        _a.label = 3;\n                    case 3: return [3 /*break*/, 5];\n                    case 4:\n                        this.mCameraManager.stopFollow();\n                        _a.label = 5;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Render.prototype.cameraPan = function (id) {\n        var display = this.mDisplayManager.getDisplay(id);\n        if (display)\n            this.mCameraManager.pan(display.x, display.y, 300);\n    };\n    Render.prototype.updateSkyboxState = function (state) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.updateSkyboxState(state);\n    };\n    Render.prototype.setLayerDepth = function (val) {\n        var scene = this.mSceneManager.getMainScene();\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().fatal("scene does not exist");\n            return;\n        }\n        scene.layerManager.depthSurfaceDirty = val;\n    };\n    Render.prototype.doMove = function (id, moveData) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.displayDoMove(id, moveData);\n    };\n    Render.prototype.showNickname = function (id, name) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.showNickname(id, name);\n    };\n    Render.prototype.showTopDisplay = function (id, state) {\n        if (this.mDisplayManager)\n            this.mDisplayManager.showTopDisplay(id, state);\n    };\n    Render.prototype.showRefernceArea = function (id, area, origin) {\n        var ele = this.mDisplayManager.getDisplay(id);\n        if (!ele)\n            return;\n        ele.showRefernceArea(area, origin);\n    };\n    Render.prototype.hideRefernceArea = function (id) {\n        var ele = this.mDisplayManager.getDisplay(id);\n        if (!ele)\n            return;\n        ele.hideRefernceArea();\n    };\n    Render.prototype.displayAnimationChange = function (data) {\n        var id = data.id;\n        var direction = data.direction;\n        var display = this.mDisplayManager.getDisplay(id);\n        if (display) {\n            display.direction = direction;\n            display.play(data.animation);\n        }\n    };\n    Render.prototype.workerEmitter = function (eventType, data) {\n        this.emitter.emit(eventType, data);\n    };\n    Render.prototype.physicalEmitter = function (eventType, data) {\n        this.emitter.emit(eventType, data);\n    };\n    Render.prototype.mount = function (id, targetID, targetIndex) {\n        this.mDisplayManager.mount(id, targetID, targetIndex);\n    };\n    Render.prototype.unmount = function (id, targetID) {\n        this.mDisplayManager.unmount(id, targetID);\n    };\n    Render.prototype.updateInput = function (val) {\n        this.sceneManager.updateInput(val);\n    };\n    Render.prototype.addEffect = function (target, effectID, display) {\n        this.mDisplayManager.addEffect(target, effectID, display);\n    };\n    Render.prototype.removeEffect = function (effectID) {\n        this.mDisplayManager.removeEffect(effectID);\n    };\n    // private connectReconnect() {\n    //     if (!this.game) return;\n    //     this.createGame();\n    // }\n    Render.prototype.onFullScreenChange = function () {\n        this.resize(this.mGame.scale.gameSize.width, this.mGame.scale.gameSize.height);\n    };\n    Render.prototype.gameCreated = function (keyEvents) {\n        if (this.mCallBack) {\n            this.mCallBack();\n        }\n        if (this.mConfig.game_created) {\n            this.mConfig.game_created();\n        }\n        // if (this.moveStyle === MoveStyle.DIRECTION_MOVE_STYLE || this.moveStyle === 1) {\n        //     if (this.mGame.device.os.desktop) {\n        //         this.mInputManager = new KeyBoardManager(this, keyEvents);\n        //     } else {\n        //         this.mInputManager = new JoyStickManager(this, keyEvents);\n        //     }\n        // } else {\n        //     if (this.mGame.device.os.desktop) {\n        //         this.mInputManager = new KeyBoardManager(this, keyEvents);\n        //     }\n        // }\n        // if (this.mInputManager) this.mInputManager.enable = false;\n        this.mGame.scale.on("enterfullscreen", this.onFullScreenChange, this);\n        this.mGame.scale.on("leavefullscreen", this.onFullScreenChange, this);\n        // this.mGame.scale.on("orientationchange", this.onOrientationChange, this);\n    };\n    Render.prototype.initConfig = function () {\n        if (!this.mConfig.devicePixelRatio) {\n            this.mConfig.devicePixelRatio = window.devicePixelRatio || 1;\n        }\n        if (this.mConfig.width === undefined) {\n            this.mConfig.width = window.innerWidth;\n        }\n        if (this.mConfig.height === undefined) {\n            this.mConfig.height = window.innerHeight;\n        }\n        this.mScaleRatio = Math.ceil(this.mConfig.devicePixelRatio || 1);\n        this.mConfig.scale_ratio = this.mScaleRatio;\n        this.mUIRatio = Math.round(this.mConfig.devicePixelRatio || 1);\n        this.mUIScale = (this.mConfig.width / this.DEFAULT_WIDTH) * (this.mConfig.devicePixelRatio / this.mUIRatio);\n        utils__WEBPACK_IMPORTED_MODULE_3__["Url"].OSD_PATH = this.mConfig.osd;\n        utils__WEBPACK_IMPORTED_MODULE_3__["Url"].RES_PATH = "./resources_v" + _version__WEBPACK_IMPORTED_MODULE_19___default.a + "/";\n        utils__WEBPACK_IMPORTED_MODULE_3__["Url"].RESUI_PATH = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].RES_PATH + "ui/";\n        Object(utils__WEBPACK_IMPORTED_MODULE_3__["initLocales"])(path__WEBPACK_IMPORTED_MODULE_12__["relative"](__dirname, "../" + utils__WEBPACK_IMPORTED_MODULE_3__["Url"].RES_PATH + "/locales/{{lng}}.json"));\n    };\n    Render.prototype.resumeScene = function () {\n        utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().debug("#BlackSceneFromBackground; world.resumeScene(); isPause:" + this.isPause + "; mGame:" + this.mGame);\n        if (!this.isPause) {\n            return;\n        }\n        this.isPause = false;\n        if (this.mGame) {\n            if (this.sceneManager.currentScene)\n                this.sceneManager.currentScene.scene.resume();\n            this.mainPeer.onFocus();\n            // this.mConnection.onFocus();\n            // this.mRoomMamager.onFocus();\n            var pauseScene = this.mGame.scene.getScene(_scenes_game_pause_scene__WEBPACK_IMPORTED_MODULE_17__["GamePauseScene"].name);\n            if (pauseScene) {\n                pauseScene.sleep();\n                this.mGame.scene.stop(_scenes_game_pause_scene__WEBPACK_IMPORTED_MODULE_17__["GamePauseScene"].name);\n            }\n            // if (!this.mConnection.isConnect) {\n            //     if (this.mConfig.connectFail) {\n            //         return this.mConfig.connectFail();\n            //     } else {\n            //         return this.onDisConnected();\n            //     }\n            // }\n        }\n    };\n    Render.prototype.pauseScene = function () {\n        utils__WEBPACK_IMPORTED_MODULE_3__["Logger"].getInstance().debug("#BlackSceneFromBackground; world.pauseScene(); isPause:" + this.isPause + "; mGame:" + this.mGame);\n        if (this.isPause) {\n            return;\n        }\n        this.isPause = true;\n        if (this.mGame) {\n            if (this.sceneManager.currentScene)\n                this.sceneManager.currentScene.scene.pause();\n            this.mainPeer.onBlur();\n            // this.mConnection.onBlur();\n            // this.mRoomMamager.onBlur();\n            if (!this.mGame.scene.getScene(_scenes_game_pause_scene__WEBPACK_IMPORTED_MODULE_17__["GamePauseScene"].name)) {\n                this.mGame.scene.add(_scenes_game_pause_scene__WEBPACK_IMPORTED_MODULE_17__["GamePauseScene"].name, _scenes_game_pause_scene__WEBPACK_IMPORTED_MODULE_17__["GamePauseScene"]);\n            }\n            this.mGame.scene.start(_scenes_game_pause_scene__WEBPACK_IMPORTED_MODULE_17__["GamePauseScene"].name, { render: this });\n        }\n    };\n    Object.defineProperty(Render.prototype, "mainPeer", {\n        get: function () {\n            if (!this.mMainPeer) {\n                throw new Error("can\'t find main worker");\n            }\n            return this.mMainPeer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "gridsDebugger", void 0);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "astarDebugger", void 0);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "sortDebugger", void 0);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "editorModeDebugger", void 0);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "destroyAccount", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "reconnect", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "showLogin", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "hideLogin", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "checkContains", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "showCreateRolePanel", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "updateModel", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "showCreateRole", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "hideCreateRole", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "showPlay", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "updateFPS", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "endFPS", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "hidePlay", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "showPanel", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "hidePanel", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "reload", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "showJoystick", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.boolean])\n    ], Render.prototype, "setInputVisible", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.boolean])\n    ], Render.prototype, "setLoginEnable", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "onShowVerified", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.boolean])\n    ], Render.prototype, "setVerifiedEnable", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "onShowErrorHandler", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "onLoginErrorHanler", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "updateCharacterPackage", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "displayReady", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "soundChangeRoom", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "playSound", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "onConnected", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "onDisConnected", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "onConnectError", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "connectFail", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "updateUIState", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "setMoveStyle", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.unit8array])\n    ], Render.prototype, "onEnterRoom", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "scaleTween", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "getRenderPosition", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "createAccount", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "refreshAccount", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "getAccount", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "setAccount", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "getWorldView", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "onClockReady", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "showAlert", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "showLoading", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "updateProgress", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "hideLoading", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "onForceOfflineHandler", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "loadStart", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "roomPause", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "roomResume", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "removeScene", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "showCreatePanelError", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "createSetNickName", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "renderReconnect", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "createAnotherGame", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "setCamerasBounds", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "setCamerasScroll", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "setInteractive", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "disableInteractive", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "fadeIn", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "fadeOut", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "fadeAlpha", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "getCurTime", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "createGameCallBack", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "addFillEffect", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "clearRoom", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.boolean])\n    ], Render.prototype, "clearGame", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "getMessage", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "setLocalStorage", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "getLocalStorage", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "removeLocalStorage", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "createPanel", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "roomstartPlay", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "drawGrids", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "drawAstar_init", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "drawAstar_update", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "drawAstar_findPath", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "roomReady", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "playAnimation", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "setCameraScroller", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "createDragonBones", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "createUserDragonBones", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "createFramesDisplay", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "createTerrainDisplay", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "setModel", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "updateDirection", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "addSkybox", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "removeSkybox", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "showMatterDebug", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "hideMatterDebug", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "drawServerPosition", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "changeAlpha", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "removeBlockObject", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "setPosition", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "showBubble", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "clearBubble", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "startFollow", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "stopFollow", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "cameraFollow", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "cameraPan", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "updateSkyboxState", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.boolean])\n    ], Render.prototype, "setLayerDepth", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "doMove", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "showNickname", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "showTopDisplay", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "showRefernceArea", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "hideRefernceArea", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "displayAnimationChange", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "workerEmitter", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.str])\n    ], Render.prototype, "physicalEmitter", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "mount", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num, webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "unmount", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])([webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["webworker_rpc"].ParamType.num])\n    ], Render.prototype, "updateInput", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "addEffect", null);\n    __decorate([\n        Object(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["Export"])()\n    ], Render.prototype, "removeEffect", null);\n    return Render;\n}(webworker_rpc__WEBPACK_IMPORTED_MODULE_2__["RPCPeer"]));\n\n\n/* WEBPACK VAR INJECTION */}.call(this, "/"))\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/render.ts?')},"./src/render/scenes/basic.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BasicScene", function() { return BasicScene; });\n/* harmony import */ var baseRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! baseRender */ "./src/base/render/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar BasicScene = /** @class */ (function (_super) {\n    __extends(BasicScene, _super);\n    function BasicScene(config) {\n        var _this = _super.call(this, config) || this;\n        _this.initialize = false;\n        _this.layerManager = new baseRender__WEBPACK_IMPORTED_MODULE_0__["LayerManager"]();\n        return _this;\n    }\n    BasicScene.prototype.init = function (data) {\n        if (data) {\n            this.render = data.render;\n        }\n    };\n    BasicScene.prototype.preload = function () {\n        var str = utils__WEBPACK_IMPORTED_MODULE_1__["StringUtils"].format(" {0}", ["0%"]);\n        if (this.render)\n            this.render.showLoading({ "text": str });\n    };\n    BasicScene.prototype.setScale = function (zoom) {\n        if (this.layerManager)\n            this.layerManager.setScale(zoom);\n    };\n    BasicScene.prototype.updateProgress = function (data) {\n    };\n    BasicScene.prototype.create = function () {\n        this.initialize = true;\n        this.render.emitter.emit("sceneCreated");\n    };\n    BasicScene.prototype.sceneInitialize = function () {\n        return this.initialize;\n    };\n    BasicScene.prototype.setViewPort = function (x, y, width, height) {\n        this.cameras.main.setViewport(x, y, width, height);\n    };\n    BasicScene.prototype.wake = function (data) {\n        this.scene.wake(undefined, data);\n    };\n    BasicScene.prototype.sleep = function () {\n        this.scene.sleep();\n    };\n    BasicScene.prototype.stop = function () {\n        this.scene.stop();\n    };\n    return BasicScene;\n}(Phaser.Scene));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/basic.scene.ts?')},"./src/render/scenes/create.role.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CreateRoleScene", function() { return CreateRoleScene; });\n/* harmony import */ var _basic_scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basic.scene */ "./src/render/scenes/basic.scene.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar CreateRoleScene = /** @class */ (function (_super) {\n    __extends(CreateRoleScene, _super);\n    function CreateRoleScene() {\n        return _super.call(this, { key: structure__WEBPACK_IMPORTED_MODULE_1__["SceneName"].CREATE_ROLE_SCENE }) || this;\n    }\n    CreateRoleScene.prototype.init = function (data) {\n        _super.prototype.init.call(this, data);\n        this.params = data.params;\n    };\n    CreateRoleScene.prototype.create = function () {\n        if (this.render) {\n            var uimanager = this.render.uiManager;\n            uimanager.setScene(this);\n            utils__WEBPACK_IMPORTED_MODULE_2__["Logger"].getInstance().debug("createrole===scene");\n            // uimanager.showPanel(ModuleName.CREATEROLE_NAME, this.params);\n            // this.render.hideLoading();\n        }\n        _super.prototype.create.call(this);\n    };\n    CreateRoleScene.prototype.stop = function () {\n        if (this.render) {\n            this.render.showMediator("CreateRoleScene", false);\n        }\n        _super.prototype.stop.call(this);\n    };\n    return CreateRoleScene;\n}(_basic_scene__WEBPACK_IMPORTED_MODULE_0__["BasicScene"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/create.role.scene.ts?')},"./src/render/scenes/decorate.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DecorateScene", function() { return DecorateScene; });\n/* harmony import */ var _play_scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./play.scene */ "./src/render/scenes/play.scene.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _input_decorate_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../input/decorate.manager */ "./src/render/input/decorate.manager.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar DecorateScene = /** @class */ (function (_super) {\n    __extends(DecorateScene, _super);\n    function DecorateScene(config) {\n        return _super.call(this, config || { key: structure__WEBPACK_IMPORTED_MODULE_1__["SceneName"].DECORATE_SCENE }) || this;\n    }\n    // public create() {\n    //     super.create();\n    //     this.onLoadCompleteHandler();\n    // }\n    // protected onLoadCompleteHandler() {\n    //     Logger.getInstance().log("decorateload complete");\n    //     this.load.off(Phaser.Loader.Events.COMPLETE, this.onLoadCompleteHandler, this);\n    // }\n    DecorateScene.prototype.initListener = function () {\n        this.input.on("pointerup", this.onPointerUpHandler, this);\n        this.input.on("pointerdown", this.onPointerDownHandler, this);\n        this.input.on("gameobjectdown", this.onGameobjectDownHandler, this);\n        // this.load.on(Phaser.Loader.Events.COMPLETE, this.onLoadCompleteHandler, this);\n    };\n    DecorateScene.prototype.initInput = function () {\n        this.mDecorateManager = new _input_decorate_manager__WEBPACK_IMPORTED_MODULE_2__["DecorateManager"](this, this.render);\n    };\n    DecorateScene.prototype.onGameobjectDownHandler = function (pointer, gameobject) {\n        if (!gameobject) {\n            return;\n        }\n        var id = gameobject.getData("id");\n        //  const decorate = this.render.mainPeer[ModuleName.PICADECORATE_NAME];\n        if (!id) {\n            return;\n        }\n        this.mDecorateManager.setElement(id);\n        //  decorate.setElement(id);\n    };\n    DecorateScene.prototype.onPointerUpHandler = function (pointer) {\n        _super.prototype.onPointerUpHandler.call(this, pointer);\n        this.mDecorateManager.selecting = false;\n    };\n    DecorateScene.prototype.onGameobjectUpHandler = function (pointer) {\n        this.removePointerMoveHandler();\n        this.mDecorateManager.selecting = false;\n    };\n    DecorateScene.prototype.onPointerMoveHandler = function (pointer) {\n        var isSelecting = this.mDecorateManager.isDragging();\n        if (!isSelecting) {\n            this.render.camerasManager.offsetScroll(pointer.prevPosition.x - pointer.position.x, pointer.prevPosition.y - pointer.position.y);\n            return;\n        }\n        if (pointer.downX === pointer.x && pointer.downY === pointer.y) {\n            return;\n        }\n        this.mDecorateManager.moveElement(pointer);\n    };\n    return DecorateScene;\n}(_play_scene__WEBPACK_IMPORTED_MODULE_0__["PlayScene"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/decorate.scene.ts?')},"./src/render/scenes/game.pause.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GamePauseScene", function() { return GamePauseScene; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _basic_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./basic.scene */ "./src/render/scenes/basic.scene.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar GamePauseScene = /** @class */ (function (_super) {\n    __extends(GamePauseScene, _super);\n    function GamePauseScene() {\n        return _super.call(this, { key: GamePauseScene.name }) || this;\n    }\n    GamePauseScene.prototype.preload = function () {\n        this.load.image("gamepause.png", utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("gamepause.png"));\n    };\n    GamePauseScene.prototype.init = function (data) {\n        _super.prototype.init.call(this, data);\n        this.mRender = data.render;\n    };\n    GamePauseScene.prototype.create = function () {\n        _super.prototype.create.call(this);\n        var width = this.scale.gameSize.width;\n        var height = this.scale.gameSize.height;\n        this.bg = this.add.graphics();\n        this.bg.fillStyle(0, .8);\n        this.bg.fillRect(0, 0, width, height);\n        this.pauseImg = this.add.image(width >> 1, height >> 1, "gamepause.png");\n        this.tipTF = this.add.text(width - 240 >> 1, height - 50, "", { font: "30px Tahoma" });\n        this.scale.on("resize", this.checkSize, this);\n        this.checkSize(new utils__WEBPACK_IMPORTED_MODULE_0__["Size"](width, height));\n        this.input.on("pointerdown", this.downHandler, this);\n    };\n    GamePauseScene.prototype.awake = function () {\n        this.scale.on("resize", this.checkSize, this);\n        this.input.on("pointerdown", this.downHandler, this);\n        this.scene.wake();\n    };\n    GamePauseScene.prototype.sleep = function () {\n        this.scale.off("resize", this.checkSize, this);\n        this.input.off("pointerdown", this.downHandler, this);\n        this.scene.sleep();\n    };\n    GamePauseScene.prototype.getKey = function () {\n        return this.sys.config.key;\n    };\n    GamePauseScene.prototype.downHandler = function () {\n        this.mRender.onFocus();\n    };\n    GamePauseScene.prototype.checkSize = function (size) {\n        var width = size.width;\n        var height = size.height;\n        this.bg.clear();\n        this.bg.fillStyle(0, .8);\n        this.bg.fillRect(0, 0, width, height);\n        this.pauseImg.scaleX = this.pauseImg.scaleY = this.mRender.uiScale * .7;\n        this.pauseImg.x = width >> 1;\n        this.pauseImg.y = height >> 1;\n        this.tipTF.scaleX = this.tipTF.scaleY = this.mRender.uiScale;\n        this.tipTF.x = width - 280 * this.mRender.uiScale >> 1;\n        this.tipTF.y = height - 50 * this.mRender.uiScale;\n    };\n    return GamePauseScene;\n}(_basic_scene__WEBPACK_IMPORTED_MODULE_1__["BasicScene"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/game.pause.scene.ts?')},"./src/render/scenes/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _basic_scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basic.scene */ "./src/render/scenes/basic.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BasicScene", function() { return _basic_scene__WEBPACK_IMPORTED_MODULE_0__["BasicScene"]; });\n\n/* harmony import */ var _create_role_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./create.role.scene */ "./src/render/scenes/create.role.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CreateRoleScene", function() { return _create_role_scene__WEBPACK_IMPORTED_MODULE_1__["CreateRoleScene"]; });\n\n/* harmony import */ var _game_pause_scene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game.pause.scene */ "./src/render/scenes/game.pause.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GamePauseScene", function() { return _game_pause_scene__WEBPACK_IMPORTED_MODULE_2__["GamePauseScene"]; });\n\n/* harmony import */ var _loading_scene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./loading.scene */ "./src/render/scenes/loading.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoadingScene", function() { return _loading_scene__WEBPACK_IMPORTED_MODULE_3__["LoadingScene"]; });\n\n/* harmony import */ var _login_account_scene__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./login.account.scene */ "./src/render/scenes/login.account.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoginAccountScene", function() { return _login_account_scene__WEBPACK_IMPORTED_MODULE_4__["LoginAccountScene"]; });\n\n/* harmony import */ var _login_scene__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./login.scene */ "./src/render/scenes/login.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoginScene", function() { return _login_scene__WEBPACK_IMPORTED_MODULE_5__["LoginScene"]; });\n\n/* harmony import */ var _main_ui_scene__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./main.ui.scene */ "./src/render/scenes/main.ui.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MainUIScene", function() { return _main_ui_scene__WEBPACK_IMPORTED_MODULE_6__["MainUIScene"]; });\n\n/* harmony import */ var _play_scene__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./play.scene */ "./src/render/scenes/play.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlayScene", function() { return _play_scene__WEBPACK_IMPORTED_MODULE_7__["PlayScene"]; });\n\n/* harmony import */ var _room_scene__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./room.scene */ "./src/render/scenes/room.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RoomScene", function() { return _room_scene__WEBPACK_IMPORTED_MODULE_8__["RoomScene"]; });\n\n/* harmony import */ var _scene_manager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./scene.manager */ "./src/render/scenes/scene.manager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SceneManager", function() { return _scene_manager__WEBPACK_IMPORTED_MODULE_9__["SceneManager"]; });\n\n/* harmony import */ var _select_role_scene__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./select.role.scene */ "./src/render/scenes/select.role.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelectRoleScene", function() { return _select_role_scene__WEBPACK_IMPORTED_MODULE_10__["SelectRoleScene"]; });\n\n/* harmony import */ var _sky_box_scene__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./sky.box.scene */ "./src/render/scenes/sky.box.scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SkyBoxScene", function() { return _sky_box_scene__WEBPACK_IMPORTED_MODULE_11__["SkyBoxScene"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/index.ts?')},"./src/render/scenes/loading.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoadingScene", function() { return LoadingScene; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! . */ "./src/render/scenes/index.ts");\n/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../version */ "./version.js");\n/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_version__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../structure */ "./src/structure/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\nvar LoadingScene = /** @class */ (function (_super) {\n    __extends(LoadingScene, _super);\n    function LoadingScene() {\n        return _super.call(this, { key: _structure__WEBPACK_IMPORTED_MODULE_3__["SceneName"].LOADING_SCENE }) || this;\n    }\n    LoadingScene.prototype.preload = function () {\n        // atlaswebglcanvasspritesheetcanvas\n        this.load.image("avatar_placeholder", utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("dragonbones/avatar.png"));\n        this.load.atlas("curtain", utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getUIRes(this.dpr, "loading/curtain.png"), utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getUIRes(this.dpr, "loading/curtain.json"));\n        this.load.atlas("loading", utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("ui/loading/loading.png"), utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("ui/loading/loading.json"));\n        this.load.script("webfont", utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("scripts/webfont/1.6.26/webfont.js"));\n    };\n    LoadingScene.prototype.init = function (data) {\n        _super.prototype.init.call(this, data);\n        this.createFont();\n        this.dpr = data.dpr || 2;\n        this.mRequestCom = false;\n        this.mCallback = data.callBack;\n        this.tipsText = data.text || "";\n    };\n    LoadingScene.prototype.create = function () {\n        _super.prototype.create.call(this);\n        try {\n            WebFont.load({\n                custom: {\n                    // families: ["Source Han Sans", "tt0173m_", "tt0503m_"]\n                    families: ["Source Han Sans", "tt0173m_", "tt0503m_", "t04B25"]\n                },\n            });\n        }\n        catch (error) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().warn("webfont failed to load");\n        }\n        var width = this.scale.gameSize.width;\n        var height = this.scale.gameSize.height;\n        // jsonframesanims\n        this.anims.create({\n            key: "loading_anis",\n            frames: this.anims.generateFrameNames("loading", { prefix: "loading_", start: 1, end: 3, zeroPad: 1, suffix: ".png" }),\n            frameRate: 5,\n            repeat: -1\n        });\n        this.curtain = new Curtain(this, this.dpr);\n        this.mask = this.add.graphics(undefined);\n        this.mask.fillStyle(0);\n        this.mask.fillRect(0, 0, width, height);\n        var dpr = this.render.uiRatio;\n        this.bg = this.add.sprite(width * 0.5, height * 0.5, "loading").setScale(this.render.uiScale * dpr * 2);\n        this.bg.play("loading_anis");\n        this.progressText = this.add.text(this.bg.x, this.bg.y + this.bg.displayHeight * 0.5, this.tipsText, {\n            fontSize: 12 * dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_0__["Font"].DEFULT_FONT\n        }).setOrigin(0.5);\n        this.debug = this.add.text(width - 4 * dpr, height - 4 * dpr, "v" + _version__WEBPACK_IMPORTED_MODULE_2___default.a + " " + this.getDebug(), {\n            fontSize: 12 * dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_0__["Font"].DEFULT_FONT\n        }).setOrigin(1);\n        // if (this.mCallback) {\n        //   this.mCallback.call(this, this);\n        //   this.mCallback = undefined;\n        // }\n        // this.scale.on("resize", this.checkSize, this);\n    };\n    LoadingScene.prototype.show = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.wake();\n                if (!this.curtain) {\n                    return [2 /*return*/, Promise.resolve()];\n                }\n                this.displayVisible(false);\n                return [2 /*return*/, this.curtain.open()];\n            });\n        });\n    };\n    LoadingScene.prototype.close = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (!this.curtain) {\n                    return [2 /*return*/];\n                }\n                this.displayVisible(false);\n                return [2 /*return*/, this.curtain.close()];\n            });\n        });\n    };\n    LoadingScene.prototype.updateProgress = function (text) {\n        if (!text)\n            return;\n        // load\n        this.tipsText = text;\n        if (text && this.progressText) {\n            if (this.progressText.active)\n                this.progressText.setText(text);\n        }\n    };\n    LoadingScene.prototype.wake = function (data) {\n        var _this = this;\n        if (!this.scene || !this.scene.settings) {\n            return;\n        }\n        if (this.curtain) {\n            this.displayVisible(true);\n            this.curtain.open().then(function () {\n                // this.displayVisible(true);\n                _this.scene.wake();\n            }).catch(function (error) {\n                utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug(error);\n            });\n            // this.scale.on("resize", this.checkSize, this);\n            this.scene.bringToTop(_structure__WEBPACK_IMPORTED_MODULE_3__["SceneName"].LOADING_SCENE);\n            _super.prototype.wake.call(this, data);\n        }\n        if (!data) {\n            return;\n        }\n        // load\n        this.tipsText = data.text;\n        utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug("loadState:----", data.text);\n        if (data.text && this.progressText) {\n            if (this.progressText.active)\n                this.progressText.setText(data.text);\n        }\n    };\n    LoadingScene.prototype.sleep = function () {\n        var _this = this;\n        if (this.progressText) {\n            if (this.progressText.active)\n                this.progressText.setText("");\n        }\n        if (!this.scene || !this.scene.settings) {\n            return;\n        }\n        // if (!this.scene.settings.active) {\n        //   return;\n        // }\n        if (this.curtain) {\n            this.displayVisible(false);\n            this.curtain.close().then(function () {\n                // this.displayVisible(true);\n                // this.render.hideLoading();\n                _this.scene.sleep();\n            });\n        }\n        else {\n            this.displayVisible(true);\n            this.scene.sleep();\n        }\n    };\n    LoadingScene.prototype.appendProgress = function (text) {\n        if (this.progressText) {\n            // let str = this.progressText.text;\n            // str += `${text}\\n`;\n            this.progressText.setText(text);\n        }\n    };\n    LoadingScene.prototype.getKey = function () {\n        return this.sys.config.key;\n    };\n    LoadingScene.prototype.getDebug = function () {\n        var renderType = "WebGL";\n        var config = this.game.config;\n        if (config.renderType === Phaser.CANVAS) {\n            renderType = "Canvas";\n        }\n        else if (config.renderType === Phaser.HEADLESS) {\n            renderType = "Headless";\n        }\n        var audioConfig = config.audio;\n        var deviceAudio = this.game.device.audio;\n        var audioType;\n        if (deviceAudio.webAudio && !(audioConfig && audioConfig.disableWebAudio)) {\n            audioType = "Web Audio";\n        }\n        else if ((audioConfig && audioConfig.noAudio) || (!deviceAudio.webAudio && !deviceAudio.audioData)) {\n            audioType = "No Audio";\n        }\n        else {\n            audioType = "HTML5 Audio";\n        }\n        return "(" + renderType + " | " + audioType + ")";\n    };\n    LoadingScene.prototype.displayVisible = function (val) {\n        if (this.bg) {\n            this.bg.visible = val;\n            this.debug.visible = val;\n            this.mask.visible = val;\n        }\n    };\n    LoadingScene.prototype.createFont = function () {\n        var element = document.createElement("style");\n        document.head.appendChild(element);\n        var sheet = element.sheet;\n        var font = ["en/tt0173m_.ttf", "en/tt0503m_.ttf", "04B.ttf"];\n        // const styles = "@font-face { font-family: \'Source Han Sans\'; src: url(\'./resources/fonts/otf/SourceHanSansTC-Regular.otf\') format(\'opentype\');font-display:swap; }\\n";\n        var styles2 = "@font-face { font-family: \'tt0173m_\'; src: url(\'" + utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("fonts/en/tt0173m_.ttf") + "\') format(\'truetype\');font-display:swap }\\n";\n        var styles3 = "@font-face { font-family: \'tt0503m_\'; src: url(\'" + utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("fonts/en/tt0503m_.ttf") + "\') format(\'truetype\'); font-display:swap}\\n";\n        var styles4 = "@font-face { font-family: \'t04B25\'; src: url(\'" + utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("fonts/04B.ttf") + "\') format(\'truetype\'); font-display:swap}";\n        // sheet.insertRule(styles, 0);\n        sheet.insertRule(styles2, 0);\n        sheet.insertRule(styles3, 0);\n        sheet.insertRule(styles4, 0);\n    };\n    return LoadingScene;\n}(___WEBPACK_IMPORTED_MODULE_1__["BasicScene"]));\n\nvar Curtain = /** @class */ (function () {\n    function Curtain(scene, dpr) {\n        this.scene = scene;\n        this.dpr = dpr;\n        this.key = "curtain";\n        this.upDisplay = this.scene.add.image(0, 0, this.key, "up.png").setOrigin(0).setVisible(false).setScale(this.dpr);\n        this.downDisplay = this.scene.add.image(0, 0, this.key, "down.png").setOrigin(0, 1).setVisible(false).setScale(this.dpr);\n    }\n    Curtain.prototype.open = function () {\n        var _this = this;\n        this.upDisplay.visible = true;\n        this.downDisplay.visible = true;\n        return new Promise(function (resolve, reject) {\n            if (!_this.scene.cameras.main) {\n                resolve();\n                return;\n            }\n            if (_this.upTween || _this.downTween) {\n                reject();\n                return;\n            }\n            var height = _this.scene.cameras.main.height;\n            _this.upDisplay.y = -_this.upDisplay.displayHeight;\n            _this.downDisplay.y = height + _this.downDisplay.displayHeight;\n            _this.upTween = _this.scene.add.tween({\n                targets: _this.upDisplay,\n                props: { y: 0 },\n                duration: 1000\n            });\n            _this.downTween = _this.scene.add.tween({\n                targets: _this.downDisplay,\n                props: { y: height },\n                duration: 1000,\n                onComplete: function () {\n                    // this.upDisplay.visible = false;\n                    // this.downDisplay.visible = false;\n                    _this.clearTween();\n                    resolve();\n                }\n            });\n        });\n    };\n    Curtain.prototype.close = function () {\n        var _this = this;\n        this.downDisplay.visible = true;\n        this.upDisplay.visible = true;\n        return new Promise(function (resolve, reject) {\n            if (!_this.scene.cameras.main) {\n                resolve(null);\n                return;\n            }\n            var height = _this.scene.cameras.main.height;\n            _this.upDisplay.y = 0;\n            _this.downDisplay.y = height;\n            _this.clearTween();\n            _this.upTween = _this.scene.add.tween({\n                targets: _this.upDisplay,\n                props: { y: -_this.upDisplay.displayHeight },\n                duration: 1000\n            });\n            _this.downTween = _this.scene.add.tween({\n                targets: _this.downDisplay,\n                props: { y: height + _this.downDisplay.displayHeight },\n                duration: 1000,\n                onComplete: function () {\n                    // this.downDisplay.visible = false;\n                    // this.upDisplay.visible = false;\n                    _this.clearTween();\n                    resolve();\n                }\n            });\n        });\n    };\n    Curtain.prototype.destroy = function () {\n    };\n    Curtain.prototype.clearTween = function () {\n        if (this.upTween) {\n            this.upTween.stop();\n            this.upTween = null;\n        }\n        if (this.downTween) {\n            this.downTween.stop();\n            this.downTween = null;\n        }\n    };\n    return Curtain;\n}());\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/loading.scene.ts?')},"./src/render/scenes/login.account.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoginAccountScene", function() { return LoginAccountScene; });\n/* harmony import */ var _basic_scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basic.scene */ "./src/render/scenes/basic.scene.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar LoginAccountScene = /** @class */ (function (_super) {\n    __extends(LoginAccountScene, _super);\n    function LoginAccountScene() {\n        return _super.call(this, { key: LoginAccountScene.name }) || this;\n    }\n    LoginAccountScene.prototype.preload = function () {\n        // atlaswebglcanvasspritesheetcanvas\n        // this.load.image("loading_bg", Url.getRes(""))\n        var dpr = 2;\n        if (this.mWorld) {\n            dpr = this.mWorld.uiRatio || 2;\n        }\n        this.load.image("avatar_placeholder", utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes("dragonbones/avatar.png"));\n        this.load.atlas("curtain", utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getUIRes(dpr, "loading/curtain.png"), utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getUIRes(dpr, "loading/curtain.json"));\n        this.load.atlas("loading", utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes("ui/loading/loading.png"), utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes("ui/loading/loading.json"));\n        // this.load.atlas("grass", Url.getUIRes(dpr, "loading/grass.png"), Url.getUIRes(dpr, "loading/grass.json"));\n        this.load.script("webfont", "./resources/scripts/webfont/1.6.26/webfont.js");\n        // this.load.spritesheet("rabbit00.png", "./resources/rabbit00.png", { frameWidth: 150, frameHeight: 150 });\n    };\n    LoginAccountScene.prototype.init = function (data) {\n        _super.prototype.init.call(this, data);\n        this.createFont();\n        this.mWorld = data.world;\n        this.mCallback = data.callBack;\n    };\n    LoginAccountScene.prototype.create = function () {\n        var _this = this;\n        _super.prototype.create.call(this);\n        try {\n            WebFont.load({\n                custom: {\n                    // families: ["Source Han Sans", "tt0173m_", "tt0503m_"]\n                    families: ["Source Han Sans", "tt0173m_", "tt0503m_", "t04B25"]\n                },\n            });\n        }\n        catch (error) {\n            utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().warn("webfont failed to load");\n        }\n        var width = this.scale.gameSize.width;\n        var height = this.scale.gameSize.height;\n        // jsonframesanims\n        this.anims.create({\n            key: "loading_anis",\n            frames: this.anims.generateFrameNames("loading", { prefix: "loading_", start: 1, end: 3, zeroPad: 1, suffix: ".png" }),\n            frameRate: 5,\n            repeat: -1\n        });\n        var dpr = this.mWorld.uiRatio;\n        this.bg = this.add.sprite(width * 0.5, height * 0.5, "loading").setScale(this.mWorld.uiScale * dpr * 2);\n        this.bg.play("loading_anis");\n        this.checkSize(new utils__WEBPACK_IMPORTED_MODULE_1__["Size"](width, height));\n        this.scale.on("resize", this.checkSize, this);\n        var bgg = this.add.graphics();\n        bgg.fillStyle(0xffcc00, .8);\n        bgg.fillRect(0, 0, 100, 50);\n        bgg.setInteractive(new Phaser.Geom.Rectangle(0, 0, 100, 50), Phaser.Geom.Rectangle.Contains);\n        bgg.x = 200;\n        bgg.y = 300;\n        bgg.on("pointerdown", function () {\n            if (_this.mCallback) {\n                _this.mCallback.call(_this, _this);\n                _this.mCallback = undefined;\n            }\n        }, this);\n    };\n    LoginAccountScene.prototype.getKey = function () {\n        return this.sys.config.key;\n    };\n    LoginAccountScene.prototype.checkSize = function (size) {\n    };\n    LoginAccountScene.prototype.createFont = function () {\n        var element = document.createElement("style");\n        document.head.appendChild(element);\n        var sheet = element.sheet;\n        // const styles = "@font-face { font-family: \'Source Han Sans\'; src: url(\'./resources/fonts/otf/SourceHanSansTC-Regular.otf\') format(\'opentype\');font-display:swap; }\\n";\n        var styles2 = "@font-face { font-family: \'tt0173m_\'; src: url(\'./resources/fonts/en/tt0173m_.ttf\') format(\'truetype\');font-display:swap }\\n";\n        var styles3 = "@font-face { font-family: \'tt0503m_\'; src: url(\'./resources/fonts/en/tt0503m_.ttf\') format(\'truetype\'); font-display:swap}\\n";\n        var styles4 = "@font-face { font-family: \'t04B25\'; src: url(\'./resources/fonts/04B.ttf\') format(\'truetype\'); font-display:swap}";\n        // sheet.insertRule(styles, 0);\n        sheet.insertRule(styles2, 0);\n        sheet.insertRule(styles3, 0);\n        sheet.insertRule(styles4, 0);\n    };\n    return LoginAccountScene;\n}(_basic_scene__WEBPACK_IMPORTED_MODULE_0__["BasicScene"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/login.account.scene.ts?')},"./src/render/scenes/login.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoginScene", function() { return LoginScene; });\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _basic_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./basic.scene */ "./src/render/scenes/basic.scene.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n//  Phaser.Scene\nvar LoginScene = /** @class */ (function (_super) {\n    __extends(LoginScene, _super);\n    function LoginScene() {\n        return _super.call(this, { key: structure__WEBPACK_IMPORTED_MODULE_0__["SceneName"].LOGIN_SCENE }) || this;\n    }\n    LoginScene.prototype.preload = function () {\n    };\n    LoginScene.prototype.create = function () {\n        _super.prototype.create.call(this);\n        if (this.render) {\n            this.render.showMediator("Login", true);\n            var uimanager = this.render.uiManager;\n            uimanager.setScene(this);\n            this.render.hideLoading();\n            // uimanager.showPanel(ModuleName.LOGIN_NAME);\n        }\n    };\n    LoginScene.prototype.init = function (data) {\n        _super.prototype.init.call(this, data);\n        if (data) {\n            this.render = data;\n        }\n    };\n    LoginScene.prototype.stop = function () {\n        if (this.render) {\n            this.render.showMediator("Login", false);\n        }\n        _super.prototype.stop.call(this);\n    };\n    LoginScene.prototype.sleep = function () {\n        if (this.render) {\n            this.render.showMediator("Login", false);\n        }\n    };\n    return LoginScene;\n}(_basic_scene__WEBPACK_IMPORTED_MODULE_1__["BasicScene"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/login.scene.ts?')},"./src/render/scenes/main.ui.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MainUIScene", function() { return MainUIScene; });\n/* harmony import */ var _basic_scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basic.scene */ "./src/render/scenes/basic.scene.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var baseRender__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! baseRender */ "./src/base/render/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar MainUIScene = /** @class */ (function (_super) {\n    __extends(MainUIScene, _super);\n    function MainUIScene() {\n        var _this = _super.call(this, { key: structure__WEBPACK_IMPORTED_MODULE_2__["SceneName"].MAINUI_SCENE }) || this;\n        _this.timeOutID = 0;\n        _this.timeOutCancelMap = {};\n        _this.timeOutCallerList = [];\n        _this.timeOutTimeMap = {};\n        return _this;\n    }\n    MainUIScene.prototype.preload = function () {\n    };\n    MainUIScene.prototype.init = function (data) {\n        _super.prototype.init.call(this, data);\n        if (this.render) {\n            this.render.uiManager.setScene(null);\n        }\n    };\n    MainUIScene.prototype.create = function () {\n        var width = this.cameras.main.width;\n        this.fps = this.add.text(width * 0.5, 10, "", { style: { color: "#64DD17", } });\n        this.fps.setStroke("0x0", 1);\n        this.fps.setFontFamily(utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT);\n        this.fps.setFontSize(20 * window.devicePixelRatio);\n        this.fps.setDepth(1000);\n        this.sizeTF = this.add.text(10, 50, "", { style: { color: "#64dd17" }, wordWrap: { width: 800, useAdvancedWrap: true } });\n        this.sizeTF.setFontSize(20 * window.devicePixelRatio);\n        this.sizeTF.setFontFamily(utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT);\n        this.sizeTF.setStroke("#0", 3);\n        // if (world.game.device.os.desktop) {\n        // } else {\n        //   if (world.inputManager) {\n        //     world.inputManager.setScene(this);\n        //   }\n        // }\n        this.render.uiManager.setScene(this);\n        this.render.initUI();\n        // this.checkSize(this.mRoom.world.getSize());\n        // this.mRoom.world.game.scale.on("orientationchange", this.checkOriention, this);\n        // this.scale.on("resize", this.checkSize, this);\n        // set layers\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_3__["BaseLayer"], MainUIScene.LAYER_UI, 1);\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_3__["BaseLayer"], MainUIScene.LAYER_DIALOG, 2);\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_3__["BaseLayer"], MainUIScene.LAYER_TOOLTIPS, 3);\n        _super.prototype.create.call(this);\n    };\n    MainUIScene.prototype.setTimeout = function (caller, time) {\n        var begin = Date.now();\n        this.timeOutCallerList[++this.timeOutID] = caller;\n        this.timeOutTimeMap[this.timeOutID] = { now: begin, delay: time };\n        return this.timeOutID;\n    };\n    MainUIScene.prototype.clearTimeout = function (id) {\n        this.timeOutCancelMap[id] = true;\n    };\n    MainUIScene.prototype.updateFPS = function () {\n        if (this.fps)\n            this.fps.setText(this.game.loop.actualFps.toFixed());\n    };\n    // public update(time: number, delta: number) {\n    //   this.fps.setText(this.game.loop.actualFps.toFixed());\n    //   // const orientation: string = this.mRoom.world.getSize().width > this.mRoom.world.getSize().height ? "LANDSCAPE" : "PORTRAIT";\n    //   // this.sizeTF.text = "width:" + this.mRoom.world.getSize().width +\n    //   //   "\\n" + "height:" + this.mRoom.world.getSize().height + `\\npixelRatio: ${window.devicePixelRatio} \\nscene Scale: ${this.mRoom.world.scaleRatio} \\nuiscale${Math.round(this.mRoom.world.scaleRatio)}`;\n    // }\n    MainUIScene.prototype.getKey = function () {\n        return this.sys.config.key;\n    };\n    // private checkOriention(orientation) {\n    //   this.sizeTF.text = "width:" + this.mRoom.world.getSize().width + "\\n" + "height:" + this.mRoom.world.getSize().height + "\\n" + "orientation:" + orientation + "\\n" + "orientationChange:" + orientation;\n    // }\n    MainUIScene.prototype.checkSize = function (size) {\n        var width = size.width;\n        var height = size.height;\n        var world = this.render;\n        // const gameSize = world.getSize();\n        // this.sizeTF.text = `CSS size: ${world.getConfig().width} ${world.getConfig().height}\n        // Game size: ${gameSize.width.toFixed(2)} ${gameSize.height.toFixed(2)}\n        // deviceRatio: ${window.devicePixelRatio}\n        // scene ratio: ${world.scaleRatio}\n        // ui ratio: ${world.uiRatio}\n        // ui scale: ${world.uiScale.toFixed(5)}\n        // `;\n        //  this.sizeTF.text = "width:" + size.width + ";height:" + size.height;\n    };\n    MainUIScene.LAYER_UI = "uiLayer";\n    MainUIScene.LAYER_DIALOG = "dialogLayer";\n    MainUIScene.LAYER_TOOLTIPS = "toolTipsLyaer";\n    return MainUIScene;\n}(_basic_scene__WEBPACK_IMPORTED_MODULE_0__["BasicScene"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/main.ui.scene.ts?')},"./src/render/scenes/play.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlayScene", function() { return PlayScene; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _cameras_play_camera__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../cameras/play.camera */ "./src/render/cameras/play.camera.ts");\n/* harmony import */ var baseRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! baseRender */ "./src/base/render/index.ts");\n/* harmony import */ var _main_ui_scene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./main.ui.scene */ "./src/render/scenes/main.ui.scene.ts");\n/* harmony import */ var _room_scene__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./room.scene */ "./src/render/scenes/room.scene.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _input_motion_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../input/motion.manager */ "./src/render/input/motion.manager.ts");\n/* harmony import */ var game_capsule__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! game-capsule */ "./node_modules/game-capsule/dist/index.js");\n/* harmony import */ var game_capsule__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(game_capsule__WEBPACK_IMPORTED_MODULE_7__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n//  Phaser.Scene\nvar PlayScene = /** @class */ (function (_super) {\n    __extends(PlayScene, _super);\n    function PlayScene(config) {\n        var _this = _super.call(this, config || { key: structure__WEBPACK_IMPORTED_MODULE_5__["SceneName"].PLAY_SCENE }) || this;\n        _this.loadState = structure__WEBPACK_IMPORTED_MODULE_5__["PlaySceneLoadState"].CREATING_SCENE;\n        return _this;\n    }\n    PlayScene.prototype.preload = function () {\n        _super.prototype.preload.call(this);\n    };\n    Object.defineProperty(PlayScene.prototype, "motionMgr", {\n        get: function () {\n            return this.motionManager;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PlayScene.prototype.create = function () {\n        this.loadState = structure__WEBPACK_IMPORTED_MODULE_5__["PlaySceneLoadState"].CREATING_ROOM;\n        utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug("create playscene");\n        var oldCamera = this.cameras.main;\n        var _a = this.sys.scale, width = _a.width, height = _a.height;\n        this.cameras.addExisting(new _cameras_play_camera__WEBPACK_IMPORTED_MODULE_1__["PlayCamera"](0, 0, width, height, this.render.scaleRatio), true);\n        this.cameras.remove(oldCamera);\n        if (!this.game.scene.getScene(_main_ui_scene__WEBPACK_IMPORTED_MODULE_3__["MainUIScene"].name)) {\n            this.game.scene.add(_main_ui_scene__WEBPACK_IMPORTED_MODULE_3__["MainUIScene"].name, _main_ui_scene__WEBPACK_IMPORTED_MODULE_3__["MainUIScene"], false);\n        }\n        var scene = this.game.scene.getScene(_main_ui_scene__WEBPACK_IMPORTED_MODULE_3__["MainUIScene"].name);\n        if (!scene.scene.isActive()) {\n            this.scene.launch(_main_ui_scene__WEBPACK_IMPORTED_MODULE_3__["MainUIScene"].name, {\n                "render": this.render,\n            });\n            var sceneManager = this.render.sceneManager;\n            sceneManager.bringToTop(structure__WEBPACK_IMPORTED_MODULE_5__["SceneName"].LOADING_SCENE);\n        }\n        else {\n            this.render.initUI();\n            // this.mRoom.initUI();\n        }\n        this.scene.sendToBack();\n        this.scale.on("orientationchange", this.checkOriention, this);\n        this.scale.on("resize", this.checkSize, this);\n        // ======= render startPlay\n        this.render.sceneManager.setMainScene(this);\n        this.initInput();\n        this.render.camerasManager.startRoomPlay(this);\n        // this.onLoadCompleteHandler();\n        // set layers\n        // ==========\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_2__["BaseLayer"], PlayScene.LAYER_GROUNDCLICK, 1);\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_2__["BaseLayer"], PlayScene.LAYER_GROUND2, 2);\n        // ==========\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_2__["GroundLayer"], PlayScene.LAYER_GROUND, 3).setScale(this.render.scaleRatio);\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_2__["BaseLayer"], PlayScene.LAYER_MIDDLE, 4).setScale(this.render.scaleRatio);\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_2__["GroundLayer"], PlayScene.LAYER_FLOOR, 4).setScale(this.render.scaleRatio);\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_2__["SurfaceLayer"], PlayScene.LAYER_SURFACE, 5).setScale(this.render.scaleRatio);\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_2__["BaseLayer"], PlayScene.LAYER_ATMOSPHERE, 6);\n        this.layerManager.addLayer(this, baseRender__WEBPACK_IMPORTED_MODULE_2__["BaseLayer"], PlayScene.LAYER_SCENEUI, 7);\n        // ======= mainworker startPlay\n        this.render.startRoomPlay();\n        this.render.changeScene(this);\n        this.initListener();\n        _super.prototype.create.call(this);\n    };\n    PlayScene.prototype.update = function (time, delta) {\n        this.render.updateRoom(time, delta);\n        this.layerManager.update(time, delta);\n        if (this.motionManager)\n            this.motionManager.update(time, delta);\n    };\n    // setViewPort(x: number, y: number, width: number, height: number) {\n    //     super.setViewPort(x, y, width, height);\n    //     this.cameras.main.zoom = Math.ceil(window.devicePixelRatio);\n    // }\n    PlayScene.prototype.getKey = function () {\n        return this.sys.config.key;\n    };\n    Object.defineProperty(PlayScene.prototype, "loadState", {\n        get: function () {\n            return this.mLoadState;\n        },\n        set: function (val) {\n            if (val === this.mLoadState)\n                return;\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().debug("PlayScene change loadState: ", val);\n            this.mLoadState = val;\n            if (val === structure__WEBPACK_IMPORTED_MODULE_5__["PlaySceneLoadState"].LOAD_COMPOLETE) {\n                this.render.hideLoading();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PlayScene.prototype.onRoomCreated = function () {\n        this.loadState = structure__WEBPACK_IMPORTED_MODULE_5__["PlaySceneLoadState"].LOAD_COMPOLETE;\n    };\n    PlayScene.prototype.initInput = function () {\n        this.motionManager = new _input_motion_manager__WEBPACK_IMPORTED_MODULE_6__["MotionManager"](this.render);\n        this.motionManager.setScene(this);\n    };\n    PlayScene.prototype.initListener = function () {\n        this.input.on("pointerdown", this.onPointerDownHandler, this);\n        this.input.on("pointerup", this.onPointerUpHandler, this);\n        // this.load.on(Phaser.Loader.Events.COMPLETE, this.onLoadCompleteHandler, this);\n    };\n    PlayScene.prototype.onPointerDownHandler = function (pointer) {\n        this.addPointerMoveHandler();\n    };\n    PlayScene.prototype.onPointerUpHandler = function (pointer) {\n        this.removePointerMoveHandler();\n    };\n    PlayScene.prototype.addPointerMoveHandler = function () {\n        this.input.on("pointermove", this.onPointerMoveHandler, this);\n        this.input.on("gameout", this.onGameOutHandler, this);\n    };\n    PlayScene.prototype.removePointerMoveHandler = function () {\n        this.input.off("pointermove", this.onPointerMoveHandler, this);\n        this.input.off("gameout", this.onGameOutHandler, this);\n        if (this.render.camerasManager.moving) {\n            this.render.syncCameraScroll();\n            this.render.camerasManager.moving = false;\n        }\n    };\n    PlayScene.prototype.onPointerMoveHandler = function (pointer) {\n        if (!this.render.camerasManager.targetFollow) {\n            this.render.camerasManager.offsetScroll(pointer.prevPosition.x - pointer.position.x, pointer.prevPosition.y - pointer.position.y);\n        }\n    };\n    PlayScene.prototype.onGameOutHandler = function () {\n        this.removePointerMoveHandler();\n    };\n    // protected onLoadCompleteHandler() {\n    //     Logger.getInstance().debug("playload complete");\n    //     this.load.off(Phaser.Loader.Events.COMPLETE, this.onLoadCompleteHandler, this);\n    //     this.render.hideLoading();\n    // }\n    PlayScene.prototype.checkOriention = function (orientation) {\n        if (orientation === Phaser.Scale.PORTRAIT) {\n        }\n        else if (orientation === Phaser.Scale.LANDSCAPE) {\n        }\n    };\n    PlayScene.prototype.checkSize = function (size) {\n        var width = size.width;\n        var height = size.height;\n    };\n    PlayScene.LAYER_GROUNDCLICK = "groundClickLayer";\n    PlayScene.LAYER_GROUND2 = "groundLayer2";\n    PlayScene.LAYER_GROUND = game_capsule__WEBPACK_IMPORTED_MODULE_7__["LayerEnum"].Terrain.toString();\n    PlayScene.LAYER_MIDDLE = "middleLayer";\n    PlayScene.LAYER_FLOOR = game_capsule__WEBPACK_IMPORTED_MODULE_7__["LayerEnum"].Floor.toString();\n    PlayScene.LAYER_SURFACE = game_capsule__WEBPACK_IMPORTED_MODULE_7__["LayerEnum"].Surface.toString();\n    PlayScene.LAYER_ATMOSPHERE = "atmosphere";\n    PlayScene.LAYER_SCENEUI = "sceneUILayer";\n    return PlayScene;\n}(_room_scene__WEBPACK_IMPORTED_MODULE_4__["RoomScene"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/play.scene.ts?')},"./src/render/scenes/room.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoomScene", function() { return RoomScene; });\n/* harmony import */ var _basic_scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basic.scene */ "./src/render/scenes/basic.scene.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar RoomScene = /** @class */ (function (_super) {\n    __extends(RoomScene, _super);\n    function RoomScene() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RoomScene.prototype.init = function (data) {\n        _super.prototype.init.call(this, data);\n        if (data) {\n            this.mRoomID = data.roomid;\n        }\n    };\n    RoomScene.prototype.create = function () {\n        _super.prototype.create.call(this);\n    };\n    return RoomScene;\n}(_basic_scene__WEBPACK_IMPORTED_MODULE_0__["BasicScene"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/room.scene.ts?')},"./src/render/scenes/scene.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SceneManager", function() { return SceneManager; });\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _loadqueue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../loadqueue */ "./src/render/loadqueue/index.ts");\n/* harmony import */ var _basic_scene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./basic.scene */ "./src/render/scenes/basic.scene.ts");\n/* harmony import */ var _create_role_scene__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./create.role.scene */ "./src/render/scenes/create.role.scene.ts");\n/* harmony import */ var _decorate_scene__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./decorate.scene */ "./src/render/scenes/decorate.scene.ts");\n/* harmony import */ var _game_pause_scene__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./game.pause.scene */ "./src/render/scenes/game.pause.scene.ts");\n/* harmony import */ var _loading_scene__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./loading.scene */ "./src/render/scenes/loading.scene.ts");\n/* harmony import */ var _login_account_scene__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./login.account.scene */ "./src/render/scenes/login.account.scene.ts");\n/* harmony import */ var _login_scene__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./login.scene */ "./src/render/scenes/login.scene.ts");\n/* harmony import */ var _main_ui_scene__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./main.ui.scene */ "./src/render/scenes/main.ui.scene.ts");\n/* harmony import */ var _play_scene__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./play.scene */ "./src/render/scenes/play.scene.ts");\n/* harmony import */ var _room_scene__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./room.scene */ "./src/render/scenes/room.scene.ts");\n/* harmony import */ var _select_role_scene__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./select.role.scene */ "./src/render/scenes/select.role.scene.ts");\n/* harmony import */ var _sky_box_scene__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./sky.box.scene */ "./src/render/scenes/sky.box.scene.ts");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar SceneManager = /** @class */ (function () {\n    function SceneManager(render) {\n        this.render = render;\n        this.sceneClass = {\n            "BasicScene": _basic_scene__WEBPACK_IMPORTED_MODULE_3__["BasicScene"],\n            "CreateRoleScene": _create_role_scene__WEBPACK_IMPORTED_MODULE_4__["CreateRoleScene"],\n            "GamePauseScene": _game_pause_scene__WEBPACK_IMPORTED_MODULE_6__["GamePauseScene"],\n            "LoadingScene": _loading_scene__WEBPACK_IMPORTED_MODULE_7__["LoadingScene"],\n            "LoginAccountScene": _login_account_scene__WEBPACK_IMPORTED_MODULE_8__["LoginAccountScene"],\n            "LoginScene": _login_scene__WEBPACK_IMPORTED_MODULE_9__["LoginScene"],\n            "MainUIScene": _main_ui_scene__WEBPACK_IMPORTED_MODULE_10__["MainUIScene"],\n            "PlayScene": _play_scene__WEBPACK_IMPORTED_MODULE_11__["PlayScene"],\n            "RoomScene": _room_scene__WEBPACK_IMPORTED_MODULE_12__["RoomScene"],\n            "SelectRoleScene": _select_role_scene__WEBPACK_IMPORTED_MODULE_13__["SelectRoleScene"],\n            "SkyBoxScene": _sky_box_scene__WEBPACK_IMPORTED_MODULE_14__["SkyBoxScene"],\n            "DecorateScene": _decorate_scene__WEBPACK_IMPORTED_MODULE_5__["DecorateScene"]\n        };\n        this.render.exportProperty(this, this.render, structure__WEBPACK_IMPORTED_MODULE_0__["ModuleName"].SCENEMANAGER_NAME)\n            .onceReady(function () {\n        });\n    }\n    Object.defineProperty(SceneManager.prototype, "currentScene", {\n        get: function () {\n            var sceneManager = this.render.game.scene;\n            if (!sceneManager) {\n                return null;\n            }\n            return sceneManager.getScene(this.mCurSceneName);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SceneManager.prototype.resize = function (width, height) {\n        var sceneManager = this.render.game.scene;\n        if (!sceneManager) {\n            return null;\n        }\n        var zoom = this.render.scaleRatio;\n        var playScene = sceneManager.getScene("PlayScene");\n        if (playScene)\n            playScene.setScale(zoom);\n        var uiScene = sceneManager.getScene("MainUIScene");\n        if (uiScene)\n            uiScene.setScale(zoom);\n    };\n    SceneManager.prototype.getSceneByName = function (sceneName) {\n        if (!this.render || !this.render.game)\n            return undefined;\n        return this.render.game.scene.getScene(sceneName);\n    };\n    SceneManager.prototype.showProgress = function (progress) {\n        var sceneManager = this.render.game.scene;\n        if (!sceneManager) {\n            return;\n        }\n        var scene = sceneManager.getScene("LoadingScene");\n        if (scene && scene.scene.isActive) {\n            progress *= 100;\n            var text = utils__WEBPACK_IMPORTED_MODULE_1__["StringUtils"].format(" {0}", [progress.toFixed(0) + "%"]);\n            scene.updateProgress(text);\n        }\n        sceneManager.bringToTop("LoadingScene");\n    };\n    SceneManager.prototype.bringToTop = function (sceneName) {\n        var sceneManager = this.render.game.scene;\n        if (!sceneManager) {\n            return;\n        }\n        var scene = sceneManager.getScene(sceneName);\n        if (scene && scene.scene.isActive) {\n            sceneManager.bringToTop(sceneName);\n        }\n    };\n    SceneManager.prototype.startScene = function (name, data) {\n        var sceneManager = this.render.game.scene;\n        if (!data)\n            data = { render: this.render };\n        if (!sceneManager) {\n            return; // Promise.reject("start faild. SceneManager does not exist");\n        }\n        if (!this.sceneClass.hasOwnProperty(name)) {\n            return; // Promise.reject("className error: " + name);\n        }\n        data.render = this.render;\n        if (data.state !== undefined) {\n            var state = data.state;\n            switch (state) {\n                case structure__WEBPACK_IMPORTED_MODULE_0__["LoadState"].ENTERWORLD:\n                    data.text = _loadqueue__WEBPACK_IMPORTED_MODULE_2__["LoadingTips"].enterWorld();\n                    break;\n                case structure__WEBPACK_IMPORTED_MODULE_0__["LoadState"].DOWNLOADGAMECONFIG:\n                    data.text = _loadqueue__WEBPACK_IMPORTED_MODULE_2__["LoadingTips"].downloadGameConfig();\n                    break;\n                case structure__WEBPACK_IMPORTED_MODULE_0__["LoadState"].DOWNLOADSCENECONFIG:\n                    data.text = _loadqueue__WEBPACK_IMPORTED_MODULE_2__["LoadingTips"].downloadSceneConfig();\n                    break;\n                case structure__WEBPACK_IMPORTED_MODULE_0__["LoadState"].LOADINGRESOURCES:\n                    data.text = _loadqueue__WEBPACK_IMPORTED_MODULE_2__["LoadingTips"].loadingResources();\n                    break;\n                case structure__WEBPACK_IMPORTED_MODULE_0__["LoadState"].LOGINGAME:\n                    data.text = _loadqueue__WEBPACK_IMPORTED_MODULE_2__["LoadingTips"].loginGame();\n                    break;\n                case structure__WEBPACK_IMPORTED_MODULE_0__["LoadState"].PARSECONFIG:\n                    data.text = _loadqueue__WEBPACK_IMPORTED_MODULE_2__["LoadingTips"].parseConfig();\n                    break;\n                case structure__WEBPACK_IMPORTED_MODULE_0__["LoadState"].WAITENTERROOM:\n                    data.text = _loadqueue__WEBPACK_IMPORTED_MODULE_2__["LoadingTips"].waitEnterRoom();\n                    break;\n                case structure__WEBPACK_IMPORTED_MODULE_0__["LoadState"].CREATESCENE:\n                    data.text = _loadqueue__WEBPACK_IMPORTED_MODULE_2__["LoadingTips"].createScene();\n                    break;\n            }\n        }\n        var scene = sceneManager.getScene(name);\n        if (scene) {\n            var isActive = scene.scene.isActive(name);\n            if (!isActive) {\n                scene.wake(data);\n            }\n            else {\n                scene.updateProgress(data.text);\n            }\n            if (data.callBack)\n                data.callBack();\n        }\n        else {\n            this.render.emitter.once("sceneCreated", function () {\n                utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().debug("sceneCreated===scenemanager");\n                // if (this.mCurSceneName !== name) {\n                //     const curScene: BasicScene = sceneManager.getScene(this.mCurSceneName) as BasicScene;\n                //     if (curScene) curScene.sleep();\n                // }\n                if (data.callBack)\n                    data.callBack();\n            }, this);\n            sceneManager.add(name, this.sceneClass[name]);\n            sceneManager.start(name, data);\n        }\n        this.mCurSceneName = name;\n    };\n    SceneManager.prototype.launchScene = function (startScene, LaunchName, sceneName, data) {\n        var sceneManager = this.render.game.scene;\n        if (!data)\n            data = { render: this.render };\n        if (!sceneManager) {\n            return; // Promise.reject("start faild. SceneManager does not exist");\n        }\n        // if (!this.sceneClass.hasOwnProperty(LaunchName)) {\n        //     return;// Promise.reject("className error: " + name);\n        // }\n        data.render = this.render;\n        var scene = sceneManager.getScene(LaunchName);\n        this.render.emitter.once("sceneCreated", function () {\n            if (data.callBack)\n                data.callBack();\n        }, this);\n        if (scene) {\n        }\n        else {\n            sceneManager.add(LaunchName, this.sceneClass[sceneName]);\n        }\n        startScene.scene.launch(LaunchName, data);\n    };\n    SceneManager.prototype.stopScene = function (name) {\n        var sceneManager = this.render.game.scene;\n        if (!sceneManager) {\n            return Promise.reject("start faild. SceneManager does not exist");\n        }\n        if (!this.sceneClass.hasOwnProperty(name)) {\n            return Promise.reject("className error: " + name);\n        }\n        var scene = sceneManager.getScene(name);\n        if (!scene)\n            return;\n        scene.stop();\n        this.render.game.scene.remove(name);\n    };\n    SceneManager.prototype.wakeScene = function (name, data) {\n        var sceneManager = this.render.game.scene;\n        if (!sceneManager) {\n            return Promise.reject("start faild. SceneManager does not exist");\n        }\n        if (!this.sceneClass.hasOwnProperty(name)) {\n            return Promise.reject("className error: " + name);\n        }\n        var scene = sceneManager.getScene(name);\n        if (!scene) {\n            return;\n        }\n        else {\n            scene.wake(data);\n        }\n    };\n    SceneManager.prototype.sleepScene = function (name) {\n        if (!this.render.game.scene.getScene(name)) {\n            utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().debug(name + "sleep faild");\n            return;\n        }\n        var scene = this.render.game.scene.getScene(name);\n        if (!scene.scene.isActive(name))\n            return;\n        scene.sleep();\n    };\n    SceneManager.prototype.pauseScene = function (name) {\n        var scene = this.render.game.scene.getScene(name);\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().error("scene not found : ", name);\n            return;\n        }\n        scene.scene.pause(name);\n    };\n    SceneManager.prototype.resumeScene = function (name) {\n        var scene = this.render.game.scene.getScene(name);\n        if (!scene) {\n            utils__WEBPACK_IMPORTED_MODULE_1__["Logger"].getInstance().error("scene not found : ", name);\n            return;\n        }\n        scene.scene.resume(name);\n    };\n    SceneManager.prototype.remove = function (key) {\n        this.render.game.scene.remove(key);\n    };\n    SceneManager.prototype.isActive = function (name) {\n        if (!this.render.game.scene.getScene(name)) {\n            return false;\n        }\n        return this.render.game.scene.getScene(name).scene.isActive();\n    };\n    SceneManager.prototype.destroy = function () {\n        if (this.mCurSceneName)\n            this.mCurSceneName = undefined;\n        if (this.render && this.render.hasOwnProperty(structure__WEBPACK_IMPORTED_MODULE_0__["ModuleName"].SCENEMANAGER_NAME))\n            delete this.render[structure__WEBPACK_IMPORTED_MODULE_0__["ModuleName"].SCENEMANAGER_NAME];\n        this.mMainScene = undefined;\n    };\n    SceneManager.prototype.setMainScene = function (scene) {\n        this.mMainScene = scene;\n    };\n    SceneManager.prototype.getMainScene = function () {\n        return this.mMainScene;\n    };\n    SceneManager.prototype.updateInput = function (val) {\n        var scenes = this.render.game.scene.getScenes();\n        scenes.map(function (scene) { return scene.input.enabled = (val !== SceneInputEnum.Disable); });\n        // switch(val) {\n        //     case SceneInputEnum.Disable:\n        //         scenes.map((scene: Phaser.Scene) => scene.input.enabled = false);\n        //         break;\n        //     default:\n        //         scenes.map((scene: Phaser.Scene) => scene.input.enabled = true);\n        //         break;\n        // }\n    };\n    SceneManager.prototype.sceneCallback = function (scene) {\n        return Promise.resolve();\n    };\n    return SceneManager;\n}());\n\nvar SceneInputEnum;\n(function (SceneInputEnum) {\n    SceneInputEnum[SceneInputEnum["Disable"] = 0] = "Disable";\n    SceneInputEnum[SceneInputEnum["Mouse"] = 1] = "Mouse";\n    SceneInputEnum[SceneInputEnum["Keyboard"] = 2] = "Keyboard";\n    SceneInputEnum[SceneInputEnum["All"] = 3] = "All";\n})(SceneInputEnum || (SceneInputEnum = {}));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/scene.manager.ts?')},"./src/render/scenes/select.role.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectRoleScene", function() { return SelectRoleScene; });\n/* harmony import */ var _basic_scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basic.scene */ "./src/render/scenes/basic.scene.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar SelectRoleScene = /** @class */ (function (_super) {\n    __extends(SelectRoleScene, _super);\n    function SelectRoleScene() {\n        return _super.call(this, { key: SelectRoleScene.name }) || this;\n    }\n    SelectRoleScene.prototype.preload = function () { };\n    SelectRoleScene.prototype.init = function (data) {\n        this.mWorld = data;\n    };\n    SelectRoleScene.prototype.create = function () {\n        _super.prototype.create.call(this);\n    };\n    Object.defineProperty(SelectRoleScene.prototype, "key", {\n        get: function () {\n            return this.sys.config.key;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return SelectRoleScene;\n}(_basic_scene__WEBPACK_IMPORTED_MODULE_0__["BasicScene"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/select.role.scene.ts?')},"./src/render/scenes/sky.box.scene.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SkyBoxScene", function() { return SkyBoxScene; });\n/* harmony import */ var _cameras_play_camera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cameras/play.camera */ "./src/render/cameras/play.camera.ts");\n/* harmony import */ var _basic_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./basic.scene */ "./src/render/scenes/basic.scene.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar SkyBoxScene = /** @class */ (function (_super) {\n    __extends(SkyBoxScene, _super);\n    function SkyBoxScene() {\n        return _super.call(this, {}) || this;\n    }\n    SkyBoxScene.prototype.init = function (data) {\n        _super.prototype.init.call(this, data);\n        if (data) {\n            this.skyBoxManager = data;\n        }\n    };\n    SkyBoxScene.prototype.preload = function () {\n    };\n    SkyBoxScene.prototype.create = function () {\n        // super.create();\n        var oldCamera = this.cameras.main;\n        this.cameras.addExisting(new _cameras_play_camera__WEBPACK_IMPORTED_MODULE_0__["PlayCamera"](0, 0, this.sys.scale.width, this.sys.scale.height, this.skyBoxManager.scaleRatio), true);\n        this.cameras.remove(oldCamera);\n        // this.scene.sendToBack();\n        this.skyBoxManager.startPlay(this);\n    };\n    SkyBoxScene.prototype.update = function (time, delta) {\n        this.skyBoxManager.check(time, delta);\n    };\n    return SkyBoxScene;\n}(_basic_scene__WEBPACK_IMPORTED_MODULE_1__["BasicScene"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/scenes/sky.box.scene.ts?')},"./src/render/ui sync recursive ^\\.\\/.*$":function(module,exports,__webpack_require__){eval('var map = {\n\t"./": "./src/render/ui/index.ts",\n\t"./bag": "./src/render/ui/bag/index.ts",\n\t"./bag/": "./src/render/ui/bag/index.ts",\n\t"./bag/IListItemRender": "./src/render/ui/bag/IListItemRender.ts",\n\t"./bag/IListItemRender.ts": "./src/render/ui/bag/IListItemRender.ts",\n\t"./bag/bagView/bagPanel": "./src/render/ui/bag/bagView/bagPanel.ts",\n\t"./bag/bagView/bagPanel.ts": "./src/render/ui/bag/bagView/bagPanel.ts",\n\t"./bag/basebag": "./src/render/ui/bag/basebag.ts",\n\t"./bag/basebag.ts": "./src/render/ui/bag/basebag.ts",\n\t"./bag/baseitem": "./src/render/ui/bag/baseitem.ts",\n\t"./bag/baseitem.ts": "./src/render/ui/bag/baseitem.ts",\n\t"./bag/index": "./src/render/ui/bag/index.ts",\n\t"./bag/index.ts": "./src/render/ui/bag/index.ts",\n\t"./bag/storage/storagePanel": "./src/render/ui/bag/storage/storagePanel.ts",\n\t"./bag/storage/storagePanel.ts": "./src/render/ui/bag/storage/storagePanel.ts",\n\t"./components": "./src/render/ui/components/index.ts",\n\t"./components/": "./src/render/ui/components/index.ts",\n\t"./components/MoreButtonPanel": "./src/render/ui/components/MoreButtonPanel.ts",\n\t"./components/MoreButtonPanel.ts": "./src/render/ui/components/MoreButtonPanel.ts",\n\t"./components/TextButton": "./src/render/ui/components/TextButton.ts",\n\t"./components/TextButton.ts": "./src/render/ui/components/TextButton.ts",\n\t"./components/alert.view": "./src/render/ui/components/alert.view.ts",\n\t"./components/alert.view.ts": "./src/render/ui/components/alert.view.ts",\n\t"./components/background.scale.button": "./src/render/ui/components/background.scale.button.ts",\n\t"./components/background.scale.button.ts": "./src/render/ui/components/background.scale.button.ts",\n\t"./components/base.panel": "./src/render/ui/components/base.panel.ts",\n\t"./components/base.panel.ts": "./src/render/ui/components/base.panel.ts",\n\t"./components/button.event.dispatch": "./src/render/ui/components/button.event.dispatch.ts",\n\t"./components/button.event.dispatch.ts": "./src/render/ui/components/button.event.dispatch.ts",\n\t"./components/checkbox.group": "./src/render/ui/components/checkbox.group.ts",\n\t"./components/checkbox.group.ts": "./src/render/ui/components/checkbox.group.ts",\n\t"./components/common.background": "./src/render/ui/components/common.background.ts",\n\t"./components/common.background.ts": "./src/render/ui/components/common.background.ts",\n\t"./components/dragDropIcon": "./src/render/ui/components/dragDropIcon.ts",\n\t"./components/dragDropIcon.ts": "./src/render/ui/components/dragDropIcon.ts",\n\t"./components/dynamic.image": "./src/render/ui/components/dynamic.image.ts",\n\t"./components/dynamic.image.ts": "./src/render/ui/components/dynamic.image.ts",\n\t"./components/dynamic.ninepatch": "./src/render/ui/components/dynamic.ninepatch.ts",\n\t"./components/dynamic.ninepatch.ts": "./src/render/ui/components/dynamic.ninepatch.ts",\n\t"./components/dynamic.sprite": "./src/render/ui/components/dynamic.sprite.ts",\n\t"./components/dynamic.sprite.ts": "./src/render/ui/components/dynamic.sprite.ts",\n\t"./components/grid.layout.group": "./src/render/ui/components/grid.layout.group.ts",\n\t"./components/grid.layout.group.ts": "./src/render/ui/components/grid.layout.group.ts",\n\t"./components/icon.btn": "./src/render/ui/components/icon.btn.ts",\n\t"./components/icon.btn.ts": "./src/render/ui/components/icon.btn.ts",\n\t"./components/icon.select.btn": "./src/render/ui/components/icon.select.btn.ts",\n\t"./components/icon.select.btn.ts": "./src/render/ui/components/icon.select.btn.ts",\n\t"./components/idragable": "./src/render/ui/components/idragable.ts",\n\t"./components/idragable.ts": "./src/render/ui/components/idragable.ts",\n\t"./components/idropable": "./src/render/ui/components/idropable.ts",\n\t"./components/idropable.ts": "./src/render/ui/components/idropable.ts",\n\t"./components/image.value": "./src/render/ui/components/image.value.ts",\n\t"./components/image.value.ts": "./src/render/ui/components/image.value.ts",\n\t"./components/index": "./src/render/ui/components/index.ts",\n\t"./components/index.ts": "./src/render/ui/components/index.ts",\n\t"./components/input.field": "./src/render/ui/components/input.field.ts",\n\t"./components/input.field.ts": "./src/render/ui/components/input.field.ts",\n\t"./components/input.panel": "./src/render/ui/components/input.panel.ts",\n\t"./components/input.panel.ts": "./src/render/ui/components/input.panel.ts",\n\t"./components/input.view": "./src/render/ui/components/input.view.ts",\n\t"./components/input.view.ts": "./src/render/ui/components/input.view.ts",\n\t"./components/item.slot": "./src/render/ui/components/item.slot.ts",\n\t"./components/item.slot.ts": "./src/render/ui/components/item.slot.ts",\n\t"./components/items.consume.funpanel": "./src/render/ui/components/items.consume.funpanel.ts",\n\t"./components/items.consume.funpanel.ts": "./src/render/ui/components/items.consume.funpanel.ts",\n\t"./components/label.input": "./src/render/ui/components/label.input.ts",\n\t"./components/label.input.ts": "./src/render/ui/components/label.input.ts",\n\t"./components/material.item": "./src/render/ui/components/material.item.ts",\n\t"./components/material.item.ts": "./src/render/ui/components/material.item.ts",\n\t"./components/nine.patch": "./src/render/ui/components/nine.patch.ts",\n\t"./components/nine.patch.ts": "./src/render/ui/components/nine.patch.ts",\n\t"./components/ninepatch.button": "./src/render/ui/components/ninepatch.button.ts",\n\t"./components/ninepatch.button.ts": "./src/render/ui/components/ninepatch.button.ts",\n\t"./components/patches.config": "./src/render/ui/components/patches.config.ts",\n\t"./components/patches.config.ts": "./src/render/ui/components/patches.config.ts",\n\t"./components/progress.mask.bar": "./src/render/ui/components/progress.mask.bar.ts",\n\t"./components/progress.mask.bar.ts": "./src/render/ui/components/progress.mask.bar.ts",\n\t"./components/progress.three.bar": "./src/render/ui/components/progress.three.bar.ts",\n\t"./components/progress.three.bar.ts": "./src/render/ui/components/progress.three.bar.ts",\n\t"./components/progress.three.mask.bar": "./src/render/ui/components/progress.three.mask.bar.ts",\n\t"./components/progress.three.mask.bar.ts": "./src/render/ui/components/progress.three.mask.bar.ts",\n\t"./components/prop.item": "./src/render/ui/components/prop.item.ts",\n\t"./components/prop.item.ts": "./src/render/ui/components/prop.item.ts",\n\t"./components/soundButton": "./src/render/ui/components/soundButton.ts",\n\t"./components/soundButton.ts": "./src/render/ui/components/soundButton.ts",\n\t"./components/texture.sprite": "./src/render/ui/components/texture.sprite.ts",\n\t"./components/texture.sprite.ts": "./src/render/ui/components/texture.sprite.ts",\n\t"./components/three.button": "./src/render/ui/components/three.button.ts",\n\t"./components/three.button.ts": "./src/render/ui/components/three.button.ts",\n\t"./components/three.slice.path": "./src/render/ui/components/three.slice.path.ts",\n\t"./components/three.slice.path.ts": "./src/render/ui/components/three.slice.path.ts",\n\t"./components/tips/ItemInfoTips": "./src/render/ui/components/tips/ItemInfoTips.ts",\n\t"./components/tips/ItemInfoTips.ts": "./src/render/ui/components/tips/ItemInfoTips.ts",\n\t"./components/tips/TextToolTip": "./src/render/ui/components/tips/TextToolTip.ts",\n\t"./components/tips/TextToolTip.ts": "./src/render/ui/components/tips/TextToolTip.ts",\n\t"./components/tips/itoolTip": "./src/render/ui/components/tips/itoolTip.ts",\n\t"./components/tips/itoolTip.ts": "./src/render/ui/components/tips/itoolTip.ts",\n\t"./components/tips/toolTip": "./src/render/ui/components/tips/toolTip.ts",\n\t"./components/tips/toolTip.ts": "./src/render/ui/components/tips/toolTip.ts",\n\t"./components/toggle.button": "./src/render/ui/components/toggle.button.ts",\n\t"./components/toggle.button.ts": "./src/render/ui/components/toggle.button.ts",\n\t"./components/toggle.color.button": "./src/render/ui/components/toggle.color.button.ts",\n\t"./components/toggle.color.button.ts": "./src/render/ui/components/toggle.color.button.ts",\n\t"./components/tween.compent": "./src/render/ui/components/tween.compent.ts",\n\t"./components/tween.compent.ts": "./src/render/ui/components/tween.compent.ts",\n\t"./components/value.container": "./src/render/ui/components/value.container.ts",\n\t"./components/value.container.ts": "./src/render/ui/components/value.container.ts",\n\t"./index": "./src/render/ui/index.ts",\n\t"./index.ts": "./src/render/ui/index.ts",\n\t"./rank/basicRankPanel": "./src/render/ui/rank/basicRankPanel.ts",\n\t"./rank/basicRankPanel.ts": "./src/render/ui/rank/basicRankPanel.ts",\n\t"./rank/rankPanel": "./src/render/ui/rank/rankPanel.ts",\n\t"./rank/rankPanel.ts": "./src/render/ui/rank/rankPanel.ts",\n\t"./ui.manager": "./src/render/ui/ui.manager.ts",\n\t"./ui.manager.ts": "./src/render/ui/ui.manager.ts"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error("Cannot find module \'" + req + "\'");\n\t\te.code = \'MODULE_NOT_FOUND\';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = "./src/render/ui sync recursive ^\\\\.\\\\/.*$";\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui_sync_^\\.\\/.*$?')},"./src/render/ui/bag/IListItemRender.ts":function(module,exports){eval("\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/bag/IListItemRender.ts?")},"./src/render/ui/bag/bagView/bagPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BagPanel", function() { return BagPanel; });\n/* harmony import */ var _components_item_slot__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/item.slot */ "./src/render/ui/components/item.slot.ts");\n/* harmony import */ var _components_nine_patch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/nine.patch */ "./src/render/ui/components/nine.patch.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components */ "./src/render/ui/components/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar BagPanel = /** @class */ (function (_super) {\n    __extends(BagPanel, _super);\n    // private mInitalize: boolean = false;\n    function BagPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.mPageNum = 0;\n        _this.mPageIndex = 1;\n        _this.mBaseStr = "";\n        _this.bagSlotList = [];\n        _this.mCheckList = [];\n        return _this;\n    }\n    BagPanel.prototype.resize = function (wid, hei) {\n        var size = this.mWorld.getSize();\n        if (this.mWorld.game.device.os.desktop) {\n            this.x = size.width >> 1;\n            this.y = size.height >> 1;\n        }\n        else {\n            if (this.mWorld.game.scale.orientation === Phaser.Scale.Orientation.LANDSCAPE) {\n                this.x = size.width >> 1;\n                this.y = size.height >> 1;\n            }\n            else {\n                this.x = size.width >> 1;\n                this.y = size.height - (this.height / 2) * this.mWorld.uiScale >> 1;\n            }\n        }\n    };\n    BagPanel.prototype.setDataList = function (items) {\n        var itemList = items;\n        this.mPageNum = Math.ceil(itemList.length / BagPanel.PageMaxCount);\n        this.mDataList = itemList;\n        if (!this.mInitialized) {\n            return;\n        }\n        this.checkChinese();\n    };\n    BagPanel.prototype.getPageNum = function () {\n        return this.mPageNum;\n    };\n    BagPanel.prototype.destroy = function () {\n        if (this.bagSlotList) {\n            this.bagSlotList.forEach(function (slot) {\n                if (slot)\n                    slot.destroy();\n            });\n            this.bagSlotList.length = 0;\n            this.bagSlotList = null;\n        }\n        this.mWorld = null;\n        this.mPageNum = 0;\n        this.mPageIndex = 1;\n        _super.prototype.destroy.call(this);\n    };\n    BagPanel.prototype.getCurPageIndex = function () {\n        return this.mPageIndex;\n    };\n    BagPanel.prototype.show = function (param) {\n        _super.prototype.show.call(this, param);\n        if (this.mInitialized) {\n            this.mPreBtn.play("slipBtn");\n            this.mNextBtn.play("slipBtn");\n        }\n    };\n    BagPanel.prototype.setBlur = function () {\n        if (this.mInputText)\n            this.mInputText.setBlur();\n    };\n    BagPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mInputText.on("focus", this.onFocusHandler, this);\n        this.mInputText.on("blur", this.onBlurHandler, this);\n        this.mNextBtn.on("pointerup", this.nextHandler, this);\n        this.mPreBtn.on("pointerup", this.preHandler, this);\n        this.mClsBtn.on("pointerup", this.closeHandler, this);\n    };\n    BagPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        this.mInputText.off("focus", this.onFocusHandler, this);\n        this.mInputText.off("blur", this.onBlurHandler, this);\n        this.mNextBtn.off("pointerup", this.nextHandler, this);\n        this.mPreBtn.off("pointerup", this.preHandler, this);\n        this.mClsBtn.off("pointerup", this.closeHandler, this);\n    };\n    BagPanel.prototype.init = function () {\n        if (this.mInitialized)\n            return;\n        var size = this.mWorld.getSize();\n        if (this.mWorld.game.device.os.desktop) {\n            this.x = size.width >> 1;\n            this.y = size.height >> 1;\n        }\n        else {\n            if (this.mWorld.game.scale.orientation === Phaser.Scale.Orientation.LANDSCAPE) {\n                this.x = size.width >> 1;\n                this.y = size.height >> 1;\n            }\n            else {\n                this.x = size.width >> 1;\n                this.y = size.height - (this.height / 2) * this.mWorld.uiScale >> 1;\n            }\n        }\n        // ============\n        var itemSlot;\n        var tmpX = 0;\n        var tmpY = 0;\n        // ================\n        this.mBg = new _components_nine_patch__WEBPACK_IMPORTED_MODULE_1__["NinePatch"](this.scene, 0, 0, 500, 350, utils__WEBPACK_IMPORTED_MODULE_4__["Background"].getName(), null, utils__WEBPACK_IMPORTED_MODULE_4__["Background"].getConfig());\n        // this.mBg.x = size.width - this.width >> 1;\n        // this.mBg.y = size.height - this.mBg.height >> 1;\n        this.addAt(this.mBg, 0);\n        this.setSize(this.mBg.width, this.mBg.height);\n        this.mBorder = new _components_nine_patch__WEBPACK_IMPORTED_MODULE_1__["NinePatch"](this.scene, 0, 0, this.mBg.width - 10, this.mBg.height - 30, utils__WEBPACK_IMPORTED_MODULE_4__["Border"].getName(), null, utils__WEBPACK_IMPORTED_MODULE_4__["Border"].getConfig());\n        this.mBorder.x = this.mBg.x;\n        this.mBorder.y = this.mBg.y + 10;\n        this.addAt(this.mBorder, 1);\n        var txtBg = new _components_nine_patch__WEBPACK_IMPORTED_MODULE_1__["NinePatch"](this.scene, this.mBorder.width / 4 + 5, -this.mBg.height / 2 + 65, this.mBorder.width / 2 - 40, 35, utils__WEBPACK_IMPORTED_MODULE_4__["Border"].getName(), null, utils__WEBPACK_IMPORTED_MODULE_4__["Border"].getConfig());\n        this.add(txtBg);\n        this.mInputText = new apowophaserui__WEBPACK_IMPORTED_MODULE_2__["InputText"](this.scene, 0, 0, 10, 10, {\n            type: "input",\n            fontSize: "14px",\n            color: "#808080"\n        })\n            .resize(txtBg.width, txtBg.height)\n            .setOrigin(0, 0)\n            .setStyle({ font: "bold 16px YaHei" });\n        this.mInputText.x = txtBg.x - txtBg.width / 2;\n        this.mInputText.y = txtBg.y - txtBg.height / 2;\n        this.mInputText.setText(this.mBaseStr);\n        this.add(this.mInputText);\n        // \n        this.bagSlotList = [];\n        for (var i = 0; i < BagPanel.PageMaxCount; i++) {\n            tmpX = i % 8 * 60 - 210;\n            tmpY = Math.floor(i / 8) * 60 - this.mBorder.height / 2 + this.mBorder.y + this.mBorder.height / 2 - 55;\n            itemSlot = new _components_item_slot__WEBPACK_IMPORTED_MODULE_0__["ItemSlot"](this.scene, this.mWorld, this, tmpX, tmpY, this.mResStr, this.mResPng, this.mResJson, "bagView_slot.png", "itemSelectFrame");\n            itemSlot.createUI();\n            this.bagSlotList.push(itemSlot);\n        }\n        this.mPreBtn = this.scene.make.sprite(undefined, false);\n        this.mPreBtn.x = -this.mBg.width >> 1;\n        // // ===============\n        this.mNextBtn = this.scene.make.sprite(undefined, false);\n        this.mNextBtn.scaleX = -1;\n        this.mNextBtn.x = this.mBg.width >> 1;\n        var titleCon = this.scene.make.sprite(undefined, false);\n        titleCon.setTexture(this.mResStr, "bagView_titleBtn.png");\n        titleCon.x = (-this.mBg.width >> 1) + 50;\n        titleCon.y = (-this.mBg.height >> 1);\n        this.add(titleCon);\n        var titleTF = this.scene.make.text(undefined, false);\n        titleTF.setFontFamily("Tahoma");\n        titleTF.setFontStyle("bold");\n        titleTF.setFontSize(20);\n        titleTF.setText("");\n        titleTF.x = titleCon.x + titleCon.width - 10;\n        titleTF.y = titleCon.y - (titleTF.height >> 1);\n        this.add(titleTF);\n        this.add(this.mPreBtn);\n        this.add(this.mNextBtn);\n        this.mNextBtn.setInteractive();\n        this.mPreBtn.setInteractive();\n        this.width = this.mBg.width;\n        this.height = this.mBg.height;\n        this.mClsBtn = new _components__WEBPACK_IMPORTED_MODULE_3__["IconBtn"](this.scene, this.mWorld, {\n            key: "Close_Btn", bgResKey: "clsBtn", bgTextures: ["btn_normal", "btn_over", "btn_click"],\n            iconResKey: "", iconTexture: "", scale: 1, pngUrl: this.mResPng, jsonUrl: this.mResJson\n        });\n        this.mClsBtn.x = (this.width >> 1) - 65;\n        this.mClsBtn.y = -this.height >> 1;\n        this.mClsBtn.scaleX = this.mClsBtn.scaleY = 2;\n        this.add(this.mClsBtn);\n        this.mInitialized = true;\n        if (this.mDataList) {\n            this.refreshDataList(this.mDataList);\n        }\n        this.setInteractive();\n        // (this.mWorld.uiManager.getMediator(ModuleName.BAG_NAME) as BagMediator).resize(this.width, this.height);\n        _super.prototype.init.call(this);\n    };\n    BagPanel.prototype.preload = function () {\n        if (!this.scene) {\n            return;\n        }\n        this.mResStr = "bagView";\n        this.mResPng = "ui/bag/bagView.png";\n        this.mResJson = "ui/bag/bagView.json";\n        this.scene.load.atlas("itemChose", utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/bag/itemChose.png"), utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/bag/itemChose.json"));\n        this.scene.load.atlas("slip", utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/bag/slip.png"), utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/bag/slip.json"));\n        this.scene.load.image(utils__WEBPACK_IMPORTED_MODULE_4__["Border"].getName(), utils__WEBPACK_IMPORTED_MODULE_4__["Border"].getPNG());\n        this.scene.load.image(utils__WEBPACK_IMPORTED_MODULE_4__["Background"].getName(), utils__WEBPACK_IMPORTED_MODULE_4__["Background"].getPNG());\n        this.scene.load.atlas("clsBtn", utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/common/common_clsBtn.png"), utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes("ui/common/common_clsBtn.json"));\n        this.scene.load.atlas(this.mResStr, utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes(this.mResPng), utils__WEBPACK_IMPORTED_MODULE_4__["Url"].getRes(this.mResJson));\n        _super.prototype.preload.call(this);\n    };\n    BagPanel.prototype.loadComplete = function (loader, totalComplete, totalFailed) {\n        var selectFramesObj = this.scene.textures.get("itemChose").frames;\n        var tmpSelectFrames = [];\n        for (var key in selectFramesObj) {\n            if (key === "__BASE")\n                continue;\n            var frame = selectFramesObj[key];\n            if (!frame)\n                continue;\n            tmpSelectFrames.push(key);\n        }\n        // jsonframesanims\n        this.scene.anims.create({\n            key: "itemSelectFrame",\n            frames: this.scene.anims.generateFrameNumbers("itemChose", { start: 0, end: 8, frames: tmpSelectFrames }),\n            frameRate: 33,\n            yoyo: true,\n            repeat: -1\n        });\n        var framesObj = this.scene.textures.get("slip").frames;\n        var tmpFrames = [];\n        for (var key in framesObj) {\n            if (key === "__BASE")\n                continue;\n            var frame = framesObj[key];\n            if (!frame)\n                continue;\n            tmpFrames.push(key);\n        }\n        // jsonframesanims\n        this.scene.anims.create({\n            key: "slipBtn",\n            frames: this.scene.anims.generateFrameNumbers("slip", { start: 0, end: 14, frames: tmpFrames }),\n            frameRate: 33,\n            yoyo: true,\n            repeat: -1\n        });\n        _super.prototype.loadComplete.call(this, loader, totalComplete, totalFailed);\n    };\n    BagPanel.prototype.tweenComplete = function (show) {\n        _super.prototype.tweenComplete.call(this, show);\n        // if (show) (this.mWorld.uiManager.getMediator(BagMediator.NAME) as BagMediator).resize(this.width, this.height);\n    };\n    BagPanel.prototype.nextHandler = function (pointer, gameObject) {\n        this.preNextBtnScaleHandler(this.mNextBtn, -1);\n        if (this.mPageIndex >= this.mPageNum) {\n            return;\n        }\n        this.mPageIndex++;\n        var list = this.mCheckList.length > 0 ? this.mCheckList : this.mDataList;\n        this.refreshDataList(list);\n    };\n    BagPanel.prototype.preHandler = function (pointer, gameObject) {\n        this.preNextBtnScaleHandler(this.mPreBtn);\n        if (this.mPageIndex <= 1) {\n            return;\n        }\n        this.mPageIndex--;\n        var list = this.mCheckList.length > 0 ? this.mCheckList : this.mDataList;\n        this.refreshDataList(list);\n    };\n    BagPanel.prototype.preNextBtnScaleHandler = function (gameObject, scaleX) {\n        if (scaleX === void 0) { scaleX = 1; }\n        this.scene.tweens.add({\n            targets: gameObject,\n            duration: 50,\n            ease: "Linear",\n            props: {\n                scaleX: { value: .5 * scaleX },\n                scaleY: { value: .5 },\n            },\n            yoyo: true,\n            repeat: 0,\n        });\n        gameObject.scaleX = scaleX;\n        gameObject.scaleY = 1;\n    };\n    BagPanel.prototype.refreshDataList = function (checkItemList) {\n        if (!checkItemList) {\n            utils__WEBPACK_IMPORTED_MODULE_4__["Logger"].getInstance().error("checkItemList is undefiend");\n            return;\n        }\n        var items = checkItemList.slice((this.mPageIndex - 1) * BagPanel.PageMaxCount, this.mPageIndex * BagPanel.PageMaxCount);\n        var len = BagPanel.PageMaxCount;\n        var item;\n        for (var i = 0; i < len; i++) {\n            item = this.bagSlotList[i];\n            if (!item)\n                continue;\n            item.dataChange(items[i]);\n        }\n    };\n    BagPanel.prototype.closeHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_5__["ModuleName"].BAG_NAME + "_close");\n    };\n    BagPanel.prototype.onFocusHandler = function () {\n        if (!this.mWorld || !this.mWorld.inputManager) {\n            return;\n        }\n        // this.mWorld.inputManager.enable = false;\n        if (!this.mInputText)\n            return;\n        this.mInputText.on("textchange", this.checkChinese, this);\n        this.mInputText.setText("");\n    };\n    BagPanel.prototype.onBlurHandler = function () {\n        if (!this.mWorld || !this.mWorld.inputManager || !this.mInputText) {\n            return;\n        }\n        // this.mWorld.inputManager.enable = false;\n        this.mInputText.on("textchange", this.checkChinese, this);\n        this.mInputText.setText(this.mBaseStr);\n    };\n    BagPanel.prototype.checkChinese = function () {\n        var _this = this;\n        var str = this.mInputText.text;\n        if (str.length < 1 || !utils__WEBPACK_IMPORTED_MODULE_4__["Tool"].checkChinese(str) || str === this.mBaseStr) {\n            this.refreshDataList(this.mDataList);\n            return;\n        }\n        // const itemList: op_gameconfig.IItem[] = this.mWorld.roomManager.currentRoom.playerManager.actor.package.items;\n        this.mDataList.forEach(function (item) {\n            if (item) {\n                if (utils__WEBPACK_IMPORTED_MODULE_4__["Tool"].checkItemName(item.name, _this.mInputText.text)) {\n                    _this.mCheckList.push(item);\n                }\n            }\n        });\n        this.refreshDataList(this.mCheckList);\n    };\n    BagPanel.PageMaxCount = 32;\n    return BagPanel;\n}(_components__WEBPACK_IMPORTED_MODULE_3__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/bag/bagView/bagPanel.ts?')},"./src/render/ui/bag/basebag.ts":function(module,exports){eval("\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/bag/basebag.ts?")},"./src/render/ui/bag/baseitem.ts":function(module,exports){eval("\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/bag/baseitem.ts?")},"./src/render/ui/bag/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _basebag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basebag */ "./src/render/ui/bag/basebag.ts");\n/* harmony import */ var _basebag__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_basebag__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _basebag__WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _basebag__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _baseitem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseitem */ "./src/render/ui/bag/baseitem.ts");\n/* harmony import */ var _baseitem__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_baseitem__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _baseitem__WEBPACK_IMPORTED_MODULE_1__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _baseitem__WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _IListItemRender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IListItemRender */ "./src/render/ui/bag/IListItemRender.ts");\n/* harmony import */ var _IListItemRender__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_IListItemRender__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _IListItemRender__WEBPACK_IMPORTED_MODULE_2__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _IListItemRender__WEBPACK_IMPORTED_MODULE_2__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _bagView_bagPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bagView/bagPanel */ "./src/render/ui/bag/bagView/bagPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BagPanel", function() { return _bagView_bagPanel__WEBPACK_IMPORTED_MODULE_3__["BagPanel"]; });\n\n/* harmony import */ var _storage_storagePanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./storage/storagePanel */ "./src/render/ui/bag/storage/storagePanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StoragePanel", function() { return _storage_storagePanel__WEBPACK_IMPORTED_MODULE_4__["StoragePanel"]; });\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/bag/index.ts?')},"./src/render/ui/bag/storage/storagePanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StoragePanel", function() { return StoragePanel; });\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../components */ "./src/render/ui/components/index.ts");\n/* harmony import */ var _components_item_slot__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components/item.slot */ "./src/render/ui/components/item.slot.ts");\n/* harmony import */ var _components_nine_patch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/nine.patch */ "./src/render/ui/components/nine.patch.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar StoragePanel = /** @class */ (function (_super) {\n    __extends(StoragePanel, _super);\n    function StoragePanel(uiManager) {\n        return _super.call(this, uiManager.scene, uiManager.render) || this;\n    }\n    StoragePanel.prototype.resize = function (wid, hei) {\n        var size = this.mWorld.getSize();\n        this.x = size.width + wid >> 1;\n        this.y = size.height + hei - 200;\n    };\n    StoragePanel.prototype.destroy = function () {\n        if (this.mBagItemSlotList) {\n            var len = this.mBagItemSlotList.length;\n            for (var i = 0; i < len; i++) {\n                var item = this.mBagItemSlotList[i];\n                if (!item)\n                    continue;\n                item.destroy();\n                item = null;\n            }\n            this.mBagItemSlotList = null;\n        }\n        this.mWorld = null;\n        _super.prototype.destroy.call(this);\n    };\n    StoragePanel.prototype.addListen = function () {\n        this.mClsBtn.on("pointerup", this.hide, this);\n    };\n    StoragePanel.prototype.removeListen = function () {\n        this.mClsBtn.off("pointerup", this.hide, this);\n    };\n    StoragePanel.prototype.init = function () {\n        if (this.mInitialized)\n            return;\n        _super.prototype.init.call(this);\n        this.mBg = new _components_nine_patch__WEBPACK_IMPORTED_MODULE_4__["NinePatch"](this.scene, 0, 0, 500, 350, utils__WEBPACK_IMPORTED_MODULE_1__["Background"].getName(), null, utils__WEBPACK_IMPORTED_MODULE_1__["Background"].getConfig());\n        this.addAt(this.mBg, 0);\n        this.setSize(this.mBg.width, this.mBg.height);\n        this.mBorder = new _components_nine_patch__WEBPACK_IMPORTED_MODULE_4__["NinePatch"](this.scene, 0, 0, this.mBg.width - 10, this.mBg.height - 30, utils__WEBPACK_IMPORTED_MODULE_1__["Border"].getName(), null, utils__WEBPACK_IMPORTED_MODULE_1__["Border"].getConfig());\n        this.mBorder.x = this.mBg.x;\n        this.mBorder.y = this.mBg.y + 10;\n        this.addAt(this.mBorder, 1);\n        this.setSize(this.mBg.width, this.mBg.height);\n        var titleIcon = this.scene.make.image(undefined, false);\n        titleIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        titleIcon.setTexture(this.mResStr, "itemBagView_title.png");\n        titleIcon.x = (-this.mBg.width >> 1) + 80;\n        titleIcon.y = -this.mBg.height >> 1;\n        this.add(titleIcon);\n        var titleTF = this.scene.make.text(undefined, false);\n        titleTF.setFontFamily("Tahoma");\n        titleTF.setFontStyle("bold");\n        titleTF.setFontSize(20);\n        titleTF.setText("");\n        titleTF.x = titleIcon.x + titleIcon.width - 10;\n        titleTF.y = titleIcon.y - (titleTF.height >> 1);\n        this.add(titleTF);\n        var itemSlot;\n        var tmpX = 0;\n        var tmpY = 0;\n        // \n        this.mBagItemSlotList = [];\n        for (var i = 0; i < 9; i++) {\n            tmpX = i % 9 * 60 + 32 - 724 / 2;\n            tmpY = Math.floor(i / 9) * 60 - 55;\n            itemSlot = new _components_item_slot__WEBPACK_IMPORTED_MODULE_3__["ItemSlot"](this.scene, this.mWorld, this, tmpX, tmpY, this.mResStr, this.mResPng, this.mResJson, "bagView_slot.png", "bagView_itemSelect.png");\n            itemSlot.createUI();\n            this.mBagItemSlotList.push(itemSlot);\n        }\n        this.mClsBtn = new _components__WEBPACK_IMPORTED_MODULE_2__["IconBtn"](this.scene, this.mWorld, {\n            key: "Close_Btn", bgResKey: "clsBtn", bgTextures: ["btn_normal", "btn_over", "btn_click"],\n            iconResKey: "", iconTexture: "", scale: 1, pngUrl: "ui/common/common_clsBtn.png", jsonUrl: "ui/common/common_clsBtn.json"\n        });\n        this.mClsBtn.x = (this.width >> 1) - 65;\n        this.mClsBtn.y = -this.height >> 1;\n        this.mClsBtn.scaleX = this.mClsBtn.scaleY = 2;\n        this.add(this.mClsBtn);\n    };\n    StoragePanel.prototype.preload = function () {\n        if (!this.scene) {\n            return;\n        }\n        this.mResStr = "bagView";\n        this.mResPng = "ui/bag/bagView.png";\n        this.mResJson = "ui/bag/bagView.json";\n        this.scene.load.image(utils__WEBPACK_IMPORTED_MODULE_1__["Border"].getName(), utils__WEBPACK_IMPORTED_MODULE_1__["Border"].getPNG());\n        this.scene.load.image(utils__WEBPACK_IMPORTED_MODULE_1__["Background"].getName(), utils__WEBPACK_IMPORTED_MODULE_1__["Background"].getPNG());\n        this.scene.load.atlas("clsBtn", utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes("ui/common/common_clsBtn.png"), utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes("ui/common/common_clsBtn.json"));\n        this.scene.load.atlas(this.mResStr, utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes(this.mResPng), utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes(this.mResJson));\n        _super.prototype.preload.call(this);\n    };\n    StoragePanel.prototype.tweenComplete = function (show) {\n        _super.prototype.tweenComplete.call(this, show);\n        if (show)\n            this.mWorld.uiManager.getMediator(structure__WEBPACK_IMPORTED_MODULE_0__["ModuleName"].STORAGE_NAME).resize();\n    };\n    return StoragePanel;\n}(_components__WEBPACK_IMPORTED_MODULE_2__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/bag/storage/storagePanel.ts?')},"./src/render/ui/components/MoreButtonPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MoreButtonPanel", function() { return MoreButtonPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! . */ "./src/render/ui/components/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar MoreButtonPanel = /** @class */ (function (_super) {\n    __extends(MoreButtonPanel, _super);\n    function MoreButtonPanel(scene, width, height, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.dpr = dpr;\n        _this.setSize(width, height);\n        _this.init();\n        return _this;\n    }\n    MoreButtonPanel.prototype.setItemData = function (data, category) {\n        this.itemdata = data;\n        this.setLayoutType(category);\n    };\n    /**\n     *\n     * @param type 1 || 5 -  3 - \n     */\n    MoreButtonPanel.prototype.setLayoutType = function (type) {\n        this.place.visible = false;\n        this.sell.visible = false;\n        this.removeListen();\n        if (type === 1 || type === 5) {\n            this.place.visible = true;\n            this.place.y = this.height * 0.5 - this.place.height * 0.5;\n            this.topbg.y = this.place.y - this.place.height * 0.5 - this.topbg.height * 0.5;\n            this.place.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onPlaceHandler, this);\n        }\n        else if (type === 3) {\n            this.sell.visible = true;\n            this.sell.y = this.height * 0.5 - this.sell.height * 0.5;\n            this.topbg.y = this.sell.y - this.sell.height * 0.5 - this.topbg.height * 0.5;\n            this.sell.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSellHandler, this);\n        }\n        this.on("pointerdown", this.hide, this);\n    };\n    MoreButtonPanel.prototype.setHandler = function (send) {\n        this.send = send;\n    };\n    MoreButtonPanel.prototype.show = function () {\n        this.addListen();\n        this.visible = true;\n    };\n    MoreButtonPanel.prototype.hide = function () {\n        this.removeListen();\n        this.visible = false;\n    };\n    MoreButtonPanel.prototype.addListen = function () {\n        // this.place.on(ClickEvent.Tap, this.onPlaceHandler, this);\n        // this.sell.on(ClickEvent.Tap, this.onSellHandler, this);\n        // this.on("pointerdown", this.hide, this);\n    };\n    MoreButtonPanel.prototype.removeListen = function () {\n        this.place.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onPlaceHandler, this);\n        this.sell.off(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onSellHandler, this);\n        this.off("pointerdown", this.hide, this);\n    };\n    MoreButtonPanel.prototype.init = function () {\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0x000000, 0.66);\n        this.blackGraphic.fillRect(0, 0, this.width, this.height);\n        this.blackGraphic.x = -this.width * 0.5;\n        this.blackGraphic.y = -this.height * 0.5;\n        this.topbg = new ___WEBPACK_IMPORTED_MODULE_3__["ThreeSlicePath"](this.scene, 0, 0, 327 * this.dpr, 10 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, ["bag_more_left", "bag_more_middle", "bag_more_right"]);\n        this.place = new ___WEBPACK_IMPORTED_MODULE_3__["BackgroundScaleButton"](this.scene, 327 * this.dpr, 53 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "bag_more_uncheck", "bag_more_select", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("furni_bag.add"), this.dpr, 1, false);\n        this.place.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].blackStyle(this.dpr, 20));\n        this.sell = new ___WEBPACK_IMPORTED_MODULE_3__["BackgroundScaleButton"](this.scene, 327 * this.dpr, 53 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].uicommon, "bag_more_uncheck", "bag_more_select", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.sold"), this.dpr, 1, false);\n        this.sell.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].blackStyle(this.dpr, 20));\n        this.add([this.blackGraphic, this.topbg, this.place, this.sell]);\n        this.setInteractive();\n    };\n    MoreButtonPanel.prototype.onPlaceHandler = function () {\n        if (this.send)\n            this.send.runWith(["place", this.itemdata]);\n        this.hide();\n    };\n    MoreButtonPanel.prototype.onSellHandler = function () {\n        if (this.send)\n            this.send.runWith(["sell", this.itemdata]);\n        this.hide();\n    };\n    return MoreButtonPanel;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/MoreButtonPanel.ts?')},"./src/render/ui/components/TextButton.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextButton", function() { return TextButton; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar TextButton = /** @class */ (function (_super) {\n    __extends(TextButton, _super);\n    function TextButton(scene, dpr, scale, text, x, y) {\n        if (scale === void 0) { scale = 1; }\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.normalColor = "#FFFFFF";\n        _this.changeColor = "#0099cc";\n        _this.mText = _this.scene.make.text({\n            text: text,\n            style: {\n                fontSize: 15 * window.devicePixelRatio,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_0__["Font"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5, 0.5);\n        _this.add(_this.mText);\n        return _this;\n        // this.on("pointerup", this.onPointerUpHandler, this);\n    }\n    TextButton.prototype.setText = function (val) {\n        this.mText.text = val;\n    };\n    TextButton.prototype.setFontSize = function (size) {\n        this.mText.setFontSize(size);\n    };\n    TextButton.prototype.setFontStyle = function (val) {\n        this.mText.setFontStyle(val);\n    };\n    TextButton.prototype.setStyle = function (style) {\n        this.mText.setStyle(style);\n    };\n    TextButton.prototype.setNormalColor = function (color) {\n        this.normalColor = color;\n    };\n    TextButton.prototype.setChangeColor = function (color) {\n        this.changeColor = color;\n    };\n    TextButton.prototype.changeDown = function () {\n        this.mText.setFill(this.changeColor);\n    };\n    TextButton.prototype.changeNormal = function () {\n        this.mText.setFill(this.normalColor);\n    };\n    TextButton.prototype.onPointerUpHandler = function (pointer) {\n        this.emit("click", pointer, this);\n    };\n    Object.defineProperty(TextButton.prototype, "text", {\n        get: function () {\n            return this.mText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return TextButton;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/TextButton.ts?')},"./src/render/ui/components/alert.view.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlertView", function() { return AlertView; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Buttons", function() { return Buttons; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _base_panel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.panel */ "./src/render/ui/components/base.panel.ts");\n/* harmony import */ var _scenes_main_ui_scene__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../scenes/main.ui.scene */ "./src/render/scenes/main.ui.scene.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar AlertView = /** @class */ (function (_super) {\n    __extends(AlertView, _super);\n    function AlertView(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.uiManager = uiManager;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_1__["ModuleName"].ALERTVIEW_NAME;\n        _this.disInteractive();\n        return _this;\n    }\n    AlertView.prototype.show = function (config) {\n        this.mShowData = config;\n        _super.prototype.show.call(this, config);\n        if (this.mInitialized) {\n            // this.render.uiManager.getUILayerManager().addToDialogLayer(this);\n            this.mScene.layerManager.addToLayer(_scenes_main_ui_scene__WEBPACK_IMPORTED_MODULE_4__["MainUIScene"].LAYER_DIALOG, this);\n            var ox = config.ox, oy = config.oy;\n            this.x = (ox || this.scene.cameras.main.width / 2);\n            this.y = (oy || this.scene.cameras.main.height / 2);\n            this.mBackGround.clear();\n            this.mBackGround.fillStyle(0xffffff, 0);\n            this.mBackGround.fillRect(-this.x, -this.y, this.cameraWidth, this.cameraHeight);\n            this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(-this.x, -this.y, this.cameraWidth, this.cameraHeight), Phaser.Geom.Rectangle.Contains);\n            this.mContent.setText(config.text);\n            if (config.title) {\n                this.mTitleLabel.setText(config.title);\n            }\n            // if (config.btns === Buttons.Ok) {\n            // }\n            var btns = config.btns;\n            if (btns === Buttons.Cancel) {\n                this.remove(this.mOkBtn);\n                this.mCancelBtn.x = 0;\n            }\n            else if (btns === Buttons.Ok) {\n                this.remove(this.mCancelBtn);\n                this.mOkBtn.x = 0;\n            }\n        }\n    };\n    AlertView.prototype.preload = function () {\n        this.addAtlas(this.key, "pica_alert/pica_alert.png", "pica_alert/pica_alert.json");\n        _super.prototype.preload.call(this);\n    };\n    AlertView.prototype.setOKText = function (val) {\n        this.mOkText = val;\n        if (this.mOkBtn) {\n            this.mOkBtn.setText(val);\n        }\n        return this;\n    };\n    AlertView.prototype.init = function () {\n        var zoom = this.mWorld.uiScale || 1;\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.add(this.mBackGround);\n        var bg = this.scene.make.image({\n            key: this.key,\n            frame: "bg.png"\n        }, false);\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        var title = this.scene.make.image({\n            key: this.key,\n            frame: "title.png"\n        }, false);\n        title.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        title.y = -bg.height / 2;\n        this.mTitleLabel = this.scene.make.text({\n            text: utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.tips"),\n            style: {\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n                fontSize: 12 * this.dpr * zoom,\n                color: "#905B06"\n            }\n        }, false).setOrigin(0.5);\n        this.mTitleLabel.y = title.y;\n        this.mContent = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, 0, -11 * this.dpr, "", {\n            fontSize: 12 * this.dpr * zoom + "px",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n            color: "#0",\n            wrap: {\n                mode: "char",\n                width: 218 * this.dpr\n            }\n        });\n        this.mContent.setOrigin(0.5, 0.5);\n        this.mOkBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "yellow_btn.png", undefined, this.mOkText || utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.confirm"));\n        this.mOkBtn.setTextStyle({\n            color: "#905B06",\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n            fontSize: 13 * this.dpr * zoom\n        });\n        this.mOkBtn.x = (bg.width - this.mOkBtn.displayWidth) / 2 - 38 * this.dpr;\n        this.mOkBtn.y = (bg.height - this.mOkBtn.displayHeight) / 2 - 16 * this.dpr;\n        this.mOkBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onOkHandler, this);\n        this.mCancelBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "red_btn.png", undefined, utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.cancel"));\n        this.mCancelBtn.setTextStyle({\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n            fontSize: 13 * this.dpr * zoom\n        });\n        this.mCancelBtn.x = -(bg.width - this.mCancelBtn.displayWidth) / 2 + 38 * this.dpr;\n        this.mCancelBtn.y = this.mOkBtn.y;\n        this.mCancelBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onCancelHandler, this);\n        this.add([bg, title, this.mTitleLabel, this.mTitleLabel, this.mContent, this.mOkBtn, this.mCancelBtn]);\n        _super.prototype.init.call(this);\n    };\n    AlertView.prototype.onOkHandler = function () {\n        if (!this.mShowData) {\n            return;\n        }\n        var callback = this.mShowData.callback;\n        if (callback) {\n            callback.call(this.mShowData.content);\n        }\n        this.closePanel();\n    };\n    AlertView.prototype.onCancelHandler = function () {\n        var callback = this.mShowData.cancelback;\n        if (callback) {\n            callback.call(this.mShowData.content);\n        }\n        this.closePanel();\n    };\n    AlertView.prototype.closePanel = function () {\n        if (this.parentContainer) {\n            this.parentContainer.remove(this);\n        }\n        if (!this.mShowData || this.mShowData.once !== false) {\n            this.destroy();\n            this.mShowData = undefined;\n        }\n    };\n    return AlertView;\n}(_base_panel__WEBPACK_IMPORTED_MODULE_3__["BasePanel"]));\n\nvar Buttons;\n(function (Buttons) {\n    Buttons[Buttons["Ok"] = 0] = "Ok";\n    Buttons[Buttons["Cancel"] = 1] = "Cancel";\n    Buttons[Buttons["OKAndCancel"] = 2] = "OKAndCancel";\n})(Buttons || (Buttons = {}));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/alert.view.ts?')},"./src/render/ui/components/background.scale.button.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BackgroundScaleButton", function() { return BackgroundScaleButton; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _button_event_dispatch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./button.event.dispatch */ "./src/render/ui/components/button.event.dispatch.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar BackgroundScaleButton = /** @class */ (function (_super) {\n    __extends(BackgroundScaleButton, _super);\n    function BackgroundScaleButton(scene, width, height, key, frame, downFrame, text, dpr, scale, tweenBoo, music) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.mDownTime = 0;\n        _this.dpr = dpr || 1;\n        // this.scale = scale || 1;\n        _this.zoom = scale || 1;\n        _this.soundGroup = {\n            up: {\n                key: "click",\n            }\n        };\n        if (tweenBoo === undefined)\n            tweenBoo = true;\n        _this.mTweenBoo = tweenBoo;\n        Object.assign(_this.soundGroup, music);\n        _this.mKey = key;\n        _this.mFrame = frame;\n        _this.mDownFrame = downFrame;\n        _this.setSize(width, height);\n        _this.createBackground();\n        if (text) {\n            _this.mText = _this.scene.make.text({ color: "#ffffff", fontSize: 16 * dpr }, false)\n                .setOrigin(0.5, 0.5)\n                .setText(text);\n            if (_this.mBackground) {\n                _this.mText.setSize(_this.mBackground.width, _this.mBackground.height);\n            }\n            _this.add(_this.mText);\n        }\n        _this.setInteractive();\n        _this.addListen();\n        return _this;\n    }\n    Object.defineProperty(BackgroundScaleButton.prototype, "background", {\n        get: function () {\n            return this.mBackground;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BackgroundScaleButton.prototype, "text", {\n        get: function () {\n            return this.mText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BackgroundScaleButton.prototype.setEnable = function (value, tint) {\n        if (tint === void 0) { tint = true; }\n        if (value) {\n            if (this.mBackground) {\n                this.mBackground.clearTint();\n                if (this.mText)\n                    this.mText.clearTint();\n            }\n            this.setInteractive();\n        }\n        else {\n            if (this.mBackground && tint) {\n                this.mBackground.setTintFill(0x666666);\n                if (this.mText)\n                    this.mText.setTintFill(0x777777);\n            }\n            this.removeInteractive();\n        }\n    };\n    Object.defineProperty(BackgroundScaleButton.prototype, "tweenEnable", {\n        set: function (value) {\n            this.mTweenBoo = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BackgroundScaleButton.prototype.mute = function (boo) {\n        this.silent = boo;\n    };\n    BackgroundScaleButton.prototype.changeNormal = function () {\n        this.setBgFrame(this.mFrame);\n    };\n    BackgroundScaleButton.prototype.changeDown = function () {\n        if (this.mDownFrame) {\n            this.setBgFrame(this.mDownFrame);\n        }\n    };\n    BackgroundScaleButton.prototype.setFrame = function (frame) {\n        this.setBgFrame(frame);\n    };\n    BackgroundScaleButton.prototype.setText = function (val) {\n        if (this.mText) {\n            this.mText.setText(val);\n        }\n    };\n    BackgroundScaleButton.prototype.setTextStyle = function (style) {\n        if (this.mText) {\n            this.mText.setStyle(style);\n        }\n    };\n    BackgroundScaleButton.prototype.setFontStyle = function (val) {\n        if (this.mText) {\n            this.mText.setFontStyle(val);\n        }\n    };\n    BackgroundScaleButton.prototype.setTextOffset = function (x, y) {\n        if (this.mText) {\n            this.mText.setPosition(x, y);\n        }\n    };\n    BackgroundScaleButton.prototype.setTextColor = function (color) {\n        if (this.mText) {\n            this.mText.setColor(color);\n        }\n    };\n    BackgroundScaleButton.prototype.setFrameNormal = function (normal, down) {\n        this.mFrame = normal;\n        this.mDownFrame = (down ? down : normal);\n        this.changeNormal();\n        return this;\n    };\n    BackgroundScaleButton.prototype.createBackground = function () {\n        if (this.mFrame) {\n            this.mBackground = this.scene.make.image({ key: this.mKey, frame: this.mFrame });\n            this.mBackground.displayWidth = this.width;\n            this.mBackground.displayHeight = this.height;\n            this.add(this.mBackground);\n        }\n    };\n    BackgroundScaleButton.prototype.setBgFrame = function (frame) {\n        if (this.mBackground) {\n            this.mBackground.setFrame(frame);\n            this.mBackground.displayWidth = this.width;\n            this.mBackground.displayHeight = this.height;\n        }\n    };\n    BackgroundScaleButton.prototype.EventStateChange = function (state) {\n        switch (state) {\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Up:\n                this.changeNormal();\n                break;\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Down:\n                this.changeDown();\n                break;\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap:\n                this.changeNormal();\n                break;\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Out:\n                this.changeNormal();\n                break;\n        }\n    };\n    return BackgroundScaleButton;\n}(_button_event_dispatch__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/background.scale.button.ts?')},"./src/render/ui/components/base.panel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BasePanel", function() { return BasePanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _scenes_main_ui_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../scenes/main.ui.scene */ "./src/render/scenes/main.ui.scene.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar BasePanel = /** @class */ (function (_super) {\n    __extends(BasePanel, _super);\n    function BasePanel(scene, render) {\n        var _this = _super.call(this, scene, render) || this;\n        _this.mTweening = false;\n        _this.mWidth = 0;\n        _this.mHeight = 0;\n        _this.mReloadTimes = 0;\n        _this.key = "";\n        _this.uiLayer = _scenes_main_ui_scene__WEBPACK_IMPORTED_MODULE_1__["MainUIScene"].LAYER_UI;\n        _this.exported = false;\n        _this.exportListeners = [];\n        _this.mSynchronize = false;\n        if (!scene.sys)\n            utils__WEBPACK_IMPORTED_MODULE_2__["Logger"].getInstance().error("no scene system");\n        _this.mScene = scene;\n        _this.mWorld = render;\n        _this.mInitialized = false;\n        _this.render = render;\n        if (render) {\n            _this.dpr = Math.round(render.uiRatio || 1);\n            _this.scale = _this.mWorld.uiScale;\n        }\n        return _this;\n    }\n    Object.defineProperty(BasePanel.prototype, "initialized", {\n        get: function () {\n            return this.mInitialized;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BasePanel.prototype.startLoad = function () {\n        if (!this.scene) {\n            return;\n        }\n        this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE, this.onFileKeyComplete, this);\n        this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.loadComplete, this);\n        this.scene.load.start();\n    };\n    BasePanel.prototype.show = function (param) {\n        this.mSynchronize = false;\n        _super.prototype.show.call(this, param);\n        if (!this.mInitialized)\n            return;\n        if (!this.mSynchronize)\n            this.onShow();\n    };\n    BasePanel.prototype.hide = function () {\n        _super.prototype.hide.call(this);\n        this.onHide();\n    };\n    BasePanel.prototype.destroy = function () {\n        if (this.render && this.render.hasOwnProperty(this.key))\n            delete this.render[this.key];\n        this.exportListeners.length = 0;\n        _super.prototype.destroy.call(this);\n    };\n    BasePanel.prototype.addExportListener = function (f) {\n        if (this.exported) {\n            f();\n            return;\n        }\n        this.exportListeners.push(f);\n    };\n    BasePanel.prototype.preload = function () {\n        var _this = this;\n        this.mPreLoad = true;\n        if (!this.scene) {\n            return;\n        }\n        var index = 0;\n        if (this.mResources) {\n            this.mResources.forEach(function (resource, key) {\n                if (!_this.scene.textures.exists(key)) {\n                    index++;\n                    _this.addResources(key, resource);\n                }\n            }, this);\n        }\n        if (index > 0) {\n            this.startLoad();\n        }\n        else {\n            if (this.mResources)\n                this.mResources.clear();\n            this.mPreLoad = false;\n            this.init();\n            this.mSynchronize = true;\n        }\n    };\n    BasePanel.prototype.init = function () {\n        this.mScene.layerManager.addToLayer(this.uiLayer, this);\n        _super.prototype.init.call(this);\n        this.setLinear(this.key);\n        utils__WEBPACK_IMPORTED_MODULE_2__["Logger"].getInstance().debug("init========", this.key);\n        this.__exportProperty();\n        this.onInitialized();\n    };\n    BasePanel.prototype.setLinear = function (key) {\n        if (!key) {\n            return;\n        }\n        var frame = this.scene.textures.getFrame(key, "__BASE");\n        if (frame)\n            frame.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n    };\n    BasePanel.prototype.addResources = function (key, resource) {\n        if (resource.type) {\n            if (this.scene.load[resource.type]) {\n                this.scene.load[resource.type](key, utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getUIRes(resource.dpr, resource.texture), utils__WEBPACK_IMPORTED_MODULE_2__["Url"].getUIRes(resource.dpr, resource.data));\n            }\n        }\n        _super.prototype.addResources.call(this, key, resource);\n    };\n    Object.defineProperty(BasePanel.prototype, "scaleWidth", {\n        get: function () {\n            var width = this.scene.cameras.main.width / this.scale;\n            return width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePanel.prototype, "scaleHeight", {\n        get: function () {\n            var height = this.scene.cameras.main.height / this.scale;\n            return height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePanel.prototype, "cameraWidth", {\n        get: function () {\n            var width = this.scene.cameras.main.width;\n            return width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePanel.prototype, "cameraHeight", {\n        get: function () {\n            var height = this.scene.cameras.main.height;\n            return height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BasePanel.prototype.__exportProperty = function () {\n        if (!this.render) {\n            return;\n        }\n        return this.render.exportProperty(this, this.render, this.key).onceReady(this.exportComplete.bind(this));\n    };\n    BasePanel.prototype.exportComplete = function () {\n        this.exported = true;\n        for (var _i = 0, _a = this.exportListeners; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener();\n        }\n        this.exportListeners.length = 0;\n    };\n    BasePanel.prototype.onShow = function () {\n    };\n    BasePanel.prototype.onHide = function () {\n    };\n    BasePanel.prototype.onInitialized = function () {\n    };\n    return BasePanel;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Panel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/base.panel.ts?')},"./src/render/ui/components/button.event.dispatch.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtonEventDispatcher", function() { return ButtonEventDispatcher; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar ButtonEventDispatcher = /** @class */ (function (_super) {\n    __extends(ButtonEventDispatcher, _super);\n    function ButtonEventDispatcher(scene, x, y, tweenBoo, music) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.mDownTime = 0;\n        _this.mPressDelay = 1000;\n        _this.mIsMove = false;\n        _this.mTweening = false;\n        _this.tweenScale = 0.9;\n        _this.mTweenBoo = true;\n        _this.mDuration = 45;\n        _this.soundGroup = {\n            up: {\n                key: "click",\n            }\n        };\n        if (tweenBoo === undefined)\n            tweenBoo = true;\n        _this.mTweenBoo = tweenBoo;\n        Object.assign(_this.soundGroup, music);\n        return _this;\n    }\n    ButtonEventDispatcher.prototype.addListen = function () {\n        this.removeListen();\n        this.on("pointerdown", this.onPointerDownHandler, this);\n        this.on("pointerup", this.onPointerUpHandler, this);\n        this.on("pointerout", this.onPointerOutHandler, this);\n        this.on("pointermove", this.onPointerMoveHandler, this);\n    };\n    ButtonEventDispatcher.prototype.removeListen = function () {\n        this.off("pointerdown", this.onPointerDownHandler, this);\n        this.off("pointerup", this.onPointerUpHandler, this);\n        this.off("pointerout", this.onPointerOutHandler, this);\n        this.off("pointermove", this.onPointerMoveHandler, this);\n    };\n    Object.defineProperty(ButtonEventDispatcher.prototype, "enable", {\n        set: function (value) {\n            if (value) {\n                this.addListen();\n                this.setInteractive();\n            }\n            else {\n                this.removeListen();\n                this.removeInteractive();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ButtonEventDispatcher.prototype.onPointerMoveHandler = function (pointer) {\n        if (this.soundGroup && this.soundGroup.move)\n            this.playSound(this.soundGroup.move);\n        if (!this.interactiveBoo)\n            return;\n        this.mIsMove = true;\n        this.EventStateChange(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Move);\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Move);\n    };\n    ButtonEventDispatcher.prototype.onPointerUpHandler = function (pointer) {\n        if (!this.interactiveBoo) {\n            if (this.soundGroup && this.soundGroup.disabled)\n                this.playSound(this.soundGroup.disabled);\n            return;\n        }\n        if (this.mTweenBoo) {\n            this.tween(false, this.pointerUp.bind(this, pointer));\n        }\n        else {\n            this.pointerUp(pointer);\n        }\n    };\n    ButtonEventDispatcher.prototype.pointerUp = function (pointer) {\n        var isdown = this.checkPointerInBounds(this, pointer.worldX, pointer.worldY);\n        this.EventStateChange(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Up);\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Up, this);\n        if (isdown && this.mIsDown) {\n            if (this.soundGroup && this.soundGroup.up)\n                this.playSound(this.soundGroup.up);\n            this.EventStateChange(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap);\n            this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, pointer, this);\n        }\n        clearTimeout(this.mPressTime);\n        this.mIsMove = false;\n        this.mIsDown = false;\n        this.mDownTime = 0;\n    };\n    ButtonEventDispatcher.prototype.onPointerOutHandler = function (pointer) {\n        if (this.mTweenBoo && pointer.isDown) {\n            this.tween(false);\n        }\n        var isint = this.checkPointerInBounds(this, pointer.worldX, pointer.worldY);\n        if (!isint)\n            this.EventStateChange(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Out);\n    };\n    ButtonEventDispatcher.prototype.onPointerDownHandler = function (pointer) {\n        var _this = this;\n        if (this.mTweening)\n            return;\n        if (!this.interactiveBoo) {\n            if (this.soundGroup && this.soundGroup.disabled)\n                this.playSound(this.soundGroup.disabled);\n            return;\n        }\n        if (this.soundGroup && this.soundGroup.down)\n            this.playSound(this.soundGroup.down);\n        this.mDownTime = Date.now();\n        this.mPressTime = setTimeout(function () {\n            _this.EventStateChange(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold);\n            _this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, _this);\n        }, this.mPressDelay);\n        if (this.mTweenBoo)\n            this.tween(true);\n        this.EventStateChange(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Down);\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Down, this);\n        this.mIsDown = true;\n    };\n    ButtonEventDispatcher.prototype.checkPointerInBounds = function (gameObject, pointerx, pointery) {\n        if (!this.mRectangle) {\n            this.mRectangle = new Phaser.Geom.Rectangle(0, 0, 0, 0);\n        }\n        var worldMatrix = gameObject.getWorldTransformMatrix();\n        var zoom = worldMatrix.scaleX;\n        this.mRectangle.left = -gameObject.width / 2;\n        this.mRectangle.right = gameObject.width / 2;\n        this.mRectangle.top = -gameObject.height / 2;\n        this.mRectangle.bottom = gameObject.height / 2;\n        var x = (pointerx - worldMatrix.tx) / zoom;\n        var y = (pointery - worldMatrix.ty) / zoom;\n        if (this.mRectangle.left <= x && this.mRectangle.right >= x && this.mRectangle.top <= y && this.mRectangle.bottom >= y) {\n            return true;\n        }\n        return false;\n    };\n    ButtonEventDispatcher.prototype.EventStateChange = function (state) {\n    };\n    ButtonEventDispatcher.prototype.tween = function (show, callback) {\n        var _this = this;\n        this.mTweening = true;\n        var scale = show ? this.tweenScale : 1;\n        if (this.mTween) {\n            this.mTween.stop();\n            this.mTween.remove();\n            this.mTween = undefined;\n        }\n        this.mTween = this.scene.tweens.add({\n            targets: this,\n            duration: this.mDuration,\n            ease: "Linear",\n            props: {\n                scaleX: { value: scale },\n                scaleY: { value: scale },\n            },\n            onComplete: function () {\n                _this.tweenComplete(show);\n                if (callback)\n                    callback();\n            },\n            onCompleteParams: [this]\n        });\n    };\n    ButtonEventDispatcher.prototype.tweenComplete = function (show) {\n        this.mTweening = false;\n        if (this.mTween) {\n            this.mTween.stop();\n            this.mTween.remove();\n            this.mTween = undefined;\n        }\n    };\n    return ButtonEventDispatcher;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BaseUI"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/button.event.dispatch.ts?')},"./src/render/ui/components/checkbox.group.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CheckboxGroup", function() { return CheckboxGroup; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar CheckboxGroup = /** @class */ (function (_super) {\n    __extends(CheckboxGroup, _super);\n    function CheckboxGroup() {\n        var _this = _super.call(this) || this;\n        _this.mList = [];\n        return _this;\n    }\n    CheckboxGroup.prototype.appendItem = function (item) {\n        this.mList.push(item);\n        item.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onGameObjectUpHandler, this);\n        return this;\n    };\n    CheckboxGroup.prototype.appendItemAll = function (items) {\n        this.mList = this.mList.concat(items);\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            item.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onGameObjectUpHandler, this);\n        }\n        return this;\n    };\n    CheckboxGroup.prototype.removeItem = function (item) {\n        this.mList = this.mList.filter(function (button) { return button !== item; });\n        item.removeAllListeners();\n        return this;\n    };\n    CheckboxGroup.prototype.selectIndex = function (index) {\n        if (index < 0) {\n            index = 0;\n        }\n        if (index >= this.mList.length) {\n            index = this.mList.length - 1;\n        }\n        if (this.mList.length > 0) {\n            this.select(this.mList[index]);\n        }\n        return this;\n    };\n    CheckboxGroup.prototype.select = function (item) {\n        if (this.mSelectedButton === item) {\n            return;\n        }\n        if (this.mSelectedButton) {\n            this.mSelectedButton.selected = false;\n        }\n        item.changeDown();\n        this.mSelectedButton = item;\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Selected, item);\n    };\n    CheckboxGroup.prototype.reset = function () {\n        var _this = this;\n        if (this.mList) {\n            this.mList.forEach(function (item) {\n                _this.removeItem(item);\n            });\n        }\n    };\n    CheckboxGroup.prototype.destroy = function () {\n        var _this = this;\n        if (this.mList) {\n            this.mList.forEach(function (item) {\n                _this.removeItem(item);\n                item.destroy();\n            });\n        }\n        _super.prototype.destroy.call(this);\n    };\n    CheckboxGroup.prototype.onGameObjectUpHandler = function (pointer, gameobject) {\n        this.select(gameobject);\n    };\n    Object.defineProperty(CheckboxGroup.prototype, "selectedIndex", {\n        get: function () {\n            return this.mList.indexOf(this.mSelectedButton);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return CheckboxGroup;\n}(Phaser.Events.EventEmitter));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/checkbox.group.ts?')},"./src/render/ui/components/common.background.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommonBackground", function() { return CommonBackground; });\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var _button_event_dispatch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./button.event.dispatch */ "./src/render/ui/components/button.event.dispatch.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar CommonBackground = /** @class */ (function (_super) {\n    __extends(CommonBackground, _super);\n    function CommonBackground(scene, x, y, width, height, key, bgframe, color) {\n        var _this = _super.call(this, scene, x, y, false) || this;\n        _this.setSize(width, height);\n        _this.key = key || picaRes__WEBPACK_IMPORTED_MODULE_0__["UIAtlasName"].uicommon;\n        _this.bgFrame = bgframe || "online_bg";\n        _this.bottomColor = color === undefined ? 0x01CDFF : color;\n        _this.init();\n        _this.enable = true;\n        return _this;\n    }\n    CommonBackground.prototype.resize = function (width, height) {\n        this.setSize(width, height);\n        this.background.y = -height * 0.5 + this.background.height * 0.5;\n        this.graphic.clear();\n        this.graphic.fillStyle(this.bottomColor, 1);\n        this.graphic.fillRect(0, 0, width, height);\n        this.graphic.x = -width * 0.5;\n        this.graphic.y = -height * 0.5;\n    };\n    CommonBackground.prototype.init = function () {\n        this.background = this.scene.make.image({ key: this.key, frame: this.bgFrame });\n        this.background.displayWidth = this.width * 1.2;\n        this.graphic = this.scene.make.graphics(undefined, false);\n        this.add([this.graphic, this.background]);\n        this.resize(this.width, this.height);\n    };\n    return CommonBackground;\n}(_button_event_dispatch__WEBPACK_IMPORTED_MODULE_1__["ButtonEventDispatcher"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/common.background.ts?')},"./src/render/ui/components/dragDropIcon.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DragDropIcon", function() { return DragDropIcon; });\n/* harmony import */ var _dynamic_image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dynamic.image */ "./src/render/ui/components/dynamic.image.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar DragDropIcon = /** @class */ (function (_super) {\n    __extends(DragDropIcon, _super);\n    function DragDropIcon(mScene, x, y, texture) {\n        var _this = _super.call(this, mScene, x, y) || this;\n        _this.mScene = mScene;\n        _this.mIcon = new _dynamic_image__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](_this.mScene, 0, 0); // this.mScene.make.image(undefined, false);\n        _this.add(_this.mIcon);\n        return _this;\n    }\n    DragDropIcon.prototype.load = function (value, thisArg, onLoadComplete) {\n        var _this = this;\n        this.mUrl = value;\n        var key = this.resKey;\n        this.mIcon.load(utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(this.mUrl), function () {\n            if (_this.mCallBack)\n                _this.mCallBack();\n        });\n        // if (!this.mScene.cache.obj.has(key)) {\n        //     this.mScene.load.image(key, Url.getOsdRes(this.mUrl));\n        //     this.mScene.load.once(Phaser.Loader.Events.COMPLETE, this.onLoadCompleteHandler, this);\n        //     this.mScene.load.start();\n        // } else {\n        //     this.onLoadCompleteHandler();\n        // }\n        this.mCallBack = onLoadComplete;\n    };\n    DragDropIcon.prototype.dragStart = function () {\n    };\n    DragDropIcon.prototype.dragStop = function (acceptDrag) {\n    };\n    DragDropIcon.prototype.dragDrop = function (dragable) {\n    };\n    DragDropIcon.prototype.dragOver = function (dragable) {\n    };\n    DragDropIcon.prototype.getDragData = function () {\n    };\n    DragDropIcon.prototype.getDropData = function () {\n    };\n    DragDropIcon.prototype.getDragImage = function () {\n        return this.mIcon;\n    };\n    DragDropIcon.prototype.getVisualDisplay = function () {\n        return undefined;\n    };\n    DragDropIcon.prototype.getBound = function () {\n        var bound = this.getBounds();\n        return new Phaser.Geom.Rectangle(bound.x, bound.y, bound.width, bound.height);\n    };\n    Object.defineProperty(DragDropIcon.prototype, "resKey", {\n        get: function () {\n            if (this.mUrl === undefined)\n                return "";\n            var key = utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes((this.mUrl)); // Load.Image.getKey(this.mUrl);\n            return key;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DragDropIcon.prototype.destroy = function () {\n        this.mCallBack = null;\n        _super.prototype.destroy.call(this, true);\n    };\n    Object.defineProperty(DragDropIcon.prototype, "icon", {\n        get: function () {\n            return this.mIcon;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DragDropIcon.prototype.setDragType = function (value) {\n        this.mDragType = value;\n    };\n    DragDropIcon.prototype.setDropType = function (value) {\n        this.mDropType = value;\n    };\n    DragDropIcon.prototype.getDropType = function () {\n        return this.mDropType;\n    };\n    DragDropIcon.prototype.getDragType = function () {\n        return this.mDragType;\n    };\n    return DragDropIcon;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/dragDropIcon.ts?')},"./src/render/ui/components/dynamic.ninepatch.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DynamicNinepatch", function() { return DynamicNinepatch; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n\nvar DynamicNinepatch = /** @class */ (function () {\n    function DynamicNinepatch(mScene, mParent) {\n        this.mScene = mScene;\n        this.mParent = mParent;\n    }\n    DynamicNinepatch.prototype.load = function (value, config, completeCallBack, loadContext) {\n        this.mLoadCompleteCallBack = completeCallBack;\n        this.mLoadContext = loadContext;\n        this.mConfig = config;\n        this.mUrl = value;\n        if (this.mScene.cache.obj.get(value)) {\n            this.onLoadCompleteHandler();\n        }\n        else {\n            this.mScene.load.image(this.mUrl, this.mUrl);\n            this.mScene.load.once(Phaser.Loader.Events.COMPLETE, this.onLoadCompleteHandler, this);\n            this.mScene.load.start();\n        }\n    };\n    DynamicNinepatch.prototype.onLoadCompleteHandler = function () {\n        this.mImage = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NinePatch"](this.mScene, this.mConfig);\n        if (this.mLoadCompleteCallBack) {\n            this.mLoadCompleteCallBack.call(this.mLoadContext, this.mImage);\n            this.mLoadCompleteCallBack = null;\n            this.mLoadContext = null;\n        }\n    };\n    Object.defineProperty(DynamicNinepatch.prototype, "image", {\n        get: function () {\n            return this.mImage;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DynamicNinepatch;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/dynamic.ninepatch.ts?')},"./src/render/ui/components/dynamic.sprite.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DynamicSprite", function() { return DynamicSprite; });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar DynamicSprite = /** @class */ (function (_super) {\n    __extends(DynamicSprite, _super);\n    function DynamicSprite(scene, x, y) {\n        var _this = _super.call(this, scene, x, y, undefined) || this;\n        scene.sys.updateList.add(_this);\n        return _this;\n    }\n    DynamicSprite.prototype.load = function (textureURL, atlasURL, loadContext, completeCallBack, errorCallBack) {\n        this.mLoadCompleteCallbak = completeCallBack;\n        this.mLoadErrorCallback = errorCallBack;\n        this.mLoadContext = loadContext;\n        this.mUrl = textureURL + atlasURL;\n        if (this.scene.cache.obj.get(this.mUrl)) {\n            this.onLoadComplete();\n        }\n        else {\n            this.scene.load.atlas(this.mUrl, textureURL, atlasURL);\n            this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.onLoadComplete, this);\n            this.scene.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR, this.onLoadError, this);\n            this.scene.load.start();\n        }\n    };\n    DynamicSprite.prototype.destroy = function (fromScene) {\n        this.scene.sys.updateList.remove(this);\n        _super.prototype.destroy.call(this, fromScene);\n    };\n    DynamicSprite.prototype.onLoadComplete = function () {\n        if (this.mLoadCompleteCallbak) {\n            var cb = this.mLoadCompleteCallbak;\n            this.mLoadCompleteCallbak = null;\n            cb.call(this.mLoadContext);\n            this.mLoadContext = null;\n        }\n        this.scene.anims.create({\n            key: this.mUrl,\n            frames: this.scene.anims.generateFrameNames(this.mUrl),\n            repeat: 1\n        });\n        this.play(this.mUrl);\n        // this.setTexture(this.mUrl);\n    };\n    DynamicSprite.prototype.onLoadError = function (file) {\n        if (this.mUrl === file.url) {\n            if (this.mLoadErrorCallback) {\n                var cb = this.mLoadErrorCallback;\n                this.mLoadErrorCallback = null;\n                cb.call(this.mLoadContext);\n                this.mLoadContext = null;\n            }\n        }\n    };\n    return DynamicSprite;\n}(Phaser.GameObjects.Sprite));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/dynamic.sprite.ts?')},"./src/render/ui/components/grid.layout.group.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GridLayoutGroup", function() { return GridLayoutGroup; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlignmentType", function() { return AlignmentType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CornerType", function() { return CornerType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AxisType", function() { return AxisType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConstraintType", function() { return ConstraintType; });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar GridLayoutGroup = /** @class */ (function (_super) {\n    __extends(GridLayoutGroup, _super);\n    function GridLayoutGroup(scene, x, y, config) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.layoutElements = [];\n        _this._padding = config.padding || new Phaser.Math.Vector4(0, 0, 0, 0);\n        _this._cellSize = config.cellSize || new Phaser.Math.Vector2(100, 100);\n        _this._spacing = config.space || new Phaser.Math.Vector2(0, 0);\n        _this._alignmentType = config.alignmentType || AlignmentType.UpperLeft;\n        _this._startCorner = config.startCorner || CornerType.UpperLeft;\n        _this._startAxis = config.startAxis || AxisType.Horizontal;\n        _this._constraint = config.constraint || ConstraintType.Flexible;\n        _this._constraintCount = config.constraintCount || 4;\n        return _this;\n    }\n    GridLayoutGroup.prototype.onPlay = function () {\n    };\n    GridLayoutGroup.prototype.start = function () {\n    };\n    Object.defineProperty(GridLayoutGroup.prototype, "padding", {\n        get: function () {\n            return this._padding;\n        },\n        set: function (value) {\n            if (value === undefined)\n                return;\n            this._padding = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GridLayoutGroup.prototype, "cellSize", {\n        get: function () {\n            return this._cellSize;\n        },\n        /**\n         * vec2(width,height);\n         */\n        set: function (value) {\n            if (value === undefined)\n                return;\n            if (value.x < 0)\n                value.x = 0;\n            if (value.y < 0)\n                value.y = 0;\n            this._cellSize = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GridLayoutGroup.prototype, "spacing", {\n        get: function () {\n            return this._spacing;\n        },\n        /**\n         * vec2(x,y);\n         */\n        set: function (value) {\n            if (value === undefined)\n                return;\n            this._spacing = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GridLayoutGroup.prototype, "alignmentType", {\n        get: function () {\n            return this._alignmentType;\n        },\n        set: function (value) {\n            if (value === this._alignmentType)\n                return;\n            this._alignmentType = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GridLayoutGroup.prototype, "startCorner", {\n        get: function () {\n            return this._startCorner;\n        },\n        set: function (value) {\n            if (value === this._startCorner)\n                return;\n            this._startCorner = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GridLayoutGroup.prototype, "startAxis", {\n        get: function () {\n            return this._startAxis;\n        },\n        set: function (value) {\n            if (value === this._startAxis)\n                return;\n            this._startAxis = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GridLayoutGroup.prototype, "constraint", {\n        get: function () {\n            return this._constraint;\n        },\n        set: function (value) {\n            if (value === this._constraint)\n                return;\n            this._constraint = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GridLayoutGroup.prototype, "constraintCount", {\n        get: function () {\n            return this._constraintCount;\n        },\n        set: function (value) {\n            if (value === undefined || isNaN(value))\n                return;\n            this._constraintCount = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    GridLayoutGroup.prototype.Layout = function () {\n        this.layoutElements.length = 0;\n        var list = this.list;\n        for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {\n            var child = list_1[_i];\n            if (child.visible)\n                this.layoutElements.push(child);\n        }\n        if (this.layoutElements.length === 0)\n            return;\n        var cornerX = this._startCorner % 2;\n        var cornerY = Math.floor(this._startCorner / 2);\n        var cellsPerMainAxis = 0, actualCellCountX = 0, actualCellCountY = 0;\n        var cellCount = this.getCellCount();\n        if (this._startAxis === AxisType.Horizontal) {\n            cellsPerMainAxis = cellCount.x;\n            actualCellCountX = Phaser.Math.Clamp(cellCount.x, 1, this.layoutElements.length);\n            actualCellCountY = Phaser.Math.Clamp(cellCount.y, 1, Math.ceil(this.layoutElements.length / cellsPerMainAxis));\n        }\n        else {\n            cellsPerMainAxis = cellCount.y;\n            actualCellCountY = Phaser.Math.Clamp(cellCount.y, 1, this.layoutElements.length);\n            actualCellCountX = Phaser.Math.Clamp(cellCount.x, 1, Math.ceil(this.layoutElements.length / cellsPerMainAxis));\n        }\n        var requiredSpace = new Phaser.Math.Vector2(actualCellCountX * this._cellSize.x + (actualCellCountX - 1) * this._spacing.x, actualCellCountY * this._cellSize.y + (actualCellCountY - 1) * this._spacing.y);\n        var startOffset = new Phaser.Math.Vector2(this.getStartOffset(0, requiredSpace.x), this.getStartOffset(1, requiredSpace.y));\n        var positionX = 0;\n        var positionY = 0;\n        for (var i = 0; i < this.layoutElements.length; i++) {\n            if (this._startAxis === AxisType.Horizontal) {\n                positionX = i % cellsPerMainAxis;\n                positionY = Math.floor(i / cellsPerMainAxis);\n            }\n            else {\n                positionX = Math.floor(i / cellsPerMainAxis);\n                positionY = i % cellsPerMainAxis;\n            }\n            if (cornerX === 1)\n                positionX = actualCellCountX - 1 - positionX;\n            if (cornerY === 1)\n                positionY = actualCellCountY - 1 - positionY;\n            this.setChildAlongAxis(this.layoutElements[i], 0, startOffset.x + (this._cellSize.x + this._spacing.x) * positionX, this._cellSize.x);\n            this.setChildAlongAxis(this.layoutElements[i], 1, startOffset.y + (this._cellSize.y + this._spacing.y) * positionY, this._cellSize.y);\n        }\n        var maxWidth = startOffset.x + (this._cellSize.x + this._spacing.x) * (positionX + 1);\n        var maxHeight = startOffset.y + (this._cellSize.y + this._spacing.y) * (positionY + 1);\n        // if (this.startAxis === AxisType.Horizontal) {\n        //     this.height = maxHeight;\n        //     this.setAllChildPositionOffset(0);\n        // } else {\n        //     this.width = maxWidth;\n        //     this.setAllChildPositionOffset(1);\n        // }\n        if (this.width < maxWidth) {\n            this.width = maxWidth;\n        }\n        if (this.height < maxHeight) {\n            this.height = maxHeight;\n        }\n        this.setAllChildPositionOffset(0);\n        this.setAllChildPositionOffset(1);\n    };\n    GridLayoutGroup.prototype.setChildAlongAxis = function (child, axis, pos, size) {\n        if (axis === 0) {\n            child.width = size;\n        }\n        else {\n            child.height = size;\n        }\n        var value = pos;\n        if (axis === 0) {\n            child.x = value + size * child.originX;\n        }\n        else {\n            child.y = value + size * child.originY;\n        }\n    };\n    GridLayoutGroup.prototype.setAllChildPositionOffset = function (axis) {\n        for (var _i = 0, _a = this.layoutElements; _i < _a.length; _i++) {\n            var child = _a[_i];\n            if (axis === 0) {\n                var offset = this.width * 0.5;\n                child.x -= offset;\n            }\n            else {\n                var offset = this.height * 0.5;\n                child.y -= offset;\n            }\n        }\n    };\n    GridLayoutGroup.prototype.getStartOffset = function (axis, requiredSpaceWithoutPadding) {\n        var requiredSpace = requiredSpaceWithoutPadding + (axis === 0 ? this.paddingHorizontal() : this.paddingVertical());\n        var availableSpace = (axis === 0 ? this.width : this.height);\n        var surplusSpace = availableSpace - requiredSpace;\n        var alignmentOnAxis = this.getAlignmentOnAxis(axis);\n        return (axis === 0 ? this._padding.x : this._padding.z) + surplusSpace * alignmentOnAxis;\n    };\n    GridLayoutGroup.prototype.getAlignmentOnAxis = function (axis) {\n        if (axis === 0)\n            return (this._alignmentType % 3) * 0.5;\n        else\n            return Math.floor(this._alignmentType / 3) * 0.5;\n    };\n    GridLayoutGroup.prototype.getCellCount = function () {\n        var cell = new Phaser.Math.Vector2();\n        if (this._constraint === ConstraintType.FixedColumnCount) {\n            cell.x = this._constraintCount;\n            if (this.layoutElements.length >= cell.x) {\n                cell.y = Math.floor(this.layoutElements.length / cell.x) + (this.layoutElements.length % cell.x > 0 ? 1 : 0);\n            }\n        }\n        else if (this._constraint === ConstraintType.FixedRowCount) {\n            cell.y = this._constraintCount;\n            if (this.layoutElements.length >= cell.y) {\n                cell.x = Math.floor(this.layoutElements.length / cell.y) + (this.layoutElements.length % cell.y > 0 ? 1 : 0);\n            }\n        }\n        else {\n            cell.x = Math.max(1, Math.floor((this.width - this.paddingHorizontal() + this._spacing.x + 0.001) / (this._cellSize.x + this._spacing.x)));\n            cell.y = Math.max(1, Math.floor((this.height - this.paddingVertical() + this._spacing.y + 0.001) / (this._cellSize.y + this._spacing.y)));\n        }\n        return cell;\n    };\n    GridLayoutGroup.prototype.paddingHorizontal = function () {\n        return this._padding.x + this._padding.y;\n    };\n    GridLayoutGroup.prototype.paddingVertical = function () {\n        return this._padding.z + this._padding.w;\n    };\n    GridLayoutGroup.ClassName = "gridLayoutGroup";\n    return GridLayoutGroup;\n}(Phaser.GameObjects.Container));\n\nvar AlignmentType;\n(function (AlignmentType) {\n    AlignmentType[AlignmentType["UpperLeft"] = 0] = "UpperLeft";\n    AlignmentType[AlignmentType["UpperCenter"] = 1] = "UpperCenter";\n    AlignmentType[AlignmentType["UpperRight"] = 2] = "UpperRight";\n    AlignmentType[AlignmentType["MiddleLeft"] = 3] = "MiddleLeft";\n    AlignmentType[AlignmentType["MiddleCenter"] = 4] = "MiddleCenter";\n    AlignmentType[AlignmentType["MiddleRight"] = 5] = "MiddleRight";\n    AlignmentType[AlignmentType["LowerLeft"] = 6] = "LowerLeft";\n    AlignmentType[AlignmentType["LowerCenter"] = 7] = "LowerCenter";\n    AlignmentType[AlignmentType["LowerRight"] = 8] = "LowerRight";\n})(AlignmentType || (AlignmentType = {}));\nvar CornerType;\n(function (CornerType) {\n    CornerType[CornerType["UpperLeft"] = 0] = "UpperLeft";\n    CornerType[CornerType["UpperRight"] = 1] = "UpperRight";\n    CornerType[CornerType["LowerLeft"] = 2] = "LowerLeft";\n    CornerType[CornerType["LowerRight"] = 3] = "LowerRight";\n})(CornerType || (CornerType = {}));\nvar AxisType;\n(function (AxisType) {\n    AxisType[AxisType["Horizontal"] = 0] = "Horizontal";\n    AxisType[AxisType["Vertical"] = 1] = "Vertical";\n})(AxisType || (AxisType = {}));\nvar ConstraintType;\n(function (ConstraintType) {\n    ConstraintType[ConstraintType["Flexible"] = 0] = "Flexible";\n    ConstraintType[ConstraintType["FixedColumnCount"] = 1] = "FixedColumnCount";\n    ConstraintType[ConstraintType["FixedRowCount"] = 2] = "FixedRowCount";\n})(ConstraintType || (ConstraintType = {}));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/grid.layout.group.ts?')},"./src/render/ui/components/icon.btn.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IconBtn", function() { return IconBtn; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * \n */\nvar IconBtn = /** @class */ (function (_super) {\n    __extends(IconBtn, _super);\n    // // name\n    // private medName: string;\n    function IconBtn(scene, render, data) {\n        var _this = _super.call(this, scene) || this;\n        _this.mScene = scene;\n        _this.mRender = render;\n        _this.mBtnBg = scene.make.image(undefined, false);\n        _this.mBgResKey = data.bgResKey;\n        _this.mBgTexture = data.bgTextures;\n        _this.mData = data;\n        if (!_this.mScene.textures.exists(_this.mBgResKey) && data.pngUrl && data.jsonUrl) {\n            _this.mScene.load.atlas(data.key, utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes(data.pngUrl), utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes(data.jsonUrl));\n            _this.mScene.load.once(Phaser.Loader.Events.COMPLETE, _this.loadComplete, _this);\n            _this.mScene.load.start();\n            return _this;\n        }\n        _this.loadComplete();\n        return _this;\n    }\n    // public setMedName(name: string) {\n    //     this.medName = name;\n    // }\n    IconBtn.prototype.getKey = function () {\n        return this.mData.key;\n    };\n    IconBtn.prototype.setPos = function (x, y) {\n        if (!this.mBasePos) {\n            this.mBasePos = new utils__WEBPACK_IMPORTED_MODULE_0__["Pos"]();\n        }\n        this.mBasePos.x = x;\n        this.mBasePos.y = y;\n    };\n    /**\n     * tween\n     */\n    IconBtn.prototype.getPos = function () {\n        return this.mBasePos;\n    };\n    IconBtn.prototype.setBtnData = function (value) {\n        this.mBtnData = value;\n    };\n    IconBtn.prototype.getBtnData = function () {\n        return this.mBtnData;\n    };\n    IconBtn.prototype.setClick = function (func) {\n        this.monClick = func;\n    };\n    IconBtn.prototype.destroy = function () {\n        if (this.mBtnBg) {\n            this.mBtnBg.destroy(true);\n        }\n        if (this.mBtnIcon) {\n            this.mBtnIcon.destroy(true);\n        }\n        this.monClick = null;\n        this.mBtnBg = null;\n        this.mBtnIcon = null;\n        this.mBtnData = null;\n        this.mScene = null;\n        _super.prototype.destroy.call(this);\n    };\n    IconBtn.prototype.loadComplete = function () {\n        this.mBtnBg.setTexture(this.mBgResKey, this.mBgTexture[0]);\n        this.mBtnBg.scaleX = this.mBtnBg.scaleY = this.mData.scale;\n        this.addAt(this.mBtnBg, 0);\n        if (this.mData.iconResKey && this.mData.iconTexture && this.mData.iconTexture.length > 0) {\n            this.mBtnIcon = this.mScene.make.image(undefined, false);\n            this.mBtnIcon.setTexture(this.mData.iconResKey, this.mData.iconTexture);\n            this.add(this.mBtnIcon);\n        }\n        this.setSize(this.mBtnBg.width, this.mBtnBg.height);\n        this.setInteractive();\n        this.on("pointerup", this.upHandler, this);\n        this.on("pointerdown", this.downHandler, this);\n        this.on("pointerover", this.overHandler, this);\n        this.on("pointerout", this.outHandler, this);\n    };\n    IconBtn.prototype.overHandler = function (pointer) {\n        if (this.mBgTexture.length < 2) {\n            return;\n        }\n        this.mBtnBg.setTexture(this.mBgResKey, this.mBgTexture[1]);\n    };\n    IconBtn.prototype.outHandler = function (pointer) {\n        if (this.mBgTexture.length < 2) {\n            return;\n        }\n        this.mBtnBg.setTexture(this.mBgResKey, this.mBgTexture[0]);\n    };\n    IconBtn.prototype.upHandler = function () {\n        if (this.monClick) {\n            this.monClick();\n        }\n        if (this.mData && this.mData.callBack) {\n            this.mData.callBack.apply(this);\n        }\n        this.emit("click", this);\n        if (this.mBgTexture.length < 3) {\n            return;\n        }\n        this.mBtnBg.setTexture(this.mBgResKey, this.mBgTexture[2]);\n    };\n    IconBtn.prototype.downHandler = function () {\n        // this.scaleHandler();\n        if (this.mBgTexture.length < 4) {\n            return;\n        }\n        this.mBtnBg.setTexture(this.mBgResKey, this.mBgTexture[3]);\n    };\n    IconBtn.prototype.scaleHandler = function () {\n        this.mScene.tweens.add({\n            targets: this,\n            duration: 50,\n            ease: "Linear",\n            props: {\n                scaleX: { value: .5 },\n                scaleY: { value: .5 },\n            },\n            yoyo: true,\n            repeat: 0,\n        });\n        this.scaleX = this.scaleY = 1;\n    };\n    return IconBtn;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/icon.btn.ts?')},"./src/render/ui/components/icon.select.btn.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IconSelectBtn", function() { return IconSelectBtn; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * ()\n */\nvar IconSelectBtn = /** @class */ (function (_super) {\n    __extends(IconSelectBtn, _super);\n    function IconSelectBtn(scene, render, bgResKey, bgTexture, scale) {\n        if (scale === void 0) { scale = 28 / 43; }\n        var _this = _super.call(this, scene) || this;\n        _this.mScene = scene;\n        _this.mRender = render;\n        _this.mBtnBg = scene.make.image(undefined, false);\n        _this.mBgTexture = bgTexture;\n        _this.mBgResKey = bgResKey;\n        _this.mBtnBg.setTexture(bgResKey, bgTexture[0]);\n        _this.mBtnBg.scaleX = _this.mBtnBg.scaleY = scale;\n        _this.addAt(_this.mBtnBg, 0);\n        _this.setSize(_this.mBtnBg.width, _this.mBtnBg.height);\n        _this.setInteractive();\n        _this.on("pointerup", _this.upHandler, _this);\n        _this.on("pointerdown", _this.downHandler, _this);\n        _this.on("pointerover", _this.overHandler, _this);\n        _this.on("pointerout", _this.outHandler, _this);\n        return _this;\n    }\n    IconSelectBtn.prototype.setPos = function (x, y) {\n        if (!this.mBasePos) {\n            this.mBasePos = new utils__WEBPACK_IMPORTED_MODULE_0__["Pos"]();\n        }\n        this.mBasePos.x = x;\n        this.mBasePos.y = y;\n    };\n    /**\n     * tween\n     */\n    IconSelectBtn.prototype.getPos = function () {\n        return this.mBasePos;\n    };\n    IconSelectBtn.prototype.setBtnData = function (value) {\n        this.mBtnData = value;\n    };\n    IconSelectBtn.prototype.getBtnData = function () {\n        return this.mBtnData;\n    };\n    IconSelectBtn.prototype.setClick = function (func) {\n        this.monClick = func;\n    };\n    IconSelectBtn.prototype.setBgRes = function (index) {\n        this.mBtnBg.setTexture(this.mBgResKey, this.mBgTexture[index] || 0);\n    };\n    IconSelectBtn.prototype.destroy = function () {\n        if (this.mBtnBg) {\n            this.mBtnBg.destroy(true);\n        }\n        if (this.mBtnIcon) {\n            this.mBtnIcon.destroy(true);\n        }\n        this.monClick = null;\n        this.mBtnBg = null;\n        this.mBtnIcon = null;\n        this.mBtnData = null;\n        this.mScene = null;\n        _super.prototype.destroy.call(this);\n    };\n    IconSelectBtn.prototype.overHandler = function (pointer) {\n    };\n    IconSelectBtn.prototype.outHandler = function (pointer) {\n    };\n    IconSelectBtn.prototype.upHandler = function () {\n        if (this.monClick) {\n            this.monClick();\n        }\n    };\n    IconSelectBtn.prototype.downHandler = function () {\n        this.scaleHandler();\n    };\n    IconSelectBtn.prototype.scaleHandler = function () {\n        this.mScene.tweens.add({\n            targets: this,\n            duration: 50,\n            ease: "Linear",\n            props: {\n                scaleX: { value: .5 },\n                scaleY: { value: .5 },\n            },\n            yoyo: true,\n            repeat: 0,\n        });\n        this.scaleX = this.scaleY = 1;\n    };\n    return IconSelectBtn;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/icon.select.btn.ts?')},"./src/render/ui/components/idragable.ts":function(module,exports){eval("\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/idragable.ts?")},"./src/render/ui/components/idropable.ts":function(module,exports){eval("\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/idropable.ts?")},"./src/render/ui/components/image.value.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageValue", function() { return ImageValue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageBBCodeValue", function() { return ImageBBCodeValue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DynamicImageValue", function() { return DynamicImageValue; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _dynamic_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dynamic.image */ "./src/render/ui/components/dynamic.image.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar ImageValue = /** @class */ (function (_super) {\n    __extends(ImageValue, _super);\n    function ImageValue(scene, width, height, key, frame, dpr, style) {\n        var _this = _super.call(this, scene) || this;\n        _this.layoutType = 1;\n        _this.dpr = dpr;\n        _this.setSize(width, height);\n        _this.offset = new Phaser.Geom.Point(0, 0);\n        _this.create(key, frame, style);\n        _this.add([_this.icon, _this.value]);\n        _this.resetSize();\n        return _this;\n    }\n    ImageValue.prototype.setFrameValue = function (text, key, frame) {\n        this.icon.setTexture(key, frame);\n        this.value.text = text;\n        this.resetSize();\n    };\n    ImageValue.prototype.setText = function (tex) {\n        this.value.text = tex;\n        this.resetSize();\n    };\n    ImageValue.prototype.setFontStyle = function (style) {\n        this.value.setFontStyle(style);\n    };\n    ImageValue.prototype.setTextStyle = function (style) {\n        (this.value).setStyle(style);\n    };\n    ImageValue.prototype.setTextFilter = function (filterMode) {\n        (this.value).texture.setFilter(filterMode);\n    };\n    ImageValue.prototype.setShadow = function (x, y, color, blur, shadowStroke, shadowFill) {\n        this.value.setShadow(x, y, color, blur, shadowStroke, shadowFill);\n    };\n    ImageValue.prototype.setStroke = function (color, thickness) {\n        this.value.setStroke(color, thickness);\n    };\n    ImageValue.prototype.setOffset = function (x, y) {\n        this.offset.x = x;\n        this.offset.y = y;\n        this.resetSize();\n    };\n    ImageValue.prototype.resetSize = function () {\n        var width = this.icon.displayWidth + this.value.width;\n        var dis = this.width - width;\n        if (this.layoutType === 1) {\n            this.x -= dis * 0.5;\n        }\n        else if (this.layoutType === 3) {\n            this.x += dis * 0.5;\n        }\n        this.setSize(width, this.height);\n        this.resetPosition();\n    };\n    /**\n     *\n     * @param type 1-2-3-\n     */\n    ImageValue.prototype.setLayout = function (type) {\n        this.layoutType = type;\n        this.resetSize();\n    };\n    ImageValue.prototype.create = function (key, frame, style) {\n        this.icon = this.scene.make.image({ key: key, frame: frame });\n        this.icon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        if (!style)\n            style = {\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT,\n                fontSize: 11 * this.dpr,\n                color: "#ffffff",\n            };\n        this.value = this.scene.make.text({ x: 0, y: 0, text: "0", style: style });\n        this.value.setOrigin(0, 0.5);\n        var width = this.icon.displayWidth + this.value.width;\n        this.setSize(width, this.height);\n    };\n    ImageValue.prototype.resetPosition = function () {\n        this.icon.x = -this.width * 0.5 + this.icon.displayWidth * 0.5;\n        this.value.x = this.icon.x + this.icon.displayWidth * 0.5 + 4 * this.dpr + this.offset.x;\n        this.value.y = this.offset.y;\n    };\n    return ImageValue;\n}(Phaser.GameObjects.Container));\n\nvar ImageBBCodeValue = /** @class */ (function (_super) {\n    __extends(ImageBBCodeValue, _super);\n    function ImageBBCodeValue(scene, width, height, key, frame, dpr, style) {\n        return _super.call(this, scene, width, height, key, frame, dpr, style) || this;\n    }\n    ImageBBCodeValue.prototype.create = function (key, frame, style) {\n        this.icon = this.scene.make.image({ key: key, frame: frame });\n        this.icon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        if (!style)\n            style = {\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT,\n                fontSize: 11 * this.dpr,\n                color: "#ffffff",\n            };\n        this.value = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, 0, 0, "10", style);\n        this.value.setOrigin(0, 0.5);\n        var width = this.icon.displayWidth + this.value.width;\n        this.setSize(width, this.height);\n    };\n    return ImageBBCodeValue;\n}(ImageValue));\n\nvar DynamicImageValue = /** @class */ (function (_super) {\n    __extends(DynamicImageValue, _super);\n    function DynamicImageValue(scene, width, height, key, frame, dpr, style) {\n        return _super.call(this, scene, width, height, key, frame, dpr, style) || this;\n    }\n    DynamicImageValue.prototype.load = function (url) {\n        var _this = this;\n        this.icon.load(url, this, function () {\n            _this.icon.scale = 1;\n            _this.icon.displayHeight = _this.height - 4 * _this.dpr;\n            _this.icon.scaleX = _this.icon.scaleY;\n            _this.icon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n            _this.resetSize();\n        });\n    };\n    DynamicImageValue.prototype.create = function (key, frame, style) {\n        this.icon = new _dynamic_image__WEBPACK_IMPORTED_MODULE_2__["DynamicImage"](this.scene, 0, 0);\n        this.icon.scale = this.dpr;\n        if (!style)\n            style = utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].whiteStyle(this.dpr);\n        this.value = this.scene.make.text({ x: 0, y: 0, text: "10", style: style });\n        this.value.setOrigin(0, 0.5);\n        var width = this.icon.displayWidth + this.value.width;\n        this.setSize(width, this.height);\n    };\n    return DynamicImageValue;\n}(ImageValue));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/image.value.ts?')},"./src/render/ui/components/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dynamic_image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dynamic.image */ "./src/render/ui/components/dynamic.image.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DynamicImage", function() { return _dynamic_image__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"]; });\n\n/* harmony import */ var _dynamic_ninepatch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dynamic.ninepatch */ "./src/render/ui/components/dynamic.ninepatch.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DynamicNinepatch", function() { return _dynamic_ninepatch__WEBPACK_IMPORTED_MODULE_1__["DynamicNinepatch"]; });\n\n/* harmony import */ var _dynamic_sprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dynamic.sprite */ "./src/render/ui/components/dynamic.sprite.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DynamicSprite", function() { return _dynamic_sprite__WEBPACK_IMPORTED_MODULE_2__["DynamicSprite"]; });\n\n/* harmony import */ var _input_panel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./input.panel */ "./src/render/ui/components/input.panel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InputPanel", function() { return _input_panel__WEBPACK_IMPORTED_MODULE_3__["InputPanel"]; });\n\n/* harmony import */ var _checkbox_group__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./checkbox.group */ "./src/render/ui/components/checkbox.group.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CheckboxGroup", function() { return _checkbox_group__WEBPACK_IMPORTED_MODULE_4__["CheckboxGroup"]; });\n\n/* harmony import */ var _TextButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TextButton */ "./src/render/ui/components/TextButton.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TextButton", function() { return _TextButton__WEBPACK_IMPORTED_MODULE_5__["TextButton"]; });\n\n/* harmony import */ var _label_input__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./label.input */ "./src/render/ui/components/label.input.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LabelInput", function() { return _label_input__WEBPACK_IMPORTED_MODULE_6__["LabelInput"]; });\n\n/* harmony import */ var _base_panel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./base.panel */ "./src/render/ui/components/base.panel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BasePanel", function() { return _base_panel__WEBPACK_IMPORTED_MODULE_7__["BasePanel"]; });\n\n/* harmony import */ var _ninepatch_button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ninepatch.button */ "./src/render/ui/components/ninepatch.button.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NinePatchButton", function() { return _ninepatch_button__WEBPACK_IMPORTED_MODULE_8__["NinePatchButton"]; });\n\n/* harmony import */ var _alert_view__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./alert.view */ "./src/render/ui/components/alert.view.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AlertView", function() { return _alert_view__WEBPACK_IMPORTED_MODULE_9__["AlertView"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Buttons", function() { return _alert_view__WEBPACK_IMPORTED_MODULE_9__["Buttons"]; });\n\n/* harmony import */ var _tips_ItemInfoTips__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./tips/ItemInfoTips */ "./src/render/ui/components/tips/ItemInfoTips.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ItemInfoTips", function() { return _tips_ItemInfoTips__WEBPACK_IMPORTED_MODULE_10__["ItemInfoTips"]; });\n\n/* harmony import */ var _tips_TextToolTip__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./tips/TextToolTip */ "./src/render/ui/components/tips/TextToolTip.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TextToolTips", function() { return _tips_TextToolTip__WEBPACK_IMPORTED_MODULE_11__["TextToolTips"]; });\n\n/* harmony import */ var _tips_itoolTip__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./tips/itoolTip */ "./src/render/ui/components/tips/itoolTip.ts");\n/* harmony import */ var _tips_itoolTip__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_tips_itoolTip__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _tips_itoolTip__WEBPACK_IMPORTED_MODULE_12__) if(["default","DynamicImage","DynamicNinepatch","DynamicSprite","InputPanel","CheckboxGroup","TextButton","LabelInput","BasePanel","NinePatchButton","AlertView","Buttons","ItemInfoTips","TextToolTips"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _tips_itoolTip__WEBPACK_IMPORTED_MODULE_12__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _tips_toolTip__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./tips/toolTip */ "./src/render/ui/components/tips/toolTip.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ToolTip", function() { return _tips_toolTip__WEBPACK_IMPORTED_MODULE_13__["ToolTip"]; });\n\n/* harmony import */ var _image_value__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./image.value */ "./src/render/ui/components/image.value.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ImageValue", function() { return _image_value__WEBPACK_IMPORTED_MODULE_14__["ImageValue"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ImageBBCodeValue", function() { return _image_value__WEBPACK_IMPORTED_MODULE_14__["ImageBBCodeValue"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DynamicImageValue", function() { return _image_value__WEBPACK_IMPORTED_MODULE_14__["DynamicImageValue"]; });\n\n/* harmony import */ var _input_view__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./input.view */ "./src/render/ui/components/input.view.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InputView", function() { return _input_view__WEBPACK_IMPORTED_MODULE_15__["InputView"]; });\n\n/* harmony import */ var _three_button__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./three.button */ "./src/render/ui/components/three.button.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtonState", function() { return _three_button__WEBPACK_IMPORTED_MODULE_16__["ButtonState"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ThreeSliceButton", function() { return _three_button__WEBPACK_IMPORTED_MODULE_16__["ThreeSliceButton"]; });\n\n/* harmony import */ var _three_slice_path__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./three.slice.path */ "./src/render/ui/components/three.slice.path.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ThreeSlicePath", function() { return _three_slice_path__WEBPACK_IMPORTED_MODULE_17__["ThreeSlicePath"]; });\n\n/* harmony import */ var _tween_compent__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./tween.compent */ "./src/render/ui/components/tween.compent.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TweenCompent", function() { return _tween_compent__WEBPACK_IMPORTED_MODULE_18__["TweenCompent"]; });\n\n/* harmony import */ var _value_container__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./value.container */ "./src/render/ui/components/value.container.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ValueContainer", function() { return _value_container__WEBPACK_IMPORTED_MODULE_19__["ValueContainer"]; });\n\n/* harmony import */ var _grid_layout_group__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./grid.layout.group */ "./src/render/ui/components/grid.layout.group.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GridLayoutGroup", function() { return _grid_layout_group__WEBPACK_IMPORTED_MODULE_20__["GridLayoutGroup"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AlignmentType", function() { return _grid_layout_group__WEBPACK_IMPORTED_MODULE_20__["AlignmentType"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CornerType", function() { return _grid_layout_group__WEBPACK_IMPORTED_MODULE_20__["CornerType"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AxisType", function() { return _grid_layout_group__WEBPACK_IMPORTED_MODULE_20__["AxisType"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConstraintType", function() { return _grid_layout_group__WEBPACK_IMPORTED_MODULE_20__["ConstraintType"]; });\n\n/* harmony import */ var _soundButton__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./soundButton */ "./src/render/ui/components/soundButton.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SoundButton", function() { return _soundButton__WEBPACK_IMPORTED_MODULE_21__["SoundButton"]; });\n\n/* harmony import */ var _prop_item__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./prop.item */ "./src/render/ui/components/prop.item.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropItem", function() { return _prop_item__WEBPACK_IMPORTED_MODULE_22__["PropItem"]; });\n\n/* harmony import */ var _items_consume_funpanel__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./items.consume.funpanel */ "./src/render/ui/components/items.consume.funpanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ItemsConsumeFunPanel", function() { return _items_consume_funpanel__WEBPACK_IMPORTED_MODULE_23__["ItemsConsumeFunPanel"]; });\n\n/* harmony import */ var _nine_patch__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./nine.patch */ "./src/render/ui/components/nine.patch.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NinePatch", function() { return _nine_patch__WEBPACK_IMPORTED_MODULE_24__["NinePatch"]; });\n\n/* harmony import */ var _item_slot__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./item.slot */ "./src/render/ui/components/item.slot.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ItemSlot", function() { return _item_slot__WEBPACK_IMPORTED_MODULE_25__["ItemSlot"]; });\n\n/* harmony import */ var _idragable__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./idragable */ "./src/render/ui/components/idragable.ts");\n/* harmony import */ var _idragable__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(_idragable__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _idragable__WEBPACK_IMPORTED_MODULE_26__) if(["default","DynamicImage","DynamicNinepatch","DynamicSprite","InputPanel","CheckboxGroup","TextButton","LabelInput","BasePanel","NinePatchButton","AlertView","Buttons","ItemInfoTips","TextToolTips","ToolTip","ImageValue","ImageBBCodeValue","DynamicImageValue","InputView","ButtonState","ThreeSliceButton","ThreeSlicePath","TweenCompent","ValueContainer","GridLayoutGroup","AlignmentType","CornerType","AxisType","ConstraintType","SoundButton","PropItem","ItemsConsumeFunPanel","NinePatch","ItemSlot"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _idragable__WEBPACK_IMPORTED_MODULE_26__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _idropable__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./idropable */ "./src/render/ui/components/idropable.ts");\n/* harmony import */ var _idropable__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(_idropable__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _idropable__WEBPACK_IMPORTED_MODULE_27__) if(["default","DynamicImage","DynamicNinepatch","DynamicSprite","InputPanel","CheckboxGroup","TextButton","LabelInput","BasePanel","NinePatchButton","AlertView","Buttons","ItemInfoTips","TextToolTips","ToolTip","ImageValue","ImageBBCodeValue","DynamicImageValue","InputView","ButtonState","ThreeSliceButton","ThreeSlicePath","TweenCompent","ValueContainer","GridLayoutGroup","AlignmentType","CornerType","AxisType","ConstraintType","SoundButton","PropItem","ItemsConsumeFunPanel","NinePatch","ItemSlot"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _idropable__WEBPACK_IMPORTED_MODULE_27__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _dragDropIcon__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./dragDropIcon */ "./src/render/ui/components/dragDropIcon.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DragDropIcon", function() { return _dragDropIcon__WEBPACK_IMPORTED_MODULE_28__["DragDropIcon"]; });\n\n/* harmony import */ var _icon_btn__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./icon.btn */ "./src/render/ui/components/icon.btn.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IconBtn", function() { return _icon_btn__WEBPACK_IMPORTED_MODULE_29__["IconBtn"]; });\n\n/* harmony import */ var _icon_select_btn__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./icon.select.btn */ "./src/render/ui/components/icon.select.btn.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IconSelectBtn", function() { return _icon_select_btn__WEBPACK_IMPORTED_MODULE_30__["IconSelectBtn"]; });\n\n/* harmony import */ var _material_item__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./material.item */ "./src/render/ui/components/material.item.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MaterialItem", function() { return _material_item__WEBPACK_IMPORTED_MODULE_31__["MaterialItem"]; });\n\n/* harmony import */ var _progress_mask_bar__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./progress.mask.bar */ "./src/render/ui/components/progress.mask.bar.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProgressMaskBar", function() { return _progress_mask_bar__WEBPACK_IMPORTED_MODULE_32__["ProgressMaskBar"]; });\n\n/* harmony import */ var _button_event_dispatch__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./button.event.dispatch */ "./src/render/ui/components/button.event.dispatch.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ButtonEventDispatcher", function() { return _button_event_dispatch__WEBPACK_IMPORTED_MODULE_33__["ButtonEventDispatcher"]; });\n\n/* harmony import */ var _common_background__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./common.background */ "./src/render/ui/components/common.background.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CommonBackground", function() { return _common_background__WEBPACK_IMPORTED_MODULE_34__["CommonBackground"]; });\n\n/* harmony import */ var _background_scale_button__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./background.scale.button */ "./src/render/ui/components/background.scale.button.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BackgroundScaleButton", function() { return _background_scale_button__WEBPACK_IMPORTED_MODULE_35__["BackgroundScaleButton"]; });\n\n/* harmony import */ var _progress_three_mask_bar__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./progress.three.mask.bar */ "./src/render/ui/components/progress.three.mask.bar.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProgressThreeMaskBar", function() { return _progress_three_mask_bar__WEBPACK_IMPORTED_MODULE_36__["ProgressThreeMaskBar"]; });\n\n/* harmony import */ var _progress_three_bar__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./progress.three.bar */ "./src/render/ui/components/progress.three.bar.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProgressThreeBar", function() { return _progress_three_bar__WEBPACK_IMPORTED_MODULE_37__["ProgressThreeBar"]; });\n\n/* harmony import */ var _toggle_color_button__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./toggle.color.button */ "./src/render/ui/components/toggle.color.button.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ToggleColorButton", function() { return _toggle_color_button__WEBPACK_IMPORTED_MODULE_38__["ToggleColorButton"]; });\n\n/* harmony import */ var _toggle_button__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./toggle.button */ "./src/render/ui/components/toggle.button.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ToggleButton", function() { return _toggle_button__WEBPACK_IMPORTED_MODULE_39__["ToggleButton"]; });\n\n/* harmony import */ var _MoreButtonPanel__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./MoreButtonPanel */ "./src/render/ui/components/MoreButtonPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MoreButtonPanel", function() { return _MoreButtonPanel__WEBPACK_IMPORTED_MODULE_40__["MoreButtonPanel"]; });\n\n/* harmony import */ var _texture_sprite__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./texture.sprite */ "./src/render/ui/components/texture.sprite.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TextureSprite", function() { return _texture_sprite__WEBPACK_IMPORTED_MODULE_41__["TextureSprite"]; });\n\n/* harmony import */ var _input_field__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./input.field */ "./src/render/ui/components/input.field.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InputField", function() { return _input_field__WEBPACK_IMPORTED_MODULE_42__["InputField"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/index.ts?')},"./src/render/ui/components/input.field.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InputField", function() { return InputField; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar InputField = /** @class */ (function (_super) {\n    __extends(InputField, _super);\n    function InputField(scene, x, y, width, height, config) {\n        var _this = _super.call(this, scene, x, y, width, height, config) || this;\n        _this.node.addEventListener("keypress", _this.onKeypressHandler.bind(_this));\n        return _this;\n    }\n    InputField.prototype.destroy = function () {\n        if (this.node)\n            this.node.removeEventListener("keypress", this.onKeypressHandler.bind(this));\n        _super.prototype.destroy.call(this);\n    };\n    InputField.prototype.onKeypressHandler = function (e) {\n        var keycode = e.keyCode || e.which;\n        if (keycode === 13) {\n            this.emit("enter", this.text);\n        }\n    };\n    return InputField;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/input.field.ts?')},"./src/render/ui/components/input.panel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InputPanel", function() { return InputPanel; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar InputPanel = /** @class */ (function (_super) {\n    __extends(InputPanel, _super);\n    function InputPanel(scene, render, text) {\n        var _this = _super.call(this) || this;\n        _this.render = render;\n        _this.scene = scene;\n        var width = scene.cameras.main.width;\n        var height = scene.cameras.main.height;\n        _this.mBackground = scene.add.graphics();\n        _this.mBackground.fillStyle(0x0, 0.6);\n        _this.mBackground.fillRect(0, 0, width, height).setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        _this.mInput = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"](scene, 6 * render.uiRatio, 6 * render.uiRatio, width - 12 * render.uiRatio, 40 * render.uiRatio, {\n            fontSize: 20 * render.uiRatio + "px",\n            color: "#0",\n            text: text,\n            backgroundColor: "#FFFFFF",\n            borderColor: "#FF9900"\n        }).setOrigin(0, 0);\n        _this.mInput.node.addEventListener("keypress", function (e) {\n            var keycode = e.keyCode || e.which;\n            if (keycode === 13) {\n                _this.onCloseHandler();\n            }\n        });\n        _this.mInput.x = 6 * render.uiRatio;\n        _this.scene.input.on("pointerdown", _this.onFoucesHandler, _this);\n        if (_this.render.game.device.os.iOS) {\n            _this.mInput.on("click", _this.onFoucesHandler, _this);\n        }\n        else {\n            _this.mInput.on("focus", _this.onFoucesHandler, _this);\n        }\n        _this.mInput.setFocus();\n        return _this;\n    }\n    InputPanel.prototype.onCloseHandler = function () {\n        this.emit("close", this.mInput.text);\n        this.mBackground.destroy();\n        this.mInput.destroy();\n        this.destroy();\n        this.scene.input.off("pointerdown", this.onFoucesHandler, this);\n        this.scene = undefined;\n    };\n    InputPanel.prototype.onFoucesHandler = function () {\n        this.mInput.node.focus();\n    };\n    return InputPanel;\n}(Phaser.Events.EventEmitter));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/input.panel.ts?')},"./src/render/ui/components/input.view.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InputView", function() { return InputView; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _base_panel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.panel */ "./src/render/ui/components/base.panel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InputView = /** @class */ (function (_super) {\n    __extends(InputView, _super);\n    function InputView(scene, render) {\n        return _super.call(this, scene, render) || this;\n    }\n    InputView.prototype.show = function (param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        this.mWorld.uiManager.getUILayerManager().addToDialogLayer(this);\n    };\n    InputView.prototype.resize = function (w, h) {\n        var width = this.scaleWidth;\n        var height = this.scaleHeight;\n        this.content.x = width / 2;\n        this.content.y = height / 2;\n        _super.prototype.resize.call(this, w, h);\n        this.border.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n    };\n    InputView.prototype.preload = function () {\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].common3Key, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].textureUrl(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].common3Url), picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].jsonUrl(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].common3Url));\n        this.addAtlas(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].textureUrl(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl), picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].jsonUrl(picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasName"].commonUrl));\n        _super.prototype.preload.call(this);\n    };\n    InputView.prototype.init = function () {\n        var _a = this.scene.cameras.main, width = _a.width, height = _a.height;\n        var border = this.scene.make.graphics(undefined, false);\n        border.fillStyle(0, 0.6);\n        border.fillRect(0, 0, width, height);\n        this.add(border);\n        this.border = border;\n        this.content = this.scene.make.container(undefined, false);\n        this.add(this.content);\n        var background = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].common3Key, frame: "bg_universal_box" });\n        this.content.add(background);\n        this.content.setSize(background.width, background.height);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, this.key, "close");\n        this.closeBtn.setDisplaySize(28 * this.dpr, 28 * this.dpr);\n        this.closeBtn.setPosition(this.content.width * 0.5 - 5 * this.dpr, -this.content.height * 0.5 + this.dpr * 4);\n        this.closeBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap), this.onCloseHandler, this);\n        this.add(this.closeBtn);\n        var title = this.scene.make.image({\n            y: -background.height / 2,\n            key: picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].common3Key,\n            frame: "title"\n        });\n        title.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.content.add(title);\n        this.mTitleLabel = this.scene.make.text({\n            y: title.y - 6 * this.dpr,\n            style: {\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_2__["Font"].DEFULT_FONT,\n                fontSize: 19 * this.dpr,\n                color: "#905B06"\n            }\n        }, false).setOrigin(0.5);\n        this.content.add(this.mTitleLabel);\n        var btn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSliceButton"](this.mScene, 0, 0, 181 * this.dpr, 45 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_1__["UIAtlasKey"].commonKey, "yellow_btn_normal", utils__WEBPACK_IMPORTED_MODULE_2__["i18n"].t("common.editnow"), this.dpr, this.scale, utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].button(this.dpr));\n        btn.setTextStyle(utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].brownishStyle(this.dpr, 21));\n        btn.setFontStyle("bold");\n        btn.y = this.content.height * 0.5 - btn.height * 0.5 - 20 * this.dpr;\n        btn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onClickHandler, this);\n        this.content.add(btn);\n        this.mInput = this.createInput(0, -30 * this.dpr, 279 * this.dpr, 52 * this.dpr, 17 * this.dpr);\n        this.mInput.on("textchange", this.onTextChangeHandler, this);\n        _super.prototype.init.call(this);\n        this.resize(width, height);\n        this.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n    };\n    InputView.prototype.createInput = function (x, y, width, height, font, type) {\n        if (type === void 0) { type = "text"; }\n        var mblackbg = this.scene.make.graphics(undefined, false);\n        mblackbg.fillStyle(0xA4EFF3, 0.66);\n        mblackbg.fillRoundedRect(-width * 0.5, -height * 0.5, width, height, 6 * this.dpr);\n        mblackbg.setPosition(x, y);\n        this.content.add(mblackbg);\n        var input = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"](this.scene, x, y, width - 20 * this.dpr, height - 10 * this.dpr, {\n            type: type,\n            placeholder: this.showData.placeholder,\n            color: "#055C62",\n            fontSize: font + "px"\n        });\n        this.content.add(input);\n        return input;\n    };\n    InputView.prototype.onClickHandler = function () {\n        var text = this.mInput.text;\n        var handler = this.showData.handler;\n        if (handler)\n            handler.runWith(text);\n        this.onCloseHandler();\n    };\n    InputView.prototype.onCloseHandler = function () {\n        if (this.parentContainer) {\n            this.parentContainer.remove(this);\n            this.destroy();\n        }\n        if (!this.mShowData || this.mShowData.once !== false) {\n            this.destroy();\n            this.mShowData = undefined;\n        }\n    };\n    InputView.prototype.onTextChangeHandler = function () {\n        var maxWidth = this.showData.maxWidth;\n        if (!maxWidth)\n            return;\n        this.mInput.text = utils__WEBPACK_IMPORTED_MODULE_2__["UIHelper"].spliceText(maxWidth, this.mInput.text, 17 * this.dpr, this.scene);\n    };\n    return InputView;\n}(_base_panel__WEBPACK_IMPORTED_MODULE_3__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/input.view.ts?')},"./src/render/ui/components/item.slot.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ItemSlot", function() { return ItemSlot; });\n/* harmony import */ var _dragDropIcon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dragDropIcon */ "./src/render/ui/components/dragDropIcon.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _tips_toolTip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tips/toolTip */ "./src/render/ui/components/tips/toolTip.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _scenes_main_ui_scene__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../scenes/main.ui.scene */ "./src/render/scenes/main.ui.scene.ts");\n\n\n\n\n\nvar ItemSlot = /** @class */ (function () {\n    function ItemSlot(scene, render, parentCon, x, y, resStr, respng, resjson, resSlot, selectRes, subscriptRes) {\n        this.minitialize = false;\n        this.mWid = 0;\n        this.mHei = 0;\n        this.isTipBoo = true;\n        this.mScene = scene;\n        this.mRender = render;\n        this.toolTipCon = scene.make.container(undefined, false); // new ToolTipContainer(this.mScene, world);\n        this.toolTipCon.x = x;\n        this.toolTipCon.y = y;\n        parentCon.add(this.toolTipCon);\n        this.mResStr = resStr;\n        this.mResPng = respng;\n        this.mResJson = resjson;\n        this.mResSlot = resSlot;\n        this.mSubScriptRes = subscriptRes;\n        this.mSelectRes = selectRes;\n    }\n    Object.defineProperty(ItemSlot.prototype, "hasTip", {\n        get: function () {\n            return this.isTipBoo;\n        },\n        set: function (value) {\n            this.isTipBoo = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ItemSlot.prototype.createUI = function () {\n        this.onLoadCompleteHandler();\n    };\n    ItemSlot.prototype.getView = function () {\n        return this.toolTipCon;\n    };\n    ItemSlot.prototype.getBg = function () {\n        return this.itemBG;\n    };\n    ItemSlot.prototype.getIcon = function () {\n        return this.mIcon;\n    };\n    ItemSlot.prototype.dataChange = function (val) {\n        var _this = this;\n        if (!this.minitialize)\n            return;\n        this.mData = val;\n        if (this.mIcon) {\n            var url = void 0;\n            if (this.mData && this.mData.display) {\n                url = this.mData.display.texturePath;\n                var des = this.mData.des ? "\\n" + this.mData.des : "";\n                this.setToolTipData(this.mData.name + this.mData.des);\n            }\n            else {\n                this.mIcon.icon.visible = false;\n            }\n            if (!url)\n                return;\n            if (this.mScene.textures.exists(utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(url))) {\n                if (this.mData) {\n                    this.mIcon.icon.setTexture(utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getOsdRes(url));\n                    this.mIcon.icon.visible = true;\n                }\n            }\n            else {\n                this.mIcon.load(url, this, function () {\n                    if (_this.mData) {\n                        _this.mIcon.icon.visible = true;\n                    }\n                });\n            }\n        }\n        else {\n            this.mIcon.icon.visible = false;\n        }\n    };\n    ItemSlot.prototype.destroy = function () {\n        if (this.mSubScriptSprite) {\n            this.mSubScriptSprite.destroy(true);\n            this.mSubScriptSprite = null;\n        }\n        if (this.mSelectSprite) {\n            this.mSelectSprite.destroy(true);\n            this.mSelectSprite = null;\n        }\n        if (this.mIcon) {\n            this.mIcon.destroy();\n        }\n        if (this.toolTipCon) {\n            this.toolTipCon.destroy();\n            this.toolTipCon = null;\n        }\n        if (this.toolTip) {\n            this.toolTip.destroy();\n            this.toolTip = null;\n        }\n        if (this.mAnimationCon) {\n            this.mAnimationCon.destroy(true);\n            this.mAnimationCon = null;\n        }\n        if (this.itemBG) {\n            this.itemBG.destroy(true);\n            this.itemBG = null;\n        }\n        this.index = 0;\n        this.mData = null;\n        this.mScene = null;\n        this.mRender = null;\n        this.mResStr = null;\n        this.mResPng = null;\n        this.mResSlot = null;\n        this.mResJson = null;\n        this.mSubScriptRes = null;\n        this.mSelectRes = null;\n        this.minitialize = false;\n        this.mWid = 0;\n        this.mHei = 0;\n        this.mData = null;\n        this.isTipBoo = true;\n    };\n    ItemSlot.prototype.setToolTipData = function (text) {\n        if (this.toolTip) {\n            this.toolTip.setToolTipData(text);\n        }\n    };\n    ItemSlot.prototype.onLoadCompleteHandler = function () {\n        this.itemBG = this.mScene.make.sprite(undefined, false);\n        this.itemBG.setTexture(this.mResStr, this.mResSlot);\n        this.toolTipCon.addAt(this.itemBG, 0);\n        this.toolTipCon.setSize(this.itemBG.width, this.itemBG.height);\n        this.mIcon = new _dragDropIcon__WEBPACK_IMPORTED_MODULE_0__["DragDropIcon"](this.mScene, 0, 0);\n        this.toolTipCon.addAt(this.mIcon, 1);\n        if (this.mSubScriptRes) {\n            this.mSubScriptSprite = this.mScene.make.sprite(undefined, false);\n            this.mSubScriptSprite.setTexture(this.mResStr, this.mSubScriptRes);\n            this.mSubScriptSprite.x = this.mSubScriptSprite.width - this.itemBG.width >> 1;\n            this.mSubScriptSprite.y = this.mSubScriptSprite.height - this.itemBG.height >> 1;\n            // this.con.addAt(this.mSubScriptSprite, 2);\n        }\n        if (this.isTipBoo) {\n            this.toolTip = new _tips_toolTip__WEBPACK_IMPORTED_MODULE_2__["ToolTip"](this.mScene, "itemSlotTip", utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes("ui/toolTip/toolTip.json"), utils__WEBPACK_IMPORTED_MODULE_1__["Url"].getRes("ui/toolTip/toolTip.png"), this.mRender.uiScale);\n        }\n        this.toolTipCon.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.itemBG.width, 56), Phaser.Geom.Rectangle.Contains);\n        this.toolTipCon.on("pointerover", this.overHandler, this);\n        this.toolTipCon.on("pointerout", this.outHandler, this);\n        this.toolTipCon.on("pointerdown", this.downHandler, this);\n        this.toolTipCon.on("pointerup", this.outHandler, this);\n        this.minitialize = true;\n        if (this.mData) {\n            this.dataChange(this.mData);\n        }\n        this.mWid += this.itemBG.width;\n        this.mHei += this.itemBG.height;\n    };\n    ItemSlot.prototype.downHandler = function (pointer) {\n        if (!this.mData) {\n            return;\n        }\n        this.mRender.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_3__["EventType"].REQUEST_TARGET_UI, this.mData.id);\n    };\n    ItemSlot.prototype.overHandler = function (pointer) {\n        if (this.toolTip && this.mData) {\n            this.mRender.sceneManager.currentScene.layerManager.addToLayer(_scenes_main_ui_scene__WEBPACK_IMPORTED_MODULE_4__["MainUIScene"].LAYER_TOOLTIPS, this.toolTip);\n            this.toolTip.setToolTipData(this.mData.name + this.mData.des);\n            this.toolTip.x = pointer.x;\n            this.toolTip.y = pointer.y;\n        }\n        if (this.mSelectRes && this.mSelectRes.length > 0) {\n            this.mSelectSprite = this.mScene.make.sprite(undefined, false);\n            this.mSelectSprite.play(this.mSelectRes);\n            this.toolTipCon.add(this.mSelectSprite);\n        }\n    };\n    ItemSlot.prototype.outHandler = function (pointer) {\n        if (this.toolTip) {\n            if (this.toolTip.parentContainer) {\n                this.toolTip.parentContainer.remove(this.toolTip);\n            }\n        }\n        if (this.mSelectSprite && this.mSelectSprite.parentContainer) {\n            this.mSelectSprite.parentContainer.remove(this.mSelectSprite);\n            this.mSelectSprite.destroy(true);\n            this.mSelectSprite = null;\n        }\n    };\n    return ItemSlot;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/item.slot.ts?')},"./src/render/ui/components/items.consume.funpanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ItemsConsumeFunPanel", function() { return ItemsConsumeFunPanel; });\n/* harmony import */ var _dynamic_image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dynamic.image */ "./src/render/ui/components/dynamic.image.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _tips_ItemInfoTips__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tips/ItemInfoTips */ "./src/render/ui/components/tips/ItemInfoTips.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var picaRes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! picaRes */ "./src/pica/res/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar ItemsConsumeFunPanel = /** @class */ (function (_super) {\n    __extends(ItemsConsumeFunPanel, _super);\n    function ItemsConsumeFunPanel(scene, width, height, dpr, zoom, havebutton) {\n        if (havebutton === void 0) { havebutton = true; }\n        var _this = _super.call(this, scene) || this;\n        _this.materialItems = [];\n        _this.havebutton = true;\n        _this.isEnough = false;\n        _this.dpr = dpr;\n        _this.zoom = zoom;\n        _this.havebutton = havebutton;\n        _this.setSize(width, height);\n        _this.create();\n        return _this;\n    }\n    ItemsConsumeFunPanel.prototype.createBackGrphaic = function (width, height) {\n        this.mblackGraphic = this.scene.make.graphics(undefined, false);\n        this.mblackGraphic.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        this.mblackGraphic.fillStyle(0, 0.66);\n        this.mblackGraphic.fillRect(-width * 0.5, -height * 0.5 + this.y, width, height);\n        this.addAt(this.mblackGraphic, 0);\n    };\n    ItemsConsumeFunPanel.prototype.resetMask = function () {\n        this.gameScroll.refreshMask();\n    };\n    ItemsConsumeFunPanel.prototype.setHandler = function (handler) {\n        this.confirmHandler = handler;\n    };\n    ItemsConsumeFunPanel.prototype.setTextInfo = function (title, materialtitle, buttontex) {\n        this.title.text = "[b]" + title + "[/b]";\n        this.materialTitle.text = materialtitle;\n        this.materialLine.x = this.materialTitle.x - this.materialTitle.width * 0.5 - 6 * this.dpr - this.materialLine.width * 0.5;\n        this.materialLine2.x = this.materialTitle.x + this.materialTitle.width * 0.5 + 6 * this.dpr + this.materialLine2.width * 0.5;\n        if (this.havebutton && buttontex !== undefined)\n            this.confirmBtn.setText(buttontex);\n    };\n    ItemsConsumeFunPanel.prototype.setItemDatas = function (datas) {\n        this.gameScroll.visible = true;\n        this.gameScroll.clearItems(false);\n        for (var _i = 0, _a = this.materialItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.visible = false;\n        }\n        this.isEnough = true;\n        for (var i = 0; i < datas.length; i++) {\n            var item = void 0;\n            var data = datas[i];\n            if (i < this.materialItems.length) {\n                item = this.materialItems[i];\n            }\n            else {\n                item = new MaterialItem(this.scene, this.dpr);\n                this.materialItems.push(item);\n            }\n            item.visible = true;\n            item.setItemData(data);\n            this.gameScroll.addItem(item);\n            if (data.neededCount > data.count) {\n                this.isEnough = false;\n            }\n        }\n        this.gameScroll.Sort();\n    };\n    ItemsConsumeFunPanel.prototype.setContent = function (title) {\n        this.contentTitle.visible = true;\n        this.contentTitle.text = title;\n        this.gameScroll.visible = false;\n    };\n    ItemsConsumeFunPanel.prototype.create = function () {\n        var _this = this;\n        var bg = this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].common2Key, frame: "bg_universal_box" });\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.add(bg);\n        this.setSize(bg.width, bg.height);\n        this.title = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](this.scene, 0, -this.height * 0.5 + 22 * this.dpr, "", {\n            color: "#996600",\n            fontSize: 14 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            stroke: "#996600",\n            strokeThickness: 3 * this.dpr,\n        }).setOrigin(0.5);\n        this.add(this.title);\n        this.closeBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["Button"](this.scene, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].commonKey, "close", "close");\n        this.closeBtn.setPosition(this.width * 0.5 - this.dpr * 5, -this.height * 0.5 + this.dpr * 5).setScale(1.3);\n        this.closeBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap), this.onCloseHandler, this);\n        this.add(this.closeBtn);\n        var offsetx = this.havebutton ? 0 : 20 * this.dpr;\n        this.materialTitle = this.scene.make.text({\n            x: 0,\n            y: -this.height * 0.5 + 50 * this.dpr + offsetx,\n            text: "",\n            bold: true,\n            style: {\n                color: "#263FCB",\n                fontSize: 12 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n                wordWrap: {\n                    width: 90 * this.dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false).setOrigin(0.5);\n        this.materialLine = this.scene.make.image({ x: -10 * this.dpr, y: this.materialTitle.y, key: picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].common2Key, frame: "line_left" });\n        this.materialLine.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.materialLine2 = this.scene.make.image({ x: 10 * this.dpr, y: this.materialTitle.y, key: picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].common2Key, frame: "line_right" });\n        this.materialLine2.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.add([this.materialTitle, this.materialLine, this.materialLine2]);\n        this.gameScroll = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["GameScroller"](this.scene, {\n            x: 0,\n            y: -7 * this.dpr + offsetx,\n            width: this.width - 40 * this.dpr,\n            height: 90 * this.dpr,\n            zoom: this.zoom,\n            align: 2,\n            orientation: 1,\n            dpr: this.dpr,\n            space: 12 * this.dpr,\n            cellupCallBack: function (gameobject) {\n                _this.onMaterialItemHandler(gameobject);\n            }\n        });\n        this.add(this.gameScroll);\n        this.contentTitle = this.scene.make.text({\n            x: 0,\n            y: -10 * this.dpr + offsetx,\n            text: "",\n            style: {\n                color: "#FFC51A",\n                fontSize: 15 * this.dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT,\n            }\n        }, false).setOrigin(0.5);\n        this.add(this.contentTitle);\n        this.contentTitle.visible = false;\n        if (this.havebutton) {\n            this.confirmBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["NineSliceButton"](this.scene, 0, 0, 106 * this.dpr, 40 * this.dpr, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].commonKey, "yellow_btn", utils__WEBPACK_IMPORTED_MODULE_3__["i18n"].t("common.confirm"), this.dpr, 1, {\n                left: 12 * this.dpr,\n                top: 12 * this.dpr,\n                right: 12 * this.dpr,\n                bottom: 12 * this.dpr\n            });\n            this.confirmBtn.y = this.height * 0.5 - this.confirmBtn.height * 0.5 - 13 * this.dpr;\n            this.confirmBtn.setTextStyle({ fontSize: 16 * this.dpr, color: "#996600" });\n            this.confirmBtn.on(String(apowophaserui__WEBPACK_IMPORTED_MODULE_1__["ClickEvent"].Tap), this.onConfirmHandler, this);\n            this.add(this.confirmBtn);\n        }\n        var tipsWidth = 145 * this.dpr;\n        var tipsHeight = 55 * this.dpr;\n        this.itemtips = new _tips_ItemInfoTips__WEBPACK_IMPORTED_MODULE_2__["ItemInfoTips"](this.scene, tipsWidth, tipsHeight, picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].common2Key, "tips_bg", this.dpr, {\n            left: 10 * this.dpr,\n            top: 10 * this.dpr,\n            right: 10 * this.dpr,\n            bottom: 10 * this.dpr\n        });\n        this.itemtips.x = -this.width * 0.5 + tipsWidth * 0.5 + 10 * this.dpr;\n        this.itemtips.y = -this.height * 0.5 + 70 * this.dpr;\n        this.itemtips.setVisible(false);\n        this.add(this.itemtips);\n    };\n    ItemsConsumeFunPanel.prototype.onConfirmHandler = function () {\n        this.onCloseHandler();\n        if (this.confirmHandler && this.isEnough)\n            this.confirmHandler.run();\n    };\n    ItemsConsumeFunPanel.prototype.onCloseHandler = function () {\n        this.visible = false;\n        this.gameScroll.clearItems(false);\n        this.gameScroll.visible = false;\n        this.contentTitle.visible = false;\n        this.itemtips.setVisible(false);\n        if (this.curSelectItem) {\n            this.curSelectItem.select = false;\n            this.curSelectItem = undefined;\n        }\n        if (this.parentContainer)\n            this.parentContainer.remove(this);\n    };\n    ItemsConsumeFunPanel.prototype.onMaterialItemHandler = function (gameobject) {\n        this.itemtips.setVisible(false);\n        if (this.curSelectItem && this.curSelectItem !== gameobject) {\n            this.curSelectItem.select = false;\n        }\n        gameobject.select = !gameobject.select;\n        if (gameobject.select) {\n            this.itemtips.setItemData(gameobject.itemData);\n            this.itemtips.setVisible(true);\n        }\n        this.curSelectItem = gameobject;\n        this.setTipsPosition(gameobject);\n    };\n    ItemsConsumeFunPanel.prototype.setTipsPosition = function (gameobject) {\n        var posx = gameobject.x;\n        var posy = gameobject.y;\n        var tempobject = gameobject;\n        while (tempobject.parentContainer !== this) {\n            posx += tempobject.parentContainer.x;\n            posy += tempobject.parentContainer.y;\n            tempobject = tempobject.parentContainer;\n        }\n        if (posx - this.itemtips.width * 0.5 < -this.width * 0.5) {\n            this.itemtips.x = this.itemtips.width * 0.5 - this.width * 0.5;\n        }\n        else if (posx + this.itemtips.width * 0.5 > this.width * 0.5) {\n            this.itemtips.x = this.width * 0.5 - this.itemtips.width * 0.5;\n        }\n        else {\n            this.itemtips.x = posx;\n        }\n        this.itemtips.y = posy - this.itemtips.height * 0.5 + 5 * this.dpr;\n    };\n    return ItemsConsumeFunPanel;\n}(Phaser.GameObjects.Container));\n\nvar MaterialItem = /** @class */ (function (_super) {\n    __extends(MaterialItem, _super);\n    function MaterialItem(scene, dpr) {\n        var _this = _super.call(this, scene) || this;\n        _this.mselect = false;\n        _this.dpr = dpr;\n        _this.bg = _this.scene.make.image({ key: picaRes__WEBPACK_IMPORTED_MODULE_4__["UIAtlasKey"].common2Key, frame: "material_unchecked" });\n        _this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        _this.itemIcon = new _dynamic_image__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](scene, 0, 0);\n        _this.itemCount = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](_this.scene, 0, 15 * dpr, "10/20", { color: "#000000" })\n            .setOrigin(0.5).setFontSize(11 * dpr).setFontFamily(utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT);\n        _this.add([_this.bg, _this.itemIcon, _this.itemCount]);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.itemCount.y = _this.height * 0.5 + 8 * dpr;\n        return _this;\n    }\n    MaterialItem.prototype.setItemData = function (data) {\n        var _this = this;\n        this.itemData = data;\n        this.itemCount.text = this.getCountText(data.count, data.neededCount);\n        var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(data.texturePath);\n        this.itemIcon.load(url, this, function () {\n            _this.itemIcon.scale = _this.dpr;\n            _this.itemIcon.setPosition(0, 0);\n        });\n    };\n    Object.defineProperty(MaterialItem.prototype, "select", {\n        get: function () {\n            return this.mselect;\n        },\n        set: function (value) {\n            this.mselect = value;\n            this.bg.setFrame(value ? "material_checked" : "material_unchecked");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MaterialItem.prototype.getCountText = function (count, needcount) {\n        var color = (count >= needcount ? "#000000" : "#ff0000");\n        var text = "[stroke=" + color + "][color=" + color + "]" + count + "[/color][/stroke]/" + needcount;\n        return text;\n    };\n    return MaterialItem;\n}(Phaser.GameObjects.Container));\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/items.consume.funpanel.ts?')},"./src/render/ui/components/label.input.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LabelInput", function() { return LabelInput; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar LabelInput = /** @class */ (function (_super) {\n    __extends(LabelInput, _super);\n    function LabelInput(scene, config) {\n        var _this = _super.call(this, scene) || this;\n        _this.mAutoBlur = true;\n        var labelConfig = {\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT\n        };\n        var clickW = config.width || 100;\n        var clickH = config.height || 100;\n        _this.mPlaceholder = config.placeholder;\n        _this.mLabel = _this.scene.make.text({\n            text: _this.mPlaceholder,\n            style: Object.assign(labelConfig, config)\n        }, false).setInteractive(new Phaser.Geom.Rectangle(-clickW * 0.5, -clickH * 0.5, clickW, clickH), Phaser.Geom.Rectangle.Contains);\n        _this.mOriginX = _this.mLabel.originX;\n        _this.mOriginY = _this.mLabel.originY;\n        _this.mLabel.on("pointerdown", _this.onPointerDownHandler, _this);\n        _this.mLabel.on("pointerup", _this.onShowInputHandler, _this);\n        _this.add(_this.mLabel);\n        _this.setSize(clickW, clickH);\n        _this.mInputConfig = config;\n        return _this;\n    }\n    LabelInput.prototype.setText = function (val) {\n        this.mLabel.setText(this.mPlaceholder ? val ? val : this.mPlaceholder : val);\n        if (this.mInputText) {\n            this.mInputText.text = val;\n        }\n        return this;\n    };\n    LabelInput.prototype.setOrigin = function (x, y) {\n        if (y === undefined)\n            y = x;\n        this.mLabel.setOrigin(x, y);\n        this.mOriginX = x;\n        this.mOriginY = y;\n        if (this.mInputText)\n            this.mInputText.setOrigin(x, y);\n        this.mLabel.input.hitArea = new Phaser.Geom.Rectangle(-this.width * x, -this.height * y, this.width, this.height);\n        return this;\n    };\n    LabelInput.prototype.createBackground = function (padding, radius) {\n        if (!this.mBackground) {\n            this.mBackground = this.scene.make.graphics(undefined, false);\n        }\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0xFFFFFF);\n        this.mBackground.fillRoundedRect(-padding + this.width * this.mLabel.originX, -padding + this.height * this.mLabel.originY, this.width + padding * 2, this.height + padding * 2, radius);\n        this.addAt(this.mBackground, 0);\n    };\n    LabelInput.prototype.setSize = function (w, h) {\n        _super.prototype.setSize.call(this, w, h);\n        this.mLabel.input.hitArea = new Phaser.Geom.Rectangle(-this.width * this.mLabel.originX, -this.height * this.mLabel.originX, this.width, this.height);\n        return this;\n    };\n    LabelInput.prototype.setAutoBlur = function (val) {\n        this.mAutoBlur = val;\n        return this;\n    };\n    LabelInput.prototype.setBlur = function () {\n        this.onShowLabel();\n    };\n    LabelInput.prototype.destroy = function () {\n        this.mLabel.destroy();\n        this.destroyInput();\n        _super.prototype.destroy.call(this);\n    };\n    LabelInput.prototype.createInputText = function () {\n        var _this = this;\n        if (this.mInputText) {\n            return;\n        }\n        this.mInputText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["InputText"](this.scene, Object.assign({}, this.mInputConfig)).setOrigin(this.mOriginX, this.mOriginY);\n        this.mInputText.on("textchange", this.onTextChangeHandler, this);\n        this.mInputText.on("blur", this.onTextBlurHandler, this);\n        this.mInputText.on("focus", this.onTextFocusHandler, this);\n        this.mInputText.x = this.mLabel.x;\n        this.mInputText.y = this.mLabel.y;\n        this.mInputText.node.addEventListener("keypress", function (e) {\n            var keycode = e.keyCode || e.which;\n            if (keycode === 13) {\n                _this.emit("enter", _this.mInputText.text);\n                if (_this.mAutoBlur)\n                    _this.onShowLabel();\n            }\n        });\n    };\n    LabelInput.prototype.onShowInputHandler = function () {\n        this.createInputText();\n        this.remove(this.mLabel);\n        this.add(this.mInputText);\n        if (this.mInputConfig.placeholder !== this.mLabel.text)\n            this.mInputText.setText(this.mLabel.text);\n        this.mInputText.setFocus();\n    };\n    LabelInput.prototype.onPointerDownHandler = function () {\n    };\n    LabelInput.prototype.onShowLabel = function () {\n        if (this.mInputText) {\n            if (!this.mInputText.text && this.mInputConfig.placeholder) {\n                this.mLabel.setText(this.mInputConfig.placeholder);\n            }\n            else {\n                this.mLabel.setText(this.mInputText.text);\n            }\n            this.destroyInput();\n        }\n        this.add(this.mLabel);\n    };\n    LabelInput.prototype.destroyInput = function () {\n        if (this.mInputText) {\n            this.mInputText.off("textchange", this.onTextChangeHandler, this);\n            this.mInputText.off("blur", this.onTextBlurHandler, this);\n            this.mInputText.off("focus", this.onTextFocusHandler, this);\n            this.mInputText.destroy();\n            this.mInputText = undefined;\n        }\n    };\n    LabelInput.prototype.onTextChangeHandler = function (input, event) {\n        this.emit("textchange");\n    };\n    LabelInput.prototype.onTextBlurHandler = function () {\n        this.emit("blur");\n    };\n    LabelInput.prototype.onTextFocusHandler = function (e) {\n        this.emit("focus");\n    };\n    Object.defineProperty(LabelInput.prototype, "object", {\n        get: function () {\n            return this.mInputText || this.mLabel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LabelInput.prototype, "text", {\n        get: function () {\n            if (this.mInputText) {\n                return this.mInputText.text;\n            }\n            return this.mLabel.text;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return LabelInput;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/label.input.ts?')},"./src/render/ui/components/material.item.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MaterialItem", function() { return MaterialItem; });\n/* harmony import */ var _prop_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prop.item */ "./src/render/ui/components/prop.item.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar MaterialItem = /** @class */ (function (_super) {\n    __extends(MaterialItem, _super);\n    function MaterialItem(scene, key, bgframe, selectframe, dpr, style) {\n        var _this = _super.call(this, scene, key, bgframe, dpr, style) || this;\n        _this.mselect = false;\n        _this.selectframe = selectframe;\n        return _this;\n    }\n    MaterialItem.prototype.setItemData = function (data, needvalue) {\n        if (needvalue === void 0) { needvalue = true; }\n        _super.prototype.setItemData.call(this, data);\n        this.itemCount.text = needvalue ? this.getCountText(data.count, data.neededCount) : data.count;\n    };\n    Object.defineProperty(MaterialItem.prototype, "select", {\n        get: function () {\n            return this.mselect;\n        },\n        set: function (value) {\n            this.bg.setFrame(value ? this.selectframe : this.bgframe);\n            this.mselect = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MaterialItem.prototype.getCountText = function (count, needcount) {\n        var color = (count >= needcount ? "#000000" : "#ff0000");\n        var text = "[stroke=" + color + "][color=" + color + "]" + count + "[/color][/stroke]/" + needcount;\n        return text;\n    };\n    return MaterialItem;\n}(_prop_item__WEBPACK_IMPORTED_MODULE_0__["PropItem"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/material.item.ts?')},"./src/render/ui/components/nine.patch.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NinePatch", function() { return NinePatch; });\n/* harmony import */ var _patches_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./patches.config */ "./src/render/ui/components/patches.config.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar NinePatch = /** @class */ (function (_super) {\n    __extends(NinePatch, _super);\n    function NinePatch(scene, x, y, width, height, key, frame, config) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.config = config || _this.scene.cache.custom.ninePatch.get(frame ? "" + frame : key);\n        // config\n        _this.patchKey = Math.random() * 1000 + "";\n        _this.config.top = Math.round(_this.config.top);\n        if (_this.config.right)\n            _this.config.right = Math.round(_this.config.right);\n        if (_this.config.bottom)\n            _this.config.bottom = Math.round(_this.config.bottom);\n        if (_this.config.left)\n            _this.config.left = Math.round(_this.config.left);\n        Object(_patches_config__WEBPACK_IMPORTED_MODULE_0__["normalizePatchesConfig"])(_this.config);\n        _this.setSize(width, height);\n        _this.setTexture(key, frame);\n        return _this;\n    }\n    NinePatch.prototype.resize = function (width, height) {\n        width = Math.round(width);\n        height = Math.round(height);\n        if (!this.config) {\n            return this;\n        }\n        if (this.width === width && this.height === height) {\n            return this;\n        }\n        //  1\n        width = Math.max(width, this.config.left + this.config.right + 1);\n        height = Math.max(height, this.config.top + this.config.bottom + 1);\n        this.setSize(width, height);\n        this.drawPatches();\n        return;\n    };\n    NinePatch.prototype.setTexture = function (key, frame) {\n        this.originTexture = this.scene.textures.get(key);\n        this.setFrame(frame);\n        this.originTexture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        return this;\n    };\n    NinePatch.prototype.setFrame = function (frame) {\n        this.originFrame = this.originTexture.frames[frame] || this.originTexture.frames[NinePatch.__BASE];\n        this.createPatches();\n        this.drawPatches();\n        return this;\n    };\n    NinePatch.prototype.setSize = function (width, height) {\n        _super.prototype.setSize.call(this, width, height);\n        this.finalXs = [0, this.config.left, this.width - this.config.right, this.width];\n        this.finalYs = [0, this.config.top, this.height - this.config.bottom, this.height];\n        return this;\n    };\n    NinePatch.prototype.setTint = function (tint) {\n        this.tint = tint;\n        return this;\n    };\n    NinePatch.prototype.setTintFill = function (tint) {\n        this.tint = tint;\n        this.tintFill = true;\n        return this;\n    };\n    Object.defineProperty(NinePatch.prototype, "tintFill", {\n        get: function () {\n            return this.first && this.first.tintFill;\n        },\n        set: function (value) {\n            this.each(function (patch) { return patch.tintFill = value; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NinePatch.prototype, "tint", {\n        set: function (value) {\n            this.each(function (patch) { return patch.setTintFill(value); });\n            this.internalTint = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NinePatch.prototype, "isTinted", {\n        get: function () {\n            return this.first && this.first.isTinted;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NinePatch.prototype.clearTint = function () {\n        this.each(function (patch) { return patch.clearTint(); });\n        this.internalTint = undefined;\n        this.tintFill = false;\n    };\n    NinePatch.prototype.destroy = function () {\n        if (this.originTexture) {\n            var patchIndex = 0;\n            for (var yi = 0; yi < 3; yi++) {\n                for (var xi = 0; xi < 3; xi++) {\n                    var patch = this.getPatchNameByIndex(patchIndex);\n                    if (this.originTexture.frames.hasOwnProperty(patch)) {\n                        this.originTexture.remove(patch);\n                    }\n                    ++patchIndex;\n                }\n            }\n        }\n        _super.prototype.destroy.call(this);\n    };\n    NinePatch.prototype.getPatchNameByIndex = function (index) {\n        return this.originFrame.name + NinePatch.patches[index] + this.patchKey;\n    };\n    NinePatch.prototype.createPatches = function () {\n        // The positions we want from the base texture\n        var textureXs = [0, this.config.left, this.originFrame.width - this.config.right, this.originFrame.width];\n        var textureYs = [0, this.config.top, this.originFrame.height - this.config.bottom, this.originFrame.height];\n        var patchIndex = 0;\n        for (var yi = 0; yi < 3; yi++) {\n            for (var xi = 0; xi < 3; xi++) {\n                this.createPatchFrame(this.getPatchNameByIndex(patchIndex), textureXs[xi], // x\n                textureYs[yi], // y\n                textureXs[xi + 1] - textureXs[xi], // width\n                textureYs[yi + 1] - textureYs[yi] // height\n                );\n                ++patchIndex;\n            }\n        }\n    };\n    // private drawPatches(): void {\n    //     const tintFill = this.tintFill;\n    //     this.removeAll(true);\n    //     let patchIndex = 0;\n    //     for (let yi = 0; yi < 3; yi++) {\n    //         for (let xi = 0; xi < 3; xi++) {\n    //             const patch: Phaser.Textures.Frame = this.originTexture.frames[this.getPatchNameByIndex(patchIndex)];\n    //             const patchImg = new Phaser.GameObjects.Image(this.scene, 0, 0, patch.texture.key, patch.name);\n    //             patchImg.setOrigin(0);\n    //             patchImg.setPosition(this.finalXs[xi] - this.width * this.originX, this.finalYs[yi] - this.height * this.originY);\n    //             patchImg.setScale(\n    //                 (this.finalXs[xi + 1] - this.finalXs[xi]) / patch.width,\n    //                 (this.finalYs[yi + 1] - this.finalYs[yi]) / patch.height\n    //             );\n    //             this.add(patchImg);\n    //             patchImg.setTint(this.internalTint);\n    //             patchImg.tintFill = tintFill;\n    //             ++patchIndex;\n    //         }\n    //     }\n    // }\n    NinePatch.prototype.drawPatches = function () {\n        var tintFill = this.tintFill;\n        this.removeAll(true);\n        var patchIndex = 0;\n        // const info = [];\n        for (var yi = 0; yi < 3; yi++) {\n            for (var xi = 0; xi < 3; xi++) {\n                var patch = this.originTexture.frames[this.getPatchNameByIndex(patchIndex)];\n                var patchImg = new Phaser.GameObjects.Image(this.scene, 0, 0, patch.texture.key, patch.name);\n                patchImg.setOrigin(0);\n                patchImg.setPosition((this.finalXs[xi] * 1000 - this.width * this.originX * 1000) / 1000, (this.finalYs[yi] * 1000 - this.height * this.originY * 1000) / 1000);\n                // patchImg.setScale(\n                //     (this.finalXs[xi + 1] * 1000 - this.finalXs[xi] * 1000) / patch.width / 1000,\n                //     (this.finalYs[yi + 1] * 1000 - this.finalYs[yi] * 1000) / patch.height / 1000\n                // );\n                // displayWidth\n                patchImg.displayWidth = this.finalXs[xi + 1] - this.finalXs[xi];\n                patchImg.displayHeight = this.finalYs[yi + 1] - this.finalYs[yi];\n                this.add(patchImg);\n                if (this.internalTint)\n                    patchImg.setTint(this.internalTint);\n                patchImg.tintFill = tintFill;\n                patchImg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n                ++patchIndex;\n                // info.push({ x: patchImg.x, y: patchImg.y, w: patchImg.width, h: patchImg.height, s: patchImg.scale, sx: patchImg.scaleX, sy: patchImg.scaleY });\n            }\n        }\n    };\n    NinePatch.prototype.createPatchFrame = function (patch, x, y, width, height) {\n        if (this.originTexture.frames.hasOwnProperty(patch)) {\n            return;\n        }\n        this.originTexture.add(patch, this.originFrame.sourceIndex, this.originFrame.cutX + x, this.originFrame.cutY + y, width, height);\n    };\n    NinePatch.__BASE = "__BASE";\n    NinePatch.patches = ["[0][0]", "[1][0]", "[2][0]", "[0][1]", "[1][1]", "[2][1]", "[0][2]", "[1][2]", "[2][2]"];\n    return NinePatch;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/nine.patch.ts?')},"./src/render/ui/components/ninepatch.button.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NinePatchButton", function() { return NinePatchButton; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar NinePatchButton = /** @class */ (function (_super) {\n    __extends(NinePatchButton, _super);\n    function NinePatchButton(scene, x, y, width, height, key, frame, text, config, data) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.mScene = scene;\n        _this.mKey = key;\n        _this.mFrame = frame ? frame : "__BASE";\n        _this.initFrame();\n        _this.setSize(width, height);\n        _this.mNingBg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, width, height, key, _this.mFrame_nrmal, config);\n        _this.add(_this.mNingBg);\n        if (data) {\n            _this.btnData = data;\n        }\n        _this.mLabel = _this.scene.make.text(undefined, false)\n            .setOrigin(0.5, 0.5)\n            .setSize(_this.width, _this.height)\n            .setAlign("center")\n            .setText(text);\n        _this.add(_this.mLabel);\n        // this.setSize(this.mNingBg.width, this.mNingBg.height);\n        _this.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        _this.on("pointerdown", _this.onPointerDown, _this);\n        _this.on("pointerup", _this.onPointerUp, _this);\n        return _this;\n        // this.on("pointerout", this.changeNormal, this);\n        // this.on("pointerover", this.changeOver, this);\n    }\n    Object.defineProperty(NinePatchButton.prototype, "enable", {\n        set: function (value) {\n            if (value) {\n                this.mNingBg.clearTint();\n                this.mLabel.clearTint();\n                this.setInteractive();\n            }\n            else {\n                this.mNingBg.setTintFill(0x666666);\n                this.mLabel.setTintFill(0x777777);\n                this.removeInteractive();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NinePatchButton.prototype.getBtnData = function () {\n        return this.btnData;\n    };\n    NinePatchButton.prototype.setText = function (text) {\n        this.mLabel.setText(text);\n    };\n    NinePatchButton.prototype.getText = function () {\n        return this.mLabel.text;\n    };\n    NinePatchButton.prototype.setTextStyle = function (style) {\n        this.mLabel.setStyle(style);\n    };\n    NinePatchButton.prototype.setFontStyle = function (val) {\n        this.mLabel.setFontStyle(val);\n    };\n    NinePatchButton.prototype.setTextOffset = function (x, y) {\n        this.mLabel.setPosition(x, y);\n    };\n    NinePatchButton.prototype.setFrame = function (frame) {\n        this.mNingBg.setFrame(String(frame));\n        return this;\n    };\n    NinePatchButton.prototype.destroy = function (fromScene) {\n        if (this.mLabel)\n            this.mLabel.destroy();\n        _super.prototype.destroy.call(this, fromScene);\n    };\n    NinePatchButton.prototype.setFrameNormal = function (normal, down, over) {\n        this.mFrame_nrmal = normal;\n        this.mFrame_down = (down ? down : normal);\n        this.mFrame_over = (over ? over : normal);\n        this.changeNormal();\n        return this;\n    };\n    // public setState(val: string) {\n    // }\n    NinePatchButton.prototype.changeNormal = function () {\n        this.setFrame(this.mFrame_nrmal);\n    };\n    NinePatchButton.prototype.changeDown = function () {\n        // this.scale = 0.9;\n        this.setFrame(this.mFrame_down);\n    };\n    NinePatchButton.prototype.changeOver = function () {\n        // this.setTexture()\n        this.setFrame(this.mFrame_over);\n    };\n    NinePatchButton.prototype.isExists = function (frame) {\n        var originTexture = this.scene.textures.get(this.mKey);\n        if (originTexture && originTexture.has(frame))\n            return true;\n        return false;\n    };\n    NinePatchButton.prototype.onPointerDown = function (pointer) {\n        this.changeDown();\n    };\n    NinePatchButton.prototype.onPointerUp = function (pointer) {\n        this.changeNormal();\n        this.emit("click", pointer, this);\n    };\n    Object.defineProperty(NinePatchButton.prototype, "label", {\n        get: function () {\n            return this.mLabel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NinePatchButton.prototype.scaleHandler = function () {\n        this.mScene.tweens.add({\n            targets: this,\n            duration: 50,\n            ease: "Linear",\n            props: {\n                scaleX: { value: .5 },\n                scaleY: { value: .5 },\n            },\n            yoyo: true,\n            repeat: 0,\n        });\n        this.scaleX = this.scaleY = 1;\n    };\n    NinePatchButton.prototype.initFrame = function () {\n        var frame = this.mFrame ? this.mFrame : this.mKey;\n        this.mFrame_nrmal = frame + "_normal";\n        var down = frame + "_down";\n        if (!this.isExists(down)) {\n            down = frame + "_normal";\n        }\n        this.mFrame_down = down;\n        var over = frame + "_over";\n        if (!this.isExists(over)) {\n            over = frame + "_normal";\n        }\n        this.mFrame_over = over;\n    };\n    return NinePatchButton;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/ninepatch.button.ts?')},"./src/render/ui/components/patches.config.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalizePatchesConfig", function() { return normalizePatchesConfig; });\nvar normalizePatchesConfig = function (config) {\n    config.bottom = (config.bottom !== undefined) ? config.bottom : config.top;\n    config.left = (config.left !== undefined) ? config.left : config.top;\n    config.right = (config.right !== undefined) ? config.right : config.left;\n    return config;\n};\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/patches.config.ts?')},"./src/render/ui/components/progress.mask.bar.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProgressMaskBar", function() { return ProgressMaskBar; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar ProgressMaskBar = /** @class */ (function (_super) {\n    __extends(ProgressMaskBar, _super);\n    function ProgressMaskBar(scene, key, background, bar, style, barconfig, bgconfig) {\n        var _this = _super.call(this, scene) || this;\n        _this.value = 0;\n        _this.max = 1;\n        _this.zoom = 1;\n        _this.createBackgroundBar(key, background, bar, style, barconfig, bgconfig);\n        _this.maskGraphics = _this.scene.make.graphics(undefined, false);\n        _this.maskGraphics.fillStyle(0, 1);\n        _this.maskGraphics.fillRect(0, 0, _this.width, _this.height);\n        _this.mBar.setMask(_this.maskGraphics.createGeometryMask());\n        _this.add([_this.mBackground, _this.mBar]);\n        if (_this.mText)\n            _this.add(_this.mText);\n        _this.disInteractive();\n        return _this;\n    }\n    ProgressMaskBar.prototype.setProgress = function (curVal, maxVal) {\n        var value = curVal / maxVal;\n        if (value > 1)\n            value = 1;\n        else if (value < 0)\n            value = 0;\n        this.value = value;\n        this.max = maxVal;\n        this.refreshMask();\n    };\n    ProgressMaskBar.prototype.setText = function (val) {\n        if (this.mText) {\n            this.mText.text = val;\n            if (!this.mText.parentContainer)\n                this.add(this.mText);\n        }\n    };\n    ProgressMaskBar.prototype.refreshMask = function () {\n        var world = this.getWorldTransformMatrix();\n        if (this.zoom !== world.scaleX) {\n            this.zoom = world.scaleX;\n            this.maskGraphics.clear();\n            this.maskGraphics.fillRect(0, 0, this.width * this.zoom, this.height * this.zoom);\n        }\n        var offsetx = world.tx - this.width * this.zoom * 1.5;\n        var tx = offsetx + this.width * this.zoom * this.value;\n        var ty = world.ty - this.height * this.zoom * 0.5;\n        this.maskGraphics.setPosition(tx, ty);\n    };\n    ProgressMaskBar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.maskGraphics.destroy();\n    };\n    Object.defineProperty(ProgressMaskBar.prototype, "text", {\n        get: function () {\n            return this.mText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ProgressMaskBar.prototype, "bar", {\n        get: function () {\n            return this.mBar;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ProgressMaskBar.prototype.createBackgroundBar = function (key, background, bar, style, barconfig, bgconfig) {\n        if (bgconfig) {\n            var bgW = bgconfig.width || this.width;\n            var bgH = bgconfig.height || this.height;\n            this.mBackground = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, -2 * this.dpr, bgW, bgH, key, bar, bgconfig);\n            this.setSize(bgW, bgH);\n        }\n        else {\n            this.mBackground = this.scene.make.image({ key: key, frame: background });\n            this.setSize(this.mBackground.width, this.mBackground.height);\n        }\n        if (barconfig) {\n            var barW = barconfig.width || this.width;\n            var barH = barconfig.height || this.height;\n            this.mBar = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, -2 * this.dpr, barW, barH, key, bar, barconfig);\n        }\n        else\n            this.mBar = this.scene.make.image({ key: key, frame: bar });\n        if (style) {\n            this.mText = this.scene.make.text({\n                style: style\n            }, false);\n        }\n    };\n    return ProgressMaskBar;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BaseUI"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/progress.mask.bar.ts?')},"./src/render/ui/components/progress.three.bar.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProgressThreeBar", function() { return ProgressThreeBar; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! . */ "./src/render/ui/components/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar ProgressThreeBar = /** @class */ (function (_super) {\n    __extends(ProgressThreeBar, _super);\n    function ProgressThreeBar(scene, key, background, bar, style, barconfig, bgconfig) {\n        var _this = _super.call(this, scene) || this;\n        _this.value = 0;\n        _this.max = 1;\n        _this.zoom = 1;\n        _this.createBackgroundBar(key, background, bar, style, barconfig, bgconfig);\n        _this.add([_this.mBackground, _this.mBar]);\n        if (_this.mText)\n            _this.add(_this.mText);\n        _this.disInteractive();\n        return _this;\n    }\n    ProgressThreeBar.prototype.setProgress = function (curVal, maxVal) {\n        var value = curVal / maxVal;\n        if (value > 1)\n            value = 1;\n        else if (value < 0)\n            value = 0;\n        this.value = value;\n        this.max = maxVal;\n        var width = this.width * this.zoom * this.value;\n        this.bar.resize(width, this.height);\n        this.bar.x = -this.width * 0.5 + width * 0.5;\n    };\n    ProgressThreeBar.prototype.setText = function (val) {\n        if (this.mText) {\n            this.mText.text = val;\n            if (!this.mText.parentContainer)\n                this.add(this.mText);\n        }\n    };\n    Object.defineProperty(ProgressThreeBar.prototype, "text", {\n        get: function () {\n            return this.mText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ProgressThreeBar.prototype, "bar", {\n        get: function () {\n            return this.mBar;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ProgressThreeBar.prototype.createBackgroundBar = function (key, background, bar, style, barconfig, bgconfig) {\n        if (bgconfig) {\n            var bgW = bgconfig.width || this.width;\n            var bgH = bgconfig.height || this.height;\n            var correct = barconfig.correct;\n            this.mBackground = new ___WEBPACK_IMPORTED_MODULE_1__["ThreeSlicePath"](this.scene, 0, -2 * this.dpr, bgW, bgH, key, background, 1, 1, correct);\n            this.setSize(bgW, bgH);\n        }\n        else {\n            this.mBackground = this.scene.make.image({ key: key, frame: background });\n            this.setSize(this.mBackground.width, this.mBackground.height);\n        }\n        if (barconfig) {\n            var barW = barconfig.width || this.width;\n            var barH = barconfig.height || this.height;\n            var correct = barconfig.correct;\n            this.mBar = new ___WEBPACK_IMPORTED_MODULE_1__["ThreeSlicePath"](this.scene, 0, -2 * this.dpr, barW, barH, key, bar, 1, 1, correct);\n        }\n        else\n            this.mBar = this.scene.make.image({ key: key, frame: bar });\n        if (style) {\n            this.mText = this.scene.make.text({\n                style: style\n            }, false);\n        }\n    };\n    return ProgressThreeBar;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BaseUI"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/progress.three.bar.ts?')},"./src/render/ui/components/progress.three.mask.bar.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProgressThreeMaskBar", function() { return ProgressThreeMaskBar; });\n/* harmony import */ var _progress_mask_bar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./progress.mask.bar */ "./src/render/ui/components/progress.mask.bar.ts");\n/* harmony import */ var _three_slice_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./three.slice.path */ "./src/render/ui/components/three.slice.path.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar ProgressThreeMaskBar = /** @class */ (function (_super) {\n    __extends(ProgressThreeMaskBar, _super);\n    function ProgressThreeMaskBar(scene, key, background, bar, style, barconfig, bgconfig) {\n        var _this = _super.call(this, scene, key, background, bar, style, barconfig, bgconfig) || this;\n        _this.zoom = 1;\n        return _this;\n    }\n    ProgressThreeMaskBar.prototype.createBackgroundBar = function (key, background, bar, style, barconfig, bgconfig) {\n        if (bgconfig) {\n            var bgW = bgconfig.width || this.width;\n            var bgH = bgconfig.height || this.height;\n            var correct = barconfig.correct;\n            this.mBackground = new _three_slice_path__WEBPACK_IMPORTED_MODULE_1__["ThreeSlicePath"](this.scene, 0, -2 * this.dpr, bgW, bgH, key, background, 1, 1, correct);\n            this.setSize(bgW, bgH);\n        }\n        else {\n            this.mBackground = this.scene.make.image({ key: key, frame: background });\n            this.setSize(this.mBackground.width, this.mBackground.height);\n        }\n        if (barconfig) {\n            var barW = barconfig.width || this.width;\n            var barH = barconfig.height || this.height;\n            var correct = barconfig.correct;\n            this.mBar = new _three_slice_path__WEBPACK_IMPORTED_MODULE_1__["ThreeSlicePath"](this.scene, 0, -2 * this.dpr, barW, barH, key, bar, 1, 1, correct);\n        }\n        else\n            this.mBar = this.scene.make.image({ key: key, frame: bar });\n        if (style) {\n            this.mText = this.scene.make.text({\n                style: style\n            }, false);\n        }\n    };\n    return ProgressThreeMaskBar;\n}(_progress_mask_bar__WEBPACK_IMPORTED_MODULE_0__["ProgressMaskBar"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/progress.three.mask.bar.ts?')},"./src/render/ui/components/prop.item.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropItem", function() { return PropItem; });\n/* harmony import */ var _dynamic_image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dynamic.image */ "./src/render/ui/components/dynamic.image.ts");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _soundButton__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./soundButton */ "./src/render/ui/components/soundButton.ts");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar PropItem = /** @class */ (function (_super) {\n    __extends(PropItem, _super);\n    function PropItem(scene, key, bgframe, dpr, style) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.dpr = dpr;\n        _this.key = key;\n        _this.bgframe = bgframe;\n        _this.bg = _this.scene.make.image({ key: key, frame: bgframe });\n        _this.itemIcon = new _dynamic_image__WEBPACK_IMPORTED_MODULE_0__["DynamicImage"](scene, 0, 0);\n        _this.itemIcon.setTexture(key, bgframe);\n        style = style || { color: "#000000", fontSize: 12 * dpr, fontFamily: utils__WEBPACK_IMPORTED_MODULE_3__["Font"].DEFULT_FONT };\n        _this.itemCount = new apowophaserui__WEBPACK_IMPORTED_MODULE_1__["BBCodeText"](_this.scene, 0, 15 * dpr, "", style)\n            .setOrigin(0.5);\n        _this.add([_this.bg, _this.itemIcon, _this.itemCount]);\n        _this.setSize(_this.bg.width, _this.bg.height);\n        _this.itemCount.y = _this.height * 0.5 + 8 * dpr;\n        return _this;\n    }\n    PropItem.prototype.setHandler = function (handler) {\n        this.send = handler;\n    };\n    PropItem.prototype.setItemData = function (data) {\n        var _this = this;\n        this.itemData = data;\n        this.itemCount.text = data.count + "";\n        var url = utils__WEBPACK_IMPORTED_MODULE_3__["Url"].getOsdRes(data.texturePath);\n        var zoom = this.getWorldTransformMatrix().scaleX;\n        this.itemIcon.scale = this.dpr / zoom;\n        this.itemIcon.load(url, this, function () {\n            _this.itemIcon.setPosition(0, 0);\n        });\n    };\n    PropItem.prototype.setTextPosition = function (x, y) {\n        this.itemCount.x = x;\n        this.itemCount.y = y;\n    };\n    return PropItem;\n}(_soundButton__WEBPACK_IMPORTED_MODULE_2__["SoundButton"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/prop.item.ts?')},"./src/render/ui/components/soundButton.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SoundButton", function() { return SoundButton; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar SoundButton = /** @class */ (function (_super) {\n    __extends(SoundButton, _super);\n    function SoundButton(scene, x, y, tweenBoo, music) {\n        var _this = _super.call(this, scene, x, y) || this;\n        _this.mDownTime = 0;\n        _this.mPressDelay = 1000;\n        _this.mIsMove = false;\n        _this.mTweening = false;\n        _this.tweenScale = 0.9;\n        _this.mTweenBoo = true;\n        _this.soundGroup = {\n            up: {\n                key: "click",\n            }\n        };\n        if (tweenBoo === undefined)\n            tweenBoo = true;\n        _this.mTweenBoo = tweenBoo;\n        Object.assign(_this.soundGroup, music);\n        return _this;\n    }\n    SoundButton.prototype.addListen = function () {\n        this.removeListen();\n        this.on("pointerdown", this.onPointerDownHandler, this);\n        this.on("pointerup", this.onPointerUpHandler, this);\n        this.on("pointerout", this.onPointerOutHandler, this);\n        this.on("pointermove", this.onPointerMoveHandler, this);\n    };\n    SoundButton.prototype.removeListen = function () {\n        this.off("pointerdown", this.onPointerDownHandler, this);\n        this.off("pointerup", this.onPointerUpHandler, this);\n        this.off("pointerout", this.onPointerOutHandler, this);\n        this.off("pointermove", this.onPointerMoveHandler, this);\n    };\n    Object.defineProperty(SoundButton.prototype, "enable", {\n        set: function (value) {\n            if (value) {\n                this.addListen();\n                this.setInteractive();\n            }\n            else {\n                this.removeListen();\n                this.removeInteractive();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SoundButton.prototype.onPointerMoveHandler = function (pointer) {\n        if (this.soundGroup && this.soundGroup.move)\n            this.playSound(this.soundGroup.move);\n        if (!this.interactiveBoo)\n            return;\n        this.mIsMove = true;\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Move);\n    };\n    SoundButton.prototype.onPointerUpHandler = function (pointer) {\n        if (!this.interactiveBoo) {\n            if (this.soundGroup && this.soundGroup.disabled)\n                this.playSound(this.soundGroup.disabled);\n            return;\n        }\n        if (this.mTweenBoo) {\n            this.tween(false, this.pointerUp.bind(this, pointer));\n        }\n        else {\n            this.pointerUp(pointer);\n        }\n    };\n    SoundButton.prototype.pointerUp = function (pointer) {\n        var isdown = this.checkPointerInBounds(this, pointer.worldX, pointer.worldY);\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Up, this);\n        if (isdown && this.mIsDown) {\n            if (this.soundGroup && this.soundGroup.up)\n                this.playSound(this.soundGroup.up);\n            this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, pointer, this);\n        }\n        clearTimeout(this.mPressTime);\n        this.mIsMove = false;\n        this.mIsDown = false;\n        this.mDownTime = 0;\n    };\n    SoundButton.prototype.onPointerOutHandler = function (pointer) {\n        if (this.mTweenBoo && pointer.isDown) {\n            this.tween(false);\n        }\n    };\n    SoundButton.prototype.onPointerDownHandler = function (pointer) {\n        var _this = this;\n        if (this.mTweening)\n            return;\n        if (!this.interactiveBoo) {\n            if (this.soundGroup && this.soundGroup.disabled)\n                this.playSound(this.soundGroup.disabled);\n            return;\n        }\n        if (this.soundGroup && this.soundGroup.down)\n            this.playSound(this.soundGroup.down);\n        this.mDownTime = Date.now();\n        this.mPressTime = setTimeout(function () {\n            _this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, _this);\n        }, this.mPressDelay);\n        if (this.mTweenBoo)\n            this.tween(true);\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Down, this);\n        this.mIsDown = true;\n    };\n    SoundButton.prototype.checkPointerInBounds = function (gameObject, pointerx, pointery) {\n        if (!this.mRectangle) {\n            this.mRectangle = new Phaser.Geom.Rectangle(0, 0, 0, 0);\n        }\n        var worldMatrix = gameObject.getWorldTransformMatrix();\n        var zoom = worldMatrix.scaleX;\n        this.mRectangle.left = -gameObject.width / 2;\n        this.mRectangle.right = gameObject.width / 2;\n        this.mRectangle.top = -gameObject.height / 2;\n        this.mRectangle.bottom = gameObject.height / 2;\n        var x = (pointerx - worldMatrix.tx) / zoom;\n        var y = (pointery - worldMatrix.ty) / zoom;\n        if (this.mRectangle.left <= x && this.mRectangle.right >= x && this.mRectangle.top <= y && this.mRectangle.bottom >= y) {\n            return true;\n        }\n        return false;\n    };\n    SoundButton.prototype.tween = function (show, callback) {\n        var _this = this;\n        this.mTweening = true;\n        var scale = show ? this.tweenScale : 1;\n        if (this.mTween) {\n            this.mTween.stop();\n            this.mTween.remove();\n            this.mTween = undefined;\n        }\n        this.mTween = this.scene.tweens.add({\n            targets: this.list,\n            duration: 45,\n            ease: "Linear",\n            props: {\n                scaleX: { value: scale },\n                scaleY: { value: scale },\n            },\n            onComplete: function () {\n                _this.tweenComplete(show);\n                if (callback)\n                    callback();\n            },\n            onCompleteParams: [this]\n        });\n    };\n    SoundButton.prototype.tweenComplete = function (show) {\n        this.mTweening = false;\n        if (this.mTween) {\n            this.mTween.stop();\n            this.mTween.remove();\n            this.mTween = undefined;\n        }\n    };\n    return SoundButton;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BaseUI"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/soundButton.ts?')},"./src/render/ui/components/texture.sprite.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextureSprite", function() { return TextureSprite; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar TextureSprite = /** @class */ (function (_super) {\n    __extends(TextureSprite, _super);\n    function TextureSprite(scene, dpr, auto, timeFrame, times) {\n        var _this = _super.call(this, scene) || this;\n        _this.isPlaying = false;\n        _this.indexed = 0;\n        _this.dpr = dpr;\n        _this.auto = auto || false;\n        _this.setAniData(times, timeFrame);\n        return _this;\n    }\n    TextureSprite.prototype.load = function (value, compl, error) {\n        if (!this.scene) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().fatal("Create failed does not exist");\n            return;\n        }\n        this.compl = compl;\n        this.error = error;\n        this.mUrls = value;\n        this.loadUrls = [];\n        this.errorUrls = [];\n        for (var _i = 0, _a = this.mUrls; _i < _a.length; _i++) {\n            var url = _a[_i];\n            if (!this.scene.textures.exists(url)) {\n                this.scene.load.image(url);\n                this.loadUrls.push(url);\n            }\n        }\n        if (this.loadUrls.length > 0) {\n            this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE, this.onLoadComplete, this);\n            this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR, this.onLoadError, this);\n            this.scene.load.start();\n        }\n        else {\n            this.onLoadComplete();\n        }\n    };\n    TextureSprite.prototype.setAniData = function (times, timeFrame) {\n        this.times = times || -1;\n        this.timeFrame = timeFrame || 30;\n        this.tempTimes = this.times;\n    };\n    TextureSprite.prototype.play = function (force) {\n        var _this = this;\n        if (force) {\n            if (this.timerID) {\n                clearTimeout(this.timerID);\n            }\n            this.indexed = 0;\n            this.tempTimes = this.times;\n        }\n        else if (this.isPlaying)\n            return;\n        var excute = function () {\n            _this.frameImg.setTexture(_this.mUrls[_this.indexed]);\n            _this.indexed++;\n            if (_this.indexed === _this.mUrls.length) {\n                _this.indexed = 0;\n                if (_this.times > 0) {\n                    _this.tempTimes--;\n                    if (_this.tempTimes === 0) {\n                        _this.playEnd();\n                        return;\n                    }\n                }\n            }\n            _this.timerID = setTimeout(function () {\n                excute();\n            }, _this.timeFrame);\n        };\n        excute();\n    };\n    TextureSprite.prototype.stop = function () {\n        if (this.isPlaying) {\n            clearTimeout(this.timerID);\n            this.playEnd();\n        }\n    };\n    TextureSprite.prototype.destroy = function (fromScene) {\n        if (fromScene === void 0) { fromScene = false; }\n        this.compl = undefined;\n        this.error = undefined;\n        this.mUrls = undefined;\n        this.loadUrls = undefined;\n        this.errorUrls = undefined;\n        if (this.scene) {\n            this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE, this.onLoadComplete, this);\n            this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR, this.onLoadError, this);\n        }\n        _super.prototype.destroy.call(this, fromScene);\n    };\n    Object.defineProperty(TextureSprite.prototype, "playing", {\n        get: function () {\n            return this.isPlaying;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TextureSprite.prototype.playEnd = function () {\n        this.isPlaying = false;\n        this.tempTimes = this.times;\n        this.timerID = undefined;\n        this.indexed = 0;\n        this.frameImg.setTexture(this.mUrls[this.indexed]);\n    };\n    TextureSprite.prototype.onLoadComplete = function (file) {\n        var index = this.loadUrls.indexOf(file);\n        if (index !== -1) {\n            this.loadUrls.splice(index, 1);\n            if (this.loadUrls.length === 0) {\n                if (this.auto)\n                    this.play();\n                if (this.compl) {\n                    this.compl.run();\n                    this.compl = undefined;\n                }\n                this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE, this.onLoadComplete, this);\n                this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR, this.onLoadError, this);\n            }\n        }\n    };\n    TextureSprite.prototype.onLoadError = function (file) {\n        var index = this.loadUrls.indexOf(file.url);\n        if (index !== -1) {\n            this.loadUrls.splice(index, 1);\n            this.errorUrls.push(file.url);\n            if (this.loadUrls.length === 0) {\n                this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE, this.onLoadComplete, this);\n                this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR, this.onLoadError, this);\n                if (this.error) {\n                    this.error.runWith(this.errorUrls);\n                    this.error = undefined;\n                }\n            }\n        }\n    };\n    return TextureSprite;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/texture.sprite.ts?')},"./src/render/ui/components/three.button.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtonState", function() { return ButtonState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThreeSliceButton", function() { return ThreeSliceButton; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _three_slice_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./three.slice.path */ "./src/render/ui/components/three.slice.path.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar ButtonState;\n(function (ButtonState) {\n    ButtonState["Normal"] = "normal";\n    ButtonState["Over"] = "over";\n    ButtonState["Select"] = "select";\n    ButtonState["Disable"] = "disable";\n})(ButtonState || (ButtonState = {}));\nvar ThreeSliceButton = /** @class */ (function (_super) {\n    __extends(ThreeSliceButton, _super);\n    function ThreeSliceButton(scene, width, height, key, frame, downFrame, text, dpr, scale, tweenBoo, music) {\n        var _this = _super.call(this, scene) || this;\n        _this.mDownTime = 0;\n        _this.mPressDelay = 1000;\n        _this.mIsMove = false;\n        _this.mTweening = false;\n        _this.tweenScale = 0.9;\n        _this.mTweenBoo = true;\n        _this.dpr = dpr || 1;\n        // this.scale = scale || 1;\n        _this.zoom = scale || 1;\n        _this.soundGroup = {\n            up: {\n                key: "click",\n            }\n        };\n        if (tweenBoo === undefined)\n            tweenBoo = true;\n        _this.mTweenBoo = tweenBoo;\n        Object.assign(_this.soundGroup, music);\n        _this.mKey = key;\n        _this.mFrame = frame;\n        _this.mDownFrame = downFrame;\n        _this.setSize(width, height);\n        _this.createBackground();\n        if (text) {\n            _this.mText = _this.scene.make.text({ color: "#ffffff", fontSize: 16 * dpr }, false)\n                .setOrigin(0.5, 0.5)\n                .setText(text);\n            if (_this.mBackground) {\n                _this.mText.setSize(_this.mBackground.width, _this.mBackground.height);\n            }\n            _this.add(_this.mText);\n        }\n        _this.setInteractive();\n        _this.addListen();\n        return _this;\n    }\n    Object.defineProperty(ThreeSliceButton.prototype, "background", {\n        get: function () {\n            return this.mBackground;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ThreeSliceButton.prototype, "text", {\n        get: function () {\n            return this.mText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ThreeSliceButton.prototype.addListen = function () {\n        this.removeListen();\n        this.on("pointerdown", this.onPointerDownHandler, this);\n        this.on("pointerup", this.onPointerUpHandler, this);\n        this.on("pointerout", this.onPointerOutHandler, this);\n        this.on("pointermove", this.onPointerMoveHandler, this);\n    };\n    ThreeSliceButton.prototype.removeListen = function () {\n        this.off("pointerdown", this.onPointerDownHandler, this);\n        this.off("pointerup", this.onPointerUpHandler, this);\n        this.off("pointerout", this.onPointerOutHandler, this);\n        this.off("pointermove", this.onPointerMoveHandler, this);\n    };\n    ThreeSliceButton.prototype.setEnable = function (value, tint) {\n        if (tint === void 0) { tint = true; }\n        if (value) {\n            if (this.mBackground) {\n                this.mBackground.clearTint();\n                if (this.mText)\n                    this.mText.clearTint();\n            }\n            this.setInteractive();\n        }\n        else {\n            if (this.mBackground && tint) {\n                this.mBackground.setTintFill(0x666666);\n                if (this.mText)\n                    this.mText.setTintFill(0x777777);\n            }\n            this.removeInteractive();\n        }\n    };\n    Object.defineProperty(ThreeSliceButton.prototype, "tweenEnable", {\n        set: function (value) {\n            this.mTweenBoo = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ThreeSliceButton.prototype.mute = function (boo) {\n        this.silent = boo;\n    };\n    ThreeSliceButton.prototype.changeNormal = function () {\n        this.setBgFrame(this.mFrame);\n    };\n    ThreeSliceButton.prototype.changeDown = function () {\n        if (this.mDownFrame) {\n            this.setBgFrame(this.mDownFrame);\n        }\n    };\n    ThreeSliceButton.prototype.setFrame = function (frame) {\n        this.setBgFrame(frame);\n    };\n    ThreeSliceButton.prototype.setText = function (val) {\n        if (this.mText) {\n            this.mText.setText(val);\n        }\n    };\n    ThreeSliceButton.prototype.setTextStyle = function (style) {\n        if (this.mText) {\n            this.mText.setStyle(style);\n        }\n    };\n    ThreeSliceButton.prototype.setFontStyle = function (val) {\n        if (this.mText) {\n            this.mText.setFontStyle(val);\n        }\n    };\n    ThreeSliceButton.prototype.setTextOffset = function (x, y) {\n        if (this.mText) {\n            this.mText.setPosition(x, y);\n        }\n    };\n    ThreeSliceButton.prototype.setTextColor = function (color) {\n        if (this.mText) {\n            this.mText.setColor(color);\n        }\n    };\n    ThreeSliceButton.prototype.setFrameNormal = function (normal, down) {\n        this.mFrame = normal;\n        this.mDownFrame = (down ? down : normal);\n        this.changeNormal();\n        return this;\n    };\n    ThreeSliceButton.prototype.createBackground = function () {\n        if (this.mFrame) {\n            this.mBackground = new _three_slice_path__WEBPACK_IMPORTED_MODULE_1__["ThreeSlicePath"](this.scene, 0, 0, this.width, this.height, this.mKey, this.mFrame, this.dpr, this.zoom, 4);\n            this.add(this.mBackground);\n        }\n    };\n    ThreeSliceButton.prototype.setBgFrame = function (frame) {\n        if (this.mBackground) {\n            this.mBackground.setFrame(frame);\n        }\n    };\n    ThreeSliceButton.prototype.buttonStateChange = function (state) {\n        switch (state) {\n            case ButtonState.Normal:\n                this.changeNormal();\n                break;\n            case ButtonState.Over:\n                break;\n            case ButtonState.Select:\n                this.changeDown();\n                break;\n            case ButtonState.Disable:\n                break;\n        }\n    };\n    ThreeSliceButton.prototype.onPointerMoveHandler = function (pointer) {\n        if (this.soundGroup && this.soundGroup.move)\n            this.playSound(this.soundGroup.move);\n        if (!this.interactiveBoo)\n            return;\n        this.mIsMove = true;\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Move);\n    };\n    ThreeSliceButton.prototype.onPointerUpHandler = function (pointer) {\n        // if (this.mTweening) return;\n        if (!this.interactiveBoo) {\n            if (this.soundGroup && this.soundGroup.disabled)\n                this.playSound(this.soundGroup.disabled);\n            return;\n        }\n        if (this.mTweenBoo) {\n            // this.tween(false).then(() => {\n            //     this.pointerDown(pointer);\n            // });\n            this.tween(false, this.pointerUp.bind(this, pointer));\n        }\n        else {\n            this.pointerUp(pointer);\n        }\n    };\n    ThreeSliceButton.prototype.pointerUp = function (pointer) {\n        this.buttonStateChange(ButtonState.Normal);\n        // if (!this.mIsMove || (Date.now() - this.mDownTime > this.mPressTime)) {\n        var isdown = this.checkPointerInBounds(this, pointer.worldX, pointer.worldY);\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Up, this);\n        // if (Math.abs(pointer.downX - pointer.upX) < this.width && Math.abs(pointer.downY - pointer.upY) < this.height) {\n        if (isdown && this.mIsDown) {\n            if (this.soundGroup && this.soundGroup.up)\n                this.playSound(this.soundGroup.up);\n            this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, pointer, this);\n        }\n        // }\n        clearTimeout(this.mPressTime);\n        this.mIsMove = false;\n        this.mIsDown = false;\n        this.mDownTime = 0;\n    };\n    ThreeSliceButton.prototype.onPointerOutHandler = function (pointer) {\n        if (this.mTweenBoo && pointer.isDown) {\n            this.tween(false);\n        }\n    };\n    ThreeSliceButton.prototype.onPointerDownHandler = function (pointer) {\n        var _this = this;\n        if (this.mTweening)\n            return;\n        if (!this.interactiveBoo) {\n            if (this.soundGroup && this.soundGroup.disabled)\n                this.playSound(this.soundGroup.disabled);\n            return;\n        }\n        if (this.soundGroup && this.soundGroup.down)\n            this.playSound(this.soundGroup.down);\n        this.buttonStateChange(ButtonState.Select);\n        this.mDownTime = Date.now();\n        this.mPressTime = setTimeout(function () {\n            _this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Hold, _this);\n        }, this.mPressDelay);\n        if (this.mTweenBoo)\n            this.tween(true);\n        this.emit(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Down, this);\n        // this.mIsDownObject = this.checkPointerInBounds(this, pointer.worldX, pointer.worldY);\n        this.mIsDown = true;\n    };\n    ThreeSliceButton.prototype.checkPointerInBounds = function (gameObject, pointerx, pointery) {\n        if (!this.mRectangle) {\n            this.mRectangle = new Phaser.Geom.Rectangle(0, 0, 0, 0);\n        }\n        var zoom = this.zoom ? this.zoom : 1;\n        this.mRectangle.left = -gameObject.width / 2;\n        this.mRectangle.right = gameObject.width / 2;\n        this.mRectangle.top = -gameObject.height / 2;\n        this.mRectangle.bottom = gameObject.height / 2;\n        var worldMatrix = gameObject.getWorldTransformMatrix();\n        var x = (pointerx - worldMatrix.tx) / zoom;\n        var y = (pointery - worldMatrix.ty) / zoom;\n        if (this.mRectangle.left <= x && this.mRectangle.right >= x && this.mRectangle.top <= y && this.mRectangle.bottom >= y) {\n            return true;\n        }\n        return false;\n    };\n    ThreeSliceButton.prototype.tween = function (show, callback) {\n        var _this = this;\n        this.mTweening = true;\n        var scale = show ? this.tweenScale : 1;\n        if (this.mTween) {\n            this.mTween.stop();\n            this.mTween.remove();\n            this.mTween = undefined;\n        }\n        this.mTween = this.scene.tweens.add({\n            targets: this.list,\n            duration: 45,\n            ease: "Linear",\n            props: {\n                scaleX: { value: scale },\n                scaleY: { value: scale },\n            },\n            onComplete: function () {\n                _this.tweenComplete(show);\n                if (callback)\n                    callback();\n            },\n            onCompleteParams: [this]\n        });\n    };\n    ThreeSliceButton.prototype.tweenComplete = function (show) {\n        this.mTweening = false;\n        if (this.mTween) {\n            this.mTween.stop();\n            this.mTween.remove();\n            this.mTween = undefined;\n        }\n    };\n    return ThreeSliceButton;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BaseUI"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/three.button.ts?')},"./src/render/ui/components/three.slice.path.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThreeSlicePath", function() { return ThreeSlicePath; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar ThreeSlicePath = /** @class */ (function (_super) {\n    __extends(ThreeSlicePath, _super);\n    function ThreeSlicePath(scene, x, y, width, height, key, frame, dpr, scale, correct) {\n        var _this = _super.call(this, scene, dpr, scale) || this;\n        _this.mCorrection = 4;\n        _this.dpr = dpr || 1;\n        _this.scale = scale || 1;\n        _this.mCorrection = correct === undefined ? 4 : correct;\n        _this.imgs = [];\n        _this.setTexture(key, frame);\n        _this.setSize(width, height);\n        _this.setPosition(x, y);\n        return _this;\n    }\n    ThreeSlicePath.prototype.resize = function (width, height) {\n        width = Math.round(width);\n        height = Math.round(height);\n        if (this.width === width && this.height === height) {\n            return this;\n        }\n        this.setSize(width, height);\n        return;\n    };\n    Object.defineProperty(ThreeSlicePath.prototype, "correctValue", {\n        set: function (value) {\n            this.mCorrection = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ThreeSlicePath.prototype.setTexture = function (key, frame) {\n        if (!this.imgs[0]) {\n            this.imgs[0] = this.scene.make.image({ key: key, frame: frame[0] });\n            this.add(this.imgs[0]);\n        }\n        else\n            this.imgs[0].setTexture(key, frame[0]);\n        if (!this.imgs[2]) {\n            this.imgs[2] = this.scene.make.image({ key: key, frame: frame[2] });\n            this.add(this.imgs[2]);\n        }\n        else\n            this.imgs[2].setTexture(key, frame[2]);\n        if (!this.imgs[1]) {\n            this.imgs[1] = this.scene.make.image({ key: key, frame: frame[1] });\n            this.add(this.imgs[1]);\n        }\n        else\n            this.imgs[1].setTexture(key, frame[1]);\n        return this;\n    };\n    ThreeSlicePath.prototype.setFrame = function (frame) {\n        this.imgs[0].setFrame(frame[0]);\n        this.imgs[1].setFrame(frame[1]);\n        this.imgs[2].setFrame(frame[2]);\n        return this;\n    };\n    ThreeSlicePath.prototype.setSize = function (width, height) {\n        _super.prototype.setSize.call(this, width, height);\n        this.imgs[0].scale = 1;\n        this.imgs[2].scale = 1;\n        var midWidth = width - (this.imgs[0].displayWidth + this.imgs[2].displayWidth) + this.mCorrection;\n        if (midWidth < 0) {\n            midWidth = 0;\n            this.imgs[0].displayWidth = width * 0.5;\n            this.imgs[2].displayWidth = width * 0.5;\n        }\n        this.imgs[0].x = -width * 0.5 + this.imgs[0].displayWidth * 0.5;\n        this.imgs[2].x = width * 0.5 - this.imgs[2].displayWidth * 0.5;\n        this.imgs[1].displayWidth = midWidth;\n        return this;\n    };\n    ThreeSlicePath.prototype.setTint = function (tint) {\n        this.tint = tint;\n        return this;\n    };\n    ThreeSlicePath.prototype.setTintFill = function (tint) {\n        this.tint = tint;\n        this.tintFill = true;\n        return this;\n    };\n    Object.defineProperty(ThreeSlicePath.prototype, "tintFill", {\n        get: function () {\n            return this.first && this.first.tintFill;\n        },\n        set: function (value) {\n            this.imgs.forEach(function (patch) { return patch.tintFill = value; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ThreeSlicePath.prototype, "tint", {\n        set: function (value) {\n            this.imgs.forEach(function (patch) { return patch.setTint(value); });\n            this.internalTint = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ThreeSlicePath.prototype, "isTinted", {\n        get: function () {\n            return this.first && this.first.isTinted;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ThreeSlicePath.prototype.clearTint = function () {\n        this.each(function (patch) { return patch.clearTint(); });\n        this.internalTint = undefined;\n        this.tintFill = false;\n    };\n    ThreeSlicePath.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.imgs)\n            this.imgs.length = 0;\n        this.imgs = undefined;\n    };\n    return ThreeSlicePath;\n}(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BaseUI"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/three.slice.path.ts?')},"./src/render/ui/components/tips/ItemInfoTips.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ItemInfoTips", function() { return ItemInfoTips; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar ItemInfoTips = /** @class */ (function (_super) {\n    __extends(ItemInfoTips, _super);\n    function ItemInfoTips(scene, width, height, key, bg, dpr, config) {\n        var _this = _super.call(this, scene) || this;\n        _this.fullHide = true;\n        _this.setSize(width, height);\n        _this.key = key;\n        _this.dpr = dpr;\n        _this.config = config ? config : {\n            left: 15 * _this.dpr,\n            top: 15 * _this.dpr,\n            right: 15 * _this.dpr,\n            bottom: 15 * _this.dpr\n        };\n        _this.create(bg);\n        return _this;\n    }\n    ItemInfoTips.prototype.setInvalidArea = function (invalidArea) {\n        this.fullHide = true;\n        this.invalidArea = invalidArea;\n    };\n    ItemInfoTips.prototype.setHandler = function (back) {\n        this.callback = back;\n    };\n    Object.defineProperty(ItemInfoTips.prototype, "enableFullHide", {\n        set: function (value) {\n            this.fullHide = value;\n            this.invalidArea = undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ItemInfoTips.prototype.setVisible = function (value) {\n        if (!value)\n            this.hide();\n        else\n            this.show();\n        _super.prototype.setVisible.call(this, value);\n        return this;\n    };\n    ItemInfoTips.prototype.hide = function () {\n        if (this.fullHide && this.visible) {\n            this.scene.input.off("pointerdown", this.onHideHandler, this);\n        }\n        this.visible = false;\n        if (this.callback)\n            this.callback.run();\n    };\n    ItemInfoTips.prototype.show = function () {\n        if (this.fullHide && !this.visible) {\n            this.scene.input.on("pointerdown", this.onHideHandler, this);\n        }\n        this.visible = true;\n    };\n    ItemInfoTips.prototype.resize = function (width, height) {\n        this.tipsText.setWrapWidth(width);\n        var tipsHeight = this.tipsText.height + 20 * this.dpr;\n        if (tipsHeight < height)\n            tipsHeight = height;\n        this.setSize(width, tipsHeight);\n        this.tipsbg.resize(width, tipsHeight);\n        this.tipsbg.y = -tipsHeight * 0.5;\n        this.tipsText.y = -tipsHeight + 10 * this.dpr;\n    };\n    ItemInfoTips.prototype.setText = function (text, apha) {\n        if (apha === void 0) { apha = 0.9; }\n        //  this.tipsbg.alpha = apha;\n        this.tipsText.text = text;\n        var tipsHeight = this.tipsText.height + 20 * this.dpr;\n        var tipsWidth = this.tipsbg.width;\n        this.setSize(tipsWidth, tipsHeight);\n        this.tipsbg.resize(tipsWidth, tipsHeight);\n        this.tipsbg.y = -tipsHeight * 0.5;\n        this.tipsText.y = -tipsHeight + 10 * this.dpr;\n    };\n    ItemInfoTips.prototype.setItemData = function (data) {\n        var tex = this.getDesText(data);\n        this.setText(tex);\n    };\n    ItemInfoTips.prototype.setTipsPosition = function (gameobject, container, offsety) {\n        if (offsety === void 0) { offsety = 0; }\n        var posx = gameobject.x;\n        var posy = gameobject.y;\n        var tempobject = gameobject;\n        while (tempobject.parentContainer !== container) {\n            posx += tempobject.parentContainer.x;\n            posy += tempobject.parentContainer.y;\n            tempobject = tempobject.parentContainer;\n        }\n        if (posx - this.width * 0.5 < -container.width * 0.5) {\n            this.x = this.width * 0.5 - container.width * 0.5 + 20 * this.dpr;\n        }\n        else if (posx + this.width * 0.5 > container.width * 0.5) {\n            this.x = container.width * 0.5 - this.width * 0.5 - 20 * this.dpr;\n        }\n        else {\n            this.x = posx;\n        }\n        this.y = posy - this.height * 0.5 + 10 * this.dpr + offsety;\n    };\n    ItemInfoTips.prototype.create = function (bg) {\n        var tipsWidth = this.width;\n        var tipsHeight = this.height;\n        var tipsbg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](this.scene, 0, 0, tipsWidth, tipsHeight, this.key, bg, this.config);\n        tipsbg.setPosition(0, -tipsHeight * 0.5);\n        this.tipsbg = tipsbg;\n        var tipsText = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](this.scene, -this.width * 0.5 + 10 * this.dpr, -tipsHeight + 60 * this.dpr, "", {\n            color: "#333333",\n            fontSize: 13 * this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT,\n            wrap: {\n                width: this.width - 15 * this.dpr,\n                mode: "string"\n            }\n        }).setOrigin(0);\n        tipsText.setLineSpacing(2 * this.dpr);\n        this.tipsText = tipsText;\n        this.add([tipsbg, tipsText]);\n    };\n    ItemInfoTips.prototype.getDesText = function (data) {\n        var _a, _b;\n        if (!data)\n            data = { "sellingPrice": true, tradable: false };\n        var text = "[stroke=#2640CA][color=#2640CA][b]" + data.name + "[/b][/color][/stroke]" + "\\n";\n        text += ((_a = data.source) !== null && _a !== void 0 ? _a : "") + "\\n";\n        text += ((_b = data.des) !== null && _b !== void 0 ? _b : "");\n        return text;\n    };\n    ItemInfoTips.prototype.onHideHandler = function (pointer) {\n        if (!this.checkPointerInBounds(pointer))\n            this.hide();\n    };\n    ItemInfoTips.prototype.checkPointerInBounds = function (pointer) {\n        if (pointer && this.invalidArea) {\n            if (pointer.x > this.invalidArea.left && pointer.x < this.invalidArea.right) {\n                if (pointer.y > this.invalidArea.top && pointer.y < this.invalidArea.bottom) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    return ItemInfoTips;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/tips/ItemInfoTips.ts?')},"./src/render/ui/components/tips/TextToolTip.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextToolTips", function() { return TextToolTips; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar TextToolTips = /** @class */ (function (_super) {\n    __extends(TextToolTips, _super);\n    function TextToolTips(scene, key, frame, dpr, zoom) {\n        var _this = _super.call(this, scene) || this;\n        var tempframe = scene.textures.getFrame(key, frame);\n        var tipsWidth = tempframe.width;\n        var tipsHeight = tempframe.height;\n        _this.dpr = dpr;\n        _this.bg = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["NineSlicePatch"](_this.scene, 0, 0, tipsWidth, tipsHeight, key, frame, {\n            left: 20 * dpr,\n            top: 20 * dpr,\n            right: 20 * dpr,\n            bottom: 20 * dpr\n        });\n        _this.text = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["BBCodeText"](_this.scene, 0, 0, "", {\n            color: "#333333",\n            fontSize: 13 * _this.dpr,\n            fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].DEFULT_FONT,\n            wrap: {\n                width: 90 * _this.dpr,\n                mode: "string"\n            }\n        }).setOrigin(0);\n        _this.add([_this.bg, _this.text]);\n        _this.setSize(tipsWidth + 20 * dpr, tipsHeight + 20 * dpr);\n        return _this;\n    }\n    TextToolTips.prototype.setSize = function (width, height) {\n        _super.prototype.setSize.call(this, width, height);\n        this.bg.resize(width, height);\n        this.bg.setPosition(0, 0);\n        var textWidth = width - 16 * this.dpr;\n        var textHeight = height - 16 * this.dpr;\n        this.text.setSize(textWidth, textHeight);\n        this.text.setWrapWidth(textWidth);\n        this.text.setPosition(-textWidth * 0.5, -textHeight * 0.5);\n        return this;\n    };\n    TextToolTips.prototype.setText = function (text) {\n        this.text.text = text;\n        if (this.text.height > this.height) {\n            this.setSize(this.width, this.text.height + 16 * this.dpr);\n        }\n    };\n    TextToolTips.prototype.setDelayText = function (text, delay, compl) {\n        var _this = this;\n        this.visible = true;\n        this.setText(text);\n        if (this.timeID)\n            clearTimeout(this.timeID);\n        this.timeID = setTimeout(function () {\n            _this.visible = false;\n            if (compl)\n                compl.run();\n        }, delay);\n    };\n    return TextToolTips;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/tips/TextToolTip.ts?')},"./src/render/ui/components/tips/itoolTip.ts":function(module,exports){eval("\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/tips/itoolTip.ts?")},"./src/render/ui/components/tips/toolTip.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToolTip", function() { return ToolTip; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar ToolTip = /** @class */ (function (_super) {\n    __extends(ToolTip, _super);\n    function ToolTip(mScene, resStr, resJson, resUrl, uiScale) {\n        var _this = _super.call(this, mScene) || this;\n        _this.mScene = mScene;\n        _this.resStr = resStr;\n        _this.resJson = resJson;\n        _this.resUrl = resUrl;\n        _this.uiScale = uiScale;\n        _this.mWidth = 0;\n        _this.mHeight = 0;\n        _this.mBaseMidHeight = 0;\n        _this.preLoad();\n        return _this;\n    }\n    ToolTip.prototype.setToolTipData = function (value) {\n        if (!this.mText)\n            return;\n        var str = utils__WEBPACK_IMPORTED_MODULE_0__["Tool"].formatChineseString(value, this.mText.style.fontSize, this.mWidth - 20);\n        this.mText.setText(str);\n        this.refreshTip();\n    };\n    ToolTip.prototype.destroy = function () {\n        if (this.topImage)\n            this.topImage.destroy(true);\n        if (this.midImage)\n            this.midImage.destroy(true);\n        if (this.botImage)\n            this.botImage.destroy(true);\n        if (this.mText)\n            this.mText.destroy(true);\n        this.mWidth = 0;\n        this.mHeight = 0;\n        this.removeAllListeners();\n        this.removeAll();\n        _super.prototype.destroy.call(this, true);\n    };\n    ToolTip.prototype.preLoad = function () {\n        this.scene.load.atlas(this.resStr, this.resUrl, this.resJson);\n        this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.onLoadComplete, this);\n        this.scene.load.start();\n    };\n    ToolTip.prototype.init = function () {\n        this.topImage = this.scene.make.image(undefined, false);\n        this.topImage.setOrigin(0, 0);\n        this.topImage.setTexture(this.resStr, ToolTip.TOP);\n        this.midImage = this.scene.make.image(undefined, false);\n        this.midImage.setOrigin(0, 0);\n        this.midImage.setTexture(this.resStr, ToolTip.MID);\n        this.botImage = this.scene.make.image(undefined, false);\n        this.botImage.setOrigin(0, 0);\n        this.botImage.setTexture(this.resStr, ToolTip.BOT);\n        this.mText = this.scene.make.text(undefined, false);\n        this.mText.setFontFamily("YaHei");\n        this.mText.setFontStyle("bold");\n        this.mText.setFontSize(14);\n        this.mText.style.align = "center";\n        this.mText.lineSpacing = 15;\n        this.mWidth = this.topImage.width;\n        this.mBaseMidHeight = this.midImage.height;\n        this.mText.style.fixedWidth = this.mWidth - 20;\n        this.mText.style.setWordWrapWidth(this.mWidth - 20, true);\n        // this.mText.style.setMaxLines(10);\n        this.add(this.topImage);\n        this.add(this.midImage);\n        this.add(this.botImage);\n        this.add(this.mText);\n    };\n    ToolTip.prototype.refreshTip = function () {\n        this.midImage.scaleY = (this.mText.height + 20) / this.mBaseMidHeight;\n        this.mHeight = this.topImage.height + this.midImage.height * this.midImage.scaleY + this.botImage.height;\n        this.topImage.y = -this.topImage.height >> 1;\n        this.midImage.y = this.topImage.y + this.topImage.height;\n        this.botImage.y = this.midImage.y + this.midImage.height * this.midImage.scaleY;\n        this.mText.x = this.mWidth - this.mText.style.fixedWidth >> 1;\n        this.mText.y = this.mHeight - this.mText.height - 10 >> 1;\n        this.setSize(this.mWidth, this.mHeight);\n    };\n    ToolTip.prototype.onLoadComplete = function () {\n        this.init();\n    };\n    ToolTip.TOP = "tip_top.png";\n    ToolTip.MID = "tip_mid.png";\n    ToolTip.BOT = "tip_bot.png";\n    return ToolTip;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/tips/toolTip.ts?')},"./src/render/ui/components/toggle.button.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToggleButton", function() { return ToggleButton; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _button_event_dispatch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./button.event.dispatch */ "./src/render/ui/components/button.event.dispatch.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar ToggleButton = /** @class */ (function (_super) {\n    __extends(ToggleButton, _super);\n    function ToggleButton(scene, width, height, key, frame, down, dpr, text) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.normalColor = "#FFFFFF";\n        _this.changeColor = "#0099cc";\n        _this.mIsOn = false;\n        _this.mBackground = _this.scene.make.image({ key: key, frame: frame });\n        _this.mText = _this.scene.make.text({\n            text: text,\n            style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].whiteStyle(dpr, 15)\n        }, false).setOrigin(0.5, 0.5);\n        _this.add([_this.mBackground, _this.mText]);\n        _this.mNormal = frame;\n        _this.mDown = down;\n        _this.width = width > _this.mBackground.width ? width : _this.mBackground.width;\n        _this.height = height > _this.mBackground.height ? height : _this.mBackground.height;\n        _this.enable = true;\n        return _this;\n    }\n    ToggleButton.prototype.setText = function (val) {\n        this.mText.text = val;\n    };\n    ToggleButton.prototype.setFontSize = function (size) {\n        this.mText.setFontSize(size);\n    };\n    ToggleButton.prototype.setFontStyle = function (val) {\n        this.mText.setFontStyle(val);\n    };\n    ToggleButton.prototype.setStyle = function (style) {\n        this.mText.setStyle(style);\n    };\n    ToggleButton.prototype.setNormalColor = function (color) {\n        this.normalColor = color;\n        this.isOn = this.mIsOn;\n    };\n    ToggleButton.prototype.setChangeColor = function (color) {\n        this.changeColor = color;\n        this.isOn = this.mIsOn;\n    };\n    ToggleButton.prototype.setNormalFrame = function (normal, down) {\n        if (normal)\n            this.mNormal = normal;\n        if (down)\n            this.mDown = down;\n        this.isOn = this.mIsOn;\n    };\n    Object.defineProperty(ToggleButton.prototype, "isOn", {\n        get: function () {\n            return this.mIsOn;\n        },\n        set: function (value) {\n            this.mIsOn = value;\n            if (this.mIsOn)\n                this.changeDown();\n            else\n                this.changeNormal();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ToggleButton.prototype.changeDown = function () {\n        this.mText.setFill(this.changeColor);\n        this.mBackground.setFrame(this.mDown);\n    };\n    ToggleButton.prototype.changeNormal = function () {\n        this.mText.setFill(this.normalColor);\n        this.mBackground.setFrame(this.mNormal);\n    };\n    Object.defineProperty(ToggleButton.prototype, "text", {\n        get: function () {\n            return this.mText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ToggleButton.prototype.EventStateChange = function (state) {\n        switch (state) {\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Up:\n                this.changeNormal();\n                break;\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Down:\n                this.changeDown();\n                break;\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap:\n                this.isOn = true;\n                break;\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Out:\n                if (this.isOn) {\n                    this.changeDown();\n                }\n                else {\n                    this.changeNormal();\n                }\n                break;\n        }\n    };\n    return ToggleButton;\n}(_button_event_dispatch__WEBPACK_IMPORTED_MODULE_2__["ButtonEventDispatcher"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/toggle.button.ts?')},"./src/render/ui/components/toggle.color.button.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToggleColorButton", function() { return ToggleColorButton; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _button_event_dispatch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./button.event.dispatch */ "./src/render/ui/components/button.event.dispatch.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar ToggleColorButton = /** @class */ (function (_super) {\n    __extends(ToggleColorButton, _super);\n    function ToggleColorButton(scene, width, height, dpr, text) {\n        var _this = _super.call(this, scene, 0, 0) || this;\n        _this.normalColor = "#FFFFFF";\n        _this.changeColor = "#0099cc";\n        _this.mIsOn = false;\n        _this.setSize(width, height);\n        _this.mText = _this.scene.make.text({\n            text: text,\n            style: utils__WEBPACK_IMPORTED_MODULE_1__["UIHelper"].whiteStyle(dpr, 15)\n        }, false).setOrigin(0.5, 0.5);\n        _this.add(_this.mText);\n        _this.enable = true;\n        return _this;\n    }\n    ToggleColorButton.prototype.setText = function (val) {\n        this.mText.text = val;\n    };\n    ToggleColorButton.prototype.setFontSize = function (size) {\n        this.mText.setFontSize(size);\n    };\n    ToggleColorButton.prototype.setFontStyle = function (val) {\n        this.mText.setFontStyle(val);\n    };\n    ToggleColorButton.prototype.setStyle = function (style) {\n        this.mText.setStyle(style);\n    };\n    ToggleColorButton.prototype.setNormalColor = function (color) {\n        this.normalColor = color;\n    };\n    ToggleColorButton.prototype.setChangeColor = function (color) {\n        this.changeColor = color;\n    };\n    Object.defineProperty(ToggleColorButton.prototype, "isOn", {\n        get: function () {\n            return this.mIsOn;\n        },\n        set: function (value) {\n            this.mIsOn = value;\n            if (this.mIsOn)\n                this.changeDown();\n            else\n                this.changeNormal();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ToggleColorButton.prototype.changeDown = function () {\n        this.mText.setFill(this.changeColor);\n    };\n    ToggleColorButton.prototype.changeNormal = function () {\n        this.mText.setFill(this.normalColor);\n    };\n    Object.defineProperty(ToggleColorButton.prototype, "text", {\n        get: function () {\n            return this.mText;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ToggleColorButton.prototype.EventStateChange = function (state) {\n        switch (state) {\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Up:\n                this.changeNormal();\n                break;\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Down:\n                this.changeDown();\n                break;\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap:\n                this.isOn = true;\n                this.changeDown();\n                break;\n            case apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Out:\n                if (this.isOn) {\n                    this.changeDown();\n                }\n                else {\n                    this.changeNormal();\n                }\n                break;\n        }\n    };\n    return ToggleColorButton;\n}(_button_event_dispatch__WEBPACK_IMPORTED_MODULE_2__["ButtonEventDispatcher"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/toggle.color.button.ts?')},"./src/render/ui/components/tween.compent.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TweenCompent", function() { return TweenCompent; });\nvar TweenCompent = /** @class */ (function () {\n    function TweenCompent(scene, gameobject, config) {\n        this.mTweening = false;\n        this.mScale = 1;\n        this.mPingpang = false;\n        this.mTempPing = false;\n        this.mScene = scene;\n        this.mTarget = gameobject;\n        this.mScale = config.scale || gameobject.scale;\n        this.mX = config.x === undefined ? gameobject.x : config.x;\n        this.mY = config.y === undefined ? gameobject.y : config.y;\n        this.mPingpang = config.pingpang || false;\n        if (this.mPingpang)\n            this.tempData = { scale: gameobject.scale, x: gameobject.x, y: gameobject.y };\n    }\n    TweenCompent.prototype.tween = function () {\n        var _this = this;\n        this.mTweening = true;\n        if (this.mTween) {\n            this.mTween.stop();\n            this.mTween.remove();\n            this.mTween = undefined;\n        }\n        var tempScale = this.mTempPing ? this.tempData.scale : this.mScale;\n        var tempX = this.mTempPing ? this.tempData.x : this.mX;\n        var tempY = this.mTempPing ? this.tempData.y : this.mY;\n        this.mTween = this.mScene.tweens.add({\n            targets: this.mTarget,\n            x: { value: tempX, duration: 45, ease: "Bounce.easeOut" },\n            y: { value: tempY, duration: 45, ease: "Bounce.easeOut" },\n            scaleX: { value: tempScale, duration: 45, ease: "Bounce.easeOut" },\n            scaleY: { value: tempScale, duration: 45, ease: "Bounce.easeOut" },\n            onComplete: function () {\n                _this.tweenComplete();\n            },\n            onCompleteParams: [this.mTarget]\n        });\n    };\n    TweenCompent.prototype.tweenComplete = function () {\n        this.mTweening = false;\n        if (this.mPingpang && !this.mTempPing) {\n            this.mTempPing = true;\n            this.tween();\n        }\n        else {\n            if (this.mTween) {\n                this.mTween.stop();\n                this.mTween.remove();\n                this.mTween = undefined;\n            }\n            this.mTempPing = false;\n        }\n    };\n    return TweenCompent;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/tween.compent.ts?')},"./src/render/ui/components/value.container.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValueContainer", function() { return ValueContainer; });\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apowophaserui */ "./node_modules/apowophaserui/dist/apowophaserui.js");\n/* harmony import */ var apowophaserui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apowophaserui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar ValueContainer = /** @class */ (function (_super) {\n    __extends(ValueContainer, _super);\n    function ValueContainer(scene, key, leftIcon, dpr) {\n        if (dpr === void 0) { dpr = 1; }\n        var _this = _super.call(this, scene) || this;\n        _this.init(key, leftIcon, dpr);\n        return _this;\n    }\n    ValueContainer.prototype.setText = function (val) {\n        this.mText.setText(val);\n    };\n    ValueContainer.prototype.setHandler = function (send) {\n        this.sendHandler = send;\n    };\n    ValueContainer.prototype.init = function (key, leftIcon, dpr) {\n        var bg = this.scene.make.image({\n            key: key,\n            frame: "home_progress_bottom"\n        }, false);\n        bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mLeft = this.scene.make.image({\n            key: key,\n            frame: leftIcon,\n        }, false);\n        this.mLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mText = this.scene.make.text({\n            text: "0",\n            width: bg.width,\n            height: bg.height,\n            style: {\n                fontSize: 14 * dpr,\n                fontFamily: utils__WEBPACK_IMPORTED_MODULE_1__["Font"].NUMBER\n            }\n        }, false).setOrigin(0.5);\n        this.mText.setStroke("#000000", 1 * dpr);\n        this.mText.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);\n        this.mAddBtn = new apowophaserui__WEBPACK_IMPORTED_MODULE_0__["Button"](this.scene, key, "add_btn", "add_btn");\n        this.setSize(bg.width, bg.height);\n        this.mLeft.x = -bg.width * 0.5 + 5 * dpr;\n        this.mLeft.y = bg.y + bg.height * 0.5 - this.mLeft.height * 0.5;\n        this.mAddBtn.x = this.width * this.originX - this.mAddBtn.width * this.originX - 5 * dpr;\n        this.mText.x = 4 * dpr;\n        this.add([bg, this.mLeft, this.mText, this.mAddBtn]);\n        this.mAddBtn.on(apowophaserui__WEBPACK_IMPORTED_MODULE_0__["ClickEvent"].Tap, this.onAddHandler, this);\n    };\n    ValueContainer.prototype.onAddHandler = function () {\n        if (this.sendHandler)\n            this.sendHandler.run();\n    };\n    return ValueContainer;\n}(Phaser.GameObjects.Container));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/components/value.container.ts?')},"./src/render/ui/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components */ "./src/render/ui/components/index.ts");\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _components__WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _components__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _ui_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui.manager */ "./src/render/ui/ui.manager.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UiManager", function() { return _ui_manager__WEBPACK_IMPORTED_MODULE_1__["UiManager"]; });\n\n/* harmony import */ var _bag__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bag */ "./src/render/ui/bag/index.ts");\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _bag__WEBPACK_IMPORTED_MODULE_2__) if(["default","UiManager"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _bag__WEBPACK_IMPORTED_MODULE_2__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _rank_rankPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./rank/rankPanel */ "./src/render/ui/rank/rankPanel.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RankPanel", function() { return _rank_rankPanel__WEBPACK_IMPORTED_MODULE_3__["RankPanel"]; });\n\n\n\n\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/index.ts?')},"./src/render/ui/rank/basicRankPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BasicRankPanel", function() { return BasicRankPanel; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _components_base_panel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/base.panel */ "./src/render/ui/components/base.panel.ts");\n/* harmony import */ var _components_nine_patch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/nine.patch */ "./src/render/ui/components/nine.patch.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar BasicRankPanel = /** @class */ (function (_super) {\n    __extends(BasicRankPanel, _super);\n    function BasicRankPanel(uiManager) {\n        var _this = _super.call(this, uiManager.scene, uiManager.render) || this;\n        _this.mTexts = [];\n        _this.disInteractive();\n        return _this;\n    }\n    BasicRankPanel.prototype.addItem = function (items) {\n        this.setData("data", items);\n        if (!this.mInitialized)\n            return;\n        this.clearText();\n        var texts = items.text;\n        if (!texts || texts.length < 1)\n            return;\n        if (this.mTitleLabel) {\n            this.mTitleLabel.setText(texts[0].text);\n            this.mTitleLabel.setData("node", texts[0].node);\n        }\n        var locX = [-this.width / 2 + 15, -this.width / 2 + 63, -this.width / 2 + 241];\n        var tmpY = 0;\n        for (var i = 1; i < 4; i++) {\n            var text = this.scene.make.text({\n                x: locX[i - 1],\n                y: -this.height / 2 + 22,\n                text: texts ? texts[i].text : "123",\n                style: { font: utils__WEBPACK_IMPORTED_MODULE_0__["Font"].YAHEI_16_BOLD }\n            }, false);\n            tmpY = text.y;\n            text.setData("node", texts[i].node);\n            text.setStroke("#000000", 2);\n            this.mChildContainer.add(text);\n            this.mTexts.push(text);\n        }\n        tmpY += 20;\n        for (var i = 4; i < texts.length; i++) {\n            var t = texts[i];\n            var x = (i - 4) % 3;\n            var y = Math.floor((i - 4) / 3) * 22; // Math.floor((i - 4) / 3) * (-this.height / 2 + 42);\n            var text = this.scene.make.text({\n                x: locX[x],\n                y: tmpY + y,\n                text: t ? t.text : "123",\n                style: { font: utils__WEBPACK_IMPORTED_MODULE_0__["Font"].YAHEI_14_BOLD }\n            }, false);\n            if (x === 0) {\n                // todo center\n            }\n            text.setData("node", t.node);\n            text.setStroke("#000000", 2);\n            this.mChildContainer.add(text);\n            this.mTexts.push(text);\n        }\n    };\n    BasicRankPanel.prototype.tweenView = function (show) {\n    };\n    BasicRankPanel.prototype.update = function (param) {\n        this.addItem(param);\n    };\n    BasicRankPanel.prototype.destroy = function () {\n        if (this.mBackground)\n            this.mBackground.destroy();\n        var len = this.mTexts.length;\n        for (var i = 0; i < len; i++) {\n            var text = this.mTexts[i];\n            if (!text)\n                continue;\n            text.destroy(true);\n            text = null;\n        }\n        if (this.mTitleLabel)\n            this.mTitleLabel.destroy(true);\n        this.mTexts = [];\n        this.mBackground = null;\n        this.mTitleLabel = null;\n        _super.prototype.destroy.call(this);\n    };\n    BasicRankPanel.prototype.preload = function () {\n        this.scene.load.image(utils__WEBPACK_IMPORTED_MODULE_0__["Background"].getName(), utils__WEBPACK_IMPORTED_MODULE_0__["Background"].getPNG());\n        this.scene.load.image(utils__WEBPACK_IMPORTED_MODULE_0__["Border"].getName(), utils__WEBPACK_IMPORTED_MODULE_0__["Border"].getPNG());\n        this.scene.load.atlas("clsBtn", utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("ui/common/common_clsBtn.png"), utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("ui/common/common_clsBtn.json"));\n        this.scene.load.atlas("rank_atlas", utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("ui/rank/rank_atlas.png"), utils__WEBPACK_IMPORTED_MODULE_0__["Url"].getRes("ui/rank/rank_atlas.json"));\n        _super.prototype.preload.call(this);\n    };\n    BasicRankPanel.prototype.init = function () {\n        if (this.mInitialized)\n            return;\n        this.setSize(328, 361);\n        this.mBackground = new _components_nine_patch__WEBPACK_IMPORTED_MODULE_2__["NinePatch"](this.scene, 0, 0, 328, 361, utils__WEBPACK_IMPORTED_MODULE_0__["Background"].getName(), null, utils__WEBPACK_IMPORTED_MODULE_0__["Background"].getConfig());\n        this.add(this.mBackground);\n        this.mChildContainer = this.scene.make.container({}, false);\n        this.add(this.mChildContainer);\n        var border = new _components_nine_patch__WEBPACK_IMPORTED_MODULE_2__["NinePatch"](this.scene, 0, 0, 315, 318, utils__WEBPACK_IMPORTED_MODULE_0__["Border"].getName(), null, utils__WEBPACK_IMPORTED_MODULE_0__["Border"].getConfig());\n        this.mChildContainer.add(border);\n        var titleIcon = this.scene.make.image({\n            x: -this.width / 2 + 20,\n            y: -this.height / 2 - 12,\n            key: "rank_atlas",\n            frame: "icon.png",\n        }, false).setOrigin(0, 0);\n        this.add(titleIcon);\n        this.mTitleLabel = this.scene.make.text({\n            x: -this.width / 2 + 54,\n            y: -this.height / 2 - 10,\n            text: "",\n            style: { font: utils__WEBPACK_IMPORTED_MODULE_0__["Font"].YAHEI_20_BOLD }\n        })\n            .setOrigin(0, 0)\n            .setStroke("#000000", 2);\n        this.add(this.mTitleLabel);\n        _super.prototype.init.call(this);\n    };\n    BasicRankPanel.prototype.clearText = function () {\n        for (var _i = 0, _a = this.mTexts; _i < _a.length; _i++) {\n            var text = _a[_i];\n            text.destroy();\n        }\n        this.mTexts.length = 0;\n    };\n    return BasicRankPanel;\n}(_components_base_panel__WEBPACK_IMPORTED_MODULE_1__["BasePanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/rank/basicRankPanel.ts?')},"./src/render/ui/rank/rankPanel.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RankPanel", function() { return RankPanel; });\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _components_icon_btn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/icon.btn */ "./src/render/ui/components/icon.btn.ts");\n/* harmony import */ var _basicRankPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./basicRankPanel */ "./src/render/ui/rank/basicRankPanel.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar RankPanel = /** @class */ (function (_super) {\n    __extends(RankPanel, _super);\n    function RankPanel(uiManager) {\n        var _this = _super.call(this, uiManager) || this;\n        _this.mCurrentIndex = 0;\n        _this.key = structure__WEBPACK_IMPORTED_MODULE_0__["ModuleName"].RANK_NAME;\n        return _this;\n    }\n    RankPanel.prototype.addListen = function () {\n        if (!this.mInitialized)\n            return;\n        if (!this.render.game.device.os.desktop) {\n            this.mClsBtn.on("pointerup", this.closeHandler, this);\n        }\n        else {\n            this.mZoonInBtn.on("pointerup", this.onZoomHandler, this);\n        }\n    };\n    RankPanel.prototype.removeListen = function () {\n        if (!this.mInitialized)\n            return;\n        if (!this.render.game.device.os.desktop) {\n            this.mClsBtn.off("pointerup", this.closeHandler, this);\n        }\n        else {\n            this.mZoonInBtn.off("pointerup", this.onZoomHandler, this);\n        }\n    };\n    RankPanel.prototype.resize = function (wid, hei) {\n        if (wid === void 0) { wid = 0; }\n        if (hei === void 0) { hei = 0; }\n        if (!this.render) {\n            return;\n        }\n        var size = this.render.getSize();\n        if (this.render.game.device.os.desktop) {\n            this.x = size.width - this.width / 2;\n            this.y = this.height / 2 + 10;\n        }\n        else {\n            if (this.render.game.scale.orientation === Phaser.Scale.Orientation.LANDSCAPE) {\n                this.x = size.width + wid >> 1;\n                this.y = size.height + hei >> 1;\n            }\n            else {\n                this.x = size.width + wid >> 1;\n                this.y = size.height + hei >> 1;\n            }\n        }\n        this.scale = this.render.uiScale;\n    };\n    RankPanel.prototype.tweenView = function (show) {\n        if (!this.scene)\n            return;\n        var baseY = this.height / 2 + 10;\n        var toY = show === true ? baseY : baseY - 300;\n        var toAlpha = show === true ? 1 : 0;\n        this.scene.tweens.add({\n            targets: this,\n            duration: 200,\n            ease: "Cubic.Out",\n            props: {\n                y: { value: toY },\n                alpha: { value: toAlpha },\n            },\n        });\n    };\n    RankPanel.prototype.destroy = function () {\n        if (this.mZoonInBtn)\n            this.mZoonInBtn.destroy(true);\n        this.mZoonInBtn = null;\n        this.mCurrentIndex = 0;\n        _super.prototype.destroy.call(this);\n    };\n    RankPanel.prototype.init = function () {\n        _super.prototype.init.call(this);\n        if (!this.render.game.device.os.desktop) {\n            this.mClsBtn = new _components_icon_btn__WEBPACK_IMPORTED_MODULE_1__["IconBtn"](this.scene, this.render, {\n                key: "Close_Btn", bgResKey: "clsBtn", bgTextures: ["btn_normal", "btn_over", "btn_click"],\n                iconResKey: "", iconTexture: "", scale: 1, pngUrl: "ui/common/common_clsBtn.png", jsonUrl: "ui/common/common_clsBtn.json"\n            });\n            this.mClsBtn.x = this.width / 2 - 35;\n            this.mClsBtn.y = -this.height / 2;\n            this.mClsBtn.scaleX = this.mClsBtn.scaleY = 2;\n            // this.mClsBtn.on("pointerup", this.closeHandler, this);\n            this.add(this.mClsBtn);\n        }\n        else {\n            this.mZoonInBtn = this.scene.make.image({\n                x: 0,\n                y: this.height / 2 - 10,\n                key: "rank_atlas",\n                frame: "arrow.png"\n            }, false);\n            this.add(this.mZoonInBtn);\n            this.mZoonInBtn.setInteractive();\n            // this.mZoonInBtn.on("pointerup", this.onZoomHandler, this);\n        }\n        this.resize();\n    };\n    RankPanel.prototype.tweenComplete = function (show) {\n        _super.prototype.tweenComplete.call(this, show);\n        if (show) {\n            var items = this.getData("data");\n            if (items)\n                this.addItem(items);\n        }\n    };\n    RankPanel.prototype.closeHandler = function () {\n        this.render.renderEmitter(structure__WEBPACK_IMPORTED_MODULE_0__["RENDER_PEER"] + "_" + this.key + "_hide");\n    };\n    RankPanel.prototype.onZoomHandler = function () {\n        this.currentSizeIndex = this.mCurrentIndex === 0 ? 1 : 0;\n    };\n    Object.defineProperty(RankPanel.prototype, "currentSizeIndex", {\n        set: function (value) {\n            if (this.mCurrentIndex === value) {\n                return;\n            }\n            this.mCurrentIndex = value;\n            var h = this.mCurrentIndex === 1 ? 30 : this.height;\n            var zoonBtnY = this.mCurrentIndex === 1 ? -this.height / 2 + 20 : this.height / 2 - 10;\n            var bgY = this.mCurrentIndex === 1 ? -this.height / 2 + 15 : 0;\n            this.mBackground.resize(328, h);\n            this.mZoonInBtn.angle = this.mCurrentIndex === 1 ? 180 : 0;\n            if (h > 300) {\n                if (this.parentContainer)\n                    this.add(this.mChildContainer);\n            }\n            else {\n                this.remove(this.mChildContainer);\n            }\n            // this.mBackground.x = this.mBackground.width >> 1;\n            // this.mBackground.y = this.mBackground.height >> 1;\n            this.mBackground.y = bgY;\n            this.mZoonInBtn.y = zoonBtnY;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return RankPanel;\n}(_basicRankPanel__WEBPACK_IMPORTED_MODULE_2__["BasicRankPanel"]));\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/rank/rankPanel.ts?')},"./src/render/ui/ui.manager.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UiManager", function() { return UiManager; });\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils */ "./src/utils/index.ts");\n/* harmony import */ var _components_base_panel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/base.panel */ "./src/render/ui/components/base.panel.ts");\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components */ "./src/render/ui/components/index.ts");\n\n\n\n\nvar UiManager = /** @class */ (function () {\n    function UiManager(mRender) {\n        this.mRender = mRender;\n        /**\n         * ui\n         */\n        this.mCache = [];\n        this.mRemoteCache = new Map();\n        this.mPanelClass = {\n            "BaseMediator": _components_base_panel__WEBPACK_IMPORTED_MODULE_1__["BasePanel"],\n        };\n    }\n    UiManager.prototype.setScene = function (scene) {\n        var _this = this;\n        this.mScene = scene;\n        if (scene) {\n            if (this.mCache) {\n                for (var _i = 0, _a = this.mCache; _i < _a.length; _i++) {\n                    var tmp = _a[_i];\n                    this.showPanel(tmp.name, tmp.param);\n                }\n                this.mCache.length = 0;\n            }\n            if (this.mRemoteCache.size > 0) {\n                this.mRemoteCache.forEach(function (value, key) {\n                    value.resolver.resolve(_this._showPanel(key, value.param));\n                });\n            }\n            this.mRemoteCache.clear();\n        }\n    };\n    UiManager.prototype.resize = function (width, height) {\n        if (this.mPanelMap) {\n            this.mPanelMap.forEach(function (panel) {\n                if (panel.isShow())\n                    panel.resize();\n            });\n        }\n    };\n    UiManager.prototype.createPanel = function (mediatorName) {\n        if (!this.mPanelClass.hasOwnProperty(mediatorName)) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("mediatorName error: ", mediatorName);\n            return;\n        }\n        var panel = new this.mPanelClass[mediatorName](this.mScene, this.mRender);\n        this.setPanel(mediatorName, panel);\n        return panel;\n    };\n    UiManager.prototype.setPanel = function (value, panel) {\n        this.mPanelMap.set(value, panel);\n    };\n    UiManager.prototype.getPanel = function (type) {\n        if (!this.mPanelMap)\n            return;\n        return this.mPanelMap.get(type);\n    };\n    UiManager.prototype.clearPanel = function () {\n        if (!this.mPanelMap) {\n            return;\n        }\n        this.mPanelMap.forEach(function (med) {\n            med.destroy();\n            med = null;\n        });\n        this.mPanelMap.clear();\n        this.mPanelMap = null;\n    };\n    UiManager.prototype.showAlertView = function (text, ok, cancel, callBack) {\n        if (cancel === void 0) { cancel = false; }\n        if (!this.mScene) {\n            return;\n        }\n        var alert = new _components__WEBPACK_IMPORTED_MODULE_3__["AlertView"](this).show({\n            text: text,\n            callback: function () {\n                if (callBack)\n                    callBack();\n            },\n            btns: _components__WEBPACK_IMPORTED_MODULE_3__["Buttons"].Ok\n        });\n    };\n    UiManager.prototype.destroy = function () {\n        this.clearPanel();\n        this.clearCache();\n        this.mScene = undefined;\n    };\n    UiManager.prototype.showPanel = function (type, param) {\n        var _this = this;\n        var scene = this.render.sceneManager.currentScene;\n        if (this.mScene) {\n            return new Promise(function (resolve, reject) {\n                resolve(_this._showPanel(type, param));\n            });\n        }\n        else {\n            this.mScene = this.render.game.scene.getScene(structure__WEBPACK_IMPORTED_MODULE_2__["SceneName"].MAINUI_SCENE);\n            if (!this.mScene) {\n                var remoteCache = new utils__WEBPACK_IMPORTED_MODULE_0__["ValueResolver"]();\n                this.mRemoteCache.set(type, { resolver: remoteCache, param: param });\n                return remoteCache.promise(function () {\n                    //\n                });\n            }\n            else {\n                return new Promise(function (resolve, reject) {\n                    resolve(_this._showPanel(type, param));\n                });\n            }\n        }\n        // else if (scene) {\n        //     return new Promise<BasePanel>((resolve, reject) => {\n        //         this.render.emitter.once("sceneCreated", () => {\n        //             if (this.mCache) {\n        //                 for (const tmp of this.mCache) {\n        //                     resolve(this._showPanel(tmp.name, tmp.param));\n        //                 }\n        //                 this.mCache.length = 0;\n        //             }\n        //         }, this);\n        //     });\n        // }\n    };\n    UiManager.prototype.hidePanel = function (type) {\n        if (!this.mPanelMap) {\n            return;\n        }\n        // type = this.getPanelNameByAlias(type);\n        var medName = type + "Panel";\n        var panel = this.mPanelMap.get(medName);\n        if (!panel) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("error " + type + " no panel can show!!!");\n            return;\n        }\n        panel.hide();\n    };\n    UiManager.prototype.updateUIState = function (panelName, ui) {\n        if (!this.mPanelMap) {\n            return;\n        }\n        var panel = this.mPanelMap.get(panelName);\n        if (panel) {\n            panel.updateUIState(ui);\n        }\n    };\n    UiManager.prototype.getPanelClass = function (type) {\n        var className = type + "Panel";\n        return __webpack_require__("./src/render/ui sync recursive ^\\\\.\\\\/.*$")("./" + type + "/" + className);\n    };\n    Object.defineProperty(UiManager.prototype, "scene", {\n        get: function () {\n            return this.mScene;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(UiManager.prototype, "render", {\n        get: function () {\n            return this.mRender;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    UiManager.prototype.clearCache = function () {\n        this.mCache = [];\n    };\n    UiManager.prototype._showPanel = function (type, param) {\n        if (!this.mPanelMap) {\n            this.mPanelMap = new Map();\n        }\n        var className = type + "Panel";\n        var ns = __webpack_require__("./src/render/ui sync recursive ^\\\\.\\\\/.*$")("./" + type + "/" + className);\n        var panel = new ns[className](this);\n        if (!panel) {\n            utils__WEBPACK_IMPORTED_MODULE_0__["Logger"].getInstance().error("error " + type + " no panel can show!!!");\n            return;\n        }\n        this.mPanelMap.set(type, panel);\n        panel.show(param);\n        return panel;\n    };\n    return UiManager;\n}());\n\n\n\n//# sourceURL=webpack://%5Bname%5D/./src/render/ui/ui.manager.ts?')}}]);