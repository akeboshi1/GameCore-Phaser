/*! For license information please see tooqing.js.LICENSE */
!function webpackUniversalModuleDefinition(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.TooqingCore=r():e.TooqingCore=r()}(this,(function(){return function(e){function webpackJsonpCallback(r){for(var t,o,i=r[0],a=r[1],c=0,u=[];c<i.length;c++)o=i[c],n[o]&&u.push(n[o][0]),n[o]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);for(_&&_(r);u.length;)u.shift()()}var r={},n={tooqing:0};function __webpack_require__(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}__webpack_require__.e=function requireEnsure(e){var r=[],t=n[e];if(0!==t)if(t)r.push(t[2]);else{var o=new Promise((function(r,o){t=n[e]=[r,o]}));r.push(t[2]=o);var i,_=document.createElement("script");_.charset="utf-8",_.timeout=120,__webpack_require__.nc&&_.setAttribute("nonce",__webpack_require__.nc),_.src=function jsonpScriptSrc(e){return __webpack_require__.p+"js/"+({"vendors~game":"vendors~game",game:"game"}[e]||e)+"_v1.0.46.js"}(e);var a=new Error;i=function(r){_.onerror=_.onload=null,clearTimeout(c);var t=n[e];if(0!==t){if(t){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,t[1](a)}n[e]=void 0}};var c=setTimeout((function(){i({type:"timeout",target:_})}),12e4);_.onerror=_.onload=i,document.head.appendChild(_)}return Promise.all(r)},__webpack_require__.m=e,__webpack_require__.c=r,__webpack_require__.d=function(e,r,n){__webpack_require__.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,r){if(1&r&&(e=__webpack_require__(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)__webpack_require__.d(n,t,function(r){return e[r]}.bind(null,t));return n},__webpack_require__.n=function(e){var r=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},__webpack_require__.p="",__webpack_require__.oe=function(e){throw console.error(e),e};var t=this.webpackJsonpTooqingCore=this.webpackJsonpTooqingCore||[],o=t.push.bind(t);t.push=webpackJsonpCallback,t=t.slice();for(var i=0;i<t.length;i++)webpackJsonpCallback(t[i]);var _=o;return __webpack_require__(__webpack_require__.s="./launcher.ts")}({"./launcher.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Launcher", function() { return Launcher; });\n/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./version */ "./version.js");\n/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_version__WEBPACK_IMPORTED_MODULE_0__);\n// 加载器：\r\n// 1. 在这里接受外部传入的参数并转换为World可以接受的参数\r\n// 2. 做设备兼容\r\n\r\nvar Launcher = /** @class */ (function () {\r\n    function Launcher(config) {\r\n        var _this = this;\r\n        this.minWidth = 1280;\r\n        this.minHeight = 720;\r\n        this.maxWidth = 1920;\r\n        this.maxHeight = 1080;\r\n        this.mConfig = {\r\n            auth_token: Object({"api_root":"https://api.tooqing.com/","osd":"https://osd.tooqing.com/","gateway":Object({"host":"gdev.tooqing.com","port":11100}),"game_id":"5dbd4540e09c6009779bd685","virtual_world_id":"0"}).auth_token,\r\n            token_expire: Object({"api_root":"https://api.tooqing.com/","osd":"https://osd.tooqing.com/","gateway":Object({"host":"gdev.tooqing.com","port":11100}),"game_id":"5dbd4540e09c6009779bd685","virtual_world_id":"0"}).token_expire,\r\n            token_fingerprint: Object({"api_root":"https://api.tooqing.com/","osd":"https://osd.tooqing.com/","gateway":Object({"host":"gdev.tooqing.com","port":11100}),"game_id":"5dbd4540e09c6009779bd685","virtual_world_id":"0"}).token_fingerprint,\r\n            server_addr: undefined,\r\n            game_id: "5dbd4540e09c6009779bd685",\r\n            virtual_world_id: "0",\r\n            // 16:9 = 3840×2160 2560X1440 1920×1080 1600×900 1366×768 1280×720 1024×576 960×540 854×480 720×405\r\n            width: this.minWidth,\r\n            height: this.minHeight,\r\n            baseWidth: this.maxWidth,\r\n            baseHeight: this.maxHeight,\r\n            ui_scale: 1,\r\n            closeGame: null,\r\n        };\r\n        if (config) {\r\n            Object.assign(this.mConfig, config);\r\n        }\r\n        this.intervalId = setInterval(function () {\r\n            var xhr = new XMLHttpRequest(); // TODO\r\n            xhr.open("GET", "./package.json", true);\r\n            xhr.addEventListener("load", function () {\r\n                var manifest = JSON.parse(xhr.response);\r\n                var newVersion = manifest.version;\r\n                if (_version__WEBPACK_IMPORTED_MODULE_0__["version"] !== newVersion) {\r\n                    var result = confirm("检测到新版本，是否刷新更新到最新版？");\r\n                    if (result && _this.mReload) {\r\n                        _this.mReload();\r\n                    }\r\n                }\r\n            });\r\n            xhr.send(null);\r\n        }, 4 * 60 * 60 * 1000 /* ms */);\r\n        Promise.all(/*! import() | game */[__webpack_require__.e("vendors~game"), __webpack_require__.e("game")]).then(__webpack_require__.bind(null, /*! ./src/game/world */ "./src/game/world.ts"))\r\n            .then(function (game) {\r\n            _this.world = new game.World(_this.config, _this.mCompleteFunc);\r\n        });\r\n    }\r\n    Object.defineProperty(Launcher.prototype, "config", {\r\n        get: function () {\r\n            return this.mConfig;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Launcher.start = function (config) {\r\n        return new this(config);\r\n    };\r\n    Launcher.prototype.destory = function () {\r\n        this.world.destroy();\r\n    };\r\n    Launcher.prototype.startFullscreen = function () {\r\n        if (!this.world) {\r\n            return;\r\n        }\r\n        this.world.startFullscreen();\r\n    };\r\n    Launcher.prototype.stopFullscreen = function () {\r\n        if (!this.world) {\r\n            return;\r\n        }\r\n        this.world.stopFullscreen();\r\n    };\r\n    Launcher.prototype.registerReload = function (func) {\r\n        this.mReload = func;\r\n    };\r\n    Launcher.prototype.registerComplete = function (func) {\r\n        this.mCompleteFunc = func;\r\n    };\r\n    Launcher.prototype.onResize = function (width, height, ui_scale) {\r\n        if (!this.world)\r\n            return;\r\n        if (ui_scale)\r\n            this.mConfig.ui_scale = ui_scale;\r\n        this.world.resize(width, height);\r\n    };\r\n    Launcher.prototype.destroy = function () {\r\n        if (this.intervalId)\r\n            clearInterval(this.intervalId);\r\n        if (this.world)\r\n            this.world.destroy();\r\n    };\r\n    return Launcher;\r\n}());\r\n\r\n\n\n//# sourceURL=webpack://TooqingCore/./launcher.ts?')},"./version.js":function(module,exports){eval("// generated by genversion\r\nmodule.exports = '1.0.46'\r\n\n\n//# sourceURL=webpack://TooqingCore/./version.js?")}})}));