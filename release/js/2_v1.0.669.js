(this.webpackJsonp_name_=this.webpackJsonp_name_||[]).push([[2],[function(e,i,n){"use strict";var a=n(17);n.d(i,"i18n",(function(){return a.a}));var s=n(15);n.d(i,"Font",(function(){return s.a}));var o=n(40);n.d(i,"Background",(function(){return o.a})),n.d(i,"Border",(function(){return o.b})),n.d(i,"Coin",(function(){return o.c})),n.d(i,"CoinType",(function(){return o.d})),n.d(i,"ResUtils",(function(){return o.e})),n.d(i,"UIHelper",(function(){return o.f})),n.d(i,"Url",(function(){return o.g}));var h=n(48);n.d(i,"Handler",(function(){return h.a}));var l=n(8);n.d(i,"Logger",(function(){return l.a}));var c=n(63);n.d(i,"Direction",(function(){return c.a}));var m=n(632);n.d(i,"LogicPoint",(function(){return m.a}));var f=n(23);n.d(i,"LogicPos",(function(){return f.a}));var g=n(633);n.d(i,"Tool",(function(){return g.a}));var _=n(64);n.d(i,"load",(function(){return _.a}));n(634),n(49),n(635);var T=n(29);n.d(i,"Position45",(function(){return T.a}));n(636),n(637);n.d(i,"initLocales",(function(){return a.b}));var x=n(638);n.d(i,"Pos",(function(){return x.a}));var S=n(639);n.d(i,"Size",(function(){return S.a}));var j=n(640);n.d(i,"Helpers",(function(){return j.a}));var q=n(641);n.d(i,"EventDispatcher",(function(){return q.a}));var Y=n(642);n.d(i,"Color",(function(){return Y.a}));n(643);var X=n(644);n.d(i,"ValueResolver",(function(){return X.a}));var Z=n(645);n.o(Z,"NumberUtils")&&n.d(i,"NumberUtils",(function(){return Z.NumberUtils})),n.o(Z,"StringUtils")&&n.d(i,"StringUtils",(function(){return Z.StringUtils})),n.o(Z,"TimeUtils")&&n.d(i,"TimeUtils",(function(){return Z.TimeUtils})),n.o(Z,"UiUtils")&&n.d(i,"UiUtils",(function(){return Z.UiUtils}));n(646);var $=n(647);n.d(i,"TimeUtils",(function(){return $.a}));var tt=n(648);n.d(i,"StringUtils",(function(){return tt.a}));n(649);var et=n(650);n.d(i,"UiUtils",(function(){return et.a}));n(651);var it=n(652);n.d(i,"NumberUtils",(function(){return it.a}))},,function(e,i,n){"use strict";var a=n(54);n.d(i,"HTTP_REGEX",(function(){return a.a}));var s=n(75);n.d(i,"DisplayField",(function(){return s.a})),n.d(i,"TitleMask",(function(){return s.b}));var o=n(76);n.d(i,"PlatFormType",(function(){return o.a}));var h=n(41);n.d(i,"MessageType",(function(){return h.a}));var l=n(77);n.d(i,"SceneName",(function(){return l.a}));var c=n(78);n.d(i,"Fit",(function(){return c.a}));var m=n(24);n.d(i,"RENDER_PEER",(function(){return m.c})),n.d(i,"MAIN_WORKER",(function(){return m.a})),n.d(i,"MAIN_WORKER_URL",(function(){return m.b}));var f=n(79);n.d(i,"EventType",(function(){return f.a}));var g=n(80);n.d(i,"ModuleName",(function(){return g.a}));var _=n(55);n.d(i,"FriendRelationEnum",(function(){return _.b})),n.d(i,"FriendChannel",(function(){return _.a}));var T=n(81);n.d(i,"ChineseUnit",(function(){return T.a}));var x=n(82);n.d(i,"TimerCountDown",(function(){return x.a}));var S=n(42);n.d(i,"AvatarSuitType",(function(){return S.a})),n.d(i,"SuitAlternativeType",(function(){return S.b}));n(85);var j=n(86);n.d(i,"LoadState",(function(){return j.a})),n.d(i,"PlaySceneLoadState",(function(){return j.b}));n(39);var q=n(87);n.o(q,"AnimationModel")&&n.d(i,"AnimationModel",(function(){return q.AnimationModel})),n.o(q,"Animator")&&n.d(i,"Animator",(function(){return q.Animator})),n.o(q,"Atlas")&&n.d(i,"Atlas",(function(){return q.Atlas})),n.o(q,"LayerName")&&n.d(i,"LayerName",(function(){return q.LayerName}));var Y=n(88);n.o(Y,"AnimationModel")&&n.d(i,"AnimationModel",(function(){return Y.AnimationModel})),n.o(Y,"Animator")&&n.d(i,"Animator",(function(){return Y.Animator})),n.o(Y,"Atlas")&&n.d(i,"Atlas",(function(){return Y.Atlas})),n.o(Y,"LayerName")&&n.d(i,"LayerName",(function(){return Y.LayerName}));var X=n(89);n.d(i,"AnimationModel",(function(){return X.a}));var Z=n(90);n.o(Z,"Animator")&&n.d(i,"Animator",(function(){return Z.Animator})),n.o(Z,"Atlas")&&n.d(i,"Atlas",(function(){return Z.Atlas})),n.o(Z,"LayerName")&&n.d(i,"LayerName",(function(){return Z.LayerName}));var $=n(91);n.d(i,"Animator",(function(){return $.a}));var tt=n(92);n.o(tt,"Atlas")&&n.d(i,"Atlas",(function(){return tt.Atlas})),n.o(tt,"LayerName")&&n.d(i,"LayerName",(function(){return tt.LayerName}));n(93);var et=n(94);n.d(i,"LayerName",(function(){return et.a}));var it=n(109);n.d(i,"Atlas",(function(){return it.a}))},,function(e,i,n){"use strict";var a=n(663);n.d(i,"BaseCamerasManager",(function(){return a.a}));var s=n(660);n.d(i,"BaseDragonbonesDisplay",(function(){return s.a})),n.d(i,"BaseFramesDisplay",(function(){return s.b})),n.d(i,"FollowEnum",(function(){return s.c})),n.d(i,"FollowObject",(function(){return s.d})),n.d(i,"ReferenceArea",(function(){return s.e})),n.d(i,"TopDisplay",(function(){return s.f}));var o=n(661);n.d(i,"BaseLayer",(function(){return o.a})),n.d(i,"GroundLayer",(function(){return o.b})),n.d(i,"LayerManager",(function(){return o.c})),n.d(i,"SurfaceLayer",(function(){return o.d}));var h=n(664);n.d(i,"BlockManager",(function(){return h.a})),n.d(i,"Scenery",(function(){return h.b}));var l=n(653);n.o(l,"BaseSceneManager")&&n.d(i,"BaseSceneManager",(function(){return l.BaseSceneManager})),n.o(l,"BasicScene")&&n.d(i,"BasicScene",(function(){return l.BasicScene})),n.o(l,"SkyBoxScene")&&n.d(i,"SkyBoxScene",(function(){return l.SkyBoxScene}));var c=n(662);n.d(i,"BaseSceneManager",(function(){return c.a})),n.d(i,"BasicScene",(function(){return c.b})),n.d(i,"SkyBoxScene",(function(){return c.c}))},,,,function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var __spreadArrays=function(){for(var e=0,i=0,n=arguments.length;i<n;i++)e+=arguments[i].length;var a=Array(e),s=0;for(i=0;i<n;i++)for(var o=arguments[i],h=0,l=o.length;h<l;h++,s++)a[s]=o[h];return a},a=function(){function Logger(){this.isDebug=!1}return Logger.getInstance=function(){return Logger._instance||(Logger._instance=new Logger),Logger._instance},Logger.prototype.fatal=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];throw e},Logger.prototype.log=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.isDebug&&console.log.apply(console,__spreadArrays([e],i))},Logger.prototype.debug=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.isDebug&&console.log.apply(console,__spreadArrays([e],i))},Logger.prototype.error=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];console.error.apply(console,__spreadArrays([e],i))},Logger.prototype.debugError=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.isDebug&&console.error.apply(console,__spreadArrays([e],i))},Logger.prototype.warn=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.isDebug&&console.warn.apply(console,__spreadArrays([e],i))},Logger.prototype.info=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.isDebug&&console.info.apply(console,__spreadArrays([e],i))},Logger.prototype.v=function(){this.isDebug=!0},Logger.prototype.q=function(){this.isDebug=!1},Logger}()},,,,,,,function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function Font(){}return Font.isChineseChar=function(e){return!!new RegExp("[一-龥]+").test(e)},Font.isEnglishChar=function(e){return!!new RegExp("[A-Za-z]+").test(e)},Font.isNumberChar=function(e){return!!new RegExp("[0-9]+").test(e)},Font.YAHEI_14_BOLD="bold 14px YaHei",Font.YAHEI_16_BOLD="bold 16px YaHei",Font.YAHEI_18_BOLD="bold 18px YaHei",Font.YAHEI_20_BOLD="bold 20px YaHei",Font.DEFULT_FONT="'Source Han Sans', Helvetica, -apple-system, 'Noto Sans', 'Helvetica Neue', 'Nimbus Sans L', Arial, 'Liberation Sans', 'PingFang SC', 'Hiragino Sans GB', 'Noto Sans CJK SC', 'Source Han Sans SC', 'Source Han Sans CN', 'Microsoft YaHei'",Font.ZH_MAIN="Source Han Sans",Font.EN_MAINT="tt0503m_",Font.EN_BOLD="tt0173m_",Font.NUMBER="t04B25",Font.HELVETICA="Helvetica",Font}()},,function(e,i,n){"use strict";n.d(i,"b",(function(){return initLocales})),n.d(i,"a",(function(){return h}));var a=n(70),s=n(665),o=n(666);function initLocales(e){return a.a.use(s.a).use(o.a).init({fallbackLng:"zh-CN",backend:{loadPath:e,crossDomain:!0}})}var h=a.a},,function(e,i,n){"use strict";n.d(i,"d",(function(){return T})),n.d(i,"c",(function(){return g})),n.d(i,"a",(function(){return m})),n.d(i,"b",(function(){return x}));var a,s,o=n(2),h=n(0),l=n(1),c=n(6),m=function(){function DragonbonesModel(e){if(this.discriminator="DragonbonesModel",e){this.id=e.id,this.avatar=e.avatar,this.eventName=e.eventName;var i=e.avatar.defaultAnimation;i&&(this.animationName=i)}}return DragonbonesModel.prototype.setInfo=function(e){for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i])},DragonbonesModel.prototype.destroy=function(){},DragonbonesModel.prototype.getCollisionArea=function(e){return[[1]]},DragonbonesModel.prototype.getWalkableArea=function(){return[[0]]},DragonbonesModel.prototype.getOriginPoint=function(e){return new h.LogicPoint(0,0)},DragonbonesModel.prototype.getInteractiveArea=function(){return[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0}]},DragonbonesModel.prototype.existAnimation=function(e){return!0},DragonbonesModel.prototype.findAnimation=function(e,i){var n=!1;switch(i){case h.Direction.south_east:case h.Direction.east_north:n=!0;break;case h.Direction.west_south:case h.Direction.north_west:}return{name:this.checkDirectionAnimation(e,i),flip:n}},DragonbonesModel.prototype.checkDirectionAnimation=function(e,i){var n="";i!==h.Direction.north_west&&i!==h.Direction.east_north||(n="_back");var a=""+e+n;return this.existAnimation(a)?a:null},DragonbonesModel.prototype.checkDirectionByExistAnimations=function(e,i){return i},DragonbonesModel}(),f=n(69),g=function(){function FramesModel(e){this.discriminator="FramesModel",this.id=e.id||0,this.type=e.sn||"",this.eventName=e.eventName;var i=e.animations;i&&(this.animationName=i.defaultAnimationName,this.setDisplay(i.display),this.setAnimationData(i.animationData))}return FramesModel.createFromDisplay=function(e,i,n){for(var a=[],s=i[0].node.name,h=0,l=i;h<l.length;h++){var c=l[h];a.push(new o.AnimationModel(c))}for(var m=new Map,g=0,_=a;g<_.length;g++){var T=_[g];m.set(T.name,T)}return{animations:m,id:n||0,gene:f.sync(e.dataPath+e.texturePath),discriminator:"FramesModel",animationName:s,display:e}},FramesModel.prototype.setInfo=function(e){for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i])},FramesModel.prototype.getAnimationData=function(){return this.animations},FramesModel.prototype.existAnimation=function(e){return!!this.animations&&this.animations.has(e)},FramesModel.prototype.getAnimations=function(e){if(this.animations)return this.animations.get(e)},FramesModel.prototype.destroy=function(){this.animations&&this.animations.clear()},FramesModel.prototype.createProtocolObject=function(){var e=[];return this.animations.forEach((function(i){e.push(i.createProtocolObject())}),this),e},FramesModel.prototype.getCollisionArea=function(e,i){void 0===i&&(i=!1);var n=this.getAnimations(e);if(n)return i?c.Helpers.flipArray(n.collisionArea):n.collisionArea},FramesModel.prototype.getWalkableArea=function(e,i){void 0===i&&(i=!1);var n=this.getAnimations(e);if(n)return i?c.Helpers.flipArray(n.walkableArea):n.walkableArea},FramesModel.prototype.getInteractiveArea=function(e,i){void 0===i&&(i=!1);var n=this.getAnimations(e);if(n){if(i){for(var a=[],s=0,o=n.interactiveArea;s<o.length;s++){var h=o[s];a.push({x:h.y,y:h.x})}return a}return n.interactiveArea}},FramesModel.prototype.getOriginPoint=function(e,i){void 0===i&&(i=!1);var n=this.getAnimations(e);if(n){var a=n.originPoint;return i?new h.LogicPoint(a.y,a.x):a}},FramesModel.prototype.getDirable=function(){},FramesModel.prototype.createSprite=function(e){var i=e.nodeType,n=e.x,a=e.y,s=e.z,o=e.id,h=e.dir,m=e.isMoss,f=e.layer,g=l.op_client.Sprite.create();g.id=o||c.Helpers.genId(),g.layer=f,g.display=this.display,g.currentAnimationName=this.animationName;var _=l.op_def.PBPoint3f.create();return _.x=n,_.y=a,s&&(_.z=s),g.point3f=_,g.animations=this.createProtocolObject(),h&&(g.direction=h),void 0!==m&&(g.isMoss=m),new T(g,i)},FramesModel.prototype.findAnimation=function(e,i){var n=this.checkDirectionAnimation(e,i),a=!1;if(n)return{name:n,flip:a};switch(i){case h.Direction.west_south:case h.Direction.east_north:n=this.getDefaultAnimation(e);break;case h.Direction.south_east:n=this.getDefaultAnimation(e),a=!0;break;case h.Direction.north_west:null===(n=this.checkDirectionAnimation(e,h.Direction.east_north))&&(n=this.getDefaultAnimation(e)),a=!0}return{name:n,flip:a}},FramesModel.prototype.checkDirectionAnimation=function(e,i){var n=e+"_"+i;return this.existAnimation(n)?n:null},FramesModel.prototype.checkDirectionByExistAnimations=function(e,i){var n=i;switch(i){case h.Direction.west_south:case h.Direction.south_east:break;case h.Direction.east_north:this.existAnimation(e+"_"+h.Direction.east_north)||(n=h.Direction.west_south);break;case h.Direction.north_west:this.existAnimation(e+"_"+h.Direction.north_west)||this.existAnimation(e+"_"+h.Direction.east_north)||(n=h.Direction.south_east)}return n},FramesModel.prototype.setDisplay=function(e){e?(this.display={dataPath:e.dataPath,texturePath:e.texturePath},this.gene=f.sync(e.dataPath+e.texturePath)):h.Logger.getInstance().error(this.type+" display does not exist")},FramesModel.prototype.setAnimationData=function(e){if(e){this.animations=new Map;for(var i=0,n=e;i<n.length;i++){var a=n[i];this.animations.set(a.name,a)}}else h.Logger.getInstance().error(this.id+" animationData does not exist")},FramesModel.prototype.getDefaultAnimation=function(e){var i=this.checkDirectionAnimation(e,h.Direction.west_south);return null===i&&(this.existAnimation(e)?i=e:(h.Logger.getInstance().warn(FramesModel.name+": can't find animation "+e),i="idle")),i},FramesModel}(),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)});!function(e){e[e.TQ_NickName=65536]="TQ_NickName",e[e.TQ_Badge=131072]="TQ_Badge"}(s||(s={}));var T=function(e){function Sprite(i,n){var a=e.call(this)||this;if(a.direction=3,a.updateSuits=!1,a.id=i.id,i.point3f){var s=i.point3f;a.pos=new h.LogicPos(s.x,s.y,s.z)}else a.pos=new h.LogicPos(0,0);return a.updateAttr(i.attrs),a.updateSuits&&a.updateAvatarSuits(a.suits),a.avatar=a.avatar||i.avatar,a.avatar&&a.updateAvatar(a.avatar),i.display&&a.updateDisplay(i.display,i.animations,i.currentAnimationName),i.sn&&(a.sn=i.sn),a.tryRegisterAnimation(i.animationRegistrationMap),a.currentAnimationName=i.currentAnimationName,a.titleMask=i.titleMask,a.setDirection(i.direction||3),a.nickname=i.nickname,a.bindID=i.bindId,a.alpha=void 0===i.opacity?1:i.opacity/100,a.displayBadgeCards=i.displayBadgeCards,a.nodeType=n,i.layer&&(a.layer=i.layer),i.version&&(a.version=i.version),void 0!==i.isMoss&&(a.isMoss=i.isMoss),a.currentCollisionArea||(a.currentCollisionArea=a.getCollisionArea()),a.currentWalkableArea||(a.currentWalkableArea=a.getWalkableArea()),a.currentCollisionPoint||(a.currentCollisionPoint=a.getOriginPoint()),a.interactive,a.mountSprites=i.mountSprites,a.speed=i.speed,a}return _(Sprite,e),Sprite.prototype.clear=function(){},Sprite.prototype.toSprite=function(){var e=l.op_client.Sprite.create();if(e.id=this.id,e.nickname=this.nickname,this.displayInfo instanceof g)e.display=this.displayInfo.display,e.currentAnimationName=this.currentAnimationName,e.animations=this.displayInfo.createProtocolObject();else if(this.displayInfo instanceof m&&this.avatar){var i=l.op_gameconfig.Avatar.create();for(var n in this.avatar)Object.prototype.hasOwnProperty.call(this.avatar,n)&&(i[n]=this.avatar[n]);e.avatar=i}if(this.pos){var a=l.op_def.PBPoint3f.create();a.x=this.pos.x,a.y=this.pos.y,a.z=this.pos.z,e.point3f=a}return e.direction=this.direction,e.bindId=this.bindID,e.sn=this.sn,e.version=this.version,e},Sprite.prototype.showNickName=function(){return(this.titleMask&s.TQ_NickName)>0},Sprite.prototype.showBadge=function(){return(this.titleMask&s.TQ_Badge)>0},Sprite.prototype.newID=function(){this.id=c.Helpers.genId()},Sprite.prototype.setPosition=function(e,i){this.pos||(this.pos=new h.LogicPos),this.pos.x=e,this.pos.y=i},Sprite.prototype.turn=function(){if(this.displayInfo){var e=this.dirable(this.currentAnimationName),i=e.indexOf(this.direction);return i>-1?this.setDirection(e[(i+1)%e.length]):h.Logger.getInstance().error(Sprite.name+": error dir "+this.direction),this}},Sprite.prototype.updateAvatarSuits=function(e){return this.updateSuits=!1,!!e&&(e.length>0?(this.suits=e,this.avatar=o.AvatarSuitType.createHasBaseAvatar(e)):this.avatar=o.AvatarSuitType.createBaseAvatar(),!0)},Sprite.prototype.updateAvatar=function(e){this.displayInfo&&this.displayInfo.destroy(),this.avatar={id:e.id},this.avatar=Object.assign(this.avatar,e),this.displayInfo=new m(this)},Sprite.prototype.setTempAvatar=function(e){this.displayInfo&&this.displayInfo.destroy();var i={id:e.id};i=Object.assign(i,this.avatar),i=Object.assign(i,e),this.displayInfo=new m({id:this.id,avatar:i})},Sprite.prototype.getAvatarSuits=function(e){var i;if(e)for(var n=0,a=e;n<a.length;n++){var s=a[n];if("PKT_AVATAR_SUITS"===s.key){i=JSON.parse(s.value);break}}return i},Sprite.prototype.updateAttr=function(e){this.attrs=e;var i=this.getAvatarSuits(e);i&&i.length>0&&(this.suits=i,this.updateSuits=!0,this.animator?this.animator.setSuits(this.suits):this.animator=new o.Animator(this.suits))},Sprite.prototype.updateDisplay=function(e,i,n){if(e&&i&&e.dataPath&&e.texturePath&&(this.displayInfo&&this.displayInfo.destroy(),e)){for(var a=[],s=0,h=i;s<h.length;s++){var l=h[s];a.push(new o.AnimationModel(l))}n=n||this.currentAnimationName||"",this.displayInfo=new g({animations:{defaultAnimationName:n,display:e,animationData:a},id:this.id}),n&&(this.currentAnimationName=n)}},Sprite.prototype.setAnimationQueue=function(e){this.animationQueue=e},Sprite.prototype.setMountSprites=function(e){this.mountSprites=e},Sprite.prototype.setAnimationName=function(e,i){var n=this.getBaseAniName(e),a=e.split("_")[1],s=a?n+"_"+a:n;return this.currentAnimation&&this.currentAnimation.name===s?null:(this.displayInfo&&(e=this.animator?this.animator.getAnimationName(e):e),this.currentAnimationName=e,this.setAnimationData(e,this.direction,i))},Sprite.prototype.setDirection=function(e){e&&(this.direction=e,this.displayInfo&&(this.currentAnimationName&&(this.direction=this.displayInfo.checkDirectionByExistAnimations(this.getBaseAniName(this.currentAnimationName),this.direction)),this.setAnimationData(this.currentAnimationName,this.direction)))},Sprite.prototype.setDisplayInfo=function(e){this.displayInfo=e,this.displayInfo.id=this.id,this.currentAnimationName&&e instanceof g?this.setAnimationData(this.currentAnimationName,this.direction):e.animationName&&this.setAnimationName(e.animationName)},Object.defineProperty(Sprite.prototype,"hasInteractive",{get:function(){if(!this.displayInfo||!this.currentAnimation)return!1;var e=this.currentAnimation.name,i=this.displayInfo.getInteractiveArea(e);return!!(i&&i.length>0)},enumerable:!1,configurable:!0}),Sprite.prototype.getInteractive=function(){if(this.displayInfo&&this.currentAnimation){var e=this.currentAnimation,i=e.name,n=e.flip;return this.displayInfo.getInteractiveArea(i,n)}},Sprite.prototype.setOriginCollisionPoint=function(e){void 0===this.originCollisionPoint&&(this.originCollisionPoint=new h.LogicPoint),e&&e.length>1&&(this.originCollisionPoint.x=e[0],this.originCollisionPoint.y=e[1])},Sprite.prototype.setOriginWalkPoint=function(e){void 0===this.originWalkPoint&&(this.originWalkPoint=new h.LogicPoint),e&&e.length>1&&(this.originWalkPoint.x=e[0],this.originWalkPoint.y=e[1])},Sprite.prototype.getCollisionArea=function(){if(this.displayInfo&&this.currentAnimation){var e=this.currentAnimation,i=e.name,n=e.flip;return this.displayInfo.getCollisionArea(i,n)}},Sprite.prototype.getWalkableArea=function(){if(this.displayInfo&&this.currentAnimation){var e=this.currentAnimation,i=e.name,n=e.flip;return this.displayInfo.getWalkableArea(i,n)}},Sprite.prototype.getOriginPoint=function(){if(this.displayInfo&&this.currentAnimation){var e=this.currentAnimation,i=e.name,n=e.flip;return this.displayInfo.getOriginPoint(i,n)}},Sprite.prototype.registerAnimationMap=function(e,i){this.registerAnimation||(this.registerAnimation=new Map),this.registerAnimation.set(e,i)},Sprite.prototype.unregisterAnimationMap=function(e){this.registerAnimation&&this.registerAnimation.delete(e)},Sprite.prototype.setAnimationData=function(e,i,n){if(this.displayInfo&&e){var a=this.getBaseAniName(e);return this.displayInfo.findAnimation?(this.currentAnimation=this.displayInfo.findAnimation(a,i),this.currentAnimation.times=n,this.animationQueue&&this.animationQueue.length>0&&(this.currentAnimation.playingQueue=this.animationQueue[0]),this.currentCollisionArea&&this.setArea(),this.emit("Animation_Change",{id:this.id,direction:this.direction,animation:this.currentAnimation,playTimes:n})):h.Logger.getInstance().error("displayInfo no findanimation ====>",this.displayInfo),this.currentAnimation}},Sprite.prototype.checkDirectionAnimation=function(e,i){var n=e+"_"+i;return this.displayInfo.existAnimation(n)?n:null},Sprite.prototype.setArea=function(){this.currentCollisionArea=this.getCollisionArea(),this.currentWalkableArea=this.getWalkableArea(),this.currentCollisionPoint=this.getOriginPoint()},Sprite.prototype.dirable=function(e){var i=e.split("_")[0],n=[3,5];return this.checkDirectionAnimation(i,h.Direction.east_north)&&n.push(7,1),n},Sprite.prototype.tryRegisterAnimation=function(e){if(e&&!(e.length<1)){this.registerAnimation=new Map;for(var i=0,n=e;i<n.length;i++){var a=n[i];this.registerAnimation.set(a.key,a.value)}}},Sprite.prototype.getBaseAniName=function(e){var i=e.split("_")[0];return this.registerAnimation&&this.registerAnimation.has(i)&&(i=this.registerAnimation.get(i)),i},Sprite}(h.EventDispatcher),x=function(){function ElementStorage(){this.mModels=new Map,this.mElementRef=new Map,this.terrainPalette=new Map,this.terrainPaletteWithBindId=new Map,this.mossPalette=new Map}return ElementStorage.prototype.setGameConfig=function(e){if(h.Logger.getInstance().debug("TCL: ElementStorage -> config",e),e){for(var i=null,n=0,a=e.objectsList;n<a.length;n++){var s=a[n];if(s.type===l.op_def.NodeType.ElementNodeType){if(!(i=this.mModels.get(s.id))){var c=[],m=s.animations;if(!m)continue;for(var f=0,_=m.animationData;f<_.length;f++){var T=_[f];c.push(new o.AnimationModel(T.createProtocolObject()))}i=new g({id:s.id,sn:s.sn,animations:{defaultAnimationName:m.defaultAnimationName,display:m.display,animationData:c}}),this.mModels.set(s.id,i)}var x={id:s.id,displayModel:i};this.mElementRef.set(s.id,x)}}this.updatePalette(e.root.palette),this.updateMoss(e.root.moss),this.updateAssets(e.root.assets)}},ElementStorage.prototype.updatePalette=function(e){for(var i=0,n=Array.from(e.peersDict.keys());i<n.length;i++){var a=n[i],s=e.peersDict.get(a),h=this.terrainPalette.get(s.id);if(s.animations&&!h){var l=new g({id:s.id,sn:s.sn,animations:{defaultAnimationName:s.animations.defaultAnimationName,display:s.animations.display,animationData:s.animations.animationData.map((function(e){return new o.AnimationModel(e.createProtocolObject())}))}});this.terrainPalette.set(a,l),this.terrainPaletteWithBindId.set(s.id,l)}}},ElementStorage.prototype.updateMoss=function(e){for(var i=0,n=Array.from(e.peersDict.keys());i<n.length;i++){var a=n[i],s=e.peersDict.get(a),h=this.mossPalette.get(s.id);if(s.animations&&!h){var l=new g({id:s.id,sn:s.sn,animations:{defaultAnimationName:s.animations.defaultAnimationName,display:s.animations.display,animationData:s.animations.animationData.map((function(e){return new o.AnimationModel(e.createProtocolObject())}))}});this.mossPalette.set(a,{layer:s.layer,frameModel:l})}}},ElementStorage.prototype.updateAssets=function(e){var i=e.getAssetList();this._assets=[];for(var n=0,a=i;n<a.length;n++){var s=a[n],o=s.media;if(o){var l=o.match(/\.([a-zA-Z0-9]+)($|\?)/);l&&l[1]&&this._assets.push({type:l[1],key:s.key,source:h.Url.getOsdRes(o)})}}},ElementStorage.prototype.setSceneConfig=function(e){for(var i=e.objectsList,n=null,_loop_1=function(e){if(e.type===l.op_def.NodeType.ElementNodeType){n=a.mModels.get(e.id);var i=[];if(e.children.forEach((function(e){"EventNode"===e.className&&e.eventName===l.op_def.GameEvent.onElementHit&&i.push(e.eventName)})),!n){var s=[],h=e,c=e.animations;if(h.avatar)n=new m({id:h.id,avatar:h.avatar.createProtocolObject()});else{for(var f=0,_=c.animationData;f<_.length;f++){var T=_[f];s.push(new o.AnimationModel(T.createProtocolObject()))}n=new g({id:e.id,sn:e.sn,eventName:i,animations:{defaultAnimationName:c.defaultAnimationName,display:c.display,animationData:s}})}a.mModels.set(e.id,n)}var x={id:e.id,name:e.name,displayModel:n};a.mElementRef.set(e.id,x)}},a=this,s=0,h=i;s<h.length;s++){_loop_1(h[s])}var c=e.root.children.find((function(e){return e.type===l.op_def.NodeType.SceneNodeType}));this._terrainCollection=c.terrainCollection,this._mossCollection=c.mossCollection,this._wallCollection=c.wallCollection,this._scenerys=c.getScenerys()},ElementStorage.prototype.add=function(e){this.mModels.set(e.id,e)},ElementStorage.prototype.getElementRef=function(e){return this.mElementRef.get(e)},ElementStorage.prototype.getDisplayModel=function(e){var i=this.mElementRef.get(e);if(i)return i.displayModel;h.Logger.getInstance().debugError("can't find element "+e)},ElementStorage.prototype.getTerrainCollection=function(){return this._terrainCollection},ElementStorage.prototype.getTerrainPalette=function(e){if(this.terrainPalette.get(e))return this.terrainPalette.get(e)},ElementStorage.prototype.getTerrainPaletteByBindId=function(e){if(this.terrainPaletteWithBindId.get(e))return this.terrainPaletteWithBindId.get(e)},ElementStorage.prototype.getMossCollection=function(){return this._mossCollection},ElementStorage.prototype.getMossPalette=function(e){if(this.mossPalette.get(e))return this.mossPalette.get(e)},ElementStorage.prototype.getScenerys=function(){return this._scenerys},ElementStorage.prototype.getAssets=function(){return this._assets},ElementStorage.prototype.getWallCollection=function(){return this._wallCollection},ElementStorage.prototype.destroy=function(){this.mElementRef.clear(),this.terrainPalette.clear(),this.terrainPaletteWithBindId.clear(),this.mossPalette.clear(),this.mModels.forEach((function(e,i){e.destroy()})),this.mModels.clear(),this._assets=void 0},ElementStorage}()},,,,function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function LogicPos(e,i,n,a){this.x=e||0,this.y=i||0,this.z=n||0,this.depth=0|a}return LogicPos.prototype.add=function(e,i,n){return this.x+=e,this.x+=i,this.z+=n||0,this},LogicPos.prototype.equal=function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.depth===this.depth},LogicPos.prototype.toString=function(){return"Pos { x: "+this.x+", y: "+this.y+", z: "+this.z+", depth: "+this.depth+" }"},LogicPos.prototype.toPoint=function(){return new LogicPos(this.x,this.y,this.z)},LogicPos}()},function(e,i,n){"use strict";n.d(i,"c",(function(){return o})),n.d(i,"a",(function(){return h})),n.d(i,"b",(function(){return l}));var a=n(14),s=n.n(a),o="render",h="mainWorker",l="./js/mainWorker_v"+s.a+".js";s.a},,,,,function(e,i,n){"use strict";n.d(i,"a",(function(){return s}));var a=n(23),s=function(){function Position45(){}return Position45.transformTo90=function(e,i){i.rows,i.tileWidth;return new a.a((e.x-e.y)*(i.tileWidth/2),(e.x+e.y)*(i.tileHeight/2))},Position45.transformTo45=function(e,i){i.rows,i.tileWidth;return new a.a(Math.floor((e.y+e.z)/i.tileHeight+e.x/i.tileWidth),Math.floor((e.y+e.z)/i.tileHeight-e.x/i.tileWidth))},Position45}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return m})),n.d(i,"c",(function(){return f})),n.d(i,"b",(function(){return s}));var a,s,o=n(31),h=n(52),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function AvatarEditorCanvas(i){var n=e.call(this,i)||this;return n.SCENEKEY="AvatarEditorScene",n.SCENEKEY_SNAPSHOT="AvatarEditorSnapshotScene",l.Logger.getInstance().debug("AvatarEditorCanvas.constructor()"),n.mGame.scene.add(n.SCENEKEY,f),n.mData=i.node,n.mGame.scene.start(n.SCENEKEY,{onCreated:n.onSceneCreated.bind(n),onUpdate:n.update.bind(n),onDestroy:n.onSceneDestroy.bind(n)}),n}return c(AvatarEditorCanvas,e),AvatarEditorCanvas.prototype.destroy=function(){l.Logger.getInstance().debug("AvatarEditorCanvas.destroy()"),this.mData&&(this.mData=null),this.mDragonbone&&this.mDragonbone.destroy(),e.prototype.destroy.call(this)},AvatarEditorCanvas.prototype.getScene=function(){return this.mGame?this.mGame.scene.getScene(this.SCENEKEY):null},AvatarEditorCanvas.prototype.onSceneCreated=function(e){this.mDragonbone=new h.a(e,this.mConfig.osd,this.mEmitter,!0)},AvatarEditorCanvas.prototype.update=function(){},AvatarEditorCanvas.prototype.onSceneDestroy=function(){this.mData=null,this.mDragonbone&&this.mDragonbone.destroy()},AvatarEditorCanvas.prototype.loadLocalResources=function(e,i,n,a){return this.mDragonbone?this.mDragonbone.loadLocalResources(e,i,n):Promise.reject("not init yet")},AvatarEditorCanvas.prototype.toggleFacing=function(e){this.mDragonbone&&this.mDragonbone.setDir(e)},AvatarEditorCanvas.prototype.play=function(e){this.mDragonbone&&this.mDragonbone.play(e)},AvatarEditorCanvas.prototype.clearParts=function(){this.mDragonbone&&this.mDragonbone.clearParts()},AvatarEditorCanvas.prototype.mergeParts=function(e){this.mDragonbone&&this.mDragonbone.mergeParts(e)},AvatarEditorCanvas.prototype.cancelParts=function(e){this.mDragonbone&&this.mDragonbone.cancelParts(e)},AvatarEditorCanvas.prototype.generateShopIcon=function(e,i){var n=this;return new Promise((function(a,s){var o=n.getScene(),c=n.mDragonbone.curSets;if(n.mGame.scene.getScene(n.SCENEKEY_SNAPSHOT))return l.Logger.getInstance().error("generating!"),void s("generating!");n.mGame.scale.resize(e,i),n.mGame.scene.add(n.SCENEKEY_SNAPSHOT,f,!1),o.scene.launch(n.SCENEKEY_SNAPSHOT,{onCreated:function(s){new h.a(s,n.mConfig.osd,n.mEmitter,!0,c,(function(s){s.generateShopIcon(e,i).then((function(e){a(e),n.mGame.scale.resize(n.mConfig.width,n.mConfig.height),n.mGame.scene.stop(n.SCENEKEY_SNAPSHOT),n.mGame.scene.remove(n.SCENEKEY_SNAPSHOT)}))}))}})}))},AvatarEditorCanvas.prototype.generateHeadIcon=function(e,i){var n=this;return new Promise((function(e,i){var a=n.getScene(),s=n.mDragonbone.curSets;if(n.mGame.scene.getScene(n.SCENEKEY_SNAPSHOT))return l.Logger.getInstance().error("generating!"),void i("generating!");n.mGame.scene.add(n.SCENEKEY_SNAPSHOT,f,!1),a.scene.launch(n.SCENEKEY_SNAPSHOT,{onCreated:function(i){n.mGame.scene.sendToBack(n.SCENEKEY_SNAPSHOT);new h.a(i,n.mConfig.osd,n.mEmitter,!1,s,(function(i){i.generateHeadIcon().then((function(i){e(i),n.mGame.scene.stop(n.SCENEKEY_SNAPSHOT),n.mGame.scene.remove(n.SCENEKEY_SNAPSHOT)}))}))}})}))},AvatarEditorCanvas.prototype.on=function(e,i,n){this.mEmitter.on(e,i,n)},AvatarEditorCanvas.prototype.off=function(e,i,n,a){this.mEmitter.off(e,i,n,a)},AvatarEditorCanvas}(o.a),f=function(e){function AvatarEditorScene(){return null!==e&&e.apply(this,arguments)||this}return c(AvatarEditorScene,e),AvatarEditorScene.prototype.preload=function(){l.Logger.getInstance().debug("AvatarEditorScene preload"),this.game.plugins.installScenePlugin("DragonBones",dragonBones.phaser.plugin.DragonBonesScenePlugin,"dragonbone",this,!0),this.load.image("avatar_placeholder",l.Url.getRes("dragonbones/avatar.png"))},AvatarEditorScene.prototype.init=function(e){this.onSceneCreated=e.onCreated,this.onSceneUpdate=e.onUpdate,this.onSceneDestroy=e.onDestroy},AvatarEditorScene.prototype.create=function(){this.onSceneCreated&&this.onSceneCreated(this)},AvatarEditorScene.prototype.update=function(){this.onSceneUpdate&&this.onSceneUpdate()},AvatarEditorScene.prototype.destroy=function(){this.onSceneDestroy&&this.onSceneDestroy()},AvatarEditorScene}(Phaser.Scene);!function(e){e.ERROR="error"}(s||(s={}))},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function EditorCanvas(e){this.mConfig=e,this.mGame=new Phaser.Game({parent:e.parent,type:Phaser.AUTO,backgroundColor:"#464646",render:{pixelArt:!0,roundPixels:!0,premultipliedAlpha:!1},plugins:{scene:[{key:"DragonBones",plugin:dragonBones.phaser.plugin.DragonBonesScenePlugin,mapping:"dragonbone"}]},scale:{mode:Phaser.Scale.NONE,width:e.width,height:e.height,autoCenter:Phaser.Scale.CENTER_BOTH}}),this.mEmitter=new Phaser.Events.EventEmitter}return EditorCanvas.prototype.resize=function(e,i){this.mGame&&this.mGame.scale.setGameSize(e,i)},EditorCanvas.prototype.destroy=function(){this.mGame&&(this.mGame.plugins.removeScenePlugin("DragonBones"),this.mGame.destroy(!0),this.mGame=null),this.mEmitter&&this.mEmitter.removeAllListeners()},EditorCanvas}()},,,,,,,,function(e,i,n){"use strict";var a,s,o,h,l;n.d(i,"a",(function(){return h})),function(e){e.LinkWorker="LinkWorker",e.CreateManager="CreateManager",e.CreateAccount="CreateAccount",e.InitWorld="InitWorld",e.StartConnect="StartConnect",e.Connected="Connected",e.RequestToken="RequestToken",e.GetToken="GetToken",e.EnterWorld="EnterWorld",e.PlayerInit="PlayerInit",e.LoadGameConfig="LoadGameConfig",e.CompleteDecodeConfig="CompleteDecodeConfig",e.GameCreate="GameCreate",e.EnterScene="EnterScene",e.SceneCreate="SceneCreate",e.RoomCreate="RoomCreate",e.RoomInfo="RoomInfo",e.Hidden="Hidden"}(a||(a={})),function(e){e[e.StartConnect=0]="StartConnect",e[e.Connect=1]="Connect",e[e.ReConnect=2]="ReConnect",e[e.CloseConnect=3]="CloseConnect",e[e.DisConnect=4]="DisConnect"}(s||(s={})),function(e){e[e.ScenePreLoad=0]="ScenePreLoad",e[e.SceneCreate=1]="SceneCreate",e[e.SceneChange=2]="SceneChange"}(o||(o={})),function(e){e.IDLE="idle",e.WALK="walk",e.RUN="run",e.ATTACK="attack",e.JUMP="jump",e.INJURED="injured",e.FAILED="failed",e.DANCE01="dance01",e.DANCE02="dance02",e.FISHING="fishing",e.GREET01="greet01",e.SIT="sit",e.LIE="lit",e.EMOTION01="emotion01"}(h||(h={})),function(e){e[e.CREATEWORLD=0]="CREATEWORLD",e[e.DESTROYWORLD=1]="DESTROYWORLD"}(l||(l={}))},function(e,i,n){"use strict";n.d(i,"d",(function(){return a})),n.d(i,"g",(function(){return c})),n.d(i,"e",(function(){return m})),n.d(i,"a",(function(){return f})),n.d(i,"b",(function(){return g})),n.d(i,"c",(function(){return _})),n.d(i,"f",(function(){return T}));var a,s=n(2),o=n(15),h=n(17),l=n(8);!function(e){e[e.TU_DING_COIN=0]="TU_DING_COIN",e[e.QING_SONG_TANG=1]="QING_SONG_TANG",e[e.GOLD_COIN=2]="GOLD_COIN",e[e.COIN=3]="COIN",e[e.DIAMOND=4]="DIAMOND"}(a||(a={}));var c=function(){function Url(){}return Url.getRes=function(e){if(e)try{return n(728)("./"+e).default}catch(e){return}},Url.getUIRes=function(e,i){if(i)try{return n(631)("./"+e+"x/"+i).default}catch(e){l.a.getInstance().error(i+" does not exist")}},Url.getNormalUIRes=function(e){try{return n(631)("./"+e).default}catch(i){l.a.getInstance().error(e+" does not exist")}},Url.getOsdRes=function(e){if(e)return Url.OSD_PATH?(s.HTTP_REGEX.test(Url.OSD_PATH),Url.OSD_PATH+e):e;l.a.getInstance().warn("splicing url failed")},Url.OSD_PATH="",Url.RES_PATH="",Url.RESUI_PATH="",Url.RESOURCE_ROOT="",Url}(),m=function(){function ResUtils(){}return ResUtils.getPartName=function(e){return e+"_png"},ResUtils.getPartUrl=function(e){return s.HTTP_REGEX.test(c.OSD_PATH),c.OSD_PATH+"avatar/part/"+e+".png"},ResUtils.getUsrAvatarTextureUrls=function(e){return{img:c.OSD_PATH+"user_avatar/texture/"+e+".png",json:c.OSD_PATH+"user_avatar/texture/"+e+".json"}},ResUtils.getGameConfig=function(e){return s.HTTP_REGEX.test(e)?e:c.OSD_PATH+e},ResUtils.getResRoot=function(e){return c.OSD_PATH?c.OSD_PATH+"/"+e:e},ResUtils}(),f=(function(){function BlackButton(){}BlackButton.getName=function(){return"black_button"},BlackButton.getPNG=function(){return c.getRes("ui/common/button.png")},BlackButton.getColumns=function(){return[4,2,4]},BlackButton.getRows=function(){return[4,2,4]},BlackButton.left=function(){return 4},BlackButton.top=function(){return 4},BlackButton.right=function(){return 4},BlackButton.bottom=function(){return 4},BlackButton.getConfig=function(){return{top:4,left:4,right:4,bottom:4}}}(),function(){function BlueButton(){}BlueButton.getName=function(){return"button_blue"},BlueButton.getPNG=function(){return c.getRes("ui/common/button_blue.png")},BlueButton.getJSON=function(){return c.getRes("ui/common/button_blue.json")},BlueButton.getColumns=function(){return[7,1,7]},BlueButton.getRows=function(){return[7,1,7]},BlueButton.left=function(){return 7},BlueButton.top=function(){return 7},BlueButton.right=function(){return 7},BlueButton.bottom=function(){return 7},BlueButton.getConfig=function(){return{left:7,top:7,right:7,bottom:7}}}(),function(){function WhiteButton(){}WhiteButton.getName=function(){return"button_white"},WhiteButton.getPNG=function(){return c.getRes("ui/common/button_white.png")},WhiteButton.getJSON=function(){return c.getRes("ui/common/button_white.json")},WhiteButton.getColumns=function(){return[7,1,7]},WhiteButton.getRows=function(){return[7,1,7]},WhiteButton.left=function(){return 7},WhiteButton.top=function(){return 7},WhiteButton.right=function(){return 7},WhiteButton.bottom=function(){return 7},WhiteButton.getConfig=function(){return{left:7,top:7,right:7,bottom:7}}}(),function(){function CloseButton(){}CloseButton.getName=function(){return"common_clsBtn"},CloseButton.getPNG=function(){return c.getRes("ui/common/common_clsBtn.png")},CloseButton.getJSON=function(){return c.getRes("ui/common/common_clsBtn.json")},CloseButton.getFrameConfig=function(){return{frameWidth:16,frameHeight:16,startFrame:1,endFrame:3}}}(),function(){function Background(){}return Background.getName=function(){return"common_background"},Background.getPNG=function(){return c.getRes("ui/common/common_panelBg.png")},Background.getColumns=function(){return[11,9,11]},Background.getRows=function(){return[14,13,14]},Background.left=function(){return 10},Background.top=function(){return 15},Background.right=function(){return 10},Background.bottom=function(){return 15},Background.getConfig=function(){return{left:10,top:15,right:10,bottom:15}},Background}()),g=function(){function Border(){}return Border.getName=function(){return"common_border"},Border.getPNG=function(){return c.getRes("ui/common/common_border.png")},Border.getColumns=function(){return[4,2,4]},Border.getRows=function(){return[4,2,4]},Border.left=function(){return 4},Border.top=function(){return 4},Border.right=function(){return 4},Border.bottom=function(){return 4},Border.getConfig=function(){return{left:4,top:4,right:4,bottom:4}},Border}(),_=(function(){function TransparentButton(){}TransparentButton.getName=function(){return"button_transparent"},TransparentButton.getPNG=function(){return c.getRes("ui/common/button_transparent.png")},TransparentButton.getJSON=function(){return c.getRes("ui/common/button_transparent.json")},TransparentButton.left=function(){return 4},TransparentButton.top=function(){return 4},TransparentButton.right=function(){return 4},TransparentButton.bottom=function(){return 4},TransparentButton.getConfig=function(){return{left:4,top:4,right:4,bottom:4}}}(),function(){function Coin(){}return Coin.getIcon=function(e){var i="tuding_icon",n=e;return n===a.COIN?i="iv_coin":n===a.DIAMOND?i="iv_diamond":n===a.GOLD_COIN||n===a.QING_SONG_TANG||a.TU_DING_COIN,i},Coin.getNewIcon=function(e){var i="tuding_icon",n=e;return n===a.COIN?i="home_silver":n===a.DIAMOND?i="home_diamond":n===a.GOLD_COIN||n===a.QING_SONG_TANG||a.TU_DING_COIN,i},Coin.getName=function(e){var i="银币",n=e;return n===a.COIN?i=h.a.t("coin.coin"):n===a.DIAMOND?i=h.a.t("coin.diamond"):n===a.GOLD_COIN?i=h.a.t("coin.gold_coin"):n===a.QING_SONG_TANG||a.TU_DING_COIN,i},Coin}()),T=function(){function UIHelper(){}return Object.defineProperty(UIHelper,"threeGreenNormal",{get:function(){return["butt_green_left","butt_green_middle","butt_green_right"]},enumerable:!1,configurable:!0}),Object.defineProperty(UIHelper,"threeRedNormal",{get:function(){return["butt_red_left","butt_red_middle","butt_red_right"]},enumerable:!1,configurable:!0}),Object.defineProperty(UIHelper,"threeYellowNormal",{get:function(){return["butt_yellow_left","butt_yellow_middle","butt_yellow_right"]},enumerable:!1,configurable:!0}),Object.defineProperty(UIHelper,"threeGreenSmall",{get:function(){return["butt_green_left_s","butt_green_middle_s","butt_green_right_s"]},enumerable:!1,configurable:!0}),Object.defineProperty(UIHelper,"threeRedSmall",{get:function(){return["butt_red_left_s","butt_red_middle_s","butt_red_right_s"]},enumerable:!1,configurable:!0}),Object.defineProperty(UIHelper,"threeYellowSmall",{get:function(){return["butt_yellow_left_s","butt_yellow_middle_s","butt_yellow_right_s"]},enumerable:!1,configurable:!0}),Object.defineProperty(UIHelper,"threeGraySmall",{get:function(){return["butt_gray_left_s","butt_gray_middle_s","butt_gray_right_s"]},enumerable:!1,configurable:!0}),Object.defineProperty(UIHelper,"threeGreenBig",{get:function(){return["butt_green_left_b","butt_green_middle_b","butt_green_right_b"]},enumerable:!1,configurable:!0}),Object.defineProperty(UIHelper,"threeRedBig",{get:function(){return["butt_red_left_b","butt_red_middle_b","butt_red_right_b"]},enumerable:!1,configurable:!0}),Object.defineProperty(UIHelper,"threeYellowBig",{get:function(){return["butt_yellow_left_b","butt_yellow_middle_b","butt_yellow_right_b"]},enumerable:!1,configurable:!0}),Object.defineProperty(UIHelper,"threeGrayBig",{get:function(){return["butt_gray_left_b","butt_gray_middle_b","butt_gray_right_b"]},enumerable:!1,configurable:!0}),UIHelper.colorStyle=function(e,i){return{fontSize:i,fontFamily:o.a.DEFULT_FONT,color:e}},UIHelper.colorNumberStyle=function(e,i){return{fontSize:i,fontFamily:o.a.NUMBER,color:e}},UIHelper.titleYellowStyle_m=function(e,i){return void 0===i&&(i=20),{fontSize:i*e,fontFamily:o.a.DEFULT_FONT,color:"#905B06"}},UIHelper.blackStyle=function(e,i){return void 0===i&&(i=12),{fontSize:i*e,fontFamily:o.a.DEFULT_FONT,color:"#000000"}},UIHelper.whiteStyle=function(e,i){return void 0===i&&(i=12),{fontSize:i*e,fontFamily:o.a.DEFULT_FONT,color:"#ffffff"}},UIHelper.brownishStyle=function(e,i){return void 0===i&&(i=12),{fontSize:i*e,fontFamily:o.a.DEFULT_FONT,color:"#996600"}},UIHelper.yellowStyle=function(e,i){return void 0===i&&(i=12),{fontSize:i*e,fontFamily:o.a.DEFULT_FONT,color:"#ffd136"}},UIHelper.redStyle=function(e,i){return void 0===i&&(i=12),{fontSize:i*e,fontFamily:o.a.DEFULT_FONT,color:"#E33922"}},UIHelper.blueStyle=function(e,i){return void 0===i&&(i=12),{fontSize:i*e,fontFamily:o.a.DEFULT_FONT,color:"#2B4BB5"}},UIHelper.background_w=function(e){return{left:50*e,top:30*e,right:30*e,bottom:95*e}},UIHelper.background_w_s=function(e){return{left:50*e,top:30*e,right:30*e,bottom:70*e}},UIHelper.background_n=function(e){return{left:30*e,top:40*e,right:30*e,bottom:40*e}},UIHelper.button=function(e){return{left:14*e,top:14*e,right:14*e,bottom:14*e}},UIHelper.spliceText=function(e,i,n,a){var s=this.Text(a,n),o=s.setText(i).width;if(o<=e)return i;for(var h=0;h<i.length;h++){var l=i.slice(0,h);if((o=s.setText(l).width)>e)return l+"..."}return i},UIHelper.Text=function(e,i){return this.mText||(this.mText=e.make.text({style:this.colorStyle("#ffffff",i)},!1)),this.mText},UIHelper.createSprite=function(e,i,n,a,s,o,h,l){void 0===o&&(o=30),void 0===h&&(h=0);var c=e.make.sprite({key:i,frame:a+"1"});c.visible=!1;var m=e.anims.create({key:n,frames:e.anims.generateFrameNames(i,{prefix:a+"",start:s[0],end:s[1]}),frameRate:o,repeat:h});return m.removeAllListeners(),m.on(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){c.visible=!1,l&&l.run()}),this),m.on(Phaser.Animations.Events.ANIMATION_START,(function(){c.visible=!0}),this),c},UIHelper.createMessageBoxConfig=function(e,i,n,a,s){return{text:[{text:e}],title:[{text:i}],button:[{text:h.a.t("common.cancel"),local:!0,param:0},{text:h.a.t("common.confirm"),local:!0,clickhandler:{key:n,clickfun:a},param:1,data:s}]}},UIHelper.createMessageBox=function(e,i,n,a,o,h,l){var c=UIHelper.createMessageBoxConfig(o,a,n,"messageboxcallback",l);i.messageboxcallback=h,e.mainPeer.showMediator(s.ModuleName.PICAMESSAGEBOX_NAME,!0,c)},UIHelper.playtPosYTween=function(e,i,n,a,s,o,h,l,c){void 0===s&&(s=500),void 0===o&&(o="Bounce.easeOut"),o=o||"Linear";var m=c?function(e,i){c&&c.runWith(i.value)}:void 0,f=e.tweens.add({targets:i,y:{from:n,to:a},ease:o,duration:s,delay:h,onComplete:function(){f.stop(),f.remove(),l&&l.run()},onUpdate:m});return f},UIHelper.playtPosXTween=function(e,i,n,a,s,o,h,l,c){void 0===s&&(s=500),void 0===o&&(o="Bounce.easeOut"),o=o||"Linear";var m=c?function(e,i){c&&c.runWith(i.value)}:void 0,f=e.tweens.add({targets:i,x:{from:n,to:a},ease:o,duration:s,delay:h,onComplete:function(){f.stop(),f.remove(),l&&l.run()},onUpdate:m});return f},UIHelper.playAlphaTween=function(e,i,n,a,s,o,h,l,c){void 0===s&&(s=500),o=o||"Linear";var m=c?function(e,i){c&&c.runWith(i.value)}:void 0,f=e.tweens.add({targets:i,alpha:{from:n,to:a},ease:o,duration:s,delay:h,onComplete:function(){f.stop(),f.remove(),l&&l.runWith(a)},onUpdate:m});return f},UIHelper.playScaleTween=function(e,i,n,a,s,o,h,l,c){void 0===s&&(s=500),void 0===o&&(o="Linear");var m=c?function(e,i){c&&c.runWith(i.value)}:void 0,f=e.tweens.add({targets:i,scaleX:{from:n,to:a},scaleY:{from:n,to:a},ease:o,duration:s,delay:h,onComplete:function(){f.stop(),f.remove(),l&&l.runWith(a)},onUpdate:m});return f},UIHelper}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function MessageType(){}return MessageType.CREATE_ROLE="create_role",MessageType.APP_START="app_start",MessageType.EDITOR_CHANGE_MODE="editor_change_mode",MessageType.CLIENT_RESIZE="app_client_resize",MessageType.SCENE_INITIALIZED="SCENE_INITIALIZED",MessageType.SCENE_CLEARED="SCENE_CLEARED",MessageType.SCENE_CHANGE_TO="SCENE_CHANGE_TO",MessageType.SCENE_MOVE_TO="scene_move_to",MessageType.SCENE_MOVE_STOP="scene_move_stop",MessageType.CHANGE_ELEMENT_ANIMATION="change_element_animation",MessageType.CHANGE_CHARACTER_ANIMATION="change_character_animation",MessageType.CHAT_TO="chat_to",MessageType.SHOW_CHAT_BUBBLE="show_chat_bubble",MessageType.REMOVE_CHAT_BUBBLE="remove_chat_bubble",MessageType.PROMPT_ALERT="prompt_alert",MessageType.CHARACTER_TALING="characterTaling",MessageType.CHARACTER_SHUT_UP="characterShutUp",MessageType.QCLOUD_AUTH="qcloud_auth",MessageType.ENTER_SCENE="enter_scene",MessageType.SCENE_ADD_PLAYER="scene_add_player",MessageType.SCENE_REMOVE_PLAYER="scene_remove_player",MessageType.SCENE_UPDATE_PLAYER="scene_update_player",MessageType.SCENE_ADD_ELEMENT="scene_add_element",MessageType.SCENE_ADD_TERRAIN="scene_add_terrain",MessageType.SCENE_ADD_TERRAIN_END="scene_add_terrain_end",MessageType.SCENE_ADD_ALL_TERRAIN="scene_add_all_terrain",MessageType.SCENE_REMOVE_ELEMENT="scene_remove_element",MessageType.SCENE_REMOVE_TERRAIN="scene_remove_terrain",MessageType.SCENE_REMOVE_ALL_TERRAIN="scene_remove_all_terrain",MessageType.SCENE_MOUSE_FOLLOW="scene_mouse_follow",MessageType.SCENE_SELECT_ELEMENT="scene_select_element",MessageType.SCENE_FIXED_TO_ELEMENT="scene_fixed_to_element",MessageType.SCENE_UPDATE_ELEMENT="sceneUpdateElement",MessageType.SCENE_SYNCHRO_PACKAGE="sceneSynchroPackage",MessageType.SCENE_VISIBLE_GRID="sceneVisibleGrid",MessageType.PLAYER_SELECT_CHARACTER="player_select_character",MessageType.PLAYER_DATA_INITIALIZE="player_data_initialize",MessageType.SCENE_DATA_INITIALIZE="scene_data_initialize",MessageType.PACKAGE_ITEM_ADD="package_item_add",MessageType.PACKAGE_ITEM_REMOVE="package_item_remove",MessageType.PACKAGE_EXCHANGE_ITEM_POS="package_exchange_item_pos",MessageType.SCENE_BACKGROUND_CLICK="SCENE_BACKGROUND_CLICK",MessageType.CHANGE_SELF_AVATAR="CHANGE_SELF_AVATAR",MessageType.DRAG_TO_DROP="DRAG_TO_DROP",MessageType.DRAG_OVER_DROP="DRAG_OVER_DROP",MessageType.QUERY_PACKAGE="query_package",MessageType.SYNC_USER_BALANCE="syncUserBalance",MessageType.UPDATED_CHARACTER_PACKAGE="updatedCharacterPackage",MessageType.SHOW_EFFECT="showEffect",MessageType.EDIT_MODE_QUERY_PACKAGE="editModeQueryPackage",MessageType.PRESS_ELEMENT="PRESS_ELEMENT",MessageType.TURN_ELEMENT="turnElement",MessageType.RECYCLE_ELEMENT="recycleElement",MessageType.PUT_ELEMENT="putElement",MessageType.CANCEL_PUT="cancelPut",MessageType.EDIT_PACKAGE_EXPANED="editPackageExpaned",MessageType.EDIT_PACKAGE_COLLAPSE="editPackageCollapse",MessageType.DECORATE_SELECTE_ELEMENT="decorateSelecteElement",MessageType.DECORATE_UNSELECT_ELEMENT="decorateUnselectElement",MessageType.DECORATE_UPDATE_SELECTED_ELEMENT_CAN_PLACE="decorateUpdateSelectedElementCanPlace",MessageType.DECORATE_UPDATE_SELECTED_ELEMENT_POSITION="decorateUpdateSelectedElementPosition",MessageType.DECORATE_UPDATE_ELEMENT_COUNT="decorateUpdateElementCount",MessageType.DECORATE_ELEMENT_CREATED="decorateElementCreated",MessageType.ADD_ICON_TO_TOP="addIconToTop",MessageType.REMOVE_ICON_FROM_TOP="removeIconFromTop",MessageType.SHOW_UI="showUI",MessageType.SHOW_NOTICE="showNotice",MessageType}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return s})),n.d(i,"b",(function(){return o}));var a=n(1),s=function(){function AvatarSuitType(){this.costume=["bodyCostId","bodyCostDresId","farmCostId","barmCostId","flegCostId","blegCostId"],this.hair=["headHairId","headHairBackId"],this.eye=["headEyesId"],this.mouse=["headMousId"],this.hat=["headHatsId"],this.mask=["headMaskId"],this.face=["headFaceId"],this.weapon=["barmWeapId"],this.shield=["farmShldId"],this.tail=["bodyTailId"],this.wing=["bodyWingId"],this.helmet=["headSpecId"],this.shell=["bodySpecId","farmSpecId","barmSpecId","flegSpecId","blegSpecId"],this.baseSuitType='[{"count":1,"id":"10001","sn":"5cd28238fb073710972a73c2","suit_type":"costume"},{"count":1,"id":"10002","sn":"5cd28238fb073710972a73c2","suit_type":"eye"},{"count":1,"id":"1003","sn":"5cd28238fb073710972a73c2","suit_type":"hair"},{"count":1,"id":"10004","sn":"5cd28238fb073710972a73c2","suit_type":"mouse"}]',this.base=["headBaseId","bodyBaseId","farmBaseId","barmBaseId","flegBaseId","blegBaseId"]}return AvatarSuitType.createAvatar=function(e,i){this.avatarSuit=this.avatarSuit||new AvatarSuitType,i=i||{};for(var n=0,a=e;n<a.length;n++)for(var s=a[n],o=this.avatarSuit[s.suit_type],h=this.checkSlotValue(s.suit_type,s.slot),l=0,c=o;l<c.length;l++){var m=c[l];-1!==h.indexOf(m)?i[m]={sn:s.sn,suit_type:s.suit_type,slot:s.slot,tag:s.tag,version:s.version}:i[m]={sn:"",suit_type:s.suit_type,slot:s.slot,tag:s.tag,version:s.version}}return i},AvatarSuitType.createAvatarBySn=function(e,i,n,a,s,o){this.avatarSuit=this.avatarSuit||new AvatarSuitType,o=o||{};for(var h=this.avatarSuit[e],l=this.checkSlotValue(e,n),c=0,m=h;c<m.length;c++){var f=m[c];-1!==l.indexOf(f)?o[f]={sn:i,suit_type:e,slot:n,tag:a,version:s}:o[f]={sn:"",suit_type:e,slot:n,tag:a,version:s}}return o},AvatarSuitType.createHasBaseAvatar=function(e){this.avatarSuit=this.avatarSuit||new AvatarSuitType;for(var i=this.createBaseAvatar(),n=0,a=e;n<a.length;n++){var s=a[n],o=this.avatarSuit[s.suit_type];if(o)for(var h=this.checkSlotValue(s.suit_type,s.slot),l=0,c=o;l<c.length;l++){var m=c[l];-1!==h.indexOf(m)?i[m]={sn:s.sn,suit_type:s.suit_type,slot:s.slot,tag:s.tag,version:s.version}:i[m]={sn:"",suit_type:s.suit_type,slot:s.slot,tag:s.tag,version:s.version}}}return i},AvatarSuitType.createHasBaseAvatarBySn=function(e,i,n,a,s){this.avatarSuit=this.avatarSuit||new AvatarSuitType;for(var o=this.createBaseAvatar(),h=this.avatarSuit[e],l=this.checkSlotValue(e,n),c=0,m=h;c<m.length;c++){var f=m[c];-1!==l.indexOf(f)?o[f]={sn:i,suit_type:e,slot:n,tag:a,version:s}:o[f]={sn:"",suit_type:e,slot:n,tag:a,version:s}}return o},AvatarSuitType.createBaseAvatar=function(){return this.avatarSuit=this.avatarSuit||new AvatarSuitType,new h},AvatarSuitType.hasAvatarSuit=function(e){if(e)for(var i=0,n=e;i<n.length;i++){var a=n[i];if("PKT_AVATAR_SUITS"===a.key&&a.value&&a.value.length>0&&JSON.parse(a.value).length>0)return!0}return!1},AvatarSuitType.checkSlotValue=function(e,i){if(!this.slotBitMap){this.slotBitMap=new Map;var n=a.op_def.AvatarSlot;for(var s in n)if("string"==typeof s){var o=this.toHumpName(s)+"Id";this.slotBitMap.set(o,n[s])}}var h=[],l=this.avatarSuit[e];if(l){for(var c=void 0===i||""===i?[]:i.split("#"),m=0;m<l.length;m++){var f=l[m],g=this.slotBitMap.get(f),_=1<<g%32,T=Math.floor(g/32);if(c.length>T){var x=c[T];(_&parseInt(atob(x),10))===_&&h.push(f)}else h.push(f)}return h}},AvatarSuitType.toHumpName=function(e){return e.replace(/([^_])(?:_+([^_]))/g,(function(e,i,n){return i+n.toUpperCase()}))},AvatarSuitType.getSuitsFromItem=function(e){for(var i=[],n=0,a=e;n<a.length;n++){var s=a[n],o={id:s.id,suit_type:s.suitType,slot:s.slot,tag:s.tag,sn:s.sn,version:s.version};i.push(o)}return{avatar:AvatarSuitType.createHasBaseAvatar(i),suits:i}},AvatarSuitType.suitPart={costume:["body_cost","body_cost_dres","farm_cost","barm_cost","fleg_cost","bleg_cost"],hair:["head_hair","head_hair_back"],eye:["head_eyes"],mouse:["head_mous"],hat:["head_hats"],mask:["head_mask"],face:["head_face"],weapon:["weap_farm","weap_barm"],shield:["shld_farm","shld_barm"],tail:["body_tail"],wing:["body_wing"],helmet:["head_spec"],shell:["body_spec","farm_spec","barm_spec","fleg_spec","bleg_spec"],base:["head_base","body_base","farm_base","barm_base","fleg_base","bleg_base"]},AvatarSuitType}(),o=function(){function SuitAlternativeType(){this.costume=1,this.hair=2,this.eye=4,this.mouse=8,this.hat=16,this.mask=32,this.face=64,this.weapon=128,this.shield=256,this.tail=512,this.wing=1024,this.helmet=126,this.shell=1537}return SuitAlternativeType.checkAlternative=function(e,i){this.suitAlternative=this.suitAlternative||new SuitAlternativeType;var n=this.suitAlternative[e],a=this.suitAlternative[i],s=n&a;return s===n||s===a},SuitAlternativeType}(),h=function h(){this.id="10000",this.barmBaseId={sn:"0001"},this.blegBaseId={sn:"0001"},this.bodyBaseId={sn:"0001"},this.farmBaseId={sn:"0001"},this.flegBaseId={sn:"0001"},this.headBaseId={sn:"0001"},this.headHairId={sn:"5cd28238fb073710972a73c2"},this.headEyesId={sn:"5cd28238fb073710972a73c2"},this.headMousId={sn:"5cd28238fb073710972a73c2"},this.bodyCostId={sn:"5cd28238fb073710972a73c2"}}},,,,,,function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function Handler(e,i,n,a){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=!1),this.once=!1,this._id=0,this.setTo(e,i,n,a)}return Handler.create=function(e,i,n,a){return void 0===n&&(n=null),void 0===a&&(a=!0),Handler._pool.length?Handler._pool.pop().setTo(e,i,n,a):new Handler(e,i,n,a)},Handler.prototype.setTo=function(e,i,n,a){return this._id=Handler._gid++,this.caller=e,this.method=i,this.args=n,this.once=a,this},Handler.prototype.run=function(){if(null==this.method)return null;var e=this._id,i=this.method.apply(this.caller,this.args);return this._id===e&&this.once&&this.recover(),i},Handler.prototype.runWith=function(e){if(null==this.method)return null;var i=this._id;if(null==e)var n=this.method.apply(this.caller,this.args);else n=this.args||e instanceof Array?this.args?this.method.apply(this.caller,this.args.concat(e)):this.method.apply(this.caller,e):this.method.call(this.caller,e);return this._id===i&&this.once&&this.recover(),n},Handler.prototype.clear=function(){return this.caller=null,this.method=null,this.args=null,this},Handler.prototype.recover=function(){this._id>0&&(this._id=0,Handler._pool.push(this.clear()))},Handler._pool=[],Handler._gid=1,Handler}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function LogicRectangle(e,i,n,a){this.x=0,this.y=0,this.width=0,this.height=0,void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),this.x=e,this.y=i,this.width=n,this.height=a}return Object.defineProperty(LogicRectangle.prototype,"left",{get:function(){return this.x},set:function(e){e>=this.right?this.width=0:this.width=this.right-e,this.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(LogicRectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(e){e<=this.x?this.width=0:this.width=e-this.x},enumerable:!1,configurable:!0}),Object.defineProperty(LogicRectangle.prototype,"top",{get:function(){return this.y},set:function(e){e>=this.bottom?this.height=0:this.height=this.bottom-e,this.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(LogicRectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(e){e<=this.y?this.height=0:this.height=e-this.y},enumerable:!1,configurable:!0}),LogicRectangle.prototype.contains=function(e,i){return!(this.width<=0||this.height<=0)&&(this.x<=e&&this.x+this.width>=e&&this.y<=i&&this.y+this.height>=i)},LogicRectangle}()},,,function(e,i,n){"use strict";n.d(i,"a",(function(){return g}));var a,s,o,h=n(0),l=n(14),c=n.n(l),m=n(4),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function AvatarEditorDragonbone(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.mAutoScale=!0,l.mCurAnimationName="idle",l.mCurDir=3,l.mBaseSets=[],l.mSets=[],l.mParts={},l.mArmatureBottomArea=0,l.mArmatureBottomArea_head=0,l.mWebHomePath=n,l.mEmitter=a,l.mAutoScale=s,i.add.container(0,0).add(l),o&&(l.mSets=o),h&&(l.mOnReadyForSnapshot=h),l.setBaseSets(AvatarEditorDragonbone.DEFAULT_SETS),l.createDisplays(),l}return f(AvatarEditorDragonbone,e),AvatarEditorDragonbone.prototype.destroy=function(){this.removeAll(!0),this.mDisplay_default&&(this.remove(this.mDisplay_default),this.mDisplay_default.destroy(),this.mDisplay_default=null),this.mDisplay_head&&(this.remove(this.mDisplay_head),this.mDisplay_head.destroy(),this.mDisplay_head=null),this.mCurAnimationName=null,this.mCurDir=null,this.mBaseSets&&(this.mBaseSets=[]),this.mBaseSets=null,this.mSets&&(this.mSets=[]),this.mSets=null,this.mParts={},this.mParts=null,e.prototype.destroy.call(this)},AvatarEditorDragonbone.prototype.loadLocalResources=function(e,i,n){var a=this;return new Promise((function(s,o){var h=a.partTextureSaveKey(i,e.key,n);a.scene.textures.exists(h)&&(a.scene.textures.remove(h),a.scene.textures.removeKey(h));var onLoad=function(e){h===e&&(a.scene.textures.off("onload",onLoad,a,!1),a.scene.textures.off(Phaser.Loader.Events.FILE_LOAD_ERROR,onLoadError,a),a.reloadDisplay(),s(e))},onLoadError=function(e){h===e&&(a.scene.textures.off("onload",onLoad,a,!1),a.scene.textures.off(Phaser.Loader.Events.FILE_LOAD_ERROR,onLoadError,a),o(e))};a.scene.textures.on("onload",onLoad,a),a.scene.textures.on(Phaser.Loader.Events.FILE_LOAD_ERROR,onLoadError,a),a.scene.textures.addBase64(h,e.url)}))},AvatarEditorDragonbone.prototype.setDir=function(e){var i=this.mCurAnimationName.split("_");this.mCurAnimationName=3===e?i[0]:i[0]+"_back",this.mCurDir=e,this.reloadDisplay()},AvatarEditorDragonbone.prototype.play=function(e){this.mCurAnimationName=e,this.mDisplay_default&&this.mDisplay_default.play({name:this.mCurAnimationName,flip:!1})},AvatarEditorDragonbone.prototype.clearParts=function(){this.mSets&&(this.mSets=[]),this.setBaseSets(AvatarEditorDragonbone.DEFAULT_SETS),this.reloadDisplay()},AvatarEditorDragonbone.prototype.mergeParts=function(e){this.addSets(e),this.reloadDisplay()},AvatarEditorDragonbone.prototype.cancelParts=function(e){this.removeSets(e),this.reloadDisplay()},AvatarEditorDragonbone.prototype.generateShopIcon=function(e,i){var n=this;return new Promise((function(a,s){if(0!==e&&0!==i){var o=n.getSnapshotModelData();o.armature?n.snapshot({x:0,y:0,width:e,height:i},o).then((function(e){h.Logger.getInstance().log("shop icon: ",e),a(e)})).catch((function(e){s(e)})):s("no armature")}else s("width and height must not be 0")}))},AvatarEditorDragonbone.prototype.generateHeadIcon=function(){var e=this;return new Promise((function(i,n){if(e.mDisplay_default)if(AvatarEditorDragonbone.HEAD_ICON_DEFAULT_SNAPSHOT_TOTAL_HEIGHT>e.scene.scale.height)n("game size is not enough, must larger than "+AvatarEditorDragonbone.HEAD_ICON_DEFAULT_SNAPSHOT_TOTAL_HEIGHT);else{var a={armature:e.mDisplay_default,x:AvatarEditorDragonbone.HEAD_ICON_WIDTH/2,y:AvatarEditorDragonbone.HEAD_ICON_DEFAULT_BOTTOM_PIX,baseSets:AvatarEditorDragonbone.DEFAULT_SETS};e.snapshot({x:0,y:AvatarEditorDragonbone.HEAD_ICON_DEFAULT_SNAPSHOT_TOTAL_HEIGHT-AvatarEditorDragonbone.HEAD_ICON_HEIGHT,width:AvatarEditorDragonbone.HEAD_ICON_WIDTH,height:AvatarEditorDragonbone.HEAD_ICON_HEIGHT},a).then((function(e){i(e)})).catch((function(e){n(e)}))}else n("no armature")}))},Object.defineProperty(AvatarEditorDragonbone.prototype,"curSets",{get:function(){return this.mSets},enumerable:!1,configurable:!0}),AvatarEditorDragonbone.prototype.createDisplays=function(){this.mDisplay_default&&this.mDisplay_default.destroy(),this.mDisplay_head&&this.mDisplay_head.destroy();var e=this.scene.scale.height;this.mArmatureBottomArea=AvatarEditorDragonbone.DEFAULT_SCALE_BOTTOM_PIX*e/AvatarEditorDragonbone.DEFAULT_SCALE_GAME_HEIGHT,this.mDisplay_default=new _(this.scene,AvatarEditorDragonbone.DRAGONBONE_NAME_DEFAULT,this.mWebHomePath),this.mDisplay_default.play({name:this.mCurAnimationName,flip:!1}),this.mAutoScale&&(this.mDisplay_default.scale=e/AvatarEditorDragonbone.DEFAULT_SCALE_GAME_HEIGHT),this.mDisplay_default.x=this.scene.scale.width>>1,this.mDisplay_default.y=this.scene.scale.height-this.mArmatureBottomArea,this.add(this.mDisplay_default),this.mArmatureBottomArea_head=this.mArmatureBottomArea-AvatarEditorDragonbone.ARMATURE_LEG_PERCENT*AvatarEditorDragonbone.ARMATURE_HEIGHT*e/AvatarEditorDragonbone.DEFAULT_SCALE_GAME_HEIGHT,this.mDisplay_head=new _(this.scene,AvatarEditorDragonbone.DRAGONBONE_NAME_HEAD,this.mWebHomePath),this.mAutoScale&&(this.mDisplay_head.scale=e/AvatarEditorDragonbone.DEFAULT_SCALE_GAME_HEIGHT),this.mDisplay_head.x=this.scene.scale.width>>1,this.mDisplay_head.y=this.scene.scale.height-this.mArmatureBottomArea_head+1e3,this.add(this.mDisplay_head),this.reloadDisplay()},AvatarEditorDragonbone.prototype.setBaseSets=function(e){this.mBaseSets&&(this.mBaseSets=[]),this.mBaseSets=e,this.applySets(!0)},AvatarEditorDragonbone.prototype.addSets=function(e){for(var i=[],_loop_1=function(e){if(n.mSets.findIndex((function(i){return i.id===e.id&&JSON.stringify(i.parts)===JSON.stringify(e.parts)}))>=0)return"continue";i.push(JSON.parse(JSON.stringify(e)))},n=this,a=0,s=e;a<s.length;a++){_loop_1(l=s[a])}for(var o=0,h=i;o<h.length;o++){var l=h[o];for(var c in AvatarEditorDragonbone.HAIR_BACK)if(AvatarEditorDragonbone.HAIR_BACK.hasOwnProperty(c))for(var m=0,f=l.parts;m<f.length;m++){var g=f[m];g===c&&(this.removePartsInSets(AvatarEditorDragonbone.HAIR_BACK[g],this.mSets),this.removePartsInCurParts(AvatarEditorDragonbone.HAIR_BACK[g]))}}this.mSets=this.mSets.concat(i),this.applySets()},AvatarEditorDragonbone.prototype.applySets=function(e){if(void 0===e&&(e=!1),e){this.mParts={};for(var i=0,n=AvatarEditorDragonbone.ADD_PARTS;i<n.length;i++){var a=n[i];this.mParts[a]=null}for(var s=0,o=this.mBaseSets;s<o.length;s++)for(var h=0,l=(T=o[s]).parts;h<l.length;h++){a=l[h];this.mParts[a]=T}}for(var c=0,m=this.mSets;c<m.length;c++)for(var f=0,g=(T=m[c]).parts;f<g.length;f++){a=g[f];this.mParts[a]=T}for(var _ in this.mParts){var T;if((T=this.mParts[_])&&AvatarEditorDragonbone.SPECIAL_SETS.hasOwnProperty(_))for(var x=0,S=AvatarEditorDragonbone.SPECIAL_SETS[_];x<S.length;x++){var j=S[x];this.mParts[j]=null}}},AvatarEditorDragonbone.prototype.removeSets=function(e){for(var _loop_2=function(e){var n=i.mSets.findIndex((function(i){return i.id===e.id}));n>=0&&i.mSets.splice(n,1);for(var a=0,s=["1","3"];a<s.length;a++)for(var o=s[a],h=0,l=e.parts;h<l.length;h++){var c=l[h],m=i.partTextureSaveKey(c,e.id,o,e.version);i.scene.textures.exists(m)&&(i.scene.textures.remove(m),i.scene.textures.removeKey(m))}},i=this,n=0,a=e;n<a.length;n++){_loop_2(a[n])}this.applySets(!0)},AvatarEditorDragonbone.prototype.reloadDisplay=function(){var e=this;return new Promise((function(i,n){var a=e.convertPartsToIDragonbonesModel(e.mParts);e.mDisplay_default.load(a,void 0,!1).then((function(){return e.mDisplay_head.load(a,void 0,!1)})).then((function(){i(null),e.mOnReadyForSnapshot&&(e.mOnReadyForSnapshot(e),e.mOnReadyForSnapshot=null)})).catch((function(e){e&&h.Logger.getInstance().error("reload display error: ",e)})),e.mDisplay_default.play({name:e.mCurAnimationName,flip:!1})}))},AvatarEditorDragonbone.prototype.partTextureSaveKey=function(e,i,n,a){var s=e+"_"+i+"_"+n;return void 0!==a&&a.length>0&&(s=s+"_"+a),s=h.ResUtils.getPartName(s)},AvatarEditorDragonbone.prototype.removePartsInSets=function(e,i){for(var n=0,a=i;n<a.length;n++)for(var s=a[n],o=0,h=e;o<h.length;o++){var l=h[o],c=s.parts.indexOf(l);c>=0&&s.parts.splice(c,1)}return i},AvatarEditorDragonbone.prototype.removePartsInCurParts=function(e){for(var i=0,n=e;i<n.length;i++){var a=n[i];this.mParts.hasOwnProperty(a)&&delete this.mParts[a]}},AvatarEditorDragonbone.prototype.getSnapshotModelData=function(){for(var e=0,i=this.mSets;e<i.length;e++)for(var n=0,a=i[e].parts;n<a.length;n++){var s=a[n];if(AvatarEditorDragonbone.BOTTOM_BODY_PARTS.indexOf(s)>=0)return{armature:this.mDisplay_default,x:this.mDisplay_default.x,y:this.mArmatureBottomArea,baseSets:AvatarEditorDragonbone.MODEL_SETS}}return{armature:this.mDisplay_head,x:this.mDisplay_default.x,y:this.mArmatureBottomArea_head,baseSets:AvatarEditorDragonbone.MODEL_SETS}},AvatarEditorDragonbone.prototype.snapshot=function(e,i){var n=this;return new Promise((function(a,s){n.setBaseSets(i.baseSets),n.reloadDisplay().then((function(){var o=n.scene.scale.width,l=n.scene.scale.height;h.Logger.getInstance().debug("ZW-- start snapshot, gameSize: "+o+"*"+l+", setSize: "+e.width+"*"+e.height);var c=n.scene.make.renderTexture({x:0,y:0,width:o,height:l},!1);i.armature.scaleY*=-1;var m=i.armature.getDisplay();m||s("display does not exist"),m.armature.advanceTime(1e3),c.draw(i.armature,i.x,i.y),c.snapshotArea(e.x,e.y,e.width,e.height,(function(e){i.armature.scaleY*=-1,n.setBaseSets(AvatarEditorDragonbone.DEFAULT_SETS),n.reloadDisplay().then((function(){a(e.src),h.Logger.getInstance().log("snapshot result: ",e.src)}))}))})).catch((function(){s("replaceDisplay error")}))}))},AvatarEditorDragonbone.prototype.convertPartsToIDragonbonesModel=function(e){for(var i={id:"0"},n=0,a=[].concat(AvatarEditorDragonbone.BASE_PARTS,AvatarEditorDragonbone.ADD_PARTS);n<a.length;n++){var s=a[n];if(e.hasOwnProperty(s)){var o=e[s];if(o)i[this.convertPartNameToIAvatarKey(s)]={sn:o.id,version:o.version}}}return{id:0,avatar:i}},AvatarEditorDragonbone.prototype.convertPartNameToIAvatarKey=function(e){for(var i=e.split("_"),n=i[0],a=1;a<i.length;a++){var s=i[a];n+=s.charAt(0).toUpperCase()+s.slice(1)}return n+="Id"},AvatarEditorDragonbone.DRAGONBONE_NAME_DEFAULT="bones_human01",AvatarEditorDragonbone.DRAGONBONE_NAME_HEAD="bones_model_head",AvatarEditorDragonbone.DRAGONBONE_ARMATURE_NAME="Armature",AvatarEditorDragonbone.BASE_PARTS=["body_base","barm_base","farm_base","bleg_base","fleg_base","head_base"],AvatarEditorDragonbone.ADD_PARTS=["barm_cost","barm_spec","bleg_cost","bleg_spec","body_cost","body_cost_dres","body_spec","body_tail","body_wing","farm_cost","farm_spec","fleg_cost","fleg_spec","head_eyes","head_hair","head_mous","head_hair_back","head_hats","head_mask","head_spec","head_face","barm_shld","farm_shld","barm_weap","farm_weap"],AvatarEditorDragonbone.BOTTOM_BODY_PARTS=["body_cost","body_cost_dres","farm_cost","barm_cost","fleg_cost","bleg_cost","barm_weap","farm_weap","barm_shld","farm_shld","body_tail","body_wing","body_spec","farm_spec","barm_spec","fleg_spec","bleg_spec"],AvatarEditorDragonbone.HAIR_BACK=((s={}).head_hair=["head_hair","head_hair_back"],s.body_cost=["body_cost","body_cost_dres"],s),AvatarEditorDragonbone.DEFAULT_SETS=[{id:"0001",parts:AvatarEditorDragonbone.BASE_PARTS},{id:"5cd28238fb073710972a73c2",parts:["head_hair","head_eyes","head_mous","body_cost"]}],AvatarEditorDragonbone.SPECIAL_SETS=((o={}).head_spec=["head_eyes","head_hair","head_mous","head_hair_back","head_hats","head_mask","head_face","head_base"],o.body_spec=["body_cost","body_cost_dres","body_tail","body_wing","body_base"],o.farm_spec=["farm_cost","farm_shld","farm_weap","farm_base"],o.barm_spec=["barm_cost","barm_shld","barm_weap","barm_base"],o.fleg_spec=["fleg_cost","fleg_base"],o.bleg_spec=["bleg_cost","bleg_base"],o),AvatarEditorDragonbone.MODEL_SETS=[{id:"5fbf562e72c7db2dbdcdb4ea",parts:AvatarEditorDragonbone.BASE_PARTS}],AvatarEditorDragonbone.DEFAULT_SCALE_GAME_HEIGHT=72,AvatarEditorDragonbone.DEFAULT_SCALE_BOTTOM_PIX=4,AvatarEditorDragonbone.ARMATURE_HEIGHT=61,AvatarEditorDragonbone.ARMATURE_LEG_PERCENT=.15,AvatarEditorDragonbone.HEAD_ICON_HIDE_PIX=22,AvatarEditorDragonbone.HEAD_ICON_WIDTH=71,AvatarEditorDragonbone.HEAD_ICON_HEIGHT=57,AvatarEditorDragonbone.HEAD_ICON_DEFAULT_SNAPSHOT_TOTAL_HEIGHT=79,AvatarEditorDragonbone.HEAD_ICON_DEFAULT_BOTTOM_PIX=0,AvatarEditorDragonbone}(Phaser.GameObjects.Container),_=function(e){function EditorDragonbonesDisplay(i,n,a){var s=e.call(this,i)||this;return s.mWebHomePath=a,s.resourceName=n,s}return f(EditorDragonbonesDisplay,e),Object.defineProperty(EditorDragonbonesDisplay.prototype,"localResourceRoot",{get:function(){return"./resources_v"+c.a+"/"},enumerable:!1,configurable:!0}),EditorDragonbonesDisplay.prototype.partNameToLoadUrl=function(e){return this.mWebHomePath+"/avatar/part/"+e+".png"},EditorDragonbonesDisplay}(m.BaseDragonbonesDisplay)},,function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=/^(http|https):/i},function(e,i,n){"use strict";var a,s;n.d(i,"b",(function(){return a})),n.d(i,"a",(function(){return s})),function(e){e.Null="null",e.Friend="friend",e.Fans="fans",e.Followed="followed",e.Blacklist="blacklist"}(a||(a={})),function(e){e[e.Friends=0]="Friends",e[e.Fans=1]="Fans",e[e.Followes=2]="Followes",e[e.Blacklist=3]="Blacklist",e[e.Search=4]="Search",e[e.Menu=5]="Menu",e[e.Notice=6]="Notice",e[e.Null=7]="Null"}(s||(s={}))},,,,,,,,function(e,i,n){"use strict";var a;n.d(i,"a",(function(){return a})),function(e){e[e.north=0]="north",e[e.north_west=1]="north_west",e[e.west=2]="west",e[e.west_south=3]="west_south",e[e.south=4]="south",e[e.south_east=5]="south_east",e[e.east=6]="east",e[e.east_north=7]="east_north",e[e.concave=17]="concave",e[e.convex=35]="convex"}(a||(a={}));!function(){function DirectionChecker(){}DirectionChecker.check=function(e,i){var n=Math.atan2(i.y-e.y,i.x-e.x)*(180/Math.PI);return n>90?3:n>=0?5:n>=-90?7:1}}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return load}));var a=n(8);function load(e,i){return new Promise((function(n,s){var o=new XMLHttpRequest;o.addEventListener("error",(function(){a.a.getInstance().log("http error =============>>>>")})),o.timeout=2e4,o.onload=function(i){var a=i.currentTarget;a&&200===a.status?n(i.currentTarget):s(e+" load error "+a.status)},o.onerror=function(){console.log("http error ====>"),s(e+" load error!!!!!")},o.ontimeout=function(i){console.log("http timeout ====>"),s(e+" load ontimeout!!!!!")},o.open("GET",e,!0),o.responseType=i||"",o.send()}))}},,,,,,,function(e,i,n){"use strict";n.r(i),n.d(i,"DynamicImage",(function(){return h}));var a,s=n(0),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function DynamicImage(i,n,a,s,o){return e.call(this,i,n,a,s,o)||this}return o(DynamicImage,e),DynamicImage.prototype.load=function(e,i,n,a){if(!e)return s.Logger.getInstance().error("load value is undefined");this.mLoadCompleteCallbak=n,this.mLoadErrorCallback=a,this.mLoadContext=i,this.scene?(this.mUrl=e,this.scene.textures.exists(e)?this.onLoadComplete(e):(this.scene.load.image(e,e),this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE,this.onLoadComplete,this),this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.onLoadError,this),this.scene.load.start())):s.Logger.getInstance().fatal(DynamicImage.name+" Create failed does not exist")},DynamicImage.prototype.destroy=function(i){void 0===i&&(i=!1),this.mLoadCompleteCallbak=null,this.mLoadContext=null,this.mLoadErrorCallback=null,this.mUrl="",this.scene&&(this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE,this.onLoadComplete,this),this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,this.onLoadError,this)),e.prototype.destroy.call(this,i)},DynamicImage.prototype.onLoadComplete=function(e){if(e===this.mUrl&&(this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE,this.onLoadComplete,this),this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,this.onLoadError,this),this.setTexture(this.mUrl),this.mLoadCompleteCallbak)){var i=this.mLoadCompleteCallbak;this.mLoadCompleteCallbak=null,i.call(this.mLoadContext),this.mLoadContext=null}},DynamicImage.prototype.onLoadError=function(e){if(this.mUrl===e.url&&this.mLoadErrorCallback){var i=this.mLoadErrorCallback;this.mLoadErrorCallback=null,i.call(this.mLoadContext),this.mLoadContext=null}},DynamicImage}(Phaser.GameObjects.Image)},,function(e,i,n){"use strict";n.d(i,"a",(function(){return c}));var a,s=n(0),o=n(2),h=n(71),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},c=function(){function BlockManager(e,i){if(this.render=i,this.mRows=1,this.mCols=1,this.mSceneName="",this.mGrids=[],this.mScenery=e,this.mUris=e.uris,this.mCameras=i.camerasManager,this.mMainCamera=this.mCameras.camera,this._bound=this.mMainCamera.getBounds(),this.mScaleRatio=this.render.scaleRatio,this.setSize(e.width,e.height),i.getMainScene()){this.mSceneName="SkyBoxScene_"+e.id;var n=this.render.sceneManager;n||s.Logger.getInstance().fatal("scene manager does not exist"),n.launchScene(n.getMainScene(),this.mSceneName,"SkyBoxScene",this),this.updateDepth()}else s.Logger.getInstance().fatal(BlockManager.name+" scene does not exist")}return BlockManager.prototype.startPlay=function(e){var i=this;this.scene=e,this.initBlock(),this.mStateMap&&this.mStateMap.forEach((function(e){return i.handlerState(e)}))},BlockManager.prototype.check=function(e,i){for(var n=this.mMainCamera.worldView,a=new Phaser.Geom.Rectangle(n.x-n.width/2,n.y-n.height/2,2*n.width,2*n.height),s=0,o=this.mGrids;s<o.length;s++){var h=o[s];h.checkCamera(Phaser.Geom.Intersects.RectangleToRectangle(a,h.rectangle))}},BlockManager.prototype.update=function(e){this.mScenery=e,this.mUris=e.uris,this.setSize(e.width,e.height),this.initBlock(),this.updateDepth()},BlockManager.prototype.setSize=function(e,i,n,a){if(0!==this.mUris.length){var s=1,o=1;(this.mUris.length>1||this.mUris[0].length>1)&&(s=e/1024,o=i/1024),this.mCols=Math.round(s),this.mRows=Math.round(o),this.mGridWidth=e/this.mCols,this.mGridHeight=i/this.mRows}},BlockManager.prototype.resize=function(e,i){if(this.scene&&this.mMainCamera){var n=this.scene.cameras.main;if(n){this.mScaleRatio=this.render.scaleRatio,this.updatePosition(),this._bound=this.mMainCamera.getBounds(),n.setBounds(this._bound.x,this._bound.y,this._bound.width,this._bound.height);for(var a=0,s=this.mGrids;a<s.length;a++){var o=s[a];o.setScaleRatio(this.mScaleRatio),o.resize(e,i)}}}},BlockManager.prototype.updateScale=function(e){this.mContainer.setScale(e);for(var i=0,n=this.mGrids;i<n.length;i++){n[i].setScaleRatio(e)}this.updatePosition()},BlockManager.prototype.getLayer=function(){return this.mContainer},BlockManager.prototype.updatePosition=function(){return __awaiter(this,void 0,void 0,(function(){var e,i,n,a,s;return __generator(this,(function(o){switch(o.label){case 0:return e=this.scene.cameras.main,i=this.mScenery.offset,[4,this.fixPosition({x:i.x,y:i.y})];case 1:for(n=o.sent(),e.setPosition(n.x,n.y),a=0,s=this.mGrids;a<s.length;a++)s[a].updatePosition();return[2]}}))}))},BlockManager.prototype.destroy=function(){this.render&&this.render.game&&this.render.game.scene.remove(this.mSceneName),this.mGrids.length=0},BlockManager.prototype.setState=function(e){this.handlerState(e)},BlockManager.prototype.playSkyBoxAnimation=function(e){return __awaiter(this,void 0,void 0,(function(){var i,n,a,s,o,h,l,c;return __generator(this,(function(m){switch(m.label){case 0:return i=e.id,n=e.targets,a=e.duration,s=e.reset,o=e.resetDuration,void 0===i||void 0===n||void 0===a?[2]:this.scene?i!==this.mScenery.id?[2]:(h=this.scene.cameras.main,[4,this.fixPosition(n)]):[2];case 1:return l=m.sent(),[4,this.fixPosition(s)];case 2:return c=m.sent(),this.move(h,l,a,c,o),[2]}}))}))},BlockManager.prototype.handlerState=function(e){for(var i=0,n=e;i<n.length;i++){var a=n[i];this.mScenery.id===a.id&&this.playSkyBoxAnimation(a)}},BlockManager.prototype.updateDepth=function(){if(this.render){var e=this.render.getMainScene();if(this.mScenery&&e){var i=this.render.game.scene.getScene(this.mSceneName);i&&(this.mScenery.depth<0?i.scene.sendToBack(this.mSceneName):i.scene.moveAbove(e.sys.settings.key,this.mSceneName))}else s.Logger.getInstance().fatal("scene does not exist")}},BlockManager.prototype.initBlock=function(){this.clear(),this.mContainer=this.scene.add.container(0,0),this.mContainer.setScale(this.render.scaleRatio);var e=this.mUris.length;if(this.mScenery.fit===o.Fit.Repeat);else for(var i=0;i<e;i++)for(var n=this.mUris[i].length,a=0;a<n;a++){var s=new m(this.scene,this.mUris[i][a],this.mScaleRatio);s.setRectangle(a*this.mGridWidth,i*this.mGridHeight,this.mGridWidth,this.mGridHeight),this.mGrids.push(s)}this.mContainer.add(this.mGrids),this.initCamera()},BlockManager.prototype.move=function(e,i,n,a,o){var h=this;this.tween&&(this.tween.stop(),this.tween.removeAllListeners()),s.Logger.getInstance().debug("scenery: ",i,n),this.tween=this.scene.tweens.add({targets:e,props:i,duration:n,loop:-1,onUpdate:function(){for(var e=0,i=h.mGrids;e<i.length;e++){i[e].updatePosition()}}}),a&&this.tween.once("loop",(function(){a&&(e.x=a.x,e.y=a.y),h.tween.stop(),h.move(e,i,o)}))},BlockManager.prototype.initCamera=function(){var e=this.scene.cameras.main;this.mCameras&&(e.setBounds(this._bound.x,this._bound.y,this._bound.width,this._bound.height),this.updatePosition(),e.setScroll(this.mMainCamera.scrollX,this.mMainCamera.scrollY),this.mCameras.addCamera(e))},BlockManager.prototype.clear=function(){for(var e=0,i=this.mGrids;e<i.length;e++){i[e].destroy()}this.mGrids.length=0,this.mContainer&&this.mContainer.destroy(!0)},Object.defineProperty(BlockManager.prototype,"scenery",{get:function(){return this.mScenery},enumerable:!1,configurable:!0}),Object.defineProperty(BlockManager.prototype,"scaleRatio",{get:function(){return this.mScaleRatio},enumerable:!1,configurable:!0}),BlockManager.prototype.fixPosition=function(e){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(n){switch(n.label){case 0:return e?[4,this.getOffset()]:[2];case 1:return i=n.sent(),void 0!==e.x&&(e.x=(i.x+e.x)*this.render.scaleRatio),void 0!==e.y&&(e.y=(i.y+e.y)*this.render.scaleRatio),[2,e]}}))}))},BlockManager.prototype.getOffset=function(){return __awaiter(this,void 0,void 0,(function(){var e,i,n,a,s,h;return __generator(this,(function(l){switch(l.label){case 0:return{x:0,y:0},e=0,i=0,this.mScenery?this.mScenery.fit!==o.Fit.Center?[3,2]:[4,this.render.getCurrentRoomSize()]:[3,2];case 1:n=l.sent(),a=this.mScenery,s=a.width,h=a.height,e=-s>>1,i=n.sceneHeight-h>>1,l.label=2;case 2:return[2,Promise.resolve({x:e,y:i})]}}))}))},BlockManager}(),m=function(e){function Block(i,n,a){var s=e.call(this,i,0,0)||this;return s.mLoaded=!1,s.mInCamera=!1,s.mKey=n,s.mScale=a,s.setOrigin(0),s}return l(Block,e),Block.prototype.checkCamera=function(e){this.mInCamera!==e&&(this.mInCamera=e,this.visible=e,this.mLoaded||this.load(s.Url.getOsdRes(this.mKey)))},Block.prototype.setRectangle=function(e,i,n,a){this.x=e,this.y=i,this.setSize(n,a);var s=this.scene.cameras.main;this.mRectangle=new Phaser.Geom.Rectangle(e*this.mScale+s.x,i*this.mScale+s.y,n*this.mScale,a*this.mScale)},Block.prototype.updatePosition=function(){if(this.mRectangle){var e=this.scene.cameras.main;this.mRectangle.x=this.x*this.mScale+e.x,this.mRectangle.y=this.y*this.mScale+e.y}},Block.prototype.resize=function(e,i){var n=this.scene.cameras.main;this.mRectangle=new Phaser.Geom.Rectangle(this.x*this.mScale+n.x,this.y*this.mScale+n.y,this.width*this.mScale,this.height*this.mScale)},Block.prototype.setScaleRatio=function(e){this.mScale=e},Object.defineProperty(Block.prototype,"rectangle",{get:function(){return this.mRectangle},enumerable:!1,configurable:!0}),Object.defineProperty(Block.prototype,"key",{get:function(){return this.mKey},enumerable:!1,configurable:!0}),Block.prototype.onLoadComplete=function(i){e.prototype.onLoadComplete.call(this,i),this.texture&&(this.mLoaded=!0,this.texture.setFilter(Phaser.Textures.FilterMode.NEAREST))},Block}(h.DynamicImage)},function(e,i,n){"use strict";n.d(i,"a",(function(){return o}));var a,s=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),o=function(e){function PlayCamera(i,n,a,s,o,h){var l=e.call(this,i,n,a,s)||this;return l.pixelRatio=o,l.moveRatio=h||1,l}return s(PlayCamera,e),PlayCamera.prototype.setPixelRatio=function(e){this.pixelRatio=e},PlayCamera.prototype.startFollow=function(e,i,n,a,s,o){void 0===i&&(i=!1),void 0===n&&(n=1),void 0===a&&(a=n),void 0===s&&(s=0),void 0===o&&(o=s),this._follow=e,this.roundPixels=i,this.lerp.set(n,a),this.followOffset.set(s,o);var h=this.width/2,l=this.height/2,c=this._follow.getPosition(),m=c.x*this.pixelRatio*this.moveRatio-s,f=c.y*this.pixelRatio*this.moveRatio-o;return this.midPoint.set(m,f),this.scrollX=m-h,this.scrollY=f-l,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},PlayCamera.prototype.preRender=function(e){var i=this.width,n=this.height,a=.5*i,s=.5*n,o=this.zoom*e,h=this.matrix,l=i*this.originX,c=n*this.originY,m=this._follow,f=this.deadzone,g=this.scrollX,_=this.scrollY;if(m&&!this.panEffect.isRunning){var T=m.getPosition(),x=T.x*this.pixelRatio*this.moveRatio-this.followOffset.x,S=T.y*this.pixelRatio*this.moveRatio-this.followOffset.y;f?(x<f.x?g=this.linear(g,g-(f.x-x),this.lerp.x):x>f.right&&(g=this.linear(g,g+(x-f.right),this.lerp.x)),S<f.y?_=this.linear(_,_-(f.y-S),this.lerp.y):S>f.bottom&&(_=this.linear(_,_+(S-f.bottom),this.lerp.y))):(g=this.linear(g,x-l,this.lerp.x),_=this.linear(_,S-c,this.lerp.y))}this.useBounds&&(g=this.clampX(g),_=this.clampY(_)),this.roundPixels&&(l=Math.round(l),c=Math.round(c)),this.scrollX=g,this.scrollY=_;var j=g+a,q=_+s;this.midPoint.set(j,q);var Y=i/o,X=n/o;this.worldView.setTo(j-Y/2,q-X/2,Y,X),h.applyITRS(this.x+l,this.y+c,this.rotation,o,o),h.translate(-l,-c),this.shakeEffect.preRender()},PlayCamera.prototype.linear=function(e,i,n){return(i-e)*n+e},PlayCamera}(Phaser.Cameras.Scene2D.Camera)},function(e,i,n){"use strict";var a,s;n.d(i,"a",(function(){return a})),n.d(i,"b",(function(){return s})),function(e){e[e.BACKEND=0]="BACKEND",e[e.STAGE=1]="STAGE",e[e.FRONTEND=2]="FRONTEND",e[e.FLAG=3]="FLAG",e[e.Effect=4]="Effect"}(a||(a={})),function(e){e[e.TQ_NickName=65536]="TQ_NickName",e[e.TQ_Badge=131072]="TQ_Badge"}(s||(s={}))},function(e,i,n){"use strict";var a;n.d(i,"a",(function(){return a})),function(e){e.PC="pc",e.APP="app",e.NOPC="nopc"}(a||(a={}))},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function SceneName(){}return SceneName.BASIC_SCENE="BasicScene",SceneName.PLAY_SCENE="PlayScene",SceneName.CREATE_ROLE_SCENE="CreateRoleScene",SceneName.LOADING_SCENE="LoadingScene",SceneName.SKYBOX_SCENE="SkyboxScene",SceneName.LOGIN_SCENE="LoginScene",SceneName.MAINUI_SCENE="MainUIScene",SceneName.DECORATE_SCENE="DecorateScene",SceneName.BLACK_SCENE="BlackScene",SceneName.GAMEPAUSE_SCENE="GamePauseScene",SceneName.LOGINACCOUNT_SCENE="LoginAccountScene",SceneName.SELECTROLE_SCENE="SelectRoleScene",SceneName}()},function(e,i,n){"use strict";var a;n.d(i,"a",(function(){return a})),function(e){e[e.Center=1]="Center",e[e.Fill=2]="Fill",e[e.Stretch=3]="Stretch",e[e.Repeat=4]="Repeat"}(a||(a={}))},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function EventType(){}return EventType.PACKAGE_SYNC_FINISH="PACKAGE_SYNC_FINISH",EventType.PACKAGE_UPDATE="PACKAGE_UPDATE",EventType.UPDATE_PLAYER_INFO="UPDATE_PLAYER_INFO",EventType.UPDATE_ROOM_INFO="UPDATE_ROOM_INFO",EventType.UPDATE_EXTRA_ROOM_INFO="UPDATE_EXTRA_ROOM_INFO",EventType.UPDATE_PARTY_STATE="UPDATE_PARTY_STATE",EventType.SEND_FURNITURE_REQUIREMENTS="SEND_FURNITURE_REQUIREMENTS",EventType.SCENE_ELEMENT_DATA_UPDATE="SCENE_ELEMENT_DATA_UPDATE",EventType.QUERY_MARKET="QUERY_MARKET",EventType.CHAT="CHAT",EventType.SCENE_POINT_ELEMENT="SCENE_ELEMENT",EventType.SCENE_SHOW_UI="SCENE_SHOW_UI",EventType.ELEMENT_ITEM_CONFIG="ELEMENT_ITEM_CONFIG",EventType.SEND_GIFT_DATA_UPDATE="SEND_GIFT_DATA_UPDATE",EventType.SCENE_ELEMENT_FIND="SCENE_ELEMENT_FIND",EventType.SCENE_RETURN_FIND_ELEMENT="SCENE_RETURN_FIND_ELEMENT",EventType.SCENE_PLAYER_FIND="SCENE_PLAYER_FIND",EventType.SCENE_RETURN_FIND_PLAYER="SCENE_RETURN_FIND_PLAYER",EventType.SCENE_INTERACTION_ELEMENT="SCENE_INTERACTION_ELEMENT",EventType.SCENE_PLAYER_ACTION="SCENE_PLAYER_ACTION",EventType.SCENE_SHOW_MAIN_UI="SCENE_SHOW_MAIN_UI",EventType.CHAT_PANEL_EXTPAND="CHAT_PANEL_EXTPAND",EventType.SCENE_CHANGE="SCENE_CHANGE",EventType.QUERY_SURVEY_FURNITURE="QUERY_SURVEY_FURNITURE",EventType.ENTER_SURVEY_FURNITURE_STATUSE="ENTER_SURVEY_FURNITURE_STATUSE",EventType.EXECUTE_SURVEY_FURNITURE="EXECUTE_SURVEY_FURNITURE",EventType.FECTH_FOLD_MAIN_UI="FECTH_FOLD_MAIN_UI",EventType.FETCH_FRIEND="fetchFriend",EventType.FOLLOW="follow",EventType.UNFOLLOW="unfollow",EventType.REMOVE_BAN_USER="removeBanUser",EventType.REQ_BLACKLIST="ReqBlacklist",EventType.REQ_FRIEND_ATTRIBUTES="reqFriendAttributes",EventType.REQ_FRIEND_GAME_DATA="reqFriendGameData",EventType.REMOVE_FROM_BLACKLIST="removeFromBlacklist",EventType.RENDERER_EVENT="rendererEvent",EventType.REQ_PLAYER_LIST="reqPlayerList",EventType.PLAYER_LIST="playerList",EventType.SEARCH_FRIEND="searchFriend",EventType.SEARCH_RESULT="searchResult",EventType.REQ_FRIEND_RELATION="reqFriendRelation",EventType.REQ_RELATION="reqRelation",EventType.REQ_NEW_FANS="reqNewFans",EventType.SHOW_MED="SHOW_MED",EventType.QUERY_PRAISE="QUERY_PRAISE",EventType.QUERY_MARKET_REQUEST="QUERY_MARKET_REQUEST",EventType.REQUEST_TARGET_UI="REQUEST_TARGET_UI",EventType.NAVIGATE_RESIZE="navigateResize",EventType.TEST_COMMAND_MESSAGE="TEST_COMMAND_MESSAGE",EventType.GALLERY_UPDATE="GALLERY_UPDATE",EventType.DONE_MISSION_LIST="DONE_MISSION_LIST",EventType.QUEST_ELEMENT_PI_DATA="QUEST_ELEMENT_PI_DATA",EventType.RETURN_ELEMENT_PI_DATA="RETURN_ELEMENT_PI_DATA",EventType.RETURN_DRESS_AVATAR_IDS="RETURN_DRESS_AVATAR_IDS",EventType.RETURN_UPDATE_RED_SYSTEM="RETURN_UPDATE_RED_SYSTEM",EventType.SEND_NEW_PROTO_MESSAGE="SEND_NEW_PROTO_MESSAGE",EventType.PACKAGE_TRUMPET_COUNT_UPDATE="PACKAGE_TRUMPET_COUNT_UPDATE",EventType}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function ModuleName(){}return ModuleName.DIALOG_NAME="Dialog",ModuleName.PICAHANDHELD_NAME="PicaHandheld",ModuleName.PICAMAINUI_NAME="PicaMainUI",ModuleName.PICACHAT_NAME="PicaChat",ModuleName.CHAT_NAME="Chat",ModuleName.BOTTOM="Bottom",ModuleName.LOGIN_NAME="Login",ModuleName.PICA_LOGIN_NAME="PicaLogin",ModuleName.PICA_BOOT_NAME="PicaBoot",ModuleName.CUTIN_NAME="CutIn",ModuleName.ACTIVITY_NAME="Activity",ModuleName.CREATEROLE_NAME="CreateRole",ModuleName.VERIFIED_NAME="Verfied",ModuleName.PICANAVIGATE_NAME="PicaNavigate",ModuleName.CHARACTERINFO_NAME="CharacterInfo",ModuleName.PICAPLAYERINFO_NAME="PicaPlayerInfo",ModuleName.PICAFRIEND_NAME="PicaFriend",ModuleName.ACCOUNT_NAME="Account",ModuleName.SCENEMANAGER_NAME="SceneManager",ModuleName.BUBBLE_NAME="Bubble",ModuleName.PICABAG_NAME="PicaBag",ModuleName.PICAAVATAR_NAME="PicaAvatar",ModuleName.PICAMARKET_NAME="PicaMarket",ModuleName.PICAORDER_NAME="PicaOrder",ModuleName.PICAPROPFUN_NAME="PicaPropFun",ModuleName.PICAPARTYLIST_NAME="PicaPartyList",ModuleName.PICANOTICE_NAME="PicaNotice",ModuleName.ALERTVIEW_NAME="AlertView",ModuleName.PICAOPENPARTY_NAME="PicaOpenParty",ModuleName.PICAMANORLIST_NAME="PicaManorList",ModuleName.PICATASK_NAME="PicaTask",ModuleName.PICAMANORINFO_NAME="PicManorInfo",ModuleName.PICABUSINESSSTREET_NAME="PicaBusinessStreet",ModuleName.PICABUSINESSMARKETINGPLAN_NAME="PicaBusinessMarketingPlan",ModuleName.PICARECHARGE_NAME="PicaRecharge",ModuleName.PICADECORATECONTROL_NAME="PicaDecorateControl",ModuleName.PICADECORATE_NAME="PicaDecorate",ModuleName.PICAROOMUPGRADE_NAME="PicRoomUpgrade",ModuleName.PICAEQUIPUPGRADE_NAME="PicaEquipUpgrade",ModuleName.PICAROOMLIST_NAME="PicaRoomList",ModuleName.PICAWORK_NAME="PicaWork",ModuleName.PICAMINECAR_NAME="PicaMineCar",ModuleName.PICAROOM_NAME="PicaRoom",ModuleName.PICAMINESETTLE_NAME="PicaMineSettle",ModuleName.PICAREWARDTIP_NAME="PicaRewardTip",ModuleName.STORAGE_NAME="Storage",ModuleName.BAG_NAME="Bag",ModuleName.PICACOMPOSE_NAME="PicaCompose",ModuleName.PICAITEMPOPCARD_NAME="PicaItemPopCard",ModuleName.PICAMESSAGEBOX_NAME="PicaMessageBox",ModuleName.PICAELEMENTSTORAGE_NAME="PicaElementStorage",ModuleName.RANK_NAME="rank",ModuleName.CUTINMENU_NAME="CutInMenu",ModuleName.USERMENU_NAME="UserMenu",ModuleName.GM_TOOLS_NAME="GMTools",ModuleName.PICATREASURE_NAME="PicaTreasure",ModuleName.PICAGIFTEFFECT_NAME="PicaGiftEffect",ModuleName.PICAFURNIFUN_NAME="PicaFurniFun",ModuleName.PICANEWROLE_NAME="PicaNewRole",ModuleName.PICANEWMAIN_NAME="PicaNewMain",ModuleName.PICAONLINE_NAME="PicaOnline",ModuleName.PICAEFFECTMGR_NAME="PicaEffectMgr",ModuleName.PICAELEVATOR_NAME="PicaElevator",ModuleName.PICACREATEROLE_NAME="PicaCreateRole",ModuleName.PICAITEMTIPSPANEL_NAME="PicaItemTipsPanel",ModuleName.PICAFURNITURECOMPOSE_NAME="PicaFurnitureCompose",ModuleName.PICARECASTE_NAME="PicaRecaste",ModuleName.PICAMANUFACTURE_NAME="PicaManufacture",ModuleName.PICAROAM_NAME="PicaRoam",ModuleName.PICAEXPLORELOG_NAME="PicaExploreLog",ModuleName.PICAEXPLORELIST_NAME="PicaExploreList",ModuleName.PICARENAME_NAME="PicaRename",ModuleName.FRIEND_INVITE="FriendInvite",ModuleName.PICAPARTYNAVIGATION_NAME="PicaPartyNavigation",ModuleName.PICAREPAIRCHOOSE_NAME="PicaRepairChoose",ModuleName.MASK_LOADING_NAME="MaskLoading",ModuleName.PICAILLUSTRATED_NAME="PicaIllustrated",ModuleName.PICAILLUSTRATED_NEW_NAME="PicaNewIllustrated",ModuleName.PICA_DROP_ELEMENT_NAME="DropElement",ModuleName.PICABAGGUIDE_NAME="BagGuide",ModuleName.PICAEXPLOREGUIDE_NAME="ExploreGuide",ModuleName.PICAHOMEGUIDE_NAME="HomeGuide",ModuleName.PICAHOTELGUIDE_NAME="HotelGuide",ModuleName.PICAPLANEGUIDE_NAME="PlaneGuide",ModuleName.PICAROOMGUIDE_NAME="RoomGuide",ModuleName.PICASOFA_NAME="SofaGuide",ModuleName.PICAFURNITURE_NAME="FurnitureGuide",ModuleName.PICAACTIVITY_NAME="ActivityGuide",ModuleName.PICASURVEY_NAME="PicaSurvey",ModuleName.PICASCENENAVIGATION_NAME="PicaSceneNavigation",ModuleName.PICAMAIL_NAME="PicaMail",ModuleName.PICACOOKING_NAME="PicaCooking",ModuleName.PICAMARQUEE_NAME="PicaMarquee",ModuleName.PICAROOMDECORATE_NAME="PicaRoomDecorate",ModuleName.PICANEWMINE_NAME="PicaNewMine",ModuleName}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function ChineseUnit(){}return ChineseUnit.numberToChinese=function(e,i){void 0===i&&(i=!1);var n="个十百千万@#%亿^&~",a="零一二三四五六七八九",s=(e+"").split(""),o=[],h=s.length-1;if(s.length>12)throw new Error("too big");for(var l=0;l<=h;l++){var c=Number(s[l]);(1===h||5===h||9===h)&&0===l?"1"!==s[l]&&o.push(a.charAt(c)):o.push(a.charAt(c)),i&&l!==h&&o.push(n.charAt(h-l))}return i?o.join("").replace(/零([十百千万亿@#%^&~])/g,(function(e,i,a){if(-1!==(a=n.indexOf(i))){if("亿"===i)return i;if("万"===i)return i;if("0"===s[h-a])return"零"}return""})).replace(/零+/g,"零").replace(/零([万亿])/g,(function(e,i){return i})).replace(/亿[万千百]/g,"亿").replace(/[零]$/,"").replace(/[@#%^&~]/g,(function(e){return{"@":"十","#":"百","%":"千","^":"十","&":"百","~":"千"}[e]})).replace(/([亿万])([一-九])/g,(function(e,i,a,o){return-1!==(o=n.indexOf(i))&&"0"===s[h-o]?i+"零"+a:e})):o.join("")},ChineseUnit.getChineseUnit=function(e,i){i=null==i?2:i;var n=Math.floor(e),a=this.getDigit(n),s=[];if(a>3){var o=Math.floor(a/8);if(o>=1){var h=Math.round(n/Math.pow(10,8*o));s.push(this.addWan(h,e,8*o,i));for(var l=0;l<o;l++)s.push("亿");return s.join("")}return this.addWan(n,e,0,i)}return e},ChineseUnit.addWan=function(e,i,n,a){var s=this.getDigit(e);if(s>3){var o=s%8;return o>=5&&(o=4),Math.round(i/Math.pow(10,o+n-a))/Math.pow(10,a)+"万"}return Math.round(i/Math.pow(10,n-a))/Math.pow(10,a)},ChineseUnit.getDigit=function(e){for(var i=-1;e>=1;)i++,e/=10;return i},ChineseUnit}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return s}));var a=n(0),s=function(){function TimerCountDown(e){this.callback=e}return TimerCountDown.prototype.executeText=function(e){var i=this;this.clear(),this.interval=e;var timeout=function(){var e=i.getDataFormat(1e3*i.interval);i.callback&&i.callback.runWith([i.interval,e]),i.interval>0?i.timerid=setTimeout((function(){i.interval-=1,timeout()}),1e3):i.timerid=void 0};timeout()},TimerCountDown.prototype.executeTime=function(e){var i=this;this.clear(),this.interval=e;var timeout=function(){i.callback&&i.callback.runWith([i.interval]),i.interval>0?i.timerid=setTimeout((function(){i.interval-=1,timeout()}),1e3):i.timerid=void 0};timeout()},TimerCountDown.prototype.clear=function(){this.timerid&&clearTimeout(this.timerid),this.timerid=void 0},TimerCountDown.prototype.getDataFormat=function(e){var i=Math.floor(e/864e5),n=Math.floor(e/36e5)%24,s=Math.floor(e/6e4)%60,o=Math.floor(e/1e3)%60,h="";return i>0?h=i+" "+a.i18n.t("timeuint.day")+" "+this.stringFormat(n)+":"+this.stringFormat(s)+":"+this.stringFormat(o):(n>0||s>0||o>0)&&(h=this.stringFormat(n)+":"+this.stringFormat(s)+":"+this.stringFormat(o)),h},TimerCountDown.prototype.stringFormat=function(e){var i=e+"";return i.length<=1&&(i="0"+i),i},TimerCountDown}()},,,function(e,i,n){"use strict";var a;!function(e){e.NONE="none",e.UNFROZEN="unfrozen",e.REPAIR="repair"}(a||(a={}))},function(e,i,n){"use strict";var a,s;n.d(i,"a",(function(){return a})),n.d(i,"b",(function(){return s})),function(e){e[e.ENTERWORLD=0]="ENTERWORLD",e[e.DOWNLOADGAMECONFIG=1]="DOWNLOADGAMECONFIG",e[e.DOWNLOADSCENECONFIG=2]="DOWNLOADSCENECONFIG",e[e.PARSECONFIG=3]="PARSECONFIG",e[e.WAITENTERROOM=4]="WAITENTERROOM",e[e.LOADINGRESOURCES=5]="LOADINGRESOURCES",e[e.LOGINGAME=6]="LOGINGAME",e[e.CREATESCENE=7]="CREATESCENE",e[e.LOADJSON=8]="LOADJSON"}(a||(a={})),function(e){e[e.CREATING_SCENE=0]="CREATING_SCENE",e[e.CREATING_ROOM=1]="CREATING_ROOM",e[e.LOAD_COMPOLETE=2]="LOAD_COMPOLETE"}(s||(s={}))},function(e,i){},function(e,i){},function(e,i,n){"use strict";n.d(i,"a",(function(){return o}));var a=n(1),s=n(0),o=function(){function AnimationModel(e){var i=e.baseLoc.split(",");this.mNode=e.node,this.id=e.node.id,this.name=e.node.name,this.frameName=e.frameName,!e.frameName||this.frameName.length,this.loop=e.loop,e.loop,e.frameRate,e.originPoint,e.baseLoc,this.frameRate=e.frameRate,this.baseLoc=new s.LogicPoint(parseInt(i[0],10),parseInt(i[1],10));var n=e.originPoint;this.originPoint=new s.LogicPoint(n[0],n[1]),"string"==typeof e.collisionArea?this.collisionArea=this.stringToArray(e.collisionArea,",","&")||[[0]]:this.collisionArea=e.collisionArea||[[0]],"string"==typeof e.walkableArea?this.walkableArea=this.stringToArray(e.walkableArea,",","&")||[[0]]:this.walkableArea=e.walkableArea||[[0]],this.interactiveArea=e.interactiveArea,this.changeLayer(e.layer),this.mountLayer=e.mountLayer}return AnimationModel.prototype.changeLayer=function(e){this.layer=e,this.layer.length<1&&(this.layer=[{frameName:this.frameName,offsetLoc:this.baseLoc}])},AnimationModel.prototype.createProtocolObject=function(){var e=a.op_gameconfig_01.AnimationData.create();e.node=this.mNode,e.baseLoc=this.baseLoc.x+","+this.baseLoc.y,e.node.name=this.name,e.loop=this.loop,e.frameRate=this.frameRate,e.frameName=this.frameName,e.originPoint=[this.originPoint.x,this.originPoint.y],e.walkOriginPoint=[this.originPoint.x,this.originPoint.y],e.walkableArea=this.arrayToString(this.walkableArea,",","&"),e.collisionArea=this.arrayToString(this.collisionArea,",","&"),e.interactiveArea=this.interactiveArea;for(var i=[],n=0,s=this.layer;n<s.length;n++){var o=s[n];i.push(a.op_gameconfig_01.AnimationLayer.create(o))}return e.layer=i,this.changeLayer(e.layer),e.mountLayer=this.mountLayer,e},AnimationModel.prototype.createMountPoint=function(e){if(this.mountLayer){var i=this.mountLayer.mountPoint;e>=i.length&&i.push(a.op_def.PBPoint3f.create({x:0,y:0}))}else this.mountLayer=a.op_gameconfig_01.AnimationMountLayer.create(),this.mountLayer.mountPoint=[a.op_def.PBPoint3f.create({x:0,y:0})],this.mountLayer.index=this.layer.length},AnimationModel.prototype.updateMountPoint=function(e,i,n){if(this.mountLayer&&!(e<0||e>=this.mountLayer.mountPoint.length)){var a=this.mountLayer.mountPoint[e];a.x-=i,a.y-=n}},AnimationModel.prototype.stringToArray=function(e,i,n){if(e){for(var a=[],s=0,o=e.split(n);s<o.length;s++){var h=o[s].split(i);a.push(h.map((function(e){return parseInt(e,10)})))}return a}},AnimationModel.prototype.arrayToString=function(e,i,n){if(!e)return"";for(var a=[],s=0,o=e;s<o.length;s++){var h=o[s];a.push(h.join(i))}return a.join(n)},AnimationModel}()},function(e,i){},function(e,i,n){"use strict";n.d(i,"a",(function(){return s}));var a=n(39),s=function(){function Animator(e){e&&this.setSuits(e)}return Animator.prototype.setSuits=function(e){if(e)for(var i=0,n=e;i<n.length;i++){var a=n[i];"weapon"===a.suit_type&&a.tag&&(this.AniAction=JSON.parse(a.tag).action)}},Animator.prototype.getAnimationName=function(e){if(this.AniAction){if(e===a.a.IDLE)return this.AniAction[0];if(e===a.a.WALK)return this.AniAction[1]}return e},Animator}()},function(e,i){},function(e,i,n){"use strict";!function(){function RoomType(){}RoomType.EPISODE="episode",RoomType.ROOM="room",RoomType.DUNGEON="dungeon"}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return s}));var a=n(6),s=function(){function LayerName(){}return LayerName.GROUNDCLICK="groundClickLayer",LayerName.GROUND2="groundLayer2",LayerName.GROUND=a.LayerEnum.Terrain.toString(),LayerName.MIDDLE="middleLayer",LayerName.FLOOR=a.LayerEnum.Floor.toString(),LayerName.SURFACE=a.LayerEnum.Surface.toString(),LayerName.DECORATE="decorateLayer",LayerName.WALL=a.LayerEnum.Wall.toString(),LayerName.ATMOSPHERE="atmosphere",LayerName.SCENEUI="sceneUILayer",LayerName}()},,,,,,,,,,,,,,,function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function Atlas(){this.frames=[],this.atlas={frames:this.frames}}return Atlas.prototype.addFrame=function(e,i){this.frames.push({filename:e,frame:{x:i.x,y:i.y,w:i.width,h:i.height},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:i.width,h:i.height},sourceSize:{w:i.width,h:i.height}})},Atlas.prototype.setFrame=function(e){this.frames=e,this.atlas={frames:this.frames}},Atlas.prototype.removeFrame=function(e){this.frames[e]=null,delete this.frames[e]},Atlas.prototype.clearFrames=function(){this.frames.length=0},Atlas.prototype.toString=function(){return JSON.stringify(this.atlas)},Atlas}()},function(e,i,n){var a;!function(){function aa(e,i,n){return e.call.apply(e.bind,arguments)}function ba(e,i,n){if(!e)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,a),e.apply(i,n)}}return function(){return e.apply(i,arguments)}}function p(e,i,n){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba).apply(null,arguments)}var s=Date.now||function(){return+new Date};function ca(e,i){this.a=e,this.m=i||e,this.c=this.m.document}var o=!!window.FontFace;function t(e,i,n,a){if(i=e.c.createElement(i),n)for(var s in n)n.hasOwnProperty(s)&&("style"==s?i.style.cssText=n[s]:i.setAttribute(s,n[s]));return a&&i.appendChild(e.c.createTextNode(a)),i}function u(e,i,n){(e=e.c.getElementsByTagName(i)[0])||(e=document.documentElement),e.insertBefore(n,e.lastChild)}function v(e){e.parentNode&&e.parentNode.removeChild(e)}function w(e,i,n){i=i||[],n=n||[];for(var a=e.className.split(/\s+/),s=0;s<i.length;s+=1){for(var o=!1,h=0;h<a.length;h+=1)if(i[s]===a[h]){o=!0;break}o||a.push(i[s])}for(i=[],s=0;s<a.length;s+=1){for(o=!1,h=0;h<n.length;h+=1)if(a[s]===n[h]){o=!0;break}o||i.push(a[s])}e.className=i.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(e,i){for(var n=e.className.split(/\s+/),a=0,s=n.length;a<s;a++)if(n[a]==i)return!0;return!1}function z(e){if("string"==typeof e.f)return e.f;var i=e.m.location.protocol;return"about:"==i&&(i=e.a.location.protocol),"https:"==i?"https:":"http:"}function A(e,i,n){function d(){l&&a&&s&&(l(h),l=null)}i=t(e,"link",{rel:"stylesheet",href:i,media:"all"});var a=!1,s=!0,h=null,l=n||null;o?(i.onload=function(){a=!0,d()},i.onerror=function(){a=!0,h=Error("Stylesheet failed to load"),d()}):setTimeout((function(){a=!0,d()}),0),u(e,"head",i)}function B(e,i,n,a){var s=e.c.getElementsByTagName("head")[0];if(s){var o=t(e,"script",{src:i}),h=!1;return o.onload=o.onreadystatechange=function(){h||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(h=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&s.removeChild(o))},s.appendChild(o),setTimeout((function(){h||(h=!0,n&&n(Error("Script load timeout")))}),a||5e3),o}return null}function C(){this.a=0,this.c=null}function D(e){return e.a++,function(){e.a--,E(e)}}function F(e,i){e.c=i,E(e)}function E(e){0==e.a&&e.c&&(e.c(),e.c=null)}function G(e){this.a=e||"-"}function H(e,i){this.c=e,this.f=4,this.a="n";var n=(i||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function J(e){var i=[];e=e.split(/,\s*/);for(var n=0;n<e.length;n++){var a=e[n].replace(/['"]/g,"");-1!=a.indexOf(" ")||/^\d/.test(a)?i.push("'"+a+"'"):i.push(a)}return i.join(",")}function K(e){return e.a+e.f}function I(e){var i="normal";return"o"===e.a?i="oblique":"i"===e.a&&(i="italic"),i}function ga(e){var i=4,n="n",a=null;return e&&((a=e.match(/(normal|oblique|italic)/i))&&a[1]&&(n=a[1].substr(0,1).toLowerCase()),(a=e.match(/([1-9]00|normal|bold)/i))&&a[1]&&(/bold/i.test(a[1])?i=7:/[1-9]00/.test(a[1])&&(i=parseInt(a[1].substr(0,1),10)))),n+i}function ha(e,i){this.c=e,this.f=e.m.document.documentElement,this.h=i,this.a=new G("-"),this.j=!1!==i.events,this.g=!1!==i.classes}function M(e){if(e.g){var i=y(e.f,e.a.c("wf","active")),n=[],a=[e.a.c("wf","loading")];i||n.push(e.a.c("wf","inactive")),w(e.f,n,a)}L(e,"inactive")}function L(e,i,n){e.j&&e.h[i]&&(n?e.h[i](n.c,K(n)):e.h[i]())}function ja(){this.c={}}function N(e,i){this.c=e,this.f=i,this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function O(e){u(e.c,"body",e.a)}function P(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+J(e.c)+";font-style:"+I(e)+";font-weight:"+e.f+"00;"}function Q(e,i,n,a,s,o){this.g=e,this.j=i,this.a=a,this.c=n,this.f=s||3e3,this.h=o||void 0}function R(e,i,n,a,s,o,h){this.v=e,this.B=i,this.c=n,this.a=a,this.s=h||"BESbswy",this.f={},this.w=s||3e3,this.u=o||null,this.o=this.j=this.h=this.g=null,this.g=new N(this.c,this.s),this.h=new N(this.c,this.s),this.j=new N(this.c,this.s),this.o=new N(this.c,this.s),e=P(e=new H(this.a.c+",serif",K(this.a))),this.g.a.style.cssText=e,e=P(e=new H(this.a.c+",sans-serif",K(this.a))),this.h.a.style.cssText=e,e=P(e=new H("serif",K(this.a))),this.j.a.style.cssText=e,e=P(e=new H("sans-serif",K(this.a))),this.o.a.style.cssText=e,O(this.g),O(this.h),O(this.j),O(this.o)}G.prototype.c=function(e){for(var i=[],n=0;n<arguments.length;n++)i.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return i.join(this.a)},Q.prototype.start=function(){var e=this.c.m.document,i=this,n=s(),a=new Promise((function(a,o){!function k(){s()-n>=i.f?o():e.fonts.load(function fa(e){return I(e)+" "+e.f+"00 300px "+J(e.c)}(i.a),i.h).then((function(e){1<=e.length?a():setTimeout(k,25)}),(function(){o()}))}()})),o=new Promise((function(e,n){setTimeout(n,i.f)}));Promise.race([o,a]).then((function(){i.g(i.a)}),(function(){i.j(i.a)}))};var h={D:"serif",C:"sans-serif"},l=null;function U(){if(null===l){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);l=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return l}function ma(e,i,n){for(var a in h)if(h.hasOwnProperty(a)&&i===e.f[h[a]]&&n===e.f[h[a]])return!0;return!1}function la(e){var i,n=e.g.a.offsetWidth,a=e.h.a.offsetWidth;(i=n===e.f.serif&&a===e.f["sans-serif"])||(i=U()&&ma(e,n,a)),i?s()-e.A>=e.w?U()&&ma(e,n,a)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?V(e,e.v):V(e,e.B):function na(e){setTimeout(p((function(){la(this)}),e),50)}(e):V(e,e.v)}function V(e,i){setTimeout(p((function(){v(this.g.a),v(this.h.a),v(this.j.a),v(this.o.a),i(this.a)}),e),0)}function W(e,i,n){this.c=e,this.a=i,this.f=0,this.o=this.j=!1,this.s=n}R.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=s(),la(this)};var c=null;function oa(e){0==--e.f&&e.j&&(e.o?((e=e.a).g&&w(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),L(e,"active")):M(e.a))}function pa(e){this.j=e,this.a=new ja,this.h=0,this.f=this.g=!0}function ra(e,i,n,a,s){var o=0==--e.h;(e.f||e.g)&&setTimeout((function(){var e=s||null,h=a||{};if(0===n.length&&o)M(i.a);else{i.f+=n.length,o&&(i.j=o);var l,m=[];for(l=0;l<n.length;l++){var f=n[l],g=h[f.c],_=i.a,T=f;_.g&&w(_.f,[_.a.c("wf",T.c,K(T).toString(),"loading")]),L(_,"fontloading",T),_=null,null===c&&(c=!!window.FontFace&&(!(T=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))||42<parseInt(T[1],10))),_=c?new Q(p(i.g,i),p(i.h,i),i.c,f,i.s,g):new R(p(i.g,i),p(i.h,i),i.c,f,i.s,e,g),m.push(_)}for(l=0;l<m.length;l++)m[l].start()}}),0)}function sa(e,i){this.c=e,this.a=i}function ua(e,i){this.c=e,this.a=i}function va(e,i,n){this.c=e||i+m,this.a=[],this.f=[],this.g=n||""}W.prototype.g=function(e){var i=this.a;i.g&&w(i.f,[i.a.c("wf",e.c,K(e).toString(),"active")],[i.a.c("wf",e.c,K(e).toString(),"loading"),i.a.c("wf",e.c,K(e).toString(),"inactive")]),L(i,"fontactive",e),this.o=!0,oa(this)},W.prototype.h=function(e){var i=this.a;if(i.g){var n=y(i.f,i.a.c("wf",e.c,K(e).toString(),"active")),a=[],s=[i.a.c("wf",e.c,K(e).toString(),"loading")];n||a.push(i.a.c("wf",e.c,K(e).toString(),"inactive")),w(i.f,a,s)}L(i,"fontinactive",e),oa(this)},pa.prototype.load=function(e){this.c=new ca(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function qa(e,i,n){var a=[],s=n.timeout;!function ia(e){e.g&&w(e.f,[e.a.c("wf","loading")]),L(e,"loading")}(i);a=function ka(e,i,n){var a,s=[];for(a in i)if(i.hasOwnProperty(a)){var o=e.c[a];o&&s.push(o(i[a],n))}return s}(e.a,n,e.c);var o=new W(e.c,i,s);for(e.h=a.length,i=0,n=a.length;i<n;i++)a[i].load((function(i,n,a){ra(e,o,i,n,a)}))}(this,new ha(this.c,e),e)},sa.prototype.load=function(e){var i=this,n=i.a.projectId,a=i.a.version;if(n){var s=i.c.m;B(this.c,function ta(e,i,n){return z(e.c)+"//"+(e=(e.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""))+"/"+i+".js"+(n?"?v="+n:"")}(i,n,a),(function(a){a?e([]):(s["__MonotypeConfiguration__"+n]=function(){return i.a},function b(){if(s["__mti_fntLst"+n]){var i,a=s["__mti_fntLst"+n](),o=[];if(a)for(var h=0;h<a.length;h++){var l=a[h].fontfamily;null!=a[h].fontStyle&&null!=a[h].fontWeight?(i=a[h].fontStyle+a[h].fontWeight,o.push(new H(l,i))):o.push(new H(l))}e(o)}else setTimeout((function(){b()}),50)}())})).id="__MonotypeAPIScript__"+n}else e([])},ua.prototype.load=function(e){var i,n,a=this.a.urls||[],s=this.a.families||[],o=this.a.testStrings||{},h=new C;for(i=0,n=a.length;i<n;i++)A(this.c,a[i],D(h));var l=[];for(i=0,n=s.length;i<n;i++)if((a=s[i].split(":"))[1])for(var c=a[1].split(","),m=0;m<c.length;m+=1)l.push(new H(a[0],c[m]));else l.push(new H(a[0]));F(h,(function(){e(l,o)}))};var m="//fonts.googleapis.com/css";function za(e){this.f=e,this.a=[],this.c={}}var f={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},g={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},_={i:"i",italic:"i",n:"n",normal:"n"},T=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Fa(e,i){this.c=e,this.a=i}var x={Arimo:!0,Cousine:!0,Tinos:!0};function Ha(e,i){this.c=e,this.a=i}function Ia(e,i){this.c=e,this.f=i,this.a=[]}Fa.prototype.load=function(e){var i=new C,n=this.c,a=new va(this.a.api,z(n),this.a.text),s=this.a.families;!function xa(e,i){for(var n=i.length,a=0;a<n;a++){var s=i[a].split(":");3==s.length&&e.f.push(s.pop());var o="";2==s.length&&""!=s[1]&&(o=":"),e.a.push(s.join(o))}}(a,s);var o=new za(s);!function Ea(e){for(var i=e.f.length,n=0;n<i;n++){var a=e.f[n].split(":"),s=a[0].replace(/\+/g," "),o=["n4"];if(2<=a.length){var h;if(h=[],l=a[1])for(var l,c=(l=l.split(",")).length,m=0;m<c;m++){var x;if((x=l[m]).match(/^[\w-]+$/))if(null==(j=T.exec(x.toLowerCase())))x="";else{if(x=null==(x=j[2])||""==x?"n":_[x],null==(j=j[1])||""==j)j="4";else var S=g[j],j=S||(isNaN(j)?"4":j.substr(0,1));x=[x,j].join("")}else x="";x&&h.push(x)}0<h.length&&(o=h),3==a.length&&(h=[],0<(a=(a=a[2])?a.split(","):h).length&&(a=f[a[0]])&&(e.c[s]=a))}for(e.c[s]||(a=f[s])&&(e.c[s]=a),a=0;a<o.length;a+=1)e.a.push(new H(s,o[a]))}}(o),A(n,function ya(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var i=e.a.length,n=[],a=0;a<i;a++)n.push(e.a[a].replace(/ /g,"+"));return i=e.c+"?family="+n.join("%7C"),0<e.f.length&&(i+="&subset="+e.f.join(",")),0<e.g.length&&(i+="&text="+encodeURIComponent(e.g)),i}(a),D(i)),F(i,(function(){e(o.a,o.c,x)}))},Ha.prototype.load=function(e){var i=this.a.id,n=this.c.m;i?B(this.c,(this.a.api||"https://use.typekit.net")+"/"+i+".js",(function(i){if(i)e([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){i=n.Typekit.config.fn;for(var a=[],s=0;s<i.length;s+=2)for(var o=i[s],h=i[s+1],l=0;l<h.length;l++)a.push(new H(o,h[l]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(a)}}),2e3):e([])},Ia.prototype.load=function(e){var i=this.f.id,n=this.c.m,a=this;i?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[i]=function(i,n){for(var s=0,o=n.fonts.length;s<o;++s){var h=n.fonts[s];a.a.push(new H(h.name,ga("font-weight:"+h.weight+";font-style:"+h.style)))}e(a.a)},B(this.c,z(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+function ea(e){return e.m.location.hostname||e.a.location.hostname}(this.c)+"/"+i+".js",(function(i){i&&e([])}))):e([])};var S=new pa(window);S.a.c.custom=function(e,i){return new ua(i,e)},S.a.c.fontdeck=function(e,i){return new Ia(i,e)},S.a.c.monotype=function(e,i){return new sa(i,e)},S.a.c.typekit=function(e,i){return new Ha(i,e)},S.a.c.google=function(e,i){return new Fa(i,e)};var j={load:p(S.load,S)};void 0===(a=function(){return j}.call(i,n,i,e))||(e.exports=a)}()},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bubblebg_03d97b6551c9e87ae63d35c919d42c5e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tipsicon_33e63896eabbc148886f3bf31d887b15.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base_5d8832abddef07e6466aac3d90ed253e.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base_7147932fe306efd6ecddfc0a2d8f377e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/create_role_e3fd5e289b6fa68fb05f9c9de1d26d5b.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/create_role_730918830438a0ddf316846468bc468b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_eqpm_db7bd14bcfc5f0c7e3a0506db95fc8c1.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_eqpm_e55d68a3deafee093e3a6fcd93de9776.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/curtain_f943c6fa1e0de1276f4bf4eb1af6eda1.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/curtain_acf94ecf17b0170de81d95ff123a8f63.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/login_473a51e2a08bbf252752401d19cc6210.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/login_e48bf3a8537d5361f8691e4574d44b3c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/market_5e08e195be0a72ba2193fcdf2a79abce.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/market_fc4dd2270e474cb0dabc4853a07a0db4.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/repair_furniture_8dfb3e4257f596060123b589f6496fc5.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/repair_furniture_d681746b2a16863d7e5679a4049471e9.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base_e23a5ec43879a9304193d44919274ff5.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base_23a731853a2cc23d1a039601b7f3c6fe.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/activity_69ebb916a0211b57eecdf4610fb7af35.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/activity_b8a41ec9e2938e64ecd127b6982bcb03.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bottom_d1e3cdaa7cb1c9ed046b7f103fae1ac9.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bottom_0c459a6cd4935436c433f6f060b98f80.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bubblebg_17aa835dca04c11ce0966d1789e17abe.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tipsicon_54d1ba4925afdd2565ce99573d771101.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bulletin_70f537f9d8598f27352b459c7b108d29.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bulletin_a06cfbc3488830c436ee236efaaa207e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/c_street_1_11f331f9102068841827cda245cc1190.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/c_street_1_44673ae649af5f190f98eec1de363b7a.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/c_street_2_6116674c7ec3cac7d9f812efaac849bf.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/c_street_2_b848fdf9f1b8e9073728d829d3565c16.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/chat_0a3d59e40369a7ac50635677680344b4.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/chat_b525fa513c7730299d3ae1bc01d818bb.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/circleeffect_e8469c1391cbd2284d8426efb0035965.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/circleeffect_0132194962f42d750d176b57f7aeaf0e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/compose_b7c5e565abc95d99b163ea1803f79e87.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/compose_cf4e8de5c705248b150ebf0316316096.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/cooking_096dddf6c7d14432f853a94ce02aabcf.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/cooking_501d0bd08fe4b20747aaf108891cd9f7.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/createrole_e59e2ced44f7c9a91acce8af3155e66c.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/createrole_b3b0685a3f38e0af23a130af132edaea.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/cutInmenu_8137d24b46c0b41ff0178feb9c2a14a0.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/cutInmenu_4ea0fde060cbd3aee87997dacfe58c42.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/cut_in_bg_ea9033f8017c3c29ff0ac81358583a39.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/decorateshop_a0d6de617990a2220c7ee24e905fd6a3.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/decorateshop_b1675e2b19cd7bc3a84886d1170953cd.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/e_roomupgrade_4b60d8119742839d2c3ddaf6600eac74.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/e_roomupgrade_5d82d2e254eebd79abc3b6be4e25ea2e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/effect_common_b53a9480ab4212ea7abd9125ee45264c.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/effect_common_ad97d6f8c793cc59adb58466c9f6cc8d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/effectlevelup_bf61f77662c383dfd116656d16db0d20.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/effectlevelup_8a0fd440a34a9e74aff6c1fad7d94cf0.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_eqpm_7a9eee67f158c256a6d1d3ae982774d7.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_eqpm_c033073c450c21a7479e0cad4561b1a5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/explore_bg_stripe_middle_95b89b3cb137ce2efa114c10d30aea29.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/explore_bg_stripe_top_60e6f0f881d070921c3e0d66f5b631b2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/explore_mask_4401458d70f6e4178e1ee906943221ce.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/explorelog_9ba9a0652bf2336b30ca48fa06f9b027.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/explorelog_6a77abcd5f04021b29b186f4c623a5a4.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/friend_list_70c02d3d10eff1347e414e25806593c1.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/friend_list_7ecf6b99f1c164509f80744adc3978ba.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/friend_message_15f4b1f8375d3e588ead25f3d44b87a2.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/friend_message_359a17c623c2fd4be4792a73bf7dc0a0.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/furni_bag_9901bf09f98e3d7615c0a497314c6963.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/furni_bag_d5e69106ed651508414cd1714603e1ec.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/furni_unlock_653561320874e557cf91a72783c50d13.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/furni_unlock_6b75ee0d7a6aa1a194dd216ac32be00b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/gifteffect_b791c7458344ff90156231fb55a21541.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/gifteffect_ec20a8e24753b5de2f2715a5fe03ad46.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/hand_equp_938afd7ce743b3d6d443e528287ae29c.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/hand_equp_69487bfcd5dc9a1e82261a8361bcf5f2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/icon_common_28642de4d190f8b417668ea83883ce04.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/icon_common_acf701ec179551d089b5cdd41450f5b5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/illustrate_1e1ccb541cda70ba4dec5fe786cc18ee.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/illustrate_e83742bbbc35a7e3491d199cf2d9e712.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/illustrate_new_f02f124e996e61caaee1155097423ef3.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/illustrate_new_b97d630c44caa7c9b58c7de7338682c9.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/item_pop_card_51a4e7d62e1627346c8d11a0035237bf.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/item_pop_card_f9655caa5996286131db1db90c2ec49a.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/layout_92eb3e09040c6f7c7d37dcadd66502b8.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/layout_cdf6324a61d92a38872dbe3800874577.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/curtain_f943c6fa1e0de1276f4bf4eb1af6eda1.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/curtain_acf94ecf17b0170de81d95ff123a8f63.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/loading_ui_12af49689ba1fef357adf30e7cf1ff25.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/loading_ui_6551d6a805f4ee0891e89d90938324c8.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/login_d0d0a2a735ee553453eba3f22c5507b2.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/login_6d336171f356390204d1e5a9edde1832.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mail_827d32a09c5fef64e81d19aca3884d28.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mail_2f5f3abf8df6ae204b6b2e9b1c9e5c5d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mainui_66623914760147a86bb0f96348b3c07b.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mainui_e82590c11b05d7b1056945b6f15e7798.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/manor_debd1f3fac62ad7059cee00082e3aa1f.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/manor_ba5a34b3be83cccbaf37c8db8ec5685a.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/map_0ea8f5a969911f2e05f289b38bae48d0.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/map_09aa8c7364577eeb99b932920ec27292.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/map_room_icon_82919c3eda7b813143724455d541db46.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/party_icon_1_20c76c399ca6bc2aa74f0508ad2a58e7.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/town_entrance_1_1cc9d4dd81812c9d9594f338a27370b3.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/market_3d6beb499050729f8ea88c2d1e2b850c.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/market_327f07b289ccd58481bce645762c07fc.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mask_loading_3d649934e5e4799b2b86f69ea1e2f328.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mask_loading_3d76541945b87ba0a57133fd6d8adb0e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_car_07a537edebf40eae63ce0178a0cd24d0.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_car_5e2f106f2ebff8a00bf855503a109f31.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_new_eb61e9ad2f53aeac0f754d15df4034a6.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_new_164dbb959aafd714078d5efa3eb93ce4.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/settlement_360f5a9674a446ed0b8f9409caa23049.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/settlement_aa39cd6756d0f73d045c82ebebec2b51.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/multiple_rooms_ad821d99b8833fa497870fa25a1b85dd.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/multiple_rooms_fae9031a23072519e824b33843cc4e31.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/order_ee1f2cbb592791b07fb3c9b0d73d0f19.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/order_8e9791bf32a1cb931ecbce7f90254dd6.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/party_54c64874bc07a73a6b08d836b661a528.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/party_a911636b0759efc9d7d110b882cc6a6e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/people_action_8b08ee8733178bd4d480ae94ed75ceff.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/people_action_a4335df3ecfc759a5b6a4433bb0926e6.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_alert_aac6fd70d6623fac85a137ce9a64cfe5.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_alert_f3fdc3dbd0fe5e93815b58957783eeaf.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/login_notice_bg_ada53ba0433bc90f6459d230fa33ea54.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_boot_54e39cfd93057a3a54098d4c74ef9ddd.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_boot_2b91fe9826ecac8854a351062f1e701c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_chat_54758e909449d2d2735b6bba5c3e89fc.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_chat_d59106ec4b37a207b300d37d6541b434.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_login_16508c2d5c560a3bb0c457d25bfa6583.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_login_ccddd1db54cf154431a175ca1a8d1fac.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_message_box_afe5e0f08b781036f4d2b23c9c41b0d3.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_message_box_ea09461f4659c06e9f30110ddb3846e3.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_navigate_cn_1b39f29d31b3d89f6ba7ba6f097bd7f8.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_navigate_cn_e015847e5623370e32c21177781433e9.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_navigate_en_52320a1d1f44fefc9eba8430b9af9579.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_navigate_en_5ac7bb98228daddb7290f04c52c4436f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg_07f6190ac2d58947cc7c7debb531e2b3.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg_big_562594b463172dc78548c47effdd048f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_roomlist_d8bddc4200e21dbf6e56b6aa75ba6fdd.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_roomlist_e846fae3da374390d9535b03c77793e7.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/player_info_b562ee3c2a4256839a5d97f5b8caa855.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/player_info_9d3d2464313f4dd474ccc749a9a00bca.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg_66f62a70132eb07e71e40917824783de.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/recast_38678e5d49f3e83bf6635570b2e095c8.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/recast_63707cc6e22aca457ac0b406089fec3c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/recharge_7e1856074df9daaa3bfc07b00f8d6c4a.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/recharge_8f6cbde118452f4f102327f04c163dec.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/repair_furniture_ad3900d735755b5c606c5b20460edec5.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/repair_furniture_72ee809be99dc3236a58db058520d449.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roam_071f8a452a9d59c6b31225513db85402.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roam_8249b5a5daca3b766d144cf2d950ce53.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roam_stripe_7c92ff8906ac43a038582c77546deeae.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roam_topic_f7bd5ad3cff594e57f48568d9a094d83.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roam_topic1_b45259f619bfc3a2ac82169c04a522a3.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/room_decorate_a0cecc03037eff1d970d500922855fb6.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/room_decorate_a45ab6e4ee02d7130011a51a368ca9a7.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/room_information_0362d08115c9462db10f7bd095836616.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/room_information_519e5ecdeb2ac62ddbae439a3a6f9a3e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/stareffect_1e13bebf8665a68123709289c3129c08.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/stareffect_ee21ca0959bd553d75c1adfe3d466b87.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/survey_7f2200d27a4fbddf3db0704ed22cefcf.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/survey_cb8a999d246232c56ed6960abcafb3b8.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/task_95831770d6e9084fa5f7a14a63eccd99.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/task_5bf6d66ba6eab20046b5e7d54a18e502.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/Create_bg_texture_76b794667fc967f99c0592c7990000c1.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/Create_role_bg_8e9ee67842ca10aa319fce6de33aa776.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/Recast_aims_icon_bg_bc86ea9d44044494b8b2a8fa7c221c21.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/Recast_bg_texture_0a8aa4dfef2a7633706b09dec853883b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/Recast_list_bg_7797c265acf2dbccd66bbd4c3649b59e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/avater_bg_adorn_dc131ddc689b4b7fe56e62ff993116ff.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/avater_bg_stripe_c6a21e56b4fdb1f2027976d9e7724dfb.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bag_bg_111cd39d235587495af966f1e8473c98.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/treasure_61b81bf99bf6ebd2e8046494e101a1b0.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/treasure_af5b89ef31068a55549e4bbd3b21f35c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base_0c83b70070267ca8414c216ab9ae94cc.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base_e2400917ca57d7516f8223eb79038d97.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base2_4e3bacfc0a310526e8eec08d907c3b2d.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base2_28017719d259fe65c6b4c6a41f02e681.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base3_9f13edb98e1931bcf0a379daa09ec51d.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base3_c54402ba4dc88e0c15b13bb25078344f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_common_80aee9e710280590401152f2e799b48b.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_common_6fd6351d460fd85fd224d9d8ffabf7b4.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_common1_2ceeeef990d53de13a1cffac89cf64e4.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_common1_b5b8b37f3abc6771d48428386251e4c0.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/work_769af3d2667a9bb35bf64b5d735e719c.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/work_3d7b5f4640e2e60b168bd18bd95aa363.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/activity_5d4f677c7ca5bb9ece5d56b2b0ba1945.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/activity_b33f249238bc78354f3f4d7a98d4e876.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bottom_cb84d64d897f3549aaddbd2108cca3e4.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bottom_57d8b246877f54e56072a473da6e63c1.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bubblebg_3d32916f0b9cd68f09522d20ee028e16.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tipsicon_d0d6bc311ec19b2f82526eb63bf4e7f0.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bulletin_f2fa9b0078869c4a7de73d7518901a06.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bulletin_b3c5b54cae194df3df0a29a072c5067f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/c_street_1_962b28c55d9c14ff6bfbe102ecaae02a.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/c_street_1_97027dd21e8d70b2eddd1d90fba1c581.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/c_street_2_eb3b1b2289a0ca8cfe392e67f6a56e27.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/c_street_2_9d26b02f05fcbd3d31d048944008a876.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/chat_de1f27dc0f7eccb11deac9d7d4962414.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/chat_afb0882ea89540a935cec42fbd875455.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/circleeffect_992c2fb8c6f589ce9b00dc6b41fcf53d.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/circleeffect_5f23c0bb0e2132b887822ae304512b14.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bprint_bg_1_bc02a59a6380927d6a1efc4a45d48a2f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bprint_bg_2_6425f85e3df3ef21bc81e7a1ce7729ca.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bprint_mask_a9214fae76eb0bb2a323fbadd759ed99.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/compose_a8677588add26b122d808797d8c410d8.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/compose_f6bc6ea7a7655162d74e5552e1019d6b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/lock_5bc5ba7218c16ae46fff08318a84e9ee.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/main_bg_cbb4af91c4158241c8300cdd5f2e497b.jpg"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/main_bg_3156860d7211b24a6696c4441e63da7f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/main_bg_01_8c701c7231f2f4e964073317092436be.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/separator_e26ed9294daa13a0b7cfd9e5c5563ca0.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/source_bg_bfbe74beaf77b6c0ec7dd9bd5045ca8d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/sourcelist_bg_c173ed437ae3d126a938405ea92f78d0.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/sourcelist_title_1_f69eb6f48a57b658f847d9022a80ae4c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tag_new_b3b914c4326737b214691a225df59f94.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tag_rank_a_1eb8dc99b793a73bd036c63abe954b13.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tag_rank_b_4b458ae8fe00901436681487a4d69396.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tag_rank_c_b349852773719c89b6bdd7f601456edd.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tag_ready_4089d43e038ed7e8d235610e1b66543f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tips_arrow_41826435cfa3544c28ff76bddbe42a58.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tips_bg_1a500906d17526a7473ecc46580a456c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/title_bg_bd13e220587357677d9bb0f097930466.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/cooking_814a07a7a4b03b57d9bab15e282c77c5.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/cooking_9c12fea5da3bf4d8ebfa89017c452726.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/createrole_ed6c29cfd0eda37f064312a134bbcc6e.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/createrole_5ff528a67499b2a56db1e059ced74c81.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/cutInmenu_6bb6331dd8d65158d549f1669c7a162b.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/cutInmenu_ec34bc2546a00e5dc891192e780c2050.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/cut_in_bg_b58ea9af10aa183cd673173feb268b3e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/decorateshop_18f828fc7fba35a95b06917c5b913ac5.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/decorateshop_772fc923ad98fe0543149f739e56010e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/e_roomupgrade_32c0470929054c4280106bfe1d058765.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/e_roomupgrade_0ef2d21607a1d301615e242ad80b3351.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/effect_bg_1669a2d0c3ca7f2e29d42dfaefa94585.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/lv0_6b9a493fff2d33d0857accf155788ad2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/lv1_0dbea79ce50443b578d80d8c642b8b98.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/lv2_28290b585dd958eec5528ba20befba05.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/lv3_a8302f1bda284e763c9ddf2e65bf6cd3.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/lv4_f898dda61c5a0e9204d6bce6eec88526.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/room_decorate_5c68323b4b30f796722aa8d9b466d01d.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/room_decorate_45746f2dee0e97436e764d39a9f201c7.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tittle_bg_c9e0ff51c4eb697012d4349ddd60d94c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/effect_common_7f8852fea8518de5549bc5eb0c11597e.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/effect_common_46cb67980edc308d8048fa9ad4081e06.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/effectlevelup_85b1aa147e439df7d102a2e1c191dbed.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/effectlevelup_b286ec540ab4f570b7ef30a80d1056a3.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg1_342dbcc2e59ef2473c0045bb6cd1ab72.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bottombg_9cc928263686b1d8b24fcd7aafb310a7.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bottombg1_cb0d2b633c03bb39f39a6acf69390790.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/equipbg_5179c52e5194536c1aaeee679c1cce46.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/equipbg1_ae21b2fe49cfb73a1c742cb9e5fcf667.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/equipbg2_6e0112b70b265659b0e44d427229ad40.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/lock_840ff861f02fac086c46a11fedc163cc.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_eqpm_051db816943d4cc775a9cbe420d9432e.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_eqpm_40bca5044a80d3a89acb350bd1c9aeb0.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ok_66058e804ed8b877b1d271a429d1ff44.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/test_equip_29039fb13aa9ffbc29927e46f551e342.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/titlebg_c62f8eff9b360eaed706519dea058205.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/topbg_89ff785ca0b84b92e898c0a8aa2a7a09.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/topbg1_db0373f2ac9ff2cb7bbcfb28e5196209.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/explore_bg_stripe_middle_83f2e4ff4923140eaeac9123ca9cdf7d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/explore_bg_stripe_top_8d28a63437c096d2e23745597e5cee3c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/explore_mask_b7872b53eef94c73b02b919645637a35.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/explorelog_7096fed8e15e57ee7f10f9e4f15ef612.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/explorelog_ce584814bb66b6dc64d99edcd5a79a73.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/friend_list_06634ab2c20035a257f7b10a2ccdbd4d.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/friend_list_5e020c69315c4a94e9c59e113e4b6f38.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/friend_message_1ee346ef98fcd595ece3b3f328a915f4.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/friend_message_7a8f6fb03fc0a1f506abff8a66a80aec.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/furni_bag_b0775af047c8ff03bfff43e5994cbbc2.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/furni_bag_2852f55d15c758884621ed2b62966f92.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/furni_unlock_a9ce12200090a2c238b293478646cc95.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/furni_unlock_2276cd50354b25d843785b1bf66007c4.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/gifteffect_991a3f38fa8e521fdd7ed6964aca6af3.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/gifteffect_87960bc504a0f526a84810da51cb6436.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_h_e7b2d6b718f125da76c39a1856207a96.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_t_ec1e98b585e71666de7286673b4249f3.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/click_bg_49b10808940093cb050b710dd967d8c2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/empty_handed_efc3aa5df2617c11b674b585be49d72e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/equp_bg_3d8359604f5fd3499facc5b166c15c36.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/hand_776a68263f5766c6bfe18c66d53d3c73.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/hand_equp_d33a5650caab402ada3dab200ad54843.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/hand_equp_eda606f2ae8f79e4a5bcfd43e77f1a0e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/list_bg_7a6678fa3149820815ae5214c5e1eb5d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/superscript_h_225bb9dfd790e08adac75bebe1aa349d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/icon_common_495036d9cdbba12256a27f66b168933b.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/icon_common_939ce3ab3eef4745dd8ac92fb504cbe1.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/illustrate_11428831bfe87da778dc70bc00f1a06f.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/illustrate_067f6db85ee8969fb9a2a4a5d078ba93.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/illustrate_new_1b277710b4b858beac916ecf17986ad8.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/illustrate_new_0a4176ca42ff27e7d42f74aac992270e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg_48d949af1cd2c5c5c2aeef14e18649ef.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/close_5a695fadbc87eb6622e794c55549b07b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/des_bg_1aee7ad8b42133a6425f8218da8afb02.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/item_pop_card_0f528544e658d94e2a191ee7360731cd.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/item_pop_card_cdff672906df1c6b49343b9879149d65.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/name_bg_a1343f61eae5338e2d2ce78a87c1a517.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/layout_b5a283c8a1ec23d52b903fd866c5cedd.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/layout_6e23153ccfc6f78796879c1a92656db2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/curtain_e7a4efd380b0f71323de9e554b0b945e.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/curtain_fe3d9a1d2babcd3ec1c4299a970777bc.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/grass_ab069fea2704c786c0856b5baed6a00b.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/grass_2712e69c8d7f3d945116294e3a11b2f6.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/loading_31a457984303a2708c1d0f6916349fb3.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/loading_8106c870bc4b77c3c0c20dd6d12bc816.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/loading_bg_5b235f99a1f8d88777034220d46beb98.jpeg"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/loading_ui_a115257d12cd94da1f59eedaacbc3296.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/loading_ui_f269f242887fa77e0901bd899de2092a.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/login_9cab4170c90e69d85fcf2c2d4ee4c351.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/login_a0e7ff229e2f8e00b387dffa68e36985.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mail_b44595e60741b7479e71b0ba2cd50288.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mail_4a06442adcbff136dfcd3ced58d21c9f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mainui_54319188e82f1c95733e9e892cb4d545.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mainui_fc0ff4889d7b1800eb143103b23a8df4.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/manor_8287c971459d51721e94e6a590769435.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/manor_26a54b1234ad8c7d07bef08dc509bba1.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/map_e51cf4ce6db0f39cd9a396fb86dcfce1.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/map_6877385cf3237ef5b4151ecbd9f072e0.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/map_room_icon_2d7024088cf2da8f06708384ad9df0a5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/party_icon_1_3fda7e2ecd5281e5bd5cf463baa834cd.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/town_entrance_1_d07dff8f80366799aadaa82fb371bb98.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/market_6057123f032c649356beda95886a5745.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/market_ec472312882e0b95299ece805aeff399.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mask_loading_63ede0e209877dc3347228b698b79788.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mask_loading_c5b4a1c4663e873a2b8d6f6830cf3fb6.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_car_da6427cd5b16633d204cb5b07906fb9a.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_car_25376021706d4cc2cbb7ff94fb2878f3.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_new_0d1299aca7e9a142ff53986b39053747.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mine_new_7c0b149b7c28cab85246fce3b50d4af1.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/settlement_c900ff7e97a2a42b2046eb1862d4e537.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/settlement_72355e4e95cb722706b7da153c0e151f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/multiple_rooms_2eb74ddedfc93c75674a7aa3b5993942.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/multiple_rooms_7ce81c65816b0a2319a22ac9a4850ca9.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/order_b055d485bad88f09b352140995cf130a.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/order_c4a5f6137266266cb69e88eed7316861.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/party_8d89fae2450c216f2135931b80d2ee54.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/party_ac6bdd0c528d3934fabe2288d5d1735e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/people_action_35ce56c091ca468fc3be7284df7ded8d.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/people_action_3f9db72f817d909251b5190786b4c2ff.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_alert_0a45a12a977cc0dbf4853e26da6d6bc8.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_alert_09ea0b5392777e9c794440ba15f50a9b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/login_notice_bg_1f90090b5ad420b035bb13e93de4180a.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_boot_6e179d2853684e2d29e446d95b458450.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_boot_226a26c576078004d83ac65117ef72bf.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_chat_23ed40e30507d0b167b24d5e5ac40f66.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_chat_486d805fa4e27486b4dda091e6f7d1a5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_login_bdbab63d26fd67e221b049fc8054c184.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_login_cbd554c219da6c461a3dab9c27848396.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_message_box_6558b07a4d953c77f0089e04c5953f25.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_message_box_4dc40237ec37f637a476d2c6d5ecf74f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_navigate_cn_66fe3768ccb377d8e02f89727f678f4e.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_navigate_cn_3215f380167850a526b66107d76caf1e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_navigate_en_41c5b70cd324a881ece0a13709891412.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_navigate_en_2777dabac751269d02aa26f1d3424369.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg_7ad46b2d8a352b2faca1c3d4d782ae04.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg_big_d150215c433b7d44df423875e3c2279e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_roomlist_a7a9539c52f708cbf9a11c92894b2855.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/pica_roomlist_ac264ef67dca400aa0c69d47eeea0bdd.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/player_info_bf825ec400bbb417c0bec7cda11a8e81.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/player_info_ded8ada497f54af2ac4669b094d95752.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg_caf440f42cf8d2ce404f0ef33436384f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/recast_a6583a7ce5003d68906f71345424f540.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/recast_3f330540078633a8bf7c8ae5d5d94650.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/recharge_7d7a3cb621b91213a15ec453b8cf58b6.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/recharge_5d10123d44b6cf71becd594fd9a4b8d5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/repair_furniture_8dfb3e4257f596060123b589f6496fc5.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/repair_furniture_d681746b2a16863d7e5679a4049471e9.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roam_6e985740865f24296b2891c3e20b6d61.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roam_a0f173a397e082d8193defa78929b8a9.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roam_stripe_c1f6f93ec4bb147fbc12c825ec04d9d2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roam_topic_7e45baa81ea77fcf2c1bafa1ae313a97.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roam_topic1_639a542392183d47b5acf6e8daa8eff4.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/room_decorate_379230d55f1893d0462844bd30a1c9e3.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/room_decorate_62dd16f5433a078e068a6e900cef4d13.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/room_information_04e2405bafc4ffde31273eb7ae283704.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/room_information_e6ea46f20a88ee49693048b4f3885b71.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/stareffect_c1ea2da208c58ef5e205b2500b7d565d.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/stareffect_a117b4e96621610b305205158b077c88.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/survey_c288cd41021240d2f9d1285126fee86d.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/survey_cb8a999d246232c56ed6960abcafb3b8.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/task_aff5a4509f234b486bb001ba11780a26.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/task_5a1d01d97ee0314fc2edc4671eb704d5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/Create_bg_texture_f9f6e20e43e2dc8bc52b0fe96150fdde.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/Create_role_bg_9d6aa29760bf3c44086375ab19c44243.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/Recast_aims_icon_bg_c292568e3190acd23b59ecaa89e36b90.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/Recast_bg_texture_3b873fc99cd9a58433be2b2c07633813.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/Recast_list_bg_389784320b762e2aa4e041c3b8b24fe2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/avater_bg_adorn_fde1ba0bdcec91996c1c14fc2f9147a4.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/avater_bg_stripe_9f7ec76f87978f792c061b3a938955ca.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bag_bg_0f90272b946617e96ef6f6114a5a4a49.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/treasure_ece0766d24980711d617c047eabe1751.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/treasure_561c409c1cfec55840734f65e76c7ac8.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base_7bc9a17118ef1087cd8dfa4f79dccb28.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base_a9cf2c70b1a84ec51c625bc529a93c4b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base2_ccf0d870e1e98813971e850dec2448cf.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base2_4c3889f32176b588bcc8636d7b4661cd.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base3_c938a311625b4fbff0266edadb023db3.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_base3_a3df346b4244cdb27552d4340957ebec.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_common_28689ad5bf6a94d58e38196a23333084.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_common_e566c590f5e5342d415f5071bfcbdf7c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_common1_33a209ec4513869e2abd77abfae881dd.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ui_common1_a0a20bf52aa3eaa1d0847a0b9ba73a86.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/work_e80a85eb0be2be894c9487a89bd99833.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/work_29a31d9af8bf056337364d8981cb220e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bag_033bc7b89fde723622dc1e4ac723418e.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bag_40fdf47c56f066a97c9e733828c93201.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bagView_1ef43933e0a41a64e14bd18c9d107b7a.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bagView_2a3e4ac617074c95470da9d532151e63.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/itemChose_9768bc21107b55f3b839810f662965c9.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/itemChose_60da72d59b353befcb8181ecca691cf4.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/slip_34890fde3e9180f5ffc0b071a94533cb.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/slip_527410a2ca3fdb6bc9a62b4a38784a84.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mainui_mobile_b6a41b8c65e57514f7137e02ec37171e.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/mainui_mobile_0162fa01ad5aaaac1ef535eab63fb3b5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg_7e44bcdd4d8c42c6caa76a1b78a88585.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bubble_arrow_2e895eba6dd0ad092825083c4160c31d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/chat_atlas_ef656272a9c6595c65b97b6e9fc34ed4.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/chat_atlas_b18818d944963b87d1f95340c387e602.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/input_bg_1c943e8c0f0f9cc2c70f904365cb592d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_18ec4080c34b03b1121675f2971f2229.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_blue_bf185cfc73b4d2f0e444c159e43d595d.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_blue_8482cf55f2a705540a3a8c556345cc64.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_blue__ced458fec61d869857ef165a1f2b63dc.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_red_7cb7bf42bc7ac928600897bcecc06c8f.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_red_d717d78350180811e14197db3caeddc4.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_transparent_974b2a4536d279cc820f5e34c286cb2c.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_transparent_e355a5b88bf5cdbf51c40d6410825d40.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_white_b3ad2e7c23ee0d72d5c1e9284c1ab508.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_white_e6f243efc321d3132696cedeb98c594d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_yellow_b974bd4ea8358a6b82c06272d3344364.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/button_yellow_f6de84c8a7eab6ba616014676d0292ab.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/common_arrow_990cd97958739229cfe684e7fdef8156.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/common_border_2df524950554d1e56cfc3728c0e0e15b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/common_channelSelect_69ef4a9564444ef79b708ae0f3dba5fe.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/common_channelUnSelect_c86fe6b26ea445c5411eb728d1ae7121.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/common_clsBtn_e062cad274af2b81b330c1d79707021d.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/common_clsBtn_afed63b39490a1cdac5209582584b736.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/common_panelBg_924cf5648a675b731f990914f0399c12.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/common_thumb_texture_e3762341940d13eb8b29fca3b0033f28.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/common_track_13a7d17190575b41cbdf239bb7c2550d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/prop_background_5a689c5da7d6b03a45348a810198898b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/background_abd4ba55ecaab95adc21e8b44fe1e5f5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/create_role_552b595de3c48380e98651afb0930252.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/create_role_0cc5c5ec5af9d5b1ad3a48c1e89e4705.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/arrow_1_b311301ad74ce00d1878ef4ad5b631e7.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/arrow_3_07ca4149a5f32b4eebf410f4fa383624.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/arrow_5_3d9f6f16ca61a6a922957e88362f8ad5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/arrow_7_0e4f93d29d467adbe5cbf3c23597ed47.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/confirm_btn_5a0942c12ae282de10e22ab3331a276c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/decorate_atlas_dc3b1b9bdd36124c9478284b2c1d9f50.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/decorate_atlas_59f2391cd1cf90e5c3e174639784fb4c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/recycle_btn_f8a58121c2fb734ff4d7fdf82da74d4f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/turn_btn_6c9498b70bde5ccad10dd1cbd2d9f1ba.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/selectFlag_5d9c4b01369f8c41715dd79fde3b48f8.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/disable_11f9cdfa0129e7608f1f6a68a92fa27c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ellipse01_228bf7df21f9dad864e1d942c258bd45.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ellipse02_902edf038bf9e9327437410de1a5fa12.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ellipse03_902edf038bf9e9327437410de1a5fa12.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ellipse04_303ee28d82580e2a1b0956596e882d7c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ellipse05_098cd1d0f7bf2b48de56621523d3d99d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ellipse06_bb5c5ff1ee7c8653f27986f8bbca4899.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/ellipse07_228bf7df21f9dad864e1d942c258bd45.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/enable01_7a7f46bb5e35a34748fcf297593d75a2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/enable02_a1a9fab715a83198fd66800b21f108ac.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/enable03_7a7f46bb5e35a34748fcf297593d75a2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/falleffect_b7aa75034321428ed33f528a9f8c8857.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/falleffect_d24f6b52c5e67169a5dba7a81760b34a.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/forbid_c2af7bc81379da97ac4433032ed1c995.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/friend_chat_01fe065ccd5898aab55a92a1ab6d03ba.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/friend_go_46af3e3a71d259a5c66fc95ce2e835f3.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg_1cb64da3f41d57c925fe853722d5fef9.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/close_ccd20cc325a09a04bfbc8ff87ea61ed0.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/des_bg_a9f2ea3b71e7ecb627cb0c8bf9846e3c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/item_pop_card_59c65f1b5e84660518cd2c2772a7081a.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/item_pop_card_30530631f0d3ca5b8541d0ccc787e3e6.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/name_bg_c0411b5e396bd023b1f8e682ff89390b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/joystick_54ae62192275b51f26db6a0f595c9a66.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/joystick_764148ebc0bcfb06cb4c9c59a236511a.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/juqing_209234819cdb05e5207622eb46359f22.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/juqing_36ec5957b6d197083ecb7ec7f34f9592.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/loading_361384cc81b550a88774e479722b6866.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/loading_30fe90db092484429678897e0def10a0.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/login_4936963ca8b4f14c7784df46d3e06ed9.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/login_214ccd0a97a5702255707fff34c92b97.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/back_arrow_18536fc8a2651031ddaa6230b55dd4e7.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bg_d8cef9b962ddf20e4cda7ef64b904fba.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/border_d68ca574e46eaad451ea92f0b1b2992d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/categories_down_4339fae01b37ec672b51caf01dcfe260.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/categories_normal_a070224d73a6b456d022599c7052a25a.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/detail_bubble_3f59dd02e411c284cabefba526716ae2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/increase_bd853d013948d1619a4b5d9cb2eb88c5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/input_bg_b0de36e5e59a7f84d278d163eb245f80.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/item_border_798d644360f377cb02ce0f6254ba4826.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/market_aadb1f25fb24c84ac33a3bd7ba84f6b2.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/market_814898832c8e4b12fd62f472d131d242.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/name_bg_44d6fa9bb02a8e196b3d112cf6e893aa.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/price_bg_f9122db07e0c82e6471f2888e49111ee.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/reduce_d20376dfefd599b8d203c55b0412127c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/test_3fb1b113b8f93338571fb9909fe0e167.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tip_red_892becbc22a69fd77efa7e3908d5d3bb.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tuding_icon_ced3a8ce3b7657e34f968919995bd1c2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/yellow_button_down_df701b9822a35a23c58641a2cd42dbf2.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/yellow_button_normal_02763878bfc1c32109a4e0c75f42c331.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/yellow_button_over_efcb7ca3f297d3e8d78337ed31b2b81c.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tuding_18_1d3b884b23d30bd42b5670cbbd82bbab.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tuding_22_a86844603293e6d2a772c5c08f827e3b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/en_ec22291b878bd1cc25963943c82008b1.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/zh-CN_5a269ca1170dbc9a7b802c284615c75e.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/rank_atlas_368702bc2f9b705a29150887ee4a08d7.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/rank_atlas_e848f31dc75435a52cff7731cdbdf6bf.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roambefore_2f437f6d0ec7275b6912f02c1a1dc32a.mp4"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roamone_5b8ec95a66445be7d7adfd203610ae44.mp4"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roamreward_eec990eecc7f617967771b0721b3dd8e.mp4"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/roamtenrepead_96add9734d67a7cfd0276805fe4719dc.mp4"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/preview_bdee64769e843bfbaad80be0a38fba47.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/shopView_98a4d86e5a81630446943bd7050c1b59.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/shopView_cf8769551e4c45ba5519e5d753ecf99e.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/toolTip_cb267aec1c0a47cf622a8eb198ad4993.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/toolTip_4a96371e664a468b3499cd17960c44b5.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/arrow_42fa113d52b22552f0a8bdc7c73f539d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/vip_effect_back_74c91dfbef1e9993a6aebb7bdb29bbe1.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/vip_effect_back_8042967e563fc019754cc97b1bc71037.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/vip_effect_front_adfb8fd144151c0e5434b0202fe5dcea.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/vip_effect_front_cb9f22c95b6f6f514cc534fa3c2915ca.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/vip_icon_2c201434b6f20547af41278e02df1624.png"},function(e,i,n){var a={"./1x/bubble/bubblebg.png":111,"./1x/bubble/tipsicon.png":112,"./1x/common/ui_base.json":113,"./1x/common/ui_base.png":114,"./1x/create_role/create_role.json":115,"./1x/create_role/create_role.png":116,"./1x/equip_upgrade/mine_eqpm.json":117,"./1x/equip_upgrade/mine_eqpm.png":118,"./1x/loading/curtain.json":119,"./1x/loading/curtain.png":120,"./1x/login/login.json":121,"./1x/login/login.png":122,"./1x/market/market.json":123,"./1x/market/market.png":124,"./1x/repair_furniture/repair_furniture.json":125,"./1x/repair_furniture/repair_furniture.png":126,"./1x/ui_base/ui_base.json":127,"./1x/ui_base/ui_base.png":128,"./2x/activity/activity.json":129,"./2x/activity/activity.png":130,"./2x/bottom/bottom.json":131,"./2x/bottom/bottom.png":132,"./2x/bubble/bubblebg.png":133,"./2x/bubble/tipsicon.png":134,"./2x/bulletin/bulletin.json":135,"./2x/bulletin/bulletin.png":136,"./2x/c_street_1/c_street_1.json":137,"./2x/c_street_1/c_street_1.png":138,"./2x/c_street_2/c_street_2.json":139,"./2x/c_street_2/c_street_2.png":140,"./2x/chat/chat.json":141,"./2x/chat/chat.png":142,"./2x/circleeffect/circleeffect.json":143,"./2x/circleeffect/circleeffect.png":144,"./2x/compose/compose.json":145,"./2x/compose/compose.png":146,"./2x/cooking/cooking.json":147,"./2x/cooking/cooking.png":148,"./2x/createrole/createrole.json":149,"./2x/createrole/createrole.png":150,"./2x/cutInmenu/cutInmenu.json":151,"./2x/cutInmenu/cutInmenu.png":152,"./2x/cut_in/cut_in_bg.png":153,"./2x/decorateshop/decorateshop.json":154,"./2x/decorateshop/decorateshop.png":155,"./2x/e_roomupgrade/e_roomupgrade.json":156,"./2x/e_roomupgrade/e_roomupgrade.png":157,"./2x/effect_common/effect_common.json":158,"./2x/effect_common/effect_common.png":159,"./2x/effectlevelup/effectlevelup.json":160,"./2x/effectlevelup/effectlevelup.png":161,"./2x/equip_upgrade/mine_eqpm.json":162,"./2x/equip_upgrade/mine_eqpm.png":163,"./2x/explorelog/explore_bg_stripe_middle.png":164,"./2x/explorelog/explore_bg_stripe_top.png":165,"./2x/explorelog/explore_mask.png":166,"./2x/explorelog/explorelog.json":167,"./2x/explorelog/explorelog.png":168,"./2x/friend_list/friend_list.json":169,"./2x/friend_list/friend_list.png":170,"./2x/friend_message/friend_message.json":171,"./2x/friend_message/friend_message.png":172,"./2x/furni_bag/furni_bag.json":173,"./2x/furni_bag/furni_bag.png":174,"./2x/furni_unlock/furni_unlock.json":175,"./2x/furni_unlock/furni_unlock.png":176,"./2x/gifteffect/gifteffect.json":177,"./2x/gifteffect/gifteffect.png":178,"./2x/hand_equp/hand_equp.json":179,"./2x/hand_equp/hand_equp.png":180,"./2x/icon_common/icon_common.json":181,"./2x/icon_common/icon_common.png":182,"./2x/illustrate/illustrate.json":183,"./2x/illustrate/illustrate.png":184,"./2x/illustrate_new/illustrate_new.json":185,"./2x/illustrate_new/illustrate_new.png":186,"./2x/item_pop_card/item_pop_card.json":187,"./2x/item_pop_card/item_pop_card.png":188,"./2x/layout/layout.json":189,"./2x/layout/layout.png":190,"./2x/loading/curtain.json":191,"./2x/loading/curtain.png":192,"./2x/loading_ui/loading_ui.json":193,"./2x/loading_ui/loading_ui.png":194,"./2x/login/login.json":195,"./2x/login/login.png":196,"./2x/mail/mail.json":197,"./2x/mail/mail.png":198,"./2x/main_ui/mainui.json":199,"./2x/main_ui/mainui.png":200,"./2x/manor/manor.json":201,"./2x/manor/manor.png":202,"./2x/map/map.json":203,"./2x/map/map.png":204,"./2x/map/map_room_icon.png":205,"./2x/map/party_icon_1.png":206,"./2x/map/town_entrance_1.png":207,"./2x/market/market.json":208,"./2x/market/market.png":209,"./2x/mask_loading/mask_loading.json":210,"./2x/mask_loading/mask_loading.png":211,"./2x/mine_car/mine_car.json":212,"./2x/mine_car/mine_car.png":213,"./2x/mine_new/mine_new.json":214,"./2x/mine_new/mine_new.png":215,"./2x/minesettle/settlement.json":216,"./2x/minesettle/settlement.png":217,"./2x/multiple_rooms/multiple_rooms.json":218,"./2x/multiple_rooms/multiple_rooms.png":219,"./2x/order/order.json":220,"./2x/order/order.png":221,"./2x/party/party.json":222,"./2x/party/party.png":223,"./2x/people_action/people_action.json":224,"./2x/people_action/people_action.png":225,"./2x/pica_alert/pica_alert.json":226,"./2x/pica_alert/pica_alert.png":227,"./2x/pica_boot/login_notice_bg.png":228,"./2x/pica_boot/pica_boot.json":229,"./2x/pica_boot/pica_boot.png":230,"./2x/pica_chat/pica_chat.json":231,"./2x/pica_chat/pica_chat.png":232,"./2x/pica_login/pica_login.json":233,"./2x/pica_login/pica_login.png":234,"./2x/pica_message_box/pica_message_box.json":235,"./2x/pica_message_box/pica_message_box.png":236,"./2x/pica_navigate/pica_navigate_cn.json":237,"./2x/pica_navigate/pica_navigate_cn.png":238,"./2x/pica_navigate/pica_navigate_en.json":239,"./2x/pica_navigate/pica_navigate_en.png":240,"./2x/pica_notice/bg.png":241,"./2x/pica_notice/bg_big.png":242,"./2x/pica_roomlist/pica_roomlist.json":243,"./2x/pica_roomlist/pica_roomlist.png":244,"./2x/player_info/player_info.json":245,"./2x/player_info/player_info.png":246,"./2x/reaward_tips/bg.png":247,"./2x/recast/recast.json":248,"./2x/recast/recast.png":249,"./2x/recharge/recharge.json":250,"./2x/recharge/recharge.png":251,"./2x/repair_furniture/repair_furniture.json":252,"./2x/repair_furniture/repair_furniture.png":253,"./2x/roam/roam.json":254,"./2x/roam/roam.png":255,"./2x/roam/roam_stripe.png":256,"./2x/roam/roam_topic.png":257,"./2x/roam/roam_topic1.png":258,"./2x/room_decorate/room_decorate.json":259,"./2x/room_decorate/room_decorate.png":260,"./2x/room_information/room_information.json":261,"./2x/room_information/room_information.png":262,"./2x/stareffect/stareffect.json":263,"./2x/stareffect/stareffect.png":264,"./2x/survey/survey.json":265,"./2x/survey/survey.png":266,"./2x/task/task.json":267,"./2x/task/task.png":268,"./2x/texture/Create_bg_texture.png":269,"./2x/texture/Create_role_bg.png":270,"./2x/texture/Recast_aims_icon_bg.png":271,"./2x/texture/Recast_bg_texture.png":272,"./2x/texture/Recast_list_bg.png":273,"./2x/texture/avater_bg_adorn.png":274,"./2x/texture/avater_bg_stripe.png":275,"./2x/texture/bag_bg.png":276,"./2x/treasure/treasure.json":277,"./2x/treasure/treasure.png":278,"./2x/ui_base/ui_base.json":279,"./2x/ui_base/ui_base.png":280,"./2x/ui_base2/ui_base2.json":281,"./2x/ui_base2/ui_base2.png":282,"./2x/ui_base3/ui_base3.json":283,"./2x/ui_base3/ui_base3.png":284,"./2x/ui_common/ui_common.json":285,"./2x/ui_common/ui_common.png":286,"./2x/ui_common1/ui_common1.json":287,"./2x/ui_common1/ui_common1.png":288,"./2x/work/work.json":289,"./2x/work/work.png":290,"./3x/activity/activity.json":291,"./3x/activity/activity.png":292,"./3x/bottom/bottom.json":293,"./3x/bottom/bottom.png":294,"./3x/bubble/bubblebg.png":295,"./3x/bubble/tipsicon.png":296,"./3x/bulletin/bulletin.json":297,"./3x/bulletin/bulletin.png":298,"./3x/c_street_1/c_street_1.json":299,"./3x/c_street_1/c_street_1.png":300,"./3x/c_street_2/c_street_2.json":301,"./3x/c_street_2/c_street_2.png":302,"./3x/chat/chat.json":303,"./3x/chat/chat.png":304,"./3x/circleeffect/circleeffect.json":305,"./3x/circleeffect/circleeffect.png":306,"./3x/compose/bprint_bg_1.png":307,"./3x/compose/bprint_bg_2.png":308,"./3x/compose/bprint_mask.png":309,"./3x/compose/compose.json":310,"./3x/compose/compose.png":311,"./3x/compose/lock.png":312,"./3x/compose/main_bg.jpg":313,"./3x/compose/main_bg.png":314,"./3x/compose/main_bg_01.png":315,"./3x/compose/separator.png":316,"./3x/compose/source_bg.png":317,"./3x/compose/sourcelist_bg.png":318,"./3x/compose/sourcelist_title_1.png":319,"./3x/compose/tag_new.png":320,"./3x/compose/tag_rank_a.png":321,"./3x/compose/tag_rank_b.png":322,"./3x/compose/tag_rank_c.png":323,"./3x/compose/tag_ready.png":324,"./3x/compose/tips_arrow.png":325,"./3x/compose/tips_bg.png":326,"./3x/compose/title_bg.png":327,"./3x/cooking/cooking.json":328,"./3x/cooking/cooking.png":329,"./3x/createrole/createrole.json":330,"./3x/createrole/createrole.png":331,"./3x/cutInmenu/cutInmenu.json":332,"./3x/cutInmenu/cutInmenu.png":333,"./3x/cut_in/cut_in_bg.png":334,"./3x/decorateshop/decorateshop.json":335,"./3x/decorateshop/decorateshop.png":336,"./3x/e_roomupgrade/e_roomupgrade.json":337,"./3x/e_roomupgrade/e_roomupgrade.png":338,"./3x/e_roomupgrade/effect_bg.png":339,"./3x/e_roomupgrade/lv0.png":340,"./3x/e_roomupgrade/lv1.png":341,"./3x/e_roomupgrade/lv2.png":342,"./3x/e_roomupgrade/lv3.png":343,"./3x/e_roomupgrade/lv4.png":344,"./3x/e_roomupgrade/room_decorate/room_decorate.json":345,"./3x/e_roomupgrade/room_decorate/room_decorate.png":346,"./3x/e_roomupgrade/tittle_bg.png":347,"./3x/effect_common/effect_common.json":348,"./3x/effect_common/effect_common.png":349,"./3x/effectlevelup/effectlevelup.json":350,"./3x/effectlevelup/effectlevelup.png":351,"./3x/equip_upgrade/bg1.png":352,"./3x/equip_upgrade/bottombg.png":353,"./3x/equip_upgrade/bottombg1.png":354,"./3x/equip_upgrade/equipbg.png":355,"./3x/equip_upgrade/equipbg1.png":356,"./3x/equip_upgrade/equipbg2.png":357,"./3x/equip_upgrade/lock.png":358,"./3x/equip_upgrade/mine_eqpm.json":359,"./3x/equip_upgrade/mine_eqpm.png":360,"./3x/equip_upgrade/ok.png":361,"./3x/equip_upgrade/test_equip.png":362,"./3x/equip_upgrade/titlebg.png":363,"./3x/equip_upgrade/topbg.png":364,"./3x/equip_upgrade/topbg1.png":365,"./3x/explorelog/explore_bg_stripe_middle.png":366,"./3x/explorelog/explore_bg_stripe_top.png":367,"./3x/explorelog/explore_mask.png":368,"./3x/explorelog/explorelog.json":369,"./3x/explorelog/explorelog.png":370,"./3x/friend_list/friend_list.json":371,"./3x/friend_list/friend_list.png":372,"./3x/friend_message/friend_message.json":373,"./3x/friend_message/friend_message.png":374,"./3x/furni_bag/furni_bag.json":375,"./3x/furni_bag/furni_bag.png":376,"./3x/furni_unlock/furni_unlock.json":377,"./3x/furni_unlock/furni_unlock.png":378,"./3x/gifteffect/gifteffect.json":379,"./3x/gifteffect/gifteffect.png":380,"./3x/hand_equp/button_h.png":381,"./3x/hand_equp/button_t.png":382,"./3x/hand_equp/click_bg.png":383,"./3x/hand_equp/empty_handed.png":384,"./3x/hand_equp/equp_bg.png":385,"./3x/hand_equp/hand.png":386,"./3x/hand_equp/hand_equp.json":387,"./3x/hand_equp/hand_equp.png":388,"./3x/hand_equp/list_bg.png":389,"./3x/hand_equp/superscript_h.png":390,"./3x/icon_common/icon_common.json":391,"./3x/icon_common/icon_common.png":392,"./3x/illustrate/illustrate.json":393,"./3x/illustrate/illustrate.png":394,"./3x/illustrate_new/illustrate_new.json":395,"./3x/illustrate_new/illustrate_new.png":396,"./3x/item_pop_card/bg.png":397,"./3x/item_pop_card/close.png":398,"./3x/item_pop_card/des_bg.png":399,"./3x/item_pop_card/item_pop_card.json":400,"./3x/item_pop_card/item_pop_card.png":401,"./3x/item_pop_card/name_bg.png":402,"./3x/layout/layout.json":403,"./3x/layout/layout.png":404,"./3x/loading/curtain.json":405,"./3x/loading/curtain.png":406,"./3x/loading/grass.json":407,"./3x/loading/grass.png":408,"./3x/loading/loading.json":409,"./3x/loading/loading.png":410,"./3x/loading/loading_bg.jpeg":411,"./3x/loading_ui/loading_ui.json":412,"./3x/loading_ui/loading_ui.png":413,"./3x/login/login.json":414,"./3x/login/login.png":415,"./3x/mail/mail.json":416,"./3x/mail/mail.png":417,"./3x/main_ui/mainui.json":418,"./3x/main_ui/mainui.png":419,"./3x/manor/manor.json":420,"./3x/manor/manor.png":421,"./3x/map/map.json":422,"./3x/map/map.png":423,"./3x/map/map_room_icon.png":424,"./3x/map/party_icon_1.png":425,"./3x/map/town_entrance_1.png":426,"./3x/market/market.json":427,"./3x/market/market.png":428,"./3x/mask_loading/mask_loading.json":429,"./3x/mask_loading/mask_loading.png":430,"./3x/mine_car/mine_car.json":431,"./3x/mine_car/mine_car.png":432,"./3x/mine_new/mine_new.json":433,"./3x/mine_new/mine_new.png":434,"./3x/minesettle/settlement.json":435,"./3x/minesettle/settlement.png":436,"./3x/multiple_rooms/multiple_rooms.json":437,"./3x/multiple_rooms/multiple_rooms.png":438,"./3x/order/order.json":439,"./3x/order/order.png":440,"./3x/party/party.json":441,"./3x/party/party.png":442,"./3x/people_action/people_action.json":443,"./3x/people_action/people_action.png":444,"./3x/pica_alert/pica_alert.json":445,"./3x/pica_alert/pica_alert.png":446,"./3x/pica_boot/login_notice_bg.png":447,"./3x/pica_boot/pica_boot.json":448,"./3x/pica_boot/pica_boot.png":449,"./3x/pica_chat/pica_chat.json":450,"./3x/pica_chat/pica_chat.png":451,"./3x/pica_login/pica_login.json":452,"./3x/pica_login/pica_login.png":453,"./3x/pica_message_box/pica_message_box.json":454,"./3x/pica_message_box/pica_message_box.png":455,"./3x/pica_navigate/pica_navigate_cn.json":456,"./3x/pica_navigate/pica_navigate_cn.png":457,"./3x/pica_navigate/pica_navigate_en.json":458,"./3x/pica_navigate/pica_navigate_en.png":459,"./3x/pica_notice/bg.png":460,"./3x/pica_notice/bg_big.png":461,"./3x/pica_roomlist/pica_roomlist.json":462,"./3x/pica_roomlist/pica_roomlist.png":463,"./3x/player_info/player_info.json":464,"./3x/player_info/player_info.png":465,"./3x/reaward_tips/bg.png":466,"./3x/recast/recast.json":467,"./3x/recast/recast.png":468,"./3x/recharge/recharge.json":469,"./3x/recharge/recharge.png":470,"./3x/repair_furniture/repair_furniture.json":471,"./3x/repair_furniture/repair_furniture.png":472,"./3x/roam/roam.json":473,"./3x/roam/roam.png":474,"./3x/roam/roam_stripe.png":475,"./3x/roam/roam_topic.png":476,"./3x/roam/roam_topic1.png":477,"./3x/room_decorate/room_decorate.json":478,"./3x/room_decorate/room_decorate.png":479,"./3x/room_information/room_information.json":480,"./3x/room_information/room_information.png":481,"./3x/stareffect/stareffect.json":482,"./3x/stareffect/stareffect.png":483,"./3x/survey/survey.json":484,"./3x/survey/survey.png":485,"./3x/task/task.json":486,"./3x/task/task.png":487,"./3x/texture/Create_bg_texture.png":488,"./3x/texture/Create_role_bg.png":489,"./3x/texture/Recast_aims_icon_bg.png":490,"./3x/texture/Recast_bg_texture.png":491,"./3x/texture/Recast_list_bg.png":492,"./3x/texture/avater_bg_adorn.png":493,"./3x/texture/avater_bg_stripe.png":494,"./3x/texture/bag_bg.png":495,"./3x/treasure/treasure.json":496,"./3x/treasure/treasure.png":497,"./3x/ui_base/ui_base.json":498,"./3x/ui_base/ui_base.png":499,"./3x/ui_base2/ui_base2.json":500,"./3x/ui_base2/ui_base2.png":501,"./3x/ui_base3/ui_base3.json":502,"./3x/ui_base3/ui_base3.png":503,"./3x/ui_common/ui_common.json":504,"./3x/ui_common/ui_common.png":505,"./3x/ui_common1/ui_common1.json":506,"./3x/ui_common1/ui_common1.png":507,"./3x/work/work.json":508,"./3x/work/work.png":509,"./bag/bag.json":510,"./bag/bag.png":511,"./bag/bagView.json":512,"./bag/bagView.png":513,"./bag/itemChose.json":514,"./bag/itemChose.png":515,"./bag/slip.json":516,"./bag/slip.png":517,"./baseView/mainui_mobile.json":518,"./baseView/mainui_mobile.png":519,"./chat/bg.png":520,"./chat/bubble_arrow.png":521,"./chat/chat_atlas.json":522,"./chat/chat_atlas.png":523,"./chat/input_bg.png":524,"./common/button.png":525,"./common/button_blue.json":526,"./common/button_blue.png":527,"./common/button_blue_.png":528,"./common/button_red.json":529,"./common/button_red.png":530,"./common/button_transparent.json":531,"./common/button_transparent.png":532,"./common/button_white.json":533,"./common/button_white.png":534,"./common/button_yellow.json":535,"./common/button_yellow.png":536,"./common/common_arrow.png":537,"./common/common_border.png":538,"./common/common_channelSelect.png":539,"./common/common_channelUnSelect.png":540,"./common/common_clsBtn.json":541,"./common/common_clsBtn.png":542,"./common/common_panelBg.png":543,"./common/common_thumb_texture.png":544,"./common/common_track.png":545,"./common/prop_background.png":546,"./controlf/background.png":547,"./create_role/create_role.json":548,"./create_role/create_role.png":549,"./decorate/arrow_1.png":550,"./decorate/arrow_3.png":551,"./decorate/arrow_5.png":552,"./decorate/arrow_7.png":553,"./decorate/confirm_btn.png":554,"./decorate/decorate_atlas.json":555,"./decorate/decorate_atlas.png":556,"./decorate/recycle_btn.png":557,"./decorate/turn_btn.png":558,"./editor/selectFlag.png":559,"./fall_effect/disable.png":560,"./fall_effect/ellipse01.png":561,"./fall_effect/ellipse02.png":562,"./fall_effect/ellipse03.png":563,"./fall_effect/ellipse04.png":564,"./fall_effect/ellipse05.png":565,"./fall_effect/ellipse06.png":566,"./fall_effect/ellipse07.png":567,"./fall_effect/enable01.png":568,"./fall_effect/enable02.png":569,"./fall_effect/enable03.png":570,"./fall_effect/falleffect.json":571,"./fall_effect/falleffect.png":572,"./fall_effect/forbid.png":573,"./friend/friend_chat.png":574,"./friend/friend_go.png":575,"./item_pop_card/bg.png":576,"./item_pop_card/close.png":577,"./item_pop_card/des_bg.png":578,"./item_pop_card/item_pop_card.json":579,"./item_pop_card/item_pop_card.png":580,"./item_pop_card/name_bg.png":581,"./joystick/joystick.json":582,"./joystick/joystick.png":583,"./juqing/juqing.json":584,"./juqing/juqing.png":585,"./loading/loading.json":586,"./loading/loading.png":587,"./login/login.json":588,"./login/login.png":589,"./market/back_arrow.png":590,"./market/bg.png":591,"./market/border.png":592,"./market/categories_down.png":593,"./market/categories_normal.png":594,"./market/detail_bubble.png":595,"./market/increase.png":596,"./market/input_bg.png":597,"./market/item_border.png":598,"./market/market.json":599,"./market/market.png":600,"./market/name_bg.png":601,"./market/price_bg.png":602,"./market/reduce.png":603,"./market/test.png":604,"./market/tip_red.png":605,"./market/tuding_icon.png":606,"./market/yellow_button_down.png":607,"./market/yellow_button_normal.png":608,"./market/yellow_button_over.png":609,"./moneyIcon/tuding_18.png":610,"./moneyIcon/tuding_22.png":611,"./quickchat/en.json":612,"./quickchat/zh-CN.json":613,"./rank/rank_atlas.json":614,"./rank/rank_atlas.png":615,"./roam_effect/roambefore.mp4":616,"./roam_effect/roamone.mp4":617,"./roam_effect/roamreward.mp4":618,"./roam_effect/roamtenrepead.mp4":619,"./roampreview/preview.json":620,"./shop/shopView.json":621,"./shop/shopView.png":622,"./toolTip/toolTip.json":623,"./toolTip/toolTip.png":624,"./usermenu/arrow.png":625,"./vip/vip_effect_back.json":626,"./vip/vip_effect_back.png":627,"./vip/vip_effect_front.json":628,"./vip/vip_effect_front.png":629,"./vip/vip_icon.png":630};function webpackContext(e){var i=webpackContextResolve(e);return n(i)}function webpackContextResolve(e){if(!n.o(a,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return a[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(a)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=631},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function LogicPoint(e,i){void 0===e&&(e=0),void 0===i&&(i=e),this.x=e,this.y=i}return LogicPoint.prototype.setTo=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=e),this.x=e,this.y=i,this},LogicPoint}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function Tool(){}return Tool.equalArr=function(e,i){if(e.length!==i.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==i[n])return!1;return!0},Tool.getPosByScenes=function(e,i){var n=e.cameras.main;return{x:i.x-n.scrollX,y:i.y-n.scrollY}},Tool.twoPointDistance=function(e,i){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))},Tool.twoPointRadin=function(e,i){var n=e.x-i.x,a=e.y-i.y,s=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),o=Math.acos(n/s);return i.y<e.y&&(o=-o),o},Tool.formatChineseString=function(e,i,n){"string"==typeof i&&(i=parseInt(i,10));var a=Math.floor(n/i);return this.chunk(e,a).join(" ")},Tool.checkChinese=function(e){for(var i=/[\u4e00-\u9fa5]+/,n=e.split(""),a=0,s=n.length;a<s;a++)if(i.test(n[a]))return!0;return!1},Tool.checkItemName=function(e,i){var n=i.split("")||[],a=!1;return n.forEach((function(i){if(i)for(var n=new RegExp(i),s=e.split(""),o=0,h=s.length;o<h;o++)if(n.test(s[o])){a=!0;break}})),a},Tool.calcAngle=function(e,i){return Math.atan2(i.y-e.y,i.x-e.x)*(180/Math.PI)},Tool.calculateDirectionByRadin=function(e){var i=e*(180/Math.PI);return i>90?3:i>=0?5:i>=-90?7:1},Tool.angleToDirections=function(e,i,n){switch(void 0===n&&(n={}),n.left=!1,n.right=!1,n.up=!1,n.down=!1,e=(e+360)%360,i){case 0:e<180?n.down=!0:n.up=!0;break;case 1:e>90&&e<=270?n.left=!0:n.right=!0;break;case 2:e>45&&e<=135?n.down=!0:e>135&&e<=225?n.left=!0:e>225&&e<=315?n.up=!0:n.right=!0;break;case 3:e>22.5&&e<=67.5?(n.down=!0,n.right=!0):e>67.5&&e<=112.5?n.down=!0:e>112.5&&e<=157.5?(n.down=!0,n.left=!0):e>157.5&&e<=202.5?n.left=!0:e>202.5&&e<=247.5?(n.left=!0,n.up=!0):e>247.5&&e<=292.5?n.up=!0:e>292.5&&e<=337.5?(n.up=!0,n.right=!0):n.right=!0}return n},Tool.checkPointerContains=function(e,i){if(!e)return!1;var n=-e.width/2,a=e.width/2,s=-e.height/2,o=e.height/2;if(i){var h=e.getWorldTransformMatrix(),l=h.scaleX,c=(i.x-h.tx)/l,m=(i.y-h.ty)/l;return n<=c&&a>=c&&s<=m&&o>=m}return!1},Tool.baseName=function(e){var i=new String(e).substring(e.lastIndexOf("/")+1);return-1!==i.lastIndexOf(".")&&(i=i.substring(0,i.lastIndexOf("."))),i},Tool.getRectangle=function(e,i){for(var n=new Phaser.Geom.Rectangle(0,0,0,0),a=e.parentContainer,s=e.scale;a&&a!==i;)s*=a.scale,a=a.parentContainer;var o=e.width*s,h=e.height*s,l=e.getWorldTransformMatrix();return n.left=l.tx-o*e.originX,n.right=l.tx+o*(1-e.originX),n.top=l.ty-h*e.originY,n.bottom=l.ty+h*(1-e.originY),n},Tool.isNumeric=function(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))},Tool.chunk=function(e,i){for(var n=[],a=0;a<e.length;a+=i)n.push(e.substr(a,i));return n},Tool}()},function(e,i,n){"use strict";!function(){function Algorithm(){}Algorithm.median=function(e){var i=e.sort((function(e,i){return i-e})),n=Math.floor(i.length/2);return i.length%2==0?(i[n-1]+i[n])/2:i[n]}}()},function(e,i,n){"use strict";var a,s=n(49),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)});!function(e){function LogicRectangle45(i,n,a,s){var o=e.call(this,i,n,a,s)||this;return o.row=0,o.col=0,o.endRow=0,o.endCol=0,o.row=i,o.col=n,o.endRow=a,o.endCol=s,o}o(LogicRectangle45,e)}(s.a)},function(e,i,n){"use strict";Math.cos(45*Math.PI/180),Math.sin(45*Math.PI/180)},function(e,i,n){"use strict";!function(){function Intersects(){}Intersects.RectangleToRectangle=function(e,i){return!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)&&!(e.right<i.x||e.bottom<i.y||e.x>i.right||e.y>i.bottom)}}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function Pos(e,i,n,a){this.x=e||0,this.y=i||0,this.z=n||0,this.depth=0|a}return Pos.prototype.add=function(e,i,n){return this.x+=e,this.x+=i,this.z+=n||0,this},Pos.prototype.equal=function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.depth===this.depth},Pos.prototype.toString=function(){return"Pos >> x: "+this.x+", y: "+this.y+", z: "+this.z+", depth: "+this.depth},Pos.prototype.toPoint=function(){return new Pos(this.x,this.y)},Pos}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function a(e,i){this.width=e,this.height=i}},function(e,i,n){"use strict";n.d(i,"a",(function(){return s}));var a=n(667),__spreadArrays=function(){for(var e=0,i=0,n=arguments.length;i<n;i++)e+=arguments[i].length;var a=Array(e),s=0;for(i=0;i<n;i++)for(var o=arguments[i],h=0,l=o.length;h<l;h++,s++)a[s]=o[h];return a},s=function(){function Helpers(){}return Helpers.genId=function(){return(new a).natural({min:1e4,max:Helpers.MAX_ID})},Helpers.flipArray=function(e){if(e){var i=__spreadArrays(e),n=[];if(i.length>0)for(var a=i[0].length,s=0;s<a;s++){n[s]=[];for(var o=0,h=i;o<h.length;o++){var l=h[o];n[s].push(l[s])}}return n}},Helpers.openUrl=function(e){var i=window.open("","_blank");i&&(i.location.href=e)},Helpers.MAX_ID=Math.pow(2,31),Helpers}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return h}));var a,s=n(48),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(){function EventDispatcher(){}return EventDispatcher.prototype.hasListener=function(e){return!!(this._events&&this._events[e])},EventDispatcher.prototype.emit=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(!this._events||!this._events[e])return!1;var a=this._events[e];if(a.run)a.once&&delete this._events[e],null!=i?a.runWith(i):a.run();else{for(var s=0,o=a.length;s<o;s++){var h=a[s];h&&(null!=i?h.runWith(i):h.run()),h&&!h.once||(a.splice(s,1),s--,o--)}0===a.length&&this._events&&delete this._events[e]}return!0},EventDispatcher.prototype.on=function(e,i,n,a){return void 0===a&&(a=null),this._createListener(e,n,i,a,!1)},EventDispatcher.prototype.once=function(e,i,n,a){return void 0===a&&(a=null),this._createListener(e,n,i,a,!0)},EventDispatcher.prototype.off=function(e,i,n,a){if(void 0===a&&(a=!1),!this._events||!this._events[e])return this;var s=this._events[e];if(null!=i)if(s.run)n&&s.caller!==n||s.method!==i||a&&!s.once||(delete this._events[e],s.recover());else{for(var o=0,h=s.length,l=0,c=s.length;l<c;l++){var m=s[l];m?!m||n&&m.caller!==n||null!=i&&m.method!==i||a&&!m.once||(o++,s[l]=null,m.recover()):o++}o===h&&delete this._events[e]}return this},EventDispatcher.prototype.offAll=function(e){void 0===e&&(e=null);var i=this._events;if(!i)return this;if(e)this._recoverHandlers(i[e]),delete i[e];else{for(var n in i)this._recoverHandlers(i[n]);this._events=null}return this},EventDispatcher.prototype.offAllCaller=function(e){if(e&&this._events)for(var i in this._events)this.off(i,e,null);return this},EventDispatcher.prototype.destroy=function(){this.offAll()},EventDispatcher.prototype._createListener=function(e,i,n,a,s,o){void 0===o&&(o=!0),o&&this.off(e,i,n,s);var h=l.create(i||this,n,a,s);this._events||(this._events={});var c=this._events;return c[e]?c[e].run?c[e]=[c[e],h]:c[e].push(h):c[e]=h,this},EventDispatcher.prototype._recoverHandlers=function(e){if(e)if(e.run)e.recover();else for(var i=e.length-1;i>-1;i--)e[i]&&(e[i].recover(),e[i]=null)},EventDispatcher}(),l=function(e){function EventHandler(i,n,a,s){return e.call(this,i,n,a,s)||this}return o(EventHandler,e),EventHandler.create=function(e,i,n,a){return void 0===n&&(n=null),void 0===a&&(a=!0),EventHandler._mpool.length?EventHandler._mpool.pop().setTo(e,i,n,a):new EventHandler(e,i,n,a)},EventHandler.prototype.recover=function(){this._id>0&&(this._id=0,EventHandler._mpool.push(this.clear()))},EventHandler._mpool=[],EventHandler}(s.a)},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function Color(){}return Color.brownish="#996600",Color.white="#ffffff",Color.yellow="#FFD248",Color.black="#000000",Color.red="#E33922",Color.title="#905B06",Color}()},function(e,i,n){"use strict";!function(){function CopyProtoType(){}CopyProtoType.copyProtoParam=function(e){return e.forEach((function(e){for(var i in e)"function"!=typeof e.constructor.prototype[i]&&(e.hasOwnProperty(i)||(e[i]=e.constructor.prototype[i]))})),e}}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function ValueResolver(){var e=this;this.resolver=null,this.rejecter=null,this.set=function(i,n){if(void 0===n&&(n=null),e.resolver){var a=new Error("Resolver already exists");if(n)return n(a);throw a}e.resolver=i,e.rejecter=n},this.promise=function(i){return new Promise((function(n,a){if(e.set(n,a),i)try{i()}catch(i){e.reject(i)}}))},this.resolve=function(i){if(!e.resolver){return e.rejecter?e.rejecter("No Resolver"):void 0}e.resolver(i),e.resolver=null,e.rejecter=null},this.reject=function(i){if(!e.rejecter)throw i;e.rejecter(i),e.resolver=null,e.rejecter=null}}return ValueResolver.create=function(){return new ValueResolver},ValueResolver}()},function(e,i){},function(e,i,n){"use strict";var a=n(53),s=n(8),o=n(23),h=n(29);!function(){function AStar(e){this.sizeChart=e}AStar.prototype.init=function(e){this.finder?this.reset(e):(this.grid=new a.Grid(e),this.finder=new a.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0}))},AStar.prototype.reset=function(e){this.grid=new a.Grid(e)},AStar.prototype.setWalkableAt=function(e,i,n){this.grid&&this.grid.setWalkableAt(e,i,n)},AStar.prototype.isWalkableAt=function(e,i){return!!this.grid&&this.grid.isWalkableAt(e,i)},AStar.prototype.find=function(e,i,n){var a=this;if(this.finder){if(this.grid){var l=[],c=this.sizeChart.miniSize,m=c.rows,f=c.cols,g=h.a.transformTo45(e,c);if(this._invalidPoint(g,f,m))return l;var _=[];if(i.forEach((function(e){e=h.a.transformTo45(e,c),a._invalidPoint(e,f,m)||_.push(e)})),0===_.length)return l;this.gridBackup=this.grid.clone();for(var T=0,x=this.finder.findPathToMultipleEnds(g.x,g.y,_,this.gridBackup,n);T<x.length;T++){var S=x[T],j=h.a.transformTo90(new o.a(S[0],S[1]),c);j.y+=c.tileHeight/2,l.push(j)}return!1===n&&l.shift(),l}s.a.getInstance().error("can't find path. grid not exist")}else s.a.getInstance().error("finder not exist")},AStar.prototype._invalidPoint=function(e,i,n){return e.x<0||e.x>=i||e.y<0||e.y>=n||!this.isWalkableAt(e.x,e.y)}}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return s}));var a=n(0),s=function(){function TimeUtils(){}return TimeUtils.getDateFormat=function(e,i,n){var s=i?Math.floor(e/864e5):0,o=i?Math.floor(e/36e5)%24:Math.floor(e/36e5),h=Math.floor(e/6e4)%60,l=Math.floor(e/1e3)%60,c="",m="";return m=s>0?""+s+a.i18n.t("timeuint.day")+this.stringFormat(o)+":"+this.stringFormat(h)+":"+this.stringFormat(l):o>0||h>0||l>0?this.stringFormat(o)+":"+this.stringFormat(h)+":"+this.stringFormat(l):""+a.i18n.t("furni_bag.expires"),c+=n?"[color=#FF0000]"+m+"[/color]":m},TimeUtils.stringFormat=function(e){var i=e+"";return i.length<=1&&(i="0"+i),i},TimeUtils.getBriefFormat=function(e){var i=Math.floor(e/864e5),n=Math.floor(e/36e5)%24,s=Math.floor(e/6e4)%60,o=Math.floor(e/1e3)%60;return i>0?""+i+a.i18n.t("timeuint.day")+this.stringFormat(n)+a.i18n.t("timeuint.hour"):n>0?""+this.stringFormat(n)+a.i18n.t("timeuint.hour")+this.stringFormat(s)+a.i18n.t("timeuint.minutes"):s>0||o>0?""+this.stringFormat(s)+a.i18n.t("timeuint.minutes")+this.stringFormat(o)+a.i18n.t("timeuint.second"):""+this.stringFormat(o)+a.i18n.t("timeuint.second")},TimeUtils.dateFormat=function(e,i){var n,a={"Y+":i.getFullYear().toString(),"m+":(i.getMonth()+1).toString(),"d+":i.getDate().toString(),"H+":i.getHours().toString(),"M+":i.getMinutes().toString(),"S+":i.getSeconds().toString()};for(var s in a)(n=new RegExp("("+s+")").exec(e))&&(e=e.replace(n[1],1===n[1].length?a[s]:a[s].padStart(n[1].length,"0")));return e},TimeUtils}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function StringUtils(){}return StringUtils.format=function(e,i){if(0===arguments.length)return this;if("object"==typeof i){for(var n in i)e=e.replace(new RegExp("\\{"+n+"\\}","g"),i[n]);return e}for(var a=0;a<i.length;a++)e=e.replace(new RegExp("\\{"+a+"\\}","g"),i[a]);return e},StringUtils.isNullOrUndefined=function(e){if(null==e)return!0},StringUtils}()},function(e,i,n){"use strict";var a=n(8);!function(){function ObjectAssign(){}ObjectAssign.excludeTagAssign=function(e,i,n){if(void 0===n&&(n="exclude"),e&&i){var s=e[n]||i[n];for(var o in i)if(o!==n&&i.hasOwnProperty(o)){var h=i[o];"object"==typeof h?(e.hasOwnProperty(o)||(Array.isArray(h)?e[o]=[]:e[o]={}),this.excludeTagAssign(e[o],h,n)):s?-1===s.indexOf(o)&&(e[o]=i[o]):e[o]=i[o]}}else a.a.getInstance().error("source",e,"target",i)},ObjectAssign.excludeAssign=function(e,i,n){for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];"object"==typeof s?(e.hasOwnProperty(a)||(Array.isArray(s)?e[a]=[]:e[a]={}),this.excludeAssign(e[a],s)):n?-1===n.indexOf(a)&&(e[a]=i[a]):e[a]=i[a]}},ObjectAssign.excludeAllAssign=function(e,i){for(var n in i)if(i.hasOwnProperty(n)){var a=i[n];"object"==typeof a?(e.hasOwnProperty(n)||(Array.isArray(a)?e[n]=[]:e[n]={}),this.excludeAllAssign(e[n],a)):e.hasOwnProperty(n)||(e[n]=a)}}}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function UiUtils(){}return UiUtils.baseDpr=2,UiUtils.baseScale=1,UiUtils.MaxDpr=3,UiUtils}()},function(e,i,n){"use strict";var a=n(8);!function(){function HttpLoadManager(){this.mCacheList=[],this.mCurLen=0}HttpLoadManager.prototype.update=function(e,i){if(this.mCacheList&&this.mCurLen<HttpLoadManager.maxLen)for(var n=HttpLoadManager.maxLen-this.mCurLen,a=this.mCacheList.splice(0,n),s=0;s<n;s++){var o=a[s];o&&(this.mCurLen++,o.send())}},HttpLoadManager.prototype.destroy=function(){this.mCacheList.length=0,this.mCacheList=[],this.mCurLen=0},HttpLoadManager.prototype.addLoader=function(e){var i=this;if(this.mCurLen<HttpLoadManager.maxLen){var n=e.path,s=e.responseType;return new Promise((function(e,o){var h=new XMLHttpRequest;h.addEventListener("error",(function(){a.a.getInstance().log("http error =============>>>>")})),h.timeout=2e4,h.onload=function(a){i.mCurLen--;var s=a.currentTarget;s&&200===s.status?e(a.currentTarget):o(n+" load error "+s.status)},h.onerror=function(){i.mCurLen--,a.a.getInstance().log("http error ====>"),o(n+" load error!!!!!")},h.ontimeout=function(e){i.mCurLen--,a.a.getInstance().log("http timeout ====>"),o(n+" load ontimeout!!!!!")},h.open("GET",n,!0),h.responseType=s||"",i.mCurLen++,h.send()}))}this.mCacheList.unshift(e)},HttpLoadManager.prototype.startSingleLoader=function(e){var i=this,n=e.path,s=e.responseType;return new Promise((function(e,o){var h=new XMLHttpRequest;h.addEventListener("error",(function(){a.a.getInstance().log("http error =============>>>>")})),h.timeout=2e4,h.onload=function(a){i.mCurLen--;var s=a.currentTarget;s&&200===s.status?e(a.currentTarget):o(n+" load error "+s.status)},h.onerror=function(){i.mCurLen--,a.a.getInstance().log("http error ====>"),o(n+" load error!!!!!")},h.ontimeout=function(e){i.mCurLen--,a.a.getInstance().log("http timeout ====>"),o(n+" load ontimeout!!!!!")},h.open("GET",n,!0),h.responseType=s||"",i.mCurLen>=HttpLoadManager.maxLen?i.mCacheList.push(h):(i.mCurLen++,h.send())}))},HttpLoadManager.prototype.startListLoader=function(e){var i=this;return new Promise((function(n,a){for(var s=e.length,o=0;o<s;o++){var h=e[o];h&&i.startSingleLoader(h).then((function(e){n(e)})).catch((function(){n(null)}))}}))},HttpLoadManager.maxLen=30}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function NumberUtils(){}return NumberUtils.NumberConvertZHCN=function(e){for(var i={0:"零",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九"},n="",a=0,s=e+"";a<s.length;a++){n+=i[s[a]]}return n},NumberUtils}()},function(e,i){},,,,,,,function(e,i,n){"use strict";n.d(i,"f",(function(){return c})),n.d(i,"c",(function(){return s})),n.d(i,"d",(function(){return m})),n.d(i,"e",(function(){return T})),n.d(i,"a",(function(){return Z})),n.d(i,"b",(function(){return tt}));var a,s,o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function BaseDisplay(i,n){var a=e.call(this,i)||this;return a.mAlpha=1,a.mDirection=3,a.mMountList=new Map,a.mCreated=!1,a.mSprites=new Map,a.mLoadDisplayPromise=null,a.mSortX=0,a.mSortY=0,a.mID=0,a.mHasInteractive=!1,a.mID=n,a}return h(BaseDisplay,e),BaseDisplay.prototype.destroy=function(i){this.mSprites.forEach((function(e){return e.destroy()})),this.mSprites.clear(),this.parentContainer&&this.parentContainer.remove(this),this.mHasInteractive=!1,e.prototype.destroy.call(this,i)},BaseDisplay.prototype.load=function(e){var i=this;return this.displayInfo=e,this.displayInfo?(this.mLoadDisplayPromise=new o.ValueResolver,this.mLoadDisplayPromise.promise((function(){i.scene.load.start()}))):Promise.reject("displayInfo error")},BaseDisplay.prototype.displayCreated=function(){this.mCreated=!0,this.createdHandler&&this.createdHandler.runWith(this.displayInfo)},Object.defineProperty(BaseDisplay.prototype,"created",{get:function(){return this.mCreated},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDisplay.prototype,"direction",{get:function(){return this.mDirection},set:function(e){this.mDirection=e,this.mDisplayInfo&&(this.mDisplayInfo.avatarDir=e,this.play(this.mAnimation))},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDisplay.prototype,"displayInfo",{get:function(){return this.mDisplayInfo},set:function(e){this.mDisplayInfo=e},enumerable:!1,configurable:!0}),BaseDisplay.prototype.play=function(e){this.mAnimation=e},BaseDisplay.prototype.changeAlpha=function(e){this.mAlpha!==e&&(this.alpha=e,this.mAlpha=e)},BaseDisplay.prototype.setDirection=function(e){e!==this.direction&&(this.direction=e,this.play(this.mAnimation))},BaseDisplay.prototype.setPosition=function(i,n,a,s){return e.prototype.setPosition.call(this,i,n,a,s),this.update(),this},BaseDisplay.prototype.update=function(){this.updateSort(),this.mMountList&&this.mMountList.forEach((function(e){return e.update()}))},BaseDisplay.prototype.getPosition=function(){var e=new o.LogicPos(this.x,this.y);if(this.mRootMount){var i=this.mRootMount.getPosition();e.x+=i.x,e.y+=i.y}return e},BaseDisplay.prototype.setRootMount=function(e){this.mRootMount=e,this.update()},BaseDisplay.prototype.mount=function(e,i){},BaseDisplay.prototype.unmount=function(e){},BaseDisplay.prototype.destroyMount=function(){this.mMountList.forEach((function(e,i){return e.destroy()})),this.mMountList.clear()},BaseDisplay.prototype.fadeIn=function(e){},BaseDisplay.prototype.fadeOut=function(e){},BaseDisplay.prototype.getSprite=function(e){return this.mSprites.get(e)},BaseDisplay.prototype.updateSort=function(){if(!this.mRootMount){var e=this.x-this.projectionSize.offset.x,i=this.y-this.projectionSize.offset.y;this.mSortX=(e+2*i)/30,this.mSortY=(2*i-e)/30}},Object.defineProperty(BaseDisplay.prototype,"runningAnimation",{get:function(){return this.mAnimation},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDisplay.prototype,"rootMount",{get:function(){return this.mRootMount},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDisplay.prototype,"projectionSize",{get:function(){return this.mProjectionSize||(this.mProjectionSize={offset:{x:0,y:0},width:0,height:0}),this.mProjectionSize},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDisplay.prototype,"sortX",{get:function(){return this.mSortX},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDisplay.prototype,"sortY",{get:function(){return this.mSortY},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDisplay.prototype,"sortZ",{get:function(){return this.z||0},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDisplay.prototype,"id",{get:function(){return this.mID},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDisplay.prototype,"hasInteractive",{get:function(){return this.mHasInteractive},set:function(e){this.mHasInteractive=e},enumerable:!1,configurable:!0}),BaseDisplay}(Phaser.GameObjects.Container),c=function(){function TopDisplay(e,i,n){this.scene=e,this.mFollows=new Map,this.mOwner=i,this.mDpr=n}return TopDisplay.prototype.showNickname=function(e){if(this.mOwner){var i=this.mFollows.get(s.Nickname),n=null;i?n=i.object:(n=this.scene.make.text({style:{fontSize:12*this.mDpr,fontFamily:o.Font.DEFULT_FONT}}).setOrigin(.5).setStroke("#000000",2*this.mDpr),i=new m(n,this.mOwner,this.mDpr),this.mFollows.set(s.Nickname,i)),n.text=e,this.mOwner.topPoint&&(this.addToSceneUI(n),i.setOffset(0,this.mOwner.topPoint.y),i.update())}},TopDisplay.prototype.hideNickname=function(){this.removeFollowObject(s.Nickname)},TopDisplay.prototype.update=function(){this.mFollows&&this.mFollows.forEach((function(e){return e.update()}))},TopDisplay.prototype.addToSceneUI=function(e){throw new Error("")},TopDisplay.prototype.removeFollowObject=function(e){if(this.mFollows&&this.mFollows.has(e)){var i=this.mFollows.get(e);i&&(i.destroy(),this.mFollows.delete(e))}},TopDisplay}(),m=function(){function FollowObject(e,i,n){void 0===n&&(n=1),this.mDpr=n,this.mOffset=new Phaser.Geom.Point,this.mObject=e,this.mTarget=i}return FollowObject.prototype.setOffset=function(e,i){this.mOffset.setTo(e,i),this.update()},FollowObject.prototype.update=function(){if(this.mTarget&&this.mObject){var e=this.mTarget.getPosition();this.mObject.x=Math.round((e.x+this.mOffset.x)*this.mDpr),this.mObject.y=Math.round((e.y+this.mOffset.y)*this.mDpr)}},FollowObject.prototype.remove=function(){if(this.mObject){var e=this.mObject;e.parentContainer&&e.parentContainer.remove(e)}},FollowObject.prototype.destroy=function(){this.mObject&&this.mObject.destroy(),this.mObject=void 0},Object.defineProperty(FollowObject.prototype,"object",{get:function(){return this.mObject},enumerable:!1,configurable:!0}),FollowObject}();!function(e){e[e.Nickname=1e3]="Nickname",e[e.Image=1001]="Image",e[e.Sprite=1002]="Sprite"}(s||(s={}));var f,g,_=function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),T=function(e){function ReferenceArea(i){return e.call(this,i)||this}return _(ReferenceArea,e),ReferenceArea.prototype.draw=function(e,i,n,a){if(this.clear(),0!==e.length&&0!==e[0].length){var s,h,l,c,m=e.length,f=e[0].length;this.mOrigin=i,this.mSize={rows:m,cols:f,tileWidth:n,tileHeight:a,sceneWidth:(m+f)*(n/2),sceneHeight:(m+f)*(a/2)},this.beginPath();for(var g=0;g<m;g++)for(var _=0;_<f;_++)0!==e[g][_]&&(this.lineStyle(2,0),s=o.Position45.transformTo90(new o.Pos(_,g),this.mSize),h=o.Position45.transformTo90(new o.Pos(_+1,g),this.mSize),l=o.Position45.transformTo90(new o.Pos(_+1,g+1),this.mSize),c=o.Position45.transformTo90(new o.Pos(_,g+1),this.mSize),this.beginPath(),this.fillStyle(1===e[g][_]?65280:16711680),this.strokePoints([s.toPoint(),h.toPoint(),l.toPoint(),c.toPoint()],!0,!0),this.fillPath());this.setPosition(0,0)}},ReferenceArea.prototype.setPosition=function(i,n,a,s){if(this.mSize){var o=i-(this.mOrigin.x-this.mOrigin.y)*(this.mSize.tileWidth>>1),h=n-(this.mOrigin.x+this.mOrigin.y+.5)*(this.mSize.tileHeight>>1);return e.prototype.setPosition.call(this,o,h,a,s)}},Object.defineProperty(ReferenceArea.prototype,"size",{get:function(){return this.mSize},enumerable:!1,configurable:!0}),ReferenceArea}(Phaser.GameObjects.Graphics),x=n(2),S=n(668),j=n(51),q=function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}();!function(e){e.BodyCostDres="body_cost_dres_$",e.BodyCost="body_cost_$",e.BodyTail="body_tail_$",e.BodyWing="body_wing_$",e.BodyBase="body_base_$",e.BodySpec="body_spec_$",e.FlegSpec="fleg_spec_$",e.FlegBase="fleg_base_$",e.FlegCost="fleg_cost_$",e.BarmSpec="barm_spec_$",e.BarmBase="barm_base_$",e.BarmCost="barm_cost_$",e.BarmWeap="barm_weap_$",e.ShldBarm="barm_shld_$",e.BlegSpec="bleg_spec_$",e.BlegBase="bleg_base_$",e.BlegCost="bleg_cost_$",e.FarmSpec="farm_spec_$",e.FarmBase="farm_base_$",e.FarmCost="farm_cost_$",e.ShldFarm="farm_shld_$",e.FarmWeap="farm_weap_$",e.HeadSpec="head_spec_$",e.HeadMask="head_mask_$",e.HeadEyes="head_eyes_$",e.HeadBase="head_base_$",e.HeadHairBack="head_hair_back_$",e.HeadMous="head_mous_$",e.HeadHair="head_hair_$",e.HeadHats="head_hats_$",e.HeadFace="head_face_$"}(f||(f={})),function(e){e.BarmBase="barm_base_#_$",e.BarmCost="barm_cost_#_$",e.BarmSpec="barm_spec_#_$",e.BlegBase="bleg_base_#_$",e.BlegCost="bleg_cost_#_$",e.BlegSpec="bleg_spec_#_$",e.BodyBase="body_base_#_$",e.BodyCost="body_cost_#_$",e.BodyCostDres="body_cost_dres_#_$",e.BodySpec="body_spec_#_$",e.BodyTail="body_tail_#_$",e.BodyWing="body_wing_#_$",e.FarmBase="farm_base_#_$",e.FarmCost="farm_cost_#_$",e.FarmSpec="farm_spec_#_$",e.FlegBase="fleg_base_#_$",e.FlegCost="fleg_cost_#_$",e.FlegSpec="fleg_spec_#_$",e.HeadBase="head_base_#_$",e.HeadEyes="head_eyes_#_$",e.HeadHair="head_hair_#_$",e.HeadHairBack="head_hair_back_#_$",e.HeadHats="head_hats_#_$",e.HeadFace="head_face_#_$",e.HeadMask="head_mask_#_$",e.HeadMous="head_mous_#_$",e.HeadSpec="head_spec_#_$",e.ShldFarm="farm_shld_#_$",e.WeapFarm="farm_weap_#_$",e.ShldBarm="barm_shld_#_$",e.WeapBarm="barm_weap_#_$"}(g||(g={}));var Y,X=new Map,Z=function(e){function BaseDragonbonesDisplay(i,n){var a=e.call(this,i,n)||this;return a.mArmatureName="Armature",a.mResourceName="bones_human01",a.mInteractive=!0,a.replaceArr=[],a.mLoadMap=new Map,a.mErrorLoadMap=new Map,a.mNeedReplaceTexture=!1,a.UNPACK_SLOTS=[f.FarmWeap,f.BarmWeap],a.UNCHECK_AVATAR_PROPERTY=["id","dirable","farmWeapId","barmWeapId"],a.mReplaceTextureKey="",a.mLoadListeners=new Map,a.mTexturesListeners=new Map,a}return q(BaseDragonbonesDisplay,e),Object.defineProperty(BaseDragonbonesDisplay.prototype,"displayInfo",{get:function(){return this.mDisplayInfo},set:function(e){!1===this.mNeedReplaceTexture&&(this.mNeedReplaceTexture=this.checkNeedReplaceTexture(this.mDisplayInfo,e)),this.mDisplayInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDragonbonesDisplay.prototype,"spriteWidth",{get:function(){return this.mArmatureDisplay?this.mArmatureDisplay.width:0},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDragonbonesDisplay.prototype,"spriteHeight",{get:function(){return this.mArmatureDisplay?this.mArmatureDisplay.height:0},enumerable:!1,configurable:!0}),Object.defineProperty(BaseDragonbonesDisplay.prototype,"topPoint",{get:function(){return this.mBoardPoint},enumerable:!1,configurable:!0}),BaseDragonbonesDisplay.prototype.load=function(e,i,n){var a=this;return void 0===n&&(n=!0),this.displayInfo=e,this.displayInfo?(this.setData("id",this.displayInfo.id),new Promise((function(e,i){a.buildDragbones().then((function(){return new Promise((function(e,i){a.setClickInteractive(a.mInteractive),a.displayCreated(),a.setReplaceArrAndLoadMap(),a.showLoadingShadow(),n&&a.mNeedReplaceTexture?a.prepareReplaceRenderTexture().then((function(){e(null)})).catch((function(){n=!1,a.prepareReplaceSlotsDisplay().then((function(){e(null)}))})):(n=!1,a.prepareReplaceSlotsDisplay().then((function(){e(null)})))}))})).then((function(){a.refreshAvatar(n),a.hideLoadingShadow(),a.mNeedReplaceTexture=!1,e(null)}))}))):Promise.reject("displayInfo error")},BaseDragonbonesDisplay.prototype.save=function(){var e=this;return new Promise((function(i,n){e.loadPartsRes().then((function(){var n=e.generateReplaceTextureKey(),a=e.generateReplaceTexture(n);i({key:n,url:a.url,json:a.json})}))}))},BaseDragonbonesDisplay.prototype.getDisplay=function(){return this.mArmatureDisplay},BaseDragonbonesDisplay.prototype.play=function(i){i&&(this.mAnimation=i,this.mArmatureDisplay&&(this.mArmatureDisplay.hasDBEventListener(dragonBones.EventObject.LOOP_COMPLETE)&&this.mArmatureDisplay.removeDBEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onArmatureLoopComplete,this),i.playingQueue&&i.playingQueue.playTimes&&i.playingQueue.playTimes>0&&this.mArmatureDisplay.addDBEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onArmatureLoopComplete,this),this.mArmatureDisplay.animation.play(i.name,i.times),this.mArmatureDisplay.scaleX=i.flip?-1:1),e.prototype.play.call(this,i))},BaseDragonbonesDisplay.prototype.fadeIn=function(e){this.clearFadeTween(),this.alpha=0,this.mFadeTween=this.scene.tweens.add({targets:this,alpha:1,duration:1200,onComplete:function(){e&&e()}})},BaseDragonbonesDisplay.prototype.fadeOut=function(e){this.clearFadeTween(),this.mFadeTween=this.scene.tweens.add({targets:this,alpha:0,duration:1200,onComplete:function(){e&&e()}})},BaseDragonbonesDisplay.prototype.destroy=function(){var i=this;this.mDisplayInfo=null,this.mNeedReplaceTexture=!1,this.mArmatureDisplay&&(this.destroyReplacedTextureManually(),this.mArmatureDisplay.dispose(!1),this.mArmatureDisplay=null),this.mFadeTween&&(this.clearFadeTween(),this.mFadeTween=null),this.mLoadListeners.forEach((function(e,n){for(var a=0,s=e;a<s.length;a++){var o=s[a];i.scene.load.off(n,o,i)}})),this.mLoadListeners.clear(),this.mTexturesListeners.forEach((function(e,n){for(var a=0,s=e;a<s.length;a++){var o=s[a];i.scene.textures.off(n,o,i)}})),this.mTexturesListeners.clear(),e.prototype.destroy.call(this)},BaseDragonbonesDisplay.prototype.setClickInteractive=function(e){if(this.mInteractive=e,e){var i=new Phaser.Geom.Rectangle(0,0,50,70);i.x=-i.width>>1,i.y=-i.height,this.setInteractive(i,Phaser.Geom.Rectangle.Contains)}else this.disableInteractive()},Object.defineProperty(BaseDragonbonesDisplay.prototype,"resourceName",{get:function(){return this.mResourceName},set:function(e){this.mResourceName=e},enumerable:!1,configurable:!0}),BaseDragonbonesDisplay.prototype.buildDragbones=function(){var e=this;return new Promise((function(i,n){if(e.scene.cache.custom.dragonbone)if(e.scene.cache.custom.dragonbone.get(e.resourceName))e.createArmatureDisplay(),i(e.mArmatureDisplay);else{var a="dragonbones",s=o.Url.getRes(a+"/"+e.resourceName+"_tex.png"),h=o.Url.getRes(a+"/"+e.resourceName+"_tex.json"),l=o.Url.getRes(a+"/"+e.resourceName+"_ske.dbbin");e.loadDragonBones(s,h,l).then((function(){e.createArmatureDisplay(),i(e.mArmatureDisplay)}))}else n("dragonbone plugin error")}))},Object.defineProperty(BaseDragonbonesDisplay.prototype,"localResourceRoot",{get:function(){return o.Url.RES_PATH},enumerable:!1,configurable:!0}),BaseDragonbonesDisplay.prototype.partNameToLoadUrl=function(e){return o.ResUtils.getPartUrl(e)},BaseDragonbonesDisplay.prototype.partNameToLoadKey=function(e){return o.ResUtils.getPartName(e)},BaseDragonbonesDisplay.prototype.partNameToDBFrameName=function(e){return"test resources/"+e},BaseDragonbonesDisplay.prototype.generateReplaceTextureKey=function(){return this.serializeAvatarData(this.displayInfo.avatar)},BaseDragonbonesDisplay.prototype.createArmatureDisplay=function(){if(this.scene&&!this.mArmatureDisplay){this.mArmatureDisplay=this.scene.add.armature(this.mArmatureName,this.resourceName),this.addAt(this.mArmatureDisplay,0),this.mAnimation&&this.play(this.mAnimation);var e=this.mArmatureDisplay.armature.getBone("board");this.mBoardPoint=e?new Phaser.Geom.Point(e.global.x,e.global.y):new Phaser.Geom.Point(35,40)}},BaseDragonbonesDisplay.prototype.onArmatureLoopComplete=function(e){if(this.mArmatureDisplay&&this.mAnimation){var i=this.mAnimation.playingQueue;void 0===i.playedTimes?i.playedTimes=1:i.playedTimes++;var n=void 0===i.playTimes?-1:i.playTimes;i.playedTimes>=n&&n>0&&this.mArmatureDisplay.removeDBEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onArmatureLoopComplete,this)}},BaseDragonbonesDisplay.prototype.showLoadingShadow=function(){this.mLoadingShadow&&this.mLoadingShadow.destroy(),this.mLoadingShadow=this.scene.make.image({key:"avatar_placeholder",x:-22,y:-68}).setOrigin(0),this.add(this.mLoadingShadow),this.mArmatureDisplay&&(this.mArmatureDisplay.visible=!1)},BaseDragonbonesDisplay.prototype.hideLoadingShadow=function(){this.mLoadingShadow&&this.mLoadingShadow.destroy(),this.mLoadingShadow=void 0,this.mArmatureDisplay&&(this.mArmatureDisplay.visible=!0)},BaseDragonbonesDisplay.prototype.loadDragonBones=function(e,i,n){var a=this;return new Promise((function(s,o){a.scene.load.dragonbone(a.resourceName,e,i,n,null,null,{responseType:"arraybuffer"});var onLoad=function(){a.scene.cache.custom.dragonbone.get(a.resourceName)&&(a.removePhaserListener(Y.Load,Phaser.Loader.Events.COMPLETE,onLoad),s(null))};a.addPhaserListener(Y.Load,Phaser.Loader.Events.COMPLETE,onLoad),a.scene.load.start()}))},BaseDragonbonesDisplay.prototype.refreshAvatar=function(e){if(e&&this.scene.textures.exists(this.mReplaceTextureKey)){var i=this.scene.textures.get(this.mReplaceTextureKey);this.mArmatureDisplay.armature.replacedTexture!==i&&(this.destroyReplacedTextureManually(),this.recordReplacedTexture(i.key),this.mArmatureDisplay.armature.replacedTexture=i)}this.mArmatureDisplay.armature.getSlots().forEach((function(e){e&&(e.display.visible=!1)}));for(var n=this.scene.game.textures.get(this.mReplaceTextureKey),a=0,s=this.replaceArr;a<s.length;a++){var h=s[a],l=h.slot.replace("$",h.dir.toString()),c=this.mArmatureDisplay.armature.getSlot(l);if(c){var m=this.formattingSkin(h.skin);if(0!==m.sn.length){var f=h.part.replace("#",m.sn.toString()).replace("$",h.dir.toString())+m.version,g=this.partNameToLoadKey(f),_=this.partNameToDBFrameName(f),T=null;n&&n.frames[_]?T=new dragonBones.phaser.display.SlotImage(this.scene,c.display.x,c.display.y,this.mReplaceTextureKey,_):this.scene.textures.exists(g)&&(T=new dragonBones.phaser.display.SlotImage(this.scene,c.display.x,c.display.y,g)),T?(c.display.visible=!0,c.replaceDisplay(T)):o.Logger.getInstance().warn("dragonbones replace slot display error: no texture: ",g)}}}},BaseDragonbonesDisplay.prototype.serializeAvatarData=function(e){var i=JSON.parse(JSON.stringify(e)),n=[];for(var a in i)if("id"!==a&&"dirable"!==a){var s=i[a];(null===s||"string"==typeof s&&0===s.length)&&n.push(a)}else n.push(a);for(var o=0,h=n;o<h.length;o++){delete i[h[o]]}return S(i)},BaseDragonbonesDisplay.prototype.generateReplaceTexture=function(e){var i=new x.Atlas,n=new j.a;n.padding=2,n.options.pot=!1;for(var a=0,s=this.replaceArr;a<s.length;a++){var h=s[a],l=h.slot.replace("$",h.dir.toString());if(this.mArmatureDisplay.armature.getSlot(l)){var c=this.formattingSkin(h.skin);if(0!==c.sn.length){var m=h.part.replace("#",c.sn.toString()).replace("$",h.dir.toString())+c.version,f=this.partNameToLoadKey(m),g=this.partNameToDBFrameName(m);if(this.scene.game.textures.exists(f)){var _=this.scene.game.textures.getFrame(f,"__BASE");n.add(_.width,_.height,{key:f,name:g})}else o.Logger.getInstance().error("draw texture error, texture not exists, key: ",f)}}}var T=n.bins[0],S=T.width,q=T.height,Y=this.scene.textures.createCanvas("canvas_"+this.id+"_"+e,S,q);n.bins.forEach((function(e){e.rects.forEach((function(e){Y.drawFrame(e.data.key,"__BASE",e.x,e.y),i.addFrame(e.data.name,e)}))}));var X=Y.canvas.toDataURL("image/png",1);return Y.destroy(),{url:X,json:i.toString()}},BaseDragonbonesDisplay.prototype.prepareReplaceRenderTexture=function(){var e=this;return new Promise((function(i,n){if(e.mReplaceTextureKey=e.generateReplaceTextureKey(),e.scene.textures.exists(e.mReplaceTextureKey))i(null);else{var a=o.ResUtils.getUsrAvatarTextureUrls(e.mReplaceTextureKey);e.scene.load.atlas(e.mReplaceTextureKey,a.img,a.json);var onLoadComplete_1=function(n){e.mReplaceTextureKey===n&&(e.removePhaserListener(Y.Load,Phaser.Loader.Events.FILE_COMPLETE,onLoadComplete_1),e.removePhaserListener(Y.Load,Phaser.Loader.Events.FILE_LOAD_ERROR,onLoadError_1),i(null))},onLoadError_1=function(i){e.mReplaceTextureKey===i.key&&(e.removePhaserListener(Y.Load,Phaser.Loader.Events.FILE_COMPLETE,onLoadComplete_1),e.removePhaserListener(Y.Load,Phaser.Loader.Events.FILE_LOAD_ERROR,onLoadError_1),o.Logger.getInstance().warn("load dragonbones texture error: ",a),n("load dragonbones texture error: "+a))};e.addPhaserListener(Y.Load,Phaser.Loader.Events.FILE_COMPLETE,onLoadComplete_1),e.addPhaserListener(Y.Load,Phaser.Loader.Events.FILE_LOAD_ERROR,onLoadError_1),e.scene.load.start()}}))},BaseDragonbonesDisplay.prototype.prepareReplaceSlotsDisplay=function(){var e=this;return new Promise((function(i,n){e.mLoadMap&&e.mLoadMap.size>0?e.loadPartsRes().then((function(){i(null)})):i(null)}))},BaseDragonbonesDisplay.prototype.loadPartsRes=function(){var e=this;return new Promise((function(i,n){var a=[];if(e.mLoadMap.forEach((function(i,n){var s=e.partNameToLoadUrl(i),o=e.partNameToLoadKey(i);e.scene.textures.exists(o)||a.push({key:o,url:s})})),0!==a.length){var onLoadComplete=function(n,a,s){e.scene&&(e.removePhaserListener(Y.Load,Phaser.Loader.Events.COMPLETE,onLoadComplete),i(null))};e.addPhaserListener(Y.Load,Phaser.Loader.Events.COMPLETE,onLoadComplete);e.addPhaserListener(Y.Load,Phaser.Loader.Events.FILE_LOAD_ERROR,(function(i){var n=e.partLoadKeyToSlotName(i.key);if(e.mLoadMap.has(n)){var a=e.mLoadMap.get(n),s=e.partNameToLoadKey(a);e.mErrorLoadMap.set(s,i)}})),e.scene.load.image(a),e.scene.load.start()}else i(null)}))},BaseDragonbonesDisplay.prototype.formattingSkin=function(e){var i="",n="";return"string"==typeof e||"number"==typeof e?n=e.toString():(i=void 0===e.version||""===e.version?"":"_"+e.version,n=e.sn),{sn:n,version:i}},BaseDragonbonesDisplay.prototype.clearFadeTween=function(){this.mFadeTween&&(this.mFadeTween.stop(),this.mFadeTween.remove())},BaseDragonbonesDisplay.prototype.checkNeedReplaceTexture=function(e,i){if(!i)return!1;if(!e)return!0;var n=e.avatar,a=i.avatar;for(var s in a)if(a.hasOwnProperty(s)&&!(this.UNCHECK_AVATAR_PROPERTY.indexOf(s)>=0)){if(!n.hasOwnProperty(s))return!0;if("string"!=typeof n[s]||"string"!=typeof a[s]){if(n[s].hasOwnProperty("sn")&&a[s].hasOwnProperty("sn")){if(n[s].sn!==a[s].sn)return!0;if(n[s].version!==a[s].version)return!0}else if(n[s]!==a[s])return!0}else if(n[s]!==a[s])return!0}return!1},BaseDragonbonesDisplay.prototype.partLoadKeyToSlotName=function(e){var i=e.split("_");return o.Tool.isNumeric(i[2])?i[0]+"_"+i[1]+"_"+i[3]:i[0]+"_"+i[1]+"_"+i[2]+"_"+i[4]},BaseDragonbonesDisplay.prototype.setReplaceArrAndLoadMap=function(){var e=this;this.replaceArr.length=0;var i=this.displayInfo.avatar;i.bodyBaseId&&(this.replaceArr.push({slot:f.BodyBase,part:g.BodyBase,dir:3,skin:i.bodyBaseId}),this.replaceArr.push({slot:f.BodyBase,part:g.BodyBase,dir:1,skin:i.bodyBaseId})),i.bodySpecId&&(this.replaceArr.push({slot:f.BodySpec,part:g.BodySpec,dir:3,skin:i.bodySpecId}),this.replaceArr.push({slot:f.BodySpec,part:g.BodySpec,dir:1,skin:i.bodySpecId})),i.bodyWingId&&(this.replaceArr.push({slot:f.BodyWing,part:g.BodyWing,dir:3,skin:i.bodyWingId}),this.replaceArr.push({slot:f.BodyWing,part:g.BodyWing,dir:1,skin:i.bodyWingId})),i.bodyTailId&&(this.replaceArr.push({slot:f.BodyTail,part:g.BodyTail,dir:3,skin:i.bodyTailId}),this.replaceArr.push({slot:f.BodyTail,part:g.BodyTail,dir:1,skin:i.bodyTailId})),i.bodyCostId&&(this.replaceArr.push({slot:f.BodyCost,part:g.BodyCost,dir:3,skin:i.bodyCostId}),this.replaceArr.push({slot:f.BodyCost,part:g.BodyCost,dir:1,skin:i.bodyCostId})),i.bodyCostDresId&&(this.replaceArr.push({slot:f.BodyCostDres,part:g.BodyCostDres,dir:3,skin:i.bodyCostDresId}),this.replaceArr.push({slot:f.BodyCostDres,part:g.BodyCostDres,dir:1,skin:i.bodyCostDresId})),i.farmBaseId&&(this.replaceArr.push({slot:f.FarmBase,part:g.FarmBase,dir:3,skin:i.farmBaseId}),this.replaceArr.push({slot:f.FarmBase,part:g.FarmBase,dir:1,skin:i.farmBaseId})),i.farmSpecId&&(this.replaceArr.push({slot:f.FarmSpec,part:g.FarmSpec,dir:3,skin:i.farmSpecId}),this.replaceArr.push({slot:f.FarmSpec,part:g.FarmSpec,dir:1,skin:i.farmSpecId})),i.farmCostId&&(this.replaceArr.push({slot:f.FarmCost,part:g.FarmCost,dir:3,skin:i.farmCostId}),this.replaceArr.push({slot:f.FarmCost,part:g.FarmCost,dir:1,skin:i.farmCostId})),i.barmBaseId&&(this.replaceArr.push({slot:f.BarmBase,part:g.BarmBase,dir:3,skin:i.barmBaseId}),this.replaceArr.push({slot:f.BarmBase,part:g.BarmBase,dir:1,skin:i.barmBaseId})),i.barmSpecId&&(this.replaceArr.push({slot:f.BarmSpec,part:g.BarmSpec,dir:3,skin:i.barmSpecId}),this.replaceArr.push({slot:f.BarmSpec,part:g.BarmSpec,dir:1,skin:i.barmSpecId})),i.barmCostId&&(this.replaceArr.push({slot:f.BarmCost,part:g.BarmCost,dir:3,skin:i.barmCostId}),this.replaceArr.push({slot:f.BarmCost,part:g.BarmCost,dir:1,skin:i.barmCostId})),i.blegBaseId&&(this.replaceArr.push({slot:f.BlegBase,part:g.BlegBase,dir:3,skin:i.blegBaseId}),this.replaceArr.push({slot:f.BlegBase,part:g.BlegBase,dir:1,skin:i.blegBaseId})),i.blegSpecId&&(this.replaceArr.push({slot:f.BlegSpec,part:g.BlegSpec,dir:3,skin:i.blegSpecId}),this.replaceArr.push({slot:f.BlegSpec,part:g.BlegSpec,dir:1,skin:i.blegSpecId})),i.blegCostId&&(this.replaceArr.push({slot:f.BlegCost,part:g.BlegCost,dir:3,skin:i.blegCostId}),this.replaceArr.push({slot:f.BlegCost,part:g.BlegCost,dir:1,skin:i.blegCostId})),i.flegBaseId&&(this.replaceArr.push({slot:f.FlegBase,part:g.FlegBase,dir:3,skin:i.flegBaseId}),this.replaceArr.push({slot:f.FlegBase,part:g.FlegBase,dir:1,skin:i.flegBaseId})),i.flegSpecId&&(this.replaceArr.push({slot:f.FlegSpec,part:g.FlegSpec,dir:3,skin:i.flegSpecId}),this.replaceArr.push({slot:f.FlegSpec,part:g.FlegSpec,dir:1,skin:i.flegSpecId})),i.flegCostId&&(this.replaceArr.push({slot:f.FlegCost,part:g.FlegCost,dir:3,skin:i.flegCostId}),this.replaceArr.push({slot:f.FlegCost,part:g.FlegCost,dir:1,skin:i.flegCostId})),i.headBaseId&&(this.replaceArr.push({slot:f.HeadBase,part:g.HeadBase,dir:3,skin:i.headBaseId}),this.replaceArr.push({slot:f.HeadBase,part:g.HeadBase,dir:1,skin:i.headBaseId})),i.barmWeapId&&(this.replaceArr.push({slot:f.BarmWeap,part:g.WeapBarm,dir:3,skin:i.barmWeapId}),this.replaceArr.push({slot:f.BarmWeap,part:g.WeapBarm,dir:1,skin:i.barmWeapId})),i.headHairId&&(this.replaceArr.push({slot:f.HeadHair,part:g.HeadHair,dir:3,skin:i.headHairId}),this.replaceArr.push({slot:f.HeadHair,part:g.HeadHair,dir:1,skin:i.headHairId})),i.headHairBackId&&(this.replaceArr.push({slot:f.HeadHairBack,part:g.HeadHairBack,dir:3,skin:i.headHairBackId}),this.replaceArr.push({slot:f.HeadHairBack,part:g.HeadHairBack,dir:1,skin:i.headHairBackId})),i.headHatsId&&(this.replaceArr.push({slot:f.HeadHats,part:g.HeadHats,dir:3,skin:i.headHatsId}),this.replaceArr.push({slot:f.HeadHats,part:g.HeadHats,dir:1,skin:i.headHatsId})),i.headSpecId&&(this.replaceArr.push({slot:f.HeadSpec,part:g.HeadSpec,dir:3,skin:i.headSpecId}),this.replaceArr.push({slot:f.HeadSpec,part:g.HeadSpec,dir:1,skin:i.headSpecId})),i.headEyesId&&this.replaceArr.push({slot:f.HeadEyes,part:g.HeadEyes,dir:3,skin:i.headEyesId}),i.headMousId&&this.replaceArr.push({slot:f.HeadMous,part:g.HeadMous,dir:3,skin:i.headMousId}),i.headMaskId&&this.replaceArr.push({slot:f.HeadMask,part:g.HeadMask,dir:3,skin:i.headMaskId}),i.headFaceId&&(this.replaceArr.push({slot:f.HeadFace,part:g.HeadFace,dir:3,skin:i.headFaceId}),this.replaceArr.push({slot:f.HeadFace,part:g.HeadFace,dir:1,skin:i.headFaceId})),i.farmShldId&&(this.replaceArr.push({slot:f.ShldFarm,part:g.ShldFarm,dir:3,skin:i.farmShldId}),this.replaceArr.push({slot:f.ShldFarm,part:g.ShldFarm,dir:1,skin:i.farmShldId})),i.barmShldId&&(this.replaceArr.push({slot:f.ShldBarm,part:g.ShldBarm,dir:3,skin:i.barmShldId}),this.replaceArr.push({slot:f.ShldBarm,part:g.ShldBarm,dir:1,skin:i.barmShldId})),i.farmWeapId&&(this.replaceArr.push({slot:f.FarmWeap,part:g.WeapFarm,dir:3,skin:i.farmWeapId}),this.replaceArr.push({slot:f.FarmWeap,part:g.WeapFarm,dir:1,skin:i.farmWeapId}));var setLoadMap=function(i,n,a,s){var o=i.replace("$",a.toString());if(e.mArmatureDisplay.armature.getSlot(o)){var h=e.formattingSkin(s);if(h.sn){var l=n.replace("#",h.sn).replace("$",a.toString())+h.version,c=(e.scene.game.textures.get(e.resourceName),e.partNameToLoadKey(l));e.partNameToDBFrameName(l);e.mErrorLoadMap.get(c)||e.scene.textures.exists(c)||e.mLoadMap.set(o,l)}}};this.mLoadMap.clear();for(var n=0,a=this.replaceArr;n<a.length;n++){var s=a[n];setLoadMap(s.slot,s.part,s.dir,s.skin)}},BaseDragonbonesDisplay.prototype.addPhaserListener=function(e,i,n){var a,s;switch(e){case Y.Load:a=this.scene.load,s=this.mLoadListeners;break;case Y.Textures:a=this.scene.textures,s=this.mTexturesListeners}a.off(i,n,this),a.on(i,n,this),s.has(i)||s.set(i,[]);var o=s.get(i),h=o.indexOf(n);h>=0&&o.splice(h,1),o.push(n)},BaseDragonbonesDisplay.prototype.removePhaserListener=function(e,i,n){var a,s;switch(e){case Y.Load:a=this.scene.load,s=this.mLoadListeners;break;case Y.Textures:a=this.scene.textures,s=this.mTexturesListeners}if(a.off(i,n,this),s.has(i)){var o=s.get(i),h=o.indexOf(n);h>=0&&o.splice(h,1)}},BaseDragonbonesDisplay.prototype.recordReplacedTexture=function(e){if(X.has(e)){var i=X.get(e);X.set(e,i+1)}else X.set(e,1)},BaseDragonbonesDisplay.prototype.destroyReplacedTextureManually=function(){var e=this.mArmatureDisplay.armature._replaceTextureAtlasData;if(e&&e.renderTexture&&X.has(e.renderTexture.key)){var i=X.get(e.renderTexture.key);i>1?X.set(e.renderTexture.key,i-1):(X.delete(e.renderTexture.key),this.scene.cache.json.remove(e.renderTexture.key),e.renderTexture.destroy()),e.releaseRenderTexture()}},BaseDragonbonesDisplay}(l);!function(e){e[e.Load=0]="Load",e[e.Textures=1]="Textures"}(Y||(Y={}));var $=function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),tt=function(e){function BaseFramesDisplay(i,n,a){var s=e.call(this,i,n)||this;return s.mDisplayDatas=new Map,s.mDisplays=new Map,s.mIsSetInteractive=!1,s.mIsInteracitve=!1,s.mNodeType=a,s.mID=n,s}return $(BaseFramesDisplay,e),BaseFramesDisplay.prototype.load=function(e,i){var n=this;if(i=i||x.DisplayField.STAGE,this.mField=i,this.displayInfo=e,!this.framesInfo||!this.framesInfo.gene)return Promise.reject("framesInfo error");var a=this.mDisplayDatas.get(i);if(a&&a.gene===e.gene||this.mDisplayDatas.set(i,this.framesInfo),this.scene.textures.exists(this.framesInfo.gene))this.onLoadCompleted(i);else{var s=this.framesInfo.display;if(!s)return o.Logger.getInstance().debug("update frame loadError","display is undefined"),void this.displayCreated();if(""===s.texturePath||""===s.dataPath)o.Logger.getInstance().debug("update frame loadError","动画资源报错：",this.displayInfo),this.displayCreated();else{this.scene.load.atlas(this.framesInfo.gene,o.Url.getOsdRes(s.texturePath),o.Url.getOsdRes(s.dataPath));var onAdd_1=function(e){e===n.framesInfo.gene&&(n.onAddTextureHandler(e,i,onAdd_1),n.scene&&n.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,onLoadError_1,n))},onLoadError_1=function(e){(e.multiFile?e.multiFile.key:e.key)===n.framesInfo.gene&&(o.Logger.getInstance().debug("update frame loadError "+e.url),n.displayCreated())};this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,onLoadError_1,this),this.scene.textures.on(Phaser.Textures.Events.ADD,onAdd_1,this),this.scene.load.start()}}return Promise.resolve(null)},BaseFramesDisplay.prototype.play=function(i,n){if(e.prototype.play.call(this,i),i){var a=i.times;n=n||x.DisplayField.STAGE;var s=this.mDisplayDatas.get(n);if(this.scene&&s&&!1!==this.scene.textures.exists(s.gene)){var o=s.animations;if(this.mCurAnimation=o.get(i.name),this.mCurAnimation){var h=this.mCurAnimation.layer;this.mPreAnimation&&this.mPreAnimation.name===i.name||this.createDisplays(s.gene,this.mCurAnimation);for(var l=null,c=0;c<h.length;c++){var m=h[c],f=m.frameName,g=m.offsetLoc;if(l=this.mDisplays.get(h[c].id||c)){if(f.length>1){var _=s.gene+"_"+i.name+"_"+c;this.makeAnimation(s.gene,_,h[c].frameName,h[c].frameVisible,this.mCurAnimation.frameRate,this.mCurAnimation.loop,this.mCurAnimation.frameDuration);var T=l.anims;T.play(_),"number"==typeof a&&T.setRepeat(a-1)}l.scaleX=i.flip?-1:1,this.updateBaseLoc(l,i.flip,g)}}if(this.emit("updateAnimation"),this.mMainSprite&&this.mMainSprite.on(Phaser.Animations.Events.ANIMATION_REPEAT,this.onAnimationRepeatHander,this),this.mMountContainer&&this.mMountContainer.parentContainer&&this.mCurAnimation.mountLayer)this.mSprites.get(x.DisplayField.STAGE).moveTo(this.mMountContainer,this.mCurAnimation.mountLayer.index);this.mPreAnimation=i}}}},BaseFramesDisplay.prototype.playEffect=function(){var e=this.mDisplayDatas.get(x.DisplayField.Effect);if(e){var i=e.animations,n=e.animationName;if(i){var a=i.get(n);if(a){for(var s=a.layer,o=[],h=0;h<s.length;h++){var l=void 0,c=s[h],m=c.frameName,f=c.offsetLoc;if(m.length>1){var g=e.gene+"_"+n+"_"+h;this.makeAnimation(e.gene,g,s[h].frameName,s[h].frameVisible,a.frameRate,a.loop,a.frameDuration),l=this.scene.make.sprite(void 0,!1).play(g)}else l=this.scene.make.image(void 0,!1).setTexture(e.gene,m[0]);l.x=f.x+.5*l.width,l.y=f.y+.5*l.height,o.push(l)}o.length>1&&(this.addAt(o[1],x.DisplayField.BACKEND),this.mSprites.set(x.DisplayField.BACKEND,o[1])),this.addAt(o[0],x.DisplayField.FRONTEND),this.mSprites.set(x.DisplayField.FRONTEND,o[0])}}}},BaseFramesDisplay.prototype.fadeIn=function(e){0!==this.mAlpha&&(this.alpha=0,this.clearFadeTween(),this.mFadeTween=this.scene.tweens.add({targets:this,alpha:this.mAlpha,duration:1200,onComplete:function(){e&&e()}}))},BaseFramesDisplay.prototype.fadeOut=function(e){this.clearFadeTween(),this.mFadeTween=this.scene.tweens.add({targets:this,alpha:0,duration:1200,onComplete:function(){e&&e()}})},BaseFramesDisplay.prototype.setInteractive=function(e,i,n){return this.mIsInteracitve=!0,this.mDisplays.forEach((function(e){e.setInteractive({pixelPerfect:!0})})),this},BaseFramesDisplay.prototype.disableInteractive=function(){return this.mIsInteracitve=!1,this.mDisplays.forEach((function(e){e.disableInteractive()})),this},BaseFramesDisplay.prototype.removeDisplay=function(e){var i=this.mSprites.get(e);i&&(this.mSprites.delete(e),i.destroy())},BaseFramesDisplay.prototype.mount=function(e,i){if(e&&this.mCurAnimation)if(this.mCurAnimation.mountLayer){if(void 0===i||!this.mMountList.get(i)||this.mMountList.get(i)!==e){var n=this.mCurAnimation.mountLayer,a=n.index,s=n.mountPoint;if(s)if(void 0===i&&(i=0),i>=s.length)o.Logger.getInstance().error("mount index does not exist");else{var h=s[i].x;if(this.mAnimation.flip&&(h=0-h),e.x=h,e.y=s[i].y,this.mMountContainer||(this.mMountContainer=this.scene.make.container(void 0,!1)),!this.mMountContainer.parentContainer){var l=this.mSprites.get(x.DisplayField.STAGE);l&&l.addAt(this.mMountContainer,a)}this.mMountContainer.addAt(e,i),e.setRootMount(this),this.mMountList.set(i,e),this.mMainSprite}else o.Logger.getInstance().error("mount mountPoint does not exist,id:",this.id)}}else o.Logger.getInstance().error("mountLayer does not exist: ",this.mCurAnimation)},BaseFramesDisplay.prototype.unmount=function(e){if(this.mMountContainer){e.setRootMount(void 0),e.visible=!0;var i=-1;this.mMountList.forEach((function(n,a){n===e&&(i=a)})),i>=0&&this.mMountList.delete(i),this.mMountContainer.remove(e,!1),this.mMountContainer.list.length<=0&&this.mDisplays.size}},BaseFramesDisplay.prototype.destroy=function(){this.clearDisplay(),this.mFadeTween&&(this.clearFadeTween(),this.mFadeTween=void 0),this.mScaleTween&&(this.mScaleTween.stop(),this.mScaleTween=void 0),this.mDisplayDatas.clear(),e.prototype.destroy.call(this)},BaseFramesDisplay.prototype.createDisplays=function(e,i){this.clearDisplay();var n=this.mSprites.get(x.DisplayField.STAGE);n||((n=this.scene.make.container(void 0,!1)).setData("id",this.mID),this.addAt(n,x.DisplayField.STAGE),this.mSprites.set(x.DisplayField.STAGE,n));for(var a,s=i.layer,o=0;o<s.length;o++)(a=this.createDisplay(e,s[o]))&&(this.mDisplays.set(s[o].id||o,a),n.add(a));this.mIsInteracitve?this.setInteractive():this.disableInteractive(),this.mIsSetInteractive=!0},BaseFramesDisplay.prototype.createDisplay=function(e,i){var n,a=i.frameName;if(a.length>1)n=this.scene.make.sprite(void 0,!1),this.mMainSprite||(this.mMainSprite=n);else{if(1!==a.length)return;n=this.scene.make.image({key:e,frame:a[0]})}return n.setData("id",this.mID),n},BaseFramesDisplay.prototype.clearFadeTween=function(){this.mFadeTween&&(this.mFadeTween.stop(),this.mFadeTween.remove())},BaseFramesDisplay.prototype.completeFrameAnimationQueue=function(){},BaseFramesDisplay.prototype.clearDisplay=function(){this.mDisplays.forEach((function(e){return e.destroy()})),this.mMountList.clear(),this.mDisplays.clear(),this.mMainSprite=null,this.mPreAnimation=null},BaseFramesDisplay.prototype.onAddTextureHandler=function(e,i,n){void 0===i&&(i=x.DisplayField.STAGE);var a=this.mDisplayDatas.get(i);a&&a.gene===e?(this.scene.textures.off(Phaser.Textures.Events.ADD,n,this),this.onLoadCompleted(i)):o.Logger.getInstance().debug("no addtexture",this,a,i)},BaseFramesDisplay.prototype.mAllLoadCompleted=function(){this.scene.load.off(Phaser.Loader.Events.COMPLETE,this.mAllLoadCompleted,this),this.onLoadCompleted(this.mField)},BaseFramesDisplay.prototype.onLoadCompleted=function(e){this.clearDisplay();var i=this.mDisplayDatas.get(e);if(i){if(this.scene.textures.exists(i.gene))if(e===x.DisplayField.STAGE)if(this.mAnimation)this.play(this.mAnimation);else{var n=!1;switch(i.avatarDir){case o.Direction.south_east:case o.Direction.east_north:n=!0;break;case o.Direction.west_south:case o.Direction.north_west:}this.play({name:i.animationName,flip:n})}else this.playEffect();this.displayCreated()}},BaseFramesDisplay.prototype.makeAnimation=function(e,i,n,a,s,h,l){if(a&&n.length!==a.length)o.Logger.getInstance().error("wrong data: frameName.length: "+n.length+"; frameVisible.length: "+a.length);else if(l&&n.length!==l.length)o.Logger.getInstance().error("wrong data: frameName.length: "+n.length+"; frameDuration.length: "+l.length);else if(!this.scene.anims.exists(i)){for(var c=[],m=0;m<n.length;m++){var f=n[m],g=!a||a[m];l?c.push({key:e,frame:f,duration:1e3*l[m],visible:g}):c.push({key:e,frame:f,visible:g})}var _={key:i,frames:c,frameRate:s,repeat:h?-1:1};this.scene.anims.create(_)}},BaseFramesDisplay.prototype.updateBaseLoc=function(e,i,n){n||(n={x:0,y:0});var a=n.x,s=n.y;i&&(a=0-(e.width+a)),e.x=a+.5*e.width,e.y=s+.5*e.height},BaseFramesDisplay.prototype.onAnimationRepeatHander=function(){var e=this.mAnimation.playingQueue;void 0===e.playedTimes?e.playedTimes=1:e.playedTimes++,e.playedTimes>=e.playTimes&&(this.mMainSprite&&this.mMainSprite.off(Phaser.Animations.Events.ANIMATION_REPEAT,this.onAnimationRepeatHander,this),this.completeFrameAnimationQueue())},Object.defineProperty(BaseFramesDisplay.prototype,"framesInfo",{get:function(){return this.mDisplayInfo},enumerable:!1,configurable:!0}),Object.defineProperty(BaseFramesDisplay.prototype,"spriteWidth",{get:function(){var e=0;return this.mDisplays&&this.mDisplays.forEach((function(i){i.width>e&&(e=i.width)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(BaseFramesDisplay.prototype,"spriteHeight",{get:function(){var e=0;return this.mDisplays&&this.mDisplays.forEach((function(i){i.width>e&&(e=i.height)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(BaseFramesDisplay.prototype,"topPoint",{get:function(){return new Phaser.Geom.Point(0,-this.spriteHeight)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseFramesDisplay.prototype,"nodeType",{get:function(){return this.mNodeType},enumerable:!1,configurable:!0}),BaseFramesDisplay}(l)},function(e,i,n){"use strict";n.d(i,"a",(function(){return o})),n.d(i,"b",(function(){return l})),n.d(i,"d",(function(){return _})),n.d(i,"c",(function(){return T}));var a,s=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),o=function(e){function BaseLayer(i,n,a){var s=e.call(this,i)||this;return s.name=n,s.setDepth(a),s}return s(BaseLayer,e),BaseLayer.prototype.sortLayer=function(){},BaseLayer}(Phaser.GameObjects.Container),h=function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),l=function(e){function GroundLayer(){var i=null!==e&&e.apply(this,arguments)||this;return i.mSortDirty=!1,i}return h(GroundLayer,e),GroundLayer.prototype.add=function(i){return e.prototype.add.call(this,i),this.mSortDirty=!0,this},GroundLayer.prototype.sortLayer=function(){this.mSortDirty&&(this.mSortDirty=!1,this.sort("depth",(function(e,i){return e.y+e.z>i.y+i.z})))},GroundLayer}(o),c=n(33),m=n.n(c),f=n(0),g=function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),_=function(e){function SurfaceLayer(){return null!==e&&e.apply(this,arguments)||this}return g(SurfaceLayer,e),SurfaceLayer.prototype.add=function(i){return e.prototype.add.call(this,i),this},SurfaceLayer.prototype.sortLayer=function(){m.a.reset(),m.a.setTolerance(.8);for(var e=0,i=this.list;e<i.length;e++){var n=i[e],a=n.projectionSize;5===n.nodeType?m.a.addDynamicDisplayObject(n.id,n.sortX,n.sortY,a.width,a.height,!0,n.nickname,n):m.a.addFixedDisplayObject(n.id,n.sortX,n.sortY,a.width,a.height,!1,n.nickname,n)}try{this.list=m.a.sort()}catch(e){f.Logger.getInstance().error("Cyclic dependency")}},SurfaceLayer}(o),T=function(){function LayerManager(){this.delta=0,this.layers=new Map}return LayerManager.prototype.setScale=function(e){this.layers.forEach((function(i){i.setScale(e)}))},LayerManager.prototype.addLayer=function(e,i,n,a){if(!this.layers.get(n)){var s=new i(e,n,a);return this.layers.set(n,s),e.sys.displayList.add(s),s}f.Logger.getInstance().warn("repeated layer name: ",n)},LayerManager.prototype.addToLayer=function(e,i,n){void 0===n&&(n=-1);var a=this.layers.get(e);a&&(-1===n||void 0===n?a.add(i):a.addAt(i,n))},LayerManager.prototype.destroy=function(){this.layers.forEach((function(e){e.destroy()})),this.layers=null},LayerManager.prototype.getLayer=function(e){return this.layers.get(e)?this.layers.get(e):null},LayerManager.prototype.update=function(e,i){e-this.delta<200||(this.delta=e,this.layers.forEach((function(e){e.sortLayer()})))},Object.defineProperty(LayerManager.prototype,"depthSurfaceDirty",{set:function(e){this.mDepthSurface=e},enumerable:!1,configurable:!0}),LayerManager}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return s})),n.d(i,"b",(function(){return c})),n.d(i,"c",(function(){return g}));var a,s=function(){function BaseSceneManager(e){this.render=e,this.sceneClass={},this.initScene()}return BaseSceneManager.prototype.getSceneClass=function(e){return this.sceneClass[e]},BaseSceneManager.prototype.launchScene=function(e,i,n,a){var s=this.render.game.scene;if(a||(a={render:this.render}),s){a.render=this.render;var o=s.getScene(i);this.render.emitter.once("sceneCreated",(function(){a.callBack&&a.callBack()}),this),o||s.add(i,this.sceneClass[n]),e.scene.launch(i,a)}},BaseSceneManager.prototype.setMainScene=function(e){this.mMainScene=e},BaseSceneManager.prototype.getMainScene=function(){return this.mMainScene},BaseSceneManager.prototype.initScene=function(){},BaseSceneManager}(),o=n(4),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function BasicScene(i){var n=e.call(this,i)||this;return n.initialize=!1,n.hasChangeScene=!1,n.hasDestroy=!1,n.layerManager=new o.LayerManager,n}return l(BasicScene,e),BasicScene.prototype.init=function(e){e&&(this.render=e.render)},BasicScene.prototype.preload=function(){var e=h.StringUtils.format("正在加载资源 {0}",["0%"]);this.render&&this.render.showLoading({text:e})},BasicScene.prototype.setScale=function(e){this.layerManager&&this.layerManager.setScale(e)},BasicScene.prototype.updateProgress=function(e){},BasicScene.prototype.loadProgress=function(e){},BasicScene.prototype.create=function(){this.initialize=!0,this.render.emitter.emit("sceneCreated"),this.events.on("shutdown",this.destroy,this)},BasicScene.prototype.destroy=function(){this.events.off("shutdown",this.destroy,this),this.hasDestroy=!0,this.initialize=!1,this.hasChangeScene=!1},BasicScene.prototype.sceneInitialize=function(){return this.initialize},BasicScene.prototype.sceneDestroy=function(){return this.hasDestroy},Object.defineProperty(BasicScene.prototype,"sceneChange",{get:function(){return this.hasChangeScene},set:function(e){this.hasChangeScene=e},enumerable:!1,configurable:!0}),BasicScene.prototype.setViewPort=function(e,i,n,a){this.cameras.main.setViewport(e,i,n,a)},BasicScene.prototype.wake=function(e){this.scene.wake(void 0,e)},BasicScene.prototype.sleep=function(){this.scene.sleep()},BasicScene.prototype.stop=function(){this.scene.stop()},BasicScene}(Phaser.Scene),m=n(74),f=function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),g=function(e){function SkyBoxScene(){return e.call(this,{})||this}return f(SkyBoxScene,e),SkyBoxScene.prototype.init=function(i){e.prototype.init.call(this,i),i&&(this.skyBoxManager=i)},SkyBoxScene.prototype.preload=function(){},SkyBoxScene.prototype.create=function(){var e=this.cameras.main;this.cameras.addExisting(new m.a(0,0,this.sys.scale.width,this.sys.scale.height,this.skyBoxManager.scaleRatio),!0),this.cameras.remove(e),this.skyBoxManager.startPlay(this)},SkyBoxScene.prototype.update=function(e,i){this.skyBoxManager.check(e,i)},SkyBoxScene}(c)},function(e,i,n){"use strict";n.d(i,"a",(function(){return s}));var a=n(0),s=function(){function BaseCamerasManager(){this.zoom=1,this.mCameras=[]}return BaseCamerasManager.prototype.checkContains=function(e){var i=this.mMain.worldView;return!i&&i.contains(e.x,e.y)},BaseCamerasManager.prototype.startRoomPlay=function(e){this.mMain=e.cameras.main},BaseCamerasManager.prototype.pan=function(e,i,n){var a=this;e*=this.zoom,i*=this.zoom;for(var s=0,o=this.mCameras;s<o.length;s++){o[s].pan(e,i,n)}return new Promise((function(e,i){a.mMain.once(Phaser.Cameras.Scene2D.Events.PAN_COMPLETE,(function(){e()}))}))},BaseCamerasManager.prototype.resize=function(e,i){},BaseCamerasManager.prototype.setScroll=function(e,i){if(this.mMain){e-=.5*this.mMain.width,i-=.5*this.mMain.height;for(var n=0,a=this.mCameras;n<a.length;n++){a[n].setScroll(e,i)}}},BaseCamerasManager.prototype.offsetScroll=function(e,i){if(this.mMain){for(var n=0,a=this.mCameras;n<a.length;n++){var s=a[n];s.scrollX+=e,s.scrollY+=i}this.moving=!0}},BaseCamerasManager.prototype.startFollow=function(e){if(this.mTarget=e,this.mMain&&e)for(var i=0,n=this.mCameras;i<n.length;i++){n[i].startFollow(e)}},BaseCamerasManager.prototype.stopFollow=function(){if(this.mTarget=null,this.mMain)for(var e=0,i=this.mCameras;e<i.length;e++){i[e].stopFollow()}},BaseCamerasManager.prototype.addCamera=function(e){-1===this.mCameras.indexOf(e)&&this.mCameras.push(e),this.mTarget&&e.startFollow(this.mTarget)},BaseCamerasManager.prototype.removeCamera=function(e){var i=this.mCameras.indexOf(e);i>-1&&this.mCameras.splice(i,1)},BaseCamerasManager.prototype.setBounds=function(e,i,n,s,o){if(this.mMain)for(var h=0,l=this.mCameras;h<l.length;h++){l[h].setBounds(e,i,n,s,o)}else a.Logger.getInstance().error("camera does not exist")},BaseCamerasManager.prototype.setPosition=function(e,i){if(this.mMain)for(var n=0,a=this.mCameras;n<a.length;n++){a[n].setPosition(e,i)}},BaseCamerasManager.prototype.scrollTargetPoint=function(e,i,n){this.mMain&&(this.stopFollow(),n?this.pan(e,i,1e3):this.setScroll(e,i))},BaseCamerasManager.prototype.destroy=function(){a.Logger.getInstance().log("camerasmanager destroy"),this.mMain=void 0,this.mTarget=void 0,this.mCameras=[]},Object.defineProperty(BaseCamerasManager.prototype,"moving",{get:function(){return this.mMoving},set:function(e){this.mMoving=e},enumerable:!1,configurable:!0}),Object.defineProperty(BaseCamerasManager.prototype,"targetFollow",{get:function(){return this.mTarget},enumerable:!1,configurable:!0}),Object.defineProperty(BaseCamerasManager.prototype,"camera",{get:function(){return this.mMain},set:function(e){this.mMain=e,this.addCamera(e)},enumerable:!1,configurable:!0}),BaseCamerasManager}()},function(e,i,n){"use strict";n.d(i,"b",(function(){return s})),n.d(i,"a",(function(){return o.a}));var a=n(0),s=function(){function Scenery(e){this.mID=e.id,this.mDepth=e.depth,this.mUris=[];var i=null;(i=Array.isArray(e.uris)?e.uris:e.uris.value).length<1&&a.Logger.getInstance().error(Scenery.name+": scenery uris is empty");for(var n=0;n<i.length;n++){var s=i[n].value||i;this.mUris[n]=new Array(s[n].length);for(var o=0;o<s[n].length;o++)this.mUris[n][o]=s[n][o]}this.mSpeed=e.speed||1,e.width||a.Logger.getInstance().error(Scenery.name+": scenery width is "+e.width),e.height||a.Logger.getInstance().error(Scenery.name+": scenery height is "+e.height),this.mWidth=e.width,this.mHeight=e.height,this.mFit=e.fit,this.mOffset=e.offset||{x:0,y:0}}return Object.defineProperty(Scenery.prototype,"offset",{get:function(){return this.mOffset},enumerable:!1,configurable:!0}),Object.defineProperty(Scenery.prototype,"width",{get:function(){return this.mWidth},enumerable:!1,configurable:!0}),Object.defineProperty(Scenery.prototype,"height",{get:function(){return this.mHeight},enumerable:!1,configurable:!0}),Object.defineProperty(Scenery.prototype,"id",{get:function(){return this.mID},enumerable:!1,configurable:!0}),Object.defineProperty(Scenery.prototype,"depth",{get:function(){return this.mDepth},enumerable:!1,configurable:!0}),Object.defineProperty(Scenery.prototype,"speed",{get:function(){return this.mSpeed},enumerable:!1,configurable:!0}),Object.defineProperty(Scenery.prototype,"uris",{get:function(){return this.mUris},enumerable:!1,configurable:!0}),Object.defineProperty(Scenery.prototype,"fit",{get:function(){return this.mFit},enumerable:!1,configurable:!0}),Scenery}(),o=n(73)},,,,,,function(e,i,n){(function(i){e.exports=i.dragonBones=n(673)}).call(this,n(34))},,,function(e,i,n){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])});!function(e){var i=function(){function DragonBones(i){this._clock=new e.WorldClock,this._events=[],this._objects=[],this._eventManager=null,this._eventManager=i,console.info("DragonBones: "+DragonBones.VERSION+"\nWebsite: http://dragonbones.com/\nSource and Demo: https://github.com/DragonBones/")}return DragonBones.prototype.advanceTime=function(i){if(this._objects.length>0){for(var n=0,a=this._objects;n<a.length;n++){a[n].returnToPool()}this._objects.length=0}if(this._clock.advanceTime(i),this._events.length>0){for(var s=0;s<this._events.length;++s){var o=this._events[s],h=o.armature;null!==h._armatureData&&(h.eventDispatcher.dispatchDBEvent(o.type,o),o.type===e.EventObject.SOUND_EVENT&&this._eventManager.dispatchDBEvent(o.type,o)),this.bufferObject(o)}this._events.length=0}},DragonBones.prototype.bufferEvent=function(e){this._events.indexOf(e)<0&&this._events.push(e)},DragonBones.prototype.bufferObject=function(e){this._objects.indexOf(e)<0&&this._objects.push(e)},Object.defineProperty(DragonBones.prototype,"clock",{get:function(){return this._clock},enumerable:!0,configurable:!0}),Object.defineProperty(DragonBones.prototype,"eventManager",{get:function(){return this._eventManager},enumerable:!0,configurable:!0}),DragonBones.VERSION="5.7.000",DragonBones.yDown=!0,DragonBones.debug=!1,DragonBones.debugDraw=!1,DragonBones}();e.DragonBones=i}(m||(m={})),console.warn||(console.warn=function(){}),console.assert||(console.assert=function(){}),Date.now||(Date.now=function now(){return(new Date).getTime()});var o,h,l,c,m,f;s=function(e,i){function r(){this.constructor=e}for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);r.prototype=i.prototype,e.prototype=new r};if(void 0===g&&"undefined"!=typeof window)var g=window;e.exports=m,function(e){var i=function(){function BaseObject(){this.hashCode=BaseObject._hashCode++,this._isInPool=!1}return BaseObject._returnObject=function(e){var i=String(e.constructor),n=i in BaseObject._maxCountMap?BaseObject._maxCountMap[i]:BaseObject._defaultMaxCount,a=BaseObject._poolsMap[i]=BaseObject._poolsMap[i]||[];a.length<n&&(e._isInPool?console.warn("The object is already in the pool."):(e._isInPool=!0,a.push(e)))},BaseObject.toString=function(){throw new Error},BaseObject.setMaxCount=function(e,i){if((i<0||i!=i)&&(i=0),null!==e)null!==(a=(n=String(e))in BaseObject._poolsMap?BaseObject._poolsMap[n]:null)&&a.length>i&&(a.length=i),BaseObject._maxCountMap[n]=i;else for(var n in BaseObject._defaultMaxCount=i,BaseObject._poolsMap){var a;(a=BaseObject._poolsMap[n]).length>i&&(a.length=i),n in BaseObject._maxCountMap&&(BaseObject._maxCountMap[n]=i)}},BaseObject.clearPool=function(e){if(void 0===e&&(e=null),null!==e){var i=String(e);null!==(a=i in BaseObject._poolsMap?BaseObject._poolsMap[i]:null)&&a.length>0&&(a.length=0)}else for(var n in BaseObject._poolsMap){var a;(a=BaseObject._poolsMap[n]).length=0}},BaseObject.borrowObject=function(e){var i=String(e),n=i in BaseObject._poolsMap?BaseObject._poolsMap[i]:null;if(null!==n&&n.length>0){var a=n.pop();return a._isInPool=!1,a}var s=new e;return s._onClear(),s},BaseObject.prototype.returnToPool=function(){this._onClear(),BaseObject._returnObject(this)},BaseObject._hashCode=0,BaseObject._defaultMaxCount=3e3,BaseObject._maxCountMap={},BaseObject._poolsMap={},BaseObject}();e.BaseObject=i}(m||(m={})),function(e){var i=function(){function Matrix(e,i,n,a,s,o){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=1),void 0===s&&(s=0),void 0===o&&(o=0),this.a=e,this.b=i,this.c=n,this.d=a,this.tx=s,this.ty=o}return Matrix.prototype.toString=function(){return"[object dragonBones.Matrix] a:"+this.a+" b:"+this.b+" c:"+this.c+" d:"+this.d+" tx:"+this.tx+" ty:"+this.ty},Matrix.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},Matrix.prototype.copyFromArray=function(e,i){return void 0===i&&(i=0),this.a=e[i],this.b=e[i+1],this.c=e[i+2],this.d=e[i+3],this.tx=e[i+4],this.ty=e[i+5],this},Matrix.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this},Matrix.prototype.concat=function(e){var i=this.a*e.a,n=0,a=0,s=this.d*e.d,o=this.tx*e.a+e.tx,h=this.ty*e.d+e.ty;return 0===this.b&&0===this.c||(i+=this.b*e.c,n+=this.b*e.d,a+=this.c*e.a,s+=this.c*e.b),0===e.b&&0===e.c||(n+=this.a*e.b,a+=this.d*e.c,o+=this.ty*e.c,h+=this.tx*e.b),this.a=i,this.b=n,this.c=a,this.d=s,this.tx=o,this.ty=h,this},Matrix.prototype.invert=function(){var e=this.a,i=this.b,n=this.c,a=this.d,s=this.tx,o=this.ty;if(0===i&&0===n)return this.b=this.c=0,0===e||0===a?this.a=this.b=this.tx=this.ty=0:(e=this.a=1/e,a=this.d=1/a,this.tx=-e*s,this.ty=-a*o),this;var h=e*a-i*n;if(0===h)return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this;h=1/h;var l=this.a=a*h;return i=this.b=-i*h,n=this.c=-n*h,a=this.d=e*h,this.tx=-(l*s+n*o),this.ty=-(i*s+a*o),this},Matrix.prototype.transformPoint=function(e,i,n,a){void 0===a&&(a=!1),n.x=this.a*e+this.c*i,n.y=this.b*e+this.d*i,a||(n.x+=this.tx,n.y+=this.ty)},Matrix.prototype.transformRectangle=function(e,i){void 0===i&&(i=!1);var n=this.a,a=this.b,s=this.c,o=this.d,h=i?0:this.tx,l=i?0:this.ty,c=e.x,m=e.y,f=c+e.width,g=m+e.height,_=n*c+s*m+h,T=a*c+o*m+l,x=n*f+s*m+h,S=a*f+o*m+l,j=n*f+s*g+h,q=a*f+o*g+l,Y=n*c+s*g+h,X=a*c+o*g+l,Z=0;_>x&&(Z=_,_=x,x=Z),j>Y&&(Z=j,j=Y,Y=Z),e.x=Math.floor(_<j?_:j),e.width=Math.ceil((x>Y?x:Y)-e.x),T>S&&(Z=T,T=S,S=Z),q>X&&(Z=q,q=X,X=Z),e.y=Math.floor(T<q?T:q),e.height=Math.ceil((S>X?S:X)-e.y)},Matrix}();e.Matrix=i}(m||(m={})),function(e){var i=function(){function Transform(e,i,n,a,s,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=1),void 0===o&&(o=1),this.x=e,this.y=i,this.skew=n,this.rotation=a,this.scaleX=s,this.scaleY=o}return Transform.normalizeRadian=function(e){return e=(e+Math.PI)%(2*Math.PI),e+=e>0?-Math.PI:Math.PI},Transform.prototype.toString=function(){return"[object dragonBones.Transform] x:"+this.x+" y:"+this.y+" skewX:"+180*this.skew/Math.PI+" skewY:"+180*this.rotation/Math.PI+" scaleX:"+this.scaleX+" scaleY:"+this.scaleY},Transform.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.skew=e.skew,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this},Transform.prototype.identity=function(){return this.x=this.y=0,this.skew=this.rotation=0,this.scaleX=this.scaleY=1,this},Transform.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this.skew+=e.skew,this.rotation+=e.rotation,this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this},Transform.prototype.minus=function(e){return this.x-=e.x,this.y-=e.y,this.skew-=e.skew,this.rotation-=e.rotation,this.scaleX/=e.scaleX,this.scaleY/=e.scaleY,this},Transform.prototype.fromMatrix=function(e){var i=this.scaleX,n=this.scaleY,a=Transform.PI_Q;this.x=e.tx,this.y=e.ty,this.rotation=Math.atan(e.b/e.a);var s=Math.atan(-e.c/e.d);return this.scaleX=this.rotation>-a&&this.rotation<a?e.a/Math.cos(this.rotation):e.b/Math.sin(this.rotation),this.scaleY=s>-a&&s<a?e.d/Math.cos(s):-e.c/Math.sin(s),i>=0&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.rotation=this.rotation-Math.PI),n>=0&&this.scaleY<0&&(this.scaleY=-this.scaleY,s-=Math.PI),this.skew=s-this.rotation,this},Transform.prototype.toMatrix=function(e){return 0===this.rotation?(e.a=1,e.b=0):(e.a=Math.cos(this.rotation),e.b=Math.sin(this.rotation)),0===this.skew?(e.c=-e.b,e.d=e.a):(e.c=-Math.sin(this.skew+this.rotation),e.d=Math.cos(this.skew+this.rotation)),1!==this.scaleX&&(e.a*=this.scaleX,e.b*=this.scaleX),1!==this.scaleY&&(e.c*=this.scaleY,e.d*=this.scaleY),e.tx=this.x,e.ty=this.y,this},Transform.PI=Math.PI,Transform.PI_D=2*Math.PI,Transform.PI_H=Math.PI/2,Transform.PI_Q=Math.PI/4,Transform.RAD_DEG=180/Math.PI,Transform.DEG_RAD=Math.PI/180,Transform}();e.Transform=i}(m||(m={})),function(e){var i=function(){function ColorTransform(e,i,n,a,s,o,h,l){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===a&&(a=1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l=0),this.alphaMultiplier=e,this.redMultiplier=i,this.greenMultiplier=n,this.blueMultiplier=a,this.alphaOffset=s,this.redOffset=o,this.greenOffset=h,this.blueOffset=l}return ColorTransform.prototype.copyFrom=function(e){this.alphaMultiplier=e.alphaMultiplier,this.redMultiplier=e.redMultiplier,this.greenMultiplier=e.greenMultiplier,this.blueMultiplier=e.blueMultiplier,this.alphaOffset=e.alphaOffset,this.redOffset=e.redOffset,this.greenOffset=e.greenOffset,this.blueOffset=e.blueOffset},ColorTransform.prototype.identity=function(){this.alphaMultiplier=this.redMultiplier=this.greenMultiplier=this.blueMultiplier=1,this.alphaOffset=this.redOffset=this.greenOffset=this.blueOffset=0},ColorTransform}();e.ColorTransform=i}(m||(m={})),function(e){var i=function(){function Point(e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.x=e,this.y=i}return Point.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y},Point.prototype.clear=function(){this.x=this.y=0},Point}();e.Point=i}(m||(m={})),function(e){var i=function(){function Rectangle(e,i,n,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),this.x=e,this.y=i,this.width=n,this.height=a}return Rectangle.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},Rectangle.prototype.clear=function(){this.x=this.y=0,this.width=this.height=0},Rectangle}();e.Rectangle=i}(m||(m={})),function(e){var i=function(e){function UserData(){var i=null!==e&&e.apply(this,arguments)||this;return i.ints=[],i.floats=[],i.strings=[],i}return s(UserData,e),UserData.toString=function(){return"[class dragonBones.UserData]"},UserData.prototype._onClear=function(){this.ints.length=0,this.floats.length=0,this.strings.length=0},UserData.prototype.addInt=function(e){this.ints.push(e)},UserData.prototype.addFloat=function(e){this.floats.push(e)},UserData.prototype.addString=function(e){this.strings.push(e)},UserData.prototype.getInt=function(e){return void 0===e&&(e=0),e>=0&&e<this.ints.length?this.ints[e]:0},UserData.prototype.getFloat=function(e){return void 0===e&&(e=0),e>=0&&e<this.floats.length?this.floats[e]:0},UserData.prototype.getString=function(e){return void 0===e&&(e=0),e>=0&&e<this.strings.length?this.strings[e]:""},UserData}(e.BaseObject);e.UserData=i;var n=function(e){function ActionData(){var i=null!==e&&e.apply(this,arguments)||this;return i.data=null,i}return s(ActionData,e),ActionData.toString=function(){return"[class dragonBones.ActionData]"},ActionData.prototype._onClear=function(){null!==this.data&&this.data.returnToPool(),this.type=0,this.name="",this.bone=null,this.slot=null,this.data=null},ActionData}(e.BaseObject);e.ActionData=n}(m||(m={})),function(e){var i=function(e){function DragonBonesData(){var i=null!==e&&e.apply(this,arguments)||this;return i.frameIndices=[],i.cachedFrames=[],i.armatureNames=[],i.armatures={},i.userData=null,i}return s(DragonBonesData,e),DragonBonesData.toString=function(){return"[class dragonBones.DragonBonesData]"},DragonBonesData.prototype._onClear=function(){for(var e in this.armatures)this.armatures[e].returnToPool(),delete this.armatures[e];null!==this.userData&&this.userData.returnToPool(),this.autoSearch=!1,this.frameRate=0,this.version="",this.name="",this.stage=null,this.frameIndices.length=0,this.cachedFrames.length=0,this.armatureNames.length=0,this.binary=null,this.intArray=null,this.floatArray=null,this.frameIntArray=null,this.frameFloatArray=null,this.frameArray=null,this.timelineArray=null,this.colorArray=null,this.userData=null},DragonBonesData.prototype.addArmature=function(e){e.name in this.armatures?console.warn("Same armature: "+e.name):(e.parent=this,this.armatures[e.name]=e,this.armatureNames.push(e.name))},DragonBonesData.prototype.getArmature=function(e){return e in this.armatures?this.armatures[e]:null},DragonBonesData}(e.BaseObject);e.DragonBonesData=i}(m||(m={})),function(e){var i=function(i){function ArmatureData(){var n=null!==i&&i.apply(this,arguments)||this;return n.aabb=new e.Rectangle,n.animationNames=[],n.sortedBones=[],n.sortedSlots=[],n.defaultActions=[],n.actions=[],n.bones={},n.slots={},n.constraints={},n.skins={},n.animations={},n.canvas=null,n.userData=null,n}return s(ArmatureData,i),ArmatureData.toString=function(){return"[class dragonBones.ArmatureData]"},ArmatureData.prototype._onClear=function(){for(var e=0,i=this.defaultActions;e<i.length;e++){i[e].returnToPool()}for(var n=0,a=this.actions;n<a.length;n++){a[n].returnToPool()}for(var s in this.bones)this.bones[s].returnToPool(),delete this.bones[s];for(var s in this.slots)this.slots[s].returnToPool(),delete this.slots[s];for(var s in this.constraints)this.constraints[s].returnToPool(),delete this.constraints[s];for(var s in this.skins)this.skins[s].returnToPool(),delete this.skins[s];for(var s in this.animations)this.animations[s].returnToPool(),delete this.animations[s];null!==this.canvas&&this.canvas.returnToPool(),null!==this.userData&&this.userData.returnToPool(),this.type=0,this.frameRate=0,this.cacheFrameRate=0,this.scale=1,this.name="",this.aabb.clear(),this.animationNames.length=0,this.sortedBones.length=0,this.sortedSlots.length=0,this.defaultActions.length=0,this.actions.length=0,this.defaultSkin=null,this.defaultAnimation=null,this.canvas=null,this.userData=null,this.parent=null},ArmatureData.prototype.sortBones=function(){var e=this.sortedBones.length;if(!(e<=0)){var i=this.sortedBones.concat(),n=0,a=0;for(this.sortedBones.length=0;a<e;){var s=i[n++];if(n>=e&&(n=0),!(this.sortedBones.indexOf(s)>=0)){var o=!1;for(var h in this.constraints){var l=this.constraints[h];if(l.root===s&&this.sortedBones.indexOf(l.target)<0){o=!0;break}}o||null!==s.parent&&this.sortedBones.indexOf(s.parent)<0||(this.sortedBones.push(s),a++)}}}},ArmatureData.prototype.cacheFrames=function(e){if(!(this.cacheFrameRate>0))for(var i in this.cacheFrameRate=e,this.animations)this.animations[i].cacheFrames(this.cacheFrameRate)},ArmatureData.prototype.setCacheFrame=function(e,i){var n=this.parent.cachedFrames,a=n.length;return n.length+=10,n[a]=e.a,n[a+1]=e.b,n[a+2]=e.c,n[a+3]=e.d,n[a+4]=e.tx,n[a+5]=e.ty,n[a+6]=i.rotation,n[a+7]=i.skew,n[a+8]=i.scaleX,n[a+9]=i.scaleY,a},ArmatureData.prototype.getCacheFrame=function(e,i,n){var a=this.parent.cachedFrames;e.a=a[n],e.b=a[n+1],e.c=a[n+2],e.d=a[n+3],e.tx=a[n+4],e.ty=a[n+5],i.rotation=a[n+6],i.skew=a[n+7],i.scaleX=a[n+8],i.scaleY=a[n+9],i.x=e.tx,i.y=e.ty},ArmatureData.prototype.addBone=function(e){e.name in this.bones?console.warn("Same bone: "+e.name):(this.bones[e.name]=e,this.sortedBones.push(e))},ArmatureData.prototype.addSlot=function(e){e.name in this.slots?console.warn("Same slot: "+e.name):(this.slots[e.name]=e,this.sortedSlots.push(e))},ArmatureData.prototype.addConstraint=function(e){e.name in this.constraints?console.warn("Same constraint: "+e.name):this.constraints[e.name]=e},ArmatureData.prototype.addSkin=function(e){e.name in this.skins?console.warn("Same skin: "+e.name):(e.parent=this,this.skins[e.name]=e,null===this.defaultSkin&&(this.defaultSkin=e),"default"===e.name&&(this.defaultSkin=e))},ArmatureData.prototype.addAnimation=function(e){e.name in this.animations?console.warn("Same animation: "+e.name):(e.parent=this,this.animations[e.name]=e,this.animationNames.push(e.name),null===this.defaultAnimation&&(this.defaultAnimation=e))},ArmatureData.prototype.addAction=function(e,i){i?this.defaultActions.push(e):this.actions.push(e)},ArmatureData.prototype.getBone=function(e){return e in this.bones?this.bones[e]:null},ArmatureData.prototype.getSlot=function(e){return e in this.slots?this.slots[e]:null},ArmatureData.prototype.getConstraint=function(e){return e in this.constraints?this.constraints[e]:null},ArmatureData.prototype.getSkin=function(e){return e in this.skins?this.skins[e]:null},ArmatureData.prototype.getMesh=function(e,i,n){var a=this.getSkin(e);return null===a?null:a.getDisplay(i,n)},ArmatureData.prototype.getAnimation=function(e){return e in this.animations?this.animations[e]:null},ArmatureData}(e.BaseObject);e.ArmatureData=i;var n=function(i){function BoneData(){var n=null!==i&&i.apply(this,arguments)||this;return n.transform=new e.Transform,n.userData=null,n}return s(BoneData,i),BoneData.toString=function(){return"[class dragonBones.BoneData]"},BoneData.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.inheritTranslation=!1,this.inheritRotation=!1,this.inheritScale=!1,this.inheritReflection=!1,this.type=0,this.length=0,this.alpha=1,this.name="",this.transform.identity(),this.userData=null,this.parent=null},BoneData}(e.BaseObject);e.BoneData=n;var a=function(i){function SurfaceData(){var n=null!==i&&i.apply(this,arguments)||this;return n.geometry=new e.GeometryData,n}return s(SurfaceData,i),SurfaceData.toString=function(){return"[class dragonBones.SurfaceData]"},SurfaceData.prototype._onClear=function(){i.prototype._onClear.call(this),this.type=1,this.segmentX=0,this.segmentY=0,this.geometry.clear()},SurfaceData}(n);e.SurfaceData=a;var o=function(i){function SlotData(){var e=null!==i&&i.apply(this,arguments)||this;return e.color=null,e.userData=null,e}return s(SlotData,i),SlotData.createColor=function(){return new e.ColorTransform},SlotData.toString=function(){return"[class dragonBones.SlotData]"},SlotData.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.blendMode=0,this.displayIndex=0,this.zOrder=0,this.zIndex=0,this.alpha=1,this.name="",this.color=null,this.userData=null,this.parent=null},SlotData.DEFAULT_COLOR=new e.ColorTransform,SlotData}(e.BaseObject);e.SlotData=o}(m||(m={})),function(e){var i=function(e){function ConstraintData(){return null!==e&&e.apply(this,arguments)||this}return s(ConstraintData,e),ConstraintData.prototype._onClear=function(){this.order=0,this.name="",this.type=0,this.target=null,this.root=null,this.bone=null},ConstraintData}(e.BaseObject);e.ConstraintData=i;var n=function(e){function IKConstraintData(){return null!==e&&e.apply(this,arguments)||this}return s(IKConstraintData,e),IKConstraintData.toString=function(){return"[class dragonBones.IKConstraintData]"},IKConstraintData.prototype._onClear=function(){e.prototype._onClear.call(this),this.scaleEnabled=!1,this.bendPositive=!1,this.weight=1},IKConstraintData}(i);e.IKConstraintData=n;var a=function(e){function PathConstraintData(){var i=null!==e&&e.apply(this,arguments)||this;return i.bones=[],i}return s(PathConstraintData,e),PathConstraintData.toString=function(){return"[class dragonBones.PathConstraintData]"},PathConstraintData.prototype._onClear=function(){e.prototype._onClear.call(this),this.pathSlot=null,this.pathDisplayData=null,this.bones.length=0,this.positionMode=0,this.spacingMode=1,this.rotateMode=1,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=0,this.translateMix=0},PathConstraintData.prototype.AddBone=function(e){this.bones.push(e)},PathConstraintData}(i);e.PathConstraintData=a}(m||(m={})),function(e){var i=function(e){function CanvasData(){return null!==e&&e.apply(this,arguments)||this}return s(CanvasData,e),CanvasData.toString=function(){return"[class dragonBones.CanvasData]"},CanvasData.prototype._onClear=function(){this.hasBackground=!1,this.color=0,this.x=0,this.y=0,this.width=0,this.height=0},CanvasData}(e.BaseObject);e.CanvasData=i}(m||(m={})),function(e){var i=function(e){function SkinData(){var i=null!==e&&e.apply(this,arguments)||this;return i.displays={},i}return s(SkinData,e),SkinData.toString=function(){return"[class dragonBones.SkinData]"},SkinData.prototype._onClear=function(){for(var e in this.displays){for(var i=0,n=this.displays[e];i<n.length;i++){var a=n[i];null!==a&&a.returnToPool()}delete this.displays[e]}this.name="",this.parent=null},SkinData.prototype.addDisplay=function(e,i){e in this.displays||(this.displays[e]=[]),null!==i&&(i.parent=this),this.displays[e].push(i)},SkinData.prototype.getDisplay=function(e,i){var n=this.getDisplays(e);if(null!==n)for(var a=0,s=n;a<s.length;a++){var o=s[a];if(null!==o&&o.name===i)return o}return null},SkinData.prototype.getDisplays=function(e){return e in this.displays?this.displays[e]:null},SkinData}(e.BaseObject);e.SkinData=i}(m||(m={})),function(e){var i=function(){function GeometryData(){this.weight=null}return GeometryData.prototype.clear=function(){this.isShared||null===this.weight||this.weight.returnToPool(),this.isShared=!1,this.inheritDeform=!1,this.offset=0,this.data=null,this.weight=null},GeometryData.prototype.shareFrom=function(e){this.isShared=!0,this.offset=e.offset,this.weight=e.weight},Object.defineProperty(GeometryData.prototype,"vertexCount",{get:function(){return this.data.intArray[this.offset+0]},enumerable:!0,configurable:!0}),Object.defineProperty(GeometryData.prototype,"triangleCount",{get:function(){return this.data.intArray[this.offset+1]},enumerable:!0,configurable:!0}),GeometryData}();e.GeometryData=i;var n=function(i){function DisplayData(){var n=null!==i&&i.apply(this,arguments)||this;return n.transform=new e.Transform,n}return s(DisplayData,i),DisplayData.prototype._onClear=function(){this.name="",this.path="",this.transform.identity(),this.parent=null},DisplayData}(e.BaseObject);e.DisplayData=n;var a=function(i){function ImageDisplayData(){var n=null!==i&&i.apply(this,arguments)||this;return n.pivot=new e.Point,n}return s(ImageDisplayData,i),ImageDisplayData.toString=function(){return"[class dragonBones.ImageDisplayData]"},ImageDisplayData.prototype._onClear=function(){i.prototype._onClear.call(this),this.type=0,this.pivot.clear(),this.texture=null},ImageDisplayData}(n);e.ImageDisplayData=a;var o=function(e){function ArmatureDisplayData(){var i=null!==e&&e.apply(this,arguments)||this;return i.actions=[],i}return s(ArmatureDisplayData,e),ArmatureDisplayData.toString=function(){return"[class dragonBones.ArmatureDisplayData]"},ArmatureDisplayData.prototype._onClear=function(){e.prototype._onClear.call(this);for(var i=0,n=this.actions;i<n.length;i++){n[i].returnToPool()}this.type=1,this.inheritAnimation=!1,this.actions.length=0,this.armature=null},ArmatureDisplayData.prototype.addAction=function(e){this.actions.push(e)},ArmatureDisplayData}(n);e.ArmatureDisplayData=o;var h=function(e){function MeshDisplayData(){var n=null!==e&&e.apply(this,arguments)||this;return n.geometry=new i,n}return s(MeshDisplayData,e),MeshDisplayData.toString=function(){return"[class dragonBones.MeshDisplayData]"},MeshDisplayData.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=2,this.geometry.clear(),this.texture=null},MeshDisplayData}(n);e.MeshDisplayData=h;var l=function(e){function BoundingBoxDisplayData(){var i=null!==e&&e.apply(this,arguments)||this;return i.boundingBox=null,i}return s(BoundingBoxDisplayData,e),BoundingBoxDisplayData.toString=function(){return"[class dragonBones.BoundingBoxDisplayData]"},BoundingBoxDisplayData.prototype._onClear=function(){e.prototype._onClear.call(this),null!==this.boundingBox&&this.boundingBox.returnToPool(),this.type=3,this.boundingBox=null},BoundingBoxDisplayData}(n);e.BoundingBoxDisplayData=l;var c=function(e){function PathDisplayData(){var n=null!==e&&e.apply(this,arguments)||this;return n.geometry=new i,n.curveLengths=[],n}return s(PathDisplayData,e),PathDisplayData.toString=function(){return"[class dragonBones.PathDisplayData]"},PathDisplayData.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=4,this.closed=!1,this.constantSpeed=!1,this.geometry.clear(),this.curveLengths.length=0},PathDisplayData}(n);e.PathDisplayData=c;var m=function(e){function WeightData(){var i=null!==e&&e.apply(this,arguments)||this;return i.bones=[],i}return s(WeightData,e),WeightData.toString=function(){return"[class dragonBones.WeightData]"},WeightData.prototype._onClear=function(){this.count=0,this.offset=0,this.bones.length=0},WeightData.prototype.addBone=function(e){this.bones.push(e)},WeightData}(e.BaseObject);e.WeightData=m}(m||(m={})),function(e){var i=function(e){function BoundingBoxData(){return null!==e&&e.apply(this,arguments)||this}return s(BoundingBoxData,e),BoundingBoxData.prototype._onClear=function(){this.color=0,this.width=0,this.height=0},BoundingBoxData}(e.BaseObject);e.BoundingBoxData=i;var n=function(e){function RectangleBoundingBoxData(){return null!==e&&e.apply(this,arguments)||this}return s(RectangleBoundingBoxData,e),RectangleBoundingBoxData.toString=function(){return"[class dragonBones.RectangleBoundingBoxData]"},RectangleBoundingBoxData._computeOutCode=function(e,i,n,a,s,o){var h=0;return e<n?h|=1:e>s&&(h|=2),i<a?h|=4:i>o&&(h|=8),h},RectangleBoundingBoxData.rectangleIntersectsSegment=function(e,i,n,a,s,o,h,l,c,m,f){void 0===c&&(c=null),void 0===m&&(m=null),void 0===f&&(f=null);var g=e>s&&e<h&&i>o&&i<l,_=n>s&&n<h&&a>o&&a<l;if(g&&_)return-1;for(var T=0,x=RectangleBoundingBoxData._computeOutCode(e,i,s,o,h,l),S=RectangleBoundingBoxData._computeOutCode(n,a,s,o,h,l);;){if(0==(x|S)){T=2;break}if(0!=(x&S))break;var j=0,q=0,Y=0,X=0!==x?x:S;0!=(4&X)?(j=e+(n-e)*(o-i)/(a-i),q=o,null!==f&&(Y=.5*-Math.PI)):0!=(8&X)?(j=e+(n-e)*(l-i)/(a-i),q=l,null!==f&&(Y=.5*Math.PI)):0!=(2&X)?(q=i+(a-i)*(h-e)/(n-e),j=h,null!==f&&(Y=0)):0!=(1&X)&&(q=i+(a-i)*(s-e)/(n-e),j=s,null!==f&&(Y=Math.PI)),X===x?(e=j,i=q,x=RectangleBoundingBoxData._computeOutCode(e,i,s,o,h,l),null!==f&&(f.x=Y)):(n=j,a=q,S=RectangleBoundingBoxData._computeOutCode(n,a,s,o,h,l),null!==f&&(f.y=Y))}return T&&(g?(T=2,null!==c&&(c.x=n,c.y=a),null!==m&&(m.x=n,m.y=n),null!==f&&(f.x=f.y+Math.PI)):_?(T=1,null!==c&&(c.x=e,c.y=i),null!==m&&(m.x=e,m.y=i),null!==f&&(f.y=f.x+Math.PI)):(T=3,null!==c&&(c.x=e,c.y=i),null!==m&&(m.x=n,m.y=a))),T},RectangleBoundingBoxData.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=0},RectangleBoundingBoxData.prototype.containsPoint=function(e,i){var n=.5*this.width;if(e>=-n&&e<=n){var a=.5*this.height;if(i>=-a&&i<=a)return!0}return!1},RectangleBoundingBoxData.prototype.intersectsSegment=function(e,i,n,a,s,o,h){void 0===s&&(s=null),void 0===o&&(o=null),void 0===h&&(h=null);var l=.5*this.width,c=.5*this.height;return RectangleBoundingBoxData.rectangleIntersectsSegment(e,i,n,a,-l,-c,l,c,s,o,h)},RectangleBoundingBoxData}(i);e.RectangleBoundingBoxData=n;var a=function(e){function EllipseBoundingBoxData(){return null!==e&&e.apply(this,arguments)||this}return s(EllipseBoundingBoxData,e),EllipseBoundingBoxData.toString=function(){return"[class dragonBones.EllipseData]"},EllipseBoundingBoxData.ellipseIntersectsSegment=function(e,i,n,a,s,o,h,l,c,m,f){void 0===c&&(c=null),void 0===m&&(m=null),void 0===f&&(f=null);var g=h/l,_=g*g,T=n-e,x=(a*=g)-(i*=g),S=Math.sqrt(T*T+x*x),j=T/S,q=x/S,Y=(s-e)*j+(o-i)*q,X=h*h,Z=X-(e*e+i*i)+Y*Y,$=0;if(Z>=0){var tt=Math.sqrt(Z),et=Y-tt,it=Y+tt,nt=et<0?-1:et<=S?0:1,rt=it<0?-1:it<=S?0:1,at=nt*rt;if(at<0)return-1;0===at&&(-1===nt?($=2,n=e+it*j,a=(i+it*q)/g,null!==c&&(c.x=n,c.y=a),null!==m&&(m.x=n,m.y=a),null!==f&&(f.x=Math.atan2(a/X*_,n/X),f.y=f.x+Math.PI)):1===rt?($=1,e+=et*j,i=(i+et*q)/g,null!==c&&(c.x=e,c.y=i),null!==m&&(m.x=e,m.y=i),null!==f&&(f.x=Math.atan2(i/X*_,e/X),f.y=f.x+Math.PI)):($=3,null!==c&&(c.x=e+et*j,c.y=(i+et*q)/g,null!==f&&(f.x=Math.atan2(c.y/X*_,c.x/X))),null!==m&&(m.x=e+it*j,m.y=(i+it*q)/g,null!==f&&(f.y=Math.atan2(m.y/X*_,m.x/X)))))}return $},EllipseBoundingBoxData.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=1},EllipseBoundingBoxData.prototype.containsPoint=function(e,i){var n=.5*this.width;if(e>=-n&&e<=n){var a=.5*this.height;if(i>=-a&&i<=a)return i*=n/a,Math.sqrt(e*e+i*i)<=n}return!1},EllipseBoundingBoxData.prototype.intersectsSegment=function(e,i,n,a,s,o,h){return void 0===s&&(s=null),void 0===o&&(o=null),void 0===h&&(h=null),EllipseBoundingBoxData.ellipseIntersectsSegment(e,i,n,a,0,0,.5*this.width,.5*this.height,s,o,h)},EllipseBoundingBoxData}(i);e.EllipseBoundingBoxData=a;var o=function(e){function PolygonBoundingBoxData(){var i=null!==e&&e.apply(this,arguments)||this;return i.vertices=[],i}return s(PolygonBoundingBoxData,e),PolygonBoundingBoxData.toString=function(){return"[class dragonBones.PolygonBoundingBoxData]"},PolygonBoundingBoxData.polygonIntersectsSegment=function(e,i,n,a,s,o,h,l){void 0===o&&(o=null),void 0===h&&(h=null),void 0===l&&(l=null),e===n&&(e=n+1e-6),i===a&&(i=a+1e-6);for(var c=s.length,m=e-n,f=i-a,g=e*a-i*n,_=0,T=s[c-2],x=s[c-1],S=0,j=0,q=0,Y=0,X=0,Z=0,$=0;$<c;$+=2){var tt=s[$],et=s[$+1];T===tt&&(T=tt+1e-4),x===et&&(x=et+1e-4);var it=T-tt,nt=x-et,rt=T*et-x*tt,at=m*nt-f*it,st=(g*it-m*rt)/at;if((st>=T&&st<=tt||st>=tt&&st<=T)&&(0===m||st>=e&&st<=n||st>=n&&st<=e)){var ot=(g*nt-f*rt)/at;if((ot>=x&&ot<=et||ot>=et&&ot<=x)&&(0===f||ot>=i&&ot<=a||ot>=a&&ot<=i)){if(null===h){q=st,Y=ot,X=st,Z=ot,_++,null!==l&&(l.x=Math.atan2(et-x,tt-T)-.5*Math.PI,l.y=l.x);break}var ht=st-e;ht<0&&(ht=-ht),0===_?(S=ht,j=ht,q=st,Y=ot,X=st,Z=ot,null!==l&&(l.x=Math.atan2(et-x,tt-T)-.5*Math.PI,l.y=l.x)):(ht<S&&(S=ht,q=st,Y=ot,null!==l&&(l.x=Math.atan2(et-x,tt-T)-.5*Math.PI)),ht>j&&(j=ht,X=st,Z=ot,null!==l&&(l.y=Math.atan2(et-x,tt-T)-.5*Math.PI))),_++}}T=tt,x=et}return 1===_?(null!==o&&(o.x=q,o.y=Y),null!==h&&(h.x=q,h.y=Y),null!==l&&(l.y=l.x+Math.PI)):_>1&&(_++,null!==o&&(o.x=q,o.y=Y),null!==h&&(h.x=X,h.y=Z)),_},PolygonBoundingBoxData.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=2,this.x=0,this.y=0,this.vertices.length=0},PolygonBoundingBoxData.prototype.containsPoint=function(e,i){var n=!1;if(e>=this.x&&e<=this.width&&i>=this.y&&i<=this.height)for(var a=0,s=this.vertices.length,o=s-2;a<s;a+=2){var h=this.vertices[o+1],l=this.vertices[a+1];if(l<i&&h>=i||h<i&&l>=i){var c=this.vertices[o],m=this.vertices[a];(i-l)*(c-m)/(h-l)+m<e&&(n=!n)}o=a}return n},PolygonBoundingBoxData.prototype.intersectsSegment=function(e,i,a,s,o,h,l){void 0===o&&(o=null),void 0===h&&(h=null),void 0===l&&(l=null);var c=0;return 0!==n.rectangleIntersectsSegment(e,i,a,s,this.x,this.y,this.x+this.width,this.y+this.height,null,null,null)&&(c=PolygonBoundingBoxData.polygonIntersectsSegment(e,i,a,s,this.vertices,o,h,l)),c},PolygonBoundingBoxData}(i);e.PolygonBoundingBoxData=o}(m||(m={})),function(e){var i=function(e){function AnimationData(){var i=null!==e&&e.apply(this,arguments)||this;return i.cachedFrames=[],i.boneTimelines={},i.slotTimelines={},i.constraintTimelines={},i.animationTimelines={},i.boneCachedFrameIndices={},i.slotCachedFrameIndices={},i.actionTimeline=null,i.zOrderTimeline=null,i}return s(AnimationData,e),AnimationData.toString=function(){return"[class dragonBones.AnimationData]"},AnimationData.prototype._onClear=function(){for(var e in this.boneTimelines){for(var i=0,n=this.boneTimelines[e];i<n.length;i++){n[i].returnToPool()}delete this.boneTimelines[e]}for(var e in this.slotTimelines){for(var a=0,s=this.slotTimelines[e];a<s.length;a++){s[a].returnToPool()}delete this.slotTimelines[e]}for(var e in this.constraintTimelines){for(var o=0,h=this.constraintTimelines[e];o<h.length;o++){h[o].returnToPool()}delete this.constraintTimelines[e]}for(var e in this.animationTimelines){for(var l=0,c=this.animationTimelines[e];l<c.length;l++){c[l].returnToPool()}delete this.animationTimelines[e]}for(var e in this.boneCachedFrameIndices)delete this.boneCachedFrameIndices[e];for(var e in this.slotCachedFrameIndices)delete this.slotCachedFrameIndices[e];null!==this.actionTimeline&&this.actionTimeline.returnToPool(),null!==this.zOrderTimeline&&this.zOrderTimeline.returnToPool(),this.frameIntOffset=0,this.frameFloatOffset=0,this.frameOffset=0,this.blendType=0,this.frameCount=0,this.playTimes=0,this.duration=0,this.scale=1,this.fadeInTime=0,this.cacheFrameRate=0,this.name="",this.cachedFrames.length=0,this.actionTimeline=null,this.zOrderTimeline=null,this.parent=null},AnimationData.prototype.cacheFrames=function(e){if(!(this.cacheFrameRate>0)){this.cacheFrameRate=Math.max(Math.ceil(e*this.scale),1);var i=Math.ceil(this.cacheFrameRate*this.duration)+1;this.cachedFrames.length=i;for(var n=0,a=this.cacheFrames.length;n<a;++n)this.cachedFrames[n]=!1;for(var s=0,o=this.parent.sortedBones;s<o.length;s++){var h=o[s];for(n=0,a=(m=new Array(i)).length;n<a;++n)m[n]=-1;this.boneCachedFrameIndices[h.name]=m}for(var l=0,c=this.parent.sortedSlots;l<c.length;l++){var m,f=c[l];for(n=0,a=(m=new Array(i)).length;n<a;++n)m[n]=-1;this.slotCachedFrameIndices[f.name]=m}}},AnimationData.prototype.addBoneTimeline=function(e,i){var n=e in this.boneTimelines?this.boneTimelines[e]:this.boneTimelines[e]=[];n.indexOf(i)<0&&n.push(i)},AnimationData.prototype.addSlotTimeline=function(e,i){var n=e in this.slotTimelines?this.slotTimelines[e]:this.slotTimelines[e]=[];n.indexOf(i)<0&&n.push(i)},AnimationData.prototype.addConstraintTimeline=function(e,i){var n=e in this.constraintTimelines?this.constraintTimelines[e]:this.constraintTimelines[e]=[];n.indexOf(i)<0&&n.push(i)},AnimationData.prototype.addAnimationTimeline=function(e,i){var n=e in this.animationTimelines?this.animationTimelines[e]:this.animationTimelines[e]=[];n.indexOf(i)<0&&n.push(i)},AnimationData.prototype.getBoneTimelines=function(e){return e in this.boneTimelines?this.boneTimelines[e]:null},AnimationData.prototype.getSlotTimelines=function(e){return e in this.slotTimelines?this.slotTimelines[e]:null},AnimationData.prototype.getConstraintTimelines=function(e){return e in this.constraintTimelines?this.constraintTimelines[e]:null},AnimationData.prototype.getAnimationTimelines=function(e){return e in this.animationTimelines?this.animationTimelines[e]:null},AnimationData.prototype.getBoneCachedFrameIndices=function(e){return e in this.boneCachedFrameIndices?this.boneCachedFrameIndices[e]:null},AnimationData.prototype.getSlotCachedFrameIndices=function(e){return e in this.slotCachedFrameIndices?this.slotCachedFrameIndices[e]:null},AnimationData}(e.BaseObject);e.AnimationData=i;var n=function(e){function TimelineData(){return null!==e&&e.apply(this,arguments)||this}return s(TimelineData,e),TimelineData.toString=function(){return"[class dragonBones.TimelineData]"},TimelineData.prototype._onClear=function(){this.type=10,this.offset=0,this.frameIndicesOffset=-1},TimelineData}(e.BaseObject);e.TimelineData=n;var a=function(e){function AnimationTimelineData(){return null!==e&&e.apply(this,arguments)||this}return s(AnimationTimelineData,e),AnimationTimelineData.toString=function(){return"[class dragonBones.AnimationTimelineData]"},AnimationTimelineData.prototype._onClear=function(){e.prototype._onClear.call(this),this.x=0,this.y=0},AnimationTimelineData}(n);e.AnimationTimelineData=a}(m||(m={})),function(e){var i=function(e){function AnimationConfig(){var i=null!==e&&e.apply(this,arguments)||this;return i.boneMask=[],i}return s(AnimationConfig,e),AnimationConfig.toString=function(){return"[class dragonBones.AnimationConfig]"},AnimationConfig.prototype._onClear=function(){this.pauseFadeOut=!0,this.fadeOutMode=4,this.fadeOutTweenType=1,this.fadeOutTime=-1,this.actionEnabled=!0,this.additive=!1,this.displayControl=!0,this.pauseFadeIn=!0,this.resetToPose=!0,this.fadeInTweenType=1,this.playTimes=-1,this.layer=0,this.position=0,this.duration=-1,this.timeScale=-100,this.weight=1,this.fadeInTime=-1,this.autoFadeOutTime=-1,this.name="",this.animation="",this.group="",this.boneMask.length=0},AnimationConfig.prototype.clear=function(){this._onClear()},AnimationConfig.prototype.copyFrom=function(e){this.pauseFadeOut=e.pauseFadeOut,this.fadeOutMode=e.fadeOutMode,this.autoFadeOutTime=e.autoFadeOutTime,this.fadeOutTweenType=e.fadeOutTweenType,this.actionEnabled=e.actionEnabled,this.additive=e.additive,this.displayControl=e.displayControl,this.pauseFadeIn=e.pauseFadeIn,this.resetToPose=e.resetToPose,this.playTimes=e.playTimes,this.layer=e.layer,this.position=e.position,this.duration=e.duration,this.timeScale=e.timeScale,this.fadeInTime=e.fadeInTime,this.fadeOutTime=e.fadeOutTime,this.fadeInTweenType=e.fadeInTweenType,this.weight=e.weight,this.name=e.name,this.animation=e.animation,this.group=e.group,this.boneMask.length=e.boneMask.length;for(var i=0,n=this.boneMask.length;i<n;++i)this.boneMask[i]=e.boneMask[i]},AnimationConfig}(e.BaseObject);e.AnimationConfig=i}(m||(m={})),function(e){var i=function(e){function TextureAtlasData(){var i=null!==e&&e.apply(this,arguments)||this;return i.textures={},i}return s(TextureAtlasData,e),TextureAtlasData.prototype._onClear=function(){for(var e in this.textures)this.textures[e].returnToPool(),delete this.textures[e];this.autoSearch=!1,this.width=0,this.height=0,this.scale=1,this.name="",this.imagePath=""},TextureAtlasData.prototype.copyFrom=function(e){for(var i in this.autoSearch=e.autoSearch,this.scale=e.scale,this.width=e.width,this.height=e.height,this.name=e.name,this.imagePath=e.imagePath,this.textures)this.textures[i].returnToPool(),delete this.textures[i];for(var i in e.textures){var n=this.createTexture();n.copyFrom(e.textures[i]),this.textures[i]=n}},TextureAtlasData.prototype.addTexture=function(e){e.name in this.textures?console.warn("Same texture: "+e.name):(e.parent=this,this.textures[e.name]=e)},TextureAtlasData.prototype.getTexture=function(e){return e in this.textures?this.textures[e]:null},TextureAtlasData}(e.BaseObject);e.TextureAtlasData=i;var n=function(i){function TextureData(){var n=null!==i&&i.apply(this,arguments)||this;return n.region=new e.Rectangle,n.frame=null,n}return s(TextureData,i),TextureData.createRectangle=function(){return new e.Rectangle},TextureData.prototype._onClear=function(){this.rotated=!1,this.name="",this.region.clear(),this.parent=null,this.frame=null},TextureData.prototype.copyFrom=function(e){this.rotated=e.rotated,this.name=e.name,this.region.copyFrom(e.region),this.parent=e.parent,null===this.frame&&null!==e.frame?this.frame=TextureData.createRectangle():null!==this.frame&&null===e.frame&&(this.frame=null),null!==this.frame&&null!==e.frame&&this.frame.copyFrom(e.frame)},TextureData}(e.BaseObject);e.TextureData=n}(m||(m={})),o=m||(m={}),h=function(e){function Armature(){var i=null!==e&&e.apply(this,arguments)||this;return i._bones=[],i._slots=[],i._constraints=[],i._actions=[],i._animation=null,i._proxy=null,i._replaceTextureAtlasData=null,i._clock=null,i}return s(Armature,e),Armature.toString=function(){return"[class dragonBones.Armature]"},Armature._onSortSlots=function(e,i){return 1e3*e._zIndex+e._zOrder>1e3*i._zIndex+i._zOrder?1:-1},Armature.prototype._onClear=function(){null!==this._clock&&this._clock.remove(this);for(var e=0,i=this._bones;e<i.length;e++)i[e].returnToPool();for(var n=0,a=this._slots;n<a.length;n++)a[n].returnToPool();for(var s=0,o=this._constraints;s<o.length;s++)o[s].returnToPool();for(var h=0,l=this._actions;h<l.length;h++)l[h].returnToPool();null!==this._animation&&this._animation.returnToPool(),null!==this._proxy&&this._proxy.dbClear(),null!==this._replaceTextureAtlasData&&this._replaceTextureAtlasData.returnToPool(),this.inheritAnimation=!0,this.userData=null,this._lockUpdate=!1,this._slotsDirty=!0,this._zOrderDirty=!1,this._zIndexDirty=!1,this._alphaDirty=!0,this._flipX=!1,this._flipY=!1,this._cacheFrameIndex=-1,this._alpha=1,this._globalAlpha=1,this._bones.length=0,this._slots.length=0,this._constraints.length=0,this._actions.length=0,this._armatureData=null,this._animation=null,this._proxy=null,this._display=null,this._replaceTextureAtlasData=null,this._replacedTexture=null,this._dragonBones=null,this._clock=null,this._parent=null},Armature.prototype._sortZOrder=function(e,i){var n=this._armatureData.sortedSlots,a=null===e;if(this._zOrderDirty||!a){for(var s=0,o=n.length;s<o;++s){var h=a?s:e[i+s];if(!(h<0||h>=o)){var l=n[h],c=this.getSlot(l.name);null!==c&&c._setZOrder(s)}}this._slotsDirty=!0,this._zOrderDirty=!a}},Armature.prototype._addBone=function(e){this._bones.indexOf(e)<0&&this._bones.push(e)},Armature.prototype._addSlot=function(e){this._slots.indexOf(e)<0&&this._slots.push(e)},Armature.prototype._addConstraint=function(e){this._constraints.indexOf(e)<0&&this._constraints.push(e)},Armature.prototype._bufferAction=function(e,i){this._actions.indexOf(e)<0&&(i?this._actions.push(e):this._actions.unshift(e))},Armature.prototype.dispose=function(){null!==this._armatureData&&(this._lockUpdate=!0,this._dragonBones.bufferObject(this))},Armature.prototype.init=function(e,i,n,a){null===this._armatureData&&(this._armatureData=e,this._animation=o.BaseObject.borrowObject(o.Animation),this._proxy=i,this._display=n,this._dragonBones=a,this._proxy.dbInit(this),this._animation.init(this),this._animation.animations=this._armatureData.animations)},Armature.prototype.advanceTime=function(e){if(!this._lockUpdate)if(this._lockUpdate=!0,null!==this._armatureData)if(null!==this._armatureData.parent){var i=this._cacheFrameIndex;if(this._animation.advanceTime(e),this._slotsDirty||this._zIndexDirty){if(this._slots.sort(Armature._onSortSlots),this._zIndexDirty)for(var n=0,a=this._slots.length;n<a;++n)this._slots[n]._setZOrder(n);this._slotsDirty=!1,this._zIndexDirty=!1}if(this._alphaDirty){this._alphaDirty=!1,this._globalAlpha=this._alpha*(null!==this._parent?this._parent._globalAlpha:1);for(var s=0,o=this._bones;s<o.length;s++)o[s]._updateAlpha();for(var h=0,l=this._slots;h<l.length;h++)(x=l[h])._updateAlpha()}if(this._cacheFrameIndex<0||this._cacheFrameIndex!==i){for(n=0,a=0,n=0,a=this._bones.length;n<a;++n)this._bones[n].update(this._cacheFrameIndex);for(n=0,a=this._slots.length;n<a;++n)this._slots[n].update(this._cacheFrameIndex)}if(this._actions.length>0){for(var c=0,m=this._actions;c<m.length;c++){var f=m[c],g=f.actionData;if(null!==g&&0===g.type)if(null!==f.slot)null!==(S=f.slot.childArmature)&&S.animation.fadeIn(g.name);else if(null!==f.bone)for(var _=0,T=this.getSlots();_<T.length;_++){var x,S;(x=T[_]).parent===f.bone&&null!==(S=x.childArmature)&&S.animation.fadeIn(g.name)}else this._animation.fadeIn(g.name);f.returnToPool()}this._actions.length=0}this._lockUpdate=!1,this._proxy.dbUpdate()}else console.warn("The armature data has been disposed.\nPlease make sure dispose armature before call factory.clear().");else console.warn("The armature has been disposed.")},Armature.prototype.invalidUpdate=function(e,i){if(void 0===e&&(e=null),void 0===i&&(i=!1),null!==e&&e.length>0){if(null!==(h=this.getBone(e))&&(h.invalidUpdate(),i))for(var n=0,a=this._slots;n<a.length;n++)(m=a[n]).parent===h&&m.invalidUpdate()}else{for(var s=0,o=this._bones;s<o.length;s++){var h;(h=o[s]).invalidUpdate()}if(i)for(var l=0,c=this._slots;l<c.length;l++){var m;(m=c[l]).invalidUpdate()}}},Armature.prototype.containsPoint=function(e,i){for(var n=0,a=this._slots;n<a.length;n++){var s=a[n];if(s.containsPoint(e,i))return s}return null},Armature.prototype.intersectsSegment=function(e,i,n,a,s,o,h){void 0===s&&(s=null),void 0===o&&(o=null),void 0===h&&(h=null);for(var l=e===n,c=0,m=0,f=0,g=0,_=0,T=0,x=0,S=0,j=null,q=null,Y=0,X=this._slots;Y<X.length;Y++){var Z=X[Y];if(Z.intersectsSegment(e,i,n,a,s,o,h)>0){if(null===s&&null===o){j=Z;break}var $;null!==s&&(($=l?s.y-i:s.x-e)<0&&($=-$),(null===j||$<c)&&(c=$,f=s.x,g=s.y,j=Z,h&&(x=h.x))),null!==o&&(($=o.x-e)<0&&($=-$),(null===q||$>m)&&(m=$,_=o.x,T=o.y,q=Z,null!==h&&(S=h.y)))}}return null!==j&&null!==s&&(s.x=f,s.y=g,null!==h&&(h.x=x)),null!==q&&null!==o&&(o.x=_,o.y=T,null!==h&&(h.y=S)),j},Armature.prototype.getBone=function(e){for(var i=0,n=this._bones;i<n.length;i++){var a=n[i];if(a.name===e)return a}return null},Armature.prototype.getBoneByDisplay=function(e){var i=this.getSlotByDisplay(e);return null!==i?i.parent:null},Armature.prototype.getSlot=function(e){for(var i=0,n=this._slots;i<n.length;i++){var a=n[i];if(a.name===e)return a}return null},Armature.prototype.getSlotByDisplay=function(e){if(null!==e)for(var i=0,n=this._slots;i<n.length;i++){var a=n[i];if(a.display===e)return a}return null},Armature.prototype.getBones=function(){return this._bones},Armature.prototype.getSlots=function(){return this._slots},Object.defineProperty(Armature.prototype,"flipX",{get:function(){return this._flipX},set:function(e){this._flipX!==e&&(this._flipX=e,this.invalidUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"flipY",{get:function(){return this._flipY},set:function(e){this._flipY!==e&&(this._flipY=e,this.invalidUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"cacheFrameRate",{get:function(){return this._armatureData.cacheFrameRate},set:function(e){if(this._armatureData.cacheFrameRate!==e){this._armatureData.cacheFrames(e);for(var i=0,n=this._slots;i<n.length;i++){var a=n[i].childArmature;null!==a&&(a.cacheFrameRate=e)}}},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"name",{get:function(){return this._armatureData.name},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"proxy",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"eventDispatcher",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"display",{get:function(){return this._display},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"replacedTexture",{get:function(){return this._replacedTexture},set:function(e){if(this._replacedTexture!==e){null!==this._replaceTextureAtlasData&&(this._replaceTextureAtlasData.returnToPool(),this._replaceTextureAtlasData=null),this._replacedTexture=e;for(var i=0,n=this._slots;i<n.length;i++){var a=n[i];a.invalidUpdate(),a.update(-1)}}},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"clock",{get:function(){return this._clock},set:function(e){if(this._clock!==e){null!==this._clock&&this._clock.remove(this),this._clock=e,this._clock&&this._clock.add(this);for(var i=0,n=this._slots;i<n.length;i++){var a=n[i].childArmature;null!==a&&(a.clock=this._clock)}}},enumerable:!0,configurable:!0}),Object.defineProperty(Armature.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Armature.prototype.getDisplay=function(){return this._display},Armature}(o.BaseObject),o.Armature=h,function(e){var i=function(i){function TransformObject(){var n=null!==i&&i.apply(this,arguments)||this;return n.globalTransformMatrix=new e.Matrix,n.global=new e.Transform,n.offset=new e.Transform,n}return s(TransformObject,i),TransformObject.prototype._onClear=function(){this.globalTransformMatrix.identity(),this.global.identity(),this.offset.identity(),this.origin=null,this.userData=null,this._globalDirty=!1,this._alpha=1,this._globalAlpha=1,this._armature=null},TransformObject.prototype.updateGlobalTransform=function(){this._globalDirty&&(this._globalDirty=!1,this.global.fromMatrix(this.globalTransformMatrix))},Object.defineProperty(TransformObject.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),TransformObject._helpMatrix=new e.Matrix,TransformObject._helpTransform=new e.Transform,TransformObject._helpPoint=new e.Point,TransformObject}(e.BaseObject);e.TransformObject=i}(m||(m={})),function(e){var i=function(i){function Bone(){var n=null!==i&&i.apply(this,arguments)||this;return n.animationPose=new e.Transform,n}return s(Bone,i),Bone.toString=function(){return"[class dragonBones.Bone]"},Bone.prototype._onClear=function(){i.prototype._onClear.call(this),this.offsetMode=1,this.animationPose.identity(),this._transformDirty=!1,this._childrenTransformDirty=!1,this._localDirty=!0,this._hasConstraint=!1,this._visible=!0,this._cachedFrameIndex=-1,this._boneData=null,this._parent=null,this._cachedFrameIndices=null},Bone.prototype._updateGlobalTransformMatrix=function(i){var n=this._boneData,a=this.global,s=this.globalTransformMatrix,o=this.origin,h=this.offset,l=this.animationPose,c=this._parent,m=this._armature.flipX,f=this._armature.flipY===e.DragonBones.yDown,g=null!==c,_=0;if(1===this.offsetMode?null!==o?(a.x=o.x+h.x+l.x,a.scaleX=o.scaleX*h.scaleX*l.scaleX,a.scaleY=o.scaleY*h.scaleY*l.scaleY,e.DragonBones.yDown?(a.y=o.y+h.y+l.y,a.skew=o.skew+h.skew+l.skew,a.rotation=o.rotation+h.rotation+l.rotation):(a.y=o.y-h.y+l.y,a.skew=o.skew-h.skew+l.skew,a.rotation=o.rotation-h.rotation+l.rotation)):(a.copyFrom(h),e.DragonBones.yDown||(a.y=-a.y,a.skew=-a.skew,a.rotation=-a.rotation),a.add(l)):0===this.offsetMode?null!==o?a.copyFrom(o).add(l):a.copyFrom(l):(g=!1,a.copyFrom(h),e.DragonBones.yDown||(a.y=-a.y,a.skew=-a.skew,a.rotation=-a.rotation)),g){var T=1===c._boneData.type,x=T?c._bone:null,S=T?c._getGlobalTransformMatrix(a.x,a.y):c.globalTransformMatrix;if(!n.inheritScale||T&&null===x){if(n.inheritTranslation){var j=a.x,q=a.y;a.x=S.a*j+S.c*q+S.tx,a.y=S.b*j+S.d*q+S.ty}else m&&(a.x=-a.x),f&&(a.y=-a.y);n.inheritRotation?(c.updateGlobalTransform(),_=c.global.scaleX<0?a.rotation+c.global.rotation+Math.PI:a.rotation+c.global.rotation,S.a*S.d-S.b*S.c<0&&(_-=2*a.rotation,(m!==f||n.inheritReflection)&&(a.skew+=Math.PI),e.DragonBones.yDown||(a.skew=-a.skew)),a.rotation=_):(m||f)&&(m&&f?_=a.rotation+Math.PI:(_=m?Math.PI-a.rotation:-a.rotation,a.skew+=Math.PI),a.rotation=_),a.toMatrix(s)}else T?(n.inheritRotation&&(a.rotation+=c.global.rotation),x.updateGlobalTransform(),a.scaleX*=x.global.scaleX,a.scaleY*=x.global.scaleY,S.transformPoint(a.x,a.y,a),a.toMatrix(s),n.inheritTranslation?(a.x=s.tx,a.y=s.ty):(s.tx=a.x,s.ty=a.y)):(n.inheritRotation||(c.updateGlobalTransform(),_=m&&f?a.rotation-(c.global.rotation+Math.PI):m?a.rotation+c.global.rotation+Math.PI:f?a.rotation+c.global.rotation:a.rotation-c.global.rotation,a.rotation=_),a.toMatrix(s),s.concat(S),n.inheritTranslation?(a.x=s.tx,a.y=s.ty):(s.tx=a.x,s.ty=a.y),i?a.fromMatrix(s):this._globalDirty=!0)}else(m||f)&&(m&&(a.x=-a.x),f&&(a.y=-a.y),m&&f?_=a.rotation+Math.PI:(_=m?Math.PI-a.rotation:-a.rotation,a.skew+=Math.PI),a.rotation=_),a.toMatrix(s)},Bone.prototype._updateAlpha=function(){null!==this._parent?this._globalAlpha=this._alpha*this._parent._globalAlpha:this._globalAlpha=this._alpha*this._armature._globalAlpha},Bone.prototype.init=function(e,i){null===this._boneData&&(this._boneData=e,this._armature=i,this._alpha=this._boneData.alpha,null!==this._boneData.parent&&(this._parent=this._armature.getBone(this._boneData.parent.name)),this._armature._addBone(this),this.origin=this._boneData.transform)},Bone.prototype.update=function(e){if(e>=0&&null!==this._cachedFrameIndices){var i=this._cachedFrameIndices[e];if(i>=0&&this._cachedFrameIndex===i)this._transformDirty=!1;else if(i>=0)this._transformDirty=!0,this._cachedFrameIndex=i;else{if(this._hasConstraint)for(var n=0,a=this._armature._constraints;n<a.length;n++){(h=a[n])._root===this&&h.update()}this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[e]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var s=0,o=this._armature._constraints;s<o.length;s++){var h;(h=o[s])._root===this&&h.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(e=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty)if(this._transformDirty=!1,this._childrenTransformDirty=!0,this._cachedFrameIndex<0){var l=e>=0;this._localDirty&&this._updateGlobalTransformMatrix(l),l&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[e]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},Bone.prototype.updateByConstraint=function(){this._localDirty&&(this._localDirty=!1,(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&this._updateGlobalTransformMatrix(!0),this._transformDirty=!0)},Bone.prototype.invalidUpdate=function(){this._transformDirty=!0},Bone.prototype.contains=function(e){if(e===this)return!1;for(var i=e;i!==this&&null!==i;)i=i.parent;return i===this},Object.defineProperty(Bone.prototype,"boneData",{get:function(){return this._boneData},enumerable:!0,configurable:!0}),Object.defineProperty(Bone.prototype,"visible",{get:function(){return this._visible},set:function(e){if(this._visible!==e){this._visible=e;for(var i=0,n=this._armature.getSlots();i<n.length;i++){var a=n[i];a.parent===this&&a._updateVisible()}}},enumerable:!0,configurable:!0}),Object.defineProperty(Bone.prototype,"name",{get:function(){return this._boneData.name},enumerable:!0,configurable:!0}),Object.defineProperty(Bone.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Bone}(e.TransformObject);e.Bone=i}(m||(m={})),function(e){var i=function(e){function Surface(){var i=null!==e&&e.apply(this,arguments)||this;return i._vertices=[],i._deformVertices=[],i._hullCache=[],i._matrixCahce=[],i}return s(Surface,e),Surface.toString=function(){return"[class dragonBones.Surface]"},Surface.prototype._onClear=function(){e.prototype._onClear.call(this),this._dX=0,this._dY=0,this._k=0,this._kX=0,this._kY=0,this._vertices.length=0,this._deformVertices.length=0,this._matrixCahce.length=0,this._hullCache.length=0,this._bone=null},Surface.prototype._getAffineTransform=function(e,i,n,a,s,o,h,l,c,m,f,g,_){var T=h-s,x=l-o,S=c-s,j=m-o;f.rotation=Math.atan2(x,T),f.skew=Math.atan2(j,S)-.5*Math.PI-f.rotation,_&&(f.rotation+=Math.PI),f.scaleX=Math.sqrt(T*T+x*x)/n,f.scaleY=Math.sqrt(S*S+j*j)/a,f.toMatrix(g),f.x=g.tx=s-(g.a*e+g.c*i),f.y=g.ty=o-(g.b*e+g.d*i)},Surface.prototype._updateVertices=function(){var e=this._armature.armatureData.parent,i=this._boneData.geometry,n=e.intArray,a=e.floatArray,s=n[i.offset+0],o=n[i.offset+2],h=this._vertices,l=this._deformVertices;if(null!==this._parent)if(1===this._parent._boneData.type)for(var c=0,m=s;c<m;++c){var f=a[o+(x=2*c)]+l[x],g=a[o+x+1]+l[x+1],_=this._parent._getGlobalTransformMatrix(f,g);h[x]=_.a*f+_.c*g+_.tx,h[x+1]=_.b*f+_.d*g+_.ty}else{var T=this._parent.globalTransformMatrix;for(c=0,m=s;c<m;++c){f=a[o+(x=2*c)]+l[x],g=a[o+x+1]+l[x+1];h[x]=T.a*f+T.c*g+T.tx,h[x+1]=T.b*f+T.d*g+T.ty}}else for(c=0,m=s;c<m;++c){var x;h[x=2*c]=a[o+x]+l[x],h[x+1]=a[o+x+1]+l[x+1]}},Surface.prototype._updateGlobalTransformMatrix=function(e){var i=2*this._boneData.segmentX,n=this._vertices.length-2,a=this._vertices[0],s=this._vertices[1],o=this._vertices[i],h=this._vertices[i+1],l=this._vertices[n],c=this._vertices[n+1],m=this._vertices[n-i],f=this._vertices[n-i+1],g=a+.5*(l-a),_=s+.5*(c-s),T=g+.5*(o+.5*(m-o)-g),x=_+.5*(h+.5*(f-h)-_),S=o+.5*(l-o),j=h+.5*(c-h),q=m+.5*(l-m),Y=f+.5*(c-f);this._getAffineTransform(0,0,200,200,T,x,S,j,q,Y,this.global,this.globalTransformMatrix,!1),this._globalDirty=!1},Surface.prototype._getGlobalTransformMatrix=function(e,i){var n=200,a=1e3;if(e<-a||a<e||i<-a||a<i)return this.globalTransformMatrix;var s=!1,o=this._boneData,h=o.segmentX,l=o.segmentY,c=2*o.segmentX,m=this._dX,f=this._dY,g=Math.floor((e+n)/m),_=Math.floor((i+n)/f),T=0,x=g*m-n,S=_*f-n,j=this._matrixCahce,q=Surface._helpMatrix;if(e<-n){if(i<-n||i>=n)return this.globalTransformMatrix;if(j[T=7*(2*(h*l+h+l+l+_)+((s=i>this._kX*(e+n)+S)?1:0))]>0)q.copyFromArray(j,T+1);else{var Y=_*(c+2),X=this._hullCache[4],Z=this._hullCache[5],$=this._hullCache[2]-(l-_)*X,tt=this._hullCache[3]-(l-_)*Z,et=this._vertices;s?this._getAffineTransform(-n,S+f,800,f,et[Y+c+2],et[Y+c+3],$+X,tt+Z,et[Y],et[Y+1],Surface._helpTransform,q,!0):this._getAffineTransform(-a,S,800,f,$,tt,et[Y],et[Y+1],$+X,tt+Z,Surface._helpTransform,q,!1),j[T]=1,j[T+1]=q.a,j[T+2]=q.b,j[T+3]=q.c,j[T+4]=q.d,j[T+5]=q.tx,j[T+6]=q.ty}}else if(e>=n){if(i<-n||i>=n)return this.globalTransformMatrix;if(j[T=7*(2*(h*l+h+_)+((s=i>this._kX*(e-a)+S)?1:0))]>0)q.copyFromArray(j,T+1);else{Y=(_+1)*(c+2)-2,X=this._hullCache[4],Z=this._hullCache[5],$=this._hullCache[0]+_*X,tt=this._hullCache[1]+_*Z,et=this._vertices;s?this._getAffineTransform(a,S+f,800,f,$+X,tt+Z,et[Y+c+2],et[Y+c+3],$,tt,Surface._helpTransform,q,!0):this._getAffineTransform(n,S,800,f,et[Y],et[Y+1],$,tt,et[Y+c+2],et[Y+c+3],Surface._helpTransform,q,!1),j[T]=1,j[T+1]=q.a,j[T+2]=q.b,j[T+3]=q.c,j[T+4]=q.d,j[T+5]=q.tx,j[T+6]=q.ty}}else if(i<-n){if(e<-n||e>=n)return this.globalTransformMatrix;if(j[T=7*(2*(h*l+g)+((s=i>this._kY*(e-x-m)-a)?1:0))]>0)q.copyFromArray(j,T+1);else{Y=2*g,X=this._hullCache[10],Z=this._hullCache[11],$=this._hullCache[8]+g*X,tt=this._hullCache[9]+g*Z,et=this._vertices;s?this._getAffineTransform(x+m,-n,m,800,et[Y+2],et[Y+3],et[Y],et[Y+1],$+X,tt+Z,Surface._helpTransform,q,!0):this._getAffineTransform(x,-a,m,800,$,tt,$+X,tt+Z,et[Y],et[Y+1],Surface._helpTransform,q,!1),j[T]=1,j[T+1]=q.a,j[T+2]=q.b,j[T+3]=q.c,j[T+4]=q.d,j[T+5]=q.tx,j[T+6]=q.ty}}else if(i>=n){if(e<-n||e>=n)return this.globalTransformMatrix;if(j[T=7*(2*(h*l+h+l+g)+((s=i>this._kY*(e-x-m)+n)?1:0))]>0)q.copyFromArray(j,T+1);else{Y=l*(c+2)+2*g,X=this._hullCache[10],Z=this._hullCache[11],$=this._hullCache[6]-(h-g)*X,tt=this._hullCache[7]-(h-g)*Z,et=this._vertices;s?this._getAffineTransform(x+m,a,m,800,$+X,tt+Z,$,tt,et[Y+2],et[Y+3],Surface._helpTransform,q,!0):this._getAffineTransform(x,n,m,800,et[Y],et[Y+1],et[Y+2],et[Y+3],$,tt,Surface._helpTransform,q,!1),j[T]=1,j[T+1]=q.a,j[T+2]=q.b,j[T+3]=q.c,j[T+4]=q.d,j[T+5]=q.tx,j[T+6]=q.ty}}else if(j[T=7*(2*(h*_+g)+((s=i>this._k*(e-x-m)+S)?1:0))]>0)q.copyFromArray(j,T+1);else{Y=2*g+_*(c+2),et=this._vertices;s?this._getAffineTransform(x+m,S+f,m,f,et[Y+c+4],et[Y+c+5],et[Y+c+2],et[Y+c+3],et[Y+2],et[Y+3],Surface._helpTransform,q,!0):this._getAffineTransform(x,S,m,f,et[Y],et[Y+1],et[Y+2],et[Y+3],et[Y+c+2],et[Y+c+3],Surface._helpTransform,q,!1),j[T]=1,j[T+1]=q.a,j[T+2]=q.b,j[T+3]=q.c,j[T+4]=q.d,j[T+5]=q.tx,j[T+6]=q.ty}return q},Surface.prototype.init=function(i,n){if(null===this._boneData){e.prototype.init.call(this,i,n);var a=i.segmentX,s=i.segmentY,o=this._armature.armatureData.parent.intArray[i.geometry.offset+0];this._dX=400/a,this._dY=400/s,this._k=-this._dY/this._dX,this._kX=-this._dY/800,this._kY=-800/this._dX,this._vertices.length=2*o,this._deformVertices.length=2*o,this._matrixCahce.length=2*(a*s+2*a+2*s)*7,this._hullCache.length=10;for(var h=0;h<2*o;++h)this._deformVertices[h]=0;null!==this._parent&&(0===this._parent.boneData.type?this._bone=this._parent:this._bone=this._parent._bone)}},Surface.prototype.update=function(e){if(e>=0&&null!==this._cachedFrameIndices){var i=this._cachedFrameIndices[e];if(i>=0&&this._cachedFrameIndex===i)this._transformDirty=!1;else if(i>=0)this._transformDirty=!0,this._cachedFrameIndex=i;else{if(this._hasConstraint)for(var n=0,a=this._armature._constraints;n<a.length;n++){(h=a[n])._root===this&&h.update()}this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[e]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var s=0,o=this._armature._constraints;s<o.length;s++){var h;(h=o[s])._root===this&&h.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(e=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty){this._transformDirty=!1,this._childrenTransformDirty=!0;for(var l=0,c=this._matrixCahce.length;l<c;l+=7)this._matrixCahce[l]=-1;if(this._updateVertices(),this._cachedFrameIndex<0){var m=e>=0;this._localDirty&&this._updateGlobalTransformMatrix(m),m&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[e]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);var f=2*this.global.x,g=2*this.global.y,_=Surface._helpPoint;this.globalTransformMatrix.transformPoint(1e3,-200,_),this._hullCache[0]=_.x,this._hullCache[1]=_.y,this._hullCache[2]=f-_.x,this._hullCache[3]=g-_.y,this.globalTransformMatrix.transformPoint(0,this._dY,_,!0),this._hullCache[4]=_.x,this._hullCache[5]=_.y,this.globalTransformMatrix.transformPoint(200,1e3,_),this._hullCache[6]=_.x,this._hullCache[7]=_.y,this._hullCache[8]=f-_.x,this._hullCache[9]=g-_.y,this.globalTransformMatrix.transformPoint(this._dX,0,_,!0),this._hullCache[10]=_.x,this._hullCache[11]=_.y}else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},Surface}(e.Bone);e.Surface=i}(m||(m={})),function(e){var i=function(e){function DisplayFrame(){var i=null!==e&&e.apply(this,arguments)||this;return i.deformVertices=[],i}return s(DisplayFrame,e),DisplayFrame.toString=function(){return"[class dragonBones.DisplayFrame]"},DisplayFrame.prototype._onClear=function(){this.rawDisplayData=null,this.displayData=null,this.textureData=null,this.display=null,this.deformVertices.length=0},DisplayFrame.prototype.updateDeformVertices=function(){if(null!==this.rawDisplayData&&0===this.deformVertices.length){var e;if(2===this.rawDisplayData.type)e=this.rawDisplayData.geometry;else{if(4!==this.rawDisplayData.type)return;e=this.rawDisplayData.geometry}var i=0;i=null!==e.weight?2*e.weight.count:2*e.data.intArray[e.offset+0],this.deformVertices.length=i;for(var n=0,a=this.deformVertices.length;n<a;++n)this.deformVertices[n]=0}},DisplayFrame.prototype.getGeometryData=function(){if(null!==this.displayData){if(2===this.displayData.type)return this.displayData.geometry;if(4===this.displayData.type)return this.displayData.geometry}if(null!==this.rawDisplayData){if(2===this.rawDisplayData.type)return this.rawDisplayData.geometry;if(4===this.rawDisplayData.type)return this.rawDisplayData.geometry}return null},DisplayFrame.prototype.getBoundingBox=function(){return null!==this.displayData&&3===this.displayData.type?this.displayData.boundingBox:null!==this.rawDisplayData&&3===this.rawDisplayData.type?this.rawDisplayData.boundingBox:null},DisplayFrame.prototype.getTextureData=function(){if(null!==this.displayData){if(0===this.displayData.type)return this.displayData.texture;if(2===this.displayData.type)return this.displayData.texture}if(null!==this.textureData)return this.textureData;if(null!==this.rawDisplayData){if(0===this.rawDisplayData.type)return this.rawDisplayData.texture;if(2===this.rawDisplayData.type)return this.rawDisplayData.texture}return null},DisplayFrame}(e.BaseObject);e.DisplayFrame=i;var n=function(n){function Slot(){var i=null!==n&&n.apply(this,arguments)||this;return i._localMatrix=new e.Matrix,i._colorTransform=new e.ColorTransform,i._displayFrames=[],i._geometryBones=[],i._rawDisplay=null,i._meshDisplay=null,i._display=null,i}return s(Slot,n),Slot.prototype._onClear=function(){n.prototype._onClear.call(this);for(var i=[],a=0,s=this._displayFrames;a<s.length;a++){var o=s[a],h=o.display;h!==this._rawDisplay&&h!==this._meshDisplay&&i.indexOf(h)<0&&i.push(h),o.returnToPool()}for(var l=0,c=i;l<c.length;l++){var m=c[l];m instanceof e.Armature?m.dispose():this._disposeDisplay(m,!0)}null!==this._meshDisplay&&this._meshDisplay!==this._rawDisplay&&this._disposeDisplay(this._meshDisplay,!1),null!==this._rawDisplay&&this._disposeDisplay(this._rawDisplay,!1),this.displayController=null,this._displayDataDirty=!1,this._displayDirty=!1,this._geometryDirty=!1,this._textureDirty=!1,this._visibleDirty=!1,this._blendModeDirty=!1,this._zOrderDirty=!1,this._colorDirty=!1,this._verticesDirty=!1,this._transformDirty=!1,this._visible=!0,this._blendMode=0,this._displayIndex=-1,this._animationDisplayIndex=-1,this._zOrder=0,this._zIndex=0,this._cachedFrameIndex=-1,this._pivotX=0,this._pivotY=0,this._localMatrix.identity(),this._colorTransform.identity(),this._displayFrames.length=0,this._geometryBones.length=0,this._slotData=null,this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._rawDisplay=null,this._meshDisplay=null,this._display=null,this._childArmature=null,this._parent=null,this._cachedFrameIndices=null},Slot.prototype._hasDisplay=function(e){for(var i=0,n=this._displayFrames;i<n.length;i++){if(n[i].display===e)return!0}return!1},Slot.prototype._isBonesUpdate=function(){for(var e=0,i=this._geometryBones;e<i.length;e++){var n=i[e];if(null!==n&&n._childrenTransformDirty)return!0}return!1},Slot.prototype._updateAlpha=function(){var e=this._alpha*this._parent._globalAlpha;this._globalAlpha!==e&&(this._globalAlpha=e,this._colorDirty=!0)},Slot.prototype._updateDisplayData=function(){var i=this._displayFrame,n=this._geometryData,a=this._textureData,s=null,o=null;if(this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._displayIndex>=0&&this._displayIndex<this._displayFrames.length&&(this._displayFrame=this._displayFrames[this._displayIndex],s=this._displayFrame.rawDisplayData,o=this._displayFrame.displayData,this._geometryData=this._displayFrame.getGeometryData(),this._boundingBoxData=this._displayFrame.getBoundingBox(),this._textureData=this._displayFrame.getTextureData()),this._displayFrame!==i||this._geometryData!==n||this._textureData!==a){if(null===this._geometryData&&null!==this._textureData){var h=null!==o&&0===o.type?o:s,l=this._textureData.parent.scale*this._armature._armatureData.scale,c=this._textureData.frame;this._pivotX=h.pivot.x,this._pivotY=h.pivot.y;var m=null!==c?c:this._textureData.region,f=m.width,g=m.height;this._textureData.rotated&&null===c&&(f=m.height,g=m.width),this._pivotX*=f*l,this._pivotY*=g*l,null!==c&&(this._pivotX+=c.x*l,this._pivotY+=c.y*l),null!==s&&h!==s&&(s.transform.toMatrix(Slot._helpMatrix),Slot._helpMatrix.invert(),Slot._helpMatrix.transformPoint(0,0,Slot._helpPoint),this._pivotX-=Slot._helpPoint.x,this._pivotY-=Slot._helpPoint.y,h.transform.toMatrix(Slot._helpMatrix),Slot._helpMatrix.invert(),Slot._helpMatrix.transformPoint(0,0,Slot._helpPoint),this._pivotX+=Slot._helpPoint.x,this._pivotY+=Slot._helpPoint.y),e.DragonBones.yDown||(this._pivotY=(this._textureData.rotated?this._textureData.region.width:this._textureData.region.height)*l-this._pivotY)}else this._pivotX=0,this._pivotY=0;if(this.origin=null!==s?s.transform:null!==o?o.transform:null,null!==this.origin?this.global.copyFrom(this.origin).add(this.offset).toMatrix(this._localMatrix):this.global.copyFrom(this.offset).toMatrix(this._localMatrix),this._geometryData!==n)if(this._geometryDirty=!0,this._verticesDirty=!0,null!==this._geometryData){if(this._geometryBones.length=0,null!==this._geometryData.weight)for(var _=0,T=this._geometryData.weight.bones.length;_<T;++_){var x=this._armature.getBone(this._geometryData.weight.bones[_].name);this._geometryBones.push(x)}}else this._geometryBones.length=0,this._geometryData=null;this._textureDirty=this._textureData!==a,this._transformDirty=!0}},Slot.prototype._updateDisplay=function(){var i=null!==this._display?this._display:this._rawDisplay,n=this._childArmature;if(null!==this._displayFrame?(this._display=this._displayFrame.display,null!==this._display&&this._display instanceof e.Armature?(this._childArmature=this._display,this._display=this._childArmature.display):this._childArmature=null):(this._display=null,this._childArmature=null),(null!==this._display?this._display:this._rawDisplay)!==i&&(this._textureDirty=!0,this._visibleDirty=!0,this._blendModeDirty=!0,this._colorDirty=!0,this._transformDirty=!0,this._onUpdateDisplay(),this._replaceDisplay(i)),this._childArmature!==n&&(null!==n&&(n._parent=null,n.clock=null,n.inheritAnimation&&n.animation.reset()),null!==this._childArmature&&(this._childArmature._parent=this,this._childArmature.clock=this._armature.clock,this._childArmature.inheritAnimation))){if(0===this._childArmature.cacheFrameRate){var a=this._armature.cacheFrameRate;0!==a&&(this._childArmature.cacheFrameRate=a)}if(null!==this._displayFrame){var s=null,o=null!==this._displayFrame.displayData?this._displayFrame.displayData:this._displayFrame.rawDisplayData;if(null!==o&&1===o.type&&(s=o.actions),null!==s&&s.length>0)for(var h=0,l=s;h<l.length;h++){var c=l[h],m=e.BaseObject.borrowObject(e.EventObject);e.EventObject.actionDataToInstance(c,m,this._armature),m.slot=this,this._armature._bufferAction(m,!1)}else this._childArmature.animation.play()}}},Slot.prototype._updateGlobalTransformMatrix=function(e){var i=0===this._parent._boneData.type?this._parent.globalTransformMatrix:this._parent._getGlobalTransformMatrix(this.global.x,this.global.y);this.globalTransformMatrix.copyFrom(this._localMatrix),this.globalTransformMatrix.concat(i),e?this.global.fromMatrix(this.globalTransformMatrix):this._globalDirty=!0},Slot.prototype._setDisplayIndex=function(e,i){if(void 0===i&&(i=!1),i){if(this._animationDisplayIndex===e)return;this._animationDisplayIndex=e}this._displayIndex!==e&&(this._displayIndex=e<this._displayFrames.length?e:this._displayFrames.length-1,this._displayDataDirty=!0,this._displayDirty=this._displayIndex<0||this._display!==this._displayFrames[this._displayIndex].display)},Slot.prototype._setZOrder=function(e){return this._zOrder,this._zOrder=e,this._zOrderDirty=!0,this._zOrderDirty},Slot.prototype._setColor=function(e){return this._colorTransform.copyFrom(e),this._colorDirty=!0},Slot.prototype.init=function(e,i,n,a){if(null===this._slotData){this._slotData=e,this._colorDirty=!0,this._blendModeDirty=!0,this._blendMode=this._slotData.blendMode,this._zOrder=this._slotData.zOrder,this._zIndex=this._slotData.zIndex,this._alpha=this._slotData.alpha,this._colorTransform.copyFrom(this._slotData.color),this._rawDisplay=n,this._meshDisplay=a,this._armature=i;var s=this._armature.getBone(this._slotData.parent.name);null!==s&&(this._parent=s),this._armature._addSlot(this),this._initDisplay(this._rawDisplay,!1),this._rawDisplay!==this._meshDisplay&&this._initDisplay(this._meshDisplay,!1),this._onUpdateDisplay(),this._addDisplay()}},Slot.prototype.update=function(e){if(this._displayDataDirty&&(this._updateDisplayData(),this._displayDataDirty=!1),this._displayDirty&&(this._updateDisplay(),this._displayDirty=!1),(this._geometryDirty||this._textureDirty)&&(null!==this._display&&this._display!==this._rawDisplay&&this._display!==this._meshDisplay||this._updateFrame(),this._geometryDirty=!1,this._textureDirty=!1),null!==this._display){if(this._visibleDirty&&(this._updateVisible(),this._visibleDirty=!1),this._blendModeDirty&&(this._updateBlendMode(),this._blendModeDirty=!1),this._colorDirty&&(this._updateColor(),this._colorDirty=!1),this._zOrderDirty&&(this._updateZOrder(),this._zOrderDirty=!1),null!==this._geometryData&&this._display===this._meshDisplay){var i=null!==this._geometryData.weight,n=0!==this._parent._boneData.type;if((this._verticesDirty||i&&this._isBonesUpdate()||n&&this._parent._childrenTransformDirty)&&(this._verticesDirty=!1,this._updateMesh()),i||n)return}if(e>=0&&null!==this._cachedFrameIndices){var a=this._cachedFrameIndices[e];a>=0&&this._cachedFrameIndex===a?this._transformDirty=!1:a>=0?(this._transformDirty=!0,this._cachedFrameIndex=a):this._transformDirty||this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[e]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}else(this._transformDirty||this._parent._childrenTransformDirty)&&(e=-1,this._transformDirty=!0,this._cachedFrameIndex=-1);if(this._transformDirty){if(this._cachedFrameIndex<0){var s=e>=0;this._updateGlobalTransformMatrix(s),s&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[e]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);this._updateTransform(),this._transformDirty=!1}}},Slot.prototype.invalidUpdate=function(){this._displayDataDirty=!0,this._displayDirty=!0,this._transformDirty=!0},Slot.prototype.updateTransformAndMatrix=function(){this._transformDirty&&(this._updateGlobalTransformMatrix(!1),this._transformDirty=!1)},Slot.prototype.replaceRawDisplayData=function(e,i){if(void 0===i&&(i=-1),i<0)i=this._displayIndex<0?0:this._displayIndex;else if(i>=this._displayFrames.length)return;var n=this._displayFrames[i];if(n.rawDisplayData!==e){if(n.deformVertices.length=0,n.rawDisplayData=e,null===n.rawDisplayData){var a=this._armature._armatureData.defaultSkin;if(null!==a){var s=a.getDisplays(this._slotData.name);null!==s&&i<s.length&&(n.rawDisplayData=s[i])}}i===this._displayIndex&&(this._displayDataDirty=!0)}},Slot.prototype.replaceDisplayData=function(e,i){if(void 0===i&&(i=-1),i<0)i=this._displayIndex<0?0:this._displayIndex;else if(i>=this._displayFrames.length)return;var n=this._displayFrames[i];n.displayData!==e&&n.rawDisplayData!==e&&(n.displayData=e,i===this._displayIndex&&(this._displayDataDirty=!0))},Slot.prototype.replaceTextureData=function(e,i){if(void 0===i&&(i=-1),i<0)i=this._displayIndex<0?0:this._displayIndex;else if(i>=this._displayFrames.length)return;var n=this._displayFrames[i];n.textureData!==e&&(n.textureData=e,i===this._displayIndex&&(this._displayDataDirty=!0))},Slot.prototype.replaceDisplay=function(i,n){if(void 0===n&&(n=-1),n<0)n=this._displayIndex<0?0:this._displayIndex;else if(n>=this._displayFrames.length)return;var a=this._displayFrames[n];if(a.display!==i){var s=a.display;a.display=i,null===s||s===this._rawDisplay||s===this._meshDisplay||this._hasDisplay(s)||s instanceof e.Armature||this._disposeDisplay(s,!0),null===i||i===this._rawDisplay||i===this._meshDisplay||this._hasDisplay(s)||i instanceof e.Armature||this._initDisplay(i,!0),n===this._displayIndex&&(this._displayDirty=!0)}},Slot.prototype.containsPoint=function(e,i){return null!==this._boundingBoxData&&(this.updateTransformAndMatrix(),Slot._helpMatrix.copyFrom(this.globalTransformMatrix),Slot._helpMatrix.invert(),Slot._helpMatrix.transformPoint(e,i,Slot._helpPoint),this._boundingBoxData.containsPoint(Slot._helpPoint.x,Slot._helpPoint.y))},Slot.prototype.intersectsSegment=function(e,i,n,a,s,o,h){if(void 0===s&&(s=null),void 0===o&&(o=null),void 0===h&&(h=null),null===this._boundingBoxData)return 0;this.updateTransformAndMatrix(),Slot._helpMatrix.copyFrom(this.globalTransformMatrix),Slot._helpMatrix.invert(),Slot._helpMatrix.transformPoint(e,i,Slot._helpPoint),e=Slot._helpPoint.x,i=Slot._helpPoint.y,Slot._helpMatrix.transformPoint(n,a,Slot._helpPoint),n=Slot._helpPoint.x,a=Slot._helpPoint.y;var l=this._boundingBoxData.intersectsSegment(e,i,n,a,s,o,h);return l>0&&(1===l||2===l?null!==s?(this.globalTransformMatrix.transformPoint(s.x,s.y,s),null!==o&&(o.x=s.x,o.y=s.y)):null!==o&&this.globalTransformMatrix.transformPoint(o.x,o.y,o):(null!==s&&this.globalTransformMatrix.transformPoint(s.x,s.y,s),null!==o&&this.globalTransformMatrix.transformPoint(o.x,o.y,o)),null!==h&&(this.globalTransformMatrix.transformPoint(Math.cos(h.x),Math.sin(h.x),Slot._helpPoint,!0),h.x=Math.atan2(Slot._helpPoint.y,Slot._helpPoint.x),this.globalTransformMatrix.transformPoint(Math.cos(h.y),Math.sin(h.y),Slot._helpPoint,!0),h.y=Math.atan2(Slot._helpPoint.y,Slot._helpPoint.x))),l},Slot.prototype.getDisplayFrameAt=function(e){return this._displayFrames[e]},Object.defineProperty(Slot.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e,this._updateVisible())},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"displayFrameCount",{get:function(){return this._displayFrames.length},set:function(n){var a=this._displayFrames.length;if(a<n){this._displayFrames.length=n;for(var s=a;s<n;++s)this._displayFrames[s]=e.BaseObject.borrowObject(i)}else if(a>n){for(s=a-1;s<n;--s)this.replaceDisplay(null,s),this._displayFrames[s].returnToPool();this._displayFrames.length=n}},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"displayIndex",{get:function(){return this._displayIndex},set:function(e){this._setDisplayIndex(e),this.update(-1)},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"name",{get:function(){return this._slotData.name},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"displayList",{get:function(){for(var e=new Array,i=0,n=this._displayFrames;i<n.length;i++){var a=n[i];e.push(a.display)}return e},set:function(e){this.displayFrameCount=e.length;for(var i=0,n=0,a=e;n<a.length;n++){var s=a[n];this.replaceDisplay(s,i++)}},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"slotData",{get:function(){return this._slotData},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"boundingBoxData",{get:function(){return this._boundingBoxData},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"rawDisplay",{get:function(){return this._rawDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"meshDisplay",{get:function(){return this._meshDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"display",{get:function(){return this._display},set:function(e){this._display!==e&&(0===this._displayFrames.length&&(this.displayFrameCount=1,this._displayIndex=0),this.replaceDisplay(e,this._displayIndex))},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"childArmature",{get:function(){return this._childArmature},set:function(e){this._childArmature!==e&&(this.display=e)},enumerable:!0,configurable:!0}),Object.defineProperty(Slot.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Slot.prototype.getDisplay=function(){return this._display},Slot.prototype.setDisplay=function(e){this.display=e},Slot}(e.TransformObject);e.Slot=n}(m||(m={})),function(e){var i=function(i){function Constraint(){return null!==i&&i.apply(this,arguments)||this}return s(Constraint,i),Constraint.prototype._onClear=function(){this._armature=null,this._target=null,this._root=null,this._bone=null},Object.defineProperty(Constraint.prototype,"name",{get:function(){return this._constraintData.name},enumerable:!0,configurable:!0}),Constraint._helpMatrix=new e.Matrix,Constraint._helpTransform=new e.Transform,Constraint._helpPoint=new e.Point,Constraint}(e.BaseObject);e.Constraint=i;var n=function(i){function IKConstraint(){return null!==i&&i.apply(this,arguments)||this}return s(IKConstraint,i),IKConstraint.toString=function(){return"[class dragonBones.IKConstraint]"},IKConstraint.prototype._onClear=function(){i.prototype._onClear.call(this),this._bendPositive=!1,this._weight=1,this._constraintData=null},IKConstraint.prototype._computeA=function(){var i=this._target.global,n=this._root.global,a=this._root.globalTransformMatrix,s=Math.atan2(i.y-n.y,i.x-n.x);n.scaleX<0&&(s+=Math.PI),n.rotation+=e.Transform.normalizeRadian(s-n.rotation)*this._weight,n.toMatrix(a)},IKConstraint.prototype._computeB=function(){var i=this._bone._boneData.length,n=this._root,a=this._target.global,s=n.global,o=this._bone.global,h=this._bone.globalTransformMatrix,l=h.a*i,c=h.b*i,m=l*l+c*c,f=Math.sqrt(m),g=o.x-s.x,_=o.y-s.y,T=g*g+_*_,x=Math.sqrt(T),S=o.rotation,j=s.rotation,q=Math.atan2(_,g),Y=(g=a.x-s.x)*g+(_=a.y-s.y)*_,X=Math.sqrt(Y),Z=0;if(f+x<=X||X+f<=x||X+x<=f)Z=Math.atan2(a.y-s.y,a.x-s.x),f+x<=X||x<f&&(Z+=Math.PI);else{var $=(T-m+Y)/(2*Y),tt=Math.sqrt(T-$*$*Y)/X,et=s.x+g*$,it=s.y+_*$,nt=-_*tt,rt=g*tt,at=!1,st=n.parent;if(null!==st){var ot=st.globalTransformMatrix;at=ot.a*ot.d-ot.b*ot.c<0}at!==this._bendPositive?(o.x=et-nt,o.y=it-rt):(o.x=et+nt,o.y=it+rt),Z=Math.atan2(o.y-s.y,o.x-s.x)}var ht=e.Transform.normalizeRadian(Z-q);s.rotation=j+ht*this._weight,s.toMatrix(n.globalTransformMatrix);var lt=q+ht*this._weight;o.x=s.x+Math.cos(lt)*x,o.y=s.y+Math.sin(lt)*x;var ct=Math.atan2(a.y-o.y,a.x-o.x);o.scaleX<0&&(ct+=Math.PI),o.rotation=s.rotation+S-j+e.Transform.normalizeRadian(ct-ht-S)*this._weight,o.toMatrix(h)},IKConstraint.prototype.init=function(e,i){if(null===this._constraintData){this._constraintData=e,this._armature=i,this._target=this._armature.getBone(this._constraintData.target.name),this._root=this._armature.getBone(this._constraintData.root.name),this._bone=null!==this._constraintData.bone?this._armature.getBone(this._constraintData.bone.name):null;var n=this._constraintData;this._bendPositive=n.bendPositive,this._weight=n.weight,this._root._hasConstraint=!0}},IKConstraint.prototype.update=function(){this._root.updateByConstraint(),null!==this._bone?(this._bone.updateByConstraint(),this._computeB()):this._computeA()},IKConstraint.prototype.invalidUpdate=function(){this._root.invalidUpdate(),null!==this._bone&&this._bone.invalidUpdate()},IKConstraint}(i);e.IKConstraint=n;var a=function(i){function PathConstraint(){var e=null!==i&&i.apply(this,arguments)||this;return e._bones=[],e._spaces=[],e._positions=[],e._curves=[],e._boneLengths=[],e._pathGlobalVertices=[],e._segments=[10],e}return s(PathConstraint,i),PathConstraint.toString=function(){return"[class dragonBones.PathConstraint]"},PathConstraint.prototype._onClear=function(){i.prototype._onClear.call(this),this.dirty=!1,this.pathOffset=0,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=1,this.translateMix=1,this._pathSlot=null,this._bones.length=0,this._spaces.length=0,this._positions.length=0,this._curves.length=0,this._boneLengths.length=0,this._pathGlobalVertices.length=0},PathConstraint.prototype._updatePathVertices=function(e){var i=this._armature,n=i.armatureData.parent,a=i.armatureData.scale,s=n.intArray,o=n.floatArray,h=e.offset,l=s[h+0],c=s[h+2];this._pathGlobalVertices.length=2*l;var m=e.weight;if(null!==m)for(var f=this._pathSlot._geometryBones,g=m.bones.length,_=m.offset,T=s[_+1],x=_+2+g,S=(it=0,0);it<l;it++){for(var j=0,q=0,Y=0,X=s[x++];Y<X;Y++){var Z=f[s[x++]];if(null!==Z){Z.updateByConstraint();et=Z.globalTransformMatrix;var $=o[T++];rt=o[T++]*a,at=o[T++]*a;j+=(et.a*rt+et.c*at+et.tx)*$,q+=(et.b*rt+et.d*at+et.ty)*$}}this._pathGlobalVertices[S++]=j,this._pathGlobalVertices[S++]=q}else{var tt=this._pathSlot.parent;tt.updateByConstraint();for(var et=tt.globalTransformMatrix,it=0,nt=c;it<l;it+=2){var rt=o[nt++]*a,at=o[nt++]*a,st=et.a*rt+et.c*at+et.tx,ot=et.b*rt+et.d*at+et.ty;this._pathGlobalVertices[it]=st,this._pathGlobalVertices[it+1]=ot}}},PathConstraint.prototype._computeVertices=function(e,i,n,a){for(var s=n,o=e;s<i;s+=2)a[s]=this._pathGlobalVertices[o++],a[s+1]=this._pathGlobalVertices[o++]},PathConstraint.prototype._computeBezierCurve=function(e,i,n,a,s){var o=this._armature.armatureData.parent.intArray[e.geometry.offset+0],h=this._positions,l=this._spaces,c=e.closed,m=Array(),f=2*o,g=f/6,_=-1,T=this.position;h.length=3*i+2;var x=0;if(e.constantSpeed){c?(f+=2,m.length=o,this._computeVertices(2,f-4,0,m),this._computeVertices(0,2,f-4,m),m[f-2]=m[0],m[f-1]=m[1]):(g--,f-=4,m.length=f,this._computeVertices(2,f,0,m));var S=new Array(g);x=0;for(var j,q,Y,X,Z,$,tt,et,it=m[0],nt=m[1],rt=0,at=0,st=0,ot=0,ht=0,lt=0,ct=(vt=0,2);vt<g;vt++,ct+=6)rt=m[ct],at=m[ct+1],st=m[ct+2],ot=m[ct+3],Z=2*(j=.1875*(it-2*rt+st))+(Y=.09375*(3*(rt-st)-it+(ht=m[ct+4]))),$=2*(q=.1875*(nt-2*at+ot))+(X=.09375*(3*(at-ot)-nt+(lt=m[ct+5]))),tt=.75*(rt-it)+j+.16666667*Y,et=.75*(at-nt)+q+.16666667*X,x+=Math.sqrt(tt*tt+et*et),tt+=Z,et+=$,Z+=Y,$+=X,x+=Math.sqrt(tt*tt+et*et),tt+=Z,et+=$,x+=Math.sqrt(tt*tt+et*et),tt+=Z+Y,et+=$+X,x+=Math.sqrt(tt*tt+et*et),S[vt]=x,it=ht,nt=lt;if(a&&(T*=x),s)for(vt=0;vt<i;vt++)l[vt]*=x;for(var pt=this._segments,ut=0,dt=(vt=0,bt=0,Tt=0,0);vt<i;vt++,bt+=3){var mt=T+=l[vt];if(c)(mt%=x)<0&&(mt+=x),Tt=0;else{if(mt<0)continue;if(mt>x)continue}for(;;Tt++){var ft=S[Tt];if(!(mt>ft)){if(0===Tt)mt/=ft;else mt=(mt-(Pt=S[Tt-1]))/(ft-Pt);break}}if(Tt!==_){_=Tt;var yt=6*Tt;for(it=m[yt],nt=m[yt+1],rt=m[yt+2],at=m[yt+3],st=m[yt+4],ot=m[yt+5],Z=2*(j=.03*(it-2*rt+st))+(Y=.006*(3*(rt-st)-it+(ht=m[yt+6]))),$=2*(q=.03*(nt-2*at+ot))+(X=.006*(3*(at-ot)-nt+(lt=m[yt+7]))),tt=.3*(rt-it)+j+.16666667*Y,et=.3*(at-nt)+q+.16666667*X,ut=Math.sqrt(tt*tt+et*et),pt[0]=ut,yt=1;yt<8;yt++)tt+=Z,et+=$,Z+=Y,$+=X,ut+=Math.sqrt(tt*tt+et*et),pt[yt]=ut;tt+=Z,et+=$,ut+=Math.sqrt(tt*tt+et*et),pt[8]=ut,tt+=Z+Y,et+=$+X,ut+=Math.sqrt(tt*tt+et*et),pt[9]=ut,dt=0}for(mt*=ut;;dt++){var gt=pt[dt];if(!(mt>gt)){var Pt;if(0===dt)mt/=gt;else mt=dt+(mt-(Pt=pt[dt-1]))/(gt-Pt);break}}this.addCurvePosition(.1*mt,it,nt,rt,at,st,ot,ht,lt,h,bt,n)}}else{var _t=e.curveLengths;if(x=_t[g-=c?1:2],a&&(T*=x),s)for(var vt=0;vt<i;vt++)l[vt]*=x;m.length=8;for(var vt=0,bt=0,Tt=0;vt<i;vt++,bt+=3){if(T+=l[vt],c)(T%=x)<0&&(T+=x),Tt=0;else{if(T<0)continue;if(T>x)continue}for(var xt=0;;Tt++){var wt=_t[Tt];if(!(T>wt)){if(0===Tt)xt=T/wt;else{var St=_t[Tt-1];xt=(T-St)/(wt-St)}break}}Tt!==_&&(_=Tt,c&&Tt===g?(this._computeVertices(f-4,4,0,m),this._computeVertices(0,4,4,m)):this._computeVertices(6*Tt+2,8,0,m)),this.addCurvePosition(xt,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],h,bt,n)}}},PathConstraint.prototype.addCurvePosition=function(e,i,n,a,s,o,h,l,c,m,f,g){if(0===e)return m[f]=i,m[f+1]=n,void(m[f+2]=0);if(1===e)return m[f]=l,m[f+1]=c,void(m[f+2]=0);var _=1-e,T=_*_,x=e*e,S=T*_,j=T*e*3,q=_*x*3,Y=e*x,X=S*i+j*a+q*o+Y*l,Z=S*n+j*s+q*h+Y*c;m[f]=X,m[f+1]=Z,m[f+2]=g?Math.atan2(Z-(S*n+j*s+q*h),X-(S*i+j*a+q*o)):0},PathConstraint.prototype.init=function(e,i){this._constraintData=e,this._armature=i;var n=e;this.pathOffset=n.pathDisplayData.geometry.offset,this.position=n.position,this.spacing=n.spacing,this.rotateOffset=n.rotateOffset,this.rotateMix=n.rotateMix,this.translateMix=n.translateMix,this._root=this._armature.getBone(n.root.name),this._target=this._armature.getBone(n.target.name),this._pathSlot=this._armature.getSlot(n.pathSlot.name);for(var a=0,s=n.bones.length;a<s;a++){var o=this._armature.getBone(n.bones[a].name);null!==o&&this._bones.push(o)}2===n.rotateMode&&(this._boneLengths.length=this._bones.length),this._root._hasConstraint=!0},PathConstraint.prototype.update=function(){var i=this._pathSlot;if(null!==i._geometryData&&i._geometryData.offset===this.pathOffset){var n=this._constraintData,a=!1;if(this._root._childrenTransformDirty?(this._updatePathVertices(i._geometryData),a=!0):(i._verticesDirty||i._isBonesUpdate())&&(this._updatePathVertices(i._geometryData),i._verticesDirty=!1,a=!0),a||this.dirty){var s=n.positionMode,o=n.spacingMode,h=n.rotateMode,l=this._bones,c=0===o,m=2===h,f=0===h,g=l.length,_=f?g:g+1,T=this.spacing,x=this._spaces;if(x.length=_,m||c){x[0]=0;for(var S=0,j=_-1;S<j;S++){(ot=l[S]).updateByConstraint();var q=ot._boneData.length,Y=q*(ht=ot.globalTransformMatrix).a,X=q*ht.b,Z=Math.sqrt(Y*Y+X*X);m&&(this._boneLengths[S]=Z),x[S+1]=(q+T)*Z/q}}else for(S=0;S<_;S++)x[S]=T;this._computeBezierCurve(i._displayFrame.rawDisplayData,_,f,1===s,2===o);var $,tt=this._positions,et=this.rotateOffset,it=tt[0],nt=tt[1];if(0===et)$=1===h;else if($=!1,null!==(ot=i.parent))et*=(ht=ot.globalTransformMatrix).a*ht.d-ht.b*ht.c>0?e.Transform.DEG_RAD:-e.Transform.DEG_RAD;for(var rt=this.rotateMix,at=this.translateMix,st=(S=0,3);S<g;S++,st+=3){var ot,ht;(ot=l[S]).updateByConstraint(),(ht=ot.globalTransformMatrix).tx+=(it-ht.tx)*at,ht.ty+=(nt-ht.ty)*at;var lt=(Y=tt[st])-it,ct=(X=tt[st+1])-nt;if(m){var pt=this._boneLengths[S],ut=(Math.sqrt(lt*lt+ct*ct)/pt-1)*rt+1;ht.a*=ut,ht.b*=ut}if(it=Y,nt=X,rt>0){var dt=ht.a,mt=ht.b,ft=ht.c,yt=ht.d,gt=void 0,Pt=void 0,_t=void 0;if(gt=f?tt[st-1]:Math.atan2(ct,lt),gt-=Math.atan2(mt,dt),$){Pt=Math.cos(gt),_t=Math.sin(gt);var vt=ot._boneData.length;it+=(vt*(Pt*dt-_t*mt)-lt)*rt,nt+=(vt*(_t*dt+Pt*mt)-ct)*rt}else gt+=et;gt>e.Transform.PI?gt-=e.Transform.PI_D:gt<-e.Transform.PI&&(gt+=e.Transform.PI_D),gt*=rt,Pt=Math.cos(gt),_t=Math.sin(gt),ht.a=Pt*dt-_t*mt,ht.b=_t*dt+Pt*mt,ht.c=Pt*ft-_t*yt,ht.d=_t*ft+Pt*yt}ot.global.fromMatrix(ht)}this.dirty=!1}}},PathConstraint.prototype.invalidUpdate=function(){},PathConstraint}(i);e.PathConstraint=a}(m||(m={})),function(e){var i=function(){function WorldClock(e){void 0===e&&(e=0),this.time=0,this.timeScale=1,this._systemTime=0,this._animatebles=[],this._clock=null,this.time=e,this._systemTime=.001*(new Date).getTime()}return WorldClock.prototype.advanceTime=function(e){e!=e&&(e=0);var i=.001*Date.now();if(e<0&&(e=i-this._systemTime),this._systemTime=i,1!==this.timeScale&&(e*=this.timeScale),0!==e){e<0?this.time-=e:this.time+=e;for(var n=0,a=0,s=this._animatebles.length;n<s;++n){var o=this._animatebles[n];null!==o?(a>0&&(this._animatebles[n-a]=o,this._animatebles[n]=null),o.advanceTime(e)):a++}if(a>0){for(s=this._animatebles.length;n<s;++n){var h=this._animatebles[n];null!==h?this._animatebles[n-a]=h:a++}this._animatebles.length-=a}}},WorldClock.prototype.contains=function(e){if(e===this)return!1;for(var i=e;i!==this&&null!==i;)i=i.clock;return i===this},WorldClock.prototype.add=function(e){this._animatebles.indexOf(e)<0&&(this._animatebles.push(e),e.clock=this)},WorldClock.prototype.remove=function(e){var i=this._animatebles.indexOf(e);i>=0&&(this._animatebles[i]=null,e.clock=null)},WorldClock.prototype.clear=function(){for(var e=0,i=this._animatebles;e<i.length;e++){var n=i[e];null!==n&&(n.clock=null)}},Object.defineProperty(WorldClock.prototype,"clock",{get:function(){return this._clock},set:function(e){this._clock!==e&&(null!==this._clock&&this._clock.remove(this),this._clock=e,null!==this._clock&&this._clock.add(this))},enumerable:!0,configurable:!0}),WorldClock}();e.WorldClock=i}(m||(m={})),function(e){var i=function(i){function Animation(){var e=null!==i&&i.apply(this,arguments)||this;return e._animationNames=[],e._animationStates=[],e._animations={},e._blendStates={},e._animationConfig=null,e}return s(Animation,i),Animation.toString=function(){return"[class dragonBones.Animation]"},Animation.prototype._onClear=function(){for(var e=0,i=this._animationStates;e<i.length;e++){i[e].returnToPool()}for(var n in this._animations)delete this._animations[n];for(var n in this._blendStates){var a=this._blendStates[n];for(var s in a)a[s].returnToPool();delete this._blendStates[n]}null!==this._animationConfig&&this._animationConfig.returnToPool(),this.timeScale=1,this._animationDirty=!1,this._inheritTimeScale=1,this._animationNames.length=0,this._animationStates.length=0,this._armature=null,this._animationConfig=null,this._lastAnimationState=null},Animation.prototype._fadeOut=function(e){switch(e.fadeOutMode){case 1:for(var i=0,n=this._animationStates;i<n.length;i++){null===(m=n[i])._parent&&(m.layer===e.layer&&m.fadeOut(e.fadeOutTime,e.pauseFadeOut))}break;case 2:for(var a=0,s=this._animationStates;a<s.length;a++){null===(m=s[a])._parent&&(m.group===e.group&&m.fadeOut(e.fadeOutTime,e.pauseFadeOut))}break;case 3:for(var o=0,h=this._animationStates;o<h.length;o++){null===(m=h[o])._parent&&(m.layer===e.layer&&m.group===e.group&&m.fadeOut(e.fadeOutTime,e.pauseFadeOut))}break;case 4:for(var l=0,c=this._animationStates;l<c.length;l++){var m;null===(m=c[l])._parent&&m.fadeOut(e.fadeOutTime,e.pauseFadeOut)}}},Animation.prototype.init=function(i){null===this._armature&&(this._armature=i,this._animationConfig=e.BaseObject.borrowObject(e.AnimationConfig))},Animation.prototype.advanceTime=function(e){for(var i in e<0&&(e=-e),this._armature.inheritAnimation&&null!==this._armature._parent?this._inheritTimeScale=this._armature._parent._armature.animation._inheritTimeScale*this.timeScale:this._inheritTimeScale=this.timeScale,1!==this._inheritTimeScale&&(e*=this._inheritTimeScale),this._blendStates){var n=this._blendStates[i];for(var a in n)n[a].reset()}var s=this._animationStates.length;if(1===s)if((j=this._animationStates[0])._fadeState>0&&j._subFadeState>0)this._armature._dragonBones.bufferObject(j),this._animationStates.length=0,this._lastAnimationState=null;else{var o=j.animationData,h=o.cacheFrameRate;if(this._animationDirty&&h>0){this._animationDirty=!1;for(var l=0,c=this._armature.getBones();l<c.length;l++){var m=c[l];m._cachedFrameIndices=o.getBoneCachedFrameIndices(m.name)}for(var f=0,g=this._armature.getSlots();f<g.length;f++){var _=g[f];if(_.displayFrameCount>0){var T=_.getDisplayFrameAt(0).rawDisplayData;if(null!==T&&T.parent===this._armature.armatureData.defaultSkin){_._cachedFrameIndices=o.getSlotCachedFrameIndices(_.name);continue}}_._cachedFrameIndices=null}}j.advanceTime(e,h)}else if(s>1){for(var x=0,S=0;x<s;++x){var j;(j=this._animationStates[x])._fadeState>0&&j._subFadeState>0?(S++,this._armature._dragonBones.bufferObject(j),this._animationDirty=!0,this._lastAnimationState===j&&(this._lastAnimationState=null)):(S>0&&(this._animationStates[x-S]=j),j.advanceTime(e,0)),x===s-1&&S>0&&(this._animationStates.length-=S,null===this._lastAnimationState&&this._animationStates.length>0&&(this._lastAnimationState=this._animationStates[this._animationStates.length-1]))}this._armature._cacheFrameIndex=-1}else this._armature._cacheFrameIndex=-1},Animation.prototype.reset=function(){for(var e=0,i=this._animationStates;e<i.length;e++){i[e].returnToPool()}this._animationDirty=!1,this._animationConfig.clear(),this._animationStates.length=0,this._lastAnimationState=null},Animation.prototype.stop=function(e){if(void 0===e&&(e=null),null!==e)null!==(a=this.getState(e))&&a.stop();else for(var i=0,n=this._animationStates;i<n.length;i++){var a;(a=n[i]).stop()}},Animation.prototype.playConfig=function(i){var n=i.animation;if(!(n in this._animations))return console.warn("Non-existent animation.\n","DragonBones name: "+this._armature.armatureData.parent.name,"Armature name: "+this._armature.name,"Animation name: "+n),null;var a=this._animations[n];if(5===i.fadeOutMode)for(var s=0,o=this._animationStates;s<o.length;s++){var h=o[s];if(h._fadeState<1&&h.layer===i.layer&&h.animationData===a)return h}0===this._animationStates.length?i.fadeInTime=0:i.fadeInTime<0&&(i.fadeInTime=a.fadeInTime),i.fadeOutTime<0&&(i.fadeOutTime=i.fadeInTime),i.timeScale<=-100&&(i.timeScale=1/a.scale),a.frameCount>0?(i.position<0?(i.position%=a.duration,i.position=a.duration-i.position):i.position===a.duration?i.position-=1e-6:i.position>a.duration&&(i.position%=a.duration),i.duration>0&&i.position+i.duration>a.duration&&(i.duration=a.duration-i.position),i.playTimes<0&&(i.playTimes=a.playTimes)):(i.playTimes=1,i.position=0,i.duration>0&&(i.duration=0)),0===i.duration&&(i.duration=-1),this._fadeOut(i);var l=e.BaseObject.borrowObject(e.AnimationState);if(l.init(this._armature,a,i),this._animationDirty=!0,this._armature._cacheFrameIndex=-1,this._animationStates.length>0){for(var c=!1,m=0,f=this._animationStates.length;m<f;++m){if(l.layer>this._animationStates[m].layer){c=!0,this._animationStates.splice(m,0,l);break}if(m!==f-1&&l.layer>this._animationStates[m+1].layer){c=!0,this._animationStates.splice(m+1,0,l);break}}c||this._animationStates.push(l)}else this._animationStates.push(l);for(var g=0,_=this._armature.getSlots();g<_.length;g++){var T=_[g].childArmature;null!==T&&T.inheritAnimation&&T.animation.hasAnimation(n)&&null===T.animation.getState(n)&&T.animation.fadeIn(n)}for(var x in a.animationTimelines){var S=this.fadeIn(x,0,1,l.layer,"",5);if(null!==S){var j=a.animationTimelines[x];S.actionEnabled=!1,S.resetToPose=!1,S.stop(),l.addState(S,j);var q=this._animationStates.indexOf(l),Y=this._animationStates.indexOf(S);Y<q&&(this._animationStates.splice(q,1),this._animationStates.splice(Y,0,l))}}return this._lastAnimationState=l,l},Animation.prototype.play=function(e,i){if(void 0===e&&(e=null),void 0===i&&(i=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=i,this._animationConfig.fadeInTime=0,this._animationConfig.animation=null!==e?e:"",null!==e&&e.length>0)this.playConfig(this._animationConfig);else if(null===this._lastAnimationState){var n=this._armature.armatureData.defaultAnimation;null!==n&&(this._animationConfig.animation=n.name,this.playConfig(this._animationConfig))}else this._lastAnimationState.isPlaying||this._lastAnimationState.isCompleted?(this._animationConfig.animation=this._lastAnimationState.name,this.playConfig(this._animationConfig)):this._lastAnimationState.play();return this._lastAnimationState},Animation.prototype.fadeIn=function(e,i,n,a,s,o){return void 0===i&&(i=-1),void 0===n&&(n=-1),void 0===a&&(a=0),void 0===s&&(s=null),void 0===o&&(o=3),this._animationConfig.clear(),this._animationConfig.fadeOutMode=o,this._animationConfig.playTimes=n,this._animationConfig.layer=a,this._animationConfig.fadeInTime=i,this._animationConfig.animation=e,this._animationConfig.group=null!==s?s:"",this.playConfig(this._animationConfig)},Animation.prototype.gotoAndPlayByTime=function(e,i,n){return void 0===i&&(i=0),void 0===n&&(n=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=n,this._animationConfig.position=i,this._animationConfig.fadeInTime=0,this._animationConfig.animation=e,this.playConfig(this._animationConfig)},Animation.prototype.gotoAndPlayByFrame=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=n,this._animationConfig.fadeInTime=0,this._animationConfig.animation=e;var a=e in this._animations?this._animations[e]:null;return null!==a&&(this._animationConfig.position=a.frameCount>0?a.duration*i/a.frameCount:0),this.playConfig(this._animationConfig)},Animation.prototype.gotoAndPlayByProgress=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=n,this._animationConfig.fadeInTime=0,this._animationConfig.animation=e;var a=e in this._animations?this._animations[e]:null;return null!==a&&(this._animationConfig.position=a.duration*(i>0?i:0)),this.playConfig(this._animationConfig)},Animation.prototype.gotoAndStopByTime=function(e,i){void 0===i&&(i=0);var n=this.gotoAndPlayByTime(e,i,1);return null!==n&&n.stop(),n},Animation.prototype.gotoAndStopByFrame=function(e,i){void 0===i&&(i=0);var n=this.gotoAndPlayByFrame(e,i,1);return null!==n&&n.stop(),n},Animation.prototype.gotoAndStopByProgress=function(e,i){void 0===i&&(i=0);var n=this.gotoAndPlayByProgress(e,i,1);return null!==n&&n.stop(),n},Animation.prototype.getBlendState=function(i,n,a){i in this._blendStates||(this._blendStates[i]={});var s=this._blendStates[i];n in s||((s[n]=e.BaseObject.borrowObject(e.BlendState)).target=a);return s[n]},Animation.prototype.getState=function(e,i){void 0===i&&(i=-1);for(var n=this._animationStates.length;n--;){var a=this._animationStates[n];if(a.name===e&&(i<0||a.layer===i))return a}return null},Animation.prototype.hasAnimation=function(e){return e in this._animations},Animation.prototype.getStates=function(){return this._animationStates},Object.defineProperty(Animation.prototype,"isPlaying",{get:function(){for(var e=0,i=this._animationStates;e<i.length;e++){if(i[e].isPlaying)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(Animation.prototype,"isCompleted",{get:function(){for(var e=0,i=this._animationStates;e<i.length;e++){if(!i[e].isCompleted)return!1}return this._animationStates.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(Animation.prototype,"lastAnimationName",{get:function(){return null!==this._lastAnimationState?this._lastAnimationState.name:""},enumerable:!0,configurable:!0}),Object.defineProperty(Animation.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:!0,configurable:!0}),Object.defineProperty(Animation.prototype,"animations",{get:function(){return this._animations},set:function(e){if(this._animations!==e){for(var i in this._animationNames.length=0,this._animations)delete this._animations[i];for(var i in e)this._animationNames.push(i),this._animations[i]=e[i]}},enumerable:!0,configurable:!0}),Object.defineProperty(Animation.prototype,"animationConfig",{get:function(){return this._animationConfig.clear(),this._animationConfig},enumerable:!0,configurable:!0}),Object.defineProperty(Animation.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!0,configurable:!0}),Animation}(e.BaseObject);e.Animation=i}(m||(m={})),function(e){var i=function(i){function AnimationState(){var e=null!==i&&i.apply(this,arguments)||this;return e._boneMask=[],e._boneTimelines=[],e._boneBlendTimelines=[],e._slotTimelines=[],e._slotBlendTimelines=[],e._constraintTimelines=[],e._animationTimelines=[],e._poseTimelines=[],e._actionTimeline=null,e._zOrderTimeline=null,e}return s(AnimationState,i),AnimationState.toString=function(){return"[class dragonBones.AnimationState]"},AnimationState.prototype._onClear=function(){for(var e=0,i=this._boneTimelines;e<i.length;e++){(_=i[e]).returnToPool()}for(var n=0,a=this._boneBlendTimelines;n<a.length;n++){(_=a[n]).returnToPool()}for(var s=0,o=this._slotTimelines;s<o.length;s++){(_=o[s]).returnToPool()}for(var h=0,l=this._slotBlendTimelines;h<l.length;h++){(_=l[h]).returnToPool()}for(var c=0,m=this._constraintTimelines;c<m.length;c++){(_=m[c]).returnToPool()}for(var f=0,g=this._animationTimelines;f<g.length;f++){var _,T=(_=g[f]).target;T._parent===this&&(T._fadeState=1,T._subFadeState=1,T._parent=null),_.returnToPool()}null!==this._actionTimeline&&this._actionTimeline.returnToPool(),null!==this._zOrderTimeline&&this._zOrderTimeline.returnToPool(),this.actionEnabled=!1,this.additive=!1,this.displayControl=!1,this.resetToPose=!1,this.blendType=0,this.playTimes=1,this.layer=0,this.timeScale=1,this._weight=1,this.parameterX=0,this.parameterY=0,this.positionX=0,this.positionY=0,this.autoFadeOutTime=0,this.fadeTotalTime=0,this.name="",this.group="",this._timelineDirty=2,this._playheadState=0,this._fadeState=-1,this._subFadeState=-1,this._position=0,this._duration=0,this._fadeTime=0,this._time=0,this._fadeProgress=0,this._weightResult=0,this._boneMask.length=0,this._boneTimelines.length=0,this._boneBlendTimelines.length=0,this._slotTimelines.length=0,this._slotBlendTimelines.length=0,this._constraintTimelines.length=0,this._animationTimelines.length=0,this._poseTimelines.length=0,this._animationData=null,this._armature=null,this._actionTimeline=null,this._zOrderTimeline=null,this._activeChildA=null,this._activeChildB=null,this._parent=null},AnimationState.prototype._updateTimelines=function(){for(var i=0,n=this._armature._constraints;i<n.length;i++){var a=n[i],s=this._animationData.getConstraintTimelines(a.name);if(null!==s)for(var o=0,h=s;o<h.length;o++){var l=h[o];switch(l.type){case 30:(c=e.BaseObject.borrowObject(e.IKConstraintTimelineState)).target=a,c.init(this._armature,this,l),this._constraintTimelines.push(c)}}else if(this.resetToPose){var c;(c=e.BaseObject.borrowObject(e.IKConstraintTimelineState)).target=a,c.init(this._armature,this,null),this._constraintTimelines.push(c),this._poseTimelines.push(c)}}},AnimationState.prototype._updateBoneAndSlotTimelines=function(){for(var i={},a=0,s=this._boneTimelines;a<s.length;a++){(f=(Y=s[a]).target.target.name)in i||(i[f]=[]),i[f].push(Y)}for(var o=0,h=this._boneBlendTimelines;o<h.length;o++){(f=(Y=h[o]).target.target.name)in i||(i[f]=[]),i[f].push(Y)}for(var l=0,c=this._armature.getBones();l<c.length;l++){var m=c[l],f=m.name;if(this.containsBoneMask(f))if(f in i)delete i[f];else{var g=this._animationData.getBoneTimelines(f),_=this._armature.animation.getBlendState(n.BONE_TRANSFORM,m.name,m);if(null!==g)for(var T=0,x=g;T<x.length;T++){switch((pt=x[T]).type){case 10:(Y=e.BaseObject.borrowObject(e.BoneAllTimelineState)).target=_,Y.init(this._armature,this,pt),this._boneTimelines.push(Y);break;case 11:(Y=e.BaseObject.borrowObject(e.BoneTranslateTimelineState)).target=_,Y.init(this._armature,this,pt),this._boneTimelines.push(Y);break;case 12:(Y=e.BaseObject.borrowObject(e.BoneRotateTimelineState)).target=_,Y.init(this._armature,this,pt),this._boneTimelines.push(Y);break;case 13:(Y=e.BaseObject.borrowObject(e.BoneScaleTimelineState)).target=_,Y.init(this._armature,this,pt),this._boneTimelines.push(Y);break;case 60:(Y=e.BaseObject.borrowObject(e.AlphaTimelineState)).target=this._armature.animation.getBlendState(n.BONE_ALPHA,m.name,m),Y.init(this._armature,this,pt),this._boneBlendTimelines.push(Y);break;case 50:(Y=e.BaseObject.borrowObject(e.SurfaceTimelineState)).target=this._armature.animation.getBlendState(n.SURFACE,m.name,m),Y.init(this._armature,this,pt),this._boneBlendTimelines.push(Y)}}else if(this.resetToPose){if(0===m._boneData.type)(Y=e.BaseObject.borrowObject(e.BoneAllTimelineState)).target=_,Y.init(this._armature,this,null),this._boneTimelines.push(Y),this._poseTimelines.push(Y);else(Y=e.BaseObject.borrowObject(e.SurfaceTimelineState)).target=this._armature.animation.getBlendState(n.SURFACE,m.name,m),Y.init(this._armature,this,null),this._boneBlendTimelines.push(Y),this._poseTimelines.push(Y)}}}for(var S in i)for(var j=0,q=i[S];j<q.length;j++){var Y=q[j];(Tt=this._boneTimelines.indexOf(Y))>=0&&(this._boneTimelines.splice(Tt,1),Y.returnToPool()),(Tt=this._boneBlendTimelines.indexOf(Y))>=0&&(this._boneBlendTimelines.splice(Tt,1),Y.returnToPool())}for(var X={},Z=[],$=0,tt=this._slotTimelines;$<tt.length;$++){(f=(Y=tt[$]).target.name)in X||(X[f]=[]),X[f].push(Y)}for(var et=0,it=this._slotBlendTimelines;et<it.length;et++){(f=(Y=it[et]).target.target.name)in X||(X[f]=[]),X[f].push(Y)}for(var nt=0,rt=this._armature.getSlots();nt<rt.length;nt++){var at=rt[nt],st=at.parent.name;if(this.containsBoneMask(st))if((f=at.name)in X)delete X[f];else{var ot=!1,ht=!1;if(Z.length=0,null!==(g=this._animationData.getSlotTimelines(f)))for(var lt=0,ct=g;lt<ct.length;lt++){var pt;switch((pt=ct[lt]).type){case 20:(Y=e.BaseObject.borrowObject(e.SlotDisplayTimelineState)).target=at,Y.init(this._armature,this,pt),this._slotTimelines.push(Y),ot=!0;break;case 23:(Y=e.BaseObject.borrowObject(e.SlotZIndexTimelineState)).target=this._armature.animation.getBlendState(n.SLOT_Z_INDEX,at.name,at),Y.init(this._armature,this,pt),this._slotBlendTimelines.push(Y);break;case 21:(Y=e.BaseObject.borrowObject(e.SlotColorTimelineState)).target=at,Y.init(this._armature,this,pt),this._slotTimelines.push(Y),ht=!0;break;case 22:var ut=this._animationData.parent.parent,dt=ut.timelineArray,mt=this._animationData.frameIntOffset+dt[pt.offset+3],ft=ut.frameIntArray[mt+0];ft<0&&(ft+=65536);for(var yt=0,gt=at.displayFrameCount;yt<gt;++yt){if(null!==(_t=(Pt=at.getDisplayFrameAt(yt)).getGeometryData())&&_t.offset===ft){(Y=e.BaseObject.borrowObject(e.DeformTimelineState)).target=this._armature.animation.getBlendState(n.SLOT_DEFORM,Pt.rawDisplayData.name,at),Y.displayFrame=Pt,Y.init(this._armature,this,pt),this._slotBlendTimelines.push(Y),Pt.updateDeformVertices(),Z.push(ft);break}}break;case 24:(Y=e.BaseObject.borrowObject(e.AlphaTimelineState)).target=this._armature.animation.getBlendState(n.SLOT_ALPHA,at.name,at),Y.init(this._armature,this,pt),this._slotBlendTimelines.push(Y)}}if(this.resetToPose){if(!ot)(Y=e.BaseObject.borrowObject(e.SlotDisplayTimelineState)).target=at,Y.init(this._armature,this,null),this._slotTimelines.push(Y),this._poseTimelines.push(Y);if(!ht)(Y=e.BaseObject.borrowObject(e.SlotColorTimelineState)).target=at,Y.init(this._armature,this,null),this._slotTimelines.push(Y),this._poseTimelines.push(Y);for(yt=0,gt=at.displayFrameCount;yt<gt;++yt){var Pt,_t;if(0!==(Pt=at.getDisplayFrameAt(yt)).deformVertices.length)if(null!==(_t=Pt.getGeometryData())&&Z.indexOf(_t.offset)<0)(Y=e.BaseObject.borrowObject(e.DeformTimelineState)).displayFrame=Pt,Y.target=this._armature.animation.getBlendState(n.SLOT_DEFORM,at.name,at),Y.init(this._armature,this,null),this._slotBlendTimelines.push(Y),this._poseTimelines.push(Y)}}}}for(var S in X)for(var vt=0,bt=X[S];vt<bt.length;vt++){var Tt;Y=bt[vt];(Tt=this._slotTimelines.indexOf(Y))>=0&&(this._slotTimelines.splice(Tt,1),Y.returnToPool()),(Tt=this._slotBlendTimelines.indexOf(Y))>=0&&(this._slotBlendTimelines.splice(Tt,1),Y.returnToPool())}},AnimationState.prototype._advanceFadeTime=function(i){var n=this._fadeState>0;if(this._subFadeState<0&&(this._subFadeState=0,null===this._parent&&this.actionEnabled)){var a=n?e.EventObject.FADE_OUT:e.EventObject.FADE_IN;if(this._armature.eventDispatcher.hasDBEventListener(a))(s=e.BaseObject.borrowObject(e.EventObject)).type=a,s.armature=this._armature,s.animationState=this,this._armature._dragonBones.bufferEvent(s)}if((i<0&&(i=-i),this._fadeTime+=i,this._fadeTime>=this.fadeTotalTime?(this._subFadeState=1,this._fadeProgress=n?0:1):this._fadeTime>0?this._fadeProgress=n?1-this._fadeTime/this.fadeTotalTime:this._fadeTime/this.fadeTotalTime:this._fadeProgress=n?1:0,this._subFadeState>0)&&(n||(this._playheadState|=1,this._fadeState=0),null===this._parent&&this.actionEnabled)){var s;a=n?e.EventObject.FADE_OUT_COMPLETE:e.EventObject.FADE_IN_COMPLETE;if(this._armature.eventDispatcher.hasDBEventListener(a))(s=e.BaseObject.borrowObject(e.EventObject)).type=a,s.armature=this._armature,s.animationState=this,this._armature._dragonBones.bufferEvent(s)}},AnimationState.prototype.init=function(i,n,a){if(null===this._armature){if(this._armature=i,this._animationData=n,this.resetToPose=a.resetToPose,this.additive=a.additive,this.displayControl=a.displayControl,this.actionEnabled=a.actionEnabled,this.blendType=n.blendType,this.layer=a.layer,this.playTimes=a.playTimes,this.timeScale=a.timeScale,this.fadeTotalTime=a.fadeInTime,this.autoFadeOutTime=a.autoFadeOutTime,this.name=a.name.length>0?a.name:a.animation,this.group=a.group,this._weight=a.weight,a.pauseFadeIn?this._playheadState=2:this._playheadState=3,a.duration<0?(this._position=0,this._duration=this._animationData.duration,0!==a.position?this.timeScale>=0?this._time=a.position:this._time=a.position-this._duration:this._time=0):(this._position=a.position,this._duration=a.duration,this._time=0),this.timeScale<0&&0===this._time&&(this._time=-1e-6),this.fadeTotalTime<=0&&(this._fadeProgress=.999999),a.boneMask.length>0){this._boneMask.length=a.boneMask.length;for(var s=0,o=this._boneMask.length;s<o;++s)this._boneMask[s]=a.boneMask[s]}this._actionTimeline=e.BaseObject.borrowObject(e.ActionTimelineState),this._actionTimeline.init(this._armature,this,this._animationData.actionTimeline),this._actionTimeline.currentTime=this._time,this._actionTimeline.currentTime<0&&(this._actionTimeline.currentTime=this._duration-this._actionTimeline.currentTime),null!==this._animationData.zOrderTimeline&&(this._zOrderTimeline=e.BaseObject.borrowObject(e.ZOrderTimelineState),this._zOrderTimeline.init(this._armature,this,this._animationData.zOrderTimeline))}},AnimationState.prototype.advanceTime=function(e,i){0===this._fadeState&&0===this._subFadeState||this._advanceFadeTime(e),3===this._playheadState&&(1!==this.timeScale&&(e*=this.timeScale),this._time+=e),0!==this._timelineDirty&&(2===this._timelineDirty&&this._updateTimelines(),this._timelineDirty=0,this._updateBoneAndSlotTimelines());var n=0!==this._fadeState||0===this._subFadeState,a=0===this._fadeState&&i>0,s=!0,o=!0,h=this._time;if(this._weightResult=this._weight*this._fadeProgress,null!==this._parent&&(this._weightResult*=this._parent._weightResult),this._actionTimeline.playState<=0&&this._actionTimeline.update(h),0!==this._weight){if(a){var l=2*i;this._actionTimeline.currentTime=Math.floor(this._actionTimeline.currentTime*l)/l}if(null!==this._zOrderTimeline&&this._zOrderTimeline.playState<=0&&this._zOrderTimeline.update(h),a){var c=Math.floor(this._actionTimeline.currentTime*i);this._armature._cacheFrameIndex===c?(s=!1,o=!1):(this._armature._cacheFrameIndex=c,this._animationData.cachedFrames[c]?o=!1:this._animationData.cachedFrames[c]=!0)}if(s){var m=!1,f=null;if(o)for(var g=0,_=this._boneTimelines.length;g<_;++g){if((it=this._boneTimelines[g]).playState<=0&&it.update(h),it.target!==f)if(m=(S=it.target).update(this),f=S,1===S.dirty){var T=S.target.animationPose;T.x=0,T.y=0,T.rotation=0,T.skew=0,T.scaleX=1,T.scaleY=1}m&&it.blend(n)}for(g=0,_=this._boneBlendTimelines.length;g<_;++g){(it=this._boneBlendTimelines[g]).playState<=0&&it.update(h),it.target.update(this)&&it.blend(n)}if(this.displayControl)for(g=0,_=this._slotTimelines.length;g<_;++g){if((it=this._slotTimelines[g]).playState<=0){var x=it.target.displayController;null!==x&&x!==this.name&&x!==this.group||it.update(h)}}for(g=0,_=this._slotBlendTimelines.length;g<_;++g){if((it=this._slotBlendTimelines[g]).playState<=0){var S=it.target;it.update(h),S.update(this)&&it.blend(n)}}for(g=0,_=this._constraintTimelines.length;g<_;++g){(it=this._constraintTimelines[g]).playState<=0&&it.update(h)}if(this._animationTimelines.length>0){var j=100,q=100,Y=null,X=null;for(g=0,_=this._animationTimelines.length;g<_;++g){if((it=this._animationTimelines[g]).playState<=0&&it.update(h),1===this.blendType){var Z=it.target,$=this.parameterX-Z.positionX;$>=0?$<j&&(j=$,Y=Z):-$<q&&(q=-$,X=Z)}}null!==Y&&(this._activeChildA!==Y&&(null!==this._activeChildA&&(this._activeChildA.weight=0),this._activeChildA=Y,this._activeChildA.activeTimeline()),this._activeChildB!==X&&(null!==this._activeChildB&&(this._activeChildB.weight=0),this._activeChildB=X),Y.weight=q/(j+q),X&&(X.weight=1-Y.weight))}}if(0===this._fadeState){if(this._subFadeState>0&&(this._subFadeState=0,this._poseTimelines.length>0)){for(var tt=0,et=this._poseTimelines;tt<et.length;tt++){var it=et[tt],nt=this._boneTimelines.indexOf(it);nt>=0?(this._boneTimelines.splice(nt,1),it.returnToPool()):(nt=this._boneBlendTimelines.indexOf(it))>=0?(this._boneBlendTimelines.splice(nt,1),it.returnToPool()):(nt=this._slotTimelines.indexOf(it))>=0?(this._slotTimelines.splice(nt,1),it.returnToPool()):(nt=this._slotBlendTimelines.indexOf(it))>=0?(this._slotBlendTimelines.splice(nt,1),it.returnToPool()):(nt=this._constraintTimelines.indexOf(it))>=0&&(this._constraintTimelines.splice(nt,1),it.returnToPool())}this._poseTimelines.length=0}this._actionTimeline.playState>0&&this.autoFadeOutTime>=0&&this.fadeOut(this.autoFadeOutTime)}}},AnimationState.prototype.play=function(){this._playheadState=3},AnimationState.prototype.stop=function(){this._playheadState&=1},AnimationState.prototype.fadeOut=function(e,i){if(void 0===i&&(i=!0),e<0&&(e=0),i&&(this._playheadState&=2),this._fadeState>0){if(e>this.fadeTotalTime-this._fadeTime)return}else{this._fadeState=1,this._subFadeState=-1,(e<=0||this._fadeProgress<=0)&&(this._fadeProgress=1e-6);for(var n=0,a=this._boneTimelines;n<a.length;n++){(x=a[n]).fadeOut()}for(var s=0,o=this._boneBlendTimelines;s<o.length;s++){(x=o[s]).fadeOut()}for(var h=0,l=this._slotTimelines;h<l.length;h++){(x=l[h]).fadeOut()}for(var c=0,m=this._slotBlendTimelines;c<m.length;c++){(x=m[c]).fadeOut()}for(var f=0,g=this._constraintTimelines;f<g.length;f++){(x=g[f]).fadeOut()}for(var _=0,T=this._animationTimelines;_<T.length;_++){var x;(x=T[_]).fadeOut(),x.target.fadeOut(999999,!0)}}this.displayControl=!1,this.fadeTotalTime=this._fadeProgress>1e-6?e/this._fadeProgress:0,this._fadeTime=this.fadeTotalTime*(1-this._fadeProgress)},AnimationState.prototype.containsBoneMask=function(e){return 0===this._boneMask.length||this._boneMask.indexOf(e)>=0},AnimationState.prototype.addBoneMask=function(e,i){void 0===i&&(i=!0);var n=this._armature.getBone(e);if(null!==n){if(this._boneMask.indexOf(e)<0&&this._boneMask.push(e),i)for(var a=0,s=this._armature.getBones();a<s.length;a++){var o=s[a];this._boneMask.indexOf(o.name)<0&&n.contains(o)&&this._boneMask.push(o.name)}this._timelineDirty=1}},AnimationState.prototype.removeBoneMask=function(e,i){void 0===i&&(i=!0);var n=this._boneMask.indexOf(e);if(n>=0&&this._boneMask.splice(n,1),i){var a=this._armature.getBone(e);if(null!==a){var s=this._armature.getBones();if(this._boneMask.length>0)for(var o=0,h=s;o<h.length;o++){var l=h[o],c=this._boneMask.indexOf(l.name);c>=0&&a.contains(l)&&this._boneMask.splice(c,1)}else for(var m=0,f=s;m<f.length;m++){(l=f[m])!==a&&(a.contains(l)||this._boneMask.push(l.name))}}}this._timelineDirty=1},AnimationState.prototype.removeAllBoneMask=function(){this._boneMask.length=0,this._timelineDirty=1},AnimationState.prototype.addState=function(i,n){if(void 0===n&&(n=null),null!==n)for(var a=0,s=n;a<s.length;a++){var o=s[a];switch(o.type){case 40:if((l=e.BaseObject.borrowObject(e.AnimationProgressTimelineState)).target=i,l.init(this._armature,this,o),this._animationTimelines.push(l),0!==this.blendType){var h=o;i.positionX=h.x,i.positionY=h.y,i.weight=0}i._parent=this,this.resetToPose=!1;break;case 41:(l=e.BaseObject.borrowObject(e.AnimationWeightTimelineState)).target=i,l.init(this._armature,this,o),this._animationTimelines.push(l);break;case 42:var l;(l=e.BaseObject.borrowObject(e.AnimationParametersTimelineState)).target=i,l.init(this._armature,this,o),this._animationTimelines.push(l)}}null===i._parent&&(i._parent=this)},AnimationState.prototype.activeTimeline=function(){for(var e=0,i=this._slotTimelines;e<i.length;e++){var n=i[e];n.dirty=!0,n.currentTime=-1}},Object.defineProperty(AnimationState.prototype,"isFadeIn",{get:function(){return this._fadeState<0},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationState.prototype,"isFadeOut",{get:function(){return this._fadeState>0},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationState.prototype,"isFadeComplete",{get:function(){return 0===this._fadeState},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationState.prototype,"isPlaying",{get:function(){return 0!=(2&this._playheadState)&&this._actionTimeline.playState<=0},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationState.prototype,"isCompleted",{get:function(){return this._actionTimeline.playState>0},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationState.prototype,"currentPlayTimes",{get:function(){return this._actionTimeline.currentPlayTimes},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationState.prototype,"totalTime",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationState.prototype,"currentTime",{get:function(){return this._actionTimeline.currentTime},set:function(e){var i=this._actionTimeline.currentPlayTimes-(this._actionTimeline.playState>0?1:0);if((e<0||this._duration<e)&&(e=e%this._duration+i*this._duration)<0&&(e+=this._duration),this.playTimes>0&&i===this.playTimes-1&&e===this._duration&&null===this._parent&&(e=this._duration-1e-6),this._time!==e){this._time=e,this._actionTimeline.setCurrentTime(this._time),null!==this._zOrderTimeline&&(this._zOrderTimeline.playState=-1);for(var n=0,a=this._boneTimelines;n<a.length;n++){a[n].playState=-1}for(var s=0,o=this._slotTimelines;s<o.length;s++){o[s].playState=-1}}},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationState.prototype,"weight",{get:function(){return this._weight},set:function(e){if(this._weight!==e){this._weight=e;for(var i=0,n=this._boneTimelines;i<n.length;i++){n[i].dirty=!0}for(var a=0,s=this._boneBlendTimelines;a<s.length;a++){s[a].dirty=!0}for(var o=0,h=this._slotBlendTimelines;o<h.length;o++){h[o].dirty=!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationState.prototype,"animationData",{get:function(){return this._animationData},enumerable:!0,configurable:!0}),AnimationState}(e.BaseObject);e.AnimationState=i;var n=function(e){function BlendState(){return null!==e&&e.apply(this,arguments)||this}return s(BlendState,e),BlendState.toString=function(){return"[class dragonBones.BlendState]"},BlendState.prototype._onClear=function(){this.reset(),this.target=null},BlendState.prototype.update=function(e){var i=e.layer,n=e._weightResult;if(this.dirty>0){if(this.leftWeight>0){if(this.layer!==i){if(this.layerWeight>=this.leftWeight)return this.dirty++,this.layer=i,this.leftWeight=0,this.blendWeight=0,!1;this.layer=i,this.leftWeight-=this.layerWeight,this.layerWeight=0}return n*=this.leftWeight,this.dirty++,this.blendWeight=n,this.layerWeight+=this.blendWeight,!0}return!1}return this.dirty++,this.layer=i,this.leftWeight=1,this.blendWeight=n,this.layerWeight=n,!0},BlendState.prototype.reset=function(){this.dirty=0,this.layer=0,this.leftWeight=0,this.layerWeight=0,this.blendWeight=0},BlendState.BONE_TRANSFORM="boneTransform",BlendState.BONE_ALPHA="boneAlpha",BlendState.SURFACE="surface",BlendState.SLOT_DEFORM="slotDeform",BlendState.SLOT_ALPHA="slotAlpha",BlendState.SLOT_Z_INDEX="slotZIndex",BlendState}(e.BaseObject);e.BlendState=n}(m||(m={})),function(e){var i=function(e){function TimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(TimelineState,e),TimelineState.prototype._onClear=function(){this.dirty=!1,this.playState=-1,this.currentPlayTimes=0,this.currentTime=-1,this.target=null,this._isTween=!1,this._valueOffset=0,this._frameValueOffset=0,this._frameOffset=0,this._frameRate=0,this._frameCount=0,this._frameIndex=-1,this._frameRateR=0,this._position=0,this._duration=0,this._timeScale=1,this._timeOffset=0,this._animationData=null,this._timelineData=null,this._armature=null,this._animationState=null,this._actionTimeline=null,this._frameArray=null,this._valueArray=null,this._timelineArray=null,this._frameIndices=null},TimelineState.prototype._setCurrentTime=function(e){var i=this.playState,n=this.currentPlayTimes,a=this.currentTime;if(null!==this._actionTimeline&&this._frameCount<=1)this.playState=this._actionTimeline.playState>=0?1:-1,this.currentPlayTimes=1,this.currentTime=this._actionTimeline.currentTime;else if(null===this._actionTimeline||1!==this._timeScale||0!==this._timeOffset){var s=this._animationState.playTimes,o=s*this._duration;e*=this._timeScale,0!==this._timeOffset&&(e+=this._timeOffset*this._animationData.duration),s>0&&(e>=o||e<=-o)?(this.playState<=0&&3===this._animationState._playheadState&&(this.playState=1),this.currentPlayTimes=s,this.currentTime=e<0?0:1===this.playState?this._duration+1e-6:this._duration):(0!==this.playState&&3===this._animationState._playheadState&&(this.playState=0),e<0?(e=-e,this.currentPlayTimes=Math.floor(e/this._duration),this.currentTime=this._duration-e%this._duration):(this.currentPlayTimes=Math.floor(e/this._duration),this.currentTime=e%this._duration)),this.currentTime+=this._position}else this.playState=this._actionTimeline.playState,this.currentPlayTimes=this._actionTimeline.currentPlayTimes,this.currentTime=this._actionTimeline.currentTime;return(this.currentPlayTimes!==n||this.currentTime!==a)&&((i<0&&this.playState!==i||this.playState<=0&&this.currentPlayTimes!==n)&&(this._frameIndex=-1),!0)},TimelineState.prototype.init=function(e,i,n){if(this._armature=e,this._animationState=i,this._timelineData=n,this._actionTimeline=this._animationState._actionTimeline,this===this._actionTimeline&&(this._actionTimeline=null),this._animationData=this._animationState.animationData,this._frameRate=this._animationData.parent.frameRate,this._frameRateR=1/this._frameRate,this._position=this._animationState._position,this._duration=this._animationState._duration,null!==this._timelineData){var a=this._animationData.parent.parent;this._frameArray=a.frameArray,this._timelineArray=a.timelineArray,this._frameIndices=a.frameIndices,this._frameCount=this._timelineArray[this._timelineData.offset+2],this._frameValueOffset=this._timelineArray[this._timelineData.offset+4],this._timeScale=100/this._timelineArray[this._timelineData.offset+0],this._timeOffset=.01*this._timelineArray[this._timelineData.offset+1]}},TimelineState.prototype.fadeOut=function(){this.dirty=!1},TimelineState.prototype.update=function(e){if(this._setCurrentTime(e)){if(this._frameCount>1){var i=Math.floor(this.currentTime*this._frameRate),n=this._frameIndices[this._timelineData.frameIndicesOffset+i];this._frameIndex!==n&&(this._frameIndex=n,this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex],this._onArriveAtFrame())}else this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData&&(this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5]),this._onArriveAtFrame());(this._isTween||this.dirty)&&this._onUpdateFrame()}},TimelineState.prototype.blend=function(e){},TimelineState}(e.BaseObject);e.TimelineState=i;var n=function(e){function TweenTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(TweenTimelineState,e),TweenTimelineState._getEasingValue=function(e,i,n){var a=i;switch(e){case 3:a=Math.pow(i,2);break;case 4:a=1-Math.pow(1-i,2);break;case 5:a=.5*(1-Math.cos(i*Math.PI))}return(a-i)*n+i},TweenTimelineState._getEasingCurveValue=function(e,i,n,a){if(e<=0)return 0;if(e>=1)return 1;var s=n>0,o=n+1,h=Math.floor(e*o),l=0,c=0;return s?(l=0===h?0:i[a+h-1],c=h===o-1?1e4:i[a+h]):(l=i[a+h-1],c=i[a+h]),1e-4*(l+(c-l)*(e*o-h))},TweenTimelineState.prototype._onClear=function(){e.prototype._onClear.call(this),this._tweenType=0,this._curveCount=0,this._framePosition=0,this._frameDurationR=0,this._tweenEasing=0,this._tweenProgress=0,this._valueScale=1},TweenTimelineState.prototype._onArriveAtFrame=function(){if(this._frameCount>1&&(this._frameIndex!==this._frameCount-1||0===this._animationState.playTimes||this._animationState.currentPlayTimes<this._animationState.playTimes-1))if(this._tweenType=this._frameArray[this._frameOffset+1],this._isTween=0!==this._tweenType,this._isTween?2===this._tweenType?this._curveCount=this._frameArray[this._frameOffset+2]:0!==this._tweenType&&1!==this._tweenType&&(this._tweenEasing=.01*this._frameArray[this._frameOffset+2]):this.dirty=!0,this._framePosition=this._frameArray[this._frameOffset]*this._frameRateR,this._frameIndex===this._frameCount-1)this._frameDurationR=1/(this._animationData.duration-this._framePosition);else{var e=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex+1],i=this._frameArray[e]*this._frameRateR-this._framePosition;this._frameDurationR=i>0?1/i:0}else this.dirty=!0,this._isTween=!1},TweenTimelineState.prototype._onUpdateFrame=function(){this._isTween&&(this.dirty=!0,this._tweenProgress=(this.currentTime-this._framePosition)*this._frameDurationR,2===this._tweenType?this._tweenProgress=TweenTimelineState._getEasingCurveValue(this._tweenProgress,this._frameArray,this._curveCount,this._frameOffset+3):1!==this._tweenType&&(this._tweenProgress=TweenTimelineState._getEasingValue(this._tweenType,this._tweenProgress,this._tweenEasing)))},TweenTimelineState}(i);e.TweenTimelineState=n;var a=function(e){function SingleValueTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(SingleValueTimelineState,e),SingleValueTimelineState.prototype._onClear=function(){e.prototype._onClear.call(this),this._current=0,this._difference=0,this._result=0},SingleValueTimelineState.prototype._onArriveAtFrame=function(){if(e.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var i=this._valueScale,n=this._valueArray,a=this._valueOffset+this._frameValueOffset+this._frameIndex;if(this._isTween){var s=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:a+1;1===i?(this._current=n[a],this._difference=n[s]-this._current):(this._current=n[a]*i,this._difference=n[s]*i-this._current)}else this._result=n[a]*i}else this._result=0},SingleValueTimelineState.prototype._onUpdateFrame=function(){e.prototype._onUpdateFrame.call(this),this._isTween&&(this._result=this._current+this._difference*this._tweenProgress)},SingleValueTimelineState}(n);e.SingleValueTimelineState=a;var o=function(e){function DoubleValueTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(DoubleValueTimelineState,e),DoubleValueTimelineState.prototype._onClear=function(){e.prototype._onClear.call(this),this._currentA=0,this._currentB=0,this._differenceA=0,this._differenceB=0,this._resultA=0,this._resultB=0},DoubleValueTimelineState.prototype._onArriveAtFrame=function(){if(e.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var i=this._valueScale,n=this._valueArray,a=this._valueOffset+this._frameValueOffset+2*this._frameIndex;if(this._isTween){var s=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:a+2;1===i?(this._currentA=n[a],this._currentB=n[a+1],this._differenceA=n[s]-this._currentA,this._differenceB=n[s+1]-this._currentB):(this._currentA=n[a]*i,this._currentB=n[a+1]*i,this._differenceA=n[s]*i-this._currentA,this._differenceB=n[s+1]*i-this._currentB)}else this._resultA=n[a]*i,this._resultB=n[a+1]*i}else this._resultA=0,this._resultB=0},DoubleValueTimelineState.prototype._onUpdateFrame=function(){e.prototype._onUpdateFrame.call(this),this._isTween&&(this._resultA=this._currentA+this._differenceA*this._tweenProgress,this._resultB=this._currentB+this._differenceB*this._tweenProgress)},DoubleValueTimelineState}(n);e.DoubleValueTimelineState=o;var h=function(e){function MutilpleValueTimelineState(){var i=null!==e&&e.apply(this,arguments)||this;return i._rd=[],i}return s(MutilpleValueTimelineState,e),MutilpleValueTimelineState.prototype._onClear=function(){e.prototype._onClear.call(this),this._valueCount=0,this._rd.length=0},MutilpleValueTimelineState.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this);var i=this._valueCount,n=this._rd;if(null!==this._timelineData){var a=this._valueScale,s=this._valueArray,o=this._valueOffset+this._frameValueOffset+this._frameIndex*i;if(this._isTween){var h=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:o+i;if(1===a)for(var l=0;l<i;++l)n[i+l]=s[h+l]-s[o+l];else for(l=0;l<i;++l)n[i+l]=(s[h+l]-s[o+l])*a}else if(1===a)for(l=0;l<i;++l)n[l]=s[o+l];else for(l=0;l<i;++l)n[l]=s[o+l]*a}else for(l=0;l<i;++l)n[l]=0},MutilpleValueTimelineState.prototype._onUpdateFrame=function(){if(e.prototype._onUpdateFrame.call(this),this._isTween){var i=this._valueCount,n=this._valueScale,a=this._tweenProgress,s=this._valueArray,o=this._rd,h=this._valueOffset+this._frameValueOffset+this._frameIndex*i;if(1===n)for(var l=0;l<i;++l)o[l]=s[h+l]+o[i+l]*a;else for(l=0;l<i;++l)o[l]=s[h+l]*n+o[i+l]*a}},MutilpleValueTimelineState}(n);e.MutilpleValueTimelineState=h}(m||(m={})),function(e){var i=function(i){function ActionTimelineState(){return null!==i&&i.apply(this,arguments)||this}return s(ActionTimelineState,i),ActionTimelineState.toString=function(){return"[class dragonBones.ActionTimelineState]"},ActionTimelineState.prototype._onCrossFrame=function(i){var n=this._armature.eventDispatcher;if(this._animationState.actionEnabled)for(var a=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+i],s=this._frameArray[a+1],o=this._animationData.parent.actions,h=0;h<s;++h){var l=o[this._frameArray[a+2+h]];if(0===l.type){(c=e.BaseObject.borrowObject(e.EventObject)).time=this._frameArray[a]/this._frameRate,c.animationState=this._animationState,e.EventObject.actionDataToInstance(l,c,this._armature),this._armature._bufferAction(c,!0)}else{var c,m=10===l.type?e.EventObject.FRAME_EVENT:e.EventObject.SOUND_EVENT;if(11===l.type||n.hasDBEventListener(m))(c=e.BaseObject.borrowObject(e.EventObject)).time=this._frameArray[a]/this._frameRate,c.animationState=this._animationState,e.EventObject.actionDataToInstance(l,c,this._armature),this._armature._dragonBones.bufferEvent(c)}}},ActionTimelineState.prototype._onArriveAtFrame=function(){},ActionTimelineState.prototype._onUpdateFrame=function(){},ActionTimelineState.prototype.update=function(i){var n=this.playState,a=this.currentPlayTimes,s=this.currentTime;if(this._setCurrentTime(i)){var o=null===this._animationState._parent&&this._animationState.actionEnabled,h=this._armature.eventDispatcher;if(n<0){if(this.playState===n)return;if(this._animationState.displayControl&&this._animationState.resetToPose&&this._armature._sortZOrder(null,0),o&&h.hasDBEventListener(e.EventObject.START)){var l=e.BaseObject.borrowObject(e.EventObject);l.type=e.EventObject.START,l.armature=this._armature,l.animationState=this._animationState,this._armature._dragonBones.bufferEvent(l)}}var c=this._animationState.timeScale<0,m=null,f=null;if(o&&this.currentPlayTimes!==a&&(h.hasDBEventListener(e.EventObject.LOOP_COMPLETE)&&((m=e.BaseObject.borrowObject(e.EventObject)).type=e.EventObject.LOOP_COMPLETE,m.armature=this._armature,m.animationState=this._animationState),this.playState>0&&h.hasDBEventListener(e.EventObject.COMPLETE)&&((f=e.BaseObject.borrowObject(e.EventObject)).type=e.EventObject.COMPLETE,f.armature=this._armature,f.animationState=this._animationState)),this._frameCount>1){var g=this._timelineData,_=Math.floor(this.currentTime*this._frameRate),T=this._frameIndices[g.frameIndicesOffset+_];if(this._frameIndex!==T){var x=this._frameIndex;if(this._frameIndex=T,null!==this._timelineArray)if(this._frameOffset=this._animationData.frameOffset+this._timelineArray[g.offset+5+this._frameIndex],c){if(x<0){var S=Math.floor(s*this._frameRate);x=this._frameIndices[g.frameIndicesOffset+S],this.currentPlayTimes===a&&x===T&&(x=-1)}for(;x>=0;){var j=this._animationData.frameOffset+this._timelineArray[g.offset+5+x],q=this._frameArray[j]/this._frameRate;if(this._position<=q&&q<=this._position+this._duration&&this._onCrossFrame(x),null!==m&&0===x&&(this._armature._dragonBones.bufferEvent(m),m=null),x>0?x--:x=this._frameCount-1,x===T)break}}else{if(x<0){S=Math.floor(s*this._frameRate);x=this._frameIndices[g.frameIndicesOffset+S];j=this._animationData.frameOffset+this._timelineArray[g.offset+5+x],q=this._frameArray[j]/this._frameRate;this.currentPlayTimes===a&&(s<=q?x>0?x--:x=this._frameCount-1:x===T&&(x=-1))}for(;x>=0;){x<this._frameCount-1?x++:x=0;j=this._animationData.frameOffset+this._timelineArray[g.offset+5+x],q=this._frameArray[j]/this._frameRate;if(this._position<=q&&q<=this._position+this._duration&&this._onCrossFrame(x),null!==m&&0===x&&(this._armature._dragonBones.bufferEvent(m),m=null),x===T)break}}}}else if(this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData)){this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5];q=this._frameArray[this._frameOffset]/this._frameRate;this.currentPlayTimes===a?s<=q&&this._onCrossFrame(this._frameIndex):this._position<=q&&(c||null===m||(this._armature._dragonBones.bufferEvent(m),m=null),this._onCrossFrame(this._frameIndex))}null!==m&&this._armature._dragonBones.bufferEvent(m),null!==f&&this._armature._dragonBones.bufferEvent(f)}},ActionTimelineState.prototype.setCurrentTime=function(e){this._setCurrentTime(e),this._frameIndex=-1},ActionTimelineState}(e.TimelineState);e.ActionTimelineState=i;var n=function(e){function ZOrderTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(ZOrderTimelineState,e),ZOrderTimelineState.toString=function(){return"[class dragonBones.ZOrderTimelineState]"},ZOrderTimelineState.prototype._onArriveAtFrame=function(){this.playState>=0&&(this._frameArray[this._frameOffset+1]>0?this._armature._sortZOrder(this._frameArray,this._frameOffset+2):this._armature._sortZOrder(null,0))},ZOrderTimelineState.prototype._onUpdateFrame=function(){},ZOrderTimelineState}(e.TimelineState);e.ZOrderTimelineState=n;var a=function(i){function BoneAllTimelineState(){return null!==i&&i.apply(this,arguments)||this}return s(BoneAllTimelineState,i),BoneAllTimelineState.toString=function(){return"[class dragonBones.BoneAllTimelineState]"},BoneAllTimelineState.prototype._onArriveAtFrame=function(){i.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._rd[2]=e.Transform.normalizeRadian(this._rd[2]),this._rd[3]=e.Transform.normalizeRadian(this._rd[3])),null===this._timelineData&&(this._rd[4]=1,this._rd[5]=1)},BoneAllTimelineState.prototype.init=function(e,n,a){i.prototype.init.call(this,e,n,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=6,this._valueArray=this._animationData.parent.parent.frameFloatArray},BoneAllTimelineState.prototype.fadeOut=function(){this.dirty=!1,this._rd[2]=e.Transform.normalizeRadian(this._rd[2]),this._rd[3]=e.Transform.normalizeRadian(this._rd[3])},BoneAllTimelineState.prototype.blend=function(e){var i=this._armature.armatureData.scale,n=this._rd,a=this.target,s=a.target,o=a.blendWeight,h=s.animationPose;a.dirty>1?(h.x+=n[0]*o*i,h.y+=n[1]*o*i,h.rotation+=n[2]*o,h.skew+=n[3]*o,h.scaleX+=(n[4]-1)*o,h.scaleY+=(n[5]-1)*o):(h.x=n[0]*o*i,h.y=n[1]*o*i,h.rotation=n[2]*o,h.skew=n[3]*o,h.scaleX=(n[4]-1)*o+1,h.scaleY=(n[5]-1)*o+1),(e||this.dirty)&&(this.dirty=!1,s._transformDirty=!0)},BoneAllTimelineState}(e.MutilpleValueTimelineState);e.BoneAllTimelineState=a;var o=function(e){function BoneTranslateTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(BoneTranslateTimelineState,e),BoneTranslateTimelineState.toString=function(){return"[class dragonBones.BoneTranslateTimelineState]"},BoneTranslateTimelineState.prototype.init=function(i,n,a){e.prototype.init.call(this,i,n,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=this._animationData.parent.parent.frameFloatArray},BoneTranslateTimelineState.prototype.blend=function(e){var i=this.target,n=i.target,a=i.blendWeight,s=n.animationPose;i.dirty>1?(s.x+=this._resultA*a,s.y+=this._resultB*a):1!==a?(s.x=this._resultA*a,s.y=this._resultB*a):(s.x=this._resultA,s.y=this._resultB),(e||this.dirty)&&(this.dirty=!1,n._transformDirty=!0)},BoneTranslateTimelineState}(e.DoubleValueTimelineState);e.BoneTranslateTimelineState=o;var h=function(i){function BoneRotateTimelineState(){return null!==i&&i.apply(this,arguments)||this}return s(BoneRotateTimelineState,i),BoneRotateTimelineState.toString=function(){return"[class dragonBones.BoneRotateTimelineState]"},BoneRotateTimelineState.prototype._onArriveAtFrame=function(){i.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._differenceA=e.Transform.normalizeRadian(this._differenceA),this._differenceB=e.Transform.normalizeRadian(this._differenceB))},BoneRotateTimelineState.prototype.init=function(e,n,a){i.prototype.init.call(this,e,n,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},BoneRotateTimelineState.prototype.fadeOut=function(){this.dirty=!1,this._resultA=e.Transform.normalizeRadian(this._resultA),this._resultB=e.Transform.normalizeRadian(this._resultB)},BoneRotateTimelineState.prototype.blend=function(e){var i=this.target,n=i.target,a=i.blendWeight,s=n.animationPose;i.dirty>1?(s.rotation+=this._resultA*a,s.skew+=this._resultB*a):1!==a?(s.rotation=this._resultA*a,s.skew=this._resultB*a):(s.rotation=this._resultA,s.skew=this._resultB),(e||this.dirty)&&(this.dirty=!1,n._transformDirty=!0)},BoneRotateTimelineState}(e.DoubleValueTimelineState);e.BoneRotateTimelineState=h;var l=function(e){function BoneScaleTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(BoneScaleTimelineState,e),BoneScaleTimelineState.toString=function(){return"[class dragonBones.BoneScaleTimelineState]"},BoneScaleTimelineState.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._resultA=1,this._resultB=1)},BoneScaleTimelineState.prototype.init=function(i,n,a){e.prototype.init.call(this,i,n,a),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},BoneScaleTimelineState.prototype.blend=function(e){var i=this.target,n=i.target,a=i.blendWeight,s=n.animationPose;i.dirty>1?(s.scaleX+=(this._resultA-1)*a,s.scaleY+=(this._resultB-1)*a):1!==a?(s.scaleX=(this._resultA-1)*a+1,s.scaleY=(this._resultB-1)*a+1):(s.scaleX=this._resultA,s.scaleY=this._resultB),(e||this.dirty)&&(this.dirty=!1,n._transformDirty=!0)},BoneScaleTimelineState}(e.DoubleValueTimelineState);e.BoneScaleTimelineState=l;var c=function(e){function SurfaceTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(SurfaceTimelineState,e),SurfaceTimelineState.toString=function(){return"[class dragonBones.SurfaceTimelineState]"},SurfaceTimelineState.prototype._onClear=function(){e.prototype._onClear.call(this),this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},SurfaceTimelineState.prototype.init=function(i,n,a){if(e.prototype.init.call(this,i,n,a),null!==this._timelineData){var s=this._animationData.parent.parent,o=s.frameIntArray,h=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3];this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=o[h+2],this._deformCount=o[h+1],this._deformOffset=o[h+3],this._sameValueOffset=o[h+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=s.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.target.target._deformVertices.length},SurfaceTimelineState.prototype.blend=function(e){var i=this.target,n=i.target,a=i.blendWeight,s=n._deformVertices,o=this._valueArray;if(null!==o)for(var h=this._valueCount,l=this._deformOffset,c=this._sameValueOffset,m=this._rd,f=0;f<this._deformCount;++f){var g=0;g=f<l?o[c+f]:f<l+h?m[f-l]:o[c+f-h],i.dirty>1?s[f]+=g*a:s[f]=g*a}else if(1===i.dirty)for(f=0;f<this._deformCount;++f)s[f]=0;(e||this.dirty)&&(this.dirty=!1,n._transformDirty=!0)},SurfaceTimelineState}(e.MutilpleValueTimelineState);e.SurfaceTimelineState=c;var m=function(e){function AlphaTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(AlphaTimelineState,e),AlphaTimelineState.toString=function(){return"[class dragonBones.AlphaTimelineState]"},AlphaTimelineState.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._result=1)},AlphaTimelineState.prototype.init=function(i,n,a){e.prototype.init.call(this,i,n,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},AlphaTimelineState.prototype.blend=function(e){var i=this.target,n=i.target,a=i.blendWeight;i.dirty>1?(n._alpha+=this._result*a,n._alpha>1&&(n._alpha=1)):n._alpha=this._result*a,(e||this.dirty)&&(this.dirty=!1,this._armature._alphaDirty=!0)},AlphaTimelineState}(e.SingleValueTimelineState);e.AlphaTimelineState=m;var f=function(e){function SlotDisplayTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(SlotDisplayTimelineState,e),SlotDisplayTimelineState.toString=function(){return"[class dragonBones.SlotDisplayTimelineState]"},SlotDisplayTimelineState.prototype._onArriveAtFrame=function(){if(this.playState>=0){var e=this.target,i=null!==this._timelineData?this._frameArray[this._frameOffset+1]:e._slotData.displayIndex;e.displayIndex!==i&&e._setDisplayIndex(i,!0)}},SlotDisplayTimelineState.prototype._onUpdateFrame=function(){},SlotDisplayTimelineState}(e.TimelineState);e.SlotDisplayTimelineState=f;var g=function(e){function SlotColorTimelineState(){var i=null!==e&&e.apply(this,arguments)||this;return i._current=[0,0,0,0,0,0,0,0],i._difference=[0,0,0,0,0,0,0,0],i._result=[0,0,0,0,0,0,0,0],i}return s(SlotColorTimelineState,e),SlotColorTimelineState.toString=function(){return"[class dragonBones.SlotColorTimelineState]"},SlotColorTimelineState.prototype._onArriveAtFrame=function(){if(e.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var i=this._animationData.parent.parent,n=i.colorArray,a=i.frameIntArray,s=this._animationData.frameIntOffset+this._frameValueOffset+this._frameIndex,o=a[s];o<0&&(o+=65536),this._isTween?(this._current[0]=n[o++],this._current[1]=n[o++],this._current[2]=n[o++],this._current[3]=n[o++],this._current[4]=n[o++],this._current[5]=n[o++],this._current[6]=n[o++],this._current[7]=n[o++],(o=this._frameIndex===this._frameCount-1?a[this._animationData.frameIntOffset+this._frameValueOffset]:a[s+1])<0&&(o+=65536),this._difference[0]=n[o++]-this._current[0],this._difference[1]=n[o++]-this._current[1],this._difference[2]=n[o++]-this._current[2],this._difference[3]=n[o++]-this._current[3],this._difference[4]=n[o++]-this._current[4],this._difference[5]=n[o++]-this._current[5],this._difference[6]=n[o++]-this._current[6],this._difference[7]=n[o++]-this._current[7]):(this._result[0]=.01*n[o++],this._result[1]=.01*n[o++],this._result[2]=.01*n[o++],this._result[3]=.01*n[o++],this._result[4]=n[o++],this._result[5]=n[o++],this._result[6]=n[o++],this._result[7]=n[o++])}else{var h=this.target.slotData.color;this._result[0]=h.alphaMultiplier,this._result[1]=h.redMultiplier,this._result[2]=h.greenMultiplier,this._result[3]=h.blueMultiplier,this._result[4]=h.alphaOffset,this._result[5]=h.redOffset,this._result[6]=h.greenOffset,this._result[7]=h.blueOffset}},SlotColorTimelineState.prototype._onUpdateFrame=function(){e.prototype._onUpdateFrame.call(this),this._isTween&&(this._result[0]=.01*(this._current[0]+this._difference[0]*this._tweenProgress),this._result[1]=.01*(this._current[1]+this._difference[1]*this._tweenProgress),this._result[2]=.01*(this._current[2]+this._difference[2]*this._tweenProgress),this._result[3]=.01*(this._current[3]+this._difference[3]*this._tweenProgress),this._result[4]=this._current[4]+this._difference[4]*this._tweenProgress,this._result[5]=this._current[5]+this._difference[5]*this._tweenProgress,this._result[6]=this._current[6]+this._difference[6]*this._tweenProgress,this._result[7]=this._current[7]+this._difference[7]*this._tweenProgress)},SlotColorTimelineState.prototype.fadeOut=function(){this._isTween=!1},SlotColorTimelineState.prototype.update=function(i){if(e.prototype.update.call(this,i),this._isTween||this.dirty){var n=this.target,a=n._colorTransform;if(0!==this._animationState._fadeState||0!==this._animationState._subFadeState){if(a.alphaMultiplier!==this._result[0]||a.redMultiplier!==this._result[1]||a.greenMultiplier!==this._result[2]||a.blueMultiplier!==this._result[3]||a.alphaOffset!==this._result[4]||a.redOffset!==this._result[5]||a.greenOffset!==this._result[6]||a.blueOffset!==this._result[7]){var s=Math.pow(this._animationState._fadeProgress,4);a.alphaMultiplier+=(this._result[0]-a.alphaMultiplier)*s,a.redMultiplier+=(this._result[1]-a.redMultiplier)*s,a.greenMultiplier+=(this._result[2]-a.greenMultiplier)*s,a.blueMultiplier+=(this._result[3]-a.blueMultiplier)*s,a.alphaOffset+=(this._result[4]-a.alphaOffset)*s,a.redOffset+=(this._result[5]-a.redOffset)*s,a.greenOffset+=(this._result[6]-a.greenOffset)*s,a.blueOffset+=(this._result[7]-a.blueOffset)*s,n._colorDirty=!0}}else this.dirty&&(this.dirty=!1,a.alphaMultiplier===this._result[0]&&a.redMultiplier===this._result[1]&&a.greenMultiplier===this._result[2]&&a.blueMultiplier===this._result[3]&&a.alphaOffset===this._result[4]&&a.redOffset===this._result[5]&&a.greenOffset===this._result[6]&&a.blueOffset===this._result[7]||(a.alphaMultiplier=this._result[0],a.redMultiplier=this._result[1],a.greenMultiplier=this._result[2],a.blueMultiplier=this._result[3],a.alphaOffset=this._result[4],a.redOffset=this._result[5],a.greenOffset=this._result[6],a.blueOffset=this._result[7],n._colorDirty=!0))}},SlotColorTimelineState}(e.TweenTimelineState);e.SlotColorTimelineState=g;var _=function(e){function SlotZIndexTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(SlotZIndexTimelineState,e),SlotZIndexTimelineState.toString=function(){return"[class dragonBones.SlotZIndexTimelineState]"},SlotZIndexTimelineState.prototype._onArriveAtFrame=function(){if(e.prototype._onArriveAtFrame.call(this),null===this._timelineData){var i=this.target.target;this._result=i.slotData.zIndex}},SlotZIndexTimelineState.prototype.init=function(i,n,a){e.prototype.init.call(this,i,n,a),this._valueOffset=this._animationData.frameIntOffset,this._valueArray=this._animationData.parent.parent.frameIntArray},SlotZIndexTimelineState.prototype.blend=function(e){var i=this.target,n=i.target,a=i.blendWeight;i.dirty>1?n._zIndex+=this._result*a:n._zIndex=this._result*a,(e||this.dirty)&&(this.dirty=!1,this._armature._zIndexDirty=!0)},SlotZIndexTimelineState}(e.SingleValueTimelineState);e.SlotZIndexTimelineState=_;var T=function(e){function DeformTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(DeformTimelineState,e),DeformTimelineState.toString=function(){return"[class dragonBones.DeformTimelineState]"},DeformTimelineState.prototype._onClear=function(){e.prototype._onClear.call(this),this.displayFrame=null,this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},DeformTimelineState.prototype.init=function(i,n,a){if(e.prototype.init.call(this,i,n,a),null!==this._timelineData){var s=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3],o=this._animationData.parent.parent,h=o.frameIntArray;this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=h[s+2],this._deformCount=h[s+1],this._deformOffset=h[s+3],this._sameValueOffset=h[s+4],this._sameValueOffset<0&&(this._sameValueOffset+=65536),this._sameValueOffset+=this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=o.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.displayFrame.deformVertices.length},DeformTimelineState.prototype.blend=function(e){var i=this.target,n=i.target,a=i.blendWeight,s=this.displayFrame.deformVertices,o=this._valueArray;if(null!==o)for(var h=this._valueCount,l=this._deformOffset,c=this._sameValueOffset,m=this._rd,f=0;f<this._deformCount;++f){var g=0;g=f<l?o[c+f]:f<l+h?m[f-l]:o[c+f-h],i.dirty>1?s[f]+=g*a:s[f]=g*a}else if(1===i.dirty)for(f=0;f<this._deformCount;++f)s[f]=0;(e||this.dirty)&&(this.dirty=!1,n._geometryData===this.displayFrame.getGeometryData()&&(n._verticesDirty=!0))},DeformTimelineState}(e.MutilpleValueTimelineState);e.DeformTimelineState=T;var x=function(e){function IKConstraintTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(IKConstraintTimelineState,e),IKConstraintTimelineState.toString=function(){return"[class dragonBones.IKConstraintTimelineState]"},IKConstraintTimelineState.prototype._onUpdateFrame=function(){e.prototype._onUpdateFrame.call(this);var i=this.target;if(null!==this._timelineData)i._bendPositive=this._currentA>0,i._weight=this._currentB;else{var n=i._constraintData;i._bendPositive=n.bendPositive,i._weight=n.weight}i.invalidUpdate(),this.dirty=!1},IKConstraintTimelineState.prototype.init=function(i,n,a){e.prototype.init.call(this,i,n,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},IKConstraintTimelineState}(e.DoubleValueTimelineState);e.IKConstraintTimelineState=x;var S=function(e){function AnimationProgressTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(AnimationProgressTimelineState,e),AnimationProgressTimelineState.toString=function(){return"[class dragonBones.AnimationProgressTimelineState]"},AnimationProgressTimelineState.prototype._onUpdateFrame=function(){e.prototype._onUpdateFrame.call(this);var i=this.target;null!==i._parent&&(i.currentTime=this._result*i.totalTime),this.dirty=!1},AnimationProgressTimelineState.prototype.init=function(i,n,a){e.prototype.init.call(this,i,n,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},AnimationProgressTimelineState}(e.SingleValueTimelineState);e.AnimationProgressTimelineState=S;var j=function(e){function AnimationWeightTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(AnimationWeightTimelineState,e),AnimationWeightTimelineState.toString=function(){return"[class dragonBones.AnimationWeightTimelineState]"},AnimationWeightTimelineState.prototype._onUpdateFrame=function(){e.prototype._onUpdateFrame.call(this);var i=this.target;null!==i._parent&&(i.weight=this._result),this.dirty=!1},AnimationWeightTimelineState.prototype.init=function(i,n,a){e.prototype.init.call(this,i,n,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},AnimationWeightTimelineState}(e.SingleValueTimelineState);e.AnimationWeightTimelineState=j;var q=function(e){function AnimationParametersTimelineState(){return null!==e&&e.apply(this,arguments)||this}return s(AnimationParametersTimelineState,e),AnimationParametersTimelineState.toString=function(){return"[class dragonBones.AnimationParametersTimelineState]"},AnimationParametersTimelineState.prototype._onUpdateFrame=function(){e.prototype._onUpdateFrame.call(this);var i=this.target;null!==i._parent&&(i.parameterX=this._resultA,i.parameterY=this._resultB),this.dirty=!1},AnimationParametersTimelineState.prototype.init=function(i,n,a){e.prototype.init.call(this,i,n,a),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},AnimationParametersTimelineState}(e.DoubleValueTimelineState);e.AnimationParametersTimelineState=q}(m||(m={})),function(e){var i=function(e){function EventObject(){return null!==e&&e.apply(this,arguments)||this}return s(EventObject,e),EventObject.actionDataToInstance=function(e,i,n){0===e.type?i.type=EventObject.FRAME_EVENT:i.type=10===e.type?EventObject.FRAME_EVENT:EventObject.SOUND_EVENT,i.name=e.name,i.armature=n,i.actionData=e,i.data=e.data,null!==e.bone&&(i.bone=n.getBone(e.bone.name)),null!==e.slot&&(i.slot=n.getSlot(e.slot.name))},EventObject.toString=function(){return"[class dragonBones.EventObject]"},EventObject.prototype._onClear=function(){this.time=0,this.type="",this.name="",this.armature=null,this.bone=null,this.slot=null,this.animationState=null,this.actionData=null,this.data=null},EventObject.START="start",EventObject.LOOP_COMPLETE="loopComplete",EventObject.COMPLETE="complete",EventObject.FADE_IN="fadeIn",EventObject.FADE_IN_COMPLETE="fadeInComplete",EventObject.FADE_OUT="fadeOut",EventObject.FADE_OUT_COMPLETE="fadeOutComplete",EventObject.FRAME_EVENT="frameEvent",EventObject.SOUND_EVENT="soundEvent",EventObject}(e.BaseObject);e.EventObject=i}(m||(m={})),function(e){var i=function(){function DataParser(){}return DataParser._getArmatureType=function(e){switch(e.toLowerCase()){case"stage":return 2;case"armature":return 0;case"movieclip":return 1;default:return 0}},DataParser._getBoneType=function(e){switch(e.toLowerCase()){case"bone":return 0;case"surface":return 1;default:return 0}},DataParser._getPositionMode=function(e){switch(e.toLocaleLowerCase()){case"percent":return 1;case"fixed":return 0;default:return 1}},DataParser._getSpacingMode=function(e){switch(e.toLocaleLowerCase()){case"length":return 0;case"percent":return 2;case"fixed":return 1;default:return 0}},DataParser._getRotateMode=function(e){switch(e.toLocaleLowerCase()){case"tangent":return 0;case"chain":return 1;case"chainscale":return 2;default:return 0}},DataParser._getDisplayType=function(e){switch(e.toLowerCase()){case"image":return 0;case"mesh":return 2;case"armature":return 1;case"boundingbox":return 3;case"path":return 4;default:return 0}},DataParser._getBoundingBoxType=function(e){switch(e.toLowerCase()){case"rectangle":return 0;case"ellipse":return 1;case"polygon":return 2;default:return 0}},DataParser._getBlendMode=function(e){switch(e.toLowerCase()){case"normal":return 0;case"add":return 1;case"alpha":return 2;case"darken":return 3;case"difference":return 4;case"erase":return 5;case"hardlight":return 6;case"invert":return 7;case"layer":return 8;case"lighten":return 9;case"multiply":return 10;case"overlay":return 11;case"screen":return 12;case"subtract":return 13;default:return 0}},DataParser._getAnimationBlendType=function(e){switch(e.toLowerCase()){case"none":return 0;case"1d":return 1;default:return 0}},DataParser._getActionType=function(e){switch(e.toLowerCase()){case"play":return 0;case"frame":return 10;case"sound":return 11;default:return 0}},DataParser.DATA_VERSION_2_3="2.3",DataParser.DATA_VERSION_3_0="3.0",DataParser.DATA_VERSION_4_0="4.0",DataParser.DATA_VERSION_4_5="4.5",DataParser.DATA_VERSION_5_0="5.0",DataParser.DATA_VERSION_5_5="5.5",DataParser.DATA_VERSION_5_6="5.6",DataParser.DATA_VERSION=DataParser.DATA_VERSION_5_6,DataParser.DATA_VERSIONS=[DataParser.DATA_VERSION_4_0,DataParser.DATA_VERSION_4_5,DataParser.DATA_VERSION_5_0,DataParser.DATA_VERSION_5_5,DataParser.DATA_VERSION_5_6],DataParser.TEXTURE_ATLAS="textureAtlas",DataParser.SUB_TEXTURE="SubTexture",DataParser.FORMAT="format",DataParser.IMAGE_PATH="imagePath",DataParser.WIDTH="width",DataParser.HEIGHT="height",DataParser.ROTATED="rotated",DataParser.FRAME_X="frameX",DataParser.FRAME_Y="frameY",DataParser.FRAME_WIDTH="frameWidth",DataParser.FRAME_HEIGHT="frameHeight",DataParser.DRADON_BONES="dragonBones",DataParser.USER_DATA="userData",DataParser.ARMATURE="armature",DataParser.CANVAS="canvas",DataParser.BONE="bone",DataParser.SURFACE="surface",DataParser.SLOT="slot",DataParser.CONSTRAINT="constraint",DataParser.SKIN="skin",DataParser.DISPLAY="display",DataParser.FRAME="frame",DataParser.IK="ik",DataParser.PATH_CONSTRAINT="path",DataParser.ANIMATION="animation",DataParser.TIMELINE="timeline",DataParser.FFD="ffd",DataParser.TRANSLATE_FRAME="translateFrame",DataParser.ROTATE_FRAME="rotateFrame",DataParser.SCALE_FRAME="scaleFrame",DataParser.DISPLAY_FRAME="displayFrame",DataParser.COLOR_FRAME="colorFrame",DataParser.DEFAULT_ACTIONS="defaultActions",DataParser.ACTIONS="actions",DataParser.EVENTS="events",DataParser.INTS="ints",DataParser.FLOATS="floats",DataParser.STRINGS="strings",DataParser.TRANSFORM="transform",DataParser.PIVOT="pivot",DataParser.AABB="aabb",DataParser.COLOR="color",DataParser.VERSION="version",DataParser.COMPATIBLE_VERSION="compatibleVersion",DataParser.FRAME_RATE="frameRate",DataParser.TYPE="type",DataParser.SUB_TYPE="subType",DataParser.NAME="name",DataParser.PARENT="parent",DataParser.TARGET="target",DataParser.STAGE="stage",DataParser.SHARE="share",DataParser.PATH="path",DataParser.LENGTH="length",DataParser.DISPLAY_INDEX="displayIndex",DataParser.Z_ORDER="zOrder",DataParser.Z_INDEX="zIndex",DataParser.BLEND_MODE="blendMode",DataParser.INHERIT_TRANSLATION="inheritTranslation",DataParser.INHERIT_ROTATION="inheritRotation",DataParser.INHERIT_SCALE="inheritScale",DataParser.INHERIT_REFLECTION="inheritReflection",DataParser.INHERIT_ANIMATION="inheritAnimation",DataParser.INHERIT_DEFORM="inheritDeform",DataParser.SEGMENT_X="segmentX",DataParser.SEGMENT_Y="segmentY",DataParser.BEND_POSITIVE="bendPositive",DataParser.CHAIN="chain",DataParser.WEIGHT="weight",DataParser.BLEND_TYPE="blendType",DataParser.FADE_IN_TIME="fadeInTime",DataParser.PLAY_TIMES="playTimes",DataParser.SCALE="scale",DataParser.OFFSET="offset",DataParser.POSITION="position",DataParser.DURATION="duration",DataParser.TWEEN_EASING="tweenEasing",DataParser.TWEEN_ROTATE="tweenRotate",DataParser.TWEEN_SCALE="tweenScale",DataParser.CLOCK_WISE="clockwise",DataParser.CURVE="curve",DataParser.SOUND="sound",DataParser.EVENT="event",DataParser.ACTION="action",DataParser.X="x",DataParser.Y="y",DataParser.SKEW_X="skX",DataParser.SKEW_Y="skY",DataParser.SCALE_X="scX",DataParser.SCALE_Y="scY",DataParser.VALUE="value",DataParser.ROTATE="rotate",DataParser.SKEW="skew",DataParser.ALPHA="alpha",DataParser.ALPHA_OFFSET="aO",DataParser.RED_OFFSET="rO",DataParser.GREEN_OFFSET="gO",DataParser.BLUE_OFFSET="bO",DataParser.ALPHA_MULTIPLIER="aM",DataParser.RED_MULTIPLIER="rM",DataParser.GREEN_MULTIPLIER="gM",DataParser.BLUE_MULTIPLIER="bM",DataParser.UVS="uvs",DataParser.VERTICES="vertices",DataParser.TRIANGLES="triangles",DataParser.WEIGHTS="weights",DataParser.SLOT_POSE="slotPose",DataParser.BONE_POSE="bonePose",DataParser.BONES="bones",DataParser.POSITION_MODE="positionMode",DataParser.SPACING_MODE="spacingMode",DataParser.ROTATE_MODE="rotateMode",DataParser.SPACING="spacing",DataParser.ROTATE_OFFSET="rotateOffset",DataParser.ROTATE_MIX="rotateMix",DataParser.TRANSLATE_MIX="translateMix",DataParser.TARGET_DISPLAY="targetDisplay",DataParser.CLOSED="closed",DataParser.CONSTANT_SPEED="constantSpeed",DataParser.VERTEX_COUNT="vertexCount",DataParser.LENGTHS="lengths",DataParser.GOTO_AND_PLAY="gotoAndPlay",DataParser.DEFAULT_NAME="default",DataParser}();e.DataParser=i}(m||(m={})),function(e){var i=function(i){function ObjectDataParser(){var n=null!==i&&i.apply(this,arguments)||this;return n._rawTextureAtlasIndex=0,n._rawBones=[],n._data=null,n._armature=null,n._bone=null,n._geometry=null,n._slot=null,n._skin=null,n._mesh=null,n._animation=null,n._timeline=null,n._rawTextureAtlases=null,n._frameValueType=0,n._defaultColorOffset=-1,n._prevClockwise=0,n._prevRotation=0,n._frameDefaultValue=0,n._frameValueScale=1,n._helpMatrixA=new e.Matrix,n._helpMatrixB=new e.Matrix,n._helpTransform=new e.Transform,n._helpColorTransform=new e.ColorTransform,n._helpPoint=new e.Point,n._helpArray=[],n._intArray=[],n._floatArray=[],n._frameIntArray=[],n._frameFloatArray=[],n._frameArray=[],n._timelineArray=[],n._colorArray=[],n._cacheRawMeshes=[],n._cacheMeshes=[],n._actionFrames=[],n._weightSlotPose={},n._weightBonePoses={},n._cacheBones={},n._slotChildActions={},n}return s(ObjectDataParser,i),ObjectDataParser._getBoolean=function(e,i,n){if(i in e){var a=e[i],s=typeof a;if("boolean"===s)return a;if("string"!==s)return!!a;switch(a){case"0":case"NaN":case"":case"false":case"null":case"undefined":return!1;default:return!0}}return n},ObjectDataParser._getNumber=function(e,i,n){if(i in e){var a=e[i];return null===a||"NaN"===a?n:+a||0}return n},ObjectDataParser._getString=function(e,i,n){if(i in e){var a=e[i];return"string"===typeof a?a:String(a)}return n},ObjectDataParser.prototype._getCurvePoint=function(e,i,n,a,s,o,h,l,c,m){var f=1-c,g=f*f,_=c*c,T=f*g,x=3*c*g,S=3*f*_,j=c*_;m.x=T*e+x*n+S*s+j*h,m.y=T*i+x*a+S*o+j*l},ObjectDataParser.prototype._samplingEasingCurve=function(e,i){var n=e.length;if(n%3==1){for(var a=-2,s=0,o=i.length;s<o;++s){for(var h=(s+1)/(o+1);(a+6<n?e[a+6]:1)<h;)a+=6;for(var l=a>=0&&a+6<n,c=l?e[a]:0,m=l?e[a+1]:0,f=e[a+2],g=e[a+3],_=e[a+4],T=e[a+5],x=l?e[a+6]:1,S=l?e[a+7]:1,j=0,q=1;q-j>1e-4;){var Y=.5*(q+j);this._getCurvePoint(c,m,f,g,_,T,x,S,Y,this._helpPoint),h-this._helpPoint.x>0?j=Y:q=Y}i[s]=this._helpPoint.y}return!0}for(a=0,s=0,o=i.length;s<o;++s){for(h=(s+1)/(o+1);e[a+6]<h;)a+=6;for(c=e[a],m=e[a+1],f=e[a+2],g=e[a+3],_=e[a+4],T=e[a+5],x=e[a+6],S=e[a+7],j=0,q=1;q-j>1e-4;){Y=.5*(q+j);this._getCurvePoint(c,m,f,g,_,T,x,S,Y,this._helpPoint),h-this._helpPoint.x>0?j=Y:q=Y}i[s]=this._helpPoint.y}return!1},ObjectDataParser.prototype._parseActionDataInFrame=function(i,n,a,s){e.DataParser.EVENT in i&&this._mergeActionFrame(i[e.DataParser.EVENT],n,10,a,s),e.DataParser.SOUND in i&&this._mergeActionFrame(i[e.DataParser.SOUND],n,11,a,s),e.DataParser.ACTION in i&&this._mergeActionFrame(i[e.DataParser.ACTION],n,0,a,s),e.DataParser.EVENTS in i&&this._mergeActionFrame(i[e.DataParser.EVENTS],n,10,a,s),e.DataParser.ACTIONS in i&&this._mergeActionFrame(i[e.DataParser.ACTIONS],n,0,a,s)},ObjectDataParser.prototype._mergeActionFrame=function(e,i,a,s,o){for(var h=this._armature.actions.length,l=this._parseActionData(e,a,s,o),c=0,m=null,f=0,g=l;f<g.length;f++){var _=g[f];this._armature.addAction(_,!1)}0===this._actionFrames.length&&((m=new n).frameStart=0,this._actionFrames.push(m),m=null);for(var T=0,x=this._actionFrames;T<x.length;T++){var S=x[T];if(S.frameStart===i){m=S;break}if(S.frameStart>i)break;c++}null===m&&((m=new n).frameStart=i,this._actionFrames.splice(c,0,m));for(var j=0;j<l.length;++j)m.actions.push(h+j)},ObjectDataParser.prototype._parseArmature=function(i,n){var a=e.BaseObject.borrowObject(e.ArmatureData);if(a.name=ObjectDataParser._getString(i,e.DataParser.NAME,""),a.frameRate=ObjectDataParser._getNumber(i,e.DataParser.FRAME_RATE,this._data.frameRate),a.scale=n,e.DataParser.TYPE in i&&"string"==typeof i[e.DataParser.TYPE]?a.type=e.DataParser._getArmatureType(i[e.DataParser.TYPE]):a.type=ObjectDataParser._getNumber(i,e.DataParser.TYPE,0),0===a.frameRate&&(a.frameRate=24),this._armature=a,e.DataParser.CANVAS in i){var s=i[e.DataParser.CANVAS],o=e.BaseObject.borrowObject(e.CanvasData);e.DataParser.COLOR in s?o.hasBackground=!0:o.hasBackground=!1,o.color=ObjectDataParser._getNumber(s,e.DataParser.COLOR,0),o.x=ObjectDataParser._getNumber(s,e.DataParser.X,0)*a.scale,o.y=ObjectDataParser._getNumber(s,e.DataParser.Y,0)*a.scale,o.width=ObjectDataParser._getNumber(s,e.DataParser.WIDTH,0)*a.scale,o.height=ObjectDataParser._getNumber(s,e.DataParser.HEIGHT,0)*a.scale,a.canvas=o}if(e.DataParser.AABB in i){var h=i[e.DataParser.AABB];a.aabb.x=ObjectDataParser._getNumber(h,e.DataParser.X,0)*a.scale,a.aabb.y=ObjectDataParser._getNumber(h,e.DataParser.Y,0)*a.scale,a.aabb.width=ObjectDataParser._getNumber(h,e.DataParser.WIDTH,0)*a.scale,a.aabb.height=ObjectDataParser._getNumber(h,e.DataParser.HEIGHT,0)*a.scale}if(e.DataParser.BONE in i)for(var l=0,c=i[e.DataParser.BONE];l<c.length;l++){var m=c[l],f=ObjectDataParser._getString(m,e.DataParser.PARENT,""),g=this._parseBone(m);if(f.length>0){var _=a.getBone(f);null!==_?g.parent=_:(f in this._cacheBones||(this._cacheBones[f]=[]),this._cacheBones[f].push(g))}if(g.name in this._cacheBones){for(var T=0,x=this._cacheBones[g.name];T<x.length;T++){x[T].parent=g}delete this._cacheBones[g.name]}a.addBone(g),this._rawBones.push(g)}if(e.DataParser.IK in i)for(var S=0,j=i[e.DataParser.IK];S<j.length;S++){var q=j[S];(at=this._parseIKConstraint(q))&&a.addConstraint(at)}if(a.sortBones(),e.DataParser.SLOT in i)for(var Y=0,X=0,Z=i[e.DataParser.SLOT];X<Z.length;X++){var $=Z[X];a.addSlot(this._parseSlot($,Y++))}if(e.DataParser.SKIN in i)for(var tt=0,et=i[e.DataParser.SKIN];tt<et.length;tt++){var it=et[tt];a.addSkin(this._parseSkin(it))}if(e.DataParser.PATH_CONSTRAINT in i)for(var nt=0,rt=i[e.DataParser.PATH_CONSTRAINT];nt<rt.length;nt++){var at,st=rt[nt];(at=this._parsePathConstraint(st))&&a.addConstraint(at)}for(var ot=0,ht=this._cacheRawMeshes.length;ot<ht;++ot){var lt=this._cacheRawMeshes[ot],ct=ObjectDataParser._getString(lt,e.DataParser.SHARE,"");if(0!==ct.length){var pt=ObjectDataParser._getString(lt,e.DataParser.SKIN,e.DataParser.DEFAULT_NAME);0===pt.length&&(pt=e.DataParser.DEFAULT_NAME);var ut=a.getMesh(pt,"",ct);if(null!==ut)this._cacheMeshes[ot].geometry.shareFrom(ut.geometry)}}if(e.DataParser.ANIMATION in i)for(var dt=0,mt=i[e.DataParser.ANIMATION];dt<mt.length;dt++){var ft=mt[dt],yt=this._parseAnimation(ft);a.addAnimation(yt)}if(e.DataParser.DEFAULT_ACTIONS in i)for(var gt=0,Pt=this._parseActionData(i[e.DataParser.DEFAULT_ACTIONS],0,null,null);gt<Pt.length;gt++){var _t=Pt[gt];if(a.addAction(_t,!0),0===_t.type)null!==(yt=a.getAnimation(_t.name))&&(a.defaultAnimation=yt)}if(e.DataParser.ACTIONS in i)for(var vt=0,bt=this._parseActionData(i[e.DataParser.ACTIONS],0,null,null);vt<bt.length;vt++){_t=bt[vt];a.addAction(_t,!1)}for(var Tt in this._rawBones.length=0,this._cacheRawMeshes.length=0,this._cacheMeshes.length=0,this._armature=null,this._weightSlotPose)delete this._weightSlotPose[Tt];for(var Tt in this._weightBonePoses)delete this._weightBonePoses[Tt];for(var Tt in this._cacheBones)delete this._cacheBones[Tt];for(var Tt in this._slotChildActions)delete this._slotChildActions[Tt];return a},ObjectDataParser.prototype._parseBone=function(i){if(0===(e.DataParser.TYPE in i&&"string"==typeof i[e.DataParser.TYPE]?e.DataParser._getBoneType(i[e.DataParser.TYPE]):ObjectDataParser._getNumber(i,e.DataParser.TYPE,0))){var n=this._armature.scale,a=e.BaseObject.borrowObject(e.BoneData);return a.inheritTranslation=ObjectDataParser._getBoolean(i,e.DataParser.INHERIT_TRANSLATION,!0),a.inheritRotation=ObjectDataParser._getBoolean(i,e.DataParser.INHERIT_ROTATION,!0),a.inheritScale=ObjectDataParser._getBoolean(i,e.DataParser.INHERIT_SCALE,!0),a.inheritReflection=ObjectDataParser._getBoolean(i,e.DataParser.INHERIT_REFLECTION,!0),a.length=ObjectDataParser._getNumber(i,e.DataParser.LENGTH,0)*n,a.alpha=ObjectDataParser._getNumber(i,e.DataParser.ALPHA,1),a.name=ObjectDataParser._getString(i,e.DataParser.NAME,""),e.DataParser.TRANSFORM in i&&this._parseTransform(i[e.DataParser.TRANSFORM],a.transform,n),a}var s=e.BaseObject.borrowObject(e.SurfaceData);return s.alpha=ObjectDataParser._getNumber(i,e.DataParser.ALPHA,1),s.name=ObjectDataParser._getString(i,e.DataParser.NAME,""),s.segmentX=ObjectDataParser._getNumber(i,e.DataParser.SEGMENT_X,0),s.segmentY=ObjectDataParser._getNumber(i,e.DataParser.SEGMENT_Y,0),this._parseGeometry(i,s.geometry),s},ObjectDataParser.prototype._parseIKConstraint=function(i){var n=this._armature.getBone(ObjectDataParser._getString(i,e.DataParser.BONE,""));if(null===n)return null;var a=this._armature.getBone(ObjectDataParser._getString(i,e.DataParser.TARGET,""));if(null===a)return null;var s=ObjectDataParser._getNumber(i,e.DataParser.CHAIN,0),o=e.BaseObject.borrowObject(e.IKConstraintData);return o.scaleEnabled=ObjectDataParser._getBoolean(i,e.DataParser.SCALE,!1),o.bendPositive=ObjectDataParser._getBoolean(i,e.DataParser.BEND_POSITIVE,!0),o.weight=ObjectDataParser._getNumber(i,e.DataParser.WEIGHT,1),o.name=ObjectDataParser._getString(i,e.DataParser.NAME,""),o.type=0,o.target=a,s>0&&null!==n.parent?(o.root=n.parent,o.bone=n):(o.root=n,o.bone=null),o},ObjectDataParser.prototype._parsePathConstraint=function(i){var n=this._armature.getSlot(ObjectDataParser._getString(i,e.DataParser.TARGET,""));if(null===n)return null;var a=this._armature.defaultSkin;if(null===a)return null;var s=a.getDisplay(n.name,ObjectDataParser._getString(i,e.DataParser.TARGET_DISPLAY,n.name));if(null===s||!(s instanceof e.PathDisplayData))return null;var o=i[e.DataParser.BONES];if(null===o||0===o.length)return null;var h=e.BaseObject.borrowObject(e.PathConstraintData);h.name=ObjectDataParser._getString(i,e.DataParser.NAME,""),h.type=1,h.pathSlot=n,h.pathDisplayData=s,h.target=n.parent,h.positionMode=e.DataParser._getPositionMode(ObjectDataParser._getString(i,e.DataParser.POSITION_MODE,"")),h.spacingMode=e.DataParser._getSpacingMode(ObjectDataParser._getString(i,e.DataParser.SPACING_MODE,"")),h.rotateMode=e.DataParser._getRotateMode(ObjectDataParser._getString(i,e.DataParser.ROTATE_MODE,"")),h.position=ObjectDataParser._getNumber(i,e.DataParser.POSITION,0),h.spacing=ObjectDataParser._getNumber(i,e.DataParser.SPACING,0),h.rotateOffset=ObjectDataParser._getNumber(i,e.DataParser.ROTATE_OFFSET,0),h.rotateMix=ObjectDataParser._getNumber(i,e.DataParser.ROTATE_MIX,1),h.translateMix=ObjectDataParser._getNumber(i,e.DataParser.TRANSLATE_MIX,1);for(var l=0,c=o;l<c.length;l++){var m=c[l],f=this._armature.getBone(m);null!==f&&(h.AddBone(f),null===h.root&&(h.root=f))}return h},ObjectDataParser.prototype._parseSlot=function(i,n){var a=e.BaseObject.borrowObject(e.SlotData);return a.displayIndex=ObjectDataParser._getNumber(i,e.DataParser.DISPLAY_INDEX,0),a.zOrder=n,a.zIndex=ObjectDataParser._getNumber(i,e.DataParser.Z_INDEX,0),a.alpha=ObjectDataParser._getNumber(i,e.DataParser.ALPHA,1),a.name=ObjectDataParser._getString(i,e.DataParser.NAME,""),a.parent=this._armature.getBone(ObjectDataParser._getString(i,e.DataParser.PARENT,"")),e.DataParser.BLEND_MODE in i&&"string"==typeof i[e.DataParser.BLEND_MODE]?a.blendMode=e.DataParser._getBlendMode(i[e.DataParser.BLEND_MODE]):a.blendMode=ObjectDataParser._getNumber(i,e.DataParser.BLEND_MODE,0),e.DataParser.COLOR in i?(a.color=e.SlotData.createColor(),this._parseColorTransform(i[e.DataParser.COLOR],a.color)):a.color=e.SlotData.DEFAULT_COLOR,e.DataParser.ACTIONS in i&&(this._slotChildActions[a.name]=this._parseActionData(i[e.DataParser.ACTIONS],0,null,null)),a},ObjectDataParser.prototype._parseSkin=function(i){var n=e.BaseObject.borrowObject(e.SkinData);if(n.name=ObjectDataParser._getString(i,e.DataParser.NAME,e.DataParser.DEFAULT_NAME),0===n.name.length&&(n.name=e.DataParser.DEFAULT_NAME),e.DataParser.SLOT in i){var a=i[e.DataParser.SLOT];this._skin=n;for(var s=0,o=a;s<o.length;s++){var h=o[s],l=ObjectDataParser._getString(h,e.DataParser.NAME,""),c=this._armature.getSlot(l);if(null!==c){if(this._slot=c,e.DataParser.DISPLAY in h)for(var m=0,f=h[e.DataParser.DISPLAY];m<f.length;m++){var g=f[m];g?n.addDisplay(l,this._parseDisplay(g)):n.addDisplay(l,null)}this._slot=null}}this._skin=null}return n},ObjectDataParser.prototype._parseDisplay=function(i){var n=ObjectDataParser._getString(i,e.DataParser.NAME,""),a=ObjectDataParser._getString(i,e.DataParser.PATH,""),s=0,o=null;switch(s=e.DataParser.TYPE in i&&"string"==typeof i[e.DataParser.TYPE]?e.DataParser._getDisplayType(i[e.DataParser.TYPE]):ObjectDataParser._getNumber(i,e.DataParser.TYPE,s)){case 0:var h=o=e.BaseObject.borrowObject(e.ImageDisplayData);h.name=n,h.path=a.length>0?a:n,this._parsePivot(i,h);break;case 1:var l=o=e.BaseObject.borrowObject(e.ArmatureDisplayData);if(l.name=n,l.path=a.length>0?a:n,l.inheritAnimation=!0,e.DataParser.ACTIONS in i)for(var c=0,m=this._parseActionData(i[e.DataParser.ACTIONS],0,null,null);c<m.length;c++){var f=m[c];l.addAction(f)}else if(this._slot.name in this._slotChildActions){var g=this._skin.getDisplays(this._slot.name);if(null===g?0===this._slot.displayIndex:this._slot.displayIndex===g.length){for(var _=0,T=this._slotChildActions[this._slot.name];_<T.length;_++){f=T[_];l.addAction(f)}delete this._slotChildActions[this._slot.name]}}break;case 2:var x=o=e.BaseObject.borrowObject(e.MeshDisplayData);x.geometry.inheritDeform=ObjectDataParser._getBoolean(i,e.DataParser.INHERIT_DEFORM,!0),x.name=n,x.path=a.length>0?a:n,e.DataParser.SHARE in i?(x.geometry.data=this._data,this._cacheRawMeshes.push(i),this._cacheMeshes.push(x)):this._parseMesh(i,x);break;case 3:var S=this._parseBoundingBox(i);if(null!==S){var j=o=e.BaseObject.borrowObject(e.BoundingBoxDisplayData);j.name=n,j.path=a.length>0?a:n,j.boundingBox=S}break;case 4:var q=i[e.DataParser.LENGTHS],Y=o=e.BaseObject.borrowObject(e.PathDisplayData);Y.closed=ObjectDataParser._getBoolean(i,e.DataParser.CLOSED,!1),Y.constantSpeed=ObjectDataParser._getBoolean(i,e.DataParser.CONSTANT_SPEED,!1),Y.name=n,Y.path=a.length>0?a:n,Y.curveLengths.length=q.length;for(var X=0,Z=q.length;X<Z;++X)Y.curveLengths[X]=q[X];this._parsePath(i,Y)}return null!==o&&e.DataParser.TRANSFORM in i&&this._parseTransform(i[e.DataParser.TRANSFORM],o.transform,this._armature.scale),o},ObjectDataParser.prototype._parsePath=function(e,i){this._parseGeometry(e,i.geometry)},ObjectDataParser.prototype._parsePivot=function(i,n){if(e.DataParser.PIVOT in i){var a=i[e.DataParser.PIVOT];n.pivot.x=ObjectDataParser._getNumber(a,e.DataParser.X,0),n.pivot.y=ObjectDataParser._getNumber(a,e.DataParser.Y,0)}else n.pivot.x=.5,n.pivot.y=.5},ObjectDataParser.prototype._parseMesh=function(i,n){if(this._parseGeometry(i,n.geometry),e.DataParser.WEIGHTS in i){var a=i[e.DataParser.SLOT_POSE],s=i[e.DataParser.BONE_POSE],o=this._skin.name+"_"+this._slot.name+"_"+n.name;this._weightSlotPose[o]=a,this._weightBonePoses[o]=s}},ObjectDataParser.prototype._parseBoundingBox=function(i){var n=null,a=0;switch(a=e.DataParser.SUB_TYPE in i&&"string"==typeof i[e.DataParser.SUB_TYPE]?e.DataParser._getBoundingBoxType(i[e.DataParser.SUB_TYPE]):ObjectDataParser._getNumber(i,e.DataParser.SUB_TYPE,a)){case 0:n=e.BaseObject.borrowObject(e.RectangleBoundingBoxData);break;case 1:n=e.BaseObject.borrowObject(e.EllipseBoundingBoxData);break;case 2:n=this._parsePolygonBoundingBox(i)}return null!==n&&(n.color=ObjectDataParser._getNumber(i,e.DataParser.COLOR,0),0!==n.type&&1!==n.type||(n.width=ObjectDataParser._getNumber(i,e.DataParser.WIDTH,0),n.height=ObjectDataParser._getNumber(i,e.DataParser.HEIGHT,0))),n},ObjectDataParser.prototype._parsePolygonBoundingBox=function(i){var n=e.BaseObject.borrowObject(e.PolygonBoundingBoxData);if(e.DataParser.VERTICES in i){var a=this._armature.scale,s=i[e.DataParser.VERTICES],o=n.vertices;o.length=s.length;for(var h=0,l=s.length;h<l;h+=2){var c=s[h]*a,m=s[h+1]*a;o[h]=c,o[h+1]=m,0===h?(n.x=c,n.y=m,n.width=c,n.height=m):(c<n.x?n.x=c:c>n.width&&(n.width=c),m<n.y?n.y=m:m>n.height&&(n.height=m))}n.width-=n.x,n.height-=n.y}else console.warn("Data error.\n Please reexport DragonBones Data to fixed the bug.");return n},ObjectDataParser.prototype._parseAnimation=function(i){var n=e.BaseObject.borrowObject(e.AnimationData);if(n.blendType=e.DataParser._getAnimationBlendType(ObjectDataParser._getString(i,e.DataParser.BLEND_TYPE,"")),n.frameCount=ObjectDataParser._getNumber(i,e.DataParser.DURATION,0),n.playTimes=ObjectDataParser._getNumber(i,e.DataParser.PLAY_TIMES,1),n.duration=n.frameCount/this._armature.frameRate,n.fadeInTime=ObjectDataParser._getNumber(i,e.DataParser.FADE_IN_TIME,0),n.scale=ObjectDataParser._getNumber(i,e.DataParser.SCALE,1),n.name=ObjectDataParser._getString(i,e.DataParser.NAME,e.DataParser.DEFAULT_NAME),0===n.name.length&&(n.name=e.DataParser.DEFAULT_NAME),n.frameIntOffset=this._frameIntArray.length,n.frameFloatOffset=this._frameFloatArray.length,n.frameOffset=this._frameArray.length,this._animation=n,e.DataParser.FRAME in i){var a=i[e.DataParser.FRAME],s=a.length;if(s>0)for(var o=0,h=0;o<s;++o){var l=a[o];this._parseActionDataInFrame(l,h,null,null),h+=ObjectDataParser._getNumber(l,e.DataParser.DURATION,1)}}if(e.DataParser.Z_ORDER in i&&(this._animation.zOrderTimeline=this._parseTimeline(i[e.DataParser.Z_ORDER],null,e.DataParser.FRAME,1,0,0,this._parseZOrderFrame)),e.DataParser.BONE in i)for(var c=0,m=i[e.DataParser.BONE];c<m.length;c++){var f=m[c];this._parseBoneTimeline(f)}if(e.DataParser.SLOT in i)for(var g=0,_=i[e.DataParser.SLOT];g<_.length;g++){f=_[g];this._parseSlotTimeline(f)}if(e.DataParser.FFD in i)for(var T=0,x=i[e.DataParser.FFD];T<x.length;T++){f=x[T];var S=ObjectDataParser._getString(f,e.DataParser.SKIN,e.DataParser.DEFAULT_NAME),j=ObjectDataParser._getString(f,e.DataParser.SLOT,""),q=ObjectDataParser._getString(f,e.DataParser.NAME,"");if(0===S.length&&(S=e.DataParser.DEFAULT_NAME),this._slot=this._armature.getSlot(j),this._mesh=this._armature.getMesh(S,j,q),null!==this._slot&&null!==this._mesh)null!==(nt=this._parseTimeline(f,null,e.DataParser.FRAME,22,2,0,this._parseSlotDeformFrame))&&this._animation.addSlotTimeline(j,nt),this._slot=null,this._mesh=null}if(e.DataParser.IK in i)for(var Y=0,X=i[e.DataParser.IK];Y<X.length;Y++){f=X[Y];var Z=ObjectDataParser._getString(f,e.DataParser.NAME,"");if(null!==this._armature.getConstraint(Z))null!==(nt=this._parseTimeline(f,null,e.DataParser.FRAME,30,1,2,this._parseIKConstraintFrame))&&this._animation.addConstraintTimeline(Z,nt)}if(this._actionFrames.length>0&&(this._animation.actionTimeline=this._parseTimeline(null,this._actionFrames,"",0,0,0,this._parseActionFrame),this._actionFrames.length=0),e.DataParser.TIMELINE in i)for(var $=0,tt=i[e.DataParser.TIMELINE];$<tt.length;$++){f=tt[$];var et=ObjectDataParser._getNumber(f,e.DataParser.TYPE,0),it=ObjectDataParser._getString(f,e.DataParser.NAME,""),nt=null;switch(et){case 0:break;case 20:case 23:case 60:case 24:case 40:case 41:if(20===et?(this._frameValueType=0,this._frameValueScale=1):(this._frameValueType=1,this._frameValueScale=23===et?1:40===et||41===et?1e4:100),this._frameDefaultValue=60===et||24===et||41===et?1:0,40===et&&0!==n.blendType){var rt=nt=e.BaseObject.borrowObject(e.AnimationTimelineData);rt.x=ObjectDataParser._getNumber(f,e.DataParser.X,0),rt.y=ObjectDataParser._getNumber(f,e.DataParser.Y,0)}nt=this._parseTimeline(f,null,e.DataParser.FRAME,et,this._frameValueType,1,this._parseSingleValueFrame,nt);break;case 11:case 12:case 13:case 30:case 42:30===et||42===et?(this._frameValueType=1,this._frameValueScale=42===et?1e4:100):(this._frameValueScale=12===et?e.Transform.DEG_RAD:1,this._frameValueType=2),this._frameDefaultValue=13===et||30===et?1:0,nt=this._parseTimeline(f,null,e.DataParser.FRAME,et,this._frameValueType,2,this._parseDoubleValueFrame);break;case 1:break;case 50:var at=this._armature.getBone(it);if(null===at)continue;this._geometry=at.geometry,nt=this._parseTimeline(f,null,e.DataParser.FRAME,et,2,0,this._parseDeformFrame),this._geometry=null;break;case 22:for(var S in this._geometry=null,this._armature.skins){var st=this._armature.skins[S];for(var ot in st.displays)for(var ht=0,lt=st.displays[ot];ht<lt.length;ht++){var ct=lt[ht];if(null!==ct&&ct.name===it){this._geometry=ct.geometry;break}}}if(null===this._geometry)continue;nt=this._parseTimeline(f,null,e.DataParser.FRAME,et,2,0,this._parseDeformFrame),this._geometry=null;break;case 21:nt=this._parseTimeline(f,null,e.DataParser.FRAME,et,1,1,this._parseSlotColorFrame)}if(null!==nt)switch(et){case 0:case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(it,nt);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(it,nt);break;case 30:this._animation.addConstraintTimeline(it,nt);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(it,nt)}}return this._animation=null,n},ObjectDataParser.prototype._parseTimeline=function(i,a,s,o,h,l,c,m){if(void 0===m&&(m=null),null!==i&&s.length>0&&s in i&&(a=i[s]),null===a)return null;var f=a.length;if(0===f)return null;var g=this._frameIntArray.length,_=this._frameFloatArray.length,T=this._timelineArray.length;switch(null===m&&(m=e.BaseObject.borrowObject(e.TimelineData)),m.type=o,m.offset=T,this._frameValueType=h,this._timeline=m,this._timelineArray.length+=5+f,null!==i?(this._timelineArray[T+0]=Math.round(100*ObjectDataParser._getNumber(i,e.DataParser.SCALE,1)),this._timelineArray[T+1]=Math.round(100*ObjectDataParser._getNumber(i,e.DataParser.OFFSET,0))):(this._timelineArray[T+0]=100,this._timelineArray[T+1]=0),this._timelineArray[T+2]=f,this._timelineArray[T+3]=l,this._frameValueType){case 0:this._timelineArray[T+4]=0;break;case 1:this._timelineArray[T+4]=g-this._animation.frameIntOffset;break;case 2:this._timelineArray[T+4]=_-this._animation.frameFloatOffset}if(1===f)m.frameIndicesOffset=-1,this._timelineArray[T+5+0]=c.call(this,a[0],0,0)-this._animation.frameOffset;else{var x=this._animation.frameCount+1,S=this._data.frameIndices,j=S.length;S.length+=x,m.frameIndicesOffset=j;for(var q=0,Y=0,X=0,Z=0;q<x;++q){if(X+Z<=q&&Y<f){var $=a[Y];X=q,Z=Y===f-1?this._animation.frameCount-X:$ instanceof n?this._actionFrames[Y+1].frameStart-X:ObjectDataParser._getNumber($,e.DataParser.DURATION,1),this._timelineArray[T+5+Y]=c.call(this,$,X,Z)-this._animation.frameOffset,Y++}S[j+q]=Y-1}}return this._timeline=null,m},ObjectDataParser.prototype._parseBoneTimeline=function(i){var n=this._armature.getBone(ObjectDataParser._getString(i,e.DataParser.NAME,""));if(null!==n){var a;if(this._bone=n,this._slot=this._armature.getSlot(this._bone.name),e.DataParser.TRANSLATE_FRAME in i)this._frameDefaultValue=0,this._frameValueScale=1,null!==(a=this._parseTimeline(i,null,e.DataParser.TRANSLATE_FRAME,11,2,2,this._parseDoubleValueFrame))&&this._animation.addBoneTimeline(n.name,a);if(e.DataParser.ROTATE_FRAME in i)this._frameDefaultValue=0,this._frameValueScale=1,null!==(a=this._parseTimeline(i,null,e.DataParser.ROTATE_FRAME,12,2,2,this._parseBoneRotateFrame))&&this._animation.addBoneTimeline(n.name,a);if(e.DataParser.SCALE_FRAME in i)this._frameDefaultValue=1,this._frameValueScale=1,null!==(a=this._parseTimeline(i,null,e.DataParser.SCALE_FRAME,13,2,2,this._parseBoneScaleFrame))&&this._animation.addBoneTimeline(n.name,a);if(e.DataParser.FRAME in i)null!==(a=this._parseTimeline(i,null,e.DataParser.FRAME,10,2,6,this._parseBoneAllFrame))&&this._animation.addBoneTimeline(n.name,a);this._bone=null,this._slot=null}},ObjectDataParser.prototype._parseSlotTimeline=function(i){var n=this._armature.getSlot(ObjectDataParser._getString(i,e.DataParser.NAME,""));if(null!==n){var a=null,s=null;this._slot=n,a=e.DataParser.DISPLAY_FRAME in i?this._parseTimeline(i,null,e.DataParser.DISPLAY_FRAME,20,0,0,this._parseSlotDisplayFrame):this._parseTimeline(i,null,e.DataParser.FRAME,20,0,0,this._parseSlotDisplayFrame),s=e.DataParser.COLOR_FRAME in i?this._parseTimeline(i,null,e.DataParser.COLOR_FRAME,21,1,1,this._parseSlotColorFrame):this._parseTimeline(i,null,e.DataParser.FRAME,21,1,1,this._parseSlotColorFrame),null!==a&&this._animation.addSlotTimeline(n.name,a),null!==s&&this._animation.addSlotTimeline(n.name,s),this._slot=null}},ObjectDataParser.prototype._parseFrame=function(e,i,n){var a=this._frameArray.length;return this._frameArray.length+=1,this._frameArray[a+0]=i,a},ObjectDataParser.prototype._parseTweenFrame=function(i,n,a){var s=this._parseFrame(i,n,a);if(a>0)if(e.DataParser.CURVE in i){var o=a+1;this._helpArray.length=o;var h=this._samplingEasingCurve(i[e.DataParser.CURVE],this._helpArray);this._frameArray.length+=2+this._helpArray.length,this._frameArray[s+1]=2,this._frameArray[s+2]=h?o:-o;for(var l=0;l<o;++l)this._frameArray[s+3+l]=Math.round(1e4*this._helpArray[l])}else{var c=-2;e.DataParser.TWEEN_EASING in i&&(c=ObjectDataParser._getNumber(i,e.DataParser.TWEEN_EASING,-2)),-2===c?(this._frameArray.length+=1,this._frameArray[s+1]=0):0===c?(this._frameArray.length+=1,this._frameArray[s+1]=1):c<0?(this._frameArray.length+=2,this._frameArray[s+1]=3,this._frameArray[s+2]=Math.round(100*-c)):c<=1?(this._frameArray.length+=2,this._frameArray[s+1]=4,this._frameArray[s+2]=Math.round(100*c)):(this._frameArray.length+=2,this._frameArray[s+1]=5,this._frameArray[s+2]=Math.round(100*c-100))}else this._frameArray.length+=1,this._frameArray[s+1]=0;return s},ObjectDataParser.prototype._parseSingleValueFrame=function(i,n,a){var s=0;switch(this._frameValueType){case 0:s=this._parseFrame(i,n,a),this._frameArray.length+=1,this._frameArray[s+1]=ObjectDataParser._getNumber(i,e.DataParser.VALUE,this._frameDefaultValue);break;case 1:s=this._parseTweenFrame(i,n,a);var o=this._frameIntArray.length;this._frameIntArray.length+=1,this._frameIntArray[o]=Math.round(ObjectDataParser._getNumber(i,e.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale);break;case 2:s=this._parseTweenFrame(i,n,a);o=this._frameFloatArray.length;this._frameFloatArray.length+=1,this._frameFloatArray[o]=ObjectDataParser._getNumber(i,e.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale}return s},ObjectDataParser.prototype._parseDoubleValueFrame=function(i,n,a){var s=0;switch(this._frameValueType){case 0:s=this._parseFrame(i,n,a),this._frameArray.length+=2,this._frameArray[s+1]=ObjectDataParser._getNumber(i,e.DataParser.X,this._frameDefaultValue),this._frameArray[s+2]=ObjectDataParser._getNumber(i,e.DataParser.Y,this._frameDefaultValue);break;case 1:s=this._parseTweenFrame(i,n,a);var o=this._frameIntArray.length;this._frameIntArray.length+=2,this._frameIntArray[o]=Math.round(ObjectDataParser._getNumber(i,e.DataParser.X,this._frameDefaultValue)*this._frameValueScale),this._frameIntArray[o+1]=Math.round(ObjectDataParser._getNumber(i,e.DataParser.Y,this._frameDefaultValue)*this._frameValueScale);break;case 2:s=this._parseTweenFrame(i,n,a);o=this._frameFloatArray.length;this._frameFloatArray.length+=2,this._frameFloatArray[o]=ObjectDataParser._getNumber(i,e.DataParser.X,this._frameDefaultValue)*this._frameValueScale,this._frameFloatArray[o+1]=ObjectDataParser._getNumber(i,e.DataParser.Y,this._frameDefaultValue)*this._frameValueScale}return s},ObjectDataParser.prototype._parseActionFrame=function(e,i,n){var a=this._frameArray.length,s=e.actions.length;this._frameArray.length+=2+s,this._frameArray[a+0]=i,this._frameArray[a+0+1]=s;for(var o=0;o<s;++o)this._frameArray[a+0+2+o]=e.actions[o];return a},ObjectDataParser.prototype._parseZOrderFrame=function(i,n,a){var s=this._parseFrame(i,n,a);if(e.DataParser.Z_ORDER in i){var o=i[e.DataParser.Z_ORDER];if(o.length>0){for(var h=this._armature.sortedSlots.length,l=new Array(h-o.length/2),c=new Array(h),m=0;m<l.length;++m)l[m]=0;for(var f=0;f<h;++f)c[f]=-1;for(var g=0,_=0,T=0,x=o.length;T<x;T+=2){for(var S=o[T],j=o[T+1];g!==S;)l[_++]=g++;c[g+j]=g++}for(;g<h;)l[_++]=g++;this._frameArray.length+=1+h,this._frameArray[s+1]=h;for(var q=h;q--;)-1===c[q]?this._frameArray[s+2+q]=l[--_]||0:this._frameArray[s+2+q]=c[q]||0;return s}}return this._frameArray.length+=1,this._frameArray[s+1]=0,s},ObjectDataParser.prototype._parseBoneAllFrame=function(i,n,a){this._helpTransform.identity(),e.DataParser.TRANSFORM in i&&this._parseTransform(i[e.DataParser.TRANSFORM],this._helpTransform,1);var s=this._helpTransform.rotation;0!==n&&(0===this._prevClockwise?s=this._prevRotation+e.Transform.normalizeRadian(s-this._prevRotation):((this._prevClockwise>0?s>=this._prevRotation:s<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),s=this._prevRotation+s-this._prevRotation+e.Transform.PI_D*this._prevClockwise)),this._prevClockwise=ObjectDataParser._getNumber(i,e.DataParser.TWEEN_ROTATE,0),this._prevRotation=s;var o=this._parseTweenFrame(i,n,a),h=this._frameFloatArray.length;return this._frameFloatArray.length+=6,this._frameFloatArray[h++]=this._helpTransform.x,this._frameFloatArray[h++]=this._helpTransform.y,this._frameFloatArray[h++]=s,this._frameFloatArray[h++]=this._helpTransform.skew,this._frameFloatArray[h++]=this._helpTransform.scaleX,this._frameFloatArray[h++]=this._helpTransform.scaleY,this._parseActionDataInFrame(i,n,this._bone,this._slot),o},ObjectDataParser.prototype._parseBoneTranslateFrame=function(i,n,a){var s=this._parseTweenFrame(i,n,a),o=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[o++]=ObjectDataParser._getNumber(i,e.DataParser.X,0),this._frameFloatArray[o++]=ObjectDataParser._getNumber(i,e.DataParser.Y,0),s},ObjectDataParser.prototype._parseBoneRotateFrame=function(i,n,a){var s=ObjectDataParser._getNumber(i,e.DataParser.ROTATE,0)*e.Transform.DEG_RAD;0!==n&&(0===this._prevClockwise?s=this._prevRotation+e.Transform.normalizeRadian(s-this._prevRotation):((this._prevClockwise>0?s>=this._prevRotation:s<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),s=this._prevRotation+s-this._prevRotation+e.Transform.PI_D*this._prevClockwise)),this._prevClockwise=ObjectDataParser._getNumber(i,e.DataParser.CLOCK_WISE,0),this._prevRotation=s;var o=this._parseTweenFrame(i,n,a),h=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[h++]=s,this._frameFloatArray[h++]=ObjectDataParser._getNumber(i,e.DataParser.SKEW,0)*e.Transform.DEG_RAD,o},ObjectDataParser.prototype._parseBoneScaleFrame=function(i,n,a){var s=this._parseTweenFrame(i,n,a),o=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[o++]=ObjectDataParser._getNumber(i,e.DataParser.X,1),this._frameFloatArray[o++]=ObjectDataParser._getNumber(i,e.DataParser.Y,1),s},ObjectDataParser.prototype._parseSlotDisplayFrame=function(i,n,a){var s=this._parseFrame(i,n,a);return this._frameArray.length+=1,e.DataParser.VALUE in i?this._frameArray[s+1]=ObjectDataParser._getNumber(i,e.DataParser.VALUE,0):this._frameArray[s+1]=ObjectDataParser._getNumber(i,e.DataParser.DISPLAY_INDEX,0),this._parseActionDataInFrame(i,n,this._slot.parent,this._slot),s},ObjectDataParser.prototype._parseSlotColorFrame=function(i,n,a){var s=this._parseTweenFrame(i,n,a),o=-1;if(e.DataParser.VALUE in i||e.DataParser.COLOR in i){var h=e.DataParser.VALUE in i?i[e.DataParser.VALUE]:i[e.DataParser.COLOR];for(var l in h){this._parseColorTransform(h,this._helpColorTransform),o=this._colorArray.length,this._colorArray.length+=8,this._colorArray[o++]=Math.round(100*this._helpColorTransform.alphaMultiplier),this._colorArray[o++]=Math.round(100*this._helpColorTransform.redMultiplier),this._colorArray[o++]=Math.round(100*this._helpColorTransform.greenMultiplier),this._colorArray[o++]=Math.round(100*this._helpColorTransform.blueMultiplier),this._colorArray[o++]=Math.round(this._helpColorTransform.alphaOffset),this._colorArray[o++]=Math.round(this._helpColorTransform.redOffset),this._colorArray[o++]=Math.round(this._helpColorTransform.greenOffset),this._colorArray[o++]=Math.round(this._helpColorTransform.blueOffset),o-=8;break}}o<0&&(this._defaultColorOffset<0&&(this._defaultColorOffset=o=this._colorArray.length,this._colorArray.length+=8,this._colorArray[o++]=100,this._colorArray[o++]=100,this._colorArray[o++]=100,this._colorArray[o++]=100,this._colorArray[o++]=0,this._colorArray[o++]=0,this._colorArray[o++]=0,this._colorArray[o++]=0),o=this._defaultColorOffset);var c=this._frameIntArray.length;return this._frameIntArray.length+=1,this._frameIntArray[c]=o,s},ObjectDataParser.prototype._parseSlotDeformFrame=function(i,n,a){var s=this._frameFloatArray.length,o=this._parseTweenFrame(i,n,a),h=e.DataParser.VERTICES in i?i[e.DataParser.VERTICES]:null,l=ObjectDataParser._getNumber(i,e.DataParser.OFFSET,0),c=this._intArray[this._mesh.geometry.offset+0],m=this._mesh.parent.name+"_"+this._slot.name+"_"+this._mesh.name,f=this._mesh.geometry.weight,g=0,_=0,T=0,x=0;if(null!==f){var S=this._weightSlotPose[m];this._helpMatrixA.copyFromArray(S,0),this._frameFloatArray.length+=2*f.count,T=f.offset+2+f.bones.length}else this._frameFloatArray.length+=2*c;for(var j=0;j<2*c;j+=2)if(null===h?(g=0,_=0):(g=j<l||j-l>=h.length?0:h[j-l],_=j+1<l||j+1-l>=h.length?0:h[j+1-l]),null!==f){var q=this._weightBonePoses[m],Y=this._intArray[T++];this._helpMatrixA.transformPoint(g,_,this._helpPoint,!0),g=this._helpPoint.x,_=this._helpPoint.y;for(var X=0;X<Y;++X){var Z=this._intArray[T++];this._helpMatrixB.copyFromArray(q,7*Z+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(g,_,this._helpPoint,!0),this._frameFloatArray[s+x++]=this._helpPoint.x,this._frameFloatArray[s+x++]=this._helpPoint.y}}else this._frameFloatArray[s+j]=g,this._frameFloatArray[s+j+1]=_;if(0===n){var $=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[$+0]=this._mesh.geometry.offset,this._frameIntArray[$+1]=this._frameFloatArray.length-s,this._frameIntArray[$+2]=this._frameFloatArray.length-s,this._frameIntArray[$+3]=0,this._frameIntArray[$+4]=s-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=$-this._animation.frameIntOffset}return o},ObjectDataParser.prototype._parseIKConstraintFrame=function(i,n,a){var s=this._parseTweenFrame(i,n,a),o=this._frameIntArray.length;return this._frameIntArray.length+=2,this._frameIntArray[o++]=ObjectDataParser._getBoolean(i,e.DataParser.BEND_POSITIVE,!0)?1:0,this._frameIntArray[o++]=Math.round(100*ObjectDataParser._getNumber(i,e.DataParser.WEIGHT,1)),s},ObjectDataParser.prototype._parseActionData=function(i,n,a,s){var o=new Array;if("string"==typeof i)(m=e.BaseObject.borrowObject(e.ActionData)).type=n,m.name=i,m.bone=a,m.slot=s,o.push(m);else if(i instanceof Array)for(var h=0,l=i;h<l.length;h++){var c=l[h],m=e.BaseObject.borrowObject(e.ActionData);if(e.DataParser.GOTO_AND_PLAY in c?(m.type=0,m.name=ObjectDataParser._getString(c,e.DataParser.GOTO_AND_PLAY,"")):(e.DataParser.TYPE in c&&"string"==typeof c[e.DataParser.TYPE]?m.type=e.DataParser._getActionType(c[e.DataParser.TYPE]):m.type=ObjectDataParser._getNumber(c,e.DataParser.TYPE,n),m.name=ObjectDataParser._getString(c,e.DataParser.NAME,"")),e.DataParser.BONE in c){var f=ObjectDataParser._getString(c,e.DataParser.BONE,"");m.bone=this._armature.getBone(f)}else m.bone=a;if(e.DataParser.SLOT in c){var g=ObjectDataParser._getString(c,e.DataParser.SLOT,"");m.slot=this._armature.getSlot(g)}else m.slot=s;var _=null;if(e.DataParser.INTS in c){null===_&&(_=e.BaseObject.borrowObject(e.UserData));for(var T=0,x=c[e.DataParser.INTS];T<x.length;T++){var S=x[T];_.addInt(S)}}if(e.DataParser.FLOATS in c){null===_&&(_=e.BaseObject.borrowObject(e.UserData));for(var j=0,q=c[e.DataParser.FLOATS];j<q.length;j++){S=q[j];_.addFloat(S)}}if(e.DataParser.STRINGS in c){null===_&&(_=e.BaseObject.borrowObject(e.UserData));for(var Y=0,X=c[e.DataParser.STRINGS];Y<X.length;Y++){S=X[Y];_.addString(S)}}m.data=_,o.push(m)}return o},ObjectDataParser.prototype._parseDeformFrame=function(i,n,a){var s=this._frameFloatArray.length,o=this._parseTweenFrame(i,n,a),h=e.DataParser.VERTICES in i?i[e.DataParser.VERTICES]:e.DataParser.VALUE in i?i[e.DataParser.VALUE]:null,l=ObjectDataParser._getNumber(i,e.DataParser.OFFSET,0),c=this._intArray[this._geometry.offset+0],m=0,f=0;if(null!==this._geometry.weight);else{this._frameFloatArray.length+=2*c;for(var g=0;g<2*c;g+=2)null!==h?(m=g<l||g-l>=h.length?0:h[g-l],f=g+1<l||g+1-l>=h.length?0:h[g+1-l]):(m=0,f=0),this._frameFloatArray[s+g]=m,this._frameFloatArray[s+g+1]=f}if(0===n){var _=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[_+0]=this._geometry.offset,this._frameIntArray[_+1]=this._frameFloatArray.length-s,this._frameIntArray[_+2]=this._frameFloatArray.length-s,this._frameIntArray[_+3]=0,this._frameIntArray[_+4]=s-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=_-this._animation.frameIntOffset}return o},ObjectDataParser.prototype._parseTransform=function(i,n,a){n.x=ObjectDataParser._getNumber(i,e.DataParser.X,0)*a,n.y=ObjectDataParser._getNumber(i,e.DataParser.Y,0)*a,e.DataParser.ROTATE in i||e.DataParser.SKEW in i?(n.rotation=e.Transform.normalizeRadian(ObjectDataParser._getNumber(i,e.DataParser.ROTATE,0)*e.Transform.DEG_RAD),n.skew=e.Transform.normalizeRadian(ObjectDataParser._getNumber(i,e.DataParser.SKEW,0)*e.Transform.DEG_RAD)):(e.DataParser.SKEW_X in i||e.DataParser.SKEW_Y in i)&&(n.rotation=e.Transform.normalizeRadian(ObjectDataParser._getNumber(i,e.DataParser.SKEW_Y,0)*e.Transform.DEG_RAD),n.skew=e.Transform.normalizeRadian(ObjectDataParser._getNumber(i,e.DataParser.SKEW_X,0)*e.Transform.DEG_RAD)-n.rotation),n.scaleX=ObjectDataParser._getNumber(i,e.DataParser.SCALE_X,1),n.scaleY=ObjectDataParser._getNumber(i,e.DataParser.SCALE_Y,1)},ObjectDataParser.prototype._parseColorTransform=function(i,n){n.alphaMultiplier=.01*ObjectDataParser._getNumber(i,e.DataParser.ALPHA_MULTIPLIER,100),n.redMultiplier=.01*ObjectDataParser._getNumber(i,e.DataParser.RED_MULTIPLIER,100),n.greenMultiplier=.01*ObjectDataParser._getNumber(i,e.DataParser.GREEN_MULTIPLIER,100),n.blueMultiplier=.01*ObjectDataParser._getNumber(i,e.DataParser.BLUE_MULTIPLIER,100),n.alphaOffset=ObjectDataParser._getNumber(i,e.DataParser.ALPHA_OFFSET,0),n.redOffset=ObjectDataParser._getNumber(i,e.DataParser.RED_OFFSET,0),n.greenOffset=ObjectDataParser._getNumber(i,e.DataParser.GREEN_OFFSET,0),n.blueOffset=ObjectDataParser._getNumber(i,e.DataParser.BLUE_OFFSET,0)},ObjectDataParser.prototype._parseGeometry=function(i,n){var a=i[e.DataParser.VERTICES],s=Math.floor(a.length/2),o=0,h=this._intArray.length,l=this._floatArray.length;n.offset=h,n.data=this._data,this._intArray.length+=4,this._intArray[h+0]=s,this._intArray[h+2]=l,this._intArray[h+3]=-1,this._floatArray.length+=2*s;for(var c=0,m=2*s;c<m;++c)this._floatArray[l+c]=a[c];if(e.DataParser.TRIANGLES in i){var f=i[e.DataParser.TRIANGLES];o=Math.floor(f.length/3),this._intArray.length+=3*o;for(c=0,m=3*o;c<m;++c)this._intArray[h+4+c]=f[c]}if(this._intArray[h+1]=o,e.DataParser.UVS in i){var g=i[e.DataParser.UVS],_=l+2*s;this._floatArray.length+=2*s;for(c=0,m=2*s;c<m;++c)this._floatArray[_+c]=g[c]}if(e.DataParser.WEIGHTS in i){var T=i[e.DataParser.WEIGHTS],x=Math.floor(T.length-s)/2,S=this._intArray.length,j=this._floatArray.length,q=0,Y=this._armature.sortedBones,X=e.BaseObject.borrowObject(e.WeightData);if(X.count=x,X.offset=S,this._intArray.length+=2+q+s+x,this._intArray[S+1]=j,e.DataParser.BONE_POSE in i){var Z=i[e.DataParser.SLOT_POSE],$=i[e.DataParser.BONE_POSE],tt=new Array;q=Math.floor($.length/7),tt.length=q;for(c=0;c<q;++c){var et=$[7*c],it=this._rawBones[et];X.addBone(it),tt[c]=et,this._intArray[S+2+c]=Y.indexOf(it)}this._floatArray.length+=3*x,this._helpMatrixA.copyFromArray(Z,0);c=0;for(var nt=0,rt=S+2+q,at=j;c<s;++c){var st=2*c,ot=this._intArray[rt++]=T[nt++],ht=this._floatArray[l+st],lt=this._floatArray[l+st+1];this._helpMatrixA.transformPoint(ht,lt,this._helpPoint),ht=this._helpPoint.x,lt=this._helpPoint.y;for(var ct=0;ct<ot;++ct){et=T[nt++];var pt=tt.indexOf(et);this._helpMatrixB.copyFromArray($,7*pt+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(ht,lt,this._helpPoint),this._intArray[rt++]=pt,this._floatArray[at++]=T[nt++],this._floatArray[at++]=this._helpPoint.x,this._floatArray[at++]=this._helpPoint.y}}}else{var ut=i[e.DataParser.BONES];q=ut.length;for(c=0;c<q;c++){et=ut[c],it=this._rawBones[et];X.addBone(it),this._intArray[S+2+c]=Y.indexOf(it)}this._floatArray.length+=3*x;c=0,nt=0,at=0,rt=S+2+q;for(var dt=j;c<x;c++){ot=T[nt++];this._intArray[rt++]=ot;for(ct=0;ct<ot;ct++){pt=T[nt++];var mt=T[nt++];ht=a[at++],lt=a[at++];this._intArray[rt++]=ut.indexOf(pt),this._floatArray[dt++]=mt,this._floatArray[dt++]=ht,this._floatArray[dt++]=lt}}}n.weight=X}},ObjectDataParser.prototype._parseArray=function(e){this._intArray.length=0,this._floatArray.length=0,this._frameIntArray.length=0,this._frameFloatArray.length=0,this._frameArray.length=0,this._timelineArray.length=0,this._colorArray.length=0},ObjectDataParser.prototype._modifyArray=function(){this._intArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._intArray.push(0),this._frameIntArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._frameIntArray.push(0),this._frameArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._frameArray.push(0),this._timelineArray.length%Uint16Array.BYTES_PER_ELEMENT!=0&&this._timelineArray.push(0),this._timelineArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._colorArray.push(0);for(var e=this._intArray.length*Int16Array.BYTES_PER_ELEMENT,i=this._floatArray.length*Float32Array.BYTES_PER_ELEMENT,n=this._frameIntArray.length*Int16Array.BYTES_PER_ELEMENT,a=this._frameFloatArray.length*Float32Array.BYTES_PER_ELEMENT,s=this._frameArray.length*Int16Array.BYTES_PER_ELEMENT,o=this._timelineArray.length*Uint16Array.BYTES_PER_ELEMENT,h=this._colorArray.length*Int16Array.BYTES_PER_ELEMENT,l=new ArrayBuffer(e+i+n+a+s+o+h),c=new Int16Array(l,0,this._intArray.length),m=new Float32Array(l,e,this._floatArray.length),f=new Int16Array(l,e+i,this._frameIntArray.length),g=new Float32Array(l,e+i+n,this._frameFloatArray.length),_=new Int16Array(l,e+i+n+a,this._frameArray.length),T=new Uint16Array(l,e+i+n+a+s,this._timelineArray.length),x=new Int16Array(l,e+i+n+a+s+o,this._colorArray.length),S=0,j=this._intArray.length;S<j;++S)c[S]=this._intArray[S];for(S=0,j=this._floatArray.length;S<j;++S)m[S]=this._floatArray[S];for(S=0,j=this._frameIntArray.length;S<j;++S)f[S]=this._frameIntArray[S];for(S=0,j=this._frameFloatArray.length;S<j;++S)g[S]=this._frameFloatArray[S];for(S=0,j=this._frameArray.length;S<j;++S)_[S]=this._frameArray[S];for(S=0,j=this._timelineArray.length;S<j;++S)T[S]=this._timelineArray[S];for(S=0,j=this._colorArray.length;S<j;++S)x[S]=this._colorArray[S];this._data.binary=l,this._data.intArray=c,this._data.floatArray=m,this._data.frameIntArray=f,this._data.frameFloatArray=g,this._data.frameArray=_,this._data.timelineArray=T,this._data.colorArray=x,this._defaultColorOffset=-1},ObjectDataParser.prototype.parseDragonBonesData=function(i,n){void 0===n&&(n=1),console.assert(null!=i,"Data error.");var a=ObjectDataParser._getString(i,e.DataParser.VERSION,""),s=ObjectDataParser._getString(i,e.DataParser.COMPATIBLE_VERSION,"");if(e.DataParser.DATA_VERSIONS.indexOf(a)>=0||e.DataParser.DATA_VERSIONS.indexOf(s)>=0){var o=e.BaseObject.borrowObject(e.DragonBonesData);if(o.version=a,o.name=ObjectDataParser._getString(i,e.DataParser.NAME,""),o.frameRate=ObjectDataParser._getNumber(i,e.DataParser.FRAME_RATE,24),0===o.frameRate&&(o.frameRate=24),e.DataParser.ARMATURE in i){this._data=o,this._parseArray(i);for(var h=0,l=i[e.DataParser.ARMATURE];h<l.length;h++){var c=l[h];o.addArmature(this._parseArmature(c,n))}this._data.binary||this._modifyArray(),e.DataParser.STAGE in i?o.stage=o.getArmature(ObjectDataParser._getString(i,e.DataParser.STAGE,"")):o.armatureNames.length>0&&(o.stage=o.getArmature(o.armatureNames[0])),this._data=null}return e.DataParser.TEXTURE_ATLAS in i&&(this._rawTextureAtlases=i[e.DataParser.TEXTURE_ATLAS]),o}return console.assert(!1,"Nonsupport data version: "+a+"\nPlease convert DragonBones data to support version.\nRead more: https://github.com/DragonBones/Tools/"),null},ObjectDataParser.prototype.parseTextureAtlasData=function(i,n,a){if(void 0===a&&(a=1),console.assert(void 0!==i),null===i){if(null===this._rawTextureAtlases||0===this._rawTextureAtlases.length)return!1;var s=this._rawTextureAtlases[this._rawTextureAtlasIndex++];return this.parseTextureAtlasData(s,n,a),this._rawTextureAtlasIndex>=this._rawTextureAtlases.length&&(this._rawTextureAtlasIndex=0,this._rawTextureAtlases=null),!0}if(n.width=ObjectDataParser._getNumber(i,e.DataParser.WIDTH,0),n.height=ObjectDataParser._getNumber(i,e.DataParser.HEIGHT,0),n.scale=1===a?1/ObjectDataParser._getNumber(i,e.DataParser.SCALE,1):a,n.name=ObjectDataParser._getString(i,e.DataParser.NAME,""),n.imagePath=ObjectDataParser._getString(i,e.DataParser.IMAGE_PATH,""),e.DataParser.SUB_TEXTURE in i)for(var o=i[e.DataParser.SUB_TEXTURE],h=0,l=o.length;h<l;++h){var c=o[h],m=ObjectDataParser._getNumber(c,e.DataParser.FRAME_WIDTH,-1),f=ObjectDataParser._getNumber(c,e.DataParser.FRAME_HEIGHT,-1),g=n.createTexture();g.rotated=ObjectDataParser._getBoolean(c,e.DataParser.ROTATED,!1),g.name=ObjectDataParser._getString(c,e.DataParser.NAME,""),g.region.x=ObjectDataParser._getNumber(c,e.DataParser.X,0),g.region.y=ObjectDataParser._getNumber(c,e.DataParser.Y,0),g.region.width=ObjectDataParser._getNumber(c,e.DataParser.WIDTH,0),g.region.height=ObjectDataParser._getNumber(c,e.DataParser.HEIGHT,0),m>0&&f>0&&(g.frame=e.TextureData.createRectangle(),g.frame.x=ObjectDataParser._getNumber(c,e.DataParser.FRAME_X,0),g.frame.y=ObjectDataParser._getNumber(c,e.DataParser.FRAME_Y,0),g.frame.width=m,g.frame.height=f),n.addTexture(g)}return!0},ObjectDataParser.getInstance=function(){return null===ObjectDataParser._objectDataParserInstance&&(ObjectDataParser._objectDataParserInstance=new ObjectDataParser),ObjectDataParser._objectDataParserInstance},ObjectDataParser._objectDataParserInstance=null,ObjectDataParser}(e.DataParser);e.ObjectDataParser=i;var n=function n(){this.frameStart=0,this.actions=[]};e.ActionFrame=n}(m||(m={})),function(e){var i=function(i){function BinaryDataParser(){return null!==i&&i.apply(this,arguments)||this}return s(BinaryDataParser,i),BinaryDataParser.prototype._inRange=function(e,i,n){return i<=e&&e<=n},BinaryDataParser.prototype._decodeUTF8=function(e){for(var i,n=0,a="",s=0,o=0,h=0,l=0;e.length>n;){var c=e[n++];if(-1===c)i=0!==o?65533:-1;else if(0===o)this._inRange(c,0,127)?i=c:(this._inRange(c,194,223)?(o=1,l=128,s=c-192):this._inRange(c,224,239)?(o=2,l=2048,s=c-224):this._inRange(c,240,244)&&(o=3,l=65536,s=c-240),s*=Math.pow(64,o),i=null);else if(this._inRange(c,128,191))if(h+=1,s+=(c-128)*Math.pow(64,o-h),h!==o)i=null;else{var m=s,f=l;s=0,o=0,h=0,l=0,i=this._inRange(m,f,1114111)&&!this._inRange(m,55296,57343)?m:c}else s=0,o=0,h=0,l=0,n--,i=c;null!==i&&-1!==i&&(i<=65535?i>0&&(a+=String.fromCharCode(i)):(i-=65536,a+=String.fromCharCode(55296+(i>>10&1023)),a+=String.fromCharCode(56320+(1023&i))))}return a},BinaryDataParser.prototype._parseBinaryTimeline=function(i,n,a){void 0===a&&(a=null);var s=null!==a?a:e.BaseObject.borrowObject(e.TimelineData);s.type=i,s.offset=n,this._timeline=s;var o=this._timelineArrayBuffer[s.offset+2];if(1===o)s.frameIndicesOffset=-1;else{var h,l=this._animation.frameCount+1,c=this._data.frameIndices;h=c.length,c.length+=l,s.frameIndicesOffset=h;for(var m=0,f=0,g=0,_=0;m<l;++m)g+_<=m&&f<o&&(g=this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[s.offset+5+f]],_=f===o-1?this._animation.frameCount-g:this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[s.offset+5+f+1]]-g,f++),c[h+m]=f-1}return this._timeline=null,s},BinaryDataParser.prototype._parseAnimation=function(i){var n=e.BaseObject.borrowObject(e.AnimationData);n.blendType=e.DataParser._getAnimationBlendType(e.ObjectDataParser._getString(i,e.DataParser.BLEND_TYPE,"")),n.frameCount=e.ObjectDataParser._getNumber(i,e.DataParser.DURATION,0),n.playTimes=e.ObjectDataParser._getNumber(i,e.DataParser.PLAY_TIMES,1),n.duration=n.frameCount/this._armature.frameRate,n.fadeInTime=e.ObjectDataParser._getNumber(i,e.DataParser.FADE_IN_TIME,0),n.scale=e.ObjectDataParser._getNumber(i,e.DataParser.SCALE,1),n.name=e.ObjectDataParser._getString(i,e.DataParser.NAME,e.DataParser.DEFAULT_NAME),0===n.name.length&&(n.name=e.DataParser.DEFAULT_NAME);var a=i[e.DataParser.OFFSET];if(n.frameIntOffset=a[0],n.frameFloatOffset=a[1],n.frameOffset=a[2],this._animation=n,e.DataParser.ACTION in i&&(n.actionTimeline=this._parseBinaryTimeline(0,i[e.DataParser.ACTION])),e.DataParser.Z_ORDER in i&&(n.zOrderTimeline=this._parseBinaryTimeline(1,i[e.DataParser.Z_ORDER])),e.DataParser.BONE in i){var s=i[e.DataParser.BONE];for(var o in s){var h=s[o],l=this._armature.getBone(o);if(null!==l)for(var c=0,m=h.length;c<m;c+=2){var f=h[c],g=h[c+1],_=this._parseBinaryTimeline(f,g);this._animation.addBoneTimeline(l.name,_)}}}if(e.DataParser.SLOT in i){s=i[e.DataParser.SLOT];for(var o in s){h=s[o];var T=this._armature.getSlot(o);if(null!==T)for(c=0,m=h.length;c<m;c+=2){f=h[c],g=h[c+1],_=this._parseBinaryTimeline(f,g);this._animation.addSlotTimeline(T.name,_)}}}if(e.DataParser.CONSTRAINT in i){s=i[e.DataParser.CONSTRAINT];for(var o in s){h=s[o];var x=this._armature.getConstraint(o);if(null!==x)for(c=0,m=h.length;c<m;c+=2){f=h[c],g=h[c+1],_=this._parseBinaryTimeline(f,g);this._animation.addConstraintTimeline(x.name,_)}}}if(e.DataParser.TIMELINE in i)for(var S=0,j=h=i[e.DataParser.TIMELINE];S<j.length;S++){var q=j[S];if((g=e.ObjectDataParser._getNumber(q,e.DataParser.OFFSET,0))>=0){f=e.ObjectDataParser._getNumber(q,e.DataParser.TYPE,0);var Y=e.ObjectDataParser._getString(q,e.DataParser.NAME,"");_=null;if(40===f&&0!==n.blendType){var X=_=e.BaseObject.borrowObject(e.AnimationTimelineData);X.x=e.ObjectDataParser._getNumber(q,e.DataParser.X,0),X.y=e.ObjectDataParser._getNumber(q,e.DataParser.Y,0)}switch(_=this._parseBinaryTimeline(f,g,_),f){case 0:case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(Y,_);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(Y,_);break;case 30:this._animation.addConstraintTimeline(Y,_);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(Y,_)}}}return this._animation=null,n},BinaryDataParser.prototype._parseGeometry=function(i,n){n.offset=i[e.DataParser.OFFSET],n.data=this._data;var a=this._intArrayBuffer[n.offset+3];if(a<-1&&(a+=65536),a>=0){var s=e.BaseObject.borrowObject(e.WeightData),o=this._intArrayBuffer[n.offset+0],h=this._intArrayBuffer[a+0];s.offset=a;for(var l=0;l<h;++l){var c=this._intArrayBuffer[a+2+l];s.addBone(this._rawBones[c])}for(var m=a+2+h,f=0,g=(l=0,o);l<g;++l){var _=this._intArrayBuffer[m++];f+=_,m+=_}s.count=f,n.weight=s}},BinaryDataParser.prototype._parseArray=function(i){var n=i[e.DataParser.OFFSET],a=n[1],s=n[3],o=n[5],h=n[7],l=n[9],c=n[11],m=n.length>12?n[13]:0,f=new Int16Array(this._binary,this._binaryOffset+n[0],a/Int16Array.BYTES_PER_ELEMENT),g=new Float32Array(this._binary,this._binaryOffset+n[2],s/Float32Array.BYTES_PER_ELEMENT),_=new Int16Array(this._binary,this._binaryOffset+n[4],o/Int16Array.BYTES_PER_ELEMENT),T=new Float32Array(this._binary,this._binaryOffset+n[6],h/Float32Array.BYTES_PER_ELEMENT),x=new Int16Array(this._binary,this._binaryOffset+n[8],l/Int16Array.BYTES_PER_ELEMENT),S=new Uint16Array(this._binary,this._binaryOffset+n[10],c/Uint16Array.BYTES_PER_ELEMENT),j=m>0?new Int16Array(this._binary,this._binaryOffset+n[12],m/Uint16Array.BYTES_PER_ELEMENT):f;this._data.binary=this._binary,this._data.intArray=this._intArrayBuffer=f,this._data.floatArray=g,this._data.frameIntArray=_,this._data.frameFloatArray=T,this._data.frameArray=this._frameArrayBuffer=x,this._data.timelineArray=this._timelineArrayBuffer=S,this._data.colorArray=j},BinaryDataParser.prototype.parseDragonBonesData=function(e,n){void 0===n&&(n=1),console.assert(null!=e&&e instanceof ArrayBuffer,"Data error.");var a=new Uint8Array(e,0,8);if(a[0]!=="D".charCodeAt(0)||a[1]!=="B".charCodeAt(0)||a[2]!=="D".charCodeAt(0)||a[3]!=="T".charCodeAt(0))return console.assert(!1,"Nonsupport data."),null;var s=new Uint32Array(e,8,1)[0],o=new Uint8Array(e,12,s),h=this._decodeUTF8(o),l=JSON.parse(h);return this._binaryOffset=12+s,this._binary=e,i.prototype.parseDragonBonesData.call(this,l,n)},BinaryDataParser.getInstance=function(){return null===BinaryDataParser._binaryDataParserInstance&&(BinaryDataParser._binaryDataParserInstance=new BinaryDataParser),BinaryDataParser._binaryDataParserInstance},BinaryDataParser._binaryDataParserInstance=null,BinaryDataParser}(e.ObjectDataParser);e.BinaryDataParser=i}(m||(m={})),function(e){var i=function(){function BaseFactory(i){void 0===i&&(i=null),this.autoSearch=!1,this._dragonBonesDataMap={},this._textureAtlasDataMap={},this._dragonBones=null,this._dataParser=null,null===BaseFactory._objectParser&&(BaseFactory._objectParser=new e.ObjectDataParser),null===BaseFactory._binaryParser&&(BaseFactory._binaryParser=new e.BinaryDataParser),this._dataParser=null!==i?i:BaseFactory._objectParser}return BaseFactory.prototype._isSupportMesh=function(){return!0},BaseFactory.prototype._getTextureData=function(e,i){if(e in this._textureAtlasDataMap)for(var n=0,a=this._textureAtlasDataMap[e];n<a.length;n++){if(null!==(c=(l=a[n]).getTexture(i)))return c}if(this.autoSearch)for(var s in this._textureAtlasDataMap)for(var o=0,h=this._textureAtlasDataMap[s];o<h.length;o++){var l,c;if((l=h[o]).autoSearch)if(null!==(c=l.getTexture(i)))return c}return null},BaseFactory.prototype._fillBuildArmaturePackage=function(e,i,n,a,s){var o=null,h=null;if(i.length>0&&i in this._dragonBonesDataMap&&(h=(o=this._dragonBonesDataMap[i]).getArmature(n)),null===h&&(0===i.length||this.autoSearch))for(var l in this._dragonBonesDataMap)if(o=this._dragonBonesDataMap[l],(0===i.length||o.autoSearch)&&null!==(h=o.getArmature(n))){i=l;break}if(null!==h){if(e.dataName=i,e.textureAtlasName=s,e.data=o,e.armature=h,e.skin=null,a.length>0&&(e.skin=h.getSkin(a),null===e.skin&&this.autoSearch))for(var l in this._dragonBonesDataMap){var c=this._dragonBonesDataMap[l].getArmature(a);if(null!==c){e.skin=c.defaultSkin;break}}return null===e.skin&&(e.skin=h.defaultSkin),!0}return!1},BaseFactory.prototype._buildBones=function(i,n){for(var a=0,s=i.armature.sortedBones;a<s.length;a++){var o=s[a];e.BaseObject.borrowObject(0===o.type?e.Bone:e.Surface).init(o,n)}},BaseFactory.prototype._buildSlots=function(e,i){var n=e.skin,a=e.armature.defaultSkin;if(null!==n&&null!==a){var s={};for(var o in a.displays){var h=a.getDisplays(o);s[o]=h}if(n!==a)for(var o in n.displays){h=n.getDisplays(o);s[o]=h}for(var l=0,c=e.armature.sortedSlots;l<c.length;l++){var m=c[l],f=m.name in s?s[m.name]:null,g=this._buildSlot(e,m,i);if(null!==f){g.displayFrameCount=f.length;for(var _=0,T=g.displayFrameCount;_<T;++_){var x=f[_];if(g.replaceRawDisplayData(x,_),null!==x){if(e.textureAtlasName.length>0){var S=this._getTextureData(e.textureAtlasName,x.path);g.replaceTextureData(S,_)}var j=this._getSlotDisplay(e,x,g);g.replaceDisplay(j,_)}else g.replaceDisplay(null)}}g._setDisplayIndex(m.displayIndex,!0)}}},BaseFactory.prototype._buildConstraints=function(i,n){var a=i.armature.constraints;for(var s in a){var o=a[s];switch(o.type){case 0:var h=e.BaseObject.borrowObject(e.IKConstraint);h.init(o,n),n._addConstraint(h);break;case 1:var l=e.BaseObject.borrowObject(e.PathConstraint);l.init(o,n),n._addConstraint(l);break;default:var c=e.BaseObject.borrowObject(e.IKConstraint);c.init(o,n),n._addConstraint(c)}}},BaseFactory.prototype._buildChildArmature=function(e,i,n){return this.buildArmature(n.path,null!==e?e.dataName:"","",null!==e?e.textureAtlasName:"")},BaseFactory.prototype._getSlotDisplay=function(i,n,a){var s=null!==i?i.dataName:n.parent.parent.parent.name,o=null;switch(n.type){case 0:var h=n;null===h.texture&&(h.texture=this._getTextureData(s,n.path)),o=a.rawDisplay;break;case 2:var l=n;null===l.texture&&(l.texture=this._getTextureData(s,l.path)),o=this._isSupportMesh()?a.meshDisplay:a.rawDisplay;break;case 1:var c=n,m=this._buildChildArmature(i,a,c);if(null!==m){if(m.inheritAnimation=c.inheritAnimation,!m.inheritAnimation){var f=c.actions.length>0?c.actions:m.armatureData.defaultActions;if(f.length>0)for(var g=0,_=f;g<_.length;g++){var T=_[g],x=e.BaseObject.borrowObject(e.EventObject);e.EventObject.actionDataToInstance(T,x,a.armature),x.slot=a,a.armature._bufferAction(x,!1)}else m.animation.play()}c.armature=m.armatureData}o=m}return o},BaseFactory.prototype.parseDragonBonesData=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=1);for(var a=e instanceof ArrayBuffer?BaseFactory._binaryParser:this._dataParser,s=a.parseDragonBonesData(e,n);;){var o=this._buildTextureAtlasData(null,null);if(!a.parseTextureAtlasData(null,o,n)){o.returnToPool();break}this.addTextureAtlasData(o,i)}return null!==s&&this.addDragonBonesData(s,i),s},BaseFactory.prototype.parseTextureAtlasData=function(e,i,n,a){void 0===n&&(n=null),void 0===a&&(a=1);var s=this._buildTextureAtlasData(null,null);return this._dataParser.parseTextureAtlasData(e,s,a),this._buildTextureAtlasData(s,i||null),this.addTextureAtlasData(s,n),s},BaseFactory.prototype.updateTextureAtlases=function(e,i){var n=this.getTextureAtlasData(i);if(null!==n)for(var a=0,s=n.length;a<s;++a)a<e.length&&this._buildTextureAtlasData(n[a],e[a])},BaseFactory.prototype.getDragonBonesData=function(e){return e in this._dragonBonesDataMap?this._dragonBonesDataMap[e]:null},BaseFactory.prototype.addDragonBonesData=function(e,i){if(void 0===i&&(i=null),(i=null!==i?i:e.name)in this._dragonBonesDataMap){if(this._dragonBonesDataMap[i]===e)return;console.warn("Can not add same name data: "+i)}else this._dragonBonesDataMap[i]=e},BaseFactory.prototype.removeDragonBonesData=function(e,i){void 0===i&&(i=!0),e in this._dragonBonesDataMap&&(i&&this._dragonBones.bufferObject(this._dragonBonesDataMap[e]),delete this._dragonBonesDataMap[e])},BaseFactory.prototype.getTextureAtlasData=function(e){return e in this._textureAtlasDataMap?this._textureAtlasDataMap[e]:null},BaseFactory.prototype.addTextureAtlasData=function(e,i){void 0===i&&(i=null);var n=(i=null!==i?i:e.name)in this._textureAtlasDataMap?this._textureAtlasDataMap[i]:this._textureAtlasDataMap[i]=[];n.indexOf(e)<0&&n.push(e)},BaseFactory.prototype.removeTextureAtlasData=function(e,i){if(void 0===i&&(i=!0),e in this._textureAtlasDataMap){var n=this._textureAtlasDataMap[e];if(i)for(var a=0,s=n;a<s.length;a++){var o=s[a];this._dragonBones.bufferObject(o)}delete this._textureAtlasDataMap[e]}},BaseFactory.prototype.getArmatureData=function(e,i){void 0===i&&(i="");var a=new n;return this._fillBuildArmaturePackage(a,i,e,"","")?a.armature:null},BaseFactory.prototype.clear=function(e){for(var i in void 0===e&&(e=!0),this._dragonBonesDataMap)e&&this._dragonBones.bufferObject(this._dragonBonesDataMap[i]),delete this._dragonBonesDataMap[i];for(var i in this._textureAtlasDataMap){if(e)for(var n=0,a=this._textureAtlasDataMap[i];n<a.length;n++){var s=a[n];this._dragonBones.bufferObject(s)}delete this._textureAtlasDataMap[i]}},BaseFactory.prototype.buildArmature=function(e,i,a,s){void 0===i&&(i=""),void 0===a&&(a=""),void 0===s&&(s="");var o=new n;if(!this._fillBuildArmaturePackage(o,i||"",e,a||"",s||""))return console.warn("No armature data: "+e+", "+(null!==i?i:"")),null;var h=this._buildArmature(o);return this._buildBones(o,h),this._buildSlots(o,h),this._buildConstraints(o,h),h.invalidUpdate(null,!0),h.advanceTime(0),h},BaseFactory.prototype.replaceDisplay=function(e,i,n){if(void 0===n&&(n=-1),n<0&&(n=e.displayIndex),n<0&&(n=0),e.replaceDisplayData(i,n),null!==i){var a=this._getSlotDisplay(null,i,e);if(0===i.type){var s=e.getDisplayFrameAt(n).rawDisplayData;null!==s&&2===s.type&&(a=e.meshDisplay)}e.replaceDisplay(a,n)}else e.replaceDisplay(null,n)},BaseFactory.prototype.replaceSlotDisplay=function(e,i,n,a,s,o){void 0===o&&(o=-1);var h=this.getArmatureData(i,e||"");if(null===h||null===h.defaultSkin)return!1;var l=h.defaultSkin.getDisplay(n,a);return this.replaceDisplay(s,l,o),!0},BaseFactory.prototype.replaceSlotDisplayList=function(e,i,n,a){var s=this.getArmatureData(i,e||"");if(!s||!s.defaultSkin)return!1;var o=s.defaultSkin.getDisplays(n);if(!o)return!1;a.displayFrameCount=o.length;for(var h=0,l=a.displayFrameCount;h<l;++h){var c=o[h];this.replaceDisplay(a,c,h)}return!0},BaseFactory.prototype.replaceSkin=function(e,i,n,a){void 0===n&&(n=!1),void 0===a&&(a=null);for(var s=!1,o=i.parent.defaultSkin,h=0,l=e.getSlots();h<l.length;h++){var c=l[h];if(!(null!==a&&a.indexOf(c.name)>=0)){var m=i.getDisplays(c.name);if(null!==m||(null!==o&&i!==o&&(m=o.getDisplays(c.name)),null!==m)){c.displayFrameCount=m.length;for(var f=0,g=c.displayFrameCount;f<g;++f){var _=m[f];c.replaceRawDisplayData(_,f),null!==_?c.replaceDisplay(this._getSlotDisplay(null,_,c),f):c.replaceDisplay(null,f)}s=!0}else n&&(c.displayFrameCount=0)}}return s},BaseFactory.prototype.replaceAnimation=function(i,n,a){void 0===a&&(a=!0);var s=n.defaultSkin;if(null===s)return!1;if(a)i.animation.animations=n.animations;else{var o=i.animation.animations,h={};for(var l in o)h[l]=o[l];for(var l in n.animations)h[l]=n.animations[l];i.animation.animations=h}for(var c=0,m=i.getSlots();c<m.length;c++)for(var f=m[c],g=0,_=0,T=f.displayList;_<T.length;_++){var x=T[_];if(x instanceof e.Armature){var S=s.getDisplays(f.name);if(null!==S&&g<S.length){var j=S[g];if(null!==j&&1===j.type){var q=this.getArmatureData(j.path,j.parent.parent.parent.name);q&&this.replaceAnimation(x,q,a)}}}g++}return!0},BaseFactory.prototype.getAllDragonBonesData=function(){return this._dragonBonesDataMap},BaseFactory.prototype.getAllTextureAtlasData=function(){return this._textureAtlasDataMap},Object.defineProperty(BaseFactory.prototype,"clock",{get:function(){return this._dragonBones.clock},enumerable:!0,configurable:!0}),Object.defineProperty(BaseFactory.prototype,"dragonBones",{get:function(){return this._dragonBones},enumerable:!0,configurable:!0}),BaseFactory._objectParser=null,BaseFactory._binaryParser=null,BaseFactory}();e.BaseFactory=i;var n=function n(){this.dataName="",this.textureAtlasName="",this.skin=null};e.BuildArmaturePackage=n}(m||(m={})),function(e){!function(e){!function(e){var i=function(e){function EventDispatcher(){return null!==e&&e.apply(this,arguments)||this}return s(EventDispatcher,e),EventDispatcher.prototype.hasDBEventListener=function(e){return this.listenerCount(e)>0},EventDispatcher.prototype.dispatchDBEvent=function(e,i){this.emit(e,i)},EventDispatcher.prototype.addDBEventListener=function(e,i,n){this.on(e,i,n)},EventDispatcher.prototype.removeDBEventListener=function(e,i,n){this.off(e,i,n)},EventDispatcher}(Phaser.Events.EventEmitter);e.EventDispatcher=i}(e.util||(e.util={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(e){!function(e){e.Skew={getSkewX:function(){return this._skewX||0},setSkewX:function(e){this._skewX=e},getSkewY:function(){return this._skewY||0},setSkewY:function(e){this._skewY=e},setSkew:function(e,i){i=void 0===i?e:i,this._skewX=e,this._skewY=i}},e.extendSkew=function(i){Object.defineProperty(i.prototype,"skewX",{get:e.Skew.getSkewX,set:e.Skew.setSkewX,enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skewY",{get:e.Skew.getSkewY,set:e.Skew.setSkewY,enumerable:!0,configurable:!0}),i.prototype.setSkew=e.Skew.setSkew}}(e.util||(e.util={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(e){!function(e){var i=function(e){function TransformMatrix(i,n,a,s,o,h){var l=e.call(this,i,n,a,s,o,h)||this;return l.decomposedMatrix.skewX=0,l.decomposedMatrix.skewY=0,l}return s(TransformMatrix,e),TransformMatrix.prototype.decomposeMatrix=function(){var e=this.a,i=this.b,n=this.c,a=this.d,s=-Math.atan2(-n,a),o=Math.atan2(i,e),h=Math.abs(s+o);return h<1e-5||Math.abs(Phaser.Math.PI2-h)<1e-5?(this.decomposedMatrix.rotation=o,e<0&&a>=0&&(this.decomposedMatrix.rotation+=this.decomposedMatrix.rotation<=0?Math.PI:-Math.PI),this.decomposedMatrix.skewX=this.decomposedMatrix.skewY=0):(this.decomposedMatrix.rotation=0,this.decomposedMatrix.skewX=s,this.decomposedMatrix.skewY=o),this.decomposedMatrix.scaleX=Math.sqrt(e*e+i*i),this.decomposedMatrix.scaleY=Math.sqrt(n*n+a*a),this.decomposedMatrix.translateX=this.tx,this.decomposedMatrix.translateY=this.ty,this.decomposedMatrix},TransformMatrix.prototype.applyITRSC=function(e,i,n,a,s,o,h){return this.a=Math.cos(n-h)*a,this.b=Math.sin(n-h)*a,this.c=-Math.sin(n+o)*s,this.d=Math.cos(n+o)*s,this.tx=e,this.ty=i,this},Object.defineProperty(TransformMatrix.prototype,"skewX",{get:function(){return-Math.atan2(-this.c,this.d)},enumerable:!0,configurable:!0}),Object.defineProperty(TransformMatrix.prototype,"skewY",{get:function(){return Math.atan2(this.b,this.a)},enumerable:!0,configurable:!0}),TransformMatrix}(Phaser.GameObjects.Components.TransformMatrix);e.TransformMatrix=i}(e.util||(e.util={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(e){!function(i){var n=function(i){function DisplayContainer(n,a,s,o){var h=i.call(this,n,a,s,o)||this;return h._skewX=0,h._skewY=0,h.tempTransformMatrix=new e.util.TransformMatrix,h}return s(DisplayContainer,i),DisplayContainer.prototype.pointToContainer=function(e,i){if(void 0===i&&(i=new Phaser.Math.Vector2),this.parentContainer)return this.parentContainer.pointToContainer(e,i);var n=this.tempTransformMatrix;return n.applyITRSC(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this._skewX,this._skewY),n.invert(),n.transformPoint(e.x,e.y,i),i},Object.defineProperty(DisplayContainer.prototype,"skewX",{get:function(){return this._skewX},set:function(e){this._skewX=e},enumerable:!0,configurable:!0}),Object.defineProperty(DisplayContainer.prototype,"skewY",{get:function(){return this._skewY},set:function(e){this._skewY=e},enumerable:!0,configurable:!0}),DisplayContainer.prototype.setSkew=function(e,i){return i=void 0===i?e:i,this.skewX=e,this.skewY=i,this},DisplayContainer}(Phaser.GameObjects.Container);i.DisplayContainer=n}(e.display||(e.display={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(e){var i,n;i=e.display||(e.display={}),n=function(e){function ArmatureDisplay(i){var n=e.call(this,i)||this;return n.debugDraw=!1,n}return s(ArmatureDisplay,e),ArmatureDisplay.prototype.dbInit=function(e){this._armature=e},ArmatureDisplay.prototype.dbClear=function(){this.removeAllListeners(),this._armature&&this._armature.dispose(),this._armature=null},ArmatureDisplay.prototype.dbUpdate=function(){this.debugDraw},ArmatureDisplay.prototype.dispose=function(i){this.dbClear(),!0===i&&e.prototype.destroy.call(this)},ArmatureDisplay.prototype.destroy=function(){this.dispose(!0)},ArmatureDisplay.prototype.dispatchDBEvent=function(e,i){this.emit(e,i)},ArmatureDisplay.prototype.hasDBEventListener=function(e){return this.listenerCount(e)>0},ArmatureDisplay.prototype.addDBEventListener=function(e,i,n){this.on(e,i,n)},ArmatureDisplay.prototype.removeDBEventListener=function(e,i,n){this.off(e,i,n)},Object.defineProperty(ArmatureDisplay.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),Object.defineProperty(ArmatureDisplay.prototype,"animation",{get:function(){return this._armature.animation},enumerable:!0,configurable:!0}),ArmatureDisplay.prototype.getBounds=function(e){void 0===e&&(e=new Phaser.Geom.Rectangle);for(var i=new Phaser.Geom.Rectangle,n=this.getBoundsTransformMatrix(),a=!0,s=0,o=this._armature.getSlots();s<o.length;s++){var h=o[s],l=h.display;if(l){if(l===h.meshDisplay){var c=l.fakeVertices;if(!(c&&c.length>0))continue;i.setTo(999999,999999,-999999,-999999);for(var m=0,f=c.length;m<f;m+=2){var g=c[m],_=c[m+1];i.x>g&&(i.x=g),i.width<g&&(i.width=g),i.y>_&&(i.y=_),i.height<_&&(i.height=_)}i.width-=i.x,i.height-=i.y}else if(h._displayFrame){var T=h._displayFrame.getTextureData();if(!T)continue;var x=T.parent.scale;i.width=T.region.width*x,i.height=T.region.height*x,i.x=-i.width/2,i.y=-i.height/2}i.width*=this.scaleX,i.height*=this.scaleY,n.transformPoint(i.x,i.y,i),a?(e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height,a=!1):Phaser.Geom.Rectangle.Union(i,e,e)}}return e},ArmatureDisplay}(i.DisplayContainer),i.ArmatureDisplay=n}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(e){!function(i){var n=function(e){function SlotImage(i,n,a,s,o){var h=e.call(this,i,n,a,s,o)||this;return h.setPipeline("PhaserTextureTintPipeline"),h}return s(SlotImage,e),SlotImage}(Phaser.GameObjects.Image);i.SlotImage=n,e.util.extendSkew(n)}(e.display||(e.display={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(e){!function(i){var n=function(e){function SlotSprite(i,n,a,s,o){var h=e.call(this,i,n,a,s,o)||this;return h.setPipeline("PhaserTextureTintPipeline"),h}return s(SlotSprite,e),SlotSprite}(Phaser.GameObjects.Sprite);i.SlotSprite=n,e.util.extendSkew(n)}(e.display||(e.display={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(e){!function(i){var n=function(e){function SlotMesh(i,n,a,s,o,h,l,c,m){var f=e.call(this,i,n,a,s,o,h,l,c,m)||this;return f.setPipeline("PhaserTextureTintPipeline"),f}return s(SlotMesh,e),SlotMesh.prototype.setTint=function(e,i,n,a){},SlotMesh.prototype.updateVertices=function(){var e=this.fakeIndices,i=this.fakeVertices,n=this.fakeUvs;this.vertices=new Float32Array(2*e.length),this.uv=new Float32Array(2*e.length),this.alphas=new Uint32Array(e.length),this.colors=new Uint32Array(e.length);for(var a=0;a<e.length;a++)this.vertices[2*a]=i[2*e[a]],this.vertices[2*a+1]=i[2*e[a]+1],this.uv[2*a]=n[2*e[a]],this.uv[2*a+1]=n[2*e[a]+1],this.alphas[a]=1,this.colors[a]=16777215},SlotMesh}(Phaser.GameObjects.Mesh);i.SlotMesh=n,e.util.extendSkew(n)}(e.display||(e.display={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(i){!function(i){var n=function(n){function Slot(){return null!==n&&n.apply(this,arguments)||this}return s(Slot,n),Slot.toString=function(){return"[class dragonBones.PhaserSlot]"},Slot.prototype._onClear=function(){n.prototype._onClear.call(this),this._textureScale=1,this._renderDisplay&&(this._renderDisplay.destroy(),this._renderDisplay=null)},Slot.prototype._initDisplay=function(e,i){},Slot.prototype._disposeDisplay=function(e,i){},Slot.prototype._onUpdateDisplay=function(){this._renderDisplay=this._display||this._rawDisplay},Slot.prototype._addDisplay=function(){this.armature.display.add(this._renderDisplay)},Slot.prototype._replaceDisplay=function(e){this._renderDisplay.setSkew?(this.armature.display.replace(e,this._renderDisplay),this._renderDisplay.parentContainer=this.armature.display):console.warn("please call dragonBones.phaser.util.extendSkew to mix skew component into your display object,\n                                and set its pipeline to 'PhaserTextureTintPipeline' by calling 'setPiepline' method, more detail please refer to the 'ReplaceSlotDisplay.ts' example")},Slot.prototype._removeDisplay=function(){this._renderDisplay.parentContainer.remove(this._renderDisplay)},Slot.prototype._updateDisplayData=function(){n.prototype._updateDisplayData.call(this),null!==this.armature.replacedTexture&&(this._textureDirty=!0)},Slot.prototype._updateZOrder=function(){this._renderDisplay.depth!==this._zOrder&&this._renderDisplay.setDepth(this._zOrder)},Slot.prototype._updateVisible=function(){this._renderDisplay.setVisible(this._parent.visible&&this._visible)},Slot.prototype._updateBlendMode=function(){var e=Phaser.BlendModes.NORMAL;switch(this._blendMode){case 0:e=Phaser.BlendModes.NORMAL;break;case 1:e=Phaser.BlendModes.ADD;break;case 3:e=Phaser.BlendModes.DARKEN;break;case 4:e=Phaser.BlendModes.DIFFERENCE;break;case 6:e=Phaser.BlendModes.HARD_LIGHT;break;case 9:e=Phaser.BlendModes.LIGHTEN;break;case 10:e=Phaser.BlendModes.MULTIPLY;break;case 11:e=Phaser.BlendModes.OVERLAY;break;case 12:e=Phaser.BlendModes.SCREEN}this._renderDisplay.setBlendMode(e)},Slot.prototype._updateColor=function(){var e=this._colorTransform,n=this._globalAlpha*e.alphaMultiplier+e.alphaOffset;if(this._renderDisplay.setAlpha(n),!(this._renderDisplay instanceof i.DisplayContainer)){var a=255*e.redMultiplier+e.redOffset<<16|255*e.greenMultiplier+e.greenOffset<<8|255*e.blueMultiplier+e.blueOffset;this._renderDisplay.setTint(a)}},Slot.prototype._updateFrame=function(){if(!(this._renderDisplay instanceof i.DisplayContainer)){var n=this._textureData;if(this._displayIndex>=0&&null!==this._display&&null!==n){var a=n.parent;null!==this.armature.replacedTexture&&(null===this.armature._replaceTextureAtlasData?((a=e.BaseObject.borrowObject(i.TextureAtlasData)).copyFrom(n.parent),a.renderTexture=this.armature.replacedTexture,this.armature._replaceTextureAtlasData=a):a=this.armature._replaceTextureAtlasData,n=a.getTexture(n.name));var s=n.renderTexture;if(null!==s){if(null!==this._geometryData){var o=this._geometryData.data,h=o.intArray,l=o.floatArray,c=h[this._geometryData.offset+0],m=h[this._geometryData.offset+1],f=h[this._geometryData.offset+2];f<0&&(f+=65536);var g=f+2*c,_=this._armature._armatureData.scale,T=this._renderDisplay,x=n.region;T.fakeVertices=new Float32Array(2*c),T.fakeUvs=new Float32Array(2*c),T.fakeIndices=new Uint16Array(3*m);for(var S=0,j=2*c;S<j;++S)T.fakeVertices[S]=l[f+S]*_;for(S=0;S<3*m;++S)T.fakeIndices[S]=h[this._geometryData.offset+4+S];for(S=0,j=2*c;S<j;S+=2){var q=l[g+S],Y=l[g+S+1];n.rotated?(T.fakeUvs[S]=(x.x+(1-Y)*x.width)/a.width,T.fakeUvs[S+1]=(x.y+q*x.height)/a.height):(T.fakeUvs[S]=(x.x+q*x.width)/a.width,T.fakeUvs[S+1]=(x.y+Y*x.height)/a.height)}this._textureScale=1,T.texture=s.texture,T.frame=s,T.updateVertices();var X=null!==this._geometryData.weight,Z=0!==this._parent._boneData.type;(X||Z)&&this._identityTransform()}else this._renderDisplay.texture=s.texture,this._renderDisplay.frame=s,this._renderDisplay.setDisplayOrigin(this._pivotX,this._pivotY),this._textureScale=n.parent.scale*this.armature.armatureData.scale,this._renderDisplay.setScale(this._textureScale);return void(this._visibleDirty=!0)}}else this._renderDisplay.x=0,this._renderDisplay.y=0,this._renderDisplay.setTexture(void 0)}},Slot.prototype._updateMesh=function(){var e=this._armature._armatureData.scale,i=this._displayFrame.deformVertices,n=this._geometryBones,a=this._geometryData,s=a.weight,o=i.length>0&&a.inheritDeform,h=this._renderDisplay;if(null!==s){var l=(nt=a.data).intArray,c=nt.floatArray,m=l[a.offset+0],f=l[s.offset+1];f<0&&(f+=65536);for(var g=0,_=0,T=s.offset+2+n.length,x=f,S=0;g<m;++g){for(var j=l[T++],q=0,Y=0,X=0;X<j;++X){var Z=n[l[T++]];if(null!==Z){var $=Z.globalTransformMatrix,tt=c[x++],et=c[x++]*e,it=c[x++]*e;o&&(et+=i[S++],it+=i[S++]),q+=($.a*et+$.c*it+$.tx)*tt,Y+=($.b*et+$.d*it+$.ty)*tt}}h.fakeVertices[_++]=q,h.fakeVertices[_++]=Y}}else{var nt,rt=0!==this._parent._boneData.type,at=(l=(nt=a.data).intArray,c=nt.floatArray,m=l[a.offset+0],l[a.offset+2]);at<0&&(at+=65536);g=0;for(var st=2*m;g<st;g+=2){var ot=c[at+g]*e,ht=c[at+g+1]*e;if(o&&(ot+=i[g],ht+=i[g+1]),rt){$=this._parent._getGlobalTransformMatrix(ot,ht);h.fakeVertices[g]=$.a*ot+$.c*ht+$.tx,h.fakeVertices[g+1]=$.b*ot+$.d*ht+$.ty}else h.fakeVertices[g]=ot,h.fakeVertices[g+1]=ht}}h.updateVertices()},Slot.prototype._updateTransform=function(){this.updateGlobalTransform();var e=this.global;this._renderDisplay.x=e.x,this._renderDisplay.y=e.y,this._renderDisplay.rotation=e.rotation,this._renderDisplay.setSkew(e.skew,0),this._renderDisplay.setScale(e.scaleX*this._textureScale,e.scaleY*this._textureScale)},Slot.prototype._identityTransform=function(){this._renderDisplay.setPosition(),this._renderDisplay.setRotation(),this._textureScale=1,this._renderDisplay.setScale(this._textureScale),this._renderDisplay.setSkew(0)},Slot}(e.Slot);i.Slot=n}(i.display||(i.display={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(i){!function(i){var n=function(i){function TextureAtlasData(){var e=null!==i&&i.apply(this,arguments)||this;return e._renderTexture=null,e}return s(TextureAtlasData,i),TextureAtlasData.toString=function(){return"[class dragonBones.PhaserTextureAtlasData]"},TextureAtlasData.prototype._onClear=function(){i.prototype._onClear.call(this),null!==this._renderTexture&&this._renderTexture.destroy(),this._renderTexture=null},TextureAtlasData.prototype.createTexture=function(){return e.BaseObject.borrowObject(a)},Object.defineProperty(TextureAtlasData.prototype,"renderTexture",{get:function(){return this._renderTexture},set:function(e){if(e&&this._renderTexture!==e)for(var i in this._renderTexture&&this._renderTexture.destroy(),this._renderTexture=e,this.textures){var n=this.textures[i],a=this._renderTexture.add(i,0,n.region.x,n.region.y,n.region.width,n.region.height);n.rotated&&(a.rotated=!0,a.updateUVsInverted()),n.renderTexture=a}},enumerable:!0,configurable:!0}),TextureAtlasData.prototype.releaseRenderTexture=function(){this._renderTexture=null},TextureAtlasData}(e.TextureAtlasData);i.TextureAtlasData=n;var a=function(e){function TextureData(){var i=null!==e&&e.apply(this,arguments)||this;return i.renderTexture=null,i}return s(TextureData,e),TextureData.toString=function(){return"[class dragonBones.PhaserTextureData]"},TextureData.prototype._onClear=function(){e.prototype._onClear.call(this),null!==this.renderTexture&&this.renderTexture.destroy(),this.renderTexture=null},TextureData}(e.TextureData);i.TextureData=a}(i.display||(i.display={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(e){!function(i){var n=function(i){function TextureTintPipeline(n){var a=i.call(this,n)||this;return a._tempMatrix1=new e.util.TransformMatrix,a._tempMatrix2=new e.util.TransformMatrix,a._tempMatrix3=new e.util.TransformMatrix,a}return s(TextureTintPipeline,i),TextureTintPipeline.prototype.batchSprite=function(e,i,n){this.renderer.setPipeline(this);var a=this._tempMatrix1,s=this._tempMatrix2,o=this._tempMatrix3,h=e.frame,l=h.glTexture,c=h.u0,m=h.v0,f=h.u1,g=h.v1,_=h.x,T=h.y,x=h.width,S=h.height,j=-e.displayOriginX+_,q=-e.displayOriginY+T;if(e.isCropped){var Y=e._crop;Y.flipX===e.flipX&&Y.flipY===e.flipY||h.updateCropUVs(Y,e.flipX,e.flipY),c=Y.u0,m=Y.v0,f=Y.u1,g=Y.v1,x=Y.width,S=Y.height,_=Y.x,T=Y.y,j=-e.displayOriginX+_,q=-e.displayOriginY+T}e.flipX&&(j+=x,x*=-1),e.flipY&&(q+=S,S*=-1);var X=j+x,Z=q+S;s.applyITRSC(e.x,e.y,e.rotation,e.scaleX,e.scaleY,e.skewX||0,e.skewY||0),a.copyFrom(i.matrix),n?(a.multiplyWithOffset(n,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),s.e=e.x,s.f=e.y,a.multiply(s,o)):(s.e-=i.scrollX*e.scrollFactorX,s.f-=i.scrollY*e.scrollFactorY,a.multiply(s,o));var $=o.getX(j,q),tt=o.getY(j,q),et=o.getX(j,Z),it=o.getY(j,Z),nt=o.getX(X,Z),rt=o.getY(X,Z),at=o.getX(X,q),st=o.getY(X,q),ot=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha(e._tintTL,i.alpha*e._alphaTL),ht=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha(e._tintTR,i.alpha*e._alphaTR),lt=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha(e._tintBL,i.alpha*e._alphaBL),ct=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha(e._tintBR,i.alpha*e._alphaBR);i.roundPixels&&($|=0,tt|=0,et|=0,it|=0,nt|=0,rt|=0,at|=0,st|=0),this.setTexture2D(l,0);var pt=e._isTinted&&e.tintFill;this.batchQuad($,tt,et,it,nt,rt,at,st,c,m,f,g,ot,ht,lt,ct,pt)},TextureTintPipeline}(Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline);i.TextureTintPipeline=n}(e.pipeline||(e.pipeline={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(e){!function(e){e.FileTypes={IMAGE:"imageFile",JSON:"jsonFile",BINARY:"binaryFile",map:{imageFile:Phaser.Loader.FileTypes.ImageFile,jsonFile:Phaser.Loader.FileTypes.JSONFile,binaryFile:Phaser.Loader.FileTypes.BinaryFile},setType:function(i,n){e.FileTypes.map[i]=n},getType:function(i){return e.FileTypes.map[i]}}}(e.plugin||(e.plugin={}))}(e.phaser||(e.phaser={}))}(m||(m={})),function(e){!function(e){!function(e){var i=function(i){function DragonBonesFile(n,a,s,o,h,l,c,m){var f,g,_,T,x=e.FileTypes.getType(e.FileTypes.BINARY),S=e.FileTypes.getType(e.FileTypes.JSON),j=e.FileTypes.getType(e.FileTypes.IMAGE),createBoneFileByType=function(e,i,n,a){var s="json";if(a&&a.responseType)switch(a.responseType){case"arraybuffer":case"blob":s="bin";break;case"json":case"text":s="json"}return"bin"===s?new x(e,i,n,a):new S(e,i,n,a)};if(Phaser.Utils.Objects.IsPlainObject(a)){var q=a;f=new j(n,{key:T=Phaser.Utils.Objects.GetFastValue(q,"key"),url:Phaser.Utils.Objects.GetFastValue(q,"textureURL"),extension:Phaser.Utils.Objects.GetFastValue(q,"textureExtension","png"),xhrSettings:Phaser.Utils.Objects.GetFastValue(q,"textureXhrSettings")}),g=new S(n,{key:T+"_atlasjson",url:Phaser.Utils.Objects.GetFastValue(q,"atlasURL"),extension:Phaser.Utils.Objects.GetFastValue(q,"atlasExtension","json"),xhrSettings:Phaser.Utils.Objects.GetFastValue(q,"atlasXhrSettings")}),_=createBoneFileByType(n,T,Phaser.Utils.Objects.GetFastValue(q,"boneURL"),Phaser.Utils.Objects.GetFastValue(q,"boneXhrSettings"))}else f=new j(n,T=a,s,l),g=new S(n,T+"_atlasjson",o,c),_=createBoneFileByType(n,T,h,m);return _.cache=n.cacheManager.custom.dragonbone,i.call(this,n,"dragonbone",T,[f,g,_])||this}return s(DragonBonesFile,i),DragonBonesFile.prototype.addToCache=function(){if(this.isReadyToProcess()){var e=this.files[0],i=this.files[1],n=this.files[2];i.addToCache(),n.addToCache(),e.addToCache(),this.complete=!0}},DragonBonesFile}(Phaser.Loader.MultiFile);e.DragonBonesFile=i}(e.plugin||(e.plugin={}))}(e.phaser||(e.phaser={}))}(m||(m={})),c=m||(m={}),function(e){var i=function(e){function DragonBonesScenePlugin(i,n){var a=e.call(this,i,n)||this,s=a.game;if(s.cache.addCustom("dragonbone"),a.game.config.renderType===Phaser.WEBGL){var o=a.game.renderer;o.hasPipeline("PhaserTextureTintPipeline")||o.addPipeline("PhaserTextureTintPipeline",new l.pipeline.TextureTintPipeline({game:s,renderer:o}))}return n.registerGameObject("dragonBones",CreateDragonBonesRegisterHandler),n.registerGameObject("armature",CreateArmatureRegisterHandler),n.registerFileType("dragonbone",DragonBoneFileRegisterHandler,i),a}return s(DragonBonesScenePlugin,e),DragonBonesScenePlugin.prototype.createArmature=function(e,i,n,a,s){void 0===s&&(s=1);var o=this.factory.buildArmatureDisplay(e,i,n,a,s);return this.systems.displayList.add(o),this._dbInst.clock.add(o.armature),o},DragonBonesScenePlugin.prototype.createDragonBones=function(e,i){return void 0===i&&(i=1),this.factory.buildDragonBonesData(e,i)},Object.defineProperty(DragonBonesScenePlugin.prototype,"factory",{get:function(){return this._factory||(this._dbInst=new m.DragonBones(new l.util.EventDispatcher),this._factory=new l.Factory(this._dbInst,this.scene)),this._factory},enumerable:!0,configurable:!0}),DragonBonesScenePlugin.prototype.createSlotDisplayPlaceholder=function(){return new l.display.SlotImage(this.scene,0,0)},DragonBonesScenePlugin.prototype.boot=function(){this.systems.events.once("destroy",this.destroy,this),this.start()},DragonBonesScenePlugin.prototype.start=function(){var e=this.systems.events;e.on("update",this.update,this),e.once("shutdown",this.shutdown,this)},DragonBonesScenePlugin.prototype.update=function(e,i){this._dbInst&&this._dbInst.advanceTime(.001*i)},DragonBonesScenePlugin.prototype.shutdown=function(){var e=this.systems.events;e.off("update",this.update,this),e.off("shutdown",this.shutdown,this)},DragonBonesScenePlugin.prototype.destroy=function(){this.shutdown(),this._factory=this._dbInst=null,this.pluginManager=this.game=this.scene=this.systems=null},DragonBonesScenePlugin.prototype.createMeshDisplayPlaceholder=function(){return new l.display.SlotMesh(this.scene,0,0,[],[],[],[],null,null)},DragonBonesScenePlugin}(Phaser.Plugins.ScenePlugin);e.DragonBonesScenePlugin=i;var CreateDragonBonesRegisterHandler=function(e,i){return void 0===i&&(i=1),this.scene.dragonbone.createDragonBones(e,i)},CreateArmatureRegisterHandler=function(e,i,n,a){return this.scene.dragonbone.createArmature(e,i,n,a)},DragonBoneFileRegisterHandler=function(i,n,a,s,o,h,l){var c=new e.DragonBonesFile(this,i,n,a,s,o,h,l);return this.addFile(c.files),this}}((l=c.phaser||(c.phaser={})).plugin||(l.plugin={})),function(e){var i=function(i){function Factory(e,n,a){var s=i.call(this,a)||this;return s._scene=n,s._dragonBones=e,s}return s(Factory,i),Factory.prototype._isSupportMesh=function(){return!0},Factory.prototype._buildTextureAtlasData=function(i,n){return i?i.renderTexture=n:i=f.BaseObject.borrowObject(e.display.TextureAtlasData),i},Factory.prototype._buildArmature=function(i){var n=f.BaseObject.borrowObject(f.Armature),a=new e.display.ArmatureDisplay(this._scene);return n.init(i.armature,a,a,this._dragonBones),n},Factory.prototype._buildSlot=function(i,n,a){var s=f.BaseObject.borrowObject(e.display.Slot),o=this._scene.dragonbone.createSlotDisplayPlaceholder(),h=this._scene.dragonbone.createMeshDisplayPlaceholder();return s.init(n,a,o,h),s},Factory.prototype.buildArmatureDisplay=function(e,i,n,a,s){var o;return void 0===n&&(n=""),void 0===a&&(a=""),void 0===s&&(s=1),this.buildDragonBonesData(i,s)&&(o=this.buildArmature(e,i,n,a)),o.display},Factory.prototype.buildDragonBonesData=function(e,i){void 0===i&&(i=1);var n=this._dragonBonesDataMap[e];if(!n){var a=this._scene.cache,s=a.custom.dragonbone.get(e);if(s){n=this.parseDragonBonesData(s,e,i);var o=this._scene.textures.get(e),h=a.json.get(e+"_atlasjson");this.parseTextureAtlasData(h,o,o.key,i)}}return n},Object.defineProperty(Factory.prototype,"soundEventManager",{get:function(){return this._dragonBones.eventManager},enumerable:!0,configurable:!0}),Factory}(f.BaseFactory);e.Factory=i}((f=m||(m={})).phaser||(f.phaser={}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,i,n){var a={"./LOGO_F.png":729,"./butt_red_middle.png":730,"./config/base/state.json":731,"./config/base/state/repair.json":732,"./config/base/state/unfrozen.json":733,"./config/itemcategory.json":734,"./dragonbones/avatar.png":735,"./dragonbones/bones_human01_ske.dbbin":736,"./dragonbones/bones_human01_tex.json":737,"./dragonbones/bones_human01_tex.png":738,"./dragonbones/bones_human01scaleup_ske.dbbin":739,"./dragonbones/bones_model_head_ske.dbbin":740,"./dragonbones/bones_model_head_tex.json":741,"./dragonbones/bones_model_head_tex.png":742,"./dragonbones/library/bones_human01_tex.png":743,"./fonts/04B.ttf":744,"./fonts/en/tt0173m_.ttf":745,"./fonts/en/tt0503m_.ttf":746,"./gamepause.png":747,"./guide/guideBg.png":748,"./guide/guideMask.png":749,"./locales/en.json":750,"./locales/zh-CN.json":751,"./scripts/webfont/1.6.26/webfont":110,"./scripts/webfont/1.6.26/webfont.js":110,"./sound/click.mp3":752,"./testmanor.json":753,"./testmanor.png":754,"./ui/1x/bubble/bubblebg.png":111,"./ui/1x/bubble/tipsicon.png":112,"./ui/1x/common/ui_base.json":113,"./ui/1x/common/ui_base.png":114,"./ui/1x/create_role/create_role.json":115,"./ui/1x/create_role/create_role.png":116,"./ui/1x/equip_upgrade/mine_eqpm.json":117,"./ui/1x/equip_upgrade/mine_eqpm.png":118,"./ui/1x/loading/curtain.json":119,"./ui/1x/loading/curtain.png":120,"./ui/1x/login/login.json":121,"./ui/1x/login/login.png":122,"./ui/1x/market/market.json":123,"./ui/1x/market/market.png":124,"./ui/1x/repair_furniture/repair_furniture.json":125,"./ui/1x/repair_furniture/repair_furniture.png":126,"./ui/1x/ui_base/ui_base.json":127,"./ui/1x/ui_base/ui_base.png":128,"./ui/2x/activity/activity.json":129,"./ui/2x/activity/activity.png":130,"./ui/2x/bottom/bottom.json":131,"./ui/2x/bottom/bottom.png":132,"./ui/2x/bubble/bubblebg.png":133,"./ui/2x/bubble/tipsicon.png":134,"./ui/2x/bulletin/bulletin.json":135,"./ui/2x/bulletin/bulletin.png":136,"./ui/2x/c_street_1/c_street_1.json":137,"./ui/2x/c_street_1/c_street_1.png":138,"./ui/2x/c_street_2/c_street_2.json":139,"./ui/2x/c_street_2/c_street_2.png":140,"./ui/2x/chat/chat.json":141,"./ui/2x/chat/chat.png":142,"./ui/2x/circleeffect/circleeffect.json":143,"./ui/2x/circleeffect/circleeffect.png":144,"./ui/2x/compose/compose.json":145,"./ui/2x/compose/compose.png":146,"./ui/2x/cooking/cooking.json":147,"./ui/2x/cooking/cooking.png":148,"./ui/2x/createrole/createrole.json":149,"./ui/2x/createrole/createrole.png":150,"./ui/2x/cutInmenu/cutInmenu.json":151,"./ui/2x/cutInmenu/cutInmenu.png":152,"./ui/2x/cut_in/cut_in_bg.png":153,"./ui/2x/decorateshop/decorateshop.json":154,"./ui/2x/decorateshop/decorateshop.png":155,"./ui/2x/e_roomupgrade/e_roomupgrade.json":156,"./ui/2x/e_roomupgrade/e_roomupgrade.png":157,"./ui/2x/effect_common/effect_common.json":158,"./ui/2x/effect_common/effect_common.png":159,"./ui/2x/effectlevelup/effectlevelup.json":160,"./ui/2x/effectlevelup/effectlevelup.png":161,"./ui/2x/equip_upgrade/mine_eqpm.json":162,"./ui/2x/equip_upgrade/mine_eqpm.png":163,"./ui/2x/explorelog/explore_bg_stripe_middle.png":164,"./ui/2x/explorelog/explore_bg_stripe_top.png":165,"./ui/2x/explorelog/explore_mask.png":166,"./ui/2x/explorelog/explorelog.json":167,"./ui/2x/explorelog/explorelog.png":168,"./ui/2x/friend_list/friend_list.json":169,"./ui/2x/friend_list/friend_list.png":170,"./ui/2x/friend_message/friend_message.json":171,"./ui/2x/friend_message/friend_message.png":172,"./ui/2x/furni_bag/furni_bag.json":173,"./ui/2x/furni_bag/furni_bag.png":174,"./ui/2x/furni_unlock/furni_unlock.json":175,"./ui/2x/furni_unlock/furni_unlock.png":176,"./ui/2x/gifteffect/gifteffect.json":177,"./ui/2x/gifteffect/gifteffect.png":178,"./ui/2x/hand_equp/hand_equp.json":179,"./ui/2x/hand_equp/hand_equp.png":180,"./ui/2x/icon_common/icon_common.json":181,"./ui/2x/icon_common/icon_common.png":182,"./ui/2x/illustrate/illustrate.json":183,"./ui/2x/illustrate/illustrate.png":184,"./ui/2x/illustrate_new/illustrate_new.json":185,"./ui/2x/illustrate_new/illustrate_new.png":186,"./ui/2x/item_pop_card/item_pop_card.json":187,"./ui/2x/item_pop_card/item_pop_card.png":188,"./ui/2x/layout/layout.json":189,"./ui/2x/layout/layout.png":190,"./ui/2x/loading/curtain.json":191,"./ui/2x/loading/curtain.png":192,"./ui/2x/loading_ui/loading_ui.json":193,"./ui/2x/loading_ui/loading_ui.png":194,"./ui/2x/login/login.json":195,"./ui/2x/login/login.png":196,"./ui/2x/mail/mail.json":197,"./ui/2x/mail/mail.png":198,"./ui/2x/main_ui/mainui.json":199,"./ui/2x/main_ui/mainui.png":200,"./ui/2x/manor/manor.json":201,"./ui/2x/manor/manor.png":202,"./ui/2x/map/map.json":203,"./ui/2x/map/map.png":204,"./ui/2x/map/map_room_icon.png":205,"./ui/2x/map/party_icon_1.png":206,"./ui/2x/map/town_entrance_1.png":207,"./ui/2x/market/market.json":208,"./ui/2x/market/market.png":209,"./ui/2x/mask_loading/mask_loading.json":210,"./ui/2x/mask_loading/mask_loading.png":211,"./ui/2x/mine_car/mine_car.json":212,"./ui/2x/mine_car/mine_car.png":213,"./ui/2x/mine_new/mine_new.json":214,"./ui/2x/mine_new/mine_new.png":215,"./ui/2x/minesettle/settlement.json":216,"./ui/2x/minesettle/settlement.png":217,"./ui/2x/multiple_rooms/multiple_rooms.json":218,"./ui/2x/multiple_rooms/multiple_rooms.png":219,"./ui/2x/order/order.json":220,"./ui/2x/order/order.png":221,"./ui/2x/party/party.json":222,"./ui/2x/party/party.png":223,"./ui/2x/people_action/people_action.json":224,"./ui/2x/people_action/people_action.png":225,"./ui/2x/pica_alert/pica_alert.json":226,"./ui/2x/pica_alert/pica_alert.png":227,"./ui/2x/pica_boot/login_notice_bg.png":228,"./ui/2x/pica_boot/pica_boot.json":229,"./ui/2x/pica_boot/pica_boot.png":230,"./ui/2x/pica_chat/pica_chat.json":231,"./ui/2x/pica_chat/pica_chat.png":232,"./ui/2x/pica_login/pica_login.json":233,"./ui/2x/pica_login/pica_login.png":234,"./ui/2x/pica_message_box/pica_message_box.json":235,"./ui/2x/pica_message_box/pica_message_box.png":236,"./ui/2x/pica_navigate/pica_navigate_cn.json":237,"./ui/2x/pica_navigate/pica_navigate_cn.png":238,"./ui/2x/pica_navigate/pica_navigate_en.json":239,"./ui/2x/pica_navigate/pica_navigate_en.png":240,"./ui/2x/pica_notice/bg.png":241,"./ui/2x/pica_notice/bg_big.png":242,"./ui/2x/pica_roomlist/pica_roomlist.json":243,"./ui/2x/pica_roomlist/pica_roomlist.png":244,"./ui/2x/player_info/player_info.json":245,"./ui/2x/player_info/player_info.png":246,"./ui/2x/reaward_tips/bg.png":247,"./ui/2x/recast/recast.json":248,"./ui/2x/recast/recast.png":249,"./ui/2x/recharge/recharge.json":250,"./ui/2x/recharge/recharge.png":251,"./ui/2x/repair_furniture/repair_furniture.json":252,"./ui/2x/repair_furniture/repair_furniture.png":253,"./ui/2x/roam/roam.json":254,"./ui/2x/roam/roam.png":255,"./ui/2x/roam/roam_stripe.png":256,"./ui/2x/roam/roam_topic.png":257,"./ui/2x/roam/roam_topic1.png":258,"./ui/2x/room_decorate/room_decorate.json":259,"./ui/2x/room_decorate/room_decorate.png":260,"./ui/2x/room_information/room_information.json":261,"./ui/2x/room_information/room_information.png":262,"./ui/2x/stareffect/stareffect.json":263,"./ui/2x/stareffect/stareffect.png":264,"./ui/2x/survey/survey.json":265,"./ui/2x/survey/survey.png":266,"./ui/2x/task/task.json":267,"./ui/2x/task/task.png":268,"./ui/2x/texture/Create_bg_texture.png":269,"./ui/2x/texture/Create_role_bg.png":270,"./ui/2x/texture/Recast_aims_icon_bg.png":271,"./ui/2x/texture/Recast_bg_texture.png":272,"./ui/2x/texture/Recast_list_bg.png":273,"./ui/2x/texture/avater_bg_adorn.png":274,"./ui/2x/texture/avater_bg_stripe.png":275,"./ui/2x/texture/bag_bg.png":276,"./ui/2x/treasure/treasure.json":277,"./ui/2x/treasure/treasure.png":278,"./ui/2x/ui_base/ui_base.json":279,"./ui/2x/ui_base/ui_base.png":280,"./ui/2x/ui_base2/ui_base2.json":281,"./ui/2x/ui_base2/ui_base2.png":282,"./ui/2x/ui_base3/ui_base3.json":283,"./ui/2x/ui_base3/ui_base3.png":284,"./ui/2x/ui_common/ui_common.json":285,"./ui/2x/ui_common/ui_common.png":286,"./ui/2x/ui_common1/ui_common1.json":287,"./ui/2x/ui_common1/ui_common1.png":288,"./ui/2x/work/work.json":289,"./ui/2x/work/work.png":290,"./ui/3x/activity/activity.json":291,"./ui/3x/activity/activity.png":292,"./ui/3x/bottom/bottom.json":293,"./ui/3x/bottom/bottom.png":294,"./ui/3x/bubble/bubblebg.png":295,"./ui/3x/bubble/tipsicon.png":296,"./ui/3x/bulletin/bulletin.json":297,"./ui/3x/bulletin/bulletin.png":298,"./ui/3x/c_street_1/c_street_1.json":299,"./ui/3x/c_street_1/c_street_1.png":300,"./ui/3x/c_street_2/c_street_2.json":301,"./ui/3x/c_street_2/c_street_2.png":302,"./ui/3x/chat/chat.json":303,"./ui/3x/chat/chat.png":304,"./ui/3x/circleeffect/circleeffect.json":305,"./ui/3x/circleeffect/circleeffect.png":306,"./ui/3x/compose/bprint_bg_1.png":307,"./ui/3x/compose/bprint_bg_2.png":308,"./ui/3x/compose/bprint_mask.png":309,"./ui/3x/compose/compose.json":310,"./ui/3x/compose/compose.png":311,"./ui/3x/compose/lock.png":312,"./ui/3x/compose/main_bg.jpg":313,"./ui/3x/compose/main_bg.png":314,"./ui/3x/compose/main_bg_01.png":315,"./ui/3x/compose/separator.png":316,"./ui/3x/compose/source_bg.png":317,"./ui/3x/compose/sourcelist_bg.png":318,"./ui/3x/compose/sourcelist_title_1.png":319,"./ui/3x/compose/tag_new.png":320,"./ui/3x/compose/tag_rank_a.png":321,"./ui/3x/compose/tag_rank_b.png":322,"./ui/3x/compose/tag_rank_c.png":323,"./ui/3x/compose/tag_ready.png":324,"./ui/3x/compose/tips_arrow.png":325,"./ui/3x/compose/tips_bg.png":326,"./ui/3x/compose/title_bg.png":327,"./ui/3x/cooking/cooking.json":328,"./ui/3x/cooking/cooking.png":329,"./ui/3x/createrole/createrole.json":330,"./ui/3x/createrole/createrole.png":331,"./ui/3x/cutInmenu/cutInmenu.json":332,"./ui/3x/cutInmenu/cutInmenu.png":333,"./ui/3x/cut_in/cut_in_bg.png":334,"./ui/3x/decorateshop/decorateshop.json":335,"./ui/3x/decorateshop/decorateshop.png":336,"./ui/3x/e_roomupgrade/e_roomupgrade.json":337,"./ui/3x/e_roomupgrade/e_roomupgrade.png":338,"./ui/3x/e_roomupgrade/effect_bg.png":339,"./ui/3x/e_roomupgrade/lv0.png":340,"./ui/3x/e_roomupgrade/lv1.png":341,"./ui/3x/e_roomupgrade/lv2.png":342,"./ui/3x/e_roomupgrade/lv3.png":343,"./ui/3x/e_roomupgrade/lv4.png":344,"./ui/3x/e_roomupgrade/room_decorate/room_decorate.json":345,"./ui/3x/e_roomupgrade/room_decorate/room_decorate.png":346,"./ui/3x/e_roomupgrade/tittle_bg.png":347,"./ui/3x/effect_common/effect_common.json":348,"./ui/3x/effect_common/effect_common.png":349,"./ui/3x/effectlevelup/effectlevelup.json":350,"./ui/3x/effectlevelup/effectlevelup.png":351,"./ui/3x/equip_upgrade/bg1.png":352,"./ui/3x/equip_upgrade/bottombg.png":353,"./ui/3x/equip_upgrade/bottombg1.png":354,"./ui/3x/equip_upgrade/equipbg.png":355,"./ui/3x/equip_upgrade/equipbg1.png":356,"./ui/3x/equip_upgrade/equipbg2.png":357,"./ui/3x/equip_upgrade/lock.png":358,"./ui/3x/equip_upgrade/mine_eqpm.json":359,"./ui/3x/equip_upgrade/mine_eqpm.png":360,"./ui/3x/equip_upgrade/ok.png":361,"./ui/3x/equip_upgrade/test_equip.png":362,"./ui/3x/equip_upgrade/titlebg.png":363,"./ui/3x/equip_upgrade/topbg.png":364,"./ui/3x/equip_upgrade/topbg1.png":365,"./ui/3x/explorelog/explore_bg_stripe_middle.png":366,"./ui/3x/explorelog/explore_bg_stripe_top.png":367,"./ui/3x/explorelog/explore_mask.png":368,"./ui/3x/explorelog/explorelog.json":369,"./ui/3x/explorelog/explorelog.png":370,"./ui/3x/friend_list/friend_list.json":371,"./ui/3x/friend_list/friend_list.png":372,"./ui/3x/friend_message/friend_message.json":373,"./ui/3x/friend_message/friend_message.png":374,"./ui/3x/furni_bag/furni_bag.json":375,"./ui/3x/furni_bag/furni_bag.png":376,"./ui/3x/furni_unlock/furni_unlock.json":377,"./ui/3x/furni_unlock/furni_unlock.png":378,"./ui/3x/gifteffect/gifteffect.json":379,"./ui/3x/gifteffect/gifteffect.png":380,"./ui/3x/hand_equp/button_h.png":381,"./ui/3x/hand_equp/button_t.png":382,"./ui/3x/hand_equp/click_bg.png":383,"./ui/3x/hand_equp/empty_handed.png":384,"./ui/3x/hand_equp/equp_bg.png":385,"./ui/3x/hand_equp/hand.png":386,"./ui/3x/hand_equp/hand_equp.json":387,"./ui/3x/hand_equp/hand_equp.png":388,"./ui/3x/hand_equp/list_bg.png":389,"./ui/3x/hand_equp/superscript_h.png":390,"./ui/3x/icon_common/icon_common.json":391,"./ui/3x/icon_common/icon_common.png":392,"./ui/3x/illustrate/illustrate.json":393,"./ui/3x/illustrate/illustrate.png":394,"./ui/3x/illustrate_new/illustrate_new.json":395,"./ui/3x/illustrate_new/illustrate_new.png":396,"./ui/3x/item_pop_card/bg.png":397,"./ui/3x/item_pop_card/close.png":398,"./ui/3x/item_pop_card/des_bg.png":399,"./ui/3x/item_pop_card/item_pop_card.json":400,"./ui/3x/item_pop_card/item_pop_card.png":401,"./ui/3x/item_pop_card/name_bg.png":402,"./ui/3x/layout/layout.json":403,"./ui/3x/layout/layout.png":404,"./ui/3x/loading/curtain.json":405,"./ui/3x/loading/curtain.png":406,"./ui/3x/loading/grass.json":407,"./ui/3x/loading/grass.png":408,"./ui/3x/loading/loading.json":409,"./ui/3x/loading/loading.png":410,"./ui/3x/loading/loading_bg.jpeg":411,"./ui/3x/loading_ui/loading_ui.json":412,"./ui/3x/loading_ui/loading_ui.png":413,"./ui/3x/login/login.json":414,"./ui/3x/login/login.png":415,"./ui/3x/mail/mail.json":416,"./ui/3x/mail/mail.png":417,"./ui/3x/main_ui/mainui.json":418,"./ui/3x/main_ui/mainui.png":419,"./ui/3x/manor/manor.json":420,"./ui/3x/manor/manor.png":421,"./ui/3x/map/map.json":422,"./ui/3x/map/map.png":423,"./ui/3x/map/map_room_icon.png":424,"./ui/3x/map/party_icon_1.png":425,"./ui/3x/map/town_entrance_1.png":426,"./ui/3x/market/market.json":427,"./ui/3x/market/market.png":428,"./ui/3x/mask_loading/mask_loading.json":429,"./ui/3x/mask_loading/mask_loading.png":430,"./ui/3x/mine_car/mine_car.json":431,"./ui/3x/mine_car/mine_car.png":432,"./ui/3x/mine_new/mine_new.json":433,"./ui/3x/mine_new/mine_new.png":434,"./ui/3x/minesettle/settlement.json":435,"./ui/3x/minesettle/settlement.png":436,"./ui/3x/multiple_rooms/multiple_rooms.json":437,"./ui/3x/multiple_rooms/multiple_rooms.png":438,"./ui/3x/order/order.json":439,"./ui/3x/order/order.png":440,"./ui/3x/party/party.json":441,"./ui/3x/party/party.png":442,"./ui/3x/people_action/people_action.json":443,"./ui/3x/people_action/people_action.png":444,"./ui/3x/pica_alert/pica_alert.json":445,"./ui/3x/pica_alert/pica_alert.png":446,"./ui/3x/pica_boot/login_notice_bg.png":447,"./ui/3x/pica_boot/pica_boot.json":448,"./ui/3x/pica_boot/pica_boot.png":449,"./ui/3x/pica_chat/pica_chat.json":450,"./ui/3x/pica_chat/pica_chat.png":451,"./ui/3x/pica_login/pica_login.json":452,"./ui/3x/pica_login/pica_login.png":453,"./ui/3x/pica_message_box/pica_message_box.json":454,"./ui/3x/pica_message_box/pica_message_box.png":455,"./ui/3x/pica_navigate/pica_navigate_cn.json":456,"./ui/3x/pica_navigate/pica_navigate_cn.png":457,"./ui/3x/pica_navigate/pica_navigate_en.json":458,"./ui/3x/pica_navigate/pica_navigate_en.png":459,"./ui/3x/pica_notice/bg.png":460,"./ui/3x/pica_notice/bg_big.png":461,"./ui/3x/pica_roomlist/pica_roomlist.json":462,"./ui/3x/pica_roomlist/pica_roomlist.png":463,"./ui/3x/player_info/player_info.json":464,"./ui/3x/player_info/player_info.png":465,"./ui/3x/reaward_tips/bg.png":466,"./ui/3x/recast/recast.json":467,"./ui/3x/recast/recast.png":468,"./ui/3x/recharge/recharge.json":469,"./ui/3x/recharge/recharge.png":470,"./ui/3x/repair_furniture/repair_furniture.json":471,"./ui/3x/repair_furniture/repair_furniture.png":472,"./ui/3x/roam/roam.json":473,"./ui/3x/roam/roam.png":474,"./ui/3x/roam/roam_stripe.png":475,"./ui/3x/roam/roam_topic.png":476,"./ui/3x/roam/roam_topic1.png":477,"./ui/3x/room_decorate/room_decorate.json":478,"./ui/3x/room_decorate/room_decorate.png":479,"./ui/3x/room_information/room_information.json":480,"./ui/3x/room_information/room_information.png":481,"./ui/3x/stareffect/stareffect.json":482,"./ui/3x/stareffect/stareffect.png":483,"./ui/3x/survey/survey.json":484,"./ui/3x/survey/survey.png":485,"./ui/3x/task/task.json":486,"./ui/3x/task/task.png":487,"./ui/3x/texture/Create_bg_texture.png":488,"./ui/3x/texture/Create_role_bg.png":489,"./ui/3x/texture/Recast_aims_icon_bg.png":490,"./ui/3x/texture/Recast_bg_texture.png":491,"./ui/3x/texture/Recast_list_bg.png":492,"./ui/3x/texture/avater_bg_adorn.png":493,"./ui/3x/texture/avater_bg_stripe.png":494,"./ui/3x/texture/bag_bg.png":495,"./ui/3x/treasure/treasure.json":496,"./ui/3x/treasure/treasure.png":497,"./ui/3x/ui_base/ui_base.json":498,"./ui/3x/ui_base/ui_base.png":499,"./ui/3x/ui_base2/ui_base2.json":500,"./ui/3x/ui_base2/ui_base2.png":501,"./ui/3x/ui_base3/ui_base3.json":502,"./ui/3x/ui_base3/ui_base3.png":503,"./ui/3x/ui_common/ui_common.json":504,"./ui/3x/ui_common/ui_common.png":505,"./ui/3x/ui_common1/ui_common1.json":506,"./ui/3x/ui_common1/ui_common1.png":507,"./ui/3x/work/work.json":508,"./ui/3x/work/work.png":509,"./ui/bag/bag.json":510,"./ui/bag/bag.png":511,"./ui/bag/bagView.json":512,"./ui/bag/bagView.png":513,"./ui/bag/itemChose.json":514,"./ui/bag/itemChose.png":515,"./ui/bag/slip.json":516,"./ui/bag/slip.png":517,"./ui/baseView/mainui_mobile.json":518,"./ui/baseView/mainui_mobile.png":519,"./ui/chat/bg.png":520,"./ui/chat/bubble_arrow.png":521,"./ui/chat/chat_atlas.json":522,"./ui/chat/chat_atlas.png":523,"./ui/chat/input_bg.png":524,"./ui/common/button.png":525,"./ui/common/button_blue.json":526,"./ui/common/button_blue.png":527,"./ui/common/button_blue_.png":528,"./ui/common/button_red.json":529,"./ui/common/button_red.png":530,"./ui/common/button_transparent.json":531,"./ui/common/button_transparent.png":532,"./ui/common/button_white.json":533,"./ui/common/button_white.png":534,"./ui/common/button_yellow.json":535,"./ui/common/button_yellow.png":536,"./ui/common/common_arrow.png":537,"./ui/common/common_border.png":538,"./ui/common/common_channelSelect.png":539,"./ui/common/common_channelUnSelect.png":540,"./ui/common/common_clsBtn.json":541,"./ui/common/common_clsBtn.png":542,"./ui/common/common_panelBg.png":543,"./ui/common/common_thumb_texture.png":544,"./ui/common/common_track.png":545,"./ui/common/prop_background.png":546,"./ui/controlf/background.png":547,"./ui/create_role/create_role.json":548,"./ui/create_role/create_role.png":549,"./ui/decorate/arrow_1.png":550,"./ui/decorate/arrow_3.png":551,"./ui/decorate/arrow_5.png":552,"./ui/decorate/arrow_7.png":553,"./ui/decorate/confirm_btn.png":554,"./ui/decorate/decorate_atlas.json":555,"./ui/decorate/decorate_atlas.png":556,"./ui/decorate/recycle_btn.png":557,"./ui/decorate/turn_btn.png":558,"./ui/editor/selectFlag.png":559,"./ui/fall_effect/disable.png":560,"./ui/fall_effect/ellipse01.png":561,"./ui/fall_effect/ellipse02.png":562,"./ui/fall_effect/ellipse03.png":563,"./ui/fall_effect/ellipse04.png":564,"./ui/fall_effect/ellipse05.png":565,"./ui/fall_effect/ellipse06.png":566,"./ui/fall_effect/ellipse07.png":567,"./ui/fall_effect/enable01.png":568,"./ui/fall_effect/enable02.png":569,"./ui/fall_effect/enable03.png":570,"./ui/fall_effect/falleffect.json":571,"./ui/fall_effect/falleffect.png":572,"./ui/fall_effect/forbid.png":573,"./ui/friend/friend_chat.png":574,"./ui/friend/friend_go.png":575,"./ui/item_pop_card/bg.png":576,"./ui/item_pop_card/close.png":577,"./ui/item_pop_card/des_bg.png":578,"./ui/item_pop_card/item_pop_card.json":579,"./ui/item_pop_card/item_pop_card.png":580,"./ui/item_pop_card/name_bg.png":581,"./ui/joystick/joystick.json":582,"./ui/joystick/joystick.png":583,"./ui/juqing/juqing.json":584,"./ui/juqing/juqing.png":585,"./ui/loading/loading.json":586,"./ui/loading/loading.png":587,"./ui/login/login.json":588,"./ui/login/login.png":589,"./ui/market/back_arrow.png":590,"./ui/market/bg.png":591,"./ui/market/border.png":592,"./ui/market/categories_down.png":593,"./ui/market/categories_normal.png":594,"./ui/market/detail_bubble.png":595,"./ui/market/increase.png":596,"./ui/market/input_bg.png":597,"./ui/market/item_border.png":598,"./ui/market/market.json":599,"./ui/market/market.png":600,"./ui/market/name_bg.png":601,"./ui/market/price_bg.png":602,"./ui/market/reduce.png":603,"./ui/market/test.png":604,"./ui/market/tip_red.png":605,"./ui/market/tuding_icon.png":606,"./ui/market/yellow_button_down.png":607,"./ui/market/yellow_button_normal.png":608,"./ui/market/yellow_button_over.png":609,"./ui/moneyIcon/tuding_18.png":610,"./ui/moneyIcon/tuding_22.png":611,"./ui/quickchat/en.json":612,"./ui/quickchat/zh-CN.json":613,"./ui/rank/rank_atlas.json":614,"./ui/rank/rank_atlas.png":615,"./ui/roam_effect/roambefore.mp4":616,"./ui/roam_effect/roamone.mp4":617,"./ui/roam_effect/roamreward.mp4":618,"./ui/roam_effect/roamtenrepead.mp4":619,"./ui/roampreview/preview.json":620,"./ui/shop/shopView.json":621,"./ui/shop/shopView.png":622,"./ui/toolTip/toolTip.json":623,"./ui/toolTip/toolTip.png":624,"./ui/usermenu/arrow.png":625,"./ui/vip/vip_effect_back.json":626,"./ui/vip/vip_effect_back.png":627,"./ui/vip/vip_effect_front.json":628,"./ui/vip/vip_effect_front.png":629,"./ui/vip/vip_icon.png":630,"./wall/wall.json":755,"./wall/wall.png":756};function webpackContext(e){var i=webpackContextResolve(e);return n(i)}function webpackContextResolve(e){if(!n.o(a,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return a[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(a)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=728},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/LOGO_F_25d4ec80be4ff49e32b3003206f3ff44.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/butt_red_middle_5b92ad8c003880cc12c9ce7883ea54ba.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/state_411b0c056d1c0302e73e8ba5ca221a67.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/repair_9d146ef12df618eafd31d186ac4012ba.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/unfrozen_406d1864f4366d3ae8f81a4c584107c7.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/itemcategory_311eb68b9427acd374d98bf98d2f716f.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/avatar_7d62c026c793d2c5f621159a6d16797f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bones_human01_ske_a594f8d11db7d627bba4178024d0178e.dbbin"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bones_human01_tex_577096622e5984b20801fac3d08168c6.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bones_human01_tex_c90a6806ad37973faf067902ff683312.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bones_human01scaleup_ske_6e4d38f10c5a1b1bdfde0ae30d633e2e.dbbin"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bones_model_head_ske_b418cb75421d3cc1033a6d67f9285b1d.dbbin"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bones_model_head_tex_65710d7df5e60a0e2bfc670dea03b84b.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bones_model_head_tex_e5a723d641f3127a9bbb53c631a01cb8.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/bones_human01_tex_5da1e033e733e0d7533bf623b509340d.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/04B_fa0c7ac93497ce8b79c76c9f861530f0.ttf"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tt0173m__883b24381423f4611fcaa101faa07c6f.ttf"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/tt0503m__f1eeafd5bec29050e1440f1d2ff3daac.ttf"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/gamepause_09a33665285c532d4f6e48622d162d6f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/guideBg_877291c3cb8bfbf79035612f40b0bc67.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/guideMask_520bbb7b5b64d56920d5085400f4815f.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/en_2198f5141ff80499899ecbe3dba88341.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/zh-CN_ca716772a6f5ff86a48e13a495c213ce.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/click_80468454b0a0bebe559434ae3e53c827.mp3"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/testmanor_08f82434cef4d18c6c7bdf55de18a420.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/testmanor_565ed7d605e01ec8429728b6fa25324b.png"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/wall_0a0ede1a8816ff40e3c0820cb713a4b1.json"},function(e,i,n){"use strict";n.r(i),i.default=n.p+"resources/wall_2c3e30480aa45c86cf215ba3225a53f6.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,i,n){"use strict";n.r(i),n.d(i,"Render",(function(){return S}));n(72);var a,s=n(789),o=(n(670),n(788),n(1073)),h=n(2),l=n(1064),c=n(791),m=n(1063),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaDisplayManager(i){var n=e.call(this,i)||this;return n.render=i,n}return f(PicaDisplayManager,e),PicaDisplayManager.prototype.addFillEffect=function(e,i,n){var a=this.render.sceneManager.getMainScene(),s=new m.a(a,this.render.scaleRatio);s.show(n),s.setPosition(e,i),a.layerManager.addToLayer("sceneUILayer",s)},PicaDisplayManager}(s.DisplayManager),_=n(1065),T=n(1072),x=function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),__decorate=function(e,i,n,a){var s,o=arguments.length,h=o<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(e,i,n,a);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(h=(o<3?s(h):o>3?s(i,n,h):s(i,n))||h);return o>3&&h&&Object.defineProperty(i,n,h),h},S=function(e){function Render(i,n){return e.call(this,i,n)||this}return x(Render,e),Render.prototype.createManager=function(){this.mUiManager||(this.mUiManager=new c.PicaRenderUiManager(this)),this.mGuideManager||(this.mGuideManager=new l.a(this)),this.mCameraManager||(this.mCameraManager=new s.CamerasManager(this)),this.mLocalStorageManager||(this.mLocalStorageManager=new s.LocalStorageManager),this.mSceneManager||(this.mSceneManager=new s.SceneManager(this)),this.mSoundManager||(this.mSoundManager=new s.SoundManager(this)),this.mInputManager||(this.mInputManager=new s.InputManager(this)),this.mDisplayManager||(this.mDisplayManager=new g(this)),this.mEditorCanvasManager||(this.mEditorCanvasManager=new o.a(this))},Render.prototype.switchDecorateMouseManager=function(){if(this.mInputManager){this.mInputManager.changeMouseManager(new _.a(this));var e=this.game.scene.getScene(h.SceneName.PLAY_SCENE);e&&(e.pauseMotion(),e.disableCameraMove())}},__decorate([Object(T.Export)()],Render.prototype,"switchDecorateMouseManager",null),Render}(s.Render)},,function(e,i,n){"use strict";n(1066);var a=n(1109);n.d(i,"CamerasManager",(function(){return a.a}));var s=n(1067);n.o(s,"AlertView")&&n.d(i,"AlertView",(function(){return s.AlertView})),n.o(s,"AlignmentType")&&n.d(i,"AlignmentType",(function(){return s.AlignmentType})),n.o(s,"AnimationModel")&&n.d(i,"AnimationModel",(function(){return s.AnimationModel})),n.o(s,"AxisType")&&n.d(i,"AxisType",(function(){return s.AxisType})),n.o(s,"BackgroundScaleButton")&&n.d(i,"BackgroundScaleButton",(function(){return s.BackgroundScaleButton})),n.o(s,"BaseGuide")&&n.d(i,"BaseGuide",(function(){return s.BaseGuide})),n.o(s,"BasePanel")&&n.d(i,"BasePanel",(function(){return s.BasePanel})),n.o(s,"BasePlaySceneGuide")&&n.d(i,"BasePlaySceneGuide",(function(){return s.BasePlaySceneGuide})),n.o(s,"BubbleAnimation")&&n.d(i,"BubbleAnimation",(function(){return s.BubbleAnimation})),n.o(s,"ButtonEventDispatcher")&&n.d(i,"ButtonEventDispatcher",(function(){return s.ButtonEventDispatcher})),n.o(s,"CheckBoxToggle")&&n.d(i,"CheckBoxToggle",(function(){return s.CheckBoxToggle})),n.o(s,"CheckboxGroup")&&n.d(i,"CheckboxGroup",(function(){return s.CheckboxGroup})),n.o(s,"ConstraintType")&&n.d(i,"ConstraintType",(function(){return s.ConstraintType})),n.o(s,"DisplayManager")&&n.d(i,"DisplayManager",(function(){return s.DisplayManager})),n.o(s,"DragonbonesDisplay")&&n.d(i,"DragonbonesDisplay",(function(){return s.DragonbonesDisplay})),n.o(s,"DynamicImage")&&n.d(i,"DynamicImage",(function(){return s.DynamicImage})),n.o(s,"FrameAnimation")&&n.d(i,"FrameAnimation",(function(){return s.FrameAnimation})),n.o(s,"FramesDisplay")&&n.d(i,"FramesDisplay",(function(){return s.FramesDisplay})),n.o(s,"GridLayoutGroup")&&n.d(i,"GridLayoutGroup",(function(){return s.GridLayoutGroup})),n.o(s,"GuideManager")&&n.d(i,"GuideManager",(function(){return s.GuideManager})),n.o(s,"InputField")&&n.d(i,"InputField",(function(){return s.InputField})),n.o(s,"InputManager")&&n.d(i,"InputManager",(function(){return s.InputManager})),n.o(s,"InputPanel")&&n.d(i,"InputPanel",(function(){return s.InputPanel})),n.o(s,"ItemInfoTips")&&n.d(i,"ItemInfoTips",(function(){return s.ItemInfoTips})),n.o(s,"LabelInput")&&n.d(i,"LabelInput",(function(){return s.LabelInput})),n.o(s,"LocalStorageManager")&&n.d(i,"LocalStorageManager",(function(){return s.LocalStorageManager})),n.o(s,"MainUIScene")&&n.d(i,"MainUIScene",(function(){return s.MainUIScene})),n.o(s,"NinePatch")&&n.d(i,"NinePatch",(function(){return s.NinePatch})),n.o(s,"NinePatchButton")&&n.d(i,"NinePatchButton",(function(){return s.NinePatchButton})),n.o(s,"PlayScene")&&n.d(i,"PlayScene",(function(){return s.PlayScene})),n.o(s,"ProgressMaskBar")&&n.d(i,"ProgressMaskBar",(function(){return s.ProgressMaskBar})),n.o(s,"ProgressThreeBar")&&n.d(i,"ProgressThreeBar",(function(){return s.ProgressThreeBar})),n.o(s,"PropItem")&&n.d(i,"PropItem",(function(){return s.PropItem})),n.o(s,"Render")&&n.d(i,"Render",(function(){return s.Render})),n.o(s,"SceneManager")&&n.d(i,"SceneManager",(function(){return s.SceneManager})),n.o(s,"SoundButton")&&n.d(i,"SoundButton",(function(){return s.SoundButton})),n.o(s,"SoundManager")&&n.d(i,"SoundManager",(function(){return s.SoundManager})),n.o(s,"Tap")&&n.d(i,"Tap",(function(){return s.Tap})),n.o(s,"TextButton")&&n.d(i,"TextButton",(function(){return s.TextButton})),n.o(s,"TextToolTips")&&n.d(i,"TextToolTips",(function(){return s.TextToolTips})),n.o(s,"ThreeSliceButton")&&n.d(i,"ThreeSliceButton",(function(){return s.ThreeSliceButton})),n.o(s,"ThreeSlicePath")&&n.d(i,"ThreeSlicePath",(function(){return s.ThreeSlicePath})),n.o(s,"ToggleButton")&&n.d(i,"ToggleButton",(function(){return s.ToggleButton})),n.o(s,"ToggleColorButton")&&n.d(i,"ToggleColorButton",(function(){return s.ToggleColorButton})),n.o(s,"TweenCompent")&&n.d(i,"TweenCompent",(function(){return s.TweenCompent})),n.o(s,"UIDragonbonesDisplay")&&n.d(i,"UIDragonbonesDisplay",(function(){return s.UIDragonbonesDisplay})),n.o(s,"UiManager")&&n.d(i,"UiManager",(function(){return s.UiManager})),n.o(s,"ValueContainer")&&n.d(i,"ValueContainer",(function(){return s.ValueContainer}));var o=n(1070);n.d(i,"InputManager",(function(){return o.a}));var h=n(1013);n.d(i,"DisplayManager",(function(){return h.a})),n.d(i,"LocalStorageManager",(function(){return h.b})),n.d(i,"SoundManager",(function(){return h.d}));var l=n(1071);n.d(i,"Render",(function(){return l.a}));var c=n(893);n.d(i,"MainUIScene",(function(){return c.a})),n.d(i,"PlayScene",(function(){return c.b})),n.d(i,"SceneManager",(function(){return c.c}));var m=n(806);n.o(m,"AlertView")&&n.d(i,"AlertView",(function(){return m.AlertView})),n.o(m,"AlignmentType")&&n.d(i,"AlignmentType",(function(){return m.AlignmentType})),n.o(m,"AnimationModel")&&n.d(i,"AnimationModel",(function(){return m.AnimationModel})),n.o(m,"AxisType")&&n.d(i,"AxisType",(function(){return m.AxisType})),n.o(m,"BackgroundScaleButton")&&n.d(i,"BackgroundScaleButton",(function(){return m.BackgroundScaleButton})),n.o(m,"BaseGuide")&&n.d(i,"BaseGuide",(function(){return m.BaseGuide})),n.o(m,"BasePanel")&&n.d(i,"BasePanel",(function(){return m.BasePanel})),n.o(m,"BasePlaySceneGuide")&&n.d(i,"BasePlaySceneGuide",(function(){return m.BasePlaySceneGuide})),n.o(m,"BubbleAnimation")&&n.d(i,"BubbleAnimation",(function(){return m.BubbleAnimation})),n.o(m,"ButtonEventDispatcher")&&n.d(i,"ButtonEventDispatcher",(function(){return m.ButtonEventDispatcher})),n.o(m,"CheckBoxToggle")&&n.d(i,"CheckBoxToggle",(function(){return m.CheckBoxToggle})),n.o(m,"CheckboxGroup")&&n.d(i,"CheckboxGroup",(function(){return m.CheckboxGroup})),n.o(m,"ConstraintType")&&n.d(i,"ConstraintType",(function(){return m.ConstraintType})),n.o(m,"DragonbonesDisplay")&&n.d(i,"DragonbonesDisplay",(function(){return m.DragonbonesDisplay})),n.o(m,"DynamicImage")&&n.d(i,"DynamicImage",(function(){return m.DynamicImage})),n.o(m,"FrameAnimation")&&n.d(i,"FrameAnimation",(function(){return m.FrameAnimation})),n.o(m,"FramesDisplay")&&n.d(i,"FramesDisplay",(function(){return m.FramesDisplay})),n.o(m,"GridLayoutGroup")&&n.d(i,"GridLayoutGroup",(function(){return m.GridLayoutGroup})),n.o(m,"GuideManager")&&n.d(i,"GuideManager",(function(){return m.GuideManager})),n.o(m,"InputField")&&n.d(i,"InputField",(function(){return m.InputField})),n.o(m,"InputPanel")&&n.d(i,"InputPanel",(function(){return m.InputPanel})),n.o(m,"ItemInfoTips")&&n.d(i,"ItemInfoTips",(function(){return m.ItemInfoTips})),n.o(m,"LabelInput")&&n.d(i,"LabelInput",(function(){return m.LabelInput})),n.o(m,"NinePatch")&&n.d(i,"NinePatch",(function(){return m.NinePatch})),n.o(m,"NinePatchButton")&&n.d(i,"NinePatchButton",(function(){return m.NinePatchButton})),n.o(m,"ProgressMaskBar")&&n.d(i,"ProgressMaskBar",(function(){return m.ProgressMaskBar})),n.o(m,"ProgressThreeBar")&&n.d(i,"ProgressThreeBar",(function(){return m.ProgressThreeBar})),n.o(m,"PropItem")&&n.d(i,"PropItem",(function(){return m.PropItem})),n.o(m,"SoundButton")&&n.d(i,"SoundButton",(function(){return m.SoundButton})),n.o(m,"Tap")&&n.d(i,"Tap",(function(){return m.Tap})),n.o(m,"TextButton")&&n.d(i,"TextButton",(function(){return m.TextButton})),n.o(m,"TextToolTips")&&n.d(i,"TextToolTips",(function(){return m.TextToolTips})),n.o(m,"ThreeSliceButton")&&n.d(i,"ThreeSliceButton",(function(){return m.ThreeSliceButton})),n.o(m,"ThreeSlicePath")&&n.d(i,"ThreeSlicePath",(function(){return m.ThreeSlicePath})),n.o(m,"ToggleButton")&&n.d(i,"ToggleButton",(function(){return m.ToggleButton})),n.o(m,"ToggleColorButton")&&n.d(i,"ToggleColorButton",(function(){return m.ToggleColorButton})),n.o(m,"TweenCompent")&&n.d(i,"TweenCompent",(function(){return m.TweenCompent})),n.o(m,"UIDragonbonesDisplay")&&n.d(i,"UIDragonbonesDisplay",(function(){return m.UIDragonbonesDisplay})),n.o(m,"UiManager")&&n.d(i,"UiManager",(function(){return m.UiManager})),n.o(m,"ValueContainer")&&n.d(i,"ValueContainer",(function(){return m.ValueContainer}));n(1012);var f=n(1062);n.d(i,"BaseGuide",(function(){return f.a})),n.d(i,"BasePlaySceneGuide",(function(){return f.b})),n.d(i,"GuideManager",(function(){return f.c}))},function(e,i,n){"use strict";n.d(i,"d",(function(){return o})),n.d(i,"c",(function(){return h})),n.d(i,"a",(function(){return c})),n.d(i,"e",(function(){return s})),n.d(i,"b",(function(){return a}));var a,s,o=function(){function UIAtlasName(){}return UIAtlasName.jsonUrl=function(e){return e+".json"},UIAtlasName.textureUrl=function(e){return e+".png"},UIAtlasName.commonUrl="ui_base/ui_base",UIAtlasName.common2Url="ui_base2/ui_base2",UIAtlasName.common3Url="ui_base3/ui_base3",UIAtlasName.uicommonurl="ui_common/ui_common",UIAtlasName.uibase="ui_base",UIAtlasName.uibase2="ui_base2",UIAtlasName.uibase3="ui_base3",UIAtlasName.uicommon="ui_common",UIAtlasName.uicommon1="ui_common1",UIAtlasName.roam="roam",UIAtlasName.iconcommon="icon_common",UIAtlasName.effectcommon="effect_common",UIAtlasName.effectlevelup="effectlevelup",UIAtlasName.stareffect="stareffect",UIAtlasName.circleeffect="circleeffect",UIAtlasName.explorelog="explorelog",UIAtlasName.treasure="treasure",UIAtlasName.friend_message="friend_message",UIAtlasName.createrole="createrole",UIAtlasName.people_action="people_action",UIAtlasName.map="map",UIAtlasName.recast="recast",UIAtlasName.layout="layout",UIAtlasName.illustrate="illustrate",UIAtlasName.illustrate_new="illustrate_new",UIAtlasName.survey="survey",UIAtlasName.mail="mail",UIAtlasName.cooking="cooking",UIAtlasName.room_info="room_information",UIAtlasName.bulletin="bulletin",UIAtlasName.chat="chat",UIAtlasName.multiple_rooms="multiple_rooms",UIAtlasName.decorateshop="decorateshop",UIAtlasName.room_decorate="room_decorate",UIAtlasName.mine_new="mine_new",UIAtlasName}(),h=function(){function UIAtlasKey(){}return UIAtlasKey.commonKey="common_key",UIAtlasKey.common2Key="common2_key",UIAtlasKey.common3Key="common3_key",UIAtlasKey.uicommonKey="uicommon_key",UIAtlasKey}();!function(e){e[e.DPR=1]="DPR",e[e.NORMAL=2]="NORMAL",e[e.OSD=3]="OSD"}(a||(a={})),function(e){e[e.none=1]="none",e[e.atlas=2]="atlas",e[e.font=3]="font",e[e.texture=4]="texture",e[e.video=5]="video",e[e.json=6]="json"}(s||(s={}));var l=function l(e,i,n,o){void 0===o&&(o=s.none),this.uiType=s.none,this.foldType=a.DPR,this.atlasName=e,this.atlasUrl=i,this.jsonUrl=n,this.uiType=o},c=function(){function AtlasManager(){this.atlasMap=new Map}return AtlasManager.prototype.init=function(e){this.render=e,this.add(o.uicommon,s.atlas),this.add(o.iconcommon,s.atlas),this.add(o.effectcommon,s.atlas)},AtlasManager.prototype.add=function(e,i,n,o){var h;if(void 0===i&&(i=s.none),n=n||e,o=o||a.DPR,i===s.atlas)h=new l(e,(c=n+"/"+e)+".png",c+".json",s.atlas);else if(i===s.font){h=new l(e,(c=n+"/"+e)+".ttf",void 0,s.font)}else if(i===s.texture){h=new l(e,(c=n+"/"+e)+".png",void 0,s.texture)}else if(i===s.video){var c;h=new l(e,(c=n+"/"+e)+".mp4",void 0,s.video)}return h.foldType=o,this.atlasMap.set(e,h),h},AtlasManager.prototype.getUrlDatas=function(e,i){void 0===i&&(i=s.atlas);for(var n=[],a=0,o=e;a<o.length;a++){var h=o[a],l=void 0,c=void 0,m=void 0;if("object"==typeof h?(l=h.atlasName,c=h.folder,i=h.uiType||i,m=h.foldType):l=h,this.atlasMap.has(l)){var f=this.atlasMap.get(l);n.push(f)}else{var g=this.add(l,i,c,m);n.push(g)}}return n},AtlasManager.prototype.loadAtlas=function(e,i,n,a){},AtlasManager.prototype.isAtlasLoaded=function(e){return!1},AtlasManager.prototype.loadTexture=function(e,i){void 0===i&&(i=".png")},AtlasManager.prototype.unloadAtlas=function(e){},AtlasManager.prototype.loadFont=function(e,i){},AtlasManager}()},function(e,i,n){"use strict";n.r(i);var a=n(793);n.d(i,"ItemButton",(function(){return a.ItemButton})),n.d(i,"DetailDisplay",(function(){return a.DetailDisplay})),n.d(i,"BackTextButton",(function(){return a.BackTextButton})),n.d(i,"EnergyProgressBar",(function(){return a.EnergyProgressBar})),n.d(i,"DetailBubble",(function(){return a.DetailBubble})),n.d(i,"MoneyCompent",(function(){return a.MoneyCompent})),n.d(i,"CommonBackground",(function(){return a.CommonBackground})),n.d(i,"ImageValue",(function(){return a.ImageValue})),n.d(i,"ImageBBCodeValue",(function(){return a.ImageBBCodeValue})),n.d(i,"DynamicImageValue",(function(){return a.DynamicImageValue})),n.d(i,"InputView",(function(){return a.InputView})),n.d(i,"ItemsConsumeFunPanel",(function(){return a.ItemsConsumeFunPanel})),n.d(i,"MoreButtonPanel",(function(){return a.MoreButtonPanel}));var s=n(794);n.d(i,"UITools",(function(){return s.UITools}));var o=n(935);n.d(i,"ActivityPanel",(function(){return o.ActivityPanel}));var h=n(830);n.d(i,"CharacterAttributePanel",(function(){return h.CharacterAttributePanel}));var l=n(831);n.d(i,"CharacterEditorPanel",(function(){return l.CharacterEditorPanel}));var c=n(936);n.d(i,"CharacterInfoPanel",(function(){return c.CharacterInfoPanel}));var m=n(937);n.d(i,"GraphicsProgressBar",(function(){return m.GraphicsProgressBar}));var f=n(938);n.d(i,"PicaHandheldPanel",(function(){return f.PicaHandheldPanel}));var g=n(832);n.d(i,"PicaChatInputPanel",(function(){return g.PicaChatInputPanel}));var _=n(833);n.d(i,"PicaGiftPanel",(function(){return _.PicaGiftPanel}));var T=n(939);n.d(i,"PicaChatPanel",(function(){return T.PicaChatPanel}));var x=n(940);n.d(i,"PicaMainUIPanel",(function(){return x.PicaMainUIPanel}));var S=n(941);n.d(i,"PicaRenderUiManager",(function(){return S.PicaRenderUiManager}));var j=n(946);n.d(i,"CutInPanel",(function(){return j.CutInPanel}));var q=n(948);n.d(i,"DialogPanel",(function(){return q.DialogPanel}));var Y=n(953);n.d(i,"LoginPanel",(function(){return Y.LoginPanel}));var X=n(954);n.d(i,"VerifiedPanel",(function(){return X.VerifiedPanel}));var Z=n(945);n.d(i,"CreateRolePanel",(function(){return Z.CreateRolePanel}));var $=n(837);n.d(i,"InteractionBubbleCell",(function(){return $.InteractionBubbleCell}));var tt=n(838);n.d(i,"InteractionBubbleContainer",(function(){return tt.InteractionBubbleContainer}));var et=n(944);n.d(i,"InteractiveBubblePanel",(function(){return et.InteractiveBubblePanel}));var it=n(979);n.d(i,"PicaNavigatePanel",(function(){return it.PicaNavigatePanel}));var nt=n(835);n.d(i,"PicaBagPanel",(function(){return nt.PicaBagPanel}));n(795);var rt=n(868);n.d(i,"ElementDetail",(function(){return rt.ElementDetail}));var at=n(975);n.d(i,"PicaMarketPanel",(function(){return at.PicaMarketPanel}));var st=n(869);n.d(i,"NumberCounter",(function(){return st.NumberCounter}));var ot=n(870);n.d(i,"MarketItem",(function(){return ot.MarketItem}));var ht=n(969);n.d(i,"PicaFriendPanel",(function(){return ht.PicaFriendPanel}));var lt=n(994);n.d(i,"PicaPropFunPanel",(function(){return lt.PicaPropFunPanel}));var ct=n(985);n.d(i,"PicaNoticePanel",(function(){return ct.PicaNoticePanel}));var pt=n(988);n.d(i,"PicaPartyListPanel",(function(){return pt.PicaPartyListPanel}));var ut=n(866);n.d(i,"PicaManorContentPanel",(function(){return ut.PicaManorContentPanel}));var dt=n(974);n.d(i,"PicaManorListPanel",(function(){return dt.PicaManorListPanel}));var mt=n(867);n.d(i,"PicaManorScrollPanel",(function(){return mt.PicaManorScrollPanel}));var ft=n(875);n.d(i,"PicaOpenPartyCreatePanel",(function(){return ft.PicaOpenPartyCreatePanel}));var yt=n(987);n.d(i,"PicaOpenPartyPanel",(function(){return yt.PicaOpenPartyPanel}));var gt=n(1011);n.d(i,"TaskPanel",(function(){return gt.TaskPanel}));var Pt=n(816);n.d(i,"PicaManorBasePanel",(function(){return Pt.PicaManorBasePanel}));var _t=n(846);n.d(i,"PicaManorChildPanel",(function(){return _t.PicaManorChildPanel}));var vt=n(955);n.d(i,"PicManorInfoPanel",(function(){return vt.PicManorInfoPanel}));var bt=n(847);n.d(i,"PicaManorShopPanel",(function(){return bt.PicaManorShopPanel}));var Tt=n(956);n.d(i,"PicaManorTipsPanel",(function(){return Tt.PicaManorTipsPanel}));var xt=n(817);n.d(i,"PicaBusinessContentPanel",(function(){return xt.PicaBusinessContentPanel}));var wt=n(850);n.d(i,"PicaBusinessHistoryPanel",(function(){return wt.PicaBusinessHistoryPanel}));var St=n(851);n.d(i,"PicaBusinessMyStreetPanel",(function(){return St.PicaBusinessMyStreetPanel}));var It=n(852);n.d(i,"PicaBusinessRankRewardPanel",(function(){return It.PicaBusinessRankRewardPanel}));var Ct=n(853);n.d(i,"PicaBusinessRankingDetailPanel",(function(){return Ct.PicaBusinessRankingDetailPanel}));var kt=n(854);n.d(i,"PicaBusinessRankingPanel",(function(){return kt.PicaBusinessRankingPanel}));var Dt=n(855);n.d(i,"PicaBusinessStoreCreatePanel",(function(){return Dt.PicaBusinessStoreCreatePanel}));var Bt=n(856);n.d(i,"PicaBusinessStreetListPanel",(function(){return Bt.PicaBusinessStreetListPanel}));var Et=n(960);n.d(i,"PicaBusinessStreetPanel",(function(){return Et.PicaBusinessStreetPanel}));var At=n(805);n.d(i,"SecondaryMenuPanel",(function(){return At.SecondaryMenuPanel}));var Mt=n(848);n.d(i,"PicaBusinessChoosePlanPanel",(function(){return Mt.PicaBusinessChoosePlanPanel}));var Ot=n(959);n.d(i,"PicaBusinessMarketingPlanPanel",(function(){return Ot.PicaBusinessMarketingPlanPanel}));var Rt=n(849);n.d(i,"PicaBusinessPlanPanel",(function(){return Rt.PicaBusinessPlanPanel}));var Nt=n(996);n.d(i,"PicaRechargePanel",(function(){return Nt.PicaRechargePanel}));var Ft=n(963);n.d(i,"PicaDecorateControlPanel",(function(){return Ft.PicaDecorateControlPanel}));var Lt=n(957);n.d(i,"PicRoomUpgradePanel",(function(){return Lt.PicRoomUpgradePanel}));var Ht=n(858);n.d(i,"PicaEquipUpgradeItem",(function(){return Ht.PicaEquipUpgradeItem}));var Gt=n(967);n.d(i,"PicaEquipUpgradePanel",(function(){return Gt.PicaEquipUpgradePanel}));var jt=n(1004);n.d(i,"PicaRoomListPanel",(function(){return jt.PicaRoomListPanel})),n.d(i,"RoomDelegate",(function(){return jt.RoomDelegate})),n.d(i,"RoomZoon",(function(){return jt.RoomZoon}));var Ut=n(1009);n.d(i,"PicaWorkPanel",(function(){return Ut.PicaWorkPanel}));var zt=n(977);n.d(i,"PicaMineCarPanel",(function(){return zt.PicaMineCarPanel}));var Wt=n(1002);n.d(i,"PicaRoomPanel",(function(){return Wt.PicaRoomPanel}));var Vt=n(882);n.d(i,"PicaRoomInfoPanel",(function(){return Vt.PicaRoomInfoPanel}));var qt=n(978);n.d(i,"PicaMineSettlePanel",(function(){return qt.PicaMineSettlePanel}));var Yt=n(999);n.d(i,"PicaRewardTipPanel",(function(){return Yt.PicaRewardTipPanel}));var Kt=n(961);n.d(i,"PicaComposePanel",(function(){return Kt.PicaComposePanel}));var Xt=n(973);n.d(i,"PicaItemPopCardPanel",(function(){return Xt.PicaItemPopCardPanel}));var Qt=n(976);n.d(i,"PicaMessageBoxPanel",(function(){return Qt.PicaMessageBoxPanel}));var Zt=n(965);n.d(i,"PicaElementStoragePanel",(function(){return Zt.PicaElementStoragePanel}));var Jt=n(947);n.d(i,"CutInMenuPanel",(function(){return Jt.CutInMenuPanel}));var $t=n(886);n.d(i,"PicaTreasureOpenPanel",(function(){return $t.PicaTreasureOpenPanel}));var te=n(1008);n.d(i,"PicaTreasurePanel",(function(){return te.PicaTreasurePanel}));var ee=n(887);n.d(i,"PicaTreasurePreviewPanel",(function(){return ee.PicaTreasurePreviewPanel}));var ie=n(885);n.d(i,"PicaTreasureAllOpenPanel",(function(){return ie.PicaTreasureAllOpenPanel}));var ne=n(971);n.d(i,"PicaGiftEffectPanel",(function(){return ne.PicaGiftEffectPanel}));var re=n(861);n.d(i,"PicaGiftLateralItem",(function(){return re.PicaGiftLateralItem}));var ae=n(860);n.d(i,"PicaGiftLaterctPanel",(function(){return ae.PicaGiftLaterctPanel}));var se=n(862);n.d(i,"PicaGiftPlayerPanel",(function(){return se.PicaGiftPlayerPanel}));var oe=n(834);n.d(i,"PicaFurniFunPanel",(function(){return oe.PicaFurniFunPanel}));var he=n(984);n.d(i,"PicaNewRolePanel",(function(){return he.PicaNewRolePanel}));var le=n(871);n.d(i,"PicaNewActivityPanel",(function(){return le.PicaNewActivityPanel}));var ce=n(872);n.d(i,"PicaNewChatPanel",(function(){return ce.PicaNewChatPanel}));var pe=n(873);n.d(i,"PicaNewHeadPanel",(function(){return pe.PicaNewHeadPanel}));var ue=n(874);n.d(i,"PicaNewLeftPanel",(function(){return ue.PicaNewLeftPanel}));var de=n(836);n.d(i,"PicaNewNavigatePanel",(function(){return de.PicaNewNavigatePanel}));var me=n(982);n.d(i,"PicaNewMainPanel",(function(){return me.PicaNewMainPanel}));var fe=n(958);n.d(i,"PicaAvatarPanel",(function(){return fe.PicaAvatarPanel}));var ye=n(986);n.d(i,"PicaOnlinePanel",(function(){return ye.PicaOnlinePanel}));var ge=n(964);n.d(i,"PicaEffectMgrPanel",(function(){return ge.PicaEffectMgrPanel}));var Pe=n(857);n.d(i,"PicaFurniUnlockEffectPanel",(function(){return Pe.PicaFurniUnlockEffectPanel}));var _e=n(845);n.d(i,"PicaTaskItem",(function(){return _e.PicaTaskItem}));var ve=n(844);n.d(i,"PicaTaskMainPanel",(function(){return ve.PicaTaskMainPanel}));var be=n(815);n.d(i,"PicaTaskPanel",(function(){return be.PicaTaskPanel}));var Te=n(1007);n.d(i,"PicaTaskSidePanel",(function(){return Te.PicaTaskSidePanel}));var xe=n(966);n.d(i,"PicaElevatorPanel",(function(){return xe.PicaElevatorPanel}));var we=n(962);n.d(i,"PicaCreateRolePanel",(function(){return we.PicaCreateRolePanel}));var Se=n(803);n.d(i,"PicaItemTipsPanel",(function(){return Se.PicaItemTipsPanel}));var Ie=n(812);n.d(i,"PicaSingleManager",(function(){return Ie.PicaSingleManager}));var Ce=n(970);n.d(i,"PicaFurnitureComposePanel",(function(){return Ce.PicaFurnitureComposePanel}));var ke=n(995);n.d(i,"PicaRecastePanel",(function(){return ke.PicaRecastePanel}));var De=n(880);n.d(i,"PicaRoamListPanel",(function(){return De.PicaRoamListPanel}));var Be=n(1e3);n.d(i,"PicaRoamPanel",(function(){return Be.PicaRoamPanel}));var Ee=n(879);n.d(i,"PicaRoamDrawPanel",(function(){return Ee.PicaRoamDrawPanel}));var Ae=n(881);n.d(i,"PicaRoamPreviewPanel",(function(){return Ae.PicaRoamPreviewPanel}));var Me=n(968);n.d(i,"PicaExploreLogPanel",(function(){return Me.PicaExploreLogPanel}));var Oe=n(859);n.d(i,"PicaExploreLogSettlePanel",(function(){return Oe.PicaExploreLogSettlePanel}));var Re=n(814);n.d(i,"PicaChapterLevelClue",(function(){return Re.PicaChapterLevelClue}));var Ne=n(841);n.d(i,"PicaExploreListBottomPanel",(function(){return Ne.PicaExploreListBottomPanel}));var Fe=n(840);n.d(i,"PicaExploreListDetailPanel",(function(){return Fe.PicaExploreListDetailPanel}));var Le=n(842);n.d(i,"PicaExploreListLevelPanel",(function(){return Le.PicaExploreListLevelPanel}));var He=n(839);n.d(i,"PicaExploreListPanel",(function(){return He.PicaExploreListPanel}));var Ge=n(943);n.d(i,"BottomPanel",(function(){return Ge.BottomPanel}));var je=n(878);n.d(i,"PicaAttributePanel",(function(){return je.PicaAttributePanel}));var Ue=n(991);n.d(i,"PicaGraphicsProgressBar",(function(){return Ue.PicaGraphicsProgressBar}));var ze=n(992);n.d(i,"PicaPlayerEditorPanel",(function(){return ze.PicaPlayerEditorPanel}));var We=n(993);n.d(i,"PicaPlayerInfoPanel",(function(){return We.PicaPlayerInfoPanel}));var Ve=n(997);n.d(i,"PicaRenamePanel",(function(){return Ve.PicaRenamePanel}));var qe=n(950);n.d(i,"FriendInvitePanel",(function(){return qe.FriendInvitePanel}));var Ye=n(942);n.d(i,"BagGuidePanel",(function(){return Ye.BagGuidePanel}));var Ke=n(949);n.d(i,"ExploreGuidePanel",(function(){return Ke.ExploreGuidePanel}));var Xe=n(951);n.d(i,"HomeGuidePanel",(function(){return Xe.HomeGuidePanel}));var Qe=n(843);n.d(i,"BaseHotelGuidePanel",(function(){return Qe.BaseHotelGuidePanel}));var Ze=n(952);n.d(i,"HotelGuidePanel",(function(){return Ze.HotelGuidePanel}));var Je=n(1010);n.d(i,"PlaneGuidePanel",(function(){return Je.PlaneGuidePanel}));var $e=n(876);n.d(i,"PicaMyNavigationPanel",(function(){return $e.PicaMyNavigationPanel}));var ti=n(990);n.d(i,"PicaPartyNavigationPanel",(function(){return ti.PicaPartyNavigationPanel}));var ei=n(877);n.d(i,"PicaTownNavigationPanel",(function(){return ei.PicaTownNavigationPanel}));var ii=n(998);n.d(i,"PicaRepairChoosePanel",(function(){return ii.PicaRepairChoosePanel}));var ni=n(1006);n.d(i,"PicaSurveyPanel",(function(){return ni.PicaSurveyPanel}));var ri=n(884);n.d(i,"PicaSceneNavigationMapPanel",(function(){return ri.PicaSceneNavigationMapPanel}));var ai=n(1005);n.d(i,"PicaSceneNavigationPanel",(function(){return ai.PicaSceneNavigationPanel}));var si=n(863);n.d(i,"PicaMailItem",(function(){return si.PicaMailItem}));var oi=n(864);n.d(i,"PicaMailMainPanel",(function(){return oi.PicaMailMainPanel}));var hi=n(865);n.d(i,"PicaMailPanel",(function(){return hi.PicaMailPanel}));var li=n(981);n.d(i,"PicaNewIllustratedPanel",(function(){return li.PicaNewIllustratedPanel}));var ci=n(1003);n.d(i,"PicaRoomDecoratePanel",(function(){return ci.PicaRoomDecoratePanel}));var pi=n(883);n.d(i,"PicaRoomDecorateShopPanel",(function(){return pi.PicaRoomDecorateShopPanel}));var ui=n(983);n.d(i,"PicaNewMinePanel",(function(){return ui.PicaNewMinePanel}))},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBasePanel",(function(){return m}));var a,s=n(789),o=n(790),h=n(2),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaBasePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.uiManager=i,n.maskLoadingEnable=!0,n}return c(PicaBasePanel,e),PicaBasePanel.prototype.initResource=function(){var e;this.atlasNames&&(e=this.uiManager.getUrlDatas(this.atlasNames));if(this.textures){var i=this.uiManager.getUrlDatas(this.textures,o.e.texture);e=e?e.concat(i):i}if(e)for(var n=0,a=e;n<a.length;n++){var s=a[n];this.cacheExists(o.e[s.uiType],s.atlasName)||(s.uiType===o.e.atlas?this.setResourcesData("atlas",s.atlasName,s.atlasUrl,s.jsonUrl,s.foldType):s.uiType===o.e.texture?this.setResourcesData("image",s.atlasName,s.atlasUrl,void 0,s.foldType):s.uiType===o.e.video&&this.setResourcesData("video",s.atlasName,s.atlasUrl,void 0,s.foldType))}},PicaBasePanel.prototype.preload=function(){this.maskLoadingEnable&&this.uiManager.showPanel(h.ModuleName.MASK_LOADING_NAME),this.initResource(),e.prototype.preload.call(this)},PicaBasePanel.prototype.init=function(){e.prototype.init.call(this),this.maskLoadingEnable&&this.uiManager.hidePanel(h.ModuleName.MASK_LOADING_NAME)},PicaBasePanel.prototype.setLinear=function(i){if(e.prototype.setLinear.call(this,i),this.atlasNames)for(var n=0,a=this.atlasNames;n<a.length;n++){var s=a[n];"string"==typeof s?e.prototype.setLinear.call(this,s):e.prototype.setLinear.call(this,s.atlasName)}},PicaBasePanel.prototype.setResourcesData=function(e,i,n,a,s){this.cacheExists(e,i)||(this.mResources||(this.mResources=new Map),this.mResources.set(i,{dpr:this.dpr,type:e,texture:n,data:a,foldType:s}))},PicaBasePanel.prototype.addResources=function(e,i){if(i.type&&this.scene.load[i.type]){i.foldType=i.foldType||o.b.DPR;var n=i.foldType===o.b.DPR?l.Url.getUIRes(i.dpr,i.texture):l.Url.getNormalUIRes(i.texture),a=i.data?i.foldType===o.b.DPR?l.Url.getUIRes(i.dpr,i.data):l.Url.getNormalUIRes(i.data):void 0;"video"!==i.type?this.scene.load[i.type](e,n,a):this.scene.load.video(e,n,void 0,!0,!0)}},PicaBasePanel}(s.BasePanel)},function(e,i,n){"use strict";n.r(i);var a=n(829);n.d(i,"ItemButton",(function(){return a.ItemButton}));var s=n(795);n.d(i,"DetailDisplay",(function(){return s.DetailDisplay}));var o=n(926);n.d(i,"BackTextButton",(function(){return o.BackTextButton}));var h=n(927);n.d(i,"EnergyProgressBar",(function(){return h.EnergyProgressBar}));var l=n(928);n.d(i,"DetailBubble",(function(){return l.DetailBubble}));var c=n(929);n.d(i,"MoneyCompent",(function(){return c.MoneyCompent}));var m=n(930);n.d(i,"CommonBackground",(function(){return m.CommonBackground}));var f=n(813);n.d(i,"ImageValue",(function(){return f.ImageValue})),n.d(i,"ImageBBCodeValue",(function(){return f.ImageBBCodeValue})),n.d(i,"DynamicImageValue",(function(){return f.DynamicImageValue}));var g=n(931);n.d(i,"InputView",(function(){return g.InputView}));var _=n(932);n.d(i,"ItemsConsumeFunPanel",(function(){return _.ItemsConsumeFunPanel}));var T=n(933);n.d(i,"MoreButtonPanel",(function(){return T.MoreButtonPanel}))},function(e,i,n){"use strict";n.r(i);var a=n(934);n.d(i,"UITools",(function(){return a.UITools}))},function(e,i,n){"use strict";n.r(i),n.d(i,"DetailDisplay",(function(){return m}));var a,s,o=n(789),h=n(0),l=n(69),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function DetailDisplay(i,n){var a=e.call(this,i)||this;return a.render=n,a.mFixedSize=0,a.curLoadType=s.None,a.isLoading=!1,a.mFixScale=1,a}return c(DetailDisplay,e),DetailDisplay.prototype.setFixedScale=function(e,i){return void 0===e&&(e=1),void 0===i&&(i=0),this.mFixedSize=i,this.mFixScale=e,this.scale=e,this},DetailDisplay.prototype.loadDisplay=function(e){var i=e.display;if(i)if(""!==i.texturePath&&""!==i.dataPath){var n=e.animations;n&&n.length>0?this.loadElement(e):this.loadUrl(h.Url.getOsdRes(i.texturePath),h.Url.getOsdRes(i.dataPath))}else this.loadUrl(i.texturePath,i.dataPath)},DetailDisplay.prototype.loadElement=function(e){var i=this;this.curLoadType=s.FramesDisplay,this.clearDisplay(),this.mDisplay=e;var n=e.animations;this.mFramesDisplay||(this.mFramesDisplay=new o.FramesDisplay(this.scene,this.render,void 0));var a=e.display;if(a&&n.length>0){for(var c=[],m=n[0].node.name,f=0,g=n;f<g.length;f++){var _=g[f];_.baseLoc="0,0";for(var T=0,x=_.layer;T<x.length;T++){x[T].offsetLoc={x:0,y:0}}c.push(new o.AnimationModel(_))}var addDisplay_1=function(){var e=i.mFramesDisplay,n=e.spriteWidth,a=e.spriteHeight;if(0!==i.mFixedSize){i.scale=1;var s=i.width/n,o=i.height/a,h=s>o?o:s;i.mFramesDisplay.scale=1===i.mFixedSize?h:Math.round(h)}else i.mFramesDisplay.scale=1,i.scale=i.mFixScale;var l=i.mFramesDisplay.scale;i.mFramesDisplay.x=.5*-n*l,i.mFramesDisplay.y=.5*-a*l,i.addDisplay()};this.mFramesDisplay.createdHandler=new h.Handler(this,(function(){i.mFramesDisplay.play({name:m,flip:!1}),addDisplay_1()}));for(var S=new Map,j=0,q=c;j<q.length;j++){var Y=q[j];S.set(Y.name,Y)}var X={animations:S,id:e.id,gene:l.sync(a.dataPath+a.texturePath),discriminator:"FramesModel",animationName:m,display:a};this.mFramesDisplay.load(X)||addDisplay_1()}},DetailDisplay.prototype.loadAvatar=function(e,i,n){void 0===i&&(i=1),this.curLoadType=s.DragonbonesDisplay,this.clearDisplay(),this.mDragonboneDisplay||(this.mDragonboneDisplay=new o.UIDragonbonesDisplay(this.scene,this.render),n&&(this.mDragonboneDisplay.x+=n.x,this.mDragonboneDisplay.y+=n.y)),this.addDisplay(),e.suits&&this.mDragonboneDisplay.setSuits(e.suits);var a={id:0,avatar:e.avatar};this.mDragonboneDisplay.load(a,void 0,!1),this.mDragonboneDisplay.scale=i,this.scale=1},DetailDisplay.prototype.saveAvatar=function(){return this.mDragonboneDisplay?this.mDragonboneDisplay.save():Promise.reject("not display")},DetailDisplay.prototype.loadUrl=function(e,i){this.mUrl=e,this.curLoadType=s.Image,this.clearDisplay(),this.mImage||(this.mImage=this.scene.make.image(void 0,!1)),this.scene.textures.exists(e)?this.onCompleteHandler():(i?this.scene.load.atlas(e,h.Url.getOsdRes(e),h.Url.getOsdRes(i)):this.scene.load.image(e,h.Url.getOsdRes(e)),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.onCompleteHandler,this),this.scene.load.start())},DetailDisplay.prototype.loadSprite=function(e,i,n,a){var l=this;this.curLoadType=s.FrameAnimation,this.clearDisplay(),this.mFrameAni||(this.mFrameAni=new o.FrameAnimation(this.scene)),this.mFrameAni.load(e,i,n,new h.Handler(this,(function(){if(void 0===a)if(0!==l.mFixedSize){l.scale=1;var e=l.width/l.mFrameAni.width,i=l.height/l.mFrameAni.height,n=e>i?i:e;l.mFrameAni.scale=1===l.mFixedSize?n:Math.round(n)}else l.mFrameAni.scale=1,l.scale=l.mFixScale;else l.mFrameAni.scale=a,l.scale=1;l.addDisplay()})))},DetailDisplay.prototype.displayLoading=function(e,i,n,a){this.loadSprite(e,i,n,a),this.isLoading=!0},DetailDisplay.prototype.setTexture=function(e,i,n){if(this.curLoadType=s.Image,this.clearDisplay(),this.mImage?this.mImage.setTexture(e,i):this.mImage=this.scene.make.image({key:e,frame:i},!1),this.addDisplay(),void 0===n)if(0!==this.mFixedSize){this.scale=1;var a=this.width/this.mImage.width,o=this.height/this.mImage.height,h=a>o?o:a;this.mImage.scale=1===this.mFixedSize?h:Math.round(h)}else this.mImage.scale=1,this.scale=this.mFixScale;else this.mImage.scale=n,this.scale=1;this.emit("show",this.mImage)},DetailDisplay.prototype.setNearest=function(){this.mImage&&this.mImage.texture.setFilter(Phaser.Textures.FilterMode.NEAREST)},DetailDisplay.prototype.setComplHandler=function(e){this.complHandler=e},DetailDisplay.prototype.setPlayAnimation=function(e,i){void 0===i&&(i=!1),this.mDragonboneDisplay&&(this.mDragonboneDisplay.setBack(i),this.mDragonboneDisplay.play(e))},Object.defineProperty(DetailDisplay.prototype,"display",{get:function(){return this.mDisplay},enumerable:!1,configurable:!0}),DetailDisplay.prototype.onCompleteHandler=function(){if(this.scene){if(this.addDisplay(),this.mDisplay){this.mDisplay.display;var e=this.mDisplay.animations;if(!e||e.length<=0)return;this.mImage.setTexture(this.mDisplay.display.texturePath,e[0].frameName[0])}else this.mImage.setTexture(this.mUrl);if(0!==this.mFixedSize){this.scale=1,this.mImage.scale=1;var i=this.width/this.mImage.displayWidth,n=this.height/this.mImage.displayHeight,a=i>n?n:i;this.mImage.scale=1===this.mFixedSize?a:Math.round(a)}else this.mImage.scale=this.mFixScale,this.mImage.scale=1,this.setSize(this.mImage.width*this.scale,this.mImage.height*this.scale);this.emit("show",this.mImage),this.complHandler&&this.complHandler.run()}},DetailDisplay.prototype.clearDisplay=function(){this.mImage&&this.remove(this.mImage),this.mDragonboneDisplay&&this.remove(this.mDragonboneDisplay),this.mFramesDisplay&&this.remove(this.mFramesDisplay),this.mFrameAni&&(this.isLoading||(this.remove(this.mFrameAni),this.mFrameAni.destroy())),this.mDisplay=void 0,this.scene.load.off(Phaser.Loader.Events.COMPLETE,this.onCompleteHandler,this)},DetailDisplay.prototype.addDisplay=function(){this.scene&&(this.isLoading&&this.remove(this.mFrameAni),this.curLoadType===s.Image?this.add(this.mImage):this.curLoadType===s.FramesDisplay?this.add(this.mFramesDisplay):this.curLoadType===s.FrameAnimation?this.add(this.mFrameAni):this.curLoadType===s.DragonbonesDisplay&&this.add(this.mDragonboneDisplay),this.isLoading=!1)},DetailDisplay}(Phaser.GameObjects.Container);!function(e){e[e.None=0]="None",e[e.Image=1]="Image",e[e.DragonbonesDisplay=2]="DragonbonesDisplay",e[e.FramesDisplay=3]="FramesDisplay",e[e.FrameAnimation=4]="FrameAnimation"}(s||(s={}))},function(e,i,n){"use strict";n(787);var a=n(791);n.d(i,"a",(function(){return a.CommonBackground})),n.d(i,"b",(function(){return a.DetailBubble})),n.d(i,"c",(function(){return a.DetailDisplay})),n.d(i,"d",(function(){return a.DynamicImageValue})),n.d(i,"e",(function(){return a.ImageValue})),n.d(i,"f",(function(){return a.ItemButton})),n.d(i,"g",(function(){return a.MoneyCompent})),n.d(i,"h",(function(){return a.PicaItemTipsPanel})),n.d(i,"i",(function(){return a.PicaMyNavigationPanel})),n.d(i,"j",(function(){return a.PicaPartyNavigationPanel})),n.d(i,"k",(function(){return a.PicaTaskPanel})),n.d(i,"l",(function(){return a.UITools}));n(1063),n(1064),n(1065)},function(e,i,n){"use strict";n.r(i);var a=n(71);n.d(i,"DynamicImage",(function(){return a.DynamicImage}));var s=n(818);n.d(i,"DynamicNinepatch",(function(){return s.DynamicNinepatch}));var o=n(894);n.d(i,"DynamicSprite",(function(){return o.DynamicSprite}));var h=n(895);n.d(i,"InputPanel",(function(){return h.InputPanel}));var l=n(896);n.d(i,"CheckboxGroup",(function(){return l.CheckboxGroup}));var c=n(897);n.d(i,"TextButton",(function(){return c.TextButton}));var m=n(898);n.d(i,"LabelInput",(function(){return m.LabelInput}));var f=n(821);n.d(i,"Tap",(function(){return f.Tap}));var g=n(822);n.d(i,"BasePanel",(function(){return g.BasePanel}));var _=n(900);n.d(i,"NinePatchButton",(function(){return _.NinePatchButton}));var T=n(901);n.d(i,"AlertView",(function(){return T.AlertView})),n.d(i,"Buttons",(function(){return T.Buttons}));var x=n(902);n.d(i,"ItemInfoTips",(function(){return x.ItemInfoTips}));var S=n(807);n.d(i,"TextToolTips",(function(){return S.TextToolTips}));var j=n(808);for(var q in j)["DynamicImage","DynamicNinepatch","DynamicSprite","InputPanel","CheckboxGroup","TextButton","LabelInput","Tap","BasePanel","NinePatchButton","AlertView","Buttons","ItemInfoTips","TextToolTips","default"].indexOf(q)<0&&function(e){n.d(i,e,(function(){return j[e]}))}(q);var Y=n(800);n.d(i,"ToolTip",(function(){return Y.ToolTip}));var X=n(903);n.d(i,"ButtonState",(function(){return X.ButtonState})),n.d(i,"ThreeSliceButton",(function(){return X.ThreeSliceButton}));var Z=n(809);n.d(i,"ThreeSlicePath",(function(){return Z.ThreeSlicePath}));var $=n(904);n.d(i,"TweenCompent",(function(){return $.TweenCompent}));var tt=n(905);n.d(i,"ValueContainer",(function(){return tt.ValueContainer}));var et=n(906);n.d(i,"GridLayoutGroup",(function(){return et.GridLayoutGroup})),n.d(i,"AlignmentType",(function(){return et.AlignmentType})),n.d(i,"CornerType",(function(){return et.CornerType})),n.d(i,"AxisType",(function(){return et.AxisType})),n.d(i,"ConstraintType",(function(){return et.ConstraintType}));var it=n(823);n.d(i,"SoundButton",(function(){return it.SoundButton}));var nt=n(824);n.d(i,"PropItem",(function(){return nt.PropItem}));var rt=n(801);n.d(i,"NinePatch",(function(){return rt.NinePatch}));var at=n(810);n.d(i,"ItemSlot",(function(){return at.ItemSlot}));var st=n(907);for(var q in st)["DynamicImage","DynamicNinepatch","DynamicSprite","InputPanel","CheckboxGroup","TextButton","LabelInput","Tap","BasePanel","NinePatchButton","AlertView","Buttons","ItemInfoTips","TextToolTips","ToolTip","ButtonState","ThreeSliceButton","ThreeSlicePath","TweenCompent","ValueContainer","GridLayoutGroup","AlignmentType","CornerType","AxisType","ConstraintType","SoundButton","PropItem","NinePatch","ItemSlot","default"].indexOf(q)<0&&function(e){n.d(i,e,(function(){return st[e]}))}(q);var ot=n(908);for(var q in ot)["DynamicImage","DynamicNinepatch","DynamicSprite","InputPanel","CheckboxGroup","TextButton","LabelInput","Tap","BasePanel","NinePatchButton","AlertView","Buttons","ItemInfoTips","TextToolTips","ToolTip","ButtonState","ThreeSliceButton","ThreeSlicePath","TweenCompent","ValueContainer","GridLayoutGroup","AlignmentType","CornerType","AxisType","ConstraintType","SoundButton","PropItem","NinePatch","ItemSlot","default"].indexOf(q)<0&&function(e){n.d(i,e,(function(){return ot[e]}))}(q);var ht=n(825);n.d(i,"DragDropIcon",(function(){return ht.DragDropIcon}));var lt=n(826);n.d(i,"IconBtn",(function(){return lt.IconBtn}));var ct=n(909);n.d(i,"IconSelectBtn",(function(){return ct.IconSelectBtn}));var pt=n(910);n.d(i,"MaterialItem",(function(){return pt.MaterialItem}));var ut=n(827);n.d(i,"ProgressMaskBar",(function(){return ut.ProgressMaskBar}));var dt=n(802);n.d(i,"ButtonEventDispatcher",(function(){return dt.ButtonEventDispatcher}));var mt=n(911);n.d(i,"BackgroundScaleButton",(function(){return mt.BackgroundScaleButton}));var ft=n(912);n.d(i,"ProgressThreeMaskBar",(function(){return ft.ProgressThreeMaskBar}));var yt=n(913);n.d(i,"ProgressThreeBar",(function(){return yt.ProgressThreeBar}));var gt=n(914);n.d(i,"ToggleColorButton",(function(){return gt.ToggleColorButton}));var Pt=n(828);n.d(i,"ToggleButton",(function(){return Pt.ToggleButton}));var _t=n(915);n.d(i,"TextureSprite",(function(){return _t.TextureSprite}));var vt=n(916);n.d(i,"InputField",(function(){return vt.InputField}));var bt=n(917);n.d(i,"CheckBoxToggle",(function(){return bt.CheckBoxToggle}))},function(e,i,n){"use strict";n.d(i,"a",(function(){return m}));var a,s=n(4),o=n(0),h=n(2),l=n(819),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function MainUIScene(){var i=e.call(this,{key:h.SceneName.MAINUI_SCENE})||this;return i.timeOutID=0,i.timeOutCancelMap={},i.timeOutCallerList=[],i.timeOutTimeMap={},i}return c(MainUIScene,e),MainUIScene.prototype.init=function(i){e.prototype.init.call(this,i),this.render&&this.render.uiManager.setScene(null)},MainUIScene.prototype.create=function(){var i=this.cameras.main.width;this.fps=this.add.text(.5*i,10,"",{style:{color:"#64DD17"}}),this.fps.setStroke("0x0",1),this.fps.setFontFamily(o.Font.DEFULT_FONT),this.fps.setFontSize(20*this.render.devicePixelRatio),this.fps.setDepth(1e3),this.sizeTF=this.add.text(10,50,"",{style:{color:"#64dd17"},wordWrap:{width:800,useAdvancedWrap:!0}}),this.sizeTF.setFontSize(20*this.render.devicePixelRatio),this.sizeTF.setFontFamily(o.Font.DEFULT_FONT),this.sizeTF.setStroke("#0",3),this.render.uiManager.setScene(this),this.render.initUI(),this.layerManager.addLayer(this,s.BaseLayer,MainUIScene.LAYER_UI,1),this.layerManager.addLayer(this,s.BaseLayer,MainUIScene.LAYER_DIALOG,2),this.layerManager.addLayer(this,s.BaseLayer,MainUIScene.LAYER_TOOLTIPS,3),this.layerManager.addLayer(this,s.BaseLayer,MainUIScene.LAYER_MASK,4),e.prototype.create.call(this)},MainUIScene.prototype.setTimeout=function(e,i){var n=Date.now();return this.timeOutCallerList[++this.timeOutID]=e,this.timeOutTimeMap[this.timeOutID]={now:n,delay:i},this.timeOutID},MainUIScene.prototype.clearTimeout=function(e){this.timeOutCancelMap[e]=!0},MainUIScene.prototype.updateFPS=function(){this.fps&&this.fps.setText(this.game.loop.actualFps.toFixed())},MainUIScene.prototype.getKey=function(){return this.sys.config.key},MainUIScene.prototype.onPointerDownHandler=function(e,i){this.render.emitter.emit("pointerScene",h.SceneName.MAINUI_SCENE,i)},MainUIScene.prototype.checkSize=function(e){e.width,e.height,this.render},MainUIScene.prototype.loadRaomVideos=function(){for(var e=0,i=["roamone","roamtenrepead","roamreward","roambefore"];e<i.length;e++){var n=i[e],a=o.Url.getNormalUIRes("roam_effect/"+n+".mp4");this.load.video(n,a,void 0,!0,!0)}},MainUIScene.LAYER_UI="uiLayer",MainUIScene.LAYER_DIALOG="dialogLayer",MainUIScene.LAYER_TOOLTIPS="toolTipsLayer",MainUIScene.LAYER_MASK="maskLayer",MainUIScene}(l.a)},function(e,i,n){"use strict";n.d(i,"a",(function(){return _}));var a,s=n(0),o=n(74),h=n(4),l=n(798),c=n(819),m=n(2),f=n(1018),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},_=function(e){function PlayScene(i){var n=e.call(this,i||{key:m.SceneName.PLAY_SCENE})||this;return n.cameraMovable=!0,n.loadState=m.PlaySceneLoadState.CREATING_SCENE,n}return g(PlayScene,e),PlayScene.prototype.preload=function(){this.load.audio("click",s.Url.getRes("sound/click.mp3")),e.prototype.preload.call(this)},Object.defineProperty(PlayScene.prototype,"motionMgr",{get:function(){return this.motion},enumerable:!1,configurable:!0}),PlayScene.prototype.create=function(){this.loadState=m.PlaySceneLoadState.CREATING_ROOM,s.Logger.getInstance().debug("create playscene");var i=this.cameras.main,n=this.sys.scale,a=n.width,c=n.height;(this.cameras.addExisting(new o.a(0,0,a,c,this.render.scaleRatio),!0),this.cameras.remove(i),this.game.scene.getScene(l.a.name)||this.game.scene.add(l.a.name,l.a,!1),this.game.scene.getScene(l.a.name).scene.isActive())?this.render.initUI():(this.scene.launch(l.a.name,{render:this.render}),this.render.sceneManager.bringToTop(m.SceneName.LOADING_SCENE));this.scene.sendToBack(),this.render.sceneManager.setMainScene(this),this.initMotion(),this.render.camerasManager.startRoomPlay(this),this.layerManager.addLayer(this,h.BaseLayer,m.LayerName.GROUNDCLICK,1),this.layerManager.addLayer(this,h.BaseLayer,m.LayerName.GROUND2,2),this.layerManager.addLayer(this,h.GroundLayer,m.LayerName.WALL,2).setScale(this.render.scaleRatio),this.layerManager.addLayer(this,h.GroundLayer,m.LayerName.GROUND,3).setScale(this.render.scaleRatio),this.layerManager.addLayer(this,h.BaseLayer,m.LayerName.MIDDLE,4).setScale(this.render.scaleRatio),this.layerManager.addLayer(this,h.GroundLayer,m.LayerName.FLOOR,4).setScale(this.render.scaleRatio),this.layerManager.addLayer(this,h.SurfaceLayer,m.LayerName.SURFACE,5).setScale(this.render.scaleRatio),this.layerManager.addLayer(this,h.SurfaceLayer,m.LayerName.DECORATE,6).setScale(this.render.scaleRatio),this.layerManager.addLayer(this,h.BaseLayer,m.LayerName.ATMOSPHERE,6),this.layerManager.addLayer(this,h.BaseLayer,m.LayerName.SCENEUI,7),this.render.startRoomPlay(),this.render.changeScene(this),e.prototype.create.call(this)},PlayScene.prototype.update=function(e,i){this.render.updateRoom(e,i),this.layerManager.update(e,i),this.motion&&this.motion.update(e,i)},PlayScene.prototype.getKey=function(){return this.sys.config.key},PlayScene.prototype.snapshot=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2]}))}))},Object.defineProperty(PlayScene.prototype,"loadState",{get:function(){return this.mLoadState},set:function(e){e!==this.mLoadState&&(s.Logger.getInstance().debug("PlayScene change loadState: ",e),this.mLoadState=e,e===m.PlaySceneLoadState.LOAD_COMPOLETE&&this.render.hideLoading())},enumerable:!1,configurable:!0}),PlayScene.prototype.onRoomCreated=function(){this.loadState=m.PlaySceneLoadState.LOAD_COMPOLETE},PlayScene.prototype.pauseMotion=function(){this.motion&&this.motion.pauser()},PlayScene.prototype.resumeMotion=function(){this.motion&&this.motion.resume()},PlayScene.prototype.enableCameraMove=function(){this.cameraMovable=!0},PlayScene.prototype.disableCameraMove=function(){this.cameraMovable=!1,this.removePointerMoveHandler()},PlayScene.prototype.initMotion=function(){this.motion=new f.a(this.render),this.motion.setScene(this)},PlayScene.prototype.initListener=function(){this.input.on("pointerdown",this.onPointerDownHandler,this),this.input.on("pointerup",this.onPointerUpHandler,this)},PlayScene.prototype.onPointerDownHandler=function(e,i){this.cameraMovable&&(this.render.emitter.emit("pointerScene",m.SceneName.PLAY_SCENE,i),this.addPointerMoveHandler())},PlayScene.prototype.onPointerUpHandler=function(e){this.cameraMovable&&this.removePointerMoveHandler()},PlayScene.prototype.addPointerMoveHandler=function(){this.input.on("pointermove",this.onPointerMoveHandler,this),this.input.on("gameout",this.onGameOutHandler,this)},PlayScene.prototype.removePointerMoveHandler=function(){this.input.off("pointermove",this.onPointerMoveHandler,this),this.input.off("gameout",this.onGameOutHandler,this),this.render.camerasManager.moving&&(this.render.syncCameraScroll(),this.render.camerasManager.moving=!1)},PlayScene.prototype.onPointerMoveHandler=function(e){this.render.camerasManager.targetFollow||this.render.camerasManager.offsetScroll(e.prevPosition.x-e.position.x,e.prevPosition.y-e.position.y)},PlayScene.prototype.onGameOutHandler=function(){this.removePointerMoveHandler()},PlayScene}(c.a)},function(e,i,n){"use strict";n.r(i),n.d(i,"ToolTip",(function(){return h}));var a,s=n(0),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function ToolTip(i,n,a,s,o){var h=e.call(this,i)||this;return h.mScene=i,h.resStr=n,h.resJson=a,h.resUrl=s,h.uiScale=o,h.mWidth=0,h.mHeight=0,h.mBaseMidHeight=0,h.preLoad(),h}return o(ToolTip,e),ToolTip.prototype.setToolTipData=function(e){if(this.mText){var i=s.Tool.formatChineseString(e,this.mText.style.fontSize,this.mWidth-20);this.mText.setText(i),this.refreshTip()}},ToolTip.prototype.destroy=function(){this.topImage&&this.topImage.destroy(!0),this.midImage&&this.midImage.destroy(!0),this.botImage&&this.botImage.destroy(!0),this.mText&&this.mText.destroy(!0),this.mWidth=0,this.mHeight=0,this.removeAllListeners(),this.removeAll(),e.prototype.destroy.call(this,!0)},ToolTip.prototype.preLoad=function(){this.scene.load.atlas(this.resStr,this.resUrl,this.resJson),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.onLoadComplete,this),this.scene.load.start()},ToolTip.prototype.init=function(){this.topImage=this.scene.make.image(void 0,!1),this.topImage.setOrigin(0,0),this.topImage.setTexture(this.resStr,ToolTip.TOP),this.midImage=this.scene.make.image(void 0,!1),this.midImage.setOrigin(0,0),this.midImage.setTexture(this.resStr,ToolTip.MID),this.botImage=this.scene.make.image(void 0,!1),this.botImage.setOrigin(0,0),this.botImage.setTexture(this.resStr,ToolTip.BOT),this.mText=this.scene.make.text(void 0,!1),this.mText.setFontFamily("YaHei"),this.mText.setFontStyle("bold"),this.mText.setFontSize(14),this.mText.style.align="center",this.mText.lineSpacing=15,this.mWidth=this.topImage.width,this.mBaseMidHeight=this.midImage.height,this.mText.style.fixedWidth=this.mWidth-20,this.mText.style.setWordWrapWidth(this.mWidth-20,!0),this.add(this.topImage),this.add(this.midImage),this.add(this.botImage),this.add(this.mText)},ToolTip.prototype.refreshTip=function(){this.midImage.scaleY=(this.mText.height+20)/this.mBaseMidHeight,this.mHeight=this.topImage.height+this.midImage.height*this.midImage.scaleY+this.botImage.height,this.topImage.y=-this.topImage.height>>1,this.midImage.y=this.topImage.y+this.topImage.height,this.botImage.y=this.midImage.y+this.midImage.height*this.midImage.scaleY,this.mText.x=this.mWidth-this.mText.style.fixedWidth>>1,this.mText.y=this.mHeight-this.mText.height-10>>1,this.setSize(this.mWidth,this.mHeight)},ToolTip.prototype.onLoadComplete=function(){this.init()},ToolTip.TOP="tip_top.png",ToolTip.MID="tip_mid.png",ToolTip.BOT="tip_bot.png",ToolTip}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"NinePatch",(function(){return h}));var a,s=n(1033),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function NinePatch(i,n,a,o,h,l,c,m){var f=e.call(this,i,n,a)||this;return f.config=m||f.scene.cache.custom.ninePatch.get(c?""+c:l),f.patchKey=1e3*Math.random()+"",f.config.top=Math.round(f.config.top),f.config.right&&(f.config.right=Math.round(f.config.right)),f.config.bottom&&(f.config.bottom=Math.round(f.config.bottom)),f.config.left&&(f.config.left=Math.round(f.config.left)),Object(s.normalizePatchesConfig)(f.config),f.setSize(o,h),f.setTexture(l,c),f}return o(NinePatch,e),NinePatch.prototype.resize=function(e,i){return e=Math.round(e),i=Math.round(i),this.config?this.width===e&&this.height===i?this:(e=Math.max(e,this.config.left+this.config.right+1),i=Math.max(i,this.config.top+this.config.bottom+1),this.setSize(e,i),void this.drawPatches()):this},NinePatch.prototype.setTexture=function(e,i){return this.originTexture=this.scene.textures.get(e),this.setFrame(i),this.originTexture.setFilter(Phaser.Textures.FilterMode.LINEAR),this},NinePatch.prototype.setFrame=function(e){return this.originFrame=this.originTexture.frames[e]||this.originTexture.frames[NinePatch.__BASE],this.createPatches(),this.drawPatches(),this},NinePatch.prototype.setSize=function(i,n){return e.prototype.setSize.call(this,i,n),this.finalXs=[0,this.config.left,this.width-this.config.right,this.width],this.finalYs=[0,this.config.top,this.height-this.config.bottom,this.height],this},NinePatch.prototype.setTint=function(e){return this.tint=e,this},NinePatch.prototype.setTintFill=function(e){return this.tint=e,this.tintFill=!0,this},Object.defineProperty(NinePatch.prototype,"tintFill",{get:function(){return this.first&&this.first.tintFill},set:function(e){this.each((function(i){return i.tintFill=e}))},enumerable:!1,configurable:!0}),Object.defineProperty(NinePatch.prototype,"tint",{set:function(e){this.each((function(i){return i.setTintFill(e)})),this.internalTint=e},enumerable:!1,configurable:!0}),Object.defineProperty(NinePatch.prototype,"isTinted",{get:function(){return this.first&&this.first.isTinted},enumerable:!1,configurable:!0}),NinePatch.prototype.clearTint=function(){this.each((function(e){return e.clearTint()})),this.internalTint=void 0,this.tintFill=!1},NinePatch.prototype.destroy=function(){if(this.originTexture)for(var i=0,n=0;n<3;n++)for(var a=0;a<3;a++){var s=this.getPatchNameByIndex(i);this.originTexture.frames.hasOwnProperty(s)&&this.originTexture.remove(s),++i}e.prototype.destroy.call(this)},NinePatch.prototype.getPatchNameByIndex=function(e){return this.originFrame.name+NinePatch.patches[e]+this.patchKey},NinePatch.prototype.createPatches=function(){for(var e=[0,this.config.left,this.originFrame.width-this.config.right,this.originFrame.width],i=[0,this.config.top,this.originFrame.height-this.config.bottom,this.originFrame.height],n=0,a=0;a<3;a++)for(var s=0;s<3;s++)this.createPatchFrame(this.getPatchNameByIndex(n),e[s],i[a],e[s+1]-e[s],i[a+1]-i[a]),++n},NinePatch.prototype.drawPatches=function(){var e=this.tintFill;this.removeAll(!0);for(var i=0,n=0;n<3;n++)for(var a=0;a<3;a++){var s=this.originTexture.frames[this.getPatchNameByIndex(i)],o=new Phaser.GameObjects.Image(this.scene,0,0,s.texture.key,s.name);o.setOrigin(0),o.setPosition((1e3*this.finalXs[a]-this.width*this.originX*1e3)/1e3,(1e3*this.finalYs[n]-this.height*this.originY*1e3)/1e3),o.displayWidth=this.finalXs[a+1]-this.finalXs[a],o.displayHeight=this.finalYs[n+1]-this.finalYs[n],this.add(o),this.internalTint&&o.setTint(this.internalTint),o.tintFill=e,o.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),++i}},NinePatch.prototype.createPatchFrame=function(e,i,n,a,s){this.originTexture.frames.hasOwnProperty(e)||this.originTexture.add(e,this.originFrame.sourceIndex,this.originFrame.cutX+i,this.originFrame.cutY+n,a,s)},NinePatch.__BASE="__BASE",NinePatch.patches=["[0][0]","[1][0]","[2][0]","[0][1]","[1][1]","[2][1]","[0][2]","[1][2]","[2][2]"],NinePatch}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"ButtonEventDispatcher",(function(){return h}));var a,s=n(788),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function ButtonEventDispatcher(i,n,a,s,o){var h=e.call(this,i,n,a)||this;return h.mDownTime=0,h.mPressDelay=1e3,h.mIsMove=!1,h.mTweening=!1,h.tweenScale=.9,h.mTweenBoo=!0,h.mDuration=45,h.zoom=1,h.soundGroup={up:{key:"click"}},void 0===s&&(s=!0),h.mTweenBoo=s,Object.assign(h.soundGroup,o),h}return o(ButtonEventDispatcher,e),ButtonEventDispatcher.prototype.addListen=function(){this.removeListen(),this.on("pointerdown",this.onPointerDownHandler,this),this.on("pointerup",this.onPointerUpHandler,this),this.on("pointerout",this.onPointerOutHandler,this),this.on("pointermove",this.onPointerMoveHandler,this)},ButtonEventDispatcher.prototype.removeListen=function(){this.off("pointerdown",this.onPointerDownHandler,this),this.off("pointerup",this.onPointerUpHandler,this),this.off("pointerout",this.onPointerOutHandler,this),this.off("pointermove",this.onPointerMoveHandler,this)},Object.defineProperty(ButtonEventDispatcher.prototype,"enable",{set:function(e){e?(this.addListen(),this.setInteractive()):(this.removeListen(),this.removeInteractive())},enumerable:!1,configurable:!0}),ButtonEventDispatcher.prototype.onPointerMoveHandler=function(e){this.soundGroup&&this.soundGroup.move&&this.playSound(this.soundGroup.move),this.interactiveBoo&&(this.mIsMove=!0,this.EventStateChange(s.ClickEvent.Move),this.emit(s.ClickEvent.Move))},ButtonEventDispatcher.prototype.onPointerUpHandler=function(e){this.interactiveBoo?this.mTweenBoo?this.tween(!1,this.pointerUp.bind(this,e)):this.pointerUp(e):this.soundGroup&&this.soundGroup.disabled&&this.playSound(this.soundGroup.disabled)},ButtonEventDispatcher.prototype.pointerUp=function(e){var i=this.checkPointerInBounds(this,e.worldX,e.worldY);this.EventStateChange(s.ClickEvent.Up),this.emit(s.ClickEvent.Up,this),i&&this.mIsDown&&(this.soundGroup&&this.soundGroup.up&&this.playSound(this.soundGroup.up),this.EventStateChange(s.ClickEvent.Tap),this.emit(s.ClickEvent.Tap,e,this)),clearTimeout(this.mPressTime),this.mIsMove=!1,this.mIsDown=!1,this.mDownTime=0},ButtonEventDispatcher.prototype.onPointerOutHandler=function(e){this.mTweenBoo&&e.isDown&&this.tween(!1),this.checkPointerInBounds(this,e.worldX,e.worldY)||this.EventStateChange(s.ClickEvent.Out)},ButtonEventDispatcher.prototype.onPointerDownHandler=function(e){var i=this;this.mTweening||(this.interactiveBoo?(this.soundGroup&&this.soundGroup.down&&this.playSound(this.soundGroup.down),this.mDownTime=Date.now(),this.mPressTime=setTimeout((function(){i.EventStateChange(s.ClickEvent.Hold),i.emit(s.ClickEvent.Hold,i)}),this.mPressDelay),this.mTweenBoo&&this.tween(!0),this.EventStateChange(s.ClickEvent.Down),this.emit(s.ClickEvent.Down,this),this.mIsDown=!0):this.soundGroup&&this.soundGroup.disabled&&this.playSound(this.soundGroup.disabled))},ButtonEventDispatcher.prototype.checkPointerInBounds=function(e,i,n){this.mRectangle||(this.mRectangle=new Phaser.Geom.Rectangle(0,0,0,0));var a=e.getWorldTransformMatrix(),s=a.scaleX;this.mRectangle.left=-e.width/2,this.mRectangle.right=e.width/2,this.mRectangle.top=-e.height/2,this.mRectangle.bottom=e.height/2;var o=(i-a.tx)/s,h=(n-a.ty)/s;return this.mRectangle.left<=o&&this.mRectangle.right>=o&&this.mRectangle.top<=h&&this.mRectangle.bottom>=h},ButtonEventDispatcher.prototype.EventStateChange=function(e){},ButtonEventDispatcher.prototype.tween=function(e,i){var n=this;this.mTweening=!0;var a=e?this.tweenScale:1;this.mTween&&(this.mTween.stop(),this.mTween.remove(),this.mTween=void 0),this.mTween=this.scene.tweens.add({targets:this,duration:this.mDuration,ease:"Linear",props:{scaleX:{value:a},scaleY:{value:a}},onComplete:function(){n.tweenComplete(e),i&&i()},onCompleteParams:[this]})},ButtonEventDispatcher.prototype.tweenComplete=function(e){this.mTweening=!1,this.mTween&&(this.mTween.stop(),this.mTween.remove(),this.mTween=void 0)},ButtonEventDispatcher}(s.BaseUI)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaItemTipsPanel",(function(){return f}));var a,s=n(790),o=n(789),h=n(792),l=n(812),c=n(2),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaItemTipsPanel(i){var n=e.call(this,i)||this;return n.atlasNames=[s.d.uicommon],n.key=c.ModuleName.PICAITEMTIPSPANEL_NAME,n.uiLayer=o.MainUIScene.LAYER_TOOLTIPS,n}return m(PicaItemTipsPanel,e),Object.defineProperty(PicaItemTipsPanel,"Inst",{get:function(){return this.mInstance||(this.mInstance=l.PicaSingleManager.createSinglePanel(PicaItemTipsPanel)),this.mInstance},enumerable:!1,configurable:!0}),PicaItemTipsPanel.prototype.showTips=function(e,i,n){this.mInitialized?this.displayTips(e,i,n):this.show({gameobj:e,data:i,eventType:n})},PicaItemTipsPanel.prototype.destroy=function(){e.prototype.destroy.call(this),PicaItemTipsPanel.mInstance=void 0},PicaItemTipsPanel.prototype.onShow=function(){if(this.mShowData){var e=this.mShowData;this.displayTips(e.gameobj,e.data,e.eventType)}},PicaItemTipsPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.setSize(i,n),this.itemTips=new o.ItemInfoTips(this.scene,121*this.dpr,46*this.dpr,s.d.uicommon,"tips_bg",this.dpr),this.itemTips.setVisible(!1),this.add(this.itemTips),e.prototype.init.call(this)},PicaItemTipsPanel.prototype.displayTips=function(e,i,n){this.itemTips.setListenType(n),this.itemTips.setVisible(!0),this.itemTips.setItemData(i),this.setTipsPosition(e,.5*-e.height-5*this.dpr)},PicaItemTipsPanel.prototype.setTipsPosition=function(e,i){void 0===i&&(i=0);var n=e.getWorldTransformMatrix(),a=n.tx/this.scale,s=n.ty/this.scale,o=this.itemTips.width,h=.5*o+10*this.dpr,l=this.width-.5*o-10*this.dpr;a<h?a=h:a>l&&(a=l),s+=i,this.itemTips.x=a,this.itemTips.y=s},PicaItemTipsPanel}(h.PicaBasePanel)},function(e,i,n){"use strict";var a=n(1076);n.o(a,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return a.MainUIRedType}));var s=n(1077);n.o(s,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return s.MainUIRedType}));var o=n(1078);n.o(o,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return o.MainUIRedType}));var h=n(1079);n.o(h,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return h.MainUIRedType}));var l=n(1080);n.o(l,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return l.MainUIRedType}));var c=n(1081);n.o(c,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return c.MainUIRedType}));var m=n(1082);n.o(m,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return m.MainUIRedType}));var f=n(1083);n.o(f,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return f.MainUIRedType}));var g=n(1084);n.o(g,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return g.MainUIRedType}));var _=n(1085);n.o(_,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return _.MainUIRedType}));var T=n(1086);n.o(T,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return T.MainUIRedType}));var x=n(1087);n.o(x,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return x.MainUIRedType}));var S=n(1088);n.o(S,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return S.MainUIRedType}));var j=n(1089);n.o(j,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return j.MainUIRedType}));var q=n(1090);n.o(q,"MainUIRedType")&&n.d(i,"MainUIRedType",(function(){return q.MainUIRedType}));var Y=n(1091);n.d(i,"MainUIRedType",(function(){return Y.a}))},function(e,i,n){"use strict";n.r(i),n.d(i,"SecondaryMenuPanel",(function(){return h}));var a,s=n(788),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function SecondaryMenuPanel(i,n,a,o,h,l,c,m){var f=e.call(this,i,n,a)||this;return f.dpr=l,f.zoom=c,f.setSize(o,h),m.cellupCallBack=f.onSelectCategoryHandler.bind(f),f.gameScroll=new s.GameScroller(f.scene,m),f.add(f.gameScroll),f}return o(SecondaryMenuPanel,e),SecondaryMenuPanel.prototype.setHandler=function(e,i){this.categoryHandler=e,this.subCategoryHandler=i},SecondaryMenuPanel.prototype.setButtonChangeHandler=function(e,i,n,a){this.categoryNormalHandler=e,this.categoryDownHandler=i,this.subNormalHandler=n,this.subDownHandler=a},SecondaryMenuPanel.prototype.setCategories=function(e,i,n,a){this.categoryBtn=void 0,this.gameScroll.clearItems();for(var s=n.width,o=n.height,h=n.key,l=n.normalFrame,c=n.downFrame,m=n.patchConfig,f=n.music,g=n.bold,_=[],T=0,x=i;T<x.length;T++){var S=x[T],j=S.text,q=new e(this.scene,h,l,c,j,f,this.dpr,this.zoom,m);n.textStyle&&q.setTextStyle(n.textStyle),q.setData("category",S.data),q.disableInteractive(),g&&q.setFontStyle("bold"),s&&(q.width=s),o&&(q.height=o),this.gameScroll.addItem(q),_.push(q)}this.gameScroll.Sort(!0),this.gameScroll.refreshMask(),a&&a.runWith([_]),this.onSelectCategoryHandler(_[0])},SecondaryMenuPanel.prototype.setSubItems=function(e){if(this.gridTable){this.subCategoryBtn=void 0,this.gridTable.setItems(e),this.gridTable.resetMask();var i=this.gridTable.getCells();if(i){var n=i[0];n&&n.container&&this.onSubCategoryHandler(n.container)}}},SecondaryMenuPanel.prototype.createGrideTable=function(e,i,n,a,o,h,l,c){var m=this;void 0===c&&(c=1);var f={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:o,cellHeight:h,reuseCellContainer:!0,zoom:this.zoom},scrollMode:c,clamplChildOY:!1,createCellContainerCallback:l};this.gridTable=new s.GameGridTable(this.scene,f),this.gridTable.layout(),this.gridTable.on("cellTap",(function(e){e&&m.onSubCategoryHandler(e)})),this.add(this.gridTable),this.gridTable.resetMask()},SecondaryMenuPanel.prototype.onSelectCategoryHandler=function(e){this.categoryBtn&&(this.categoryNormalHandler?this.categoryNormalHandler.runWith(this.categoryBtn):this.categoryBtn.changeNormal()),this.categoryDownHandler?this.categoryDownHandler.runWith(e):e.changeDown(),this.categoryBtn=e;var i=e.getData("category");this.categoryHandler&&this.categoryHandler.runWith(i)},SecondaryMenuPanel.prototype.onSubCategoryHandler=function(e){this.subCategoryBtn&&(this.subNormalHandler?this.subNormalHandler.runWith(this.subCategoryBtn):this.subCategoryBtn.changeNormal()),this.subDownHandler?this.subDownHandler.runWith(e):e.changeDown(),this.subCategoryBtn=e,this.subCategoryHandler&&this.subCategoryHandler.runWith(e)},SecondaryMenuPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i);var a=n(797);for(var s in a)"default"!==s&&function(e){n.d(i,e,(function(){return a[e]}))}(s);var o=n(918);n.d(i,"UiManager",(function(){return o.UiManager}));var h=n(811);for(var s in h)["UiManager","default"].indexOf(s)<0&&function(e){n.d(i,e,(function(){return h[e]}))}(s);var l=n(925);n.d(i,"RankPanel",(function(){return l.RankPanel}))},function(e,i,n){"use strict";n.r(i),n.d(i,"TextToolTips",(function(){return l}));var a,s=n(788),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function TextToolTips(i,n,a,h,l){var c=e.call(this,i)||this,m=i.textures.getFrame(n,a),f=m.width,g=m.height;return c.dpr=h,c.bg=new s.NineSlicePatch(c.scene,0,0,f,g,n,a,{left:20*h,top:20*h,right:20*h,bottom:20*h}),c.text=new s.BBCodeText(c.scene,0,0,"蓝矿石",{color:"#333333",fontSize:13*c.dpr,fontFamily:o.Font.DEFULT_FONT,wrap:{width:90*c.dpr,mode:"string"}}).setOrigin(0),c.add([c.bg,c.text]),c.setSize(f+20*h,g+20*h),c}return h(TextToolTips,e),TextToolTips.prototype.setSize=function(i,n){e.prototype.setSize.call(this,i,n),this.bg.resize(i,n),this.bg.setPosition(0,0);var a=i-16*this.dpr,s=n-16*this.dpr;return this.text.setSize(a,s),this.text.setWrapWidth(a),this.text.setPosition(.5*-a,.5*-s),this},TextToolTips.prototype.setText=function(e){this.text.text=e,this.text.height>this.height&&this.setSize(this.width,this.text.height+16*this.dpr)},TextToolTips.prototype.setDelayText=function(e,i,n){var a=this;this.visible=!0,this.setText(e),this.timeID&&clearTimeout(this.timeID),this.timeID=setTimeout((function(){a.visible=!1,n&&n.run()}),i)},TextToolTips}(Phaser.GameObjects.Container)},function(e,i){},function(e,i,n){"use strict";n.r(i),n.d(i,"ThreeSlicePath",(function(){return l}));var a,s=n(788),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function ThreeSlicePath(i,n,a,s,h,l,c,m,f,g){var _=e.call(this,i,m,f)||this;return _.mCorrection=4,_.dpr=m||o.UiUtils.baseDpr,_.scale=f||o.UiUtils.baseScale,_.mCorrection=void 0===g?4:g,_.imgs=[],_.setTexture(l,c),_.setSize(s,h),_.setPosition(n,a),_}return h(ThreeSlicePath,e),ThreeSlicePath.prototype.resize=function(e,i){if(e=Math.round(e),i=Math.round(i),this.width===e&&this.height===i)return this;this.setSize(e,i)},Object.defineProperty(ThreeSlicePath.prototype,"correctValue",{set:function(e){this.mCorrection=e},enumerable:!1,configurable:!0}),ThreeSlicePath.prototype.setTexture=function(e,i){return this.imgs[0]?this.imgs[0].setTexture(e,i[0]):(this.imgs[0]=this.scene.make.image({key:e,frame:i[0]}),this.add(this.imgs[0])),this.imgs[2]?this.imgs[2].setTexture(e,i[2]):(this.imgs[2]=this.scene.make.image({key:e,frame:i[2]}),this.add(this.imgs[2])),this.imgs[1]?this.imgs[1].setTexture(e,i[1]):(this.imgs[1]=this.scene.make.image({key:e,frame:i[1]}),this.add(this.imgs[1])),this},ThreeSlicePath.prototype.setFrame=function(e){return this.imgs[0].setFrame(e[0]),this.imgs[1].setFrame(e[1]),this.imgs[2].setFrame(e[2]),this},ThreeSlicePath.prototype.setSize=function(i,n){e.prototype.setSize.call(this,i,n),this.imgs[0].scale=1,this.imgs[2].scale=1;var a=i-(this.imgs[0].displayWidth+this.imgs[2].displayWidth)+this.mCorrection;return a<0&&(a=0,this.imgs[0].displayWidth=.5*i,this.imgs[2].displayWidth=.5*i),this.imgs[0].x=.5*-i+.5*this.imgs[0].displayWidth,this.imgs[2].x=.5*i-.5*this.imgs[2].displayWidth,this.imgs[1].displayWidth=a,this},ThreeSlicePath.prototype.setTint=function(e){return this.tint=e,this},ThreeSlicePath.prototype.setTintFill=function(e){return this.tint=e,this.tintFill=!0,this},Object.defineProperty(ThreeSlicePath.prototype,"tintFill",{get:function(){return this.first&&this.first.tintFill},set:function(e){this.imgs.forEach((function(i){return i.tintFill=e}))},enumerable:!1,configurable:!0}),Object.defineProperty(ThreeSlicePath.prototype,"tint",{set:function(e){this.imgs.forEach((function(i){return i.setTint(e)})),this.internalTint=e},enumerable:!1,configurable:!0}),Object.defineProperty(ThreeSlicePath.prototype,"isTinted",{get:function(){return this.first&&this.first.isTinted},enumerable:!1,configurable:!0}),ThreeSlicePath.prototype.clearTint=function(){this.each((function(e){return e.clearTint()})),this.internalTint=void 0,this.tintFill=!1},ThreeSlicePath.prototype.destroy=function(){e.prototype.destroy.call(this),this.imgs&&(this.imgs.length=0),this.imgs=void 0},ThreeSlicePath}(s.BaseUI)},function(e,i,n){"use strict";n.r(i),n.d(i,"ItemSlot",(function(){return c}));var a=n(825),s=n(0),o=n(800),h=n(2),l=n(798),c=function(){function ItemSlot(e,i,n,a,s,o,h,l,c,m,f){this.minitialize=!1,this.mWid=0,this.mHei=0,this.isTipBoo=!0,this.mScene=e,this.mRender=i,this.toolTipCon=e.make.container(void 0,!1),this.toolTipCon.x=a,this.toolTipCon.y=s,n.add(this.toolTipCon),this.mResStr=o,this.mResPng=h,this.mResJson=l,this.mResSlot=c,this.mSubScriptRes=f,this.mSelectRes=m}return Object.defineProperty(ItemSlot.prototype,"hasTip",{get:function(){return this.isTipBoo},set:function(e){this.isTipBoo=e},enumerable:!1,configurable:!0}),ItemSlot.prototype.createUI=function(){this.onLoadCompleteHandler()},ItemSlot.prototype.getView=function(){return this.toolTipCon},ItemSlot.prototype.getBg=function(){return this.itemBG},ItemSlot.prototype.getIcon=function(){return this.mIcon},ItemSlot.prototype.dataChange=function(e){var i=this;if(this.minitialize)if(this.mData=e,this.mIcon){var n=void 0;if(this.mData&&this.mData.display){n=this.mData.display.texturePath;this.mData.des&&this.mData.des;this.setToolTipData(this.mData.name+this.mData.des)}else this.mIcon.icon.visible=!1;if(!n)return;this.mScene.textures.exists(s.Url.getOsdRes(n))?this.mData&&(this.mIcon.icon.setTexture(s.Url.getOsdRes(n)),this.mIcon.icon.visible=!0):this.mIcon.load(n,this,(function(){i.mData&&(i.mIcon.icon.visible=!0)}))}else this.mIcon.icon.visible=!1},ItemSlot.prototype.destroy=function(){this.mSubScriptSprite&&(this.mSubScriptSprite.destroy(!0),this.mSubScriptSprite=null),this.mSelectSprite&&(this.mSelectSprite.destroy(!0),this.mSelectSprite=null),this.mIcon&&this.mIcon.destroy(),this.toolTipCon&&(this.toolTipCon.destroy(),this.toolTipCon=null),this.toolTip&&(this.toolTip.destroy(),this.toolTip=null),this.mAnimationCon&&(this.mAnimationCon.destroy(!0),this.mAnimationCon=null),this.itemBG&&(this.itemBG.destroy(!0),this.itemBG=null),this.index=0,this.mData=null,this.mScene=null,this.mRender=null,this.mResStr=null,this.mResPng=null,this.mResSlot=null,this.mResJson=null,this.mSubScriptRes=null,this.mSelectRes=null,this.minitialize=!1,this.mWid=0,this.mHei=0,this.mData=null,this.isTipBoo=!0},ItemSlot.prototype.setToolTipData=function(e){this.toolTip&&this.toolTip.setToolTipData(e)},ItemSlot.prototype.onLoadCompleteHandler=function(){this.itemBG=this.mScene.make.sprite(void 0,!1),this.itemBG.setTexture(this.mResStr,this.mResSlot),this.toolTipCon.addAt(this.itemBG,0),this.toolTipCon.setSize(this.itemBG.width,this.itemBG.height),this.mIcon=new a.DragDropIcon(this.mScene,0,0),this.toolTipCon.addAt(this.mIcon,1),this.mSubScriptRes&&(this.mSubScriptSprite=this.mScene.make.sprite(void 0,!1),this.mSubScriptSprite.setTexture(this.mResStr,this.mSubScriptRes),this.mSubScriptSprite.x=this.mSubScriptSprite.width-this.itemBG.width>>1,this.mSubScriptSprite.y=this.mSubScriptSprite.height-this.itemBG.height>>1),this.isTipBoo&&(this.toolTip=new o.ToolTip(this.mScene,"itemSlotTip",s.Url.getRes("ui/toolTip/toolTip.json"),s.Url.getRes("ui/toolTip/toolTip.png"),this.mRender.uiScale)),this.toolTipCon.setInteractive(new Phaser.Geom.Rectangle(0,0,this.itemBG.width,56),Phaser.Geom.Rectangle.Contains),this.toolTipCon.on("pointerover",this.overHandler,this),this.toolTipCon.on("pointerout",this.outHandler,this),this.toolTipCon.on("pointerdown",this.downHandler,this),this.toolTipCon.on("pointerup",this.outHandler,this),this.minitialize=!0,this.mData&&this.dataChange(this.mData),this.mWid+=this.itemBG.width,this.mHei+=this.itemBG.height},ItemSlot.prototype.downHandler=function(e){this.mData&&this.mRender.renderEmitter(h.EventType.REQUEST_TARGET_UI,this.mData.id)},ItemSlot.prototype.overHandler=function(e){this.toolTip&&this.mData&&(this.mRender.sceneManager.currentScene.layerManager.addToLayer(l.a.LAYER_TOOLTIPS,this.toolTip),this.toolTip.setToolTipData(this.mData.name+this.mData.des),this.toolTip.x=e.x,this.toolTip.y=e.y),this.mSelectRes&&this.mSelectRes.length>0&&(this.mSelectSprite=this.mScene.make.sprite(void 0,!1),this.mSelectSprite.play(this.mSelectRes),this.toolTipCon.add(this.mSelectSprite))},ItemSlot.prototype.outHandler=function(e){this.toolTip&&this.toolTip.parentContainer&&this.toolTip.parentContainer.remove(this.toolTip),this.mSelectSprite&&this.mSelectSprite.parentContainer&&(this.mSelectSprite.parentContainer.remove(this.mSelectSprite),this.mSelectSprite.destroy(!0),this.mSelectSprite=null)},ItemSlot}()},function(e,i,n){"use strict";n.r(i);var a=n(919);for(var s in a)"default"!==s&&function(e){n.d(i,e,(function(){return a[e]}))}(s);var o=n(920);for(var s in o)"default"!==s&&function(e){n.d(i,e,(function(){return o[e]}))}(s);var h=n(921);for(var s in h)"default"!==s&&function(e){n.d(i,e,(function(){return h[e]}))}(s);var l=n(922);n.d(i,"BagPanel",(function(){return l.BagPanel}));var c=n(923);n.d(i,"StoragePanel",(function(){return c.StoragePanel}))},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaSingleManager",(function(){return s}));var a=n(0),s=function(){function PicaSingleManager(e){this.uiMgr=e,this.singleMap=new Map,this.uiMgr=e,PicaSingleManager.Intsance=this}return PicaSingleManager.prototype.destroy=function(){this.clearSingleMap()},PicaSingleManager.prototype.clearSingleMap=function(){var e=this.singleMap;e.forEach((function(e,i){e.destroy(),a.Logger.getInstance().debug(e)})),e.clear()},PicaSingleManager.createSinglePanel=function(e){var i=this.Intsance,n=new e(this.Intsance.uiMgr);return i.singleMap.set(e.name,n),n},PicaSingleManager}()},function(e,i,n){"use strict";n.r(i),n.d(i,"ImageValue",(function(){return m})),n.d(i,"ImageBBCodeValue",(function(){return f})),n.d(i,"DynamicImageValue",(function(){return g}));var a,s=n(788),o=n(790),h=n(0),l=n(789),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function ImageValue(i,n,a,s,o,h,l){var c=e.call(this,i)||this;return c.layoutType=1,c.uintImg=!1,c.dpr=h,c.setSize(n,a),c.offset=new Phaser.Geom.Point(0,0),c.create(s,o,l),c.add([c.icon,c.value]),c.resetSize(),c}return c(ImageValue,e),ImageValue.prototype.setUintText=function(e){this.uintText||(e.img?(this.uintText=this.scene.make.image({key:o.d.uicommon,frame:"home_silver_myriad"}).setOrigin(0,.5),this.uintImg=!0):this.uintText=this.scene.make.text({style:e.style}).setOrigin(0,.5),this.add(this.uintText)),e.img?e.key?this.uintText.setTexture(e.key,e.frame):e.frame&&this.uintText.setFrame(e.frame):(e.style&&this.uintText.setStyle(e.style),e.fontStyle&&this.uintText.setFontStyle(e.fontStyle),e.text&&(this.uintText.text=e.text)),this.uintText.visible=!0,this.resetSize()},ImageValue.prototype.setUintTextVisible=function(e){this.uintText&&(this.uintText.visible=e)},ImageValue.prototype.setFrameValue=function(e,i,n){this.icon.setTexture(i,n),this.value.text=e,this.resetSize()},ImageValue.prototype.setText=function(e){this.value.text=e,this.resetSize()},ImageValue.prototype.setFontStyle=function(e){this.value.setFontStyle(e)},ImageValue.prototype.setTextStyle=function(e){this.value.setStyle(e)},ImageValue.prototype.setTextFilter=function(e){this.value.texture.setFilter(e)},ImageValue.prototype.setShadow=function(e,i,n,a,s,o){this.value.setShadow(e,i,n,a,s,o)},ImageValue.prototype.setStroke=function(e,i){this.value.setStroke(e,i)},ImageValue.prototype.setOffset=function(e,i){this.offset.x=e,this.offset.y=i,this.resetSize()},ImageValue.prototype.resetSize=function(){var e=this.uintText?this.uintText.width:0,i=this.icon.displayWidth+this.value.width+e,n=this.width-i;1===this.layoutType?this.x-=.5*n:3===this.layoutType&&(this.x+=.5*n),this.setSize(i,this.height),this.resetPosition()},ImageValue.prototype.setLayout=function(e){this.layoutType=e,this.resetSize()},ImageValue.prototype.create=function(e,i,n){this.icon=this.scene.make.image({key:e,frame:i}),this.icon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),n||(n={fontFamily:h.Font.DEFULT_FONT,fontSize:11*this.dpr,color:"#ffffff"}),this.value=this.scene.make.text({x:0,y:0,text:"0",style:n}),this.value.setOrigin(0,.5);var a=this.icon.displayWidth+this.value.width;this.setSize(a,this.height)},ImageValue.prototype.resetPosition=function(){this.icon.x=.5*-this.width+.5*this.icon.displayWidth,this.value.x=this.icon.x+.5*this.icon.displayWidth+4*this.dpr+this.offset.x,this.value.y=this.offset.y,this.uintText&&(this.uintText.x=this.value.x+this.value.width+3*this.dpr,this.uintText.y=this.value.y+(this.uintImg?1*this.dpr:0))},ImageValue}(Phaser.GameObjects.Container),f=function(e){function ImageBBCodeValue(i,n,a,s,o,h,l){return e.call(this,i,n,a,s,o,h,l)||this}return c(ImageBBCodeValue,e),ImageBBCodeValue.prototype.create=function(e,i,n){this.icon=this.scene.make.image({key:e,frame:i}),this.icon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),n||(n={fontFamily:h.Font.DEFULT_FONT,fontSize:11*this.dpr,color:"#ffffff"}),this.value=new s.BBCodeText(this.scene,0,0,"10",n),this.value.setOrigin(0,.5);var a=this.icon.displayWidth+this.value.width;this.setSize(a,this.height)},ImageBBCodeValue}(m),g=function(e){function DynamicImageValue(i,n,a,s,o,h,l){return e.call(this,i,n,a,s,o,h,l)||this}return c(DynamicImageValue,e),DynamicImageValue.prototype.load=function(e){var i=this;this.icon.load(e,this,(function(){i.icon.scale=1,i.icon.displayHeight=i.height-4*i.dpr,i.icon.scaleX=i.icon.scaleY,i.icon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),i.resetSize()}))},DynamicImageValue.prototype.create=function(e,i,n){this.icon=new l.DynamicImage(this.scene,0,0),this.icon.scale=this.dpr,n||(n=h.UIHelper.whiteStyle(this.dpr)),this.value=this.scene.make.text({x:0,y:0,text:"10",style:n}),this.value.setOrigin(0,.5);var a=this.icon.displayWidth+this.value.width;this.setSize(a,this.height)},Object.defineProperty(DynamicImageValue.prototype,"textWidth",{get:function(){return this.value.width},enumerable:!1,configurable:!0}),DynamicImageValue}(m)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaChapterLevelClue",(function(){return l}));var a,s=n(790),o=n(793),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function PicaChapterLevelClue(i,n,a,o){var h=e.call(this,i,s.d.uicommon,"bag_icon_common_bg",n,1,!1)||this;return h.dpr=n,h.setSize(a,o),h.gou=h.scene.make.image({key:s.d.uicommon,frame:"selected"}),h.gou.x=.5*h.width-.5*h.gou.width,h.gou.y=.5*h.height-.5*h.gou.height,h.add([h.gou]),h.BGVisible=!1,h}return h(PicaChapterLevelClue,e),PicaChapterLevelClue.prototype.setItemData=function(i){e.prototype.setItemData.call(this,i),this.gou.visible=!1,this.itemIcon.scale=this.dpr/this.zoom},PicaChapterLevelClue.prototype.setTexture=function(e,i){this.itemIcon.setTexture(e,i),this.itemIcon.scale=1,this.gou.visible=!1},PicaChapterLevelClue}(o.ItemButton)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaTaskPanel",(function(){return S}));var a,s=n(1),o=n(1111),h=n(789),l=n(2),c=n(790),m=n(0),f=n(792),g=n(844),_=n(788),T=n(794),x=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),S=function(e){function PicaTaskPanel(i){var n=e.call(this,i)||this;return n.toggleItems=[],n.redMap=new Map,n.key=l.ModuleName.PICATASK_NAME,n.atlasNames=[c.d.uicommon],n}return x(PicaTaskPanel,e),PicaTaskPanel.prototype.hide=function(){this.render.emitter.emit(PicaTaskPanel.PICATASK_CLOSE),e.prototype.hide.call(this)},PicaTaskPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.blackBg.clear(),this.blackBg.fillStyle(0,.5),this.blackBg.fillRect(-this.x,-this.y,a,s),this.bg.clear(),this.bg.fillStyle(0,.6),this.bg.fillRect(0,0,this.content.width,s),this.bg.x=.5*-this.content.width,this.bg.y=.5*-this.content.height,this.rewardLine.clear(),this.rewardLine.fillStyle(16777215,.6),this.rewardLine.fillRect(-136*this.dpr,0,272*this.dpr,1*this.dpr),this.selectLine.clear(),this.selectLine.fillStyle(16774217,.5),this.selectLine.fillRect(-29*this.dpr,0,58*this.dpr,2*this.dpr),this.content.x=.5*-this.content.width-10*this.dpr,this.content.y=.5*s,this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains),this.mainPanel.refreshMask()},PicaTaskPanel.prototype.onShow=function(){var e=this.mShowData||1;this.onToggleButtonHandler(void 0,this.toggleItems[e-1])},PicaTaskPanel.prototype.addListen=function(){this.mInitialized&&this.blackBg.on("pointerup",this.OnClosePanel,this)},PicaTaskPanel.prototype.removeListen=function(){this.mInitialized&&this.blackBg.off("pointerup",this.OnClosePanel,this)},PicaTaskPanel.prototype.init=function(){this.setSize(this.scaleWidth,this.scaleHeight),this.blackBg=this.scene.make.graphics(void 0,!1);var i=300*this.dpr,n=this.height;this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.content.setInteractive(),this.add([this.blackBg,this.content]),this.bg=this.scene.make.graphics(void 0,!1),this.tilteName=this.scene.make.text({text:m.i18n.t("task.title"),style:m.UIHelper.whiteStyle(this.dpr,18)}),this.tilteName.setOrigin(0,.5),this.tilteName.setFontStyle("bold"),this.tilteName.x=.5*-i+20*this.dpr,this.tilteName.y=.5*-n+40*this.dpr,this.selectLine=this.scene.make.graphics(void 0,!1),this.rewardLine=this.scene.make.graphics(void 0,!1),this.rewardLine.x=0,this.rewardLine.y=this.tilteName.y+55*this.dpr,this.content.add([this.bg,this.tilteName,this.rewardLine,this.selectLine]);var a=.5*this.height-this.rewardLine.y-10*this.dpr;this.mainPanel=new g.PicaTaskMainPanel(this.scene,this.content.width,a,this.dpr,this.scale,this.render),this.mainPanel.setHandler(new m.Handler(this,this.onMainPanelHandler)),this.mainPanel.y=.5*this.height-.5*a,this.content.add(this.mainPanel),this.createOptionButtons(),this.resize(),e.prototype.init.call(this),this.playMove()},PicaTaskPanel.prototype.createOptionButtons=function(){for(var e=[{text:m.i18n.t("task.main_quest"),type:s.op_pkt_def.PKT_Quest_Type.QUEST_MAIN_MISSION},{text:m.i18n.t("task.daily_quest"),type:s.op_pkt_def.PKT_Quest_Type.QUEST_DAILY_GOAL}],i=[o.RedDotTypeEnum.MAIN_QUEST_REDDOTSTATUS,o.RedDotTypeEnum.DAILY_QUEST_REDDOTSTATUS],n=272*this.dpr,a=n/e.length,l=20*this.dpr,c=-n/2,f=.5*-this.height+75*this.dpr,g=0;g<e.length;g++){var x=e[g];(S=new h.ToggleColorButton(this.scene,a,20*this.dpr,this.dpr,x.text)).on(_.ClickEvent.Tap,this.onToggleButtonHandler,this),S.x=c+.5*a,S.y=f,S.setData("item",x.type),S.setSize(a,l),this.content.add(S),S.setChangeColor("#FFF449"),S.setFontSize(14*this.dpr),c+=a,this.toggleItems.push(S)}for(g=0;g<this.toggleItems.length;g++){var S=this.toggleItems[g],j=i[g],q=T.UITools.creatRedImge(this.scene,S,{x:-30*this.dpr,y:-10*this.dpr});this.redMap.set(j,q)}},PicaTaskPanel.prototype.setTaskDatas=function(e){e.questType===this.questType&&this.mainPanel.setTaskDatas(e,e.questType)},PicaTaskPanel.prototype.setTaskDetail=function(e){},PicaTaskPanel.prototype.setRedsState=function(e){this.tempDatas=e,this.mInitialized&&this.redMap.forEach((function(i,n){i.visible=-1!==e.indexOf(n)}))},PicaTaskPanel.prototype.onToggleButtonHandler=function(e,i){this.curToggleItem!==i&&(this.curToggleItem&&(this.curToggleItem.isOn=!1),this.curToggleItem=i,i.isOn=!0,this.questType=i.getData("item"),this.selectLine.x=i.x,this.selectLine.y=i.y+20*this.dpr,this.render.renderEmitter(l.ModuleName.PICATASK_NAME+"_questlist",this.questType))},PicaTaskPanel.prototype.onMainPanelHandler=function(e,i){"finish"===e?this.render.renderEmitter(l.ModuleName.PICATASK_NAME+"_submitquest",i):"go"===e?this.render.renderEmitter(l.ModuleName.PICATASK_NAME+"_querygo",i.Uinames):"detail"===e||"reward"===e&&this.render.renderEmitter(l.ModuleName.PICATASK_NAME+"_queryreward",this.questType)},PicaTaskPanel.prototype.OnClosePanel=function(){this.render.renderEmitter(l.ModuleName.PICATASK_NAME+"_hide")},PicaTaskPanel.prototype.playMove=function(){var e=this,i=.5*-this.content.width-10*this.dpr,n=.5*this.content.width,a=this.scene.tweens.add({targets:this.content,x:{from:i,to:n},ease:"Linear",duration:300,onComplete:function(){a.stop(),a.remove(),e.mainPanel.refreshMask(),e.mainPanel.moveFinish()}})},PicaTaskPanel.PICATASK_CLOSE="PICATASK_CLOSE",PicaTaskPanel.PICATASK_DATA="PICATASK_DATA",PicaTaskPanel}(f.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaManorBasePanel",(function(){return c}));var a,s=n(788),o=n(790),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaManorBasePanel(i,n,a,s,o,h,l){var c=e.call(this,i,n,a)||this;return c.dpr=h,c.key=l,c.setSize(s,o),c.create(),c}return l(PicaManorBasePanel,e),PicaManorBasePanel.prototype.setTitleText=function(e){this.titleText.text=e},PicaManorBasePanel.prototype.setCloseHandler=function(e){this.closeHandler=e},PicaManorBasePanel.prototype.create=function(){var e=this.width,i=this.height;this.createBackground(e,i);var n=.5*-i;this.titlebg=this.scene.make.image({x:0,y:0,key:o.c.common2Key,frame:"title"}),this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titlebg.y=n+5*this.dpr,this.add(this.titlebg),this.titleText=this.scene.make.text({x:0,y:this.titlebg.y+2*this.dpr,text:h.i18n.t("manor.title"),style:{color:"#905C06",fontSize:21*this.dpr,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(.5),this.titleText.setFontStyle("bold"),this.titleText.setResolution(this.dpr),this.add(this.titleText),this.closeBtn=new s.Button(this.scene,o.c.commonKey,"close"),this.closeBtn.setDisplaySize(28*this.dpr,28*this.dpr),this.closeBtn.setPosition(.5*this.width-8*this.dpr,n+7*this.dpr),this.closeBtn.on(String(s.ClickEvent.Tap),this.onCloseHandler,this),this.add(this.closeBtn)},PicaManorBasePanel.prototype.createBackground=function(e,i){this.bg=new s.NineSlicePatch(this.scene,0,0,e,i,o.c.commonKey,"bg",{left:70*this.dpr,top:30*this.dpr,right:30*this.dpr,bottom:70*this.dpr}),this.add(this.bg)},PicaManorBasePanel.prototype.onCloseHandler=function(){this.closeHandler&&this.closeHandler.run()},PicaManorBasePanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessContentPanel",(function(){return c}));var a,s=n(788),o=n(790),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaBusinessContentPanel(i,n,a,s,o,h,l,c){var m=e.call(this,i,n,a)||this;return m.setSize(s,o),m.dpr=h,m.key=l,m.key2=c,m.create(),m}return l(PicaBusinessContentPanel,e),PicaBusinessContentPanel.prototype.create=function(){var e=this.width,i=this.height;this.bg=new s.NineSlicePatch(this.scene,0,0,e,i,o.c.common2Key,"bg",{left:70*this.dpr,top:30*this.dpr,right:30*this.dpr,bottom:70*this.dpr}),this.add(this.bg);var n=.5*-i;this.topbg=this.scene.make.image({key:this.key,frame:"eaves"}),this.topbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.topbg.y=n-2*this.dpr,this.add(this.topbg),this.titlebg=this.scene.make.image({key:this.key,frame:"title"}),this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titlebg.y=n-25*this.dpr,this.add(this.titlebg),this.titleText=this.scene.make.text({x:0,y:this.titlebg.y-5*this.dpr,text:h.i18n.t("business_street.commercial_street"),style:{fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#FFD248"}}).setOrigin(.5,0),this.titleText.setStroke("#553100",2*this.dpr),this.titleText.setShadow(2,2,"#553100",4*this.dpr,!0,!0),this.titleText.setFontStyle("bold"),this.add(this.titleText),this.closeBtn=new s.Button(this.scene,o.c.commonKey,"close"),this.closeBtn.setDisplaySize(28*this.dpr,28*this.dpr),this.closeBtn.setPosition(.5*this.width-8*this.dpr,n+7*this.dpr),this.closeBtn.on(String(s.ClickEvent.Tap),this.onCloseHandler,this),this.add(this.closeBtn),this.setContentSize(e,i)},PicaBusinessContentPanel.prototype.setContentSize=function(e,i){this.setSize(e,i),this.bg.resize(e,i);var n=.5*-i;this.topbg.y=n-2*this.dpr,this.titlebg.y=n-25*this.dpr,this.titleText.y=this.titlebg.y-5*this.dpr,this.closeBtn.setPosition(.5*this.width-8*this.dpr,n+7*this.dpr)},PicaBusinessContentPanel.prototype.setTitleText=function(e){this.titleText.text=e},PicaBusinessContentPanel.prototype.setCloseHandler=function(e){this.closeHandler=e},PicaBusinessContentPanel.prototype.onCloseHandler=function(){this.closeHandler&&this.closeHandler.run()},PicaBusinessContentPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"DynamicNinepatch",(function(){return s}));var a=n(788),s=function(){function DynamicNinepatch(e,i){this.mScene=e,this.mParent=i}return DynamicNinepatch.prototype.load=function(e,i,n,a){this.mLoadCompleteCallBack=n,this.mLoadContext=a,this.mConfig=i,this.mUrl=e,this.mScene.cache.obj.get(e)?this.onLoadCompleteHandler():(this.mScene.load.image(this.mUrl,this.mUrl),this.mScene.load.once(Phaser.Loader.Events.COMPLETE,this.onLoadCompleteHandler,this),this.mScene.load.start())},DynamicNinepatch.prototype.onLoadCompleteHandler=function(){this.mImage=new a.NineSlicePatch(this.mScene,0,0,this.mConfig.width,this.mConfig.height,this.mConfig.key,void 0,this.mConfig.config,this.mConfig.scale),this.mLoadCompleteCallBack&&(this.mLoadCompleteCallBack.call(this.mLoadContext,this.mImage),this.mLoadCompleteCallBack=null,this.mLoadContext=null)},Object.defineProperty(DynamicNinepatch.prototype,"image",{get:function(){return this.mImage},enumerable:!1,configurable:!0}),DynamicNinepatch}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return h}));var a,s=n(4),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function RoomScene(){return null!==e&&e.apply(this,arguments)||this}return o(RoomScene,e),RoomScene.prototype.init=function(i){e.prototype.init.call(this,i),i&&(this.mRoomID=i.roomid)},RoomScene.prototype.create=function(){this.initListener(),e.prototype.create.call(this)},RoomScene.prototype.initListener=function(){this.input.on("pointerdown",this.onPointerDownHandler,this),this.input.on("pointerup",this.onPointerUpHandler,this),this.input.on("gameout",this.onGameOutHandler,this)},RoomScene.prototype.onGameOutHandler=function(){this.input.off("pointerdown",this.onPointerDownHandler,this),this.input.off("pointerup",this.onPointerUpHandler,this),this.input.off("gameout",this.onGameOutHandler,this)},RoomScene.prototype.onPointerDownHandler=function(e,i){},RoomScene.prototype.onPointerUpHandler=function(e,i){},RoomScene}(s.BasicScene)},function(e,i,n){"use strict";n.d(i,"a",(function(){return c}));var a,s=n(892),o=n(2),h=n(888),l=n(0);!function(e){e[e.RightMouseDown=1]="RightMouseDown",e[e.RightMouseUp=2]="RightMouseUp",e[e.LeftMouseDown=3]="LeftMouseDown",e[e.LeftMouseUp=4]="LeftMouseUp",e[e.WheelDown=5]="WheelDown",e[e.WheelUp=6]="WheelUp",e[e.RightMouseHolding=7]="RightMouseHolding",e[e.LeftMouseHolding=8]="LeftMouseHolding",e[e.Tap=9]="Tap"}(a||(a={}));var c=function(){function MouseManager(e){this.render=e,this.running=!1,this.mDownDelay=1e3,this.delay=500,this.zoom=this.render.scaleRatio||l.UiUtils.baseDpr}return Object.defineProperty(MouseManager.prototype,"clickID",{get:function(){return this.mClickID},enumerable:!1,configurable:!0}),MouseManager.prototype.changeScene=function(e){this.pause(),this.mGameObject=null,this.scene=e,this.scene&&(e.input.on("gameobjectdown",this.onGameObjectDownHandler,this),e.input.on("pointerdown",this.onPointerDownHandler,this),this.resume())},MouseManager.prototype.resize=function(e,i){this.zoom=this.render.scaleRatio||l.UiUtils.baseDpr},MouseManager.prototype.pause=function(){this.running=!1},MouseManager.prototype.resume=function(){this.running=!0},MouseManager.prototype.onUpdate=function(e,i){if(!1!==this.running&&void 0!==e){var n=[];e.leftButtonDown()?n.push(a.LeftMouseDown):e.leftButtonReleased()&&n.push(a.LeftMouseUp),e.middleButtonDown()?n.push(a.WheelDown):e.middleButtonReleased()&&n.push(a.WheelUp),e.rightButtonDown()?n.push(a.RightMouseDown):e.rightButtonReleased()&&n.push(a.RightMouseUp);var o=0,l=null;if(i&&i.parentContainer&&(o=i.parentContainer.getData("id"),l=i.parentContainer.parentContainer||i.parentContainer),!e.isDown){var c=Math.abs(e.downX-e.upX),m=Math.abs(e.downY-e.upY);if(c>10||m>10)return;if(!i||!i.parentContainer)return;if(!(l&&l instanceof s.a))return;if(l.nodeType!==h.b.ElementNodeType)return;if(!l.hasInteractive)return;l.scaleTween()}0!==n.length&&this.sendMouseEvent(n,o,{x:e.worldX/this.zoom,y:e.worldY/this.zoom})}},Object.defineProperty(MouseManager.prototype,"enable",{get:function(){return!!this.scene&&this.scene.input.mouse.enabled},set:function(e){this.scene&&(this.scene.input.mouse.enabled=e)},enumerable:!1,configurable:!0}),MouseManager.prototype.destroy=function(){this.running=!1,this.scene&&(this.scene.input.off("gameobjectdown",this.onGameObjectDownHandler,this),this.scene.input.off("pointerdown",this.onPointerDownHandler,this),this.scene.input.off("pointerup",this.onPointerUp,this)),this.scene=null,this.debounce=null,this.mGameObject=null,this.pause()},MouseManager.prototype.onGameObjectDownHandler=function(e,i){this.render.soundManager.playSound({soundKey:"sound/click.mp3"});var n=i.getData("id");this.render.guideManager.canInteractive(n)||(this.mGameObject=i,this.render.displayManager.getDisplay(n).nodeType===h.b.ElementNodeType&&this.render.renderEmitter("FurnitureEvent",n),clearTimeout(this.mDownTime),this.mDownTime=setTimeout(this.holdHandler.bind(this),this.mDownDelay,e,i))},MouseManager.prototype.onGameObjectUpHandler=function(e,i){this.onUpdate(e,i)},MouseManager.prototype.onPointerDownHandler=function(e,i){var n=this;this.render.guideManager.canInteractive()||(this.debounce?this.mGameObject=null:(this.debounce=setTimeout((function(){n.debounce=null}),this.delay),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.render&&this.render.emitter&&this.render.emitter.emit(o.MessageType.SCENE_BACKGROUND_CLICK,e),this.onUpdate(e,this.mGameObject)))},MouseManager.prototype.onPointerUp=function(e){clearTimeout(this.mDownTime),this.onUpdate(e,this.mGameObject),this.mGameObject=null},MouseManager.prototype.holdHandler=function(e,i){if(clearTimeout(this.mDownTime),!(Math.abs(e.downX-e.x)>5*this.zoom||Math.abs(e.downY-e.y)>5*this.zoom)){var n=0;i&&i.parentContainer&&(n=i.parentContainer.getData("id"),i.parentContainer.parentContainer||i.parentContainer,this.sendMouseEvent([a.LeftMouseHolding],n,{x:e.worldX/this.zoom,y:e.worldY/this.zoom}))}},MouseManager.prototype.sendMouseEvent=function(e,i,n){this.mClickID=i,this.render.mainPeer.sendMouseEvent(i,e,n)},MouseManager}()},function(e,i,n){"use strict";n.r(i),n.d(i,"Tap",(function(){return s}));var a=n(788),s=function(){function Tap(e){this.gameobject=e,this.isDown=!1,this.addListener()}return Tap.prototype.addListener=function(){this.gameobject.on("pointerdown",this.onGameObjectDownHandler,this),this.gameobject.on("pointerup",this.onGameObjectUpHandler,this),this.gameobject.on("pointerout",this.onGameObjectOutHandler,this)},Tap.prototype.removeListener=function(){this.gameobject.off("pointerdown",this.onGameObjectDownHandler,this),this.gameobject.off("pointerup",this.onGameObjectUpHandler,this),this.gameobject.off("pointerout",this.onGameObjectOutHandler,this)},Tap.prototype.onGameObjectDownHandler=function(e,i){this.isDown=!0},Tap.prototype.onGameObjectUpHandler=function(e,i){this.isDown&&(this.isDown=!1,this.gameobject.emit(a.ClickEvent.Tap,e,i))},Tap.prototype.onGameObjectOutHandler=function(){this.isDown=!1},Tap}()},function(e,i,n){"use strict";n.r(i),n.d(i,"BasePanel",(function(){return h}));var a,s=n(899),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function BasePanel(i,n){return e.call(this,i,n)||this}return o(BasePanel,e),BasePanel.prototype.hide=function(e){void 0===e&&(e=!1),this.onHide(),e||this.render.uiManager.hideBasePanel(this.key),this.soundGroup&&this.soundGroup.close&&this.playSound(this.soundGroup.close),!this.mTweening&&this.mTweenBoo?this.showTween(!1):this.destroy()},BasePanel.prototype.onHide=function(){},BasePanel}(s.BaseBatchPanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"SoundButton",(function(){return h}));var a,s=n(788),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function SoundButton(i,n,a,s,o){var h=e.call(this,i,n,a)||this;return h.mDownTime=0,h.mPressDelay=1e3,h.mIsMove=!1,h.mTweening=!1,h.tweenScale=.9,h.mTweenBoo=!0,h.soundGroup={up:{key:"click"}},void 0===s&&(s=!0),h.mTweenBoo=s,Object.assign(h.soundGroup,o),h}return o(SoundButton,e),SoundButton.prototype.addListen=function(){this.removeListen(),this.on("pointerdown",this.onPointerDownHandler,this),this.on("pointerup",this.onPointerUpHandler,this),this.on("pointerout",this.onPointerOutHandler,this),this.on("pointermove",this.onPointerMoveHandler,this)},SoundButton.prototype.removeListen=function(){this.off("pointerdown",this.onPointerDownHandler,this),this.off("pointerup",this.onPointerUpHandler,this),this.off("pointerout",this.onPointerOutHandler,this),this.off("pointermove",this.onPointerMoveHandler,this)},Object.defineProperty(SoundButton.prototype,"enable",{set:function(e){e?(this.addListen(),this.setInteractive()):(this.removeListen(),this.removeInteractive())},enumerable:!1,configurable:!0}),SoundButton.prototype.onPointerMoveHandler=function(e){this.soundGroup&&this.soundGroup.move&&this.playSound(this.soundGroup.move),this.interactiveBoo&&(this.mIsMove=!0,this.emit(s.ClickEvent.Move))},SoundButton.prototype.onPointerUpHandler=function(e){this.interactiveBoo?this.mTweenBoo?this.tween(!1,this.pointerUp.bind(this,e)):this.pointerUp(e):this.soundGroup&&this.soundGroup.disabled&&this.playSound(this.soundGroup.disabled)},SoundButton.prototype.pointerUp=function(e){var i=this.checkPointerInBounds(this,e.worldX,e.worldY);this.emit(s.ClickEvent.Up,this),i&&this.mIsDown&&(this.soundGroup&&this.soundGroup.up&&this.playSound(this.soundGroup.up),this.emit(s.ClickEvent.Tap,e,this)),clearTimeout(this.mPressTime),this.mIsMove=!1,this.mIsDown=!1,this.mDownTime=0},SoundButton.prototype.onPointerOutHandler=function(e){this.mTweenBoo&&e.isDown&&this.tween(!1)},SoundButton.prototype.onPointerDownHandler=function(e){var i=this;this.mTweening||(this.interactiveBoo?(this.soundGroup&&this.soundGroup.down&&this.playSound(this.soundGroup.down),this.mDownTime=Date.now(),this.mPressTime=setTimeout((function(){i.emit(s.ClickEvent.Hold,i)}),this.mPressDelay),this.mTweenBoo&&this.tween(!0),this.emit(s.ClickEvent.Down,this),this.mIsDown=!0):this.soundGroup&&this.soundGroup.disabled&&this.playSound(this.soundGroup.disabled))},SoundButton.prototype.checkPointerInBounds=function(e,i,n){this.mRectangle||(this.mRectangle=new Phaser.Geom.Rectangle(0,0,0,0));var a=e.getWorldTransformMatrix(),s=a.scaleX;this.mRectangle.left=-e.width/2,this.mRectangle.right=e.width/2,this.mRectangle.top=-e.height/2,this.mRectangle.bottom=e.height/2;var o=(i-a.tx)/s,h=(n-a.ty)/s;return this.mRectangle.left<=o&&this.mRectangle.right>=o&&this.mRectangle.top<=h&&this.mRectangle.bottom>=h},SoundButton.prototype.tween=function(e,i){var n=this;this.mTweening=!0;var a=e?this.tweenScale:1;this.mTween&&(this.mTween.stop(),this.mTween.remove(),this.mTween=void 0),this.mTween=this.scene.tweens.add({targets:this.list,duration:45,ease:"Linear",props:{scaleX:{value:a},scaleY:{value:a}},onComplete:function(){n.tweenComplete(e),i&&i()},onCompleteParams:[this]})},SoundButton.prototype.tweenComplete=function(e){this.mTweening=!1,this.mTween&&(this.mTween.stop(),this.mTween.remove(),this.mTween=void 0)},SoundButton}(s.BaseUI)},function(e,i,n){"use strict";n.r(i),n.d(i,"PropItem",(function(){return m}));var a,s=n(71),o=n(788),h=n(823),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PropItem(i,n,a,h,c){var m=e.call(this,i,0,0)||this;return m.dpr=h,m.key=n,m.bgframe=a,m.bg=m.scene.make.image({key:n,frame:a}),m.itemIcon=new s.DynamicImage(i,0,0),m.itemIcon.setTexture(n,a),c=c||{color:"#000000",fontSize:12*h,fontFamily:l.Font.DEFULT_FONT},m.itemCount=new o.BBCodeText(m.scene,0,15*h,"",c).setOrigin(.5),m.add([m.bg,m.itemIcon,m.itemCount]),m.setSize(m.bg.width,m.bg.height),m.itemCount.y=.5*m.height+8*h,m}return c(PropItem,e),PropItem.prototype.setHandler=function(e){this.send=e},PropItem.prototype.setItemData=function(e){var i=this;this.itemData=e,this.itemCount.text=e.count+"";var n=l.Url.getOsdRes(e.texturePath),a=this.getWorldTransformMatrix().scaleX;this.itemIcon.scale=this.dpr/a,this.itemIcon.load(n,this,(function(){i.itemIcon.setPosition(0,0)}))},PropItem.prototype.setTextPosition=function(e,i){this.itemCount.x=e,this.itemCount.y=i},PropItem}(h.SoundButton)},function(e,i,n){"use strict";n.r(i),n.d(i,"DragDropIcon",(function(){return l}));var a,s=n(71),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function DragDropIcon(i,n,a,o){var h=e.call(this,i,n,a)||this;return h.mScene=i,h.mIcon=new s.DynamicImage(h.mScene,0,0),h.add(h.mIcon),h}return h(DragDropIcon,e),DragDropIcon.prototype.load=function(e,i,n){var a=this;this.mUrl=e;this.resKey;this.mIcon.load(o.Url.getOsdRes(this.mUrl),(function(){a.mCallBack&&a.mCallBack()})),this.mCallBack=n},DragDropIcon.prototype.dragStart=function(){},DragDropIcon.prototype.dragStop=function(e){},DragDropIcon.prototype.dragDrop=function(e){},DragDropIcon.prototype.dragOver=function(e){},DragDropIcon.prototype.getDragData=function(){},DragDropIcon.prototype.getDropData=function(){},DragDropIcon.prototype.getDragImage=function(){return this.mIcon},DragDropIcon.prototype.getVisualDisplay=function(){},DragDropIcon.prototype.getBound=function(){var e=this.getBounds();return new Phaser.Geom.Rectangle(e.x,e.y,e.width,e.height)},Object.defineProperty(DragDropIcon.prototype,"resKey",{get:function(){return void 0===this.mUrl?"":o.Url.getOsdRes(this.mUrl)},enumerable:!1,configurable:!0}),DragDropIcon.prototype.destroy=function(){this.mCallBack=null,e.prototype.destroy.call(this,!0)},Object.defineProperty(DragDropIcon.prototype,"icon",{get:function(){return this.mIcon},enumerable:!1,configurable:!0}),DragDropIcon.prototype.setDragType=function(e){this.mDragType=e},DragDropIcon.prototype.setDropType=function(e){this.mDropType=e},DragDropIcon.prototype.getDropType=function(){return this.mDropType},DragDropIcon.prototype.getDragType=function(){return this.mDragType},DragDropIcon}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"IconBtn",(function(){return h}));var a,s=n(0),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function IconBtn(i,n,a){var o=e.call(this,i)||this;return o.mScene=i,o.mRender=n,o.mBtnBg=i.make.image(void 0,!1),o.mBgResKey=a.bgResKey,o.mBgTexture=a.bgTextures,o.mData=a,!o.mScene.textures.exists(o.mBgResKey)&&a.pngUrl&&a.jsonUrl?(o.mScene.load.atlas(a.key,s.Url.getRes(a.pngUrl),s.Url.getRes(a.jsonUrl)),o.mScene.load.once(Phaser.Loader.Events.COMPLETE,o.loadComplete,o),o.mScene.load.start(),o):(o.loadComplete(),o)}return o(IconBtn,e),IconBtn.prototype.getKey=function(){return this.mData.key},IconBtn.prototype.setPos=function(e,i){this.mBasePos||(this.mBasePos=new s.Pos),this.mBasePos.x=e,this.mBasePos.y=i},IconBtn.prototype.getPos=function(){return this.mBasePos},IconBtn.prototype.setBtnData=function(e){this.mBtnData=e},IconBtn.prototype.getBtnData=function(){return this.mBtnData},IconBtn.prototype.setClick=function(e){this.monClick=e},IconBtn.prototype.destroy=function(){this.mBtnBg&&this.mBtnBg.destroy(!0),this.mBtnIcon&&this.mBtnIcon.destroy(!0),this.monClick=null,this.mBtnBg=null,this.mBtnIcon=null,this.mBtnData=null,this.mScene=null,e.prototype.destroy.call(this)},IconBtn.prototype.loadComplete=function(){this.mBtnBg.setTexture(this.mBgResKey,this.mBgTexture[0]),this.mBtnBg.scaleX=this.mBtnBg.scaleY=this.mData.scale,this.addAt(this.mBtnBg,0),this.mData.iconResKey&&this.mData.iconTexture&&this.mData.iconTexture.length>0&&(this.mBtnIcon=this.mScene.make.image(void 0,!1),this.mBtnIcon.setTexture(this.mData.iconResKey,this.mData.iconTexture),this.add(this.mBtnIcon)),this.setSize(this.mBtnBg.width,this.mBtnBg.height),this.setInteractive(),this.on("pointerup",this.upHandler,this),this.on("pointerdown",this.downHandler,this),this.on("pointerover",this.overHandler,this),this.on("pointerout",this.outHandler,this)},IconBtn.prototype.overHandler=function(e){this.mBgTexture.length<2||this.mBtnBg.setTexture(this.mBgResKey,this.mBgTexture[1])},IconBtn.prototype.outHandler=function(e){this.mBgTexture.length<2||this.mBtnBg.setTexture(this.mBgResKey,this.mBgTexture[0])},IconBtn.prototype.upHandler=function(){this.monClick&&this.monClick(),this.mData&&this.mData.callBack&&this.mData.callBack.apply(this),this.emit("click",this),this.mBgTexture.length<3||this.mBtnBg.setTexture(this.mBgResKey,this.mBgTexture[2])},IconBtn.prototype.downHandler=function(){this.mBgTexture.length<4||this.mBtnBg.setTexture(this.mBgResKey,this.mBgTexture[3])},IconBtn.prototype.scaleHandler=function(){this.mScene.tweens.add({targets:this,duration:50,ease:"Linear",props:{scaleX:{value:.5},scaleY:{value:.5}},yoyo:!0,repeat:0}),this.scaleX=this.scaleY=1},IconBtn}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"ProgressMaskBar",(function(){return h}));var a,s=n(788),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function ProgressMaskBar(i,n,a,s,o,h,l){var c=e.call(this,i)||this;return c.value=0,c.max=1,c.zoom=1,c.createBackgroundBar(n,a,s,o,h,l),c.maskGraphics=c.scene.make.graphics(void 0,!1),c.maskGraphics.fillStyle(0,1),c.maskGraphics.fillRect(0,0,c.width,c.height),c.mBar.setMask(c.maskGraphics.createGeometryMask()),c.mBackground&&c.add(c.mBackground),c.mBar&&c.add(c.mBar),c.mText&&c.add(c.mText),c.disInteractive(),c}return o(ProgressMaskBar,e),ProgressMaskBar.prototype.setProgress=function(e,i){var n=e/i;n>1?n=1:n<0&&(n=0),this.value=n,this.max=i,this.refreshMask()},ProgressMaskBar.prototype.setText=function(e){this.mText&&(this.mText.text=e,this.mText.parentContainer||this.add(this.mText))},ProgressMaskBar.prototype.refreshMask=function(){var e=this.getWorldTransformMatrix();this.zoom!==e.scaleX&&(this.zoom=e.scaleX,this.maskGraphics.clear(),this.maskGraphics.fillRect(0,0,this.width*this.zoom,this.height*this.zoom));var i=e.tx-this.width*this.zoom*1.5+this.width*this.zoom*this.value,n=e.ty-this.height*this.zoom*.5;this.maskGraphics.setPosition(i,n)},ProgressMaskBar.prototype.destroy=function(){e.prototype.destroy.call(this),this.maskGraphics.destroy()},Object.defineProperty(ProgressMaskBar.prototype,"text",{get:function(){return this.mText},enumerable:!1,configurable:!0}),Object.defineProperty(ProgressMaskBar.prototype,"bar",{get:function(){return this.mBar},enumerable:!1,configurable:!0}),ProgressMaskBar.prototype.createBackgroundBar=function(e,i,n,a,o,h){if(i)if(h){var l=h.width||this.width,c=h.height||this.height;this.mBackground=new s.NineSlicePatch(this.scene,0,-2*this.dpr,l,c,e,i,h),this.setSize(l,c)}else this.mBackground=this.scene.make.image({key:e,frame:i}),this.setSize(this.mBackground.width,this.mBackground.height);if(o){var m=o.width||this.width,f=o.height||this.height;this.mBar=new s.NineSlicePatch(this.scene,0,-2*this.dpr,m,f,e,n,o)}else this.mBar=this.scene.make.image({key:e,frame:n});a&&(this.mText=this.scene.make.text({style:a},!1).setOrigin(.5))},ProgressMaskBar}(s.BaseUI)},function(e,i,n){"use strict";n.r(i),n.d(i,"ToggleButton",(function(){return c}));var a,s=n(788),o=n(0),h=n(802),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function ToggleButton(i,n,a,s,h,l,c,m){var f=e.call(this,i,0,0)||this;return f.normalColor="#FFFFFF",f.changeColor="#0099cc",f.mIsOn=!1,f.mBackground=f.scene.make.image({key:s,frame:h}),f.mText=f.scene.make.text({text:m,style:o.UIHelper.whiteStyle(c,15)},!1).setOrigin(.5,.5),f.add([f.mBackground,f.mText]),f.mNormal=h,f.mDown=l,f.width=n>f.mBackground.width?n:f.mBackground.width,f.height=a>f.mBackground.height?a:f.mBackground.height,f.enable=!0,f}return l(ToggleButton,e),ToggleButton.prototype.setText=function(e){this.mText.text=e},ToggleButton.prototype.setFontSize=function(e){this.mText.setFontSize(e)},ToggleButton.prototype.setFontStyle=function(e){this.mText.setFontStyle(e)},ToggleButton.prototype.setStyle=function(e){this.mText.setStyle(e)},ToggleButton.prototype.setNormalColor=function(e){this.normalColor=e,this.isOn=this.mIsOn},ToggleButton.prototype.setChangeColor=function(e){this.changeColor=e,this.isOn=this.mIsOn},ToggleButton.prototype.setNormalFrame=function(e,i){e&&(this.mNormal=e),i&&(this.mDown=i),this.isOn=this.mIsOn},Object.defineProperty(ToggleButton.prototype,"isOn",{get:function(){return this.mIsOn},set:function(e){this.mIsOn=e,this.mIsOn?this.changeDown():this.changeNormal()},enumerable:!1,configurable:!0}),ToggleButton.prototype.changeDown=function(){this.mText.setFill(this.changeColor),this.mBackground.setFrame(this.mDown)},ToggleButton.prototype.changeNormal=function(){this.mText.setFill(this.normalColor),this.mBackground.setFrame(this.mNormal)},Object.defineProperty(ToggleButton.prototype,"text",{get:function(){return this.mText},enumerable:!1,configurable:!0}),ToggleButton.prototype.EventStateChange=function(e){switch(e){case s.ClickEvent.Up:this.changeNormal();break;case s.ClickEvent.Down:this.changeDown();break;case s.ClickEvent.Tap:this.isOn=!0;break;case s.ClickEvent.Out:this.isOn?this.changeDown():this.changeNormal()}},ToggleButton}(h.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"ItemButton",(function(){return f}));var a,s=n(797),o=n(788),h=n(790),l=n(0),c=n(803),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function ItemButton(i,n,a,c,m,f){var g=e.call(this,i,0,0)||this;return g.bgFrame="bag_icon_common_bg",g.selectFrame="bag_icon_select_bg",g.rarityFrame="bag_icon_rare_bg",g.isShowTips=!0,g.dpr=c,g.zoom=m,g.bgFrame=a||g.bgFrame,g.key=n||h.d.uicommon,g.bg=i.make.image({key:g.key,frame:a}),g.selectbg=i.make.image({key:h.d.uicommon,frame:g.selectFrame}),g.setSize(g.selectbg.width,g.selectbg.height),g.itemIcon=new s.DynamicImage(i,0,0),g.countTex=g.scene.make.text({text:"",style:l.UIHelper.blackStyle(c)}).setOrigin(1).setPosition(.5*g.width-5*c,.5*g.height-4*c),g.starImg=g.scene.make.image({key:h.d.uicommon,frame:"bag_star_small_1"}).setOrigin(0),g.starImg.x=.5*-g.width+6*c,g.starImg.y=.5*-g.height+6*c,g.starImg.visible=!1,g.add([g.selectbg,g.bg,g.itemIcon,g.starImg,g.countTex]),g.selectbg.visible=!1,g.enable=f,g.on(o.ClickEvent.Tap,g.onTabClickHandler,g),g}return m(ItemButton,e),ItemButton.prototype.setStateFrames=function(e,i){this.bgFrame=e,this.rarityFrame=i},ItemButton.prototype.setBGTexture=function(e,i){this.bg.setTexture(e,i)},ItemButton.prototype.setIconTexture=function(e,i,n){this.itemIcon.setTexture(e,i),void 0!==n&&(this.itemIcon.visible=n)},ItemButton.prototype.setShowTips=function(e){this.isShowTips=e},ItemButton.prototype.setItemData=function(e,i){var n=this;if(void 0===i&&(i=!1),this.itemData=e,this.select=!1,this.itemIcon.visible=!1,this.starImg.visible=!1,this.itemIcon.scale=1,!e)return this.countTex.visible=!1,void this.bg.setTexture(this.key,this.bgFrame);5===e.rarity?this.bg.setTexture(this.key,this.rarityFrame):this.bg.setTexture(this.key,this.bgFrame);var a=l.Url.getOsdRes(e.texturePath);if(this.itemIcon.load(a,this,(function(){n.itemIcon.visible=!0})),this.itemIcon.scale=this.dpr/this.zoom,i||e.count>1?(this.countTex.visible=!0,this.countTex.setText(e.count.toString())):this.countTex.visible=!1,e.grade>0){this.starImg.visible=!0;var s="bag_star_small_"+e.grade;this.starImg.setFrame(s)}else this.starImg.visible=!1},Object.defineProperty(ItemButton.prototype,"select",{set:function(e){this.selectbg.visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(ItemButton.prototype,"BGVisible",{set:function(e){this.bg.visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(ItemButton.prototype,"countTextColor",{set:function(e){this.countTex.style.color=e},enumerable:!1,configurable:!0}),Object.defineProperty(ItemButton.prototype,"countTextOffset",{set:function(e){this.countTex.setPosition(e.x,e.y)},enumerable:!1,configurable:!0}),ItemButton.prototype.showTips=function(){this.onTabClickHandler()},ItemButton.prototype.onTabClickHandler=function(){this.itemData&&this.isShowTips&&c.PicaItemTipsPanel.Inst.showTips(this,this.itemData)},ItemButton}(s.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"CharacterAttributePanel",(function(){return c}));var a,s=n(788),o=n(0),h=n(789),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function CharacterAttributePanel(i,n,a,s,o,h,l){var c=e.call(this,i,n,a)||this;return c.attriItems=[],c.setSize(s,o),c.key=h,c.dpr=l,c.mspace=10*l,c}return l(CharacterAttributePanel,e),Object.defineProperty(CharacterAttributePanel.prototype,"space",{set:function(e){this.mspace=e},enumerable:!1,configurable:!0}),CharacterAttributePanel.prototype.setAttributeData=function(e){for(var i=e.length,n=i>4?2:1,a=this.width,s=this.height,o=20*this.dpr,h=a/2,l=.5*-s+10*this.dpr,c=0,f=this.attriItems;c<f.length;c++){(_=f[c]).visible=!1}for(var g=0;g<i;g++){var _=void 0;g<this.attriItems.length?_=this.attriItems[g]:(_=new m(this.scene,0,0,h,o,this.key,this.dpr),this.add(_),this.attriItems.push(_));var T=.5*(a-a/n)*(g<4?-1:1),x=l+.5*o+(o+this.mspace)*(g%4);_.setPosition(T,x),_.setInfo(e[g]),_.visible=!0}},CharacterAttributePanel}(Phaser.GameObjects.Container),m=function(e){function PlayerAttributeValue(i,n,a,l,c,m,f){var g=e.call(this,i,n,a)||this;return g.dpr=f,g.setSize(l,c),g.icon=new h.DynamicImage(g.scene,0,0),g.icon.x=.5*-l+10*f,g.nameText=g.scene.make.text({x:g.icon.x+13*f,y:0,text:"Attack:",style:{fontFamily:o.Font.DEFULT_FONT,fontSize:11*f,color:"#131313"}}).setOrigin(0,.5),g.valueText=new s.BBCodeText(g.scene,0,0,"100",{color:"#131313",fontSize:11*g.dpr,fontFamily:o.Font.DEFULT_FONT}).setOrigin(0,.5),g.valueText.x=g.nameText.x+g.nameText.width,g.add([g.icon,g.nameText,g.valueText]),g}return l(PlayerAttributeValue,e),PlayerAttributeValue.prototype.setInfo=function(e){var i=this;if(e.display){var n=o.Url.getOsdRes(e.display.texturePath);this.icon.load(n,this,(function(){i.icon.displayWidth=20*i.dpr,i.icon.scaleY=i.icon.scaleX}))}this.nameText.text=e.name+":",this.valueText.text=e.value+(e.tempValue?this.getRichLabel(e.tempValue):""),this.valueText.x=this.nameText.x+this.nameText.width+3*this.dpr},PlayerAttributeValue.prototype.getRichLabel=function(e,i){return void 0===i&&(i="#0B77CD"),"[color="+i+"](+"+e+")[/color]"},PlayerAttributeValue}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"CharacterEditorPanel",(function(){return c}));var a,s=n(788),o=n(789),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function CharacterEditorPanel(i,n,a,l,c,m,f){var g=e.call(this,i,n,a)||this;g.dpr=0,g.key="",g.setSize(l,c),g.key=m,g.dpr=f;var _="bold "+15*g.dpr+"px Source Han Sans";g.title=g.scene.make.text({x:0,y:.5*-c+50*f,text:g.geti18n("edit_profile"),style:{font:_,blod:!0,color:"#ffffff",fontFamily:h.Font.DEFULT_FONT}}).setOrigin(.5);var T=g.scene.make.graphics(void 0,!1);T.clear(),T.fillStyle(16777215,.5),T.fillRect(0,0,247*f,350*f),T.setPosition(.5*-l,-184*f);var x=.5*-l+9*f,S=-170*f,j=50*f,q=g.scene.make.text({x:x,y:S,style:{blod:!0,color:"#0062BB",fontSize:15*f,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(0);q.setText(g.geti18n("user_name")+":"),g.inputText=new s.InputText(g.scene,x+q.width+20*f,S,162*f,27*f,{type:"input",fontSize:18*f+"px",color:"#0062BB",align:"center",placeholder:g.geti18n("input_nickname")}).setOrigin(0);var Y=g.createLine(-230*g.dpr*.5,S+32*g.dpr);g.add(T),g.add([g.title,q,g.inputText,Y]),g.idText=g.createText("I        D:","",x,S+j),g.constellationText=g.createText(g.geti18n("constellation")+":","",x,S+2*j),g.birthdayText=g.createText(g.geti18n("birthday")+":","",x,S+3*j),g.cityText=g.createText(g.geti18n("city")+":","",x,S+4*j);var X=g.scene.make.text({x:x,y:S+5*j,style:{blod:!0,color:"#0062BB",fontSize:15*f,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(0);X.setText(g.geti18n("signature")+":"),g.signInput=new s.InputText(g.scene,x+X.width+20*f,S+5*j,162*f,76*f,{type:"input",fontSize:18*f+"px",color:"#0062BB",align:"center",placeholder:g.geti18n("input_signature")}).setOrigin(0),g.add([X,g.signInput]);var Z=new s.Button(g.scene,"common_key","back_arrow","back_arrow"),$=new o.NinePatchButton(g.scene,0,.5*c-40*f,174*g.dpr,37*g.dpr,"common_key","yellow_btn",g.geti18n("save"),{left:12*g.dpr,top:12*g.dpr,right:12*g.dpr,bottom:12*g.dpr});return $.setTextStyle({fontSize:16*g.dpr,color:"#ED7814"}),Z.setPosition(x+8*f,.5*-c+50*f),Z.on(s.ClickEvent.Tap,g.onBackHandler,g),$.on(s.ClickEvent.Tap,g.onSaveHandler,g),g.add([Z,$]),g}return l(CharacterEditorPanel,e),CharacterEditorPanel.prototype.destroy=function(){this.inputText&&this.inputText.destroy(),this.signInput&&this.signInput.destroy(),e.prototype.destroy.call(this)},CharacterEditorPanel.prototype.createText=function(e,i,n,a){var s=this.scene.make.text({x:n,y:a,style:{blod:!0,color:"#0062BB",fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(0,0);s.setText(e);var o=this.scene.make.text({x:n+s.width+20*this.dpr,y:a,text:i,style:{blod:!0,color:"#ffffff",fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(0,0),l=this.createLine(-230*this.dpr*.5,a+32*this.dpr);return this.add([s,o,l]),o},CharacterEditorPanel.prototype.geti18n=function(e){return h.i18n.t("player_info."+e)},CharacterEditorPanel.prototype.createLine=function(e,i){var n=this.scene.make.graphics(void 0,!1);return n.clear(),n.fillStyle(25275,.6),n.fillRect(0,0,230*this.dpr,3),n.setPosition(e,i),n},CharacterEditorPanel.prototype.onBackHandler=function(){this.visible=!1,this.emit("editorHide")},CharacterEditorPanel.prototype.onSaveHandler=function(){},CharacterEditorPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaChatInputPanel",(function(){return c}));var a,s=n(788),o=n(790),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaChatInputPanel(i,n,a,l){var c=e.call(this)||this;c.chatArr=[],c.maxChatLength=100,c.isOpenQuickPanel=!1,c.isSendChat=!1,c.isDispose=!1,c.key=a,c.render=n,c.dpr=c.render.devicePixelRatio,c.scene=i,c.chatArr=l;var m=i.cameras.main.width,f=i.cameras.main.height;c.mBackground=i.add.graphics(),c.mBackground.clear(),c.mBackground.fillStyle(0,.6),c.mBackground.fillRect(0,0,m,f),c.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,m,f),Phaser.Geom.Rectangle.Contains),c.bottomCon=i.add.container(0,0),c.bottomCon.setPosition(.5*m,.5*f);var g=new s.NineSlicePatch(i,0,0,m,47*c.dpr,c.key,"chat_Input_bg",{left:2*c.dpr,top:0*c.dpr,right:2*c.dpr,bottom:0*c.dpr});c.bottomCon.setSize(m,g.height),c.bottomCon.add(g),c.sendBtn=new s.Button(c.scene,c.key,"chat_quick_2"),c.sendBtn.x=.5*-m+.5*c.sendBtn.width+12*c.dpr,c.sendBtn.on(String(s.ClickEvent.Tap),c.onQuickSendHandler,c),c.bottomCon.add(c.sendBtn),c.cancelBtn=new s.NineSliceButton(c.scene,0,0,63*c.dpr,28*c.dpr,o.c.commonKey,"red_btn_normal",h.i18n.t("common.cancel"),c.dpr,1,{left:14*c.dpr,top:0,right:14*c.dpr,bottom:0}),c.cancelBtn.setTextStyle({color:"#ffffff",fontSize:16*c.dpr,fontFamily:h.Font.DEFULT_FONT}),c.cancelBtn.x=.5*m-.5*c.cancelBtn.width-12*c.dpr,c.cancelBtn.on(String(s.ClickEvent.Tap),c.onCancelHandler,c),c.bottomCon.add(c.cancelBtn);var _=Math.abs(c.sendBtn.x-c.cancelBtn.x)-.5*c.sendBtn.width-.5*c.cancelBtn.width-16*c.dpr,T=c.sendBtn.x+.5*c.sendBtn.width+8*c.dpr+.5*_,x=new s.NineSlicePatch(c.scene,T,0,_,36*c.dpr,c.key,"chat_Input",{left:12*c.dpr,top:0*c.dpr,right:12*c.dpr,bottom:0*c.dpr});return c.bottomCon.add(x),c.mInput=new s.InputText(c.scene,T-.5*_,0,_,40*c.dpr,{type:"text",placeholder:"",color:"#0",fontSize:20*c.dpr+"px"}),c.mInput.setOrigin(0,.5),c.bottomCon.add(c.mInput),c.contentCon=i.add.container(0,0),c.contentCon.setSize(m,200*c.dpr),c.mOutputText=new s.BBCodeText(i,.5*-m+10*c.dpr,0,"",{fontSize:14*c.dpr+"px",fontFamily:h.Font.DEFULT_FONT,stroke:"#000000",strokeThickness:1*c.dpr,textMask:!1,lineSpacing:2*c.dpr,shadow:{offsetX:0,offsetY:0,color:"#000",blur:4,stroke:!0,fill:!0},wrap:{mode:"char",width:m-12*c.dpr}}).setOrigin(0,.5),c.mOutputText.setResolution(c.dpr),c.gamescroll=new s.GameScroller(i,{x:0,y:0,width:m,height:c.contentCon.height,zoom:1,dpr:c.dpr,align:0,orientation:0,selfevent:!0}),c.contentCon.add(c.gamescroll),c.gamescroll.addItem(c.mOutputText),c.quickCon=c.scene.add.container(0,0),c.quickBg=c.scene.make.image({key:c.key,frame:"home_quick chat _bg"}),c.quickBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.quickCon.add(c.quickBg),c.quickCon.x=.5*m,c.quickChatScroll=new s.GameScroller(i,{x:0,y:0,width:m,height:200*c.dpr,zoom:1,dpr:c.dpr,align:2,orientation:0,cellupCallBack:function(e){c.onQuickChatItemHandler(e)}}),c.quickChatScroll.removeListen(),c.quickCon.add(c.quickChatScroll),c.mInput.on("blur",c.onBlurHandler,c),c.mInput.on("focus",c.onFocusHandler,c),c.mInput.node.addEventListener("keypress",(function(e){13===(e.keyCode||e.which)&&(c.isSendChat=!0,c.onSentChat())})),window.addEventListener("native.keyboardshow",c.onKeyboardHandler.bind(c)),c.bottomCon.visible=!1,c.contentCon.visible=!1,c}return l(PicaChatInputPanel,e),PicaChatInputPanel.prototype.setKeywordHeight=function(e){var i=this.scene.cameras.main.height,n=this.scene.cameras.main.width,a=i-e-0;this.bottomCon.visible=!0,this.contentCon.visible=!0,this.bottomCon.y=a-.5*this.bottomCon.height,this.contentCon.height=this.bottomCon.y-.5*this.bottomCon.height-20*this.dpr,this.contentCon.y=this.bottomCon.y-.5*this.bottomCon.height-.5*this.contentCon.height-5*this.dpr,this.contentCon.x=.5*n,this.gamescroll.resetSize(n,this.contentCon.height),this.gamescroll.refreshMask();var s=200*this.dpr;this.quickCon.y=this.bottomCon.y-.5*this.bottomCon.height,this.quickBg.y=.5*-s,this.quickBg.displayWidth=n+10*this.dpr,this.quickBg.displayHeight=s,this.quickChatScroll.y=this.quickBg.y,this.quickChatScroll.resetSize(n,s),this.keyboardHeight=e,this.setQuickChatItems()},PicaChatInputPanel.prototype.setQuickChatData=function(e){e&&(this.quickChatAtt=e),this.quickChatAtt.unshift(void 0),this.setKeywordHeight(0),this.onQuickSendHandler();for(var i="",n=0,a=this.chatArr;n<a.length;n++){i+=a[n]}this.mOutputText.text=i,this.gamescroll.Sort(),h.Logger.getInstance().debug(e)},PicaChatInputPanel.prototype.appendChat=function(e){this.chatArr.push(e),this.chatArr.length>this.maxChatLength&&this.chatArr.shift();for(var i="",n=0,a=this.chatArr;n<a.length;n++){i+=a[n]}this.mOutputText.text=i,this.gamescroll.Sort()},PicaChatInputPanel.prototype.onKeyboardHandler=function(e){h.Logger.getInstance().debug(e.keyboardHeight),this.keyboardHeight>0&&e.keyboardHeight===this.keyboardHeight||window.removeEventListener("native.keyboardshow",this.onKeyboardHandler.bind(this))},PicaChatInputPanel.prototype.setQuickChatItems=function(){this.quickChatScroll.clearItems(!0);this.scene.cameras.main.height;for(var e=this.scene.cameras.main.width,i=0;i<this.quickChatAtt.length;i++){var n=this.quickChatAtt[i];if(n){var a=new m(this.scene,e,30*this.dpr,this.key,this.dpr,0===i);this.quickChatScroll.addItem(a),a.setText(n)}}this.quickChatScroll.Sort(),this.quickCon.visible=!1},PicaChatInputPanel.prototype.setFirstQuickItem=function(){if(this.quickChatScroll.getItemList().length===this.quickChatAtt.length){var e=this.quickChatScroll.getItemList();e&&e.length>0&&e[0].setText(this.quickChatAtt[0])}else{var i=this.scene.cameras.main.width,n=new m(this.scene,i,40*this.dpr,this.key,this.dpr,!0);this.quickChatScroll.addItemAt(n,0),this.quickChatScroll.Sort(),n.setText(this.quickChatAtt[0])}},PicaChatInputPanel.prototype.onBlurHandler=function(){this.isOpenQuickPanel||this.isSendChat||this.onCancelHandler(),this.isSendChat=!1},PicaChatInputPanel.prototype.onFocusHandler=function(){},PicaChatInputPanel.prototype.onQuickSendHandler=function(){this.isOpenQuickPanel=!this.isOpenQuickPanel,this.isOpenQuickPanel?(this.quickCon.visible=!0,this.quickChatScroll.addListen()):(this.mInput.setFocus(),this.quickCon.visible=!1,this.quickChatScroll.removeListen(),this.isOpenQuickPanel=!1)},PicaChatInputPanel.prototype.onSentChat=function(){var e=this.mInput.text;""!==e&&(this.quickChatAtt[0]=e,this.setFirstQuickItem()),this.mInput.text="",this.mInput.setFocus(),this.sendChat(e)},PicaChatInputPanel.prototype.sendChat=function(e){this.emit("send",e)},PicaChatInputPanel.prototype.onQuickChatItemHandler=function(e){this.mInput.text=e.dataChat,this.mInput.setFocus(),this.quickCon.visible=!1,this.quickChatScroll.removeListen(),this.isOpenQuickPanel=!1},PicaChatInputPanel.prototype.onCancelHandler=function(){this.isDispose||(this.isDispose=!0,this.mInput.setBlur(),this.mBackground.destroy(),this.mInput.destroy(),this.bottomCon.destroy(),this.contentCon.destroy(),this.quickCon.destroy(),this.gamescroll.clearItems(!0),this.scene=void 0,this.render=void 0,this.gamescroll=void 0,this.mOutputText=void 0,this.quickChatScroll=void 0,this.emit("close"),this.destroy())},PicaChatInputPanel}(Phaser.Events.EventEmitter),m=function(e){function QuickChatItem(i,n,a,s,o,l){void 0===l&&(l=!1);var c,m=e.call(this,i)||this;(m.dataChat="",m.key=s,m.setSize(n,a),m.text=m.scene.make.text({x:0,y:0,text:"",style:{fontSize:13*o,fontFamily:h.Font.DEFULT_FONT,color:"#6F6F6F"}}).setOrigin(0,.5),m.text.x=.5*-n+20*o,m.add(m.text),l)?((c=m.scene.make.image({key:s,frame:"home_divider"})).texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.y=.5*a,m.add(c)):((c=m.scene.make.graphics(void 0)).clear(),c.fillStyle(7303023,.3),c.fillRect(.5*-n+20*o,-1,n,2),c.setPosition(0,.5*a),m.add(c));return m}return l(QuickChatItem,e),QuickChatItem.prototype.setText=function(e){this.text.text=e,this.dataChat=e},QuickChatItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaGiftPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaGiftPanel(i,n,a,s,o,h,l,c){var m=e.call(this,i,n,a)||this;return m.key=h,m.dpr=l,m.zoom=c,m.setSize(s,o),m.init(),m}return c(PicaGiftPanel,e),PicaGiftPanel.prototype.resize=function(){this.mPropGrid&&this.mPropGrid.resetMask()},PicaGiftPanel.prototype.destroy=function(){this.mPropGrid&&this.mPropGrid.destroy(),e.prototype.destroy.call(this)},PicaGiftPanel.prototype.hide=function(){this.visible=!1},PicaGiftPanel.prototype.show=function(){this.visible=!0},PicaGiftPanel.prototype.setGiftDatas=function(e){var i=12-e.length,n=i>0?e.concat(new Array(i)):e;this.mPropGrid.setItems(n);var a=this.mPropGrid.getCell(0);a&&a.container&&this.onSelectItemHandler(a.container)},PicaGiftPanel.prototype.setGiftActive=function(e){this.sendButton.enable=e},PicaGiftPanel.prototype.onUsePropHandler=function(e,i,n){var a={id:e.id,quantity:n,category:i.category};this.curGiftData.remain-=n,this.curGiftData.limit>0&&this.curGiftData.remain<=0&&this.mPropGrid.refresh(),this.emit("buyItem",a,e)},PicaGiftPanel.prototype.init=function(){var e=this,i=this.scene.make.graphics(void 0,!1);i.fillStyle(3355443,.5),i.fillRect(.5*-this.width,.5*-this.height,this.width,this.height),this.add(i);var n=this.scene.textures.getFrame(h.c.common2Key,"equp_bg"),a=n.width+10*this.dpr,c=n.height+10*this.dpr,m={x:0,y:.5*-this.height+60*this.dpr,table:{width:this.width-20*this.dpr,height:120*this.dpr,columns:2,cellWidth:a,cellHeight:c,reuseCellContainer:!0,cellOriginX:.5,cellOriginY:.5,zoom:this.zoom,mask:!1},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(i,n){var a=i.scene,s=i.item;return null===n&&(n=new f(a,0,0,e.key,e.dpr)),n.setItemData(s),s&&e.curGiftData&&e.curGiftData.id===s.id&&(n.isSelect=!0,e.curGiftItem=n),n}};this.mPropGrid=new s.GameGridTable(this.scene,m),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(i){e.onSelectItemHandler(i)})),this.add(this.mPropGrid),this.giftName=this.scene.make.text({x:.5*-this.width+10*this.dpr,y:this.mPropGrid.y+.5*this.mPropGrid.height+15*this.dpr,text:"",style:{fontSize:16*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#FFD248"}}).setOrigin(0,.5),this.add(this.giftName),this.giftPriceImage=new o.DynamicImage(this.scene,0,this.giftName.y),this.giftPriceImage.setTexture(h.c.commonKey,"iv_coin"),this.add(this.giftPriceImage),this.giftValue=this.scene.make.text({x:0,y:this.giftName.y,text:"",style:{fontSize:16*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#FFD248"}}).setOrigin(0,.5),this.add(this.giftValue),this.sendButton=new s.NineSliceButton(this.scene,0,0,95*this.dpr,36*this.dpr,h.c.commonKey,"yellow_btn_normal_s",l.i18n.t("chat.givegift"),this.dpr,this.scale,{left:8*this.dpr,top:8*this.dpr,right:8*this.dpr,bottom:10*this.dpr}),this.add(this.sendButton),this.sendButton.setTextStyle({fontSize:16*this.dpr,color:"#996600",fontFamily:l.Font.DEFULT_FONT}),this.sendButton.setFontStyle("bold"),this.sendButton.setPosition(.5*this.width-.5*this.sendButton.width-10*this.dpr,.5*this.height-.5*this.sendButton.height-10*this.dpr),this.sendButton.on(String(s.ClickEvent.Tap),this.onSendHandler,this),this.giftDescr=this.scene.make.text({x:this.giftName.x,y:this.giftName.y+.5*this.giftName.height+15*this.dpr,text:"",style:{fontSize:14*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#999999"}}).setOrigin(0,.5),this.add(this.giftDescr)},PicaGiftPanel.prototype.onSelectItemHandler=function(e){var i=e.itemData;if(i){this.curGiftItem&&(this.curGiftItem.isSelect=!1),e.isSelect=!0,this.curGiftItem=e,this.curGiftData=i,this.giftName.text=i.name;var n=i.price[0];this.giftPriceImage.setTexture(h.c.commonKey,l.Coin.getIcon(n.coinType)),this.giftPriceImage.x=this.giftName.x+this.giftName.width+5*this.dpr+.5*this.giftPriceImage.width,this.giftValue.text=n.price+"",this.giftValue.x=this.giftPriceImage.x+.5*this.giftPriceImage.width+5*this.dpr,this.giftDescr.text=i.des}},PicaGiftPanel.prototype.onSendHandler=function(){if(this.curGiftData)if(this.curGiftData.limit>0&&this.curGiftData.remain<=0){this.emit("shownotice",l.i18n.t("party.giftsell"))}else{var e=this.getBuyPackageData(),i=l.i18n.t("chat.givegift"),n=this.curGiftData.icon,a=e.sellingPrice.price>0,s={resultHandler:{key:this.key,confirmFunc:"onUsePropHandler",confirmAddData:e},data:e,url:n,title:i,slider:a,line:!0};this.emit("showpropfun",s)}},PicaGiftPanel.prototype.getBuyPackageData=function(){var e=this.curGiftData;return{id:e.id,sellingPrice:e.price[0],name:e.name,shortName:e.shortName,category:e.category,count:e.price[0].price>0?99:1}},PicaGiftPanel}(Phaser.GameObjects.Container),f=function(e){function PicGiftItem(i,n,a,s,l){var c=e.call(this,i,n,a)||this;return c.mIsSelect=!1,c.dpr=l,c.key=s,c.bg=c.scene.make.image({key:h.c.common2Key,frame:"equp_bg"}),c.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.selectbg=c.scene.make.image({key:h.c.common2Key,frame:"selected_icon_bg"}),c.selectbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.icon=new o.DynamicImage(i,0,0),c.add([c.bg,c.selectbg,c.icon]),c.setSize(c.selectbg.width,c.selectbg.height),c}return c(PicGiftItem,e),PicGiftItem.prototype.setItemData=function(e){var i=this;if(this.isSelect=!1,this.itemData=e,!e)return this.icon.visible=!1,void(this.selectbg.visible=!1);this.icon.visible=!0,this.selectbg.visible=this.mIsSelect;var n=l.Url.getOsdRes(e.icon);this.icon.load(n,this,(function(){i.icon.scale=i.dpr})),e.limit>0&&e.remain<=0?this.icon.setTintFill(8947848):this.icon.clearTint()},Object.defineProperty(PicGiftItem.prototype,"isSelect",{get:function(){return this.mIsSelect},set:function(e){this.mIsSelect=e,this.selectbg.visible=e},enumerable:!1,configurable:!0}),PicGiftItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaFurniFunPanel",(function(){return _}));var a,s=n(1),o=n(788),h=n(789),l=n(791),c=n(2),m=n(790),f=n(0),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaFurniFunPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=c.ModuleName.PICAFURNIFUN_NAME,n}return g(PicaFurniFunPanel,e),PicaFurniFunPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.66),this.blackGraphic.fillRect(0,0,a,s),this.content.x=Math.floor(a/2),this.content.y=Math.floor(s/2),this.setSize(a*this.scale,s*this.scale),this.materialGameScroll.refreshMask()},PicaFurniFunPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen(),this.setFuritDisplay(),this.setMaterialsData(this._getMaterialData()),this.render.emitter.emit(PicaFurniFunPanel.PICAFURNIFUN_SHOW)):this.preload())},PicaFurniFunPanel.prototype.addListen=function(){this.mInitialized&&(this.confirmBtn.on(o.ClickEvent.Tap,this.onConfirmBtnClick,this),this.closeBtn.on(o.ClickEvent.Tap,this.OnClosePanel,this))},PicaFurniFunPanel.prototype.removeListen=function(){this.mInitialized&&(this.confirmBtn.off(o.ClickEvent.Tap,this.onConfirmBtnClick,this),this.closeBtn.off(o.ClickEvent.Tap,this.OnClosePanel,this))},PicaFurniFunPanel.prototype.preload=function(){this.addAtlas(this.key,"furni_unlock/furni_unlock.png","furni_unlock/furni_unlock.json"),this.addAtlas(m.c.commonKey,m.d.commonUrl+".png",m.d.commonUrl+".json"),this.addAtlas(m.c.common2Key,m.d.common2Url+".png",m.d.common2Url+".json"),e.prototype.preload.call(this)},PicaFurniFunPanel.prototype.init=function(){var i=this,n=this.cameraWidth,a=this.cameraHeight;this.blackGraphic=this.scene.make.graphics(void 0,!1),this.blackGraphic.setInteractive(new Phaser.Geom.Rectangle(0,0,n/this.scale,a/this.scale),Phaser.Geom.Rectangle.Contains),this.add(this.blackGraphic),this.content=this.scene.make.container(void 0,!1);var s=295*this.dpr,c=400*this.dpr;this.content.setSize(s,c),this.add(this.content),this.bg=new o.NineSlicePatch(this.scene,0,0,s,c,m.c.common2Key,"bg",{left:20*this.dpr,top:20*this.dpr,right:20*this.dpr,bottom:40*this.dpr}),this.content.add(this.bg);var g=.5*-this.bg.height;this.titleimage=this.scene.make.image({x:0,y:g+5*this.dpr,key:m.c.common2Key,frame:"title"},!1),this.titleimage.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titleName=this.scene.make.text({x:0,y:this.titleimage.y+2*this.dpr,text:f.i18n.t("furni_unlock.title"),style:{color:"#905B06",fontFamily:f.Font.DEFULT_FONT,fontSize:16*this.dpr}}).setOrigin(.5,.5).setFontStyle("bold"),this.closeBtn=new o.Button(this.scene,m.c.commonKey,"close"),this.closeBtn.x=.5*this.bg.width-8*this.dpr,this.closeBtn.y=g+7*this.dpr,this.content.add([this.titleimage,this.titleName,this.closeBtn]),this.itemName=this.scene.make.text({x:0,y:this.titleimage.y+.5*this.titleimage.height+13*this.dpr,text:"",style:{color:"#FFC51A",fontFamily:f.Font.DEFULT_FONT,fontSize:14*this.dpr}}).setFontStyle("bold").setStroke("#996600",4).setOrigin(.5),this.content.add(this.itemName),this.bgicon=this.scene.make.image({key:this.key,frame:"bg_f"}),this.bgicon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.bgicon.y=this.itemName.y+.5*this.bgicon.height+13*this.dpr,this.content.add([this.bg,this.bgicon]),this.mDetailDisplay=new l.DetailDisplay(this.scene,this.render),this.mDetailDisplay.setTexture(this.key,"bg_f"),this.mDetailDisplay.y=this.bgicon.y,this.mDetailDisplay.setFixedScale(this.dpr/this.scale),this.mDetailDisplay.setSize(72*this.dpr,72*this.dpr),this.content.add(this.mDetailDisplay);var _=360*this.dpr,T=92*this.dpr;this.materialCon=this.scene.make.container(void 0,!1).setSize(_,T),this.content.add(this.materialCon),this.materialCon.setPosition(0,-g-.5*T-66*this.dpr);var x=this.scene.make.text({x:0,y:.5*-T+12*this.dpr,text:f.i18n.t("furni_unlock.needMaterials"),style:{color:"#253FCA",fontSize:12*this.dpr,fontFamily:f.Font.DEFULT_FONT}},!1).setOrigin(.5),S=this.scene.make.image({key:this.key,frame:"sourcelist_title"});S.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var j=this.scene.make.image({key:this.key,frame:"sourcelist_title"});j.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var q=.5*-x.width-.5*S.width-10*this.dpr;S.setPosition(q,x.y),j.setPosition(-q,x.y).rotation=-Math.PI,this.materialCon.add([x,S,j]),this.materialGameScroll=new o.GameScroller(this.scene,{x:0,y:2*this.dpr,width:240*this.dpr,height:90*this.dpr,zoom:this.scale,dpr:this.dpr,align:2,orientation:1,space:20*this.dpr,valuechangeCallback:void 0,cellupCallBack:function(e){i.onMaterialItemHandler(e)}}),this.materialCon.add(this.materialGameScroll);var Y=145*this.dpr,X=55*this.dpr;this.itemtips=new h.ItemInfoTips(this.scene,Y,X,m.c.common2Key,"tips_bg",this.dpr,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr}),this.itemtips.x=.5*-this.width+.5*Y+10*this.dpr,this.itemtips.y=.5*-this.height+70*this.dpr,this.itemtips.setVisible(!1),this.itemtips.setHandler(new f.Handler(this,this.onItemTipsHideHandler)),this.content.add(this.itemtips),this.confirmBtn=new o.NineSliceButton(this.scene,0,-g-35*this.dpr,100*this.dpr,40*this.dpr,m.c.commonKey,"yellow_btn_over",f.i18n.t("furni_unlock.unlock"),this.dpr,this.scale,{left:15*this.dpr,top:15*this.dpr,right:15*this.dpr,bottom:15*this.dpr}),this.confirmBtn.setTextStyle({color:"#976400",fontSize:12*this.dpr,fontFamily:f.Font.DEFULT_FONT,stroke:"#976400"}),this.confirmBtn.setTextOffset(10*this.dpr,0);var Z=this.scene.make.image({key:this.key,frame:"repair_icon"});Z.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),Z.x=-28*this.dpr,this.confirmBtn.add(Z),this.content.add(this.confirmBtn),this.resize(0,0),e.prototype.init.call(this)},PicaFurniFunPanel.prototype.destroy=function(){this.removeListen(),this.confirmBtn&&this.confirmBtn.destroy(),this.confirmBtn=null,e.prototype.destroy.call(this)},PicaFurniFunPanel.prototype.setFuritDisplay=function(){var e=this._getDisplayData(),i=e.displayInfo,n=new s.op_client.OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_COMMODITY_RESOURCE;n.display=i.display;var a=this.createProtocolObject(i.animations);if(a.length>1){for(var o=[],h=0,l=a;h<l.length;h++){var c=l[h];"lock"!==c.node.name&&(c.frameName=c.layer[0].frameName,o.push(c))}0===o.length&&o.push(a[0]),n.animations=o}else n.animations=a;this.mDetailDisplay.loadDisplay(n),this.itemName.text=e.nickname},PicaFurniFunPanel.prototype.isTeamBuild=function(){return this.mShowData.tag&&"teambuild"===this.mShowData.tag},PicaFurniFunPanel.prototype._getDisplayData=function(){return this.isTeamBuild()?this.mShowData.element:this.mShowData},PicaFurniFunPanel.prototype._getMaterialData=function(){return this.isTeamBuild()?this.mShowData.materials:this.materials},PicaFurniFunPanel.prototype.setMaterialsData=function(e){this.materials=e,this.mInitialized&&e&&this.setMaterialItems(this.materials)},PicaFurniFunPanel.prototype.createProtocolObject=function(e){var i=[];return e.forEach((function(e){var n={node:e.mNode,baseLoc:"0,0",originPoint:[0,0],layer:[]},a=new h.AnimationModel(n);Object.assign(a,e);var s=a.createProtocolObject();i.push(s)}),this),i},PicaFurniFunPanel.prototype.setMaterialItems=function(e){var i=e.length;this.materialGameScroll.clearItems();for(var n=0;n<i;n++){var a=new T(this.scene,this.key,this.dpr,this.scale);a.y=0,a.setItemData(e[n]),a.setData("itemData",e[n]),this.materialGameScroll.addItem(a)}this.materialGameScroll.Sort()},PicaFurniFunPanel.prototype.onConfirmBtnClick=function(){var e=this.showData;e&&(this.isTeamBuild()?this.render.renderEmitter(this.key+"_queryTeamBuild",[e.element.id]):this.render.renderEmitter(this.key+"_queryunlock",[e.id]),this.OnClosePanel())},PicaFurniFunPanel.prototype.OnClosePanel=function(){this.render.renderEmitter(this.key+"_close")},PicaFurniFunPanel.prototype.onMaterialItemHandler=function(e){this.itemtips.setVisible(!1),this.selectMaterial&&this.selectMaterial!==e&&(this.selectMaterial.select=!1),e.select=!e.select,e.select&&(this.itemtips.setItemData(e.itemData),this.itemtips.setVisible(!0)),this.selectMaterial=e,this.setTipsPosition(e)},PicaFurniFunPanel.prototype.onItemTipsHideHandler=function(){this.selectMaterial&&(this.selectMaterial.select=!1)},PicaFurniFunPanel.prototype.setTipsPosition=function(e){for(var i=e.x,n=e.y,a=e;a.parentContainer!==this.content;)i+=a.parentContainer.x,n+=a.parentContainer.y,a=a.parentContainer;i-.5*this.itemtips.width<.5*-this.content.width?this.itemtips.x=.5*this.itemtips.width-.5*this.content.width+20*this.dpr:i+.5*this.itemtips.width>.5*this.content.width?this.itemtips.x=.5*this.content.width-.5*this.itemtips.width-20*this.dpr:this.itemtips.x=i,this.itemtips.y=n-.5*this.itemtips.height+5*this.dpr},PicaFurniFunPanel.PICAFURNIFUN_SHOW="PICAFURNIFUN_SHOW",PicaFurniFunPanel}(h.BasePanel),T=function(e){function MaterialItem(i,n,a,s){var l=e.call(this,i)||this;return l.mselect=!1,l.dpr=a,l.key=n,l.zoom=s,l.bg=l.scene.make.image({key:l.key,frame:"bg_m"}),l.itemIcon=new h.DynamicImage(i,0,0),l.itemIcon.scale=l.dpr/l.zoom,l.itemCount=new o.BBCodeText(l.scene,0,15*a,"10/20",{color:"#000000"}).setOrigin(.5).setFontSize(11*a).setFontFamily(f.Font.DEFULT_FONT),l.add([l.bg,l.itemIcon,l.itemCount]),l.setSize(l.bg.width,l.bg.height),l.itemCount.y=.5*l.height+8*a,l}return g(MaterialItem,e),MaterialItem.prototype.setItemData=function(e){this.itemData=e,this.itemCount.text=this.getCountText(e);var i=f.Url.getOsdRes(e.texturePath);this.itemIcon.load(i,this,(function(){}))},Object.defineProperty(MaterialItem.prototype,"select",{get:function(){return this.mselect},set:function(e){this.bg.setFrame(e?"bg_select":"bg_m"),this.mselect=e},enumerable:!1,configurable:!0}),MaterialItem.prototype.getCountText=function(e){return"[color="+(e.count>=e.neededCount?"#000000":"#ff0000")+"]"+e.count+"[/color]/"+e.neededCount},MaterialItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBagPanel",(function(){return T}));var a,s=n(788),o=n(789),h=n(796),l=n(790),c=n(2),m=n(0),f=n(1),g=n(792),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),T=function(e){function PicaBagPanel(i){var n=e.call(this,i)||this;return n.topBtns=[],n.mEnableEdit=!1,n.isDecorating=!1,n.mAttributes=[],n.atlasNames=[l.d.uicommon],n.textures=[{atlasName:"bag_bg",folder:"texture"}],n.key=c.ModuleName.PICABAG_NAME,n}return _(PicaBagPanel,e),Object.defineProperty(PicaBagPanel.prototype,"closeBtn",{get:function(){return this.mCloseBtn},enumerable:!1,configurable:!0}),PicaBagPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.mBackground.x=.5*a,this.mBackground.y=.5*s,this.mCategoryCon.setSize(a,79*this.dpr),this.mCategoryCon.y=s-this.mPropGrid.height-.5*this.mCategoryCon.height-47*this.dpr,this.mCategoryCon.x=.5*a,this.mDetailBubble.y=this.mCategoryCon.y-10*this.dpr-this.mDetailBubble.height,this.mCategoriesBar.y=40*this.dpr,this.mCategoriesBar.x=.5*-a,this.mCategoriesBar.clear(),this.mCategoriesBar.fillStyle(4121087),this.mCategoriesBar.fillRect(0,0,a,40*this.dpr),this.mCategoriesBar.fillStyle(439765),this.mCategoriesBar.fillRect(0,40*this.dpr,a,3*this.dpr),this.useBtn.x=a-this.useBtn.width/2-10*this.dpr,this.useBtn.y=this.mCategoryCon.y-this.useBtn.height/2,this.recasteBtn.x=this.useBtn.x,this.recasteBtn.y=this.useBtn.y-this.recasteBtn.height-15*this.dpr,this.showBtn.x=this.useBtn.x,this.showBtn.y=this.useBtn.y-this.recasteBtn.height-15*this.dpr,this.mDetailDisplay.x=a/2,this.mDetailDisplay.y=.5*(s-296*this.dpr-60*this.dpr)+60*this.dpr,this.mIconBg.x=this.mDetailDisplay.x,this.mIconBg.y=this.mDetailDisplay.y,this.mPropGridBg.clear(),this.mPropGridBg.fillStyle(8250878),this.mPropGridBg.fillRect(0,0,this.mPropGrid.width,this.mPropGrid.height+10*this.dpr),this.mPropGridBg.y=s-this.mPropGrid.height-4*this.dpr,this.mPropGrid.x=a/2+3*this.dpr,this.mPropGrid.y=s-.5*this.mPropGrid.height,this.mPropGrid.layout(),this.mPropGrid.resetMask(),this.mCategoryScroll.refreshMask(),this.setSize(a,s),this.setInteractive()},PicaBagPanel.prototype.setCategories=function(e){this.mPreCategoryBtn=null,this.mSelectedCategeories=null;var i=60*this.dpr,n=41*this.dpr,a=[];this.mCategoryScroll.clearItems();var s={value:m.i18n.t("common.all"),key:"alltype"};e.unshift(s);for(var h=0;h<e.length;h++){var l=new o.TextButton(this.scene,this.dpr,1,e[h].value,0,0);l.setData("item",e[h]),l.setSize(i,n),this.mCategoryScroll.addItem(l),a[h]=l,l.setFontSize(18*this.dpr),l.setFontStyle("bold")}this.mCategoryScroll.Sort(),this.mCategoryScroll.refreshMask(),a.length>1&&this.onSelectSubCategoryHandler(a[0]),this.updateCategeoriesLoc(!1)},PicaBagPanel.prototype.setProp=function(e,i){void 0===i&&(i=!1),e=e||[];var n=[],a=this.mSelectedCategeories.key;this.mSelectedItem=void 0;for(var s=!1,o=0,h=e;o<h.length;o++){var l=h[o];this.mSelectedItemData&&l.indexId===this.mSelectedItemData.indexId&&(this.mSelectedItemData=l,s=!0),"alltype"!==a&&a!==l.subcategory||n.push(l)}i&&(this.mSelectedItemData||(i=!1),s||(i=!1));var c=n.length;if(c<18&&(n=n.concat(new Array(18-c))),this.mPropGrid.setItems(n),this.mPropGrid.layout(),!i){this.mSelectedItemData=void 0,this.mPropGrid.setT(0);var m=this.mPropGrid.getCell(0);m.container&&this.onSelectItemHandler(m.container)}},PicaBagPanel.prototype.setMoneyData=function(e,i){e=e||0,i=i||0,this.moneyData={money:e,diamond:i},this.mInitialized&&(e>99999?(this.moneyvalue.setText(Math.floor(e/1e3)/10+""),this.moneyvalue.setUintText({img:!0})):(this.moneyvalue.setText(e+""),this.moneyvalue.setUintTextVisible(!1)),i>99999?(this.diamondvalue.setText(Math.floor(i/1e3)/10+""),this.diamondvalue.setUintText({img:!0})):(this.diamondvalue.setText(i+""),this.diamondvalue.setUintTextVisible(!1)))},PicaBagPanel.prototype.setSceneData=function(e,i,n){this.mSceneType=e,this.mEnableEdit=n,this.isDecorating=i,this.mInitialized&&this.createCategory(e,i)},PicaBagPanel.prototype.setSelectedResource=function(e){e.display&&this.mDetailDisplay.loadDisplay(e)},PicaBagPanel.prototype.addListen=function(){this.mInitialized&&(this.mCloseBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this),this.useBtn.on(s.ClickEvent.Tap,this.onUseBtnHandler,this),this.recasteBtn.on(s.ClickEvent.Tap,this.onRecasteHandler,this),this.showBtn.on(s.ClickEvent.Tap,this.onShowHandler,this))},PicaBagPanel.prototype.removeListen=function(){this.mInitialized&&(this.mCloseBtn.off(s.ClickEvent.Tap,this.onCloseHandler,this),this.useBtn.off(s.ClickEvent.Tap,this.onUseBtnHandler,this),this.recasteBtn.off(s.ClickEvent.Tap,this.onRecasteHandler,this),this.showBtn.off(s.ClickEvent.Tap,this.onShowHandler,this))},PicaBagPanel.prototype.destroy=function(){this.mCategoryScroll&&this.mCategoryScroll.destroy(),this.mPropGrid&&this.mPropGrid.destroy(),e.prototype.destroy.call(this)},PicaBagPanel.prototype.queryRefreshPackage=function(e){void 0===e&&(e=!1),this.queryPackege(e)},PicaBagPanel.prototype.onSellPropsHandler=function(e,i,n){this.mCategoryScroll.addListen(),this.render.renderEmitter(this.key+"_sellProps",{prop:i,count:n,category:e})},PicaBagPanel.prototype.onSellPropsFailedHandler=function(e){this.mCategoryScroll.addListen()},PicaBagPanel.prototype.onUsePropsHandler=function(e,i){this.mCategoryScroll.addListen(),this.render.renderEmitter(this.key+"_useprops",{itemid:e.id,count:i})},PicaBagPanel.prototype.onUsePropsFailedHandler=function(e){this.mCategoryScroll.addListen()},PicaBagPanel.prototype.onShow=function(){e.prototype.onShow.call(this),this.render.emitter.emit(PicaBagPanel.PICABAG_SHOW)},PicaBagPanel.prototype.onInitialized=function(){this.moneyData&&this.setMoneyData(this.moneyData.money,this.moneyData.diamond),void 0!==this.mSceneType&&this.createCategory(this.mSceneType,this.isDecorating)},PicaBagPanel.prototype.init=function(){var i=this,n=this.scaleWidth,a=this.scaleHeight;this.mBackground=new h.a(this.scene,0,0,n,a),this.mIconBg=this.scene.make.image({key:"bag_bg"},!1),this.mIconBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mCategoryCon=this.scene.make.container(void 0,!1),this.mCategoryCon.setSize(n,295*this.dpr),this.mCategoryCon.y=a-this.mCategoryCon.height,this.mCategoriesBar=this.scene.make.graphics(void 0,!1),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.mCloseBtn=new s.Button(this.scene,l.d.uicommon,"back_arrow","back_arrow"),this.mCloseBtn.setPosition(21*this.dpr,45*this.dpr),this.mCloseBtn.setInteractive(new Phaser.Geom.Rectangle(-28*this.dpr,-20*this.dpr,56*this.dpr,40*this.dpr),Phaser.Geom.Rectangle.Contains);var o=new s.NineSlicePatch(this.scene,0,-this.dpr,190*this.dpr,28*this.dpr,l.d.uicommon,"home_assets_bg",{left:17*this.dpr,top:0*this.dpr,right:17*this.dpr,bottom:0*this.dpr});o.x=.5*-o.width;var c=this.scene.make.image({x:o.x,y:0,key:l.d.uicommon,frame:"home_assets_division"},!1);this.moneyvalue=new h.e(this.scene,60*this.dpr,26*this.dpr,l.d.uicommon,"home_silver",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:m.Font.NUMBER}),this.moneyvalue.setLayout(1),this.moneyvalue.x=o.x-.5*o.width+22*this.dpr,this.diamondvalue=new h.e(this.scene,60*this.dpr,26*this.dpr,l.d.uicommon,"home_diamond",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:m.Font.NUMBER}),this.diamondvalue.setLayout(1),this.diamondvalue.x=o.x+22*this.dpr,this.moneyAddBtn=new s.Button(this.scene,l.d.uicommon,"home_praise_bg","home_praise_bg");var f=this.scene.make.image({x:0,y:0,key:l.d.uicommon,frame:"home_assets_add"},!1);this.moneyAddBtn.add(f),this.moneyAddBtn.x=.5*-this.moneyAddBtn.width-4*this.dpr,this.moneyAddBtn.on(s.ClickEvent.Tap,this.onRechargeHandler,this),this.moneyCon=this.scene.make.container(void 0,!1),this.moneyCon.setSize(o.width,o.height),this.moneyCon.add([o,c,this.moneyvalue,this.diamondvalue,this.moneyAddBtn]),this.moneyCon.x=n-20*this.dpr,this.moneyCon.y=this.mCloseBtn.y;var g=this.scene.make.image({key:l.d.uicommon,frame:"avater_name_bg"});g.x=.5*n,g.y=this.mCloseBtn.y+40*this.dpr,this.nameText=this.scene.make.text({x:g.x,y:g.y,text:"",style:m.UIHelper.whiteStyle(this.dpr,14)}).setOrigin(.5),this.nameText.setFontStyle("bold"),this.starImage=this.scene.make.image({key:l.d.uicommon,frame:"bag_star_big_1"}),this.starImage.x=g.x,this.starImage.y=g.y+.5*g.height+15*this.dpr,this.starImage.visible=!1,this.moreButton=new s.Button(this.scene,l.d.uicommon,"online_more"),this.moreButton.x=n-.5*this.moreButton.width-20*this.dpr,this.moreButton.y=g.y,this.moreButton.on(s.ClickEvent.Tap,this.onMoreHandler,this),this.moreButton.visible=!1;var _=100*this.dpr,T=40*this.dpr,x=n-_/2-20*this.dpr,S=this.mCategoryCon.y-25*this.dpr;this.useBtn=this.createNineButton(x+100*this.dpr,S,_,T,l.d.uicommon,"yellow_btn",m.i18n.t("common.use"),"#996600"),this.recasteBtn=this.createNineButton(this.useBtn.x,this.useBtn.y,_,T,l.d.uicommon,"yellow_btn",m.i18n.t("common.make"),"#996600"),this.showBtn=this.createNineButton(this.useBtn.x,this.useBtn.y-30*this.dpr,_,T,l.d.uicommon,"button_g",m.i18n.t("furni_bag.show"),"#042663"),this.recasteBtn.visible=!1,this.showBtn.visible=!1,this.mDetailDisplay=new h.c(this.scene,this.render),this.mDetailDisplay.setFixedScale(2*this.dpr/this.scale),this.mDetailDisplay.setComplHandler(new m.Handler(this,(function(){i.mDetailDisplay.visible=!0}))),this.mDetailDisplay.setTexture(l.d.uicommon,"bag_nothing",1),this.mDetailDisplay.setNearest(),this.mDetailDisplay.y=this.mIconBg.y+this.mIconBg.height/2,this.mDetailBubble=new h.b(this.scene,l.d.uicommon,this.dpr),this.mDetailBubble.x=10*this.dpr,this.mCategoryScroll=new s.GameScroller(this.scene,{x:0,y:60*this.dpr,width:n,height:41*this.dpr,zoom:this.scale,orientation:1,dpr:this.dpr,space:10*this.dpr,selfevent:!0,cellupCallBack:function(e){i.onSelectSubCategoryHandler(e)}}),this.mPropGridBg=this.scene.make.graphics(void 0,!1),this.mCategoryCon.add([this.mCategoriesBar,this.mCategoryScroll]),this.add([this.mBackground,this.mPropGridBg,this.mIconBg,this.mCloseBtn,this.moneyCon,this.mDetailDisplay,g,this.nameText,this.starImage,this.moreButton,this.mDetailBubble,this.mCategoryCon,this.useBtn,this.recasteBtn,this.showBtn]);var j=this.scene.textures.getFrame(l.d.uicommon,"bag_icon_common_bg"),q=j.width+9*this.dpr,Y=j.height+9*this.dpr,X={x:0,y:0,table:{width:n,height:231*this.dpr,columns:3,cellWidth:q,cellHeight:Y,reuseCellContainer:!0,zoom:this.scale,mask:!1},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;return null===n&&(n=new h.f(a,l.d.uicommon,"bag_icon_common_bg",i.dpr,i.scale,!1)),n.setData({item:s}),n.setItemData(s),s&&i.isSelectedItemData(s)&&(n.select=!0,i.mSelectedItem=n,i.mSelectedItemData=s),n}};this.mPropGrid=new s.GameGridTable(this.scene,X),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(e){e&&i.onSelectItemHandler(e)})),this.add(this.mPropGrid),this.resize(0,0),e.prototype.init.call(this)},PicaBagPanel.prototype.createCategory=function(e,i){var n=this.scaleWidth,a=90*this.dpr,h=35*this.dpr,c=23*this.dpr;this.topCheckBox=new o.CheckboxGroup;var f=[3,1],g=[m.i18n.t("furni_bag.Props"),m.i18n.t("furni_bag.furni")];2===e&&(f=[5],g=[m.i18n.t("furni_bag.furni")]);var _=.5*-n+.5*a+1*this.dpr,T=this.scene.textures.getFrame(l.d.uicommon,"bag_tab_uncheck"),x=60;T&&(x=T.width,T.height);var S={left:x/2,top:12*this.dpr,right:4*this.dpr,bottom:2*this.dpr};for(var j in f){var q=f[X=Number(j)],Y=new s.NinePatchTabButton(this.scene,a,h,l.d.uicommon,"bag_tab_uncheck","bag_tab_select",g[X],[S]);Y.tweenScale=1,Y.setTextStyle(m.UIHelper.whiteStyle(this.dpr,18)),Y.setData("data",q),Y.setSize(a,h),Y.setFontStyle("bold"),Y.y=c,Y.x=_,_+=a+3*this.dpr,this.topBtns.push(Y)}if(this.topCheckBox.appendItemAll(this.topBtns),this.topCheckBox.on("selected",this.onTopCategoryHandler,this),this.mCategoryCon.add(this.topBtns),i){var X=f.indexOf(1);this.topCheckBox.selectIndex(X)}else this.topCheckBox.selectIndex(0)},PicaBagPanel.prototype.createNineButton=function(e,i,n,a,o,h,l,c){var f=new s.NineSliceButton(this.scene,e,i,n,a,o,h,l,this.dpr,1,{left:14*this.dpr,top:14*this.dpr,right:15*this.dpr,bottom:14*this.dpr});return l&&(f.setTextStyle({color:c,fontSize:16*this.dpr,fontFamily:m.Font.DEFULT_FONT}),f.setFontStyle("bold")),f},PicaBagPanel.prototype.setSelectedItem=function(e,i){if(this.mSelectedItem&&(this.mSelectedItem.select=!1),this.nameText.text=e.name||e.shortName,e.grade>0){this.starImage.visible=!0;var n="bag_star_big_"+e.grade;this.starImage.setFrame(n)}else this.starImage.visible=!1;this.mSelectedItemData=e,this.mSelectedItem=i,i.select=!0;var a=e.serializeString?e.elepi:e;h.l.showDetailDisplay({display:this.mDetailDisplay,dpr:this.dpr,data:a,render:this.render,sn:e.sn,itemid:e.id,serialize:e.serializeString})},PicaBagPanel.prototype.isSelectedItemData=function(e){return!!this.mSelectedItemData&&this.mSelectedItemData.indexId===e.indexId},PicaBagPanel.prototype.onSelectSubCategoryHandler=function(e){var i=e.getData("item");if(i){this.mPreCategoryBtn&&this.mPreCategoryBtn instanceof o.TextButton&&this.mPreCategoryBtn.changeNormal(),e instanceof o.TextButton&&e.changeDown(),this.mSelectedCategeories=i,this.mPropGrid.setT(0);var n=void 0!==this.mSelectedItemData;this.queryPackege(n),this.mPreCategoryBtn=e}this.mPropGrid.setT(0)},PicaBagPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaBagPanel.prototype.queryPackege=function(e){void 0===e&&(e=!1),this.mSelectedCategeories&&this.render.renderEmitter(this.key+"_queryPackage",{packType:this.categoryType,key:this.mSelectedCategeories.key,isupdate:e})},PicaBagPanel.prototype.onSelectItemHandler=function(e){var i=this,n=e.getData("item");if(!(n&&this.mSelectedItemData===n||this.mSelectedItemData&&!n)){this.mDetailBubble.visible=!0;var a=null;this.render.mainPeer.getUserData_PlayerProperty().then((function(e){return a=e,i.serviceTimestamp})).then((function(e){i.mDetailBubble.setProp(n,Math.floor(e/1e3),a),i.mDetailBubble.y=i.mCategoryCon.y-10*i.dpr-i.mDetailBubble.height,n&&i.setItemAttribute(n,a)})),n?(3===this.categoryType?"PKT_MARKET_TAG_20013"!==n.subcategory?this.useBtn.visible=!1:this.useBtn.visible=!0:(this.useBtn.visible=!0,this.showBtn.visible=!0),this.setSelectedItem(n,e)):2!==this.categoryType&&void 0===this.mSelectedItemData&&(this.useBtn.visible=!1,this.showBtn.visible=!1,this.mDetailDisplay.setTexture(l.d.uicommon,"bag_nothing",1),this.mDetailDisplay.setNearest(),this.nameText.text="")}},PicaBagPanel.prototype.setItemAttribute=function(e,i){for(var n=0,a=this.mAttributes;n<a.length;n++){(g=a[n]).visible=!1}if(e.affectValues){for(var o=e.affectValues.length>=6?6:e.affectValues.length,c=0;c<o;c++){var f=e.affectValues[c],g=void 0;if(c<this.mAttributes.length)(g=this.mAttributes[c]).visible=!0;else{var _=new s.NineSlicePatch(this.scene,0,0,56*this.dpr,22*this.dpr,l.d.uicommon,"bag_attribute_bg",{left:12*this.dpr,right:12*this.dpr,top:0,bottom:0});(g=new h.d(this.scene,56*this.dpr,22*this.dpr,l.d.uicommon,"",this.dpr)).setOffset(-3*this.dpr,0),g.addAt(_,0),g.setLayout(2),this.add(g),this.mAttributes.push(g)}if(i.propertiesMap){var T=i.propertiesMap.get(f.key);if(T){var x=f.value>0?"+"+f.value:f.value+"";T.display?(g.load(m.Url.getOsdRes(T.display.texturePath)),g.setText(x),g.setOffset(-3*this.dpr,0)):(g.setText(x),g.setOffset(-10*this.dpr,0))}else g.visible=!1}else g.visible=!1}this.setLayoutAttribute()}},PicaBagPanel.prototype.setLayoutAttribute=function(){var e=[];if(this.mAttributes.forEach((function(i){i.visible&&e.push(i)})),0!==e.length){for(var i=56*this.dpr,n=21*this.dpr,a=23*this.dpr,s=.5*this.scaleWidth,o=this.nameText.y+30*this.dpr,h=e.length>3?3:e.length,l=i*h+a*(h-1),c=s-.5*l,m=0,f=0,g=e;f<g.length;f++){var _=g[f];_.x=c+.5*i,_.y=o,c+=i+a,3===++m&&(c=s-.5*l,o+=13*this.dpr+n)}e.length=0}},PicaBagPanel.prototype.onAddFurniToSceneHandler=function(){if(this.mSelectedItemData)if(this.mSceneType===f.op_def.SceneTypeEnum.EDIT_SCENE_TYPE||this.mEnableEdit)this.render.renderEmitter(this.key+"_addFurniToScene",this.mSelectedItemData.id);else{var e={text:[{text:m.i18n.t("furni_bag.placetips"),node:void 0}]};this.render.mainPeer.showMediator(c.ModuleName.PICANOTICE_NAME,!0,e),this.mCategoryScroll.addListen()}},PicaBagPanel.prototype.onTopCategoryHandler=function(e){var i=e.getData("data");this.clearCategoryData(),this.recasteBtn.visible=!1,this.showBtn.visible=!1,i&&(this.onSelectedCategory(i),1===i||5===i?(this.useBtn.setText(m.i18n.t("furni_bag.add")),1===i&&(this.showBtn.visible=!0)):(this.useBtn.setText(m.i18n.t("common.use")),this.moreButton.visible=!1))},PicaBagPanel.prototype.clearCategoryData=function(){this.mSelectedItemData=void 0},PicaBagPanel.prototype.onSelectedCategory=function(e){this.categoryType=e,this.render.renderEmitter(this.key+"_getCategories",e)},PicaBagPanel.prototype.getPropResource=function(e){var i={};return e.suitType?i.avatar=c.AvatarSuitType.createAvatarBySn(e.suitType,e.sn,e.slot,e.tag,e.version):i.display=e.animationDisplay||e.display,i.suit=[{suit_type:e.suitType,sn:e.sn,tag:e.tag,version:e.version}],i.animations=e.animations,i},PicaBagPanel.prototype.onMoreButtonHandler=function(e){"place"===e?this.onAddFurniToSceneHandler():"sell"===e&&this.onSellBtnHandler()},PicaBagPanel.prototype.onSellBtnHandler=function(){if(this.mCategoryScroll.removeListen(),this.mSelectedItemData){var e=this.mSelectedItemData;if(!e.recyclable)return;var i=m.i18n.t("common.sold"),n=this.getPropResource(e),a={key:this.key,confirmFunc:"onSellPropsHandler",cancelFunc:"onSellPropsFailedHandler",confirmAddData:this.categoryType};this.showPropFun({resultHandler:a,data:e,title:i,resource:n})}},PicaBagPanel.prototype.onUseBtnHandler=function(){if(this.mCategoryScroll.removeListen(),this.mSelectedItemData)if(1===this.categoryType||5===this.categoryType)this.onAddFurniToSceneHandler();else{var e=this.mSelectedItemData,i=m.i18n.t("common.use"),n=this.getPropResource(e),a={key:this.key,confirmFunc:"onUsePropsHandler",cancelFunc:"onUsePropsFailedHandler"};this.showPropFun({resultHandler:a,data:e,price:!1,title:i,resource:n})}},PicaBagPanel.prototype.onRechargeHandler=function(){},PicaBagPanel.prototype.onRecasteHandler=function(){if(5!==this.mSelectedItemData.rarity){var e=this.mSelectedItemData;this.render.mainPeer.showMediator(c.ModuleName.PICAMANUFACTURE_NAME,!0,e)}else{var i={text:[{text:m.i18n.t("recaste.raritytips"),node:void 0}]};this.render.mainPeer.showMediator(c.ModuleName.PICANOTICE_NAME,!0,i)}},PicaBagPanel.prototype.onMoreHandler=function(){this.mSelectedItemData&&(this.recasteBtn.visible=!1,this.moreButton.visible=!1)},PicaBagPanel.prototype.updateCategeoriesLoc=function(e){for(var i=this.mCategoryScroll.getItemList(),n=(this.dpr,null),a=30*this.dpr,s=(this.mScene.cameras.main.width,a),o=0;o<i.length;o++){var h=i[o];o>0?(n=i[o-1],h.x=n.x+n.width):h.x=s,s+=h.width}this.mCategoryScroll.setAlign()},PicaBagPanel.prototype.showPropFun=function(e){this.render.mainPeer.showMediator(c.ModuleName.PICAPROPFUN_NAME,!0,e)},PicaBagPanel.prototype.onShowHandler=function(){this.render.renderEmitter(this.key+"_showElement",this.mSelectedItemData.id)},Object.defineProperty(PicaBagPanel.prototype,"serviceTimestamp",{get:function(){var e=this;return new Promise((function(i,n){e.render.mainPeer.requestCurTime().then((function(e){i(e)}))}))},enumerable:!1,configurable:!0}),PicaBagPanel.PICABAG_SHOW="PICABAG_SHOW",PicaBagPanel}(g.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewNavigatePanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(804),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaNewNavigatePanel(i,n,a,s){var o=e.call(this,i)||this;return o.redButtonMap=new Map,o.dpr=a,o.key=n,o.scale=s,o.init(),o}return m(PicaNewNavigatePanel,e),PicaNewNavigatePanel.prototype.init=function(){this.scene.make.graphics(void 0,!1);var e=this.scene.cameras.main.width;this.bg=this.scene.make.image({key:h.d.uicommon,frame:"bg"}).setOrigin(0),this.bg.displayWidth=e,this.setSize(this.bg.width,this.bg.height),this.bagButton=this.createButton("home_bag"),this.friendButton=this.createButton("home_friend"),this.avatarButton=this.createButton("home_avater"),this.makeButton=this.createButton("home_pikadex"),this.exploreButton=this.createButton("home_explore"),this.homeButton=this.createButton("home_home"),this.buttons=[this.bagButton,this.friendButton,this.avatarButton,this.makeButton,this.exploreButton,this.homeButton],this.redButtonMap.set(c.MainUIRedType.GALLERY,this.makeButton),this.add(this.bg),this.add(this.buttons),this.addListen(),this.LayoutButton()},Object.defineProperty(PicaNewNavigatePanel.prototype,"redMap",{get:function(){return this.redButtonMap},enumerable:!1,configurable:!0}),PicaNewNavigatePanel.prototype.getIllustredPos=function(){var e=this.makeButton.getWorldTransformMatrix();return{x:e.tx,y:e.ty}},PicaNewNavigatePanel.prototype.tweenButton=function(e){var i=this.buttons[e];i&&new o.TweenCompent(this.scene,i,{scale:1.2,pingpang:!0}).tween()},PicaNewNavigatePanel.prototype.addListen=function(){this.bagButton.on(s.ClickEvent.Tap,this.onBagHandler,this),this.friendButton.on(s.ClickEvent.Tap,this.onFriendHandler,this),this.avatarButton.on(s.ClickEvent.Tap,this.onAvatarHandler,this),this.makeButton.on(s.ClickEvent.Tap,this.onMakeHandler,this),this.exploreButton.on(s.ClickEvent.Tap,this.onExploreHandler,this),this.homeButton.on(s.ClickEvent.Tap,this.onHomeHandler,this)},PicaNewNavigatePanel.prototype.removeListen=function(){this.bagButton.off(s.ClickEvent.Tap,this.onBagHandler,this),this.friendButton.off(s.ClickEvent.Tap,this.onFriendHandler,this),this.avatarButton.off(s.ClickEvent.Tap,this.onAvatarHandler,this),this.makeButton.off(s.ClickEvent.Tap,this.onMakeHandler,this),this.exploreButton.off(s.ClickEvent.Tap,this.onExploreHandler,this),this.homeButton.off(s.ClickEvent.Tap,this.onHomeHandler,this)},PicaNewNavigatePanel.prototype.updateUIState=function(e){if(e.length)for(var i=0,n=e;i<n.length;i++){var a=n[i],s=this.getButton(a.name);s&&(s.visible=a.visible)}this.LayoutButton()},PicaNewNavigatePanel.prototype.setHandler=function(e){this.sendHandler=e},PicaNewNavigatePanel.prototype.LayoutButton=function(){for(var e,i=.5*-this.width+this.dpr,n=0,a=this.buttons;n<a.length;n++){var s=a[n];s.visible&&(s.x=i+.5*s.width+(e?.5*e.width:0),i=s.x,e=s)}},PicaNewNavigatePanel.prototype.onBagHandler=function(){this.sendHandler&&this.sendHandler.runWith(["bag"])},PicaNewNavigatePanel.prototype.onFriendHandler=function(){this.sendHandler&&this.sendHandler.runWith(["friend"])},PicaNewNavigatePanel.prototype.onAvatarHandler=function(){this.sendHandler&&this.sendHandler.runWith(["avatar"])},PicaNewNavigatePanel.prototype.onMakeHandler=function(){this.sendHandler&&this.sendHandler.runWith(["make"])},PicaNewNavigatePanel.prototype.onExploreHandler=function(){this.sendHandler&&this.sendHandler.runWith(["explore"])},PicaNewNavigatePanel.prototype.onHomeHandler=function(){this.sendHandler&&this.sendHandler.runWith(["home"])},PicaNewNavigatePanel.prototype.createButton=function(e){this.isZh_CN&&(e+="_1");var i=new s.Button(this.scene,h.d.iconcommon,e,e);return i.y=.5*this.height,i},Object.defineProperty(PicaNewNavigatePanel.prototype,"isZh_CN",{get:function(){return"zh-CN"===l.i18n.language},enumerable:!1,configurable:!0}),PicaNewNavigatePanel.prototype.getButton=function(e){return"bottom.bag"===e?this.bagButton:"bottom.friend"===e?this.friendButton:"bottom.avatar"===e?this.avatarButton:"bottom.make"===e?this.makeButton:"bottom.explore"===e?this.exploreButton:"bottom.home"===e?this.homeButton:void 0},PicaNewNavigatePanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"InteractionBubbleCell",(function(){return h}));var a,s=n(789),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function InteractionBubbleCell(i,n){var a=e.call(this,i)||this;return a.mWdith=78,a.mHeight=78,a.width=a.mWdith*n,a.height=a.mHeight*n,a}return o(InteractionBubbleCell,e),InteractionBubbleCell.prototype.setContentData=function(e,i){this.content=e,this.handler&&this.handler.clear(),this.handler=i},InteractionBubbleCell.prototype.load=function(e,i,n){this.createAnimation(),this.mBubbleAni.load(e,i,n),this.mBubbleAni.play()},InteractionBubbleCell.prototype.show=function(){this.mBubbleAni&&this.add(this.mBubbleAni),this.removeDelay()},InteractionBubbleCell.prototype.hide=function(){this.mBubbleAni&&this.remove(this.mBubbleAni),this.mRemoveDelay&&(clearTimeout(this.mRemoveDelay),this.mRemoveDelay=null)},InteractionBubbleCell.prototype.destroy=function(){this.hide(),this.mBubbleAni&&this.mBubbleAni.destroy(),this.handler&&this.handler.clear(),this.mBubbleAni=null,this.handler=null,e.prototype.destroy.call(this)},InteractionBubbleCell.prototype.createAnimation=function(){this.mBubbleAni=new s.BubbleAnimation(this.scene),this.mBubbleAni.width=this.width,this.mBubbleAni.height=this.height;var e=Phaser.Input.Events.POINTER_DOWN;this.mBubbleAni.setInteractive(new Phaser.Geom.Rectangle(0,0,2*this.mBubbleAni.width,2*this.mBubbleAni.height),Phaser.Geom.Rectangle.Contains),this.mBubbleAni.on(e,this.onBubbleClick,this)},InteractionBubbleCell.prototype.onBubbleClick=function(){this.handler&&this.handler.runWith(this.content)},InteractionBubbleCell.prototype.removeDelay=function(){var e=this;this.mRemoveDelay=setTimeout((function(){e.handler&&e.handler.runWith(e.content.id),e.hide()}),this.content.duration)},InteractionBubbleCell}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"InteractionBubbleContainer",(function(){return l}));var a,s=n(837),o=n(788),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function InteractionBubbleContainer(i,n){return e.call(this,i)||this}return h(InteractionBubbleContainer,e),Object.defineProperty(InteractionBubbleContainer.prototype,"show",{get:function(){return this.mShow},set:function(e){this.mShow=e},enumerable:!1,configurable:!0}),InteractionBubbleContainer.prototype.hide=function(){this.mShow=!1,this.parentContainer&&this.parentContainer.remove(this)},InteractionBubbleContainer.prototype.setFollow=function(i,n,a){e.prototype.setFollow.call(this,i,n,a)},InteractionBubbleContainer.prototype.setBubble=function(e,i){this.id=e.id;var n=e.display.resName,a=e.display.texturePath,o=e.display.dataPath;return this.mBubble||(this.mBubble=new s.InteractionBubbleCell(this.scene,this.dpr),this.mBubble.load(n,a,o),this.add(this.mBubble)),this.mBubble.setContentData(e,i),this.mBubble.show(),this.mBubble},InteractionBubbleContainer.prototype.destroy=function(){this.hide(),this.mBubble&&this.mBubble.destroy(),this.mBubble=null,e.prototype.destroy.call(this)},InteractionBubbleContainer}(o.BaseUI)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaExploreListPanel",(function(){return S}));var a,s=n(788),o=n(2),h=n(790),l=n(0),c=n(792),m=n(840),f=n(793),g=n(841),_=n(842),T=n(791),x=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),S=function(e){function PicaExploreListPanel(i){var n=e.call(this,i)||this;return n.atlasNames=[h.d.explorelog,h.d.uicommon1,h.d.uicommon],n.textures=[{atlasName:"explore_bg_stripe_top",folder:h.d.explorelog},{atlasName:"explore_bg_stripe_middle",folder:h.d.explorelog},{atlasName:"explore_mask",folder:h.d.explorelog}],n.key=o.ModuleName.PICAEXPLORELIST_NAME,n}return x(PicaExploreListPanel,e),PicaExploreListPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.bg.x=.5*a,this.bg.y=.5*s,this.topbg.y=.5*this.topbg.height,this.topbg.x=.5*a,this.midbg.y=this.topbg.y+.5*this.midbg.height,this.midbg.x=this.topbg.x,this.mBackBtn.x=.5*this.mBackBtn.width+8*this.dpr,this.mBackBtn.y=.5*this.mBackBtn.height+22*this.dpr,this.energyProgress.x=a-.5*this.energyProgress.width-17*this.dpr,this.energyProgress.y=this.mBackBtn.y;var o=63*this.dpr,h=56*this.dpr,l=s-o-h;this.levelPanel.x=.5*a,this.levelPanel.y=o+.5*l,this.levelPanel.setTopAndBottomHeight(o,h),this.levelPanel.resize(a,l),this.bottomPanel.x=.5*a,this.bottomPanel.y=s-.5*this.bottomPanel.height,this.bottomPanel.resize(a,57*this.dpr)},PicaExploreListPanel.prototype.addListen=function(){this.mInitialized&&this.mBackBtn.on(s.ClickEvent.Tap,this.onBackHandler,this)},PicaExploreListPanel.prototype.removeListen=function(){this.mInitialized&&this.mBackBtn.off(s.ClickEvent.Tap,this.onBackHandler,this)},PicaExploreListPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight,a=63*this.dpr,s=56*this.dpr;this.setSize(i,n),this.bg=new T.CommonBackground(this.scene,0,0,i,n,h.d.explorelog,"explore_bg",16183516),this.topbg=this.scene.make.image({key:"explore_bg_stripe_top"}),this.midbg=this.scene.make.image({key:"explore_bg_stripe_middle"}),this.mBackBtn=new f.BackTextButton(this.scene,this.dpr),this.mBackBtn.setText(l.i18n.t("explore.title")),this.energyProgress=new f.EnergyProgressBar(this.scene,this.dpr);var o=n-a-s;this.levelPanel=new _.PicaExploreListLevelPanel(this.scene,this.width,o,this.dpr,this.scale),this.levelPanel.setHandler(new l.Handler(this,this.onLevelPanelHandler)),this.bottomPanel=new g.PicaExploreListBottomPanel(this.scene,this.width,57*this.dpr,this.dpr,this.scale),this.bottomPanel.setHandler(new l.Handler(this,this.onBottomPanelHandler)),this.add([this.bg,this.topbg,this.midbg,this.levelPanel,this.mBackBtn,this.energyProgress,this.bottomPanel]),this.resize(i,n),e.prototype.init.call(this)},PicaExploreListPanel.prototype.onShow=function(){this.mShowData&&this.setExploreChapters(this.mShowData),this.tempDatas&&this.setEnergyData(this.tempDatas.value,this.tempDatas.max)},PicaExploreListPanel.prototype.setExploreChapterResult=function(e){var i=this.mShowData.nextLevelId;this.levelPanel.setCaptoreResult(e,i),this.render.emitter.emit(PicaExploreListPanel.PICAEXPLORELIST_DATA,this.levelPanel.addHei)},PicaExploreListPanel.prototype.setExploreChapters=function(e){this.mShowData=e,this.mInitialized&&this.bottomPanel.setChapterDatas(e)},PicaExploreListPanel.prototype.setEnergyData=function(e,i){this.tempDatas={value:e,max:i},this.mInitialized&&(this.energyProgress.setEnergyData(e,i),this.levelPanel.setPowerValue(e))},PicaExploreListPanel.prototype.openDetialPanel=function(){var e=this.width,i=this.height;this.detialPanel||(this.detialPanel=new m.PicaExploreListDetailPanel(this.scene,e,i,this.dpr,this.scale),this.detialPanel.setHandler(new l.Handler(this,this.onDetialHandler)),this.detialPanel.y=-20*this.dpr),this.add(this.detialPanel),this.detialPanel.visible=!0,this.detialPanel.x=.5*e,this.detialPanel.y=.5*i,this.detialPanel.resize(e,i)},PicaExploreListPanel.prototype.hideDetailPanel=function(){this.detialPanel.visible=!1},PicaExploreListPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaExploreListPanel.prototype.onBackHandler=function(){this.render.renderEmitter(o.ModuleName.PICAEXPLORELIST_NAME+"_hide")},PicaExploreListPanel.prototype.onDetialHandler=function(e,i){"hide"===e&&this.hideDetailPanel()},PicaExploreListPanel.prototype.onLevelPanelHandler=function(e,i){if("foreword"===e)this.openDetialPanel(),this.detialPanel.setCaptoreResultData(i);else if("roomid"===e)if(this.tempDatas.value<i.costEnergy){var n={text:[{text:l.i18n.t("explore.energytips"),node:void 0}]};this.render.mainPeer.showMediator(o.ModuleName.PICANOTICE_NAME,!0,n)}else this.render.renderEmitter(o.ModuleName.PICAEXPLORELIST_NAME+"_queyenterroom",i.roomId);else"move"===e&&(i?(this.topbg.visible=!1,this.midbg.visible=!1):(this.topbg.visible=!0,this.midbg.visible=!0))},PicaExploreListPanel.prototype.onBottomPanelHandler=function(e,i){"chapterdata"===e&&this.render.renderEmitter(o.ModuleName.PICAEXPLORELIST_NAME+"_queyexplorechapter",i)},PicaExploreListPanel.PICAEXPLORELIST_DATA="PICAEXPLORELIST_DATA",PicaExploreListPanel}(c.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaExploreListDetailPanel",(function(){return g}));var a,s=n(788),o=n(0),h=n(790),l=n(789),c=n(2),m=n(814),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaExploreListDetailPanel(i,n,a,s,o){var h=e.call(this,i,0,0)||this;return h.needItems=[],h.labels=[],h.needDatas=[],h.indexed=-1,h.labelsCount=0,h.dpr=s,h.zoom=o,h.setSize(n,a),h.init(),h.setInteractive(),h}return f(PicaExploreListDetailPanel,e),PicaExploreListDetailPanel.prototype.resize=function(e,i){this.setSize(e,i),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.73),this.blackGraphic.fillRect(0,0,e,i),this.blackGraphic.x=.5*-e,this.blackGraphic.y=.5*-i,this.lineGraphic.clear(),this.lineGraphic.fillStyle(723723,1),this.lineGraphic.fillRect(-12*this.dpr,-this.dpr,24*this.dpr,2*this.dpr),this.mPropGrid.resetMask()},PicaExploreListDetailPanel.prototype.setHandler=function(e){this.send=e},PicaExploreListDetailPanel.prototype.setCaptoreResultData=function(e){var i="zh-CN"!==o.i18n.language?e.chapter.chapterId+"":c.ChineseUnit.numberToChinese(e.chapter.chapterId);this.titleTex.text=o.i18n.t("explore.chaptertitle",{name:i}),this.captoreTex.text=e.chapter.name,this.captoreDes.text=e.chapter.des,this.taskTex.text=o.i18n.t("explore.taskneedtips"),this.needDatas.length=0;for(var n=0,a=e.levels;n<a.length;n++)for(var s=0,h=a[n].clueItems;s<h.length;s++){var l=h[s];this.needDatas.push(l)}this.setNeedItems(this.needDatas);var m=Math.ceil(this.needDatas.length/6);this.setNeedBottomImgs(m),this.setLabelsSelect(0)},PicaExploreListDetailPanel.prototype.setNeedItems=function(e){for(var i=[],n=0;n<e.length;n+=6){for(var a=[],s=n;s<n+6;s++)s<e.length&&a.push(e[s]);i.push(a)}this.mPropGrid.setItems(i)},PicaExploreListDetailPanel.prototype.setNeedBottomImgs=function(e){this.labelsCount=e;for(var i=0,n=this.labels;i<n.length;i++){(s=n[i]).visible=!1}for(var a=0;a<e;a++){var s=void 0;a<this.labels.length?s=this.labels[a]:(s=this.scene.make.image({key:h.d.explorelog,frame:"explore_page_down"}),this.content.add(s),this.labels.push(s)),s.visible=!0}this.setLabelLayout(e)},PicaExploreListDetailPanel.prototype.init=function(){this.blackGraphic=this.scene.make.graphics(void 0,!1),this.add(this.blackGraphic),this.bg=this.scene.make.image({key:h.d.explorelog,frame:"explore_chapter_total_open"}),this.content=this.scene.make.container(void 0,!1),this.content.setSize(this.bg.width,this.bg.height),this.add(this.content),this.backButton=new s.Button(this.scene,h.d.uicommon,"close"),this.backButton.on(s.ClickEvent.Tap,this.onHideHandler,this),this.backButton.x=.5*this.content.width,this.backButton.y=.5*-this.content.height;var e=-75*this.dpr,i=75*this.dpr,n=.5*-this.content.height+20*this.dpr;this.titleTex=this.scene.make.text({style:o.UIHelper.colorStyle("#8743B9",14*this.dpr)}).setOrigin(.5),this.titleTex.setFontStyle("bold"),this.titleTex.x=e,this.titleTex.y=n,this.captoreTex=this.scene.make.text({style:o.UIHelper.blackStyle(this.dpr,14)}).setOrigin(.5),this.captoreTex.setFontStyle("bold"),this.captoreTex.y=this.titleTex.y+25*this.dpr,this.captoreTex.x=e,this.lineGraphic=this.scene.make.graphics(void 0,!1),this.lineGraphic.x=e,this.lineGraphic.y=this.captoreTex.y+15*this.dpr,this.captoreDes=this.scene.make.text({style:o.UIHelper.blackStyle(this.dpr,11)}).setOrigin(0),this.captoreDes.setWordWrapWidth(117*this.dpr,!0),this.captoreDes.x=e-58*this.dpr,this.captoreDes.y=this.lineGraphic.y+16*this.dpr,this.taskTex=this.scene.make.text({style:o.UIHelper.blackStyle(this.dpr,14)}).setOrigin(.5),this.taskTex.setFontStyle("bold"),this.taskTex.x=i,this.taskTex.y=this.captoreTex.y,this.mPropGrid=this.createGrid(),this.mPropGrid.x=i+5*this.dpr,this.mPropGrid.y=15*this.dpr,this.content.add([this.bg,this.backButton,this.titleTex,this.captoreTex,this.lineGraphic,this.captoreDes,this.taskTex,this.mPropGrid]),this.resize(this.width,this.height)},PicaExploreListDetailPanel.prototype.setLabelLayout=function(e){for(var i=6*this.dpr,n=8*this.dpr,a=.5*this.content.height-30*this.dpr,s=80*this.dpr-.5*(i*e+n*(e-1))+.5*i,o=0;o<e;o++){var h=this.labels[o];h.x=s,h.y=a,s+=i+n}},PicaExploreListDetailPanel.prototype.onHideHandler=function(){this.send&&this.send.runWith("hide")},PicaExploreListDetailPanel.prototype.createGrid=function(){var e=this,i=110*this.dpr,n=157*this.dpr,a={x:0,y:0,table:{width:110*this.dpr,height:157*this.dpr,columns:1,cellWidth:i,cellHeight:n,reuseCellContainer:!0,zoom:this.zoom,mask:!0},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(i,n){var a=i.item;return null===n&&(n=e.createGridLayout()),n.setItems(a),n},onScrollValueChange:function(i){i<0?i=0:i>1&&(i=1);var n=Math.floor(i*e.labelsCount);e.setLabelsSelect(n)}},o=new s.GameGridTable(this.scene,a);return o.layout(),o.on("cellTap",(function(i){i&&e.onSelectItemHandler(i,e.scene.input.activePointer)})),o},PicaExploreListDetailPanel.prototype.setLabelsSelect=function(e){if(this.indexed!==e){e>=this.labelsCount&&(e=this.labelsCount-1);for(var i=0;i<this.labelsCount;i++)e===i?this.labels[i].setFrame("explore_page_up"):this.labels[i].setFrame("explore_page_down");this.indexed=e}},PicaExploreListDetailPanel.prototype.createGridLayout=function(){return new _(this.scene,120*this.dpr,157*this.dpr,this.dpr,{cellSize:new Phaser.Math.Vector2(45*this.dpr,45*this.dpr),space:new Phaser.Math.Vector2(15*this.dpr,5*this.dpr),startAxis:l.AxisType.Vertical,constraint:l.ConstraintType.FixedColumnCount,constraintCount:2,alignmentType:l.AlignmentType.UpperCenter})},PicaExploreListDetailPanel.prototype.onSelectItemHandler=function(e,i){e.checkPointer(i)},PicaExploreListDetailPanel}(Phaser.GameObjects.Container),_=function(e){function ChapterGridLayout(i,n,a,s,o){var h=e.call(this,i,0,0,o)||this;return h.items=[],h.dpr=s,h.setSize(n,a),h}return f(ChapterGridLayout,e),ChapterGridLayout.prototype.setItems=function(e){for(var i=0,n=this.items;i<n.length;i++){(s=n[i]).visible=!1}for(var a=0;a<e.length;a++){var s=void 0;a<this.items.length?s=this.items[a]:(s=new m.PicaChapterLevelClue(this.scene,this.dpr,43*this.dpr,43*this.dpr),this.add(s),this.items.push(s)),s.visible=!0,s.setItemData(e[a])}this.Layout()},ChapterGridLayout.prototype.checkPointer=function(e){for(var i=0,n=this.items;i<n.length;i++){var a=n[i];a.visible&&o.Tool.checkPointerContains(a,e)&&a.showTips()}},ChapterGridLayout}(l.GridLayoutGroup)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaExploreListBottomPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaExploreListBottomPanel(i,n,a,s,o){var h=e.call(this,i,s,o)||this;return h.chapterItems=[],h.curChapterID=0,h.unlockChapterID=0,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h}return c(PicaExploreListBottomPanel,e),PicaExploreListBottomPanel.prototype.resize=function(e,i){this.setSize(e,i),this.leftButton.x=.5*-this.width+48*this.dpr,this.rightButton.x=.5*this.width-48*this.dpr},PicaExploreListBottomPanel.prototype.refreshMask=function(){for(var e=0,i=this.chapterItems;e<i.length;e++){i[e].refreshMask()}},PicaExploreListBottomPanel.prototype.setChapterDatas=function(e){this.chapterProDatas=e,this.onChapterProHandler(e.nextChapterId)},PicaExploreListBottomPanel.prototype.setHandler=function(e){this.send=e},PicaExploreListBottomPanel.prototype.setChapterProData=function(){if(this.chapterProDatas)for(var e=this.chapterProDatas.chapters,i=this.curChapterID-2,n=0;n<5;n++){var a=this.chapterItems[n];if(i>=1)if(i<=e.length){var s=e[i-1];a.setChapterData(s),-1!==s.progress&&(this.unlockChapterID=s.chapterId)}else a.setChapterData(void 0);else a.setChapterData(void 0);i+=1}},PicaExploreListBottomPanel.prototype.init=function(){this.bg=this.scene.make.image({key:h.d.explorelog,frame:"explore_nav_bg"}),this.bg.displayWidth=this.width,this.leftButton=new s.Button(this.scene,h.d.explorelog,"explore_switch_left"),this.rightButton=new s.Button(this.scene,h.d.explorelog,"explore_switch_right"),this.leftButton.on(s.ClickEvent.Tap,this.onLeftClickHandler,this),this.rightButton.on(s.ClickEvent.Tap,this.onRightClickHandler,this),this.add([this.bg,this.leftButton,this.rightButton]),this.createChapterItems(),this.resize(this.width,this.bg.height)},PicaExploreListBottomPanel.prototype.createChapterItems=function(){for(var e,i=16*this.dpr,n=-91*this.dpr,a=0;a<5;a++){var s=2===a,o=new f(this.scene,this.dpr,this.zoom,s);o.setHandler(new l.Handler(this,this.onChapterProHandler)),0!==a&&(n+=.5*o.width+i+(e?.5*e.width:.5*o.width)),o.x=n,this.chapterItems.push(o),e=o}this.add(this.chapterItems)},PicaExploreListBottomPanel.prototype.onLeftClickHandler=function(){var e=this.curChapterID;1!==e&&(--e<1&&(e=1),this.onChapterProHandler(e))},PicaExploreListBottomPanel.prototype.onRightClickHandler=function(){var e=this.curChapterID;e!==this.unlockChapterID&&(e++,this.chapterProDatas||(e=1),e>this.unlockChapterID&&(e=this.unlockChapterID),this.onChapterProHandler(e))},PicaExploreListBottomPanel.prototype.onChapterProHandler=function(e){this.curChapterID!==e&&(this.curChapterID=e,this.setChapterProData(),this.send&&this.send.runWith(["chapterdata",e]))},PicaExploreListBottomPanel}(Phaser.GameObjects.Container),f=function(e){function ChapterItemProgress(i,n,a,s){var o=e.call(this,i,0,0,!1)||this;return o.proValue=0,o.unlock=!1,o.dpr=n,o.zoom=a,o.isZoom=s,o.init(),o.setZoom(s),o}return c(ChapterItemProgress,e),ChapterItemProgress.prototype.setChapterData=function(e){this.chapterProData=e,e?(-1===this.chapterProData.progress?(this.unlock=!1,this.lockImg.visible=!0,this.finishImg.visible=!1,this.levelTex.visible=!1,this.setProgress(0)):(this.unlock=!0,100===e.progress?this.finishImg.visible=!0:this.finishImg.visible=!1,this.lockImg.visible=!1,this.levelTex.visible=!0,this.setProgress(e.progress/100)),this.levelTex.text=e.chapterId+""):(this.lockImg.visible=!1,this.setProgress(0),this.finishImg.visible=!1,this.unlock=!1,this.levelTex.visible=!1)},ChapterItemProgress.prototype.setProgress=function(e){var i=360*e-90;this.barmask.clear(),this.barmask.fillStyle(16777215),this.barmask.slice(0,0,43*this.dpr/this.zoom,Phaser.Math.DegToRad(-90),Phaser.Math.DegToRad(i),!1),this.barmask.fillPath(),this.proValue=e},ChapterItemProgress.prototype.refreshMask=function(){var e=this.getWorldTransformMatrix();this.barmask.setPosition(e.tx,e.ty)},ChapterItemProgress.prototype.destroy=function(){e.prototype.destroy.call(this),this.barmask.destroy()},ChapterItemProgress.prototype.setZoom=function(e){e?(this.bg.setFrame("explore_sequence_select_bottom"),this.lightbg.setFrame("explore_sequence_select_schedule"),this.topbg.setFrame("explore_sequence_select_top"),this.finishImg.setFrame("explore_sequence_uncheck_big"),this.levelTex.setFontSize(24*this.dpr),this.setSize(this.bg.width,this.bg.height)):(this.bg.setFrame("explore_sequence_uncheck_bottom"),this.lightbg.setFrame("explore_sequence_uncheck_schedule"),this.topbg.setFrame("explore_sequence_uncheck_top"),this.finishImg.setFrame("explore_sequence_uncheck_small"),this.levelTex.setFontSize(16*this.dpr),this.setSize(this.bg.width,this.bg.height)),this.enable=!1,this.enable=!0},ChapterItemProgress.prototype.setHandler=function(e){this.send=e},ChapterItemProgress.prototype.init=function(){this.bg=this.scene.make.image({key:h.d.explorelog,frame:"explore_sequence_uncheck_bottom"}),this.lightbg=this.scene.make.image({key:h.d.explorelog,frame:"explore_sequence_uncheck_schedule"}),this.topbg=this.scene.make.image({key:h.d.explorelog,frame:"explore_sequence_uncheck_top"}),this.levelTex=this.scene.make.text({style:l.UIHelper.whiteStyle(this.dpr,16)}).setOrigin(.5),this.levelTex.setFontStyle("bold"),this.finishImg=this.scene.make.image({key:h.d.explorelog,frame:"explore_sequence_uncheck_small"}),this.lockImg=this.scene.make.image({key:h.d.explorelog,frame:"explore_switch_lock"}),this.finishImg.y=.5*this.height,this.barmask=this.scene.make.graphics(void 0,!1),this.lightbg.mask=this.barmask.createGeometryMask(),this.add([this.bg,this.lightbg,this.topbg,this.levelTex,this.finishImg,this.lockImg]),this.setSize(this.bg.width,this.bg.height),this.on(s.ClickEvent.Tap,this.onClickHandler,this),this.finishImg.visible=!1,this.lockImg.visible=!1},ChapterItemProgress.prototype.onClickHandler=function(){this.unlock&&this.send&&this.send.runWith(this.chapterProData.chapterId)},ChapterItemProgress}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaExploreListLevelPanel",(function(){return _}));var a,s=n(789),o=n(790),h=n(0),l=n(788),c=n(2),m=n(814),f=n(791),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaExploreListLevelPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.levelItems=[],h.addHei=0,h.posValue=0,h.topHeight=0,h.bottomHeight=0,h.powerValue=0,h.scrollToIndex=-1,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h}return g(PicaExploreListLevelPanel,e),PicaExploreListLevelPanel.prototype.resize=function(e,i){this.setSize(e,i),this.topbg.x=0,this.topbg.y=.5*-this.height+.5*this.topbg.height-this.topHeight,this.titlebg.x=0,this.titlebg.y=.5*-this.height+.5*this.titlebg.height,this.titleTex.x=this.titlebg.x,this.titleTex.y=this.titlebg.y;var n=i-this.titlebg.height-15*this.dpr;this.captorScroll.resetSize(e,n),this.captorScroll.x=0,this.captorScroll.y=.5*this.height-.5*n,this.refreshMask()},PicaExploreListLevelPanel.prototype.refreshMask=function(){this.captorScroll.refreshMask()},PicaExploreListLevelPanel.prototype.setHandler=function(e){this.send=e},PicaExploreListLevelPanel.prototype.setTopAndBottomHeight=function(e,i){this.topHeight=e,this.bottomHeight=i},PicaExploreListLevelPanel.prototype.setCaptoreResult=function(e,i){this.chapterResult=e;var n=e.chapter,a=e.lock,s="zh-CN"!==h.i18n.language?n.chapterId+"":c.ChineseUnit.numberToChinese(n.chapterId,!0);this.titleTex.text=h.i18n.t("explore.chaptertitle",{name:s}),this.captorScroll.clearItems(!1),this.setForwardDatas(e.chapter,a),a||this.setLevelDatas(e.levels,i),this.captorScroll.Sort(),this.posValue=this.captorScroll.mRightBound,this.scrollToIndex=-1,a?this.captorScroll.setEnable(!1):(this.captorScroll.setEnable(!0),this.scrollToIndex=i-e.levels[0].levelId,this.setIndexedLayout(this.scrollToIndex))},PicaExploreListLevelPanel.prototype.setLevelDatas=function(e,i){for(var n=0,a=this.levelItems;n<a.length;n++){(o=a[n]).visible=!1}for(var s=0;s<e.length;s++){var o=void 0;s<this.levelItems.length?o=s===e.length-1?this.finalItem:this.levelItems[s]:(s===e.length-1?this.finalItem?o=this.finalItem:(o=2===e[s].type?new q(this.scene,this.dpr):new S(this.scene,this.dpr),this.finalItem=o):(o=new S(this.scene,this.dpr),this.levelItems.push(o)),o.setHandler(new h.Handler(this,this.onChapterLevelHandler))),this.captorScroll.addItem(o),o.visible=!0;var l=e[s],c=l.id>i;o.setLevelData(l,c)}},PicaExploreListLevelPanel.prototype.setForwardDatas=function(e,i){this.forewordItem||(this.forewordItem=new T(this.scene,this.dpr),this.forewordItem.on(l.ClickEvent.Tap,this.onForewordClickHandler,this)),this.forewordItem.setCaptoreData(e),this.captorScroll.addItem(this.forewordItem),i&&(this.lockItem=new j(this.scene,this.dpr),this.lockItem.setHandler(new h.Handler(this,this.onChapterLockHandler)),this.captorScroll.addItem(this.lockItem),this.lockItem.setLevelData(e,!1))},PicaExploreListLevelPanel.prototype.setPowerValue=function(e){this.powerValue=e},PicaExploreListLevelPanel.prototype.init=function(){var e=this;this.topbg=this.scene.make.image({key:"explore_mask"}),this.titlebg=this.scene.make.image({key:o.d.explorelog,frame:"explore_title"}),this.titleTex=this.scene.make.text({style:h.UIHelper.whiteStyle(this.dpr,18)}).setOrigin(.5),this.titleTex.setFontStyle("bold");var i=this.height-this.titlebg.height-15*this.dpr;this.captorScroll=new l.GameScroller(this.scene,{x:0,y:0,width:this.width,height:i,zoom:this.zoom,dpr:this.dpr,align:2,orientation:0,space:10*this.dpr,mask:!1,valuechangeCallback:function(i){e.onScrollValueChange(i)},cellupCallBack:function(i){e.onScrollClickHandler(i)}}),this.add([this.captorScroll,this.topbg,this.titlebg,this.titleTex]),this.resize(this.width,this.height),this.topbg.visible=!1},PicaExploreListLevelPanel.prototype.setIndexedLayout=function(e){var i=this.captorScroll.mLeftBound,n=this.captorScroll.mRightBound,a=n;this.chapterResult.levels;if(e<this.chapterResult.levels.length-1){var s=(this.levelItems[e].height+10*this.dpr)*(e+2)+this.forewordItem.height;a=s<this.captorScroll.height?n:n-(s-this.captorScroll.height)}else this.finalItem,a=i;this.captorScroll.setValue(a)},PicaExploreListLevelPanel.prototype.onScrollClickHandler=function(e){e instanceof T&&this.onForewordClickHandler()},PicaExploreListLevelPanel.prototype.onScrollValueChange=function(e){e<this.posValue-20*this.dpr?(this.send&&this.send.runWith(["move",!0]),this.topbg.visible=!0):this.send&&(this.send.runWith(["move",!1]),this.topbg.visible=!1);for(var i=0,n=this.levelItems;i<n.length;i++){n[i].refreshMask()}},PicaExploreListLevelPanel.prototype.onForewordClickHandler=function(){this.send&&this.send.runWith(["foreword",this.chapterResult])},PicaExploreListLevelPanel.prototype.onChapterLevelHandler=function(e){e.roomId;this.send&&this.send.runWith(["roomid",e])},PicaExploreListLevelPanel.prototype.onChapterLockHandler=function(e,i){},PicaExploreListLevelPanel}(Phaser.GameObjects.Container),T=function(e){function ForewordChapterItem(i,n){var a=e.call(this,i,0,0,!1)||this;return a.dpr=n,a.init(),a}return g(ForewordChapterItem,e),ForewordChapterItem.prototype.setCaptoreData=function(e){this.captoreData=e;var i=h.Url.getOsdRes(e.texturePath+"_"+this.dpr+"x.png");this.icon.load(i)},ForewordChapterItem.prototype.init=function(){var e=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_total"});this.setSize(e.width,e.height);var i=this.scene.make.text({text:h.i18n.t("explore.foreword"),style:h.UIHelper.whiteStyle(this.dpr,11)}).setOrigin(.5);i.setFontStyle("bold"),i.x=-3*this.dpr,i.y=.5*-this.height+23*this.dpr,this.icon=new s.DynamicImage(this.scene,0,0),this.add([e,i,this.icon])},ForewordChapterItem}(s.ButtonEventDispatcher),x=function(e){function ChapterLevelBaseItem(i,n){var a=e.call(this,i)||this;return a.unlock=!1,a.dpr=n,a.init(),a}return g(ChapterLevelBaseItem,e),ChapterLevelBaseItem.prototype.refreshMask=function(){},ChapterLevelBaseItem.prototype.setLevelData=function(e,i){this.chapterData=e,this.unlock=!i},ChapterLevelBaseItem.prototype.setHandler=function(e){this.send=e},ChapterLevelBaseItem.prototype.init=function(){},ChapterLevelBaseItem}(Phaser.GameObjects.Container),S=function(e){function ChapterLevelItem(i,n){var a=e.call(this,i,n)||this;return a.clueItms=[],a}return g(ChapterLevelItem,e),ChapterLevelItem.prototype.refreshMask=function(){this.starProgress.refreshMask()},ChapterLevelItem.prototype.setLevelData=function(i,n){e.prototype.setLevelData.call(this,i,n);for(var a=0,s=this.clueItms;a<s.length;a++){s[a].visible=!1}this.levelTex.text=i.id+"",this.leftLine.x=this.levelTex.x-.5*this.leftLine.width-.5*this.levelTex.width-2*this.dpr,this.rightLine.x=this.levelTex.x+.5*this.rightLine.width+.5*this.levelTex.width+2*this.dpr;var o=this.getProgressValue(i.progress);this.starProgress.setProgress(o,500);var l=h.Url.getOsdRes(i.texturePath+"_"+this.dpr+"x.png");if(this.icon.load(l),this.nameTex.text=i.name,this.energyImg.setText("-"+i.costEnergy),this.lockimg.visible=n,this.icon.visible=!n,n)this.unlockTex.visible=!0,this.unlockTex.text=h.i18n.t("explore.unlock"),this.openButton.setFrameNormal("butt_gray"),this.openButton.setTextStyle(h.UIHelper.whiteStyle(this.dpr,13)),this.energyImg.setTextStyle(h.UIHelper.blackStyle(this.dpr,13));else{this.unlockTex.visible=!1,this.openButton.setFrameNormal("yellow_btn_normal"),this.openButton.setTextStyle(h.UIHelper.brownishStyle(this.dpr,13)),this.energyImg.setTextStyle(h.UIHelper.brownishStyle(this.dpr,13));var c=Math.floor(i.progress/100);this.setClueData(i.clueItems,c)}},ChapterLevelItem.prototype.setClueData=function(e,i){for(var n=0,a=this.clueItms;n<a.length;n++){(l=a[n]).visible=!1}if(e){for(var s=0;s<e.length;s++){var h=e[s],l=void 0;s<this.clueItms.length?l=this.clueItms[s]:((l=new m.PicaChapterLevelClue(this.scene,this.dpr,43*this.dpr,43*this.dpr)).enable=!0,this.clueItms.push(l),this.add(l)),l.visible=!0,h.star>i?(l.setTexture(o.d.explorelog,"explore_unknown_clue"),l.enable=!1):(l.setItemData(h),l.enable=!0)}this.setLayoutItems(e.length)}},ChapterLevelItem.prototype.setLayoutItems=function(e){var i=.5*this.width-94*this.dpr,n=-15*this.dpr;if(1===e)this.clueItms[0].x=i,this.clueItms[0].y=n;else for(var a=42*this.dpr,s=16*this.dpr,o=i-.5*(a+s),h=0;h<2;h++){var l=this.clueItms[h];l.x=o,l.y=n,o+=a+s}},ChapterLevelItem.prototype.setHandler=function(e){this.send=e},ChapterLevelItem.prototype.init=function(){this.bg=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_checkpoint"}),this.setSize(this.bg.width,this.bg.height);var e=.5*-this.width+85*this.dpr,i=.5*this.width-85*this.dpr,n=.5*-this.height+18*this.dpr;this.levelTex=this.scene.make.text({text:"",style:h.UIHelper.colorStyle("#5885FD",17*this.dpr)}).setOrigin(.5),this.levelTex.setFontStyle("bold"),this.levelTex.y=n,this.levelTex.x=e,this.leftLine=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_explore_chapter_left"}),this.leftLine.x=e-this.leftLine.width,this.leftLine.y=n+2*this.dpr,this.rightLine=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_explore_chapter_right"}),this.rightLine.x=e+this.rightLine.width,this.rightLine.y=this.leftLine.y,this.nameTex=this.scene.make.text({text:"",style:h.UIHelper.colorStyle("#8743B9",14*this.dpr)}).setOrigin(.5),this.nameTex.setFontStyle("bold"),this.nameTex.x=i,this.nameTex.y=n+4*this.dpr,this.starProgress=new s.ProgressMaskBar(this.scene,o.d.explorelog,"explore_star_empty","explore_star_full"),this.starProgress.x=e,this.starProgress.y=n+.5*this.leftLine.height+.5*this.starProgress.height+5*this.dpr,this.iconbg=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_scene_bg"}),this.iconbg.x=e,this.iconbg.y=this.starProgress.y+.5*this.starProgress.height+.5*this.iconbg.height+5*this.dpr,this.icon=new s.DynamicImage(this.scene,this.iconbg.x,this.iconbg.y),this.lockimg=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_scene_lock"}),this.lockimg.x=this.iconbg.x,this.lockimg.y=this.iconbg.y,this.unlockTex=this.scene.make.text({style:h.UIHelper.blackStyle(this.dpr,11)}).setOrigin(0),this.unlockTex.setWordWrapWidth(106*this.dpr,!0),this.unlockTex.x=i-53*this.dpr,this.unlockTex.y=n+20*this.dpr;this.openButton=new l.NineSliceButton(this.scene,0,0,88*this.dpr,32*this.dpr,o.d.uicommon,"yellow_btn_normal",h.i18n.t("explore.open"),this.dpr,1,h.UIHelper.button(this.dpr)),this.openButton.setTextStyle(h.UIHelper.brownishStyle(this.dpr,13)),this.openButton.setFontStyle("bold"),this.openButton.setTextOffset(-15*this.dpr,0),this.openButton.x=i,this.openButton.y=.5*this.height-.5*this.openButton.height-24*this.dpr,this.openButton.on(l.ClickEvent.Tap,this.onClickHandler,this),this.energyImg=new f.ImageValue(this.scene,43*this.dpr,15*this.dpr,o.d.uicommon,"explore_physical_icon",this.dpr,h.UIHelper.brownishStyle(this.dpr,14)),this.energyImg.x=14*this.dpr,this.energyImg.setOffset(-4*this.dpr,0),this.energyImg.setLayout(1),this.energyImg.setText(""),this.openButton.add(this.energyImg),this.add([this.bg,this.leftLine,this.rightLine,this.levelTex,this.nameTex,this.starProgress,this.iconbg,this.icon,this.lockimg,this.unlockTex,this.openButton])},ChapterLevelItem.prototype.getProgressValue=function(e){var i=Math.floor(e/100),n=75.75*i+30.3*i;return(n=n<0?0:n)+Math.floor(e%100)/100*75.75},ChapterLevelItem.prototype.onClickHandler=function(){this.unlock&&this.send&&this.send.runWith([this.chapterData])},ChapterLevelItem}(x),j=function(e){function ChapterLevelLockItem(i,n){return e.call(this,i,n)||this}return g(ChapterLevelLockItem,e),ChapterLevelLockItem.prototype.setLevelData=function(i,n){e.prototype.setLevelData.call(this,i,n),this.rightTex.text=h.i18n.t("explore.unlocktips",{name:i.requiredPlayerLevel})},ChapterLevelLockItem.prototype.init=function(){this.bg=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_checkpoint"}),this.setSize(this.bg.width,this.bg.height);var e=-80*this.dpr,i=80*this.dpr,n=.5*-this.height+23*this.dpr;this.nameTex=this.scene.make.text({text:h.i18n.t("explore.nextleveltips"),style:h.UIHelper.colorStyle("#8743B9",14*this.dpr)}).setOrigin(.5),this.nameTex.setFontStyle("bold"),this.nameTex.x=0,this.nameTex.y=n,this.leftLine=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_explore_chapter_left"}),this.leftLine.x=.5*-this.nameTex.width-.5*this.leftLine.width-5*this.dpr,this.leftLine.y=n,this.rightLine=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_explore_chapter_right"}),this.rightLine.x=.5*this.nameTex.width+.5*this.rightLine.width+5*this.dpr,this.rightLine.y=this.leftLine.y,this.leftbg=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_scene_bg"}),this.leftbg.x=e,this.leftbg.y=n+.5*this.leftbg.height+20*this.dpr,this.leftTex=this.scene.make.text({text:h.i18n.t("explore.finishchaptertips"),style:h.UIHelper.colorStyle("#8743B9",14*this.dpr)}).setOrigin(.5),this.leftTex.x=this.leftbg.x,this.leftTex.y=this.leftbg.y,this.rightbg=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_scene_bg"}),this.rightbg.x=i,this.rightbg.y=n+.5*this.leftbg.height+20*this.dpr,this.rightTex=this.scene.make.text({text:"",style:h.UIHelper.colorStyle("#8743B9",14*this.dpr)}).setOrigin(.5),this.rightTex.x=this.rightbg.x,this.rightTex.y=this.rightbg.y,this.goButton=new l.NineSliceButton(this.scene,0,0,88*this.dpr,32*this.dpr,o.d.uicommon,"yellow_btn_normal",h.i18n.t("task.go"),this.dpr,1,h.UIHelper.button(this.dpr)),this.goButton.setTextStyle(h.UIHelper.brownishStyle(this.dpr,13)),this.goButton.setFontStyle("bold"),this.goButton.on(l.ClickEvent.Tap,this.onGoClickHandler,this),this.goButton.x=.5*-this.goButton.width-30*this.dpr,this.goButton.y=.5*this.height-10*this.dpr,this.finishButton=new l.NineSliceButton(this.scene,0,0,88*this.dpr,32*this.dpr,o.d.uicommon,"yellow_btn_normal",h.i18n.t("explore.finish"),this.dpr,1,h.UIHelper.button(this.dpr)),this.finishButton.setTextStyle(h.UIHelper.brownishStyle(this.dpr,13)),this.finishButton.setFontStyle("bold"),this.finishButton.on(l.ClickEvent.Tap,this.onFinishClickHandler,this),this.finishButton.x=.5*this.finishButton.width+30*this.dpr,this.finishButton.y=.5*this.height-10*this.dpr,this.finishButton.visible=!1,this.goButton.visible=!1,this.add([this.bg,this.leftLine,this.rightLine,this.nameTex,this.leftbg,this.leftTex,this.rightbg,this.rightTex,this.goButton,this.finishButton])},ChapterLevelLockItem.prototype.onGoClickHandler=function(){this.send&&this.send.runWith(["lockgo",this.chapterData])},ChapterLevelLockItem.prototype.onFinishClickHandler=function(){this.send&&this.send.runWith(["lockfinish",this.chapterData])},ChapterLevelLockItem}(x),q=function(e){function ChapterLevelEventuallyItem(i,n){return e.call(this,i,n)||this}return g(ChapterLevelEventuallyItem,e),ChapterLevelEventuallyItem.prototype.setLevelData=function(i,n){e.prototype.setLevelData.call(this,i,n);var a=h.Url.getOsdRes(i.texturePath+"_"+this.dpr+"x.png");this.icon.load(a),n?(this.iconbg2.visible=!1,this.openButton.setFrameNormal("butt_gray"),this.openButton.setTextStyle(h.UIHelper.whiteStyle(this.dpr,13))):(this.iconbg2.visible=!0,this.openButton.setFrameNormal("yellow_btn_normal"),this.openButton.setTextStyle(h.UIHelper.brownishStyle(this.dpr,13)))},ChapterLevelEventuallyItem.prototype.init=function(){var e=10*this.dpr;this.bg=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_end_checkpoint"}),this.setSize(this.bg.width,this.bg.height+2*e),this.bg.y=-e;var i=.5*-this.height+20*this.dpr;this.nameTex=this.scene.make.text({text:h.i18n.t("explore.eventuallytips"),style:h.UIHelper.colorStyle("#8743B9",14*this.dpr)}).setOrigin(.5),this.nameTex.setFontStyle("bold"),this.nameTex.y=i,this.leftLine=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_end_left"}),this.leftLine.y=this.nameTex.y,this.leftLine.x=.5*-this.nameTex.width-.5*this.leftLine.width-10*this.dpr,this.rightLine=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_end_right"}),this.rightLine.y=this.leftLine.y,this.rightLine.x=.5*this.nameTex.width+.5*this.rightLine.width+10*this.dpr,this.iconbg1=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_end_close"}),this.iconbg1.y=4*this.dpr-e,this.iconbg2=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_end_undraw"}),this.iconbg2.y=this.iconbg1.y,this.iconbg3=this.scene.make.image({key:o.d.explorelog,frame:"explore_chapter_end_curtain"}),this.iconbg3.y=this.iconbg2.y,this.icon=new s.DynamicImage(this.scene,0,0),this.icon.y=this.iconbg3.y,this.openButton=new l.NineSliceButton(this.scene,0,0,88*this.dpr,32*this.dpr,o.d.uicommon,"yellow_btn_normal",h.i18n.t("explore.open"),this.dpr,1,h.UIHelper.button(this.dpr)),this.openButton.setTextStyle(h.UIHelper.brownishStyle(this.dpr,13)),this.openButton.setFontStyle("bold"),this.openButton.on(l.ClickEvent.Tap,this.onGoClickHandler,this),this.openButton.x=0,this.openButton.y=.5*this.height-6*this.dpr-2*e,this.add([this.bg,this.iconbg1,this.icon,this.iconbg2,this.iconbg3,this.leftLine,this.rightLine,this.nameTex,this.openButton])},ChapterLevelEventuallyItem.prototype.onGoClickHandler=function(){this.send&&this.unlock&&this.send.runWith(this.chapterData)},ChapterLevelEventuallyItem}(x)},function(e,i,n){"use strict";n.r(i),n.d(i,"BaseHotelGuidePanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(2),l=n(815),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function BaseHotelGuidePanel(i){return e.call(this,i.render)||this}return c(BaseHotelGuidePanel,e),BaseHotelGuidePanel.prototype.show=function(i){e.prototype.show.call(this,i),this.step1()},BaseHotelGuidePanel.prototype.end=function(){this.itemTaskBtn&&this.itemTaskBtn.off(s.ClickEvent.Tap,this.end,this),this.render.emitter.off(l.PicaTaskPanel.PICATASK_CLOSE,this.end,this),e.prototype.end.call(this)},BaseHotelGuidePanel.prototype.step1=function(){var e=this.uiManager.getPanel(h.ModuleName.PICANEWMAIN_NAME).leftPanel;this.taskButton=e.taskButton;var i=this.taskButton.getWorldTransformMatrix();this.guideEffect.createGuideEffect({x:i.tx,y:i.ty}),this.taskButton.on(s.ClickEvent.Tap,this.step2,this)},BaseHotelGuidePanel.prototype.step2=function(){this.render.emitter.on(l.PicaTaskPanel.PICATASK_DATA,this.step3,this)},BaseHotelGuidePanel.prototype.step3=function(e){this.taskButton.off(s.ClickEvent.Tap,this.step2,this),this.render.emitter.off(l.PicaTaskPanel.PICATASK_DATA,this.step3,this),this.render.emitter.on(l.PicaTaskPanel.PICATASK_CLOSE,this.end,this);var i=this.uiManager.getPanel(h.ModuleName.PICATASK_NAME).mainPanel.taskItems[0];i||this.end(),this.itemTaskBtn=i.taskButton;var n=this.itemTaskBtn.getWorldTransformMatrix();this.guideEffect.createGuideEffect({x:i.width,y:n.ty}),this.itemTaskBtn.on(s.ClickEvent.Tap,this.step4,this)},BaseHotelGuidePanel.prototype.step4=function(){this.end()},BaseHotelGuidePanel}(o.BaseGuide)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaTaskMainPanel",(function(){return T}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(1),m=n(845),f=n(803),g=n(815),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),T=function(e){function PicaTaskMainPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.render=h,l.taskItems=[],l.isMoveFinish=!1,l.isFinishGroup=!1,l.setSize(n,a),l.dpr=s,l.zoom=o,l.init(),l}return _(PicaTaskMainPanel,e),PicaTaskMainPanel.prototype.setHandler=function(e){this.send=e},PicaTaskMainPanel.prototype.refreshMask=function(){this.gameScroller.refreshMask(),this.mainItem&&this.mainItem.refreshMask()},PicaTaskMainPanel.prototype.setTaskDatas=function(e,i){if(this.gameScroller.clearItems(!1),this.mainTaskAnimation&&this.mainTaskAnimation.dispose(),!e.id)return this.notaskTip.visible=!0,void(this.gameScroller.visible=!1);if(this.notaskTip.visible=!1,this.gameScroller.visible=!0,this.curTaskItem&&this.curTaskItem.setExtend(!1),this.mainItem||(this.mainItem=new x(this.scene,272*this.dpr,126*this.dpr,this.dpr,this.zoom),this.mainItem.setHandler(new l.Handler(this,this.onRewardHandler))),this.mainItem.setMainTaskData(e,i),this.mainItem.x=0,this.gameScroller.addItem(this.mainItem),this.questType!==i){var n=this.getTaskQuests(e.quests,void 0);this.setTaskItems(n);for(var a=[],s=0,o=this.taskItems;s<o.length;s++){(m=o[s]).visible&&a.push(m)}}else{n=this.getTaskQuests(e.quests,this.taskGroupData.quests);this.setTaskItems(n);a=[];for(var h=0,c=this.taskItems;h<c.length;h++){var m;(m=c[h]).visible&&a.push(m)}if(this.isFinishGroup)this.mainTaskAnimation=new S(this.scene,this.mainItem,a,this.width,this.dpr),this.isMoveFinish&&this.mainTaskAnimation.playIntoAnimation(),this.isFinishGroup=!1;else new j(this.scene,a,this.width,this.dpr).playGoOutAnimation()}this.taskGroupData=e,this.questType=i,this.render.emitter.emit(g.PicaTaskPanel.PICATASK_DATA)},PicaTaskMainPanel.prototype.setTaskDetail=function(e){this.curTaskItem&&e&&this.curTaskItem.questData.id===e.id&&this.curTaskItem.setTaskDetail(e)},PicaTaskMainPanel.prototype.setTaskItems=function(e){for(var i=0,n=this.taskItems;i<n.length;i++){(s=n[i]).visible=!1}for(var a=0;a<e.length;a++){var s=void 0;a<this.taskItems.length?s=this.taskItems[a]:((s=new m.PicaTaskItem(this.scene,this.dpr,this.zoom)).setHandler(new l.Handler(this,this.onTaskItemHandler)),this.taskItems.push(s)),this.gameScroller.addItem(s),s.setTaskData(e[a]),s.visible=!0,s.alpha=1,s.x=0}this.gameScroller.Sort()},PicaTaskMainPanel.prototype.getTaskQuests=function(e,i){for(var n=[],a=0,s=e;a<s.length;a++){var o=s[a];if(o.stage===c.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_PROCESSING||o.stage===c.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED)n.push(o);else if(o.stage===c.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_END&&i)for(var h=0,l=i;h<l.length;h++){var m=l[h];m.id===o.id&&m.stage===c.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED&&n.push(o)}}return n},PicaTaskMainPanel.prototype.playIntoAnimation=function(){this.mainTaskAnimation&&this.mainTaskAnimation.playIntoAnimation()},PicaTaskMainPanel.prototype.playGoOutAnimation=function(){},PicaTaskMainPanel.prototype.moveFinish=function(){this.isMoveFinish=!0,this.mainTaskAnimation&&this.mainTaskAnimation.playIntoAnimation()},PicaTaskMainPanel.prototype.init=function(){var e=this;this.gameScroller=new s.GameScroller(this.scene,{x:0,y:0*this.dpr,width:this.width,height:this.height,zoom:this.zoom,dpr:this.dpr,align:2,orientation:0,space:10*this.dpr,padding:{top:2*this.dpr},selfevent:!0,cellupCallBack:function(i){e.onPointerUpHandler(i)}}),this.itemTips=new o.ItemInfoTips(this.scene,121*this.dpr,46*this.dpr,h.d.uicommon,"tips_bg",this.dpr),this.itemTips.setVisible(!1);var i=this.scene.make.image({key:h.d.uicommon,frame:"task_no"}),n=this.scene.make.text({text:l.i18n.t("task.notasktip"),style:l.UIHelper.whiteStyle(this.dpr)}).setOrigin(.5);n.y=.5*i.height+15*this.dpr,this.notaskTip=this.scene.make.container(void 0),this.notaskTip.add([i,n]),this.notaskTip.y=.5*-this.height+100*this.dpr,this.notaskTip.visible=!1,this.add([this.gameScroller,this.itemTips,this.notaskTip])},PicaTaskMainPanel.prototype.onPointerUpHandler=function(e){if(!(e instanceof x)){var i=!e.extend;e.setExtend(i,!0)}},PicaTaskMainPanel.prototype.onTaskItemHandler=function(e,i){if("extend"===e){var n=i.extend,a=i.item;this.onExtendsHandler(n,a)}else"go"===e?this.send.runWith(["go",i]):"finish"===e?this.send.runWith(["finish",i]):"item"===e&&this.onMaterialItemHandler(i)},PicaTaskMainPanel.prototype.onRewardHandler=function(e){this.send&&this.send.runWith(["reward",e]),this.isFinishGroup=!0},PicaTaskMainPanel.prototype.onExtendsHandler=function(e,i){this.curTaskItem&&this.curTaskItem.setExtend(!1,!1),this.curTaskItem=e?i:null,this.gameScroller.Sort(!0)},PicaTaskMainPanel.prototype.onMaterialItemHandler=function(e){f.PicaItemTipsPanel.Inst.showTips(e,e.itemData)},PicaTaskMainPanel}(Phaser.GameObjects.Container),x=function(e){function MainTaskItem(i,n,a,s,o){var h=e.call(this,i)||this;return h.isFinish=!1,h.isCanRecievd=!0,h.dpr=s,h.zoom=o,h.setSize(n,a),h.init(),h}return _(MainTaskItem,e),MainTaskItem.prototype.refreshMask=function(){},MainTaskItem.prototype.setMainTaskData=function(e,i){this.titleTex.text=e.name,this.taskDes.text=e.des;var n=this.getFinishProgress(e);if(this.rewardRotateImg.visible=!1,this.clearTweens(),this.questType!==i)this.progress.setProgress(n,100),100===n&&this.playRotateTween();else{var a=this.previousProgress,s=2e3*n/100;this.playProgressTween(a,n,100,s)}this.progressTex.text=n+"%",this.isFinish=100===n,this.previousProgress=n,this.mainData=e;var o=l.Url.getOsdRes(e.reward.texturePath);this.rewardsImg.load(o,this,(function(){})),this.questType=i},MainTaskItem.prototype.setHandler=function(e){this.send=e},MainTaskItem.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearTweens()},MainTaskItem.prototype.clearTweens=function(){this.tween&&(this.tween.stop(),this.tween.remove(),this.tween=void 0),this.intervalTimer&&(clearInterval(this.intervalTimer),this.intervalTimer=void 0)},MainTaskItem.prototype.init=function(){this.bg=new s.NineSlicePatch(this.scene,0,0,this.width,this.height,h.d.uicommon,"task_chapter_bg",{left:8*this.dpr,top:8*this.dpr,right:8*this.dpr,bottom:8*this.dpr}),this.titleCon=this.scene.make.container(void 0,!1),this.titleCon.y=.5*-this.height+21*this.dpr;var e=this.scene.make.image({key:h.d.uicommon,frame:"task_chapter_title_left"}),i=this.scene.make.image({key:h.d.uicommon,frame:"task_chapter_title_right"}),n=this.scene.make.image({key:h.d.uicommon,frame:"task_chapter_title_middle"});n.y=-5*this.dpr,e.x=.5*-n.width-.5*e.width+7*this.dpr,i.x=.5*n.width+.5*i.width-7*this.dpr,this.titleTex=this.scene.make.text({text:"",style:{fontSize:12*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#FFF6CA"}}).setOrigin(.5),this.titleTex.setFontStyle("bold"),this.titleTex.y=n.y,this.titleCon.add([e,n,i,this.titleTex]),this.taskDes=this.scene.make.text({x:.5*-this.width+12*this.dpr,y:-2*this.dpr,text:"",style:{fontSize:12*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#8C6003"}}).setOrigin(0,.5),this.taskDes.setWordWrapWidth(160*this.dpr,!0);var a=this.scene.make.image({key:h.d.uicommon,frame:"task_chapter_gift_bg"});a.x=.5*this.width-10*this.dpr-.5*a.width,a.y=10*this.dpr;var c=new o.ButtonEventDispatcher(this.scene,0,0);c.setSize(a.width,a.height),c.enable=!0,c.on(s.ClickEvent.Tap,this.onReceiveAwardHandler,this),c.x=a.x,c.y=a.y,this.rewardRotateImg=this.scene.make.image({key:h.d.uicommon,frame:"task_chapter_gift_bg1"}),this.rewardRotateImg.x=a.x,this.rewardRotateImg.y=a.y,this.rewardRotateImg.visible=!1,this.rewardsImg=new o.DynamicImage(this.scene,0,0),this.rewardsImg.x=a.x,this.rewardsImg.y=a.y,this.rewardsImg.scale=this.dpr/this.zoom;var m={width:153*this.dpr,height:11*this.dpr,correct:0};this.progress=new o.ProgressThreeBar(this.scene,h.d.uicommon,["task_chapter_progress_bott_left","task_chapter_progress_bott_middle","task_chapter_progress_bott_right"],["task_chapter_progress_top_left","task_chapter_progress_top_middle","task_chapter_progress_top_right"],void 0,m,m),this.progress.x=.5*-this.width+.5*this.progress.width+15*this.dpr,this.progress.y=34*this.dpr,this.progressTex=this.scene.make.text({x:this.progress.x,y:this.progress.y+15*this.dpr,text:"",style:{fontSize:12*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#794400"}}).setOrigin(.5),this.add([this.bg,this.titleCon,this.taskDes,this.progress,this.progressTex,a,this.rewardRotateImg,this.rewardsImg,c])},MainTaskItem.prototype.onReceiveAwardHandler=function(){this.isFinish&&!this.mainData.rewardsReceived&&this.isCanRecievd?this.send&&this.send.runWith([this.mainData.id]):f.PicaItemTipsPanel.Inst.showTips(this.rewardsImg,this.mainData.reward)},MainTaskItem.prototype.getFinishProgress=function(e){return e.progress<0?0:e.progress},MainTaskItem.prototype.playProgressTween=function(e,i,n,a){var s=this;if(this.scene){this.isCanRecievd=!1;var o=this.scene.tweens.addCounter({from:e,to:i,ease:"Linear",duration:a,onUpdate:function(e,i){if(!s.scene)return o.stop(),void o.remove();var a=i.value;s.progress.setProgress(a,n),s.progressTex.text=Math.floor(1e3*a/n)/10+"%"},onComplete:function(){o.stop(),i===n&&s.playRotateTween()}});this.tween=o}},MainTaskItem.prototype.playRotateTween=function(){var e=this;this.scene&&(this.intervalTimer&&clearInterval(this.intervalTimer),this.rewardRotateImg.visible=!0,this.isCanRecievd=!0,this.intervalTimer=setInterval((function(){e.scene?e.rewardRotateImg.rotation+=.1:e.intervalTimer&&clearInterval(e.intervalTimer)}),30))},MainTaskItem}(Phaser.GameObjects.Container),S=function(){function MainTaskAnimation(e,i,n,a,s){this.listPosY=[],this.tempItems=[],this.itemTweens=[],this.isDispose=!1,this.indexed=-1,this.scene=e,this.mainItem=i,this.taskItems=n,this.width=a,this.dpr=s,this.setItemLayout()}return MainTaskAnimation.prototype.playIntoAnimation=function(){var e=this;this.mainItem.refreshMask(),this.playMoveX(this.mainItem,this.mainItem.x,0,!1),setTimeout((function(){e.mainItem.refreshMask(),e.playNextAnimation()}),300)},MainTaskAnimation.prototype.dispose=function(){if(!this.isDispose){for(var e=0,i=this.itemTweens;e<i.length;e++){var n=i[e];n.stop(),n.remove()}this.tempItems.length=0,this.taskItems.length=0,this.itemTweens.length=0,this.mainItem=void 0,this.taskItems=void 0,this.tempItems=void 0,this.isDispose=!0}},MainTaskAnimation.prototype.setItemLayout=function(){this.mainItem.x=-this.width-10*this.dpr;for(var e=0,i=this.taskItems;e<i.length;e++){var n=i[e];n.x=-this.width-10*this.dpr,this.listPosY.push(n.y)}},MainTaskAnimation.prototype.playNextAnimation=function(){if(!this.isDispose&&0!==this.taskItems.length){-1===this.indexed?this.indexed=this.taskItems.length-1:this.indexed--;var e=this.taskItems[this.indexed];e.y=this.listPosY[0],e.alpha=0,this.tempItems.push(e),this.playMoveX(e,e.x,0,!0),this.playAlpha(e,0,1,"Cubic.easeIn")}},MainTaskAnimation.prototype.playMoveX=function(e,i,n,a){var s=this;if(!this.isDispose){var o=this.scene.tweens.add({targets:e,x:{from:i,to:n},ease:"Linear",duration:300,onComplete:function(){o.stop(),o.remove(),s.removeTween(o),a&&(s.indexed>0?s.playMoveY():s.dispose())}});this.itemTweens.push(o)}},MainTaskAnimation.prototype.playAlpha=function(e,i,n,a){var s=this;if(!this.isDispose){var o=this.scene.tweens.add({targets:e,alpha:{from:i,to:n},ease:a,duration:250,onComplete:function(){o.stop(),o.remove(),s.removeTween(o)}});this.itemTweens.push(o)}},MainTaskAnimation.prototype.playMoveY=function(){var e=this;if(!this.isDispose){var i=this.listPosY[this.indexed]-this.listPosY[this.indexed-1],n=0,a=this.scene.tweens.addCounter({from:0,to:i,ease:"Linear",duration:200,onUpdate:function(i,a){for(var s=a.value-n,o=0,h=e.tempItems;o<h.length;o++){h[o].y+=s}n=a.value},onComplete:function(){a.stop(),a.remove(),e.removeTween(a),e.playNextAnimation()}});this.itemTweens.push(a)}},MainTaskAnimation.prototype.removeTween=function(e){if(!this.isDispose){var i=this.itemTweens.indexOf(e);-1!==i&&this.itemTweens.splice(i,1)}},MainTaskAnimation}(),j=function(){function MainTaskGooutAnimation(e,i,n,a){this.listPosY=[],this.tempItems=[],this.isDispose=!1,this.itemTweens=[],this.scene=e,this.taskItems=i,this.width=n,this.dpr=a,this.setItemLayout()}return MainTaskGooutAnimation.prototype.playGoOutAnimation=function(){for(var e=[],i=[],n=[],a=this.taskItems.length-1;a>=0;a--){var s=this.taskItems[a];if(s.questData.stage===c.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_END&&(e.push(s),this.taskItems.splice(a,1),a<this.taskItems.length)){var o=this.taskItems.slice(a,this.taskItems.length);i.push(o),n.push(a)}}var h=this.width+10*this.dpr;if(e.length>0){this.playMoveX(e,0,h),this.playAlpha(e,0,1,"Cubic.easeOut");for(a=0;a<i.length;a++){o=i[a];var l=n[a];this.playMoveGooutY(o,l,300)}}},MainTaskGooutAnimation.prototype.dispose=function(){if(!this.isDispose){for(var e=0,i=this.itemTweens;e<i.length;e++){var n=i[e];n.stop(),n.remove()}this.tempItems.length=0,this.taskItems.length=0,this.itemTweens.length=0,this.taskItems=void 0,this.tempItems=void 0,this.isDispose=!0}},MainTaskGooutAnimation.prototype.setItemLayout=function(){for(var e=0,i=this.taskItems;e<i.length;e++){var n=i[e];this.listPosY.push(n.y)}},MainTaskGooutAnimation.prototype.playMoveX=function(e,i,n){var a=this;if(!this.isDispose){var s=this.scene.tweens.add({targets:e,x:{from:i,to:n},ease:"Linear",duration:300,onComplete:function(){if(s.stop(),s.remove(),a.removeTween(s),a.scene)for(var i=0,n=e;i<n.length;i++){n[i].visible=!1}}});this.itemTweens.push(s)}},MainTaskGooutAnimation.prototype.playAlpha=function(e,i,n,a){var s=this;if(!this.isDispose){var o=this.scene.tweens.add({targets:e,alpha:{from:i,to:n},ease:a,duration:250,onComplete:function(){o.stop(),o.remove(),s.removeTween(o)}});this.itemTweens.push(o)}},MainTaskGooutAnimation.prototype.playMoveGooutY=function(e,i,n){var a=this;if(!this.isDispose){var s=this.listPosY[i+1]-this.listPosY[i],o=0,h=this.scene.tweens.addCounter({from:0,to:s,ease:"Linear",duration:200,delay:n,onUpdate:function(i,n){for(var a=n.value-o,s=0,h=e;s<h.length;s++){h[s].y-=a}o=n.value},onComplete:function(){h.stop(),h.remove(),a.removeTween(h),a.isDispose||a.dispose()}});this.itemTweens.push(h)}},MainTaskGooutAnimation.prototype.removeTween=function(e){if(!this.isDispose){var i=this.itemTweens.indexOf(e);-1!==i&&this.itemTweens.splice(i,1)}},MainTaskGooutAnimation}()},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaTaskItem",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(1),c=n(0),m=n(793),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaTaskItem(i,n,a){var l=e.call(this,i)||this;l.mIsExtend=!1,l.zoom=1,l.dpr=n,l.zoom=a;var m=272*n,f=70*n;l.setSize(m,f),l.content=i.make.container(void 0,!1),l.content.setSize(m,f),l.bg=new s.NineSlicePatch(l.scene,0,0,m,f,h.d.uicommon,"task_list_bg",{left:6*n,top:6*n,bottom:6*n,right:6*n});var g=.5*-m,_=i.make.image({key:h.d.uicommon,frame:"task_head_frame"});return _.x=g+25*n,l.headIcon=new o.DynamicImage(i,_.x,0),l.headIcon.y=-10*n,l.taskName=i.make.text({text:"",style:c.UIHelper.whiteStyle(n)}).setOrigin(0,.5),l.taskName.x=l.headIcon.x+28*n,l.taskName.y=.5*-f+15*n,l.taskDes=i.make.text({text:"",style:c.UIHelper.colorStyle("#FFF449",12*n)}).setOrigin(0),l.taskDes.x=l.taskName.x,l.taskDes.y=l.taskName.y+15*n,l.taskButton=new o.ThreeSliceButton(l.scene,62*n,25*n,h.d.uicommon,c.UIHelper.threeYellowSmall,c.UIHelper.threeYellowSmall,c.i18n.t("task.receive")),l.taskButton.setFontStyle("bold"),l.taskButton.x=.5*m-.5*l.taskButton.width-10*n,l.taskButton.on(s.ClickEvent.Tap,l.onTaskButtonHandler,l),l.arrow=l.scene.make.image({key:h.d.uicommon,frame:"task_list_arrow"}),l.arrow.y=.5*f-.5*l.arrow.height,l.content.add([_,l.headIcon,l.taskName,l.taskDes,l.taskButton,l.arrow]),l.add([l.bg,l.content]),l.setSize(m,f),l}return f(PicaTaskItem,e),PicaTaskItem.prototype.setTaskData=function(e){this.questData=e,this.taskName.text=e.name+this.getProgressStr(e),this.setTextLimit(this.taskName,this.taskName.text,16),this.setTextLimit(this.taskDes,e.des);var i=e.display.texturePath+"_"+this.dpr+"x.png",n=c.Url.getOsdRes(i);this.headIcon.load(n,this,(function(){})),e.stage===l.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_PROCESSING?(this.taskButton.setFrameNormal(c.UIHelper.threeGreenSmall),this.taskButton.setText(c.i18n.t("task.go")),this.taskButton.setTextStyle(c.UIHelper.colorStyle("#022B55",12*this.dpr))):e.stage!==l.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED&&this.questData.stage!==l.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_END||(this.taskButton.setFrameNormal(c.UIHelper.threeYellowSmall),this.taskButton.setText(c.i18n.t("task.receive")),this.taskButton.setTextStyle(c.UIHelper.brownishStyle(this.dpr)))},PicaTaskItem.prototype.setTaskDetail=function(e){this.mExtend&&this.mExtend.setItemData(e)},PicaTaskItem.prototype.setHandler=function(e){this.send=e},PicaTaskItem.prototype.setExtend=function(e,i){void 0===i&&(i=!0),e?(this.openExtend(),i&&this.send&&this.send.runWith(["extend",{extend:!0,item:this}])):(this.closeExtend(),i&&this.send&&this.send.runWith(["extend",{extend:!1,item:this}]))},Object.defineProperty(PicaTaskItem.prototype,"extend",{get:function(){return this.mIsExtend},enumerable:!1,configurable:!0}),PicaTaskItem.prototype.getProgressStr=function(e){if(e.targets)for(var i=0,n=e.targets;i<n.length;i++){var a=n[i];if(a.neededCount)return" ("+a.count+"/"+a.neededCount+")"}return""},PicaTaskItem.prototype.onTaskButtonHandler=function(){this.questData.stage===l.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_PROCESSING?this.send&&this.send.runWith(["go",this.questData]):this.questData.stage===l.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED&&this.send&&this.send.runWith(["finish",this.questData.id])},PicaTaskItem.prototype.openExtend=function(){this.mExtend||(this.mExtend=new _(this.scene,this.width-6*this.dpr,0,this.dpr,this.zoom),this.mExtend.setHandler(this.send),this.add(this.mExtend)),this.mExtend.setItemData(this.questData),this.mExtend.visible=!0,this.height=this.content.height+this.mExtend.height+3*this.dpr,this.content.y=.5*-this.height+.5*this.content.height,this.mExtend.y=this.content.y+.5*this.content.height,this.mIsExtend=!0,this.arrow.visible=!1,this.bg.resize(this.bg.width,this.height)},PicaTaskItem.prototype.closeExtend=function(){this.mExtend&&(this.mExtend.visible=!1),this.height=this.content.height,this.bg.resize(this.bg.width,this.content.height),this.content.y=0,this.mIsExtend=!1,this.arrow.visible=!0},PicaTaskItem.prototype.setTextLimit=function(e,i,n){if(void 0===n&&(n=11),i.length>n)for(var a=130*this.dpr,s=9;s<i.length;s++){var o=i.slice(0,s);if(e.setText(o).width>a){o+="...",e.setText(o);break}}else e.setText(i)},PicaTaskItem}(Phaser.GameObjects.Container),_=function(e){function TaskItemExtend(i,n,a,o,l){var m=e.call(this,i)||this;m.needArr=[],m.rewardArr=[],m.dpr=0,m.zoom=1,m.width=n,m.dpr=o,m.zoom=l,m.bg=new s.NineSlicePatch(m.scene,0,0,n,a,h.d.uicommon,"task_list_unfold_bg",{left:4,top:4,right:4,bottom:4});var f=.5*-n+10*o,g=.5*-a+8*o;m.taskLabel=i.make.text({x:f,y:g,text:c.i18n.t("task.objective"),style:c.UIHelper.colorStyle("#625AC6",12*o)}),m.taskLabel.setFontStyle("bold"),m.taskTex=i.make.text({x:f,y:g+18*o,text:c.i18n.t("task.collect_materials"),style:c.UIHelper.colorStyle("#625AC6",12*o)}),m.taskTex.setWordWrapWidth(n-10*o,!0),m.rewardLabel=i.make.text({x:f,y:g+90*o,text:c.i18n.t("task.rewards"),style:c.UIHelper.colorStyle("#625AC6",12*o)}),m.rewardLabel.setFontStyle("bold");var _=i.make.image({key:h.d.uicommon,frame:"task_reward_divider"});return _.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),_.setPosition(-10*o,g+110*o),m.line=_,m.add([m.bg,m.taskLabel,m.taskTex,m.rewardLabel,_]),m.setSize(n,a),m}return f(TaskItemExtend,e),TaskItemExtend.prototype.setItemData=function(e){var i=0,n=67*this.dpr;this.taskTex.text=this.getTaskTargetText(e),this.createTaskCells(this.needArr,e.targets,!0),i=this.taskTex.y+this.taskTex.height+8*this.dpr,e.targets.length>0&&this.hasTargetWithDisplay(e)&&(i+=.5*n,this.sortItem(this.needArr,i),i+=.5*n+15*this.dpr),this.rewardLabel.y=i,i+=this.rewardLabel.height+5*this.dpr,this.line.y=i,i+=5*this.dpr,this.createTaskCells(this.rewardArr,e.rewards,!1),i+=.5*n,this.sortItem(this.rewardArr,i),this.height=i+.5*n+10*this.dpr,this.bg.resize(this.width,this.height),this.bg.y=.5*this.height},TaskItemExtend.prototype.sortItem=function(e,i){void 0===i&&(i=0);for(var n=.5*-this.width+10*this.dpr,a=e,s=0,o=10*this.dpr,h=0,l=a;h<l.length;h++){var c=l[h];c.x=n+c.width*c.originX+s,c.y=i,s+=c.width+o}},TaskItemExtend.prototype.setHandler=function(e){this.send=e},TaskItemExtend.prototype.createTaskCells=function(e,i,n){void 0===n&&(n=!0);for(var a=0,o=e;a<o.length;a++){(c=o[a]).visible=!1}for(var l=0;l<i.length;l++){var c=void 0;l<e.length?c=e[l]:i[l].texturePath&&((c=new m.ItemButton(this.scene,h.d.uicommon,"bag_icon_common_bg",this.dpr,this.zoom,!0)).on(s.ClickEvent.Tap,this.onTaskCellHandler,this),e.push(c),this.add(c)),c&&(c.visible=!0,c.setItemData(i[l]))}return e},TaskItemExtend.prototype.hasTargetWithDisplay=function(e){for(var i=0,n=e.targets;i<n.length;i++){if(n[i].texturePath)return!0}},TaskItemExtend.prototype.getTaskTargetText=function(e){e.targets;return e.des+this.getProgressStr(e)},TaskItemExtend.prototype.getProgressStr=function(e){if(e.targets)for(var i=0,n=e.targets;i<n.length;i++){var a=n[i];if(a.neededCount)return" ("+a.count+"/"+a.neededCount+")"}return""},TaskItemExtend.prototype.onTaskCellHandler=function(e,i){this.send&&this.send.runWith(["item",i])},TaskItemExtend}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaManorChildPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(816),m=n(791),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaManorChildPanel(i,n,a,s,o,h,l,c,m){var f=e.call(this,i,a,s,o,h,l,m)||this;return f.zoom=c,f.render=n,f}return f(PicaManorChildPanel,e),PicaManorChildPanel.prototype.setManorInfoData=function(e){this.nameTitle.text="某某某某某";var i=2;e.alreadyBuy&&(i=e.myowner?1:3),this.setLayout(i,e)},PicaManorChildPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaManorChildPanel.prototype.create=function(){var i=this;e.prototype.create.call(this);var n=.5*-this.height;this.headbg=this.scene.make.image({key:this.key,frame:"finca_master_head frame"}),this.headbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.headbg.y=n+.5*this.headbg.height+40*this.dpr,this.add(this.headbg),this.headIcon=new o.DynamicImage(this.scene,0,0,this.key,"finca_master_head"),this.add(this.headIcon),this.headIcon.x=this.headbg.x,this.headIcon.y=this.headbg.y;var a=this.headbg.y+.5*this.headbg.height+5*this.dpr;this.nameTitle=this.scene.make.text({x:this.headbg.x,y:a+10*this.dpr,text:"",style:{fontSize:17*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#000000"}}).setOrigin(.5),this.nameTitle.setFontStyle("bold"),this.add(this.nameTitle),this.contentbg=this.scene.make.image({key:this.key,frame:"finca_message_panel"}),this.contentbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.contentbg.y=this.nameTitle.y+.5*this.contentbg.height+30*this.dpr,this.add(this.contentbg),this.contentbg.visible=!1,this.detailText=new s.BBCodeText(this.scene,.5*-this.contentbg.width+20*this.dpr,this.contentbg.y,"",{fontSize:13*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#813D01",align:"left",wrap:{mode:"char",width:240*this.dpr}}).setInteractive().on("areadown",(function(e){l.Logger.getInstance().debug(e)})).on("areaup",(function(e){new m.InputView(i.scene,i.render).show({title:l.i18n.t("manor.eidtnickname"),placeholder:l.i18n.t("manor.nicknameplaceholder"),handler:new l.Handler(i,(function(e){i.sendHandler&&i.sendHandler.runWith([3,e])}))})})),this.detailText.setOrigin(0,.5),this.add(this.detailText),this.detailText.visible=!1,this.detailText.addImage("finca_compile",{key:this.key,frame:"finca_compile",y:3*this.dpr,left:10*this.dpr,right:10*this.dpr}),this.detailText.addImage("iv_coin",{key:h.c.commonKey,frame:"iv_coin",y:-1*this.dpr,left:2*this.dpr,right:5*this.dpr}),this.detailText.addImage("iv_diamond",{key:h.c.commonKey,frame:"iv_diamond",y:-1*this.dpr,left:2*this.dpr,right:5*this.dpr}),this.editorButton=this.createNineButton(130*this.dpr,45*this.dpr,h.c.commonKey,"red_btn",l.i18n.t("manor.editorbtn"),"#ffffff"),this.editorButton.x=.5*-this.editorButton.width-10*this.dpr,this.editorButton.y=.5*this.height-.5*this.editorButton.height-10*this.dpr,this.editorButton.on(String(s.ClickEvent.Tap),this.onEditorButtonHandler,this),this.add(this.editorButton),this.editorButton.visible=!1,this.shopButton=this.createNineButton(130*this.dpr,45*this.dpr,h.c.commonKey,"yellow_btn_normal",l.i18n.t("common.shop"),"#996600"),this.shopButton.x=.5*this.shopButton.width+10*this.dpr,this.shopButton.y=.5*this.height-.5*this.shopButton.height-10*this.dpr,this.shopButton.on(String(s.ClickEvent.Tap),this.onShopButtonHandler,this),this.add(this.shopButton),this.shopButton.visible=!1,this.buyButton=this.createNineButton(181*this.dpr,45*this.dpr,h.c.commonKey,"yellow_btn_normal",l.i18n.t("common.buy"),"#996600"),this.buyButton.y=.5*this.height-.5*this.buyButton.height-10*this.dpr,this.buyButton.on(String(s.ClickEvent.Tap),this.onBuyButtonHandler,this),this.add(this.buyButton),this.buyButton.visible=!1},PicaManorChildPanel.prototype.setLayout=function(e,i){3===e?(this.nameTitle.text=i.ownerName,this.nameTitle.visible=!0,this.detailText.setLineSpacing(20*this.dpr),this.headbg.visible=!0,this.headbg.y=.5*-this.height+80*this.dpr,this.headIcon.y=this.headbg.y,this.nameTitle.y=this.headbg.y+.5*this.headbg.height+16*this.dpr,this.contentbg.y=.5*this.contentbg.height+this.nameTitle.y+.5*this.nameTitle.height+10*this.dpr,this.detailText.y=this.contentbg.y):2===e?(this.nameTitle.text=l.i18n.t("manor.noowner"),this.nameTitle.visible=!0,this.detailText.setLineSpacing(9*this.dpr),this.headbg.visible=!1,this.headIcon.setTexture(this.key,"finca_dereliction_head"),this.headIcon.y=.5*-this.height+68*this.dpr,this.nameTitle.y=this.headIcon.y+.5*this.headIcon.height+16*this.dpr,this.contentbg.y=.5*this.contentbg.height+this.nameTitle.y+.5*this.nameTitle.height+10*this.dpr,this.detailText.y=this.contentbg.y,this.buyButton.y=.5*this.height-.5*this.buyButton.height-22*this.dpr):(this.nameTitle.visible=!1,this.headbg.visible=!0,this.headIcon.setTexture(this.key,"finca_master_head"),this.headIcon.y=this.headbg.y,this.contentbg.y=.5*this.contentbg.height+this.headbg.y+.5*this.headbg.height+10*this.dpr,this.detailText.y=this.contentbg.y,this.detailText.setLineSpacing(14*this.dpr),this.editorButton.y=.5*this.height-.5*this.editorButton.height-22*this.dpr,this.shopButton.y=this.editorButton.y),this.contentbg.visible=!0,this.detailText.visible=!0,this.setButtonActive(e);var n=this.getDetailText(e,i);this.detailText.setText(n)},PicaManorChildPanel.prototype.setButtonActive=function(e){1===e?(this.editorButton.setInteractive(),this.shopButton.setInteractive(),this.buyButton.disInteractive(),this.editorButton.visible=!0,this.shopButton.visible=!0,this.buyButton.visible=!1):2===e?(this.editorButton.disInteractive(),this.shopButton.disInteractive(),this.buyButton.setInteractive(),this.editorButton.visible=!1,this.shopButton.visible=!1,this.buyButton.visible=!0):(this.editorButton.disInteractive(),this.shopButton.disInteractive(),this.buyButton.disInteractive(),this.editorButton.visible=!1,this.shopButton.visible=!1,this.buyButton.visible=!1)},PicaManorChildPanel.prototype.getDetailText=function(e,i){var n="";if(3===e)n=""+l.i18n.t("manor.manorname")+i.manorName+"\n"+l.i18n.t("manor.manorarea")+i.streetName;else if(2===e){var a=i.price.price;n=""+l.i18n.t("manor.manorarea")+i.streetName+"\n"+l.i18n.t("manor.manorstatus")+"[color=#FF0000]"+l.i18n.t("manor.selling")+"[/color]\n"+l.i18n.t("manor.manorprice")+"[img=iv_coin]"+a+"\n"+l.i18n.t("manor.needlevel")+"20级"}else n=""+l.i18n.t("manor.manorname")+i.manorName+"[area=aaaa][img=finca_compile][/area]\n"+l.i18n.t("manor.manorowner")+i.ownerName+"\n"+l.i18n.t("manor.manorarea")+i.streetName;return n},PicaManorChildPanel.prototype.createNineButton=function(e,i,n,a,o,h){var c=new s.NineSliceButton(this.scene,0,0,e,i,n,a,o,this.dpr,this.zoom,l.UIHelper.button(this.dpr));return this.add(c),c.setTextStyle({fontSize:21*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:h}),c.setFontStyle("bold"),c},PicaManorChildPanel.prototype.onEditorButtonHandler=function(){this.sendHandler&&this.sendHandler.runWith([2])},PicaManorChildPanel.prototype.onShopButtonHandler=function(){this.sendHandler&&this.sendHandler.runWith([-1])},PicaManorChildPanel.prototype.onBuyButtonHandler=function(){this.sendHandler&&this.sendHandler.runWith([1])},PicaManorChildPanel}(c.PicaManorBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaManorShopPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(805),m=n(791),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaManorShopPanel(i,n,a,s,o,h,l,c){var m=e.call(this,i,n,a)||this;return m.setSize(s,o),m.dpr=l,m.key=h,m.zoom=c,m.create(),m}return f(PicaManorShopPanel,e),PicaManorShopPanel.prototype.refreshMask=function(){this.shopgride.resetMask()},PicaManorShopPanel.prototype.create=function(){var e=this.width,i=this.height,n=.5*-i;this.bg=new s.NineSlicePatch(this.scene,0,0,e,i,h.c.common3Key,"bg",l.UIHelper.background_w(this.dpr)),this.add(this.bg),this.closeBtn=new s.Button(this.scene,h.c.commonKey,"close"),this.closeBtn.setDisplaySize(28*this.dpr,28*this.dpr),this.closeBtn.setPosition(.5*this.width-8*this.dpr,n+7*this.dpr),this.closeBtn.on(String(s.ClickEvent.Tap),this.onCloseHandler,this),this.add(this.closeBtn),this.titlebg=this.scene.make.image({key:this.key,frame:"tag_single"}),this.add(this.titlebg),this.titlebg.x=.5*-this.width+.5*this.titlebg.width+0*this.dpr,this.titlebg.y=.5*-this.height-.5*this.titlebg.height+14*this.dpr,this.imgtitle=new m.ImageValue(this.scene,135*this.dpr,16*this.dpr,this.key,"house_shop",this.dpr),this.imgtitle.setText(l.i18n.t("manor.manorshop")),this.imgtitle.setFontStyle("bold"),this.imgtitle.setTextStyle({fontSize:15*this.dpr}),this.imgtitle.x=this.titlebg.x-30*this.dpr,this.imgtitle.y=this.titlebg.y,this.add(this.imgtitle),this.secondMenu=new c.SecondaryMenuPanel(this.scene,0,.5*-this.height+46*this.dpr,302*this.dpr,29*this.dpr,this.dpr,this.zoom,{x:0,y:-14*this.dpr,width:this.width-32*this.dpr,height:30*this.dpr,zoom:this.zoom,dpr:this.dpr,space:6*this.dpr,orientation:1,align:2}),this.secondMenu.setHandler(new l.Handler(this,this.onTabButtonHandler)),this.secondMenu.setButtonChangeHandler(new l.Handler(this,(function(e){e.changeNormal(),e.setTextColor("#FE8737")})),new l.Handler(this,(function(e){e.changeDown(),e.setTextColor("#ffffff")}))),this.add(this.secondMenu);var a=302*this.dpr,o=324*this.dpr,f=.5*-a,g=.5*-o-20*this.dpr,_=this.scene.make.graphics(void 0,!1);_.fillStyle(16680759,1),_.fillRoundedRect(f,g,a,o,{tl:0,tr:5*this.dpr,bl:5*this.dpr,br:5*this.dpr}),this.add(_);var T=a-16*this.dpr,x=380*this.dpr,S=12*this.dpr;this.shopgride=this.createGrideTable(0,S,T,x,126*this.dpr,158*this.dpr),this.corfirmButton=this.createNineButton(h.c.commonKey,"yellow_btn_normal",l.i18n.t("common.confirm"),"#996600"),this.corfirmButton.y=.5*this.height-.5*this.corfirmButton.height-15*this.dpr,this.corfirmButton.on(String(s.ClickEvent.Tap),this.onConfirmButtonHandler,this)},PicaManorShopPanel.prototype.setShopCategories=function(e){for(var i=[],n=0,a=e.marketCategory;n<a.length;n++){var o=a[n],h={text:o.category.value,data:o};i.push(h)}this.secondMenu.setCategories(s.TabButton,i,{width:97*this.dpr,height:29*this.dpr,key:this.key,normalFrame:"manor_store_uncheck",downFrame:"manor_store_check",textStyle:{fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#FE8737"},bold:!0})},PicaManorShopPanel.prototype.setShopDatas=function(e){if(e.commodities){var i=e.commodities.sort((function(e,i){var n=e.id.replace(/[^0-9]/gi,""),a=i.id.replace(/[^0-9]/gi,"");return Number(n)>Number(a)?1:-1}));this.shopgride.setItems(i)}},PicaManorShopPanel.prototype.setTitleText=function(e){this.titleText.text=e},PicaManorShopPanel.prototype.setHandler=function(e,i){this.sendHandler=e,this.closeHandler=i},PicaManorShopPanel.prototype.createNineButton=function(e,i,n,a){var o=new s.NineSliceButton(this.scene,0,0,182*this.dpr,47*this.dpr,e,i,n,this.dpr,this.zoom,{left:14*this.dpr,top:14*this.dpr,right:14*this.dpr,bottom:14*this.dpr});return this.add(o),o.setTextStyle({fontSize:21*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:a}),o.setFontStyle("bold"),o},PicaManorShopPanel.prototype.createGrideTable=function(e,i,n,a,o,h){var l=this,c={x:e,y:i,table:{width:n,height:a,columns:2,cellWidth:o,cellHeight:h,reuseCellContainer:!0,tableOX:0*this.dpr,zoom:this.zoom},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&((i=new _(l.scene,0,0,o,h,l.key,l.dpr)).on("buyitem",l.onBuyItemHandler,l),m.add(i)),i.setItemData(n),l.selectedItemData&&l.selectedItemData.id===n.id&&(l.selectedItemData=n,l.selectedItem=i),i}},m=new s.GameGridTable(this.scene,c);return m.layout(),m.on("cellTap",(function(e){e&&l.onSelectItemHandler(e)})),this.add(m),m},PicaManorShopPanel.prototype.onTabButtonHandler=function(e){this.emit("queryProp",1,e.category.key)},PicaManorShopPanel.prototype.onConfirmButtonHandler=function(){this.selectedItemData&&1===this.selectedItemData.manorState&&this.sendHandler&&this.sendHandler.runWith(["usetype",this.selectedItemData.id])},PicaManorShopPanel.prototype.onBuyItemHandler=function(e){var i={id:e.id,quantity:1,category:e.category};this.sendHandler&&this.sendHandler.runWith(["buytype",i])},PicaManorShopPanel.prototype.onSelectItemHandler=function(e){e.select=!0,this.selectedItem&&(this.selectedItem.select=!1),this.selectedItem=e,this.selectedItemData=e.shopData,this.selectedItem.select||(this.selectedItem=void 0,this.selectedItemData=void 0)},PicaManorShopPanel.prototype.onCloseHandler=function(){this.closeHandler&&this.closeHandler.run()},PicaManorShopPanel}(Phaser.GameObjects.Container),_=function(e){function ManorShopItem(i,n,a,c,f,g,_){var T=e.call(this,i,n,a)||this;T.mselect=!1,T.dpr=_,T.key=g,T.setSize(c,f),T.bg=T.scene.make.image({key:g,frame:"manor_store_icon_bg"}),T.add(T.bg),T.nameText=T.scene.make.text({x:0,y:.5*-T.height+15*T.dpr,text:" ",style:{color:"#2B2B2B",fontSize:13*T.dpr,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(.5),T.add(T.nameText),T.icon=new o.DynamicImage(i,0,-20*_,T.key,"floor_01"),T.add(T.icon);var x=T.scene.make.image({key:T.key,frame:"manor_store_price_bg"});return T.imgprice=new m.ImageValue(T.scene,90*_,17*_,h.c.commonKey,"iv_coin",T.dpr),T.imgprice.setLayout(2),T.imgprice.setTextStyle({color:"#000000"}),T.imgprice.addAt(x,0),T.add(T.imgprice),T.tipsText=T.scene.make.text({x:0,y:.5*T.height-20*T.dpr,text:l.i18n.t("manor.owned"),style:{color:"#E33922",fontSize:13*T.dpr,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(.5),T.tipsText.setFontStyle("bold"),T.add(T.tipsText),T.button=new o.ThreeSliceButton(i,73*_,26*_,h.c.common3Key,l.UIHelper.threeRedNormal,l.UIHelper.threeRedNormal,l.i18n.t("manor.using")),T.button.setTextStyle(l.UIHelper.brownishStyle(_)),T.button.y=T.tipsText.y,T.button.on(s.ClickEvent.Tap,T.onButtonHandler,T),T.add(T.button),T.imgprice.y=T.button.y-.5*T.button.height-.5*T.imgprice.height-2*_,T}return f(ManorShopItem,e),ManorShopItem.prototype.setItemData=function(e){var i=this;this.shopData=e,this.setButtonState(e),this.nameText.text=e.name||e.shortName;var n=l.Url.getOsdRes(e.icon);this.icon.load(n,this,(function(){i.icon.scale=i.dpr}))},Object.defineProperty(ManorShopItem.prototype,"select",{get:function(){return this.mselect},set:function(e){this.mselect=e,this.bg.setFrame(e?"store_icon_check":"manor_store_icon_bg")},enumerable:!1,configurable:!0}),ManorShopItem.prototype.setButtonState=function(e){if(2===e.manorState)this.button.visible=!0,this.button.disInteractive(),this.button.setFrameNormal(l.UIHelper.threeGreenNormal,l.UIHelper.threeGreenNormal),this.button.setText(l.i18n.t("manor.using")),this.button.setTextColor(l.Color.black),this.tipsText.visible=!1,this.imgprice.visible=!1;else if(3===e.manorState){this.button.visible=!0,this.button.setInteractive(),this.button.setFrameNormal(l.UIHelper.threeYellowNormal,l.UIHelper.threeYellowNormal),this.button.setText(l.i18n.t("common.buy")),this.button.setTextColor(l.Color.brownish),this.tipsText.visible=!1,this.imgprice.visible=!0;var i=e.price[0];this.imgprice.setFrameValue(i.price+"",h.c.commonKey,l.Coin.getIcon(i.coinType))}else 1===e.manorState&&(this.button.visible=!1,this.button.disInteractive(),this.tipsText.visible=!0,this.imgprice.visible=!1)},ManorShopItem.prototype.onButtonHandler=function(){this.emit("buyitem",this.shopData)},ManorShopItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessChoosePlanPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaBusinessChoosePlanPanel(i,n,a,s,o,h,l,c){var m=e.call(this,i,n,a)||this;return m.dpr=h,m.key=c,m.zoom=l,m.setSize(s,o),m.create(),m}return c(PicaBusinessChoosePlanPanel,e),PicaBusinessChoosePlanPanel.prototype.setPlanData=function(e){this.gridtable.setItems(e);var i=this.gridtable.getCells();if(i){var n=i[0];n&&n.container&&this.onGridSelectHandler(n.container)}},PicaBusinessChoosePlanPanel.prototype.setHandler=function(e,i){this.cancelHandler=e,this.selectHandler=i},PicaBusinessChoosePlanPanel.prototype.resetMask=function(){this.gridtable.resetMask(),this.gameScroll.refreshMask()},PicaBusinessChoosePlanPanel.prototype.create=function(){var e=this,i=(this.height,this.width-29*this.dpr),n=100*this.dpr,a=.5*-this.height+.5*n+10*this.dpr;this.gridtable=this.createGrideTable(0,a,i,n,90*this.dpr,100*this.dpr),this.describleText=this.scene.make.text({x:.5*-this.width+20*this.dpr,y:a+.5*n+10*this.dpr,text:"This industry has great development potential.",style:{fontSize:11*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#0"}}).setOrigin(0),this.describleText.setWordWrapWidth(this.width-45*this.dpr,!0),this.add(this.describleText),this.effectText=this.scene.make.text({x:this.describleText.x,y:this.describleText.y+this.describleText.height+20*this.dpr,text:"55225sadffqwerqwerqwer",style:{fontSize:10*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#0",wordWrap:{width:244*this.dpr,useAdvancedWrap:!0}}}).setOrigin(0),this.add(this.effectText),this.materialTitle=this.scene.make.text({x:this.describleText.x,y:this.effectText.y+this.effectText.height+5*this.dpr,text:l.i18n.t("business_street.material_requirements"),style:{fontSize:11*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#0"}}).setOrigin(0),this.add(this.materialTitle),this.gameScroll=new s.GameScroller(this.scene,{x:0,y:this.materialTitle.y+this.materialTitle.height+22*this.dpr,width:this.width-40*this.dpr,height:60*this.dpr,zoom:this.zoom,dpr:this.dpr,align:2,orientation:1,space:10*this.dpr,cellupCallBack:function(i){e.onMaterialItemHandler(i)}}),this.add(this.gameScroll);var c=new s.NineSliceButton(this.scene,-60*this.dpr,.5*this.height-7*this.dpr,92*this.dpr,34*this.dpr,h.c.commonKey,"red_btn",l.i18n.t("common.cancel"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(c),c.setTextStyle({fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#ffffff"}),c.on(String(s.ClickEvent.Tap),this.onCancelHandler,this);var m=new s.NineSliceButton(this.scene,60*this.dpr,c.y,92*this.dpr,34*this.dpr,h.c.commonKey,"yellow_btn",l.i18n.t("business_street.select"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(m),m.on(String(s.ClickEvent.Tap),this.onSelectHandler,this),m.setTextStyle({fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#996600"}),this.iteminfoTips=new o.ItemInfoTips(this.scene,121*this.dpr,46*this.dpr,h.c.common2Key,"tips_bg",this.dpr),this.iteminfoTips.setVisible(!1),this.add(this.iteminfoTips)},PicaBusinessChoosePlanPanel.prototype.createGrideTable=function(e,i,n,a,o,h){var l=this,c={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:o,cellHeight:h,reuseCellContainer:!0,tableOY:5*this.dpr,zoom:this.zoom},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&(i=new f(l.scene,0,0,o,h,l.key,l.dpr,l.zoom)),i.setData({item:n}),i.setPlanData(n),l.curSelectData&&n===l.curSelectData?i.select=!0:i.select=!1,i}},m=new s.GameGridTable(this.scene,c);return m.layout(),m.on("cellTap",(function(e){e&&l.onGridSelectHandler(e)})),this.add(m),m},PicaBusinessChoosePlanPanel.prototype.onGridSelectHandler=function(e){this.curSelectItem&&(this.curSelectItem.select=!1),e.select=!0;var i=e.palnData;this.gameScroll.clearItems();for(var n=0,a=i.requirements;n<a.length;n++){var s=a[n],o=new g(this.scene,0,0,36*this.dpr,36*this.dpr,this.key,this.dpr,this.zoom);o.setItemData(s),this.gameScroll.addItem(o)}this.gameScroll.Sort(),this.describleText.text=i.des,this.effectText.text=l.i18n.t("business_street.effect")+":"+i.buffDes,this.curSelectItem=e,this.curSelectData=i},PicaBusinessChoosePlanPanel.prototype.onCancelHandler=function(){this.cancelHandler&&this.cancelHandler.run()},PicaBusinessChoosePlanPanel.prototype.onSelectHandler=function(){this.selectHandler&&this.selectHandler.runWith(this.curSelectData.id),this.onCancelHandler()},PicaBusinessChoosePlanPanel.prototype.onMaterialItemHandler=function(e){if(this.iteminfoTips.setVisible(!this.iteminfoTips.visible),this.iteminfoTips&&this.iteminfoTips.visible){var i=e.itemData;this.iteminfoTips.setItemData(i),this.iteminfoTips.setTipsPosition(e,this,10*this.dpr)}},PicaBusinessChoosePlanPanel}(Phaser.GameObjects.Container),f=function(e){function PlanTypeItem(i,n,a,s,h,c,m,f){var g=e.call(this,i,n,a)||this;return g.isSelect=!1,g.dpr=m,g.key=c,g.setSize(s,h),g.bg=g.scene.make.image({key:c,frame:"store_bg"}),g.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),g.add(g.bg),g.storeIcon=new o.DynamicImage(g.scene,0,0),g.storeIcon.setTexture(g.key,"restaurant_icon"),g.storeIcon.setPosition(0,-8*m),g.add(g.storeIcon),g.storeName=g.scene.make.text({x:0,y:g.storeIcon.y+.5*g.storeIcon.height+10*m,text:"Restaurant",style:{color:"#0",fontSize:10*m,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(.5),g.add(g.storeName),g}return c(PlanTypeItem,e),PlanTypeItem.prototype.setPlanData=function(e){var i=this;this.palnData=e;var n=e.icon;""===n&&e.requirements&&e.requirements.length>0&&(n=e.requirements[0].display.texturePath);var a=l.Url.getOsdRes(n);this.storeIcon.load(a,this,(function(){i.storeIcon.displayWidth=46*i.dpr,i.storeIcon.scaleY=i.storeIcon.scaleX})),this.storeName.text=e.name},Object.defineProperty(PlanTypeItem.prototype,"select",{get:function(){return this.isSelect},set:function(e){this.isSelect=e;var i=e?"store_bg_click":"store_bg";this.bg.setFrame(i)},enumerable:!1,configurable:!0}),PlanTypeItem}(Phaser.GameObjects.Container),g=function(e){function MaterialItem(i,n,a,h,c,m,f,g){var _=e.call(this,i,n,a)||this;_.dpr=f,_.key=m,_.setSize(h,c);var T=_.scene.make.image({key:_.key,frame:"item_bg"});return T.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),_.add(T),_.itemIcon=new o.DynamicImage(_.scene,0,0),_.add(_.itemIcon),_.countText=new s.BBCodeText(_.scene,.5*T.width,.5*T.height).setOrigin(1,.5).setFontSize(12*f).setFontFamily(l.Font.DEFULT_FONT),_.add(_.countText),_}return c(MaterialItem,e),MaterialItem.prototype.setItemData=function(e){var i=this;this.itemData=e;var n=l.Url.getOsdRes(e.display.texturePath);this.itemIcon.load(n,this,(function(){i.itemIcon.displayWidth=29*i.dpr,i.itemIcon.scaleY=i.itemIcon.scaleX})),this.countText.text=this.getCountText(e.count,e.neededCount)},MaterialItem.prototype.getCountText=function(e,i){var n=e>=i?"#0054FF":"#FF2B2B";return"[stroke="+n+"][color="+n+"]"+e+"[/color][/stroke]"+("[stroke=#2D2D2D][color=#2D2D2D]/"+i+"[/color][/stroke]")},MaterialItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessPlanPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaBusinessPlanPanel(i,n,a,s,o,h,l,c){var m=e.call(this,i,n,a)||this;return m.dpr=h,m.key=c,m.zoom=l,m.setSize(s,o),m.create(),m}return c(PicaBusinessPlanPanel,e),PicaBusinessPlanPanel.prototype.setRender=function(e){this.render=e},PicaBusinessPlanPanel.prototype.setPlanData=function(e){var i=e.marketPlanPairs,n=""!==e.industryBackground?e.industryBackground:"market_b";this.topbg.setFrame(n),this.describleText.text=e.industryDes,this.planBuffText.text=e.industryBuffDes,this.gridtable.setItems(i)},PicaBusinessPlanPanel.prototype.setHandler=function(e,i){this.cancelHandler=e,this.addPlanHandler=i},PicaBusinessPlanPanel.prototype.resetMask=function(){this.gridtable.resetMask()},PicaBusinessPlanPanel.prototype.create=function(){var e=.5*-this.height,i=253*this.dpr,n=73*this.dpr;this.topbg=new s.NineSlicePatch(this.scene,0,0,i,n,this.key,"market_b",{left:6*this.dpr,top:0*this.dpr,right:6*this.dpr,bottom:0*this.dpr}),this.topbg.y=e+.5*n+10*this.dpr,this.add(this.topbg),this.describleText=this.scene.make.text({x:0,y:this.topbg.y-15*this.dpr,text:"Your store is now at a advantage",style:{fontSize:13*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#ffffff"}}).setOrigin(.5),this.describleText.setWordWrapWidth(200*this.dpr),this.add(this.describleText),this.planBuffText=new s.BBCodeText(this.scene,0,this.topbg.y+15*this.dpr,"Store prosperity -10%",{fontSize:13*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#ffffff"}).setOrigin(.5),this.add(this.planBuffText),this.planBuffText.setWrapWidth(200*this.dpr);var a=new s.NineSlicePatch(this.scene,0,0,135*this.dpr,17*this.dpr,this.key,"subtitle",{left:13*this.dpr,top:0*this.dpr,right:13*this.dpr,bottom:0*this.dpr});a.x=0,a.y=this.topbg.y+.5*this.topbg.height+40*this.dpr,this.add(a);var o=this.scene.make.text({x:0,y:a.y,text:l.i18n.t("business_street.marketing_plan"),style:{fontSize:11*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#0"}}).setOrigin(.5);this.add(o),a.resize(135*this.dpr,17*this.dpr);var c=this.width-24*this.dpr,m=this.height-200*this.dpr,f=a.y+.5*a.height+20*this.dpr+.5*m;this.gridtable=this.createGrideTable(0,f,c,m,253*this.dpr,63*this.dpr);var g=new s.NineSliceButton(this.scene,0,.5*this.height-7*this.dpr,92*this.dpr,34*this.dpr,h.c.commonKey,"red_btn",l.i18n.t("common.cancel"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(g),g.setTextStyle({fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#ffffff"}),g.on(String(s.ClickEvent.Tap),this.onCancelHandler,this)},PicaBusinessPlanPanel.prototype.createGrideTable=function(e,i,n,a,o,h){var c=this,m={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:o,cellHeight:h,reuseCellContainer:!0,tableOY:5*this.dpr,zoom:this.zoom,cellPadX:8*this.dpr},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&(i=new f(c.scene,0,0,o,h,c.key,c.dpr,c.zoom)).setHandler(new l.Handler(c,c.onAddPlanHandler)),i.setData({item:n}),c.render.mainPeer.requestCurTime().then((function(e){i.setPlanData(n,e)})),i}},g=new s.GameGridTable(this.scene,m);return g.layout(),g.on("cellTap",(function(e){e&&c.onGridSelectHandler(e)})),this.add(g),g},PicaBusinessPlanPanel.prototype.onGridSelectHandler=function(e){},PicaBusinessPlanPanel.prototype.onAddPlanHandler=function(e){this.addPlanHandler&&this.addPlanHandler.runWith(e.marketPlanType)},PicaBusinessPlanPanel.prototype.onCancelHandler=function(){this.cancelHandler&&this.cancelHandler.run()},PicaBusinessPlanPanel}(Phaser.GameObjects.Container),f=function(e){function MarketingPlanItem(i,n,a,h,c,m,f,g){var _=e.call(this,i,n,a)||this;_.dpr=f,_.key=m,_.setSize(h,c),_.bg=new s.NineSlicePatch(_.scene,0,0,h,53*f,_.key,"no_plan_bg",{left:6*_.dpr,top:0*_.dpr,right:6*_.dpr,bottom:0*_.dpr}),_.add(_.bg);var T=_.scene.make.image({key:_.key,frame:"plan_icon_bg"});T.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),T.x=.5*-_.width+.5*T.width+5*f,_.add(T),_.planIcon=new o.DynamicImage(_.scene,0,0),_.planIcon.setPosition(T.x,0),_.add(_.planIcon),_.planText=_.scene.make.text({x:T.x+.5*T.width+10*f,y:0,style:{color:"#0",fontSize:10*f,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0,.5),_.planText.text=l.i18n.t("business_street.plan_title"),_.add(_.planText),_.planName=_.scene.make.text({x:T.x+.5*T.width+10*f,y:.5*-_.bg.height+4*f,text:"Plane Name",style:{color:"#ffffff",fontSize:12*f,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),_.add(_.planName),_.planAtt=new s.BBCodeText(_.scene,_.planName.x,_.planName.y+_.planName.height+4*f,"Competitiveness +10%,  Prosperity +10%",{color:"#0",fontSize:10*_.dpr,fontFamily:l.Font.DEFULT_FONT}).setOrigin(0),_.add(_.planAtt);var x=159*f,S=8*f,j={x:0,y:0,color:"#ffffff",fontSize:9*f,fontFamily:l.Font.DEFULT_FONT,halign:.5,valign:.5};return _.progress=new s.ProgressBar(_.scene,{x:5*f,y:_.planAtt.y+_.planAtt.height+4*f+.5*S,width:x,height:S,background:{x:0,y:0,width:x,height:S,config:{top:1*f,left:5*f,right:5*f,bottom:1*f},key:m,frame:"progress_bar_bg"},bar:{x:0,y:0,width:x,height:S-f,config:{top:1*f,left:5*f,right:5*f,bottom:1*f},key:m,frame:"progress_bar_g"},dpr:f,textConfig:j}),_.progress.text.setOrigin(.5),_.add(_.progress),_.addBtn=new s.Button(_.scene,_.key,"add_plan","add_plan"),_.addBtn.x=.5*_.width-.5*_.addBtn.width-20*f,_.addBtn.on(String(s.ClickEvent.Tap),_.onAddBtnHandler,_),_.add(_.addBtn),_}return c(MarketingPlanItem,e),MarketingPlanItem.prototype.setPlanData=function(e,i){var n=this;if(e.marketPlan){this.planName.visible=!0,this.planAtt.visible=!0,this.progress.visible=!0,this.planText.visible=!1,this.bg.setFrame("has_plan_bg"),this.remove(this.addBtn);var a="progress_bar_r",s=Math.floor(e.marketPlan.endTime-i/1e3),o=Math.floor(s/e.marketPlan.totalTime*100);o>30&&o<=50?a="progress_bar_y":o>50&&(a="progress_bar_g"),this.progress.bar.setFrame(a),this.progress.setProgress(s,e.marketPlan.totalTime),this.progress.setText(this.getDataFormat(1e3*s)),this.planName.text=e.marketPlan.name,this.planAtt.text=e.marketPlan.buffDes;var h=""!==e.marketPlan.icon?e.marketPlan.icon:e.marketPlan.requirements[0].texturePath;(""===h||!h)&&e.marketPlan.requirements&&e.marketPlan.requirements.length>0&&(h=e.marketPlan.requirements[0].texturePath);var c=l.Url.getOsdRes(h);this.planIcon.load(c,this,(function(){n.planIcon.displayWidth=30*n.dpr,n.planIcon.scaleY=n.planIcon.scaleX}))}else this.planName.visible=!1,this.planAtt.visible=!1,this.progress.visible=!1,this.add(this.addBtn),this.bg.setFrame("no_plan_bg");this.planData=e},MarketingPlanItem.prototype.setHandler=function(e){this.addBtnHandler=e},MarketingPlanItem.prototype.onAddBtnHandler=function(){this.addBtnHandler&&this.addBtnHandler.runWith(this.planData)},MarketingPlanItem.prototype.getDataFormat=function(e){var i=Math.floor(e/864e5),n=Math.floor(e/36e5)%24,a=Math.floor(e/6e4)%60,s=Math.floor(e/1e3)%60,o="";return i>0?(o=i+"  "+l.i18n.t("timeuint.day"),(n>0||a>0)&&(o+=this.stringFormat(n)+":"+this.stringFormat(a))):o=n>0?a>0?this.stringFormat(n)+":"+this.stringFormat(a):this.stringFormat(n)+" "+l.i18n.t("timeuint.hour"):a>0?this.stringFormat(a)+" "+l.i18n.t("timeuint.minute"):this.stringFormat(s)+" "+l.i18n.t("timeuint.second"),o},MarketingPlanItem.prototype.stringFormat=function(e){var i=e+"";return i.length<=1&&(i="0"+i),i},MarketingPlanItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessHistoryPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaBusinessHistoryPanel(i,n,a,s,o,h,l,c,m){var f=e.call(this,i,n,a)||this;return f.dpr=h,f.key=c,f.key2=m,f.zoom=l,f.setSize(s,o),f.create(),f}return c(PicaBusinessHistoryPanel,e),PicaBusinessHistoryPanel.prototype.setHistoryeData=function(e){this.gridtable.setItems(e),this.titleText.text=l.i18n.t("business_street.history_title",{name:e.length})},PicaBusinessHistoryPanel.prototype.setHandler=function(e){this.backHandler=e},PicaBusinessHistoryPanel.prototype.resetMask=function(){this.gridtable.resetMask()},PicaBusinessHistoryPanel.prototype.create=function(){var e=.5*-this.height,i=.5*-this.width,n=this.scene.make.text({x:i+30*this.dpr,y:e+6*this.dpr,text:l.i18n.t("business_street.history_title"),style:{fontSize:13*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#FFC51A"}}).setOrigin(0,.5);n.setStroke("#553100",2*this.dpr),this.add(n),this.titleText=n;var a=this.width,o=this.height-80*this.dpr,c=e+33*this.dpr+.5*o;this.gridtable=this.createGrideTable(0,c,a,o,256*this.dpr,50*this.dpr);var m=new s.NineSliceButton(this.scene,0,.5*this.height-7*this.dpr,92*this.dpr,34*this.dpr,h.c.commonKey,"red_btn",l.i18n.t("business_street.back"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(m),m.setTextStyle({fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#ffffff"}),m.on(String(s.ClickEvent.Tap),this.onBackHandler,this)},PicaBusinessHistoryPanel.prototype.createGrideTable=function(e,i,n,a,o,h){var l=this,c={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:o,cellHeight:h,reuseCellContainer:!0,tableOX:19*this.dpr,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&(i=new f(l.scene,0,0,o,h,l.key,l.key2,l.dpr,l.zoom),m.add(i)),i.setData({item:n}),i.setStoreData(n),i}},m=new s.GameGridTable(this.scene,c);return m.layout(),this.add(m),m},PicaBusinessHistoryPanel.prototype.onBackHandler=function(){this.backHandler&&this.backHandler.run()},PicaBusinessHistoryPanel}(Phaser.GameObjects.Container),f=function(e){function PicHistoryItem(i,n,a,h,c,m,f,g,_){var T=e.call(this,i,n,a)||this;T.dpr=g,T.key=m,T.key2=f,T.setSize(h,c);var x=.5*-T.width,S=.5*-T.height;T.bg=new s.NineSlicePatch(T.scene,0,0,h,45*g,T.key,"resturant_bg",{left:4*T.dpr,top:9*T.dpr,right:4*T.dpr,bottom:9*T.dpr}),T.add(T.bg);var j=T.scene.make.image({key:f,frame:"icon_bg_s"});j.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),j.setPosition(x+.5*j.width+3*g,0),T.add(j),T.storeIcon=new o.DynamicImage(T.scene,j.x,0),T.add(T.storeIcon);var q=j.x+.5*j.width+10*g;return T.storeName=T.scene.make.text({x:q,y:S+10*g,text:"Restaurant",style:{color:"#FFE11A",fontSize:12*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),T.add(T.storeName),T.playerName=T.scene.make.text({x:q,y:T.storeName.y+.5*T.storeName.height+10*g,text:"Savings: 13000",style:{color:"#ffffff",fontSize:11*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),T.add(T.playerName),T.industryIcon=T.scene.make.image({key:T.key2,frame:"entertainment_tag_s"}),T.industryIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),T.industryIcon.x=.5*T.width-.5*T.industryIcon.width,T.add(T.industryIcon),T}return c(PicHistoryItem,e),PicHistoryItem.prototype.setStoreData=function(e){this.storeData=e,this.bg.setTexture(this.key2,e.industry+"_bg"),this.storeName.text=e.name,this.playerName.text=e.ownerName,this.storeIcon.setTexture(this.key2,e.storeType+"_icon_s"),this.industryIcon.setFrame(e.industry+"_tag_s")},PicHistoryItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessMyStreetPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaBusinessMyStreetPanel(i,n,a,s,o,h,l,c){var m=e.call(this,i,n,a)||this;return m.isCanNewCreate=!1,m.dpr=h,m.key=c,m.zoom=l,m.setSize(s,o),m.create(),m}return c(PicaBusinessMyStreetPanel,e),PicaBusinessMyStreetPanel.prototype.setMyStoreData=function(e){var i=e.storeList;this.storelimitText.text=l.i18n.t("business_street.store_limit")+":"+i.length+"/"+e.storeLimit,this.gridtable.setItems(i),this.isCanNewCreate=i.length<e.storeLimit},PicaBusinessMyStreetPanel.prototype.setHandler=function(e,i,n,a){this.takeAllHandler=e,this.goOutHandler=i,this.newStoreHandler=n,this.enterRoomHandler=a},PicaBusinessMyStreetPanel.prototype.resetMask=function(){this.gridtable.resetMask()},PicaBusinessMyStreetPanel.prototype.create=function(){var e=.5*-this.height,i=.5*-this.width,n=this.scene.make.image({key:this.key,frame:"store_icon"});n.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),n.x=i+30*this.dpr,n.y=e+6*this.dpr,this.add(n);var a=n.x+.5*n.width+10*this.dpr,o=this.scene.make.text({x:a,y:n.y,text:l.i18n.t("business_street.my_store"),style:{fontSize:13*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#FFC51A"}}).setOrigin(0,.5);o.setStroke("#553100",2*this.dpr),this.add(o);var c=this.width,m=this.height-68*this.dpr,f=e+28*this.dpr+.5*m;this.gridtable=this.createGrideTable(0,f,c,m,256*this.dpr,87*this.dpr),this.newStoreBtn=new s.Button(this.scene,this.key,"new_store","new_store");var g=-i-.5*this.newStoreBtn.width-20*this.dpr;this.newStoreBtn.setPosition(g,e+6*this.dpr),this.newStoreBtn.on(String(s.ClickEvent.Tap),this.onNewStoreHandler,this),this.add(this.newStoreBtn),this.storelimitText=this.scene.make.text({x:g-.5*this.newStoreBtn.width-10*this.dpr,y:e+5*this.dpr,text:"store limit",style:{color:"#0",fontSize:12*this.dpr,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(1,.5),this.add(this.storelimitText),this.storeCountText=this.scene.make.text({x:g+.5*this.newStoreBtn.width+20*this.dpr,y:e,text:"",style:{fontSize:13*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#FFC51A"}}).setOrigin(1,0),this.add(this.storeCountText);var _=new s.NineSliceButton(this.scene,-60*this.dpr,.5*this.height-7*this.dpr,92*this.dpr,34*this.dpr,h.c.commonKey,"red_btn",l.i18n.t("business_street.takeall"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(_),_.setTextStyle({fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#ffffff"}),_.on(String(s.ClickEvent.Tap),this.onTalkAllHandler,this);var T=new s.NineSliceButton(this.scene,60*this.dpr,_.y,92*this.dpr,34*this.dpr,h.c.commonKey,"yellow_btn",l.i18n.t("business_street.goout"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(T),T.on(String(s.ClickEvent.Tap),this.onGoOutHandler,this),T.setTextStyle({fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#996600"})},PicaBusinessMyStreetPanel.prototype.createGrideTable=function(e,i,n,a,o,h){var c=this,m={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:o,cellHeight:h,reuseCellContainer:!0,tableOX:19*this.dpr,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&((i=new f(c.scene,0,0,o,h,c.key,c.dpr,c.zoom)).setHandler(new l.Handler(c,c.onEnterHandler)),g.add(i)),i.setData({item:n}),i.setStoreData(n),i}},g=new s.GameGridTable(this.scene,m);return g.layout(),this.add(g),g},PicaBusinessMyStreetPanel.prototype.onEnterHandler=function(e){this.enterRoomHandler&&this.enterRoomHandler.runWith(e.roomId)},PicaBusinessMyStreetPanel.prototype.onTalkAllHandler=function(){this.takeAllHandler&&this.takeAllHandler.run()},PicaBusinessMyStreetPanel.prototype.onGoOutHandler=function(){this.goOutHandler&&this.goOutHandler.run()},PicaBusinessMyStreetPanel.prototype.onNewStoreHandler=function(){this.isCanNewCreate&&this.newStoreHandler&&this.newStoreHandler.run()},PicaBusinessMyStreetPanel}(Phaser.GameObjects.Container),f=function(e){function MyStoreItem(i,n,a,c,m,f,g,_){var T=e.call(this,i,n,a)||this;T.dpr=g,T.key=f,T.setSize(c,m);var x=.5*-T.width,S=.5*-T.height;T.bg=new s.NineSlicePatch(T.scene,0,0,c,80*g,T.key,"resturant_bg",{left:4*T.dpr,top:9*T.dpr,right:4*T.dpr,bottom:9*T.dpr}),T.add(T.bg);var j=T.scene.make.image({key:f,frame:"store_icon_bg"});j.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),j.setPosition(x+.5*j.width+10*g,0),T.add(j),T.storeIcon=new o.DynamicImage(T.scene,j.x,0),T.add(T.storeIcon);var q=j.x+.5*j.width+10*g;T.storeName=T.scene.make.text({x:q,y:S+5*g,text:"Restaurant",style:{color:"#FFE11A",fontSize:12*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),T.add(T.storeName),T.lvimgCon=T.scene.make.container(void 0,!1),T.lvimgCon.height=14*g,T.lvimgCon.setPosition(q+6*g,T.storeName.y+T.storeName.height+.5*T.lvimgCon.height+2*g),T.add(T.lvimgCon),T.savings=T.scene.make.text({x:q,y:T.lvimgCon.y+.5*T.lvimgCon.height+2*g,text:"Savings: 13000",style:{color:"#ffffff",fontSize:10*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),T.add(T.savings),T.competitiveness=T.scene.make.text({x:q,y:T.savings.y+T.savings.height+2*g,text:"Competitiveness: 13000",style:{color:"#ffffff",fontSize:10*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),T.add(T.competitiveness),T.turnover=T.scene.make.text({x:q,y:T.competitiveness.y+T.competitiveness.height+2*g,text:"Prosperity: +13000 / Day",style:{color:"#ffffff",fontSize:10*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),T.add(T.turnover),T.industryIcon=T.scene.make.image({key:T.key,frame:"entertainment_tag"}),T.industryIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),T.industryIcon.x=.5*T.width-.5*T.industryIcon.width,T.add(T.industryIcon);var Y=new s.NineSliceButton(i,-x,0,48*g,27*g,h.c.commonKey,"yellow_btn_normal_s",l.i18n.t("business_street.enter"),T.dpr,_,{left:10*T.dpr,top:10*T.dpr,right:10*T.dpr,bottom:10*T.dpr});return Y.setTextStyle({fontSize:10*g,fontFamily:l.Font.DEFULT_FONT,color:"#996600"}),Y.x=-x-.5*Y.width-10*g,Y.on(String(s.ClickEvent.Tap),T.onEnterHandler,T),T.add(Y),T}return c(MyStoreItem,e),MyStoreItem.prototype.setStoreData=function(e){var i=e.industry,n=e.storeType;this.bg.setFrame(i+"_bg"),this.storeIcon.setTexture(this.key,n+"_icon"),this.storeName.text=e.name,this.lvimgCon.removeAll(!0),this.setImageInfo(h.c.common2Key,this.getLevelImgs(e.roomLevel.level)),this.savings.text=l.i18n.t("business_street.savings")+":"+e.savings,this.competitiveness.text=l.i18n.t("business_street.competitiveness")+":"+e.competitiveness,this.turnover.text=l.i18n.t("business_street.turnover")+":"+e.turnover,this.industryIcon.setFrame(i+"_tag"),this.storeData=e},MyStoreItem.prototype.setHandler=function(e){this.enterHandler=e},MyStoreItem.prototype.setImageInfo=function(e,i){for(var n=0,a=15*this.dpr,s=0,o=i;s<o.length;s++){var h=o[s],l=this.scene.make.image({key:e,frame:h});l.x=n,n+=.5*l.width+a,this.lvimgCon.add(l)}},MyStoreItem.prototype.onEnterHandler=function(){this.enterHandler&&this.enterHandler.runWith(this.storeData)},MyStoreItem.prototype.getLevelImgs=function(e){e=e||0;for(var i=[],n=Math.floor(e/Math.pow(4,3)),a=e%Math.pow(4,3),s=Math.floor(a/Math.pow(4,2)),o=a%Math.pow(4,2),h=Math.floor(o/Math.pow(4,1)),l=o%Math.pow(4,1),c=0;c<n;c++)i.push("bear");for(c=0;c<s;c++)i.push("sun");for(c=0;c<h;c++)i.push("moon");for(c=0;c<l;c++)i.push("star");return 0===e&&i.push("star"),i},MyStoreItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessRankRewardPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaBusinessRankRewardPanel(i,n,a,s,o,h,l,c,m){var f=e.call(this,i,n,a)||this;return f.dpr=h,f.key=c,f.key2=m,f.zoom=l,f.setSize(s,o),f.create(),f}return c(PicaBusinessRankRewardPanel,e),PicaBusinessRankRewardPanel.prototype.setRankRewardData=function(e){this.gridtable.setItems(e)},PicaBusinessRankRewardPanel.prototype.setHandler=function(e){this.backHandler=e},PicaBusinessRankRewardPanel.prototype.resetMask=function(){this.gridtable.resetMask()},PicaBusinessRankRewardPanel.prototype.create=function(){var e=.5*-this.height,i=this.width-20*this.dpr,n=this.height-70*this.dpr,a=e+23*this.dpr+.5*n;this.gridtable=this.createGrideTable(-5*this.dpr,a,i,n,256*this.dpr,80*this.dpr);var o=new s.NineSliceButton(this.scene,0,.5*this.height-7*this.dpr,92*this.dpr,34*this.dpr,h.c.commonKey,"red_btn",l.i18n.t("business_street.back"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(o),o.setTextStyle({fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#ffffff"}),o.on(String(s.ClickEvent.Tap),this.onBackHandler,this)},PicaBusinessRankRewardPanel.prototype.createGrideTable=function(e,i,n,a,o,h){var l=this,c={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:o,cellHeight:h,reuseCellContainer:!0,tableOX:19*this.dpr,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&(i=new f(l.scene,0,0,o,h,l.key,l.key2,l.dpr,l.zoom),m.add(i)),i.setData({item:n}),i.setRankRewardData(n),i}},m=new s.GameGridTable(this.scene,c);return m.layout(),this.add(m),m},PicaBusinessRankRewardPanel.prototype.onBackHandler=function(){this.backHandler&&this.backHandler.run()},PicaBusinessRankRewardPanel}(Phaser.GameObjects.Container),f=function(e){function PicRankRewardItem(i,n,a,s,o,h,c,m,f){var g=e.call(this,i,n,a)||this;g.rewardItems=[],g.dpr=m,g.zoom=f,g.key=h,g.key2=c,g.setSize(s,o);var _=g.scene.make.image({key:g.key2,frame:"reward_bg"});_.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),g.add(_),g.rankIcon=g.scene.make.image({key:c,frame:"1"}),g.rankIcon.x=.5*-s+.5*g.rankIcon.width+10*m,g.add(g.rankIcon);var T=g.rankIcon.x;return g.rankText=g.scene.make.text({x:T,y:0,text:"3",style:{color:"#0",fontSize:12*m,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(.5),g.add(g.rankText),g}return c(PicRankRewardItem,e),PicRankRewardItem.prototype.setRankRewardData=function(e){if(this.rewardData!==e){e.start===e.end?(this.rankIcon.visible=!0,this.rankText.visible=!1,this.rankIcon.setFrame(e.start+"")):(this.rankIcon.visible=!1,this.rankText.visible=!0,this.rankText.text=e.start+"~"+e.end);for(var i=0,n=this.rewardItems;i<n.length;i++){(s=n[i]).visible=!1}for(var a=0;a<e.rewards.length;a++){var s=void 0;a<this.rewardItems.length?s=this.rewardItems[a]:(s=new g(this.scene,0,0,50*this.dpr,50*this.dpr,this.key2,this.dpr,this.zoom),this.add(s),this.rewardItems.push(s)),s.visible=!0,s.setRewardData(e.rewards[a])}this.Sort(),this.rewardData=e}},PicRankRewardItem.prototype.Sort=function(){for(var e=10*this.dpr,i=-50*this.dpr,n=0,a=this.rewardItems;n<a.length;n++){var s=a[n];s.x=s.width*s.originX+i,i+=s.width+e}},PicRankRewardItem}(Phaser.GameObjects.Container),g=function(e){function RewardItem(i,n,a,s,h,c,m,f){var g=e.call(this,i,n,a)||this;g.dpr=m,g.key2=c,g.setSize(s,h);var _=g.scene.make.image({key:g.key2,frame:"icon_bg_m"});return _.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),g.add(_),g.itemIcon=new o.DynamicImage(g.scene,0,0),g.add(g.itemIcon),g.countText=g.scene.make.text({x:.5*_.width,y:.5*_.height,text:"4~10",style:{color:"#0",fontSize:12*m,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(1,.5),g.add(g.countText),g}return c(RewardItem,e),RewardItem.prototype.setRewardData=function(e){var i=this,n=l.Url.getOsdRes(e.texturePath);this.itemIcon.load(n,this,(function(){i.itemIcon.displayWidth=43*i.dpr,i.itemIcon.scaleY=i.itemIcon.scaleX})),this.countText.text=e.count+""},RewardItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessRankingDetailPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaBusinessRankingDetailPanel(i,n,a,s,o,h,l,c,m){var f=e.call(this,i,n,a)||this;return f.dpr=h,f.key=c,f.key2=m,f.zoom=l,f.setSize(s,o),f.create(),f}return c(PicaBusinessRankingDetailPanel,e),PicaBusinessRankingDetailPanel.prototype.setRankingDetailData=function(e){this.content=e;var i=e.stores;if(this.gridtable.setItems(i),e.playerStore){this.myRankItem.visible=!0,this.myitembg.visible=!0,this.myRankItem.setDetailData(e.playerStore);var n=.5*-this.height,a=this.width,s=this.height-125*this.dpr,o=n+30*this.dpr+.5*s;this.gridtable.y=o,this.gridtable.setSize(a,s)}else{this.myitembg.visible=!1,this.myRankItem.visible=!1;n=.5*-this.height,a=this.width,s=this.height-100*this.dpr,o=n+30*this.dpr+.5*s;this.gridtable.y=o,this.gridtable.setSize(a,s)}},PicaBusinessRankingDetailPanel.prototype.setHandler=function(e,i){this.backHandler=e,this.rankRewardHandler=i},PicaBusinessRankingDetailPanel.prototype.resetMask=function(){this.gridtable.resetMask()},PicaBusinessRankingDetailPanel.prototype.create=function(){var e=.5*-this.height,i=.5*-this.width;this.timeText=this.scene.make.text({x:0,y:e+6*this.dpr,text:l.i18n.t("6 DAY 23:24:16"),style:{fontSize:13*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#D9270F"}}).setOrigin(.5),this.timeText.setStroke("#553100",2*this.dpr),this.add(this.timeText),this.timeText.visible=!1;var n=new s.NineSliceButton(this.scene,0,this.timeText.y,60*this.dpr,26*this.dpr,h.c.commonKey,"yellow_btn_normal_s",l.i18n.t("business_street.rank_reward"),this.dpr,this.zoom,{left:10*this.dpr,top:6*this.dpr,right:10*this.dpr,bottom:6*this.dpr});n.x=-i-.5*n.width-30*this.dpr,n.setTextStyle({fontSize:10*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#996600"}),n.on(String(s.ClickEvent.Tap),this.onRankRewardHandler,this),this.add(n);var a=this.width,o=this.height-125*this.dpr,c=e+30*this.dpr+.5*o;this.gridtable=this.createGrideTable(0,c,a,o,256*this.dpr,50*this.dpr),this.myitembg=this.scene.make.image({key:this.key2,frame:"my_rank_bg"}),this.myitembg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.myitembg.y=c+.5*o+.5*this.myitembg.height-3*this.dpr,this.add(this.myitembg),this.myRankItem=new f(this.scene,0,this.myitembg.y+5*this.dpr,256*this.dpr,50*this.dpr,this.key,this.key2,this.dpr,this.zoom),this.add(this.myRankItem);var m=new s.NineSliceButton(this.scene,0,.5*this.height-7*this.dpr,92*this.dpr,34*this.dpr,h.c.commonKey,"red_btn",l.i18n.t("business_street.back"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(m),m.setTextStyle({fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#ffffff"}),m.on(String(s.ClickEvent.Tap),this.onBackHandler,this)},PicaBusinessRankingDetailPanel.prototype.createGrideTable=function(e,i,n,a,o,h){var l=this,c={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:o,cellHeight:h,reuseCellContainer:!0,tableOX:19*this.dpr,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&(i=new f(l.scene,0,0,o,h,l.key,l.key2,l.dpr,l.zoom),m.add(i)),i.setData({item:n}),i.setDetailData(n),i}},m=new s.GameGridTable(this.scene,c);return m.layout(),this.add(m),m},PicaBusinessRankingDetailPanel.prototype.onBackHandler=function(){this.backHandler&&this.backHandler.run(),this.content=void 0},PicaBusinessRankingDetailPanel.prototype.onRankRewardHandler=function(){this.rankRewardHandler&&this.content&&this.rankRewardHandler.runWith([this.content.key,this.content.type])},PicaBusinessRankingDetailPanel}(Phaser.GameObjects.Container),f=function(e){function PicRankingDetailItem(i,n,a,h,c,m,f,g,_){var T=e.call(this,i,n,a)||this;T.dpr=g,T.key=m,T.key2=f,T.setSize(h,c);var x=.5*-T.width,S=.5*-T.height;T.bg=new s.NineSlicePatch(T.scene,0,0,h,45*g,T.key,"restaurant_bg",{left:4*T.dpr,top:9*T.dpr,right:4*T.dpr,bottom:9*T.dpr}),T.add(T.bg);var j=T.scene.make.image({key:f,frame:"icon_bg_s"});j.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),j.setPosition(x+.5*j.width+3*g,0),T.add(j),T.storeIcon=new o.DynamicImage(T.scene,j.x,0),T.add(T.storeIcon);var q=j.x+.5*j.width+10*g;return T.storeName=T.scene.make.text({x:q,y:S+10*g,text:"Restaurant",style:{color:"#FFE11A",fontSize:12*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),T.add(T.storeName),T.playerName=T.scene.make.text({x:q,y:T.storeName.y+.5*T.storeName.height+10*g,text:"Savings: 13000",style:{color:"#ffffff",fontSize:11*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),T.add(T.playerName),T.industryIcon=T.scene.make.image({key:T.key2,frame:"restaurant_tag_s"}),T.industryIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),T.industryIcon.x=.5*T.width-.5*T.industryIcon.width,T.add(T.industryIcon),T.rankIcon=T.scene.make.image({key:f,frame:"1"}),T.rankIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),T.rankIcon.x=-x-80*g,T.add(T.rankIcon),T.rankText=T.scene.make.text({x:q,y:0,text:"Restaurant",style:{color:"#ffffff",fontSize:18*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(.5),T.rankText.x=T.rankIcon.x,T.add(T.rankText),T.praiseCount=T.scene.make.text({x:T.rankIcon.x+.5*T.rankIcon.width+10*g,y:T.rankIcon.y,text:"66666666",style:{color:"#ffffff",fontSize:12*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0,.5),T.add(T.praiseCount),T}return c(PicRankingDetailItem,e),PicRankingDetailItem.prototype.setDetailData=function(e){this.detailData=e,this.storeName.text=e.name,this.playerName.text=e.ownerName,e.index<4&&e.index>0?(this.rankIcon.visible=!0,this.rankText.visible=!1,this.rankIcon.setFrame(e.index+"")):(this.rankIcon.visible=!1,this.rankText.visible=!0,e.index<=0?this.rankText.text=l.i18n.t("business_street.onrank"):this.rankText.text=e.index+""),this.praiseCount.text=e.value+"",this.storeIcon.setTexture(this.key2,e.storeType+"_icon_s"),this.bg.setFrame(e.industryType+"_bg"),this.industryIcon.setFrame(e.industryType+"_tag_s")},PicRankingDetailItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessRankingPanel",(function(){return c}));var a,s=n(788),o=n(790),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaBusinessRankingPanel(i,n,a,s,o,h,l,c,m){var f=e.call(this,i,n,a)||this;return f.boundOffset=85,f.dpr=h,f.key=c,f.key2=m,f.zoom=l,f.setSize(s,o),f.create(),f}return l(PicaBusinessRankingPanel,e),PicaBusinessRankingPanel.prototype.create=function(){var e=this,i=.5*-this.height,n=(this.width,this.scene.make.text({x:0,y:i+20*this.dpr,text:h.i18n.t("business_street.ranking_list"),style:{fontSize:18*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#FFC51A"}}).setOrigin(.5));n.setStroke("#553100",2*this.dpr),this.add(n),this.titleText=n;var a=this.scene.make.image({x:0,y:n.y+.5*n.height+10*this.dpr,key:this.key2,frame:"title"});a.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.add(a);var l=this.width-28*this.dpr,c=this.height-80*this.dpr;this.dpr;this.gameScroll=new s.GameScroller(this.scene,{x:0,y:0,width:l,height:c,zoom:this.zoom,dpr:this.dpr,align:2,orientation:1,space:20*this.dpr,valuechangeCallback:function(i){e.onScrollValueChange(i)},cellupCallBack:function(i){e.onScrollClickHandler(i)}}),this.add(this.gameScroll);var m=new s.NineSliceButton(this.scene,0,.5*this.height-7*this.dpr,92*this.dpr,34*this.dpr,o.c.commonKey,"red_btn",h.i18n.t("business_street.back"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(m),m.setTextStyle({fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#ffffff"}),m.on(String(s.ClickEvent.Tap),this.onBackHandler,this)},PicaBusinessRankingPanel.prototype.setRankingData=function(e){var i=this.scene.make.container(void 0,!1);this.boundOffset=35*this.dpr,i.setSize(this.boundOffset,185*this.dpr),this.gameScroll.clearItems(),this.gameScroll.addItem(i);for(var n=0,a=e;n<a.length;n++){var s=a[n],o=new m(this.scene,0,0,133*this.dpr,185*this.dpr,this.key,this.key2,this.dpr,this.zoom);o.setRankData(s),this.gameScroll.addItem(o)}var h=this.scene.make.container(void 0,!1);h.setSize(this.boundOffset,185*this.dpr),this.gameScroll.addItem(h),this.gameScroll.Sort(),this.gameScroll.refreshMask(),this.gameScroll.setValue(this.gameScroll.bounds[1])},PicaBusinessRankingPanel.prototype.setHandler=function(e,i){this.backHandler=e,this.rankHandler=i},PicaBusinessRankingPanel.prototype.resetMask=function(){this.gameScroll.refreshMask()},PicaBusinessRankingPanel.prototype.show=function(){this.addListen(),this.visible=!0},PicaBusinessRankingPanel.prototype.hide=function(){this.visible=!1,this.removeListen()},PicaBusinessRankingPanel.prototype.onScrollValueChange=function(e){if(this.gameScroll){for(var i=133*this.dpr,n=.25*(this.gameScroll.width-i),a=0,s=this.gameScroll.getItemList();a<s.length;a++){var o=s[a],h=Math.abs(o.getWorldTransformMatrix().tx-this.getWorldTransformMatrix().tx)-.25*i;h<0&&(h=0);var l=1-Math.abs(h)/n;o instanceof m&&o.setRadio(l)}this.gameScroll.Sort(!0,!1)}},PicaBusinessRankingPanel.prototype.onScrollUpHandler=function(){var e=this;if(this.gameScroll){var i=this.gameScroll.getValue(),n=this.gameScroll.bounds[1]-i,a=Math.floor((n+66*this.dpr)/(133*this.dpr+20*this.dpr)),s=this.gameScroll.getItemList().length;if(a>=0&&a<s-1){var o=this.gameScroll.getItemAt(a+1).getWorldTransformMatrix().tx-this.getWorldTransformMatrix().tx;if((o*=this.scale)<0){var h=Math.abs(o)+i;this.timerID=setInterval((function(){i+=10*e.dpr,e.gameScroll.setValue(i),i>=h&&(e.gameScroll.setValue(h),clearInterval(e.timerID),e.timerID=void 0)}),20)}else{var l=i-Math.abs(o);this.timerID=setInterval((function(){i-=10*e.dpr,e.gameScroll.setValue(i),i<=l&&(e.gameScroll.setValue(l),clearInterval(e.timerID),e.timerID=void 0)}),20)}}this.gameScroll.Sort(!0,!1)}},PicaBusinessRankingPanel.prototype.onScrollClickHandler=function(e){if(this.timerID&&(clearInterval(this.timerID),this.timerID=void 0),this.rankHandler){var i=e.rankData;this.rankHandler.runWith([i.key,i.type])}},PicaBusinessRankingPanel.prototype.onBackHandler=function(){this.backHandler&&this.backHandler.run(),this.gameScroll.clearItems()},PicaBusinessRankingPanel.prototype.addListen=function(){this.scene&&(this.removeListen(),this.scene.input.on("pointerdown",this.pointerDownHandler,this),this.scene.input.on("pointerup",this.pointerUpHandler,this))},PicaBusinessRankingPanel.prototype.removeListen=function(){this.scene&&(this.scene.input.off("pointerdown",this.pointerDownHandler,this),this.scene.input.off("pointerup",this.pointerUpHandler,this))},PicaBusinessRankingPanel.prototype.pointerDownHandler=function(e){this.checkPointerInBounds(this.gameScroll,e)&&(this.timerID&&(clearInterval(this.timerID),this.timerID=void 0),this.moveTimerID&&(clearInterval(this.moveTimerID),this.moveTimerID=void 0))},PicaBusinessRankingPanel.prototype.pointerUpHandler=function(e){var i=this;this.checkPointerInBounds(this.gameScroll,e)&&setTimeout((function(){i.gameScroll.isSliding?i.moveTimerID=setInterval((function(){i.gameScroll.isSliding||(i.onScrollUpHandler(),clearInterval(i.moveTimerID),i.moveTimerID=void 0)}),20):i.onScrollUpHandler()}),20)},PicaBusinessRankingPanel.prototype.checkPointerInBounds=function(e,i){if(this.mRectangle||(this.mRectangle=new Phaser.Geom.Rectangle(0,0,0,0)),this.mRectangle.left=-e.width/2,this.mRectangle.right=e.width/2,this.mRectangle.top=-e.height/2,this.mRectangle.bottom=e.height/2,i){var n=e.getWorldTransformMatrix(),a=i.x-n.tx,s=i.y-n.ty;return this.mRectangle.left<=a&&this.mRectangle.right>=a&&this.mRectangle.top<=s&&this.mRectangle.bottom>=s}return!1},PicaBusinessRankingPanel}(Phaser.GameObjects.Container),m=function(e){function PicRankingItem(i,n,a,o,l,c,m,f,g){var _=e.call(this,i,n,a)||this;_.radio=0,_.imgtype=1,_.dpr=f,_.key=c,_.key2=m,_.setSize(o,l);_.width;var T=.5*-_.height;return _.bg=_.scene.make.image({key:_.key2,frame:"restaurant_rank_bg_s"}),_.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),_.add(_.bg),_.titleText=_.scene.make.text({x:0,y:T,text:"Restaurant",style:{color:"#0555AF",fontSize:14*f,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(.5),_.add(_.titleText),_.storebg=new s.NineSlicePatch(_.scene,0,0,72*f,17*f,_.key2,"store_name_bg_s",{left:8*_.dpr,top:0*_.dpr,right:8*_.dpr,bottom:0*_.dpr}),_.storebg.y=_.titleText.y+10*f,_.add(_.storebg),_.storeName=_.scene.make.text({x:0,y:_.storebg.y,text:"Restaurant",style:{color:"#0",fontSize:12*f,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(.5),_.add(_.storeName),_.storeIcon=_.scene.make.image({key:_.key2,frame:"restaurant_rank_icon_s"}),_.storeIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),_.storeIcon.y=-T-.5*_.storeIcon.height-5*f,_.add(_.storeIcon),_}return l(PicRankingItem,e),PicRankingItem.prototype.setRankData=function(e){this.rankData=e,this.titleText.text=e.name,this.storeName.text=e.champion,this.switchImage(1)},PicRankingItem.prototype.setRadio=function(e){var i=1;e>1&&(e=1),e>0&&(i=2),this.imgtype!==i&&(this.switchImage(i),this.imgtype=i),this.scale=2===i?1/this.radio+e*(1-1/this.radio):1,this.width=this.bg.displayWidth*this.scale,this.height=this.bg.displayHeight*this.scale},PicRankingItem.prototype.switchImage=function(e){var i,n,a,s,o,h,l,c,m=this.rankData.type,f=133*this.dpr,g=133*this.dpr;1===e?(i=m+"_rank_bg_s",n=14*this.dpr,a="store_name_bg_s",s=72*this.dpr,o=14*this.dpr,h=10*this.dpr,l=m+"_rank_icon_s",g=133*this.dpr,this.storebg.setConfig({left:8*this.dpr,top:0*this.dpr,right:8*this.dpr,bottom:0*this.dpr})):(i=m+"_rank_bg_m",n=18*this.dpr,a="store_name_bg_m",s=88*this.dpr,o=17*this.dpr,h=12*this.dpr,l=m+"_rank_icon_m",g=163*this.dpr,this.storebg.setConfig({left:11*this.dpr,top:0*this.dpr,right:11*this.dpr,bottom:0*this.dpr})),c=g/f,this.radio=c,this.bg.setFrame(i),this.titleText.setFontSize(n),this.storebg.setFrame(a),this.storebg.resize(s,o),this.storeName.setFontSize(h),this.storeIcon.setFrame(l),this.setSize(this.bg.width,this.bg.height),this.titleText.y=.5*-this.height+.5*this.titleText.height+10*this.dpr*c,this.storebg.y=this.titleText.y+.5*this.titleText.height+10*this.dpr*c,this.storeName.y=this.storebg.y,this.storeIcon.y=.5*this.height-.5*this.storeIcon.height-10*this.dpr*c},PicRankingItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessStoreCreatePanel",(function(){return c}));var a,s=n(788),o=n(790),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaBusinessStoreCreatePanel(i,n,a,s,o,h,l,c,m){void 0===m&&(m=!0);var f=e.call(this,i,n,a)||this;return f.isFirst=!0,f.dpr=h,f.key=c,f.zoom=l,f.setSize(s,o),f.isFirst=m,f.create(),f}return l(PicaBusinessStoreCreatePanel,e),PicaBusinessStoreCreatePanel.prototype.setTypeData=function(e){e instanceof Array?this.gridtable.setItems(e):this.gridtable.setItems(e.roomModels);var i=this.gridtable.getCells()[0];i&&i.container&&this.onGridSelectHandler(i.container),this.gridtable.setT(0)},PicaBusinessStoreCreatePanel.prototype.setTypeInfo=function(e){if(this.curSelectData=e,"industryType"in e)this.recommendedText.text=e.state,this.describleText.text=e.des,this.turnoverText.setText(e.buffDes);else{var i=e;i.price&&(this.coinImg.setFrame(h.Coin.getIcon(i.price.coinType)),this.coinCount.text=i.price.price+""),this.describleText2.text=i.des}},PicaBusinessStoreCreatePanel.prototype.setHandler=function(e,i){this.cancelHandler=e,this.selectHandler=i},PicaBusinessStoreCreatePanel.prototype.resetMask=function(){this.gridtable.resetMask()},PicaBusinessStoreCreatePanel.prototype.create=function(){var e=.5*-this.height,i=new s.NineSlicePatch(this.scene,0,0,135*this.dpr,17*this.dpr,this.key,"subtitle",{left:13*this.dpr,top:0*this.dpr,right:13*this.dpr,bottom:0*this.dpr});i.x=0,i.y=e+10*this.dpr,this.add(i);var n=this.scene.make.text({x:0,y:i.y,text:h.i18n.t("business_street.choosetheindustry"),style:{fontSize:11*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#0"}}).setOrigin(.5);this.add(n);var a=this.width-24*this.dpr,l=100*this.dpr,c=-50*this.dpr;this.gridtable=this.createGrideTable(0,c,a,l,90*this.dpr,100*this.dpr),this.isFirst?(this.recommendedText=this.scene.make.text({x:0,y:20*this.dpr,text:"Recommended",style:{fontSize:13*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#697AFF"}}).setOrigin(.5,0),this.recommendedText.setFontStyle("bold"),this.add(this.recommendedText),this.describleText=this.scene.make.text({x:0,y:this.recommendedText.y+this.recommendedText.height+10*this.dpr,text:"This industry has great development potential.",style:{fontSize:11*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#0"}}).setOrigin(.5,0),this.add(this.describleText),this.turnoverText=new s.BBCodeText(this.scene,0,this.describleText.y+this.describleText.height+10*this.dpr).setOrigin(.5,0).setFontSize(11*this.dpr).setFontFamily(h.Font.DEFULT_FONT).setColor("#0"),this.add(this.turnoverText),n.text=h.i18n.t("business_street.choosetheindustry"),i.resize(135*this.dpr,17*this.dpr)):(this.coinBg=this.scene.make.image({key:o.c.commonKey,frame:"price_bg"}),this.coinBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.coinBg.y=30*this.dpr,this.add(this.coinBg),this.coinImg=this.scene.make.image({key:o.c.commonKey,frame:"iv_coin"}),this.coinImg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.coinImg.setPosition(this.coinBg.x-.5*this.coinImg.width-15*this.dpr,this.coinBg.y),this.add(this.coinImg),this.coinCount=this.scene.make.text({x:this.coinImg.x+.5*this.coinImg.width+10*this.dpr,y:this.coinImg.y,text:"0",style:{fontSize:11*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#0"}}).setOrigin(0,.5),this.add(this.coinCount),this.describleText2=this.scene.make.text({x:0,y:this.coinCount.y+50*this.dpr,text:"55225sadffqwerqwerqwer",style:{fontSize:10*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#0",wordWrap:{width:244*this.dpr,useAdvancedWrap:!0}}}).setOrigin(.5),this.add(this.describleText2),n.text=h.i18n.t("business_street.choosestorelike"),i.resize(155*this.dpr,17*this.dpr));var m=new s.NineSliceButton(this.scene,-60*this.dpr,.5*this.height-7*this.dpr,92*this.dpr,34*this.dpr,o.c.commonKey,"red_btn",h.i18n.t("common.cancel"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(m),m.setTextStyle({fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#ffffff"}),m.on(String(s.ClickEvent.Tap),this.onCancelHandler,this);var f=new s.NineSliceButton(this.scene,60*this.dpr,m.y,92*this.dpr,34*this.dpr,o.c.commonKey,"yellow_btn",h.i18n.t("business_street.select"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(f),f.on(String(s.ClickEvent.Tap),this.onSelectHandler,this),f.setTextStyle({fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#996600"})},PicaBusinessStoreCreatePanel.prototype.createGrideTable=function(e,i,n,a,o,h){var l=this,c={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:o,cellHeight:h,reuseCellContainer:!0,tableOY:5*this.dpr,zoom:this.zoom},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&(i=new m(l.scene,0,0,o,h,l.key,l.dpr,l.zoom)),i.setData({item:n}),i.setStoreData(n),l.curSelectData&&n===l.curSelectData?i.select=!0:i.select=!1,i}},f=new s.GameGridTable(this.scene,c);return f.layout(),f.on("cellTap",(function(e){e&&l.onGridSelectHandler(e)})),this.add(f),f},PicaBusinessStoreCreatePanel.prototype.onGridSelectHandler=function(e){this.setTypeInfo(e.storeData),this.curSelectItem&&(this.curSelectItem.select=!1),e.select=!0,this.curSelectItem=e},PicaBusinessStoreCreatePanel.prototype.onCancelHandler=function(){this.cancelHandler&&this.cancelHandler.run()},PicaBusinessStoreCreatePanel.prototype.onSelectHandler=function(){this.selectHandler&&this.selectHandler.runWith(this.curSelectData)},PicaBusinessStoreCreatePanel}(Phaser.GameObjects.Container),m=function(e){function StoreTypeItem(i,n,a,s,o,l,c,m){var f=e.call(this,i,n,a)||this;return f.isSelect=!1,f.dpr=c,f.key=l,f.setSize(s,o),f.bg=f.scene.make.image({key:l,frame:"store_bg"}),f.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),f.add(f.bg),f.storeIcon=f.scene.make.image({key:l,frame:"restaurant_icon"}),f.storeIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),f.storeIcon.setPosition(0,-8*c),f.add(f.storeIcon),f.storeName=f.scene.make.text({x:0,y:f.storeIcon.y+.5*f.storeIcon.height+10*c,text:"Restaurant",style:{color:"#0",fontSize:10*c,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(.5),f.add(f.storeName),f}return l(StoreTypeItem,e),StoreTypeItem.prototype.setStoreData=function(e){if(this.storeData=e,"industryType"in e)this.storeIcon.setFrame(e.industryType+"_icon"),this.storeName.text=e.name;else{var i=e;this.storeIcon.setFrame(i.storeType+"_icon"),this.storeName.text=i.name}},Object.defineProperty(StoreTypeItem.prototype,"select",{get:function(){return this.isSelect},set:function(e){this.isSelect=e;var i=e?"store_bg_click":"store_bg";this.bg.setFrame(i)},enumerable:!1,configurable:!0}),StoreTypeItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessStreetListPanel",(function(){return g}));var a,s,o=n(805),h=n(788),l=n(0),c=n(789),m=n(790),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaBusinessStreetListPanel(i,n,a,o,h,l,c,m,f,g){var _=e.call(this,i,a,o)||this;return _.render=n,_.curCategoryType=s.popularity,_.dpr=c,_.key=f,_.key2=g,_.zoom=m,_.setSize(h,l),_.create(),_}return f(PicaBusinessStreetListPanel,e),PicaBusinessStreetListPanel.prototype.setIndustryModels=function(e){for(var i=[{text:l.i18n.t("business_street.popularity"),data:{categoryType:s.popularity}},{text:l.i18n.t("business_street.praise"),data:{categoryType:s.praise}}],n=[],a=0,o=e.industry;a<o.length;a++)for(var c=0,m=o[a].roomModels;c<m.length;c++){var f=m[c];-1===n.indexOf(f.storeType)&&n.push({type:f.storeType,name:f.name})}this.secondaryPanel.setCategories(h.TabButton,i,{width:88*this.dpr,height:27*this.dpr,key:this.key2,normalFrame:"navigation_bar_click",downFrame:"navigation_bar_click",textStyle:{fontSize:14*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#ffffff"}},new l.Handler(this,(function(e){for(var i=0,n=e;i<n.length;i++){n[i].background.visible=!1}}))),this.secondaryPanel.setSubItems(n)},PicaBusinessStreetListPanel.prototype.setStreetListData=function(e){this.gridtable.setT(0),this.gridtable.setItems(e)},PicaBusinessStreetListPanel.prototype.setHandler=function(e,i,n,a,s){this.historyHandler=e,this.rankHandler=i,this.backHandler=n,this.queryHandler=a,this.enterHandler=s},PicaBusinessStreetListPanel.prototype.resetMask=function(){this.gridtable.resetMask()},PicaBusinessStreetListPanel.prototype.create=function(){var e=this,i=.5*-this.height,n=.5*-this.width,a=this.scene.make.image({key:this.key,frame:"store_icon"});a.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),a.x=n+30*this.dpr,a.y=i+6*this.dpr,this.add(a);var s=a.x+.5*a.width+10*this.dpr,f=this.scene.make.text({x:s,y:a.y,text:l.i18n.t("business_street.street"),style:{fontSize:13*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#FFC51A"}}).setOrigin(0,.5);f.setFontStyle("bold"),f.setStroke("#553100",2*this.dpr),this.add(f),this.secondaryPanel=new o.SecondaryMenuPanel(this.scene,0,i+56*this.dpr,this.width,60*this.dpr,this.dpr,this.zoom,{x:0,y:-15*this.dpr,width:this.width-30*this.dpr,height:30*this.dpr,zoom:this.zoom,dpr:this.dpr,orientation:1,align:1}),this.add(this.secondaryPanel);var g=this.scene.make.image({key:this.key2,frame:"navigation_bar"});g.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.secondaryPanel.gameScroll.addAt(g),this.secondaryPanel.createGrideTable(0,13*this.dpr,this.width-30*this.dpr,40*this.dpr,65*this.dpr,40*this.dpr,(function(i,n){var a=i.item;return n||(n=new c.TextButton(e.scene,e.dpr,e.zoom)).setFontSize(13*e.dpr),n.getData("itemData")!==a&&(n.setText(a.name),n.setData("itemData",a),e.subCategory===a.type?n.changeDown():n.changeNormal()),n})),this.secondaryPanel.setHandler(new l.Handler(this,this.onCategoryHandler),new l.Handler(this,this.onSubCategoryHandle)),this.secondaryPanel.setButtonChangeHandler(new l.Handler(this,(function(e){e.background.visible=!1})),new l.Handler(this,(function(e){e.background.visible=!0,e.changeDown()})));var _=this.scene.make.image({key:this.key2,frame:"navigation_bar_2"});_.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.secondaryPanel.gridTable.addAt(_);var T=this.width,x=this.height-130*this.dpr,S=i+88*this.dpr+.5*x;this.gridtable=this.createGrideTable(0,S,T,x,256*this.dpr,50*this.dpr);var j=new h.Button(this.scene,this.key2,"ranking","ranking"),q=-n-.5*j.width-20*this.dpr;j.setPosition(q,i+6*this.dpr),j.on(String(h.ClickEvent.Tap),this.onRankHandler,this),this.add(j);var Y=new h.Button(this.scene,this.key2,"history","history");Y.setPosition(q-.5*j.width-.5*Y.width-10*this.dpr,i+6*this.dpr),Y.on(String(h.ClickEvent.Tap),this.onHistoryHandler,this),this.add(Y);var X=new h.NineSliceButton(this.scene,0,.5*this.height-7*this.dpr,92*this.dpr,34*this.dpr,m.c.commonKey,"red_btn",l.i18n.t("business_street.back"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr});this.add(X),X.setTextStyle({fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#ffffff"}),X.on(String(h.ClickEvent.Tap),this.onBackHandler,this)},PicaBusinessStreetListPanel.prototype.createGrideTable=function(e,i,n,a,s,o){var l=this,m={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:s,cellHeight:o,reuseCellContainer:!0,tableOX:19*this.dpr,zoom:this.zoom},press:{tapInterval:50},scrollMode:0,clamplChildOY:!1,interactive:!0,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&(i=new _(l.scene,0,0,s,o,l.key,l.key2,l.dpr,l.zoom),f.add(i)),i.setData({item:n}),i.setStoreData(n,l.curCategoryType),i}},f=new h.GameGridTable(this.scene,m);return f.on("cellTap",(function(e){e&&l.onSelectItemHandler(e)})),f.on("cellDown",(function(e){new c.TweenCompent(l.scene,e,{scale:.96,pingpang:!0}).tween()})),f.layout(),this.add(f),f},PicaBusinessStreetListPanel.prototype.onCategoryHandler=function(e){if(this.curCategoryType=e.categoryType,void 0!==this.subCategory){var i=this.curCategoryType===s.popularity?"popularity":"praise";this.queryHandler.runWith([i,this.subCategory])}},PicaBusinessStreetListPanel.prototype.onSubCategoryHandle=function(e){var i=e.getData("itemData");this.curSubCategoryItem&&this.curSubCategoryItem.changeNormal(),e.changeDown(),this.curSubCategoryItem=e,this.subCategory=i.type;var n=this.curCategoryType===s.popularity?"popularity":"praise";this.queryHandler&&this.queryHandler.runWith([n,this.subCategory])},PicaBusinessStreetListPanel.prototype.onSelectItemHandler=function(e){var i=e.storeData;this.enterHandler&&this.enterHandler.runWith(i.roomId)},PicaBusinessStreetListPanel.prototype.onHistoryHandler=function(){this.historyHandler&&this.historyHandler.run()},PicaBusinessStreetListPanel.prototype.onRankHandler=function(){this.rankHandler&&this.rankHandler.run()},PicaBusinessStreetListPanel.prototype.onBackHandler=function(){this.backHandler&&this.backHandler.run()},PicaBusinessStreetListPanel}(Phaser.GameObjects.Container),_=function(e){function PicStreetItem(i,n,a,s,o,m,f,g,_){var T=e.call(this,i,n,a)||this;T.dpr=g,T.key=m,T.key2=f,T.setSize(s,o);var x=.5*-T.width,S=.5*-T.height;T.bg=new h.NineSlicePatch(T.scene,0,0,s,45*g,T.key,"restaurant_bg",{left:4*T.dpr,top:9*T.dpr,right:4*T.dpr,bottom:9*T.dpr}),T.add(T.bg);var j=T.scene.make.image({key:f,frame:"icon_bg_s"});j.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),j.setPosition(x+.5*j.width+3*g,0),T.add(j),T.storeIcon=new c.DynamicImage(T.scene,j.x,0),T.add(T.storeIcon);var q=j.x+.5*j.width+10*g;return T.storeName=T.scene.make.text({x:q,y:S+10*g,text:"",style:{color:"#FFE11A",fontSize:12*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),T.add(T.storeName),T.playerName=T.scene.make.text({x:q,y:T.storeName.y+.5*T.storeName.height+10*g,text:"",style:{color:"#ffffff",fontSize:11*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0),T.add(T.playerName),T.industryIcon=T.scene.make.image({key:T.key2,frame:"entertainment_tag_s"}),T.industryIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),T.industryIcon.x=.5*T.width-.5*T.industryIcon.width,T.add(T.industryIcon),T.praiseIcon=T.scene.make.image({key:f,frame:"praise"}),T.praiseIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),T.praiseIcon.x=-x-80*g,T.add(T.praiseIcon),T.praiseCount=T.scene.make.text({x:T.praiseIcon.x+.5*T.praiseIcon.width+10*g,y:T.praiseIcon.y,text:"",style:{color:"#ffffff",fontSize:12*g,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0,.5),T.add(T.praiseCount),T}return f(PicStreetItem,e),PicStreetItem.prototype.setStoreData=function(e,i){var n=e.industry,a=e.storeType;this.bg.setFrame(n+"_bg"),this.storeIcon.setTexture(this.key2,a+"_icon_s"),this.praiseIcon.setFrame(i===s.praise?"praise":"store_popularity"),this.storeName.text=e.name,this.playerName.text=e.ownerName,this.praiseCount.text=(i===s.praise?e.praise:e.popularity)+"",this.industryIcon.setFrame(n+"_tag_s"),this.storeData=e},PicStreetItem}(Phaser.GameObjects.Container);!function(e){e[e.popularity=1]="popularity",e[e.praise=2]="praise"}(s||(s={}))},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaFurniUnlockEffectPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaFurniUnlockEffectPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.render=n,l.effectQueue=[],l.isPlaying=!1,l.setSize(a,s),l.key=o,l.dpr=h,l}return c(PicaFurniUnlockEffectPanel,e),PicaFurniUnlockEffectPanel.prototype.play=function(e){this.effectQueue=this.effectQueue.concat(e),this.playNext()},PicaFurniUnlockEffectPanel.prototype.playNext=function(){var e=this;if(!this.isPlaying&&this.effectQueue.length>0){var i=this.effectQueue.shift(),n=new f(this.scene,h.d.effectcommon,this.dpr);n.setItemData(i,l.Handler.create(this,(function(){e.isPlaying=!1,e.playNext()})));var a=.5*-this.height+100*this.dpr,s=a+.5*n.width-10*this.dpr,o=a+20*this.dpr;n.x=0,n.alpha=0,n.playMove(s,o),this.add(n),this.isPlaying=!0}},PicaFurniUnlockEffectPanel}(Phaser.GameObjects.Container),f=function(e){function PicaUnlockEffectItem(i,n,a){var h=e.call(this,i)||this;return h.relativepoints=[0,-67,-50,-59,-52,-59,-54],h.key=n,h.dpr=a,h.bg=i.make.image({key:n,frame:"repair_popup_bg"}),h.add(h.bg),h.setSize(h.bg.width,h.bg.height),h.titletext=new s.BBCodeText(i,0,0,"",{fontFamily:l.Font.DEFULT_FONT,fontSize:14*a,color:"#00CCFF",lineSpacing:4*a}).setOrigin(0),h.titletext.x=.5*-h.width+20*a,h.titletext.y=-6*a,h.add(h.titletext),h.furinIcon=new o.DynamicImage(i,.5*h.width-50*a,0),h.add(h.furinIcon),h.sprite1=h.scene.make.image({key:n,frame:"repair_popup_star1"}),h.sprite1.x=.5*h.width-.5*h.sprite1.width-20*a,h.sprite1.y=3*a,h.sprite1.alpha=0,h.sprite2=h.scene.make.image({key:n,frame:"repair_popup_star2"}),h.sprite2.x=-50*a,h.sprite2.y=-33*a,h.sprite2.alpha=0,h.add([h.sprite1,h.sprite2]),h}return c(PicaUnlockEffectItem,e),PicaUnlockEffectItem.prototype.setItemData=function(e,i){this.compl=i;var n="[b][color=#00CCFF]"+e.line1+"[/color][/b]";e.line2&&(n+="\n[b][color=#00CCFF]"+e.line2+"[/color][/b]"),this.titletext.setText(n)},PicaUnlockEffectItem.prototype.playMove=function(e,i){var n=this;if(this.scene){var a=[];this.y=e+this.relativepoints[0]*this.dpr;for(var s=0,o=this.relativepoints;s<o.length;s++){var h=o[s];a.push({y:e+h*this.dpr})}this.alpha=0;var l=this.scene.tweens.add({targets:this,alpha:{from:0,to:1,duration:200,ease:"Cubic.easeIn"},delay:50,onComplete:function(){l.stop(),l.remove()}});this.scene.tweens.timeline({targets:this,ease:"Linear",tweens:a,totalDuration:700,onComplete:function(){n.scene&&(n.playAlphaAni(n.sprite1),setTimeout((function(){n.playAlphaAni(n.sprite2)}),300),setTimeout((function(){n.playFadeout()}),3e3))}})}},PicaUnlockEffectItem.prototype.playAlphaAni=function(e,i,n,a){var s=this;if(void 0===i&&(i=!0),void 0===n&&(n=0),void 0===a&&(a=400),this.scene)var o=this.scene.tweens.add({targets:e,alpha:{from:0,to:1},ease:"Linear",duration:a,yoyo:i,onComplete:function(){o.stop(),o.remove(),++n<2?s.playAlphaAni(e,!0,n):2===n&&s.playAlphaAni(e,!1,n,400)}})},PicaUnlockEffectItem.prototype.playFadeout=function(){var e=this;if(this.scene)var i=this.scene.tweens.add({targets:this,alpha:{from:1,to:0},ease:"Linear",duration:200,onComplete:function(){i.stop(),i.remove(),e.compl&&e.compl.run(),e.destroy()}})},PicaUnlockEffectItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaEquipUpgradeItem",(function(){return c}));var a,s=n(788),o=n(0),h=n(789),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaEquipUpgradeItem(i,n,a,s,o,h){var l=e.call(this)||this;return l.haveEquiped=!1,l.cellWidth=0,l.cellHeight=0,l.dpr=a,l.zoom=s,l.key=o,l.commonKey=h,l.mScene=i,l.mContainer=n,l.create(),l}return l(PicaEquipUpgradeItem,e),PicaEquipUpgradeItem.prototype.setEquipItems=function(e){var i=e.equipmentType,n=e.mineEquipments;this.titleName.text=i;for(var a=0,s=n;a<s.length;a++){if(s[a].selected){this.haveEquiped=!0;break}0}this.gridTable.setItems(n),this.haveEquiped&&this.setBgTexture(e.isblue)},PicaEquipUpgradeItem.prototype.setTransPosition=function(e,i){this.bg.x+=e,this.bg.y+=i,this.titleName.x+=e,this.titleName.y+=i,this.bottombg.x+=e,this.bottombg.y+=i,this.equipName.x+=e,this.equipName.y+=i,this.penetrationText.x+=e,this.penetrationText.y+=i,this.equipDes.x+=e,this.equipDes.y+=i,this.topbg.x+=e,this.topbg.y+=i,this.unlockbtn.x+=e,this.unlockbtn.y+=i,this.gridTable.refreshPos(e,i-10*this.dpr),this.gridTable.resetMask()},Object.defineProperty(PicaEquipUpgradeItem.prototype,"displayList",{get:function(){return[this.bg,this.topbg,this.bottombg,this.titleName,this.equipName,this.penetrationText,this.equipDes]},enumerable:!1,configurable:!0}),PicaEquipUpgradeItem.prototype.refreshEquipData=function(e,i){this.gridTable.items[i]=e;for(var n=0,a=this.gridTable.getCells();n<a.length;n++){var s=a[n];if(s&&s.container){var o=s.container.itemData;o.id===e.id?s.container.setItemData(e):s.container.setItemData(o)}}this.curSelectItemData.id===e.id&&(this.curSelectItemData=e),this.updateEquipItem(this.curSelectItemData)},PicaEquipUpgradeItem.prototype.destroy=function(){this.unlockbtn&&this.unlockbtn.off("pointerup",this.onUnlockEquipHandler,this),e.prototype.destroy.call(this),this.gridTable&&this.gridTable.destroy(),this.bg=null,this.topbg=null,this.bottombg=null,this.gridTable=null,this.titleName=null,this.equipName=null,this.penetrationText=null,this.equipDes=null,this.unlockbtn=null,this.costNum=null,this.diamondIcon=null,this.curEquipItem=null,this.curSelectItemData=null},PicaEquipUpgradeItem.prototype.setBgTexture=function(e){var i=e?"topbg1":"topbg",n=e?"bottombg1":"bottombg",a=e?"#0867AE":"#8F4300";this.topbg.setTexture(this.key,i),this.bottombg.setTexture(this.key,n),this.titleName.setColor(a).setStroke(a,1),this.equipName.setColor(a).setStroke(a,1),this.penetrationText.setColor(a).setStroke(a,1)},PicaEquipUpgradeItem.prototype.create=function(){this.bg=this.mScene.make.image({x:0,y:-21*this.dpr,key:this.key,frame:"bg1"}),this.topbg=this.mScene.make.image({x:0,y:-61*this.dpr,key:this.key,frame:"topbg"}),this.titleName=this.mScene.make.text({x:0,y:this.topbg.y+0*this.dpr,text:"矿镐",style:{blod:!0,color:"#8F4300",fontSize:14*this.dpr,fontFamily:o.Font.DEFULT_FONT}}).setOrigin(.5,.5),this.titleName.setFontStyle("bold"),this.bottombg=this.mScene.make.image({x:0,y:42*this.dpr,key:this.key,frame:"bottombg"}),this.equipName=this.mScene.make.text({x:-120*this.dpr,y:15*this.dpr,text:"精铁镐",style:{color:"#8F4300",fontSize:14*this.dpr,fontFamily:o.Font.DEFULT_FONT}}),this.equipName.setFontStyle("bold"),this.penetrationText=this.mScene.make.text({x:-60*this.dpr,y:16*this.dpr,text:"穿透力:10",style:{color:"#8F4300",fontSize:12*this.dpr,fontFamily:o.Font.DEFULT_FONT}}),this.equipDes=this.mScene.make.text({x:-120*this.dpr,y:35*this.dpr,text:"描述文字",style:{color:"#000000",fontSize:10*this.dpr,fontFamily:o.Font.DEFULT_FONT,wordWrap:{width:130*this.dpr,useAdvancedWrap:!0}}}),this.equipDes.setStroke("#000000",1),this.mContainer.add([this.bg,this.topbg,this.bottombg,this.titleName,this.equipName,this.penetrationText,this.equipDes]),this.createGridTable(),this.createBtn()},PicaEquipUpgradeItem.prototype.createGridTable=function(){var e=this,i=this.mScene.textures.getFrame(this.key,"equipbg"),n=i.width+10*this.dpr,a=i.height+30*this.dpr;this.cellWidth=n,this.cellHeight=a;var o={x:0,y:0,scrollMode:1,table:{width:259*this.dpr,height:77*this.dpr,columns:1,cellWidth:n,cellHeight:a,reuseCellContainer:!0,cellOriginX:0,cellOriginY:0,zoom:this.zoom},clamplChildOY:!1,createCellContainerCallback:function(i,s){var o=i.scene,h=i.item;i.index;return null===s&&((s=new m(o,e.dpr,e.key)).setSize(n,a),s.setChildPosition()),s.setData({item:h}),s.setItemData(h),e.curSelectItemData===h?(s.setSelect(!0),e.curEquipItem=s):s.setSelect(!1),null==e.curEquipItem&&(e.haveEquiped&&!h.selected||e.onSelectItemHandler(s)),s}};this.gridTable=new s.GameGridTable(this.mScene,o),this.gridTable.layout(),this.gridTable.on("cellTap",(function(i){e.onSelectItemHandler(i)})),this.mContainer.add(this.gridTable)},PicaEquipUpgradeItem.prototype.onSelectItemHandler=function(e){this.curEquipItem&&this.curEquipItem.setSelect(!1);var i=e.itemData;this.curSelectItemData=i,this.updateEquipItem(i),e.setSelect(!0),this.curEquipItem&&this.curEquipItem.setSelect(!1),this.curEquipItem=e,i.owned&&!i.selected&&this.emit("reqEquiped",i.id)},PicaEquipUpgradeItem.prototype.updateEquipItem=function(e){if(this.penetrationText.text=e.buffDisplayNames[0],this.equipDes.text=e.description,this.equipName.text=e.name,e.owned?this.unlockbtn.visible=!1:this.unlockbtn.visible=!0,e.qualified?(this.unlockCondition.visible=!1,this.unlockbtn.setInteractive(),this.unlockBg.clearTint(),this.costNum.setColor("#ffffff")):e.owned||(this.unlockCondition.visible=!0,this.unlockCondition.text=e.conditionDisplayNames[0],this.unlockbtn.disableInteractive(),this.unlockBg.setTintFill(8947848),this.costNum.setColor("#999999")),null===e.price)this.costNum.visible=!1,this.diamondIcon.visible=!1,this.btnName.setPosition(0,0*this.dpr);else{var i=e.price.price,n=Math.pow(10,e.price.displayPrecision);this.costNum.text=Math.floor(i*n)/n+"",this.costNum.visible=!0,this.diamondIcon.visible=!0,this.diamondIcon.setTexture(this.commonKey,o.Coin.getIcon(e.price.coinType)),this.diamondIcon.setDisplaySize(12*this.dpr,12*this.dpr),this.btnName.setPosition(0,6*this.dpr)}},PicaEquipUpgradeItem.prototype.onUnlockEquipHandler=function(){this.emit("reqActive",this.curEquipItem.itemData.id)},PicaEquipUpgradeItem.prototype.createBtn=function(){this.unlockCondition=new s.BBCodeText(this.mScene,0,-26*this.dpr,"",{}).setOrigin(.5).setFontSize(10*this.dpr).setFontFamily(o.Font.DEFULT_FONT),this.unlockbtn=this.mScene.make.container(void 0,!1);var e=new s.NinePatch(this.mScene,0,0,88*this.dpr,31*this.dpr,this.commonKey,"yellow_btn_normal",void 0,void 0,{left:12*this.dpr,top:12*this.dpr,right:12*this.dpr,bottom:12*this.dpr});this.unlockBg=e,this.diamondIcon=this.mScene.make.image({x:-13*this.dpr,y:-8*this.dpr,key:this.commonKey,frame:"test_diamond"}),this.costNum=this.mScene.make.text({x:-2,y:-8*this.dpr,text:"1000",style:{color:"#ffffff",fontSize:10*this.dpr,fontFamily:o.Font.DEFULT_FONT}}).setOrigin(0,.5),this.btnName=this.mScene.make.text({x:0,y:6*this.dpr,text:"立即解锁",style:{color:"#8F4300",fontSize:11*this.dpr,fontFamily:o.Font.DEFULT_FONT}}).setOrigin(.5,.5),this.costNum.setStroke("#ffffff",1),this.btnName.setStroke("#8F4300",1),this.unlockCondition.setStroke("#000000",1),this.unlockbtn.setPosition(70*this.dpr,48*this.dpr),this.unlockbtn.setSize(e.width,e.height),this.unlockbtn.add([this.unlockCondition,e,this.diamondIcon,this.costNum,this.btnName]),this.unlockbtn.on("pointerup",this.onUnlockEquipHandler,this),this.mContainer.add(this.unlockbtn)},PicaEquipUpgradeItem}(Phaser.Events.EventEmitter),m=function(e){function EquipItemCell(i,n,a){var s=e.call(this,i)||this;return s.isSelect=!1,s.isUnlock=!1,s.dpr=n,s.key=a,s.create(),s}return l(EquipItemCell,e),EquipItemCell.prototype.setItemData=function(e){var i=this;this.itemData=e;var n=o.Url.getOsdRes(e.display.texturePath);this.equipIcon.load(n,this,(function(){i.equipIcon.scale=i.dpr})),this.setEquiped(e.selected,e.owned),this.setSelect(this.isSelect)},EquipItemCell.prototype.setSelect=function(e){this.isSelect=e;var i="equipbg";e||(i=this.isUnlock?"equipbg2":"equipbg1"),this.itemData.selected&&(i="equipbg2"),this.bg.setTexture(this.key,i)},EquipItemCell.prototype.setChildPosition=function(){var e=.5*this.bg.width+10*this.dpr,i=this.height-10*this.dpr;this.bg.setPosition(e,i),e+=1*this.dpr,i=.5*this.height+2*this.dpr,this.equipIcon.setPosition(e,i),e+=22*this.dpr,i=8*this.dpr,this.unlock.setPosition(e,i)},EquipItemCell.prototype.setEquiped=function(e,i){this.isUnlock=i,this.unlock.visible=!1,e?(this.isUnlock=!0,this.unlock.visible=!0,this.unlock.setTexture(this.key,"ok")):this.isUnlock||(this.unlock.visible=!0,this.unlock.setTexture(this.key,"lock"))},EquipItemCell.prototype.create=function(){this.bg=this.scene.make.image({x:0,y:-10*this.dpr,key:this.key,frame:"equipbg"}),this.equipIcon=new h.DynamicImage(this.scene,15*this.dpr,0*this.dpr),this.unlock=this.scene.make.image({x:30*this.dpr,y:-10*this.dpr,key:this.key,frame:"lock"}),this.add([this.bg,this.equipIcon,this.unlock])},EquipItemCell}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaExploreLogSettlePanel",(function(){return f}));var a,s=n(788),o=n(0),h=n(790),l=n(793),c=n(789),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaExploreLogSettlePanel(i,n,a,o,h){var l=e.call(this,i,0,0,!1)||this;return l.tweens=[],l.curTempScore=0,l.allScore=0,l.isPlayed=!1,l.finished=!1,l.received=!1,l.dpr=o,l.zoom=h,l.setSize(n,a),l.init(),l.enable=!0,l.on(s.ClickEvent.Tap,l.onClickHandler,l),l}return m(PicaExploreLogSettlePanel,e),PicaExploreLogSettlePanel.prototype.resize=function(e,i){this.setSize(e,i),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.8),this.blackGraphic.fillRect(.5*-e,.5*-i,e,i)},PicaExploreLogSettlePanel.prototype.init=function(){this.blackGraphic=this.scene.make.graphics(void 0,!1),this.add(this.blackGraphic),this.content=this.scene.make.container(void 0,!1),this.content.setSize(this.width,this.height),this.add(this.content);var e=-200*this.dpr;this.titleimage=this.scene.make.image({key:h.d.explorelog,frame:"Settlement_title"},!1),this.titleimage.y=e,this.starPro=new c.ProgressMaskBar(this.scene,h.d.explorelog,"Settlement_star_default","Settlement_star_Light"),this.starPro.y=this.titleimage.y+.5*this.titleimage.height+.5*this.starPro.height+5*this.dpr,this.starText=this.scene.make.text({x:0,y:this.titleimage.y+40*this.dpr,text:"",style:o.UIHelper.whiteStyle(this.dpr,11)}).setOrigin(.5),this.starText.y=this.starPro.y+.5*this.starPro.height+10*this.dpr,this.unkownImg=new T(this.scene,this.dpr),this.unkownImg.y=this.starText.y,this.unkownImg.visible=!1,this.scorebg=this.scene.make.image({key:h.d.explorelog,frame:"Settlement_score_bg"}),this.scorebg.y=this.starText.y+15*this.dpr+.5*this.scorebg.height,this.scoreTex=this.scene.make.text({x:0,y:this.scorebg.y,text:"",style:o.UIHelper.colorStyle("#FFE057",39*this.dpr)}).setOrigin(.5),this.lightImg=this.scene.make.image({key:h.d.explorelog,frame:"Settlement_light"}),this.lightImg.y=this.scoreTex.y,this.lightImg.visible=!1,this.scoreTipsCon=this.scene.make.container(void 0,!1),this.scoreTipsCon.setSize(244*this.dpr,160*this.dpr),this.scoreTipsCon.y=this.scorebg.y+.5*this.scoreTipsCon.height,this.maskGraphic=this.scene.make.graphics(void 0,!1),this.maskWidth=336*this.dpr,this.maskHeight=215*this.dpr,this.content.add([this.titleimage,this.starPro,this.starText,this.unkownImg,this.scorebg,this.scoreTex,this.lightImg,this.scoreTipsCon])},PicaExploreLogSettlePanel.prototype.setHandler=function(e){this.closeHandler=e},PicaExploreLogSettlePanel.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.tweens.length>0)for(var i=0,n=this.tweens;i<n.length;i++){var a=n[i];a.stop(),a.remove()}this.tweens.length=0},PicaExploreLogSettlePanel.prototype.setSettleData=function(e){if(e){this.initParam(),this.settleData=e,this.scoreDatas=this.getScoreArr(e),this.playScoreTipsAnimation(),this.maskWidth=336*this.dpr,this.maskHeight=215*this.dpr,this.curLayoutGroup=this.createLayoutGroup(e.rewards),this.curLayoutGroup.y=.5*this.height,this.curLayoutGroup.visible=!1,this.setLayoutMask(this.maskWidth,this.curLayoutGroup.height+20*this.dpr);var i=this.getProgressValue(e.previousProgress);this.starPro.setProgress(i,500),this.setStarProgressInfo()}},PicaExploreLogSettlePanel.prototype.initParam=function(){this.isPlayed=!1,this.allScore=0,this.curTempScore=0,this.scoreTex.text=this.allScore+""},PicaExploreLogSettlePanel.prototype.getScoreArr=function(e){var i=[];return e.pointBase>=0&&(i.push({tip:o.i18n.t("explore.basetips"),score:e.pointBase}),this.allScore+=e.pointBase),e.pointTime>=0&&(i.push({tip:o.i18n.t("explore.timetips"),score:e.pointTime}),this.allScore+=e.pointTime),e.pointAccuracy>=0&&(i.push({tip:o.i18n.t("explore.accuracytips"),score:e.pointAccuracy}),this.allScore+=e.pointAccuracy),e.pointHint>=0&&(i.push({tip:o.i18n.t("explore.hinttips"),score:e.pointHint}),this.allScore+=e.pointHint),i},PicaExploreLogSettlePanel.prototype.setLayoutMask=function(e,i){var n=e,a=i;this.maskGraphic.clear(),this.maskGraphic.fillStyle(0),this.maskGraphic.fillRect(.5*-n*this.zoom,.5*-a*this.zoom,n*this.zoom,a*this.zoom);var s=this.getWorldTransformMatrix(),o=.5*i+50*this.dpr;this.maskGraphic.setPosition(s.tx,s.ty+o),this.curLayoutGroup.setMask(this.maskGraphic.createGeometryMask())},PicaExploreLogSettlePanel.prototype.excuteNextDatas=function(e){var i=this.scoreDatas;if(i.length>0){var n=i.shift(),a=new g(this.scene,100*this.dpr,45*this.dpr,this.dpr,this.zoom);return a.setTextData(n.tip,n.score),a.y=.5*this.scoreTipsCon.height+10*this.dpr,this.scoreTipsCon.add(a),!0===e?this.playScoreTipsFadeIn(a):!1===e&&this.playScoreTipsFadeOut(a),a.alpha=0,a}this.isPlayed=!0,e?this.curFadeInObj=void 0:this.curFadeOutObj=void 0},PicaExploreLogSettlePanel.prototype.playScoreTipsAnimation=function(){var e=this,i=this.excuteNextDatas(void 0);i.y=0,this.playAlphaTween(i,0,1,500,new o.Handler(this,(function(){e.playScoreTipsFadeOut(i)})))},PicaExploreLogSettlePanel.prototype.clearScoreAnimation=function(){if(this.tweens.length>0)for(var e=0,i=this.tweens;e<i.length;e++){var n=i[e];n.stop(),n.remove()}this.scoreTimer&&(clearInterval(this.scoreTimer),this.scoreTimer=void 0),this.tweens.length=0,this.scoreTipsCon.removeAll(!0),this.lightImg.visible=!1,this.scoreTex.text=this.allScore+"",this.starPro.setProgress(this.settleData.latestProgress,500)},PicaExploreLogSettlePanel.prototype.playCalculateScoreAnimation=function(e,i,n){var a=this,s=e/(i/30),o=this.curTempScore,h=0,l=0;this.scoreTimer=setInterval((function(){(h+=s)>=e&&(clearInterval(a.scoreTimer),h=e,a.curTempScore+=e,a.scoreTimer=void 0,n&&n.run());var i=Math.floor(h);i!==l&&(l=i,a.scoreTex.text=o+l+"")}),30),this.playLightAnimation()},PicaExploreLogSettlePanel.prototype.playScoreTipsFadeIn=function(e){var i=.5*this.scoreTipsCon.height;e.y=i,e.alpha=0,this.playtPosYTween(e,i,0,500),this.playAlphaTween(e,0,1,500),this.curFadeInObj=e},PicaExploreLogSettlePanel.prototype.playScoreTipsFadeOut=function(e){var i=this,n=.5*-this.scoreTipsCon.height;e.y=0,e.alpha=1,this.playtPosYTween(e,0,n,500,void 0),this.playAlphaTween(e,1,0,500,new o.Handler(this,(function(){i.playCalculateScoreAnimation(e.value,300,new o.Handler(i,(function(){i.isPlayed&&(i.playLayoutAnimation(),i.lightImg.visible=!1,i.playStarAnimation(i.settleData.previousProgress,i.settleData.latestProgress,500)),i.curFadeInObj&&i.playScoreTipsFadeOut(i.curFadeInObj)}))),e.destroy()}))),this.scene&&this.excuteNextDatas(!0),this.curFadeOutObj=e},PicaExploreLogSettlePanel.prototype.playStarAnimation=function(e,i,n){var a=this,s=(i-e)/n*5e3,o=this.getProgressValue(i),h=this.getProgressValue(e),l=this.scene.tweens.addCounter({from:h,to:o,ease:"Linear",duration:s,onUpdate:function(e,i){a.starPro.setProgress(i.value,n)},onComplete:function(){l.stop(),l.remove(),a.removeTween(l),a.received&&a.unkownImg.playAni()}});this.tweens.push(l)},PicaExploreLogSettlePanel.prototype.getProgressValue=function(e){var i=Math.floor(e/100),n=75.75*i+30.3*i;return(n=n<0?0:n)+Math.floor(e%100)/100*75.75},PicaExploreLogSettlePanel.prototype.setStarProgressInfo=function(){var e=this.settleData.latestProgress,i=Math.floor(e/100),n=Math.floor(this.settleData.previousProgress/100),a=Math.floor(e%100);a=a||100;var s=196*this.dpr,o=29*this.dpr,h=12*this.dpr;this.starText.text=a+"%",this.starText.x=100===a&&i>0?.5*-s+(i-1)*(o+h)+.5*o:.5*-s+i*(o+h)+.5*o;var l=this.settleData.clue;if(this.unkownImg.visible=!1,l)for(var c=0,m=l;c<m.length;c++){var f=m[c];if(f.star>n){f.star<=i&&(this.received=!0,this.unkownImg.setRewards(f.texturePath)),this.unkownImg.visible=!0;var g=.5*-s+(f.star-1)*(o+h)+.5*o;this.unkownImg.x=g;break}}},PicaExploreLogSettlePanel.prototype.playLayoutAnimation=function(){var e=this.curLayoutGroup,i=.5*this.maskHeight+50*this.dpr,n=i+this.maskHeight+20*this.dpr;e.y=n,this.curLayoutGroup.visible=!0,this.playItemTween(e,n,i,620)},PicaExploreLogSettlePanel.prototype.playItemTween=function(e,i,n,a){var s=this,o=this.scene.tweens.add({targets:e,y:{from:i,to:n},ease:"Back.easeOut",duration:400,delay:a,onComplete:function(){o.stop(),o.remove(),s.removeTween(o),s.finished=!0}});this.tweens.push(o)},PicaExploreLogSettlePanel.prototype.playLightAnimation=function(){var e=this;if(!this.lightImg.visible){this.lightImg.visible=!0,this.lightImg.alpha=0;var i=new o.Handler(this,(function(n){e.lightImg.visible&&(1===n?e.playAlphaTween(e.lightImg,1,.8,60,i):e.playAlphaTween(e.lightImg,.8,1,60,i))}));this.playAlphaTween(this.lightImg,0,1,100,i)}},PicaExploreLogSettlePanel.prototype.playtPosYTween=function(e,i,n,a,s,o){var h=this;if(void 0===a&&(a=500),this.scene){var l=this.scene.tweens.add({targets:e,y:{from:i,to:n},ease:"Linear",duration:a,delay:o,onComplete:function(){l.stop(),l.remove(),h.removeTween(l),s&&s.run()}});this.tweens.push(l)}},PicaExploreLogSettlePanel.prototype.playAlphaTween=function(e,i,n,a,s,o){var h=this;if(void 0===a&&(a=500),this.scene){var l=this.scene.tweens.add({targets:e,alpha:{from:i,to:n},ease:"Linear",duration:a,delay:o,onComplete:function(){l.stop(),l.remove(),h.removeTween(l),s&&s.runWith(n)}});this.tweens.push(l)}},PicaExploreLogSettlePanel.prototype.removeTween=function(e){var i=this.tweens.indexOf(e);-1!==i&&this.tweens.splice(i,1)},PicaExploreLogSettlePanel.prototype.createLayoutGroup=function(e){var i=new _(this.scene,0,this.maskHeight,235*this.dpr,this.maskHeight,this.dpr,this.zoom);return this.content.add(i),i.setRewardDatas(e),i},PicaExploreLogSettlePanel.prototype.onClickHandler=function(){this.isPlayed?this.finished&&this.closeHandler&&this.closeHandler.run():(this.clearScoreAnimation(),this.isPlayed=!0,this.playLayoutAnimation(),this.received&&this.unkownImg.playAni())},PicaExploreLogSettlePanel}(c.ButtonEventDispatcher),g=function(e){function ScoreTipsPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.value=0,h.dpr=s,h.zoom=o,h.setSize(n,a),h.init(),h}return m(ScoreTipsPanel,e),ScoreTipsPanel.prototype.setTextData=function(e,i){this.title.text=e,this.valueTex.text="+"+i,this.value=i},ScoreTipsPanel.prototype.init=function(){this.title=this.scene.make.text({x:0,y:0,text:"",style:o.UIHelper.whiteStyle(this.dpr)}).setOrigin(.5),this.title.y=-12*this.dpr,this.valueTex=this.scene.make.text({x:0,y:0,text:"",style:o.UIHelper.whiteStyle(this.dpr,24)}).setOrigin(.5),this.valueTex.y=11*this.dpr,this.add([this.title,this.valueTex])},ScoreTipsPanel}(Phaser.GameObjects.Container),_=function(e){function RewardLayoutGroup(i,n,a,s,o,l,c){var m=e.call(this,i,n,a)||this;return m.dpr=l,m.zoom=c,m.setSize(s,o),m.bg=m.scene.make.image({key:h.d.explorelog,frame:"Settlement_reward_bg"}),m.content=m.scene.make.container(void 0,!1),m.content.y=10*l,m.add([m.bg,m.content]),m}return m(RewardLayoutGroup,e),RewardLayoutGroup.prototype.setRewardDatas=function(e){if(e){for(var i=e.length,n=0;n<i;n++){var a=new l.ItemButton(this.scene,h.d.uicommon1,"roam_reward_ordinary_bg",this.dpr,this.zoom,!0);a.setStateFrames("roam_reward_ordinary_bg","roam_reward_rare_bg"),a.setItemData(e[n]),this.content.add(a)}this.setLayout()}},RewardLayoutGroup.prototype.setLayout=function(){var e=this.content.list;if(0!==e.length){var i=e[0],n=e.length,a=i.width,s=i.height,o=0,h=0;if(n<=3)for(var l=2===n?20*this.dpr:10*this.dpr,c=n*a+l*(n-1),m=0;m<n;m++){(Y=e[m]).x=.5*-c+(a+l)*m+.5*a}else if(4===n){var f=20*this.dpr,g=15*this.dpr;for(m=0;m<2;m++)for(var _=0;_<2;_++){(Y=e[2*m+_]).x=.5*-(a+f)+(a+f)*_,Y.y=.5*-(s+g)+(s+g)*m}}else if(5===n){c=3*a+2*(f=10*this.dpr);var T=2*s+(g=15*this.dpr);for(m=0;m<3;m++){(Y=e[m]).x=.5*-c+(a+f)*m+.5*a,Y.y=.5*-T+.5*s}for(_=0;_<2;_++){(Y=e[_+3]).x=.5*-(2*a+f)+.5*a+(a+f)*_,Y.y=.5*T-.5*s}}else if(6===n)for(c=3*a+2*(f=10*this.dpr),T=2*s+(g=15*this.dpr),m=0;m<2;m++)for(_=0;_<3;_++){(Y=e[3*m+_]).x=.5*-c+(a+f)*_+.5*a,Y.y=.5*-T+(s+g)*m+.5*s}else{f=10*this.dpr,g=10*this.dpr;var x=Math.floor(e.length/4),S=e.length%4,j=(c=4*a+3*f,x+(0===S?0:1));for(T=j*s+g*(j-1),m=0;m<x;m++)for(_=0;_<4;_++){(Y=e[4*m+_]).x=.5*-c+(a+f)*_+.5*a,Y.y=.5*-T+(s+g)*m+.5*s}var q=S*a+f*(S-1);for(_=0;_<S;_++){var Y;(Y=e[_+4*x]).x=.5*-q+.5*a+(a+f)*_,Y.y=.5*T-.5*s}o=c,h=T,this.width<o&&(this.width=o),this.height<h&&(this.height=h)}}},RewardLayoutGroup}(Phaser.GameObjects.Container),T=function(e){function UnKnownAnimation(i,n){var a=e.call(this,i)||this;return a.pos=[],a.dpr=n,a.unknImg=a.scene.make.image({key:h.d.explorelog,frame:"Settlement_unkown_clue"}).setOrigin(.3,.8),a.unknImg.y=0,a.rewards=new c.DynamicImage(a.scene,0,0),a.rewards.scale=n,a.rewards.visible=!1,a.add([a.rewards,a.unknImg]),a.pos=[{x:0,y:0},{x:-4,y:0},{x:-6,y:-2},{x:-8,y:-4},{x:-10,y:-7},{x:-10,y:-10},{x:-8,y:-12},{x:-6,y:-14},{x:-4,y:-16},{x:-2,y:-14},{x:0,y:-12},{x:2,y:-10},{x:4,y:-8},{x:4,y:-6},{x:4,y:-3},{x:4,y:0},{x:4,y:3},{x:2,y:1}],a.pos=a.pos.concat(a.pos),a}return m(UnKnownAnimation,e),UnKnownAnimation.prototype.destroy=function(i){this.tween&&(this.tween.stop(),this.tween.remove()),e.prototype.destroy.call(this,i)},UnKnownAnimation.prototype.setRewards=function(e){var i=o.Url.getOsdRes(e);this.rewards.load(i)},UnKnownAnimation.prototype.playAni=function(){var e=this;if(0===this.pos.length)return this.rewards.x=this.unknImg.x,this.rewards.y=this.unknImg.y-.3*this.unknImg.height-20*this.dpr,o.UIHelper.playAlphaTween(this.scene,this.unknImg,1,0,100,void 0,0,new o.Handler(this,(function(){e.rewards.visible=!0}))),void o.UIHelper.playtPosYTween(this.scene,this.rewards,this.unknImg.y,this.unknImg.y-30*this.dpr,200,void 0,90);var i=this.pos.shift();this.tween=this.scene.tweens.add({targets:this.unknImg,x:i.x*this.dpr,y:i.y*this.dpr,duration:25,onComplete:function(){e.playAni()}})},UnKnownAnimation}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaGiftLaterctPanel",(function(){return l}));var a,s=n(0),o=n(861),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function PicaGiftLaterctPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.render=n,l.giftQueue=[],l.isPlaying=!1,l.setSize(a,s),l.key=o,l.dpr=h,l}return h(PicaGiftLaterctPanel,e),PicaGiftLaterctPanel.prototype.play=function(e){this.giftQueue=this.giftQueue.concat(new Array(30)),this.playNext()},PicaGiftLaterctPanel.prototype.playNext=function(){var e=this;if(!this.isPlaying&&this.giftQueue.length>0){this.giftQueue.shift();var i=new o.PicaGiftLateralItem(this.scene,this.key,this.dpr);i.setItemData(s.Handler.create(this,(function(){e.isPlaying=!1,e.playNext()})));var n=.5*-this.width-.5*i.width-10*this.dpr,a=.5*-this.width+.5*i.width+10*this.dpr;i.x=n,i.y=.5*this.height-100*this.dpr,i.playMove(n,a),this.add(i),this.isPlaying=!0}},PicaGiftLaterctPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaGiftLateralItem",(function(){return c}));var a,s=n(788),o=n(789),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaGiftLateralItem(i,n,a){var l=e.call(this,i)||this;return l.giftCount=0,l.key=n,l.dpr=a,l.bg=i.make.image({key:n,frame:"gift_bg"}),l.add(l.bg),l.setSize(l.bg.width,l.bg.height),l.headicon=i.make.image({key:n,frame:"gift_head"}),l.headicon.x=.5*-l.width+.5*l.headicon.width+2*a,l.add(l.headicon),l.titletext=new s.BBCodeText(i,0,0,"",h.UIHelper.whiteStyle(a)).setOrigin(0),l.titletext.x=l.headicon.x+.5*l.headicon.width+10*a,l.titletext.y=.5*-l.height+2*a,l.add(l.titletext),l.giftIcon=new o.DynamicImage(i,.5*l.width-50*a,0),l.add(l.giftIcon),l.countTex=l.scene.make.text({x:.5*l.width-5*a,y:0,text:"",padding:{left:0,right:10*a},style:{fontFamily:h.Font.DEFULT_FONT,fontSize:28*a,color:"#FCF863"}}).setFontStyle("bold italic").setStroke("#C25E0D",2*a).setOrigin(.5),l.add(l.countTex),l}return l(PicaGiftLateralItem,e),PicaGiftLateralItem.prototype.setItemData=function(e){this.compl=e,this.titletext.setText("一只狐狸\n"+h.i18n.t("common.give")+"[color=#FFFF41]能量电池[/color]"),this.countTex.text="",this.giftCount=Math.floor(50*Math.random())},PicaGiftLateralItem.prototype.playMove=function(e,i){var n=this,a=this.scene.tweens.add({targets:this,x:{from:e,to:i},ease:"Linear",duration:300,onComplete:function(){a.stop(),a.remove(),n.playCount()}})},PicaGiftLateralItem.prototype.playCount=function(){var e=this,i=this.getCountTweenData(this.giftCount),n=0,a=0===i.acc?1:0,tweenFun=function(){a+=i.acc,(n+=a)>e.giftCount&&(n=e.giftCount),e.countTex.text="x"+n;var s=e.scene.tweens.add({targets:e.countTex,scale:{from:.5,to:1},ease:"Linear",duration:i.duration,onComplete:function(){s.stop(),s.remove(),n<e.giftCount?setTimeout((function(){tweenFun()}),i.interval):setTimeout((function(){e.playAlpha()}),1e3)}})};tweenFun()},PicaGiftLateralItem.prototype.playAlpha=function(){var e=this,i=this.scene.tweens.add({targets:this,alpha:{from:1,to:0},ease:"Linear",duration:200,onComplete:function(){i.stop(),i.remove(),e.compl&&e.compl.run(),e.destroy()}})},PicaGiftLateralItem.prototype.getCountTweenData=function(e){var i;return e<10?i={duration:300,interval:20,acc:0}:e>=10&&e<30?i={duration:300,interval:20,acc:1}:e>=30&&(i={duration:300,interval:20,acc:2}),i},PicaGiftLateralItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaGiftPlayerPanel",(function(){return o}));var a,s=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),o=function(e){function PicaGiftPlayerPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.render=n,l.giftQueue=[],l.isPlaying=!1,l.setSize(a,s),l.key=o,l.dpr=h,l}return s(PicaGiftPlayerPanel,e),PicaGiftPlayerPanel.prototype.play=function(e){this.giftQueue.push(new Array(30)),this.playNext()},PicaGiftPlayerPanel.prototype.playNext=function(){},PicaGiftPlayerPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMailItem",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(793),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaMailItem(i,n,a){var c=e.call(this,i)||this;c.mIsExtend=!1,c.zoom=1,c.dpr=n,c.zoom=a;var m=275*n,f=70*n;c.setSize(m,f),c.content=i.make.container(void 0,!1),c.content.setSize(m,f),c.extendBg=new s.NineSlicePatch(c.scene,0,0,m,f,h.d.mail,"mail_Unfold_bg",{left:30*n,top:60*n,bottom:30*n,right:30*n}),c.bg=c.scene.make.image({key:h.d.mail,frame:"mail_unread_bg"});var g=.5*-m;return c.headbg=i.make.image({key:h.d.mail,frame:"mail_unread_mark_bg"}),c.headbg.x=g+25*n,c.headIcon=c.scene.make.image({key:h.d.mail,frame:"mail_unread_mark"}),c.headIcon.y=c.headbg.y,c.headIcon.x=c.headbg.x,c.accessoryImg=c.scene.make.image({key:h.d.mail,frame:"mail_annex_icon"}),c.accessoryImg.x=c.headIcon.x+.5*c.headIcon.width-5*n,c.accessoryImg.y=c.headIcon.y+.5*c.headIcon.height+0*n,c.redpoint=c.scene.make.image({key:h.d.uicommon,frame:"home_hint_small"}),c.redpoint.x=c.headIcon.x+.5*c.headIcon.width-5*n,c.redpoint.y=c.headIcon.y-.5*c.headIcon.height+0*n,c.mailName=i.make.text({text:"",style:l.UIHelper.whiteStyle(n,13)}).setOrigin(0,.5),c.mailName.setFontStyle("bold"),c.mailName.x=c.headIcon.x+28*n,c.mailName.y=.5*-f+20*n,c.mailSender=i.make.text({text:"",style:l.UIHelper.colorStyle("#FFF449",12*n)}).setOrigin(0),c.mailSender.x=c.mailName.x,c.mailSender.y=c.mailName.y+15*n,c.expirationTime=new _(i,n),c.expirationTime.x=.5*m-10*n,c.mailButton=new o.ThreeSliceButton(c.scene,62*n,25*n,h.d.uicommon,l.UIHelper.threeGreenSmall,l.UIHelper.threeGreenSmall,l.i18n.t("task.receive")),c.mailButton.setFontStyle("bold"),c.mailButton.setTextStyle(l.UIHelper.blackStyle(n)),c.mailButton.x=.5*m-.5*c.mailButton.width-10*n,c.mailButton.on(s.ClickEvent.Tap,c.onMailButtonHandler,c),c.arrow=c.scene.make.image({key:h.d.mail,frame:"mail_read_arrow"}),c.arrow.y=.5*f-.5*c.arrow.height-5*n,c.content.add([c.bg,c.headbg,c.headIcon,c.accessoryImg,c.redpoint,c.mailName,c.mailSender,c.expirationTime,c.mailButton,c.arrow]),c.add([c.extendBg,c.content]),c.setSize(m,f),c.extendBg.visible=!1,c.mailButton.visible=!1,c}return m(PicaMailItem,e),PicaMailItem.prototype.refreshMask=function(){this.extend&&this.mExtend&&this.mExtend.refreshMask()},PicaMailItem.prototype.setMailData=function(e){this.mailData=e,this.mailData.localTime=Date.now()/1e3,this.mailName.text=e.title,this.setTextLimit(this.mailName,e.title),this.setTextLimit(this.mailSender,""+l.i18n.t("mail.sender")+e.senderName),this.setMailState(e.hasRead),this.expirationTime.setTimeData(e.servicetime,e.expireTime,e.hasRead),this.mIsExtend&&this.setExtendMailData(e),this.accessoryImg.visible=!e.attachTaken,e.attachments&&0!==e.attachments.length?this.accessoryImg.visible=!0:this.accessoryImg.visible=!1},PicaMailItem.prototype.setMailState=function(e){this.bg.setFrame(e?"mail_read_bg":"mail_unread_bg"),this.headbg.setFrame(e?"mail_read_mark_bg":"mail_unread_mark_bg"),this.headIcon.setFrame(e?"mail_read_mark":"mail_unread_mark"),this.mailName.setColor(e?"#196ECE":"#FFFFFF"),this.mailSender.setColor(e?"#000000":"#0457B5"),this.redpoint.visible=!e},PicaMailItem.prototype.setMailDetail=function(e){this.mExtend&&this.mExtend.setItemData(e)},PicaMailItem.prototype.setHandler=function(e){this.send=e},PicaMailItem.prototype.setExtend=function(e,i){void 0===i&&(i=!0),e?(this.openExtend(),i&&this.send&&this.send.runWith(["extend",{extend:!0,item:this}])):(this.closeExtend(),i&&this.send&&this.send.runWith(["extend",{extend:!1,item:this}]))},Object.defineProperty(PicaMailItem.prototype,"extend",{get:function(){return this.mIsExtend},enumerable:!1,configurable:!0}),PicaMailItem.prototype.onMailButtonHandler=function(){this.mailData&&!this.mailData.attachTaken&&this.send.runWith(["getrewards",this.mailData.id])},PicaMailItem.prototype.openExtend=function(){this.mExtend||(this.mExtend=new g(this.scene,this.width-6*this.dpr,0,this.dpr,this.zoom),this.mExtend.setHandler(this.send),this.add(this.mExtend)),this.setExtendMailData(this.mailData),this.mExtend.visible=!0,this.height=this.content.height+this.mExtend.height+3*this.dpr,this.content.y=.5*-this.height+.5*this.content.height,this.mExtend.y=this.content.y+.5*this.content.height-5*this.dpr,this.mIsExtend=!0,this.arrow.visible=!1,this.extendBg.visible=!0,this.bg.visible=!1,this.extendBg.resize(this.extendBg.width,this.height),this.expirationTime.visible=!1,this.setMailState(!0),this.expirationTime.clearTimer()},PicaMailItem.prototype.setExtendMailData=function(e){this.mExtend.setItemData(e),this.mailData.hasRead||this.send.runWith(["readmail",this.mailData.id]),e.attachments&&0!==e.attachments.length?this.mailButton.visible=!0:this.mailButton.visible=!1,e.attachTaken?(this.mailButton.disInteractive(),this.mailButton.setFrameNormal(l.UIHelper.threeGraySmall),this.mailButton.setText(l.i18n.t("common.received"))):(this.mailButton.setInteractive(),this.mailButton.setFrameNormal(l.UIHelper.threeGreenSmall),this.mailButton.setText(l.i18n.t("common.receive")))},PicaMailItem.prototype.closeExtend=function(){this.mExtend&&(this.mExtend.visible=!1),this.height=this.content.height,this.extendBg.visible=!1,this.bg.visible=!0,this.content.y=0,this.mIsExtend=!1,this.arrow.visible=!0,this.expirationTime.visible=!0,this.mailButton.visible=!1,this.mExtend.clearTimer();var e=Date.now()/1e3-this.mailData.localTime;this.expirationTime.setTimeData(this.mailData.servicetime+e,this.mailData.expireTime,!0)},PicaMailItem.prototype.setTextLimit=function(e,i,n){if(void 0===n&&(n=11),i.length>n)for(var a=130*this.dpr,s=9;s<i.length;s++){var o=i.slice(0,s);if(e.setText(o).width>a){o+="...",e.setText(o);break}}else e.setText(i)},PicaMailItem}(Phaser.GameObjects.Container),g=function(e){function MailItemExtend(i,n,a,o,c){var m=e.call(this,i)||this;m.rewardArr=[],m.dpr=0,m.zoom=1,m.width=n,m.dpr=o,m.zoom=c;var f=.5*-n+10*o,g=.5*-a+0*o;return m.mailTex=i.make.text({x:f,y:g,text:l.i18n.t("task.objective"),style:l.UIHelper.blackStyle(o)}).setOrigin(0,0),m.mailTex.setWordWrapWidth(n-40*o,!0),m.mailTex.setLineSpacing(5*o),m.mailTex.x=.5*-n+20*o,m.sendTex=i.make.text({x:f,y:g+18*o,text:l.i18n.t("task.collect_materials"),style:l.UIHelper.blackStyle(o)}).setOrigin(1,0),m.sendTex.x=.5*n-20*o,m.expirationTex=i.make.text({x:f,y:g,text:l.i18n.t("task.objective"),style:l.UIHelper.blackStyle(o)}).setOrigin(1,0),m.expirationTex.x=m.sendTex.x,m.line=i.make.image({key:h.d.mail,frame:"mail_reward_line"}),m.line.setPosition(-10*o,g+110*o),m.gameScroll=new s.GameScroller(m.scene,{x:0,y:0*m.dpr,width:m.width-40*o,height:80*o,zoom:m.zoom,dpr:m.dpr,align:2,orientation:1,space:10*m.dpr,padding:{top:2*m.dpr},selfevent:!0,cellupCallBack:function(e){m.onPointerUpHandler(e)}}),m.add([m.mailTex,m.sendTex,m.expirationTex,m.line,m.gameScroll]),m.setSize(n,a),m}return m(MailItemExtend,e),MailItemExtend.prototype.refreshMask=function(){this.gameScroll.refreshMask()},MailItemExtend.prototype.setItemData=function(e){var i=0;this.mailTex.text=e.content,this.sendTex.text=""+l.i18n.t("mail.sender")+e.senderName,this.sendTex.y=this.mailTex.y+this.mailTex.height+15*this.dpr,this.expirationTex.text=l.i18n.t("mail.expiration",{time:l.TimeUtils.getBriefFormat(e.expireTime)}),this.expirationTex.y=this.sendTex.y+this.sendTex.height+6*this.dpr,i=this.expirationTex.y+this.expirationTex.height+10*this.dpr,this.line.y=i,i+=5*this.dpr;var n=this.setGameScrollData(e.attachments,i);this.height=i+n+10*this.dpr;var a=Date.now()/1e3-e.localTime,s=e.expireTime-e.servicetime-a;this.countDown(1e3*s)},MailItemExtend.prototype.setGameScrollData=function(e,i){if(!e||0===e.length)return this.gameScroll.visible=!1,0;this.gameScroll.visible=!0;var n=67*this.dpr;return this.createMailCells(this.rewardArr,e,!1),i+=.5*n,this.gameScroll.y=i,this.gameScroll.clearItems(!1),this.gameScroll.addItems(this.rewardArr),this.gameScroll.Sort(),this.gameScroll.refreshMask(),n},MailItemExtend.prototype.setHandler=function(e){this.send=e},MailItemExtend.prototype.clearTimer=function(){this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0)},MailItemExtend.prototype.onPointerUpHandler=function(e){this.send&&this.send.runWith(["item",e])},MailItemExtend.prototype.createMailCells=function(e,i,n){void 0===n&&(n=!0);for(var a=0,o=e;a<o.length;a++){(m=o[a]).visible=!1,m.y=0}for(var l=0;l<i.length;l++){var m=void 0;l<e.length?m=e[l]:i[l].texturePath&&((m=new c.ItemButton(this.scene,h.d.uicommon,"bag_icon_common_bg",this.dpr,this.zoom,!1)).on(s.ClickEvent.Tap,this.onMailCellHandler,this),e.push(m)),m&&(m.visible=!0,m.setItemData(i[l]))}return e},MailItemExtend.prototype.onMailCellHandler=function(e,i){this.send&&this.send.runWith(["item",i])},MailItemExtend.prototype.countDown=function(e){var i=this;this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0);var timeextu=function(){i.expirationTex.text=l.i18n.t("mail.expiration",{time:l.TimeUtils.getBriefFormat(e)}),(e-=1e3)>0?i.timerID=setTimeout((function(){timeextu()}),1e3):(i.expirationTex.text="",i.timerID=void 0)};timeextu()},MailItemExtend}(Phaser.GameObjects.Container),_=function(e){function ExpirationTime(i,n){var a=e.call(this,i)||this;return a.dpr=n,a.timeImg=new c.ImageValue(i,10*n,15*n,h.d.mail,"mail_read_time",n),a.timeImg.setLayout(3),a.timeImg.y=-15*n,a.timeImg.x=-13*n,a.expirationBg=a.scene.make.image({key:h.d.mail,frame:"mail_read_countdown_bg"}),a.expirationBg.y=7*n,a.expirationBg.x=.5*-a.expirationBg.width,a.expirationTex=a.scene.make.text({style:l.UIHelper.whiteStyle(n,10)}).setOrigin(.5),a.expirationTex.y=a.expirationBg.y,a.expirationTex.x=a.expirationBg.x,a.add([a.timeImg,a.expirationBg,a.expirationTex]),a}return m(ExpirationTime,e),ExpirationTime.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearTimer()},ExpirationTime.prototype.clearTimer=function(){this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0)},ExpirationTime.prototype.setTimeData=function(e,i,n){var a=new Date(1e3*e);this.timeImg.setText(l.TimeUtils.dateFormat("YYYY.mm.dd",a)),this.timeImg.setTextStyle({color:n?"#000000":"#FFFFFF"}),this.expirationBg.setFrame(n?"mail_read_countdown_bg":"mail_unread_countdown_bg"),this.countDown(1e3*(i-e))},ExpirationTime.prototype.countDown=function(e){var i=this;this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0);var timeextu=function(){i.expirationTex.text=l.TimeUtils.getDateFormat(e,!0),(e-=1e3)>0?i.timerID=setTimeout((function(){timeextu()}),1e3):(i.expirationTex.text="",i.timerID=void 0)};timeextu()},ExpirationTime}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMailMainPanel",(function(){return g}));var a,s=n(788),o=n(790),h=n(0),l=n(863),c=n(803),m=n(865),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaMailMainPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.render=h,l.mailDatas=new Map,l.mailItemMap=new Map,l.setSize(n,a),l.dpr=s,l.zoom=o,l.init(),l}return f(PicaMailMainPanel,e),PicaMailMainPanel.prototype.setHandler=function(e){this.send=e},PicaMailMainPanel.prototype.refreshMask=function(){this.gameScroller.refreshMask()},PicaMailMainPanel.prototype.setMailDatas=function(e){if(this.syncMailDatas(e),e.isAll){var i=Array.from(this.mailDatas.values());this.setAllMailDatas(i)}else this.setUpdateMailDatas(e.list)},PicaMailMainPanel.prototype.setAllMailDatas=function(e){if(0===e.length)return this.noMailTip.visible=!0,void(this.gameScroller.visible=!1);this.noMailTip.visible=!1,this.gameScroller.visible=!0,this.curMailItem&&this.curMailItem.setExtend(!1),this.setMailItems(e),this.render.emitter.emit(m.PicaMailPanel.PICAMAIL_DATA)},PicaMailMainPanel.prototype.setUpdateMailDatas=function(e){for(var i=0,n=e;i<n.length;i++){var a,s=n[i];if(this.mailItemMap.has(s.id))(a=this.mailItemMap.get(s.id)).setMailData(s);else(a=new l.PicaMailItem(this.scene,this.dpr,this.zoom)).setHandler(new h.Handler(this,this.onMailItemHandler)),this.gameScroller.addItemAt(a,0),this.mailItemMap.set(s.id,a),a.setMailData(s),a.visible=!0,a.alpha=1,a.x=0}this.gameScroller.Sort(!0)},PicaMailMainPanel.prototype.syncMailDatas=function(e){e.isAll&&this.mailDatas.clear();for(var i=0,n=e.list;i<n.length;i++){var a=n[i];this.mailDatas.set(a.id,a)}},PicaMailMainPanel.prototype.setMailItems=function(e){this.mailItemMap.forEach((function(e,i){e.visible=!1})),this.framingCreateMail(e),this.gameScroller.Sort()},PicaMailMainPanel.prototype.framingCreateMail=function(e,i){var n=this;void 0===i&&(i=5);var a=0,s=this.gameScroller.getItemList(),createMails=function(){for(var o=0;o<i;o++){var c=void 0,m=a+o,f=e[m];if(m>=e.length)break;m<s.length?c=s[m]:((c=new l.PicaMailItem(n.scene,n.dpr,n.zoom)).setHandler(new h.Handler(n,n.onMailItemHandler)),n.gameScroller.addItem(c)),n.mailItemMap.set(f.id,c),c.setMailData(f),c.visible=!0,c.alpha=1,c.x=0}n.gameScroller.Sort(!0),(a+=i)>=e.length||setTimeout((function(){n.scene&&createMails()}),100)};createMails()},PicaMailMainPanel.prototype.init=function(){var e=this;this.gameScroller=new s.GameScroller(this.scene,{x:0,y:0*this.dpr,width:this.width,height:this.height,zoom:this.zoom,dpr:this.dpr,align:2,orientation:0,space:10*this.dpr,padding:{top:2*this.dpr},selfevent:!0,cellupCallBack:function(i){e.onPointerUpHandler(i)},valuechangeCallback:function(i){e.refreshMailIem()}});var i=this.scene.make.image({key:o.d.uicommon,frame:"task_no"}),n=this.scene.make.text({text:h.i18n.t("mail.nomailtip"),style:h.UIHelper.whiteStyle(this.dpr)}).setOrigin(.5);n.y=.5*i.height+15*this.dpr,this.noMailTip=this.scene.make.container(void 0),this.noMailTip.add([i,n]),this.noMailTip.y=.5*-this.height+100*this.dpr,this.noMailTip.visible=!1,this.add([this.gameScroller,this.noMailTip])},PicaMailMainPanel.prototype.onPointerUpHandler=function(e){var i=!e.extend;e.setExtend(i,!0)},PicaMailMainPanel.prototype.onMailItemHandler=function(e,i){if("extend"===e){var n=i.extend,a=i.item;this.onExtendsHandler(n,a)}else"getrewards"===e?this.send.runWith(["getrewards",i]):"readmail"===e?this.send.runWith(["readmail",i]):"item"===e&&this.onMaterialItemHandler(i)},PicaMailMainPanel.prototype.onExtendsHandler=function(e,i){this.curMailItem&&this.curMailItem.setExtend(!1,!1),this.curMailItem=e?i:null,this.gameScroller.Sort(!0),this.refreshMailIem()},PicaMailMainPanel.prototype.onMaterialItemHandler=function(e){c.PicaItemTipsPanel.Inst.showTips(e,e.itemData)},PicaMailMainPanel.prototype.refreshMailIem=function(){this.curMailItem&&this.curMailItem.refreshMask()},PicaMailMainPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMailPanel",(function(){return _}));var a,s=n(789),o=n(2),h=n(790),l=n(0),c=n(792),m=n(864),f=n(788),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaMailPanel(i){var n=e.call(this,i)||this;return n.key=o.ModuleName.PICAMAIL_NAME,n.atlasNames=[h.d.uicommon,h.d.mail],n}return g(PicaMailPanel,e),PicaMailPanel.prototype.hide=function(){this.render.emitter.emit(PicaMailPanel.PICAMAIL_CLOSE),e.prototype.hide.call(this)},PicaMailPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.blackBg.clear(),this.blackBg.fillStyle(0,.5),this.blackBg.fillRect(-this.x,-this.y,a,s),this.bg.clear(),this.bg.fillStyle(0,.6),this.bg.fillRect(0,0,this.content.width,s),this.bg.x=.5*-this.content.width,this.bg.y=.5*-this.content.height,this.content.x=this.width+.5*this.content.width+10*this.dpr,this.content.y=.5*s,this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains),this.mainPanel.refreshMask()},PicaMailPanel.prototype.onShow=function(){this.tempDatas&&this.setMailDatas(this.tempDatas)},PicaMailPanel.prototype.addListen=function(){this.mInitialized&&this.blackBg.on("pointerup",this.onClosePanel,this)},PicaMailPanel.prototype.removeListen=function(){this.mInitialized&&this.blackBg.off("pointerup",this.onClosePanel,this)},PicaMailPanel.prototype.init=function(){this.setSize(this.scaleWidth,this.scaleHeight),this.blackBg=this.scene.make.graphics(void 0,!1);var i=300*this.dpr,n=this.height;this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.content.setInteractive(),this.add([this.blackBg,this.content]),this.bg=this.scene.make.graphics(void 0,!1),this.tilteName=this.scene.make.text({text:l.i18n.t("mail.title"),style:l.UIHelper.whiteStyle(this.dpr,18)}),this.tilteName.setOrigin(0,.5),this.tilteName.setFontStyle("bold"),this.tilteName.x=.5*-i+20*this.dpr,this.tilteName.y=.5*-n+40*this.dpr,this.oneKeyBtn=new s.ThreeSliceButton(this.scene,62*this.dpr,25*this.dpr,h.d.uicommon,l.UIHelper.threeYellowSmall,l.UIHelper.threeYellowSmall,l.i18n.t("mail.onekey")),this.oneKeyBtn.setTextStyle(l.UIHelper.brownishStyle(this.dpr)),this.oneKeyBtn.setFontStyle("bold"),this.oneKeyBtn.x=.5*i-.5*this.oneKeyBtn.width-10*this.dpr,this.oneKeyBtn.y=this.tilteName.y,this.oneKeyBtn.on(f.ClickEvent.Tap,this.onAllReceiveHandler,this);var a=.5*this.height-this.oneKeyBtn.y-.5*this.oneKeyBtn.height-20*this.dpr;this.mainPanel=new m.PicaMailMainPanel(this.scene,this.content.width,a,this.dpr,this.scale,this.render),this.mainPanel.setHandler(new l.Handler(this,this.onMainPanelHandler)),this.mainPanel.y=.5*this.height-.5*a,this.content.add([this.bg,this.oneKeyBtn,this.tilteName,this.mainPanel]),this.resize(),e.prototype.init.call(this),this.playMove()},PicaMailPanel.prototype.setMailDatas=function(e){this.tempDatas=e,this.mInitialized&&this.mainPanel.setMailDatas(e)},PicaMailPanel.prototype.onAllReceiveHandler=function(){this.render.renderEmitter(o.ModuleName.PICAMAIL_NAME+"_allrewards")},PicaMailPanel.prototype.onMainPanelHandler=function(e,i){"readmail"===e?this.render.renderEmitter(o.ModuleName.PICAMAIL_NAME+"_readmail",i):"getrewards"===e&&this.render.renderEmitter(o.ModuleName.PICAMAIL_NAME+"_getrewards",i)},PicaMailPanel.prototype.onClosePanel=function(){this.render.renderEmitter(o.ModuleName.PICAMAIL_NAME+"_hide")},PicaMailPanel.prototype.playMove=function(){var e=this,i=this.width+.5*this.content.width+10*this.dpr,n=this.width-.5*this.content.width,a=this.scene.tweens.add({targets:this.content,x:{from:i,to:n},ease:"Linear",duration:300,onComplete:function(){a.stop(),a.remove(),e.mainPanel.refreshMask()}})},PicaMailPanel.PICAMAIL_CLOSE="PICAMAIL_CLOSE",PicaMailPanel.PICAMAIL_DATA="PICAMAIL_DATA",PicaMailPanel}(c.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaManorContentPanel",(function(){return c}));var a,s=n(788),o=n(790),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaManorContentPanel(i,n,a,s,o,h,l){var c=e.call(this,i,n,a)||this;return c.setSize(s,o),c.dpr=h,c.key=l,c.create(),c}return l(PicaManorContentPanel,e),PicaManorContentPanel.prototype.create=function(){var e=this.width,i=this.height;this.bg=new s.NineSlicePatch(this.scene,0,0,e,i,o.c.commonKey,"bg",{left:70*this.dpr,top:30*this.dpr,right:30*this.dpr,bottom:70*this.dpr}),this.add(this.bg);var n=.5*-i;this.titlebg=this.scene.make.image({x:0,y:0,key:o.c.common2Key,frame:"title"}),this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titlebg.y=n+3*this.dpr,this.add(this.titlebg),this.titleText=this.scene.make.text({x:0,y:this.titlebg.y+2*this.dpr,text:h.i18n.t("manor.title"),style:h.UIHelper.titleYellowStyle_m(this.dpr)}).setOrigin(.5),this.titleText.setFontStyle("bold"),this.titleText.setResolution(this.dpr),this.add(this.titleText),this.closeBtn=new s.Button(this.scene,o.c.commonKey,"close"),this.closeBtn.setDisplaySize(28*this.dpr,28*this.dpr),this.closeBtn.setPosition(.5*this.width-8*this.dpr,n+7*this.dpr),this.closeBtn.on(String(s.ClickEvent.Tap),this.onCloseHandler,this),this.add(this.closeBtn),this.setContentSize(e,i)},PicaManorContentPanel.prototype.setContentSize=function(e,i){this.setSize(e,i),this.bg.resize(e,i);var n=.5*-i;this.titlebg.y=n+5*this.dpr,this.titleText.y=this.titlebg.y+2*this.dpr,this.closeBtn.setPosition(.5*this.width-8*this.dpr,n+7*this.dpr)},PicaManorContentPanel.prototype.setTitleText=function(e){this.titleText.text=e},PicaManorContentPanel.prototype.setCloseHandler=function(e){this.closeHandler=e},PicaManorContentPanel.prototype.onCloseHandler=function(){this.closeHandler&&this.closeHandler.run()},PicaManorContentPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaManorScrollPanel",(function(){return m}));var a,s=n(788),o=n(790),h=n(0),l=n(791),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaManorScrollPanel(i,n,a,s,o,h,l,c){var m=e.call(this,i,n,a)||this;return m.dpr=h,m.key=c,m.zoom=l,m.setSize(s,o),m.create(),m}return c(PicaManorScrollPanel,e),PicaManorScrollPanel.prototype.setManorListData=function(e){var i=e.street.sort((function(e,i){return e.streetId>i.streetId?-1:1}));this.gridtable.setItems(i)},PicaManorScrollPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaManorScrollPanel.prototype.resetMask=function(){this.gridtable.resetMask()},PicaManorScrollPanel.prototype.create=function(){var e=.5*-this.height,i=.5*-this.width,n=this.scene.make.image({key:this.key,frame:"finca_list_block"});n.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),n.x=i+35*this.dpr,n.y=e+30*this.dpr,this.add(n);var a=n.x+.5*n.width+5*this.dpr,s=this.scene.make.text({x:a,y:n.y,text:h.i18n.t("manor.title"),style:{fontSize:12*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#FFC51A"}}).setOrigin(0,.5);s.setFontStyle("bold"),s.setStroke("#553100",2*this.dpr),this.add(s);var o=this.scene.make.graphics(void 0,!1);o.clear(),o.fillStyle(0,.11),o.fillRect(.5*-this.width+20*this.dpr,n.y+20*this.dpr,256*this.dpr,2),this.add(o);var l=293*this.dpr,c=360*this.dpr,m=e+53*this.dpr+.5*c;this.gridtable=this.createGrideTable(0,m,l,c,293*this.dpr,58*this.dpr)},PicaManorScrollPanel.prototype.createGrideTable=function(e,i,n,a,o,h){var l=this,c={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:o,cellHeight:h,reuseCellContainer:!0,tableOX:0*this.dpr,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&(i=new f(l.scene,0,0,o,h,l.key,l.dpr,l.zoom),m.add(i)),i.setManorData(n),i}},m=new s.GameGridTable(this.scene,c);return m.layout(),m.on("cellTap",this.onGridTableHandler,this),this.add(m),m},PicaManorScrollPanel.prototype.onGridTableHandler=function(e){this.onEnterHandler(e.manorData)},PicaManorScrollPanel.prototype.onEnterHandler=function(e){this.sendHandler&&this.sendHandler.runWith(e.roomId)},PicaManorScrollPanel.prototype.onSearchBtnHandler=function(){this.sendHandler&&this.sendHandler.run()},PicaManorScrollPanel.prototype.onFiltrateHandler=function(){this.sendHandler&&this.sendHandler.run()},PicaManorScrollPanel.prototype.onSortBtnHandler=function(){this.sendHandler&&this.sendHandler.run()},PicaManorScrollPanel}(Phaser.GameObjects.Container),f=function(e){function ManorItem(i,n,a,c,m,f,g,_){var T=e.call(this,i,n,a)||this;T.dpr=g,T.key=f,T.setSize(c,m);T.width,T.height;T.bg=new s.NineSlicePatch(T.scene,0,0,c,50*g,T.key,"list_bg",{left:10*T.dpr,top:0*T.dpr,right:10*T.dpr,bottom:0*T.dpr}),T.add(T.bg);var x=.5*-T.width+10*g;return T.manorName=T.scene.make.text({x:x,y:0,text:"",style:{color:"#333333",fontSize:15*T.dpr,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(0,.5),T.manorName.setFontStyle("bold"),T.add(T.manorName),T.playerCount=new l.ImageValue(i,30*g,20*g,o.c.commonKey,"home_persons",g,{fontFamily:h.Font.DEFULT_FONT,fontSize:15*g,color:"#333333"}),T.playerCount.setFontStyle("bold"),T.playerCount.x=.5*T.width-35*g,T.add(T.playerCount),T.playerCount.setText("100"),T}return c(ManorItem,e),ManorItem.prototype.setManorData=function(e){this.manorData=e,this.manorName.text=e.name,this.playerCount.setText(e.playerCount+"")},ManorItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"ElementDetail",(function(){return g}));var a,s=n(795),o=n(788),h=n(869),l=n(0),c=n(790),m=n(796),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function ElementDetail(i,n,a,c,m){var f=e.call(this,i)||this;f.render=n,f.key=a,f.dpr=c,f.zoom=m,f.setPosition(0,0),f.mCounter=new h.NumberCounter(f.scene,a,360,700,f.dpr,n.uiScale);var g=f.scene.textures.getFrame(f.key,"yellow_button_normal"),T=60,x=65;g&&(T=g.width,x=g.height),f.mBuyBtn=new o.NineSliceButton(f.scene,440,700,81*f.dpr,41*f.dpr,f.key,"yellow_button",l.i18n.t("common.buy"),f.dpr,f.scale,{left:14*f.dpr,top:14*f.dpr,right:T-2-14*f.dpr,bottom:x-2-14*f.dpr}),f.mBuyBtn.setTextStyle({color:"#976400",fontSize:16*f.dpr,fontFamily:l.Font.DEFULT_FONT}),f.mBuyBtn.setFontStyle("bold"),f.mBuyBtn.on(String(o.ClickEvent.Tap),f.onBuyHandler,f),f.mPriceContainer=f.scene.make.container(void 0,!1),f.mPriceIcon=f.scene.make.image({x:-78,key:f.key,frame:"iv_coin"},!1),f.mPriceIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),f.mPriceText=f.scene.make.text({x:0,style:{fontSize:14*f.dpr,fontFamily:l.Font.NUMBER}}).setOrigin(.5);var S=f.scene.make.image({key:f.key,frame:"price_bg"});return S.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),f.mDetailDisplay=new s.DetailDisplay(f.scene,f.render),f.mDetailDisplay.setFixedScale(2*f.dpr/f.zoom),f.mDetailDisplay.y=110*f.dpr,f.mDetailBubble=new _(f.scene,f.key,f.dpr),f.mDetailBubble.x=4*f.dpr,f.mDetailBubble.y=400*f.dpr,f.add([f.mDetailDisplay,f.mPriceContainer,f.mCounter,f.mBuyBtn,f.mDetailBubble]),f.mPriceContainer.add([S,f.mPriceIcon,f.mPriceText]),f.addActionListener(),f}return f(ElementDetail,e),ElementDetail.prototype.resize=function(e,i){var n=e,a=i/2-150,s=e/2;this.mBuyBtn.x=n-this.mBuyBtn.displayWidth/2-10*this.dpr,this.mBuyBtn.y=this.height-this.y-this.mBuyBtn.displayHeight/2-12*this.dpr;var o=this.mBuyBtn.x-this.mBuyBtn.displayWidth/2-this.mCounter.displayWidth/2-17*this.dpr;this.mCounter.x=o,this.mCounter.y=this.mBuyBtn.y,this.mDetailBubble.x=4*this.dpr,this.mDetailBubble.y=this.mCounter.y-70*this.dpr,this.mPriceContainer.x=this.mCounter.x,this.mPriceContainer.y=this.mCounter.y-35*this.dpr,this.mDetailDisplay.x=s,this.mDetailDisplay.y=(this.height-this.y)/2;var h=.8*n,l=.7*a;this.setInteractive(new Phaser.Geom.Rectangle((n>>1)+(n-h>>1),a>>1,h,l),Phaser.Geom.Rectangle.Contains),this.mCounter.resize(),this.mDetailBubble.visible=!0},ElementDetail.prototype.addActionListener=function(){this.mCounter&&(this.mCounter.addActionListener(),this.mCounter.on("change",this.onChangeCounterHandler,this),this.on("pointerup",this.onPointerUpHandler,this))},ElementDetail.prototype.removeActionListener=function(){this.mCounter&&(this.mCounter.removeActionListener(),this.mCounter.off("change",this.onChangeCounterHandler,this),this.off("gameobjectup",this.onPointerUpHandler,this))},ElementDetail.prototype.setProp=function(e){var i=this;this.mSelectedProp=e;var n=e.item;e.price&&e.price.length>0?(this.mPriceIcon.setTexture(this.key,l.Coin.getIcon(e.price[0].coinType)),this.updatePrice(e.price[0].price.toString())):this.mPriceText.setText("");var a=null;this.render.mainPeer.getUserData_PlayerProperty().then((function(e){return a=e,i.serviceTimestamp})).then((function(e){i.mDetailBubble.setProp(n,Math.floor(e/1e3),a),i.mDetailBubble.y=i.height-i.y-i.mDetailBubble.height-6*i.dpr,i.mCounter.setCounter(1),i.mCounter.setItemType(n.category)}))},ElementDetail.prototype.setResource=function(e){var i=this;if(e.serializeString){var n=e.elepi;m.l.showDetailDisplay({display:this.mDetailDisplay,dpr:this.dpr,data:n,render:this.render,sn:e.sn,itemid:e.id,serialize:e.serializeString})}else e.avatar?this.render.mainPeer.getPlayerAvatar().then((function(n){var a=n.avatar,s=n.suits;for(var o in a)if(a.hasOwnProperty(o)){var h=a[o];h&&!e.avatar[o]&&(e.avatar[o]=h)}if(s)for(var l=e.suits[0],c=0,m=s;c<m.length;c++){var f=m[c];f.suit_type!==l.suit_type&&e.suits.push(f)}var g=new Phaser.Geom.Point(0,70);i.mDetailDisplay.loadAvatar(e,2*i.dpr,g)})):this.mDetailDisplay.loadUrl(this.mSelectedProp.icon)},Object.defineProperty(ElementDetail.prototype,"serviceTimestamp",{get:function(){var e=this;return new Promise((function(i,n){e.render.mainPeer.requestCurTime().then((function(e){i(e)}))}))},enumerable:!1,configurable:!0}),ElementDetail.prototype.updatePrice=function(e){this.mPriceText.setText(e),this.mPriceIcon.x=this.mPriceText.x-this.mPriceText.width/2-16*this.dpr},ElementDetail.prototype.onBuyHandler=function(){if(this.mSelectedProp){var e={id:null,quantity:null,category:null};e.id=this.mSelectedProp.id,e.quantity=this.mCounter.number,e.category=this.mSelectedProp.category,this.emit("buyItem",e)}},ElementDetail.prototype.onChangeCounterHandler=function(e){this.mSelectedProp&&(!this.mSelectedProp.price||this.mSelectedProp.price.length<1||this.updatePrice((this.mSelectedProp.price[0].price*this.mCounter.number).toString()))},ElementDetail.prototype.onPointerUpHandler=function(){this.mCounter.setBlur()},ElementDetail}(Phaser.GameObjects.Container),_=function(e){function DetailBubble(i,n,a,s){void 0===s&&(s=1);var h=e.call(this,i)||this;h.dpr=a;var m=100*a,f=96*a;return h.setSize(m,f),h.tipsbg=new o.NineSlicePatch(h.scene,0,0,m,f,c.d.uicommon,"tips_bg",{left:10*h.dpr,top:10*h.dpr,right:10*h.dpr,bottom:10*h.dpr},void 0,void 0,.5),h.tipsbg.setPosition(.5*m,.5*f),h.tipsbg.alpha=.6,h.tipsText=new o.BBCodeText(h.scene,7*a,-f+60*h.dpr,"",{color:"#333333",fontSize:10*h.dpr,fontFamily:l.Font.DEFULT_FONT,lineSpacing:6*a,padding:{top:2*a}}).setOrigin(0),h.tipsText.setWrapMode("char"),h.tipsText.setWrapWidth(100*a),h.mExpires=new o.BBCodeText(i,7*a,85*a,"",{fontSize:10*h.dpr,fontFamily:l.Font.DEFULT_FONT}).setOrigin(0),h.add([h.tipsbg,h.tipsText,h.mExpires]),h.tipsText.addImage("iv_coin",{key:c.c.commonKey,frame:"iv_coin"}),h.tipsText.addImage("iv_diamond",{key:c.c.commonKey,frame:"iv_diamond"}),h}return f(DetailBubble,e),DetailBubble.prototype.setProp=function(e,i,n){if(e){var a="",s="",o="",h="[color=#32347b][b][size="+14*this.dpr+"]"+(e.shortName||e.name)+"[/size][/b][/color]",c=100*this.dpr;this.tipsText.text=h,c=c<this.tipsText.width?this.tipsText.width:c,e.des&&""!==e.des&&(h+="\n"+(a=e.des),this.tipsText.text=a,c=c<this.tipsText.width?this.tipsText.width:c);var m=!1;if(e.affectValues){for(var f=e.affectValues.length,g=0;g<f;g++){var _=e.affectValues[g];if(n.propertiesMap.has(_.key)){var T=n.propertiesMap.get(_.key),x=_.value>0?"[color=#ffff00]+"+_.value+"[/color]":"[color=#ff0000]"+_.value+"[/color]";s+="\n"+T.name+": "+x}}s.length>0&&(m||(m=!0,h+="\n-- -- -- -- -- -- -- --"),h+="\n[color=#ffffff]"+l.i18n.t("furni_bag.properties")+"[/color]"+s)}if(e.requireValues){for(f=e.requireValues.length,g=0;g<f;g++){var S=e.requireValues[g];if(n.propertiesMap.has(S.key)){x=((T=n.propertiesMap.get(S.key)).value,S.value,"[color=#00ff00]("+S.value+")[/color]");o+="\n"+T.name+": "+x}}o.length>0&&(m||(m=!0,h+="\n-- -- -- -- -- -- -- --"),h+="\n"+l.i18n.t("furni_bag.needproper")+":"+o)}this.tipsText.text=h,this.width=this.tipsText.width+14*this.dpr,this.resize()}else this.tipsText.setText(l.i18n.t("furni_bag.empty_backpack")),this.mExpires.text="",this.resize();return this},DetailBubble.prototype.resize=function(e,i){var n=96*this.dpr,a=this.tipsText.height;this.mExpires.visible&&(a+=this.mExpires.height+3*this.dpr),a=(a+=14*this.dpr)<n?n:a,this.setSize(this.width,a),this.tipsbg.resize(this.width,this.height),this.tipsbg.x=.5*this.width,this.tipsbg.y=.5*this.height,this.tipsText.y=7*this.dpr,this.mExpires.y=this.tipsText.y+this.tipsText.height+3*this.dpr},DetailBubble.prototype.getDataFormat=function(e){var i=Math.floor(e/864e5),n=Math.floor(e/36e5)%24,a=Math.floor(e/6e4)%60,s=Math.floor(e/1e3)%60,o=l.i18n.t("furni_bag.timelimit")+":  ";if(i>0)o+="[color=#FF0000]"+(i+"-"+this.stringFormat(n)+":"+this.stringFormat(a)+":"+this.stringFormat(s))+"[/color]";else if(n>0||a>0||s>0){o+="[color=#FF0000]"+(this.stringFormat(n)+":"+this.stringFormat(a)+":"+this.stringFormat(s))+"[/color]"}else{o+="[color=#FF0000]"+(""+l.i18n.t("furni_bag.expires"))+"[/color]"}return o},DetailBubble.prototype.stringFormat=function(e){var i=e+"";return i.length<=1&&(i="0"+i),i},DetailBubble.prototype.getComparTag=function(e){var i="";switch(e){case 1:i="=";case 2:i="!=";case 3:i="<=";case 4:i="<";case 5:i=">=";case 6:i=">";default:i="="}return i},DetailBubble}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"NumberCounter",(function(){return h}));var a,s=n(789),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function NumberCounter(i,n,a,o,h,l){void 0===h&&(h=1),void 0===l&&(l=1);var c=e.call(this,i,a,o)||this;return c.pressDelay=500,c.mMinNum=1,c.mMaxNum=99,c.zoom=1,c.zoom=l,c.mBackground=c.scene.make.image({key:n,frame:"input_bg"}),c.mBackground.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.mReduceBtn=c.scene.make.image({key:n,frame:"reduce"},!1).setInteractive(),c.mReduceBtn.x=-c.mBackground.displayWidth/2-c.mReduceBtn.displayWidth/2-7*h,c.mReduceBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.mIncreaseBtn=c.scene.make.image({key:n,frame:"increase"},!1).setInteractive(),c.mIncreaseBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.mIncreaseBtn.x=(c.mBackground.displayWidth+c.mIncreaseBtn.displayWidth)/2+7*h,c.mLabelInput=new s.LabelInput(c.scene,{x:0,y:0,width:c.mBackground.height,height:26*h,fontSize:14*h+"px",color:"#666666",align:"center",type:"number"}),c.mLabelInput.setOrigin(.5),c.mLabelInput.setText("1"),c.mLabelInput.on("textchange",c.onTextChangeHandler,c),c.mLabelInput.on("blur",c.onTextBlurHandler,c),c.mLabelInput.on("focus",c.onFocusHandler,c),c.add([c.mBackground,c.mLabelInput,c.mReduceBtn,c.mIncreaseBtn]),c.setSize(c.mIncreaseBtn.displayWidth+c.mReduceBtn.displayWidth+c.mBackground.displayWidth+14*h,c.mBackground.displayHeight),c}return o(NumberCounter,e),NumberCounter.prototype.resize=function(){},NumberCounter.prototype.setMinNumber=function(e){this.mMinNum=e},NumberCounter.prototype.setMaxNumber=function(e){this.mMaxNum=e},NumberCounter.prototype.addActionListener=function(){this.mIncreaseBtn.on("pointerup",this.onIncreaseHandler,this),this.mIncreaseBtn.on("pointerdown",this.onIncreaseDownHandler,this),this.mReduceBtn.on("pointerup",this.onReduceHandler,this),this.mReduceBtn.on("pointerdown",this.onReduceDownHandler,this)},NumberCounter.prototype.removeActionListener=function(){this.mIncreaseBtn.off("pointerup",this.onIncreaseHandler,this),this.mIncreaseBtn.off("pointerdown",this.onIncreaseDownHandler,this),this.mReduceBtn.off("pointerup",this.onReduceHandler,this),this.mReduceBtn.off("pointerdown",this.onReduceDownHandler,this),this.scene&&this.scene.input.off("pointerdown",this.pointerDownHandler,this)},NumberCounter.prototype.setCounter=function(e){(isNaN(e)||e<0)&&(e=0),e>this.mMaxNum&&(e=this.mMaxNum),"PKT_MARKET_CATEGORY_3"===this.itemType&&(e=1),this.mLabelInput.setText(e.toString()),this.emit("change",e)},NumberCounter.prototype.setItemType=function(e){this.itemType=e},NumberCounter.prototype.setBlur=function(){this.mLabelInput.setBlur()},NumberCounter.prototype.destroy=function(){this.removeActionListener(),e.prototype.destroy.call(this)},Object.defineProperty(NumberCounter.prototype,"number",{get:function(){return parseInt(this.mLabelInput.text,10)},enumerable:!1,configurable:!0}),NumberCounter.prototype.onReduceHandler=function(){var e=parseInt(this.mLabelInput.text,10);--e<this.mMinNum&&(e=this.mMinNum),this.setCounter(e),this.clearTween()},NumberCounter.prototype.onIncreaseHandler=function(){var e=parseInt(this.mLabelInput.text,10);this.setCounter(++e),this.clearTween()},NumberCounter.prototype.onTextChangeHandler=function(){this.setCounter(parseInt(this.mLabelInput.text,10))},NumberCounter.prototype.onTextBlurHandler=function(){var e=parseInt(this.mLabelInput.text,0);e<this.mMinNum?e=this.mMinNum:e>this.mMaxNum&&(e=this.mMaxNum),this.mLabelInput.setText(e.toString()),this.emit("change",e)},NumberCounter.prototype.onReduceDownHandler=function(){var e=this;this.pressTimeout=setTimeout((function(){e.delayTweenNumber(e.mMinNum)}),this.pressDelay),this.setBlur()},NumberCounter.prototype.onIncreaseDownHandler=function(){var e=this;this.pressTimeout=setTimeout((function(){e.delayTweenNumber(e.mMaxNum)}),this.pressDelay),this.setBlur()},NumberCounter.prototype.delayTweenNumber=function(e){var i=this,n=this.number;this.tween=this.scene.tweens.addCounter({from:n,to:e,onUpdate:function(){i.setCounter(i.tween.getValue()>>0)},duration:50*Math.abs(n-e)})},NumberCounter.prototype.clearTween=function(){clearTimeout(this.pressTimeout),this.tween&&(this.tween.stop(),this.tween=void 0)},NumberCounter.prototype.pointerDownHandler=function(e){this.checkPointerInBounds(this,e)||(this.mLabelInput.setBlur(),this.scene.input.off("pointerdown",this.pointerDownHandler,this))},NumberCounter.prototype.onFocusHandler=function(){this.scene.input.on("pointerdown",this.pointerDownHandler,this)},NumberCounter.prototype.checkPointerInBounds=function(e,i,n){void 0===n&&(n=!1),this.mRectangle||(this.mRectangle=new Phaser.Geom.Rectangle(0,0,0,0));var a=this.zoom?this.zoom:1;if(this.mRectangle.left=-e.width/2,this.mRectangle.right=e.width/2,this.mRectangle.top=-e.height/2,this.mRectangle.bottom=e.height/2,i){var s=e.getWorldTransformMatrix(),o=(i.x-s.tx)/a,h=(i.y-s.ty)/a;return this.mRectangle.left<=o&&this.mRectangle.right>=o&&this.mRectangle.top<=h&&this.mRectangle.bottom>=h}return!1},NumberCounter}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"MarketItem",(function(){return m}));var a,s=n(789),o=n(790),h=n(2),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function MarketItem(i,n,a,c,m){var f=e.call(this,i,n,a)||this;f.zoom=1,f.dpr=c,f.zoom=m,f.mBackground=f.scene.make.image({key:h.ModuleName.PICAMARKET_NAME,frame:"border"},!1).setOrigin(0),f.mBackground.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),f.mBorder=f.scene.make.image({x:3*c,y:3*c,key:h.ModuleName.PICAMARKET_NAME,frame:"item_border"},!1).setOrigin(0),f.mBorder.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),f.mPropImage=new s.DynamicImage(i,0,0),f.mPropImage.scale=f.dpr/f.zoom,f.mNickName=f.scene.make.text({x:62*f.dpr,y:6*f.dpr,style:{fontSize:13*f.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#3399cc"}},!1),f.mCoinIcon=f.scene.make.image({x:45*f.dpr,y:40*f.dpr,key:h.ModuleName.PICAMARKET_NAME},!1).setOrigin(0),f.starImg=f.scene.make.image({key:o.d.uicommon,frame:"bag_star_small_1"}).setOrigin(1,0),f.starImg.x=f.mBorder.x+f.mBorder.displayWidth-2*c,f.starImg.y=f.mBorder.y+2*c,f.starImg.visible=!1;var g=f.scene.make.image({x:62*f.dpr,y:39*f.dpr,key:h.ModuleName.PICAMARKET_NAME,frame:"price_border"},!1).setOrigin(0);return f.mPriceText=f.scene.make.text({x:92*f.dpr,y:49*f.dpr,style:{fontSize:13*f.dpr,fontFamily:l.Font.NUMBER,color:"#996600"}}).setOrigin(.5),f.mTagIcon=f.scene.make.image({key:h.ModuleName.PICAMARKET_NAME,frame:"tip_red",x:-86*f.dpr,y:-34*f.dpr},!1).setOrigin(0),f.add([f.mBackground,f.mBorder,f.mPropImage,f.starImg,f.mNickName,g,f.mCoinIcon,f.mPriceText]),f.setSize(f.mBackground.displayWidth,f.mBackground.displayHeight),f}return c(MarketItem,e),MarketItem.prototype.setProp=function(e){this.mProp=e;var i=e.item;if(e.icon){var n=l.Url.getOsdRes(e.icon);this.mPropImage.load(n,this,this.onPropLoadComplete)}else l.Logger.getInstance().error(e.name+" : "+e.id+" icon value is empty");this.mPropImage.x=this.mBorder.x+this.mBorder.displayWidth/2,this.mPropImage.y=this.mBorder.y+this.mBorder.displayHeight/2;var a=e.shortName||e.name;if(a.length>4)for(var s=50*this.dpr,o=4;o<a.length;o++){var h=a.slice(0,o);if(this.mNickName.setText(h).width>s){a=h+="...";break}}this.mNickName.setText(a),this.mPriceText.setText(e.price[0].price.toString());var c=l.Coin.getIcon(e.price[0].coinType);if(this.mCoinIcon.setFrame(c),i.grade>0){this.starImg.visible=!0;var m="bag_star_small_"+i.grade;this.starImg.setFrame(m)}else this.starImg.visible=!1},MarketItem.prototype.onPropLoadComplete=function(){if(this.mPropImage){var e=this.mPropImage.texture;e&&e.setFilter(Phaser.Textures.FilterMode.LINEAR)}},MarketItem.prototype.onPointerUpHandler=function(){this.emit("select",this.mProp)},MarketItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewActivityPanel",(function(){return c}));var a,s=n(788),o=n(790),h=n(804),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaNewActivityPanel(i,n,a,s,o,h){var l=e.call(this,n)||this;return l.render=i,l.listPosY=[],l.tempButtons=[],l.redButtonMap=new Map,l.isFold=!1,l.setSize(a,s),l.dpr=h,l.key=o,l.init(),l}return l(PicaNewActivityPanel,e),PicaNewActivityPanel.prototype.init=function(){this.activityButton=new s.Button(this.scene,o.d.iconcommon,"home_activity","home_activity"),this.activityButton.on(s.ClickEvent.Tap,this.onActivityHandler,this),this.indentButton=new s.Button(this.scene,o.d.iconcommon,"home_indent","home_indent"),this.indentButton.on(s.ClickEvent.Tap,this.onIndentHandler,this),this.rechargeButton=new s.Button(this.scene,o.d.iconcommon,"home_recharge","home_recharge"),this.rechargeButton.on(s.ClickEvent.Tap,this.onRechargeHandler,this),this.emailButton=new s.Button(this.scene,o.d.iconcommon,"home_email","home_email"),this.emailButton.on(s.ClickEvent.Tap,this.onEmailHandler,this),this.redButtonMap.set(h.MainUIRedType.MAIL,this.emailButton),this.roamButton=new s.Button(this.scene,o.d.iconcommon,"home_roam","home_roam"),this.roamButton.on(s.ClickEvent.Tap,this.onRoamHandler,this),this.shopButton=new s.Button(this.scene,o.d.iconcommon,"home_shop","home_shop"),this.shopButton.on(s.ClickEvent.Tap,this.onShopHandler,this),this.arrowButton=new s.Button(this.scene,o.d.uicommon,"home_more_2","home_more_2"),this.arrowButton.on(s.ClickEvent.Tap,this.onArrowHandler,this),this.listBtns=[this.activityButton,this.indentButton,this.rechargeButton,this.emailButton],this.listBtns2=[this.roamButton,this.shopButton],this.listPosY=[this.activityButton.y,this.indentButton.y,this.rechargeButton.y,this.emailButton.y],this.add(this.listBtns),this.add(this.listBtns2),this.add(this.arrowButton),this.LayoutAllButtons()},PicaNewActivityPanel.prototype.addListen=function(){this.indentButton.on(s.ClickEvent.Tap,this.onIndentHandler,this),this.rechargeButton.on(s.ClickEvent.Tap,this.onRechargeHandler,this),this.emailButton.on(s.ClickEvent.Tap,this.onEmailHandler,this)},PicaNewActivityPanel.prototype.removeListen=function(){this.indentButton.off(s.ClickEvent.Tap,this.onIndentHandler,this),this.rechargeButton.off(s.ClickEvent.Tap,this.onRechargeHandler,this),this.emailButton.off(s.ClickEvent.Tap,this.onEmailHandler,this)},PicaNewActivityPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaNewActivityPanel.prototype.updateUIState=function(e){for(var i=0,n=e;i<n.length;i++){var a=n[i],s=this.getButton(a.name);s&&(s.visible=a.visible)}this.LayoutAllButtons()},Object.defineProperty(PicaNewActivityPanel.prototype,"redMap",{get:function(){return this.redButtonMap},enumerable:!1,configurable:!0}),PicaNewActivityPanel.prototype.LayoutAllButtons=function(){this.tempButtons.forEach((function(e){e.length=0})),this.tempButtons.length=0;var e=this.LayoutButton(this.listBtns),i=this.listBtns[0].x-.5*this.listBtns2[0].width-.5*this.listBtns[0].width-15*this.dpr,n=this.LayoutButton(this.listBtns2,i);this.tempButtons.push(e),this.tempButtons.push(n);var a,s=e.length>n.length?e:n;this.listPosY.length=0;for(var o=0,h=s;o<h.length;o++){var l=h[o];this.listPosY.push(l.y),a=l}a?(this.arrowButton.y=a.y+.5*a.height+10*this.dpr+.5*this.arrowButton.height,this.arrowButton.visible=!0):this.arrowButton.visible=!1},PicaNewActivityPanel.prototype.LayoutButton=function(e,i){void 0===i&&(i=0);for(var n=15*this.dpr,a=.5*-this.height,s=[],o=0,h=e;o<h.length;o++){var l=h[o];l.visible&&(l.x=i,l.y=a+.5*l.height,a+=l.height+n,s.push(l))}return s},PicaNewActivityPanel.prototype.onActivityHandler=function(){this.sendHandler&&this.sendHandler.runWith(["activity"])},PicaNewActivityPanel.prototype.onIndentHandler=function(){this.sendHandler&&this.sendHandler.runWith(["indent"])},PicaNewActivityPanel.prototype.onRechargeHandler=function(){this.sendHandler&&this.sendHandler.runWith(["recharge"])},PicaNewActivityPanel.prototype.onEmailHandler=function(){this.sendHandler&&this.sendHandler.runWith(["email"])},PicaNewActivityPanel.prototype.onRoamHandler=function(){this.sendHandler&&this.sendHandler.runWith(["roam"])},PicaNewActivityPanel.prototype.onShopHandler=function(){this.sendHandler&&this.sendHandler.runWith(["shop"])},PicaNewActivityPanel.prototype.onArrowHandler=function(){this.isFold=!this.isFold,this.isFold?this.foldButtons():this.unfoldButtons()},PicaNewActivityPanel.prototype.foldButtons=function(){var e=this,i=this.listPosY[this.listPosY.length-1],n=this.listPosY[0],a=this.scene.tweens.addCounter({from:i,to:n,ease:"Linear",duration:150,onUpdate:function(i,n){e.updateAllButtons(n.value)},onComplete:function(){a.stop(),a.remove(),e.arrowButton.setFrameNormal("home_more_1"),e.removeListen()}})},PicaNewActivityPanel.prototype.unfoldButtons=function(){var e=this,i=this.listPosY[0],n=this.listPosY[this.listPosY.length-1],a=this.scene.tweens.addCounter({from:i,to:n,ease:"Linear",duration:150,onUpdate:function(i,n){e.updateAllButtons(n.value)},onComplete:function(){a.stop(),a.remove(),e.arrowButton.setFrameNormal("home_more_2"),e.addListen()}})},PicaNewActivityPanel.prototype.updateAllButtons=function(e){var i,n=this;if(this.tempButtons.forEach((function(a){n.updateButtons(e,a),i?i.length<a.length&&(i=a):i=a})),i.length>0){var a=i[i.length-1];this.arrowButton.y=a.y+.5*a.height+10*this.dpr+.5*this.arrowButton.height;var s=this.tempButtons[1];s.length>0&&(a.y===this.listPosY[0]?s[0].visible=!1:s[0].visible=!0)}},PicaNewActivityPanel.prototype.updateButtons=function(e,i){for(var n=this.listPosY[0],a=this.listPosY[this.listPosY.length-1]-e,s=1;s<i.length;s++){var o=i[s],h=this.listPosY[s]-a;o.y=h;var l=this.listPosY[s];h>l&&(h=l),h<n&&(h=n);var c=(h-n)/(.5*o.height);c=(c=c<0?0:c)>1?1:c,o.alpha=c,o.y=h}},PicaNewActivityPanel.prototype.getButton=function(e){return"mainui.activity"===e?this.activityButton:"mainui.indent"===e?this.indentButton:"mainui.recharge"===e?this.rechargeButton:"mainui.email"===e?this.emailButton:"mainui.roam"===e?this.roamButton:"mainui.shop"===e?this.shopButton:void 0},PicaNewActivityPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewChatPanel",(function(){return o}));var a,s=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),o=function(e){function PicaNewChatPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.setSize(n,a),h.dpr=o,h.key=s,h}return s(PicaNewChatPanel,e),PicaNewChatPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewHeadPanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(791),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaNewHeadPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.money=0,h.diamond=0,h.praise=!1,h.isself=!1,h.setSize(n,a),h.dpr=o,h.key=s,h.init(),h}return m(PicaNewHeadPanel,e),PicaNewHeadPanel.prototype.init=function(){this.headCon=this.scene.make.container(void 0,!1),this.moneyCon=this.scene.make.container(void 0,!1),this.sceneCon=this.scene.make.container(void 0,!1),this.add([this.headCon,this.sceneCon]);var e=this.scene.make.image({x:0,y:0,key:h.d.iconcommon,frame:"home_head_bg"},!1),i=new o.ButtonEventDispatcher(this.scene,0,0);i.setSize(40*this.dpr,40*this.dpr),i.enable=!0,i.on(s.ClickEvent.Tap,this.onHeadHandler,this);var n=this.scene.make.image({x:0,y:10*this.dpr,key:h.d.iconcommon,frame:"home_vip_mark"},!1);this.levelTex=this.scene.make.text({x:0,y:0,text:"",style:{color:"#0089D3",fontSize:14*this.dpr,fontFamily:l.Font.NUMBER}}).setStroke("#ffffff",2*this.dpr).setFontStyle("bold").setOrigin(.5),this.powerPro=new o.ProgressMaskBar(this.scene,h.d.uicommon,"home_progress_bottom","strength_progress",void 0,{width:41*this.dpr,height:11*this.dpr,left:4*this.dpr,right:4*this.dpr,top:0,bottom:0}),this.powerPro.x=0,this.powerPro.y=.5*e.height+.5*this.powerPro.height-4*this.dpr,this.powerTex=new c.ImageValue(this.scene,43*this.dpr,15*this.dpr,h.d.uicommon,"strength_icon",this.dpr,{color:"#ffffff",fontSize:8*this.dpr,fontFamily:l.Font.NUMBER}),this.powerTex.y=this.powerPro.y,this.powerTex.x=-2*this.dpr,this.powerTex.setFontStyle("bold"),this.powerTex.setStroke("#000000",2*this.dpr),this.powerTex.setOffset(-4*this.dpr,0),this.powerTex.setLayout(2),this.powerTex.setText(""),this.powerAddBtn=new s.Button(this.scene,h.d.uicommon,"add_btn","add_btn"),this.powerAddBtn.x=this.powerPro.x+.5*this.powerPro.width+7*this.dpr,this.powerAddBtn.y=this.powerPro.y,this.powerAddBtn.on(s.ClickEvent.Tap,this.onEnergyHandler,this),this.headCon.add([this.powerPro,e,n,this.levelTex,i,this.powerTex,this.powerAddBtn]),this.headCon.x=.5*-this.width+33*this.dpr,this.headCon.y=-2*this.dpr;var a=new s.NineSlicePatch(this.scene,0,-this.dpr,190*this.dpr,28*this.dpr,h.d.uicommon,"home_assets_bg",{left:17*this.dpr,top:0*this.dpr,right:17*this.dpr,bottom:0*this.dpr});a.x=.5*-a.width;var m=this.scene.make.image({x:a.x,y:0,key:h.d.uicommon,frame:"home_assets_division"},!1);this.moneyvalue=new c.ImageValue(this.scene,60*this.dpr,26*this.dpr,h.d.uicommon,"home_silver",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:l.Font.NUMBER}),this.moneyvalue.setLayout(1),this.moneyvalue.x=a.x-.5*a.width+22*this.dpr,this.diamondvalue=new c.ImageValue(this.scene,60*this.dpr,26*this.dpr,h.d.uicommon,"home_diamond",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:l.Font.NUMBER}),this.diamondvalue.setLayout(1),this.diamondvalue.x=a.x+22*this.dpr,this.moneyAddBtn=new s.Button(this.scene,h.d.uicommon,"home_praise_bg","home_praise_bg");var f=this.scene.make.image({x:0,y:0,key:h.d.uicommon,frame:"home_assets_add"},!1);this.moneyAddBtn.add(f),this.moneyAddBtn.x=.5*-this.moneyAddBtn.width-4*this.dpr,this.moneyAddBtn.on(s.ClickEvent.Tap,this.onRechargeHandler,this),this.moneyCon.add([a,m,this.moneyvalue,this.diamondvalue,this.moneyAddBtn]),this.moneyCon.x=.5*this.width-10*this.dpr,this.moneyCon.y=-15*this.dpr;var T=this.scene.make.image({x:0,y:0,key:h.d.uicommon,frame:"home_persons_bg"},!1);T.x=.5*-T.width,this.peoplebg=T,this.peoplevalue=new c.ImageValue(this.scene,45*this.dpr,27*this.dpr,h.d.uicommon,"home_persons",this.dpr,{color:"#ffffff",fontSize:12*this.dpr,fontFamily:l.Font.DEFULT_FONT}),this.peoplevalue.setLayout(2),this.peoplevalue.setText("0"),this.peoplevalue.x=T.x-2*this.dpr;var x=new o.ButtonEventDispatcher(this.scene,0,0);x.setSize(40*this.dpr,40*this.dpr),x.enable=!0,x.on(s.ClickEvent.Tap,this.onOpenOnlineHandler,this),x.x=this.peoplevalue.x,this.sceneNamebg=this.scene.make.image({key:h.d.uicommon,frame:"home_name_bg"}).setOrigin(.5),this.sceneNamebg.x=-T.width-15*this.dpr-.5*this.sceneNamebg.width,this.sceneTex=this.scene.make.text({x:this.sceneNamebg.x-10*this.dpr,y:0,text:"",style:{color:"#FFF449",fontSize:11*this.dpr,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(.5),this.roomSetBtn=new g(this.scene,30*this.dpr,30*this.dpr,this.dpr,1),this.roomSetBtn.on(s.ClickEvent.Tap,this.onOpenHouseHandler,this),this.roomPraiseBtn=new _(this.scene,this.dpr,1),this.roomSetBtn.x=-T.width-29*this.dpr,this.roomSetBtn.y=0,this.roomPraiseBtn.on(s.ClickEvent.Tap,this.onPraiseHandler,this),this.roomPraiseBtn.x=-T.width-38*this.dpr,this.roomPraiseBtn.y=0,this.sceneclickCon=new o.ButtonEventDispatcher(this.scene,0,0),this.sceneclickCon.setSize(100*this.dpr,30*this.dpr),this.sceneclickCon.on(s.ClickEvent.Tap,this.onOpenHouseHandler,this),this.sceneclickCon.x=this.sceneNamebg.x,this.sceneCon.add([T,this.peoplevalue,x,this.sceneNamebg,this.sceneTex,this.sceneclickCon,this.roomSetBtn,this.roomPraiseBtn]),this.sceneCon.x=.5*this.width-10*this.dpr,this.sceneCon.y=-15*this.dpr},PicaNewHeadPanel.prototype.setHeadData=function(e,i,n,a){e&&(this.levelTex.text=e.value+""),i&&(this.powerTex.setText(i.value+"/"+i.max),this.powerPro.setProgress(i.value,i.max)),(n=n||0)>99999?(this.moneyvalue.setText(Math.floor(n/1e3)/10+""),this.moneyvalue.setUintText({img:!0})):(this.moneyvalue.setText(n+""),this.moneyvalue.setUintTextVisible(!1)),(a=a||0)>99999?(this.diamondvalue.setText(Math.floor(a/1e3)/10+""),this.diamondvalue.setUintText({img:!0})):(this.diamondvalue.setText(a+""),this.diamondvalue.setUintTextVisible(!1)),this.money===n&&this.diamond===a||this.moveMoneyCon(),this.money=n,this.diamond=a},PicaNewHeadPanel.prototype.setSceneData=function(e,i,n,a,s,o){void 0===o&&(o=!1),this.sceneTex.text=e,this.praise=n,this.isself=o,this.peoplevalue.setText(a+""),this.canPraise(s)?(this.roomSetBtn.visible=o,this.roomPraiseBtn.visible=!o,this.roomPraiseBtn.setCount(i),this.roomPraiseBtn.setPraise(n),o||(this.sceneTex.x=this.sceneNamebg.x-20*this.dpr)):(this.roomPraiseBtn.visible=!1,this.roomSetBtn.visible=!1,this.sceneTex.x=this.sceneNamebg.x),this.sceneclickCon.enable=!0},PicaNewHeadPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaNewHeadPanel.prototype.onHeadHandler=function(){this.sendHandler&&this.sendHandler.runWith(["head"])},PicaNewHeadPanel.prototype.onEnergyHandler=function(){this.sendHandler&&this.sendHandler.runWith(["energy"])},PicaNewHeadPanel.prototype.onPraiseHandler=function(){this.isself?this.sendHandler&&this.sendHandler.runWith(["party"]):this.sendHandler&&this.sendHandler.runWith(["praise",!this.praise])},PicaNewHeadPanel.prototype.onRechargeHandler=function(){this.sendHandler&&this.sendHandler.runWith(["recharge"])},PicaNewHeadPanel.prototype.onOpenHouseHandler=function(){this.sendHandler&&this.sendHandler.runWith(["room"])},PicaNewHeadPanel.prototype.onOpenOnlineHandler=function(){this.sendHandler&&this.sendHandler.runWith("online")},PicaNewHeadPanel.prototype.onTooqingHandler=function(){this.sendHandler&&this.sendHandler.runWith("tooqing")},PicaNewHeadPanel.prototype.moveMoneyCon=function(){var e=this;if(this.scene){var i=this.width+190*this.dpr,n=.5*this.width-10*this.dpr;this.moneyCon.x=i,this.moneyCon.alpha=1,this.add(this.moneyCon),this.clearTween(),this.moneyTween=this.scene.tweens.add({targets:this.moneyCon,x:{from:i,to:n},ease:"Linear",duration:600,onComplete:function(){e.clearTween(),e.fadeOutHeadCon()}})}},PicaNewHeadPanel.prototype.fadeOutHeadCon=function(){var e=this;this.scene&&(this.moneyTween=this.scene.tweens.add({targets:this.moneyCon,alpha:{from:1,to:.2},ease:"Linear",duration:150,delay:3e3,onComplete:function(){e.clearTween(),e.remove(e.moneyCon)}}))},PicaNewHeadPanel.prototype.canPraise=function(e){return"room"===e||"store"===e},PicaNewHeadPanel.prototype.clearTween=function(){this.moneyTween&&(this.moneyTween.stop(),this.moneyTween.remove(),this.moneyTween=void 0)},PicaNewHeadPanel}(Phaser.GameObjects.Container),g=function(e){function RoomSetButton(i,n,a,s,o){var l=e.call(this,i,0,0)||this;l.dpr=s,l.zoom=o,l.setSize(n,a);var c=l.scene.make.image({key:h.d.uicommon,frame:"home_praise_bg"}),m=l.scene.make.image({key:h.d.uicommon,frame:"home_set"});return l.add([c,m]),l.enable=!0,l}return m(RoomSetButton,e),RoomSetButton}(o.ButtonEventDispatcher),_=function(e){function RoomPraiseButton(i,n,a){var s=e.call(this,i,0,0)||this;s.dpr=n,s.zoom=a;var o=s.scene.make.image({key:h.d.uicommon,frame:"home_likes_bg"});return s.setSize(o.width,o.height),s.praiseImg=s.scene.make.image({key:h.d.uicommon,frame:"home_praise"}),s.praiseImg.x=.5*-s.width+.5*s.praiseImg.width+5*n,s.countTex=s.scene.make.text({style:l.UIHelper.whiteStyle(n,11)}).setOrigin(.5),s.textPosx=.5*s.width-10*n,s.countTex.x=s.textPosx,s.uintImg=s.scene.make.image({key:h.d.uicommon,frame:"home_silver_myriad"}).setOrigin(0,.5),s.add([o,s.praiseImg,s.countTex,s.uintImg]),s.uintImg.visible=!1,s.enable=!0,s}return m(RoomPraiseButton,e),RoomPraiseButton.prototype.setCount=function(e){if(e>9999){this.countTex.text=Math.floor(e/1e4)+"",this.uintImg.visible=!0;var i=this.uintImg.width+this.countTex.width;this.countTex.x=this.textPosx-.5*i+.5*this.countTex.width,this.uintImg.x=this.countTex.x+.5*this.countTex.width+.5*this.uintImg.width}else this.countTex.text=e+"",this.uintImg.visible=!1,this.countTex.x=this.textPosx},RoomPraiseButton.prototype.setPraise=function(e){this.enable=!e},RoomPraiseButton}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewLeftPanel",(function(){return c}));var a,s=n(788),o=n(790),h=n(804),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaNewLeftPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.redButtonMap=new Map,h.setSize(n,a),h.dpr=o,h.key=s,h.init(),h}return l(PicaNewLeftPanel,e),PicaNewLeftPanel.prototype.init=function(){this.mapButton=new s.Button(this.scene,o.d.iconcommon,"home_map","home_map"),this.mapButton.y=.5*-this.height+.5*this.mapButton.height,this.mapButton.on(s.ClickEvent.Tap,this.onMapButtonHandler,this),this.taskButton=new s.Button(this.scene,o.d.iconcommon,"home_task","home_task"),this.taskButton.y=this.mapButton.y+.5*this.mapButton.height+20*this.dpr+.5*this.taskButton.height,this.taskButton.on(s.ClickEvent.Tap,this.onTaskButtonHandler,this),this.add([this.mapButton,this.taskButton]),this.redButtonMap.set(h.MainUIRedType.TASK,this.taskButton)},PicaNewLeftPanel.prototype.updateUIState=function(e){for(var i=0,n=e;i<n.length;i++){var a=n[i],s=this.getButton(a.name);s&&(s.visible=a.visible)}},PicaNewLeftPanel.prototype.setHandler=function(e){this.sendHandler=e},Object.defineProperty(PicaNewLeftPanel.prototype,"redMap",{get:function(){return this.redButtonMap},enumerable:!1,configurable:!0}),PicaNewLeftPanel.prototype.onMapButtonHandler=function(){this.sendHandler&&this.sendHandler.runWith(["maphome"])},PicaNewLeftPanel.prototype.onTaskButtonHandler=function(){this.sendHandler&&this.sendHandler.runWith(["task"])},PicaNewLeftPanel.prototype.getButton=function(e){return"mainui.maphome"===e?this.mapButton:"mainui.task"===e?this.taskButton:void 0},PicaNewLeftPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaOpenPartyCreatePanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(0),l=n(790),c=n(2),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaOpenPartyCreatePanel(i,n,a,s,o,h,l,c){var m=e.call(this,i.scene,n,a)||this;return m.uiManager=i,m.itemCount=0,m.expiredTime=0,m.key=h,m.dpr=l,m.render=i.render,m.zoom=c,m.setSize(s,o),m.create(),m}return m(PicaOpenPartyCreatePanel,e),PicaOpenPartyCreatePanel.prototype.resize=function(){this.gamegride&&this.gamegride.resetMask()},PicaOpenPartyCreatePanel.prototype.hide=function(){this.visible=!1,this.changeInputState(!1)},PicaOpenPartyCreatePanel.prototype.show=function(){this.visible=!0,this.changeInputState(!0)},PicaOpenPartyCreatePanel.prototype.destroy=function(i){e.prototype.destroy.call(this,i),this.timer&&this.timer.clear()},PicaOpenPartyCreatePanel.prototype.setPartyData=function(e,i,n){this.partyData=e,this.setPartyInfoType(!e.created);var a,s=e.ticketsCount,o=e.topics;if(this.timeSlider.setValue(0,0,1),this.partyTimevalue.text="x"+s,e.created?(this.mNameInput.text=e.name,this.describleInput.text=e.des,this.setExpiredValue(e.expired,n)):(this.mNameInput.text=h.i18n.t("party.defaultname",{name:i}),this.describleInput.text=h.i18n.t("party.describletitle")),this.gamegride.setItems(o),e.created){for(var l=e.topics,c=0,m=0,f=l;m<f.length;m++){var g=f[m];if(g.key===e.topic.key){a=g;break}c++}this.gamegride.setT(c/l.length),a=this.gamegride.getCell(c)}else a=this.gamegride.getCell(0);a&&a.container&&this.onGridTableHandler(a.container)},PicaOpenPartyCreatePanel.prototype.setExpiredValue=function(e,i){var n=this;this.expiredTime=e;var a=e-i;a<0?this.timer&&this.timer.clear():(this.timer||(this.timer=new c.TimerCountDown(new h.Handler(this,(function(e,i){n.overageValue.text=i,e<=0&&n.emit("querytheme")})))),this.timer.executeText(a))},PicaOpenPartyCreatePanel.prototype.setPartyInfoType=function(e){e?(this.partyNameTitle.text="[b]"+h.i18n.t("party.partyname")+"[/b]",this.partyThemeTitle.text="[b]"+h.i18n.t("party.partytheme")+"[/b]",this.describleTitle.text="[b]"+h.i18n.t("party.partydescrible")+"[/b]",this.partyTimeTitle.text="[b]"+h.i18n.t("party.partytime")+"[/b]",this.overageTitle.visible=!1,this.overageValue.visible=!1,this.partyTimeTitle.y=this.describleTitle.y+70*this.dpr,this.timeSlider.y=this.partyTimeTitle.y,this.openBtn.setText(h.i18n.t("party.partyopen"))):(this.partyNameTitle.text="[b]"+h.i18n.t("party.modifyname")+"[/b]",this.partyThemeTitle.text="[b]"+h.i18n.t("party.modifytheme")+"[/b]",this.describleTitle.text="[b]"+h.i18n.t("party.modifydescrible")+"[/b]",this.partyTimeTitle.text="[b]"+h.i18n.t("party.suppletime")+"[/b]",this.overageTitle.visible=!0,this.overageValue.visible=!0,this.partyTimeTitle.y=this.overageValue.y+45*this.dpr,this.timeSlider.y=this.partyTimeTitle.y,this.openBtn.setText(h.i18n.t("common.confirm"))),this.partyTimeLable.y=this.partyTimeTitle.y+34*this.dpr,this.partyCardImage.y=this.partyTimeLable.y,this.partyTimevalue.y=this.partyTimeLable.y},PicaOpenPartyCreatePanel.prototype.changeInputState=function(e){this.describleInput.visible=e,this.describleInput.node.style.display=e?"true":"none",this.mNameInput.visible=e,this.mNameInput.node.style.display=e?"true":"none",e?this.openBtn.on(String(s.ClickEvent.Tap),this.onOpenPartyHandler,this):this.openBtn.off(String(s.ClickEvent.Tap),this.onOpenPartyHandler,this)},PicaOpenPartyCreatePanel.prototype.create=function(){var e=this;this.partyNameTitle=new s.BBCodeText(this.scene,.5*-this.width+10*this.dpr,.5*-this.height+10*this.dpr,h.i18n.t("party.partyname"),{fontFamily:h.Font.DEFULT_FONT,fontSize:11*this.dpr,color:"#000000"}),this.partyNameTitle.setOrigin(0,.5).setResolution(this.dpr),this.add(this.partyNameTitle),this.mNameInput=this.createInput(this.partyNameTitle.x+this.partyNameTitle.width+13*this.dpr,this.partyNameTitle.y,190*this.dpr,37*this.dpr,13*this.dpr),this.mNameInput.on("textchange",this.onTextChangeHandler,this),this.partyThemeTitle=new s.BBCodeText(this.scene,this.partyNameTitle.x,this.partyNameTitle.y+65*this.dpr,h.i18n.t("party.partytheme"),{fontFamily:h.Font.DEFULT_FONT,fontSize:11*this.dpr,color:"#000000"}),this.partyThemeTitle.setOrigin(0,.5).setResolution(this.dpr),this.add(this.partyThemeTitle);var i={x:30*this.dpr,y:this.partyThemeTitle.y+7*this.dpr,table:{width:200*this.dpr,height:90*this.dpr,columns:1,cellWidth:70*this.dpr,cellHeight:70*this.dpr,reuseCellContainer:!0,zoom:this.zoom,padding:{left:-10*this.dpr}},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(i,n){var a=i.item;return null===n&&(n=new g(e.scene,65*e.dpr,70*e.dpr,e.key,e.dpr)),n.setThemeData(a),e.curPartyData&&e.curPartyData.key===a.key&&(n.select=!0,e.curSelectItem=n),n}};this.gamegride=new s.GameGridTable(this.scene,i),this.gamegride.layout(),this.gamegride.on("cellTap",this.onGridTableHandler,this),this.add(this.gamegride),this.describleTitle=new s.BBCodeText(this.scene,this.partyThemeTitle.x,this.partyThemeTitle.y+80*this.dpr,h.i18n.t("party.partydescrible"),{fontFamily:h.Font.DEFULT_FONT,fontSize:11*this.dpr,color:"#000000"}),this.describleTitle.setOrigin(0,.5).setResolution(this.dpr),this.add(this.describleTitle),this.describleInput=this.createInput(this.describleTitle.x+this.describleTitle.width+13*this.dpr,this.describleTitle.y+10*this.dpr,190*this.dpr,52*this.dpr,12*this.dpr,"textarea"),this.overageTitle=new s.BBCodeText(this.scene,this.describleTitle.x,this.describleTitle.y+65*this.dpr,"[b]"+h.i18n.t("party.overagetime")+"[/b]",{fontFamily:h.Font.DEFULT_FONT,fontSize:11*this.dpr,color:"#000000"}),this.overageTitle.setOrigin(0,.5).setResolution(this.dpr),this.add(this.overageTitle),this.overageValue=this.scene.make.text({x:this.overageTitle.x+this.overageTitle.width+30*this.dpr,y:this.overageTitle.y,text:"",style:{fontFamily:h.Font.DEFULT_FONT,fontSize:11*this.dpr,color:"#333333"}}),this.overageValue.setOrigin(0,.5).setResolution(this.dpr),this.add(this.overageValue),this.partyTimeTitle=new s.BBCodeText(this.scene,this.overageTitle.x,this.overageTitle.y+50*this.dpr,h.i18n.t("party.partytime"),{fontFamily:h.Font.DEFULT_FONT,fontSize:11*this.dpr,color:"#000000"}),this.partyTimeTitle.setOrigin(0,.5).setResolution(this.dpr),this.add(this.partyTimeTitle);var n=190*this.dpr,a=4*this.dpr,c=this.partyTimeTitle.x+this.partyTimeTitle.width+10*this.dpr+.5*n;this.createSlider(c,this.partyTimeTitle.y,n,a),this.partyTimeLable=new s.BBCodeText(this.scene,this.partyTimeTitle.x+50*this.dpr,this.partyTimeTitle.y+40*this.dpr,h.i18n.t("party.partycardlabel"),{fontFamily:h.Font.DEFULT_FONT,fontSize:11*this.dpr,color:"#000000"}),this.partyTimeLable.setOrigin(0,.5).setResolution(this.dpr),this.partyTimeLable.x=.5*-this.partyTimeLable.width-20*this.dpr,this.add(this.partyTimeLable),this.partyCardImage=new o.DynamicImage(this.scene,0,this.partyTimeLable.y),this.partyCardImage.setTexture(this.key,"party_card"),this.partyCardImage.x=this.partyTimeLable.x+this.partyTimeLable.width+.5*this.partyCardImage.width,this.add(this.partyCardImage),this.partyTimevalue=this.scene.make.text({x:this.partyCardImage.x+.5*this.partyCardImage.width+2*this.dpr,y:this.partyCardImage.y,text:"",style:{fontFamily:h.Font.DEFULT_FONT,fontSize:14*this.dpr,color:"#000000"}}),this.partyTimevalue.setOrigin(0,.5).setResolution(this.dpr),this.partyTimevalue.setStroke("#000000",2),this.add(this.partyTimevalue),this.openBtn=new s.NineSliceButton(this.scene,0,.5*this.height+2*this.dpr,100*this.dpr,33*this.dpr,l.c.commonKey,"yellow_btn_normal",h.i18n.t("party.partyopen"),this.dpr,this.scale,{left:14*this.dpr,top:0*this.dpr,right:14*this.dpr,bottom:0*this.dpr}),this.openBtn.setTextStyle({color:"#996600",fontSize:13*this.dpr,fontFamily:h.Font.DEFULT_FONT}),this.openBtn.setFontStyle("bold"),this.add(this.openBtn)},PicaOpenPartyCreatePanel.prototype.createSlider=function(e,i,n,a){var o=new s.NineSlicePatch(this.scene,0,0,8,7*this.dpr,l.c.common2Key,"slider_bg",{left:3,top:1,right:3,bottom:1}),c=new s.NineSlicePatch(this.scene,0,0,8,7*this.dpr,l.c.common2Key,"slider_rate",{left:3,top:1,right:3,bottom:1});this.thumb=this.scene.make.image({key:l.c.common2Key,frame:"block"}),this.thumb.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.itemCountText=this.scene.make.text({x:0,y:0,style:{color:"#744803",fontSize:12*this.dpr,fontFamily:h.Font.DEFULT_FONT}},!1).setFontStyle("bold").setOrigin(.5),this.timeSlider=new s.GameSlider(this.scene,{x:e,y:i,width:n,height:a,orientation:1,background:o,indicator:c,thumb:this.thumb,offsetX:.5*this.thumb.width,valuechangeCallback:this.onSliderValueHandler,valuechangeCallbackScope:this,value:.5}),this.timeSlider.add(this.itemCountText),this.timeSlider.setValue(0),this.add(this.timeSlider)},PicaOpenPartyCreatePanel.prototype.onSliderValueHandler=function(e){var i=this.partyData?this.partyData.ticketsCount:0;this.itemCountText.x=this.thumb.x,this.itemCount=Math.ceil(e*i),this.itemCount>i&&(this.itemCount=i),this.itemCountText.text=this.itemCount+""},PicaOpenPartyCreatePanel.prototype.onTextChangeHandler=function(){var e=170*this.dpr;this.mNameInput.text.length;this.mNameInput.text=h.UIHelper.spliceText(e,this.mNameInput.text,13*this.dpr,this.scene)},PicaOpenPartyCreatePanel.prototype.onOpenPartyHandler=function(){var e=this;if(this.curPartyData){var i=this.curPartyData.key,n=this.mNameInput.text,a=this.describleInput.text,s=this.itemCount,l=this.partyData.created;s>0?(this.describleInput.node.style.display="none",this.describleInput.visible=!1,new o.AlertView(this.scene,this.uiManager).show({title:h.i18n.t("main_ui.party"),text:l?h.i18n.t("party.modifyconfirm",{count:s}):h.i18n.t("party.openconfirm",{count:s}),oy:302*this.dpr*this.render.uiScale,callback:function(){e.emit("openparty",i,n,a,s,l)},cancelback:function(){e.describleInput.node.style.display="true",e.describleInput.visible=!0}})):l?this.emit("openparty",i,n,a,s,l):this.emit("showtips","PicaNotice",h.i18n.t("party.ticketinsuff"))}},PicaOpenPartyCreatePanel.prototype.onGridTableHandler=function(e){this.curSelectItem&&(this.curSelectItem.select=!1),e.select=!0,this.curPartyData=e.partyData,this.curSelectItem=e},PicaOpenPartyCreatePanel.prototype.createInput=function(e,i,n,a,o,l){void 0===l&&(l="text");var c=this.scene.make.graphics(void 0,!1);c.fillStyle(10809331,.66),c.fillRoundedRect(0,.5*-a,n,a,6*this.dpr),c.setPosition(e,i),this.add(c);var m=new s.InputText(this.scene,e+.5*n+8*this.dpr,i,n,a-10*this.dpr,{type:l,placeholder:h.i18n.t("party.partydescrible"),color:"#055C62",fontSize:o+"px"});return this.add(m),m},PicaOpenPartyCreatePanel}(Phaser.GameObjects.Container),g=function(e){function PicPartyThemeItem(i,n,a,s,l){var c=e.call(this,i)||this;return c.dpr=l,c.setSize(n,a),c.selectbg=c.scene.make.image({key:s,frame:"party_selected_bg"}),c.selectbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.icon=new o.DynamicImage(i,0,0),c.icon.setTexture(s,"party_icon_1"),c.value=i.make.text({x:0,y:0,text:"10",style:{color:"#333333",fontSize:11*l,fontFamily:h.Font.DEFULT_FONT}}),c.value.setOrigin(.5,0),c.value.y=.5*c.height-7*l,c.value.setWordWrapWidth(c.width,!0),c.add([c.selectbg,c.icon,c.value]),c.selectbg.visible=!1,c}return m(PicPartyThemeItem,e),PicPartyThemeItem.prototype.setThemeData=function(e){this.selectbg.visible=!1,this.partyData=e,this.value.text=e.name;var i=e.display.texturePath,n=i.lastIndexOf("/"),a=i.slice(n+1,i.length),s=i.slice(0,n+1),o=h.Url.getOsdRes(s+a+"_"+this.dpr+"x.png");this.icon.load(o)},Object.defineProperty(PicPartyThemeItem.prototype,"select",{set:function(e){this.selectbg.visible=e},enumerable:!1,configurable:!0}),PicPartyThemeItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMyNavigationPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(1),m=n(989),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaMyNavigationPanel(i,n,a,s,o,h){var l=e.call(this,n)||this;return l.render=i,l.roomsItems=[],l.datas=[],l.haveCount=0,l.setSize(a,s),l.dpr=o,l.zoom=h,l.create(),l.queryType=[c.op_def.RoomTypeEnum.NORMAL_ROOM],l}return f(PicaMyNavigationPanel,e),PicaMyNavigationPanel.prototype.create=function(){var e=this;this.mGameScroll=new s.GameScroller(this.scene,{x:0,y:0,width:this.width,height:this.height-10*this.dpr,zoom:this.zoom,dpr:this.dpr,align:2,orientation:0,space:6*this.dpr,selfevent:!0,cellupCallBack:function(i){e.onPointerUpHandler(i)}}),this.add(this.mGameScroll)},PicaMyNavigationPanel.prototype.show=function(){this.visible=!0},PicaMyNavigationPanel.prototype.hide=function(){for(var e=0,i=this.roomsItems;e<i.length;e++){var n=i[e];n.visible=!1,n.setExtend(!1,!1)}this.curRoomItem=void 0,this.visible=!1,this.clearDatas()},PicaMyNavigationPanel.prototype.refreshMask=function(){this.mGameScroll.refreshMask()},PicaMyNavigationPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaMyNavigationPanel.prototype.setRoomDatas=function(e){this.datas.push(e),-1!==this.queryType.indexOf(e.roomType)&&this.haveCount++,this.haveCount===this.queryType.length&&this.setGameScrollData(),this.render.emitter.emit(PicaMyNavigationPanel.PICAMYNAVIGATIONPANEL_DATA)},PicaMyNavigationPanel.prototype.clearDatas=function(){this.datas.length=0,this.haveCount=0},PicaMyNavigationPanel.prototype.setGameScrollData=function(){for(var e,i=0;i<this.datas.length;i++){var n=void 0;i<this.roomsItems.length?n=this.roomsItems[i]:((n=new _(this.scene,this.dpr,"活动")).setHandler(new l.Handler(this,this.onTownItemHandler)),this.mGameScroll.addItem(n),this.roomsItems.push(n)),n.visible=!0,n.setGroupData(this.datas[i]),e=e||n,this.onPointerUpHandler(n)}this.mGameScroll.Sort()},PicaMyNavigationPanel.prototype.onPointerUpHandler=function(e){var i=!e.extend,n=this.scene.input.activePointer;e.checkExtendRect(n)||e.setExtend(i,!0)},PicaMyNavigationPanel.prototype.onTownItemHandler=function(e,i){if("extend"===e){var n=i.extend,a=i.item;this.onExtendsHandler(n,a)}else"go"===e?i&&this.sendHandler.runWith(["enter",i.roomId]):"roomtype"===e&&this.sendHandler.runWith("roomtype")},PicaMyNavigationPanel.prototype.onExtendsHandler=function(e,i){this.curRoomItem=e?i:null,this.mGameScroll.Sort(!0)},PicaMyNavigationPanel.PICAMYNAVIGATIONPANEL_DATA="PICAMYNAVIGATIONPANEL_DATA",PicaMyNavigationPanel}(Phaser.GameObjects.Container),_=function(e){function NavigationRoomListItem(i,n,a){var s=e.call(this,i)||this;s.roomItems=[],s.shopItems=[],s.dpr=n,s.setSize(274*n,40*n),s.topCon=s.scene.make.container(void 0,!1),s.topCon.setSize(274*n,40*n);var c=s.scene.make.graphics(void 0,!1);return c.clear(),c.fillStyle(16777215,.4),c.fillRoundedRect(.5*-s.width,.5*-s.height,s.width,s.height,5*n),s.titleTex=s.scene.make.text({text:a,style:l.UIHelper.whiteStyle(n)}).setOrigin(0,.5),s.titleTex.x=.5*-s.width+5*n,s.arrow=s.scene.make.image({key:h.d.map,frame:"map_list_arrow_fold"}),s.arrow.x=.5*s.width-15*n,s.topCon.add([c,s.titleTex,s.arrow]),s.mExtend=new o.GridLayoutGroup(s.scene,s.width,0,{cellSize:new Phaser.Math.Vector2(s.width,68*s.dpr),space:new Phaser.Math.Vector2(5*s.dpr,5*s.dpr),startAxis:o.AxisType.Horizontal,constraint:o.ConstraintType.FixedColumnCount,constraintCount:1,alignmentType:o.AlignmentType.UpperLeft}),s.add(s.topCon),s.add(s.mExtend),s}return f(NavigationRoomListItem,e),NavigationRoomListItem.prototype.setGroupData=function(e){this.titleTex.text=this.getTitleName(e.roomType),this.setListData(e.rooms,e.roomType)},NavigationRoomListItem.prototype.setListData=function(e,i){for(var n=this.getItemsArr(i),a=0;a<e.length;a++){var s=void 0;a<n.length?s=n[a]:(i===c.op_def.RoomTypeEnum.NORMAL_ROOM?(s=new m.PicaMyRoomListItem(this.scene,this.dpr)).setHandler(new l.Handler(this,this.onRoomItemHandler)):s=new m.PicaRoomListItem(this.scene,this.dpr),this.mExtend.add(s),n.push(s)),s.visible=!0,s.setRoomData(e[a])}this.mExtend.Layout(),this.closeExtend()},NavigationRoomListItem.prototype.roomList=function(){return this.mExtend.list},NavigationRoomListItem.prototype.checkExtendRect=function(e){if(!this.mExtend.visible)return!1;var i=l.Tool.checkPointerContains(this.mExtend,e);if(i)for(var n=0,a=this.mExtend.list;n<a.length;n++){var s=a[n];if(l.Tool.checkPointerContains(s,e)){var o=s.roomData;this.send&&o.created&&this.send.runWith(["go",o])}}return i},NavigationRoomListItem.prototype.setHandler=function(e){this.send=e},NavigationRoomListItem.prototype.setExtend=function(e,i){void 0===i&&(i=!0),e?(this.openExtend(),i&&this.send&&this.send.runWith(["extend",{extend:!0,item:this}])):(this.closeExtend(),i&&this.send&&this.send.runWith(["extend",{extend:!1,item:this}]))},Object.defineProperty(NavigationRoomListItem.prototype,"extend",{get:function(){return this.mIsExtend},enumerable:!1,configurable:!0}),NavigationRoomListItem.prototype.getTitleName=function(e){return e===c.op_def.RoomTypeEnum.NORMAL_ROOM?l.i18n.t("room_list.room"):e===c.op_def.RoomTypeEnum.SHOP?l.i18n.t("partynav.store"):void 0},NavigationRoomListItem.prototype.getItemsArr=function(e){for(var i=0,n=this.roomItems;i<n.length;i++){n[i].visible=!1}for(var a=0,s=this.shopItems;a<s.length;a++){s[a].visible=!1}return e===c.op_def.RoomTypeEnum.NORMAL_ROOM?this.roomItems:e===c.op_def.RoomTypeEnum.SHOP?this.shopItems:void 0},NavigationRoomListItem.prototype.onRoomItemHandler=function(){this.send&&this.send.runWith(["roomtype"])},NavigationRoomListItem.prototype.openExtend=function(){this.mExtend.visible=!0,this.height=this.topCon.height+this.mExtend.height+0*this.dpr,this.topCon.y=.5*-this.height+.5*this.topCon.height,this.mExtend.y=this.topCon.y+.5*this.topCon.height+.5*this.mExtend.height+5*this.dpr,this.mIsExtend=!0,this.arrow.setFrame("map_list_arrow_unfold"),this.titleTex.setColor("#FFF449")},NavigationRoomListItem.prototype.closeExtend=function(){this.mExtend&&(this.mExtend.visible=!1),this.height=this.topCon.height,this.topCon.y=0,this.mIsExtend=!1,this.arrow.setFrame("map_list_arrow_fold"),this.titleTex.setColor("#ffffff")},NavigationRoomListItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaTownNavigationPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaTownNavigationPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.townItems=[],h.setSize(n,a),h.dpr=s,h.zoom=o,h.create(),h}return c(PicaTownNavigationPanel,e),PicaTownNavigationPanel.prototype.create=function(){var e=this;this.mGameScroll=new s.GameScroller(this.scene,{x:0,y:0,width:this.width,height:this.height-10*this.dpr,zoom:this.zoom,dpr:this.dpr,align:2,orientation:0,space:6*this.dpr,selfevent:!0,cellupCallBack:function(i){e.onPointerUpHandler(i)}}),this.add(this.mGameScroll)},PicaTownNavigationPanel.prototype.show=function(){this.visible=!0},PicaTownNavigationPanel.prototype.hide=function(){for(var e=0,i=this.townItems;e<i.length;e++){var n=i[e];n.visible=!1,n.setExtend(!1,!1)}this.curTownItem=void 0,this.visible=!1},PicaTownNavigationPanel.prototype.refreshMask=function(){this.mGameScroll.refreshMask()},PicaTownNavigationPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaTownNavigationPanel.prototype.setTownDatas=function(e){for(var i,n=0;n<e.length;n++){var a=void 0;n<this.townItems.length?a=this.townItems[n]:((a=new f(this.scene,this.dpr,"活动")).setHandler(new l.Handler(this,this.onTownItemHandler)),this.mGameScroll.addItem(a),this.townItems.push(a)),a.visible=!0,a.setGroupData(e[n]),i=i||a,this.onPointerUpHandler(a)}this.mGameScroll.Sort()},PicaTownNavigationPanel.prototype.onPointerUpHandler=function(e){var i=!e.extend,n=this.scene.input.activePointer;e.checkExtendRect(n)||e.setExtend(i,!0)},PicaTownNavigationPanel.prototype.onTownItemHandler=function(e,i){if("extend"===e){var n=i.extend,a=i.item;this.onExtendsHandler(n,a)}else"go"===e&&this.sendHandler&&this.sendHandler.runWith(["enter",i.id+""])},PicaTownNavigationPanel.prototype.onExtendsHandler=function(e,i){this.curTownItem=e?i:void 0,this.mGameScroll.Sort(!0)},PicaTownNavigationPanel}(Phaser.GameObjects.Container),f=function(e){function NavigationTownListItem(i,n,a){var s=e.call(this,i)||this;s.townItems=[],s.dpr=n,s.setSize(274*n,40*n),s.topCon=s.scene.make.container(void 0,!1),s.topCon.setSize(274*n,40*n);var c=s.scene.make.graphics(void 0,!1);return c.clear(),c.fillStyle(16777215,.4),c.fillRoundedRect(.5*-s.width,.5*-s.height,s.width,s.height,5*n),s.titleTex=s.scene.make.text({text:a,style:l.UIHelper.whiteStyle(n)}).setOrigin(0,.5),s.titleTex.x=.5*-s.width+5*n,s.arrow=s.scene.make.image({key:h.d.map,frame:"map_list_arrow_fold"}),s.arrow.x=.5*s.width-15*n,s.topCon.add([c,s.titleTex,s.arrow]),s.mExtend=new o.GridLayoutGroup(s.scene,s.width,0,{cellSize:new Phaser.Math.Vector2(135*n,57*s.dpr),space:new Phaser.Math.Vector2(5*s.dpr,5*s.dpr),startAxis:o.AxisType.Horizontal,constraint:o.ConstraintType.FixedColumnCount,constraintCount:2,alignmentType:o.AlignmentType.UpperLeft}),s.add(s.topCon),s.add(s.mExtend),s}return c(NavigationTownListItem,e),NavigationTownListItem.prototype.setGroupData=function(e){this.titleTex.text=e.name;var i=e.datas;this.setListData(i)},NavigationTownListItem.prototype.setListData=function(e){for(var i=0,n=this.townItems;i<n.length;i++){(s=n[i]).visible=!1}for(var a=0;a<e.length;a++){var s=void 0;a<this.townItems.length?s=this.townItems[a]:((s=new g(this.scene,this.dpr)).name=a+"",this.mExtend.add(s),this.townItems.push(s)),s.visible=!0,s.setTownData(e[a])}this.mExtend.Layout(),this.closeExtend()},NavigationTownListItem.prototype.checkExtendRect=function(e){if(!this.mExtend.visible)return!1;var i=l.Tool.checkPointerContains(this.mExtend,e);if(i)for(var n=0,a=this.mExtend.list;n<a.length;n++){var s=a[n];l.Tool.checkPointerContains(s,e)&&this.send&&this.send.runWith(["go",s.roomData])}return i},NavigationTownListItem.prototype.setHandler=function(e){this.send=e},NavigationTownListItem.prototype.setExtend=function(e,i){void 0===i&&(i=!0),e?(this.openExtend(),i&&this.send&&this.send.runWith(["extend",{extend:!0,item:this}])):(this.closeExtend(),i&&this.send&&this.send.runWith(["extend",{extend:!1,item:this}]))},Object.defineProperty(NavigationTownListItem.prototype,"extend",{get:function(){return this.mIsExtend},enumerable:!1,configurable:!0}),NavigationTownListItem.prototype.openExtend=function(){this.mExtend.visible=!0,this.height=this.topCon.height+this.mExtend.height+0*this.dpr,this.topCon.y=.5*-this.height+.5*this.topCon.height,this.mExtend.y=this.topCon.y+.5*this.topCon.height+.5*this.mExtend.height+5*this.dpr,this.mIsExtend=!0,this.arrow.setFrame("map_list_arrow_unfold"),this.titleTex.setColor("#FFF449")},NavigationTownListItem.prototype.closeExtend=function(){this.mExtend&&(this.mExtend.visible=!1),this.height=this.topCon.height,this.topCon.y=0,this.mIsExtend=!1,this.arrow.setFrame("map_list_arrow_fold"),this.titleTex.setColor("#ffffff")},NavigationTownListItem}(Phaser.GameObjects.Container),g=function(e){function TownMapItem(i,n){var a=e.call(this,i)||this;return a.setSize(135*n,57*n),a.dpr=n,a.imge=new o.DynamicImage(a.scene,0,0),a.imge.setTexture("town_entrance_1"),a.namebg=a.scene.make.image({key:h.d.map,frame:"map_list_entrance_name"}).setOrigin(1,.5),a.namebg.x=.5*a.width-2*n,a.namebg.y=.5*a.height-.5*a.namebg.height-2*n,a.nameTex=a.scene.make.text({style:l.UIHelper.whiteStyle(n,10)}).setOrigin(.5),a.nameTex.x=a.namebg.x-.5*a.namebg.width,a.nameTex.y=a.namebg.y,a.add([a.imge,a.namebg,a.nameTex]),a}return c(TownMapItem,e),TownMapItem.prototype.setTownData=function(e){if(this.roomData=e,e.texturePath&&""!==e.texturePath){var i=l.Url.getOsdRes(e.texturePath+"_"+this.dpr+"x.png");this.imge.load(i)}this.nameTex.text=e.roomName},TownMapItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaAttributePanel",(function(){return c}));var a,s=n(788),o=n(0),h=n(789),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaAttributePanel(i,n,a,s,o,h,l){var c=e.call(this,i,n,a)||this;return c.attriItems=[],c.setSize(s,o),c.key=h,c.dpr=l,c.mspace=10*l,c}return l(PicaAttributePanel,e),Object.defineProperty(PicaAttributePanel.prototype,"space",{set:function(e){this.mspace=e},enumerable:!1,configurable:!0}),PicaAttributePanel.prototype.setAttributeData=function(e){for(var i=e.length,n=i>4?2:1,a=this.width,s=this.height,o=20*this.dpr,h=a/2,l=.5*-s+10*this.dpr,c=0,f=this.attriItems;c<f.length;c++){(_=f[c]).visible=!1}for(var g=0;g<i;g++){var _=void 0;g<this.attriItems.length?_=this.attriItems[g]:(_=new m(this.scene,0,0,h,o,this.key,this.dpr),this.add(_),this.attriItems.push(_));var T=.5*(a-a/n)*(g<4?-1:1)+20*this.dpr*(2===n?1:0),x=l+.5*o+(o+this.mspace)*(g%4);_.setPosition(T,x),_.setInfo(e[g]),_.visible=!0}},PicaAttributePanel}(Phaser.GameObjects.Container),m=function(e){function PlayerAttributeValue(i,n,a,l,c,m,f){var g=e.call(this,i,n,a)||this;return g.dpr=f,g.setSize(l,c),g.icon=new h.DynamicImage(g.scene,0,0),g.icon.x=.5*-l+10*f,g.nameText=g.scene.make.text({x:g.icon.x+13*f,y:0,text:"Attack:",style:{fontFamily:o.Font.DEFULT_FONT,fontSize:11*f,color:"#131313"}}).setOrigin(0,.5),g.valueText=new s.BBCodeText(g.scene,0,0,"100",{color:"#131313",fontSize:11*g.dpr,fontFamily:o.Font.DEFULT_FONT}).setOrigin(0,.5),g.valueText.x=g.nameText.x+g.nameText.width,g.add([g.icon,g.nameText,g.valueText]),g}return l(PlayerAttributeValue,e),PlayerAttributeValue.prototype.setInfo=function(e){var i=this;if(e.display){var n=o.Url.getOsdRes(e.display.texturePath);this.icon.load(n,this,(function(){i.icon.displayWidth=20*i.dpr,i.icon.scaleY=i.icon.scaleX}))}this.nameText.text=e.name+":",this.valueText.text=e.value+(e.tempValue?this.getRichLabel(e.tempValue):""),this.valueText.x=this.nameText.x+this.nameText.width+3*this.dpr},PlayerAttributeValue.prototype.getRichLabel=function(e,i){return void 0===i&&(i="#0B77CD"),"[color="+i+"](+"+e+")[/color]"},PlayerAttributeValue}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoamDrawPanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(791),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaRoamDrawPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.money=0,h.token=0,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h.setInteractive(),h}return m(PicaRoamDrawPanel,e),PicaRoamDrawPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),this.drawProgress.refreshMask()},PicaRoamDrawPanel.prototype.setHandler=function(e){this.send=e},PicaRoamDrawPanel.prototype.init=function(){this.bg=new c.CommonBackground(this.scene,0,0,this.width,this.height,h.d.roam,"roam_bg",7530491),this.topbg=new o.DynamicImage(this.scene,0,0),this.stripebg=this.scene.make.image({key:"roam_stripe"}),this.stripebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.stripebg.y=.5*-this.height+.5*this.stripebg.height,this.closeBtn=new s.Button(this.scene,h.d.uicommon,"back_arrow","back_arrow"),this.closeBtn.setPosition(.5*-this.width+21*this.dpr,.5*-this.height+45*this.dpr),this.closeBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this);var e=new s.NineSlicePatch(this.scene,0,-this.dpr,190*this.dpr,28*this.dpr,h.d.uicommon,"home_assets_bg",{left:17*this.dpr,top:0*this.dpr,right:17*this.dpr,bottom:0*this.dpr});e.x=.5*-e.width;var i=this.scene.make.image({x:e.x,y:0,key:h.d.uicommon,frame:"home_assets_division"},!1);this.moneyvalue=new c.ImageValue(this.scene,60*this.dpr,26*this.dpr,h.d.uicommon,"home_silver",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:l.Font.NUMBER}),this.moneyvalue.setLayout(1),this.moneyvalue.x=e.x-.5*e.width+22*this.dpr,this.tokenvalue=new c.ImageValue(this.scene,60*this.dpr,26*this.dpr,h.d.uicommon,"roam_ordinary_icon",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:l.Font.NUMBER}),this.tokenvalue.setLayout(1),this.tokenvalue.x=e.x+22*this.dpr,this.moneyAddBtn=new s.Button(this.scene,h.d.uicommon,"home_praise_bg","home_praise_bg");var n=this.scene.make.image({x:0,y:0,key:h.d.uicommon,frame:"home_assets_add"},!1);this.moneyAddBtn.add(n),this.moneyAddBtn.x=.5*-this.moneyAddBtn.width-4*this.dpr,this.moneyAddBtn.on(s.ClickEvent.Tap,this.onRechargeHandler,this),this.moneyCon=this.scene.make.container(void 0,!1),this.moneyCon.setSize(e.width,e.height),this.moneyCon.add([e,i,this.moneyvalue,this.tokenvalue,this.moneyAddBtn]),this.moneyCon.x=.5*this.width-20*this.dpr,this.moneyCon.y=this.closeBtn.y;var a=new s.NineSliceButton(this.scene,0,0,76*this.dpr,30*this.dpr,h.d.uicommon,"home_persons_bg",l.i18n.t("roam.previewtex"),this.dpr,this.zoom,{left:20*this.dpr,right:20*this.dpr,top:0,bottom:0});a.setTextStyle(l.UIHelper.whiteStyle(this.dpr)),a.setFontStyle("bold"),a.x=.5*this.width-.5*a.width-15*this.dpr,a.y=this.moneyCon.y+.5*this.moneyCon.height+.5*a.height+15*this.dpr,a.on(s.ClickEvent.Tap,this.onDrawPreviewHandler,this),a.visible=!1,this.cloudPanel=new x(this.scene,this.width,137*this.dpr,this.dpr),this.cloudPanel.y=.5*this.height-.5*this.cloudPanel.height,this.drawProgress=new g(this.scene,this.dpr,this.zoom),this.drawProgress.setHandler(new l.Handler(this,this.onProgressHandler)),this.drawProgress.y=.5*this.height-.5*this.drawProgress.height-220*this.dpr,this.oneRoamItem=new T(this.scene,this.dpr,this.zoom),this.oneRoamItem.x=.5*-this.oneRoamItem.width-10*this.dpr,this.oneRoamItem.y=.5*this.height-.5*this.oneRoamItem.height-60*this.dpr,this.oneRoamItem.setHandler(new l.Handler(this,this.onRoamDrawHandler,["one"])),this.tenRoamItem=new T(this.scene,this.dpr,this.zoom),this.tenRoamItem.x=-this.oneRoamItem.x,this.tenRoamItem.y=this.oneRoamItem.y,this.tenRoamItem.setHandler(new l.Handler(this,this.onRoamDrawHandler,["ten"])),this.bottomtips=this.scene.make.text({text:l.i18n.t("roam.bottomtips"),style:l.UIHelper.blackStyle(this.dpr,14)}).setOrigin(.5),this.bottomtips.y=.5*this.height-20*this.dpr,this.add([this.bg,this.stripebg,this.topbg,this.closeBtn,this.moneyCon,a,this.cloudPanel,this.drawProgress,this.oneRoamItem,this.tenRoamItem,this.bottomtips]),this.resize()},PicaRoamDrawPanel.prototype.setRoamDatas=function(e){var i=this;this.poolDatas=e;for(var n=0,a=e;n<a.length;n++){var s=a[n];if(1===s.drawTime)this.oneRoamItem.setRoamData(s),this.bottomtips.text=l.i18n.t("roam.bottomtips",{name:s.picaStarName,count:s.picaStarCount});else{if(this.tenRoamItem.setRoamData(s),s.diamond)this.drawProgress.visible=!1,this.topbg.setTexture("roam_topic1"),this.stripebg.visible=!1;else{this.drawProgress.visible=!0;for(var o=0;o<s.progressAward.length;o++){var h=s.progressAward[o];if(!h.received){var c=1e3*s.progressExpireTime-s.unixTime;this.drawProgress.setRoadLvData(s.progress,c,o+1,h);break}}this.topbg.setTexture("roam_topic"),this.stripebg.visible=!0}var m=l.Url.getOsdRes(s.backPath+"_"+this.dpr+"x.png");this.topbg.load(m,this,(function(){i.topbg.y=.5*-i.height+.5*i.topbg.displayHeight})),this.topbg.y=.5*-this.height+.5*this.topbg.displayHeight}}},PicaRoamDrawPanel.prototype.setMoneyData=function(e,i,n){var a="home_silver",s="roam_ordinary_icon";"IV0000002"===n&&(a="home_diamond",s="roam_advanced_icon"),e>99999?(this.moneyvalue.setFrameValue(Math.floor(e/1e3)/10+"",h.d.uicommon,a),this.moneyvalue.setUintText({img:!0})):(this.moneyvalue.setFrameValue(e+"",h.d.uicommon,a),this.moneyvalue.setUintTextVisible(!1)),this.tokenvalue.setFrameValue(i+"",h.d.uicommon,s),this.money=e,this.token=i,this.tokenid=n},PicaRoamDrawPanel.prototype.onRoamDrawHandler=function(e,i){if("one"===e){if(i.one=!0,!i.free&&this.token<i.drawTime&&this.money<i.unitPrice*i.drawTime){var n="IV0000002"===this.tokenid?l.i18n.t("coin.diamond"):l.i18n.t("coin.coin"),a=l.i18n.t("roam.moneytips",{name:n});return void(this.send&&this.send.runWith(["notice",a]))}}else if("ten"===e&&(i.one=!1,!i.free&&this.token<i.drawTime)){n="IV0000002"===this.tokenid?l.i18n.t("coin.diamond"):l.i18n.t("coin.coin");var s=i.name,o=i.drawTime-this.token,h=i.unitPrice*o;if(h<=this.money){a=l.i18n.t("roam.paytips",{name:h+n,count:o,tag:s});this.send&&this.send.runWith(["pay",{tokenID:this.tokenid,id:i.id,value:h,text:a}])}else{a=l.i18n.t("roam.moneytips",{name:n});this.send&&this.send.runWith(["notice",a])}return}this.send&&this.send.runWith(["draw",i])},PicaRoamDrawPanel.prototype.onCloseHandler=function(){this.send&&this.send.runWith("close")},PicaRoamDrawPanel.prototype.onRechargeHandler=function(){this.send&&this.send.runWith(["notice",l.i18n.t("noticeTips.staytuned")])},PicaRoamDrawPanel.prototype.onDrawPreviewHandler=function(){this.send&&this.send.runWith("preview")},PicaRoamDrawPanel.prototype.onProgressHandler=function(e,i){"help"===e||"reward"===e&&this.send&&this.send.runWith(["progressrewards",i])},PicaRoamDrawPanel}(Phaser.GameObjects.Container),g=function(e){function RoamDrawProgress(i,n,a){var s=e.call(this,i)||this;return s.dpr=n,s.zoom=a,s.init(),s}return m(RoamDrawProgress,e),RoamDrawProgress.prototype.refreshMask=function(){this.progreItem.refreshMask()},RoamDrawProgress.prototype.init=function(){var e=this.scene.make.image({key:h.d.roam,frame:"roam_lv_bg"});e.y=0,this.setSize(e.width,e.height),this.progreItem=new _(this.scene,this.dpr,this.zoom),this.progreItem.y=-13*this.dpr,this.progreTex=this.scene.make.text({text:"",style:l.UIHelper.whiteStyle(this.dpr)}).setOrigin(.5),this.progreTex.setFontStyle("bold"),this.progreTex.y=this.progreItem.y,this.roamLevTex=new s.BBCodeText(this.scene,0,0,"",l.UIHelper.blackStyle(this.dpr)).setOrigin(.5),this.roamLevTex.y=.5*e.height+15*this.dpr,this.roamLevHelp=new s.Button(this.scene,h.d.uicommon1,"icon_tips"),this.roamLevHelp.on(s.ClickEvent.Tap,this.onHelpHandler,this),this.roamLevHelp.y=this.roamLevTex.y,this.roamLevHelp.x=this.roamLevTex.x+.5*this.roamLevTex.width+15*this.dpr,this.roamLevTips=this.scene.make.text({text:"",style:l.UIHelper.blackStyle(this.dpr)}).setOrigin(.5),this.roamLevTips.y=this.roamLevTex.y+20*this.dpr,this.resetTimeTex=this.scene.make.text({text:"",style:l.UIHelper.redStyle(this.dpr,8)}).setOrigin(.5),this.resetTimeTex.setStroke("#ffffff",this.dpr),this.resetTimeTex.y=20*this.dpr,this.add([e,this.progreItem,this.progreTex,this.roamLevTex,this.roamLevHelp,this.roamLevTips,this.resetTimeTex]),this.on("pointerup",this.onRecivedRewardHandler,this)},RoamDrawProgress.prototype.setRoadLvData=function(e,i,n,a){this.indexed=n,this.expireTime=i,this.roamLevTex.text=l.i18n.t("roam.roamlv",{name:""})+" [color=#FF693A][size="+14*this.dpr+"][b]LV"+n+"[/b][/size][/color]",e=e>a.targetValue?e=a.targetValue:e,this.progreTex.text=e+"/"+a.targetValue,this.progreItem.setProgress(e,a.targetValue),e>=a.targetValue?this.setInteractive():this.disableInteractive(),this.roamLevTips.text=a.rewards[0].des,i>0?(this.resetTimeTex.visible=!0,this.resetTimeTex.text=l.i18n.t("roam.resettips",{name:l.TimeUtils.getDateFormat(i,!1)}),this.loopTimeOut(i)):this.resetTimeTex.visible=!1,this.roamLevHelp.x=this.roamLevTex.x+.5*this.roamLevTex.width+.5*this.roamLevHelp.width+20*this.dpr},RoamDrawProgress.prototype.setHandler=function(e){this.send=e},RoamDrawProgress.prototype.onHelpHandler=function(){this.visible&&this.send&&this.send.runWith("help")},RoamDrawProgress.prototype.onRecivedRewardHandler=function(){this.visible&&this.send&&this.send.runWith(["reward",this.indexed])},RoamDrawProgress.prototype.loopTimeOut=function(e){var i=this;this.timer&&(clearTimeout(this.timer),this.timer=void 0);var excute=function(){i.timer=setTimeout((function(){i.scene&&((e-=1e3)>0?(excute(),i.resetTimeTex.text=l.i18n.t("roam.resettips",{name:l.TimeUtils.getDateFormat(e,!1)})):i.resetTimeTex.visible=!1)}),1e3)};excute()},RoamDrawProgress}(Phaser.GameObjects.Container),_=function(e){function ProgressItem(i,n,a){var s=e.call(this,i)||this;return s.max=1,s.value=0,s.animkey="roamlv1",s.animkey2="roamlv2",s.dpr=n,s.zoom=a,s.init(),s}return m(ProgressItem,e),ProgressItem.prototype.init=function(){this.progreimg=this.scene.make.image({key:h.d.roam,frame:"roam_lv"}),this.setSize(this.progreimg.width,this.progreimg.height),this.sprite=this.createSprite(h.d.roam,this.animkey,"roam_lv_1_",[1,6],9,-1),this.sprite2=this.createSprite(h.d.roam,this.animkey2,"roam_lv_2_",[1,6],9,-1),this.graphic=this.scene.make.graphics(void 0,!1),this.graphic.clear(),this.graphic.fillStyle(16695063,1),this.graphic.fillRect(.5*-this.width,0,this.width,this.height),this.imgMask=this.scene.make.image({key:h.d.roam,frame:"roam_lv"}),this.mask=new Phaser.Display.Masks.BitmapMask(this.scene,this.imgMask),this.add([this.progreimg,this.graphic,this.sprite,this.sprite2])},ProgressItem.prototype.destroy=function(){e.prototype.destroy.call(this),this.imgMask.destroy(!0)},ProgressItem.prototype.refreshMask=function(){var e=this.getWorldTransformMatrix();this.imgMask.x=e.tx,this.imgMask.y=e.ty},ProgressItem.prototype.setProgress=function(e,i){this.value=e,this.max=i;var n=e/i*this.height,a=.5*this.height-n;this.sprite.y=a,this.sprite2.y=a,this.graphic.y=a+7*this.dpr,e>=i?(this.progreimg.visible=!0,this.sprite.visible=!1,this.sprite2.visible=!1,this.graphic.visible=!1):(this.progreimg.visible=!1,this.sprite.visible=!0,this.sprite2.visible=!0,this.graphic.visible=!0)},ProgressItem.prototype.createSprite=function(e,i,n,a,s,o){void 0===s&&(s=30),void 0===o&&(o=0);var h=this.scene.make.sprite({key:e,frame:n+"1"});return this.scene.anims.create({key:i,frames:this.scene.anims.generateFrameNames(e,{prefix:n+"",start:a[0],end:a[1]}),frameRate:s,repeat:o}),h.play(i),h},ProgressItem}(Phaser.GameObjects.Container),T=function(e){function RoamDrawItem(i,n,a){var c=e.call(this,i)||this;return c.dpr=n,c.zoom=a,c.setSize(158*n,77*n),c.drawTips=c.scene.make.text({x:0,y:.5*-c.height+5*n,text:"",style:l.UIHelper.blackStyle(n)}).setOrigin(.5),c.drawButton=new o.BackgroundScaleButton(c.scene,158*n,65*c.dpr,h.d.roam,"roam_butt_one","roam_butt_one_1",void 0,c.dpr,1,!1),c.drawButton.on(s.ClickEvent.Tap,c.onButtonHandler,c),c.drawButton.y=15*n,c.add([c.drawTips,c.drawButton]),c}return m(RoamDrawItem,e),RoamDrawItem.prototype.setHandler=function(e){this.send=e},RoamDrawItem.prototype.setRoamData=function(e){this.roamData=e;var i=1===e.drawTime?"roam_butt_one":"roam_butt_ten",n=1===e.drawTime?"roam_butt_one_1":"roam_butt_ten_1";if("IV0000002"===e.tokenId&&(i=1===e.drawTime?"roam_diamond_butt_one":"roam_diamond_butt_ten",n=1===e.drawTime?"roam_diamond_butt_one_1":"roam_diamond_butt_ten_1"),this.drawButton.setFrameNormal(i,n),e.free)this.drawTips.text=l.i18n.t("roam.drawfreetips"),this.drawTips.visible=!0;else if(void 0!==e.nextFreeTime){var a=1e3*e.nextFreeTime-e.unixTime;a>0?(this.drawTips.visible=!0,this.drawTips.text=l.i18n.t("roam.endtips",{name:l.TimeUtils.getDateFormat(a,!1)}),this.loopTimeOut(a)):(this.drawTips.visible=!0,this.drawTips.text=l.i18n.t("roam.drawfreetips"))}else this.drawTips.visible=!1},RoamDrawItem.prototype.onButtonHandler=function(){this.send&&this.send.runWith(this.roamData)},RoamDrawItem.prototype.loopTimeOut=function(e){var i=this;this.timer&&(clearTimeout(this.timer),this.timer=void 0);var excute=function(){i.timer=setTimeout((function(){i.scene&&((e-=1e3)>0?(i.drawTips.text=l.i18n.t("roam.endtips",{name:l.TimeUtils.getDateFormat(e,!1)}),excute()):(i.drawTips.text=l.i18n.t("roam.drawfreetips"),i.roamData.free=!0))}),1e3)};excute()},RoamDrawItem}(Phaser.GameObjects.Container),x=function(e){function CloudDisplayItem(i,n,a,s){var o=e.call(this,i)||this;return o.dpr=s,o.setSize(n,a),o.init(),o}return m(CloudDisplayItem,e),CloudDisplayItem.prototype.init=function(){var e=.5*this.height;this.left_in=this.scene.make.image({key:h.d.roam,frame:"rome_cloud_right_3"}),this.left_in.x=.5*-this.width+this.left_in.width,this.left_in.y=e-.5*this.left_in.height-23*this.dpr,this.center=this.scene.make.image({key:h.d.roam,frame:"rome_cloud_center"}),this.center.y=e-.5*this.center.height,this.right_in=this.scene.make.image({key:h.d.roam,frame:"rome_cloud_left_2"}),this.right_in.x=.5*this.width-.5*this.right_in.width-7*this.dpr,this.right_in.y=e-.5*this.right_in.height-30*this.dpr,this.left_out=this.scene.make.image({key:h.d.roam,frame:"rome_cloud_right_2"}),this.left_out.x=.5*-this.width+.5*this.left_out.width,this.left_out.y=e-.5*this.left_out.height,this.right_out=this.scene.make.image({key:h.d.roam,frame:"rome_cloud_left_1"}),this.right_out.x=.5*this.width-.5*this.right_out.width,this.right_out.y=e-.5*this.right_out.height,this.right_out_2=this.scene.make.image({key:h.d.roam,frame:"rome_cloud_right_1"}),this.right_out_2.x=.5*-this.width+.5*this.right_out_2.width+48*this.dpr,this.right_out_2.y=e-.5*this.right_out_2.height,this.add([this.left_in,this.center,this.right_in,this.left_out,this.right_out,this.right_out_2])},CloudDisplayItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoamListPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaRoamListPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.poolsStatus=new Map,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h}return c(PicaRoamListPanel,e),PicaRoamListPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),this.mGameGrid.resetMask()},PicaRoamListPanel.prototype.setHandler=function(e){this.send=e},PicaRoamListPanel.prototype.init=function(){var e=this,i=340*this.dpr,n=455*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.content.setInteractive(),this.add(this.content),this.bg=new s.NineSlicePatch(this.scene,0,0,i,n,h.d.uicommon1,"bg",{left:30*this.dpr,top:30*this.dpr,bottom:30*this.dpr,right:30*this.dpr});var a=.5*-n;this.titlebg=this.scene.make.image({x:0,y:0,key:h.d.uicommon1,frame:"title"}),this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titlebg.y=a+3*this.dpr,this.titleTex=this.scene.make.text({x:0,y:this.titlebg.y+2*this.dpr,text:l.i18n.t("roam.title"),style:l.UIHelper.titleYellowStyle_m(this.dpr)}).setOrigin(.5),this.titleTex.setFontStyle("bold"),this.titleTex.setResolution(this.dpr),this.closeBtn=new s.Button(this.scene,h.d.uicommon,"close","close"),this.closeBtn.setPosition(.5*this.bg.width-5*this.dpr,.5*-this.bg.height+5*this.dpr),this.closeBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this);var o={x:0,y:10*this.dpr,table:{width:i-10*this.dpr,height:n-50*this.dpr,columns:1,cellWidth:i-10*this.dpr,cellHeight:120*this.dpr,reuseCellContainer:!0,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,n){i.scene;var a=e.mGameGrid.items.length-i.index,s=i.item;return null===n&&(n=new f(e.scene,e.dpr,e.zoom)),n.setRoamData(s,a),n}};this.mGameGrid=new s.GameGridTable(this.scene,o),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",(function(i){e.onSelectItemHandler(i.roamData)})),this.content.add([this.bg,this.titlebg,this.titleTex,this.closeBtn,this.mGameGrid]),this.resize()},PicaRoamListPanel.prototype.setRoamDataList=function(e){this.poolsStatus.clear();for(var i=0,n=e;i<n.length;i++){var a=n[i];if(this.poolsStatus.has(a.cardPoolGroup)){(s=this.poolsStatus.get(a.cardPoolGroup)).push(a)}else{var s=[a];this.poolsStatus.set(a.cardPoolGroup,s)}}var o=[];this.poolsStatus.forEach((function(e){o.push(e[0])})),this.mGameGrid.setItems(o),this.mGameGrid.setT(0)},PicaRoamListPanel.prototype.getRoamTokenDatas=function(e){if(e){var i=Array.from(this.poolsStatus.values())[e-1];return this.tokenId=i[0].tokenId,i}return this.poolsStatus.get(this.cardPoolGroup)},PicaRoamListPanel.prototype.onSelectItemHandler=function(e){this.tokenId=e.tokenId,this.cardPoolGroup=e.cardPoolGroup,this.send&&this.send.runWith(["roam",this.poolsStatus.get(e.cardPoolGroup)])},PicaRoamListPanel.prototype.onCloseHandler=function(){this.send&&this.send.runWith("close")},PicaRoamListPanel}(Phaser.GameObjects.Container),f=function(e){function RoamItem(i,n,a){var c=e.call(this,i)||this;c.dpr=n,c.zoom=a,c.setSize(302*n,110*n),c.bg=new s.NineSlicePatch(i,0,0,c.width,c.height,h.d.roam,"roam_list_bg",{left:7*n,top:0,right:7*n,bottom:0}),c.dybg=new o.DynamicImage(i,0,0),c.nameTex=c.scene.make.text({x:.5*c.width-20*n,y:-20*n,text:"",style:l.UIHelper.colorStyle("#1F95F8",22*n)}).setOrigin(1,.5),c.nameTex.setPadding(0,0,3*n,0),c.nameTex.setFontStyle("bold italic"),c.nameTex.setStroke("#ffffff",2*n),c.desTex=c.scene.make.text({x:.5*c.width-10*n,y:10*n,text:"",style:l.UIHelper.colorStyle("#FFFD50",22*n)}).setOrigin(.5),c.desTex.setPadding(0,0,3*n,0),c.desTex.setFontStyle("bold italic");var m=c.desTex.context.createLinearGradient(0,0,0,c.desTex.height);return m.addColorStop(0,"#FFFD50"),m.addColorStop(1,"#FAB600"),c.desTex.setFill(m),c.timebg=new s.NineSlicePatch(c.scene,0,0,84*n,32*n,h.d.roam,"roam_countbg",{left:3*n,top:0,right:3*n,bottom:0},0),c.timetips=c.scene.make.text({text:l.i18n.t("roam.timeendtips"),style:l.UIHelper.whiteStyle(n,11)}).setOrigin(.5),c.timeTex=new s.BBCodeText(c.scene,0,0,"",l.UIHelper.blackStyle(n,8)).setOrigin(.5),c.timeTex.setPadding(3*n,3*n,3*n,0),c.timebg.x=.5*-c.width+.5*c.timebg.width+3*n,c.timebg.y=.5*c.height-.5*c.timebg.height-5*n,c.timetips.x=c.timebg.x,c.timetips.y=c.timebg.y-8*n,c.timeTex.x=c.timebg.x,c.timeTex.y=c.timebg.y+10*n,c.add([c.bg,c.dybg,c.nameTex,c.desTex,c.timebg,c.timetips,c.timeTex]),c.desTex.visible=!1,c.nameTex.visible=!1,c.timetips.visible=!1,c.timebg.visible=!1,c}return c(RoamItem,e),RoamItem.prototype.setRoamData=function(e){if(this.roamData=e,"IV0000002"===e.tokenId){this.dybg.setTexture(h.d.roam,"roan_banner_diamond");this.timeTex.text=this.getTimeTex(6048e5),this.timeTex.visible=!1,this.timebg.visible=!1}else this.dybg.setTexture(h.d.roam,"roan_banner_silver"),this.timeTex.visible=!1,this.timebg.visible=!1;var i=l.Url.getOsdRes(e.coverPath+"_"+this.dpr+"x.png");this.dybg.load(i)},RoamItem.prototype.loopTimeOut=function(e){var i=this;this.timer&&(clearTimeout(this.timer),this.timer=void 0);var excute=function(){i.timer=setTimeout((function(){i.scene&&((e-=6e4)<0&&(e=0),i.timeTex.text=i.getTimeTex(e),e>0&&excute())}),6e4)};excute()},RoamItem.prototype.getTimeTex=function(e){var i=Math.floor(e/864e5),n=Math.floor(e/36e5)%24,a=Math.floor(e/6e4)%60;return 0!==i||0!==n||0!==a?this.timeFormat(i)+l.i18n.t("timeuint.day")+this.timeFormat(n)+l.i18n.t("timeuint.hour")+this.timeFormat(a)+l.i18n.t("timeuint.minutes"):l.i18n.t("roam.timeend")},RoamItem.prototype.timeFormat=function(e){return"[color=#724DF4][size="+14*this.dpr+"][b]"+e+"[/b][/size][/color]"},RoamItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoamPreviewPanel",(function(){return c}));var a,s=n(788),o=n(790),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaRoamPreviewPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.poolsStatus=new Map,h.setSize(n,a),h.dpr=s,h.zoom=o,h.setInteractive(),h.init(),h}return l(PicaRoamPreviewPanel,e),PicaRoamPreviewPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.mBackground.clear(),this.mBackground.fillStyle(0,.8),this.mBackground.fillRoundedRect(.5*-n,.5*-a,n,a),this.setSize(n,a),this.mGameGrid.resetMask()},PicaRoamPreviewPanel.prototype.setHandler=function(e){this.send=e},PicaRoamPreviewPanel.prototype.init=function(){var e=this;this.mBackground=this.scene.make.graphics(void 0,!1),this.add(this.mBackground);var i=340*this.dpr,n=455*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.content.setInteractive(),this.add(this.content),this.bg=new s.NineSlicePatch(this.scene,0,0,i,n,o.d.uicommon1,"bg",{left:30*this.dpr,top:30*this.dpr,bottom:30*this.dpr,right:30*this.dpr});var a=.5*-n;this.titlebg=this.scene.make.image({x:0,y:0,key:o.d.uicommon1,frame:"title"}),this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titlebg.y=a+3*this.dpr,this.titleTex=this.scene.make.text({x:0,y:this.titlebg.y+2*this.dpr,text:h.i18n.t("roam.previewtex"),style:h.UIHelper.titleYellowStyle_m(this.dpr)}).setOrigin(.5),this.titleTex.setFontStyle("bold"),this.titleTex.setResolution(this.dpr),this.closeBtn=new s.Button(this.scene,o.d.uicommon,"close","close"),this.closeBtn.setPosition(.5*this.bg.width-5*this.dpr,.5*-this.bg.height+5*this.dpr),this.closeBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this);var l={x:0,y:10*this.dpr,table:{width:i-10*this.dpr,height:n-50*this.dpr,columns:1,cellWidth:i-10*this.dpr,cellHeight:38*this.dpr,reuseCellContainer:!0,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,n){i.scene;var a=i.index,s=i.item;return null===n&&(n=new m(e.scene,e.dpr,e.zoom)),n.setRoamData(s,a%2==0?0:1),n}};this.mGameGrid=new s.GameGridTable(this.scene,l),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",(function(i){e.onSelectItemHandler(i.roamData)})),this.content.add([this.bg,this.titlebg,this.titleTex,this.closeBtn,this.mGameGrid]),this.resize(),this.loadPreviewJson()},PicaRoamPreviewPanel.prototype.setRoamDrawData=function(e){this.mGameGrid.setItems(e),this.mGameGrid.setT(0)},PicaRoamPreviewPanel.prototype.loadPreviewJson=function(){var e=h.Url.getRes("ui/roampreview/preview.json");this.scene.load.json("roampreview",e),this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE,this.loadJsonComplete,this),this.scene.load.start()},PicaRoamPreviewPanel.prototype.loadJsonComplete=function(){if(this.scene.cache.json.has("roampreview")){this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE,this.loadJsonComplete,this);for(var e=this.scene.cache.json.get("roampreview"),i=[],n=0;n<e.length;n+=2){var a=[e[n],e[n+1]];i.push(a)}this.setRoamDrawData(i)}},PicaRoamPreviewPanel.prototype.onSelectItemHandler=function(e){},PicaRoamPreviewPanel.prototype.onCloseHandler=function(){this.send&&this.send.runWith("close")},PicaRoamPreviewPanel}(Phaser.GameObjects.Container),m=function(e){function RoamPreviewItem(i,n,a){var s=e.call(this,i)||this;return s.dpr=n,s.zoom=a,s.setSize(311*n,38*n),s.bg=s.scene.make.image({key:o.d.roam,frame:"roam_preview_list"}),s.bg.displayWidth=s.width,s.leftItem=new f(s.scene,155*n,38*n,n),s.rightItem=new f(s.scene,155*n,38*n,n),s.leftItem.x=.5*-s.leftItem.width,s.rightItem.x=.5*s.leftItem.width,s.add([s.bg,s.leftItem,s.rightItem]),s}return l(RoamPreviewItem,e),RoamPreviewItem.prototype.setRoamData=function(e,i){this.leftItem.setDrawData(e[0]),this.rightItem.setDrawData(e[1]),this.bg.alpha=i},RoamPreviewItem}(Phaser.GameObjects.Container),f=function(e){function PreviewCellItem(i,n,a,s){var o=e.call(this,i)||this;return o.setSize(n,a),o.dpr=s,o.init(),o}return l(PreviewCellItem,e),PreviewCellItem.prototype.init=function(){this.nameTex=this.scene.make.text({text:"",style:h.UIHelper.blackStyle(this.dpr)}).setOrigin(0,.5),this.image=this.scene.make.image({key:o.d.roam,frame:"roam_preview_star_1"}),this.value=this.scene.make.text({text:"",style:h.UIHelper.blackStyle(this.dpr)}).setOrigin(0,.5),this.add([this.nameTex,this.image,this.value])},PreviewCellItem.prototype.setDrawData=function(e){this.nameTex.text=e.name,e.star>0?(this.image.visible=!0,this.image.setFrame("roam_preview_star_"+e.star)):this.image.visible=!1,this.value.text=e.prob+"%",this.nameTex.x=.5*-this.width+15*this.dpr,this.image.x=this.nameTex.x+this.nameTex.width+.5*this.image.width+3*this.dpr,this.value.x=.5*this.width-this.value.width-15*this.dpr},PreviewCellItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoomInfoPanel",(function(){return g}));var a,s=n(788),o=n(0),h=n(790),l=n(793),c=n(1001),m=n(789),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaRoomInfoPanel(i,n,a,s,o,h,l){var c=e.call(this,i,a,s)||this;return c.dpr=l,c.uimanager=n,c.setSize(o,h),c.createAttribute(),c}return f(PicaRoomInfoPanel,e),PicaRoomInfoPanel.prototype.setAttributeData=function(e){this.roomName.setAttributeData(e.name),this.roomState.setAttributeData(e.openingParty),this.roomEvaluate.setAttributeData(e.praise),e.isDefaultroom?(this.defaultButton.disInteractive(),this.defaultButton.setFrameNormal("multiple_rooms_default_selected")):(this.defaultButton.setInteractive(),this.defaultButton.setFrameNormal("multiple_rooms_default_unselected"))},PicaRoomInfoPanel.prototype.setPartyData=function(e){this.partyPanel.setPartyData(e)},PicaRoomInfoPanel.prototype.setHandler=function(e){this.send=e},PicaRoomInfoPanel.prototype.hide=function(){this.visible=!1,this.roomName.hide()},PicaRoomInfoPanel.prototype.show=function(){this.visible=!0,this.roomName.show()},PicaRoomInfoPanel.prototype.createAttribute=function(){var e=.5*-this.height+25*this.dpr,i=34*this.dpr,n=this.width-10*this.dpr,a=20*this.dpr+i;this.roomName=new c.RoomNameAttribute(this.scene,n,i,this.dpr,this.zoom,"text",o.i18n.t("room_info.editornametips")),this.roomName.setHandler(new o.Handler(this,this.onSendHandler)),this.roomName.y=e,this.defaultButton=new s.Button(this.scene,h.d.multiple_rooms,"multiple_rooms_default_unselected","multiple_rooms_default_unselected"),this.defaultButton.setInteractiveSize(45*this.dpr,45*this.dpr),this.defaultButton.on(s.ClickEvent.Tap,this.onDefaultButtonHandler,this),this.defaultButton.x=.5*this.width-.5*this.defaultButton.width+10*this.dpr,this.defaultButton.y=e,e+=a,this.roomState=new c.RoomStateAttribute(this.scene,n,i,this.dpr,this.zoom),this.roomState.y=e,e+=a-5*this.dpr,this.roomEvaluate=new c.RoomEvaluateAttribute(this.scene,n,i,this.dpr,this.zoom),this.roomEvaluate.y=e,this.partyPanel=new _(this.scene,this.dpr),this.partyPanel.y=e+.5*this.partyPanel.height+a-15*this.dpr,this.partyPanel.setHandler(new o.Handler(this,this.onSendHandler)),this.add([this.roomName,this.defaultButton,this.roomState,this.roomEvaluate,this.partyPanel])},PicaRoomInfoPanel.prototype.onSendHandler=function(e,i){this.send&&this.send.runWith([e,i])},PicaRoomInfoPanel.prototype.onDefaultButtonHandler=function(){var e=this;new m.AlertView(this.scene,this.uimanager).show({text:o.i18n.t("room_info.defaultroomtips"),title:o.i18n.t("room_info.roomsetting"),oy:302*this.dpr*this.zoom,callback:function(){e.send&&e.send.runWith("defaultroom"),e.defaultButton.setFrameNormal("multiple_rooms_default_selected")}})},PicaRoomInfoPanel}(Phaser.GameObjects.Container),_=function(e){function RoomPartyInfoPanel(i,n){var a=e.call(this,i)||this,c=293*n,m=237*n;return a.setSize(c,m),a.bg=a.scene.make.graphics(void 0,!1),a.bg.fillStyle(12971516,.66),a.bg.fillRoundedRect(.5*-c,.5*-m,c,m,4*n),a.titlebg=a.scene.make.image({key:h.d.room_info,frame:"room_party_status_title"}),a.titleTex=a.scene.make.text({text:o.i18n.t("room_info.partystate"),style:o.UIHelper.whiteStyle(n,14)}).setOrigin(.5),a.titlebg.y=.5*-m+30*n,a.titleTex.y=a.titlebg.y,a.partybg=a.scene.make.image({key:h.d.room_info,frame:"room_party_icon_bg"}),a.partyIcon=a.scene.make.image({key:h.d.room_info,frame:"room_party_icon_1"}),a.partybg.x=.5*-c+.5*a.partybg.width+15*n,a.partybg.y=a.titlebg.y+.5*a.titlebg.height+.5*a.partybg.height+25*n,a.partyIcon.x=a.partybg.x,a.partyIcon.y=a.partybg.y,a.timeValue=new T(a.scene,n),a.timeValue.x=.5*a.timeValue.width-5*n,a.timeValue.y=-20*n,a.cardTips=a.scene.make.text({text:o.i18n.t("room_info.partycardtips"),style:o.UIHelper.blackStyle(n)}).setOrigin(0,.5),a.cardTips.x=a.timeValue.x-.5*a.timeValue.width-10*n,a.cardTips.y=a.timeValue.y+40*n,a.countImg=new l.ImageValue(a.scene,40*n,25*n,h.d.room_info,"party_card",n,o.UIHelper.colorStyle("#1DB4E9",14*n)),a.countImg.setLayout(1),a.countImg.x=a.cardTips.x+a.cardTips.width+5*n+.5*a.countImg.width,a.countImg.y=a.cardTips.y,a.openButton=new s.NineSliceButton(i,0,0,114*n,36*n,h.d.uicommon,"butt_gray",o.i18n.t("room_info.openparty"),n,1,o.UIHelper.button(n)),a.openButton.y=.5*m-.5*a.openButton.height-15*n,a.openButton.on(s.ClickEvent.Tap,a.onOpenHandler,a),a.openButton.setTextStyle(o.UIHelper.blackStyle(n,16)),a.openButton.setFontStyle("bold"),a.add([a.bg,a.titlebg,a.titleTex,a.partybg,a.partyIcon,a.timeValue,a.cardTips,a.countImg,a.openButton]),a}return f(RoomPartyInfoPanel,e),RoomPartyInfoPanel.prototype.setHandler=function(e){this.send=e},RoomPartyInfoPanel.prototype.setPartyData=function(e){this.openButton.setInteractive(),this.partyIcon.setFrame("room_party_icon_1"),this.openButton.setTextColor("#000000"),this.timeValue.setTimeValue(0),this.countImg.setText("*"+e.ticketsCount)},RoomPartyInfoPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.timeCountDown&&this.timeCountDown.clear()},RoomPartyInfoPanel.prototype.onOpenHandler=function(){this.send&&this.send.runWith(["open"])},RoomPartyInfoPanel}(Phaser.GameObjects.Container),T=function(e){function PartyTimeValue(i,n){var a=e.call(this,i)||this;return a.timeImg=[],a.dpr=n,a.create(),a}return f(PartyTimeValue,e),PartyTimeValue.prototype.setTimeValue=function(e){Math.floor(e/864e5);var i=Math.floor(e/36e5)%24,n=Math.floor(e/6e4)%60,a=Math.floor(e/1e3)%60,s=i>=10?""+i:"0"+i;s+=n>=10?""+n:"0"+n,s+=a>=10?""+a:"0"+a;for(var o=0;o<s.length;o++)this.timeImg[o].setValue(s[o])},PartyTimeValue.prototype.create=function(){for(var e=0,i=0,n=0;n<6;n++){var a=new x(this.scene,this.dpr);if(this.timeImg.push(a),a.x=e,i=a.height,1===n||3===n){e+=.5*a.width;var s=this.scene.make.text({text:" : ",style:o.UIHelper.blackStyle(this.dpr,14)}).setOrigin(.5);s.x=e+.5*s.width,e+=.5*a.width+.5*s.width+.5*s.width,this.add([a,s])}else e+=a.width+2*this.dpr,this.add(a)}for(var h=0,l=this.list;h<l.length;h++){l[h].x-=.5*e}this.setSize(e,i)},PartyTimeValue}(Phaser.GameObjects.Container),x=function(e){function TimeImageValue(i,n){var a=e.call(this,i)||this;return a.bg=a.scene.make.image({key:h.d.room_info,frame:"room_party_countdown"}),a.value=a.scene.make.text({text:0,style:o.UIHelper.whiteStyle(n,16)}).setOrigin(.5),a.value.setFontStyle("bold"),a.add([a.bg,a.value]),a.setSize(a.bg.width,a.bg.height),a}return f(TimeImageValue,e),TimeImageValue.prototype.setValue=function(e){this.value.text=e},TimeImageValue}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoomDecorateShopPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(0),l=n(805),c=n(791),m=n(790),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaRoomDecorateShopPanel(i,n,a,s,o,h,l,c){var m=e.call(this,i,n,a)||this;return m.setSize(s,o),m.dpr=l,m.key=h,m.zoom=c,m.create(),m}return f(PicaRoomDecorateShopPanel,e),PicaRoomDecorateShopPanel.prototype.refreshMask=function(){this.shopgride.resetMask()},PicaRoomDecorateShopPanel.prototype.create=function(){var e=this.width,i=this.height,n=.5*-i;this.bg=new s.NineSlicePatch(this.scene,0,0,e,i,m.d.uicommon1,"bg1",h.UIHelper.background_w(this.dpr)),this.add(this.bg),this.closeBtn=new s.Button(this.scene,m.d.uicommon,"close"),this.closeBtn.setDisplaySize(28*this.dpr,28*this.dpr),this.closeBtn.setPosition(.5*this.width-8*this.dpr,n+7*this.dpr),this.closeBtn.on(String(s.ClickEvent.Tap),this.onCloseHandler,this),this.add(this.closeBtn),this.titlebg=this.scene.make.image({key:m.d.decorateshop,frame:"tag_single"}),this.add(this.titlebg),this.titlebg.x=.5*-this.width+.5*this.titlebg.width+0*this.dpr,this.titlebg.y=.5*-this.height-.5*this.titlebg.height+14*this.dpr,this.imgtitle=new c.ImageValue(this.scene,135*this.dpr,16*this.dpr,m.d.decorateshop,"house_shop",this.dpr),this.imgtitle.setText(h.i18n.t("furni_bag.decoratebtn")),this.imgtitle.setFontStyle("bold"),this.imgtitle.setTextStyle({fontSize:15*this.dpr}),this.imgtitle.x=this.titlebg.x-30*this.dpr,this.imgtitle.y=this.titlebg.y,this.add(this.imgtitle),this.secondMenu=new l.SecondaryMenuPanel(this.scene,0,.5*-this.height+46*this.dpr,302*this.dpr,29*this.dpr,this.dpr,this.zoom,{x:0,y:-14*this.dpr,width:this.width-32*this.dpr,height:30*this.dpr,zoom:this.zoom,dpr:this.dpr,space:6*this.dpr,orientation:1,align:2}),this.secondMenu.setHandler(new h.Handler(this,this.onTabButtonHandler)),this.secondMenu.setButtonChangeHandler(new h.Handler(this,(function(e){e.changeNormal(),e.setTextColor("#FE8737")})),new h.Handler(this,(function(e){e.changeDown(),e.setTextColor("#ffffff")}))),this.add(this.secondMenu);var a=302*this.dpr,o=324*this.dpr,f=.5*-a,g=.5*-o-20*this.dpr,_=this.scene.make.graphics(void 0,!1);_.fillStyle(16680759,1),_.fillRoundedRect(f,g,a,o,{tl:0,tr:5*this.dpr,bl:5*this.dpr,br:5*this.dpr}),this.add(_);var T=a-16*this.dpr,x=380*this.dpr,S=12*this.dpr;this.shopgride=this.createGrideTable(0,S,T,x,126*this.dpr,158*this.dpr),this.leaveButton=this.createNineButton(m.d.uicommon,"yellow_btn_normal",h.i18n.t("common.leave"),"#996600"),this.leaveButton.y=.5*this.height-.5*this.leaveButton.height-15*this.dpr,this.leaveButton.x=.5*-this.leaveButton.width-15*this.dpr,this.leaveButton.on(String(s.ClickEvent.Tap),this.onCloseHandler,this),this.corfirmButton=this.createNineButton(m.d.uicommon,"button_g",h.i18n.t("common.save"),"#000000"),this.corfirmButton.y=.5*this.height-.5*this.corfirmButton.height-15*this.dpr,this.corfirmButton.x=-this.leaveButton.x,this.corfirmButton.on(String(s.ClickEvent.Tap),this.onConfirmButtonHandler,this)},PicaRoomDecorateShopPanel.prototype.setShopCategories=function(e){for(var i=[],n=0,a=e;n<a.length;n++){var o=a[n],l={text:o.value,data:o};i.push(l)}this.secondMenu.setCategories(s.TabButton,i,{width:97*this.dpr,height:29*this.dpr,key:m.d.decorateshop,normalFrame:"manor_store_uncheck",downFrame:"manor_store_check",textStyle:{fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#FE8737"},bold:!0})},PicaRoomDecorateShopPanel.prototype.setShopDatas=function(e){if(e){var i=e.sort((function(e,i){var n=e.id.replace(/[^0-9]/gi,""),a=i.id.replace(/[^0-9]/gi,"");return Number(n)>Number(a)?1:-1}));this.shopgride.setItems(i)}},PicaRoomDecorateShopPanel.prototype.setTitleText=function(e){this.titleText.text=e},PicaRoomDecorateShopPanel.prototype.setHandler=function(e,i){this.sendHandler=e,this.closeHandler=i},PicaRoomDecorateShopPanel.prototype.createNineButton=function(e,i,n,a){var o=new s.NineSliceButton(this.scene,0,0,123*this.dpr,47*this.dpr,e,i,n,this.dpr,this.zoom,{left:14*this.dpr,top:14*this.dpr,right:14*this.dpr,bottom:14*this.dpr});return this.add(o),o.setTextStyle({fontSize:21*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:a}),o.setFontStyle("bold"),o},PicaRoomDecorateShopPanel.prototype.createGrideTable=function(e,i,n,a,o,h){var l=this,c={x:e,y:i,table:{width:n,height:a,columns:2,cellWidth:o,cellHeight:h,reuseCellContainer:!0,tableOX:0*this.dpr,zoom:this.zoom},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&((i=new _(l.scene,0,0,o,h,m.d.decorateshop,l.dpr)).on("buyitem",l.onBuyItemHandler,l),f.add(i)),i.setItemData(n),l.selectedItemData&&l.selectedItemData.id===n.id&&(l.selectedItemData=n,l.selectedItem=i),i}},f=new s.GameGridTable(this.scene,c);return f.layout(),f.on("cellTap",(function(e){e&&l.onSelectItemHandler(e)})),this.add(f),f},PicaRoomDecorateShopPanel.prototype.onTabButtonHandler=function(e){this.curCategory!==e.key&&(this.emit("queryProp",e.key),this.curCategory=e.key,this.selectedItem.select=!1,this.selectedItem=void 0,this.selectedItemData=void 0)},PicaRoomDecorateShopPanel.prototype.onConfirmButtonHandler=function(){this.selectedItemData&&1===this.selectedItemData.status&&this.sendHandler&&this.sendHandler.runWith(["usetype",this.selectedItemData.elementId])},PicaRoomDecorateShopPanel.prototype.onBuyItemHandler=function(e){var i={id:e.id,quantity:1,category:e.subcategory,price:e.price[0]};this.sendHandler&&this.sendHandler.runWith(["buytype",i])},PicaRoomDecorateShopPanel.prototype.onSelectItemHandler=function(e){e.select=!0,this.selectedItem&&(this.selectedItem.select=!1),this.selectedItem=e,this.selectedItemData=e.shopData,this.selectedItem.select||(this.selectedItem=void 0,this.selectedItemData=void 0)},PicaRoomDecorateShopPanel.prototype.onCloseHandler=function(){this.closeHandler&&this.closeHandler.run()},PicaRoomDecorateShopPanel}(Phaser.GameObjects.Container),_=function(e){function DecorateShopItem(i,n,a,l,f,g,_){var T=e.call(this,i,n,a)||this;T.mselect=!1,T.dpr=_,T.key=g,T.setSize(l,f),T.bg=T.scene.make.image({key:g,frame:"manor_store_icon_bg"}),T.nameText=T.scene.make.text({x:0,y:.5*-T.height+15*T.dpr,text:" ",style:{color:"#2B2B2B",fontSize:13*T.dpr,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(.5),T.icon=new o.DynamicImage(i,0,-20*_,T.key,"floor_01");var x=T.scene.make.image({key:T.key,frame:"manor_store_price_bg"});return T.imgprice=new c.ImageValue(T.scene,90*_,17*_,m.d.uicommon,"home_silver",T.dpr),T.imgprice.setLayout(2),T.imgprice.setTextStyle({color:"#000000"}),T.imgprice.addAt(x,0),T.tipsText=T.scene.make.text({x:0,y:.5*T.height-22*T.dpr,text:h.i18n.t("manor.owned"),style:{color:"#E33922",fontSize:13*T.dpr,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(.5),T.tipsText.setFontStyle("bold"),T.button=new o.ThreeSliceButton(i,73*_,26*_,m.d.uicommon,h.UIHelper.threeRedSmall,h.UIHelper.threeRedSmall,h.i18n.t("manor.using")),T.button.setTextStyle(h.UIHelper.brownishStyle(_)),T.button.y=T.tipsText.y,T.button.on(s.ClickEvent.Tap,T.onButtonHandler,T),T.imgprice.y=T.button.y-.5*T.button.height-.5*T.imgprice.height,T.add([T.bg,T.nameText,T.icon,T.imgprice,T.tipsText,T.button]),T}return f(DecorateShopItem,e),DecorateShopItem.prototype.setItemData=function(e){var i=this;this.shopData=e,this.setButtonState(e),this.nameText.text=e.name||e.shortName;var n=h.Url.getOsdRes(e.icon);this.icon.load(n,this,(function(){i.icon.scale=i.dpr}))},Object.defineProperty(DecorateShopItem.prototype,"select",{get:function(){return this.mselect},set:function(e){this.mselect=e,this.bg.setFrame(e?"store_icon_check":"manor_store_icon_bg")},enumerable:!1,configurable:!0}),DecorateShopItem.prototype.setButtonState=function(e){if(2===e.status)this.button.visible=!0,this.button.disInteractive(),this.button.setFrameNormal(h.UIHelper.threeGreenSmall,h.UIHelper.threeGreenSmall),this.button.setText(h.i18n.t("manor.using")),this.button.setTextColor(h.Color.black),this.tipsText.visible=!1,this.imgprice.visible=!1;else if(0===e.status){this.button.visible=!0,this.button.setInteractive(),this.button.setFrameNormal(h.UIHelper.threeYellowSmall,h.UIHelper.threeYellowSmall),this.button.setText(h.i18n.t("common.buy")),this.button.setTextColor(h.Color.brownish),this.tipsText.visible=!1,this.imgprice.visible=!0;var i=e.price[0];this.imgprice.setFrameValue(i.price+"",m.d.uicommon,h.Coin.getNewIcon(i.coinType))}else 1===e.status&&(this.button.visible=!1,this.button.disInteractive(),this.tipsText.visible=!0,this.imgprice.visible=!1)},DecorateShopItem.prototype.onButtonHandler=function(){this.emit("buyitem",this.shopData)},DecorateShopItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaSceneNavigationMapPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaSceneNavigationMapPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.townItems=[],h.setSize(n,a),h.dpr=s,h.zoom=o,h.create(),h}return c(PicaSceneNavigationMapPanel,e),PicaSceneNavigationMapPanel.prototype.create=function(){var e=this;this.mGameScroll=new s.GameScroller(this.scene,{x:0,y:0,width:this.width,height:this.height-10*this.dpr,zoom:this.zoom,dpr:this.dpr,align:2,orientation:0,space:6*this.dpr,selfevent:!0,cellupCallBack:function(i){e.onPointerUpHandler(i)}}),this.add(this.mGameScroll)},PicaSceneNavigationMapPanel.prototype.show=function(){this.visible=!0},PicaSceneNavigationMapPanel.prototype.hide=function(){for(var e=0,i=this.townItems;e<i.length;e++){var n=i[e];n.visible=!1,n.setExtend(!1,!1)}this.curTownItem=void 0,this.visible=!1},PicaSceneNavigationMapPanel.prototype.refreshMask=function(){this.mGameScroll.refreshMask()},PicaSceneNavigationMapPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaSceneNavigationMapPanel.prototype.setTownDatas=function(e){for(var i,n=0;n<e.length;n++){var a=void 0;n<this.townItems.length?a=this.townItems[n]:((a=new f(this.scene,this.dpr,"活动")).setHandler(new l.Handler(this,this.onTownItemHandler)),this.mGameScroll.addItem(a),this.townItems.push(a)),a.visible=!0,a.setGroupData(e[n]),i=i||a,this.onPointerUpHandler(a)}this.mGameScroll.Sort()},PicaSceneNavigationMapPanel.prototype.onPointerUpHandler=function(e){var i=!e.extend,n=this.scene.input.activePointer;e.checkExtendRect(n)||e.setExtend(i,!0)},PicaSceneNavigationMapPanel.prototype.onTownItemHandler=function(e,i){if("extend"===e){var n=i.extend,a=i.item;this.onExtendsHandler(n,a)}else"go"===e&&this.sendHandler&&this.sendHandler.runWith(["enter",i.id+""])},PicaSceneNavigationMapPanel.prototype.onExtendsHandler=function(e,i){this.curTownItem=e?i:void 0,this.mGameScroll.Sort(!0)},PicaSceneNavigationMapPanel}(Phaser.GameObjects.Container),f=function(e){function NavigationTownListItem(i,n,a){var s=e.call(this,i)||this;s.townItems=[],s.dpr=n,s.setSize(274*n,40*n),s.topCon=s.scene.make.container(void 0,!1),s.topCon.setSize(274*n,40*n);var c=s.scene.make.graphics(void 0,!1);return c.clear(),c.fillStyle(16777215,.4),c.fillRoundedRect(.5*-s.width,.5*-s.height,s.width,s.height,5*n),s.titleTex=s.scene.make.text({text:a,style:l.UIHelper.whiteStyle(n)}).setOrigin(0,.5),s.titleTex.x=.5*-s.width+5*n,s.arrow=s.scene.make.image({key:h.d.map,frame:"map_list_arrow_fold"}),s.arrow.x=.5*s.width-15*n,s.topCon.add([c,s.titleTex,s.arrow]),s.mExtend=new o.GridLayoutGroup(s.scene,s.width,0,{cellSize:new Phaser.Math.Vector2(135*n,57*s.dpr),space:new Phaser.Math.Vector2(5*s.dpr,5*s.dpr),startAxis:o.AxisType.Horizontal,constraint:o.ConstraintType.FixedColumnCount,constraintCount:2,alignmentType:o.AlignmentType.UpperLeft}),s.add(s.topCon),s.add(s.mExtend),s}return c(NavigationTownListItem,e),NavigationTownListItem.prototype.setGroupData=function(e){this.titleTex.text=e.name;var i=e.datas;this.setListData(i)},NavigationTownListItem.prototype.setListData=function(e){for(var i=0,n=this.townItems;i<n.length;i++){(s=n[i]).visible=!1}for(var a=0;a<e.length;a++){var s=void 0;a<this.townItems.length?s=this.townItems[a]:((s=new g(this.scene,this.dpr)).name=a+"",this.mExtend.add(s),this.townItems.push(s)),s.visible=!0,s.setTownData(e[a])}this.mExtend.Layout(),this.closeExtend()},NavigationTownListItem.prototype.checkExtendRect=function(e){if(!this.mExtend.visible)return!1;var i=l.Tool.checkPointerContains(this.mExtend,e);if(i)for(var n=0,a=this.mExtend.list;n<a.length;n++){var s=a[n];l.Tool.checkPointerContains(s,e)&&this.send&&this.send.runWith(["go",s.roomData])}return i},NavigationTownListItem.prototype.setHandler=function(e){this.send=e},NavigationTownListItem.prototype.setExtend=function(e,i){void 0===i&&(i=!0),e?(this.openExtend(),i&&this.send&&this.send.runWith(["extend",{extend:!0,item:this}])):(this.closeExtend(),i&&this.send&&this.send.runWith(["extend",{extend:!1,item:this}]))},Object.defineProperty(NavigationTownListItem.prototype,"extend",{get:function(){return this.mIsExtend},enumerable:!1,configurable:!0}),NavigationTownListItem.prototype.openExtend=function(){this.mExtend.visible=!0,this.height=this.topCon.height+this.mExtend.height+0*this.dpr,this.topCon.y=.5*-this.height+.5*this.topCon.height,this.mExtend.y=this.topCon.y+.5*this.topCon.height+.5*this.mExtend.height+5*this.dpr,this.mIsExtend=!0,this.arrow.setFrame("map_list_arrow_unfold"),this.titleTex.setColor("#FFF449")},NavigationTownListItem.prototype.closeExtend=function(){this.mExtend&&(this.mExtend.visible=!1),this.height=this.topCon.height,this.topCon.y=0,this.mIsExtend=!1,this.arrow.setFrame("map_list_arrow_fold"),this.titleTex.setColor("#ffffff")},NavigationTownListItem}(Phaser.GameObjects.Container),g=function(e){function TownMapItem(i,n){var a=e.call(this,i)||this;return a.setSize(135*n,57*n),a.dpr=n,a.imge=new o.DynamicImage(a.scene,0,0),a.namebg=a.scene.make.image({key:h.d.map,frame:"map_list_entrance_name"}).setOrigin(1,.5),a.namebg.x=.5*a.width-2*n,a.namebg.y=.5*a.height-.5*a.namebg.height-2*n,a.nameTex=a.scene.make.text({style:l.UIHelper.whiteStyle(n,10)}).setOrigin(.5),a.nameTex.x=a.namebg.x-.5*a.namebg.width,a.nameTex.y=a.namebg.y,a.add([a.imge,a.namebg,a.nameTex]),a}return c(TownMapItem,e),TownMapItem.prototype.setTownData=function(e){if(this.roomData=e,e.texturePath&&""!==e.texturePath){var i=l.Url.getOsdRes(e.texturePath+"_"+this.dpr+"x.png");this.imge.load(i)}this.nameTex.text=e.roomName},TownMapItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaTreasureAllOpenPanel",(function(){return m}));var a,s=n(788),o=n(0),h=n(790),l=n(793),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaTreasureAllOpenPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.lightAniKey="treasurelight",l.starAniKey="treasurestar",l.indexed=0,l.isDispose=!1,l.tweens=[],l.maskWidth=0,l.maskHeight=0,l.dpr=o,l.zoom=h,l.key=s,l.setSize(n,a),l.init(),l}return c(PicaTreasureAllOpenPanel,e),PicaTreasureAllOpenPanel.prototype.resize=function(e,i){this.setSize(e,i);var n=this.getWorldTransformMatrix();this.maskGraphic.setPosition(n.tx,n.ty)},PicaTreasureAllOpenPanel.prototype.addListen=function(){this.confirmBtn.on(s.ClickEvent.Tap,this.onConfirmBtnClick,this)},PicaTreasureAllOpenPanel.prototype.removeListen=function(){this.confirmBtn.off(s.ClickEvent.Tap,this.onConfirmBtnClick,this)},PicaTreasureAllOpenPanel.prototype.init=function(){var e=.5*-this.height,i=this.scene.make.image({x:0,y:e+5*this.dpr,key:h.d.treasure,frame:"treasure_title_bg"},!1);this.titleimage=this.scene.make.image({x:0,y:i.y,key:h.d.treasure,frame:o.i18n.t("treasure.titleimg")},!1),this.titleimage.alpha=0,this.add([i,this.titleimage]),this.lightSprite=this.createSprite(h.d.circleeffect,this.lightAniKey,"",[1,16]),this.lightSprite.x=5*this.dpr,this.add(this.lightSprite),this.starSprite=this.createSprite(h.d.stareffect,this.starAniKey,"star",[1,18],10,-1),this.add(this.starSprite),this.starSprite.x=this.lightSprite.y;var n=this.maskWidth=this.width,a=this.maskHeight=200*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(n,a),this.add(this.content),this.maskGraphic=this.scene.make.graphics(void 0,!1),this.maskGraphic.fillStyle(0),this.maskGraphic.fillRect(.5*-n*this.zoom,.5*-a*this.zoom,n*this.zoom,a*this.zoom);var l=this.getWorldTransformMatrix();this.maskGraphic.setPosition(l.tx,l.ty),this.content.setMask(this.maskGraphic.createGeometryMask()),this.confirmBtn=new s.Button(this.scene,h.d.treasure,"butt","butt",o.i18n.t("common.confirm")),this.confirmBtn.y=-e-8*this.dpr,this.confirmBtn.setTextStyle(o.UIHelper.brownishStyle(this.dpr,20)),this.confirmBtn.setFontStyle("bold"),this.confirmBtn.alpha=0,this.add(this.confirmBtn)},PicaTreasureAllOpenPanel.prototype.setHandler=function(e){this.closeHandler=e},PicaTreasureAllOpenPanel.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.isDispose=!0,this.tweens.length>0)for(var i=0,n=this.tweens;i<n.length;i++){var a=n[i];a.stop(),a.remove()}this.tweens.length=0},PicaTreasureAllOpenPanel.prototype.setTreasureData=function(e){if(e){this.treasureData=e;var i=this.getNextDatas(),n=this.createLayoutGroup(i),a=.5*(n.height-this.maskHeight);this.setLayoutPanel(n.width,n.height),this.playAnimation();var s=280*this.dpr+a;n.y=s,this.playItemTween(n,s,a,620),this.curLayoutGroup=n}},PicaTreasureAllOpenPanel.prototype.setLayoutPanel=function(e,i){var n=this.width,a=i+40*this.dpr;this.maskGraphic.clear(),this.maskGraphic.fillStyle(0),this.maskGraphic.fillRect(.5*-n*this.zoom,.5*-a*this.zoom,n*this.zoom,a*this.zoom);var s=this.getWorldTransformMatrix(),o=.5*(i-this.maskHeight);this.maskGraphic.setPosition(s.tx,s.ty+o),this.confirmBtn.y=.5*this.height+38*this.dpr+o},PicaTreasureAllOpenPanel.prototype.playAnimation=function(){var e=this;this.titleimage.alpha=0,this.lightSprite.play(this.lightAniKey),setTimeout((function(){e.starSprite.play(e.starAniKey)}),208);var i=this.scene.tweens.add({targets:this.titleimage,alpha:{from:0,to:1},duration:300,onComplete:function(){i.stop(),i.remove()}});this.tweens.push(i);var n=this.scene.tweens.add({targets:this.confirmBtn,alpha:{from:0,to:1},duration:200,delay:720,onComplete:function(){n.stop(),n.remove()}});this.tweens.push(n)},PicaTreasureAllOpenPanel.prototype.playItemTween=function(e,i,n,a){var s=this,o=this.scene.tweens.add({targets:e,y:{from:i,to:n},ease:"Back.easeOut",duration:300,delay:a,onComplete:function(){o.stop(),o.remove(),s.playPageCount()}});this.tweens.push(o);var h=this.curLayoutGroup;if(h){var l=this.scene.tweens.add({targets:h,alpha:{from:1,to:0},duration:200,onComplete:function(){l.stop(),l.remove(),h.destroy()}});this.tweens.push(l)}},PicaTreasureAllOpenPanel.prototype.playPageCount=function(){this.isDispose},PicaTreasureAllOpenPanel.prototype.getNextDatas=function(){var e=this.treasureData;if(!(this.indexed>=e.length)){var i=this.indexed,n=e.length;return this.indexed=n,e.slice(i,n)}},PicaTreasureAllOpenPanel.prototype.createLayoutGroup=function(e){var i=new f(this.scene,0,this.maskHeight,235*this.dpr,this.maskHeight,this.dpr,this.zoom);return this.content.add(i),i.setRewardDatas(e),i},PicaTreasureAllOpenPanel.prototype.createSprite=function(e,i,n,a,s,o){void 0===s&&(s=30),void 0===o&&(o=0);var h=this.scene.make.sprite({key:e,frame:n+"1"});return this.scene.anims.create({key:i,frames:this.scene.anims.generateFrameNames(e,{prefix:n+"",start:a[0],end:a[1]}),frameRate:s,repeat:o}),h},PicaTreasureAllOpenPanel.prototype.onConfirmBtnClick=function(){var e=this.getNextDatas();if(e){var i=this.createLayoutGroup(e),n=.5*(i.height-this.maskHeight),a=280*this.dpr+n;i.y=a,this.playItemTween(i,a,n,200),this.curLayoutGroup=i}else this.closeHandler&&this.closeHandler.run()},PicaTreasureAllOpenPanel}(Phaser.GameObjects.Container),f=function(e){function RewardLayoutGroup(i,n,a,s,o,h,l){var c=e.call(this,i,n,a)||this;return c.dpr=h,c.zoom=l,c.setSize(s,o),c}return c(RewardLayoutGroup,e),RewardLayoutGroup.prototype.setRewardDatas=function(e){if(e){for(var i=e.length,n=0;n<i;n++){var a=new l.ItemButton(this.scene,h.d.uicommon1,"roam_reward_ordinary_bg",this.dpr,this.zoom,!0);a.setStateFrames("roam_reward_ordinary_bg","roam_reward_rare_bg"),a.setItemData(e[n]),this.add(a)}this.setLayout()}},RewardLayoutGroup.prototype.setLayout=function(){var e=this.list;if(0!==e.length){var i=e[0],n=e.length,a=i.width,s=i.height,o=0,h=0;if(n<=3)for(var l=2===n?20*this.dpr:10*this.dpr,c=n*a+l*(n-1),m=0;m<n;m++){(Y=e[m]).x=.5*-c+(a+l)*m+.5*a}else if(4===n){var f=20*this.dpr,g=15*this.dpr;for(m=0;m<2;m++)for(var _=0;_<2;_++){(Y=e[2*m+_]).x=.5*-(a+f)+(a+f)*_,Y.y=.5*-(s+g)+(s+g)*m}}else if(5===n){c=3*a+2*(f=10*this.dpr);var T=2*s+(g=15*this.dpr);for(m=0;m<3;m++){(Y=e[m]).x=.5*-c+(a+f)*m+.5*a,Y.y=.5*-T+.5*s}for(_=0;_<2;_++){(Y=e[_+3]).x=.5*-(2*a+f)+.5*a+(a+f)*_,Y.y=.5*T-.5*s}}else if(6===n)for(c=3*a+2*(f=10*this.dpr),T=2*s+(g=15*this.dpr),m=0;m<2;m++)for(_=0;_<3;_++){(Y=e[3*m+_]).x=.5*-c+(a+f)*_+.5*a,Y.y=.5*-T+(s+g)*m+.5*s}else{f=10*this.dpr,g=10*this.dpr;var x=Math.floor(e.length/4),S=e.length%4,j=(c=4*a+3*f,x+(0===S?0:1));for(T=j*s+g*(j-1),m=0;m<x;m++)for(_=0;_<4;_++){(Y=e[4*m+_]).x=.5*-c+(a+f)*_+.5*a,Y.y=.5*-T+(s+g)*m+.5*s}var q=S*a+f*(S-1);for(_=0;_<S;_++){var Y;(Y=e[_+4*x]).x=.5*-q+.5*a+(a+f)*_,Y.y=.5*T-.5*s}o=c,h=T,this.width<o&&(this.width=o),this.height<h&&(this.height=h)}}},RewardLayoutGroup}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaTreasureOpenPanel",(function(){return m}));var a,s=n(788),o=n(0),h=n(790),l=n(793),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaTreasureOpenPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.lightAniKey="treasurelight",l.starAniKey="treasurestar",l.indexed=0,l.isDispose=!1,l.tweens=[],l.maskWidth=0,l.maskHeight=0,l.dpr=o,l.zoom=h,l.key=s,l.setSize(n,a),l.init(),l}return c(PicaTreasureOpenPanel,e),PicaTreasureOpenPanel.prototype.resize=function(e,i){this.setSize(e,i);var n=this.getWorldTransformMatrix();this.maskGraphic.setPosition(n.tx,n.ty)},PicaTreasureOpenPanel.prototype.addListen=function(){this.confirmBtn.on(s.ClickEvent.Tap,this.onConfirmBtnClick,this)},PicaTreasureOpenPanel.prototype.removeListen=function(){this.confirmBtn.off(s.ClickEvent.Tap,this.onConfirmBtnClick,this)},PicaTreasureOpenPanel.prototype.init=function(){var e=.5*-this.height,i=this.scene.make.image({x:0,y:e+5*this.dpr,key:h.d.treasure,frame:"treasure_title_bg"},!1);this.titleimage=this.scene.make.image({x:0,y:i.y,key:h.d.treasure,frame:o.i18n.t("treasure.titleimg")},!1),this.titleimage.alpha=0,this.pageCount=this.scene.make.text({x:0,y:this.titleimage.y+40*this.dpr,text:"1/6",style:{color:"#FFE400",fontFamily:o.Font.DEFULT_FONT,fontSize:16*this.dpr}}).setOrigin(.5).setFontStyle("bold"),this.pageCount.visible=!1,this.add([i,this.titleimage,this.pageCount]),this.lightSprite=this.createSprite(h.d.circleeffect,this.lightAniKey,"",[1,16]),this.lightSprite.x=5*this.dpr,this.add(this.lightSprite),this.starSprite=this.createSprite(h.d.stareffect,this.starAniKey,"star",[1,18],10,-1),this.add(this.starSprite),this.starSprite.x=this.lightSprite.y;var n=this.maskWidth=this.width,a=this.maskHeight=180*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(n,a),this.add(this.content),this.maskGraphic=this.scene.make.graphics(void 0,!1),this.maskGraphic.fillStyle(0),this.maskGraphic.fillRect(.5*-n*this.zoom,.5*-a*this.zoom,n*this.zoom,a*this.zoom);var l=this.getWorldTransformMatrix();this.maskGraphic.setPosition(l.tx,l.ty),this.content.setMask(this.maskGraphic.createGeometryMask()),this.pagedown=this.scene.make.text({x:0,y:-e-45*this.dpr,text:o.i18n.t("treasure.pagedown"),style:{color:"#96F7FF",fontFamily:o.Font.DEFULT_FONT,fontSize:12*this.dpr}}).setOrigin(.5),this.add(this.pagedown),this.pagedown.visible=!1,this.confirmBtn=new s.Button(this.scene,h.d.treasure,"butt","butt",o.i18n.t("common.confirm")),this.confirmBtn.y=-e-8*this.dpr,this.confirmBtn.setTextStyle(o.UIHelper.brownishStyle(this.dpr,20)),this.confirmBtn.setFontStyle("bold"),this.confirmBtn.alpha=0,this.add(this.confirmBtn)},PicaTreasureOpenPanel.prototype.setHandler=function(e){this.closeHandler=e},PicaTreasureOpenPanel.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.isDispose=!0,this.tweens.length>0)for(var i=0,n=this.tweens;i<n.length;i++){var a=n[i];a.stop(),a.remove()}this.tweens.length=0},PicaTreasureOpenPanel.prototype.setTreasureData=function(e){if(e){this.treasureData=e;var i=this.getNextDatas(),n=this.createLayoutGroup(i);this.playAnimation();var a=160*this.dpr+.5*(n.height-this.maskHeight);this.playItemTween(n,a,620),this.curLayoutGroup=n}},PicaTreasureOpenPanel.prototype.playAnimation=function(){var e=this;this.titleimage.alpha=0,this.lightSprite.play(this.lightAniKey),setTimeout((function(){e.starSprite.play(e.starAniKey)}),208);var i=this.scene.tweens.add({targets:this.titleimage,alpha:{from:0,to:1},duration:300,onComplete:function(){i.stop(),i.remove()}});this.tweens.push(i);var n=this.scene.tweens.add({targets:this.confirmBtn,alpha:{from:0,to:1},duration:200,delay:720,onComplete:function(){n.stop(),n.remove()}});this.tweens.push(n)},PicaTreasureOpenPanel.prototype.playItemTween=function(e,i,n){var a=this,s=this.scene.tweens.add({targets:e,y:{from:i,to:0},ease:"Back.easeOut",duration:300,delay:n,onComplete:function(){s.stop(),s.remove(),a.playPageCount()}});this.tweens.push(s);var o=this.curLayoutGroup;if(o){var h=this.scene.tweens.add({targets:o,alpha:{from:1,to:0},duration:200,onComplete:function(){h.stop(),h.remove(),o.destroy()}});this.tweens.push(h)}},PicaTreasureOpenPanel.prototype.playPageCount=function(){if(!this.isDispose){var e=this.treasureData.length;if(!(e<6)){this.pageCount.visible=!0,this.pagedown.visible=!0;var i=Math.ceil(e/6),n=Math.ceil(this.indexed/6);this.pageCount.text=n+" /"+i}}},PicaTreasureOpenPanel.prototype.getNextDatas=function(){var e=this.treasureData;if(!(this.indexed>=e.length)){var i=this.indexed,n=e.length>=i+6?i+6:e.length;return this.indexed=n,e.slice(i,n)}},PicaTreasureOpenPanel.prototype.createLayoutGroup=function(e){var i=new f(this.scene,0,this.maskHeight,235*this.dpr,this.maskHeight,this.dpr,this.zoom);return this.content.add(i),i.setRewardDatas(e),i},PicaTreasureOpenPanel.prototype.createSprite=function(e,i,n,a,s,o){void 0===s&&(s=30),void 0===o&&(o=0);var h=this.scene.make.sprite({key:e,frame:n+"1"});return this.scene.anims.create({key:i,frames:this.scene.anims.generateFrameNames(e,{prefix:n+"",start:a[0],end:a[1]}),frameRate:s,repeat:o}),h},PicaTreasureOpenPanel.prototype.onConfirmBtnClick=function(){var e=this.getNextDatas();if(e){var i=this.createLayoutGroup(e),n=160*this.dpr+.5*(i.height-this.height);this.playItemTween(i,n,200),this.curLayoutGroup=i}else this.closeHandler&&this.closeHandler.run()},PicaTreasureOpenPanel}(Phaser.GameObjects.Container),f=function(e){function RewardLayoutGroup(i,n,a,s,o,h,l){var c=e.call(this,i,n,a)||this;return c.dpr=h,c.zoom=l,c.setSize(s,o),c}return c(RewardLayoutGroup,e),RewardLayoutGroup.prototype.setRewardDatas=function(e){if(e){for(var i=e.length,n=0;n<i;n++){var a=new l.ItemButton(this.scene,h.d.uicommon1,"roam_reward_ordinary_bg",this.dpr,this.zoom,!0);a.setStateFrames("roam_reward_ordinary_bg","roam_reward_rare_bg"),a.setItemData(e[n]),this.add(a)}this.setLayout()}},RewardLayoutGroup.prototype.setLayout=function(){var e=this.list;if(0!==e.length){var i=e[0],n=e.length,a=i.width,s=i.height;if(n<=3)for(var o=2===n?20*this.dpr:10*this.dpr,h=n*a+o*(n-1),l=0;l<n;l++){(_=e[l]).x=.5*-h+(a+o)*l+.5*a}else if(4===n){var c=20*this.dpr,m=15*this.dpr;for(l=0;l<2;l++)for(var f=0;f<2;f++){(_=e[2*l+f]).x=.5*-(a+c)+(a+c)*f,_.y=.5*-(s+m)+(s+m)*l}}else if(5===n){h=3*a+2*(c=10*this.dpr);var g=2*s+(m=15*this.dpr);for(l=0;l<3;l++){(_=e[l]).x=.5*-h+(a+c)*l+.5*a,_.y=.5*-g+.5*s}for(f=0;f<2;f++){(_=e[f+3]).x=.5*-(2*a+c)+.5*a+(a+c)*f,_.y=.5*g-.5*s}}else if(6===n)for(h=3*a+2*(c=10*this.dpr),g=2*s+(m=15*this.dpr),l=0;l<2;l++)for(f=0;f<3;f++){var _;(_=e[3*l+f]).x=.5*-h+(a+c)*f+.5*a,_.y=.5*-g+(s+m)*l+.5*s}}},RewardLayoutGroup}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaTreasurePreviewPanel",(function(){return f}));var a,s=n(788),o=n(791),h=n(0),l=n(790),c=n(793),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaTreasurePreviewPanel(i,n,a,s,o,h,l){var c=e.call(this,i)||this;return c.render=n,c.dpr=h,c.zoom=l,c.key=o,c.setSize(a,s),c.init(),c}return m(PicaTreasurePreviewPanel,e),PicaTreasurePreviewPanel.prototype.resize=function(e,i){this.setSize(e,i),this.rewardGameScroll.refreshMask()},PicaTreasurePreviewPanel.prototype.addListen=function(){this.confirmBtn.on(s.ClickEvent.Tap,this.onConfirmBtnClick,this),this.closeBtn.on("pointerup",this.OnClosePanel,this)},PicaTreasurePreviewPanel.prototype.removeListen=function(){this.confirmBtn.off("click",this.onConfirmBtnClick,this),this.closeBtn.on("pointerup",this.OnClosePanel,this)},PicaTreasurePreviewPanel.prototype.init=function(){var e=this;this.bg=new s.NineSlicePatch(this.scene,0,0,this.width,this.height,l.d.uicommon1,"bg1",h.UIHelper.background_w(this.dpr)),this.add(this.bg);var i=.5*-this.bg.height;this.titleimage=this.scene.make.image({x:0,y:i+5*this.dpr,key:l.d.uicommon1,frame:"title"},!1),this.titleimage.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titleName=this.scene.make.text({x:0,y:this.titleimage.y+2*this.dpr,text:"",style:h.UIHelper.titleYellowStyle_m(this.dpr)}).setOrigin(.5).setFontStyle("bold"),this.closeBtn=new s.Button(this.scene,l.c.commonKey,"close"),this.closeBtn.setDisplaySize(28*this.dpr,28*this.dpr),this.closeBtn.setPosition(.5*this.width-8*this.dpr,i+7*this.dpr),this.add([this.titleimage,this.titleName,this.closeBtn]),this.bgicon=this.scene.make.image({key:l.d.treasure,frame:"treasure_bg"}),this.bgicon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.bgicon.y=this.titleName.y+.5*this.bgicon.height+34*this.dpr,this.add([this.bg,this.bgicon]),this.mDetailDisplay=new o.DetailDisplay(this.scene,this.render),this.mDetailDisplay.y=this.bgicon.y,this.mDetailDisplay.setFixedScale(this.dpr/this.scale),this.mDetailDisplay.setSize(72*this.dpr,72*this.dpr),this.add(this.mDetailDisplay);var n=360*this.dpr,a=92*this.dpr;this.rewardCon=this.scene.make.container(void 0,!1).setSize(n,a),this.add(this.rewardCon),this.rewardCon.setPosition(0,-i-.5*a-68*this.dpr);var c=this.scene.make.text({x:0,y:.5*-a+8*this.dpr,text:h.i18n.t("treasure.tipslabel"),style:{color:"#253FCA",fontSize:12*this.dpr,fontFamily:h.Font.DEFULT_FONT}},!1).setOrigin(.5),m=this.scene.make.image({key:l.d.treasure,frame:"treasure_decorate_left"});m.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var f=this.scene.make.image({key:l.d.treasure,frame:"treasure_decorate_right"});f.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var g=.5*-c.width-.5*m.width-10*this.dpr;m.setPosition(g,c.y),f.setPosition(-g,c.y),this.rewardCon.add([c,m,f]),this.rewardGameScroll=new s.GameScroller(this.scene,{x:0,y:2*this.dpr,width:295*this.dpr,height:90*this.dpr,zoom:this.zoom,dpr:this.dpr,align:2,orientation:1,space:10*this.dpr,valuechangeCallback:void 0,cellupCallBack:function(i){e.onRewardItemHandler(i)}}),this.rewardCon.add(this.rewardGameScroll),this.confirmBtn=new s.Button(this.scene,l.d.treasure,"butt","butt",h.i18n.t("common.open")),this.confirmBtn.y=-i-38*this.dpr,this.confirmBtn.setTextStyle(h.UIHelper.brownishStyle(this.dpr,20)),this.confirmBtn.setFontStyle("bold"),this.add(this.confirmBtn)},PicaTreasurePreviewPanel.prototype.setHandler=function(e,i){this.sendHandler=e,this.closeHandler=i},PicaTreasurePreviewPanel.prototype.setTreasureData=function(e){this.titleName.text="某某某宝箱",this.setTreasureItems(e)},PicaTreasurePreviewPanel.prototype.setTreasureItems=function(e){this.rewardGameScroll.clearItems();for(var i=0;i<10;i++){var n=new c.ItemButton(this.scene,l.d.uicommon,"bag_icon_common_bg",this.dpr,this.zoom,!1);n.y=0,this.rewardGameScroll.addItem(n)}this.rewardGameScroll.Sort()},PicaTreasurePreviewPanel.prototype.onConfirmBtnClick=function(){this.treasureData;this.sendHandler&&this.sendHandler.run()},PicaTreasurePreviewPanel.prototype.OnClosePanel=function(){this.closeHandler&&this.closeHandler.run()},PicaTreasurePreviewPanel.prototype.onRewardItemHandler=function(e){this.selectMaterial&&this.selectMaterial!==e&&(this.selectMaterial.select=!1),e.select=!e.select,this.selectMaterial=e},PicaTreasurePreviewPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.d(i,"b",(function(){return a})),n.d(i,"a",(function(){return S}));var a,s=n(0),o=n(892),h=n(891),l=n(2),c=n(73),m=n(799),f=function(){function MatterBodies(e){this.render=e;var i=this.render.sceneManager.getSceneByName(m.a.name);i?(this.mGraphics=i.make.graphics(void 0,!1),i.layerManager.addToLayer("middleLayer",this.mGraphics)):s.Logger.getInstance().error("no matter scene")}return MatterBodies.prototype.update=function(){this.mGraphics&&this.mGraphics.clear()},MatterBodies.prototype.renderWireframes=function(e){var i=this.mGraphics;if(i&&(i.clear(),e)){i.lineStyle(1,16711680),i.beginPath();this.render.scaleRatio;for(var n=0,a=e;n<a.length;n++){var s=a[n],o=s.points,h=s.pos,l=s.offset;i.moveTo(o[0].x+h.x+l.x,o[0].y+h.y+l.y);for(var c=1;c<o.length;c++)i.lineTo(o[c].x+h.x+l.x,o[c].y+h.y+l.y);i.lineTo(o[0].x+h.x+l.x,o[0].y+h.y+l.y)}i.strokePath()}},MatterBodies.prototype.destroy=function(){this.mGraphics&&this.mGraphics.destroy()},MatterBodies}(),g=function(){function ServerPosition(e){var i=e.sceneManager.getSceneByName(m.a.name);this.dpr=e.scaleRatio,this.mGridhics=i.make.graphics(void 0,!1),i.layerManager.addToLayer("middleLayer",this.mGridhics)}return ServerPosition.prototype.draw=function(e,i){this.mGridhics.clear(),this.mGridhics.fillStyle(65280,1),this.mGridhics.fillCircle(e,i,2*this.dpr)},ServerPosition.prototype.destroy=function(){this.mGridhics&&this.mGridhics.destroy()},ServerPosition}(),_=n(19),T=n(6),x=function(){function TerrainGrid(e,i){this.render=e,this.miniSize=i,this.dirty=!1,this.deltaTime=500,this.curDelta=0}return TerrainGrid.prototype.setMap=function(e){this.map=e,this.dirty=!0},TerrainGrid.prototype.update=function(e,i){this.curDelta+=i,this.curDelta>=this.deltaTime&&this.dirty&&(this.dirty=!1,this.drawGrid())},TerrainGrid.prototype.destroy=function(){this.graphics&&(this.graphics.destroy(),this.graphics=void 0),this.dirty=!1,this.map=null},TerrainGrid.prototype.drawGrid=function(){if(this.map){if(!this.graphics){var e=this.render.sceneManager.getMainScene();if(!e)return;this.graphics=e.make.graphics(void 0,!1),e.layerManager.addToLayer(l.LayerName.MIDDLE,this.graphics)}this.graphics.clear(),this.graphics.lineStyle(1,16777215,.5);for(var i=this.map[0].length,n=this.map.length,a=0;a<n;a++)for(var s=0;s<i;s++)-1!==this.map[a][s]&&this.draw(s,a);this.graphics.strokePath()}},TerrainGrid.prototype.draw=function(e,i){var n=s.Position45.transformTo90({x:e,y:i},this.miniSize);this.graphics.moveTo(n.x,n.y),this.graphics.lineTo(n.x+.5*this.miniSize.tileWidth,n.y+.5*this.miniSize.tileHeight),this.graphics.lineTo(n.x,n.y+this.miniSize.tileHeight),this.graphics.lineTo(n.x-.5*this.miniSize.tileWidth,n.y+.5*this.miniSize.tileHeight),this.graphics.closePath()},TerrainGrid.prototype.drawLine=function(e,i,n,a,o,h){var l=new s.LogicPos(i,n);l=s.Position45.transformTo90(l,h),e.moveTo(l.x,l.y),l=new s.LogicPos(a,o),l=s.Position45.transformTo90(l,h),e.lineTo(l.x,l.y)},TerrainGrid}(),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};!function(e){e[e.UnknownNodeType=0]="UnknownNodeType",e[e.GameNodeType=1]="GameNodeType",e[e.SceneNodeType=2]="SceneNodeType",e[e.ElementNodeType=3]="ElementNodeType",e[e.TerrainNodeType=4]="TerrainNodeType",e[e.CharacterNodeType=5]="CharacterNodeType",e[e.LocationType=6]="LocationType",e[e.MovableType=7]="MovableType",e[e.DisplayType=8]="DisplayType",e[e.AttributeType=9]="AttributeType",e[e.FunctionType=10]="FunctionType",e[e.AnimationsType=11]="AnimationsType",e[e.EventType=12]="EventType",e[e.MapSizeType=13]="MapSizeType",e[e.UIType=14]="UIType",e[e.TimerType=15]="TimerType",e[e.PackageType=16]="PackageType",e[e.PackageItemType=17]="PackageItemType",e[e.AvatarType=18]="AvatarType",e[e.SettingsType=19]="SettingsType",e[e.CampType=20]="CampType",e[e.MutexType=21]="MutexType",e[e.AnimationDataType=22]="AnimationDataType",e[e.ForkType=23]="ForkType",e[e.ButtonType=24]="ButtonType",e[e.TextType=25]="TextType",e[e.AccessType=26]="AccessType",e[e.SpawnPointType=27]="SpawnPointType",e[e.CommodityType=28]="CommodityType",e[e.ShopType=29]="ShopType",e[e.PaletteType=30]="PaletteType",e[e.TerrainCollectionType=31]="TerrainCollectionType",e[e.AssetsType=32]="AssetsType",e[e.MossType=33]="MossType",e[e.MossCollectionType=34]="MossCollectionType",e[e.SceneryType=35]="SceneryType",e[e.ModsType=36]="ModsType",e[e.InputTextType=37]="InputTextType"}(a||(a={}));var S=function(){function DisplayManager(e){this.render=e,this.loading=!1,this.uuid=0,this.sceneManager=e.sceneManager,this.displays=new Map,this.scenerys=new Map,this.mModelCache=new Map,this.preLoadList=[]}return Object.defineProperty(DisplayManager.prototype,"user",{get:function(){return this.mUser},enumerable:!1,configurable:!0}),DisplayManager.prototype.update=function(e,i){this.preLoadList&&this.preLoadList.length>0&&!this.loading&&(this.loading=!0,this.loadProgress()),this.mGridLayer&&this.mGridLayer.update(e,i)},DisplayManager.prototype.resize=function(e,i){this.scenerys.forEach((function(n){n.resize(e,i)}))},DisplayManager.prototype.updateModel=function(e,i){if(this.sceneManager.getMainScene()){var n=this.displays.get(e);n&&(n.load(i),this.render.mainPeer.elementDisplaySyncReady(e))}else s.Logger.getInstance().fatal("scene does not exist")},DisplayManager.prototype.addDragonbonesDisplay=function(e,i,n,a){if(i){var o=this.sceneManager.getMainScene();if(o){var l;this.displays.has(e)?l=this.displays.get(e):(l=new h.a(o,this.render,e,this.uuid++,a),this.displays.set(e,l),this.preLoadList.push(l)),l.load(i,void 0,!1);var c=this.mModelCache.get(e);c&&(l.titleMask=c.titleMask,c.nickname&&l.showNickname(c.nickname),this.mModelCache.delete(e)),o.layerManager.addToLayer(n.toString(),l)}else s.Logger.getInstance().fatal("scene does not exist")}},DisplayManager.prototype.addUserDragonbonesDisplay=function(e,i,n){if(void 0===i&&(i=!1),e){var o=this.sceneManager.getMainScene();if(o){var l;this.displays.has(e.id)?l=this.displays.get(e.id):(l=new h.a(o,this.render,e.id,this.uuid++,a.CharacterNodeType),this.displays.set(e.id,l)),l.load(e,void 0,!1),l.startLoad(),i&&(this.mUser=l);var c=e.id,m=this.mModelCache.get(c);return m&&(l.titleMask=m.titleMask,m.nickname&&l.showNickname(m.nickname),this.mModelCache.delete(c)),o.layerManager.addToLayer(n.toString(),l),l}s.Logger.getInstance().fatal("scene does not exist")}},DisplayManager.prototype.addTerrainDisplay=function(e,i,n){if(i){var h=this.sceneManager.getMainScene();if(h){var l;this.displays.has(e)?l=this.displays.get(e):(l=new o.a(h,this.render,e,a.TerrainNodeType),this.displays.set(e,l)),l.load(i);var c=this.mModelCache.get(e);return c&&(l.titleMask=c.titleMask,c.nickname&&l.showNickname(c.nickname),this.mModelCache.delete(e)),h.layerManager.addToLayer(n.toString(),l),l}s.Logger.getInstance().fatal("scene does not exist")}},DisplayManager.prototype.addFramesDisplay=function(e,i,n,h){if(i){var l=this.sceneManager.getMainScene();if(l){var c;this.displays.has(e)?c=this.displays.get(e):(c=new o.a(l,this.render,e,a.ElementNodeType),this.displays.set(e,c)),c.load(i,h);var m=this.mModelCache.get(e);return m&&(c.titleMask=m.titleMask,m.nickname&&c.showNickname(m.nickname),this.mModelCache.delete(e)),l.layerManager.addToLayer(n.toString(),c),c}s.Logger.getInstance().fatal("scene does not exist")}else s.Logger.getInstance().debug("addFramesDisplay ====>",e)},DisplayManager.prototype.addToLayer=function(e,i,n){var a=this.sceneManager.getMainScene();a?a.layerManager.addToLayer(e,i,n):s.Logger.getInstance().fatal("scene does not exist")},DisplayManager.prototype.removeDisplay=function(e){this.displays.has(e)&&(this.displays.get(e).destroy(),this.displays.delete(e))},DisplayManager.prototype.addFillEffect=function(e,i,n){},DisplayManager.prototype.load=function(e,i,n){this.displays.has(e)?this.displays.get(e).load(i,n):s.Logger.getInstance().error("BaseDisplay not found: ",e)},DisplayManager.prototype.changeAlpha=function(e,i){this.displays.has(e)?this.displays.get(e).changeAlpha(i):s.Logger.getInstance().error("BaseDisplay not found: ",e)},DisplayManager.prototype.fadeIn=function(e){this.displays.has(e)?this.displays.get(e).fadeIn():s.Logger.getInstance().error("BaseDisplay not found: ",e)},DisplayManager.prototype.fadeOut=function(e){this.displays.has(e)?this.displays.get(e).fadeOut():s.Logger.getInstance().error("BaseDisplay not found: ",e)},DisplayManager.prototype.play=function(e,i,n,a){this.displays.has(e)?this.displays.get(e).play(i):s.Logger.getInstance().error("BaseDisplay not found: ",e)},DisplayManager.prototype.mount=function(e,i,n){var a=this.displays.get(e);if(a){var o=this.displays.get(i);o?(o.setRootMount(a),a.mount(o,n)):s.Logger.getInstance().error("BaseDisplay not found: ",i)}else s.Logger.getInstance().error("BaseDisplay not found: ",e)},DisplayManager.prototype.unmount=function(e,i){var n=this.displays.get(e);if(n){var a=this.displays.get(i);a?(a.setRootMount(null),n.unmount(a)):s.Logger.getInstance().error("BaseDisplay not found: ",i)}else s.Logger.getInstance().error("BaseDisplay not found: ",e)},DisplayManager.prototype.addEffect=function(e,i,n){var a=this.getDisplay(e),o=this.getDisplay(i);o||(o=this.addFramesDisplay(i,n,parseInt(l.LayerName.SURFACE,10),l.DisplayField.Effect)),a&&o&&(o.created?a.addEffect(o):o.createdHandler=new s.Handler(this,(function(){a.addEffect(o),o.createdHandler=void 0})))},DisplayManager.prototype.removeEffect=function(e,i){var n=this.displays.get(i);if(n){var a=this.displays.get(e);a&&a.removeEffect(n),n.destroy(),this.displays.delete(i)}else s.Logger.getInstance().error("BaseDisplay not found: ",i)},DisplayManager.prototype.showEffect=function(e){if(this.displays.has(e))this.displays.get(e);else s.Logger.getInstance().error("BaseDisplay not found: ",e)},DisplayManager.prototype.setModel=function(e){var i=this.displays.get(e.id);i?(e.pos||(e.pos=new s.LogicPos(0,0,0)),i.titleMask=e.titleMask,i.setPosition(e.pos.x,e.pos.y,e.pos.z),i.checkCollision(e),i.changeAlpha(e.alpha),i.hasInteractive=e.hasInteractive,e.nickname&&i.showNickname(e.nickname)):this.mModelCache.set(e.id,e)},DisplayManager.prototype.startFireMove=function(e,i){var n=this.displays.get(e);n&&n.startFireMove(i)},DisplayManager.prototype.addSkybox=function(e){var i=new c.a(e,this.render);this.scenerys.set(e.id,i)},DisplayManager.prototype.updateSkyboxState=function(e){this.scenerys.forEach((function(i){i.setState(e)}))},DisplayManager.prototype.removeSkybox=function(e){var i=this.scenerys.get(e);i&&(i.destroy(),this.scenerys.delete(e))},DisplayManager.prototype.getDisplay=function(e){return this.displays.get(e)},DisplayManager.prototype.displayDoMove=function(e,i){var n=this.getDisplay(e);n&&n.doMove(i)},DisplayManager.prototype.showNickname=function(e,i){var n=this.getDisplay(e);if(!n)return s.Logger.getInstance().debug("can't show nickname "+i);n.showNickname(i)},DisplayManager.prototype.showTopDisplay=function(e,i){var n=this.getDisplay(e);n&&n.showTopDisplay(i)},DisplayManager.prototype.showMatterDebug=function(e){this.matterBodies||(this.matterBodies=new f(this.render)),this.matterBodies.renderWireframes(e)},DisplayManager.prototype.hideMatterDebug=function(){this.matterBodies&&(this.matterBodies.destroy(),this.matterBodies=void 0)},DisplayManager.prototype.drawServerPosition=function(e,i){this.serverPosition||(this.serverPosition=new g(this.render)),this.serverPosition.draw(e,i)},DisplayManager.prototype.hideServerPosition=function(){this.serverPosition&&(this.serverPosition.destroy(),this.serverPosition=null)},DisplayManager.prototype.liftItem=function(e,i,n){var a=this.displays.get(e);if(a&&i&&n){a.destroyMount();var h=this.sceneManager.getMainScene();if(h){var l=new o.a(h,this.render);l.load(_.c.createFromDisplay(i,n)),a.mount(l,0)}else s.Logger.getInstance().fatal("scene does not exist")}},DisplayManager.prototype.clearMount=function(e){var i=this.displays.get(e);i&&i.destroyMount()},DisplayManager.prototype.throwElement=function(e,i,n,a){var h=this.getDisplay(e);if(h){var c=this.getDisplay(i);if(c){var m=this.render.sceneManager.getMainScene(),f=new o.a(m,this.render);f.load(_.c.createFromDisplay(n,a)),this.addToLayer(l.LayerName.SURFACE,f);var g=h.getPosition(),T=c.getPosition();f.setPosition(g.x,g.y-30,g.z);var x=2*s.Tool.twoPointDistance(g,T),S=m.tweens.add({targets:f,duration:x,props:{x:T.x,y:T.y-30},onComplete:function(){S.stop(),f.destroy()}})}}},DisplayManager.prototype.snapshot=function(){return __awaiter(this,void 0,void 0,(function(){var e,i,n,a,o,h,l,c,m,f,g=this;return __generator(this,(function(_){switch(_.label){case 0:return(e=this.sceneManager.getMainScene())&&(i=e.layerManager)?(n=i.getLayer(T.LayerEnum.Floor.toString()),a=i.getLayer(T.LayerEnum.Terrain.toString()),o=i.getLayer(T.LayerEnum.Surface.toString()),[4,this.render.getCurrentRoomSize()]):[2];case 1:for(h=_.sent(),l=[n,a,o],h.rows*(h.tileWidth/2),this.scenerys.forEach((function(e){e.getLayer()&&(e.updateScale(1),l.unshift(e.getLayer()))})),c=e.make.renderTexture({x:0,y:0,width:h.sceneWidth,height:h.sceneHeight},!1),m=0,f=l;m<f.length;m++)f[m].setScale(1);return c.draw(l,0,0),c.snapshot((function(e){s.Logger.getInstance().log(e),c.destroy();for(var i=0,n=l;i<n.length;i++){n[i].setScale(g.render.scaleRatio)}g.scenerys.forEach((function(e){return e.updateScale(g.render.scaleRatio)}))})),[2]}}))}))},DisplayManager.prototype.destroy=function(){this.loading=!1,this.preLoadList&&(this.preLoadList.length=0,this.preLoadList=[]),this.displays&&(this.displays.forEach((function(e){e&&e.destroy()})),this.displays.clear()),this.mModelCache&&this.mModelCache.clear(),this.scenerys&&(this.scenerys.forEach((function(e){e&&e.destroy()})),this.scenerys.clear()),this.matterBodies&&(this.matterBodies.destroy(),this.matterBodies=null),this.serverPosition&&(this.serverPosition.destroy(),this.serverPosition=null)},DisplayManager.prototype.showGrids=function(e,i){this.mGridLayer=new x(this.render,e),this.mGridLayer.setMap(i)},DisplayManager.prototype.hideGrids=function(){this.mGridLayer&&this.mGridLayer.destroy()},DisplayManager.prototype.loadProgress=function(){var e=this,i=this.preLoadList.shift();i?i.startLoad().then((function(){e.loadProgress()})).catch((function(){e.loadProgress()})):this.loading=!1},DisplayManager}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return l}));var a,s=n(4),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function CamerasManager(i){var n=e.call(this)||this;return n.render=i,n.MINI_VIEW_SIZE=50,n.VIEW_PORT_SIZE=50,n.viewPort=new Phaser.Geom.Rectangle,n.miniViewPort=new Phaser.Geom.Rectangle,n.mCameras=[],n.zoom=n.render.scaleRatio,n}return h(CamerasManager,e),CamerasManager.prototype.startRoomPlay=function(e){this.mMain=e.cameras.main},CamerasManager.prototype.pan=function(e,i,n){var a=this;e*=this.zoom,i*=this.zoom;for(var s=0,o=this.mCameras;s<o.length;s++){o[s].pan(e,i,n)}return new Promise((function(e,i){a.mMain.once(Phaser.Cameras.Scene2D.Events.PAN_COMPLETE,(function(){e()}))}))},Object.defineProperty(CamerasManager.prototype,"camera",{get:function(){return this.mMain},set:function(e){this.mMain=e,this.addCamera(e),this.setViewPortSize()},enumerable:!1,configurable:!0}),CamerasManager.prototype.resize=function(e,i){o.Logger.getInstance().debug("resize"),this.resetCameraSize(e,i),o.Logger.getInstance().debug("camera ===== resize"),this.mTarget&&(o.Logger.getInstance().debug("target ===== resize"),this.startFollow(this.mTarget))},CamerasManager.prototype.scrollTargetPoint=function(e,i,n){var a=this;this.mMain&&(this.stopFollow(),n?this.pan(e,i,1e3).then((function(){a.render.syncCameraScroll()})):(this.setScroll(e,i),this.render.syncCameraScroll()))},CamerasManager.prototype.destroy=function(){o.Logger.getInstance().debug("camerasmanager destroy"),this.mMain=void 0,this.mTarget=void 0,this.mCameras=[]},CamerasManager.prototype.resetCameraSize=function(e,i){o.Logger.getInstance().debug("resetCamerSize"),this.render.mainPeer.resetGameraSize(e,i)},CamerasManager.prototype.setViewPortSize=function(){if(this.mMain){var e=this.render.getCurrentRoomSize();if(e){var i=(this.VIEW_PORT_SIZE+this.VIEW_PORT_SIZE)*(e.tileWidth/2),n=(this.VIEW_PORT_SIZE+this.VIEW_PORT_SIZE)*(e.tileHeight/2);this.viewPort.setSize(i,n);var a=(this.MINI_VIEW_SIZE+this.MINI_VIEW_SIZE)*(e.tileWidth/2),s=(this.MINI_VIEW_SIZE+this.MINI_VIEW_SIZE)*(e.tileHeight/2);this.miniViewPort.setSize(a,s)}else o.Logger.getInstance().error("room size does not exist")}else o.Logger.getInstance().error("camera does not exist")},CamerasManager}(s.BaseCamerasManager)},function(e,i,n){"use strict";n.d(i,"a",(function(){return c}));var a,s=n(0),o=n(1015),h=n(4),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function ElementTopDisplay(i,n,a){var s=e.call(this,i,n,a)||this;return s.isDispose=!1,s}return l(ElementTopDisplay,e),ElementTopDisplay.prototype.showNickname=function(e){if(this.mOwner){var i=this.mFollows.get(h.FollowEnum.Nickname),n=null;i?n=i.object:(n=this.scene.make.text({style:{fontSize:12*this.mDpr,fontFamily:s.Font.DEFULT_FONT}}).setOrigin(.5).setStroke("#000000",2*this.mDpr),i=new h.FollowObject(n,this.mOwner,this.mDpr),this.mFollows.set(h.FollowEnum.Nickname,i)),n.text=e,this.addToSceneUI(n),this.mOwner.topPoint&&(i.setOffset(0,this.mOwner.topPoint.y),i.update())}},ElementTopDisplay.prototype.hideNickname=function(){this.removeFollowObject(h.FollowEnum.Nickname)},ElementTopDisplay.prototype.showBubble=function(e,i){var n=this.scene;n&&(this.mBubble||(this.mBubble=new o.a(n,this.mDpr)),this.mBubble.addBubble(e,i),this.mBubble.follow(this.mOwner),this.addToSceneUI(this.mBubble))},ElementTopDisplay.prototype.clearBubble=function(){this.mBubble&&(this.mBubble.destroy(),this.mBubble=null)},ElementTopDisplay.prototype.loadState=function(e){var i=this,n="state_"+e;if(this.scene.cache.json.exists(n))this.showStateHandler(this.scene.cache.json.get(n));else{this.scene.load.once("filecomplete-json-"+n,(function(e){n===e&&i.showStateHandler(i.scene.cache.json.get(n))}),this),this.scene.load.json(n,s.Url.getRes("config/base/state/"+e+".json")),this.scene.load.start()}},ElementTopDisplay.prototype.showUIState=function(e){var i=this;if("text"!==e.type){var n=e.image.display.texturepath,a=e.image.display.datapath;this.loadAtals(n,a,this,(function(){var a,s,o=e.image.img;if("sprite"===e.type){var l=e.image.animation,c=l.frame;i.scene.anims.create({key:l.anikey,frames:i.scene.anims.generateFrameNames(n,{prefix:o+"_",frames:c}),duration:l.duration,repeat:l.repeat}),i.mFollows.has(h.FollowEnum.Sprite)?s=(a=i.mFollows.get(h.FollowEnum.Sprite)).object:(s=i.scene.make.sprite({key:n,frame:o+"_1"}),a=new h.FollowObject(s,i.mOwner,i.mDpr),i.mFollows.set(h.FollowEnum.Sprite,a)),s.play(l.anikey)}else i.mFollows.has(h.FollowEnum.Sprite)?(s=(a=i.mFollows.get(h.FollowEnum.Sprite)).object).setTexture(n,o):(s=i.scene.make.image({key:n,frame:o}),a=new h.FollowObject(s,i.mOwner,i.mDpr),i.mFollows.set(h.FollowEnum.Sprite,a));var m=i.getYOffset();a.setOffset(0,m.y),i.addToSceneUI(s),a.update()}))}},ElementTopDisplay.prototype.updateOffset=function(){var e=this.getYOffset();this.mFollows.forEach((function(i){return i.setOffset(0,e.y)}))},ElementTopDisplay.prototype.getYOffset=function(){var e=new Phaser.Geom.Point;return e.x=0,e.y=this.mOwner.topPoint.y,e},ElementTopDisplay.prototype.addDisplay=function(){var e=this;this.mFollows&&this.mFollows.forEach((function(i){i.object&&e.addToSceneUI(i.object)}))},ElementTopDisplay.prototype.removeDisplay=function(){this.mFollows&&this.mFollows.forEach((function(e){return e.remove()}))},ElementTopDisplay.prototype.hasTopPoint=function(){return this.mOwner&&this.mOwner.topPoint},ElementTopDisplay.prototype.hasNickName=function(){return!!this.mFollows.has(h.FollowEnum.Nickname)},ElementTopDisplay.prototype.destroy=function(){this.mFollows&&(this.mFollows.forEach((function(e){return e.destroy()})),this.mFollows.clear(),this.mFollows=void 0),this.mBubble&&(this.mBubble.destroy(),this.mBubble=void 0)},ElementTopDisplay.prototype.update=function(){this.mFollows&&this.mFollows.forEach((function(e){return e.update()})),this.mBubble&&this.mBubble.follow(this.mOwner)},ElementTopDisplay.prototype.addToSceneUI=function(e){this.mOwner&&e&&this.scene.layerManager.addToLayer("sceneUILayer",e)},ElementTopDisplay.prototype.loadAtals=function(e,i,n,a){var o=this;this.scene.textures.exists(e)?!this.isDispose&&a&&a.call(n):(this.scene.load.atlas(e,s.Url.getUIRes(this.mDpr,e),s.Url.getUIRes(this.mDpr,i)),this.scene.load.once(Phaser.Loader.Events.COMPLETE,(function(){!o.isDispose&&a&&a.call(n)}),this),this.scene.load.start())},ElementTopDisplay.prototype.showStateHandler=function(e){this.showUIState(e)},ElementTopDisplay}(h.TopDisplay)},function(e,i,n){"use strict";n.d(i,"a",(function(){return f}));var a,s=n(4),o=n(0),h=n(2),l=n(1012),c=n(890),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},f=function(e){function DragonbonesDisplay(i,n,a,s,o){var h=e.call(this,i,a)||this;return h.render=n,h.uuid=s,h.mNodeType=void 0,h.mSortX=0,h.mSortY=0,h.mName=void 0,h.mNodeType=o,h.mLoadQueue=new l.a(i),h.mLoadQueue.on("QueueProgress",h.fileComplete,h),h.mLoadQueue.on("QueueError",h.fileError,h),h.mHasInteractive=!0,h}return m(DragonbonesDisplay,e),DragonbonesDisplay.prototype.load=function(i,n,a){return void 0===a&&(a=!0),(n=n||h.DisplayField.STAGE)!==h.DisplayField.STAGE?Promise.reject("field is not STAGE"):e.prototype.load.call(this,i,n,a)},Object.defineProperty(DragonbonesDisplay.prototype,"hasInteractive",{get:function(){return this.mHasInteractive},set:function(e){this.mHasInteractive=e},enumerable:!1,configurable:!0}),DragonbonesDisplay.prototype.startLoad=function(){var e=this;return new Promise((function(i,n){e.mLoadQueue&&!e.mCreated?(e.mLoadQueue.once("QueueComplete",(function(){i(null)}),e),e.mLoadQueue.startLoad()):i(null)}))},DragonbonesDisplay.prototype.destroy=function(){this.mLoadQueue&&(this.mLoadQueue.off("QueueProgress",this.fileComplete,this),this.mLoadQueue.off("QueueError",this.fileError,this),this.mLoadQueue.destroy()),this.mStartFireTween&&(this.mStartFireTween.stop(),this.mStartFireTween=void 0),this.mReferenceArea&&(this.mReferenceArea.destroy(),this.mReferenceArea=void 0),this.mTopDisplay&&this.mTopDisplay.destroy(),e.prototype.destroy.call(this)},Object.defineProperty(DragonbonesDisplay.prototype,"id",{get:function(){return this.mID},enumerable:!1,configurable:!0}),Object.defineProperty(DragonbonesDisplay.prototype,"nodeType",{get:function(){return this.mNodeType},enumerable:!1,configurable:!0}),Object.defineProperty(DragonbonesDisplay.prototype,"titleMask",{get:function(){return this.mTitleMask},set:function(e){this.mTitleMask=e},enumerable:!1,configurable:!0}),DragonbonesDisplay.prototype.checkCollision=function(e){var i=e.currentCollisionArea;return!!(i&&i.length>0)},DragonbonesDisplay.prototype.showRefernceArea=function(e,i){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(a){switch(a.label){case 0:return!e||e.length<=0||!i?[2]:(this.mReferenceArea||(this.mReferenceArea=new s.ReferenceArea(this.scene)),[4,this.render.mainPeer.getCurrentRoomSize()]);case 1:return n=a.sent(),this.mReferenceArea.draw(e,i,n.tileWidth/this.render.scaleRatio,n.tileHeight/this.render.scaleRatio),this.addAt(this.mReferenceArea,0),[2]}}))}))},DragonbonesDisplay.prototype.hideRefernceArea=function(){this.mReferenceArea&&(this.mReferenceArea.destroy(),this.mReferenceArea=void 0)},DragonbonesDisplay.prototype.showGrids=function(){},DragonbonesDisplay.prototype.hideGrids=function(){},DragonbonesDisplay.prototype.updateTopDisplay=function(){this.mTopDisplay&&this.mTopDisplay.update()},DragonbonesDisplay.prototype.setVisible=function(i){return this.mTopDisplay&&(i?this.mTopDisplay.showNickname(this.mName):this.mTopDisplay.hideNickname()),e.prototype.setVisible.call(this,i)},DragonbonesDisplay.prototype.showNickname=function(e){void 0===e&&(e=this.mName),this.mName=e,this.checkShowNickname()&&(this.mTopDisplay||(this.mTopDisplay=new c.a(this.scene,this,this.render.scaleRatio)),this.mTopDisplay.showNickname(e))},DragonbonesDisplay.prototype.showTopDisplay=function(e){if(!e)return this.mTopDisplay&&this.mTopDisplay.destroy(),void(this.mTopDisplay=void 0);this.mTopDisplay||(this.mTopDisplay=new c.a(this.scene,this,this.render.scaleRatio)),this.mTopDisplay.loadState(e)},DragonbonesDisplay.prototype.showBubble=function(e,i){this.mTopDisplay||(this.mTopDisplay=new c.a(this.scene,this,this.render.scaleRatio)),this.mTopDisplay.showBubble(e,i)},DragonbonesDisplay.prototype.clearBubble=function(){this.mTopDisplay&&this.mTopDisplay.clearBubble()},DragonbonesDisplay.prototype.displayCreated=function(){e.prototype.displayCreated.call(this),this.mTopDisplay&&this.mTopDisplay.updateOffset(),this.render.mainPeer.elementDisplayReady(this.id),this.render.renderEmitter("dragonBones_initialized")},Object.defineProperty(DragonbonesDisplay.prototype,"projectionSize",{get:function(){return this.mProjectionSize||(this.mProjectionSize={offset:{x:0,y:0},width:0,height:0}),this.mProjectionSize},enumerable:!1,configurable:!0}),DragonbonesDisplay.prototype.play=function(i){e.prototype.play.call(this,i),this.fetchProjection()},DragonbonesDisplay.prototype.startFireMove=function(e){var i=this;this.mStartFireTween=this.scene.tweens.add({targets:this,duration:5e3,ease:"Linear",props:{x:e.x,y:e.y},onComplete:function(){i.mStartFireTween&&i.mStartFireTween.stop(),i.mStartFireTween&&(i.mStartFireTween=void 0)},onCompleteParams:[this]})},DragonbonesDisplay.prototype.doMove=function(e){},DragonbonesDisplay.prototype.update=function(){e.prototype.update.call(this),this.updateTopDisplay()},DragonbonesDisplay.prototype.addEffect=function(e){if(!e)return o.Logger.getInstance().error("Failed to add effect, display does not exist");var i=e.getSprite(h.DisplayField.BACKEND);i&&this.addAt(i,h.DisplayField.BACKEND);var n=e.getSprite(h.DisplayField.FRONTEND);n&&this.addAt(n,h.DisplayField.FRONTEND)},DragonbonesDisplay.prototype.removeEffect=function(e){if(!e)return o.Logger.getInstance().error("Failed to remove effect, display does not exist");var i=e.getSprite(h.DisplayField.BACKEND);i&&this.remove(i,!0);var n=e.getSprite(h.DisplayField.FRONTEND);n&&this.remove(n,!0)},DragonbonesDisplay.prototype.mount=function(e,i){this.mMountContainer||(this.mMountContainer=this.scene.make.container(void 0,!1)),e.x=this.topPoint.x,e.y=this.topPoint.y,this.mMountContainer.parentContainer||this.add(this.mMountContainer),this.mMountContainer.addAt(e,i),this.mMountList.set(i,e),e.setRootMount(this)},DragonbonesDisplay.prototype.unmount=function(e){if(this.mMountContainer){e.setRootMount(void 0),e.visible=!0;var i=-1;this.mMountList.forEach((function(n,a){n===e&&(i=a)})),i>=0&&this.mMountList.delete(i),this.mMountContainer.remove(e,!1),this.render.displayManager.addToLayer(h.LayerName.SURFACE,e)}},Object.defineProperty(DragonbonesDisplay.prototype,"sortX",{get:function(){return this.mSortX},enumerable:!1,configurable:!0}),Object.defineProperty(DragonbonesDisplay.prototype,"sortY",{get:function(){return this.mSortY},enumerable:!1,configurable:!0}),DragonbonesDisplay.prototype.fetchProjection=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(i){switch(i.label){case 0:return this.id?(e=this,[4,this.render.mainPeer.fetchProjectionSize(this.id)]):[2];case 1:return e.mProjectionSize=i.sent(),[2]}}))}))},DragonbonesDisplay.prototype.fileComplete=function(e,i,n){i===this.resourceName&&"image"===n&&this.createArmatureDisplay()},DragonbonesDisplay.prototype.fileError=function(e){e===this.resourceName&&this.displayCreated()},DragonbonesDisplay.prototype.onArmatureLoopComplete=function(i){e.prototype.onArmatureLoopComplete.call(this,i),this.mArmatureDisplay&&this.mAnimation&&this.render.mainPeer.completeDragonBonesAnimationQueue(this.id)},DragonbonesDisplay.prototype.checkShowNickname=function(){return(this.mTitleMask&h.TitleMask.TQ_NickName)>0},Object.defineProperty(DragonbonesDisplay.prototype,"nickname",{get:function(){return this.mName},enumerable:!1,configurable:!0}),DragonbonesDisplay}(s.BaseDragonbonesDisplay)},function(e,i,n){"use strict";n.d(i,"a",(function(){return m}));var a,s=n(4),o=n(2),h=n(0),l=n(890),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},m=function(e){function FramesDisplay(i,n,a,s){var o=e.call(this,i,a,s)||this;return o.render=n,o.mID=void 0,o.mName=void 0,o.mID=a,o}return c(FramesDisplay,e),FramesDisplay.prototype.startLoad=function(){return this.scene.load.start(),Promise.resolve(null)},FramesDisplay.prototype.destroy=function(){this.mReferenceArea&&(this.mReferenceArea.destroy(),this.mReferenceArea=void 0),this.mTopDisplay&&this.mTopDisplay.destroy(),this.mStartFireTween&&(this.mStartFireTween.stop(),this.mStartFireTween=void 0),this.mDebugPoint&&(this.mDebugPoint.destroy(),this.mDebugPoint=void 0),this.mGrids&&(this.mGrids.destroy(),this.mGrids=void 0),e.prototype.destroy.call(this)},Object.defineProperty(FramesDisplay.prototype,"titleMask",{get:function(){return this.mTitleMask},set:function(e){this.mTitleMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(FramesDisplay.prototype,"hasInteractive",{get:function(){return this.mHasInteractive},set:function(e){this.mHasInteractive=e},enumerable:!1,configurable:!0}),FramesDisplay.prototype.update=function(){e.prototype.update.call(this),this.updateTopDisplay()},FramesDisplay.prototype.checkCollision=function(e){var i=e.currentCollisionArea;return!!(i&&i.length>0)},FramesDisplay.prototype.showRefernceArea=function(e,i,n){return __awaiter(this,void 0,void 0,(function(){var a,o;return __generator(this,(function(h){return!e||e.length<=0||!i||(a=this.render.roomSize,this.mReferenceArea||(this.mReferenceArea=new s.ReferenceArea(this.scene)),o=e,void 0!==n&&n.length>0&&(o=n),this.mReferenceArea.draw(o,i,a.tileWidth/this.render.scaleRatio,a.tileHeight/this.render.scaleRatio),this.addAt(this.mReferenceArea,0)),[2]}))}))},FramesDisplay.prototype.hideRefernceArea=function(){this.mReferenceArea&&(this.mReferenceArea.destroy(),this.mReferenceArea=void 0)},FramesDisplay.prototype.showGrids=function(){this.mGrids&&(this.mGrids.destroy(),this.mGrids=void 0)},FramesDisplay.prototype.hideGrids=function(){this.mGrids&&(this.mGrids.destroy(),this.mGrids=void 0)},FramesDisplay.prototype.updateTopDisplay=function(){this.mTopDisplay&&this.mTopDisplay.update()},FramesDisplay.prototype.showNickname=function(e){void 0===e&&(e=this.mName),this.mName=e,this.mTopDisplay||(this.mTopDisplay=new l.a(this.scene,this,this.render.scaleRatio)),this.checkShowNickname()&&this.mTopDisplay.showNickname(e)},FramesDisplay.prototype.showTopDisplay=function(e){if(!e)return this.mTopDisplay&&this.mTopDisplay.destroy(),void(this.mTopDisplay=void 0);this.mTopDisplay||(this.mTopDisplay=new l.a(this.scene,this,this.render.scaleRatio)),this.mTopDisplay.loadState(e)},FramesDisplay.prototype.showBubble=function(e,i){this.mTopDisplay||(this.mTopDisplay=new l.a(this.scene,this,this.render.scaleRatio)),this.mTopDisplay.showBubble(e,i)},FramesDisplay.prototype.clearBubble=function(){this.mTopDisplay&&this.mTopDisplay.clearBubble()},FramesDisplay.prototype.displayCreated=function(){e.prototype.displayCreated.call(this),this.mTopDisplay&&this.mTopDisplay.updateOffset(),this.render.mainPeer.elementDisplayReady(this.id)},FramesDisplay.prototype.play=function(i){e.prototype.play.call(this,i),this.fetchProjection()},FramesDisplay.prototype.doMove=function(e){},FramesDisplay.prototype.startFireMove=function(e){var i=this;h.Logger.getInstance().log("startFireMove ===>",e,this.x,this.y),this.mStartFireTween=this.scene.tweens.add({targets:this,duration:900,ease:"Expo.Out",props:{x:e.x,y:e.y},onComplete:function(){i.mStartFireTween&&i.mStartFireTween.stop(),i.mStartFireTween&&(i.mStartFireTween=void 0)},onCompleteParams:[this]})},FramesDisplay.prototype.setPosition=function(i,n,a,s){return e.prototype.setPosition.call(this,i,n,a,s),this.updateTopDisplay(),this},FramesDisplay.prototype.addEffect=function(e){if(!e)return h.Logger.getInstance().error("Failed to add effect, display does not exist");var i=e.getSprite(o.DisplayField.BACKEND);i&&this.addAt(i,o.DisplayField.BACKEND);var n=e.getSprite(o.DisplayField.FRONTEND);n&&this.addAt(n,o.DisplayField.FRONTEND)},FramesDisplay.prototype.removeEffect=function(e){if(!e)return h.Logger.getInstance().error("Failed to remove effect, display does not exist");var i=e.getSprite(o.DisplayField.BACKEND);i&&this.remove(i,!0);var n=e.getSprite(o.DisplayField.FRONTEND);n&&this.remove(n,!0)},FramesDisplay.prototype.unmount=function(i){this.mMountContainer&&(e.prototype.unmount.call(this,i),this.render.displayManager.addToLayer(o.LayerName.SURFACE,i))},FramesDisplay.prototype.scaleTween=function(){var e=this;if(!(this.mMountContainer&&this.mMountContainer.list.length>0||this.mScaleTween)){var i=this.scale;this.mScaleTween=this.scene.tweens.add({targets:this,duration:100,scale:1.25*i,yoyo:!0,repeat:0,onComplete:function(){e.scale=1,e.mScaleTween&&(e.mScaleTween=void 0)}})}},FramesDisplay.prototype.fetchProjection=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(i){switch(i.label){case 0:return this.id?(e=this,[4,this.render.mainPeer.fetchProjectionSize(this.id)]):[2];case 1:return e.mProjectionSize=i.sent(),this.updateSort(),[2]}}))}))},FramesDisplay.prototype.completeFrameAnimationQueue=function(){e.prototype.completeFrameAnimationQueue.call(this),this.render.mainPeer.completeFrameAnimationQueue(this.id)},FramesDisplay.prototype.checkShowNickname=function(){return(this.mTitleMask&o.TitleMask.TQ_NickName)>0},FramesDisplay.prototype.onAnimationUpdateHandler=function(e,i){var n=this;if(this.mMountContainer&&this.mCurAnimation){var a=this.mCurAnimation.mountLayer.frameVisible;if(a){var s=i.index-1;s>a.length||this.mMountList.forEach((function(e,i){e.visible=n.getMaskValue(a[s],i)}))}}},FramesDisplay.prototype.getMaskValue=function(e,i){return(e>>i)%2==1},Object.defineProperty(FramesDisplay.prototype,"nickname",{get:function(){return this.mName},enumerable:!1,configurable:!0}),FramesDisplay}(s.BaseFramesDisplay)},function(e,i,n){"use strict";n(1022),n(1023),n(1024),n(1025),n(1026);var a=n(798);n.d(i,"a",(function(){return a.a}));var s=n(799);n.d(i,"b",(function(){return s.a}));n(819),n(1027);var o=n(1028);n.d(i,"c",(function(){return o.a}));n(1029)},function(e,i,n){"use strict";n.r(i),n.d(i,"DynamicSprite",(function(){return o}));var a,s=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),o=function(e){function DynamicSprite(i,n,a){var s=e.call(this,i,n,a,void 0)||this;return i.sys.updateList.add(s),s}return s(DynamicSprite,e),DynamicSprite.prototype.load=function(e,i,n,a,s){this.mLoadCompleteCallbak=a,this.mLoadErrorCallback=s,this.mLoadContext=n,this.mUrl=e+i,this.scene.cache.obj.get(this.mUrl)?this.onLoadComplete():(this.scene.load.atlas(this.mUrl,e,i),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.onLoadComplete,this),this.scene.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR,this.onLoadError,this),this.scene.load.start())},DynamicSprite.prototype.destroy=function(i){this.scene.sys.updateList.remove(this),e.prototype.destroy.call(this,i)},DynamicSprite.prototype.onLoadComplete=function(){if(this.mLoadCompleteCallbak){var e=this.mLoadCompleteCallbak;this.mLoadCompleteCallbak=null,e.call(this.mLoadContext),this.mLoadContext=null}this.scene.anims.create({key:this.mUrl,frames:this.scene.anims.generateFrameNames(this.mUrl),repeat:1}),this.play(this.mUrl)},DynamicSprite.prototype.onLoadError=function(e){if(this.mUrl===e.url&&this.mLoadErrorCallback){var i=this.mLoadErrorCallback;this.mLoadErrorCallback=null,i.call(this.mLoadContext),this.mLoadContext=null}},DynamicSprite}(Phaser.GameObjects.Sprite)},function(e,i,n){"use strict";n.r(i),n.d(i,"InputPanel",(function(){return h}));var a,s=n(788),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function InputPanel(i,n,a){var o=e.call(this)||this;o.render=n,o.scene=i;var h=i.cameras.main.width,l=i.cameras.main.height;return o.mBackground=i.add.graphics(),o.mBackground.fillStyle(0,.6),o.mBackground.fillRect(0,0,h,l).setInteractive(new Phaser.Geom.Rectangle(0,0,h,l),Phaser.Geom.Rectangle.Contains),o.mInput=new s.InputText(i,6*n.uiRatio,6*n.uiRatio,h-12*n.uiRatio,40*n.uiRatio,{fontSize:20*n.uiRatio+"px",color:"#0",text:a,backgroundColor:"#FFFFFF",borderColor:"#FF9900"}).setOrigin(0,0),o.mInput.node.addEventListener("keypress",(function(e){13===(e.keyCode||e.which)&&o.onCloseHandler()})),o.mInput.x=6*n.uiRatio,o.scene.input.on("pointerdown",o.onFoucesHandler,o),o.render.game.device.os.iOS?o.mInput.on("click",o.onFoucesHandler,o):o.mInput.on("focus",o.onFoucesHandler,o),o.mInput.setFocus(),o}return o(InputPanel,e),InputPanel.prototype.onCloseHandler=function(){this.emit("close",this.mInput.text),this.mBackground.destroy(),this.mInput.destroy(),this.destroy(),this.scene.input.off("pointerdown",this.onFoucesHandler,this),this.scene=void 0},InputPanel.prototype.onFoucesHandler=function(){this.mInput.node.focus()},InputPanel}(Phaser.Events.EventEmitter)},function(e,i,n){"use strict";n.r(i),n.d(i,"CheckboxGroup",(function(){return h}));var a,s=n(788),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function CheckboxGroup(){var i=e.call(this)||this;return i.mList=[],i}return o(CheckboxGroup,e),CheckboxGroup.prototype.appendItem=function(e){return this.mList.push(e),e.on(s.ClickEvent.Tap,this.onGameObjectUpHandler,this),this},CheckboxGroup.prototype.appendItemAll=function(e){this.mList=this.mList.concat(e);for(var i=0,n=e;i<n.length;i++){n[i].on(s.ClickEvent.Tap,this.onGameObjectUpHandler,this)}return this},CheckboxGroup.prototype.removeItem=function(e){return this.mList=this.mList.filter((function(i){return i!==e})),e.removeAllListeners(),this},CheckboxGroup.prototype.selectIndex=function(e){return e<0&&(e=0),e>=this.mList.length&&(e=this.mList.length-1),this.mList.length>0&&this.select(this.mList[e]),this},CheckboxGroup.prototype.select=function(e){this.mSelectedButton!==e&&(this.mSelectedButton&&(this.mSelectedButton.selected=!1),e.changeDown(),this.mSelectedButton=e,this.emit(s.ClickEvent.Selected,e))},CheckboxGroup.prototype.reset=function(){var e=this;this.mList&&this.mList.forEach((function(i){e.removeItem(i)}))},CheckboxGroup.prototype.destroy=function(){var i=this;this.mList&&this.mList.forEach((function(e){i.removeItem(e),e.destroy()})),e.prototype.destroy.call(this)},CheckboxGroup.prototype.onGameObjectUpHandler=function(e,i){this.select(i)},Object.defineProperty(CheckboxGroup.prototype,"selectedIndex",{get:function(){return this.mList.indexOf(this.mSelectedButton)},enumerable:!1,configurable:!0}),CheckboxGroup}(Phaser.Events.EventEmitter)},function(e,i,n){"use strict";n.r(i),n.d(i,"TextButton",(function(){return h}));var a,s=n(0),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function TextButton(i,n,a,o,h,l){void 0===a&&(a=1);var c=e.call(this,i,h,l)||this;return c.normalColor="#FFFFFF",c.changeColor="#0099cc",c.mText=c.scene.make.text({text:o,style:{fontSize:15*n,fontFamily:s.Font.DEFULT_FONT}},!1).setOrigin(.5,.5),c.add(c.mText),c}return o(TextButton,e),TextButton.prototype.setText=function(e){this.mText.text=e},TextButton.prototype.setFontSize=function(e){this.mText.setFontSize(e)},TextButton.prototype.setFontStyle=function(e){this.mText.setFontStyle(e)},TextButton.prototype.setStyle=function(e){this.mText.setStyle(e)},TextButton.prototype.setNormalColor=function(e){this.normalColor=e},TextButton.prototype.setChangeColor=function(e){this.changeColor=e},TextButton.prototype.changeDown=function(){this.mText.setFill(this.changeColor)},TextButton.prototype.changeNormal=function(){this.mText.setFill(this.normalColor)},TextButton.prototype.onPointerUpHandler=function(e){this.emit("click",e,this)},Object.defineProperty(TextButton.prototype,"text",{get:function(){return this.mText},enumerable:!1,configurable:!0}),TextButton}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"LabelInput",(function(){return c}));var a,s=n(788),o=n(0),h=n(821),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function LabelInput(i,n){var a=e.call(this,i)||this;a.mAutoBlur=!0;var l={fontFamily:o.Font.DEFULT_FONT},c=n.width||100,m=n.height||100;a.mPlaceholder=n.placeholder,a.mLabel=a.scene.make.text({text:a.mPlaceholder,style:Object.assign(l,n)},!1).setInteractive(new Phaser.Geom.Rectangle(.5*-c,.5*-m,c,m),Phaser.Geom.Rectangle.Contains),a.mOriginX=a.mLabel.originX,a.mOriginY=a.mLabel.originY;new h.Tap(a.mLabel);return a.mLabel.on(s.ClickEvent.Tap,a.onShowInputHandler,a),a.add(a.mLabel),a.setSize(c,m),a.mInputConfig=n,a}return l(LabelInput,e),LabelInput.prototype.setText=function(e){return this.mLabel.setText(this.mPlaceholder?e||this.mPlaceholder:e),this.mInputText&&(this.mInputText.text=e),this},LabelInput.prototype.setPlaceholder=function(e){return this.mPlaceholder=e||this.mPlaceholder,this.mInputConfig.placeholder=this.mPlaceholder,this.mLabel.setText(this.mPlaceholder),this},LabelInput.prototype.setOrigin=function(e,i){return void 0===i&&(i=e),this.mLabel.setOrigin(e,i),this.mOriginX=e,this.mOriginY=i,this.mInputText&&this.mInputText.setOrigin(e,i),this.mLabel.input.hitArea=new Phaser.Geom.Rectangle(-this.width*e,-this.height*i,this.width,this.height),this},LabelInput.prototype.createBackground=function(e,i){this.mBackground||(this.mBackground=this.scene.make.graphics(void 0,!1)),this.mBackground.clear(),this.mBackground.fillStyle(16777215),this.mBackground.fillRoundedRect(-e+this.width*this.mLabel.originX,-e+this.height*this.mLabel.originY,this.width+2*e,this.height+2*e,i),this.addAt(this.mBackground,0)},LabelInput.prototype.setSize=function(i,n){return e.prototype.setSize.call(this,i,n),this.mLabel.input.hitArea=new Phaser.Geom.Rectangle(-this.width*this.mLabel.originX,-this.height*this.mLabel.originX,this.width,this.height),this},LabelInput.prototype.setAutoBlur=function(e){return this.mAutoBlur=e,this},LabelInput.prototype.setBlur=function(){this.onShowLabel()},LabelInput.prototype.destroy=function(){this.mLabel.destroy(),this.destroyInput(),e.prototype.destroy.call(this)},LabelInput.prototype.createInputText=function(){var e=this;this.mInputText||(this.mInputText=new s.InputText(this.scene,Object.assign({},this.mInputConfig)).setOrigin(this.mOriginX,this.mOriginY),this.mInputText.on("textchange",this.onTextChangeHandler,this),this.mInputText.on("blur",this.onTextBlurHandler,this),this.mInputText.on("focus",this.onTextFocusHandler,this),this.mInputText.x=this.mLabel.x,this.mInputText.y=this.mLabel.y,this.mInputText.node.addEventListener("keypress",(function(i){13===(i.keyCode||i.which)&&(e.emit("enter",e.mInputText.text),e.mAutoBlur&&e.onShowLabel())})))},LabelInput.prototype.onShowInputHandler=function(){this.createInputText(),this.remove(this.mLabel),this.add(this.mInputText),this.mInputConfig.placeholder!==this.mLabel.text&&this.mInputText.setText(this.mLabel.text),this.mInputText.setFocus()},LabelInput.prototype.onPointerDownHandler=function(){},LabelInput.prototype.onShowLabel=function(){this.mInputText&&(!this.mInputText.text&&this.mInputConfig.placeholder?this.mLabel.setText(this.mInputConfig.placeholder):this.mLabel.setText(this.mInputText.text),this.destroyInput()),this.add(this.mLabel)},LabelInput.prototype.destroyInput=function(){this.mInputText&&(this.mInputText.off("textchange",this.onTextChangeHandler,this),this.mInputText.off("blur",this.onTextBlurHandler,this),this.mInputText.off("focus",this.onTextFocusHandler,this),this.mInputText.destroy(),this.mInputText=void 0)},LabelInput.prototype.onTextChangeHandler=function(e,i){this.emit("textchange")},LabelInput.prototype.onTextBlurHandler=function(){this.emit("blur")},LabelInput.prototype.onTextFocusHandler=function(e){this.emit("focus")},LabelInput.prototype.onTapHandler=function(){o.Logger.getInstance().log("tap ================")},Object.defineProperty(LabelInput.prototype,"object",{get:function(){return this.mInputText||this.mLabel},enumerable:!1,configurable:!0}),Object.defineProperty(LabelInput.prototype,"text",{get:function(){return this.mInputText?this.mInputText.text:this.mLabel.text},enumerable:!1,configurable:!0}),LabelInput}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"BaseBatchPanel",(function(){return c}));var a,s=n(788),o=n(798),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function BaseBatchPanel(i,n){var a=e.call(this,i,n)||this;return a.mTweening=!1,a.mWidth=0,a.mHeight=0,a.mReloadTimes=0,a.key="",a.uiLayer=o.a.LAYER_UI,a.exported=!1,a.exportListeners=[],a.mSynchronize=!1,i.sys||h.Logger.getInstance().error("no scene system"),a.mScene=i,a.mWorld=n,a.mInitialized=!1,a.render=n,n&&(a.dpr=Math.round(n.uiRatio||h.UiUtils.baseDpr),a.scale=a.mWorld.uiScale),a}return l(BaseBatchPanel,e),Object.defineProperty(BaseBatchPanel.prototype,"initialized",{get:function(){return this.mInitialized},enumerable:!1,configurable:!0}),BaseBatchPanel.prototype.resize=function(i,n){e.prototype.resize.call(this,i,n),this.setSize(i,n)},BaseBatchPanel.prototype.startLoad=function(){this.scene&&(this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE,this.onFileKeyComplete,this),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.loadComplete,this),this.scene.load.start())},BaseBatchPanel.prototype.show=function(i){this.mSynchronize=!1,e.prototype.show.call(this,i),this.mInitialized&&(this.mSynchronize||this.onShow())},BaseBatchPanel.prototype.hide=function(){this.onHide(),this.soundGroup&&this.soundGroup.close&&this.playSound(this.soundGroup.close),!this.mTweening&&this.mTweenBoo?this.showTween(!1):this.destroy()},BaseBatchPanel.prototype.destroy=function(){this.render&&this.render.hasOwnProperty(this.key)&&delete this.render[this.key],this.exportListeners.length=0,e.prototype.destroy.call(this)},BaseBatchPanel.prototype.addExportListener=function(e){this.exported?e():this.exportListeners.push(e)},BaseBatchPanel.prototype.preload=function(){var e=this;if(this.mPreLoad=!0,this.scene){var i=0;this.mResources&&this.mResources.forEach((function(n,a){e.cacheExists(n.type,a)||(i++,e.addResources(a,n))}),this),i>0?this.startLoad():(this.mResources&&this.mResources.clear(),this.mPreLoad=!1,this.init(),this.mSynchronize=!0)}},BaseBatchPanel.prototype.init=function(){this.mScene&&this.mScene.sys&&this.mScene.sys.displayList&&(this.mScene.layerManager.addToLayer(this.uiLayer,this),e.prototype.init.call(this),this.setLinear(this.key),h.Logger.getInstance().debug("init========",this.key),this.__exportProperty(),this.onInitialized())},BaseBatchPanel.prototype.setLinear=function(e){if(e){var i=this.scene.textures.getFrame(e,"__BASE");i&&i.texture.setFilter(Phaser.Textures.FilterMode.LINEAR)}},BaseBatchPanel.prototype.addResources=function(i,n){n.type&&this.scene.load[n.type]&&this.scene.load[n.type](i,h.Url.getUIRes(n.dpr,n.texture),n.data?h.Url.getUIRes(n.dpr,n.data):void 0),e.prototype.addResources.call(this,i,n)},BaseBatchPanel.prototype.cacheExists=function(e,i){return"image"===e||"atlas"===e||"texture"===e?this.scene.textures.exists(i):("json"===e||"video"===e)&&this.scene.cache[e].exists(i)},Object.defineProperty(BaseBatchPanel.prototype,"scaleWidth",{get:function(){return this.scene.cameras.main.width/this.scale},enumerable:!1,configurable:!0}),Object.defineProperty(BaseBatchPanel.prototype,"scaleHeight",{get:function(){return this.scene.cameras.main.height/this.scale},enumerable:!1,configurable:!0}),Object.defineProperty(BaseBatchPanel.prototype,"cameraWidth",{get:function(){return this.scene.cameras.main.width},enumerable:!1,configurable:!0}),Object.defineProperty(BaseBatchPanel.prototype,"cameraHeight",{get:function(){return this.scene.cameras.main.height},enumerable:!1,configurable:!0}),BaseBatchPanel.prototype.__exportProperty=function(){if(this.render)return this.render.exportProperty(this,this.render,this.key).onceReady(this.exportComplete.bind(this))},BaseBatchPanel.prototype.exportComplete=function(){this.exported=!0;for(var e=0,i=this.exportListeners;e<i.length;e++){(0,i[e])()}this.exportListeners.length=0},BaseBatchPanel.prototype.onShow=function(){},BaseBatchPanel.prototype.onHide=function(){this.render.uiManager.hideBatchPanel(this)},BaseBatchPanel.prototype.onInitialized=function(){},BaseBatchPanel}(s.Panel)},function(e,i,n){"use strict";n.r(i),n.d(i,"NinePatchButton",(function(){return h}));var a,s=n(788),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function NinePatchButton(i,n,a,o,h,l,c,m,f,g){var _=e.call(this,i,n,a)||this;return _.mScene=i,_.mKey=l,_.mFrame=c||"__BASE",_.initFrame(),_.setSize(o,h),_.mNingBg=new s.NineSlicePatch(_.scene,0,0,o,h,l,_.mFrame_nrmal,f),_.add(_.mNingBg),g&&(_.btnData=g),_.mLabel=_.scene.make.text(void 0,!1).setOrigin(.5,.5).setSize(_.width,_.height).setAlign("center").setText(m),_.add(_.mLabel),_.setInteractive(new Phaser.Geom.Rectangle(0,0,o,h),Phaser.Geom.Rectangle.Contains),_.on("pointerdown",_.onPointerDown,_),_.on("pointerup",_.onPointerUp,_),_}return o(NinePatchButton,e),Object.defineProperty(NinePatchButton.prototype,"enable",{set:function(e){e?(this.mNingBg.clearTint(),this.mLabel.clearTint(),this.setInteractive()):(this.mNingBg.setTintFill(6710886),this.mLabel.setTintFill(7829367),this.removeInteractive())},enumerable:!1,configurable:!0}),NinePatchButton.prototype.getBtnData=function(){return this.btnData},NinePatchButton.prototype.setText=function(e){this.mLabel.setText(e)},NinePatchButton.prototype.getText=function(){return this.mLabel.text},NinePatchButton.prototype.setTextStyle=function(e){this.mLabel.setStyle(e)},NinePatchButton.prototype.setFontStyle=function(e){this.mLabel.setFontStyle(e)},NinePatchButton.prototype.setTextOffset=function(e,i){this.mLabel.setPosition(e,i)},NinePatchButton.prototype.setFrame=function(e){return this.mNingBg.setFrame(String(e)),this},NinePatchButton.prototype.destroy=function(i){this.mLabel&&this.mLabel.destroy(),e.prototype.destroy.call(this,i)},NinePatchButton.prototype.setFrameNormal=function(e,i,n){return this.mFrame_nrmal=e,this.mFrame_down=i||e,this.mFrame_over=n||e,this.changeNormal(),this},NinePatchButton.prototype.changeNormal=function(){this.setFrame(this.mFrame_nrmal)},NinePatchButton.prototype.changeDown=function(){this.setFrame(this.mFrame_down)},NinePatchButton.prototype.changeOver=function(){this.setFrame(this.mFrame_over)},NinePatchButton.prototype.isExists=function(e){var i=this.scene.textures.get(this.mKey);return!(!i||!i.has(e))},NinePatchButton.prototype.onPointerDown=function(e){this.changeDown()},NinePatchButton.prototype.onPointerUp=function(e){this.changeNormal(),this.emit("click",e,this)},Object.defineProperty(NinePatchButton.prototype,"label",{get:function(){return this.mLabel},enumerable:!1,configurable:!0}),NinePatchButton.prototype.scaleHandler=function(){this.mScene.tweens.add({targets:this,duration:50,ease:"Linear",props:{scaleX:{value:.5},scaleY:{value:.5}},yoyo:!0,repeat:0}),this.scaleX=this.scaleY=1},NinePatchButton.prototype.initFrame=function(){var e=this.mFrame?this.mFrame:this.mKey;this.mFrame_nrmal=e+"_normal";var i=e+"_down";this.isExists(i)||(i=e+"_normal"),this.mFrame_down=i;var n=e+"_over";this.isExists(n)||(n=e+"_normal"),this.mFrame_over=n},NinePatchButton}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"AlertView",(function(){return f})),n.d(i,"Buttons",(function(){return s}));var a,s,o=n(788),h=n(2),l=n(0),c=n(899),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function AlertView(i,n){var a=e.call(this,i,n.render)||this;return a.uiManager=n,a.key=h.ModuleName.ALERTVIEW_NAME,a.disInteractive(),a}return m(AlertView,e),AlertView.prototype.show=function(i){if(this.mShowData=i,e.prototype.show.call(this,i),this.mInitialized){var n=i.ox,a=i.oy;this.x=n||this.scene.cameras.main.width/2,this.y=a||this.scene.cameras.main.height/2,this.mBackGround.clear(),this.mBackGround.fillStyle(16777215,0),this.mBackGround.fillRect(-this.x,-this.y,this.cameraWidth,this.cameraHeight),this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(-this.x,-this.y,this.cameraWidth,this.cameraHeight),Phaser.Geom.Rectangle.Contains),this.mContent.setText(i.text),i.title&&this.mTitleLabel.setText(i.title);var o=i.btns;o===s.Cancel?(this.remove(this.mOkBtn),this.mCancelBtn.x=0):o===s.Ok&&(this.remove(this.mCancelBtn),this.mOkBtn.x=0)}},AlertView.prototype.preload=function(){this.addAtlas(this.key,"pica_alert/pica_alert.png","pica_alert/pica_alert.json"),e.prototype.preload.call(this)},AlertView.prototype.setOKText=function(e){return this.mOkText=e,this.mOkBtn&&this.mOkBtn.setText(e),this},AlertView.prototype.init=function(){var i=this.mWorld.uiScale||l.UiUtils.baseScale;this.mBackGround=this.scene.make.graphics(void 0,!1),this.add(this.mBackGround);var n=this.scene.make.image({key:this.key,frame:"bg.png"},!1);n.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var a=this.scene.make.image({key:this.key,frame:"title.png"},!1);a.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),a.y=-n.height/2,this.mTitleLabel=this.scene.make.text({text:l.i18n.t("common.tips"),style:{fontFamily:l.Font.DEFULT_FONT,fontSize:12*this.dpr*i,color:"#905B06"}},!1).setOrigin(.5),this.mTitleLabel.y=a.y,this.mContent=new o.BBCodeText(this.scene,0,-11*this.dpr,"",{fontSize:12*this.dpr*i+"px",fontFamily:l.Font.DEFULT_FONT,color:"#0",wrap:{mode:"char",width:218*this.dpr}}),this.mContent.setOrigin(.5,.5),this.mOkBtn=new o.Button(this.scene,this.key,"yellow_btn.png",void 0,this.mOkText||l.i18n.t("common.confirm")),this.mOkBtn.setTextStyle({color:"#905B06",fontFamily:l.Font.DEFULT_FONT,fontSize:13*this.dpr*i}),this.mOkBtn.x=(n.width-this.mOkBtn.displayWidth)/2-38*this.dpr,this.mOkBtn.y=(n.height-this.mOkBtn.displayHeight)/2-16*this.dpr,this.mOkBtn.on(o.ClickEvent.Tap,this.onOkHandler,this),this.mCancelBtn=new o.Button(this.scene,this.key,"red_btn.png",void 0,l.i18n.t("common.cancel")),this.mCancelBtn.setTextStyle({fontFamily:l.Font.DEFULT_FONT,fontSize:13*this.dpr*i}),this.mCancelBtn.x=-(n.width-this.mCancelBtn.displayWidth)/2+38*this.dpr,this.mCancelBtn.y=this.mOkBtn.y,this.mCancelBtn.on(o.ClickEvent.Tap,this.onCancelHandler,this),this.add([n,a,this.mTitleLabel,this.mTitleLabel,this.mContent,this.mOkBtn,this.mCancelBtn]),e.prototype.init.call(this),this.mScene.layerManager.addToLayer(this.uiLayer,this)},AlertView.prototype.onOkHandler=function(){if(this.mShowData){var e=this.mShowData.callback;e&&e.call(this.mShowData.content),this.closePanel()}},AlertView.prototype.onCancelHandler=function(){var e=this.mShowData.cancelback;e&&e.call(this.mShowData.content),this.closePanel()},AlertView.prototype.closePanel=function(){this.uiManager.hideBatchPanel(this),this.parentContainer&&this.parentContainer.remove(this),this.mShowData&&!1===this.mShowData.once||(this.destroy(),this.mShowData=void 0)},AlertView}(c.BaseBatchPanel);!function(e){e[e.Ok=0]="Ok",e[e.Cancel=1]="Cancel",e[e.OKAndCancel=2]="OKAndCancel"}(s||(s={}))},function(e,i,n){"use strict";n.r(i),n.d(i,"ItemInfoTips",(function(){return l}));var a,s=n(788),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function ItemInfoTips(i,n,a,s,o,h,l){var c=e.call(this,i)||this;return c.fullHide=!0,c.setSize(n,a),c.key=s,c.dpr=h,c.config=l||{left:15*c.dpr,top:15*c.dpr,right:15*c.dpr,bottom:15*c.dpr},c.listenType="pointerdown",c.create(o),c}return h(ItemInfoTips,e),ItemInfoTips.prototype.setListenType=function(e){this.listenType=e||"pointerdown"},ItemInfoTips.prototype.setInvalidArea=function(e){this.fullHide=!0,this.invalidArea=e},ItemInfoTips.prototype.setHandler=function(e){this.callback=e},Object.defineProperty(ItemInfoTips.prototype,"enableFullHide",{set:function(e){this.fullHide=e,this.invalidArea=void 0},enumerable:!1,configurable:!0}),ItemInfoTips.prototype.setVisible=function(i){return i?this.show():this.hide(),e.prototype.setVisible.call(this,i),this},ItemInfoTips.prototype.hide=function(){this.fullHide&&this.visible&&this.scene.input.off(this.listenType,this.onHideHandler,this),this.visible=!1,this.callback&&this.callback.run()},ItemInfoTips.prototype.show=function(){this.fullHide&&!this.visible&&this.scene.input.on(this.listenType,this.onHideHandler,this),this.visible=!0},ItemInfoTips.prototype.resize=function(e,i){this.tipsText.setWrapWidth(e);var n=this.tipsText.height+20*this.dpr;n<i&&(n=i),this.setSize(e,n),this.tipsbg.resize(e,n),this.tipsbg.y=.5*-n,this.tipsText.y=-n+10*this.dpr},ItemInfoTips.prototype.setText=function(e,i){void 0===i&&(i=.9),this.tipsText.text=e;var n=this.tipsText.height+20*this.dpr,a=this.tipsbg.width;this.setSize(a,n),this.tipsbg.resize(a,n),this.tipsbg.y=.5*-n,this.tipsText.y=-n+10*this.dpr},ItemInfoTips.prototype.setItemData=function(e){var i=this.getDesText(e);this.setText(i)},ItemInfoTips.prototype.setTipsPosition=function(e,i,n){void 0===n&&(n=0);for(var a=e.x,s=e.y,o=e;o.parentContainer!==i;)a+=o.parentContainer.x,s+=o.parentContainer.y,o=o.parentContainer;a-.5*this.width<.5*-i.width?this.x=.5*this.width-.5*i.width+20*this.dpr:a+.5*this.width>.5*i.width?this.x=.5*i.width-.5*this.width-20*this.dpr:this.x=a,this.y=s-.5*this.height+10*this.dpr+n},ItemInfoTips.prototype.create=function(e){var i=this.width,n=this.height,a=new s.NineSlicePatch(this.scene,0,0,i,n,this.key,e,this.config);a.setPosition(0,.5*-n),this.tipsbg=a;var h=new s.BBCodeText(this.scene,.5*-this.width+10*this.dpr,-n+60*this.dpr,"",{color:"#333333",fontSize:13*this.dpr,fontFamily:o.Font.DEFULT_FONT,wrap:{width:this.width-15*this.dpr,mode:"string"}}).setOrigin(0);h.setLineSpacing(2*this.dpr),this.tipsText=h,this.add([a,h])},ItemInfoTips.prototype.getDesText=function(e){var i,n;e||(e={sellingPrice:!0,tradable:!1});var a="[stroke=#2640CA][color=#2640CA][b]"+e.name+"[/b][/color][/stroke]\n";return a+=(null!==(i=e.source)&&void 0!==i?i:"")+"\n",a+=null!==(n=e.des)&&void 0!==n?n:""},ItemInfoTips.prototype.onHideHandler=function(e){this.checkPointerInBounds(e)||this.hide()},ItemInfoTips.prototype.checkPointerInBounds=function(e){return!!(e&&this.invalidArea&&e.x>this.invalidArea.left&&e.x<this.invalidArea.right&&e.y>this.invalidArea.top&&e.y<this.invalidArea.bottom)},ItemInfoTips}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"ButtonState",(function(){return s})),n.d(i,"ThreeSliceButton",(function(){return m}));var a,s,o=n(788),h=n(0),l=n(809),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)});!function(e){e.Normal="normal",e.Over="over",e.Select="select",e.Disable="disable"}(s||(s={}));var m=function(e){function ThreeSliceButton(i,n,a,s,o,l,c,m,f,g,_){var T=e.call(this,i)||this;return T.mDownTime=0,T.mPressDelay=1e3,T.mIsMove=!1,T.mTweening=!1,T.tweenScale=.9,T.mTweenBoo=!0,T.dpr=m||h.UiUtils.baseDpr,T.zoom=f||h.UiUtils.baseScale,T.soundGroup={up:{key:"click"}},void 0===g&&(g=!0),T.mTweenBoo=g,Object.assign(T.soundGroup,_),T.mKey=s,T.mFrame=o,T.mDownFrame=l,T.setSize(n,a),T.createBackground(),c&&(T.mText=T.scene.make.text({color:"#ffffff",fontSize:16*m},!1).setOrigin(.5,.5).setText(c),T.mBackground&&T.mText.setSize(T.mBackground.width,T.mBackground.height),T.add(T.mText)),T.setInteractive(),T.addListen(),T}return c(ThreeSliceButton,e),Object.defineProperty(ThreeSliceButton.prototype,"background",{get:function(){return this.mBackground},enumerable:!1,configurable:!0}),Object.defineProperty(ThreeSliceButton.prototype,"text",{get:function(){return this.mText},enumerable:!1,configurable:!0}),ThreeSliceButton.prototype.addListen=function(){this.removeListen(),this.on("pointerdown",this.onPointerDownHandler,this),this.on("pointerup",this.onPointerUpHandler,this),this.on("pointerout",this.onPointerOutHandler,this),this.on("pointermove",this.onPointerMoveHandler,this)},ThreeSliceButton.prototype.removeListen=function(){this.off("pointerdown",this.onPointerDownHandler,this),this.off("pointerup",this.onPointerUpHandler,this),this.off("pointerout",this.onPointerOutHandler,this),this.off("pointermove",this.onPointerMoveHandler,this)},ThreeSliceButton.prototype.setEnable=function(e,i){void 0===i&&(i=!0),e?(this.mBackground&&(this.mBackground.clearTint(),this.mText&&this.mText.clearTint()),this.setInteractive()):(this.mBackground&&i&&(this.mBackground.setTintFill(6710886),this.mText&&this.mText.setTintFill(7829367)),this.removeInteractive())},Object.defineProperty(ThreeSliceButton.prototype,"tweenEnable",{set:function(e){this.mTweenBoo=e},enumerable:!1,configurable:!0}),ThreeSliceButton.prototype.mute=function(e){this.silent=e},ThreeSliceButton.prototype.changeNormal=function(){this.setBgFrame(this.mFrame)},ThreeSliceButton.prototype.changeDown=function(){this.mDownFrame&&this.setBgFrame(this.mDownFrame)},ThreeSliceButton.prototype.setFrame=function(e){this.setBgFrame(e)},ThreeSliceButton.prototype.setText=function(e){this.mText&&this.mText.setText(e)},ThreeSliceButton.prototype.setTextStyle=function(e){this.mText&&this.mText.setStyle(e)},ThreeSliceButton.prototype.setFontStyle=function(e){this.mText&&this.mText.setFontStyle(e)},ThreeSliceButton.prototype.setTextOffset=function(e,i){this.mText&&this.mText.setPosition(e,i)},ThreeSliceButton.prototype.setTextColor=function(e){this.mText&&this.mText.setColor(e)},ThreeSliceButton.prototype.setFrameNormal=function(e,i){return this.mFrame=e,this.mDownFrame=i||e,this.changeNormal(),this},ThreeSliceButton.prototype.createBackground=function(){this.mFrame&&(this.mBackground=new l.ThreeSlicePath(this.scene,0,0,this.width,this.height,this.mKey,this.mFrame,this.dpr,this.zoom,4),this.add(this.mBackground))},ThreeSliceButton.prototype.setBgFrame=function(e){this.mBackground&&this.mBackground.setFrame(e)},ThreeSliceButton.prototype.buttonStateChange=function(e){switch(e){case s.Normal:this.changeNormal();break;case s.Over:break;case s.Select:this.changeDown();break;case s.Disable:}},ThreeSliceButton.prototype.onPointerMoveHandler=function(e){this.soundGroup&&this.soundGroup.move&&this.playSound(this.soundGroup.move),this.interactiveBoo&&(this.mIsMove=!0,this.emit(o.ClickEvent.Move))},ThreeSliceButton.prototype.onPointerUpHandler=function(e){this.interactiveBoo?this.mTweenBoo?this.tween(!1,this.pointerUp.bind(this,e)):this.pointerUp(e):this.soundGroup&&this.soundGroup.disabled&&this.playSound(this.soundGroup.disabled)},ThreeSliceButton.prototype.pointerUp=function(e){this.buttonStateChange(s.Normal);var i=this.checkPointerInBounds(this,e.worldX,e.worldY);this.emit(o.ClickEvent.Up,this),i&&this.mIsDown&&(this.soundGroup&&this.soundGroup.up&&this.playSound(this.soundGroup.up),this.emit(o.ClickEvent.Tap,e,this)),clearTimeout(this.mPressTime),this.mIsMove=!1,this.mIsDown=!1,this.mDownTime=0},ThreeSliceButton.prototype.onPointerOutHandler=function(e){this.mTweenBoo&&e.isDown&&this.tween(!1)},ThreeSliceButton.prototype.onPointerDownHandler=function(e){var i=this;this.mTweening||(this.interactiveBoo?(this.soundGroup&&this.soundGroup.down&&this.playSound(this.soundGroup.down),this.buttonStateChange(s.Select),this.mDownTime=Date.now(),this.mPressTime=setTimeout((function(){i.emit(o.ClickEvent.Hold,i)}),this.mPressDelay),this.mTweenBoo&&this.tween(!0),this.emit(o.ClickEvent.Down,this),this.mIsDown=!0):this.soundGroup&&this.soundGroup.disabled&&this.playSound(this.soundGroup.disabled))},ThreeSliceButton.prototype.checkPointerInBounds=function(e,i,n){this.mRectangle||(this.mRectangle=new Phaser.Geom.Rectangle(0,0,0,0));var a=this.zoom?this.zoom:1;this.mRectangle.left=-e.width/2,this.mRectangle.right=e.width/2,this.mRectangle.top=-e.height/2,this.mRectangle.bottom=e.height/2;var s=e.getWorldTransformMatrix(),o=(i-s.tx)/a,h=(n-s.ty)/a;return this.mRectangle.left<=o&&this.mRectangle.right>=o&&this.mRectangle.top<=h&&this.mRectangle.bottom>=h},ThreeSliceButton.prototype.tween=function(e,i){var n=this;this.mTweening=!0;var a=e?this.tweenScale:1;this.mTween&&(this.mTween.stop(),this.mTween.remove(),this.mTween=void 0),this.mTween=this.scene.tweens.add({targets:this.list,duration:45,ease:"Linear",props:{scaleX:{value:a},scaleY:{value:a}},onComplete:function(){n.tweenComplete(e),i&&i()},onCompleteParams:[this]})},ThreeSliceButton.prototype.tweenComplete=function(e){this.mTweening=!1,this.mTween&&(this.mTween.stop(),this.mTween.remove(),this.mTween=void 0)},ThreeSliceButton}(o.BaseUI)},function(e,i,n){"use strict";n.r(i),n.d(i,"TweenCompent",(function(){return a}));var a=function(){function TweenCompent(e,i,n){this.mTweening=!1,this.mScale=1,this.mPingpang=!1,this.mTempPing=!1,this.mScene=e,this.mTarget=i,this.mScale=n.scale||i.scale,this.mX=void 0===n.x?i.x:n.x,this.mY=void 0===n.y?i.y:n.y,this.mPingpang=n.pingpang||!1,this.mOnce=n.once||!1,this.tempData={scale:i.scale,x:i.x,y:i.y}}return TweenCompent.prototype.setObject=function(e){this.mTarget=e},TweenCompent.prototype.zoomIn=function(){this.mTempPing=!1,this.tween()},TweenCompent.prototype.zoomOut=function(e){this.mOnce=e||!1,this.mTempPing=!0,this.tween()},TweenCompent.prototype.tween=function(){var e=this;this.mTweening=!0,this.mTween&&(this.mTween.stop(),this.mTween.remove(),this.mTween=void 0);var i=this.mTempPing?this.tempData.scale:this.mScale,n=this.mTempPing?this.tempData.x:this.mX,a=this.mTempPing?this.tempData.y:this.mY;this.mTween=this.mScene.tweens.add({targets:this.mTarget,x:{value:n,duration:45,ease:"Bounce.easeOut"},y:{value:a,duration:45,ease:"Bounce.easeOut"},scaleX:{value:i,duration:45,ease:"Bounce.easeOut"},scaleY:{value:i,duration:45,ease:"Bounce.easeOut"},onComplete:function(){e.tweenComplete()},onCompleteParams:[this.mTarget]})},TweenCompent.prototype.tweenComplete=function(){this.mTweening=!1,this.mPingpang&&!this.mTempPing?(this.mTempPing=!0,this.tween()):(this.mTween&&(this.mTween.stop(),this.mTween.remove(),this.mTween=void 0),this.mTempPing=!1,this.mOnce&&(this.mTarget=void 0,this.tempData=void 0))},TweenCompent}()},function(e,i,n){"use strict";n.r(i),n.d(i,"ValueContainer",(function(){return l}));var a,s=n(788),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function ValueContainer(i,n,a,s){void 0===s&&(s=1);var o=e.call(this,i)||this;return o.init(n,a,s),o}return h(ValueContainer,e),ValueContainer.prototype.setText=function(e){this.mText.setText(e)},ValueContainer.prototype.setHandler=function(e){this.sendHandler=e},ValueContainer.prototype.init=function(e,i,n){var a=this.scene.make.image({key:e,frame:"home_progress_bottom"},!1);a.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mLeft=this.scene.make.image({key:e,frame:i},!1),this.mLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mText=this.scene.make.text({text:"0",width:a.width,height:a.height,style:{fontSize:14*n,fontFamily:o.Font.NUMBER}},!1).setOrigin(.5),this.mText.setStroke("#000000",1*n),this.mText.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mAddBtn=new s.Button(this.scene,e,"add_btn","add_btn"),this.setSize(a.width,a.height),this.mLeft.x=.5*-a.width+5*n,this.mLeft.y=a.y+.5*a.height-.5*this.mLeft.height,this.mAddBtn.x=this.width*this.originX-this.mAddBtn.width*this.originX-5*n,this.mText.x=4*n,this.add([a,this.mLeft,this.mText,this.mAddBtn]),this.mAddBtn.on(s.ClickEvent.Tap,this.onAddHandler,this)},ValueContainer.prototype.onAddHandler=function(){this.sendHandler&&this.sendHandler.run()},ValueContainer}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"GridLayoutGroup",(function(){return m})),n.d(i,"AlignmentType",(function(){return s})),n.d(i,"CornerType",(function(){return o})),n.d(i,"AxisType",(function(){return h})),n.d(i,"ConstraintType",(function(){return l}));var a,s,o,h,l,c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function GridLayoutGroup(i,n,a,c){var m=e.call(this,i)||this;return m.layoutElements=[],m.setSize(n,a),m._padding=c.padding||new Phaser.Math.Vector4(0,0,0,0),m._cellSize=c.cellSize||new Phaser.Math.Vector2(100,100),m._spacing=c.space||new Phaser.Math.Vector2(0,0),m._alignmentType=c.alignmentType||s.UpperLeft,m._startCorner=c.startCorner||o.UpperLeft,m._startAxis=c.startAxis||h.Horizontal,m._constraint=c.constraint||l.Flexible,m._constraintCount=c.constraintCount||4,m}return c(GridLayoutGroup,e),GridLayoutGroup.prototype.onPlay=function(){},GridLayoutGroup.prototype.start=function(){},Object.defineProperty(GridLayoutGroup.prototype,"padding",{get:function(){return this._padding},set:function(e){void 0!==e&&(this._padding=e)},enumerable:!1,configurable:!0}),Object.defineProperty(GridLayoutGroup.prototype,"cellSize",{get:function(){return this._cellSize},set:function(e){void 0!==e&&(e.x<0&&(e.x=0),e.y<0&&(e.y=0),this._cellSize=e)},enumerable:!1,configurable:!0}),Object.defineProperty(GridLayoutGroup.prototype,"spacing",{get:function(){return this._spacing},set:function(e){void 0!==e&&(this._spacing=e)},enumerable:!1,configurable:!0}),Object.defineProperty(GridLayoutGroup.prototype,"alignmentType",{get:function(){return this._alignmentType},set:function(e){e!==this._alignmentType&&(this._alignmentType=e)},enumerable:!1,configurable:!0}),Object.defineProperty(GridLayoutGroup.prototype,"startCorner",{get:function(){return this._startCorner},set:function(e){e!==this._startCorner&&(this._startCorner=e)},enumerable:!1,configurable:!0}),Object.defineProperty(GridLayoutGroup.prototype,"startAxis",{get:function(){return this._startAxis},set:function(e){e!==this._startAxis&&(this._startAxis=e)},enumerable:!1,configurable:!0}),Object.defineProperty(GridLayoutGroup.prototype,"constraint",{get:function(){return this._constraint},set:function(e){e!==this._constraint&&(this._constraint=e)},enumerable:!1,configurable:!0}),Object.defineProperty(GridLayoutGroup.prototype,"constraintCount",{get:function(){return this._constraintCount},set:function(e){void 0===e||isNaN(e)||(this._constraintCount=e)},enumerable:!1,configurable:!0}),GridLayoutGroup.prototype.Layout=function(){this.layoutElements.length=0;for(var e=0,i=this.list;e<i.length;e++){var n=i[e];n.visible&&this.layoutElements.push(n)}if(0!==this.layoutElements.length){var a=this._startCorner%2,s=Math.floor(this._startCorner/2),o=0,l=0,c=0,m=this.getCellCount();this._startAxis===h.Horizontal?(o=m.x,l=Phaser.Math.Clamp(m.x,1,this.layoutElements.length),c=Phaser.Math.Clamp(m.y,1,Math.ceil(this.layoutElements.length/o))):(o=m.y,c=Phaser.Math.Clamp(m.y,1,this.layoutElements.length),l=Phaser.Math.Clamp(m.x,1,Math.ceil(this.layoutElements.length/o)));for(var f=new Phaser.Math.Vector2(l*this._cellSize.x+(l-1)*this._spacing.x,c*this._cellSize.y+(c-1)*this._spacing.y),g=new Phaser.Math.Vector2(this.getStartOffset(0,f.x),this.getStartOffset(1,f.y)),_=0,T=0,x=0;x<this.layoutElements.length;x++)this._startAxis===h.Horizontal?(_=x%o,T=Math.floor(x/o)):(_=Math.floor(x/o),T=x%o),1===a&&(_=l-1-_),1===s&&(T=c-1-T),this.setChildAlongAxis(this.layoutElements[x],0,g.x+(this._cellSize.x+this._spacing.x)*_,this._cellSize.x),this.setChildAlongAxis(this.layoutElements[x],1,g.y+(this._cellSize.y+this._spacing.y)*T,this._cellSize.y);var S=g.x+(this._cellSize.x+this._spacing.x)*(_+1),j=g.y+(this._cellSize.y+this._spacing.y)*(T+1);this.startAxis===h.Horizontal?this.height=j:this.width=S,this.setAllChildPositionOffset(0),this.setAllChildPositionOffset(1)}},GridLayoutGroup.prototype.setChildAlongAxis=function(e,i,n,a){0===i?e.width=a:e.height=a;var s=n;0===i?e.x=s+a*e.originX:e.y=s+a*e.originY},GridLayoutGroup.prototype.setAllChildPositionOffset=function(e){for(var i=0,n=this.layoutElements;i<n.length;i++){var a=n[i];if(0===e){var s=.5*this.width;a.x-=s}else{s=.5*this.height;a.y-=s}}},GridLayoutGroup.prototype.getStartOffset=function(e,i){var n=i+(0===e?this.paddingHorizontal():this.paddingVertical()),a=(0===e?this.width:this.height)-n,s=this.getAlignmentOnAxis(e);return(0===e?this._padding.x:this._padding.z)+a*s},GridLayoutGroup.prototype.getAlignmentOnAxis=function(e){return 0===e?this._alignmentType%3*.5:.5*Math.floor(this._alignmentType/3)},GridLayoutGroup.prototype.getCellCount=function(){var e=new Phaser.Math.Vector2;return this._constraint===l.FixedColumnCount?(e.x=this._constraintCount,this.layoutElements.length>=e.x&&(e.y=Math.floor(this.layoutElements.length/e.x)+(this.layoutElements.length%e.x>0?1:0))):this._constraint===l.FixedRowCount?(e.y=this._constraintCount,this.layoutElements.length>=e.y&&(e.x=Math.floor(this.layoutElements.length/e.y)+(this.layoutElements.length%e.y>0?1:0))):(e.x=Math.max(1,Math.floor((this.width-this.paddingHorizontal()+this._spacing.x+.001)/(this._cellSize.x+this._spacing.x))),e.y=Math.max(1,Math.floor((this.height-this.paddingVertical()+this._spacing.y+.001)/(this._cellSize.y+this._spacing.y)))),e},GridLayoutGroup.prototype.paddingHorizontal=function(){return this._padding.x+this._padding.y},GridLayoutGroup.prototype.paddingVertical=function(){return this._padding.z+this._padding.w},GridLayoutGroup.ClassName="gridLayoutGroup",GridLayoutGroup}(Phaser.GameObjects.Container);!function(e){e[e.UpperLeft=0]="UpperLeft",e[e.UpperCenter=1]="UpperCenter",e[e.UpperRight=2]="UpperRight",e[e.MiddleLeft=3]="MiddleLeft",e[e.MiddleCenter=4]="MiddleCenter",e[e.MiddleRight=5]="MiddleRight",e[e.LowerLeft=6]="LowerLeft",e[e.LowerCenter=7]="LowerCenter",e[e.LowerRight=8]="LowerRight"}(s||(s={})),function(e){e[e.UpperLeft=0]="UpperLeft",e[e.UpperRight=1]="UpperRight",e[e.LowerLeft=2]="LowerLeft",e[e.LowerRight=3]="LowerRight"}(o||(o={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(h||(h={})),function(e){e[e.Flexible=0]="Flexible",e[e.FixedColumnCount=1]="FixedColumnCount",e[e.FixedRowCount=2]="FixedRowCount"}(l||(l={}))},function(e,i){},function(e,i){},function(e,i,n){"use strict";n.r(i),n.d(i,"IconSelectBtn",(function(){return h}));var a,s=n(0),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function IconSelectBtn(i,n,a,s,o){void 0===o&&(o=28/43);var h=e.call(this,i)||this;return h.mScene=i,h.mRender=n,h.mBtnBg=i.make.image(void 0,!1),h.mBgTexture=s,h.mBgResKey=a,h.mBtnBg.setTexture(a,s[0]),h.mBtnBg.scaleX=h.mBtnBg.scaleY=o,h.addAt(h.mBtnBg,0),h.setSize(h.mBtnBg.width,h.mBtnBg.height),h.setInteractive(),h.on("pointerup",h.upHandler,h),h.on("pointerdown",h.downHandler,h),h.on("pointerover",h.overHandler,h),h.on("pointerout",h.outHandler,h),h}return o(IconSelectBtn,e),IconSelectBtn.prototype.setPos=function(e,i){this.mBasePos||(this.mBasePos=new s.Pos),this.mBasePos.x=e,this.mBasePos.y=i},IconSelectBtn.prototype.getPos=function(){return this.mBasePos},IconSelectBtn.prototype.setBtnData=function(e){this.mBtnData=e},IconSelectBtn.prototype.getBtnData=function(){return this.mBtnData},IconSelectBtn.prototype.setClick=function(e){this.monClick=e},IconSelectBtn.prototype.setBgRes=function(e){this.mBtnBg.setTexture(this.mBgResKey,this.mBgTexture[e]||0)},IconSelectBtn.prototype.destroy=function(){this.mBtnBg&&this.mBtnBg.destroy(!0),this.mBtnIcon&&this.mBtnIcon.destroy(!0),this.monClick=null,this.mBtnBg=null,this.mBtnIcon=null,this.mBtnData=null,this.mScene=null,e.prototype.destroy.call(this)},IconSelectBtn.prototype.overHandler=function(e){},IconSelectBtn.prototype.outHandler=function(e){},IconSelectBtn.prototype.upHandler=function(){this.monClick&&this.monClick()},IconSelectBtn.prototype.downHandler=function(){this.scaleHandler()},IconSelectBtn.prototype.scaleHandler=function(){this.mScene.tweens.add({targets:this,duration:50,ease:"Linear",props:{scaleX:{value:.5},scaleY:{value:.5}},yoyo:!0,repeat:0}),this.scaleX=this.scaleY=1},IconSelectBtn}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"MaterialItem",(function(){return h}));var a,s=n(824),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function MaterialItem(i,n,a,s,o,h){var l=e.call(this,i,n,a,o,h)||this;return l.mselect=!1,l.selectframe=s,l}return o(MaterialItem,e),MaterialItem.prototype.setItemData=function(i,n){void 0===n&&(n=!0),e.prototype.setItemData.call(this,i),this.itemCount.text=n?this.getCountText(i.count,i.neededCount):i.count},Object.defineProperty(MaterialItem.prototype,"select",{get:function(){return this.mselect},set:function(e){this.bg.setFrame(e?this.selectframe:this.bgframe),this.mselect=e},enumerable:!1,configurable:!0}),MaterialItem.prototype.getCountText=function(e,i){var n=e>=i?"#000000":"#ff0000";return"[stroke="+n+"][color="+n+"]"+e+"[/color][/stroke]/"+i},MaterialItem}(s.PropItem)},function(e,i,n){"use strict";n.r(i),n.d(i,"BackgroundScaleButton",(function(){return c}));var a,s=n(788),o=n(0),h=n(802),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function BackgroundScaleButton(i,n,a,s,h,l,c,m,f,g,_){var T=e.call(this,i,0,0)||this;return T.mDownTime=0,T.dpr=m||o.UiUtils.baseDpr,T.zoom=f||o.UiUtils.baseScale,T.soundGroup={up:{key:"click"}},void 0===g&&(g=!0),T.mTweenBoo=g,Object.assign(T.soundGroup,_),T.mKey=s,T.mFrame=h,T.mDownFrame=l,T.setSize(n,a),T.createBackground(),c&&(T.mText=T.scene.make.text({color:"#ffffff",fontSize:16*m},!1).setOrigin(.5,.5).setText(c),T.mBackground&&T.mText.setSize(T.mBackground.width,T.mBackground.height),T.add(T.mText)),T.setInteractive(),T.addListen(),T}return l(BackgroundScaleButton,e),Object.defineProperty(BackgroundScaleButton.prototype,"background",{get:function(){return this.mBackground},enumerable:!1,configurable:!0}),Object.defineProperty(BackgroundScaleButton.prototype,"text",{get:function(){return this.mText},enumerable:!1,configurable:!0}),BackgroundScaleButton.prototype.setEnable=function(e,i){void 0===i&&(i=!0),e?(this.mBackground&&(this.mBackground.clearTint(),this.mText&&this.mText.clearTint()),this.setInteractive()):(this.mBackground&&i&&(this.mBackground.setTintFill(6710886),this.mText&&this.mText.setTintFill(7829367)),this.removeInteractive())},Object.defineProperty(BackgroundScaleButton.prototype,"tweenEnable",{set:function(e){this.mTweenBoo=e},enumerable:!1,configurable:!0}),BackgroundScaleButton.prototype.mute=function(e){this.silent=e},BackgroundScaleButton.prototype.changeNormal=function(){this.setBgFrame(this.mFrame)},BackgroundScaleButton.prototype.changeDown=function(){this.mDownFrame&&this.setBgFrame(this.mDownFrame)},BackgroundScaleButton.prototype.setFrame=function(e){this.setBgFrame(e)},BackgroundScaleButton.prototype.setText=function(e){this.mText&&this.mText.setText(e)},BackgroundScaleButton.prototype.setTextStyle=function(e){this.mText&&this.mText.setStyle(e)},BackgroundScaleButton.prototype.setFontStyle=function(e){this.mText&&this.mText.setFontStyle(e)},BackgroundScaleButton.prototype.setTextOffset=function(e,i){this.mText&&this.mText.setPosition(e,i)},BackgroundScaleButton.prototype.setTextColor=function(e){this.mText&&this.mText.setColor(e)},BackgroundScaleButton.prototype.setFrameNormal=function(e,i){return this.mFrame=e,this.mDownFrame=i||e,this.changeNormal(),this},BackgroundScaleButton.prototype.createBackground=function(){this.mFrame&&(this.mBackground=this.scene.make.image({key:this.mKey,frame:this.mFrame}),this.mBackground.displayWidth=this.width,this.mBackground.displayHeight=this.height,this.add(this.mBackground))},BackgroundScaleButton.prototype.setBgFrame=function(e){this.mBackground&&(this.mBackground.setFrame(e),this.mBackground.displayWidth=this.width,this.mBackground.displayHeight=this.height)},BackgroundScaleButton.prototype.EventStateChange=function(e){switch(e){case s.ClickEvent.Up:this.changeNormal();break;case s.ClickEvent.Down:this.changeDown();break;case s.ClickEvent.Tap:case s.ClickEvent.Out:this.changeNormal()}},BackgroundScaleButton}(h.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"ProgressThreeMaskBar",(function(){return l}));var a,s=n(827),o=n(809),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function ProgressThreeMaskBar(i,n,a,s,o,h,l){var c=e.call(this,i,n,a,s,o,h,l)||this;return c.zoom=1,c}return h(ProgressThreeMaskBar,e),ProgressThreeMaskBar.prototype.createBackgroundBar=function(e,i,n,a,s,h){if(h){var l=h.width||this.width,c=h.height||this.height,m=s.correct;this.mBackground=new o.ThreeSlicePath(this.scene,0,-2*this.dpr,l,c,e,i,1,1,m),this.setSize(l,c)}else this.mBackground=this.scene.make.image({key:e,frame:i}),this.setSize(this.mBackground.width,this.mBackground.height);if(s){var f=s.width||this.width,g=s.height||this.height;m=s.correct;this.mBar=new o.ThreeSlicePath(this.scene,0,-2*this.dpr,f,g,e,n,1,1,m)}else this.mBar=this.scene.make.image({key:e,frame:n});a&&(this.mText=this.scene.make.text({style:a},!1))},ProgressThreeMaskBar}(s.ProgressMaskBar)},function(e,i,n){"use strict";n.r(i),n.d(i,"ProgressThreeBar",(function(){return l}));var a,s=n(788),o=n(797),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function ProgressThreeBar(i,n,a,s,o,h,l){var c=e.call(this,i)||this;return c.value=0,c.max=1,c.zoom=1,c.createBackgroundBar(n,a,s,o,h,l),c.add([c.mBackground,c.mBar]),c.mText&&c.add(c.mText),c.disInteractive(),c}return h(ProgressThreeBar,e),ProgressThreeBar.prototype.setProgress=function(e,i){var n=e/i;n>1?n=1:n<0&&(n=0),this.value=n,this.max=i;var a=this.width*this.zoom*this.value;this.bar.resize(a,this.height),this.bar.x=.5*-this.width+.5*a},ProgressThreeBar.prototype.setText=function(e){this.mText&&(this.mText.text=e,this.mText.parentContainer||this.add(this.mText))},Object.defineProperty(ProgressThreeBar.prototype,"text",{get:function(){return this.mText},enumerable:!1,configurable:!0}),Object.defineProperty(ProgressThreeBar.prototype,"bar",{get:function(){return this.mBar},enumerable:!1,configurable:!0}),ProgressThreeBar.prototype.createBackgroundBar=function(e,i,n,a,s,h){if(h){var l=h.width||this.width,c=h.height||this.height,m=s.correct;this.mBackground=new o.ThreeSlicePath(this.scene,0,-2*this.dpr,l,c,e,i,1,1,m),this.setSize(l,c)}else this.mBackground=this.scene.make.image({key:e,frame:i}),this.setSize(this.mBackground.width,this.mBackground.height);if(s){var f=s.width||this.width,g=s.height||this.height;m=s.correct;this.mBar=new o.ThreeSlicePath(this.scene,0,-2*this.dpr,f,g,e,n,1,1,m)}else this.mBar=this.scene.make.image({key:e,frame:n});a&&(this.mText=this.scene.make.text({style:a},!1))},ProgressThreeBar}(s.BaseUI)},function(e,i,n){"use strict";n.r(i),n.d(i,"ToggleColorButton",(function(){return c}));var a,s=n(788),o=n(0),h=n(802),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function ToggleColorButton(i,n,a,s,h,l){var c=e.call(this,i,0,0)||this;return c.normalColor="#FFFFFF",c.changeColor="#0099cc",c.mIsOn=!1,c.setSize(n,a),l=l||o.UIHelper.whiteStyle(s,15),c.mText=c.scene.make.text({text:h,style:l},!1).setOrigin(.5,.5),c.add(c.mText),c.enable=!0,c}return l(ToggleColorButton,e),ToggleColorButton.prototype.setText=function(e){this.mText.text=e},ToggleColorButton.prototype.setFontSize=function(e){this.mText.setFontSize(e)},ToggleColorButton.prototype.setFontStyle=function(e){this.mText.setFontStyle(e)},ToggleColorButton.prototype.setStyle=function(e){this.mText.setStyle(e)},ToggleColorButton.prototype.setNormalColor=function(e){this.normalColor=e},ToggleColorButton.prototype.setChangeColor=function(e){this.changeColor=e},Object.defineProperty(ToggleColorButton.prototype,"isOn",{get:function(){return this.mIsOn},set:function(e){this.mIsOn=e,this.mIsOn?this.changeDown():this.changeNormal()},enumerable:!1,configurable:!0}),ToggleColorButton.prototype.changeDown=function(){this.mText.setFill(this.changeColor)},ToggleColorButton.prototype.changeNormal=function(){this.mText.setFill(this.normalColor)},Object.defineProperty(ToggleColorButton.prototype,"text",{get:function(){return this.mText},enumerable:!1,configurable:!0}),ToggleColorButton.prototype.EventStateChange=function(e){switch(e){case s.ClickEvent.Up:this.changeNormal();break;case s.ClickEvent.Down:this.changeDown();break;case s.ClickEvent.Tap:this.isOn=!0,this.changeDown();break;case s.ClickEvent.Out:this.isOn?this.changeDown():this.changeNormal()}},ToggleColorButton}(h.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"TextureSprite",(function(){return h}));var a,s=n(0),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function TextureSprite(i,n,a,s,o){var h=e.call(this,i)||this;return h.isPlaying=!1,h.indexed=0,h.dpr=n,h.auto=a||!1,h.setAniData(o,s),h}return o(TextureSprite,e),TextureSprite.prototype.load=function(e,i,n){if(this.scene){this.compl=i,this.error=n,this.mUrls=e,this.loadUrls=[],this.errorUrls=[];for(var a=0,o=this.mUrls;a<o.length;a++){var h=o[a];this.scene.textures.exists(h)||(this.scene.load.image(h),this.loadUrls.push(h))}this.loadUrls.length>0?(this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE,this.onLoadComplete,this),this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.onLoadError,this),this.scene.load.start()):this.onLoadComplete()}else s.Logger.getInstance().fatal("Create failed does not exist")},TextureSprite.prototype.setAniData=function(e,i){this.times=e||-1,this.timeFrame=i||30,this.tempTimes=this.times},TextureSprite.prototype.play=function(e){var i=this;if(e)this.timerID&&clearTimeout(this.timerID),this.indexed=0,this.tempTimes=this.times;else if(this.isPlaying)return;var excute=function(){i.frameImg.setTexture(i.mUrls[i.indexed]),i.indexed++,i.indexed===i.mUrls.length&&(i.indexed=0,i.times>0&&(i.tempTimes--,0===i.tempTimes))?i.playEnd():i.timerID=setTimeout((function(){excute()}),i.timeFrame)};excute()},TextureSprite.prototype.stop=function(){this.isPlaying&&(clearTimeout(this.timerID),this.playEnd())},TextureSprite.prototype.destroy=function(i){void 0===i&&(i=!1),this.compl=void 0,this.error=void 0,this.mUrls=void 0,this.loadUrls=void 0,this.errorUrls=void 0,this.scene&&(this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE,this.onLoadComplete,this),this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,this.onLoadError,this)),e.prototype.destroy.call(this,i)},Object.defineProperty(TextureSprite.prototype,"playing",{get:function(){return this.isPlaying},enumerable:!1,configurable:!0}),TextureSprite.prototype.playEnd=function(){this.isPlaying=!1,this.tempTimes=this.times,this.timerID=void 0,this.indexed=0,this.frameImg.setTexture(this.mUrls[this.indexed])},TextureSprite.prototype.onLoadComplete=function(e){var i=this.loadUrls.indexOf(e);-1!==i&&(this.loadUrls.splice(i,1),0===this.loadUrls.length&&(this.auto&&this.play(),this.compl&&(this.compl.run(),this.compl=void 0),this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE,this.onLoadComplete,this),this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,this.onLoadError,this)))},TextureSprite.prototype.onLoadError=function(e){var i=this.loadUrls.indexOf(e.url);-1!==i&&(this.loadUrls.splice(i,1),this.errorUrls.push(e.url),0===this.loadUrls.length&&(this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE,this.onLoadComplete,this),this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,this.onLoadError,this),this.error&&(this.error.runWith(this.errorUrls),this.error=void 0)))},TextureSprite}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"InputField",(function(){return h}));var a,s=n(788),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function InputField(i,n,a,s,o,h){var l=e.call(this,i,n,a,s,o,h)||this;return l.node.addEventListener("keypress",l.onKeypressHandler.bind(l)),l.on("focus",l.onFocusHandler,l),l.on("blur",l.onBlurHandler,l),l}return o(InputField,e),InputField.prototype.destroy=function(){this.node&&this.node.removeEventListener("keypress",this.onKeypressHandler.bind(this)),this.off("focus",this.onFocusHandler,this),this.off("blur",this.onBlurHandler,this),this.scene&&this.scene.input.off("gameobjectdown",this.onGameobjectDown,this),e.prototype.destroy.call(this)},InputField.prototype.onKeypressHandler=function(e){13===(e.keyCode||e.which)&&this.emit("enter",this.text)},InputField.prototype.onFocusHandler=function(){this.scene.input.on("gameobjectdown",this.onGameobjectDown,this)},InputField.prototype.onBlurHandler=function(){this.scene.input.off("gameobjectdown",this.onGameobjectDown,this)},InputField.prototype.onGameobjectDown=function(){this.setBlur()},InputField}(s.InputText)},function(e,i,n){"use strict";n.r(i),n.d(i,"CheckBoxToggle",(function(){return l}));var a,s=n(788),o=n(828),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function CheckBoxToggle(){return null!==e&&e.apply(this,arguments)||this}return h(CheckBoxToggle,e),CheckBoxToggle.prototype.EventStateChange=function(e){switch(e){case s.ClickEvent.Up:this.changeNormal();break;case s.ClickEvent.Down:this.changeDown();break;case s.ClickEvent.Tap:this.isOn=!this.isOn;break;case s.ClickEvent.Out:this.isOn?this.changeDown():this.changeNormal()}},CheckBoxToggle}(o.ToggleButton)},function(e,i,n){"use strict";n.r(i),n.d(i,"UiManager",(function(){return h}));var a=n(0),s=n(2),o=n(797),h=function(){function UiManager(e){this.mRender=e,this.mBatchPanelList=[],this.mCache=[],this.mRemoteCache=new Map,this.alertViewCache=[]}return UiManager.prototype.setScene=function(e){var i=this;if(this.mScene=e,e){if(this.mCache){for(var n=0,a=this.mCache;n<a.length;n++){var s=a[n];this.showPanel(s.name,s.param)}this.mCache.length=0}this.alertViewCache&&(this.alertViewCache.forEach((function(e){i.showAlertView(e.text,e.ok,e.cancel,e.callBack)})),this.alertViewCache.length=0),this.mRemoteCache.size>0&&this.mRemoteCache.forEach((function(e,n){e.resolver.resolve(i._showPanel(n,e.param))})),this.mRemoteCache.clear()}},UiManager.prototype.resize=function(e,i){this.mPanelMap&&this.mPanelMap.forEach((function(e){e.isShow()&&e.resize()}))},UiManager.prototype.setPanel=function(e,i){this.mPanelMap.set(e,i)},UiManager.prototype.getPanel=function(e){if(this.mPanelMap)return this.mPanelMap.get(e)},UiManager.prototype.clearPanel=function(){this.mPanelMap&&(this.mBatchPanelList.forEach((function(e){e.hide()})),this.mPanelMap.forEach((function(e){e.destroy()})),this.mBatchPanelList=[],this.mPanelMap.clear(),this.mPanelMap=null)},UiManager.prototype.showErrorMsg=function(e){if(this.mScene&&this.mScene.scene.key===s.SceneName.LOADING_SCENE){var i=e;e.length>100&&(i=e.slice(0,99)),this.mScene.showErrorMsg(i)}},UiManager.prototype.showAlertView=function(e,i,n,a){if(void 0===n&&(n=!1),this.mScene&&!this.mScene.sceneDestroy()&&this.mScene.sceneInitialize()&&!this.mScene.sceneChange){var s=new o.AlertView(this.mScene,this);s.show({text:e,callback:function(){a&&a()},btns:o.Buttons.Ok}),this.mBatchPanelList.push(s)}else this.alertViewCache.push({text:e,ok:i,cancel:n,callBack:a})},UiManager.prototype.showBatchPanel=function(e,i){if(this.mScene){this.mPanelMap||(this.mPanelMap=new Map);var a=e+"Panel",s=new(n(1034)("./"+e+"/"+a)[a])(this);return this.mBatchPanelList.push(s),s.show(i),s}},UiManager.prototype.destroy=function(){this.clearPanel(),this.clearCache(),this.mScene=void 0},UiManager.prototype.showPanel=function(e,i){var n=this;if(this.mScene)return new Promise((function(a,s){a(n._showPanel(e,i))}));if(this.mScene=this.render.game.scene.getScene(s.SceneName.MAINUI_SCENE),this.mScene)return new Promise((function(a,s){a(n._showPanel(e,i))}));var o=new a.ValueResolver;return this.mRemoteCache.set(e,{resolver:o,param:i}),o.promise((function(){}))},UiManager.prototype.hidePanel=function(e){var i=this.hideBasePanel(e);i&&i.hide(!0)},UiManager.prototype.hideBasePanel=function(e){if(this.mPanelMap){var i=this.mPanelMap.get(e);if(i)return this.mPanelMap.delete(e),i;a.Logger.getInstance().error("error "+e+" no panel can show!!!")}},UiManager.prototype.hideBatchPanel=function(e){for(var i=this.mBatchPanelList.length,n=0;n<i;n++){if(this.mBatchPanelList[n]===e)return void this.mBatchPanelList.splice(n,1)}},UiManager.prototype.closePanel=function(e){this.render.mainPeer.closePanelHandler(e)},UiManager.prototype.updateUIState=function(e,i){if(this.mPanelMap){var n=this.mPanelMap.get(e);n&&n.updateUIState(i)}},UiManager.prototype.getPanelClass=function(e){var i=e+"Panel";return n(1034)("./"+e+"/"+i)},Object.defineProperty(UiManager.prototype,"scene",{get:function(){return this.mScene},enumerable:!1,configurable:!0}),Object.defineProperty(UiManager.prototype,"render",{get:function(){return this.mRender},enumerable:!1,configurable:!0}),UiManager.prototype.clearCache=function(){this.mCache=[]},UiManager.prototype._showPanel=function(e,i){this.mPanelMap||(this.mPanelMap=new Map);var a=e+"Panel",s=n(1034)("./"+e+"/"+a),o=this.mPanelMap.get(e);return o||(o=new s[a](this),this.mPanelMap.set(e,o)),o.show(i),o},UiManager}()},function(e,i){},function(e,i){},function(e,i){},function(e,i,n){"use strict";n.r(i),n.d(i,"BagPanel",(function(){return g}));var a,s=n(810),o=n(801),h=n(788),l=n(797),c=n(0),m=n(2),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function BagPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.mPageNum=0,n.mPageIndex=1,n.mBaseStr="输入关键字进行搜索",n.bagSlotList=[],n.mCheckList=[],n}return f(BagPanel,e),BagPanel.prototype.resize=function(e,i){var n=this.mWorld.getSize();this.mWorld.game.device.os.desktop||this.mWorld.game.scale.orientation===Phaser.Scale.Orientation.LANDSCAPE?(this.x=n.width>>1,this.y=n.height>>1):(this.x=n.width>>1,this.y=n.height-this.height/2*this.mWorld.uiScale>>1)},BagPanel.prototype.setDataList=function(e){var i=e;this.mPageNum=Math.ceil(i.length/BagPanel.PageMaxCount),this.mDataList=i,this.mInitialized&&this.checkChinese()},BagPanel.prototype.getPageNum=function(){return this.mPageNum},BagPanel.prototype.destroy=function(){this.bagSlotList&&(this.bagSlotList.forEach((function(e){e&&e.destroy()})),this.bagSlotList.length=0,this.bagSlotList=null),this.mWorld=null,this.mPageNum=0,this.mPageIndex=1,e.prototype.destroy.call(this)},BagPanel.prototype.getCurPageIndex=function(){return this.mPageIndex},BagPanel.prototype.show=function(i){e.prototype.show.call(this,i),this.mInitialized&&(this.mPreBtn.play("slipBtn"),this.mNextBtn.play("slipBtn"))},BagPanel.prototype.setBlur=function(){this.mInputText&&this.mInputText.setBlur()},BagPanel.prototype.addListen=function(){this.mInitialized&&(this.mInputText.on("focus",this.onFocusHandler,this),this.mInputText.on("blur",this.onBlurHandler,this),this.mNextBtn.on("pointerup",this.nextHandler,this),this.mPreBtn.on("pointerup",this.preHandler,this),this.mClsBtn.on("pointerup",this.closeHandler,this))},BagPanel.prototype.removeListen=function(){this.mInitialized&&(this.mInputText.off("focus",this.onFocusHandler,this),this.mInputText.off("blur",this.onBlurHandler,this),this.mNextBtn.off("pointerup",this.nextHandler,this),this.mPreBtn.off("pointerup",this.preHandler,this),this.mClsBtn.off("pointerup",this.closeHandler,this))},BagPanel.prototype.init=function(){if(!this.mInitialized){var i,n=this.mWorld.getSize();this.mWorld.game.device.os.desktop||this.mWorld.game.scale.orientation===Phaser.Scale.Orientation.LANDSCAPE?(this.x=n.width>>1,this.y=n.height>>1):(this.x=n.width>>1,this.y=n.height-this.height/2*this.mWorld.uiScale>>1);var a=0,m=0;this.mBg=new o.NinePatch(this.scene,0,0,500,350,c.Background.getName(),null,c.Background.getConfig()),this.addAt(this.mBg,0),this.setSize(this.mBg.width,this.mBg.height),this.mBorder=new o.NinePatch(this.scene,0,0,this.mBg.width-10,this.mBg.height-30,c.Border.getName(),null,c.Border.getConfig()),this.mBorder.x=this.mBg.x,this.mBorder.y=this.mBg.y+10,this.addAt(this.mBorder,1);var f=new o.NinePatch(this.scene,this.mBorder.width/4+5,-this.mBg.height/2+65,this.mBorder.width/2-40,35,c.Border.getName(),null,c.Border.getConfig());this.add(f),this.mInputText=new h.InputText(this.scene,0,0,10,10,{type:"input",fontSize:"14px",color:"#808080"}).resize(f.width,f.height).setOrigin(0,0).setStyle({font:"bold 16px YaHei"}),this.mInputText.x=f.x-f.width/2,this.mInputText.y=f.y-f.height/2,this.mInputText.setText(this.mBaseStr),this.add(this.mInputText),this.bagSlotList=[];for(var g=0;g<BagPanel.PageMaxCount;g++)a=g%8*60-210,m=60*Math.floor(g/8)-this.mBorder.height/2+this.mBorder.y+this.mBorder.height/2-55,(i=new s.ItemSlot(this.scene,this.mWorld,this,a,m,this.mResStr,this.mResPng,this.mResJson,"bagView_slot.png","itemSelectFrame")).createUI(),this.bagSlotList.push(i);this.mPreBtn=this.scene.make.sprite(void 0,!1),this.mPreBtn.x=-this.mBg.width>>1,this.mNextBtn=this.scene.make.sprite(void 0,!1),this.mNextBtn.scaleX=-1,this.mNextBtn.x=this.mBg.width>>1;var _=this.scene.make.sprite(void 0,!1);_.setTexture(this.mResStr,"bagView_titleBtn.png"),_.x=50+(-this.mBg.width>>1),_.y=-this.mBg.height>>1,this.add(_);var T=this.scene.make.text(void 0,!1);T.setFontFamily("Tahoma"),T.setFontStyle("bold"),T.setFontSize(20),T.setText("背包"),T.x=_.x+_.width-10,T.y=_.y-(T.height>>1),this.add(T),this.add(this.mPreBtn),this.add(this.mNextBtn),this.mNextBtn.setInteractive(),this.mPreBtn.setInteractive(),this.width=this.mBg.width,this.height=this.mBg.height,this.mClsBtn=new l.IconBtn(this.scene,this.mWorld,{key:"Close_Btn",bgResKey:"clsBtn",bgTextures:["btn_normal","btn_over","btn_click"],iconResKey:"",iconTexture:"",scale:1,pngUrl:this.mResPng,jsonUrl:this.mResJson}),this.mClsBtn.x=(this.width>>1)-65,this.mClsBtn.y=-this.height>>1,this.mClsBtn.scaleX=this.mClsBtn.scaleY=2,this.add(this.mClsBtn),this.mInitialized=!0,this.mDataList&&this.refreshDataList(this.mDataList),this.setInteractive(),e.prototype.init.call(this)}},BagPanel.prototype.preload=function(){this.scene&&(this.mResStr="bagView",this.mResPng="ui/bag/bagView.png",this.mResJson="ui/bag/bagView.json",this.scene.load.atlas("itemChose",c.Url.getRes("ui/bag/itemChose.png"),c.Url.getRes("ui/bag/itemChose.json")),this.scene.load.atlas("slip",c.Url.getRes("ui/bag/slip.png"),c.Url.getRes("ui/bag/slip.json")),this.scene.load.image(c.Border.getName(),c.Border.getPNG()),this.scene.load.image(c.Background.getName(),c.Background.getPNG()),this.scene.load.atlas("clsBtn",c.Url.getRes("ui/common/common_clsBtn.png"),c.Url.getRes("ui/common/common_clsBtn.json")),this.scene.load.atlas(this.mResStr,c.Url.getRes(this.mResPng),c.Url.getRes(this.mResJson)),e.prototype.preload.call(this))},BagPanel.prototype.loadComplete=function(i,n,a){var s=this.scene.textures.get("itemChose").frames,o=[];for(var h in s){if("__BASE"!==h)s[h]&&o.push(h)}this.scene.anims.create({key:"itemSelectFrame",frames:this.scene.anims.generateFrameNumbers("itemChose",{start:0,end:8,frames:o}),frameRate:33,yoyo:!0,repeat:-1});var l=this.scene.textures.get("slip").frames,c=[];for(var h in l){if("__BASE"!==h)l[h]&&c.push(h)}this.scene.anims.create({key:"slipBtn",frames:this.scene.anims.generateFrameNumbers("slip",{start:0,end:14,frames:c}),frameRate:33,yoyo:!0,repeat:-1}),e.prototype.loadComplete.call(this,i,n,a)},BagPanel.prototype.tweenComplete=function(i){e.prototype.tweenComplete.call(this,i)},BagPanel.prototype.nextHandler=function(e,i){if(this.preNextBtnScaleHandler(this.mNextBtn,-1),!(this.mPageIndex>=this.mPageNum)){this.mPageIndex++;var n=this.mCheckList.length>0?this.mCheckList:this.mDataList;this.refreshDataList(n)}},BagPanel.prototype.preHandler=function(e,i){if(this.preNextBtnScaleHandler(this.mPreBtn),!(this.mPageIndex<=1)){this.mPageIndex--;var n=this.mCheckList.length>0?this.mCheckList:this.mDataList;this.refreshDataList(n)}},BagPanel.prototype.preNextBtnScaleHandler=function(e,i){void 0===i&&(i=1),this.scene.tweens.add({targets:e,duration:50,ease:"Linear",props:{scaleX:{value:.5*i},scaleY:{value:.5}},yoyo:!0,repeat:0}),e.scaleX=i,e.scaleY=1},BagPanel.prototype.refreshDataList=function(e){if(e)for(var i,n=e.slice((this.mPageIndex-1)*BagPanel.PageMaxCount,this.mPageIndex*BagPanel.PageMaxCount),a=BagPanel.PageMaxCount,s=0;s<a;s++)(i=this.bagSlotList[s])&&i.dataChange(n[s]);else c.Logger.getInstance().error("checkItemList is undefiend")},BagPanel.prototype.closeHandler=function(){this.render.renderEmitter(m.ModuleName.BAG_NAME+"_close")},BagPanel.prototype.onFocusHandler=function(){this.mWorld&&this.mWorld.inputManager&&this.mInputText&&(this.mInputText.on("textchange",this.checkChinese,this),this.mInputText.setText(""))},BagPanel.prototype.onBlurHandler=function(){this.mWorld&&this.mWorld.inputManager&&this.mInputText&&(this.mInputText.on("textchange",this.checkChinese,this),this.mInputText.setText(this.mBaseStr))},BagPanel.prototype.checkChinese=function(){var e=this,i=this.mInputText.text;i.length<1||!c.Tool.checkChinese(i)||i===this.mBaseStr?this.refreshDataList(this.mDataList):(this.mDataList.forEach((function(i){i&&c.Tool.checkItemName(i.name,e.mInputText.text)&&e.mCheckList.push(i)})),this.refreshDataList(this.mCheckList))},BagPanel.PageMaxCount=32,BagPanel}(l.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"StoragePanel",(function(){return f}));var a,s=n(2),o=n(0),h=n(797),l=n(810),c=n(801),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function StoragePanel(i){return e.call(this,i.scene,i.render)||this}return m(StoragePanel,e),StoragePanel.prototype.resize=function(e,i){var n=this.mWorld.getSize();this.x=n.width+e>>1,this.y=n.height+i-200},StoragePanel.prototype.destroy=function(){if(this.mBagItemSlotList){for(var i=this.mBagItemSlotList.length,n=0;n<i;n++){var a=this.mBagItemSlotList[n];a&&(a.destroy(),a=null)}this.mBagItemSlotList=null}this.mWorld=null,e.prototype.destroy.call(this)},StoragePanel.prototype.addListen=function(){this.mClsBtn.on("pointerup",this.hide,this)},StoragePanel.prototype.removeListen=function(){this.mClsBtn.off("pointerup",this.hide,this)},StoragePanel.prototype.init=function(){if(!this.mInitialized){e.prototype.init.call(this),this.mBg=new c.NinePatch(this.scene,0,0,500,350,o.Background.getName(),null,o.Background.getConfig()),this.addAt(this.mBg,0),this.setSize(this.mBg.width,this.mBg.height),this.mBorder=new c.NinePatch(this.scene,0,0,this.mBg.width-10,this.mBg.height-30,o.Border.getName(),null,o.Border.getConfig()),this.mBorder.x=this.mBg.x,this.mBorder.y=this.mBg.y+10,this.addAt(this.mBorder,1),this.setSize(this.mBg.width,this.mBg.height);var i=this.scene.make.image(void 0,!1);i.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),i.setTexture(this.mResStr,"itemBagView_title.png"),i.x=80+(-this.mBg.width>>1),i.y=-this.mBg.height>>1,this.add(i);var n,a=this.scene.make.text(void 0,!1);a.setFontFamily("Tahoma"),a.setFontStyle("bold"),a.setFontSize(20),a.setText("书柜"),a.x=i.x+i.width-10,a.y=i.y-(a.height>>1),this.add(a);var s=0,m=0;this.mBagItemSlotList=[];for(var f=0;f<9;f++)s=f%9*60+32-362,m=60*Math.floor(f/9)-55,(n=new l.ItemSlot(this.scene,this.mWorld,this,s,m,this.mResStr,this.mResPng,this.mResJson,"bagView_slot.png","bagView_itemSelect.png")).createUI(),this.mBagItemSlotList.push(n);this.mClsBtn=new h.IconBtn(this.scene,this.mWorld,{key:"Close_Btn",bgResKey:"clsBtn",bgTextures:["btn_normal","btn_over","btn_click"],iconResKey:"",iconTexture:"",scale:1,pngUrl:"ui/common/common_clsBtn.png",jsonUrl:"ui/common/common_clsBtn.json"}),this.mClsBtn.x=(this.width>>1)-65,this.mClsBtn.y=-this.height>>1,this.mClsBtn.scaleX=this.mClsBtn.scaleY=2,this.add(this.mClsBtn)}},StoragePanel.prototype.preload=function(){this.scene&&(this.mResStr="bagView",this.mResPng="ui/bag/bagView.png",this.mResJson="ui/bag/bagView.json",this.scene.load.image(o.Border.getName(),o.Border.getPNG()),this.scene.load.image(o.Background.getName(),o.Background.getPNG()),this.scene.load.atlas("clsBtn",o.Url.getRes("ui/common/common_clsBtn.png"),o.Url.getRes("ui/common/common_clsBtn.json")),this.scene.load.atlas(this.mResStr,o.Url.getRes(this.mResPng),o.Url.getRes(this.mResJson)),e.prototype.preload.call(this))},StoragePanel.prototype.tweenComplete=function(i){e.prototype.tweenComplete.call(this,i),i&&this.mWorld.uiManager.getMediator(s.ModuleName.STORAGE_NAME).resize()},StoragePanel}(h.BasePanel)},function(e,i,n){"use strict";n.r(i);var a=n(807);n.d(i,"TextToolTips",(function(){return a.TextToolTips}));var s=n(808);for(var o in s)["TextToolTips","default"].indexOf(o)<0&&function(e){n.d(i,e,(function(){return s[e]}))}(o);var h=n(800);n.d(i,"ToolTip",(function(){return h.ToolTip}))},function(e,i,n){"use strict";n.r(i),n.d(i,"RankPanel",(function(){return c}));var a,s=n(2),o=n(826),h=n(1035),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function RankPanel(i){var n=e.call(this,i)||this;return n.mCurrentIndex=0,n.key=s.ModuleName.RANK_NAME,n}return l(RankPanel,e),RankPanel.prototype.addListen=function(){this.mInitialized&&(this.render.game.device.os.desktop?this.mZoonInBtn.on("pointerup",this.onZoomHandler,this):this.mClsBtn.on("pointerup",this.closeHandler,this))},RankPanel.prototype.removeListen=function(){this.mInitialized&&(this.render.game.device.os.desktop?this.mZoonInBtn.off("pointerup",this.onZoomHandler,this):this.mClsBtn.off("pointerup",this.closeHandler,this))},RankPanel.prototype.resize=function(e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.render){var n=this.render.getSize();this.render.game.device.os.desktop?(this.x=n.width-this.width/2,this.y=this.height/2+10):(this.render.game.scale.orientation,Phaser.Scale.Orientation.LANDSCAPE,this.x=n.width+e>>1,this.y=n.height+i>>1),this.scale=this.render.uiScale}},RankPanel.prototype.tweenView=function(e){if(this.scene){var i=this.height/2+10,n=!0===e?i:i-300,a=!0===e?1:0;this.scene.tweens.add({targets:this,duration:200,ease:"Cubic.Out",props:{y:{value:n},alpha:{value:a}}})}},RankPanel.prototype.destroy=function(){this.mZoonInBtn&&this.mZoonInBtn.destroy(!0),this.mZoonInBtn=null,this.mCurrentIndex=0,e.prototype.destroy.call(this)},RankPanel.prototype.init=function(){e.prototype.init.call(this),this.render.game.device.os.desktop?(this.mZoonInBtn=this.scene.make.image({x:0,y:this.height/2-10,key:"rank_atlas",frame:"arrow.png"},!1),this.add(this.mZoonInBtn),this.mZoonInBtn.setInteractive()):(this.mClsBtn=new o.IconBtn(this.scene,this.render,{key:"Close_Btn",bgResKey:"clsBtn",bgTextures:["btn_normal","btn_over","btn_click"],iconResKey:"",iconTexture:"",scale:1,pngUrl:"ui/common/common_clsBtn.png",jsonUrl:"ui/common/common_clsBtn.json"}),this.mClsBtn.x=this.width/2-35,this.mClsBtn.y=-this.height/2,this.mClsBtn.scaleX=this.mClsBtn.scaleY=2,this.add(this.mClsBtn)),this.resize()},RankPanel.prototype.tweenComplete=function(i){if(e.prototype.tweenComplete.call(this,i),i){var n=this.getData("data");n&&this.addItem(n)}},RankPanel.prototype.closeHandler=function(){this.render.renderEmitter(s.RENDER_PEER+"_"+this.key+"_hide")},RankPanel.prototype.onZoomHandler=function(){this.currentSizeIndex=0===this.mCurrentIndex?1:0},Object.defineProperty(RankPanel.prototype,"currentSizeIndex",{set:function(e){if(this.mCurrentIndex!==e){this.mCurrentIndex=e;var i=1===this.mCurrentIndex?30:this.height,n=1===this.mCurrentIndex?-this.height/2+20:this.height/2-10,a=1===this.mCurrentIndex?-this.height/2+15:0;this.mBackground.resize(328,i),this.mZoonInBtn.angle=1===this.mCurrentIndex?180:0,i>300?this.parentContainer&&this.add(this.mChildContainer):this.remove(this.mChildContainer),this.mBackground.y=a,this.mZoonInBtn.y=n}},enumerable:!1,configurable:!0}),RankPanel}(h.BasicRankPanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"BackTextButton",(function(){return c}));var a,s=n(789),o=n(790),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function BackTextButton(i,n){var a=e.call(this,i,0,0)||this;return a.dpr=n,a.init(),a}return l(BackTextButton,e),BackTextButton.prototype.setText=function(e){this.titleTex.text=e},BackTextButton.prototype.setTextStyle=function(e){this.titleTex.setStyle(e)},BackTextButton.prototype.setFontStyle=function(e){void 0===e&&(e="bold"),this.titleTex.setFontStyle(e)},BackTextButton.prototype.init=function(){var e=100*this.dpr,i=40*this.dpr;this.setSize(e,i),this.enable=!0;var n=this.scene.make.image({key:o.d.uicommon,frame:"back_arrow"});n.x=.5*-this.width+.5*n.width+10*this.dpr;var a=this.scene.make.text({text:"",style:h.UIHelper.whiteStyle(this.dpr,20)}).setOrigin(0,.5);a.setFontStyle("bold"),a.x=n.x+.5*n.width+10*this.dpr,this.titleTex=a,this.add([n,a])},BackTextButton}(s.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"EnergyProgressBar",(function(){return m}));var a,s=n(789),o=n(790),h=n(813),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function EnergyProgressBar(i,n){var a=e.call(this,i)||this;return a.dpr=n,a.init(),a}return c(EnergyProgressBar,e),EnergyProgressBar.prototype.setEnergyData=function(e,i){this.powerTex.setText(e+"/"+i),this.powerPro.setProgress(e,i)},EnergyProgressBar.prototype.init=function(){var e=83*this.dpr,i=18*this.dpr;this.setSize(e,i);var n={width:e,height:i,left:9*this.dpr,right:9*this.dpr,top:0,bottom:0};this.powerPro=new s.ProgressMaskBar(this.scene,o.d.uicommon,"explore_physical_bottom","explore_physical_top",void 0,n,n),this.powerPro.x=0,this.powerTex=new h.ImageValue(this.scene,43*this.dpr,15*this.dpr,o.d.uicommon,"explore_physical_icon",this.dpr,l.UIHelper.colorNumberStyle("#ffffff",11*this.dpr)),this.powerTex.x=.5*-e+13*this.dpr,this.powerTex.y=-1*this.dpr,this.powerTex.setFontStyle("bold"),this.powerTex.setStroke("#000000",2*this.dpr),this.powerTex.setOffset(-4*this.dpr,0),this.powerTex.setLayout(1),this.powerTex.setText(""),this.add([this.powerPro,this.powerTex])},EnergyProgressBar}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"DetailBubble",(function(){return l}));var a,s=n(788),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function DetailBubble(i,n,a,h,l,c){void 0===h&&(h=1);var m=e.call(this,i)||this;m.dpr=a,m.key=n,m.mixWidth=l||100*a,m.mixHeight=c||96*a;var f=m.mixWidth,g=m.mixHeight;return m.setSize(f,g),m.tipsbg=new s.NineSlicePatch(m.scene,0,0,f,g,m.key,"tips_bg",{left:10*m.dpr,top:10*m.dpr,right:10*m.dpr,bottom:10*m.dpr},void 0,void 0,0),m.tipsbg.setPosition(.5*f,.5*g),m.tipsbg.alpha=.6,m.tipsText=new s.BBCodeText(m.scene,7*a,-g+60*m.dpr,"",{color:"#333333",fontSize:12*m.dpr,fontFamily:o.Font.DEFULT_FONT,lineSpacing:5*a,padding:{top:2*a}}).setOrigin(0),m.tipsText.setWrapMode("char"),m.tipsText.setWrapWidth(200*a),m.mExpires=new s.BBCodeText(i,7*a,85*a,"",{fontSize:12*m.dpr,fontFamily:o.Font.DEFULT_FONT}).setOrigin(0),m.add([m.tipsbg,m.tipsText,m.mExpires]),m.tipsText.addImage("iv_coin",{key:m.key,frame:"home_silver",y:-3*m.dpr}),m.tipsText.addImage("iv_diamond",{key:m.key,frame:"home_diamond",y:-3*m.dpr}),m}return h(DetailBubble,e),DetailBubble.prototype.setTipsText=function(e){this.tipsText.setText(e)},DetailBubble.prototype.setProp=function(e,i,n){var a=this;if(e){var s="",h="",l="",c="",m="[color=#32347b][b][size="+14*this.dpr+"]"+(e.shortName||e.name)+"[/size][/b][/color]",f=this.mixWidth;this.tipsText.text=m,f=f<this.tipsText.width?this.tipsText.width:f,e.source&&(s=""+e.source,m+="\n[color=#ffffff][size="+12*this.dpr+"]"+s+"[/size][/color]",this.tipsText.text=s,f=f<this.tipsText.width?this.tipsText.width:f),e.des&&""!==e.des&&(m+="\n"+(h=e.des),this.tipsText.text=h,f=f<this.tipsText.width?this.tipsText.width:f);var g=!1;if(e.affectValues){for(var _=e.affectValues.length,T=0;T<_;T++){var x=e.affectValues[T];if(n.propertiesMap)if(j=n.propertiesMap.get(x.key)){var S=x.value>0?"[color=#ffff00]+"+x.value+"[/color]":"[color=#ff0000]"+x.value+"[/color]";l+="\n"+j.name+": "+S}}l.length>0&&(g||(g=!0,m+="\n-- -- -- -- -- -- -- --"),m+="\n[color=#ffffff]"+o.i18n.t("furni_bag.properties")+"[/color]"+l)}if(e.requireValues){for(_=e.requireValues.length,T=0;T<_;T++){var j,q=e.requireValues[T];if(n.propertiesMap)if(j=n.propertiesMap.get(q.key)){S=j.value>=q.value?"[color=#00ff00]("+q.value+")[/color]":"[color=#ff0000]("+q.value+")[/color]";c+="\n"+j.name+": "+S}}c.length>0&&(g||(g=!0,m+="\n-- -- -- -- -- -- -- --"),m+="\n"+o.i18n.t("furni_bag.needproper")+":"+c)}if(this.tipsText.text=m,this.width=this.tipsText.width+14*this.dpr,e.expiredTime>0){g||(g=!0,m+="\n-- -- -- -- -- -- -- --");var Y=e.expiredTime-i,timeout_1=function(){a.mExpires.visible=!0,a.mExpires.text=a.getDataFormat(1e3*Y),a.timeID=Y>0?setTimeout((function(){Y-=1,timeout_1()}),1e3):void 0};timeout_1()}else this.mExpires.visible=!1,this.timeID&&clearTimeout(this.timeID);this.resize()}else this.tipsText.setText(o.i18n.t("furni_bag.empty_backpack")),this.mExpires.text="",this.resize();return this},DetailBubble.prototype.resize=function(e,i){var n=this.mixHeight,a=this.tipsText.height;this.mExpires.visible&&(a+=this.mExpires.height+3*this.dpr),a=(a+=14*this.dpr)<n?n:a,this.setSize(this.width,a),this.tipsbg.resize(this.width,this.height),this.tipsbg.x=.5*this.width,this.tipsbg.y=.5*this.height,this.tipsText.y=7*this.dpr,this.mExpires.y=this.tipsText.y+this.tipsText.height+3*this.dpr},DetailBubble.prototype.getDataFormat=function(e){var i=Math.floor(e/864e5),n=Math.floor(e/36e5)%24,a=Math.floor(e/6e4)%60,s=Math.floor(e/1e3)%60,h=o.i18n.t("furni_bag.timelimit")+":  ";if(i>0)h+="[color=#FF0000]"+(i+"-"+this.stringFormat(n)+":"+this.stringFormat(a)+":"+this.stringFormat(s))+"[/color]";else if(n>0||a>0||s>0){h+="[color=#FF0000]"+(this.stringFormat(n)+":"+this.stringFormat(a)+":"+this.stringFormat(s))+"[/color]"}else{h+="[color=#FF0000]"+(""+o.i18n.t("furni_bag.expires"))+"[/color]"}return h},DetailBubble.prototype.stringFormat=function(e){var i=e+"";return i.length<=1&&(i="0"+i),i},DetailBubble}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"MoneyCompent",(function(){return m}));var a,s=n(788),o=n(813),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function MoneyCompent(i,n,a,s,o){var h=e.call(this,i)||this;return h.setSize(n,a),h.dpr=s,h.zoom=o,h.create(),h}return c(MoneyCompent,e),MoneyCompent.prototype.setHandler=function(e){this.send=e},MoneyCompent.prototype.setMoneyData=function(e,i){i=i||0,(e=e||0)>99999?(this.moneyvalue.setText(Math.floor(e/1e3)/10+""),this.moneyvalue.setUintText({img:!0})):(this.moneyvalue.setText(e+""),this.moneyvalue.setUintTextVisible(!1)),i>99999?(this.diamondvalue.setText(Math.floor(i/1e3)/10+""),this.diamondvalue.setUintText({img:!0})):(this.diamondvalue.setText(i+""),this.diamondvalue.setUintTextVisible(!1)),this.money=e,this.diamond=i},MoneyCompent.prototype.create=function(){var e=new s.NineSlicePatch(this.scene,0,-this.dpr,this.width,this.height,h.d.uicommon,"home_assets_bg",{left:17*this.dpr,top:0*this.dpr,right:17*this.dpr,bottom:0*this.dpr});e.x=.5*-e.width;var i=this.scene.make.image({x:e.x,y:0,key:h.d.uicommon,frame:"home_assets_division"},!1);this.moneyvalue=new o.ImageValue(this.scene,60*this.dpr,26*this.dpr,h.d.uicommon,"home_silver",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:l.Font.NUMBER}),this.moneyvalue.setLayout(1),this.moneyvalue.x=e.x-.5*e.width+22*this.dpr,this.diamondvalue=new o.ImageValue(this.scene,60*this.dpr,26*this.dpr,h.d.uicommon,"home_diamond",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:l.Font.NUMBER}),this.diamondvalue.setLayout(1),this.diamondvalue.x=e.x+22*this.dpr,this.moneyAddBtn=new s.Button(this.scene,h.d.uicommon,"home_praise_bg","home_praise_bg");var n=this.scene.make.image({x:0,y:0,key:h.d.uicommon,frame:"home_assets_add"},!1);this.moneyAddBtn.add(n),this.moneyAddBtn.x=.5*-this.moneyAddBtn.width-4*this.dpr,this.moneyAddBtn.on(s.ClickEvent.Tap,this.onRechargeHandler,this),this.add([e,i,this.moneyvalue,this.diamondvalue,this.moneyAddBtn])},MoneyCompent.prototype.onRechargeHandler=function(){this.send&&this.send.run()},MoneyCompent}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"CommonBackground",(function(){return l}));var a,s=n(790),o=n(789),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function CommonBackground(i,n,a,o,h,l,c,m){var f=e.call(this,i,n,a,!1)||this;return f.setSize(o,h),f.key=l||s.d.uicommon,f.bgFrame=c||"online_bg",f.bottomColor=void 0===m?118271:m,f.init(),f.enable=!0,f}return h(CommonBackground,e),CommonBackground.prototype.resize=function(e,i){this.setSize(e,i),this.background.y=.5*-i+.5*this.background.height,this.graphic.clear(),this.graphic.fillStyle(this.bottomColor,1),this.graphic.fillRect(0,0,e,i),this.graphic.x=.5*-e,this.graphic.y=.5*-i},CommonBackground.prototype.init=function(){this.background=this.scene.make.image({key:this.key,frame:this.bgFrame}),this.background.displayWidth=this.width,this.graphic=this.scene.make.graphics(void 0,!1),this.add([this.graphic,this.background]),this.resize(this.width,this.height)},CommonBackground}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"InputView",(function(){return m}));var a,s=n(788),o=n(790),h=n(0),l=n(789),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function InputView(i,n){return e.call(this,i,n)||this}return c(InputView,e),InputView.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mWorld.uiManager.getUILayerManager().addToDialogLayer(this):this.preload())},InputView.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;this.content.x=a/2,this.content.y=s/2,e.prototype.resize.call(this,i,n),this.border.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains)},InputView.prototype.preload=function(){this.addAtlas(o.c.common3Key,o.d.textureUrl(o.d.common3Url),o.d.jsonUrl(o.d.common3Url)),this.addAtlas(o.c.commonKey,o.d.textureUrl(o.d.commonUrl),o.d.jsonUrl(o.d.commonUrl)),e.prototype.preload.call(this)},InputView.prototype.init=function(){var i=this.scene.cameras.main,n=i.width,a=i.height,l=this.scene.make.graphics(void 0,!1);l.fillStyle(0,.6),l.fillRect(0,0,n,a),this.add(l),this.border=l,this.content=this.scene.make.container(void 0,!1),this.add(this.content);var c=this.scene.make.image({key:o.c.common3Key,frame:"bg_universal_box"});this.content.add(c),this.content.setSize(c.width,c.height),this.closeBtn=new s.Button(this.scene,this.key,"close"),this.closeBtn.setDisplaySize(28*this.dpr,28*this.dpr),this.closeBtn.setPosition(.5*this.content.width-5*this.dpr,.5*-this.content.height+4*this.dpr),this.closeBtn.on(String(s.ClickEvent.Tap),this.onCloseHandler,this),this.add(this.closeBtn);var m=this.scene.make.image({y:-c.height/2,key:o.c.common3Key,frame:"title"});m.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.content.add(m),this.mTitleLabel=this.scene.make.text({y:m.y-6*this.dpr,style:{fontFamily:h.Font.DEFULT_FONT,fontSize:19*this.dpr,color:"#905B06"}},!1).setOrigin(.5),this.content.add(this.mTitleLabel);var f=new s.NineSliceButton(this.mScene,0,0,181*this.dpr,45*this.dpr,o.c.commonKey,"yellow_btn_normal",h.i18n.t("common.editnow"),this.dpr,this.scale,h.UIHelper.button(this.dpr));f.setTextStyle(h.UIHelper.brownishStyle(this.dpr,21)),f.setFontStyle("bold"),f.y=.5*this.content.height-.5*f.height-20*this.dpr,f.on(s.ClickEvent.Tap,this.onClickHandler,this),this.content.add(f),this.mInput=this.createInput(0,-30*this.dpr,279*this.dpr,52*this.dpr,17*this.dpr),this.mInput.on("textchange",this.onTextChangeHandler,this),e.prototype.init.call(this),this.resize(n,a),this.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains)},InputView.prototype.createInput=function(e,i,n,a,o,h){void 0===h&&(h="text");var l=this.scene.make.graphics(void 0,!1);l.fillStyle(10809331,.66),l.fillRoundedRect(.5*-n,.5*-a,n,a,6*this.dpr),l.setPosition(e,i),this.content.add(l);var c=new s.InputText(this.scene,e,i,n-20*this.dpr,a-10*this.dpr,{type:h,placeholder:this.showData.placeholder,color:"#055C62",fontSize:o+"px"});return this.content.add(c),c},InputView.prototype.onClickHandler=function(){var e=this.mInput.text,i=this.showData.handler;i&&i.runWith(e),this.onCloseHandler()},InputView.prototype.onCloseHandler=function(){this.parentContainer&&(this.parentContainer.remove(this),this.destroy()),this.mShowData&&!1===this.mShowData.once||(this.destroy(),this.mShowData=void 0)},InputView.prototype.onTextChangeHandler=function(){var e=this.showData.maxWidth;e&&(this.mInput.text=h.UIHelper.spliceText(e,this.mInput.text,17*this.dpr,this.scene))},InputView}(l.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"ItemsConsumeFunPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(0),l=n(790),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function ItemsConsumeFunPanel(i,n,a,s,o,h){void 0===h&&(h=!0);var l=e.call(this,i)||this;return l.materialItems=[],l.havebutton=!0,l.isEnough=!1,l.dpr=s,l.zoom=o,l.havebutton=h,l.setSize(n,a),l.create(),l}return c(ItemsConsumeFunPanel,e),ItemsConsumeFunPanel.prototype.createBackGrphaic=function(e,i){this.mblackGraphic=this.scene.make.graphics(void 0,!1),this.mblackGraphic.setInteractive(new Phaser.Geom.Rectangle(0,0,e,i),Phaser.Geom.Rectangle.Contains),this.mblackGraphic.fillStyle(0,.66),this.mblackGraphic.fillRect(.5*-e,.5*-i+this.y,e,i),this.addAt(this.mblackGraphic,0)},ItemsConsumeFunPanel.prototype.resetMask=function(){this.gameScroll.refreshMask()},ItemsConsumeFunPanel.prototype.setHandler=function(e){this.confirmHandler=e},ItemsConsumeFunPanel.prototype.setTextInfo=function(e,i,n){this.title.text="[b]"+e+"[/b]",this.materialTitle.text=i,this.materialLine.x=this.materialTitle.x-.5*this.materialTitle.width-6*this.dpr-.5*this.materialLine.width,this.materialLine2.x=this.materialTitle.x+.5*this.materialTitle.width+6*this.dpr+.5*this.materialLine2.width,this.havebutton&&void 0!==n&&this.confirmBtn.setText(n)},ItemsConsumeFunPanel.prototype.setItemDatas=function(e){this.gameScroll.visible=!0,this.gameScroll.clearItems(!1);for(var i=0,n=this.materialItems;i<n.length;i++){(s=n[i]).visible=!1}this.isEnough=!0;for(var a=0;a<e.length;a++){var s=void 0,o=e[a];a<this.materialItems.length?s=this.materialItems[a]:(s=new f(this.scene,this.dpr),this.materialItems.push(s)),s.visible=!0,s.setItemData(o),this.gameScroll.addItem(s),o.neededCount>o.count&&(this.isEnough=!1)}this.gameScroll.Sort()},ItemsConsumeFunPanel.prototype.setContent=function(e){this.contentTitle.visible=!0,this.contentTitle.text=e,this.gameScroll.visible=!1},ItemsConsumeFunPanel.prototype.create=function(){var e=this,i=this.scene.make.image({key:l.c.common2Key,frame:"bg_universal_box"});i.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.add(i),this.setSize(i.width,i.height),this.title=new s.BBCodeText(this.scene,0,.5*-this.height+22*this.dpr,"",{color:"#996600",fontSize:14*this.dpr,fontFamily:h.Font.DEFULT_FONT,stroke:"#996600",strokeThickness:3*this.dpr}).setOrigin(.5),this.add(this.title),this.closeBtn=new s.Button(this.scene,l.c.commonKey,"close","close"),this.closeBtn.setPosition(.5*this.width-5*this.dpr,.5*-this.height+5*this.dpr).setScale(1.3),this.closeBtn.on(String(s.ClickEvent.Tap),this.onCloseHandler,this),this.add(this.closeBtn);var n=this.havebutton?0:20*this.dpr;this.materialTitle=this.scene.make.text({x:0,y:.5*-this.height+50*this.dpr+n,text:"",bold:!0,style:{color:"#263FCB",fontSize:12*this.dpr,fontFamily:h.Font.DEFULT_FONT,wordWrap:{width:90*this.dpr,useAdvancedWrap:!0}}},!1).setOrigin(.5),this.materialLine=this.scene.make.image({x:-10*this.dpr,y:this.materialTitle.y,key:l.c.common2Key,frame:"line_left"}),this.materialLine.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.materialLine2=this.scene.make.image({x:10*this.dpr,y:this.materialTitle.y,key:l.c.common2Key,frame:"line_right"}),this.materialLine2.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.add([this.materialTitle,this.materialLine,this.materialLine2]),this.gameScroll=new s.GameScroller(this.scene,{x:0,y:-7*this.dpr+n,width:this.width-40*this.dpr,height:90*this.dpr,zoom:this.zoom,align:2,orientation:1,dpr:this.dpr,space:12*this.dpr,cellupCallBack:function(i){e.onMaterialItemHandler(i)}}),this.add(this.gameScroll),this.contentTitle=this.scene.make.text({x:0,y:-10*this.dpr+n,text:"",style:{color:"#FFC51A",fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT}},!1).setOrigin(.5),this.add(this.contentTitle),this.contentTitle.visible=!1,this.havebutton&&(this.confirmBtn=new s.NineSliceButton(this.scene,0,0,106*this.dpr,40*this.dpr,l.c.commonKey,"yellow_btn",h.i18n.t("common.confirm"),this.dpr,1,{left:12*this.dpr,top:12*this.dpr,right:12*this.dpr,bottom:12*this.dpr}),this.confirmBtn.y=.5*this.height-.5*this.confirmBtn.height-13*this.dpr,this.confirmBtn.setTextStyle({fontSize:16*this.dpr,color:"#996600"}),this.confirmBtn.on(String(s.ClickEvent.Tap),this.onConfirmHandler,this),this.add(this.confirmBtn));var a=145*this.dpr,c=55*this.dpr;this.itemtips=new o.ItemInfoTips(this.scene,a,c,l.c.common2Key,"tips_bg",this.dpr,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr}),this.itemtips.x=.5*-this.width+.5*a+10*this.dpr,this.itemtips.y=.5*-this.height+70*this.dpr,this.itemtips.setVisible(!1),this.add(this.itemtips)},ItemsConsumeFunPanel.prototype.onConfirmHandler=function(){this.onCloseHandler(),this.confirmHandler&&this.isEnough&&this.confirmHandler.run()},ItemsConsumeFunPanel.prototype.onCloseHandler=function(){this.visible=!1,this.gameScroll.clearItems(!1),this.gameScroll.visible=!1,this.contentTitle.visible=!1,this.itemtips.setVisible(!1),this.curSelectItem&&(this.curSelectItem.select=!1,this.curSelectItem=void 0),this.parentContainer&&this.parentContainer.remove(this)},ItemsConsumeFunPanel.prototype.onMaterialItemHandler=function(e){this.itemtips.setVisible(!1),this.curSelectItem&&this.curSelectItem!==e&&(this.curSelectItem.select=!1),e.select=!e.select,e.select&&(this.itemtips.setItemData(e.itemData),this.itemtips.setVisible(!0)),this.curSelectItem=e,this.setTipsPosition(e)},ItemsConsumeFunPanel.prototype.setTipsPosition=function(e){for(var i=e.x,n=e.y,a=e;a.parentContainer!==this;)i+=a.parentContainer.x,n+=a.parentContainer.y,a=a.parentContainer;i-.5*this.itemtips.width<.5*-this.width?this.itemtips.x=.5*this.itemtips.width-.5*this.width:i+.5*this.itemtips.width>.5*this.width?this.itemtips.x=.5*this.width-.5*this.itemtips.width:this.itemtips.x=i,this.itemtips.y=n-.5*this.itemtips.height+5*this.dpr},ItemsConsumeFunPanel}(Phaser.GameObjects.Container),f=function(e){function MaterialItem(i,n){var a=e.call(this,i)||this;return a.mselect=!1,a.dpr=n,a.bg=a.scene.make.image({key:l.c.common2Key,frame:"material_unchecked"}),a.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),a.itemIcon=new o.DynamicImage(i,0,0),a.itemCount=new s.BBCodeText(a.scene,0,15*n,"10/20",{color:"#000000"}).setOrigin(.5).setFontSize(11*n).setFontFamily(h.Font.DEFULT_FONT),a.add([a.bg,a.itemIcon,a.itemCount]),a.setSize(a.bg.width,a.bg.height),a.itemCount.y=.5*a.height+8*n,a}return c(MaterialItem,e),MaterialItem.prototype.setItemData=function(e){var i=this;this.itemData=e,this.itemCount.text=this.getCountText(e.count,e.neededCount);var n=h.Url.getOsdRes(e.texturePath);this.itemIcon.load(n,this,(function(){i.itemIcon.scale=i.dpr,i.itemIcon.setPosition(0,0)}))},Object.defineProperty(MaterialItem.prototype,"select",{get:function(){return this.mselect},set:function(e){this.mselect=e,this.bg.setFrame(e?"material_checked":"material_unchecked")},enumerable:!1,configurable:!0}),MaterialItem.prototype.getCountText=function(e,i){var n=e>=i?"#000000":"#ff0000";return"[stroke="+n+"][color="+n+"]"+e+"[/color][/stroke]/"+i},MaterialItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"MoreButtonPanel",(function(){return m}));var a,s=n(788),o=n(790),h=n(0),l=n(789),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function MoreButtonPanel(i,n,a,s){var o=e.call(this,i)||this;return o.dpr=s,o.setSize(n,a),o.init(),o}return c(MoreButtonPanel,e),MoreButtonPanel.prototype.setItemData=function(e,i){this.itemdata=e,this.setLayoutType(i)},MoreButtonPanel.prototype.setLayoutType=function(e){this.place.visible=!1,this.sell.visible=!1,this.removeListen(),1===e||5===e?(this.place.visible=!0,this.place.y=.5*this.height-.5*this.place.height,this.topbg.y=this.place.y-.5*this.place.height-.5*this.topbg.height,this.place.on(s.ClickEvent.Tap,this.onPlaceHandler,this)):3===e&&(this.sell.visible=!0,this.sell.y=.5*this.height-.5*this.sell.height,this.topbg.y=this.sell.y-.5*this.sell.height-.5*this.topbg.height,this.sell.on(s.ClickEvent.Tap,this.onSellHandler,this)),this.on("pointerdown",this.hide,this)},MoreButtonPanel.prototype.setHandler=function(e){this.send=e},MoreButtonPanel.prototype.show=function(){this.addListen(),this.visible=!0},MoreButtonPanel.prototype.hide=function(){this.removeListen(),this.visible=!1},MoreButtonPanel.prototype.addListen=function(){},MoreButtonPanel.prototype.removeListen=function(){this.place.off(s.ClickEvent.Tap,this.onPlaceHandler,this),this.sell.off(s.ClickEvent.Tap,this.onSellHandler,this),this.off("pointerdown",this.hide,this)},MoreButtonPanel.prototype.init=function(){this.blackGraphic=this.scene.make.graphics(void 0,!1),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.66),this.blackGraphic.fillRect(0,0,this.width,this.height),this.blackGraphic.x=.5*-this.width,this.blackGraphic.y=.5*-this.height,this.topbg=new l.ThreeSlicePath(this.scene,0,0,327*this.dpr,10*this.dpr,o.d.uicommon,["bag_more_left","bag_more_middle","bag_more_right"]),this.place=new l.BackgroundScaleButton(this.scene,327*this.dpr,53*this.dpr,o.d.uicommon,"bag_more_uncheck","bag_more_select",h.i18n.t("furni_bag.add"),this.dpr,1,!1),this.place.setTextStyle(h.UIHelper.blackStyle(this.dpr,20)),this.sell=new l.BackgroundScaleButton(this.scene,327*this.dpr,53*this.dpr,o.d.uicommon,"bag_more_uncheck","bag_more_select",h.i18n.t("common.sold"),this.dpr,1,!1),this.sell.setTextStyle(h.UIHelper.blackStyle(this.dpr,20)),this.add([this.blackGraphic,this.topbg,this.place,this.sell]),this.setInteractive()},MoreButtonPanel.prototype.onPlaceHandler=function(){this.send&&this.send.runWith(["place",this.itemdata]),this.hide()},MoreButtonPanel.prototype.onSellHandler=function(){this.send&&this.send.runWith(["sell",this.itemdata]),this.hide()},MoreButtonPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"UITools",(function(){return c}));var a=n(788),s=n(789),o=n(790),h=n(2),l=n(0),c=function(){function UITools(){}return UITools.showDetailDisplay=function(e){var showFun=function(n){var a=e.display,s=e.dpr;if(n&&a&&a.scene){a.displayLoading("loading_ui",l.Url.getUIRes(s,"loading_ui/loading_ui.png"),l.Url.getUIRes(s,"loading_ui/loading_ui.json"));var o={};n.suitType?(o.suit=[{suit_type:n.suitType,sn:n.sn,tag:n.tag,version:n.version}],o.avatar=h.AvatarSuitType.createAvatarBySn(n.suitType,n.sn,n.slot,n.tag,n.version)):(o.display=n.animationDisplay||n.display,o.animations=n.animations),a.loadDisplay(o)}var c=e.render,m=h.EventType.RETURN_ELEMENT_PI_DATA+"_"+e.sn;c.emitter.off(m,showFun,i)},i={showFun:showFun};if(e.data)showFun(e.data);else{var n=e.render,a={sn:e.sn,itemid:e.itemid,serialize:e.serialize,ownerType:e.ownerType};n.renderEmitter(h.EventType.QUEST_ELEMENT_PI_DATA,a);var s=h.EventType.RETURN_ELEMENT_PI_DATA+"_"+e.sn;n.emitter.on(s,showFun,i)}},UITools.creatRedImge=function(e,i,n){var a=e.make.image({key:o.d.uicommon,frame:"home_hint_b"});return n?(n.x=n.x||0,n.y=n.y||0):n={x:0,y:0},a.x=.5*i.width-.5*a.width+n.x,a.y=.5*-i.height+.5*a.height+n.y,i.add(a),a.visible=!1,a},UITools.createBackButton=function(e,i,n,h,c){void 0===c&&(c="");var m=new s.ButtonEventDispatcher(e,0,0);m.setSize(80*i,22*i),m.enable=!0,m.on(a.ClickEvent.Tap,n,h);var f=e.make.image({key:o.d.uicommon,frame:"back_arrow"});f.x=.5*-m.width+.5*f.width+10*i;var g=e.make.text({text:c,style:l.UIHelper.whiteStyle(i,16)}).setOrigin(0,.5);return g.x=f.x+.5*f.width+15*i,g.setFontStyle("bold"),m.add([f,g]),m},UITools}()},function(e,i,n){"use strict";n.r(i),n.d(i,"ActivityPanel",(function(){return c}));var a,s=n(788),o=n(789),h=n(2),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},c=function(e){function ActivityPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=h.ModuleName.ACTIVITY_NAME,n}return l(ActivityPanel,e),ActivityPanel.prototype.resize=function(e,i){var n=this.scaleWidth;this.scaleHeight;this.content.x=n-20*this.dpr,this.content.y=.5*this.content.height+90*this.dpr,this.setSize(e,i),this.mGameScroll.refreshMask()},ActivityPanel.prototype.show=function(i){this.mInitialized&&this.setInteractive(),e.prototype.show.call(this,i),this.checkUpdateActive()},ActivityPanel.prototype.addListen=function(){this.mInitialized&&this.mGameScroll.addListen()},ActivityPanel.prototype.removeListen=function(){this.mInitialized&&this.mGameScroll.removeListen()},ActivityPanel.prototype.updateUIState=function(e){this.mInitialized&&("activity.taskbtn"===e.name&&(this.mGameScroll.getItemAt(3).visible=e.visible,this.mGameScroll.Sort()))},ActivityPanel.prototype.preload=function(){this.addAtlas(this.key,"activity/activity.png","activity/activity.json"),e.prototype.preload.call(this)},ActivityPanel.prototype.init=function(){var i=this,n=60*this.dpr,a=270*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(n,a),this.add(this.content),this.mGameScroll=new s.GameScroller(this.scene,{x:0,y:0,width:this.content.width,height:this.content.height-50*this.dpr,zoom:this.scale,dpr:this.dpr,align:2,orientation:0,space:10*this.dpr,selfevent:!0,cellupCallBack:function(e){i.onPointerUpHandler(e)}}),this.content.add(this.mGameScroll);var o=this.scene.make.image({key:this.key,frame:"home_more"});o.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.content.add(o),o.y=.5*a-.5*o.height;for(var h=0;h<4;h++){var l="icon_"+(h+1),c=this.scene.make.image({key:this.key,frame:l});c.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.name=h+1+"",this.mGameScroll.addItem(c)}this.mGameScroll.Sort(),this.resize(n,a),e.prototype.init.call(this)},ActivityPanel.prototype.onClickHandler=function(e){"4"===e?this.render.renderEmitter("showPanel",h.ModuleName.PICATASK_NAME):"3"===e?this.render.renderEmitter("showPanel",h.ModuleName.PICAFRIEND_NAME):"2"===e?this.render.renderEmitter("showPanel",h.ModuleName.PICAORDER_NAME):"1"===e&&this.render.renderEmitter("showPanel",h.ModuleName.PICARECHARGE_NAME)},ActivityPanel.prototype.checkUpdateActive=function(){return __awaiter(this,void 0,void 0,(function(){var e,i,n,a;return __generator(this,(function(s){switch(s.label){case 0:return[4,this.render.mainPeer.getActiveUIData("Activity")];case 1:if(e=s.sent())for(i=0,n=e;i<n.length;i++)a=n[i],this.updateUIState(a);return[2]}}))}))},ActivityPanel.prototype.onPointerUpHandler=function(e){var i=e.name;this.onClickHandler(i)},ActivityPanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"CharacterInfoPanel",(function(){return x}));var a,s,o=n(831),h=n(830),l=n(788),c=n(790),m=n(0),f=n(2),g=n(789),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__spreadArrays=function(){for(var e=0,i=0,n=arguments.length;i<n;i++)e+=arguments[i].length;var a=Array(e),s=0;for(i=0;i<n;i++)for(var o=arguments[i],h=0,l=o.length;h<l;h++,s++)a[s]=o[h];return a},T=Phaser.GameObjects.Container,x=function(e){function CharacterInfoPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.uiManager=i,n.commonkey="common_key",n.isOwner=!0,n.key=f.ModuleName.CHARACTERINFO_NAME,n}return _(CharacterInfoPanel,e),CharacterInfoPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.mBackGround.clear(),this.mBackGround.fillStyle(0,.66),this.mBackGround.fillRect(0,0,a,s),this.content.setPosition(a/2,s/2),this.mSkillGrideTable.resetMask(),this.content.setInteractive(),this.mCategoryScroll.refreshMask();var o=this.mFirendMenu.getWorldTransformMatrix();this.mFirendMenu.addMask(o.tx-42*this.dpr*this.scale,o.ty,200*this.dpr*this.scale,80*this.dpr*this.scale)},CharacterInfoPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,e&&e.length>0&&this.setPlayerData(e),this.setInteractive(),this.addListen()):this.preload())},CharacterInfoPanel.prototype.hide=function(){e.prototype.hide.call(this)},CharacterInfoPanel.prototype.update=function(i){e.prototype.update.call(this,i),i&&this.setPlayerData(i)},CharacterInfoPanel.prototype.addListen=function(){this.mInitialized&&(this.closeBtn.on(String(l.ClickEvent.Tap),this.OnClosePanel,this),this.nickEditor.on(String(l.ClickEvent.Tap),this.onEditorHandler,this),this.privaCharBtn.on(String(l.ClickEvent.Tap),this.onPrivateChatHandler,this),this.addFriendBtn.on(String(l.ClickEvent.Tap),this.onAddFriendHandler,this),this.mExitBtn.on(String(l.ClickEvent.Tap),this.onExitHandler,this),this.mFirendMenu.register(),this.render.emitter.on("track",this.onTrackHandler,this),this.render.emitter.on("invite",this.onIntiveHandler,this),this.mCharacterMenu.register(),this.render.emitter.on("addBlack",this.onAddBlacklistHandler,this),this.render.emitter.on("removeBlack",this.onRemoveBlacklistHandler,this))},CharacterInfoPanel.prototype.removeListen=function(){this.mInitialized&&(this.closeBtn.off(String(l.ClickEvent.Tap),this.OnClosePanel,this),this.nickEditor.off(String(l.ClickEvent.Tap),this.onEditorHandler,this),this.privaCharBtn.off(String(l.ClickEvent.Tap),this.onPrivateChatHandler,this),this.addFriendBtn.off(String(l.ClickEvent.Tap),this.onAddFriendHandler,this),this.mExitBtn.off(String(l.ClickEvent.Tap),this.onExitHandler,this),this.mFirendMenu.unregister(),this.render.emitter.off("track",this.onTrackHandler,this),this.render.emitter.off("invite",this.onIntiveHandler,this),this.mCharacterMenu.unregister(),this.render.emitter.off("addBlack",this.onAddBlacklistHandler,this),this.render.emitter.off("removeBlack",this.onRemoveBlacklistHandler,this))},CharacterInfoPanel.prototype.preload=function(){this.addAtlas(this.key,"player_info/player_info.png","player_info/player_info.json"),this.commonkey=c.c.commonKey,this.addAtlas(this.commonkey,c.d.commonUrl+".png",c.d.commonUrl+".json"),e.prototype.preload.call(this)},CharacterInfoPanel.prototype.init=function(){var i=this,n=this.scaleWidth,a=this.scaleHeight;this.mBackGround=this.scene.make.graphics(void 0,!1),this.mBackGround.clear(),this.mBackGround.fillStyle(7004927,0),this.mBackGround.fillRect(0,0,n,a),this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.add(this.mBackGround),this.bg=this.scene.make.image({x:0,y:0,key:this.key,frame:"bg"}),this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.content=this.scene.make.container(void 0,!1),this.content.setSize(this.bg.width,this.bg.height),this.add(this.content),this.content.add(this.bg),this.mainCon=this.scene.make.container(void 0,!1),this.mainCon.setSize(this.bg.width,this.bg.height),this.content.add(this.mainCon);var s=.5*-this.bg.height+43*this.dpr,o="bold "+15*this.dpr+"px Source Han Sans";this.labelText=this.scene.make.text({x:0,y:s,text:m.i18n.t("player_info.title"),style:{font:o,bold:!0,color:"#ffffff",fontSize:15*this.dpr,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(.5,0),this.labelText.setStroke("#8F4300",1),this.closeBtn=new l.Button(this.scene,this.commonkey,"close"),this.closeBtn.setPosition(.5*this.mainCon.width-30*this.dpr,s-10*this.dpr),this.likeBtn=new l.Button(this.scene,this.key,"praise_bef","praise_bef","999"),this.likeBtn.setTextStyle({fontSize:13*this.dpr,fontFamily:m.Font.DEFULT_FONT}),this.likeBtn.text.setOrigin(0,.5).x+=10*this.dpr,this.likeBtn.setPosition(.5*this.bg.width-50*this.dpr,s+50*this.dpr),this.likeBtn.visible=!1,this.avatar=new g.UIDragonbonesDisplay(this.scene,this.render),this.avatar.scale=2*this.dpr,this.avatar.x=0,this.avatar.y=-70*this.dpr,this.avatar.once("initialized",(function(){i.avatar.play({name:"idle",flip:!1})})),this.mainCon.add([this.labelText,this.closeBtn,this.likeBtn,this.avatar]),this.mFirendMenu=new q(this.uiManager.render,this.scene,this.dpr,this.scale),this.mFirendMenu.x=.5*this.bg.width-this.mFirendMenu.width-14*this.dpr,this.mFirendMenu.y=.5*-this.bg.height+200*this.dpr,this.mCharacterMenu=new Y(this.uiManager.render,this.scene,this.dpr,this.scale),this.mCharacterMenu.x=.5*this.bg.width-this.mCharacterMenu.width-14*this.dpr,this.mCharacterMenu.y=.5*-this.bg.height+100*this.dpr,this.mExitBtn=new l.NineSliceButton(this.scene,.5*-this.bg.width+40*this.dpr,this.labelText.y+.5*this.labelText.height,48*this.dpr,26*this.dpr,this.commonkey,"yellow_btn_normal_s","注销",this.dpr,this.scale,{left:8*this.dpr,top:8*this.dpr,right:8*this.dpr,bottom:10*this.dpr}),this.mExitBtn.setTextStyle({fontSize:10*this.dpr,fontFamily:m.Font.DEFULT_FONT}),this.mainCon.add([this.mFirendMenu,this.mCharacterMenu,this.mExitBtn]);var c=Math.round(.5*-this.bg.width+25*this.dpr),f=Math.round(.5*this.bg.height-324*this.dpr)+30*this.dpr,_=Math.round(13*this.dpr);this.nickName=new l.BBCodeText(this.scene,c,f,"",{}).setOrigin(0,.5).setFontSize(_).setFontFamily(m.Font.DEFULT_FONT),this.nickEditor=new l.Button(this.scene,this.key,"edit","edit"),this.nickEditor.setPosition(.5*this.bg.width-30*this.dpr,f).visible=!1;var T=this.scene.make.image({x:0,y:this.nickName.y+12*this.dpr,key:this.key,frame:"splitters"});T.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),T.scaleY=this.dpr,this.idText=new l.BBCodeText(this.scene,c,f).setFontSize(_).setOrigin(0,.5).setFontFamily(m.Font.DEFULT_FONT).setColor("#0062BC");var x=this.scene.make.image({x:0,y:this.idText.y+12*this.dpr,key:this.key,frame:"splitters"});x.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),x.scaleY=this.dpr,this.titleName=new l.BBCodeText(this.scene,c,f+30*this.dpr).setFontSize(_).setOrigin(0,.5).setFontFamily(m.Font.DEFULT_FONT);var j=this.scene.make.image({x:0,y:this.titleName.y+12*this.dpr,key:this.key,frame:"splitters"});j.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),j.scaleY=this.dpr;var X=this.scene.make.image({x:0,y:0,key:this.key,frame:"level_bg"});X.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.lvText=this.scene.make.text({x:0,y:0,text:"lv 98",style:{color:"#996600",fontSize:_,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(.5,.5),this.lvCon=this.scene.make.container(void 0,!1),this.lvCon.setSize(X.width,X.height),this.lvCon.setPosition(.5*-this.content.width+.5*this.lvCon.width+20*this.dpr,.5*-this.content.height+90*this.dpr),this.lvCon.add([X,this.lvText]),this.mainCon.add([this.nickName,this.nickEditor,T,x,j,this.titleName,this.lvCon]);var Z=260*this.dpr,$=210*this.dpr;this.bottomCon=this.scene.make.container(void 0,!1),this.bottomCon.setSize(Z,$),this.bottomCon.setPosition(0,.5*this.bg.height-.5*$-30*this.dpr),this.mainCon.add(this.bottomCon),this.bottombg=this.scene.make.graphics(void 0,!1);var tt=32*this.dpr,et=.5*-$+.5*tt-3*this.dpr;this.mCategoryScroll=new l.GameScroller(this.scene,{x:0,y:et,width:Z,height:tt,zoom:this.scale,orientation:1,dpr:this.dpr,space:10*this.dpr,cellupCallBack:function(e){i.onSelectSubCategoryHandler(e)}});var it=this.scene.textures.getFrame(this.key,"skill_bg"),nt=it.width+5*this.dpr,rt=it.height+8*this.dpr,at=this.bottomCon.width,st=200*this.dpr,ot=et+.5*tt+.5*st;this.mSkillGrideTable=this.createGrideTable(0,ot,at,st,nt,rt,(function(){return new S(i.scene,0,0,i.key,i.dpr)}),new m.Handler(this,this.onSelectItemHandler));var ht=150*this.dpr;this.mAttrPanel=new h.CharacterAttributePanel(this.scene,0,ot,at-30*this.dpr,ht,this.key,this.dpr),this.bottomCon.add([this.bottombg,this.mCategoryScroll,this.mSkillGrideTable,this.mAttrPanel]);var lt=-60*this.dpr,ct=.5*this.bottomCon.height-20*this.dpr;this.addFriendBtn=new l.NineSliceButton(this.scene,0,ct,94*this.dpr,37*this.dpr,this.key,"button_g",m.i18n.t("player_info.add_friend"),this.dpr,this.scale,{left:12*this.dpr,top:12*this.dpr,right:12*this.dpr,bottom:12*this.dpr}),this.addFriendBtn.setFrameNormal("button_g"),this.privaCharBtn=new l.NineSliceButton(this.scene,lt,ct,94*this.dpr,37*this.dpr,this.commonkey,"yellow_btn",m.i18n.t("player_info.private_chat"),this.dpr,this.scale,{left:12*this.dpr,top:12*this.dpr,right:12*this.dpr,bottom:12*this.dpr}),this.addFriendBtn.setTextStyle({fontSize:16*this.dpr,color:"#000000"}),this.privaCharBtn.setTextStyle({fontSize:16*this.dpr,color:"#996600"}),this.bottomCon.add([this.addFriendBtn,this.privaCharBtn]),this.content.visible=!1,this.resize(n,a),e.prototype.init.call(this)},CharacterInfoPanel.prototype.reqPlayerInfo=function(){this.render.renderEmitter("queryOwnerInfo")},CharacterInfoPanel.prototype.setPlayerData=function(e){if(this.mInitialized){this.mCharacterData=e,this.content.visible=!0;var i=e.nickname?e.nickname:"???",n=e.currentTitle?e.currentTitle:"???",a=(e.level&&e.level.currentLevelExp&&e.level.currentLevelExp,e.level&&e.level.nextLevelExp&&e.level.nextLevelExp,e.cid,e.level&&e.level.level?e.level.level:0),o=this.getspaceStr(1*this.dpr);if(this.avatar&&e.avatarSuit){var h=f.AvatarSuitType.getSuitsFromItem(e.avatarSuit);this.avatar.setSuits(h.suits),this.avatar.load({id:0,avatar:h.avatar},void 0,!1)}this.titleName.setText(this.getRichLabel(m.i18n.t("player_info.player_title"))+o+n);var l=e.like?e.like+"":"???";this.likeBtn.setText(l+"");var c=.5*this.bg.width-.5*this.likeBtn.width-this.likeBtn.text.width;this.likeBtn.x=c-20*this.dpr,this.lvText.text="lv "+a,this.idText.setText("(52365404)");var g=new Map,_=e.lifeSkills?e.lifeSkills:[];if(g.set(s.Skill,_),e.isUser){this.nickName.setText(this.getRichLabel(m.i18n.t("player_info.nick_name"))+o+i),this.likeBtn.setFrame("praise_aft"),g.set(s.Attribute,e.properties?e.properties:[]),g.set(s.Badge,e.badges?e.badges:[]),this.addFriendBtn.visible=!1,this.privaCharBtn.visible=!1,this.mFirendMenu.visible=!1,this.mExitBtn.visible=!0,this.bottombg.clear(),this.bottombg.fillStyle(7004927,1),this.bottombg.fillRect(.5*-this.bottomCon.width,.5*-this.bottomCon.height,this.bottomCon.width,this.bottomCon.height);var T=200*this.dpr;this.mSkillGrideTable.setSize(this.mSkillGrideTable.width,T);var x=0,S=this.mCategoryScroll.y+.5*T+0*this.dpr;this.mSkillGrideTable.refreshPos(x,S),this.mSkillGrideTable.setColumnCount(3),this.isOwner=!0,this.mCharacterMenu.visible=!1,this.mAttrPanel.setSize(this.mAttrPanel.width,T),this.mAttrPanel.y=S+15*this.dpr,this.mAttrPanel.space=20*this.dpr}else{this.nickName.setText(this.getRichLabel(m.i18n.t("player_info.nick_name"))+o+i),this.likeBtn.setFrame("praise_bef"),g.set(s.Attribute,e.properties?e.properties:[]),g.set(s.Badge,e.badges?e.badges:[]),this.addFriendBtn.visible=!!e.friend&&!e.friend,this.privaCharBtn.visible=!!e.friend&&e.friend,this.mExitBtn.visible=!1,this.bottombg.clear(),this.bottombg.fillStyle(7004927,1),this.bottombg.fillRect(.5*-this.bottomCon.width,.5*-this.bottomCon.height,this.bottomCon.width,this.bottomCon.height-55*this.dpr);T=150*this.dpr;this.mSkillGrideTable.setSize(this.mSkillGrideTable.width,T);x=0,S=this.mCategoryScroll.y+.5*T+0*this.dpr;this.mSkillGrideTable.refreshPos(x,S),this.mSkillGrideTable.setColumnCount(2),this.isOwner=!1,this.mCharacterMenu.visible=!0,this.mAttrPanel.setSize(this.mAttrPanel.width,T),this.mAttrPanel.y=S+15*this.dpr,this.mAttrPanel.space=10*this.dpr}this.idText.x=this.nickName.x+this.nickName.width*(1-this.nickName.originX)+8*this.dpr,this.mFirendMenu.visible=!1,this.setSubCategory(g),this.setFriendRelation(f.FriendRelationEnum.Null)}else this.mShowData=e},CharacterInfoPanel.prototype.setFriendRelation=function(e){this.isOwner||(this.mRelation=e,this.mFirendMenu.visible=e===f.FriendRelationEnum.Friend,this.mCharacterMenu.setIsBlack(e===f.FriendRelationEnum.Blacklist),this.addFriendBtn.visible=e!==f.FriendRelationEnum.Blacklist,e===f.FriendRelationEnum.Followed||e===f.FriendRelationEnum.Friend?this.addFriendBtn.setText(m.i18n.t("friendlist.unfollow")):this.addFriendBtn.setText(m.i18n.t("friendlist.follow")))},CharacterInfoPanel.prototype.destroy=function(){this.mSkillGrideTable.destroy(),this.mCategoryScroll.destroy(),this.mBackGround&&this.mBackGround.clear(),e.prototype.destroy.call(this)},CharacterInfoPanel.prototype.createGrideTable=function(e,i,n,a,s,o,h,c){var m=this,f={x:e,y:i,table:{width:n,height:a,columns:3,cellWidth:s,cellHeight:o,reuseCellContainer:!0,cellPadX:24*this.dpr,zoom:this.scale},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&(i=h()),i.setData({item:n}),i.setItemData(n,m.isOwner),i}},g=new l.GameGridTable(this.scene,f);return g.layout(),g.on("cellTap",(function(e){e&&c.runWith(e)})),g},CharacterInfoPanel.prototype.OnClosePanel=function(){this.render.renderEmitter("hide")},CharacterInfoPanel.prototype.setSubCategory=function(e){var i=this,n=(m.i18n.t("player_info.option_live"),m.i18n.t("player_info.option_attribute"),m.i18n.t("player_info.option_badge"),this.mScene.textures.getFrame(this.key,"title_select").width),a=this.mCategoryScroll.getItemList().concat();this.mCategoryScroll.clearItems(!1);for(var s=0,o=a;s<o.length;s++){o[s].visible=!1}var h=0;e.forEach((function(e,s){var o,c=i.getOptionName(s);h<a.length?o=a[h]:((o=new l.Button(i.scene,i.key,"title_normal","title_select",c)).width=n,o.height=41*i.dpr,a.push(o),o.setTextStyle({color:"#2B4BB5",fontSize:12*i.dpr,fontFamily:m.Font.DEFULT_FONT}),o.disInteractive(),o.removeListen()),o.visible=!0,o.setText(c),o.setData("subData",e),o.setData("optiontype",s),i.mCategoryScroll.addItem(o),h++})),a.length<=3?this.mCategoryScroll.setAlign(1):this.mCategoryScroll.setAlign(2),this.onSelectSubCategoryHandler(a[0])},CharacterInfoPanel.prototype.onSelectSubCategoryHandler=function(e){this.curSelectCategeory&&(this.curSelectCategeory.changeNormal(),this.curSelectCategeory.setTextColor("#2B4BB5")),e.changeDown(),e.setTextColor("#996600"),this.curSelectCategeory=e;var i=e.getData("subData"),n=e.getData("optiontype");n===s.Skill?(this.mSkillGrideTable.setItems(i),this.mAttrPanel.visible=!1,this.mSkillGrideTable.visible=!0):n===s.Attribute?(i&&this.mAttrPanel.setAttributeData(i),this.mAttrPanel.visible=!0,this.mSkillGrideTable.setItems([]),this.mSkillGrideTable.visible=!1):n===s.Badge&&(this.mAttrPanel.visible=!1,this.mSkillGrideTable.visible=!1)},CharacterInfoPanel.prototype.onSelectItemHandler=function(e){},CharacterInfoPanel.prototype.onEditorHandler=function(){var e=247*this.dpr,i=this.content.height;this.editorPanel||(this.editorPanel=new o.CharacterEditorPanel(this.scene,0,0,e,i,this.key,this.dpr)),this.content.add(this.editorPanel),this.editorPanel.visible=!0,this.editorPanel.on("editorHide",this.onEditorPanelHideHandler,this),this.setMainUIVisible(!1)},CharacterInfoPanel.prototype.onAddFriendHandler=function(){if(this.mCharacterData)switch(this.mRelation){case f.FriendRelationEnum.Friend:case f.FriendRelationEnum.Followed:this.render.renderEmitter("unfollow",this.mCharacterData.cid);break;case f.FriendRelationEnum.Fans:case f.FriendRelationEnum.Null:this.render.renderEmitter("follow",this.mCharacterData.cid)}},CharacterInfoPanel.prototype.onTradingHandler=function(){},CharacterInfoPanel.prototype.onPrivateChatHandler=function(){},CharacterInfoPanel.prototype.onExitHandler=function(){this.mWorld.exitUser()},CharacterInfoPanel.prototype.onEditorPanelHideHandler=function(){this.mainCon.visible=!0,this.remove(this.editorPanel),this.editorPanel.off("editorHide",this.onEditorPanelHideHandler,this),this.editorPanel.destroy(),this.editorPanel=null,this.setMainUIVisible(!0)},CharacterInfoPanel.prototype.setMainUIVisible=function(e){this.avatar.visible=e,this.mCategoryScroll.visible=e,this.mSkillGrideTable.visible=e,this.mainCon.visible=e},CharacterInfoPanel.prototype.getRichLabel=function(e,i){return void 0===i&&(i="#2B4BB5"),"[stroke="+i+"][color="+i+"]"+e+":[/color][/stroke]"},CharacterInfoPanel.prototype.getspaceStr=function(e){for(var i="",n=0;n<e;n++)i+=" ";return i},CharacterInfoPanel.prototype.getOptionName=function(e){var i="";return e===s.Skill?i=m.i18n.t("player_info.option_live"):e===s.Attribute?i=m.i18n.t("player_info.option_attribute"):e===s.Badge?i=m.i18n.t("player_info.option_badge"):e===s.Title&&(i=m.i18n.t("player_info.option_title")),i},CharacterInfoPanel.prototype.onTrackHandler=function(){this.mCharacterData&&this.render.renderEmitter("track",this.mCharacterData.cid)},CharacterInfoPanel.prototype.onIntiveHandler=function(){this.mCharacterData&&this.render.renderEmitter("invite",this.mCharacterData.cid)},CharacterInfoPanel.prototype.onAddBlacklistHandler=function(){this.mCharacterData&&this.render.renderEmitter("addBlack",this.mCharacterData.cid)},CharacterInfoPanel.prototype.onRemoveBlacklistHandler=function(){this.mCharacterData&&this.render.renderEmitter("removeBlack",this.mCharacterData.cid)},CharacterInfoPanel}(g.BasePanel);!function(e){e[e.Skill=0]="Skill",e[e.Attribute=1]="Attribute",e[e.Badge=2]="Badge",e[e.Title=3]="Title",e[e.Avatar=4]="Avatar"}(s||(s={}));var S=function(e){function CharacterOwnerItem(i,n,a,s,o){var h=e.call(this,i,n,a)||this;h.dpr=0;var c=h.scene.make.image({x:0,y:0,key:s,frame:"skill_bg"});return c.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.nameText=h.scene.make.text({x:-1*o,y:0,text:"",style:{color:"#996600",fontSize:12*o,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(0,.5),h.lvText=h.scene.make.text({x:-1*o,y:0,text:"",style:{color:"#996600",fontSize:12*o,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(0,.5),h.progressBar=new l.ProgressBar(h.scene,{x:48*o/2,y:15*o,width:41*o,height:4*o,background:{x:0,y:0,width:41*o,height:4*o,config:{top:1*o,left:2*o,right:2*o,bottom:1*o},key:s,frame:"slider_bg"},bar:{x:0,y:0,width:41*o,height:4*o,config:{top:1*o,left:2*o,right:2*o,bottom:1*o},key:s,frame:"slider_rate"},dpr:o,textConfig:void 0}),h.icon=new g.DynamicImage(h.scene,.5*-c.width+22*o,0),h.add([c,h.icon,h.nameText,h.lvText,h.progressBar]),h.setSize(c.width,c.height),h.dpr=o,h.key=s,h}return _(CharacterOwnerItem,e),CharacterOwnerItem.prototype.setItemData=function(e,i){var n=this;void 0===i&&(i=!1),this.itemData=e,this.nameText.text=e.name;var a=i?-16*this.dpr:-11*this.dpr,s=i?20*this.dpr:25*this.dpr,o=10*this.dpr;this.nameText.y=a+.5*o,this.icon.setTexture(this.key,"test_skillicon");var h=this.icon.width;e.level?(this.lvText.text=e.level.level,this.lvText.y=a+s,this.progressBar.setProgress(e.level.currentLevelExp,e.level.nextLevelExp),this.progressBar.visible=i):(this.progressBar.visible=!1,this.lvText.visible=!1);var l=m.Url.getOsdRes(e.display.texturePath);this.icon.load(l,this,(function(){n.icon.scale=n.dpr;var e=.5*-n.width+.5*h+6*n.dpr;n.icon.setPosition(e,0)}))},CharacterOwnerItem}(T),j=function(e){function Menu(i,n,a,s,o,h){var l=e.call(this,n)||this;return l.render=i,l.mDpr=a,l.mScale=s,l.setSize(o,h),l.draw(),l}return _(Menu,e),Menu.prototype.register=function(){},Menu.prototype.unregister=function(){},Menu.prototype.addMask=function(e,i,n,a){this.maskGraphic||(this.maskGraphic=this.scene.make.graphics(void 0,!1)),this.maskGraphic.x=e,this.maskGraphic.y=i,this.maskGraphic.fillRect(.5*-n,.5*-a,n,a),this.setMask(this.maskGraphic.createGeometryMask())},Menu.prototype.draw=function(){this.createBackground()},Menu.prototype.createBackground=function(){this.background||(this.background=this.scene.make.graphics(void 0,!1));var e=3*this.mDpr;this.background.fillStyle(7583,.2),this.background.fillRoundedRect(0,0,this.width,this.height,{tl:e,tr:0,br:0,bl:e}),this.addAt(this.background,0)},Menu}(T),q=function(e){function FriendMenu(i,n,a,s){var o=e.call(this,i,n,a,s,58*a,40*a)||this;return o.isExpand=!1,o}return _(FriendMenu,e),FriendMenu.prototype.register=function(){this.trackBtn.on(String(l.ClickEvent.Tap),this.onTrackHandler,this),this.inviteBtn.on(String(l.ClickEvent.Tap),this.onInviteHandler,this);var e=this.operation,i=e.width,n=e.height;this.operation.setInteractive(new Phaser.Geom.Rectangle(-i,-n,3*i,3*n),Phaser.Geom.Rectangle.Contains),this.operation.on("pointerup",this.onSwitchOperationHandler,this)},FriendMenu.prototype.unregister=function(){this.trackBtn.off(String(l.ClickEvent.Tap),this.onTrackHandler,this),this.inviteBtn.off(String(l.ClickEvent.Tap),this.onInviteHandler,this),this.operation.disableInteractive(),this.operation.on("pointerup",this.onSwitchOperationHandler,this)},FriendMenu.prototype.destroy=function(){this.operationContaienr&&this.operationContaienr.destroy(),this.operation&&this.operation.destroy(),this.inviteBtn&&this.inviteBtn.destroy(),this.trackBtn&&this.trackBtn.destroy(),this.tween&&this.tween.stop(),this.autoCollapseTime&&clearTimeout(this.autoCollapseTime),this.buttons=[]},FriendMenu.prototype.expand=function(){var e=this;if(!this.tween||!this.tween.isPlaying()){this.operationContaienr.remove(this.operation),this.operationContaienr.remove(this.background),this.operationContaienr.add(this.buttons);var i=this.getBounds();if(this.isExpand=!0,i){var n=i.width+8*this.mDpr;this.setSize(n,this.height),this.createBackground(),this.operationContaienr.addAt(this.background,0),this.operationContaienr.x=.5*i.width,this.tween=this.scene.tweens.add({targets:this.operationContaienr,props:{x:.5*-i.width,alpha:1},duration:100}),this.autoCollapseTime=setTimeout((function(){e.autoCollapseTime=null,e.collapse()}),3e3)}}},FriendMenu.prototype.collapse=function(){var e=this;this.tween&&this.tween.isPlaying()||(this.autoCollapseTime&&clearTimeout(this.autoCollapseTime),this.tween=this.scene.tweens.add({targets:this.operationContaienr,props:{x:.5*this.width},duration:100,onComplete:function(){e.operationContaienr.remove(__spreadArrays(e.buttons),!1),e.operationContaienr.add(e.operation),e.setSize(58*e.mDpr,40*e.mDpr),e.createBackground(),e.operationContaienr.addAt(e.background,0),e.operationContaienr.x=0,e.isExpand=!1}}))},FriendMenu.prototype.draw=function(){this.operationContaienr=this.scene.make.container(void 0,!1),this.add(this.operationContaienr),this.buttons=[],this.inviteBtn=this.createButton(m.i18n.t("player_info.invite")),this.buttons.push(this.inviteBtn),this.trackBtn=this.createButton(m.i18n.t("player_info.track")),this.buttons.push(this.trackBtn),this.operation=this.scene.make.text({x:.5*this.width,y:.5*this.height,text:m.i18n.t("player_info.operation"),style:{color:"#FFD248",fontSize:10*this.mDpr,fontFamily:m.Font.DEFULT_FONT}},!1).setOrigin(.5);for(var e=0;e<this.buttons.length;e++)this.buttons[e].x=0===e?.5*this.buttons[e].width+6*this.mDpr:this.buttons[e-1].x+.5*(this.buttons[e-1].width+this.buttons[e].width)+6*this.mDpr,this.buttons[e].y=.5*this.height;this.collapse()},FriendMenu.prototype.createBackground=function(){this.background||(this.background=this.scene.make.graphics(void 0,!1));var e=3*this.mDpr;this.background.clear(),this.background.fillStyle(7583,.2),this.background.fillRoundedRect(0,0,this.width,this.height,{tl:e,tr:0,br:0,bl:e})},FriendMenu.prototype.onTrackHandler=function(){this.render.renderEmitter("track"),this.collapse()},FriendMenu.prototype.onInviteHandler=function(){this.render.renderEmitter("invite"),this.collapse()},FriendMenu.prototype.onSwitchOperationHandler=function(){this.isExpand?this.collapse():this.expand()},FriendMenu.prototype.createButton=function(e){var i=this.mDpr,n=this.mScale,a=new l.NineSliceButton(this.scene,-0,0,48*i,26*i,c.c.commonKey,"yellow_btn_normal_s",e,i,n,{left:8*i,top:8*i,right:8*i,bottom:10*i});return a.setTextStyle({color:"#996600",fontSize:10*i,fontFamily:m.Font.DEFULT_FONT}),a},FriendMenu}(j),Y=function(e){function CharacterMenu(i,n,a,s){return e.call(this,i,n,a,s,58*a,36*a)||this}return _(CharacterMenu,e),CharacterMenu.prototype.register=function(){this.addBlacklistBtn.on(String(l.ClickEvent.Tap),this.onAddBlackHandler,this)},CharacterMenu.prototype.unregister=function(){this.addBlacklistBtn.off(String(l.ClickEvent.Tap),this.onAddBlackHandler,this)},CharacterMenu.prototype.setIsBlack=function(e){this.isBlack=e,this.addBlacklistBtn.setText(m.i18n.t(e?"player_info.remove_black":"player_info.add_black"))},CharacterMenu.prototype.draw=function(){e.prototype.draw.call(this),this.addBlacklistBtn=new l.NineSliceButton(this.scene,0,0,55*this.mDpr,24*this.mDpr,c.c.commonKey,"red_btn_normal",m.i18n.t("player_info.add_black"),this.mDpr,this.mScale,{left:12*this.mDpr,top:12*this.mDpr,right:12*this.mDpr,bottom:12*this.mDpr}),this.addBlacklistBtn.setTextStyle({color:"#FFFFFF",fontSize:10*this.mDpr,fontFamily:m.Font.DEFULT_FONT}),this.addBlacklistBtn.x=.5*this.width,this.addBlacklistBtn.y=6*this.mDpr+.5*this.addBlacklistBtn.height,this.add(this.addBlacklistBtn)},CharacterMenu.prototype.onAddBlackHandler=function(){this.render.emitter.emit(this.isBlack?"removeBlack":"addBlack")},CharacterMenu}(j)},function(e,i,n){"use strict";n.r(i),n.d(i,"GraphicsProgressBar",(function(){return o}));var a,s=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),o=function(e){function GraphicsProgressBar(i,n,a,s,o,h){void 0===h&&(h=!0);var l=e.call(this,i,n,a)||this;return l.value=.5,l.bgGraphics=l.scene.make.graphics(void 0,!1),l.barGraphics=l.scene.make.graphics(void 0,!1),l.add([l.bgGraphics,l.barGraphics]),l.setSize(s,o),l.bgColor=0,l.barColor=267386880,l.bgGraphics.clear(),l.bgGraphics.fillStyle(l.bgColor,1),l.bgGraphics.fillRect(0,0,l.width,l.height),l.setValue(l.value),l}return s(GraphicsProgressBar,e),GraphicsProgressBar.prototype.setColor=function(e,i){this.barColor=e,i&&(this.bgColor=i),this.bgGraphics.clear(),this.bgGraphics.fillStyle(this.bgColor,1),this.bgGraphics.fillRect(0,0,this.width,this.height),this.setValue(this.value)},GraphicsProgressBar.prototype.setValue=function(e){this.value=e;var i=this.width*(this.isHorizontal?e:1),n=this.height*(this.isHorizontal?1:e);this.barGraphics.clear(),this.barGraphics.fillStyle(this.barColor,1),this.barGraphics.fillRect(0,0,i,n)},GraphicsProgressBar.prototype.setRoundedRectValue=function(e,i){this.value=e;var n=this.width*(this.isHorizontal?e:1),a=this.height*(this.isHorizontal?1:e);this.barGraphics.clear(),this.barGraphics.fillStyle(this.barColor,1),this.barGraphics.fillRoundedRect(0,0,n,a,i)},GraphicsProgressBar}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaHandheldPanel",(function(){return m}));var a,s=n(788),o=n(0),h=n(2),l=n(789),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaHandheldPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.isExtendsGrid=!1,n.key=h.ModuleName.PICAHANDHELD_NAME,n}return c(PicaHandheldPanel,e),PicaHandheldPanel.prototype.resize=function(e,i){this.scale;var n=this.scaleWidth,a=this.scaleHeight;this.setSize(n,a),this.updateLayout(),this.isExtendsGrid=!1},PicaHandheldPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.addListen(),this.updateData(),this.render.renderEmitter(h.ModuleName.PICAHANDHELD_NAME+"_handheldlist")):this.preload())},PicaHandheldPanel.prototype.hide=function(){this.mShow=!1,this.removeListen(),e.prototype.hide.call(this)},PicaHandheldPanel.prototype.addListen=function(){this.mInitialized&&this.handeldEqiped.addListen()},PicaHandheldPanel.prototype.removeListen=function(){this.mInitialized&&this.handeldEqiped.removeListen()},PicaHandheldPanel.prototype.destroy=function(){this.mPropGrid&&this.mPropGrid.destroy(),e.prototype.destroy.call(this)},PicaHandheldPanel.prototype.setEqipedDatas=function(e){var i=e.handheld,n=(i=i.sort((function(e,i){return e.latestUse>=i.latestUse?1:-1}))).splice(0,3);i=i.sort((function(e,i){return e.recommended>=i.recommended?1:-1})),i=n.concat(i);var a,s={id:"empty_handed",count:0};if(""!==e.currentHandheldId&&e.currentHandheldId)for(var o=0,h=i;o<h.length;o++){var l=h[o];if(l.id===e.currentHandheldId){a=l;break}}else a=s;if(i.unshift(s),this.handeldEqiped.setItemData(a),this.isExtendsGrid){var c=14-i.length,m=c>0?i.concat(new Array(c)):i;if(this.mPropGrid.setItems(m),a)for(var f=0,g=this.mPropGrid.getCells();f<g.length;f++){var _=g[f];if(_&&_.container){var T=_.container;T.itemData===a?(T.isSelect=!0,this.curHandheldItem=_):T.isSelect=!1}}}},PicaHandheldPanel.prototype.preload=function(){this.addAtlas(this.key,"hand_equp/hand_equp.png","hand_equp/hand_equp.json"),e.prototype.preload.call(this)},PicaHandheldPanel.prototype.init=function(){var i=this;if(!this.mInitialized){var n=this.scaleWidth,a=this.scaleHeight;this.gridContent=this.scene.make.container(void 0,!1),this.add(this.gridContent),this.gridContent.setSize(n,150*this.dpr),this.gridContent.x=.5*n,this.gridContent.y=a-.5*this.gridContent.height-200*this.dpr;var h=this.scene.make.graphics(void 0,!1);h.fillStyle(3355443,.5),h.fillRect(.5*-n,.5*-this.gridContent.height,n,150*this.dpr),this.gridContent.add(h),this.handeldEqiped=new g(this.scene,0,0,this.key,this.dpr),this.handeldEqiped.setClickHandler(new o.Handler(this,this.onHandheldEqipedHandler),new o.Handler(this,this.onShortcutHandler)),this.add(this.handeldEqiped);var l=this.scene.textures.getFrame(this.key,"equp_bg"),c=l.width+10*this.dpr,m=l.height+10*this.dpr,_={x:0,y:0,table:{width:n-20*this.dpr,height:120*this.dpr,columns:2,cellWidth:c,cellHeight:m,reuseCellContainer:!0,cellOriginX:.5,cellOriginY:.5,zoom:this.scale},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;return null===n&&(n=new f(a,0,0,i.key,i.dpr)),n.setItemData(s),n}};this.mPropGrid=new s.GameGridTable(this.scene,_),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(e){i.onSelectItemHandler(e)})),this.gridContent.add(this.mPropGrid),this.resize(0,0),e.prototype.init.call(this)}},PicaHandheldPanel.prototype.updateData=function(){this.updateLayout()},PicaHandheldPanel.prototype.updateLayout=function(){var e=this.scaleWidth,i=this.scaleHeight,n=e-.5*this.handeldEqiped.width-8*this.dpr,a=0;this.gridContent.y=i-.5*this.gridContent.height,this.isExtendsGrid?(a=i-.5*this.handeldEqiped.height-this.gridContent.height,this.gridContent.visible=!0,this.mPropGrid.resetMask(),this.handeldEqiped.normal(),this.handeldEqiped.hideShortcut()):(a=i-.5*this.handeldEqiped.height-10*this.dpr,this.gridContent.visible=!1,this.handeldEqiped.waiting(),this.handeldEqiped.isEmptyHanded||this.handeldEqiped.showShortcut()),this.handeldEqiped.setPosition(n,a)},PicaHandheldPanel.prototype.onSelectItemHandler=function(e){var i=e.itemData;i&&(this.curHandheldItem&&(this.curHandheldItem.isSelect=!1),e.isSelect=!0,this.curHandheldItem=e,e.isEmptyHanded?this.render.renderEmitter(h.ModuleName.PICAHANDHELD_NAME+"_clearhandheld"):this.render.renderEmitter(h.ModuleName.PICAHANDHELD_NAME+"_changehandheld",i.id))},PicaHandheldPanel.prototype.onHandheldEqipedHandler=function(e){this.isExtendsGrid=!this.isExtendsGrid,this.isExtendsGrid?(this.gridContent.visible=!0,this.render.renderEmitter(h.ModuleName.PICAHANDHELD_NAME+"_handheldlist"),this.render.renderEmitter(h.ModuleName.PICAHANDHELD_NAME+"_openeqiped",!0)):(this.mPropGrid.setItems([]),this.gridContent.visible=!1,this.render.renderEmitter(h.ModuleName.PICAHANDHELD_NAME+"_openeqiped",!1)),this.updateLayout()},PicaHandheldPanel.prototype.onShortcutHandler=function(e){this.render.renderEmitter(h.ModuleName.PICAHANDHELD_NAME+"_clearhandheld")},PicaHandheldPanel}(l.BasePanel),f=function(e){function HandheldItem(i,n,a,s,o){var h=e.call(this,i,n,a)||this;return h.mIsSelect=!1,h.dpr=o,h.key=s,h.bg=h.scene.make.image({key:s,frame:"equp_bg"}),h.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.selectbg=h.scene.make.image({key:s,frame:"click_bg"}),h.selectbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.icon=new l.DynamicImage(i,0,0),h.add([h.bg,h.selectbg,h.icon]),h.setSize(h.selectbg.width,h.selectbg.height),h.isSelect=!1,h}return c(HandheldItem,e),HandheldItem.prototype.setItemData=function(e){var i=this;if(this.itemData=e,!e)return this.icon.visible=!1,void(this.selectbg.visible=!1);if(this.icon.visible=!0,this.selectbg.visible=this.mIsSelect,this.isEmptyHanded)this.icon.setTexture(this.key,"empty_handed");else{var n=e.display,a=o.Url.getOsdRes(n.texturePath);this.icon.load(a,this,(function(){i.icon.scale=1,i.icon.displayWidth=34*i.dpr,i.icon.scaleY=i.icon.scaleX}))}},Object.defineProperty(HandheldItem.prototype,"isSelect",{get:function(){return this.mIsSelect},set:function(e){this.mIsSelect=e,this.selectbg.visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(HandheldItem.prototype,"isEmptyHanded",{get:function(){return!(!this.itemData||"empty_handed"!==this.itemData.id)},enumerable:!1,configurable:!0}),HandheldItem}(Phaser.GameObjects.Container),g=function(e){function HandheldEqiped(i,n,a,s,o){var h=e.call(this,i,n,a)||this;h.isExtendsGrid=!1,h.key=s,h.dpr=o,h.bg=h.scene.make.image({key:s,frame:"button_h"}),h.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.shortcutCon=h.scene.make.container(void 0,!1),h.shortcutbg=h.scene.make.image({key:s,frame:"superscript_h"}),h.shortcutbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.shortcutIcon=h.scene.make.image({key:s,frame:"hand"}),h.shortcutIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.shortcutCon.add([h.shortcutbg,h.shortcutIcon]);var c=40*o;return h.shortcutCon.setSize(c,c),h.shortcutbg.x=.5*-h.shortcutCon.width+.5*h.shortcutbg.width-5*o,h.shortcutbg.y=.5*h.shortcutCon.height-.5*h.shortcutbg.height+5*o,h.shortcutIcon.x=h.shortcutbg.x,h.shortcutIcon.y=h.shortcutbg.y,h.icon=new l.DynamicImage(i,0,0),h.icon.setTexture(h.key,"empty_handed"),h.shortcutCon.on("pointerup",h.onShortcutHandler,h),h.add([h.bg,h.icon,h.shortcutCon]),h.setSize(h.bg.width,h.bg.height),h.shortcutCon.setPosition(.5*h.width+.5*c-20*o,.5*-h.height-.5*c+15*o),h.on("pointerup",h.onClickHandler,h),h.hideShortcut(),h}return c(HandheldEqiped,e),HandheldEqiped.prototype.normal=function(){this.bg.setFrame("button_h"),this.setChildAlpha(1)},HandheldEqiped.prototype.waiting=function(){this.bg.setFrame("button_h"),this.setChildAlpha(.5)},HandheldEqiped.prototype.setItemData=function(e){var i=this;if(this.itemData=e,this.isEmptyHanded)this.icon.setScale(1),this.icon.setTexture(this.key,"empty_handed"),this.hideShortcut();else{var n=e.display,a=o.Url.getOsdRes(n.texturePath);this.icon.load(a,this,(function(){i.icon.displayWidth=24*i.dpr,i.icon.scaleY=i.icon.scaleX})),this.isExtendsGrid||this.showShortcut()}},HandheldEqiped.prototype.addListen=function(){this.setInteractive(),this.shortcutCon.setInteractive()},HandheldEqiped.prototype.removeListen=function(){this.disableInteractive(),this.shortcutCon.disableInteractive()},HandheldEqiped.prototype.setClickHandler=function(e,i){this.clickHandler=e,this.shortcutHandler=i},HandheldEqiped.prototype.setChildAlpha=function(e){this.bg.setAlpha(e),this.icon.setAlpha(e),this.shortcutbg.setAlpha(e),this.shortcutIcon.setAlpha(e)},HandheldEqiped.prototype.hideShortcut=function(){this.shortcutCon.visible=!1,this.shortcutCon.disableInteractive()},HandheldEqiped.prototype.showShortcut=function(){this.shortcutCon.visible=!0,this.shortcutCon.setInteractive()},Object.defineProperty(HandheldEqiped.prototype,"isCanShowShortcut",{get:function(){return!this.isEmptyHanded},enumerable:!1,configurable:!0}),Object.defineProperty(HandheldEqiped.prototype,"isEmptyHanded",{get:function(){return!this.itemData||"empty_handed"===this.itemData.id},enumerable:!1,configurable:!0}),HandheldEqiped.prototype.onShortcutHandler=function(){this.shortcutHandler&&this.shortcutHandler.runWith(this.itemData)},HandheldEqiped.prototype.onClickHandler=function(){this.isExtendsGrid=!this.isExtendsGrid,this.clickHandler&&this.clickHandler.runWith(this.itemData)},HandheldEqiped}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaChatPanel",(function(){return T}));var a,s,o=n(788),h=n(789),l=n(790),c=n(2),m=n(0),f=n(832),g=n(833),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};!function(e){e[e.CurrentScene=0]="CurrentScene",e[e.World=1]="World",e[e.Team=2]="Team",e[e.Private=3]="Private",e[e.System=4]="System"}(s||(s={}));var T=function(e){function PicaChatPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.uiManager=i,n.chatCatchArr=[],n.chatMaxLen=100,n.MAX_HEIGHT=460*n.dpr,n.MIN_HEIGHT=100*n.dpr,n.scale=1,n.key=c.ModuleName.PICACHAT_NAME,n.UIType=o.UIType.Scene,n}return _(PicaChatPanel,e),PicaChatPanel.prototype.show=function(i){e.prototype.show.call(this,i),this.mShowData=i,this.mInitialized&&(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.addListen(),this.checkUpdateActive())},PicaChatPanel.prototype.resize=function(i,n){var a=this.scale,s=this.scene.cameras.main.width,o=this.scene.cameras.main.height;i=s,n=n||133*this.dpr,this.giftPanel&&this.giftPanel.visible&&(n=185*this.dpr),this.setSize(s,n);var h=this.scene.textures.getFrame(this.key,"title_bg"),l=h?s/this.scale/h.width:1;this.mTitleBg.scaleX=l,this.mTitleBg.x=s/this.scale/2,this.y=o-this.height,this.mBackground.clear(),this.mBackground.fillStyle(0,.6),this.mBackground.fillRect(0,0,s/this.scale,n/this.scale),this.mTextArea.childrenMap.child.setMinSize(i,(n-16*this.dpr)*a),this.mTextArea.layout(),this.mTextArea.setPosition(this.width/2+4*this.dpr,this.y+this.mTextArea.height/2+10*this.dpr*a),this.mTextArea.childrenMap.text.y=8*this.dpr,this.mTextArea.scrollToBottom(),this.giftPanel&&(this.giftPanel.resize(),this.giftPanel.y=this.height-.5*this.giftPanel.height,this.giftPanel.x=.5*this.width),e.prototype.resize.call(this,i,n),this.mBackground.input=void 0,this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,s/this.scale,n/this.scale),Phaser.Geom.Rectangle.Contains)},PicaChatPanel.prototype.chatHandler=function(e){return __awaiter(this,void 0,void 0,(function(){var i,n,a;return __generator(this,(function(s){switch(s.label){case 0:return[4,this.render.mainPeer.getPlayerName(e.chatSenderid)];case 1:return i=s.sent(),n="",i?n=i:e.chatSenderid&&(n=m.i18n.t("chat.mystery")),a="#ffffff",e.chatSetting&&(a=e.chatSetting.textColor),this.showChat("[color="+a+"]["+this.getChannel(e.chatChannel)+"]"+n+": "+e.chatContext+"[/color]\n"),[2]}}))}))},PicaChatPanel.prototype.showChat=function(e){this.appendChat(e)},PicaChatPanel.prototype.getChannel=function(e){switch(e){case s.CurrentScene:return m.i18n.t("chat.current");case s.World:return m.i18n.t("chat.world");default:return m.i18n.t("chat.system")}},PicaChatPanel.prototype.setGiftData=function(e){this.giftPanel.setGiftDatas(e.commodities)},PicaChatPanel.prototype.appendChat=function(e){this.chatCatchArr.push(e),this.chatCatchArr.length>this.chatMaxLen&&this.chatCatchArr.shift(),this.mTextArea&&(this.mTextArea.appendText(e),this.mTextArea.scrollToBottom()),this.mInputText&&this.mInputText instanceof f.PicaChatInputPanel&&this.mInputText.appendChat(e)},PicaChatPanel.prototype.isShowChatPanel=function(){return!(!this.mTextArea||!this.mTextArea.visible)},PicaChatPanel.prototype.hide=function(){this.mTextArea&&this.mTextArea.destroy(),this.mOutputText&&this.mOutputText.destroy(),this.mShow=!1,this.removeListen(),e.prototype.hide.call(this)},PicaChatPanel.prototype.addListen=function(){e.prototype.addListen.call(this),this.mInitialized&&(this.mChatBtn.setInteractive(),this.mEmojiBtn.setInteractive(),this.mTextArea.visible&&this.mScrollBtn.setInteractive(),this.mGiftBtn.setInteractive(),this.mTextArea.childrenMap.child.setInteractive(),this.mScrollBtn.on("drag",this.onDragHandler,this),this.scene.input.setDraggable(this.mScrollBtn,!0),this.mChatBtn.on("pointerup",this.onShowInputHanldler,this),this.mGiftBtn.on("pointerup",this.onGiftHandler,this),this.mEmojiBtn.on("pointerup",this.onEmojiHandler,this),this.render.emitter.on(c.EventType.CHAT,this.chatHandler,this),this.render.emitter.on(c.EventType.UPDATE_PARTY_STATE,this.setGiftButtonState,this))},PicaChatPanel.prototype.removeListen=function(){e.prototype.removeListen.call(this),this.mInitialized&&(this.mChatBtn.disableInteractive(),this.mEmojiBtn.disableInteractive(),this.mScrollBtn.disableInteractive(),this.mGiftBtn.disableInteractive(),this.mTextArea.childrenMap.child.disableInteractive(),this.mEmojiBtn.off("pointerup",this.onEmojiHandler,this),this.mScrollBtn.off("drag",this.onDragHandler,this),this.mChatBtn.off("pointerup",this.onShowInputHanldler,this),this.mGiftBtn.off("pointerup",this.onGiftHandler,this),this.render.emitter.off(c.EventType.CHAT,this.chatHandler,this),this.render.emitter.off(c.EventType.UPDATE_PARTY_STATE,this.setGiftButtonState,this))},PicaChatPanel.prototype.updateUIState=function(e){this.mInitialized},PicaChatPanel.prototype.destroy=function(){this.mBackground&&this.mBackground.disableInteractive(),e.prototype.destroy.call(this)},PicaChatPanel.prototype.preload=function(){this.addAtlas(this.key,"pica_chat/pica_chat.png","pica_chat/pica_chat.json"),this.addAtlas(l.c.commonKey,l.d.commonUrl+".png",l.d.commonUrl+".json"),this.addAtlas(l.c.common2Key,l.d.common2Url+".png",l.d.common2Url+".json"),e.prototype.preload.call(this)},PicaChatPanel.prototype.init=function(){var i=this.scene.cameras.main.width;this.scene.cameras.main.height;this.mBackground=this.scene.make.graphics(void 0,!1);var n=this.scale;this.setSize(i,135*this.dpr),this.mTileContainer=this.scene.make.container(void 0,!1),this.mScrollBtn=this.scene.make.image({x:21*this.dpr*n,key:this.key,frame:"scroll_btn"},!1).setScale(n),this.mScrollBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mTitleBg=this.scene.make.image({key:this.key,frame:"title_bg"},!1).setScale(n),this.mChatBtn=this.scene.make.image({x:96*this.dpr*n,key:this.key,frame:"chat_icon"},!1).setScale(n),this.mHornBtn=this.scene.make.image({x:159*this.dpr*n,key:this.key,frame:"horn_icon"},!1).setScale(n),this.mEmojiBtn=this.scene.make.image({x:218*this.dpr*n,key:this.key,frame:"emoji"},!1).setScale(n),this.mGiftBtn=this.scene.make.image({x:218*this.dpr*n,key:this.key,frame:"party_gift_icon"},!1).setScale(n);var a=20*this.dpr;this.mTitleBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mScrollBtn.x=.5*this.mScrollBtn.width+5*this.dpr,this.mScrollBtn.y=-this.mScrollBtn.height/2+this.mTitleBg.height,this.mChatBtn.x=this.mScrollBtn.x+.5*this.mScrollBtn.width+a+.5*this.mChatBtn.width,this.mChatBtn.y=-this.mChatBtn.height/2+this.mTitleBg.height,this.mChatBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mHornBtn.x=this.mChatBtn.x+.5*this.mChatBtn.width+a+.5*this.mHornBtn.width,this.mHornBtn.y=-this.mHornBtn.height/2+this.mTitleBg.height,this.mHornBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mEmojiBtn.x=this.mHornBtn.x+.5*this.mHornBtn.width+a+.5*this.mEmojiBtn.width,this.mEmojiBtn.y=-this.mEmojiBtn.height/2+this.mTitleBg.height,this.mEmojiBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mGiftBtn.x=this.mEmojiBtn.x+.5*this.mEmojiBtn.width+a+.5*this.mGiftBtn.width,this.mGiftBtn.y=-this.mGiftBtn.height/2+this.mTitleBg.height,this.mGiftBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mOutputText=new o.BBCodeText(this.mScene,0,0,"",{fontSize:14*this.dpr/n+"px",fontFamily:m.Font.DEFULT_FONT,stroke:"#000000",strokeThickness:1*this.dpr*n,textMask:!1,shadow:{offsetX:0,offsetY:0,color:"#000",blur:4,stroke:!0,fill:!0},wrap:{mode:"char",width:i-12*this.dpr*n}}),this.mOutputText.setResolution(this.dpr);var s=this.scene.make.graphics(void 0,!1);this.mTextArea=new o.TextArea(this.mScene,{x:i/2+4*this.dpr*n,y:160*this.dpr*n,textWidth:i-4*this.dpr*n,textHeight:this.MAX_HEIGHT,text:this.mOutputText}).layout(),this.mTileContainer.add([this.mTitleBg,this.mChatBtn,this.mHornBtn,this.mEmojiBtn,this.mGiftBtn,this.mScrollBtn]),this.add([this.mBackground,this.mTileContainer,this.mTextArea,this.mOutputText,s]),this.resize(this.width,133*this.dpr),e.prototype.init.call(this)},PicaChatPanel.prototype.onDragHandler=function(e,i,n){var a=this.height+(e.prevPosition.y-e.position.y);a>this.MAX_HEIGHT||a<this.MIN_HEIGHT||this.resize(this.width,a)},PicaChatPanel.prototype.setGiftButtonState=function(e){this.giftPanel&&this.giftPanel.setGiftActive(e)},PicaChatPanel.prototype.onShowNavigateHandler=function(){this.render.renderEmitter(c.RENDER_PEER+"_"+this.key+"_showNavigate")},PicaChatPanel.prototype.onEmojiHandler=function(){var e=this.render.displayManager.user.id;this.render.mainPeer.setDragonBonesQueue(e,[{animationName:"idle",scale:!1,times:1}]),this.render.physicalPeer.changePlayerState(e,"jump",1)},PicaChatPanel.prototype.onGiftHandler=function(){var e=this;this.giftPanel&&this.giftPanel.visible?(this.giftPanel.hide(),this.showChatTextArea()):(this.hideAllChildPanel(),this.giftPanel||(this.giftPanel=new g.PicaGiftPanel(this.scene,0,0,this.width,175*this.dpr,this.key,this.dpr,this.scale),this.giftPanel.y=this.height-.5*this.giftPanel.height,this.giftPanel.x=.5*this.width,this.add(this.giftPanel),this.giftPanel.resize(),this.giftPanel.on("showpropfun",this.showPropFun,this),this.giftPanel.on("buyItem",this.onBuyItemHandler,this),this.giftPanel.on("shownotice",this.showNoticeHandler,this)),this.resize(this.width,185*this.dpr),this.giftPanel.show(),this.render.renderEmitter(c.RENDER_PEER+"_"+this.key+"_querymarket"),this.render.mainPeer.getCurRoom().then((function(i){var n=!!i&&i.openingParty;e.giftPanel.setGiftActive(n)})))},PicaChatPanel.prototype.onShowInputHanldler=function(){var e=this;if(this.hideAllChildPanel(),this.showChatTextArea(),!this.mInputText){var i=window.pktGlobal;if(i&&"Cordova"===i.envPlatform)if(this.scene.cache.json.has("quickchat"))setTimeout((function(){e.openAppInputPanel()}),20);else{var n=m.Url.getRes("/ui/quickchat/"+m.i18n.language+".json");this.scene.load.json("quickchat",n),this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE,this.openAppInputPanel,this),this.scene.load.start()}else this.mInputText=new h.InputPanel(this.scene,this.render),this.mInputText.once("close",this.sendChat,this)}},PicaChatPanel.prototype.sendChat=function(e){this.mInputText=void 0,e&&this.render.renderEmitter(c.RENDER_PEER+"_"+this.key+"_chat",e)},PicaChatPanel.prototype.openAppInputPanel=function(){if(this.scene.cache.json.has("quickchat")){this.mInputText=new f.PicaChatInputPanel(this.scene,this.render,this.key,this.chatCatchArr.concat()),this.mInputText.once("close",this.appCloseChat,this),this.mInputText.on("send",this.appSendChat,this);var e=this.scene.cache.json.get("quickchat");this.mInputText.setQuickChatData(e.concat()),this.parentContainer&&(this.parentContainer.visible=!1),this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE,this.openAppInputPanel,this)}},PicaChatPanel.prototype.appSendChat=function(e){e&&this.render.renderEmitter(c.RENDER_PEER+"_"+this.key+"_chat",e)},PicaChatPanel.prototype.appCloseChat=function(){this.mInputText.off("send",this.appSendChat,this),this.mInputText=void 0,this.parentContainer&&(this.parentContainer.visible=!0)},PicaChatPanel.prototype.checkUpdateActive=function(){var e=this;this.render.mainPeer.getCurRoom().then((function(i){i&&e.setGiftButtonState(i.openingParty)})),this.render.mainPeer.getActiveUIData(c.ModuleName.PICACHAT_NAME).then((function(i){if(i)for(var n=0,a=i;n<a.length;n++){var s=a[n];e.updateUIState(s)}}))},PicaChatPanel.prototype.hideAllChildPanel=function(){this.giftPanel&&this.giftPanel.hide(),this.mTextArea&&(this.mTextArea.visible=!1),this.mScrollBtn.disableInteractive(),this.showPanelHandler(c.ModuleName.PICAHANDHELD_NAME,!1)},PicaChatPanel.prototype.showChatTextArea=function(){this.mTextArea.visible=!0,this.mScrollBtn.setInteractive(),this.showPanelHandler(c.ModuleName.PICAHANDHELD_NAME,!0)},PicaChatPanel.prototype.onBuyItemHandler=function(e,i){var n=this,a=new h.AlertView(this.scene,this.uiManager);i.count*i.sellingPrice.price>0?a.show({title:m.i18n.t("party.sendgift"),text:m.i18n.t("party.sendgifttips",{count:e.quantity,name:i.name||i.shortName}),oy:302*this.dpr*this.render.uiScale,callback:function(){n.render.renderEmitter(c.RENDER_PEER+"_"+n.key+"_buyItem",e)}}):this.render.renderEmitter(c.RENDER_PEER+"_"+this.key+"_buyItem",e)},PicaChatPanel.prototype.showPropFun=function(e){this.showPanelHandler(c.ModuleName.PICAPROPFUN_NAME,!0,e)},PicaChatPanel.prototype.showNoticeHandler=function(e){var i={text:[{text:e,node:void 0}]};this.showPanelHandler(c.ModuleName.PICANOTICE_NAME,!0,i)},PicaChatPanel.prototype.showPanelHandler=function(e,i,n){this.render&&(i?this.render.mainPeer.showMediator(e,!0,n):this.render.mainPeer.showMediator(e,!1))},PicaChatPanel}(h.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMainUIPanel",(function(){return f}));var a,s=n(788),o=n(790),h=n(789),l=n(2),c=n(0),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},f=function(e){function PicaMainUIPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.isSceneNameActive=!1,n.key=l.ModuleName.PICAMAINUI_NAME,n}return m(PicaMainUIPanel,e),PicaMainUIPanel.prototype.show=function(i){e.prototype.show.call(this,i),this.mInitialized&&(this.setInteractive(),this.update(this.mShowData),this.checkUpdateActive())},PicaMainUIPanel.prototype.resize=function(i,n){var a=this.scene.cameras.main.width/this.scale,s=this.scene.cameras.main.height/this.scale;e.prototype.resize.call(this,a,s),this.mCoinValue.x=a-this.mCoinValue.width/2-5*this.dpr,this.mDiamondValue.x=a-this.mDiamondValue.width/2-5*this.dpr},PicaMainUIPanel.prototype.preload=function(){this.addAtlas(this.key,"main_ui/mainui.png","main_ui/mainui.json"),this.addAtlas(o.c.commonKey,o.d.commonUrl+".png",o.d.commonUrl+".json"),e.prototype.preload.call(this)},PicaMainUIPanel.prototype.addListen=function(){e.prototype.addListen.call(this),this.mInitialized&&(this.roomCon?(this.roomCon.on("pointerup",this.onOpenRoomPanel,this),this.render.emitter.on(l.EventType.UPDATE_ROOM_INFO,this.onUpdateRoomHandler,this),this.render.emitter.on(l.EventType.UPDATE_PLAYER_INFO,this.onUpdatePlayerHandler,this),this.render.emitter.on(l.EventType.UPDATE_PARTY_STATE,this.onUpdatePartyHandler,this)):c.Logger.getInstance().fatal(PicaMainUIPanel.name+": sceneName does not exist!"))},PicaMainUIPanel.prototype.removeListen=function(){e.prototype.removeListen.call(this),this.mInitialized&&(this.roomCon?(this.roomCon.off("pointerup",this.onOpenRoomPanel,this),this.render.emitter.off(l.EventType.UPDATE_ROOM_INFO,this.onUpdateRoomHandler,this),this.render.emitter.off(l.EventType.UPDATE_PLAYER_INFO,this.onUpdatePlayerHandler,this),this.render.emitter.off(l.EventType.UPDATE_PARTY_STATE,this.onUpdatePartyHandler,this)):c.Logger.getInstance().fatal(PicaMainUIPanel.name+": sceneName does not exist!"))},PicaMainUIPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.playerInfo=void 0,this.roomInfo=void 0},PicaMainUIPanel.prototype.update=function(i){e.prototype.update.call(this),i&&(i.hasOwnProperty("roomId")?this.roomInfo=i:this.playerInfo=i),this.playerInfo&&this.updatePlayerInfo(this.playerInfo),this.roomInfo&&this.updateRoomInfo(this.roomInfo)},PicaMainUIPanel.prototype.updatePlayerInfo=function(e){if(this.playerInfo=e,this.mInitialized){if(e.level){var i=e.level;this.playerLv.text=i.level+""}if(void 0!==e.coin&&this.mCoinValue.setText(this.getCoin().value+""||"0"),void 0!==e.diamond&&this.mDiamondValue.setText(this.getDiamond().value+""||"0"),e.energy){var n=e.energy;n?this.mStrengthValue.setValue(n.currentValue,n.max):this.mStrengthValue.setValue(0,100)}this.mSceneName.rightIcon.visible=this.isSelfRoom}},PicaMainUIPanel.prototype.updateDetail=function(e){var i=this;e&&(this.headImage||(this.headImage=new h.DynamicImage(this.scene,0,0),this.headImage.setScale(this.dpr),this.add(this.headImage)),this.headImage.load(c.Url.getOsdRes(e.avatar),this,(function(){i.headImage.x=.5*i.headImage.width+4*i.dpr,i.headImage.y=.5*i.headImage.height+4*i.dpr})))},PicaMainUIPanel.prototype.getCoin=function(){for(var e=0,i=this.playerInfo.properties;e<i.length;e++){var n=i[e];if(n.hasOwnProperty("id")){if("IV0000001"===n.id)return n}else c.Logger.getInstance().error(n.key+"  缺少ID")}},PicaMainUIPanel.prototype.getDiamond=function(){for(var e=0,i=this.playerInfo.properties;e<i.length;e++){var n=i[e];if(n.hasOwnProperty("id")){if("IV0000002"===n.id)return n}else c.Logger.getInstance().error(n.key+"  缺少ID")}},PicaMainUIPanel.prototype.updateRoomInfo=function(e){this.roomInfo=e,this.mInitialized&&(this.roomCon.setSize(60*this.dpr,30*this.dpr),e.name&&(this.mSceneName.setText(e.name),this.roomCon.setSize(2*this.mSceneName.rightbound,30*this.dpr)),this.roomCon.setInteractive(),this.isSceneNameActive=!0,e.playerCount&&this.mCounter.setText(""+e.playerCount),this.mCounter.x=this.mSceneName.x+this.mSceneName.rightbound+5*this.dpr,this.praiseBtn.visible=!1,e.roomType&&("room"!==e.roomType&&"store"!==e.roomType||(this.praiseBtn.visible=!0),this.praiseBtn.setText(e.praise+""),this.praiseBtn.selected=e.hasPraised,e.hasPraised?(this.praiseBtn.setTextColor("#8E99C1"),this.praiseImg.setFrame("praise_after")):(this.praiseBtn.setTextColor("#ffffff"),this.praiseImg.setFrame("praise_before"))),this.mSceneName.rightIcon.visible=this.isSelfRoom,this.partyBtn.visible=this.isSelfRoom,e.openingParty?this.partyBtn.setText(c.i18n.t("common.manager")):this.partyBtn.setText(c.i18n.t("main_ui.party")))},Object.defineProperty(PicaMainUIPanel.prototype,"isSelfRoom",{get:function(){if(!this.playerInfo||!this.roomInfo)return!1;for(var e=this.playerInfo.rooms,i=this.roomInfo.roomId,n=0,a=e;n<a.length;n++){if(a[n].roomId===i)return!0}return!1},enumerable:!1,configurable:!0}),PicaMainUIPanel.prototype.updateUIState=function(e){this.mInitialized&&("mainui.playerinfo"===e.name&&(this.playerCon.visible=e.visible),"mainui.roominfo"===e.name&&(this.roomCon.visible=e.visible),"mainui.headbtn"===e.name&&(e.disabled?this.playerIcon.removeInteractive():this.playerIcon.setInteractive()),"mainui.entereditorbtn"===e.name&&(this.mSceneName.visible=e.visible,this.isSceneNameActive&&(e.disabled?this.roomCon.removeInteractive():(this.roomCon.setSize(2*this.mSceneName.rightbound,30*this.dpr),this.roomCon.setInteractive()))))},PicaMainUIPanel.prototype.init=function(){var i=this.scene.cameras.main.width,n=this.scene.cameras.main.height;this.playerCon=this.scene.make.container(void 0,!1),this.playerCon.y=25*this.dpr,this.add(this.playerCon),this.mCoinValue=new g(this.scene,this.key,"coin",this.dpr),this.mDiamondValue=new g(this.scene,this.key,"diamond",this.dpr),this.mDiamondValue.setHandler(new c.Handler(this,this.onOpenRechargeHandler)),this.mDiamondValue.y=35*this.dpr;var a=this.scene.textures.getFrame(this.key,"strength_progress");this.mStrengthValue=new x(this.scene,this.key,"strength_icon",this.dpr),this.mStrengthValue.x=76*this.dpr;var l=new s.NineSlicePatch(this.scene,68*this.dpr/2,this.mStrengthValue.height/2-a.height-1*this.dpr,92*this.dpr,a.height,this.key,"strength_progress",{left:8*this.dpr,top:3*this.dpr,right:a.width-2-8*this.dpr,bottom:a.height-1-3*this.dpr});this.mStrengthValue.setProgress(l,this.scale),this.playerIcon=this.scene.make.image({key:this.key,frame:"head"}),this.playerIcon.x=.5*-this.mStrengthValue.width-8*this.dpr,this.mStrengthValue.add(this.playerIcon),this.playerIcon.on("pointerup",this.onHeadHandler,this),this.playerIcon.setInteractive(),this.mStrengthValue.setValue(1e3,1e3),this.mStrengthValue.setInteractive(),this.mStrengthValue.on("pointerup",this.onStrengthHandler,this);var m=this.playerIcon.x+.5*this.playerIcon.width-2*this.dpr,f=this.playerIcon.y+.5*this.playerIcon.height-10*this.dpr;this.playerLv=this.scene.make.text({text:"0",x:m,y:f,style:{fontSize:11*this.dpr,bold:!0,fontFamily:c.Font.DEFULT_FONT,color:"#356EE3"}},!1).setOrigin(1,0),this.playerLv.setShadow(0,0,"#ffffff",2),this.playerLv.setStroke("#356EE3",2),this.playerLv.setShadowStroke(!0),this.mStrengthValue.add(this.playerLv),this.playerCon.add([this.mStrengthValue,this.mCoinValue,this.mDiamondValue]),this.roomCon=this.scene.make.container(void 0,!1),this.roomCon.y=this.playerCon.y+32*this.dpr,this.add(this.roomCon),this.mSceneName=new T(this.scene,this.key,"room_icon","setting_icon",this.dpr),this.mSceneName.setText(""),this.mSceneName.x=18*this.dpr,this.mCounter=new _(this.scene,o.c.commonKey,"home_persons",this.dpr),this.mCounter.setText(""),this.mCounter.x=this.mSceneName.x+this.mSceneName.rightbound+5*this.dpr,this.mCounter.y=this.mSceneName.y,this.mCounter.setColor("#28D5F5"),this.textToolTip=new h.TextToolTips(this.scene,o.c.commonKey,"tips_bg",this.dpr,this.scale),this.textToolTip.setSize(160*this.dpr,45).visible=!1,this.praiseBtn=new s.CheckBox(this.scene,this.key,"praise_before_bg","praise_after_bg","1"),this.praiseBtn.y=this.mSceneName.y+this.mSceneName.height+.5*this.praiseBtn.height+20*this.dpr,this.praiseBtn.x=8*this.dpr+.5*this.praiseBtn.width,this.praiseBtn.setTextStyle({fontSize:11*this.dpr,fontFamily:c.Font.DEFULT_FONT}),this.praiseBtn.setTextOffset(10*this.dpr,0),this.praiseBtn.on(String(s.ClickEvent.Tap),this.onPraiseHandler,this),this.praiseImg=this.scene.make.image({key:this.key,frame:"praise_before"}),this.praiseImg.x=-10*this.dpr,this.praiseBtn.add(this.praiseImg),this.partyBtn=new s.Button(this.scene,this.key,"home_party_bg","home_party_bg",c.i18n.t("main_ui.party")),this.partyBtn.x=this.praiseBtn.x+.5*this.praiseBtn.width+.5*this.partyBtn.width+5*this.dpr,this.partyBtn.y=this.praiseBtn.y,this.partyBtn.setTextOffset(8*this.dpr,0),this.partyBtn.setTextStyle({fontSize:11*this.dpr,fontFamily:c.Font.DEFULT_FONT}),this.partyBtn.on(String(s.ClickEvent.Tap),this.onPartyHandler,this),this.roomCon.add([this.mSceneName,this.mCounter,this.praiseBtn,this.partyBtn,this.textToolTip]),this.roomCon.setSize(2*this.mSceneName.rightbound,30*this.dpr),this.resize(i,n),e.prototype.init.call(this)},PicaMainUIPanel.prototype.onOpenRoomPanel=function(){this.render.renderEmitter("openroompanel")},PicaMainUIPanel.prototype.onHeadHandler=function(){this.render.renderEmitter("showPanel",l.ModuleName.PICAPLAYERINFO_NAME)},PicaMainUIPanel.prototype.onStrengthHandler=function(){var e=this;if(this.playerInfo){var i=this.playerInfo.energy,n=i.currentValue+"/"+i.max+"\n",a=c.i18n.t("main_ui.energy_tips",{name:n,interpolation:{escapeValue:!1}});this.textToolTip.visible||this.scene.input.on("pointerdown",this.onTextToolTipHandler,this),this.textToolTip.setDelayText(a,3e3,new c.Handler(this,(function(){e.scene.input.off("pointerdown",e.onTextToolTipHandler,e)}))),this.textToolTip.setPosition(120*this.dpr,20*this.dpr)}},PicaMainUIPanel.prototype.onTextToolTipHandler=function(){this.textToolTip.visible=!1,this.scene.input.off("pointerdown",this.onTextToolTipHandler,this)},PicaMainUIPanel.prototype.checkUpdateActive=function(){return __awaiter(this,void 0,void 0,(function(){var e,i,n,a;return __generator(this,(function(s){switch(s.label){case 0:return[4,this.mWorld.mainPeer.getActiveUIData("PicaMainUI")];case 1:if(e=s.sent())for(i=0,n=e;i<n.length;i++)a=n[i],this.updateUIState(a);return[2]}}))}))},PicaMainUIPanel.prototype.onUpdatePlayerHandler=function(e){this.playerInfo=e,this.updatePlayerInfo(e)},PicaMainUIPanel.prototype.onUpdateRoomHandler=function(e){this.roomInfo=e,this.updateRoomInfo(e)},PicaMainUIPanel.prototype.onUpdatePartyHandler=function(e){this.roomInfo&&this.updateRoomInfo(this.roomInfo)},PicaMainUIPanel.prototype.onPraiseHandler=function(e,i){this.render.renderEmitter(l.EventType.QUERY_PRAISE,i.selected)},PicaMainUIPanel.prototype.onPartyHandler=function(){this.render.renderEmitter("showPanel",l.ModuleName.PICAOPENPARTY_NAME)},PicaMainUIPanel.prototype.onOpenRechargeHandler=function(){this.render.renderEmitter("showPanel",l.ModuleName.PICARECHARGE_NAME)},PicaMainUIPanel}(h.BasePanel),g=function(e){function ValueContainer(i,n,a,s){void 0===s&&(s=1);var o=e.call(this,i)||this;return o.init(n,a,s),o}return m(ValueContainer,e),ValueContainer.prototype.setText=function(e){this.mText.setText(e)},ValueContainer.prototype.setHandler=function(e){this.sendHandler=e},ValueContainer.prototype.init=function(e,i,n){var a=this.scene.make.image({key:e,frame:"home_progress_bottom"},!1);a.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mLeft=this.scene.make.image({key:e,frame:i},!1),this.mLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mText=this.scene.make.text({text:"0",width:a.width,height:a.height,style:{fontSize:14*n,fontFamily:c.Font.NUMBER}},!1).setOrigin(.5),this.mText.setStroke("#000000",1*n),this.mText.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mAddBtn=new s.Button(this.scene,e,"add_btn","add_btn"),this.setSize(a.width,a.height),this.mLeft.x=.5*-a.width+5*n,this.mLeft.y=a.y+.5*a.height-.5*this.mLeft.height,this.mAddBtn.x=this.width*this.originX-this.mAddBtn.width*this.originX-5*n,this.mText.x=4*n,this.add([a,this.mLeft,this.mText,this.mAddBtn]),this.mAddBtn.on(s.ClickEvent.Tap,this.onAddHandler,this)},ValueContainer.prototype.onAddHandler=function(){this.sendHandler&&this.sendHandler.run()},ValueContainer}(Phaser.GameObjects.Container),_=function(e){function IconText(i,n,a,s){void 0===s&&(s=1);var o=e.call(this,i)||this,h=i.make.image({key:n,frame:a},!1);return o.mText=i.make.text({style:{fontSize:14*s,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(0,.5),o.mText.x=h.width/2+4*s,o.mText.setStroke("#000000",2*s),o.add([h,o.mText]),o}return m(IconText,e),IconText.prototype.setText=function(e){this.mText.setText(e)},IconText.prototype.setStroke=function(e,i){this.mText.setStroke(e,i)},IconText.prototype.setColor=function(e){this.mText.setColor(e)},IconText}(Phaser.GameObjects.Container),T=function(e){function SceneName(i,n,a,s,o){void 0===o&&(o=1);var h=e.call(this,i,n,a,o)||this;return h.mDpr=o,h.mRightIcon=i.make.image({y:2*o,key:n,frame:s},!1),h.add(h.mRightIcon),h.mRightIcon.y=8*o,h.mRightIcon.x=10*o,h}return m(SceneName,e),SceneName.prototype.setText=function(i){e.prototype.setText.call(this,i)},Object.defineProperty(SceneName.prototype,"rightbound",{get:function(){return this.mText.x+this.mText.width+10*this.mDpr},enumerable:!1,configurable:!0}),Object.defineProperty(SceneName.prototype,"rightIcon",{get:function(){return this.mRightIcon},enumerable:!1,configurable:!0}),SceneName}(_),x=(function(e){function ExpProgress(i,n,a,o,h){var l=e.call(this,i)||this,m=h.getSize().width/o,f=l.scene.textures.getFrame(n,"exp_bg");l.setSize(m,f.height);var g=l.width,_=l.height;l.mProgressBar=new S(i,a),l.mProgressBar.setSize(l.width,l.height);var T=new s.NineSlicePatch(l.scene,g/2,_/2,g,_,n,"exp_bg",{left:8*a,top:3*a,right:f.width-2-8*a,bottom:f.height-1-3*a});l.mProgressBar.setBackground(T),f=l.scene.textures.getFrame(n,"exp_progress");var x=new s.NineSlicePatch(l.scene,g/2,_/2,m,f.height,n,"exp_progress",{left:8*a,top:3*a,right:f.width-2-10*a,bottom:f.height-1-5*a});return l.mProgressBar.setProgress(x,o),l.mProgressBar.setRatio(.5),l.mCurrentLv=i.make.text({text:"57",style:{fontSize:10*a,fontFamily:c.Font.DEFULT_FONT}},!1),l.mCurrentLv.setStroke("#000000",1*a),l.mNextLv=i.make.text({text:"58",style:{fontSize:10*a,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(0,0),l.mNextLv.setStroke("#000000",1*a),l.mNextLv.x=l.width-l.mNextLv.width,l.add([l.mProgressBar,l.mCurrentLv,l.mNextLv]),l}m(ExpProgress,e),ExpProgress.prototype.setLv=function(e,i){this.mCurrentLv.setText(e.toString()),this.mNextLv.setText((e+1).toString()),this.mNextLv.x=this.width-this.mNextLv.width,this.mProgressBar.setRatio(i)}}(Phaser.GameObjects.Container),function(e){function ProgressValue(i,n,a,s){return e.call(this,i,n,a,s)||this}return m(ProgressValue,e),ProgressValue.prototype.setProgress=function(e,i){this.mProgress.setProgress(e,i)},ProgressValue.prototype.setValue=function(e,i){this.mText&&(this.mText.text=e+"/"+i,this.mProgress.setRatio(e/i))},ProgressValue.prototype.setInteractive=function(i){return i=i||new Phaser.Geom.Rectangle(0,0,this.width,this.height),e.prototype.setInteractive.call(this,i,Phaser.Geom.Rectangle.Contains),this},ProgressValue.prototype.init=function(e,i,n){var a=this.scene.make.image({key:e,frame:"home_progress_bottom"},!1);a.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.setSize(a.width,a.height),this.mLeft=this.scene.make.image({key:e,frame:i},!1),this.mLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mProgress=new S(this.scene,n),this.mProgress.x=-this.width/2+10*n,this.mProgress.y=4*n,this.mText=this.scene.make.text({text:"0",width:a.width,height:a.height,style:{fontSize:10*n,fontFamily:c.Font.NUMBER}},!1).setOrigin(.5),this.mText.setStroke("#000000",1*n),this.mText.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mAddBtn=new s.Button(this.scene,e,"add_btn","add_btn"),this.setSize(a.width,a.height),this.mLeft.x=-this.width*this.originX+13*n,this.mAddBtn.x=this.width*this.originX-10*n,this.add([a,this.mProgress,this.mLeft,this.mText,this.mAddBtn])},ProgressValue}(g)),S=function(e){function ProgressBar(i,n){var a=e.call(this,i)||this;return a.dpr=n,a}return m(ProgressBar,e),ProgressBar.prototype.setBackground=function(e){this.addAt(e,0)},ProgressBar.prototype.setProgress=function(e,i){this.mScale=i,this.mProgress=e,this.add(this.mProgress),this.setSize(e.width*this.mScale,e.height*this.mScale);var n=e.getWorldTransformMatrix();this.worldpos=new Phaser.Geom.Point(n.tx,n.ty),this.mMaskGraphics=this.scene.make.graphics(void 0,!1),this.mMaskGraphics.fillStyle(16750848),this.mMaskGraphics.fillRect(0,0,this.width,this.height+8*this.dpr),this.mProgress.mask=new Phaser.Display.Masks.GeometryMask(this.scene,this.mMaskGraphics),this.mMaskGraphics.y=n.ty+this.height+4*this.dpr,this.mMaskGraphics.x=n.tx},ProgressBar.prototype.setRatio=function(e){this.mMaskGraphics&&(this.mMaskGraphics.x=this.worldpos.x+4*this.dpr-.5*this.mProgress.width+(this.width*e-this.width))},ProgressBar}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRenderUiManager",(function(){return c}));var a,s=n(789),o=n(790),h=n(812),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaRenderUiManager(i){var n=e.call(this,i)||this;return n.mAtalsManager=new o.a,n.singleManager=new h.PicaSingleManager(n),n.mAtalsManager.init(i),n.mRender.emitter.on(s.Render.SCENE_CREATED,n.sceneCreated),n.mRender.emitter.on(s.Render.SCENE_DESTROY,n.sceneDestroy),n}return l(PicaRenderUiManager,e),PicaRenderUiManager.prototype.getUrlDatas=function(e,i){return void 0===i&&(i=o.e.atlas),this.mAtalsManager.getUrlDatas(e,i)},PicaRenderUiManager.prototype.showAlertView=function(i,n,a,s){void 0===a&&(a=!1),e.prototype.showAlertView.call(this,i,n,a,s)},PicaRenderUiManager.prototype.showErrorMsg=function(i){e.prototype.showErrorMsg.call(this,i)},PicaRenderUiManager.prototype.destroy=function(){e.prototype.destroy.call(this),this.mRender.emitter.off(s.Render.SCENE_CREATED,this.sceneCreated),this.mRender.emitter.off(s.Render.SCENE_DESTROY,this.sceneDestroy),this.singleManager.destroy()},PicaRenderUiManager.prototype._showPanel=function(e,i){this.mPanelMap||(this.mPanelMap=new Map),this.mCachePanelMap||(this.mCachePanelMap=new Map);var a=e+"Panel",s=n(1110)("./"+e+"/"+a),o=this.mPanelMap.get(e);return o||(o=new s[a](this),this.mPanelMap.set(e,o),this.mCachePanelMap.set(e,{panel:o,param:i})),this.sceneCreated?(o.show(i),o):o},PicaRenderUiManager.prototype.sceneCreated=function(){this.mCachePanelMap&&this.mCachePanelMap.forEach((function(e){var i=e.panel,n=e.param;i.show(n)}))},PicaRenderUiManager.prototype.sceneDestroy=function(){},PicaRenderUiManager}(s.UiManager)},function(e,i,n){"use strict";n.r(i),n.d(i,"BagGuidePanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(2),l=n(835),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function BagGuidePanel(i){return e.call(this,i.render)||this}return c(BagGuidePanel,e),BagGuidePanel.prototype.show=function(i){e.prototype.show.call(this,i),this.step1()},BagGuidePanel.prototype.end=function(){this.clsBtn&&this.clsBtn.off(s.ClickEvent.Tap,this.end,this),e.prototype.end.call(this)},BagGuidePanel.prototype.step1=function(){var e=this.uiManager.getPanel(h.ModuleName.BOTTOM).navigatePanel;this.bagBtn=e.bagButton;var i=this.bagBtn.getWorldTransformMatrix();this.guideEffect.createGuideEffect({x:i.tx,y:i.ty}),this.bagBtn.on(s.ClickEvent.Tap,this.step2,this)},BagGuidePanel.prototype.step2=function(){this.render.emitter.on(l.PicaBagPanel.PICABAG_SHOW,this.step3,this),this.bagBtn.off(s.ClickEvent.Tap,this.step2,this)},BagGuidePanel.prototype.step3=function(){this.render.emitter.off(l.PicaBagPanel.PICABAG_SHOW,this.step3,this);var e=this.uiManager.getPanel(h.ModuleName.PICABAG_NAME);this.clsBtn=e.closeBtn;var i=this.clsBtn.getWorldTransformMatrix();this.guideEffect.createGuideEffect({x:i.tx,y:i.ty}),this.clsBtn.on(s.ClickEvent.Tap,this.end,this)},BagGuidePanel}(o.BaseGuide)},function(e,i,n){"use strict";n.r(i),n.d(i,"BottomPanel",(function(){return T}));var a,s=n(789),o=n(788),h=n(2),l=n(0),c=n(790),m=n(836),f=n(792),g=n(794),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),T=function(e){function BottomPanel(i){var n=e.call(this,i)||this;return n.chatCatchArr=[],n.chatMaxLen=100,n.redMap=new Map,n.trumpetCount=0,n.scaleRatio=n.scale,n.atlasNames=[c.d.uicommon,c.d.iconcommon,c.d.chat],n.key=h.ModuleName.BOTTOM,n.scale=1,n.maskLoadingEnable=!1,n}return _(BottomPanel,e),BottomPanel.prototype.show=function(i){e.prototype.show.call(this,i),this.initialized&&this.checkUpdateActive()},BottomPanel.prototype.resize=function(e,i){var n=this.scene.cameras.main.height;this.mInput.resize(),this.y=n,this.mNavigate.y=-this.mNavigate.displayHeight,this.mInput.y=this.mNavigate.y-this.mInput.displayHeight,this.updateOutputLayout()},BottomPanel.prototype.setTrumpetState=function(e){this.trumpetCount=e,this.mInitialized&&this.mInput.setTrumpetState(e)},BottomPanel.prototype.updateUIState=function(e){this.mInitialized||this.mNavigate.updateUIState(e)},BottomPanel.prototype.addListen=function(){this.mInput.addListen(),this.mInput.on("enter",this.onSendMsgHandler,this),this.mInput.on("pointerScene",this.onPointerSceneHandler,this),this.mInput.on("trumpet",this.onTrumpetHandler,this),this.resizeColtroll.addListen(),this.resizeColtroll.on("toggleSize",this.onToggleSizeHandler,this)},BottomPanel.prototype.removeListen=function(){this.mInitialized&&(this.mInput.removeListen(),this.mInput.off("enter",this.onSendMsgHandler,this),this.mInput.off("pointerScene",this.onPointerSceneHandler,this),this.mInput.off("trumpet",this.onTrumpetHandler,this),this.resizeColtroll.removeListen(),this.resizeColtroll.off("toggleSize",this.onToggleSizeHandler,this))},BottomPanel.prototype.appendChat=function(e){this.chatCatchArr.push(e),this.chatCatchArr.length>this.chatMaxLen&&this.chatCatchArr.shift(),this.mOutput&&this.mOutput.appendChat(e)},BottomPanel.prototype.preload=function(){this.addAtlas(this.key,"bottom/bottom.png","bottom/bottom.json"),e.prototype.preload.call(this)},BottomPanel.prototype.showKeyboard=function(e,i){var n=this.cameraHeight-i;0!==n?(this.mInput.y=-n-this.mInput.height*this.scaleRatio,this.updateOutputLayout()):this.hideKeyboard()},BottomPanel.prototype.hideKeyboard=function(){this.mInput.y=this.mNavigate.y-this.mInput.height*this.scaleRatio,this.updateOutputLayout()},BottomPanel.prototype.getInputFocusing=function(){return this.mInput.getFocusing()},BottomPanel.prototype.exitUser=function(){this.mWorld.exitUser()},BottomPanel.prototype.snapshot=function(){this.mInput.blurInput(),this.render.displayManager.snapshot()},BottomPanel.prototype.setRedsState=function(e){this.tempDatas=e,this.mInitialized&&this.redMap.forEach((function(i,n){i.visible=-1!==e.indexOf(n)}))},Object.defineProperty(BottomPanel.prototype,"navigatePanel",{get:function(){return this.mNavigate},enumerable:!1,configurable:!0}),BottomPanel.prototype.onShow=function(){e.prototype.onShow.call(this),this.tempDatas&&this.setRedsState(this.tempDatas),void 0!==this.trumpetCount&&this.setTrumpetState(this.trumpetCount)},BottomPanel.prototype.onHide=function(){this.mInput.blurInput()},BottomPanel.prototype.init=function(){this.mOutput=new x(this.scene,this.dpr,this.scaleRatio),this.mInput=new S(this.scene,this.key,this.dpr,this.scaleRatio),this.mNavigate=new m.PicaNewNavigatePanel(this.scene,this.key,this.dpr,this.scaleRatio),this.mNavigate.setHandler(new l.Handler(this,this.onNavigateHandler)),this.background=this.scene.make.graphics(void 0),this.resizeColtroll=new j(this.scene,this.key,this.dpr,this.scaleRatio),this.addAt(this.background,0),this.add([this.mOutput,this.mInput,this.mNavigate,this.resizeColtroll]),this.creatRedMap(),this.resize(this.width,this.mOutput.height+this.mInput.height+this.mNavigate.height),this.mOutput.setBBcodeHandler(new l.Handler(this,this.onChatPointerHandler)),this.setChatImg(),e.prototype.init.call(this),this.onToggleSizeHandler(!1)},BottomPanel.prototype.creatRedMap=function(){var e=this;this.mNavigate.redMap.forEach((function(i,n){var a=g.UITools.creatRedImge(e.scene,i,{x:-10*e.dpr,y:0});e.redMap.set(n,a)}))},BottomPanel.prototype.checkUpdateActive=function(){var e=this;this.render.mainPeer.getActiveUIData(h.ModuleName.PICACHAT_NAME).then((function(i){i&&e.updateUIState(i)}))},BottomPanel.prototype.sendChat=function(e,i){if(e){var n=this.mediator;n&&n.sendChat({val:e,trumpet:i})}},BottomPanel.prototype.onSendMsgHandler=function(e,i){if(i&&this.trumpetCount<=0){var n={text:[{text:l.i18n.t("chat.turmptenough"),node:void 0}]};this.render.mainPeer.showMediator(h.ModuleName.PICANOTICE_NAME,!0,n)}else this.sendChat(e,i)},BottomPanel.prototype.onNavigateHandler=function(e,i){"bag"===e?this.render.renderEmitter(h.ModuleName.BOTTOM+"_showpanel",h.ModuleName.PICABAG_NAME):"friend"===e?this.render.renderEmitter(h.ModuleName.BOTTOM+"_showpanel",h.ModuleName.PICAFRIEND_NAME):"avatar"===e?this.render.renderEmitter(h.ModuleName.BOTTOM+"_showpanel",h.ModuleName.PICAAVATAR_NAME):"make"===e?this.render.renderEmitter(h.ModuleName.BOTTOM+"_showpanel",h.ModuleName.PICAILLUSTRATED_NEW_NAME):"explore"===e?this.render.renderEmitter(h.ModuleName.BOTTOM+"_showpanel",h.ModuleName.PICAEXPLORELIST_NAME):"home"===e&&this.render.renderEmitter(h.ModuleName.BOTTOM+"_gohome")},BottomPanel.prototype.onToggleSizeHandler=function(e){this.expanded=e,e?(this.mOutput.expand(),this.resizeColtroll.expand()):(this.mOutput.collapse(),this.resizeColtroll.collapse()),this.render.renderEmitter(h.EventType.CHAT_PANEL_EXTPAND,e),this.updateOutputLayout()},BottomPanel.prototype.onPointerSceneHandler=function(e){if(e&&e.length>0)for(var i=0,n=e;i<n.length;i++){if(n[i].parentContainer===this.resizeColtroll)return}this.mInput.blurInput()},BottomPanel.prototype.onTrumpetHandler=function(e,i){},BottomPanel.prototype.updateOutputLayout=function(){this.expanded?(this.mOutput.x=0,this.mOutput.y=this.mInput.y-1*this.dpr-this.mOutput.height,this.resizeColtroll.y=this.mOutput.y-.5*this.resizeColtroll.displayHeight,this.mOutput.expand()):(this.mOutput.x=this.resizeColtroll.displayWidth,this.mOutput.y=this.mInput.y-1*this.dpr-this.mOutput.height,this.resizeColtroll.y=this.mInput.y-1*this.dpr-.5*this.resizeColtroll.displayHeight,this.mOutput.collapse()),this.mOutput.updateLayout();var e=this.scene.cameras.main.width,i=-1*this.mOutput.y;this.background.clear(),this.background.fillStyle(0,0),this.background.fillRect(0,this.mOutput.y,e,i);var n=new Phaser.Geom.Rectangle(0,this.mOutput.y,e,i);this.background.input?this.background.input.hitArea=n:this.background.setInteractive(n,Phaser.Geom.Rectangle.Contains)},BottomPanel.prototype.setChatImg=function(){this.mOutput.addBBCodeImg("chat_horn",c.d.chat,"chat_horn")},BottomPanel.prototype.onChatPointerHandler=function(e){this.render.renderEmitter(h.ModuleName.BOTTOM+"_bbcodeEvent",e)},Object.defineProperty(BottomPanel.prototype,"mediator",{get:function(){return this.render.mainPeer[this.key]},enumerable:!1,configurable:!0}),BottomPanel}(f.PicaBasePanel),x=function(e){function OutputContainer(i,n,a){var s=e.call(this,i)||this;s.dpr=n,s.scaleRatio=a,s.background=s.scene.make.graphics(void 0,!1),s.background.clear();var h=s.scene.cameras.main.width;return s.mOutputText=new o.BBCodeText(s.scene,0,0,"",{fontSize:12*s.dpr*a+"px",fontFamily:l.Font.DEFULT_FONT,stroke:"#000000",strokeThickness:1*s.dpr*a,lineSpacing:5*n,shadow:{offsetX:0,offsetY:0,color:"#000",blur:4,stroke:!0,fill:!0},wrap:{mode:"char",width:h-12*s.dpr*a}}).setOrigin(0,0).setInteractive().on("areadown",(function(e){})).on("areaup",(function(e){s.bbcodeSend&&s.bbcodeSend.runWith(e)})),s.mOutputText.height=40*s.dpr*a,s.mTextArea=new o.TextArea(s.scene,{text:s.mOutputText}).layout().setOrigin(0,0),s.updateLayout(),s.add([s.background,s.mTextArea,s.mOutputText,s.mTextArea.childrenMap.child]),s.mTextMask=s.mTextArea.childrenMap.text,s}return _(OutputContainer,e),OutputContainer.prototype.resize=function(e,i){this.setSize(e,i),this.background.clear(),this.background.fillStyle(0,.6),this.background.fillRect(0,0,e,i);var n=e-8*this.dpr*this.scaleRatio,a=i-8*this.dpr*this.scaleRatio;this.mTextArea.childrenMap.child.setMinSize(n,a),this.mTextArea.layout(),this.mOutputText.setWrapWidth(e-8*this.dpr*this.scaleRatio),this.updateLayout(),this.mTextArea.childrenMap.text.y=4*this.dpr*this.scaleRatio,this.mTextArea.scrollToBottom()},OutputContainer.prototype.expand=function(){this.resize(this.scene.cameras.main.width,125.33*this.dpr*this.scaleRatio),this.mTextArea.setScrollerEnable(!0)},OutputContainer.prototype.collapse=function(){this.resize(296*this.dpr*this.scaleRatio,40*this.dpr*this.scaleRatio),this.mTextArea.setScrollerEnable(!1)},OutputContainer.prototype.updateLayout=function(){this.mTextArea.setPosition(4*this.dpr*this.scaleRatio,4*this.dpr*this.scaleRatio),this.mTextArea.scrollToBottom()},OutputContainer.prototype.appendChat=function(e){this.mTextArea&&(this.mTextArea.appendText(e),this.mTextArea.scrollToBottom(),this.mTextMask&&(this.mTextMask.y=4*this.dpr*this.scaleRatio))},OutputContainer.prototype.addBBCodeImg=function(e,i,n){this.mOutputText.addImage(e,{key:i,frame:n,y:1*this.dpr,left:8*this.dpr,right:8*this.dpr})},OutputContainer.prototype.setBBcodeHandler=function(e){this.bbcodeSend=e},OutputContainer}(Phaser.GameObjects.Container),S=function(e){function InputContainer(i,n,a,h){var m=e.call(this,i)||this;m.dpr=a,m.mFocusing=!1,m.trumpetCount=0,m.isTrumpent=!1,m.scale=h,m.background=i.make.graphics(void 0,!1);var f=l.i18n.t("chat.placeholder");m.emoji=i.make.image({key:n,frame:"home_face"}),m.emoji.x=12.67*a+.5*m.emoji.width,m.trumpet=new s.CheckBoxToggle(i,32*a,32*a,c.d.iconcommon,"bulletin_horn_close","bulletin_horn_opn",a),m.trumpet.x=m.emoji.x,m.trumpet.on(o.ClickEvent.Tap,m.onTrumpetHandler,m),m.trumpet.isOn=!1;var g=m.scene.cameras.main.width;return m.inputText=new s.LabelInput(m.scene,{width:g-46*m.dpr,height:16*m.dpr,placeholder:f,fontSize:11*m.dpr+"px",color:"#ffffff"}).setOrigin(0,.5).setAutoBlur(!1),m.add([m.background,m.emoji,m.trumpet,m.inputText]),m.emoji.visible=!1,m}return _(InputContainer,e),InputContainer.prototype.addListen=function(){this.inputText.on("enter",this.onEnterHandler,this),this.inputText.on("blur",this.onInputBlurHandler,this),this.inputText.on("focus",this.onInputFocusHandler,this)},InputContainer.prototype.removeListen=function(){this.inputText.off("enter",this.onEnterHandler,this),this.inputText.off("blur",this.onInputBlurHandler,this),this.inputText.off("focus",this.onInputFocusHandler,this)},InputContainer.prototype.resize=function(){var e=this.scene.cameras.main.width;this.setSize(e,38.33*this.dpr),this.inputText.x=46*this.dpr,this.inputText.y=.5*this.height,this.inputText.setSize(this.inputText.width,this.height),this.emoji.y=.5*this.height,this.trumpet.y=this.emoji.y,this.background.clear(),this.background.fillStyle(0,.6),this.background.fillRect(0,0,e,this.height)},InputContainer.prototype.setText=function(e){this.inputText.setText(e)},InputContainer.prototype.setTrumpetState=function(e){this.trumpetCount=e,this.isTrumpent?this.inputText.setPlaceholder(l.i18n.t("chat.turmpttips")):this.inputText.setPlaceholder(l.i18n.t("chat.placeholder"))},InputContainer.prototype.blurInput=function(){this.inputText.setBlur()},InputContainer.prototype.getFocusing=function(){return this.mFocusing},InputContainer.prototype.destroy=function(){this.scene&&this.scene.input.off("pointerdown",this.onPointerSceneHandler,this),e.prototype.destroy.call(this)},InputContainer.prototype.onEnterHandler=function(e){this.emit("enter",e,this.isTrumpent),this.inputText.setText("")},InputContainer.prototype.onInputBlurHandler=function(){this.scene.input.off("pointerdown",this.onPointerSceneHandler,this),this.inputText.setBlur()},InputContainer.prototype.onInputFocusHandler=function(){this.scene.input.on("pointerdown",this.onPointerSceneHandler,this),this.mFocusing=!0},InputContainer.prototype.onPointerSceneHandler=function(e,i){this.emit("pointerScene",i),this.inputText.setBlur(),this.mFocusing=!1},InputContainer.prototype.onTrumpetHandler=function(){this.isTrumpent=this.trumpet.isOn,this.isTrumpent?this.inputText.setPlaceholder(l.i18n.t("chat.turmpttips")):this.inputText.setPlaceholder(l.i18n.t("chat.placeholder"))},InputContainer}(Phaser.GameObjects.Container),j=function(e){function ResizeControll(i,n,a,s){var h=e.call(this,i)||this;return h.dpr=a,h.expaned=!0,h.scale=s,h.background=new o.Button(h.scene,n,"home_chat_pack_up_bg"),h.background.tweenEnable=!1,h.bubble=h.scene.make.image({key:n,frame:"home_chat"}),h.arrow=h.scene.make.image({key:n,frame:"home_unwind"}),h.setSize(h.background.width,h.background.height),h.bubble.x=.5*(-h.width+h.bubble.width)+12.67*a,h.arrow.x=.5*(-h.width+h.arrow.width)+43*a,h.add([h.background,h.bubble,h.arrow]),h.x=.5*h.displayWidth,h}return _(ResizeControll,e),ResizeControll.prototype.addListen=function(){this.background.on(o.ClickEvent.Tap,this.onToggleSizeHandler,this)},ResizeControll.prototype.removeListen=function(){this.background.off(o.ClickEvent.Tap,this.onToggleSizeHandler,this)},ResizeControll.prototype.expand=function(){this.background.setFrame("home_chat_unwind_bg"),this.arrow.scaleY=-1,this.expaned=!0,this.setSize(this.background.width,this.background.height)},ResizeControll.prototype.collapse=function(){this.background.setFrame("home_chat_pack_up_bg"),this.arrow.scaleY=1,this.expaned=!1,this.setSize(this.background.width,this.background.height)},ResizeControll.prototype.getExpaned=function(){return this.expaned},ResizeControll.prototype.onToggleSizeHandler=function(){this.expaned=!this.expaned,this.emit("toggleSize",this.expaned)},ResizeControll}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"InteractiveBubblePanel",(function(){return m}));var a,s=n(789),o=n(2),h=n(0),l=n(838),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function InteractiveBubblePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.map=new Map,n.key=o.ModuleName.BUBBLE_NAME,n}return c(InteractiveBubblePanel,e),InteractiveBubblePanel.prototype.resize=function(i,n){e.prototype.resize.call(this,i,n),this.setSize(i,n)},InteractiveBubblePanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.scale;this.resize(i,n),e.prototype.init.call(this)},InteractiveBubblePanel.prototype.destroy=function(){if(this.map){for(var i in this.map){var n=this.map.get(Number(i));n&&n.destroy()}this.map.clear()}e.prototype.destroy.call(this)},InteractiveBubblePanel.prototype.clearInteractionBubble=function(e){this.map.has(e)&&(this.map.get(e).destroy(),this.map.delete(e))},InteractiveBubblePanel.prototype.showInteractionBubble=function(e,i){var n=this,a=this.dpr;e.display.resName=null,e.display.texturePath=h.Url.getUIRes(a,"bubble/bubblebg.png"),e.display.dataPath=h.Url.getUIRes(a,"bubble/tipsicon.png");var o=e.id;this.mBubble&&this.mBubble.hide(),this.map.has(o)?this.mBubble=this.map.get(o):(this.mBubble=new l.InteractionBubbleContainer(this.scene,a),this.map.set(o,this.mBubble)),this.mBubble.setBubble(e,new h.Handler(this,this.onInteractiveBubbleHandler));var c=this.render.sceneManager.getSceneByName(s.PlayScene.name);c?(this.updateBubblePos(i,c),this.mBubble.setFollow(i,c,(function(e){n.updateBubblePos(i,e.scene)})),this.mBubble.show=!0,this.add(this.mBubble)):h.Logger.getInstance().fatal("scene does not exist")},InteractiveBubblePanel.prototype.updateBubblePos=function(e,i){var n=this.dpr,a=this.render.uiScale,s=e.getDisplay();if(s){var o=s.getWorldTransformMatrix();if(o){var l=h.Tool.getPosByScenes(i,new h.Pos(o.tx,o.ty-33*n*a));this.mBubble.setPosition(l.x,l.y)}}},InteractiveBubblePanel.prototype.update=function(){this.map&&this.map.forEach((function(e){e&&e.show&&e.updatePos()}))},InteractiveBubblePanel.prototype.onInteractiveBubbleHandler=function(e){this.render.renderEmitter(o.RENDER_PEER+"_"+this.key+"_queryinteractive",e)},InteractiveBubblePanel}(s.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"CreateRolePanel",(function(){return m}));var a,s=n(788),o=n(0),h=n(2),l=n(789),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function CreateRolePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.mCurPageNum=0,n.setTween(!1),n.scene.add.container(0,0).add(n),n.scene.scale.on("resize",n.onResize,n),n.mMediator=n.render.mainPeer[h.ModuleName.CREATEROLE_NAME],n.key=h.ModuleName.CREATEROLE_NAME,n}return c(CreateRolePanel,e),CreateRolePanel.prototype.show=function(i){i&&(this.avatars=this.creatAvatars(i),e.prototype.show.call(this,i))},CreateRolePanel.prototype.preload=function(){this.addAtlas(this.key,"create_role/create_role.png","create_role/create_role.json"),e.prototype.preload.call(this)},CreateRolePanel.prototype.hide=function(){e.prototype.hide.call(this)},CreateRolePanel.prototype.resize=function(i,n){if(e.prototype.resize.call(this,i,n),this.mBackground){var a=this.scale,s=i/a,o=n/a,h=this.scene.cameras.main.centerX/a;this.mBackground.x=h,this.mFoot.x=h,this.mFoot.y=o-(this.mFoot.height>>1),this.mBackgroundColor.clear(),this.mBackgroundColor.fillGradientStyle(7304703,7304703,314367,314367),this.mBackgroundColor.fillRect(0,0,s,o),this.mSubmit.x=h,this.inputText.x=h,this.mInputTextBg.x=h,this.dragonbones.x=h,this.mNextPageBtn.x=s-150,this.mRandomBtn.x=this.mInputTextBg.x+this.mInputTextBg.width/2-26*this.dpr}},CreateRolePanel.prototype.init=function(){var i=this.scene.cameras.main,n=i.width,a=i.height;this.mBackground=this.scene.make.image({key:this.key,frame:"bg.png",x:n>>1}),this.mBackground.y=this.mBackground.height/2+92*this.dpr,this.add(this.mBackground),this.mFoot=this.scene.make.image({key:this.key,frame:"bg_foot.png"},!1),this.add(this.mFoot),this.mBackgroundColor=this.scene.make.graphics(void 0,!1),this.mBackgroundColor.fillGradientStyle(7304703,7304703,314367,314367),this.mBackgroundColor.fillRect(0,0,n,a),this.addAt(this.mBackgroundColor,0),this.mInputTextBg=new s.NineSlicePatch(this.scene,n>>1,350*this.dpr,255*this.dpr,50*this.dpr,this.key,"input_bg.png",{left:27*this.dpr,top:24*this.dpr,right:28*this.dpr,bottom:24*this.dpr}),this.add(this.mInputTextBg),this.inputText=new s.InputText(this.scene,n>>1,350*this.dpr,160*this.dpr,80,{type:"input",fontSize:18*this.dpr+"px",color:"#717171",align:"center",placeholder:o.i18n.t("create_role.enter_nick")}).setOrigin(.5),this.add(this.inputText);var h=o.i18n.t("create_role.commit");this.mShowData&&this.mShowData.button&&(h=this.mShowData.button.text);var c=this.scene.textures.getFrame(this.key,"submit_button_normal"),m=42,f=43;c&&(m=c.width,f=c.height),this.mSubmit=new s.NineSliceButton(this.scene,n>>1,445*this.dpr,202*this.dpr,55*this.dpr,this.key,"submit_button",h,void 0,void 0,{left:19*this.dpr,top:20*this.dpr,right:m-2-19*this.dpr,bottom:f-2-20*this.dpr}),this.mSubmit.setTextStyle({color:"#976400",fontSize:18*this.dpr,fontFamily:o.Font.DEFULT_FONT}),this.mSubmit.setFontStyle("bold"),this.mSubmit.on("pointerup",this.onSubmitHandler,this),this.add(this.mSubmit),this.mPrePageBtn=this.scene.make.image({x:60*this.dpr,y:216*this.dpr,key:this.key,frame:"arrow_left.png"}).setInteractive(),this.mPrePageBtn.on("pointerup",this.onPrePageHandler,this),this.mNextPageBtn=this.scene.make.image({x:n-60*this.dpr,y:this.mPrePageBtn.y,key:this.key,frame:"arrow.png"}).setFlipX(!0).setInteractive(),this.mNextPageBtn.on("pointerup",this.onNextPageHandler,this),this.mRandomBtn=this.scene.make.image({x:this.mInputTextBg.x,y:this.mInputTextBg.y,key:this.key,frame:"random.png"}).setInteractive(),this.add([this.mPrePageBtn,this.mNextPageBtn,this.mRandomBtn]),this.mRandomBtn.on("pointerup",this.onRandomNameHandler,this),this.mErrorBg=this.scene.make.image({key:this.key,frame:"tips_bg.png",x:220*this.dpr,y:57*this.dpr}).setVisible(!1),this.mError=this.scene.make.text({x:127*this.dpr,y:30*this.dpr,style:{color:"#26265d",font:"bold 34px YaHei",wordWrap:{width:420,useAdvancedWrap:!0}}},!1).setVisible(!1),this.add([this.mErrorBg,this.mError]),this.dragonbones=new l.DragonbonesDisplay(this.scene,this.render),this.dragonbones.scale=2*this.dpr,this.dragonbones.x=n>>1,this.dragonbones.y=this.mNextPageBtn.y+70*this.dpr,this.dragonbones.on("initialized",this.loadDragonbonesComplete,this),this.add(this.dragonbones),this.setPageNum(0),e.prototype.init.call(this),this.resize(0,0)},CreateRolePanel.prototype.setAvatars=function(e){},CreateRolePanel.prototype.showError=function(e){this.mError&&(this.mError.text=e,this.mError.setVisible(!0),this.mErrorBg.setVisible(!0))},CreateRolePanel.prototype.setNickName=function(e){this.inputText&&(this.inputText.text=e)},CreateRolePanel.prototype.destroy=function(){this.scene&&this.scene.scale.off("resize",this.onResize,this),this.dragonbones&&this.dragonbones.off("initialized",this.loadDragonbonesComplete,this),e.prototype.destroy.call(this)},CreateRolePanel.prototype.creatAvatars=function(e){for(var i=[],n=0,a=e.avatarSuits;n<a.length;n++){for(var s=[],o=0,l=a[n].avatarSuit;o<l.length;o++){var c=l[o],m={id:c.id,suit_type:c.suitType,slot:c.slot,tag:c.tag,sn:c.sn};s.push(m)}var f=h.AvatarSuitType.createHasBaseAvatar(s);i.push(f)}return e.avatars=i,i},CreateRolePanel.prototype.onRandomNameHandler=function(){this.mediator.randomName(),this.inputText.setBlur()},CreateRolePanel.prototype.onSubmitHandler=function(){this.mediator.submit(this.inputText.text,this.mCurPageNum),this.inputText.setBlur(),this.mError&&(this.mError.setVisible(!1),this.mErrorBg.setVisible(!1))},CreateRolePanel.prototype.onPrePageHandler=function(){this.setPageNum(this.mCurPageNum-1),this.inputText.setBlur()},CreateRolePanel.prototype.onNextPageHandler=function(){this.setPageNum(this.mCurPageNum+1),this.inputText.setBlur()},CreateRolePanel.prototype.setPageNum=function(e){this.mCurPageNum=e,this.avatars&&(this.mCurPageNum<0?this.mCurPageNum=this.avatars.length-1:this.mCurPageNum>=this.avatars.length&&(this.mCurPageNum=0),this.dragonbones.load({id:0,avatar:this.avatars[this.mCurPageNum]},void 0,!1),this.dragonbones.startLoad())},CreateRolePanel.prototype.onResize=function(e){this.resize(e.width,e.height)},CreateRolePanel.prototype.loadDragonbonesComplete=function(){this.dragonbones.play({name:"idle",flip:!1})},Object.defineProperty(CreateRolePanel.prototype,"mediator",{get:function(){if(this.mMediator)return this.mMediator},enumerable:!1,configurable:!0}),CreateRolePanel}(l.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"CutInPanel",(function(){return l}));var a,s=n(789),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function CutInPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key="cut_in",n}return h(CutInPanel,e),CutInPanel.prototype.show=function(e){var i=this;if(this.mShowData=e,this.mInitialized){if(e){var n=e.text;this.mName&&this.mName.setText(n[0].text)}else this.mName&&this.mName.setText("???");var a=this.scene.cameras.main.width;this.x=a+this.width/2;var s=this.scene.cameras.main.width/2;this.scene.tweens.timeline({targets:this,duration:300,tweens:[{x:s,alpha:1,ease:"Sine.easeInOut"},{delay:2e3,y:this.y-10*this.dpr,alpha:0}],onComplete:function(){i.emit("close")}})}else this.preload()},CutInPanel.prototype.resize=function(e,i){this.y=140*this.dpr},CutInPanel.prototype.preload=function(){this.addImage(this.key,"cut_in/cut_in_bg.png"),e.prototype.preload.call(this)},CutInPanel.prototype.init=function(){var i=this.scene.make.image({key:this.key},!1);this.setSize(i.width*this.scale,i.height*this.scale),this.mName=this.scene.make.text({style:{color:"#ffcc33",fontSize:18*this.dpr,fotnFamily:o.Font.DEFULT_FONT}},!1).setOrigin(.5),this.mName.setFontStyle("bold"),this.mName.setStroke("#000000",1*this.dpr),this.add([i,this.mName]),e.prototype.init.call(this),this.resize(this.scene.cameras.main.width,this.scene.cameras.main.height)},CutInPanel}(s.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"CutInMenuPanel",(function(){return m}));var a,s=n(789),o=n(2),h=n(0),l=n(788),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function CutInMenuPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.mapPop=new Map,n.key=o.ModuleName.CUTINMENU_NAME,n}return c(CutInMenuPanel,e),CutInMenuPanel.prototype.resize=function(i,n){e.prototype.resize.call(this,i,n),this.setSize(i,n)},CutInMenuPanel.prototype.preload=function(){this.addAtlas(this.key,"cutInmenu/cutInmenu.png","cutInmenu/cutInmenu.json"),e.prototype.preload.call(this)},CutInMenuPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight,a=this.buttonType;if("work"===a||(this.rightPopButton="minecar"===a?new g(this.scene,i,this.key,this.dpr):"editor"===a?new T(this.scene,i,this.key,this.dpr):"survey"===a?new _(this.scene,i,this.key,"survey_magnifier",h.i18n.t("common.survey"),this.dpr):new f(this.scene,i,this.key,this.dpr)),this.rightPopButton){var s=i+.5*this.rightPopButton.width-15*this.dpr;this.rightPopButton.setPosition(s,.5*n+60*this.dpr),this.rightPopButton.setClickHandler(new h.Handler(this,this.onRightClickHandler)),this.add(this.rightPopButton)}this.resize(i,n),e.prototype.init.call(this),this.opneButton()},CutInMenuPanel.prototype.onShow=function(){this.setPopData(this.popData)},CutInMenuPanel.prototype.setPopData=function(e){if(this.popData=e,this.mInitialized&&this.rightPopButton){var i=this.buttonType;"work"===i?this.rightPopButton.setCount(e):"minecar"===i||"survey"===i&&this.rightPopButton.setCount(e)}},CutInMenuPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},CutInMenuPanel.prototype.opneButton=function(){this.mInitialized&&this.rightPopButton&&this.rightPopButton.onTakeBack()},CutInMenuPanel.prototype.onRightClickHandler=function(){var e=this.buttonType;"work"===e?this.render.renderEmitter(o.ModuleName.CUTINMENU_NAME+"_openmed",o.ModuleName.PICAWORK_NAME):"minecar"===e?this.render.renderEmitter(o.ModuleName.CUTINMENU_NAME+"_openmed",o.ModuleName.PICANEWMINE_NAME):"editor"===e?this.render.renderEmitter(o.ModuleName.CUTINMENU_NAME+"_editor"):"survey"===e&&this.render.renderEmitter(o.ModuleName.CUTINMENU_NAME+"_openmedsurvey")},Object.defineProperty(CutInMenuPanel.prototype,"buttonType",{get:function(){return this.mShowData.button[0].text},enumerable:!1,configurable:!0}),CutInMenuPanel}(s.BasePanel),f=function(e){function RightPopContainer(i,n,a,o){var c=e.call(this,i)||this;c.isPop=!1,c.isPlaying=!1,c.dpr=o,c.key=a,c.scaleWidth=n,c.minecarbg=c.scene.make.image({key:c.key,frame:"minebag_bg"}),c.minecarbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);new s.Tap(c.minecarbg);c.minecarbg.on(l.ClickEvent.Tap,c.onClickHandler,c),c.minecarbg.setInteractive(),c.setSize(c.minecarbg.width,c.minecarbg.height),c.bgSprite=c.scene.make.image({key:c.key,frame:"minebag_bg_brth"},!1),c.bgSprite.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.imgIcon=c.scene.make.image({key:c.key,frame:"minecar"}),c.imgIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.imgIcon.setPosition(-12*o,.5*-c.imgIcon.height),c.text=i.make.text({x:c.imgIcon.x,y:2*o,text:h.i18n.t("common.open"),style:h.UIHelper.whiteStyle(o,12)},!1).setOrigin(.5),c.text.setFontStyle("bold"),c.text.setStroke("#2D1415",3*o),c.arrow=new s.ButtonEventDispatcher(c.scene,0,0),c.arrow.setSize(25*o,31*o);var m=c.scene.make.image({key:c.key,frame:"arow"});return c.arrow.add(m),c.arrow.enable=!0,c.arrow.on(l.ClickEvent.Tap,c.onTakeBack,c),c.arrow.setPosition(.5*-c.minecarbg.width+10*o,0),c.add([c.bgSprite,c.minecarbg,c.imgIcon,c.text,c.arrow]),c.tween=c.scene.tweens.add({targets:c.bgSprite,alpha:{value:0,duration:500,ease:"Power1",yoyo:!0},repeat:-1}),c}return c(RightPopContainer,e),RightPopContainer.prototype.setClickHandler=function(e){this.clickHandler=e},RightPopContainer.prototype.setIconFrame=function(e){this.imgIcon.setFrame(e)},RightPopContainer.prototype.setPopData=function(e){this.popData=e},RightPopContainer.prototype.play=function(){this.bgSprite.alpha=1,this.tween.resume(),this.isPop=!1},RightPopContainer.prototype.stop=function(){this.tween.pause(),this.bgSprite.alpha=0,this.isPop=!0},RightPopContainer.prototype.onClickHandler=function(){this.clickHandler&&this.clickHandler.runWith(this.popData)},RightPopContainer.prototype.onTakeBack=function(){this.isPlaying||this.isPop?!this.isPlaying&&this.isPop&&this.takeback():this.popAnim()},RightPopContainer.prototype.popAnim=function(){this.isPlaying=!0;var e=this.scaleWidth-15*this.dpr,i=this;this.scene.tweens.add({targets:i,x:{value:e,duration:300,ease:"Bounce.easeOut"},onComplete:function(){i.stop(),i.isPlaying=!1}})},RightPopContainer.prototype.takeback=function(){this.timeID&&(clearTimeout(this.timeID),this.timeID=void 0),this.isPlaying=!0;var e=this.scaleWidth+.5*this.width-15*this.dpr,i=this;this.scene.tweens.add({targets:i,x:{value:e,duration:300,ease:"Bounce.easeOut"},onComplete:function(){i.play(),i.isPlaying=!1}})},RightPopContainer}(Phaser.GameObjects.Container),g=function(e){function MinePopContainer(i,n,a,s){var o=e.call(this,i,n,a,s)||this;return o.text.setText(h.i18n.t("mine.proptips")),o.setIconFrame("mine_pickaxe"),o.imgIcon.y=-12*s,o.imgIcon.x-=3*s,o.text.x=o.imgIcon.x,o}return c(MinePopContainer,e),MinePopContainer}(f),_=function(e){function WorkPopContainer(i,n,a,s,o,l){var c=e.call(this,i,n,a,l)||this;c.imgIcon.x=-22*l,c.text.x=c.imgIcon.x;var m=c.scene.make.image({key:c.key,frame:"time"});return m.x=c.imgIcon.x+.5*m.width+20*l,m.y=2*l,c.add(m),c.countTex=i.make.text({x:m.x,y:m.y,text:"",style:h.UIHelper.whiteStyle(l,10)},!1).setOrigin(.5),c.countTex.setFontStyle("bold"),c.add(c.countTex),c.setIconFrame(s),c.text.text=o,c}return c(WorkPopContainer,e),WorkPopContainer.prototype.setCount=function(e){this.countTex.text=e+""},WorkPopContainer.prototype.popAnim=function(){this.isPlaying=!0;var e=this.scaleWidth-25*this.dpr,i=this;this.scene.tweens.add({targets:i,x:{value:e,duration:300,ease:"Bounce.easeOut"},onComplete:function(){i.stop(),i.isPlaying=!1}})},WorkPopContainer.prototype.takeback=function(){this.timeID&&(clearTimeout(this.timeID),this.timeID=void 0),this.isPlaying=!0;var e=this.scaleWidth+.5*this.width-15*this.dpr,i=this;this.scene.tweens.add({targets:i,x:{value:e,duration:300,ease:"Bounce.easeOut"},onComplete:function(){i.play(),i.isPlaying=!1}})},WorkPopContainer}(f),T=function(e){function EditorPopContainer(i,n,a,s){var o=e.call(this,i,n,a,s)||this;return o.text.setText(h.i18n.t("common.editor")),o.setIconFrame("edit_icon"),o.imgIcon.y=-12*s,o.imgIcon.x-=3*s,o.text.x=o.imgIcon.x,o}return c(EditorPopContainer,e),EditorPopContainer}(f)},function(e,i,n){"use strict";n.r(i),n.d(i,"DialogPanel",(function(){return _}));var a,s,o,h=n(788),l=n(0),c=n(2),m=n(789),f=n(790),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)});!function(e){e[e.HORIZONTAL_LEFT=0]="HORIZONTAL_LEFT",e[e.HORIZONTAL_CENTER=1]="HORIZONTAL_CENTER",e[e.HORIZONTAL_RIGHT=2]="HORIZONTAL_RIGHT"}(s||(s={})),function(e){e[e.VERTICAL_TOP=0]="VERTICAL_TOP",e[e.VERTICAL_CENTER=1]="VERTICAL_CENTER",e[e.VERTICAL_BOTTOM=2]="VERTICAL_BOTTOM"}(o||(o={}));var _=function(e){function DialogPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=c.ModuleName.DIALOG_NAME,n.listItems=[],n.key=c.ModuleName.DIALOG_NAME,n}return g(DialogPanel,e),DialogPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight,o=177*this.dpr;e.prototype.resize.call(this,a,s),this.content.setPosition(.5*a,s-o/2),this.setSize(a,s),this.blackBg.clear(),this.blackBg.fillStyle(0,.5),this.blackBg.fillRect(0,0,a,s),this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains),this.bg.scaleX=1.5*a,this.bg.x=0,this.bg.setInteractive(),this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR)},DialogPanel.prototype.preload=function(){this.addAtlas(this.key,f.d.textureUrl(f.d.commonUrl),f.d.jsonUrl(f.d.commonUrl)),e.prototype.preload.call(this)},DialogPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen(),this.setDialogData(this.mShowData)):this.preload())},DialogPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight,a=177*this.dpr;this.blackBg=this.scene.make.graphics(void 0,!1),this.add(this.blackBg),this.content=this.scene.make.container({x:0*this.dpr,y:(n-a)/2,width:i,height:a},!1),this.content.setSize(i,a),this.bg=this.scene.make.image({x:0,y:0,key:this.key,frame:"menu_bg_l"}),this.bg.scaleY=this.scale,this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.bg.displayWidth=i,this.bg.displayHeight=a;new m.Tap(this.bg);var s=this.scene.make.graphics(void 0,!1),o=i-30*this.dpr,c=122*this.dpr;s.setPosition(-o>>1,.5*-c+13*this.dpr),s.clear(),s.fillStyle(16777215,1),s.fillRoundedRect(0,0,o,c,8*this.dpr),this.text=this.scene.make.text({x:.5*-o+20*this.dpr,y:.5*-c+30*this.dpr,text:"",style:{color:"#000000",fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0).setWordWrapWidth(o-35*this.dpr,!0);var f=.5*-i+38*this.dpr,g=.5*-a+25*this.dpr;this.npcIcon=new m.DynamicImage(this.scene,f,g-20*this.dpr);var _=this.scene.make.image({x:f+135*this.dpr,y:g,key:this.key,frame:"name_bg"});this.npcName=this.scene.make.text({x:_.x,y:_.y,text:"",style:{fontSize:15*this.dpr,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(.5);var T=new h.Button(this.scene,this.key,"close_1","close_1");T.setPosition(.5*i-30*this.dpr,.5*-a+10*this.dpr),T.on(h.ClickEvent.Tap,this.onCloseHandler,this),T.visible=!1,this.content.add([this.bg,this.npcIcon,s,this.text,_,this.npcName,T]),this.bg.setInteractive(),this.bg.on(h.ClickEvent.Tap,this.onNextDialogHandler,this),this.add(this.content),this.resize(0,0),e.prototype.init.call(this),this.mScene.layerManager.addToLayer(m.MainUIScene.LAYER_DIALOG,this)},DialogPanel.prototype.setLayoutItems=function(e){var i=e.length,n=i>4?2:1,a=(this.dpr,295*this.dpr),s=27*this.dpr,o=a/n,h=4*this.dpr;2===i?h=15*this.dpr:3===i&&(h=10*this.dpr);for(var c=(124*this.dpr-(h+s)*(i<4?i:4)-h)/2-42*this.dpr,m=0,f=this.listItems;m<f.length;m++){(_=f[m]).visible=!1}for(var g=0;g<i;g++){var _=void 0;g<this.listItems.length?_=this.listItems[g]:(_=new T(this.scene,this.dpr,this.scale,this.key),this.content.add(_),this.listItems.push(_),_.setHandler(new l.Handler(this,this.onItemHandler)));var x=.5*(a-o)*(g<4?-1:1),S=c+.5*s+(s+h)*(g%4);_.setItemSize(o,s),_.setPosition(x,S),_.setItemData(e[g]),_.visible=!0}},DialogPanel.prototype.setDialogData=function(e){var i=this;if(e.text&&e.text[1]&&(this.npcName.text=e.text[1].text),e.display&&e.display[0]){this.npcIcon.visible=!0;var n=e.display[0],a=l.Url.getOsdRes(n.texturePath);this.npcIcon.load(a,this,(function(){var e=i.content.width,a=i.content.height;i.npcIcon.displayWidth=212*i.dpr,i.npcIcon.scaleY=i.npcIcon.scaleX;var o=i.npcIcon.displayWidth,h=i.npcIcon.x,l=.5*-a-50*i.dpr;n.horizontal===s.HORIZONTAL_LEFT?h=.5*-e+.5*o:n.horizontal===s.HORIZONTAL_CENTER?h=0:n.horizontal===s.HORIZONTAL_RIGHT&&(h=.5*e-.5*o),i.npcIcon.x=h,i.npcIcon.y=l}))}else this.npcIcon.visible=!1;if(e.button&&e.button.length>0)this.setLayoutItems(e.button),this.text.visible=!1;else{for(var o=0,h=this.listItems;o<h.length;o++){h[o].visible=!1}this.text.text=e.text[0].text,this.text.visible=!0}},DialogPanel.prototype.update=function(e){this.mShowData=e,this.setDialogData(e)},DialogPanel.prototype.onItemHandler=function(e){for(var i=0,n=this.listItems;i<n.length;i++){n[i].select=!1}e.select=!0;var a=this.showData;this.render.renderEmitter(this.key+"_querydialog",{id:a.id,nodeid:e.itemData.node.id})},DialogPanel.prototype.onNextDialogHandler=function(){var e=this.showData;this.render.renderEmitter(this.key+"_querydialog",{id:e.id,nodeid:0})},DialogPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_hide")},DialogPanel}(m.BasePanel),T=function(e){function NpcDialogueItem(i,n,a,s){var o=e.call(this,i)||this;o.dpr=0,o.zoom=0,o.zoom=a,o.dpr=n,o.selectBg=o.scene.make.image({x:0,y:0,key:s,frame:"select_bg"}),o.arrImg=o.scene.make.image({x:.5*-o.selectBg.width,y:0,key:s,frame:"arrow_r"}),o.content=o.scene.make.text({x:0,y:0,text:"",style:{color:"#000000",fontSize:15*n,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0,.5),o.content.setLineSpacing(5*n),o.add([o.selectBg,o.arrImg,o.content]),o.width=o.selectBg.width,o.height=o.selectBg.height;new m.Tap(o);return o.on(h.ClickEvent.Tap,o.onClickHandler,o),o}return g(NpcDialogueItem,e),NpcDialogueItem.prototype.setItemData=function(e){this.itemData=e,this.content.text=e.text,this.select=!1},NpcDialogueItem.prototype.setHandler=function(e){this.handler=e},Object.defineProperty(NpcDialogueItem.prototype,"select",{set:function(e){this.selectBg.visible=e},enumerable:!1,configurable:!0}),NpcDialogueItem.prototype.setItemSize=function(i,n){e.prototype.setSize.call(this,i,n),this.selectBg.displayWidth=i,this.arrImg.x=.5*-i*.9,this.content.x=this.arrImg.x+20*this.dpr*this.zoom,this.setInteractive(new Phaser.Geom.Rectangle(0,0,i,n),Phaser.Geom.Rectangle.Contains)},NpcDialogueItem.prototype.onClickHandler=function(){this.handler&&this.handler.runWith(this)},NpcDialogueItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"ExploreGuidePanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(2),l=n(839),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function ExploreGuidePanel(i){return e.call(this,i.render)||this}return c(ExploreGuidePanel,e),ExploreGuidePanel.prototype.show=function(i){e.prototype.show.call(this,i),this.step1()},ExploreGuidePanel.prototype.step1=function(){var e=this,i=this.uiManager.getPanel(h.ModuleName.BOTTOM).navigatePanel.exploreButton,n=i.getWorldTransformMatrix();this.guideEffect.createGuideEffect({x:n.tx,y:n.ty}),i.on(s.ClickEvent.Tap,(function(){e.step2()}),this)},ExploreGuidePanel.prototype.step2=function(){var e=this;this.render.emitter.once(l.PicaExploreListPanel.PICAEXPLORELIST_DATA,(function(i){var n=e.uiManager.getPanel(h.ModuleName.PICAEXPLORELIST_NAME).levelPanel.levelItems[0],a=n.openButton.getWorldTransformMatrix();e.guideEffect.createGuideEffect({x:a.tx,y:a.ty+i}),n.on(s.ClickEvent.Tap,(function(){e.end()}),e)}),this)},ExploreGuidePanel}(o.BaseGuide)},function(e,i,n){"use strict";n.r(i),n.d(i,"FriendInvitePanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(2),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function FriendInvitePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=c.ModuleName.FRIEND_INVITE,n}return m(FriendInvitePanel,e),FriendInvitePanel.prototype.show=function(i){e.prototype.show.call(this,i),this.mInitialized&&this.showInvite()},FriendInvitePanel.prototype.addListen=function(){e.prototype.addListen.call(this),this.refused.on(s.ClickEvent.Tap,this.onRefusedHandler,this),this.agree.on(s.ClickEvent.Tap,this.onAgreeHandler,this)},FriendInvitePanel.prototype.removeListen=function(){e.prototype.removeListen.call(this),this.refused.off(s.ClickEvent.Tap,this.onRefusedHandler,this),this.agree.off(s.ClickEvent.Tap,this.onAgreeHandler,this)},FriendInvitePanel.prototype.destroy=function(){this.tween&&this.tween.stop(),e.prototype.destroy.call(this)},FriendInvitePanel.prototype.preload=function(){this.addAtlas(h.c.commonKey,h.d.commonUrl+".png",h.d.commonUrl+".json"),e.prototype.preload.call(this)},FriendInvitePanel.prototype.init=function(){this.setSize(168*this.dpr,59*this.dpr);var i=5*this.dpr;this.bg=this.scene.make.graphics(void 0,!1),this.bg.fillStyle(0,.6),this.bg.fillRoundedRect(0,0,this.width,this.height,{tl:0,tr:i,br:i,bl:0}),this.text=new s.BBCodeText(this.scene,.5*this.width,7*this.dpr,"",{}).setOrigin(.5,0).setFontSize(10*this.dpr).setFontFamily(l.Font.DEFULT_FONT);var n=55*this.dpr,a=24*this.dpr,o={left:12*this.dpr,top:12*this.dpr,right:12*this.dpr,bottom:12*this.dpr};this.refused=new s.NineSliceButton(this.scene,.5*n+17.67*this.dpr,.5*a+31*this.dpr,n,a,h.c.commonKey,"red_btn_normal",l.i18n.t("friend_invite.refused"),this.dpr,this.scale,o),this.agree=new s.NineSliceButton(this.scene,this.width-.5*n-24.33*this.dpr,.5*a+31*this.dpr,n,a,h.c.commonKey,"button_g",l.i18n.t("friend_invite.agree"),this.dpr,this.scale,o),this.add([this.bg,this.text,this.refused,this.agree]),this.y=374*this.dpr,e.prototype.init.call(this)},FriendInvitePanel.prototype.showInvite=function(){var e=this;if(this.tween&&this.tween.stop(),this.interval&&clearInterval(this.interval),this.showData){var i=this.showData,n=i.button;n.length<2||(this.x=-this.width,this.text.text="[color=#FFFF00]"+i.text[0].text+"[/color]",this.agree.setText(n[1].text),this.agree.setData("data",n[1]),this.refused.setText(n[0].text),this.refused.setData("data",n[0]),this.countdown=10,this.setAgressText(),this.tween=this.scene.tweens.add({targets:this,props:{x:0},duration:200,onComplete:function(){e.interval=setInterval((function(){--e.countdown<0?e.close():e.setAgressText()}),1e3)}}))}},FriendInvitePanel.prototype.onAgreeHandler=function(){if(this.mShowData){var e=this.agree.getData("data");e&&e.node&&(this.targetUI(this.mShowData.id,e.node.id),this.close())}},FriendInvitePanel.prototype.onRefusedHandler=function(){this.close()},FriendInvitePanel.prototype.close=function(){var e=this;this.interval&&clearInterval(this.interval),this.tween&&this.tween.stop(),this.tween=this.scene.tweens.add({targets:this,props:{x:-this.width},duration:200,onComplete:function(){var i=e.refused.getData("data");i&&i.node&&e.targetUI(e.mShowData.id,i.node.id)}})},FriendInvitePanel.prototype.setAgressText=function(){if(this.agree){var e=this.agree.getData("data");e&&this.agree.setText(e.text+"("+this.countdown+")")}},FriendInvitePanel.prototype.targetUI=function(e,i){var n=this.mediator;n&&n.targetUI(e,i)},Object.defineProperty(FriendInvitePanel.prototype,"mediator",{get:function(){return this.render.mainPeer[c.ModuleName.FRIEND_INVITE]},enumerable:!1,configurable:!0}),FriendInvitePanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"HomeGuidePanel",(function(){return c}));var a,s=n(788),o=n(789),h=n(2),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function HomeGuidePanel(i){return e.call(this,i.render)||this}return l(HomeGuidePanel,e),HomeGuidePanel.prototype.show=function(i){e.prototype.show.call(this,i),this.step1()},HomeGuidePanel.prototype.end=function(){this.homeBtn&&this.homeBtn.off(s.ClickEvent.Tap,this.end,this),e.prototype.end.call(this)},HomeGuidePanel.prototype.step1=function(){var e=this.uiManager.getPanel(h.ModuleName.BOTTOM).navigatePanel;this.homeBtn=e.homeButton;var i=this.homeBtn.getWorldTransformMatrix();this.guideEffect.createGuideEffect({x:i.tx,y:i.ty}),this.homeBtn.on(s.ClickEvent.Tap,this.end,this)},HomeGuidePanel}(o.BaseGuide)},function(e,i,n){"use strict";n.r(i),n.d(i,"HotelGuidePanel",(function(){return m}));var a,s=n(788),o=n(796),h=n(2),l=n(843),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function HotelGuidePanel(i){return e.call(this,i)||this}return c(HotelGuidePanel,e),HotelGuidePanel.prototype.end=function(){this.room.off("pointerdown",this.end,this),this.render.emitter.off(o.j.PicaPartyNavigationPanel_CLOSE,this.end,this),e.prototype.end.call(this)},HotelGuidePanel.prototype.step3=function(e){this.taskButton.off(s.ClickEvent.Tap,this.step2,this),this.render.emitter.off(o.k.PICATASK_DATA,this.step3,this);var i=this.uiManager.getPanel(h.ModuleName.PICATASK_NAME).mainPanel.taskItems[0];i||this.end(),this.itemTaskBtn=i.taskButton;var n=this.itemTaskBtn.getWorldTransformMatrix(),a=n.scaleX,l=(i.width-.5*this.itemTaskBtn.width)*a;this.guideEffect.createGuideEffect({x:l,y:n.ty}),this.itemTaskBtn.on(s.ClickEvent.Tap,this.step4,this)},HotelGuidePanel.prototype.step4=function(){this.render.emitter.on(o.j.PICASELFROOM_DATA,this.step5,this)},HotelGuidePanel.prototype.step5=function(){this.mPartyNavigationPanel=this.uiManager.getPanel(h.ModuleName.PICAPARTYNAVIGATION_NAME),this.render.emitter.on(o.j.PicaPartyNavigationPanel_CLOSE,this.end,this),this.render.emitter.off(o.j.PICASELFROOM_DATA,this.step5,this),this.myRoomPanel=this.mPartyNavigationPanel.myRoomPanel,this.myRoomPanel?this.step6():this.render.emitter.on(o.i.PICAMYNAVIGATIONPANEL_DATA,this.step6,this)},HotelGuidePanel.prototype.step6=function(){this.render.emitter.off(o.i.PICAMYNAVIGATIONPANEL_DATA,this.step6,this),this.myRoomPanel=this.mPartyNavigationPanel.myRoomPanel;var e=this.myRoomPanel.roomsItems;if(e){var i=e[0];if(i){var n=i.roomList();if(n)if(this.room=n[0],this.room){var a=this.room.getWorldTransformMatrix(),s=.5*this.mPartyNavigationPanel.width/a.scaleX;this.guideEffect.createGuideEffect({x:s,y:a.ty}),this.room.on("pointerdown",this.end,this)}else this.end();else this.end()}else this.end()}else this.end()},HotelGuidePanel}(l.BaseHotelGuidePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"LoginPanel",(function(){return f}));var a,s=n(788),o=n(790),h=n(789),l=n(2),c=n(0),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function LoginPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.areaCode="86",n.downcount=-1,n.mMediator=n.render.mainPeer[l.ModuleName.LOGIN_NAME],n.key=l.ModuleName.LOGIN_NAME,n}return m(LoginPanel,e),LoginPanel.prototype.show=function(){e.prototype.show.call(this),this.mInitialized&&this.setInputVisible(!0)},LoginPanel.prototype.hide=function(){e.prototype.hide.call(this)},LoginPanel.prototype.setInputVisible=function(e){this.mPhoneCodeInput&&(this.mPhoneCodeInput.visible=e,this.mPhoneInput.visible=e)},LoginPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.fetchTime&&clearTimeout(this.fetchTime)},LoginPanel.prototype.setLoginEnable=function(e){this.loginBtn.enable=e},LoginPanel.prototype.preload=function(){this.addAtlas(this.key,"login/login.png","login/login.json"),this.addAtlas(o.c.commonKey,o.d.commonUrl+".png",o.d.commonUrl+".json"),e.prototype.preload.call(this)},LoginPanel.prototype.init=function(){var i=this.scene.cameras.main.width/this.scale,n=this.scene.cameras.main.height/this.scale,a=(this.scene.add.container(0,0,this),this.scale,this.scene.make.graphics(void 0,!1));a.fillRect(0,0,i,n),a.fillGradientStyle(7304703,7304703,118271,118271);var l=this.scene.make.image({x:0,y:0,key:this.key,frame:"cloud_left"},!1).setOrigin(0);l.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var m=this.scene.make.image({x:i,y:0,key:this.key,frame:"cloud_right"},!1).setOrigin(1,0);m.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var f=this.scene.make.image({x:.5*i,y:44*this.dpr,key:this.key,frame:"logo"},!1).setOrigin(.5,0);f.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var g=this.scene.make.image({key:this.key,frame:"bg"});g.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),g.x=.5*i,g.y=n-.5*g.height,this.mPhoneInput=new h.InputField(this.scene,0,0,256*this.dpr,40*this.dpr,{type:"tel",maxLength:11,placeholder:"请输入手机号码",color:"#717171",fontSize:16*this.dpr+"px"}),this.mPhoneInput.on("enter",this.onEnterPhoneHandler,this);var _=this.createInput(this.mPhoneInput,.5*i,97*this.dpr+f.y+f.height),T=localStorage.getItem("accountphone");if(T)try{this.mPhoneInput.text=JSON.parse(T).account}catch(e){}this.mPhoneCodeInput=new h.InputField(this.scene,0,0,156*this.dpr,40*this.dpr,{type:"tel",maxLength:4,placeholder:"验证码",color:"#717171",text:"",fontSize:16*this.dpr+"px"}).setOrigin(0,.5),this.mPhoneCodeInput.on("enter",this.onEnterCodeHandler,this);var x=this.createInput(this.mPhoneCodeInput,.5*i,172*this.dpr+f.y+f.height,256*this.dpr);this.mPhoneCodeInput.x=-x.width/2+8*this.dpr;var S=this.scene.make.text({x:.5*i,text:"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。\n适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",style:{color:"#FFEC48",align:"center",fontSize:11*this.dpr+"px",fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(.5);S.y=n-50*this.dpr-.5*S.height;var j=this.scene.make.text({x:.5*i,text:"本网络游戏适合年满16周岁以上的用户，请您确认已如实进行\n实名注册，为了您的健康，请合理控制游戏时间。",style:{color:"#FFFFFF",align:"center",fontSize:9.33*this.dpr,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(.5);j.y=n-16*this.dpr-.5*j.height;var q=this.scene.make.image({x:12*this.dpr,key:this.key,frame:"line"},!1);q.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.fetchCode=this.scene.make.text({text:"获取验证码",style:{fontSize:14*this.dpr+"px",fontFamily:c.Font.DEFULT_FONT,color:"#2B5AF3"}},!1).setOrigin(.5).setInteractive(),this.fetchCode.x=.5*(x.width-this.fetchCode.width)-22*this.dpr,this.fetchCode.on("pointerup",this.onFetchCodeHandler,this),this.fetchCode.on("pointerdown",this.onFetchCodeDownHandler,this),x.add([q,this.fetchCode]),this.loginBtn=new s.NineSliceButton(this.scene,.5*i,x.y+x.height+33*this.dpr,191*this.dpr,50*this.dpr,o.c.commonKey,"yellow_btn","登 录",this.dpr,1,{left:12*this.dpr,top:12*this.dpr,right:14*this.dpr,bottom:12*this.dpr}),this.loginBtn.setTextStyle({color:"#995E00",fontSize:22*this.dpr,fontFamily:c.Font.DEFULT_FONT}),this.loginBtn.setFontStyle("bold"),this.loginBtn.on(String(s.ClickEvent.Down),this.LoginDownHandler,this),this.loginBtn.on(String(s.ClickEvent.Tap),this.tryLogin,this);var Y=new s.BBCodeText(this.scene,0,0,"我已阅读并同意皮卡堂的[area=userService][color=#FFEC48]《用户服务协议》[/color][/area]和[area=privacy][color=#FFEC48]《隐私与保护政策》[/color][/area]",{color:"#ffffff",fontSize:11*this.dpr,fontFamily:c.Font.DEFULT_FONT}).setOrigin(.5,.5).setInteractive().on("areadown",(function(e){c.Helpers.openUrl("https://picatown.com/con_news/news.php?nid=1201")}));this.acceptBtn=new s.CheckBox(this.scene,this.key,"accept_unchecked","accept_checked").on(String(s.ClickEvent.Tap),this.onCheckboxHandler,this),Y.x=this.loginBtn.x+8*this.dpr,Y.y=this.loginBtn.y+.5*this.loginBtn.height+24*this.dpr,this.acceptBtn.x=Y.x-.5*Y.width-8*this.dpr,this.acceptBtn.y=Y.y,this.acceptBtn.selected=!0,this.add([a,g,l,m,f,_,x,S,j,this.loginBtn,this.acceptBtn,Y]),e.prototype.init.call(this)},LoginPanel.prototype.createInput=function(e,i,n,a){var o=this.scene.make.container({x:i,y:n},!1),h=this.scene.textures.getFrame(this.key,"input_bg"),l=new s.NineSlicePatch(this.scene,e.x-8*this.dpr,e.y,(a||e.width)+14*this.dpr,h.height,this.key,"input_bg",{left:27*this.dpr,top:0*this.dpr,right:28*this.dpr,bottom:0*this.dpr},this.dpr,1);return o.add([e,l]),o.setSize(l.width,l.height),o},LoginPanel.prototype.onFetchCodeDownHandler=function(){this.mPhoneInput&&(this.mPhoneCodeInput.setBlur(),this.mPhoneInput.setBlur())},LoginPanel.prototype.onFetchCodeHandler=function(){var e=this;11===this.mPhoneInput.text.length?this.fetchTime||(this.downcount=60,this.fetchTime=setInterval((function(){--e.downcount<=0&&(clearInterval(e.fetchTime),e.fetchTime=void 0),e.downcount>0?e.fetchCode.setText("获取验证码("+e.downcount+")"):e.fetchCode.setText("获取验证码")}),1e3),this.render.remote[l.MAIN_WORKER].onFetchCodeHandler()):this.render.onLoginErrorHanler("error","手机格式错误")},LoginPanel.prototype.tryLogin=function(){var e=this.mPhoneInput.text,i=this.mPhoneCodeInput.text;11===e.length?i?(this.mMediator||(this.mMediator=this.render.mainPeer[l.ModuleName.LOGIN_NAME]),this.mMediator.login(e,i,this.areaCode)):this.render.onLoginErrorHanler("error","验证码格式错误"):this.render.onLoginErrorHanler("error","手机格式错误")},LoginPanel.prototype.LoginDownHandler=function(){this.mPhoneInput&&(this.mPhoneCodeInput.setBlur(),this.mPhoneInput.setBlur())},LoginPanel.prototype.onCheckboxHandler=function(){this.tryLogin&&(this.loginBtn.enable=this.acceptBtn.selected)},LoginPanel.prototype.onEnterPhoneHandler=function(){this.mPhoneCodeInput.setFocus()},LoginPanel.prototype.onEnterCodeHandler=function(){this.mPhoneCodeInput.setBlur(),this.tryLogin()},LoginPanel}(h.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"VerifiedPanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(2),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function VerifiedPanel(i,n){var a=e.call(this,i,n)||this;return a.isIDCard=/^[1-9]\d{5}(19|20|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,a.key=c.ModuleName.VERIFIED_NAME,a}return m(VerifiedPanel,e),VerifiedPanel.prototype.setVerifiedEnable=function(e){this.mIDCardInput&&(this.mNameInput.visible=e,this.mIDCardInput.visible=e,this.mVerifiedBtn.enable=e)},VerifiedPanel.prototype.preload=function(){this.addAtlas(h.c.commonKey,h.d.commonUrl+".png",h.d.commonUrl+".json"),this.addAtlas(h.c.common2Key,h.d.common2Url+".png",h.d.common2Url+".json"),e.prototype.preload.call(this)},VerifiedPanel.prototype.init=function(){var i=this.scene.cameras.main,n=i.width,a=i.height,o=this.scene.make.graphics(void 0,!1);o.fillStyle(0,.6),o.fillRect(.5*-n,.5*-a,n,a).setInteractive(new Phaser.Geom.Rectangle(.5*-n,.5*-a,n,a),Phaser.Geom.Rectangle.Contains);var c=this.scene.make.container({},!1),m=this.scene.make.image({key:h.c.common2Key,frame:"bg"},!1);c.setSize(m.width,m.height);var f=this.scene.make.image({y:-16.33*this.dpr-.5*c.height,key:h.c.common2Key,frame:"title"},!1).setOrigin(.5,0),g=this.scene.make.text({y:f.y+14.67*this.dpr,text:"实名注册",style:{color:"#905B06",fontSize:16*this.dpr,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(.5,0);this.mNameInput=new s.InputText(this.scene,0,0,160*this.dpr,36*this.dpr,{type:"text",placeholder:"请输入真实姓名",color:"#838383",fontSize:10*this.dpr+"px"}).setOrigin(0,.5),this.mIDCardInput=new s.InputText(this.scene,0,0,160*this.dpr,36*this.dpr,{type:"tel",maxLength:18,placeholder:"请输入有效身份证号",color:"#838383",fontSize:10*this.dpr+"px"}).setOrigin(0,.5);var _=this.createInput(this.mNameInput,"*真实姓名：",0,0);_.x=.5*-_.width,_.y=95*this.dpr+.5*_.height-.5*c.height;var T=this.createInput(this.mIDCardInput,"*身份证号：",0,_.y+_.height+15*this.dpr);T.x=_.x;var x=this.scene.make.text({y:40*this.dpr-.5*c.height,text:"根据国家新闻出版署发布《关于未成年人沉迷网络\n游戏的通知》规定，网络游戏用户需要使用有效期\n身份证进行实名注册才能体验游戏。",style:{align:"center",fontSize:10*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#111111"}},!1).setOrigin(.5,0),S=this.scene.make.text({y:.5*c.height-75*this.dpr,text:"请务必保证您的身份信息确实无误，此信息仅作实名认证，我们将严格\n按照有关法律法规妥善保存、保护，不会用做其他用途。",style:{align:"center",fontSize:8*this.dpr,fontFamily:l.Font.DEFULT_FONT,color:"#FF0000"}},!1).setOrigin(.5,1);this.add([o,c]),this.mVerifiedBtn=new s.NineSliceButton(this.scene,0,.5*c.height-16*this.dpr,110*this.dpr,34*this.dpr,h.c.commonKey,"yellow_btn","提交认证",this.dpr,this.scale,{left:12*this.dpr*this.scale,top:12*this.dpr*this.scale,right:12*this.dpr*this.scale,bottom:12*this.dpr*this.scale}),this.mVerifiedBtn.setTextStyle({color:"#996600",fontSize:14*this.dpr,fontFamily:l.Font.DEFULT_FONT}),this.mVerifiedBtn.on(String(s.ClickEvent.Down),this.onVerifiedDownHandler,this),this.mVerifiedBtn.on(String(s.ClickEvent.Tap),this.onVerifiedHandler,this),this.mVerifiedBtn.y-=this.mVerifiedBtn.height/2,this.mVerifiedBtn.setFontStyle("bold"),c.add([m,f,g,_,T,x,S,this.mVerifiedBtn]),e.prototype.init.call(this),this.x=n*this.originX,this.y=a*this.originY,c.y=.3*-this.y},VerifiedPanel.prototype.onVerifiedHandler=function(){var e=this.mNameInput.text,i=this.mIDCardInput.text;e?i&&18===i.length?this.checkIdCard()?(this.render.onLoginErrorHanler("error","[color=#F9361B]实名认证失败，身份证号码有误\n请如实进行实名认证！[/color]"),this.render.remote[c.MAIN_WORKER].onVerifiedHandler(e,i)):this.render.onLoginErrorHanler("error","[color=#F9361B]实名认证失败，身份证号码有误\n请如实进行实名认证！[/color]"):this.render.onLoginErrorHanler("error","[color=#F9361B]证件格式有误[/color]"):this.render.onLoginErrorHanler("error","[color=#F9361B]名字不能为空[/color]")},VerifiedPanel.prototype.onVerifiedDownHandler=function(){this.mNameInput&&(this.mNameInput.setBlur(),this.mIDCardInput.setBlur())},VerifiedPanel.prototype.createInput=function(e,i,n,a){var s=this.scene.make.container({x:n,y:a},!1),o=this.scene.make.text({text:i,style:{color:"#ff0000",fontSize:10*this.dpr,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(0,.5),h=this.scene.make.graphics(void 0,!1),c=189*this.dpr,m=36.67*this.dpr;return h.fillStyle(14540253),h.lineStyle(2*this.dpr,10592673),h.fillRoundedRect(o.width,.5*-m,c,m,2*this.dpr),e.x=o.width+10*this.dpr,s.add([o,h,e]),s.setSize(c+e.x,m),s},VerifiedPanel.prototype.checkIdCard=function(){var e=this.mIDCardInput.text;if(this.isIDCard.test(e)&&18===e.length){for(var i=e.split(""),n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],a=0,s=0;s<17;s++)a+=i[s]*n[s];return["1","0","X","9","8","7","6","5","4","3","2"][a%11]===i[17].toLocaleUpperCase()}return!1},Object.defineProperty(VerifiedPanel.prototype,"verifiedBtn",{get:function(){return this.mVerifiedBtn},enumerable:!1,configurable:!0}),VerifiedPanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicManorInfoPanel",(function(){return g}));var a,s=n(846),o=n(847),h=n(789),l=n(2),c=n(790),m=n(0),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicManorInfoPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=l.ModuleName.PICAMANORINFO_NAME,n}return f(PicManorInfoPanel,e),PicManorInfoPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.mBackGround.clear(),this.mBackGround.fillStyle(0,.66),this.mBackGround.fillRect(0,0,a,s),this.content.x=.5*a,this.content.y=.5*s},PicManorInfoPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen(),this.mShowData&&this.setManorInfo(this.mShowData)):this.preload())},PicManorInfoPanel.prototype.addListen=function(){this.mInitialized},PicManorInfoPanel.prototype.removeListen=function(){this.mInitialized},PicManorInfoPanel.prototype.preload=function(){this.addAtlas(this.key,"manor/manor.png","manor/manor.json"),this.addAtlas(c.c.commonKey,c.d.commonUrl+".png",c.d.commonUrl+".json"),this.addAtlas(c.c.common2Key,c.d.common2Url+".png",c.d.common2Url+".json"),this.addAtlas(c.c.common3Key,c.d.textureUrl(c.d.common3Url),c.d.jsonUrl(c.d.common3Url)),e.prototype.preload.call(this)},PicManorInfoPanel.prototype.init=function(){var i=this.scale,n=this.scaleWidth,a=this.scaleHeight;this.mBackGround=this.scene.make.graphics(void 0,!1),this.mBackGround.clear(),this.mBackGround.fillStyle(7004927,0),this.mBackGround.fillRect(0,0,n*i,a*i),this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.add(this.mBackGround),this.content=this.scene.make.container(void 0,!1),this.add(this.content),this.resize(n,a),this.openManorChild(),e.prototype.init.call(this)},PicManorInfoPanel.prototype.setManorInfo=function(e){this.manorInfo=e,this.picChildPanel&&this.picChildPanel.setManorInfoData(e)},PicManorInfoPanel.prototype.setShopCategories=function(e){this.picShopPanel&&this.picShopPanel.setShopCategories(e)},PicManorInfoPanel.prototype.setShopDatas=function(e){this.picShopPanel&&this.picShopPanel.setShopDatas(e)},PicManorInfoPanel.prototype.setManorTips=function(){this.picTipsPanel.setManorTipsData(m.i18n.t("manor.successtitle"))},PicManorInfoPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicManorInfoPanel.prototype.openManorChild=function(){this.showChildPanel(),this.picChildPanel.setTitleText(m.i18n.t("manor.landstatus"))},PicManorInfoPanel.prototype.openManorShop=function(){this.showShopPanel(),this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_getCategories",this.manorInfo.manorIndex)},PicManorInfoPanel.prototype.showChildPanel=function(){var e=this;if(!this.picChildPanel){var i=334*this.dpr,n=353*this.dpr;this.picChildPanel=new s.PicaManorChildPanel(this.scene,this.render,0,0,i,n,this.dpr,this.scale,this.key),this.picChildPanel.setHandler(new m.Handler(this,(function(i,n){-1!==i?e.manorInfo&&e.render.mainPeer.getUserData_CurRoomID().then((function(a){e.render.renderEmitter(l.RENDER_PEER+"_"+e.key+"_buyeditor",{roomid:a,index:e.manorInfo.manorIndex,type:i,manorName:n})})):(e.openManorShop(),e.hideChildPanel())}))),this.picChildPanel.setCloseHandler(new m.Handler(this,this.OnCloseHandler))}this.content.add(this.picChildPanel)},PicManorInfoPanel.prototype.hideChildPanel=function(){this.content.remove(this.picChildPanel)},PicManorInfoPanel.prototype.showShopPanel=function(){var e=this;if(!this.picShopPanel){var i=334*this.dpr,n=455*this.dpr;this.picShopPanel=new o.PicaManorShopPanel(this.scene,0,0,i,n,this.key,this.dpr,this.scale),this.picShopPanel.setHandler(new m.Handler(this,(function(i,n){"usetype"===i?e.render.renderEmitter(l.RENDER_PEER+"_"+e.key+"_usingitem",n):"buytype"===i&&e.render.renderEmitter(l.RENDER_PEER+"_"+e.key+"_buyItem",n)})),new m.Handler(this,(function(){e.hideShopPanel(),e.openManorChild()}))),this.picShopPanel.on("queryProp",(function(i,n,a){e.render.renderEmitter(l.RENDER_PEER+"_"+e.key+"_queryProp",{page:i,category:n,subCategory:a})}),this)}this.content.add(this.picShopPanel),this.picShopPanel.refreshMask()},PicManorInfoPanel.prototype.hideShopPanel=function(){this.content.remove(this.picShopPanel)},PicManorInfoPanel.prototype.OnCloseHandler=function(){this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_hide")},PicManorInfoPanel}(h.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaManorTipsPanel",(function(){return m}));var a,s=n(788),o=n(790),h=n(0),l=n(816),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaManorTipsPanel(i,n,a,s,o,h,l,c){return e.call(this,i,n,a,s,o,h,c)||this}return c(PicaManorTipsPanel,e),PicaManorTipsPanel.prototype.setManorTipsData=function(e){this.contentText.text=e;this.nineButton.setFrameNormal("red_btn_normal"),this.nineButton.setText(h.i18n.t("manor.otherbtn")),this.nineButton.setTextColor("#ffffff")},PicaManorTipsPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaManorTipsPanel.prototype.create=function(){e.prototype.create.call(this);this.contentText=this.scene.make.text({x:0,y:-10*this.dpr,text:h.i18n.t(""),style:{fontSize:18*this.dpr,align:"center",fontFamily:h.Font.DEFULT_FONT,color:"#111111"}}).setOrigin(.5),this.contentText.setLineSpacing(20*this.dpr),this.add(this.contentText),this.nineButton=new s.NineSliceButton(this.scene,0,0,110*this.dpr,35*this.dpr,o.c.commonKey,"red_btn_normal",h.i18n.t("business_street.takeall"),this.dpr,this.zoom,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr}),this.add(this.nineButton),this.nineButton.y=.5*this.height-.5*this.nineButton.height-15*this.dpr,this.nineButton.setTextStyle({fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT,color:"#ffffff"}),this.nineButton.setFontStyle("bold"),this.nineButton.on(String(s.ClickEvent.Tap),this.onNineButtonHandler,this)},PicaManorTipsPanel.prototype.createBackground=function(e,i){this.bg=this.scene.make.image({key:o.c.common2Key,frame:"bg_universal_box"}),this.add(this.bg)},PicaManorTipsPanel.prototype.onNineButtonHandler=function(){this.sendHandler&&this.sendHandler.run()},PicaManorTipsPanel}(l.PicaManorBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicRoomUpgradePanel",(function(){return c}));var a,s=n(789),o=n(2),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicRoomUpgradePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.MAX_TIMES=4,n.key=o.ModuleName.PICAROOMUPGRADE_NAME,n}return l(PicRoomUpgradePanel,e),PicRoomUpgradePanel.prototype.resize=function(e,i){var n=this.scaleWidth,a=this.scaleHeight;this.content.x=.5*n,this.content.y=.5*a,this.setSize(n,a)},PicRoomUpgradePanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.addListen(),this.updateData()):this.preload())},PicRoomUpgradePanel.prototype.hide=function(){this.mShow=!1,this.removeListen()},PicRoomUpgradePanel.prototype.updateData=function(){var e=this.mShowData;this.mTitleName.text=e.text[0].text;var i=e.data[0];this.roomIcon.on(Phaser.Animations.Events.SPRITE_ANIMATION_REPEAT,this.animationRepeat,this),this.mPlayedTimes=0,this.roomIcon.play("lv"+i)},PicRoomUpgradePanel.prototype.addListen=function(){this.mInitialized&&(this.setInteractive(new Phaser.Geom.Rectangle(.5*this.width,.5*this.height,this.width,this.height),Phaser.Geom.Rectangle.Contains),this.on("pointerup",this.onClickHandler,this))},PicRoomUpgradePanel.prototype.removeListen=function(){this.mInitialized&&(this.removeInteractive(),this.off("pointerup",this.onClickHandler,this))},PicRoomUpgradePanel.prototype.destroy=function(){this.mPlayedTimes=0,e.prototype.destroy.call(this)},PicRoomUpgradePanel.prototype.preload=function(){this.addAtlas(this.key,"e_roomupgrade/e_roomupgrade.png","e_roomupgrade/e_roomupgrade.json"),e.prototype.preload.call(this)},PicRoomUpgradePanel.prototype.init=function(){if(!this.mInitialized){var i=this.scaleWidth,n=this.scaleHeight;this.mBackground=this.scene.make.graphics(void 0,!1),this.mBackground.clear(),this.mBackground.fillStyle(0,.66),this.mBackground.fillRect(0,0,i,n),this.add(this.mBackground),this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,462*this.dpr);var a=this.scene.make.image({x:0,y:-20*this.dpr,key:this.key,frame:"effect_bg"});this.content.add(a);var s=this.scene.make.image({key:this.key,frame:"tittle_bg"});s.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),s.y=.5*-this.content.height;var o=22*this.dpr+"px "+h.Font.DEFULT_FONT;this.mTitleName=this.scene.make.text({x:0,y:s.y,text:"",style:{font:o,fill:"#FFF36D"}}).setOrigin(.5),this.mTitleName.setStroke("#471C1E",8),this.mTitleName.setShadow(2,2,"#471C1E",2,!0,!0),this.mTitleName.setTint(16773997,16773997,16756224,16756224),this.content.add([s,this.mTitleName]);var l=this.scene.make.text({x:0,y:.5*this.content.height-40*this.dpr,text:h.i18n.t("room_upgrade.clicktocontinue"),style:{fontFamily:h.Font.DEFULT_FONT,fontSize:16*this.dpr,color:"#FFF000"}}).setOrigin(.5);this.roomIcon=this.scene.make.sprite({key:this.key,frame:"lv1"}),this.roomIcon.y=-40*this.dpr,this.content.add([this.roomIcon,l]),this.add(this.content),this.createAnimations(),this.resize(0,0),e.prototype.init.call(this)}},PicRoomUpgradePanel.prototype.onClickHandler=function(){if(!(this.mPlayedTimes<this.MAX_TIMES)){var e=this.mShowData;this.render.renderEmitter(o.ModuleName.PICAROOMUPGRADE_NAME+"_querytargetui",e.id)}},PicRoomUpgradePanel.prototype.createAnimations=function(){for(var e=1;e<=4;e++)this.scene.anims.create({key:"lv"+e,frames:this.scene.anims.generateFrameNames(this.key,{prefix:"lv",frames:[e-1,e]}),duration:500,repeat:-1})},PicRoomUpgradePanel.prototype.animationRepeat=function(){this.mPlayedTimes++,this.mPlayedTimes>=this.MAX_TIMES&&this.roomIcon.off(Phaser.Animations.Events.SPRITE_ANIMATION_REPEAT,this.animationRepeat,this)},PicRoomUpgradePanel}(s.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaAvatarPanel",(function(){return T}));var a,s=n(788),o=n(789),h=n(791),l=n(790),c=n(2),m=n(0),f=n(1),g=n(792),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},T=function(e){function PicaAvatarPanel(i,n){var a=e.call(this,i)||this;return a.mSelectedItemData=[],a.mSelectedItems=[],a.dressAvatarIDS=[],a.dressAvatarDatas=[],a.isInitAvatar=!1,a.avatarDirection=0,a.key=c.ModuleName.PICAAVATAR_NAME,a.mSceneType=n,a.atlasNames=[l.d.uicommon],a.textures=[{atlasName:"avater_bg_adorn",folder:"texture"},{atlasName:"avater_bg_stripe",folder:"texture"}],a}return _(PicaAvatarPanel,e),PicaAvatarPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.mBackground.clear(),this.mBackground.fillStyle(118271),this.mBackground.fillRect(0,0,a,s),this.mShelfContainer.setSize(a,295*this.dpr),this.mShelfContainer.y=s-this.mShelfContainer.height+6*this.dpr,this.mDetailBubble.y=this.mShelfContainer.y-10*this.dpr-this.mDetailBubble.height,this.mCategoryScroll.x=.5*a,this.mCategoryScroll.y=this.mShelfContainer.y+20*this.dpr,this.mBg.x=a/2,this.mBg.y=this.mBg.height/2+10*this.dpr;var o=s-this.mShelfContainer.height-80*this.dpr;this.mDetailDisplay.x=a/2,this.mDetailDisplay.y=.5*o+80*this.dpr,this.mDetailDisplay.setInteractive(new Phaser.Geom.Rectangle(0,0,110*this.dpr,o),Phaser.Geom.Rectangle.Contains),this.rotateAvatarBtn.x=a/2+100*this.dpr,this.rotateAvatarBtn.y=this.mDetailDisplay.y,this.mPropGrid.x=a/2+3*this.dpr,this.mPropGrid.y=this.mShelfContainer.y+.5*this.mPropGrid.height+48*this.dpr,this.mPropGrid.layout(),this.mPropGrid.resetMask(),this.mCategoryScroll.refreshMask(),this.setSize(a,s),this.setInteractive()},PicaAvatarPanel.prototype.setCategories=function(e){this.mPreCategoryBtn=null,this.mSelectedCategeories=null;var i=60*this.dpr,n=41*this.dpr,a=[];this.mCategoryScroll.clearItems();var s={value:"",key:""};s.value=m.i18n.t("common.all"),s.key="alltype",e.unshift(s);for(var h=0;h<e.length;h++){var l=new o.TextButton(this.scene,this.dpr,1,e[h].value,0,0);l.x=h*i,l.y=n-l.text.height-20*this.dpr,l.setData("item",e[h]),l.setSize(i,n),this.mCategoryScroll.addItem(l),l.setChangeColor("#FFD248"),a[h]=l,l.setFontSize(17*this.dpr),l.setFontStyle("bold")}a.length>1&&this.onSelectSubCategoryHandler(a[0]),this.updateCategeoriesLoc(!1)},PicaAvatarPanel.prototype.setProp=function(e,i){void 0===i&&(i=!1),e=e||[],this.mSelectedItems.length=0;var n=e.length;n<24&&(e=e.concat(new Array(24-n)));for(var a=0,s=e;a<s.length;a++){var o=s[a];o&&(-1!==this.dressAvatarIDS.indexOf(o.id)?o.rightSubscript=f.op_pkt_def.PKT_Subscript.PKT_SUBSCRIPT_CHECKMARK:o.rightSubscript=f.op_pkt_def.PKT_Subscript.PKT_SUBSCRIPT_UNSET)}this.mPropGrid.setItems(e)},PicaAvatarPanel.prototype.setDressAvatarIds=function(e){this.dressAvatarIDS.length=0,this.mSelectedItemData.length=0;for(var i=0,n=e;i<n.length;i++){var a=n[i];this.dressAvatarIDS.push(a.id)}this.dressAvatarDatas=e,this.initBaseAvatar()},PicaAvatarPanel.prototype.initBaseAvatar=function(){for(var e=0,i=this.dressAvatarDatas;e<i.length;e++){var n=i[e];this.mSelectedItemData.push(n)}this.displayAvatar(),this.mDetailBubble.visible=!1},PicaAvatarPanel.prototype.displayAvatar=function(e){e||(e={avatar:{}});for(var i=[],n=0,a=this.mSelectedItemData;n<a.length;n++){var s=a[n],o={id:s.id,suit_type:s.suitType,sn:s.sn,slot:s.slot,tag:s.tag,version:s.version};i.push(o),"weapon"===s.suitType&&(e.suits=[o])}var h=c.AvatarSuitType.createHasBaseAvatar(i);for(var l in h)if(h.hasOwnProperty(l)){var f=h[l];f&&(e.avatar[l]=f)}var g=new Phaser.Geom.Point(0,50*this.dpr);this.mDetailDisplay.loadAvatar(e,2*this.dpr,g),m.Logger.getInstance().error("测试调用+++++装扮重置问题",this.mSelectedItemData)},PicaAvatarPanel.prototype.setSelectedResource=function(e){e.display?this.mDetailDisplay.loadDisplay(e):e.avatar&&this.displayAvatar()},PicaAvatarPanel.prototype.resetAvatar=function(e){var i={avatar:null};i.avatar=e.avatar;var n=new Phaser.Geom.Point(0,50*this.dpr);this.mDetailDisplay.loadAvatar(i,2*this.dpr,n),this.mSelectedItemData.length=0},PicaAvatarPanel.prototype.addListen=function(){this.mInitialized&&(this.mCloseBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this),this.saveBtn.on(s.ClickEvent.Tap,this.onSaveBtnHandler,this),this.resetBtn.on(s.ClickEvent.Tap,this.onResetBtnHandler,this),this.rotateAvatarBtn.on(s.ClickEvent.Tap,this.onRotateAvatarHandler,this))},PicaAvatarPanel.prototype.removeListen=function(){this.mInitialized&&(this.mCloseBtn.off(s.ClickEvent.Tap,this.onCloseHandler,this),this.saveBtn.off(s.ClickEvent.Tap,this.onSaveBtnHandler,this),this.resetBtn.off(s.ClickEvent.Tap,this.onResetBtnHandler,this),this.rotateAvatarBtn.off(s.ClickEvent.Tap,this.onRotateAvatarHandler,this))},PicaAvatarPanel.prototype.fetchCategory=function(){this.onSelectedCategory(f.op_pkt_def.PKT_PackageType.AvatarPackage)},PicaAvatarPanel.prototype.destroy=function(){this.mCategoryScroll&&this.mCategoryScroll.destroy(),this.mPropGrid&&this.mPropGrid.destroy(),e.prototype.destroy.call(this)},PicaAvatarPanel.prototype.queryRefreshPackage=function(e){void 0===e&&(e=!1),this.queryPackege(e)},PicaAvatarPanel.prototype.init=function(){var i=this,n=this.scaleWidth,a=this.scaleHeight;this.mBackground=this.scene.make.graphics(void 0,!1);var o=this.scene.make.image({key:l.d.uicommon,frame:"avater_bg"});o.displayWidth=n,o.x=.5*n,this.mBg=this.scene.make.image({key:"avater_bg_stripe"},!1),this.mBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mShelfContainer=this.scene.make.container(void 0,!1),this.mShelfContainer.setSize(n,295*this.dpr),this.mShelfContainer.y=a-this.mShelfContainer.height;var c=this.scene.make.image({key:l.d.uicommon,frame:"avater_nav"});c.displayWidth=n,c.x=.5*n,c.y=.5*c.height,this.mShelfContainer.add(c),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.mCloseBtn=new s.Button(this.scene,l.d.uicommon,"back_arrow","back_arrow"),this.mCloseBtn.setPosition(21*this.dpr,50*this.dpr),this.mCloseBtn.setInteractive(new Phaser.Geom.Rectangle(-28*this.dpr,-20*this.dpr,56*this.dpr,40*this.dpr),Phaser.Geom.Rectangle.Contains);var f=this.scene.make.image({key:l.d.uicommon,frame:"avater_name_bg"});f.x=.5*n,f.y=this.mCloseBtn.y,this.nameText=this.scene.make.text({x:f.x,y:f.y,text:"",style:m.UIHelper.whiteStyle(this.dpr,14)}).setOrigin(.5);var g=this.scene.make.image({key:"avater_bg_adorn"});g.x=.5*g.width,g.y=.5*g.height,g.scaleX=-1;var _=this.scene.make.image({key:"avater_bg_adorn"});_.x=n-.5*g.width,_.y=.5*g.height;var T=90*this.dpr,j=38*this.dpr,q=n-T/2-20*this.dpr,Y=this.mShelfContainer.y-25*this.dpr;this.saveBtn=this.createNineButton(q,Y,T,j,l.d.uicommon,"yellow_btn",m.i18n.t("common.save"),"#996600"),this.resetBtn=new s.Button(this.scene,l.d.uicommon,"avater_repeal"),this.resetBtn.x=n-30*this.dpr,this.resetBtn.y=this.mCloseBtn.y,this.rotateAvatarBtn=new s.Button(this.scene,l.d.uicommon,"avater_turn_back","avater_turn_back"),this.mDetailDisplay=new h.DetailDisplay(this.scene,this.render),this.mDetailDisplay.setComplHandler(new m.Handler(this,(function(){i.mDetailDisplay.visible=!0}))),this.mDetailDisplay.setTexture(l.d.uicommon,"bag_nothing",1),this.mDetailDisplay.setNearest(),this.mDetailDisplay.on("pointerup",this.onAvatarClickHandler,this),this.mDetailDisplay.y=this.mBg.y+this.mBg.height/2,this.mDetailBubble=new x(this.scene,l.d.uicommon,this.dpr),this.mDetailBubble.x=10*this.dpr,this.mCategoryScroll=new s.GameScroller(this.scene,{x:.5*n,y:this.mShelfContainer.y+20*this.dpr,width:n,height:41*this.dpr,zoom:this.scale,orientation:1,dpr:this.dpr,cellupCallBack:function(e){i.onSelectSubCategoryHandler(e)}}),this.add([this.mBackground,o,g,_,this.mBg,this.mCloseBtn,f,this.nameText,this.mDetailDisplay,this.mDetailBubble]),this.add([this.mShelfContainer,this.mCategoryScroll,this.saveBtn,this.resetBtn,this.rotateAvatarBtn]);var X=this.scene.textures.getFrame(l.d.uicommon,"avater_icon_check"),Z=X.width+2*this.dpr,$=X.height+2*this.dpr,tt={x:0,y:0,table:{width:n,height:260*this.dpr,columns:3,cellWidth:Z,cellHeight:$,reuseCellContainer:!0,zoom:this.scale,mask:!1},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;if(null===n&&(n=new S(a,0,0,l.d.uicommon,i.dpr,i.scale)),n.setData({item:s}),n.setProp(s),s&&i.isSelectedItemData(s)){i.mSelectedItemData[i.mSelectedItemData.length-1].indexId===s.indexId&&(n.isSelect=!0),i.mSelectedItems.push(n)}else{var o=i.mSelectedItems.indexOf(n);-1!==o&&i.mSelectedItems.splice(o,1)}return n}};this.mPropGrid=new s.GameGridTable(this.scene,tt),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(e){e&&i.onSelectItemHandler(e)})),this.add(this.mPropGrid),this.resize(0,0),e.prototype.init.call(this)},PicaAvatarPanel.prototype.createNineButton=function(e,i,n,a,o,h,l,c){var f=new s.NineSliceButton(this.scene,e,i,n,a,o,h,l,this.dpr,1,{left:14*this.dpr,top:14*this.dpr,right:15*this.dpr,bottom:14*this.dpr});return l&&(f.setTextStyle({color:c,fontSize:16*this.dpr,fontFamily:m.Font.DEFULT_FONT}),f.setFontStyle("bold")),f},PicaAvatarPanel.prototype.setSelectAvatarSuitItem=function(e,i){var n=e.suitType;if(n){for(var a=0,s=this.mSelectedItems;a<s.length;a++){s[a].isSelect=!1}for(var o=[],h=0,l=this.mSelectedItemData;h<l.length;h++){var f=l[h];c.SuitAlternativeType.checkAlternative(n,f.suitType)&&o.push(f)}for(var g=0,_=o;g<_.length;g++){f=_[g];var T=this.mSelectedItemData.indexOf(f);this.mSelectedItemData.splice(T,1);for(var x=0;x<this.mSelectedItems.length;x++){if(this.mSelectedItems[x].propData===f){this.mSelectedItems.splice(x,1);break}}}this.mSelectedItemData.push(e),this.mSelectedItems.push(i),i.isSelect=!0;var S={};S.avatar=c.AvatarSuitType.createAvatarBySn(e.suitType,e.sn,e.slot,e.tag,e.version),S.animations=e.animations,this.setSelectedResource(S)}else m.Logger.getInstance().error("CountablePackageItem avatar does not exist",e)},PicaAvatarPanel.prototype.isSelectedItemData=function(e){if(this.mSelectedItemData.length>0)for(var i=0,n=this.mSelectedItemData;i<n.length;i++){if(n[i].indexId===e.indexId)return!0}return!1},PicaAvatarPanel.prototype.onSelectSubCategoryHandler=function(e){var i=e.getData("item");if(i){this.mPreCategoryBtn&&this.mPreCategoryBtn instanceof o.TextButton&&this.mPreCategoryBtn.changeNormal(),e instanceof o.TextButton&&e.changeDown(),this.mSelectedCategeories=i,this.mPropGrid.setT(0);var n=0!==this.mSelectedItemData.length;this.queryPackege(n),this.mPreCategoryBtn=e}this.mPropGrid.setT(0)},PicaAvatarPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaAvatarPanel.prototype.queryPackege=function(e){void 0===e&&(e=!1),this.mSelectedCategeories&&this.render.renderEmitter(this.key+"_queryPackage",{packType:this.categoryType,key:this.mSelectedCategeories.key,isupdate:e})},PicaAvatarPanel.prototype.onSelectItemHandler=function(e){var i=this,n=e.getData("item");if(n){for(var a=0,s=this.mSelectedItems;a<s.length;a++){s[a].isSelect=!1}if(this.isSelectedItemData(n))e.isSelect=!0;else{this.mDetailBubble.visible=!0;var o=null;this.render.mainPeer.getUserData_PlayerProperty().then((function(e){return o=e,i.serviceTimestamp})).then((function(e){i.mDetailBubble.setProp(n,Math.floor(e/1e3),o),i.mDetailBubble.y=i.mShelfContainer.y-10*i.dpr-i.mDetailBubble.height})),n&&(this.avatarDirection=0,this.setSelectAvatarSuitItem(n,e),this.nameText.text=n.name)}}},PicaAvatarPanel.prototype.onSelectedCategory=function(e){this.categoryType=e,this.render.renderEmitter(this.key+"_queryDressAvatarIDS"),this.render.renderEmitter(this.key+"_getCategories",e)},PicaAvatarPanel.prototype.onSaveBtnHandler=function(){return __awaiter(this,void 0,void 0,(function(){var e,i,n,a,s,o,h=this;return __generator(this,(function(l){for(e=[],i=[],n=c.AvatarSuitType.suitPart,a=0,s=this.mSelectedItemData;a<s.length;a++)o=s[a],e.push(o.id),i.push({parts:n[o.suitType],id:o.sn});return this.render.renderEmitter(this.key+"_querySaveAvatar",e),this.uiManager.showPanel(c.ModuleName.MASK_LOADING_NAME),this.mDetailDisplay.saveAvatar().then((function(e){return h.render.mainPeer.uploadDBTexture(e.key,e.url,e.json),h.render.editorCanvasManager.createHeadIcon(i)})).then((function(e){h.render.mainPeer.uploadHeadImage(e),h.uiManager.hidePanel(c.ModuleName.MASK_LOADING_NAME)})).catch((function(e){m.Logger.getInstance().error("save avatar error: "+e)})),[2]}))}))},PicaAvatarPanel.prototype.onResetBtnHandler=function(){this.mSelectedItemData.length=0;for(var e=0,i=this.dressAvatarDatas;e<i.length;e++){var n=i[e];this.mSelectedItemData.push(n)}this.displayAvatar(),this.mPropGrid.refresh()},PicaAvatarPanel.prototype.onRotateAvatarHandler=function(){this.avatarDirection++,this.avatarDirection>=2&&(this.avatarDirection=0);var e=this.getAvatarAni(),i={name:"idle",flip:e.flip},n=e.back;this.mDetailDisplay.setPlayAnimation(i,n)},PicaAvatarPanel.prototype.onAvatarClickHandler=function(){var e=["idle","run","mining","crafting"],i=e[Math.floor(Math.random()*e.length)],n=this.getAvatarAni(),a={name:i,flip:n.flip,times:1,playingQueue:{name:"idle",playTimes:-1}},s=n.back;this.mDetailDisplay.setPlayAnimation(a,s)},PicaAvatarPanel.prototype.getAvatarAni=function(){var e=!1,i=!1;switch(this.avatarDirection){case 0:e=!1,i=!1;break;case 1:case 2:e=!0,i=!0;break;case 3:e=!1,i=!0}return{back:e,flip:i}},PicaAvatarPanel.prototype.updateCategeoriesLoc=function(e){for(var i=this.mCategoryScroll.getItemList(),n=(this.dpr,null),a=30*this.dpr,s=(this.mScene.cameras.main.width,a),o=0;o<i.length;o++){var h=i[o];o>0?(n=i[o-1],h.x=n.x+n.width):h.x=s,s+=h.width}this.mCategoryScroll.setAlign()},Object.defineProperty(PicaAvatarPanel.prototype,"serviceTimestamp",{get:function(){var e=this;return new Promise((function(i,n){e.render.mainPeer.requestCurTime().then((function(e){i(e)}))}))},enumerable:!1,configurable:!0}),PicaAvatarPanel}(g.PicaBasePanel),x=function(e){function DetailBubble(i,n,a,o){void 0===o&&(o=1);var h=e.call(this,i)||this;h.dpr=a;var c=100*a,f=96*a;return h.setSize(c,f),h.tipsbg=new s.NineSlicePatch(h.scene,0,0,c,f,l.d.uicommon,"tips_bg",{left:10*h.dpr,top:10*h.dpr,right:10*h.dpr,bottom:10*h.dpr},void 0,void 0,0),h.tipsbg.setPosition(.5*c,.5*f),h.tipsbg.alpha=.6,h.tipsText=new s.BBCodeText(h.scene,7*a,-f+60*h.dpr,"",{color:"#333333",fontSize:12*h.dpr,fontFamily:m.Font.DEFULT_FONT,lineSpacing:6*a,padding:{top:2*a}}).setOrigin(0),h.tipsText.setWrapMode("char"),h.tipsText.setWrapWidth(200*a),h.mExpires=new s.BBCodeText(i,7*a,85*a,"",{fontSize:12*h.dpr,fontFamily:m.Font.DEFULT_FONT}).setOrigin(0),h.add([h.tipsbg,h.tipsText,h.mExpires]),h.tipsText.addImage("iv_coin",{key:l.d.uicommon,frame:"home_silver",y:-3*h.dpr}),h.tipsText.addImage("iv_diamond",{key:l.d.uicommon,frame:"home_diamond",y:-3*h.dpr}),h}return _(DetailBubble,e),DetailBubble.prototype.setProp=function(e,i,n){var a=this;if(e){this.tipsText.setWrapWidth(void 0);var s="",o="",h="",l="",c="[color=#32347b][b][size="+14*this.dpr+"]"+(e.shortName||e.name)+"[/size][/b][/color]",f=100*this.dpr;this.tipsText.text=c,f=f<this.tipsText.width?this.tipsText.width:f,e.source&&(s=""+e.source,c+="\n[color=#ffffff][size="+12*this.dpr+"]"+s+"[/size][/color]",this.tipsText.text=s,f=f<this.tipsText.width?this.tipsText.width:f),e.des&&""!==e.des&&(c+="\n"+(o=e.des),this.tipsText.text=o,f=f<this.tipsText.width?this.tipsText.width:f);var g=!1;if(e.affectValues){for(var _=e.affectValues.length,T=0;T<_;T++){var x=e.affectValues[T];if(n.hasProperty(x.key)){var S=n.getProperty(x.key),j=x.value>0?"[color=#ffff00]+"+x.value+"[/color]":"[color=#ff0000]"+x.value+"[/color]";h+="\n"+S.name+": "+j}}h.length>0&&(g||(g=!0,c+="\n-- -- -- -- -- -- -- --"),c+="\n[color=#ffffff]"+m.i18n.t("furni_bag.properties")+"[/color]"+h)}if(e.requireValues){for(_=e.requireValues.length,T=0;T<_;T++){var q=e.requireValues[T];if(n.hasProperty(q.key)){j=(S=n.propertiesMap.get(q.key)).value>=q.value?"[color=#00ff00]("+q.value+")[/color]":"[color=#ff0000]("+q.value+")[/color]";l+="\n"+S.name+": "+j}}l.length>0&&(g||(g=!0,c+="\n-- -- -- -- -- -- -- --"),c+="\n"+m.i18n.t("furni_bag.needproper")+":"+l)}if(this.tipsText.text=c,this.width=this.tipsText.width+14*this.dpr,e.expiredTime>0){g||(g=!0,c+="\n-- -- -- -- -- -- -- --");var Y=e.expiredTime-i,timeout_1=function(){a.mExpires.visible=!0,a.mExpires.text=a.getDataFormat(1e3*Y),a.timeID=Y>0?setTimeout((function(){Y-=1,timeout_1()}),1e3):void 0};timeout_1()}else this.mExpires.visible=!1,this.timeID&&clearTimeout(this.timeID);this.resize()}else this.tipsText.setText(m.i18n.t("furni_bag.empty_backpack")),this.mExpires.text="",this.resize();return this},DetailBubble.prototype.resize=function(e,i){var n=96*this.dpr,a=this.tipsText.height;this.mExpires.visible&&(a+=this.mExpires.height+3*this.dpr),a=(a+=14*this.dpr)<n?n:a,this.setSize(this.width,a),this.tipsbg.resize(this.width,this.height),this.tipsbg.x=.5*this.width,this.tipsbg.y=.5*this.height,this.tipsText.y=7*this.dpr,this.mExpires.y=this.tipsText.y+this.tipsText.height+3*this.dpr},DetailBubble.prototype.getDataFormat=function(e){var i=Math.floor(e/864e5),n=Math.floor(e/36e5)%24,a=Math.floor(e/6e4)%60,s=Math.floor(e/1e3)%60,o=m.i18n.t("furni_bag.timelimit")+":  ";if(i>0)o+="[color=#FF0000]"+(i+"-"+this.stringFormat(n)+":"+this.stringFormat(a)+":"+this.stringFormat(s))+"[/color]";else if(n>0||a>0||s>0){o+="[color=#FF0000]"+(this.stringFormat(n)+":"+this.stringFormat(a)+":"+this.stringFormat(s))+"[/color]"}else{o+="[color=#FF0000]"+(""+m.i18n.t("furni_bag.expires"))+"[/color]"}return o},DetailBubble.prototype.stringFormat=function(e){var i=e+"";return i.length<=1&&(i="0"+i),i},DetailBubble}(Phaser.GameObjects.Container),S=function(e){function Item(i,n,a,s,h,l){var c=e.call(this,i,n,a)||this;c.zoom=1,c.dpr=h,c.zoom=l,c.key=s;var f=i.make.image({key:s,frame:"avater_icon_uncheck"},!1);return f.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.selectbg=i.make.image({key:s,frame:"avater_icon_check"},!1),c.selectbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.setSize(f.displayWidth,f.displayHeight),c.selectIcon=i.make.image({key:s,frame:"selected"},!1).setOrigin(1).setPosition(.5*c.width,.5*c.height),c.selectIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.mPropImage=new o.DynamicImage(c.scene,0,0),c.mPropImage.scale=h/c.zoom,c.mCounter=i.make.text({x:.5*c.width-2*h,y:.5*c.height,style:{fontSize:12*h,fontFamily:m.Font.DEFULT_FONT}},!1).setOrigin(1),c.add([f,c.selectbg,c.selectIcon,c.mPropImage,c.mCounter]),c.isSelect=!1,c.isEquip=!1,c}return _(Item,e),Item.prototype.setProp=function(e){this.propData=e,this.isSelect=!1,this.isEquip=!1,this.mPropImage.visible=!1,e?(e.tag&&"remove"===JSON.parse(e.tag).type?(this.mPropImage.setTexture(l.d.uicommon,"backpack_close"),this.mPropImage.scale=1,this.mPropImage.visible=!0):(this.mPropImage.scale=this.dpr/this.zoom,this.mPropImage.load(m.Url.getOsdRes(e.texturePath),this,this.onPropLoadCompleteHandler)),e.count>1?(this.mCounter.visible=!0,this.mCounter.setText(e.count.toString())):this.mCounter.visible=!1,1===e.rightSubscript?this.isEquip=!0:this.isEquip=!1):this.mCounter.visible=!1},Item.prototype.onPropLoadCompleteHandler=function(){if(this.mPropImage&&this.mPropImage.texture){var e=this.mPropImage.texture;this.mPropImage.visible=!0,e&&e.setFilter(Phaser.Textures.FilterMode.NEAREST)}},Object.defineProperty(Item.prototype,"isSelect",{set:function(e){this.selectbg.visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(Item.prototype,"isEquip",{set:function(e){this.selectIcon.visible=e},enumerable:!1,configurable:!0}),Item}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessMarketingPlanPanel",(function(){return _}));var a,s=n(849),o=n(848),h=n(789),l=n(817),c=n(2),m=n(790),f=n(0),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaBusinessMarketingPlanPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key2="c_street_2",n.key=c.ModuleName.PICABUSINESSMARKETINGPLAN_NAME,n}return g(PicaBusinessMarketingPlanPanel,e),PicaBusinessMarketingPlanPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.mBackGround.clear(),this.mBackGround.fillStyle(0,.66),this.mBackGround.fillRect(0,0,a,s)},PicaBusinessMarketingPlanPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen()):this.preload())},PicaBusinessMarketingPlanPanel.prototype.addListen=function(){this.mInitialized},PicaBusinessMarketingPlanPanel.prototype.removeListen=function(){this.mInitialized},PicaBusinessMarketingPlanPanel.prototype.preload=function(){this.addAtlas(this.key,"c_street_1/c_street_1.png","c_street_1/c_street_1.json"),this.addAtlas(this.key2,"c_street_2/c_street_2.png","c_street_2/c_street_2.json"),this.addAtlas(m.c.commonKey,m.d.commonUrl+".png",m.d.commonUrl+".json"),this.addAtlas(m.c.common2Key,m.d.common2Url+".png",m.d.common2Url+".json"),e.prototype.preload.call(this)},PicaBusinessMarketingPlanPanel.prototype.init=function(){var i=this.scale,n=this.scaleWidth,a=this.scaleHeight;this.mBackGround=this.scene.make.graphics(void 0,!1),this.mBackGround.clear(),this.mBackGround.fillStyle(7004927,0),this.mBackGround.fillRect(0,0,n*i,a*i),this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.add(this.mBackGround);var s=90*this.dpr,o=74*this.dpr,h=295*this.dpr,c=a-s-o,m=s+.5*c,g=.5*n;this.content=new l.PicaBusinessContentPanel(this.scene,g,m,h,c,this.dpr,this.key,this.key2),this.content.setCloseHandler(new f.Handler(this,this.OnCloseHandler)),this.add(this.content),this.resize(n,a),e.prototype.init.call(this),this.setLinear(this.key2),this.openPlanPanel()},PicaBusinessMarketingPlanPanel.prototype.setPlanModels=function(e){this.picChoosePlanPanel.setPlanData(e.marketPlan)},PicaBusinessMarketingPlanPanel.prototype.setEquipedPlan=function(e){this.picBusinessPlanPanel.setPlanData(e)},PicaBusinessMarketingPlanPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaBusinessMarketingPlanPanel.prototype.openPlanPanel=function(){this.showMarketingPlanPanel(),this.picBusinessPlanPanel.setRender(this.render),this.render.renderEmitter(c.RENDER_PEER+"_"+this.key+"_querymarketplan")},PicaBusinessMarketingPlanPanel.prototype.openChoosePlanPanel=function(){this.showChoosePlanPanel(),this.picChoosePlanPanel.resetMask()},PicaBusinessMarketingPlanPanel.prototype.showMarketingPlanPanel=function(){var e=this,i=90*this.dpr,n=74*this.dpr;if(this.setContentSize(i,n),!this.picBusinessPlanPanel){var a=this.content.width,o=this.content.height-50*this.dpr;this.picBusinessPlanPanel=new s.PicaBusinessPlanPanel(this.scene,0,0,a,o,this.dpr,this.scale,this.key),this.picBusinessPlanPanel.setHandler(new f.Handler(this,(function(){e.hideMarketingPlanPanel(),e.OnCloseHandler()})),new f.Handler(this,(function(i){e.hideMarketingPlanPanel(),e.openChoosePlanPanel(),e.render.renderEmitter(c.RENDER_PEER+"_"+e.key+"_queryplanmodels",i)})))}this.content.add(this.picBusinessPlanPanel),this.picBusinessPlanPanel.resetMask()},PicaBusinessMarketingPlanPanel.prototype.hideMarketingPlanPanel=function(){this.content.remove(this.picBusinessPlanPanel)},PicaBusinessMarketingPlanPanel.prototype.showChoosePlanPanel=function(){var e=this,i=this.scaleWidth,n=this.scaleHeight,a=295*this.dpr,s=320*this.dpr,h=.5*n,l=.5*i;if(this.content.setPosition(l,h),this.content.setContentSize(a,s),!this.picChoosePlanPanel){var m=this.content.width,g=this.content.height-50*this.dpr;this.picChoosePlanPanel=new o.PicaBusinessChoosePlanPanel(this.scene,0,0,m,g,this.dpr,this.scale,this.key),this.picChoosePlanPanel.setHandler(new f.Handler(this,(function(){e.hideChoosePlanPanel(),e.openPlanPanel()})),new f.Handler(this,(function(i){e.render.renderEmitter(c.RENDER_PEER+"_"+e.key+"_queryselectplan",i)})))}this.content.add(this.picChoosePlanPanel),this.picBusinessPlanPanel.resetMask()},PicaBusinessMarketingPlanPanel.prototype.hideChoosePlanPanel=function(){this.content.remove(this.picChoosePlanPanel)},PicaBusinessMarketingPlanPanel.prototype.setContentSize=function(e,i){var n=this.scaleWidth,a=this.scaleHeight,s=295*this.dpr,o=a-e-i,h=e+.5*o,l=.5*n;this.content.setPosition(l,h),this.content.setContentSize(s,o)},PicaBusinessMarketingPlanPanel.prototype.OnCloseHandler=function(){this.render.renderEmitter(c.RENDER_PEER+"_"+this.key+"_hide")},PicaBusinessMarketingPlanPanel}(h.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBusinessStreetPanel",(function(){return q}));var a,s=n(817),o=n(851),h=n(855),l=n(856),c=n(850),m=n(854),f=n(853),g=n(852),_=n(789),T=n(2),x=n(790),S=n(0),j=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),q=function(e){function PicaBusinessStreetPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key2="c_street_2",n.key=T.ModuleName.PICABUSINESSSTREET_NAME,n}return j(PicaBusinessStreetPanel,e),PicaBusinessStreetPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.mBackGround.clear(),this.mBackGround.fillStyle(0,.66),this.mBackGround.fillRect(0,0,a,s)},PicaBusinessStreetPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen()):this.preload())},PicaBusinessStreetPanel.prototype.addListen=function(){this.mInitialized},PicaBusinessStreetPanel.prototype.removeListen=function(){this.mInitialized},PicaBusinessStreetPanel.prototype.preload=function(){this.addAtlas(this.key,"c_street_1/c_street_1.png","c_street_1/c_street_1.json"),this.addAtlas(this.key2,"c_street_2/c_street_2.png","c_street_2/c_street_2.json"),this.addAtlas(x.c.commonKey,x.d.commonUrl+".png",x.d.commonUrl+".json"),this.addAtlas(x.c.common2Key,x.d.common2Url+".png",x.d.common2Url+".json"),e.prototype.preload.call(this)},PicaBusinessStreetPanel.prototype.init=function(){var i=this.scale,n=this.scaleWidth,a=this.scaleHeight;this.mBackGround=this.scene.make.graphics(void 0,!1),this.mBackGround.clear(),this.mBackGround.fillStyle(7004927,0),this.mBackGround.fillRect(0,0,n*i,a*i),this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.add(this.mBackGround);var o=90*this.dpr,h=74*this.dpr,l=295*this.dpr,c=a-o-h,m=o+.5*c,f=.5*n;this.content=new s.PicaBusinessContentPanel(this.scene,f,m,l,c,this.dpr,this.key,this.key2),this.content.setCloseHandler(new S.Handler(this,this.OnCloseHandler)),this.add(this.content),this.resize(n,a),e.prototype.init.call(this),this.setLinear(this.key2),this.openMyStreet()},PicaBusinessStreetPanel.prototype.setMyStore=function(e){this.picMyStreetPanel.setMyStoreData(e)},PicaBusinessStreetPanel.prototype.setCommercialStreet=function(e){this.picStreetListPanel&&this.picStreetListPanel.setStreetListData(e.commercialStreet)},PicaBusinessStreetPanel.prototype.setIndustryModels=function(e){this.industryModels=e,this.picStoreCreatePanel&&this.picStoreCreatePanel.parentContainer&&this.picStoreCreatePanel.setTypeData(e.industry),this.picStreetListPanel&&this.picStreetListPanel.parentContainer&&this.picStreetListPanel.setIndustryModels(this.industryModels)},PicaBusinessStreetPanel.prototype.setStoreRankingList=function(e){this.picStreetRankingPanel.setRankingData(e.rankChampions)},PicaBusinessStreetPanel.prototype.setStoreRankingDetial=function(e){this.picRankingDetailPanel.setRankingDetailData(e)},PicaBusinessStreetPanel.prototype.setStoreRankingReward=function(e){this.picRankRewardPanel.setRankRewardData(e.rewardStage)},PicaBusinessStreetPanel.prototype.setEnterHistory=function(e){this.picStreetHistoryPanel.setHistoryeData(e.history)},PicaBusinessStreetPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaBusinessStreetPanel.prototype.setSecondStore=function(e){this.picSecondStorePanel.setTypeData(e)},PicaBusinessStreetPanel.prototype.openMyStreet=function(){this.render.renderEmitter(T.RENDER_PEER+"_"+this.key+"_querymystore"),this.showMyStreetPanel(),this.content.setTitleText(S.i18n.t("business_street.commercial_street"))},PicaBusinessStreetPanel.prototype.openStoreCreatePanel=function(){this.render.renderEmitter(T.RENDER_PEER+"_"+this.key+"_querymodels"),this.showStoreCreatePanel(),this.content.setTitleText(S.i18n.t("business_street.newstore"))},PicaBusinessStreetPanel.prototype.openSecondStorePanel=function(){this.showSecondStorePanel(),this.content.setTitleText(S.i18n.t("business_street.newstore"))},PicaBusinessStreetPanel.prototype.openStoreStreetPanel=function(){this.showStreetListPanel(),this.industryModels?this.picStreetListPanel.setIndustryModels(this.industryModels):this.render.renderEmitter(T.RENDER_PEER+"_"+this.key+"_querymodels"),this.content.setTitleText(S.i18n.t("business_street.commercial_street"))},PicaBusinessStreetPanel.prototype.openStreetHistoryPanel=function(){this.showStreetHistoryPanel(),this.content.setTitleText(S.i18n.t("business_street.history"))},PicaBusinessStreetPanel.prototype.openStreetRankingPanel=function(){this.showStreetRankingPanel(),this.content.setTitleText(S.i18n.t("business_street.ranking"))},PicaBusinessStreetPanel.prototype.openRankingDetailPanel=function(){this.showRankingDetailPanel(),this.content.setTitleText(S.i18n.t("business_street.ranking"))},PicaBusinessStreetPanel.prototype.openRankRewardPanel=function(){this.showRankRewardPanel(),this.content.setTitleText(S.i18n.t("business_street.rankreward"))},PicaBusinessStreetPanel.prototype.showMyStreetPanel=function(){var e=this,i=90*this.dpr,n=74*this.dpr;if(this.setContentSize(i,n),!this.picMyStreetPanel){var a=this.content.width,s=this.content.height-50*this.dpr;this.picMyStreetPanel=new o.PicaBusinessMyStreetPanel(this.scene,0,0,a,s,this.dpr,this.scale,this.key),this.picMyStreetPanel.setHandler(new S.Handler(this,(function(){e.render.renderEmitter(T.RENDER_PEER+"_"+e.key+"_queryallsaves")})),new S.Handler(this,(function(){e.openStoreStreetPanel(),e.hideMyStreetPanel()})),new S.Handler(this,(function(){e.hideMyStreetPanel(),e.openStoreCreatePanel()})),new S.Handler(this,(function(i,n){e.render.renderEmitter(T.RENDER_PEER+"_"+e.key+"_queryenterroom",{roomid:i,password:n})}))),this.content.add(this.picMyStreetPanel)}this.picMyStreetPanel.visible=!0,this.picMyStreetPanel.resetMask()},PicaBusinessStreetPanel.prototype.hideMyStreetPanel=function(){this.picMyStreetPanel.visible=!1},PicaBusinessStreetPanel.prototype.showStoreCreatePanel=function(){var e=this,i=this.scaleWidth,n=this.scaleHeight,a=295*this.dpr,s=320*this.dpr,o=.5*n,l=.5*i;if(this.content.setPosition(l,o),this.content.setContentSize(a,s),!this.picStoreCreatePanel){var c=this.content.width,m=this.content.height-50*this.dpr;this.picStoreCreatePanel=new h.PicaBusinessStoreCreatePanel(this.scene,0,0,c,m,this.dpr,this.scale,this.key),this.picStoreCreatePanel.setHandler(new S.Handler(this,(function(){e.openMyStreet(),e.hideStoreCreatePanel()})),new S.Handler(this,(function(i){e.openSecondStorePanel(),e.hideStoreCreatePanel(),e.setSecondStore(i)}))),this.content.add(this.picStoreCreatePanel)}this.picStoreCreatePanel.visible=!0,this.picStoreCreatePanel.resetMask()},PicaBusinessStreetPanel.prototype.hideStoreCreatePanel=function(){this.picStoreCreatePanel.visible=!1},PicaBusinessStreetPanel.prototype.showSecondStorePanel=function(){var e=this,i=this.scaleWidth,n=this.scaleHeight,a=295*this.dpr,s=320*this.dpr,o=.5*n,l=.5*i;if(this.content.setPosition(l,o),this.content.setContentSize(a,s),!this.picSecondStorePanel){var c=this.content.width,m=this.content.height-50*this.dpr;this.picSecondStorePanel=new h.PicaBusinessStoreCreatePanel(this.scene,0,0,c,m,this.dpr,this.scale,this.key,!1),this.picSecondStorePanel.setHandler(new S.Handler(this,(function(){e.openStoreCreatePanel(),e.hideSecondStorePanel()})),new S.Handler(this,(function(i){e.render.renderEmitter(T.RENDER_PEER+"_"+e.key+"_querycreatestore",i.modelId)}))),this.content.add(this.picSecondStorePanel)}this.picSecondStorePanel.visible=!0,this.picSecondStorePanel.resetMask()},PicaBusinessStreetPanel.prototype.hideSecondStorePanel=function(){this.picSecondStorePanel.visible=!1},PicaBusinessStreetPanel.prototype.showStreetListPanel=function(){var e=this,i=90*this.dpr,n=74*this.dpr;if(this.setContentSize(i,n),!this.picStreetListPanel){var a=this.content.width,s=this.content.height-50*this.dpr;this.picStreetListPanel=new l.PicaBusinessStreetListPanel(this.scene,this.render,0,0,a,s,this.dpr,this.scale,this.key,this.key2),this.picStreetListPanel.setHandler(new S.Handler(this,(function(){e.openStreetHistoryPanel(),e.hideStreetListPanel(),e.render.renderEmitter(T.RENDER_PEER+"_"+e.key+"_queryenterhistory")})),new S.Handler(this,(function(){e.openStreetRankingPanel(),e.hideStreetListPanel(),e.render.renderEmitter(T.RENDER_PEER+"_"+e.key+"_queryranklist")})),new S.Handler(this,(function(){e.hideStreetListPanel(),e.openMyStreet()})),new S.Handler(this,(function(i,n){e.render.renderEmitter(T.RENDER_PEER+"_"+e.key+"_querystreet",{storeby:i,storetype:n})})),new S.Handler(this,(function(i,n){e.render.renderEmitter(T.RENDER_PEER+"_"+e.key+"_queryenterroom",{roomid:i,password:n})}))),this.content.add(this.picStreetListPanel)}this.picStreetListPanel.visible=!0,this.picStreetListPanel.resetMask()},PicaBusinessStreetPanel.prototype.hideStreetListPanel=function(){this.picStreetListPanel.visible=!1},PicaBusinessStreetPanel.prototype.showStreetHistoryPanel=function(){var e=this,i=90*this.dpr,n=74*this.dpr;if(this.setContentSize(i,n),!this.picStreetHistoryPanel){var a=this.content.width,s=this.content.height-50*this.dpr;this.picStreetHistoryPanel=new c.PicaBusinessHistoryPanel(this.scene,0,0,a,s,this.dpr,this.scale,this.key,this.key2),this.picStreetHistoryPanel.setHandler(new S.Handler(this,(function(){e.hideStreetHistoryPanel(),e.openStoreStreetPanel()}))),this.content.add(this.picStreetHistoryPanel)}this.picStreetHistoryPanel.visible=!0,this.picStreetHistoryPanel.resetMask()},PicaBusinessStreetPanel.prototype.hideStreetHistoryPanel=function(){this.picStreetHistoryPanel.visible=!1},PicaBusinessStreetPanel.prototype.showStreetRankingPanel=function(){var e=this,i=110*this.dpr,n=94*this.dpr;if(this.setContentSize(i,n),!this.picStreetRankingPanel){var a=this.content.width,s=this.content.height-50*this.dpr;this.picStreetRankingPanel=new m.PicaBusinessRankingPanel(this.scene,0,0,a,s,this.dpr,this.scale,this.key,this.key2),this.picStreetRankingPanel.setHandler(new S.Handler(this,(function(){e.hideStreetRankingPanel(),e.openStoreStreetPanel()})),new S.Handler(this,(function(i,n){e.openRankingDetailPanel(),e.hideStreetRankingPanel(),e.render.renderEmitter(T.RENDER_PEER+"_"+e.key+"_queryrankdetail",{key:i,type:n})}))),this.content.add(this.picStreetRankingPanel)}this.picStreetRankingPanel.show(),this.picStreetRankingPanel.resetMask()},PicaBusinessStreetPanel.prototype.hideStreetRankingPanel=function(){this.picStreetRankingPanel.hide()},PicaBusinessStreetPanel.prototype.showRankingDetailPanel=function(){var e=this,i=90*this.dpr,n=74*this.dpr;if(this.setContentSize(i,n),!this.picRankingDetailPanel){var a=this.content.width,s=this.content.height-50*this.dpr;this.picRankingDetailPanel=new f.PicaBusinessRankingDetailPanel(this.scene,0,0,a,s,this.dpr,this.scale,this.key,this.key2),this.picRankingDetailPanel.setHandler(new S.Handler(this,(function(){e.hideRankingDetailPanel(),e.openStreetRankingPanel()})),new S.Handler(this,(function(i,n){e.hideRankingDetailPanel(),e.openRankRewardPanel(),e.render.renderEmitter(T.RENDER_PEER+"_"+e.key+"_queryrankreward",{key:i,type:n})}))),this.content.add(this.picRankingDetailPanel)}this.picRankingDetailPanel.visible=!0,this.picRankingDetailPanel.resetMask()},PicaBusinessStreetPanel.prototype.hideRankingDetailPanel=function(){this.picRankingDetailPanel.visible=!1},PicaBusinessStreetPanel.prototype.showRankRewardPanel=function(){var e=this,i=90*this.dpr,n=74*this.dpr;if(this.setContentSize(i,n),!this.picRankRewardPanel){var a=this.content.width,s=this.content.height-50*this.dpr;this.picRankRewardPanel=new g.PicaBusinessRankRewardPanel(this.scene,0,0,a,s,this.dpr,this.scale,this.key,this.key2),this.picRankRewardPanel.setHandler(new S.Handler(this,(function(){e.hideRankRewardPanel(),e.openRankingDetailPanel()}))),this.content.add(this.picRankRewardPanel)}this.picRankRewardPanel.visible=!0,this.picRankRewardPanel.resetMask()},PicaBusinessStreetPanel.prototype.hideRankRewardPanel=function(){this.picRankRewardPanel.visible=!1},PicaBusinessStreetPanel.prototype.setContentSize=function(e,i){var n=this.scaleWidth,a=this.scaleHeight,s=295*this.dpr,o=a-e-i,h=e+.5*o,l=.5*n;this.content.setPosition(l,h),this.content.setContentSize(s,o)},PicaBusinessStreetPanel.prototype.OnCloseHandler=function(){this.render.renderEmitter(T.RENDER_PEER+"_"+this.key+"_hide")},PicaBusinessStreetPanel.prototype.onSelectItemHandler=function(e){},PicaBusinessStreetPanel.prototype.getRichLabel=function(e,i){return void 0===i&&(i="#2B4BB5"),"[stroke="+i+"][color="+i+"]"+e+":[/color][/stroke]"},PicaBusinessStreetPanel.prototype.getspaceStr=function(e){for(var i="",n=0;n<e;n++)i+=" ";return i},PicaBusinessStreetPanel}(_.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaComposePanel",(function(){return _}));var a,s=n(788),o=n(789),h=n(795),l=n(2),c=n(790),m=n(0),f=n(796),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaComposePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=l.ModuleName.PICACOMPOSE_NAME,n}return g(PicaComposePanel,e),PicaComposePanel.prototype.resize=function(i,n){e.prototype.resize.call(this,i,n),this.content.x=.5*i,this.content.y=.5*n,this.mGrideTable.resetMask(),this.materialGameScroll.refreshMask(),this.setSize(i,n)},PicaComposePanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen()):this.preload())},PicaComposePanel.prototype.addListen=function(){this.mInitialized&&this.makeBtn.on(String(s.ClickEvent.Tap),this.onMakeHandler,this)},PicaComposePanel.prototype.removeListen=function(){this.mInitialized&&this.makeBtn.off(String(s.ClickEvent.Tap),this.onMakeHandler,this)},PicaComposePanel.prototype.preload=function(){this.addAtlas(this.key,"compose/compose.png","compose/compose.json"),this.addAtlas(c.c.commonKey,c.d.commonUrl+".png",c.d.commonUrl+".json"),e.prototype.preload.call(this)},PicaComposePanel.prototype.init=function(){var i=this,n=this.scaleWidth,a=this.scaleHeight;this.content=this.scene.make.container(void 0,!1),this.content.setSize(n,a),this.add(this.content);var l=this.scene.make.graphics(void 0,!1);l.clear(),l.fillGradientStyle(7365356,7365356,13408757,13408757),l.fillRect(.5*-n,.5*-a,n,a);var f=this.scene.make.image({key:this.key,frame:"main_bg"});f.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),f.y=.5*-a+.5*f.height,f.setInteractive(new Phaser.Geom.Rectangle(0,0,this.cameraWidth,this.cameraHeight),Phaser.Geom.Rectangle.Contains),f.displayWidth=n,this.content.add([l,f]);var g=this.scene.make.image({key:this.key,frame:"title_bg"});g.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),g.y=.5*-a+45*this.dpr;var _=this.scene.make.text({x:0,y:g.y,text:m.i18n.t("compose.title"),style:{color:"#8B5603",fontSize:15*this.dpr,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(.5);_.setFontStyle("bold"),this.content.add([g,_]);var S=new s.Button(this.scene,c.c.commonKey,"back_arrow","back_arrow");S.setPosition(.5*-n+20*this.dpr,.5*-a+52*this.dpr),S.on(s.ClickEvent.Tap,this.onBackHandler,this),this.content.add(S),this.mDetailDisplay=new h.DetailDisplay(this.scene,this.render),this.mDetailDisplay.y=-140*this.dpr,this.mDetailDisplay.setFixedScale(2*this.dpr/this.scale),this.content.add(this.mDetailDisplay),this.mDetailBubble=new T(this.scene,this.dpr),this.mDetailBubble.x=.5*-n,this.mDetailBubble.y=.5*a-360*this.dpr,this.content.add(this.mDetailBubble),this.makeBtn=new s.NineSliceButton(this.scene,Math.ceil(.5*n-60*this.dpr),Math.ceil(.5*a-310*this.dpr),106*this.dpr,40*this.dpr,c.c.commonKey,"yellow_btn",m.i18n.t("compose.make"),this.dpr,1,{left:12*this.dpr,top:12*this.dpr,right:12*this.dpr,bottom:12*this.dpr}),this.makeBtn.setTextStyle({fontSize:16*this.dpr,color:"#996600"}),this.content.add(this.makeBtn);var j=360*this.dpr,q=92*this.dpr;this.materialCon=this.scene.make.container(void 0,!1).setSize(j,q),this.content.add(this.materialCon),this.materialCon.setPosition(0,.5*a-230*this.dpr);var Y=this.scene.make.image({x:0,y:0,key:this.key,frame:"sourcelist_bg"});Y.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),Y.displayWidth=n;var X=this.scene.make.text({x:0,y:.5*-q+12*this.dpr,text:m.i18n.t("compose.needMaterials"),style:{color:"#ffffff",fontSize:13*this.dpr,fontFamily:m.Font.DEFULT_FONT,wordWrap:{width:90*this.dpr,useAdvancedWrap:!0}}},!1).setOrigin(.5),Z=this.scene.make.image({x:-10*this.dpr,y:X.y,key:this.key,frame:"sourcelist_title_1"});Z.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var $=this.scene.make.image({x:10*this.dpr,y:X.y,key:this.key,frame:"sourcelist_title_1"});$.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var tt=.5*-X.width-.5*Z.width-10*this.dpr;Z.setPosition(tt,X.y),$.setPosition(-tt,X.y).rotation=-Math.PI;var et=this.scene.make.image({x:0,y:X.y+12*this.dpr,key:this.key,frame:"separator"});et.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.materialCon.add([Y,X,Z,$,et]),this.materialGameScroll=new s.GameScroller(this.scene,{x:0,y:10*this.dpr,width:n,height:70*this.dpr,zoom:this.scale,align:2,orientation:1,dpr:this.dpr,space:10*this.dpr,padding:{left:10*this.dpr},cellupCallBack:function(e){i.onMaterialItemHandler(e)}}),this.materialCon.add(this.materialGameScroll),this.itemtips=new o.ItemInfoTips(this.scene,121*this.dpr,46*this.dpr,c.c.commonKey,"tips_bg",this.dpr),this.itemtips.setVisible(!1),this.content.add(this.itemtips);var it=this.scene.textures.getFrame(this.key,"bprint_bg_2"),nt=it.width+10*this.dpr,rt=it.height+12*this.dpr,at=190*this.dpr,st={x:0,y:.5*a-.5*at+20*this.dpr,table:{width:n,height:at,columns:2,cellWidth:nt,cellHeight:rt,reuseCellContainer:!0,zoom:this.scale},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;return null===n&&(n=new x(a,i.key,i.dpr,i.scale)),n.setItemData(s),s&&i.mSelectItemData&&s.skill.id===i.mSelectItemData.skill.id&&(n.select=!0,i.mSelectItem=n),n}};this.mGrideTable=new s.GameGridTable(this.scene,st),this.mGrideTable.layout(),this.mGrideTable.on("cellTap",(function(e){e&&i.onSelectItemHandler(e)})),this.content.add(this.mGrideTable),this.resize(n,a),e.prototype.init.call(this),this.mShowData&&this.setComposeData(this.mShowData.skills)},PicaComposePanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaComposePanel.prototype.setComposeData=function(e){if(e&&e.length>0){this.mGrideTable.setItems(e);var i=this.mSelectItem?this.mSelectItem:this.mGrideTable.getCell(0).container;this.onSelectItemHandler(i)}},PicaComposePanel.prototype.setComposeDetialData=function(e){this.mDetailBubble.setDetailData(e.productName,e.productDes),this.setDetailDisplay(e),this.setMaterialItems(e.materials)},PicaComposePanel.prototype.setDetailDisplay=function(e){if(this.mDetailDisplay.loadSprite("loading_ui",m.Url.getUIRes(this.dpr,"loading_ui/loading_ui.png"),m.Url.getUIRes(this.dpr,"loading_ui/loading_ui.json")),e.productAvatar){var i={avatar:e.productAvatar},n=new Phaser.Geom.Point;n.x=0,n.y=20*this.dpr,this.mDetailDisplay.loadAvatar(i,2*this.dpr,n)}else{var a=e.item,s=a.serializeString?a.elepi:a;f.l.showDetailDisplay({display:this.mDetailDisplay,dpr:this.dpr,data:s,render:this.render,sn:a.sn,itemid:a.id,serialize:a.serializeString})}},PicaComposePanel.prototype.onSelectItemHandler=function(e){var i=e.itemData;this.mSelectItemData=e.itemData,this.makeBtn.enable=i.skill.active&&i.skill.qualified,this.mSelectItem&&(this.mSelectItem.select=!1),this.mSelectItem=e,e.select=!0,this.setComposeDetialData(i)},PicaComposePanel.prototype.setMaterialItems=function(e){var i=e.length,n=[];this.materialGameScroll.clearItems();for(var a=0;a<i;a++){var s=new S(this.scene,this.key,this.dpr);s.y=0,n.push(s),s.setItemData(e[a]),s.setData("itemData",e[a]),this.materialGameScroll.addItem(s)}this.materialGameScroll.Sort()},PicaComposePanel.prototype.onMaterialItemHandler=function(e){this.itemtips.setVisible(!0),this.itemtips.setItemData(e.itemData),this.itemtips.setTipsPosition(e,this.content,-10*this.dpr)},PicaComposePanel.prototype.onMakeHandler=function(){if(this.mSelectItemData){var e={text:[{text:m.i18n.t("compose.confirmation",{name:this.mSelectItemData.productName})}],title:[{text:m.i18n.t("compose.synthesis")}],button:[{text:m.i18n.t("common.cancel"),local:!0,param:0},{text:m.i18n.t("common.confirm"),local:!0,clickhandler:{key:this.key,clickfun:"onConfirmMakeHandler"},param:1}]};this.render.renderEmitter(l.ModuleName.PICACOMPOSE_NAME+"_showpanel",{panel:l.ModuleName.PICAMESSAGEBOX_NAME,data:e})}},PicaComposePanel.prototype.onConfirmMakeHandler=function(){this.render.renderEmitter(l.ModuleName.PICACOMPOSE_NAME+"_reqUseFormula",this.mSelectItemData.skill.id)},PicaComposePanel.prototype.onBackHandler=function(){this.render.renderEmitter(l.ModuleName.PICACOMPOSE_NAME+"_hide")},PicaComposePanel}(o.BasePanel),T=function(e){function DetailBubble(i,n){var a=e.call(this,i)||this;a.dpr=n,a.mDetailBubble=a.scene.make.graphics(void 0,!1);var s=198*n,o=96*n;return a.mDetailBubble=a.scene.make.graphics(void 0,!1),a.mDetailBubble.fillStyle(16777215,.1),a.mDetailBubble.fillRoundedRect(0,0,s,o),a.mItemName=a.scene.make.text({x:7*a.dpr,y:9*a.dpr,text:"道具名称道具名称",style:{fontSize:12*a.dpr,fontFamily:m.Font.DEFULT_FONT,color:"#8C55E1",align:"center"}}),a.mDesText=a.scene.make.text({x:8*n,y:30*n,style:{color:"#ffffff",fontSize:10*n,fontFamily:m.Font.DEFULT_FONT,wordWrap:{width:180*n,useAdvancedWrap:!0}}},!1),a.add([a.mDetailBubble,a.mItemName,a.mDesText]),a.setSize(s,o),a}return g(DetailBubble,e),DetailBubble.prototype.setDetailData=function(e,i){this.mItemName.setText(e),this.mDesText.setText(i),this.resize()},DetailBubble.prototype.resize=function(e,i){void 0===e&&(e=this.width);var n=this.mDesText.height+60*this.dpr;e===this.width&&n===this.height||(this.mDetailBubble.clear(),this.mDetailBubble.fillStyle(16777215,.1),this.mDetailBubble.fillRoundedRect(0,0,e,n),this.setSize(e,n))},DetailBubble}(Phaser.GameObjects.Container),x=function(e){function ComposeItem(i,n,a,s){var h=e.call(this,i)||this;h.zoom=1,h.dpr=a,h.key=n,h.zoom=s,h.bg=h.scene.make.image({key:h.key,frame:"bprint_bg_1"}),h.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.setSize(h.bg.width,h.bg.height),h.itemIcon=new o.DynamicImage(h.scene,0,0),h.itemIcon.scale=h.dpr/h.zoom;var l=h.width,f=h.height;return h.newIcon=h.scene.make.image({key:h.key,frame:"tag_new"}),h.newIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.newIcon.setPosition(.5*-l+3*a,.5*-f+3*a),h.newText=h.scene.make.text({x:h.newIcon.x,y:h.newIcon.y,text:"N",style:{fontSize:11*h.dpr,fontFamily:m.Font.DEFULT_FONT,color:"#ffffff",align:"center"}}).setOrigin(.5),h.starImg=h.scene.make.image({key:c.d.uicommon,frame:"bag_star_small_1"}).setOrigin(0),h.starImg.x=.5*-h.width+4*a,h.starImg.y=.5*-h.height+4*a,h.qualityIcon=h.scene.make.image({key:h.key,frame:"tag_rank_a"}),h.qualityIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.qualityIcon.setPosition(.5*-l+.5*h.qualityIcon.width-2*a,.5*f-.5*h.qualityIcon.height),h.qualityTex=h.scene.make.text({x:h.qualityIcon.x,y:h.qualityIcon.y,text:"A",style:{fontSize:11*h.dpr,fontFamily:m.Font.DEFULT_FONT,color:"#ffffff",align:"center"}}).setOrigin(.5),h.qualifiedIcon=h.scene.make.image({key:h.key,frame:"tag_ready"},!1),h.qualifiedIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.qualifiedIcon.setOrigin(1).setPosition(.5*l-3*a,.5*f-3*a),h.lockbg=h.scene.make.image({key:h.key,frame:"bprint_mask"}),h.lockbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.lockIcon=h.scene.make.image({key:h.key,frame:"lock"}),h.lockIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.add([h.bg,h.itemIcon,h.newIcon,h.newText,h.starImg,h.qualityIcon,h.qualityTex,h.lockbg,h.lockIcon]),h.newIcon.visible=!1,h.newText.visible=!1,h.qualityIcon.visible=!1,h.qualityTex.visible=!1,h}return g(ComposeItem,e),ComposeItem.prototype.setItemData=function(e){this.itemData=e;var i=e.skill,n="bag_star_small_"+i.quality;this.starImg.setFrame(n),this.lockbg.visible=!i.active,this.lockIcon.visible=!i.active,i.display&&this.setItemIcon(i.display),this.select=!1},Object.defineProperty(ComposeItem.prototype,"select",{set:function(e){e?this.bg.setFrame("bprint_bg_2"):this.bg.setFrame("bprint_bg_1")},enumerable:!1,configurable:!0}),ComposeItem.prototype.setItemIcon=function(e){var i=this,n=m.Url.getOsdRes(e.texturePath);this.itemIcon.load(n,this,(function(){i.itemIcon.setPosition(0,0)}))},ComposeItem}(Phaser.GameObjects.Container),S=function(e){function ComposeMaterialItem(i,n,a){var h=e.call(this,i)||this;h.dpr=a,h.key=n;var l=h.scene.make.image({key:h.key,frame:"source_bg"});return l.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),h.itemIcon=new o.DynamicImage(i,0,0),h.itemCount=new s.BBCodeText(h.scene,0,0,"",{}).setOrigin(.5).setFontSize(11*a).setFontFamily(m.Font.NUMBER),h.add([l,h.itemIcon,h.itemCount]),h.setSize(l.width,l.height),h.itemCount.y=.5*h.height,h}return g(ComposeMaterialItem,e),ComposeMaterialItem.prototype.setItemData=function(e){var i=this;this.itemData=e,this.itemCount.text=this.getCountText(e.count,e.neededCount);var n=m.Url.getOsdRes(e.texturePath);this.itemIcon.load(n,this,(function(){i.itemIcon.scale=i.dpr,i.itemIcon.setPosition(0,0)}))},ComposeMaterialItem.prototype.getCountText=function(e,i){var n=e>=i?"#ffffff":"#ff0000";return"[stroke="+n+"][color="+n+"]"+e+"[/color][/stroke]/"+i},ComposeMaterialItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaCreateRolePanel",(function(){return T}));var a,s=n(788),o=n(0),h=n(2),l=n(789),c=n(792),m=n(790),f=n(1),g=n(791),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},T=function(e){function PicaCreateRolePanel(i){var n=e.call(this,i)||this;return n.suitDatasMap=new Map,n.curSuitMap=new Map,n.suitItemMap=new Map,n.consumIndex=0,n.setTween(!1),n.scene.add.container(0,0).add(n),n.scene.scale.on("resize",n.onResize,n),n.atlasNames=[m.d.uicommon,m.d.createrole],n.textures=[{atlasName:"Create_bg_texture",folder:"texture"},{atlasName:"Create_role_bg",folder:"texture"}],n.mMediator=n.render.mainPeer[h.ModuleName.PICACREATEROLE_NAME],n.key=h.ModuleName.PICACREATEROLE_NAME,n}return _(PicaCreateRolePanel,e),PicaCreateRolePanel.prototype.resize=function(e,i){var n=this.scaleWidth,a=this.scaleHeight;this.content.x=.5*n,this.content.y=.5*a},PicaCreateRolePanel.prototype.onShow=function(){this.showData&&this.showData.avatars&&this.setSuitDatas(this.showData.avatars)},PicaCreateRolePanel.prototype.onResize=function(e){this.resize(e.width,e.height)},PicaCreateRolePanel.prototype.destroy=function(){this.scene&&this.scene.scale.off("resize",this.onResize,this),e.prototype.destroy.call(this)},PicaCreateRolePanel.prototype.setSuitDatas=function(e){var i=this;this.suitDatasMap.clear();for(var n=0,a=e;n<a.length;n++){var s=a[n],o=this.suitDatasMap.get(s.suitType);o||(o=[],this.suitDatasMap.set(s.suitType,o)),o.push(s)}this.suitDatasMap.forEach((function(e,n){"base"!==n&&"costume"!==n?i.suitItemMap.get(n).setSuitDatas(e):"base"===n?(i.consumIndex=1,i.curSuitMap.set(n,e[1])):"costume"===n&&(i.consumIndex=0,i.curSuitMap.set(n,e[0]))})),this.onSkinHandler(void 0,this.skinCon.getAt(1)),this.onSixHandler(void 0,this.manButton)},PicaCreateRolePanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.content=this.scene.make.container(void 0,!1),this.add(this.content),this.commonBackground=new g.CommonBackground(this.scene,0,0,i,n),this.mBottomBg=this.scene.make.image({key:"Create_bg_texture"}),this.mBottomBg.y=.5*n-.5*this.mBottomBg.height;var a=this.scene.make.image({key:"Create_role_bg"});a.y=-150*this.dpr,this.dragonbones=new l.UIDragonbonesDisplay(this.scene,this.render),this.dragonbones.scale=2.2*this.dpr,this.dragonbones.y=a.y+45*this.dpr,this.dragonbones.on("initialized",this.loadDragonbonesComplete,this),this.consumLeftBtn=new s.Button(this.scene,m.d.createrole,"Create_clothe_arrow_left"),this.consumLeftBtn.on(s.ClickEvent.Tap,this.onConsumLeftHandler,this),this.consumLeftBtn.x=-122*this.dpr,this.consumLeftBtn.y=this.dragonbones.y-20*this.dpr,this.consumRightBtn=new s.Button(this.scene,m.d.createrole,"Create_clothe_arrow_right"),this.consumRightBtn.on(s.ClickEvent.Tap,this.onConsumRightHandler,this),this.consumRightBtn.x=122*this.dpr,this.consumRightBtn.y=this.dragonbones.y-20*this.dpr;var o=new l.ButtonEventDispatcher(this.scene,0,0);o.setSize(130*this.dpr,130*this.dpr),o.enable=!0,o.on(s.ClickEvent.Tap,this.onAvatarClickHandler,this),o.y=this.dragonbones.y-65*this.dpr,this.backButton=new s.Button(this.scene,m.d.uicommon,"back_arrow"),this.backButton.x=.5*-i+.5*this.backButton.width+20*this.dpr,this.backButton.y=.5*-n+.5*this.backButton.height+23*this.dpr,this.backButton.on(s.ClickEvent.Tap,this.onBackHandler,this),this.content.add([this.commonBackground,this.mBottomBg,a,this.dragonbones,o]),this.createSixCon(),this.createSuitCon(),e.prototype.init.call(this),this.resize(0,0)},PicaCreateRolePanel.prototype.createSixCon=function(){this.sixCon=this.scene.make.container(void 0,!1),this.sixCon.y=70*this.dpr,this.manButton=new l.ToggleButton(this.scene,0,0,m.d.createrole,"Create_gender_uncheck","Create_gender_select",this.dpr),this.manButton.on(s.ClickEvent.Tap,this.onSixHandler,this),this.manIcon=this.scene.make.image({key:m.d.createrole,frame:"Create_gender_boy"}),this.manButton.add(this.manIcon),this.manButton.x=-60*this.dpr,this.manButton.y=-60*this.dpr,this.womanButton=new l.ToggleButton(this.scene,0,0,m.d.createrole,"Create_gender_uncheck","Create_gender_select",this.dpr),this.womanButton.on(s.ClickEvent.Tap,this.onSixHandler,this),this.womanIcon=this.scene.make.image({key:m.d.createrole,frame:"Create_gender_girl"}),this.womanButton.add(this.womanIcon),this.womanButton.x=-this.manButton.x,this.womanButton.y=this.manButton.y,this.nextButton=new s.NineSliceButton(this.scene,0,70*this.dpr,191*this.dpr,55*this.dpr,m.d.uicommon,"yellow_btn_normal",o.i18n.t("creatrole.next"),this.dpr,this.scale,o.UIHelper.button(this.dpr)),this.nextButton.setTextStyle(o.UIHelper.brownishStyle(this.dpr,23)),this.nextButton.on(s.ClickEvent.Tap,this.onNextHandler,this),this.sixCon.add([this.manButton,this.womanButton,this.nextButton]),this.content.add(this.sixCon)},PicaCreateRolePanel.prototype.createSuitCon=function(){var e=-40*this.dpr,i=-115*this.dpr;this.skinCon=this.scene.make.container(void 0,!1);for(var n=0;n<5;n++){var a=n+1,h="Create_complexion_"+a,l=new s.Button(this.scene,m.d.createrole,h);l.name=a+"",l.y=e,l.x=i,l.on(s.ClickEvent.Tap,this.onSkinHandler,this),this.skinCon.add(l),i+=25*this.dpr+32*this.dpr}this.selectSkinBg=this.scene.make.image({key:m.d.createrole,frame:"Create_complexion_select"}),this.skinCon.add(this.selectSkinBg),e+=56*this.dpr,this.suitCon=this.scene.make.container(void 0,!1);var c=["hair","eye","mouse"],f=[o.i18n.t("creatrole.hair"),o.i18n.t("creatrole.eye"),o.i18n.t("creatrole.mouth")];for(n=0;n<c.length;n++){var g=c[n],_=f[n],T=new x(this.scene,264*this.dpr,33*this.dpr,this.dpr,g,_);T.setHandler(new o.Handler(this,this.onSuitDataHandler)),T.y=e,e+=60*this.dpr,this.suitCon.add(T),this.suitItemMap.set(g,T)}this.enterButton=new S(this.scene,0,e+48*this.dpr,191*this.dpr,55*this.dpr,m.d.uicommon,"yellow_btn_normal",o.i18n.t("creatrole.gointo"),this.dpr,this.scale,o.UIHelper.button(this.dpr)),this.enterButton.setTextStyle(o.UIHelper.brownishStyle(this.dpr,23)),this.enterButton.setFontStyle("bold"),this.enterButton.on(s.ClickEvent.Tap,this.onSubmitHandler,this),this.suitCon.add([this.skinCon,this.enterButton])},PicaCreateRolePanel.prototype.onSubmitHandler=function(){return __awaiter(this,void 0,void 0,(function(){var e,i,n,a=this;return __generator(this,(function(s){return this.enterButton.enabled=!1,e=[],i=[],n=h.AvatarSuitType.suitPart,this.curSuitMap.forEach((function(a,s){e.push(a.id),i.push({parts:n[a.suitType],id:a.sn})})),this.uiManager.showPanel(h.ModuleName.MASK_LOADING_NAME),this.dragonbones.save().then((function(e){return a.render.mainPeer.uploadDBTexture(e.key,e.url,e.json),a.render.editorCanvasManager.createHeadIcon(i)})).then((function(i){a.render.mainPeer.uploadHeadImage(i),a.uiManager.hidePanel(h.ModuleName.MASK_LOADING_NAME),a.mediator.submit(a.mgender,e)})).catch((function(e){o.Logger.getInstance().error("save avatar error: "+e)})),[2]}))}))},PicaCreateRolePanel.prototype.onNextHandler=function(){this.suitCon.visible=!0,this.consumLeftBtn.visible=!0,this.consumRightBtn.visible=!0,this.content.add(this.consumLeftBtn),this.content.add(this.consumRightBtn),this.content.add(this.suitCon),this.content.remove(this.sixCon),this.content.add(this.backButton)},PicaCreateRolePanel.prototype.onAvatarClickHandler=function(){var e=["walk","run","greet01"],i={name:e[Math.floor(Math.random()*e.length)],flip:!1,times:1,playingQueue:{name:"idle",playTimes:-1}};this.dragonbones.play(i)},PicaCreateRolePanel.prototype.onSixHandler=function(e,i){this.manButton===i?(this.mgender=f.op_def.Gender.Male,this.womanButton.isOn=!1):this.womanButton===i&&(this.mgender=f.op_def.Gender.Female,this.manButton.isOn=!1),i.isOn=!0,this.setSixedSuitsData(this.mgender)},PicaCreateRolePanel.prototype.setSixedSuitsData=function(e){var i=e===f.op_def.Gender.Female?3:0,n=e===f.op_def.Gender.Female?2:0,a=e===f.op_def.Gender.Female?3:1;this.suitItemMap.get("hair").setInexed(i),this.suitItemMap.get("eye").setInexed(n),this.suitItemMap.get("mouse").setInexed(a),this.displayAvatar()},PicaCreateRolePanel.prototype.setCostumeSuitData=function(e){var i=this.suitDatasMap.get("costume");e<0?e=i.length-1:e>i.length-1&&(e=0),this.curSuitMap.set("costume",i[e]),this.consumIndex=e,this.displayAvatar()},PicaCreateRolePanel.prototype.onBackHandler=function(){this.suitCon.parentContainer&&(this.suitCon.visible=!1,this.consumLeftBtn.visible=!0,this.consumRightBtn.visible=!0,this.content.remove(this.consumLeftBtn),this.content.remove(this.consumRightBtn),this.content.remove(this.suitCon)),this.content.add(this.sixCon),this.content.remove(this.backButton)},PicaCreateRolePanel.prototype.onSkinHandler=function(e,i){var n=Number(i.name)-1,a=this.suitDatasMap.get("base")[n];this.curSuitMap.set("base",a),this.selectSkinBg.x=i.x,this.selectSkinBg.y=i.y,this.displayAvatar()},PicaCreateRolePanel.prototype.onSuitDataHandler=function(e,i){this.curSuitMap.set(e,i),this.suitCon.visible&&this.displayAvatar()},PicaCreateRolePanel.prototype.onConsumLeftHandler=function(){this.consumIndex--,this.setCostumeSuitData(this.consumIndex)},PicaCreateRolePanel.prototype.onConsumRightHandler=function(){this.consumIndex++,this.setCostumeSuitData(this.consumIndex)},PicaCreateRolePanel.prototype.displayAvatar=function(){var e=Array.from(this.curSuitMap.values()),i=this.creatAvatars(e);this.dragonbones.load({id:0,avatar:i},void 0,!1),this.dragonbones.startLoad()},PicaCreateRolePanel.prototype.loadDragonbonesComplete=function(){this.dragonbones.play({name:"idle",flip:!1})},PicaCreateRolePanel.prototype.creatAvatars=function(e){for(var i=[],n=0,a=e;n<a.length;n++){var s=a[n],o={id:s.id,suit_type:s.suitType,slot:s.slot,tag:s.tag,sn:s.sn};i.push(o)}return h.AvatarSuitType.createHasBaseAvatar(i)},Object.defineProperty(PicaCreateRolePanel.prototype,"mediator",{get:function(){if(this.mMediator)return this.mMediator},enumerable:!1,configurable:!0}),PicaCreateRolePanel}(c.PicaBasePanel),x=function(e){function SelectSuitAvatarItem(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.indexed=0,l.setSize(n,a),l.dpr=s,l.tag=o,l.text=h,l.init(),l}return _(SelectSuitAvatarItem,e),SelectSuitAvatarItem.prototype.setSuitDatas=function(e){this.suitDatas=e},SelectSuitAvatarItem.prototype.setInexed=function(e){this.indexed=e,this.updateCurrentSuitData()},SelectSuitAvatarItem.prototype.setHandler=function(e){this.send=e},SelectSuitAvatarItem.prototype.init=function(){this.leftButton=new s.Button(this.scene,m.d.createrole,"Create_arrow_left"),this.leftButton.x=.5*-this.width+.5*this.leftButton.width,this.leftButton.on(s.ClickEvent.Tap,this.onLeftButtonHandler,this),this.midBackground=this.scene.make.image({key:m.d.createrole,frame:"Create_name_bg"}),this.nameTex=this.scene.make.text({text:"",style:o.UIHelper.whiteStyle(this.dpr,18)}).setOrigin(.5),this.rightButton=new s.Button(this.scene,m.d.createrole,"Create_arrow_right"),this.rightButton.x=.5*this.width-.5*this.rightButton.width,this.rightButton.on(s.ClickEvent.Tap,this.onRightButtonHandler,this),this.add([this.leftButton,this.midBackground,this.nameTex,this.rightButton])},SelectSuitAvatarItem.prototype.onLeftButtonHandler=function(){this.indexed--,-1===this.indexed&&(this.indexed=this.suitDatas.length-1),this.updateCurrentSuitData()},SelectSuitAvatarItem.prototype.onRightButtonHandler=function(){this.indexed++,this.indexed===this.suitDatas.length&&(this.indexed=0),this.updateCurrentSuitData()},SelectSuitAvatarItem.prototype.updateCurrentSuitData=function(){var e=this.suitDatas[this.indexed];this.nameTex.text=this.text+(this.indexed+1),this.send&&this.send.runWith([this.tag,e])},SelectSuitAvatarItem}(Phaser.GameObjects.Container),S=function(e){function PlayButton(i,n,a,s,o,h,l,c,m,f,g,_,T){return e.call(this,i,n,a,s,o,h,l,c,m,f,g,_,T)||this}return _(PlayButton,e),Object.defineProperty(PlayButton.prototype,"enabled",{set:function(e){this.mBackground&&(this.remove(this.mBackground),this.mBackground.destroy()),this.mText&&this.remove(this.mText),e?(this.mFrame="yellow_btn_normal",this.createBackground(),this.setInteractive()):(this.mFrame="butt_gray",this.createBackground(),this.removeInteractive()),this.mText&&(this.add(this.mText),this.mText.setColor(e?"#995E00":"#808080"))},enumerable:!1,configurable:!0}),PlayButton}(s.NineSliceButton)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaDecorateControlPanel",(function(){return f}));var a,s=n(788),o=n(2),h=n(0),l=n(790),c=n(792),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaDecorateControlPanel(i){var n=e.call(this,i)||this;return n.key=o.ModuleName.PICADECORATECONTROL_NAME,n.atlasNames=[l.d.uicommon,l.d.effectcommon,l.d.room_decorate],n}return m(PicaDecorateControlPanel,e),PicaDecorateControlPanel.prototype.addListen=function(){this.mInitialized&&(this.mRotateBtn.on(s.ClickEvent.Tap,this.onRotateHandler,this),this.mRecycleBtn.on(s.ClickEvent.Tap,this.onRecycleAllHandler,this),this.mExitBtn.on(s.ClickEvent.Tap,this.onExitHandler,this),this.render.emitter.on(o.MessageType.DECORATE_UPDATE_SELECTED_ELEMENT_POSITION,this.updatePosition,this))},PicaDecorateControlPanel.prototype.removeListen=function(){this.mInitialized&&(this.mRotateBtn.off(s.ClickEvent.Tap,this.onRotateHandler,this),this.mRecycleBtn.off(s.ClickEvent.Tap,this.onRecycleAllHandler,this),this.mExitBtn.off(s.ClickEvent.Tap,this.onExitHandler,this),this.render.emitter.off(o.MessageType.DECORATE_UPDATE_SELECTED_ELEMENT_POSITION,this.updatePosition,this))},PicaDecorateControlPanel.prototype.resize=function(i,n){this.setSize(i,131*this.dpr),e.prototype.resize.call(this,i,n)},PicaDecorateControlPanel.prototype.updateCanPlace=function(e){},PicaDecorateControlPanel.prototype.updatePosition=function(){var e=this.mShowData,i=e.id,n=(e.pos,e.canPlace,this.render.displayManager.getDisplay(i));n&&this.changePosFollowTarget(n.getPosition())},PicaDecorateControlPanel.prototype.init=function(){var i=this.scene.cameras.main.width,n=this.scene.cameras.main.height;this.mBtns=[],this.mRotateBtn=new s.Button(this.scene,l.d.room_decorate,"room_decorate_Spin","room_decorate_Spin"),this.mRecycleBtn=new s.Button(this.scene,l.d.room_decorate,"room_decorate_put","room_decorate_put"),this.mExitBtn=new s.Button(this.scene,l.d.room_decorate,"room_decorate_confirm","room_decorate_confirm"),this.mBtns=[this.mRotateBtn,this.mRecycleBtn,this.mExitBtn],this.add(this.mBtns);this.render.uiScale;for(var a=6*this.dpr,o=0;o<this.mBtns.length;o++)this.mBtns[o].x=o>0?a+.5*this.mBtns[o-1].width+this.mBtns[o-1].x+.5*this.mBtns[o].width:60*this.dpr+.5*this.mBtns[o].width,this.mBtns[o].y=11*this.dpr+.5*this.mBtns[o].height;this.resize(i,n),e.prototype.init.call(this);var h=this.mShowData,c=(h.id,h.pos),m=h.canPlace,f=h.locked;this.updateCanPlace(m),this.changePosFollowTarget(c),this.mRecycleBtn.enable=!f},PicaDecorateControlPanel.prototype.changePosFollowTarget=function(e){var i=new h.LogicPos(this.uiManager.render.camerasManager.camera.scrollX,this.uiManager.render.camerasManager.camera.scrollY);this.x=(e.x-170)*this.dpr-i.x,this.y=(e.y+50)*this.dpr-i.y},PicaDecorateControlPanel.prototype.onSaveHandler=function(){this.mediator.ensureChanges()},PicaDecorateControlPanel.prototype.onRotateHandler=function(){this.mediator.rotate()},PicaDecorateControlPanel.prototype.onRecycleAllHandler=function(){this.mediator.recycle()},PicaDecorateControlPanel.prototype.onAutoPlaceHandler=function(){this.mediator.autoPlace()},PicaDecorateControlPanel.prototype.onExitHandler=function(){this.mediator.exit()},Object.defineProperty(PicaDecorateControlPanel.prototype,"mediator",{get:function(){return this.render.mainPeer[this.key]},enumerable:!1,configurable:!0}),PicaDecorateControlPanel}(c.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaEffectMgrPanel",(function(){return g}));var a,s=n(790),o=n(2),h=n(0),l=n(792),c=n(857),m=n(1036),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaEffectMgrPanel(i){var n=e.call(this,i)||this;return n.tempQueue=new Map,n.key=o.ModuleName.PICAEFFECTMGR_NAME,n.atlasNames=[s.d.effectcommon,s.d.effectlevelup],n}return f(PicaEffectMgrPanel,e),PicaEffectMgrPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;this.content.x=a/2,this.content.y=s/2,e.prototype.resize.call(this,a,s),this.setSize(a,s)},PicaEffectMgrPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.add(this.content),this.resize(0,0),e.prototype.init.call(this)},PicaEffectMgrPanel.prototype.play=function(e,i){if(this.mInitialized)"unlock"===i?(this.furniEffectPanel||(this.furniEffectPanel=new c.PicaFurniUnlockEffectPanel(this.scene,this.render,this.scaleWidth,this.scaleHeight,this.key,this.dpr),this.content.add(this.furniEffectPanel)),this.furniEffectPanel.visible=!0,this.furniEffectPanel.play(e)):"levelup"===i&&(this.levelupEffectPanel||(this.levelupEffectPanel=new m.PicaLevelUpEffectPanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.content.add(this.levelupEffectPanel),this.levelupEffectPanel.setHandler(new h.Handler(this,(function(){})))),this.levelupEffectPanel.visible=!0,this.levelupEffectPanel.setLevelUpData(e));else{var n=this.tempQueue.get(i);n=n?n.concat(e):e,this.tempQueue.set(i,n)}},PicaEffectMgrPanel.prototype.onShow=function(){var e=this;this.tempQueue.size>0&&this.tempQueue.forEach((function(i,n){e.play(i,n)}))},PicaEffectMgrPanel}(l.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaElementStoragePanel",(function(){return f}));var a,s=n(1037),o=n(788),h=n(789),l=n(2),c=n(0),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaElementStoragePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.mExpaned=!0,n.mItemNum=32,n.key=l.ModuleName.PICAELEMENTSTORAGE_NAME,n.setTween(!1),n.dpr/=2,n}return m(PicaElementStoragePanel,e),PicaElementStoragePanel.prototype.show=function(i){e.prototype.show.call(this,i),this.mInitialized&&this.setPackageNum(1)},PicaElementStoragePanel.prototype.resize=function(e){var i=this.render.getSize();if(this.scale=this.dpr,this.render.game.scale.orientation===Phaser.Scale.Orientation.LANDSCAPE){this.setSize(341,450),this.x=i.width-this.width*this.dpr-10,this.y=i.height-this.height*this.dpr>>1,this.mBackground.resize(this.width,this.height),this.mBackground.x=this.mBackground.width>>1,this.mBackground.y=this.mBackground.height>>1,this.mBorder.resize(327,423),this.mBorder.x=7+(this.mBorder.width>>1),this.mBorder.y=19+(this.mBorder.height>>1),this.mSearchInput.x=145,this.mSearchInput.y=40,this.mDragBtn.x=-this.mDragBtn.height,this.mDragBtn.y=this.height>>1;for(var n=this.mProps.length,a=0;a<n;a++)this.mProps[a].x=a%4*60+20,this.mProps[a].y=60*Math.floor(a/4)+80}else{this.setSize(510,329),this.mBackground.resize(this.width,this.height),this.mBackground.x=this.mBackground.width>>1,this.mBackground.y=this.mBackground.height>>1,this.mBorder.resize(496,303),this.mBorder.x=7+(this.mBorder.width>>1),this.mBorder.y=19+(this.mBorder.height>>1),this.mSearchInput.x=270,this.mSearchInput.y=33,this.x=i.width-this.width*this.dpr>>1,this.y=i.height-this.height*this.dpr-10,this.mDragBtn.x=this.width>>1,this.mDragBtn.y=-this.mDragBtn.height>>1;for(n=this.mProps.length,a=0;a<n;a++)this.mProps[a].x=a%8*60+20,this.mProps[a].y=60*Math.floor(a/8)+80}this.mPrePageBtn.y=this.height>>1,this.mNextPageBtn.x=this.width,this.mNextPageBtn.y=this.height>>1,this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,this.width,this.height),Phaser.Geom.Rectangle.Contains)},PicaElementStoragePanel.prototype.addListen=function(){e.prototype.addListen.call(this),this.mBackground&&this.mBackground.on("pointerout",this.onPointerOutHandler,this),this.mDragBtn&&this.mDragBtn.on("pointerup",this.switchExpand,this),this.mPrePageBtn&&this.mPrePageBtn.on("pointerup",this.onPrePageHandler,this),this.mNextPageBtn&&this.mNextPageBtn.on("pointerup",this.onNextPageHandler,this),this.mCloseBtn&&this.mCloseBtn.on("pointerup",this.onCloseHandler,this),this.scene&&(this.scene.input.on("dragstart",this.onDragStartHandler,this),this.scene.input.on("dragend",this.onDragEndHandler,this),this.scene.input.on("drag",this.onDragHandler,this))},PicaElementStoragePanel.prototype.removeListen=function(){e.prototype.removeListen.call(this),this.mBackground&&this.mBackground.off("pointerout",this.onPointerOutHandler,this),this.mDragBtn&&this.mDragBtn.off("pointerup",this.switchExpand,this),this.mPrePageBtn&&this.mPrePageBtn.off("pointerup",this.onPrePageHandler,this),this.mNextPageBtn&&this.mNextPageBtn.off("pointerup",this.onNextPageHandler,this),this.mCloseBtn&&this.mCloseBtn.off("pointerup",this.onCloseHandler,this),this.scene&&(this.scene.input.off("dragstart",this.onDragStartHandler,this),this.scene.input.off("dragend",this.onDragEndHandler,this),this.scene.input.off("drag",this.onDragHandler,this))},PicaElementStoragePanel.prototype.setProps=function(e){var i=e.items;this.clearItem();for(var n=0;n<i.length;n++){if(n>=this.mProps.length)return;this.mProps[n].setProp(i[n])}},PicaElementStoragePanel.prototype.expand=function(){if(!this.mExpaned){var e=this.render.getSize(),i=null;i=this.render.game.scale.orientation===Phaser.Scale.Orientation.LANDSCAPE?{x:e.width-this.width*this.dpr-10}:{y:e.height-this.height*this.dpr-10},this.scene.tweens.add({targets:this,duration:200,ease:"Linear",props:i}),this.remove(this.mDragBtn),this.add([this.mPrePageBtn,this.mNextPageBtn]),this.mExpaned=!0}},PicaElementStoragePanel.prototype.collapse=function(){if(this.mExpaned){var e=this.render.getSize(),i=null;i=this.render.game.scale.orientation===Phaser.Scale.Orientation.LANDSCAPE?{x:e.width}:{y:e.height},this.scene.tweens.add({targets:this,duration:200,ease:"Linear",props:i}),this.addAt(this.mDragBtn,0),this.remove([this.mPrePageBtn,this.mNextPageBtn]),this.mExpaned=!1}},PicaElementStoragePanel.prototype.destroy=function(){this.scene&&(this.scene.input.off("dragstart",this.onDragStartHandler,this),this.scene.input.off("dragend",this.onDragEndHandler,this),this.scene.input.off("drag",this.onDragHandler,this)),e.prototype.destroy.call(this)},PicaElementStoragePanel.prototype.preload=function(){this.scene.load.image(c.Border.getName(),c.Border.getPNG()),this.scene.load.image("button",c.Url.getRes("ui/common/button.png")),this.scene.load.image("prop_background",c.Url.getRes("ui/common/prop_background.png")),this.scene.load.atlas("slip",c.Url.getRes("ui/bag/slip.png"),c.Url.getRes("ui/bag/slip.json")),this.mScene.load.atlas("clsBtn",c.Url.getRes("ui/common/common_clsBtn.png"),c.Url.getRes("ui/common/common_clsBtn.json")),this.scene.load.image(c.Background.getName(),c.Background.getPNG()),e.prototype.preload.call(this)},PicaElementStoragePanel.prototype.init=function(){this.mBackground=new h.NinePatch(this.scene,0,0,this.width,this.height,c.Background.getName(),null,c.Background.getConfig()),this.mBorder=new h.NinePatch(this.scene,7,19,327,423,c.Border.getName(),null,c.Border.getConfig()),this.mSearchInput=new o.InputText(this.scene,145,40,210,26,{type:"input",fontSize:"14px",color:"#808080",placeholder:"输入关键词进行搜索"});this.mDragBtn=new o.NineSliceButton(this.scene,0,-20,80,40,"button","","物件容器",this.dpr,this.scale,{left:4,top:4,right:4,bottom:4}),this.mPrePageBtn=this.scene.make.sprite({key:"slip"},!1),this.mPrePageBtn.setInteractive(),this.mNextPageBtn=this.scene.make.sprite({key:"slip"},!1).setFlipX(!0),this.mNextPageBtn.setInteractive(),this.mProps=[],this.add([this.mBackground,this.mBorder,this.mSearchInput]);for(var i=0;i<this.mItemNum;i++){var n=new s.Item(this.scene);this.mProps[i]=n}this.add(this.mProps),this.add([this.mPrePageBtn,this.mNextPageBtn]),this.mCloseBtn=this.scene.make.image({key:"clsBtn",frame:"btn_normal"},!1).setInteractive().setScale(2),this.add(this.mCloseBtn),e.prototype.init.call(this),this.resize(),this.expand()},PicaElementStoragePanel.prototype.onPrePageHandler=function(){this.setPackageNum(this.mPacgeNum-1)},PicaElementStoragePanel.prototype.onNextPageHandler=function(){this.setPackageNum(this.mPacgeNum+1)},PicaElementStoragePanel.prototype.setPackageNum=function(e){this.mPacgeNum=e<1?1:e,this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_queryElement",{page:this.mPacgeNum,perPage:32})},PicaElementStoragePanel.prototype.switchExpand=function(){this.mExpaned?this.collapse():this.expand()},PicaElementStoragePanel.prototype.onSelectedHandler=function(){},PicaElementStoragePanel.prototype.onClick=function(e){},PicaElementStoragePanel.prototype.onDragStartHandler=function(e,i,n,a){var o=i.parentContainer;o instanceof s.Item&&(this.mDragData=o.prop),this.mDragImage||(this.mDragImage=this.scene.make.image(void 0,!1),this.add(this.mDragImage)),this.mDragImage.x=o.x,this.mDragImage.y=o.y,this.mDragImage.setTexture(i.texture.key),this.mDragging=!0},PicaElementStoragePanel.prototype.onDragEndHandler=function(){this.mDragImage&&(this.mDragImage.setTexture(void 0),this.mDragging=!1)},PicaElementStoragePanel.prototype.onDragHandler=function(e,i,n,a){this.mDragImage&&(this.mDragImage.x+=e.x-e.prevPosition.x,this.mDragImage.y+=e.y-e.prevPosition.y)},PicaElementStoragePanel.prototype.onPointerOutHandler=function(){this.mDragImage&&this.mDragging&&(this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_selectedElement",this.mDragData),this.mDragImage.setTexture(void 0),this.mDragging=!1)},PicaElementStoragePanel.prototype.clearItem=function(){this.mProps&&this.mProps.map((function(e){return e.clear()}))},PicaElementStoragePanel.prototype.onCloseHandler=function(){this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_hide")},PicaElementStoragePanel}(h.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaElevatorPanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(2),c=n(0),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaElevatorPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=l.ModuleName.PICAELEVATOR_NAME,n}return m(PicaElevatorPanel,e),PicaElevatorPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.mBackground.clear(),this.mBackground.fillStyle(0,.5),this.mBackground.fillRoundedRect(-this.x,-this.y,a,s),this.content.x=.5*a,this.content.y=.5*s,this.mGameGrid.resetMask(),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains)},PicaElevatorPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen(),this.setElevtorDataList(this.mShowData)):this.preload())},PicaElevatorPanel.prototype.addListen=function(){this.mInitialized&&this.closeBtn.on("pointerup",this.OnClosePanel,this)},PicaElevatorPanel.prototype.removeListen=function(){this.mInitialized&&this.closeBtn.off("pointerup",this.OnClosePanel,this)},PicaElevatorPanel.prototype.preload=function(){this.addAtlas(h.c.commonKey,h.d.commonUrl+".png",h.d.commonUrl+".json"),this.addAtlas(h.c.common2Key,h.d.common2Url+".png",h.d.common2Url+".json"),e.prototype.preload.call(this)},PicaElevatorPanel.prototype.init=function(){var i=this;this.mBackground=this.scene.make.graphics(void 0,!1),this.add(this.mBackground);var n=295*this.dpr,a=405*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(n,a),this.add(this.content),this.bg=new s.NineSlicePatch(this.scene,0,0,n,a,h.c.commonKey,"bg",{left:30*this.dpr,top:30*this.dpr,bottom:30*this.dpr,right:30*this.dpr}),this.content.add(this.bg),this.closeBtn=new s.Button(this.scene,h.c.commonKey,"close","close"),this.closeBtn.setPosition(.5*this.bg.width-5*this.dpr,.5*-this.bg.height+5*this.dpr),this.content.add(this.closeBtn);var o={x:0,y:0,table:{width:n-20*this.dpr,height:a-30*this.dpr,columns:1,cellWidth:n-20*this.dpr,cellHeight:85*this.dpr,reuseCellContainer:!0,zoom:this.scale},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,n){e.scene;var a=i.mGameGrid.items.length-e.index,s=e.item;return null===n&&(n=new g(i.scene,i.key,i.dpr)),n.setFloorData(s,a),n}};this.mGameGrid=new s.GameGridTable(this.scene,o),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",(function(e){i.onSelectItemHandler(e.floorData)})),this.content.add(this.mGameGrid),this.resize(),e.prototype.init.call(this)},PicaElevatorPanel.prototype.setElevtorDataList=function(e){var i=e.button.reverse();this.mGameGrid.setItems(i),this.mGameGrid.setT(1)},PicaElevatorPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaElevatorPanel.prototype.OnClosePanel=function(){this.render.renderEmitter(l.RENDER_PEER+this.key+"_hide")},PicaElevatorPanel.prototype.onSendHandler=function(){},PicaElevatorPanel.prototype.onSelectItemHandler=function(e){var i=this.showData;e.text.split("#")[1];this.render.renderEmitter(l.RENDER_PEER+this.key+"_queryui",{uiId:i.id,componentId:e.node.id})},PicaElevatorPanel}(o.BasePanel),g=function(e){function ElevatorItem(i,n,a){var l=e.call(this,i)||this;return l.key=n,l.dpr=a,l.bg=new o.DynamicImage(i,0,0),l.add(l.bg),l.setSize(268*a,81*a),l.namebg=new s.NineSlicePatch(l.scene,0,0,82*a,22*a,h.c.common2Key,"floor_title_bg",{left:15*l.dpr,top:0*l.dpr,right:15*l.dpr,bottom:0*l.dpr},void 0,void 0,0),l.namebg.x=.5*l.width-.5*l.namebg.width-10*a,l.namebg.y=.5*-l.height+.5*l.namebg.height+10*a,l.add(l.namebg),l.nameTex=l.scene.make.text({x:l.namebg.x,y:l.namebg.y,text:"",style:{color:"#22E2FF",fontFamily:c.Font.DEFULT_FONT,fontSize:12*l.dpr}}).setOrigin(.5),l.add(l.nameTex),l.levelbg=l.scene.make.image({key:h.c.common2Key,frame:"floor_number_unlock"}),l.levelbg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),l.levelbg.x=.5*-l.width+.5*l.levelbg.width+5*a,l.levelbg.y=.5*l.height-.5*l.levelbg.height-5*a,l.add(l.levelbg),l.levelTex=l.scene.make.text({x:l.levelbg.x,y:l.levelbg.y,text:"",style:{color:"#FAD555",fontFamily:c.Font.NUMBER,fontSize:17*l.dpr}}).setOrigin(.5),l.add(l.levelTex),l}return m(ElevatorItem,e),ElevatorItem.prototype.setFloorData=function(e,i){this.floorData=e;var n=e.text.split("#");"false"!==n[1]?(this.levelbg.setFrame("floor_number_unlock"),this.levelTex.setColor("#FAD555"),this.nameTex.setColor("#22E2FF")):(this.levelbg.setFrame("floor_number_lock"),this.levelTex.setColor("#BDBDBD"),this.nameTex.setColor("#DDDDDD")),this.levelTex.text=i+c.i18n.t("picelevator.floor"),this.nameTex.text=n[0];var a=e.tips.lastIndexOf("/"),s=e.tips.slice(a+1,e.tips.length),o=e.tips.slice(0,a+1),h=c.Url.getOsdRes(o+s+"_"+this.dpr+"x.png");this.bg.load(h,this,(function(){}))},ElevatorItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaEquipUpgradePanel",(function(){return g}));var a,s=n(789),o=n(788),h=n(2),l=n(790),c=n(0),m=n(858),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaEquipUpgradePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.commonkey="common_key",n.equipItems=[],n.key=h.ModuleName.PICAEQUIPUPGRADE_NAME,n}return f(PicaEquipUpgradePanel,e),PicaEquipUpgradePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.bg.x=a/2,this.bg.y=s/2,this.tilteName.x=this.bg.x,this.tilteName.y=this.bg.y-this.bg.height/2,this.titlebg.x=this.bg.x,this.titlebg.y=this.bg.y-this.bg.height/2,this.closeBtn.x=this.bg.x+this.bg.width/2-10*this.dpr,this.closeBtn.y=this.bg.y-this.bg.height/2+10*this.dpr,this.blackBg.clear(),this.blackBg.fillStyle(0,.5),this.blackBg.fillRoundedRect(-this.x,-this.y,a,s),this.add([this.blackBg,this.bg,this.closeBtn,this.titlebg,this.tilteName])},PicaEquipUpgradePanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.refreshData(),this.addListen()):this.preload())},PicaEquipUpgradePanel.prototype.addListen=function(){this.mInitialized&&this.closeBtn.on("pointerup",this.OnClosePanel,this)},PicaEquipUpgradePanel.prototype.removeListen=function(){this.mInitialized&&this.closeBtn.off("pointerup",this.OnClosePanel,this)},PicaEquipUpgradePanel.prototype.preload=function(){this.commonkey=l.c.commonKey,this.addAtlas(this.key,"equip_upgrade/mine_eqpm.png","equip_upgrade/mine_eqpm.json"),this.addAtlas(l.c.commonKey,l.d.commonUrl+".png",l.d.commonUrl+".json"),e.prototype.preload.call(this)},PicaEquipUpgradePanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.setSize(i,n),this.blackBg=this.scene.make.graphics(void 0,!1),this.blackBg.clear(),this.blackBg.fillStyle(0,.5),this.blackBg.fillRoundedRect(0,0,i,n),this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0,0,this.scene.cameras.main.width,this.scene.cameras.main.height),Phaser.Geom.Rectangle.Contains),this.bg=new o.NinePatch(this.scene,0,0,300*this.dpr,300*this.dpr,this.commonkey,"bg",void 0,void 0,{left:40,top:40,bottom:40,right:40});var a=.5*-this.bg.height;this.titlebg=this.scene.make.image({x:0,y:a,key:this.key,frame:"titlebg"}),this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.tilteName=this.scene.make.text({x:0,y:a,text:c.i18n.t("equipupgrade.title"),style:{color:"#8F4300",fontSize:15*this.dpr,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(.5,0),this.tilteName.setFontStyle("bold"),this.closeBtn=this.scene.make.image({x:.5*this.bg.width-5*this.dpr,y:a+5*this.dpr,key:this.commonkey,frame:"close"}),this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.tilteName.setStroke("#8F4300",1),this.closeBtn.setInteractive(),this.add([this.blackBg,this.bg,this.closeBtn,this.titlebg,this.tilteName]),this.resize(this.scene.cameras.main.width,this.scene.cameras.main.height),e.prototype.init.call(this)},PicaEquipUpgradePanel.prototype.setEquipDatas=function(e){if(this.content=e,this.mInitialized){var i=this.scaleWidth,n=this.scaleHeight,a=e.mineEquipments,s=175*this.dpr*a.length-(a.length>=2?40*(a.length-2):0),o=155*this.dpr;this.resetPosition(this.bg.width,s);for(var h=.5*-s+100*this.dpr,l=0,c=0,f=a;c<f.length;c++){var g=f[c];g.isblue=l%2!=0;var _=new m.PicaEquipUpgradeItem(this.scene,this,this.dpr,this.scale,this.key,this.commonkey);_.on("reqActive",this.onReqActiveEquipment,this),_.on("reqEquiped",this.onReqEquipedEquipment,this),_.setEquipItems(g),_.setTransPosition(i/2,h+n/2),this.equipItems.push(_),h+=o,l++}this.resize(i,n)}},PicaEquipUpgradePanel.prototype.setActiveEquipment=function(e){for(var i=0,n=0,a=this.content.mineEquipments;n<a.length;n++){for(var s=a[n],o=this.equipItems[i],h=-1,l=0;l<s.mineEquipments.length;l++){var c=s.mineEquipments[l];c.id===e.id?(s.mineEquipments[l]=e,o.refreshEquipData(e,l),h=l):c.selected&&(c.selected=!1)}h>=0&&o.refreshEquipData(e,h),i++}},PicaEquipUpgradePanel.prototype.destroy=function(){if(this.equipItems){for(var i=0,n=this.equipItems;i<n.length;i++){n[i].destroy()}this.equipItems.length=0}this.equipItems=null,this.content=null,e.prototype.destroy.call(this)},PicaEquipUpgradePanel.prototype.getEuipDatas=function(){for(var e=[],i=0;i<3;i++){var n={};n.name=0===i?"矿镐":"矿车",n.items=[],n.isblue=!(i%2==0);for(var a=0;a<15;a++){var s={};s.name="矿镐"+a,s.penetration=10+a,s.des="describle",s.cost=100*a,s.unlock=!1,n.items.push(s)}e.push(n)}return e},PicaEquipUpgradePanel.prototype.refreshData=function(){var e=this.getData("upgradeData");e&&this.setEquipDatas(e)},PicaEquipUpgradePanel.prototype.resetPosition=function(e,i){this.bg.resize(e,i);var n=.5*-i;this.titlebg.setPosition(0,n),this.tilteName.setPosition(0,n),this.closeBtn.setPosition(.5*e-8*this.dpr,n+8*this.dpr)},PicaEquipUpgradePanel.prototype.OnClosePanel=function(){this.render.renderEmitter(h.ModuleName.PICAEQUIPUPGRADE_NAME+"_hide")},PicaEquipUpgradePanel.prototype.onReqActiveEquipment=function(e){this.render.renderEmitter(h.ModuleName.PICAEQUIPUPGRADE_NAME+"_reqActive",e)},PicaEquipUpgradePanel.prototype.onReqEquipedEquipment=function(e){this.render.renderEmitter(h.ModuleName.PICAEQUIPUPGRADE_NAME+"_reqEquiped",e)},PicaEquipUpgradePanel}(s.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaExploreLogPanel",(function(){return T}));var a,s=n(789),o=n(788),h=n(2),l=n(790),c=n(0),m=n(792),f=n(859),g=n(791),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),T=function(e){function PicaExploreLogPanel(i){var n=e.call(this,i)||this;return n.atlasNames=[l.d.explorelog,l.d.uicommon1],n.key=h.ModuleName.PICAEXPLORELOG_NAME,n}return _(PicaExploreLogPanel,e),PicaExploreLogPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.goOutBtn.x=a-.5*this.goOutBtn.width-10*this.dpr,this.goOutBtn.y=.5*this.goOutBtn.height+10*this.dpr,this.continueProgress.x=.5*a,this.continueProgress.y=.5*-this.continueProgress.height,this.continueText.x=this.continueProgress.x+.5*this.continueProgress.width+5*this.dpr,this.continueText.y=this.continueProgress.y,this.expProgress.x=a-.5*this.expProgress.width-40*this.dpr,this.expProgress.y=s-240*this.dpr,this.textCon.y=this.expProgress.y+55*this.dpr,this.textCon.x=.5*a,this.guideCon.x=0,this.guideCon.y=this.goOutBtn.y+.5*this.goOutBtn.height+20*this.dpr,this.expProgress.refreshMask(),this.textCon.refreshMask()},PicaExploreLogPanel.prototype.addListen=function(){this.mInitialized&&this.goOutBtn.on(o.ClickEvent.Tap,this.onGoOutHandler,this)},PicaExploreLogPanel.prototype.removeListen=function(){this.mInitialized&&this.goOutBtn.off(o.ClickEvent.Tap,this.onGoOutHandler,this)},PicaExploreLogPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.setSize(i,n),this.goOutBtn=new o.Button(this.scene,l.d.explorelog,"checkpoint_abort"),this.expProgress=new x(this.scene,this.dpr,this.scale),this.expProgress.setHandler(new c.Handler(this,this.onProClickHandler)),this.continueProgress=new s.ProgressMaskBar(this.scene,l.d.explorelog,"checkpoint_progress bar_bottom","checkpoint_progress bar_top"),this.continueProgress.visible=!1,this.continueText=this.scene.make.text({style:c.UIHelper.yellowStyle(this.dpr,24)}).setOrigin(0,.5),this.continueText.setFontStyle("bold italic"),this.textCon=new S(this.scene,i,138*this.dpr,this.dpr,this.scale),this.guideCon=new j(this.scene,132*this.dpr,113*this.dpr,this.dpr),this.guideCon.visible=!1,this.add([this.goOutBtn,this.expProgress,this.continueProgress,this.continueText,this.textCon,this.guideCon]),this.resize(i,n),e.prototype.init.call(this),this.setTimeProgress(3e4)},PicaExploreLogPanel.prototype.setExploreDatas=function(e){this.textCon.setTextTips(e)},PicaExploreLogPanel.prototype.setExploreCountDown=function(e){var i=this;if(this.continueProgress.setProgress(100,100),this.continueText.text="x"+e.combo,this.continueProgress.visible)0===e.combo?this.continueFadeOutAnimation():(this.playRotateTween(0,100,1e3*e.seconds),this.continueText.scale=.1,this.continueText.alpha=1,this.continueText.visible=!0,c.UIHelper.playScaleTween(this.scene,this.continueText,.1,1,200,"Linear",void 0));else{this.continueProgress.visible=!0;var n=.5*this.continueProgress.height+20*this.dpr;this.continueText.scale=.01,this.continueText.visible=!0,c.UIHelper.playtPosYTween(this.scene,this.continueProgress,0,n,300,"Bounce.easeOut",void 0,new c.Handler(this,(function(){i.scene&&(i.playRotateTween(0,100,1e3*e.seconds),i.continueText.alpha=1,c.UIHelper.playScaleTween(i.scene,i.continueText,.1,1,200,"Back.easeInOut",void 0))})),new c.Handler(this,(function(){i.scene&&(i.continueProgress.refreshMask(),i.continueText.y=i.continueProgress.y)})))}},PicaExploreLogPanel.prototype.setExploreSettleDatas=function(e){this.openSettlePanel(),this.settlePanel.setSettleData(e),this.clearRotateTween()},PicaExploreLogPanel.prototype.setExploreGuideTexts=function(e){e.text&&0!==e.text.length?(this.guideCon.visible=!0,this.guideCon.setGuideTexts(e.text)):this.guideCon.visible=!1},PicaExploreLogPanel.prototype.setTimeProgress=function(e){var i=this;this.expProgress.setProgress(0),this.clearTimer();var n=0;this.timer=setInterval((function(){var a=n/e;n+=20,i.expProgress.setProgress(a),a>=1&&i.clearTimer()}),20)},PicaExploreLogPanel.prototype.openSettlePanel=function(){var e=this.width,i=this.height;this.settlePanel||(this.settlePanel=new f.PicaExploreLogSettlePanel(this.scene,e,i,this.dpr,this.scale),this.settlePanel.setHandler(new c.Handler(this,this.onSettleHandler)),this.settlePanel.y=-20*this.dpr,this.add(this.settlePanel)),this.settlePanel.x=.5*e,this.settlePanel.y=.5*i,this.settlePanel.resize(e,i),this.settlePanel.visible=!0},PicaExploreLogPanel.prototype.hideSettlePanel=function(){this.settlePanel.visible=!1,this.settlePanel.destroy(),this.settlePanel=void 0},PicaExploreLogPanel.prototype.setTipsLayout=function(e){var i=e?this.scaleHeight-360*this.dpr:this.scaleHeight-240*this.dpr;this.expProgress.y=i,this.textCon.y=this.expProgress.y+55*this.dpr,this.expProgress.refreshMask(),this.textCon.refreshMask()},PicaExploreLogPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearTimer()},PicaExploreLogPanel.prototype.onProClickHandler=function(){this.render.renderEmitter(h.ModuleName.PICAEXPLORELOG_NAME+"_queryexplorehint"),this.setTimeProgress(3e4)},PicaExploreLogPanel.prototype.onGoOutHandler=function(){var e=this;c.UIHelper.createMessageBox(this.render,this,this.key,c.i18n.t("explore.exit"),c.i18n.t("explore.exittips"),(function(){e.render.renderEmitter(h.ModuleName.PICAEXPLORELOG_NAME+"_querygohome")}))},PicaExploreLogPanel.prototype.onSettleHandler=function(){this.render.renderEmitter(h.ModuleName.PICAEXPLORELOG_NAME+"_showexplorelist"),this.hideSettlePanel()},PicaExploreLogPanel.prototype.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=void 0)},PicaExploreLogPanel.prototype.playRotateTween=function(e,i,n){var a=this;this.scene&&(this.clearRotateTween(),this.rotateTween=this.scene.tweens.addCounter({from:e,to:i,ease:"Linear",duration:n,onUpdate:function(e,n){a.scene||(a.rotateTween.stop(),a.rotateTween.remove()),a.continueProgress.setProgress(i-n.value,i),n.value===i&&a.continueFadeOutAnimation()},onComplete:function(){a.clearRotateTween()}}))},PicaExploreLogPanel.prototype.clearRotateTween=function(){this.rotateTween&&(this.rotateTween.stop(),this.rotateTween.remove(),this.rotateTween=void 0)},PicaExploreLogPanel.prototype.continueFadeOutAnimation=function(){var e=this;this.scene&&this.continueProgress.visible&&(c.UIHelper.playAlphaTween(this.scene,this.continueProgress,1,0,500,"Linear",void 0,new c.Handler(this,(function(){e.scene&&(e.continueProgress.visible=!1,e.continueText.visible=!1,e.continueProgress.y=.5*-e.continueProgress.height,e.continueProgress.alpha=1)}))),c.UIHelper.playAlphaTween(this.scene,this.continueText,1,0,500,"Linear",void 0,new c.Handler(this,(function(){e.scene&&(e.continueText.visible=!1)}))))},PicaExploreLogPanel}(m.PicaBasePanel),x=function(e){function ExploreTimeProgress(i,n,a){var s=e.call(this,i,0,0,!1)||this;return s.proValue=0,s.dpr=n,s.zoom=a,s.init(),s.enable=!0,s}return _(ExploreTimeProgress,e),ExploreTimeProgress.prototype.setProgress=function(e){var i=360*e-90;this.barmask.clear(),this.barmask.fillStyle(16777215),this.barmask.slice(0,0,43*this.dpr/this.zoom,Phaser.Math.DegToRad(-90),Phaser.Math.DegToRad(i),!1),this.barmask.fillPath(),e>=1?this.lightIcon.setFrame("checkpoint_prompt_icon_light"):this.lightIcon.setFrame("checkpoint_prompt_icon_gray"),this.proValue=e},ExploreTimeProgress.prototype.refreshMask=function(){var e=this.getWorldTransformMatrix();this.barmask.setPosition(e.tx,e.ty)},ExploreTimeProgress.prototype.destroy=function(){e.prototype.destroy.call(this),this.barmask.destroy()},ExploreTimeProgress.prototype.setHandler=function(e){this.send=e},ExploreTimeProgress.prototype.init=function(){this.bg=this.scene.make.image({key:l.d.explorelog,frame:"checkpoint_prompt_bottom"}),this.lightbg=this.scene.make.image({key:l.d.explorelog,frame:"checkpoint_prompt_schedule"}),this.topbg=this.scene.make.image({key:l.d.explorelog,frame:"checkpoint_prompt_top"}),this.lightIcon=this.scene.make.image({key:l.d.explorelog,frame:"checkpoint_prompt_icon_gray"}),this.barmask=this.scene.make.graphics(void 0,!1),this.lightbg.mask=this.barmask.createGeometryMask(),this.add([this.bg,this.lightbg,this.topbg,this.lightIcon]),this.setSize(this.bg.width,this.bg.height),this.on(o.ClickEvent.Tap,this.onClickHandler,this)},ExploreTimeProgress.prototype.onClickHandler=function(){this.send&&this.proValue>=1&&this.send.run()},ExploreTimeProgress}(s.ButtonEventDispatcher),S=function(e){function ExploreTipsTextsCon(i,n,a,s,o){var h=e.call(this,i)||this;return h.tipsItems=[],h.tweens=[],h.texts=[],h.dpr=s,h.zoom=o,h.setSize(n,a),h.maskGrap=h.scene.make.graphics(void 0,!1),h.maskGrap.clear(),h.maskGrap.fillStyle(0,1),h.maskGrap.fillRect(.5*-n*o,.5*-a*o,n*o,a*o),h.mask=h.maskGrap.createGeometryMask(),h}return _(ExploreTipsTextsCon,e),ExploreTipsTextsCon.prototype.refreshMask=function(){var e=this.getWorldTransformMatrix();this.maskGrap.setPosition(e.tx,e.ty)},ExploreTipsTextsCon.prototype.setTextTips=function(e){for(var i=107*this.dpr,n=25*this.dpr,a=.5*-this.width+.5*i+7*this.dpr,s=0===this.tipsItems.length,h=0;h<e.length;h++){var m=e[h];if(this.texts[h]!==m&&""!==m){var f=new o.NineSliceButton(this.scene,0,0,i,n,l.d.explorelog,"checkpoint_aims_bg",m,this.dpr,this.scale,{left:10*this.dpr,right:10*this.dpr,top:0*this.dpr,bottom:0*this.dpr});f.setTextStyle(c.UIHelper.colorStyle("#FFEE5D",11*this.dpr)),f.x=a;var g=this.tipsItems[h];s||this.replaceAnimation(f,g),this.add(f),this.tipsItems[h]=f}else if(""===m){g=this.tipsItems[h];s||this.replaceAnimation(void 0,g)}a+=i+12*this.dpr,this.texts[h]=m}s&&this.firstAnimation()},ExploreTipsTextsCon.prototype.firstAnimation=function(){for(var e=0,i=0,n=this.tipsItems;i<n.length;i++){var a=n[i];a.y=.5*this.height,this.playtPosYTween(a,.5*this.height,0,600,void 0,e),e+=50}},ExploreTipsTextsCon.prototype.replaceAnimation=function(e,i){i&&(i.y=0,this.playtPosYTween(i,0,.5*-this.height,600*this.dpr,new c.Handler(this,(function(){i.destroy()}))),this.playAlphaTween(i,1,0,500)),e&&(e.y=.5*this.height,this.playtPosYTween(e,.5*this.height,0,600))},ExploreTipsTextsCon.prototype.playtPosYTween=function(e,i,n,a,s,o){var h=this;if(void 0===a&&(a=500),this.scene){var l=this.scene.tweens.add({targets:e,y:{from:i,to:n},ease:"Bounce.easeOut",duration:a,delay:o,onComplete:function(){l.stop(),l.remove(),h.removeTween(l),s&&s.run()}});this.tweens.push(l)}},ExploreTipsTextsCon.prototype.playAlphaTween=function(e,i,n,a,s,o){var h=this;if(void 0===a&&(a=500),this.scene){var l=this.scene.tweens.add({targets:e,alpha:{from:i,to:n},ease:"Linear",duration:a,delay:o,onComplete:function(){l.stop(),l.remove(),h.removeTween(l),s&&s.runWith(n)}});this.tweens.push(l)}},ExploreTipsTextsCon.prototype.removeTween=function(e){var i=this.tweens.indexOf(e);-1!==i&&this.tweens.splice(i,1)},ExploreTipsTextsCon}(Phaser.GameObjects.Container),j=function(e){function PicaExploreLogGuideText(i,n,a,s){var h=e.call(this,i)||this;return h.imageValues=[],h.mixWidth=0,h.mixHeight=0,h.setSize(n,a),h.mixWidth=n,h.mixHeight=a,h.dpr=s,h.background=h.scene.make.graphics(void 0,!1),h.title=h.scene.make.text({style:c.UIHelper.whiteStyle(s)}),h.title.setFontStyle("bold"),h.title.text=c.i18n.t("explore.exploretask"),h.title.x=10*s,h.title.y=8*s,h.close=new o.Button(i,l.d.explorelog,"checkpoint_end_aims_closed","checkpoint_end_aims_closed"),h.close.x=132*s,h.close.y=h.title.y,h.close.visible=!1,h.add([h.background,h.title,h.close]),h}return _(PicaExploreLogGuideText,e),PicaExploreLogGuideText.prototype.setGuideTexts=function(e){for(var i=0,n=this.imageValues;i<n.length;i++){n[i].visible=!1}for(var a=0;a<e.length;a++){var s=void 0,o=e[a];a<this.imageValues.length?s=this.imageValues[a]:((s=new g.ImageValue(this.scene,132*this.dpr,13*this.dpr,l.d.explorelog,"checkpoint_end_aims_undone",this.dpr)).setLayout(1),s.x=15*this.dpr,this.add(s),this.imageValues.push(s));var h=o.progress===o.totalSteps,c=h?"checkpoint_end_aims_done":"checkpoint_end_aims_undone",m=h?"#FFFFFF":"#FFEE5D",f=o.totalSteps?o.text+" ("+o.progress+"/"+o.totalSteps+")":o.text+" ("+o.progress+")";s.setFrameValue(f,l.d.explorelog,c),s.setTextStyle({color:m}),s.visible=!0}this.setLayoutTexts()},PicaExploreLogGuideText.prototype.setLayoutTexts=function(){for(var e=this.mixWidth,i=this.mixHeight,n=16*this.dpr,a=40*this.dpr,s=0,o=this.imageValues;s<o.length;s++){var h=o[s];if(!h.visible)break;h.y=a,a+=h.height+n,e<h.width&&(e=h.width+20*this.dpr)}i<a+20*this.dpr&&(i=a+20*this.dpr),this.background.clear(),this.background.fillStyle(0,.3),this.background.fillRoundedRect(0,0,e,i,{tl:0,tr:5*this.dpr,br:5*this.dpr,bl:0}),this.background.x=2*this.dpr},PicaExploreLogGuideText}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaFriendPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(2),l=n(790),c=n(0),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=Phaser.GameObjects.Container,g=function(e){function PicaFriendPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.uiManager=i,n.key=h.ModuleName.PICAFRIEND_NAME,n.mSubContanerMap=new Map,n.mSubContanerMap.set(h.FriendChannel.Blacklist,$),n.mSubContanerMap.set(h.FriendChannel.Search,Z),n.mSubContanerMap.set(h.FriendChannel.Notice,et),n}return m(PicaFriendPanel,e),PicaFriendPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.mBackGround.clear(),this.mBackGround.fillStyle(0,.66),this.mBackGround.fillRect(0,0,a,s),this.content.setPosition(a/2,s/2),this.friendContainer.parentContainer&&this.friendContainer.resize()},PicaFriendPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen(),this.friendContainer.setChannel(h.FriendChannel.Friends)):this.preload())},PicaFriendPanel.prototype.hide=function(){e.prototype.hide.call(this)},PicaFriendPanel.prototype.addListen=function(){this.mInitialized&&(this.closeBtn.on(s.ClickEvent.Tap,this.OnClosePanel,this),this.friendContainer.register(),this.friendContainer.on("shwoAddFriend",this.onShowAddFriendHandler,this),this.friendContainer.on(h.EventType.FETCH_FRIEND,this.onFetchFriendHandler,this),this.friendContainer.on(h.EventType.REQ_FRIEND_ATTRIBUTES,this.onReqFriendAttributesHandler,this),this.friendContainer.on(h.EventType.RENDERER_EVENT,this.onRendererEventHandler,this),this.friendContainer.on(h.EventType.REQ_PLAYER_LIST,this.onReqFriendListHandler,this))},PicaFriendPanel.prototype.removeListen=function(){this.mInitialized&&(this.closeBtn.off(s.ClickEvent.Tap,this.OnClosePanel,this),this.friendContainer.off("shwoAddFriend",this.onShowAddFriendHandler,this),this.friendContainer.off(h.EventType.FETCH_FRIEND,this.onFetchFriendHandler,this),this.friendContainer.off(h.EventType.REQ_FRIEND_ATTRIBUTES,this.onReqFriendAttributesHandler,this),this.friendContainer.off(h.EventType.RENDERER_EVENT,this.onRendererEventHandler,this),this.friendContainer.off(h.EventType.REQ_PLAYER_LIST,this.onReqFriendListHandler,this),this.friendContainer.unregister())},PicaFriendPanel.prototype.setFriend=function(e,i){this.mSubContanerMap.get(e)?this.mShowingSubContainer&&this.mShowingSubContainer.setItems(i):this.friendContainer&&this.friendContainer.setFriends(e,i)},PicaFriendPanel.prototype.updateFriend=function(e){this.mShowingSubContainer?this.mShowingSubContainer.updateFriends(e):this.friendContainer.updateFriends(e)},PicaFriendPanel.prototype.updateRelation=function(e){this.mShowingSubContainer&&this.mShowingSubContainer instanceof Z&&this.mShowingSubContainer.updateRelation(e)},PicaFriendPanel.prototype.filterById=function(e){this.mShowingSubContainer?this.mShowingSubContainer.filterById(e):this.friendContainer&&this.friendContainer.filterById(e)},PicaFriendPanel.prototype.fetchCurrentFriend=function(){this.friendContainer&&this.friendContainer.fetchCurrentFriend()},PicaFriendPanel.prototype.preload=function(){this.addAtlas(this.key,"friend_list/friend_list.png","friend_list/friend_list.json"),this.addAtlas(l.c.commonKey,l.d.commonUrl+".png",l.d.commonUrl+".json"),e.prototype.preload.call(this)},PicaFriendPanel.prototype.init=function(){var i=this.scale,n=this.scaleWidth,a=this.scaleHeight;this.mBackGround=this.scene.make.graphics(void 0,!1),this.mBackGround.clear(),this.mBackGround.fillStyle(7004927,.5),this.mBackGround.fillRect(0,0,n*i,a*i),this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.bg=this.scene.make.image({x:0,y:0,key:this.key,frame:"phone"}),this.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.content=this.scene.make.container(void 0,!1),this.content.setSize(this.bg.width,this.bg.height),this.content.add(this.bg),this.closeBtn=new s.Button(this.scene,l.c.commonKey,"close"),this.closeBtn.setPosition(.5*this.content.width-30*this.dpr,.5*(-this.bg.height+this.closeBtn.height)+25*this.dpr),this.friendContainer=new T(this.render.uiManager,this.bg.width,this.bg.height,this.key,this.dpr,this.scale),this.content.add([this.friendContainer,this.closeBtn]),this.add([this.mBackGround,this.content]),this.resize(n,a),e.prototype.init.call(this)},PicaFriendPanel.prototype.destroy=function(){this.friendContainer&&this.friendContainer.destroy(),this.mShowingSubContainer&&this.mShowingSubContainer.destroy(),e.prototype.destroy.call(this)},PicaFriendPanel.prototype.OnClosePanel=function(){this.render.renderEmitter(h.RENDER_PEER+this.key+"_hide")},PicaFriendPanel.prototype.onFetchFriendHandler=function(e){this.render.renderEmitter(h.EventType.FETCH_FRIEND,e)},PicaFriendPanel.prototype.onReqFriendAttributesHandler=function(e){this.render.renderEmitter(h.EventType.REQ_FRIEND_ATTRIBUTES,e)},PicaFriendPanel.prototype.onShowAddFriendHandler=function(e){this.mShowingSubContainer&&this.mShowingSubContainer.destroy();var i=this.mSubContanerMap.get(e);if(i){this.mShowingSubContainer=new i(this.uiManager,this.bg.width,this.bg.height,this.key,this.dpr,this.scale),this.mShowingSubContainer.register(),this.mShowingSubContainer.on("hide",this.onHideSearchHandler,this),this.mShowingSubContainer.on(h.EventType.REQ_FRIEND_ATTRIBUTES,this.onReqFriendAttributesHandler,this),this.mShowingSubContainer.on(h.EventType.RENDERER_EVENT,this.onRendererEventHandler,this),this.mShowingSubContainer.on(h.EventType.REQ_PLAYER_LIST,this.onReqFriendListHandler,this),this.mShowingSubContainer.on(h.EventType.REQ_FRIEND_RELATION,this.onReqFriendRelationHandler,this),this.content.remove(this.friendContainer),this.content.add(this.mShowingSubContainer),this.mShowingSubContainer.resize();var n=this.mShowingSubContainer.fetchEventName();n&&this.render.renderEmitter(n)}},PicaFriendPanel.prototype.onHideSearchHandler=function(){this.content.add(this.friendContainer),this.mShowingSubContainer&&(this.mShowingSubContainer.unregister(),this.mShowingSubContainer.destroy(),this.mShowingSubContainer=null),this.friendContainer.fetchCurrentFriend()},PicaFriendPanel.prototype.onReqFriendListHandler=function(e){this.render.renderEmitter(h.EventType.REQ_PLAYER_LIST,e)},PicaFriendPanel.prototype.onRendererEventHandler=function(e,i){e&&this.render.renderEmitter(e,i)},PicaFriendPanel.prototype.onReqFriendRelationHandler=function(e){if(e){var i=e.map((function(e){return e.id}));i.length>0&&this.render.renderEmitter(h.EventType.REQ_RELATION,i)}},PicaFriendPanel}(o.BasePanel),_=function(e){function FriendContainer(i,n,a,s,o,h){var l=e.call(this,i.scene,0,0)||this;return l.uiManager=i,l.key=s,l.dpr=o,l.uiScale=h,l.render=i.render,l.setSize(n,a),l}return m(FriendContainer,e),FriendContainer.prototype.draw=function(){var e=49*this.dpr-.5*this.height;this.titleText=this.scene.make.text({x:0,y:e,style:{fontSize:16*this.dpr,fontFamily:c.Font.DEFULT_FONT,color:"#0"}}).setOrigin(.5,0),this.titleText.setFontStyle("bold"),this.add(this.titleText)},FriendContainer.prototype.createGrideTable=function(e,i,n,a,o,l,c,m,f){var g=this,_={x:e,y:i,table:{width:n,height:a,columns:1,cellWidth:o,cellHeight:l,reuseCellContainer:!0,zoom:this.uiScale},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,i){var n=e.item;return null===i&&(i=c(g.scene,e)),n.type===h.FriendChannel.Null?e.setHeight(11*g.dpr):e.height!==l&&e.setHeight(l),i.setSize(e.width,e.height),i.setData({item:n}),i.setItemData(n),f&&f(e,i),i}},T=new s.GameGridTable(this.scene,_);return T.layout(),T.on("cellTap",(function(e){e&&m.runWith(e)})),this.add(T),T},FriendContainer.prototype.sortByName=function(e){return e.sort((function(e,i){return e.nickname.localeCompare(i.nickname,c.i18n.language)}))},FriendContainer.prototype.sortByCreate=function(e){return e.sort((function(e,i){return i.createAt-e.createAt}))},FriendContainer.prototype.sortByOnlien=function(e){return e.sort((function(e,i){var n=e.online?1:0,a=i.online?1:0;return e.type===h.FriendChannel.Menu||i.type===h.FriendChannel.Menu||e.type===h.FriendChannel.Null||i.type===h.FriendChannel.Null?1:a-n}))},FriendContainer.prototype.sortByLv=function(e){return e.sort((function(e,i){var n=e.lv?1:0,a=i.lv?1:0;return e.type===h.FriendChannel.Menu||i.type===h.FriendChannel.Menu||e.type===h.FriendChannel.Null||i.type===h.FriendChannel.Null?1:a-n}))},FriendContainer}(f),T=function(e){function MainContainer(i,n,a,s,o,h){var l=e.call(this,i,n,a,s,o,h)||this;return l.friendDatas=new Map,l.draw(),l}return m(MainContainer,e),MainContainer.prototype.register=function(){this.searchInput.on("textchange",this.onTextChangeHandler,this),this.searchBtn.on(s.ClickEvent.Tap,this.onSeachHandler,this),this.onlineCheckBox.on(s.ClickEvent.Tap,this.onCheckoutOnlineHandler,this),this.addFriendBtn.on(s.ClickEvent.Tap,this.onShowAddFriendHandler,this)},MainContainer.prototype.unregister=function(){this.searchInput.off("textchange",this.onTextChangeHandler,this),this.searchBtn.off(s.ClickEvent.Tap,this.onSeachHandler,this),this.onlineCheckBox.off(s.ClickEvent.Tap,this.onCheckoutOnlineHandler,this),this.addFriendBtn.off(s.ClickEvent.Tap,this.onShowAddFriendHandler,this)},MainContainer.prototype.resize=function(){this.friendTabel&&this.friendTabel.resetMask()},MainContainer.prototype.setChannel=function(e){this.channelGroup&&this.channelGroup.selectIndex(e)},MainContainer.prototype.updateFriends=function(e){var i=e.playerInfos,n=null,a=this.friendDatas.get(this.channelGroup.selectedIndex);if(a){for(var _loop_1=function(e){(n=a.find((function(i){return i.id===e.platformId})))&&(n.nickname=e.nickname,e.level&&(n.lv=e.level.level))},s=0,o=i;s<o.length;s++){_loop_1(o[s])}this.showFriend(this.channelGroup.selectedIndex,a)}},MainContainer.prototype.setFriends=function(e,i){for(var n,a=[],s=null,o=[],l=0,c=i;l<c.length;l++){var m=c[l];if(e===h.FriendChannel.Followes?(s=m.followed_user,n=h.FriendRelationEnum.Followed):e===h.FriendChannel.Fans?(s=m.user,n=h.FriendRelationEnum.Fans):(s=m,n=h.FriendRelationEnum.Friend),s){var f=0;s.createAt&&(f=Date.parse(s.createAt));var g=!1,_=m.game;_&&_.length>0&&m.nowtime-_[0].lastTime<=60&&(g=!0),a.push({type:e,id:s._id,nickname:s.nickname,relation:n,createAt:f,online:g}),o.push(s._id)}}this.friendDatas.set(e,a),o.length>0&&this.emit(h.EventType.REQ_PLAYER_LIST,o),this.showFriend(e,a)},MainContainer.prototype.showFriend=function(e,i){var n="",a="";switch(e){case h.FriendChannel.Friends:n=c.i18n.t("friendlist.title"),a=c.i18n.t("friendlist.friends"),i=[{type:h.FriendChannel.Menu,menuData:{type:h.FriendChannel.Notice}},{type:h.FriendChannel.Menu,menuData:{type:h.FriendChannel.Blacklist}},{type:h.FriendChannel.Null}].concat(i);break;case h.FriendChannel.Fans:n=c.i18n.t("friendlist.fans"),a=c.i18n.t("friendlist.fans");break;case h.FriendChannel.Followes:n=c.i18n.t("friendlist.follow"),a=c.i18n.t("friendlist.fans");break;case h.FriendChannel.Blacklist:n=c.i18n.t("friendlist.blacklist")}e!==h.FriendChannel.Friends&&this.sortByCreate(i),this.sortByOnlien(i),this.showingFriends=i,this.friendTabel.setItems(this.showingFriends),n&&this.titleText.setText(n);var s=this.friendDatas.get(this.channelGroup.selectedIndex);s&&this.friendNum.setText(a+": "+s.length),this.friendTabel&&this.friendTabel.setT(0)},MainContainer.prototype.filterById=function(e){if(this.showingFriends){var i=this.friendDatas.get(this.channelGroup.selectedIndex);i&&(i=i.filter((function(i){return i.id!==e}))),this.showingFriends=this.showingFriends.filter((function(i){return i.id!==e})),this.friendTabel.setItems(this.showingFriends)}},MainContainer.prototype.fetchCurrentFriend=function(){!this.channelGroup||this.channelGroup.selectedIndex<0||this.emit(h.EventType.FETCH_FRIEND,this.channelGroup.selectedIndex)},MainContainer.prototype.draw=function(){var i=this;e.prototype.draw.call(this);var n=.5*-this.height+17.33*this.dpr;this.friendNum=this.scene.make.text({x:0,y:n,text:"",style:{color:"#ffffff",fontSize:12*this.dpr,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(.5,0),this.add(this.friendNum),this.topContent=this.scene.make.container(void 0,!1),this.add(this.topContent);var a=new s.NineSlicePatch(this.scene,0,0,276*this.dpr,33*this.dpr,this.key,"min_pic_bg",{left:5*this.dpr,top:5*this.dpr,right:5*this.dpr,bottom:5*this.dpr});this.topContent.setPosition(0,73.67*this.dpr+.5*(a.height-this.height)),this.onlineCheckBox=new s.CheckBox(this.scene,this.key,"online_unchecked","online_checked"),this.onlineCheckBox.setPosition(12*this.dpr-.5*a.width,0);var l=this.scene.make.text({x:6.67*this.dpr+.5*this.onlineCheckBox.width,y:0,text:c.i18n.t("friendlist.olinetitle"),style:{fontSize:9.33*this.dpr,fontFamily:c.Font.DEFULT_FONT,color:"#0098D8"}}).setOrigin(0,.5);this.onlineCheckBox.add(l),this.searchBtn=new s.Button(this.scene,this.key,"search"),this.searchBtn.x=.5*a.width-39*this.dpr-.5*this.searchBtn.width,this.addFriendBtn=new s.Button(this.scene,this.key,"add"),this.addFriendBtn.x=.5*a.width-7.33*this.dpr-.5*this.addFriendBtn.width,this.searchInput=new tt(this.render.uiManager,{x:0,y:0,width:80*this.dpr,height:22*this.dpr,placeholder:c.i18n.t("friendlist.search_friends_notes"),fontSize:12*this.dpr+"px",color:"#666666"},this.key,this.dpr).setOrigin(0,.5),this.topContent.add([a,this.onlineCheckBox,this.searchInput,this.searchBtn,this.addFriendBtn]);var m={fontSize:14*this.dpr,fontFamily:c.Font.DEFULT_FONT},f=new s.TabButton(this.scene,this.key,"friend_default","friend_select",c.i18n.t("friendlist.friends"));f.y=.5*this.height-14*this.dpr-.5*f.height,f.setTextStyle(m);var g=new s.TabButton(this.scene,this.key,"fans_default","fans_select",c.i18n.t("friendlist.fans"));g.y=f.y,g.setTextStyle(m);var _=new s.TabButton(this.scene,this.key,"follow_default","follow_select",c.i18n.t("friendlist.follow"));_.y=f.y,_.setTextStyle(m),f.x=.5*(-g.width-f.width)-.67*this.dpr,_.x=.5*(g.width+_.width)+.67*this.dpr,this.add([f,g,_]),this.channelGroup=new o.CheckboxGroup,this.channelGroup.on("selected",this.onSelectChannelHandler,this),this.channelGroup.appendItemAll([f,g,_]),this.friendTabel=this.createGrideTable(0,this.topContent.y+this.topContent.height+380*this.dpr*.5+18*this.dpr,275*this.dpr,380*this.dpr,275*this.dpr,36*this.dpr,(function(e,n){var a=new x(i.render.uiManager,0,0,i.key,i.dpr);return a.on(h.EventType.REQ_FRIEND_ATTRIBUTES,i.onFtechPlayerHandler,i),a.on(h.EventType.RENDERER_EVENT,i.onRendererEventHandler,i),a}),new c.Handler(this,this.onSelectItemHandler))},MainContainer.prototype.onRendererEventHandler=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.emit(h.EventType.RENDERER_EVENT,e,i)},MainContainer.prototype.onFtechPlayerHandler=function(e){void 0!==e.lv&&this.emit(h.EventType.REQ_FRIEND_ATTRIBUTES,e.id),this.searchInput.setBlur()},MainContainer.prototype.onSelectChannelHandler=function(e){this.fetchCurrentFriend()},MainContainer.prototype.onSelectItemHandler=function(e){var i=e.getData("item");i&&i.menuData&&i.type===h.FriendChannel.Menu&&this.emit("shwoAddFriend",i.menuData.type)},MainContainer.prototype.onCheckoutOnlineHandler=function(){var e=this.showingFriends;this.onlineCheckBox.selected&&(e=this.showingFriends.slice(0).filter((function(e){return!0===e.online})));this.friendTabel.setItems(e)},MainContainer.prototype.onShowAddFriendHandler=function(){this.emit("shwoAddFriend",h.FriendChannel.Search),this.searchInput.setBlur()},MainContainer.prototype.onSeachHandler=function(){var e=this.searchInput.text;if(e){var i=this.showingFriends.slice(0);i=i.filter((function(i){if(i.nickname){var n=i.nickname.toLowerCase(),a=e.toLowerCase();if(n.indexOf(a)>-1)return!0}return!1})),this.friendTabel.setItems(i)}else this.friendTabel.setItems(this.showingFriends)},MainContainer.prototype.onTextChangeHandler=function(){this.onSeachHandler()},MainContainer}(_),x=function(e){function PicFriendItem(i,n,a,s,o){var h=e.call(this,i.scene,n,a)||this;return h.mDpr=0,h.render=i.render,h.setSize(275*o,36*o),h.mDpr=o,h.mKey=s,h}return m(PicFriendItem,e),PicFriendItem.prototype.setItemData=function(e){this.itemData=e,this.currnetType!==e.type&&(this.currnetType=e.type,this.currentRender&&(this.currentRender.destroy(),this.currentRender=null),this.currentRender=this.createRenderer(e.type)),this.currentRender&&this.currentRender.setItemData(e)},PicFriendItem.prototype.createAddBtn=function(e){var i=48*this.mDpr,n=24*this.mDpr;return new s.NineSliceButton(this.scene,.5*(this.width-i)-18*this.mDpr,0,i,n,l.c.commonKey,"yellow_btn_normal_s",c.i18n.t("common.add"),this.mDpr,this.scale,{left:10*this.mDpr,top:10*this.mDpr,right:10*this.mDpr,bottom:10*this.mDpr})},PicFriendItem.prototype.onHeadhandler=function(){this.emit(h.EventType.REQ_FRIEND_ATTRIBUTES,this.itemData)},PicFriendItem.prototype.createRenderer=function(e){switch(e){case h.FriendChannel.Fans:case h.FriendChannel.Search:case h.FriendChannel.Friends:case h.FriendChannel.Followes:case h.FriendChannel.Blacklist:return new Y(this.scene,this);case h.FriendChannel.Null:return new q(this.scene,this);case h.FriendChannel.Menu:return new S(this.scene,this);case h.FriendChannel.Notice:return new j(this.scene,this)}},Object.defineProperty(PicFriendItem.prototype,"key",{get:function(){return this.mKey},enumerable:!1,configurable:!0}),Object.defineProperty(PicFriendItem.prototype,"dpr",{get:function(){return this.mDpr},enumerable:!1,configurable:!0}),PicFriendItem}(f),S=function(){function MenuRenderer(e,i){this.scene=e,this.owner=i,this.icon=this.scene.make.image({x:7.44*this.owner.dpr-.5*this.owner.width,key:i.key,frame:"black_list"},!1).setOrigin(0,.5),this.text=this.scene.make.text({x:this.icon.x+this.icon.width+9.67*i.dpr,style:{fontSize:9.33*i.dpr,fontFamily:c.Font.DEFULT_FONT,color:"#000000"}}).setOrigin(0,.5),this.arrow=this.scene.make.image({x:.5*i.width-20*i.dpr,key:i.key,frame:"arrow"}).setOrigin(1,.5),this.owner.add([this.icon,this.text,this.arrow])}return MenuRenderer.prototype.setItemData=function(e){var i=e.menuData;if(i)switch(i.type){case h.FriendChannel.Notice:this.icon.setFrame("notice"),this.text.text=c.i18n.t("friendlist.notice");break;case h.FriendChannel.Blacklist:this.icon.setFrame("black_list"),this.text.text=c.i18n.t("friendlist.blacklist")}},MenuRenderer.prototype.destroy=function(){this.icon&&this.icon.destroy(),this.text&&this.text.destroy(),this.arrow&&this.arrow.destroy()},MenuRenderer}(),j=function(){function NoticeRenderer(e,i){this.scene=e,this.owner=i,this.icon=this.scene.make.image({x:7.44*this.owner.dpr-.5*this.owner.width,key:i.key,frame:"notice_icon"},!1).setOrigin(0,.5),this.text=new s.BBCodeText(this.scene,this.icon.x+this.icon.width+9.67*i.dpr,0,"",{fontSize:9.33*i.dpr,fontFamily:c.Font.DEFULT_FONT,color:"#000000"}),this.text.setOrigin(0,.5),this.owner.add([this.icon,this.text])}return NoticeRenderer.prototype.setItemData=function(e){this.text.setText("[color=#00dffc]"+e.nickname+"[/color] "+c.i18n.t("friendlist.followed_you"))},NoticeRenderer.prototype.destroy=function(){this.icon&&this.icon.destroy(),this.text&&this.text.destroy()},NoticeRenderer}(),q=function(){function NullRenderer(e,i){this.owner=i,this.graphics=e.make.graphics(void 0,!1),this.graphics.fillStyle(16119285),this.graphics.fillRect(.5*-this.owner.width,-5.5*i.dpr,this.owner.width,this.owner.height),i.add(this.graphics)}return NullRenderer.prototype.setItemData=function(e){},NullRenderer.prototype.destroy=function(){this.graphics&&this.graphics.destroy()},NullRenderer}(),Y=function(){function FriendRenderer(e,i){this.scene=e,this.owner=i,this.icon=e.make.image({x:7.44*i.dpr-.5*i.width,key:i.key,frame:"offline_head"}).setOrigin(0,.5).setInteractive().on("pointerup",this.onHeadhandler,this),this.icon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.nameText=e.make.text({x:this.icon.x+this.icon.width+9.67*i.dpr,y:.5*-this.icon.height+1*i.dpr,style:{fontSize:10*i.dpr,fontFamily:c.Font.DEFULT_FONT,color:"#6F75FF"}},!1),this.level=e.make.text({x:this.nameText.x,y:this.nameText.y+18*i.dpr,text:"",style:{fontSize:8*i.dpr,fontFamily:c.Font.DEFULT_FONT,color:"#6F75FF"}}),this.addBtn=this.createAddBtn(c.i18n.t("friendlist.follow")),this.addBtn.on(s.ClickEvent.Tap,this.onAddHandler,this),this.owner.add(this.addBtn),i.add([this.icon,this.nameText,this.level,this.addBtn])}return FriendRenderer.prototype.setItemData=function(e){this.itemData=e,this.nameText.text=e.nickname,this.icon.setFrame(e.online?"head":"offline_head");var i=e.lv?c.i18n.t("friendlist.lv")+"："+e.lv:"";this.level.setText(i),this.curRelation!==e.relation&&(this.curRelation=e.relation,this.updateRelation())},FriendRenderer.prototype.destroy=function(){if(this.owner)for(var e=this.owner.list;e.length;)e[e.length-1].destroy()},FriendRenderer.prototype.updateRelation=function(){this.curRelation&&this[this.curRelation]?this[this.curRelation]():(this.addBtn.visible=!1,this.friendEvnet=null)},FriendRenderer.prototype.fans=function(){this.addBtn.visible=!0,this.addBtn.setText(c.i18n.t("friendlist.follow")),this.friendEvnet=h.EventType.FOLLOW},FriendRenderer.prototype.followed=function(){this.addBtn.visible=!0,this.addBtn.setText(c.i18n.t("friendlist.unfollow")),this.friendEvnet=h.EventType.UNFOLLOW},FriendRenderer.prototype.blacklist=function(){this.addBtn.visible=!0,this.addBtn.setText(c.i18n.t("friendlist.remove")),this.friendEvnet=h.EventType.REMOVE_FROM_BLACKLIST},FriendRenderer.prototype.null=function(){this.fans()},FriendRenderer.prototype.createAddBtn=function(e){var i=this.owner,n=i.width,a=(i.height,i.key,i.dpr),o=48*a,h=24*a,m=new s.NineSliceButton(this.scene,.5*(n-o)-18*a,0,o,h,l.c.commonKey,"yellow_btn_normal_s",e,a,1,{left:10*a,top:6*a,right:10*a,bottom:6*a});return m.setTextStyle({fontSize:9*a,fontFamily:c.Font.DEFULT_FONT}),m},FriendRenderer.prototype.onHeadhandler=function(){this.owner.emit(h.EventType.REQ_FRIEND_ATTRIBUTES,this.itemData)},FriendRenderer.prototype.onAddHandler=function(){this.friendEvnet&&this.itemData&&this.owner.emit(h.EventType.RENDERER_EVENT,this.friendEvnet,this.itemData.id)},FriendRenderer}(),X=function(e){function SubFriendContainer(i,n,a,s,o,h){var l=e.call(this,i,n,a,s,o,h)||this;return l.draw(),l}return m(SubFriendContainer,e),SubFriendContainer.prototype.register=function(){this.backBtn.on(s.ClickEvent.Tap,this.onBackHandler,this)},SubFriendContainer.prototype.unregister=function(){this.backBtn.off(s.ClickEvent.Tap,this.onBackHandler,this)},SubFriendContainer.prototype.resize=function(){this.gridTable&&this.gridTable.resetMask()},SubFriendContainer.prototype.setItems=function(e){this.items=e,this.gridTable&&this.gridTable.setItems(e)},SubFriendContainer.prototype.filterById=function(e){!this.items||this.items.length<1||(this.items&&(this.items=this.items.filter((function(i){return i.id!==e}))),this.gridTable&&this.gridTable.setItems(this.items))},SubFriendContainer.prototype.updateFriends=function(e){},SubFriendContainer.prototype.fetchEventName=function(){return""},SubFriendContainer.prototype.destroy=function(){this.unregister(),this.gridTable&&this.gridTable.destroy(),e.prototype.destroy.call(this)},SubFriendContainer.prototype.draw=function(){var i=this;e.prototype.draw.call(this),this.backBtn=new s.Button(this.scene,this.key,"back"),this.backBtn.setPosition(.5*(-this.width+this.backBtn.width)+21.67*this.dpr,.5*(-this.height+this.backBtn.height)+47*this.dpr),this.gridTable=this.createGrideTable(0,18*this.dpr,275*this.dpr,400*this.dpr,275*this.dpr,36*this.dpr,(function(){var e=new x(i.uiManager,0,0,i.key,i.dpr);return e.on(h.EventType.REQ_FRIEND_ATTRIBUTES,i.onFtechPlayerHandler,i),e.on(h.EventType.RENDERER_EVENT,i.onRendererEventHandler,i),e}),new c.Handler(this.onItemClickHandler)),this.add([this.backBtn])},SubFriendContainer.prototype.onBackHandler=function(){this.emit("hide")},SubFriendContainer.prototype.onItemClickHandler=function(){},SubFriendContainer.prototype.onFtechPlayerHandler=function(e){this.emit(h.EventType.REQ_FRIEND_ATTRIBUTES,e.id)},SubFriendContainer.prototype.onRendererEventHandler=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.emit(h.EventType.RENDERER_EVENT,e,i)},SubFriendContainer}(_),Z=function(e){function SearchContainer(i,n,a,s,o,l){var c=e.call(this,i,n,a,s,o,l)||this;return c.friendType=h.FriendChannel.Search,c}return m(SearchContainer,e),SearchContainer.prototype.setItems=function(e){if(e){for(var i=[],n=0,a=e;n<a.length;n++){var s=a[n],o=s.platformId,l=s.nickname,c=s.level;i.push({type:this.friendType,nickname:l,id:o,lv:c.level})}this.emit(h.EventType.REQ_FRIEND_RELATION,i),this.items=i}},SearchContainer.prototype.updateRelation=function(e){if(this.items){for(var _loop_2=function(e){i.items.find((function(i){return i.id===e.id})).relation=e.relation},i=this,n=0,a=e;n<a.length;n++){_loop_2(a[n])}this.updateFriends(this.items)}},SearchContainer.prototype.updateFriends=function(e){this.items=e,this.gridTable&&this.gridTable.setItems(e)},SearchContainer.prototype.draw=function(){e.prototype.draw.call(this),this.titleText.setText(c.i18n.t("friendlist.search"));var i=new s.NineSlicePatch(this.scene,0,0,276*this.dpr,33*this.dpr,this.key,"min_pic_bg",{left:5*this.dpr,top:5*this.dpr,right:5*this.dpr,bottom:5*this.dpr});i.setPosition(0,73.67*this.dpr+.5*(i.height-this.height)),this.searchInput=new tt(this.uiManager,{x:0,y:0,width:80*this.dpr,height:22*this.dpr,placeholder:c.i18n.t("friendlist.search_friends_notes"),fontSize:12*this.dpr+"px",color:"#666666"},this.key,this.dpr).setOrigin(0,.5),this.searchInput.setPosition(0,i.y),this.searchInput.on("search",this.onSearchHandler,this),this.gridTable.y=i.height,this.gridTable.layout(),this.add([i,this.searchInput])},SearchContainer.prototype.onSearchHandler=function(e){this.emit(h.EventType.RENDERER_EVENT,h.EventType.SEARCH_FRIEND,e),this.resize()},SearchContainer}(X),$=function(e){function BlackContainer(i,n,a,s,o,l){var c=e.call(this,i,n,a,s,o,l)||this;return c.friendType=h.FriendChannel.Blacklist,c}return m(BlackContainer,e),BlackContainer.prototype.draw=function(){e.prototype.draw.call(this),this.titleText.setText(c.i18n.t("friendlist.blacklist"))},BlackContainer.prototype.setItems=function(i){if(i){for(var n=[],a=[],s=null,o=0,l=i;o<l.length;o++){(s=l[o].ban_user)&&(a.push(s._id),n.push({type:h.FriendChannel.Blacklist,id:s._id,nickname:s.nickname,relation:h.FriendRelationEnum.Blacklist}))}e.prototype.setItems.call(this,n),a.length>0&&this.emit(h.EventType.REQ_PLAYER_LIST,a)}},BlackContainer.prototype.updateFriends=function(e){for(var i=e.playerInfos,n=null,_loop_3=function(e){(n=a.items.find((function(i){return i.id===e.platformId})))&&(n.nickname=e.nickname,e.level&&(n.lv=e.level.level))},a=this,s=0,o=i;s<o.length;s++){_loop_3(o[s])}this.gridTable&&this.gridTable.setItems(this.items)},BlackContainer.prototype.fetchEventName=function(){return h.EventType.REQ_BLACKLIST},BlackContainer}(X),tt=function(e){function SearchInput(i,n,a,o){var h=e.call(this,i.scene,n)||this;h.render=i.render,h.searchBtn=new s.Button(h.scene,a,"search_blue"),h.searchBtn.x=n.width+4*o+.5*h.searchBtn.width,h.searchBtn.on(s.ClickEvent.Tap,h.onSearchHandler,h),h.add(h.searchBtn);var l=i.scene.make.graphics(void 0,!1);return l.fillStyle(16777215),l.fillRoundedRect(-5*o,.5*-n.height,n.width+14*o+h.searchBtn.width,n.height,.5*n.height),h.addAt(l,0),h.setOrigin(0,.5),h}return m(SearchInput,e),SearchInput.prototype.onSearchHandler=function(){this.setBlur(),this.emit("search",this.text)},SearchInput}(o.LabelInput),et=function(e){function NoticeContainer(i,n,a,s,o,l){var c=e.call(this,i,n,a,s,o,l)||this;return c.friendType=h.FriendChannel.Search,c}return m(NoticeContainer,e),NoticeContainer.prototype.draw=function(){e.prototype.draw.call(this),this.titleText.setText(c.i18n.t("friendlist.notice"))},NoticeContainer.prototype.setItems=function(i){if(i){for(var n=[],a=[],s=Date.now(),o=0,l=i;o<l.length;o++){var c=l[o];if(c.created_at)if(s-Date.parse(c.created_at)<2592e5){var m=c.user;m&&(n.push({type:h.FriendChannel.Notice,id:m._id,nickname:m.nickname}),a.push(m._id))}}e.prototype.setItems.call(this,n),a.length>0&&this.emit(h.EventType.REQ_PLAYER_LIST,a)}},NoticeContainer.prototype.updateFriends=function(e){for(var i=e.playerInfos,n=null,_loop_4=function(e){(n=a.items.find((function(i){return i.id===e.platformId})))&&(n.nickname=e.nickname,e.level&&(n.lv=e.level.level))},a=this,s=0,o=i;s<o.length;s++){_loop_4(o[s])}this.gridTable&&this.gridTable.setItems(this.items)},NoticeContainer.prototype.fetchEventName=function(){return h.EventType.REQ_NEW_FANS},NoticeContainer}(X);!function(e){function NavigateContaienr(i,n,a,s,o,h){var l=e.call(this,i,n,a)||this;l.setSize(s,o),l.chars=[];for(var m=0;m<26;m++)l.chars.push(String.fromCharCode(m+65));l.chars.push("#"),l.texts=[];var f=o/l.chars.length,g={color:"#0",fontSize:8*h,fontFamily:c.Font.DEFULT_FONT},_=0,T=0;for(m=0;m<l.chars.length;m++){var x=l.scene.make.text({y:m*f-.5*l.height,text:l.chars[m],style:g}).setOrigin(.5);l.texts[m]=x,_||(_=x.width+8*h,T=x.height+2*h)}return l.selected=l.scene.make.graphics(void 0,!1),l.selected.fillStyle(3115002),l.selected.fillRect(.5*-_,.5*-T,_,T),l.add(l.selected),l.selected.x=l.texts[0].x,l.selected.y=l.texts[0].y,l.add(l.texts),l}m(NavigateContaienr,e),NavigateContaienr.prototype.checkSlider=function(e){if(e){this.selected.visible=!0;for(var i=0;i<this.chars.length;i++)if(e.localeCompare(this.chars[i])>-1)return this.selected.x=this.texts[i].x,void(this.selected.y=this.texts[i].y)}else this.selected.visible=!1}}(f)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaFurnitureComposePanel",(function(){return _}));var a,s=n(788),o=n(789),h=n(791),l=n(790),c=n(2),m=n(0),f=n(792),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaFurnitureComposePanel(i){var n=e.call(this,i)||this;return n.mSelectedItemData=[],n.subCategoryType=1,n.atlasNames=[l.d.uicommon,l.d.effectcommon],n.key=c.ModuleName.PICAFURNITURECOMPOSE_NAME,n}return g(PicaFurnitureComposePanel,e),PicaFurnitureComposePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.mBackground.x=.5*a,this.mBackground.y=.5*s,this.topBackground.x=.5*a,this.topBackground.y=.5*this.topBackground.height;var o=79*this.dpr,h=s-this.mPropGrid.height-.5*o-47*this.dpr;this.furiAnimation.x=.5*a,this.furiAnimation.y=.5*h+7*this.dpr,this.mCategoryCon.setSize(a,79*this.dpr),this.mCategoryCon.y=h,this.mCategoryCon.x=.5*a,this.mCategoriesBar.y=40*this.dpr,this.mCategoriesBar.x=.5*-a,this.mCategoriesBar.clear(),this.mCategoriesBar.fillStyle(10841086),this.mCategoriesBar.fillRect(0,0,a,40*this.dpr),this.mCategoriesBar.fillStyle(8539348),this.mCategoriesBar.fillRect(0,40*this.dpr,a,3*this.dpr),this.composeBtn.x=a-this.composeBtn.width/2-20*this.dpr,this.composeBtn.y=this.mCategoryCon.y-this.composeBtn.height/2+35*this.dpr,this.mPropGridBg.clear(),this.mPropGridBg.fillStyle(13531891),this.mPropGridBg.fillRect(0,0,this.mPropGrid.width,this.mPropGrid.height+10*this.dpr),this.mPropGridBg.y=s-this.mPropGrid.height-4*this.dpr,this.mPropGrid.x=a/2+3*this.dpr,this.mPropGrid.y=s-.5*this.mPropGrid.height,this.mPropGrid.layout(),this.mPropGrid.resetMask(),this.mCategoryScroll.refreshMask(),this.setSize(a,s),this.setInteractive()},PicaFurnitureComposePanel.prototype.setCategories=function(){var e=[{name:m.i18n.t("furnicompose.onestar"),value:1},{name:m.i18n.t("furnicompose.twostar"),value:2},{name:m.i18n.t("furnicompose.threestar"),value:3},{name:m.i18n.t("furnicompose.fourstar"),value:4}];this.mPreCategoryBtn=null,this.mSelectedCategeories=null;var i=60*this.dpr,n=41*this.dpr,a=[];this.mCategoryScroll.clearItems();for(var s=0;s<e.length;s++){var h=new o.TextButton(this.scene,this.dpr,1,e[s].name,0,0);h.setData("item",e[s]),h.setSize(i,n),this.mCategoryScroll.addItem(h),h.setChangeColor("#FFE63C"),a[s]=h,h.setFontSize(16*this.dpr),h.setFontStyle("bold")}this.mCategoryScroll.setAlign(1),this.mCategoryScroll.Sort(),this.mCategoryScroll.refreshMask(),a.length>1&&this.onSelectSubCategoryHandler(a[0])},PicaFurnitureComposePanel.prototype.setGridProp=function(e){this.setProps(e),this.mPropGrid.setT(0),this.updateSelectItemDatas(e)},PicaFurnitureComposePanel.prototype.updateGridProp=function(e){this.setProps(e),this.updateSelectItemDatas(e)},PicaFurnitureComposePanel.prototype.setProps=function(e){var i=(e=e||[]).length;i<24&&(e=e.concat(new Array(24-i))),this.mPropGrid.setItems(e)},PicaFurnitureComposePanel.prototype.setStarData=function(e){this.starCount=e,this.mInitialized&&this.starvalue.setText(e+"")},PicaFurnitureComposePanel.prototype.updateSelectItemDatas=function(e){for(var i=[],n=0,a=this.mSelectedItemData;n<a.length;n++)for(var s=a[n],o=0,h=e;o<h.length;o++){var l=h[o];s&&l.indexId===s.indexId&&i.push(l)}this.mSelectedItemData.length=0,this.mSelectedItemData=i},PicaFurnitureComposePanel.prototype.setComposeResult=function(e){},PicaFurnitureComposePanel.prototype.addListen=function(){this.mInitialized&&(this.mCloseBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this),this.composeBtn.on(s.ClickEvent.Tap,this.onComposeBtnHandler,this))},PicaFurnitureComposePanel.prototype.removeListen=function(){this.mInitialized&&(this.mCloseBtn.off(s.ClickEvent.Tap,this.onCloseHandler,this),this.composeBtn.off(s.ClickEvent.Tap,this.onComposeBtnHandler,this))},PicaFurnitureComposePanel.prototype.destroy=function(){this.mCategoryScroll&&this.mCategoryScroll.destroy(),this.mPropGrid&&this.mPropGrid.destroy(),e.prototype.destroy.call(this)},PicaFurnitureComposePanel.prototype.queryRefreshPackage=function(e){this.queryPackege(e)},PicaFurnitureComposePanel.prototype.onInitialized=function(){this.starCount&&this.starvalue.setText(this.starCount+"")},PicaFurnitureComposePanel.prototype.init=function(){var i=this,n=this.scaleWidth,a=this.scaleHeight;this.mBackground=new h.CommonBackground(this.scene,0,0,n,a,l.d.effectcommon,"synthetic_bg",13204211),this.topBackground=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_bg_stripe"}),this.mCategoryCon=this.scene.make.container(void 0,!1),this.mCategoryCon.setSize(n,295*this.dpr),this.mCategoryCon.y=a-this.mCategoryCon.height,this.mCategoriesBar=this.scene.make.graphics(void 0,!1),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.mCloseBtn=new o.ButtonEventDispatcher(this.scene,0,0),this.mCloseBtn.setSize(100*this.dpr,40*this.dpr),this.mCloseBtn.enable=!0,this.mCloseBtn.x=.5*this.mCloseBtn.width+10*this.dpr,this.mCloseBtn.y=45*this.dpr;var c=this.scene.make.image({key:l.d.uicommon,frame:"back_arrow"});c.x=.5*-this.mCloseBtn.width+.5*c.width+10*this.dpr;var f=this.scene.make.text({text:"",style:m.UIHelper.whiteStyle(this.dpr,18)}).setOrigin(0,.5);f.text=m.i18n.t("compose.title"),f.x=c.x+.5*c.width+10*this.dpr,this.mCloseBtn.add([c,f]),this.furiAnimation=new T(this.scene,this.dpr,this.scale),this.furiAnimation.setHandler(new m.Handler(this,this.onFuriComposeAnimationHandler));var g=new s.NineSlicePatch(this.scene,0,-this.dpr,80*this.dpr,28*this.dpr,l.d.uicommon,"home_assets_bg",{left:17*this.dpr,top:0*this.dpr,right:17*this.dpr,bottom:0*this.dpr});g.x=.5*-g.width,this.starvalue=new h.ImageValue(this.scene,60*this.dpr,26*this.dpr,l.d.uicommon,"Recast_pica star_big",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:m.Font.NUMBER}),this.starvalue.setLayout(1),this.starvalue.x=g.x-.5*g.width+22*this.dpr,this.starCountCon=this.scene.make.container(void 0,!1),this.starCountCon.setSize(g.width,g.height),this.starCountCon.add([g,this.starvalue]),this.starCountCon.x=n-20*this.dpr,this.starCountCon.y=this.mCloseBtn.y;var _=100*this.dpr,x=40*this.dpr,S=n-_/2-20*this.dpr,j=this.mCategoryCon.y-25*this.dpr;this.composeBtn=this.createNineButton(S+100*this.dpr,j,_,x,l.d.uicommon,"yellow_btn",m.i18n.t("compose.title"),"#996600"),this.mCategoryScroll=new s.GameScroller(this.scene,{x:0,y:60*this.dpr,width:n,height:41*this.dpr,zoom:this.scale,orientation:1,dpr:this.dpr,space:28*this.dpr,selfevent:!0,cellupCallBack:function(e){i.onSelectSubCategoryHandler(e)}}),this.mPropGridBg=this.scene.make.graphics(void 0,!1),this.mCategoryCon.add([this.mCategoriesBar,this.mCategoryScroll]),this.add([this.mBackground,this.topBackground,this.mPropGridBg,this.mCloseBtn,this.furiAnimation,this.starCountCon,this.mCategoryCon,this.composeBtn]);var q=this.scene.textures.getFrame(l.d.uicommon,"bag_icon_common_bg"),Y=q.width+9*this.dpr,X=q.height+9*this.dpr,Z={x:0,y:0,table:{width:n,height:231*this.dpr,columns:3,cellWidth:Y,cellHeight:X,reuseCellContainer:!0,zoom:this.scale,mask:!1},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;return null===n&&(n=new h.ItemButton(a,l.d.effectcommon,"synthetic_icon_bg",i.dpr,i.scale,!1)),n.setData({item:s}),n.setItemData(s,!0),n}};this.mPropGrid=new s.GameGridTable(this.scene,Z),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(e){e&&i.onSelectItemHandler(e)})),this.add(this.mPropGrid),this.resize(0,0),e.prototype.init.call(this)},PicaFurnitureComposePanel.prototype.createNineButton=function(e,i,n,a,o,h,l,c){var f=new s.NineSliceButton(this.scene,e,i,n,a,o,h,l,this.dpr,1,{left:14*this.dpr,top:14*this.dpr,right:15*this.dpr,bottom:14*this.dpr});return l&&(f.setTextStyle({color:c,fontSize:16*this.dpr,fontFamily:m.Font.DEFULT_FONT}),f.setFontStyle("bold")),f},PicaFurnitureComposePanel.prototype.onSelectSubCategoryHandler=function(e){var i=e.getData("item");i&&(this.mPreCategoryBtn&&this.mPreCategoryBtn.changeNormal(),e.changeDown(),this.mSelectedCategeories=i,this.subCategoryType=i.value,this.queryPackege(!1),this.mPreCategoryBtn=e),this.mPropGrid.setT(0),this.furiAnimation.clearItemDatas(!0),this.furiAnimation.setStarType(this.subCategoryType)},PicaFurnitureComposePanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaFurnitureComposePanel.prototype.queryPackege=function(e){this.mSelectedCategeories&&this.render.renderEmitter(this.key+"_queryfuripackage",{type:this.subCategoryType,update:e})},PicaFurnitureComposePanel.prototype.onSelectItemHandler=function(e){var i=e.getData("item");i&&this.checkSelectItemDatas(i,!0)},PicaFurnitureComposePanel.prototype.onComposeBtnHandler=function(){if(this.mSelectedItemData&&5===this.mSelectedItemData.length){if(this.starCount<this.subCategoryType){var e={text:[{text:m.i18n.t("furnicompose.starpicatips"),node:void 0}]};return void this.render.mainPeer.showMediator(c.ModuleName.PICANOTICE_NAME,!0,e)}for(var i=[],n=0,a=this.mSelectedItemData;n<a.length;n++){e=a[n];i.push(e.id)}this.render.renderEmitter(this.key+"_queryfuricompose",i),this.furiAnimation.playComposeAnimation(),this.mSelectedItemData.length=0}else{e={text:[{text:m.i18n.t("furnicompose.selecttips"),node:void 0}]};this.render.mainPeer.showMediator(c.ModuleName.PICANOTICE_NAME,!0,e)}},PicaFurnitureComposePanel.prototype.checkSelectItemDatas=function(e,i){if(!i||5!==this.mSelectedItemData.length){for(var n=-1,a=0;a<this.mSelectedItemData.length;a++){this.mSelectedItemData[a].indexId===e.indexId&&(n=a)}if(i)e.count>0&&(this.mSelectedItemData.push(e),this.furiAnimation.setItemData(e,this.subCategoryType),e.count--);else if(-1!==n)this.mSelectedItemData.splice(n,1)[0].count++;this.mPropGrid.refresh()}},PicaFurnitureComposePanel.prototype.onFuriComposeAnimationHandler=function(e,i){"remove"===e&&this.checkSelectItemDatas(i,!1)},PicaFurnitureComposePanel}(f.PicaBasePanel),T=function(e){function FuriComposeAnimation(i,n,a){var s=e.call(this,i)||this;return s.starImgList=[],s.itemList=[],s.indexeds=[0,0,0,0,0],s.tweens=[],s.canPlay=!1,s.dpr=n,s.zoom=a,s.init(),s.setSize(s.bgring1.width,s.bgring1.height),s}return g(FuriComposeAnimation,e),FuriComposeAnimation.prototype.setHandler=function(e){this.send=e},FuriComposeAnimation.prototype.setStarType=function(e){this.starType=e,this.bgstarLev.setFrame("synthetic_center_star"+(e+1)),this.spendStarTex.text=m.i18n.t("furnicompose.spendstar",{name:e}),this.bgstarLev.visible=!0},FuriComposeAnimation.prototype.setItemData=function(e,i){this.starType=i;for(var n=-1,a=0;a<this.indexeds.length;a++){if(0===this.indexeds[a])-1===n&&(n=a);else this.itemList[a].itemData.indexId===e.indexId&&0}-1!==n&&e.count>0&&(this.indexeds[n]=1,this.itemList[n].setItemData(e),this.starImgList[n].visible=!0,this.playAnimation());this.displayStarImg()},FuriComposeAnimation.prototype.removeItemData=function(e){this.indexeds[e]=0;var i=this.itemList[e];i.itemData&&(this.send&&this.send.runWith(["remove",i.itemData]),i.setItemData(void 0)),this.displayStarImg();for(var n=!1,a=0,s=this.indexeds;a<s.length;a++){1===s[a]&&(n=!0)}n?this.playAnimation():this.stopAnimation()},FuriComposeAnimation.prototype.clearItemDatas=function(e){for(var i=0;i<this.indexeds.length;i++){this.indexeds[i]=0;var n=this.itemList[i];n.itemData&&(e&&this.send&&this.send.runWith(["remove",n.itemData]),n.setItemData(void 0))}this.stopTweens(),this.displayStarImg(),this.stopAnimation(),this.layoutItemsPosition()},FuriComposeAnimation.prototype.playComposeAnimation=function(){for(var e=0,i=this.itemList;e<i.length;e++){var n=i[e];this.playMove(n,0,0,200)}},FuriComposeAnimation.prototype.update=function(){this.canPlay&&(this.bgring1.rotation+=.04,this.bgring2.rotation-=.015,this.bgring3.rotation+=.02)},FuriComposeAnimation.prototype.destroy=function(){e.prototype.destroy.call(this),this.stopAnimation(),this.stopTweens()},FuriComposeAnimation.prototype.init=function(){this.bgring1=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_1"}),this.bgring2=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_2"}),this.bgring3=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_3"}),this.bgring4=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_4"}),this.bgring5=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_5"}),this.bgring6=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_6"}),this.bgringstar=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_star_default"}),this.bgstarLev=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_center_star2"}),this.bglightstar=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_star_illume_5"}),this.bglightstar.y=3*this.dpr,this.spendStarTex=new s.BBCodeText(this.scene,0,.5*this.bgring1.height+15*this.dpr,"",m.UIHelper.whiteStyle(this.dpr,11)).setOrigin(.5),this.add([this.bgring1,this.bgring2,this.bgring3,this.bgring4,this.bgring5,this.bgring6,this.bgringstar,this.bgstarLev,this.bglightstar,this.spendStarTex]),this.createStarImg(),this.createItem(),this.bglightstar.visible=!1,this.bgstarLev.visible=!1},FuriComposeAnimation.prototype.createStarImg=function(){for(var e=2*Math.PI/5-.0096,i=0;i<5;i++){var n=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_star_illume_1"});n.rotation=-e*i+5e-4,this.starImgList.push(n),n.visible=!1,n.y=3*this.dpr,n.x=-2*this.dpr}this.add(this.starImgList)},FuriComposeAnimation.prototype.createItem=function(){for(var e=0;e<5;e++){var i=new x(this.scene,this.dpr,this.zoom);this.itemList.push(i),i.on(s.ClickEvent.Tap,this.onItemHandler,this)}this.add(this.itemList),this.layoutItemsPosition()},FuriComposeAnimation.prototype.layoutItemsPosition=function(){for(var e=3*Math.PI/2-2*Math.PI/5,i=108*this.dpr,n=0;n<this.itemList.length;n++){var a=this.itemList[n],s=e-2*Math.PI/5*n;a.y=Math.sin(s)*i,a.x=Math.cos(s)*i}},FuriComposeAnimation.prototype.displayStarImg=function(){for(var e=0,i=0;i<this.indexeds.length;i++){var n=this.indexeds[i];this.starImgList[i].visible=0!==n,0===n?this.starImgList[i].visible=!1:(this.starImgList[i].visible=!0,e++)}if(5===e){this.bglightstar.visible=!0;for(var a=0,s=this.starImgList;a<s.length;a++){s[a].visible=!1}}else this.bglightstar.visible=!1},FuriComposeAnimation.prototype.playAnimation=function(){this.canPlay=!0,this.timerID||(this.timerID=setInterval(this.update.bind(this),20))},FuriComposeAnimation.prototype.stopAnimation=function(){this.canPlay=!1,this.bgring1.rotation=0,this.bgring2.rotation=0,this.bgring3.rotation=0,this.timerID&&(this.timerID=clearInterval(this.timerID),this.timerID=void 0)},FuriComposeAnimation.prototype.onItemHandler=function(e,i){var n=this.itemList.indexOf(i);this.removeItemData(n)},FuriComposeAnimation.prototype.playMove=function(e,i,n,a){var s=this;if(this.scene){var o=this.scene.tweens.add({targets:e,x:{value:0},y:{value:3*this.dpr},ease:"Linear",duration:a,onComplete:function(){o.stop(),o.remove(),s.clearItemDatas(!1)}});this.tweens.push(o)}},FuriComposeAnimation.prototype.stopTweens=function(){for(var e=0,i=this.tweens;e<i.length;e++){var n=i[e];n.stop(),n.remove()}this.tweens.length=0},FuriComposeAnimation}(Phaser.GameObjects.Container),x=function(e){function FuriComposeItem(i,n,a){var s=e.call(this,i,0,0)||this;return s.dpr=n,s.zoom=a,s.init(),s.setSize(s.bg.width,s.bg.height),s.enable=!0,s}return g(FuriComposeItem,e),FuriComposeItem.prototype.setItemData=function(e){if(this.itemData=e,this.lightbg.alpha=0,this.icon.alpha=0,e){var i=m.Url.getOsdRes(e.texturePath);this.icon.load(i),this.icon.visible=!0,this.playAlphaAni([this.icon,this.lightbg])}else this.icon.visible=!1},FuriComposeItem.prototype.init=function(){this.bg=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_default"}),this.lightbg=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_Light"}),this.icon=new o.DynamicImage(this.scene,0,0),this.icon.scale=this.dpr/this.zoom,this.add([this.bg,this.lightbg,this.icon]),this.lightbg.alpha=0,this.icon.alpha=0},FuriComposeItem.prototype.playAlphaAni=function(e){if(this.scene)var i=this.scene.tweens.add({targets:e,alpha:{from:0,to:1},ease:"Linear",duration:300,onComplete:function(){i.stop(),i.remove()}})},FuriComposeItem}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaGiftEffectPanel",(function(){return m}));var a,s=n(789),o=n(2),h=n(860),l=n(862),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaGiftEffectPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=o.ModuleName.PICAGIFTEFFECT_NAME,n}return c(PicaGiftEffectPanel,e),PicaGiftEffectPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;this.content.x=a/2,this.content.y=s/2,e.prototype.resize.call(this,a,s),this.setSize(a*this.scale,s*this.scale)},PicaGiftEffectPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||this.mInitialized||this.preload()},PicaGiftEffectPanel.prototype.preload=function(){this.addAtlas(this.key,"gifteffect/gifteffect.png","gifteffect/gifteffect.json"),e.prototype.preload.call(this)},PicaGiftEffectPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.add(this.content),this.laterctPanel=new h.PicaGiftLaterctPanel(this.scene,this.mWorld,i,n,this.key,this.dpr),this.playerPanel=new l.PicaGiftPlayerPanel(this.scene,this.mWorld,i,n,this.key,this.dpr),this.content.add(this.laterctPanel),this.content.add(this.playerPanel),this.resize(0,0),e.prototype.init.call(this),this.play(void 0)},PicaGiftEffectPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaGiftEffectPanel.prototype.play=function(e){this.mInitialized&&(this.laterctPanel.play(e),this.playerPanel.play(e))},PicaGiftEffectPanel}(s.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"IllustratedItem",(function(){return c}));var a,s=n(791),o=n(790),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function IllustratedItem(i,n,a,s,l){var c=e.call(this,i,void 0,void 0,s,l,!1)||this;c.setSize(n,a),c.codeTex=c.scene.make.text({style:h.UIHelper.whiteStyle(s,10)}).setOrigin(0,.5),c.codeTex.x=.5*-c.width+9*s,c.codeTex.y=.5*c.height-4*s,c.star=c.scene.make.image({key:o.d.illustrate,frame:"illustrate_survey_star_empty"}),c.star.x=.5*c.width-.5*c.star.width-2*s,c.star.y=c.codeTex.y,c.star.visible=!1,c.surveyImg=c.scene.make.image({key:o.d.illustrate,frame:"illustrate_survey_nohave"}),c.add([c.codeTex,c.star,c.surveyImg]);for(var m=0,f=c.list;m<f.length;m++){f[m].y-=10*s}return c}return l(IllustratedItem,e),IllustratedItem.prototype.setItemData=function(i,n){(void 0===n&&(n=!0),e.prototype.setItemData.call(this,i,!1),i)&&(this.codeTex.text=n?i.code:i.name,1===i.status?(this.bg.setTexture(o.d.illustrate,"illustrate_survey_nohave"),this.itemIcon.alpha=.4,this.star.alpha=.4):(this.bg.setTexture(o.d.uicommon,this.bgFrame),this.itemIcon.alpha=1,this.star.alpha=1),this.surveyImg.visible=!1)},IllustratedItem}(s.ItemButton)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaItemPopCardPanel",(function(){return g}));var a,s=n(1112),o=n(789),h=n(796),l=n(2),c=n(0),m=n(795),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaItemPopCardPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.mPressDelay=1e3,n.key=l.ModuleName.PICAITEMPOPCARD_NAME,n.setTween(!1),n}return f(PicaItemPopCardPanel,e),PicaItemPopCardPanel.prototype.addListen=function(){this.mInitialized&&(this.mDetailDisplay.on("show",this.onShowHandler,this),this.on("pointerup",this.onCloseHandler,this),this.mCloseBtn.on("pointerup",this.onCloseHandler,this),this.mNickName.on("pointerup",this.onPointerNickNameHandler,this),this.mNickName.on("pointerdown",this.onPointerNickNameDownHandler,this),this.mDesText.on("pointerdown",this.onPointerDesDownHandler,this),this.mDesText.on("pointerup",this.onPointerNickNameHandler,this))},PicaItemPopCardPanel.prototype.removeListen=function(){this.mInitialized&&(this.mDetailDisplay.off("show",this.onShowHandler,this),this.off("pointerup",this.onCloseHandler,this),this.mCloseBtn.off("pointerup",this.onCloseHandler,this),this.mNickName.off("pointerup",this.onPointerNickNameHandler,this),this.mNickName.off("pointerdown",this.onPointerNickNameDownHandler,this),this.mDesText.off("pointerdown",this.onPointerDesDownHandler,this),this.mDesText.off("pointerup",this.onPointerNickNameHandler,this))},PicaItemPopCardPanel.prototype.resize=function(i,n){var a=this.render.uiScale,s=this.scene.cameras.main.width/a,o=this.scene.cameras.main.height/a,h=this.scene.cameras.main.centerX/a,l=this.scene.cameras.main.centerY/a;this.setSize(s,o),this.mCardContainer.x=h,this.mCardContainer.y=l,this.mCloseBtn.x=h,this.mCloseBtn.y=l+this.mCardContainer.height/2+48*this.dpr,e.prototype.resize.call(this,i,n)},PicaItemPopCardPanel.prototype.setProp=function(){if(this.mShowData){var e=this.mShowData[0].prop;if(e){this.mDesText.setText(e.des),this.mNickName.setText(e.name),e.source?this.mSource.setText(e.source):this.mSource.setText("");var i=e.serializeString?e.elepi:e;h.l.showDetailDisplay({display:this.mDetailDisplay,dpr:this.dpr,data:i,render:this.render,sn:e.sn,itemid:e.id,serialize:e.serializeString})}}},PicaItemPopCardPanel.prototype.preload=function(){this.addAtlas(this.key,"item_pop_card/item_pop_card.png","item_pop_card/item_pop_card.json"),e.prototype.preload.call(this)},PicaItemPopCardPanel.prototype.init=function(){this.mCardContainer=this.scene.make.container({width:325*this.dpr,height:468*this.dpr},!1),this.mCardContainer.setSize(325*this.dpr,468*this.dpr),this.mCardContainer.setInteractive(),this.mBorder=this.scene.make.graphics(void 0,!1),this.mBorder.fillGradientStyle(7304703,7304703,118271,118271),this.mBorder.fillRect(-this.mCardContainer.width/2,-this.mCardContainer.height/2,this.mCardContainer.width,this.mCardContainer.height);var i=this.scene.make.image({key:this.key,frame:"bg.png"},!1);i.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),i.y=23*this.dpr-i.height/2;var n=this.scene.make.image({y:42*this.dpr,key:this.key,frame:"name_bg.png"});n.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mNickName=this.scene.make.text({y:42*this.dpr,style:{fontSize:18*this.dpr,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(.5).setInteractive();var a=this.scene.make.image({y:138*this.dpr,key:this.key,frame:"des_bg.png"},!1);a.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mDesText=this.scene.make.text({x:a.x-a.width/2+12*this.dpr,y:a.y-a.height/2+10*this.dpr,style:{fontSize:10*this.dpr,fontFamily:c.Font.DEFULT_FONT,wordWrap:{width:240*this.dpr,useAdvancedWrap:!0}}},!1).setInteractive(),this.mDetailDisplay=new m.DetailDisplay(this.scene,this.render),this.mDetailDisplay.setFixedScale(2*this.dpr/this.scale),this.mCloseBtn=this.scene.make.image({key:this.key,frame:"close.png"},!1).setInteractive(),this.mCloseBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mSource=this.scene.make.text({x:a.x-a.width/2+12*this.dpr,y:a.y+a.height/2-23*this.dpr,style:{fontSize:10*this.dpr,fontFamily:c.Font.DEFULT_FONT}},!1),this.add(this.mCardContainer),this.mCardContainer.add([this.mBorder,i,a,this.mDetailDisplay,n,this.mNickName,this.mDesText,this.mSource]),this.add(this.mCloseBtn),this.resize(0,0),e.prototype.init.call(this),this.setInteractive(),this.setProp()},PicaItemPopCardPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_close"),clearTimeout(this.mPressTime),this.mNickNameDown=!1},PicaItemPopCardPanel.prototype.onPointerNickNameHandler=function(){clearTimeout(this.mPressTime),this.mNickNameDown=!1},PicaItemPopCardPanel.prototype.onPointerNickNameDownHandler=function(){var e=this;this.mPressTime=setTimeout((function(){e.copyName()}),this.mPressDelay)},PicaItemPopCardPanel.prototype.onPointerDesDownHandler=function(){var e=this;this.mPressTime=setTimeout((function(){e.copyDes()}),this.mPressDelay)},PicaItemPopCardPanel.prototype.copyName=function(){if(this.mNickName){s(this.mNickName.text);var e={noticeContext:c.i18n.t("item.copy_suc",{name:c.i18n.t("item.name")})};this.render.renderEmitter(l.MessageType.SHOW_NOTICE,{content:e})}},PicaItemPopCardPanel.prototype.copyDes=function(){if(this.mDesText){s(this.mDesText.text);var e={noticeContext:c.i18n.t("item.copy_suc",{name:c.i18n.t("item.des")})};this.render.renderEmitter(l.MessageType.SHOW_NOTICE,{content:e})}},PicaItemPopCardPanel.prototype.onShowHandler=function(e){this.mDetailDisplay.y=-this.mCardContainer.height/4},PicaItemPopCardPanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaManorListPanel",(function(){return g}));var a,s=n(789),o=n(790),h=n(2),l=n(0),c=n(866),m=n(867),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaManorListPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=h.ModuleName.PICAMANORLIST_NAME,n}return f(PicaManorListPanel,e),PicaManorListPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.mBackGround.clear(),this.mBackGround.fillStyle(0,.66),this.mBackGround.fillRect(0,0,a,s)},PicaManorListPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen()):this.preload())},PicaManorListPanel.prototype.addListen=function(){this.mInitialized},PicaManorListPanel.prototype.removeListen=function(){this.mInitialized},PicaManorListPanel.prototype.preload=function(){this.addAtlas(this.key,"manor/manor.png","manor/manor.json"),this.addAtlas(o.c.commonKey,o.d.commonUrl+".png",o.d.commonUrl+".json"),this.addAtlas(o.c.common2Key,o.d.common2Url+".png",o.d.common2Url+".json"),e.prototype.preload.call(this)},PicaManorListPanel.prototype.init=function(){var i=this.scale,n=this.scaleWidth,a=this.scaleHeight;this.mBackGround=this.scene.make.graphics(void 0,!1),this.mBackGround.clear(),this.mBackGround.fillStyle(7004927,0),this.mBackGround.fillRect(0,0,n*i,a*i),this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.add(this.mBackGround);var s=90*this.dpr,o=74*this.dpr,h=295*this.dpr,m=a-s-o,f=s+.5*m,g=.5*n;this.content=new c.PicaManorContentPanel(this.scene,g,f,h,m,this.dpr,this.key),this.content.setCloseHandler(new l.Handler(this,this.OnCloseHandler)),this.add(this.content),this.resize(n,a),e.prototype.init.call(this),this.openManorList()},PicaManorListPanel.prototype.setManorList=function(e){this.picScrollPanel.setManorListData(e)},PicaManorListPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaManorListPanel.prototype.openManorList=function(){this.render.renderEmitter(h.RENDER_PEER+"_"+this.key+"_querylist"),this.showScrollPanel(),this.content.setTitleText(l.i18n.t("manor.title"))},PicaManorListPanel.prototype.showScrollPanel=function(){var e=this,i=90*this.dpr,n=74*this.dpr;if(this.setContentSize(i,n),!this.picScrollPanel){var a=this.content.width,s=this.content.height-50*this.dpr;this.picScrollPanel=new m.PicaManorScrollPanel(this.scene,0,0,a,s,this.dpr,this.scale,this.key),this.picScrollPanel.setHandler(new l.Handler(this,(function(i){e.render.renderEmitter(h.RENDER_PEER+"_"+e.key+"_queryenter",i)})))}this.content.add(this.picScrollPanel),this.picScrollPanel.resetMask()},PicaManorListPanel.prototype.hideScrollPanel=function(){this.content.remove(this.picScrollPanel)},PicaManorListPanel.prototype.setContentSize=function(e,i){var n=this.scaleWidth,a=this.scaleHeight,s=334*this.dpr,o=452*this.dpr,h=.5*a,l=.5*n;this.content.setPosition(l,h),this.content.setContentSize(s,o)},PicaManorListPanel.prototype.OnCloseHandler=function(){this.render.renderEmitter(h.RENDER_PEER+"_"+this.key+"_hide")},PicaManorListPanel.prototype.onSelectItemHandler=function(e){},PicaManorListPanel}(s.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMarketPanel",(function(){return T}));var a,s=n(868),o=n(870),h=n(788),l=n(789),c=n(2),m=n(0),f=n(790),g=n(796),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),T=function(e){function PicaMarketPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=c.ModuleName.PICAMARKET_NAME,n.mSubTabs=[],n.mTabs=[],n}return _(PicaMarketPanel,e),PicaMarketPanel.prototype.addListen=function(){this.mInitialized&&(this.mSelectItem.on("buyItem",this.onBuyItemHandler,this),this.mSelectItem.on("popItemCard",this.onPopItemCardHandler,this))},PicaMarketPanel.prototype.removeListen=function(){this.mInitialized&&(this.mSelectItem.off("buyItem",this.onBuyItemHandler,this),this.mSelectItem.off("popItemCard",this.onPopItemCardHandler,this))},PicaMarketPanel.prototype.resize=function(e,i){var n=this.scaleWidth,a=this.scaleHeight;this.setSize(n,a);var s=290*this.dpr;this.mBackgroundColor.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.mShelfContainer.setSize(n,s),this.mShelfContainer.setPosition(0,a-this.mShelfContainer.height),this.mShelfBackground.clear(),this.mShelfBackground.fillStyle(183551),this.mShelfBackground.fillRect(0,0,this.mShelfContainer.width,this.mShelfContainer.height),this.mShelfBackground.y=this.mSubCategeoriesContainer.y+43*this.dpr,this.mSelectItem.resize(n,a),this.mCategoriesBar.clear(),this.mCategoriesBar.fillStyle(4121087),this.mCategoriesBar.fillRect(0,0,n,40*this.dpr),this.mCategoriesBar.fillStyle(308179),this.mCategoriesBar.fillRect(0,40*this.dpr,n,3*this.dpr),this.mSubCategeoriesContainer.setSize(n,43*this.dpr),this.layoutCategories()},PicaMarketPanel.prototype.setCategories=function(e){if(this.mCategoriesContainer){this.mCategoriesContainer.removeAll(!0);var i=e.marketCategory;this.mTabs=[];var n=this.scene.textures.getFrame(this.key,"categories_normal"),a=60;n&&(a=n.width,n.height);for(var s={left:a/2,top:12*this.dpr,right:4*this.dpr,bottom:2*this.dpr},o=new l.CheckboxGroup,c=77*this.dpr,f=38*this.dpr,g=0;g<i.length;g++){var _=new h.NinePatchTabButton(this.scene,c,f,this.key,"categories_normal","categories_down",i[g].category.value,[s],1,1);_.setTextStyle({fontSize:18*this.dpr,fontFamily:m.Font.DEFULT_FONT}),this.mTabs[g]=_,_.setData("category",i[g]),_.x=80*g*this.dpr+c/2,_.y=f/2}this.mCategoriesContainer.setSize(this.mTabs.length*c,f),this.mShelfContainer.add(this.mTabs),this.layoutCategories(),o.on("selected",this.onSelectCategoryHandler,this),o.appendItemAll(this.mTabs),o.selectIndex(0)}},PicaMarketPanel.prototype.setMoneyData=function(e,i){this.moneyValue=e,this.diamondValue=i,this.moneycomp.setMoneyData(e,i)},PicaMarketPanel.prototype.setProp=function(e){this.clearCategories(this.mItems),this.mItems=[];var i=e.commodities;this.mPropGrid.setItems(i),this.mPropGrid.layout(),this.mPropGrid.setT(0),i.length>0&&this.onSelectItemHandler(i[0])},PicaMarketPanel.prototype.setCommodityResource=function(e){this.mSelectItem&&(this.mSelectItem.setResource(e),this.mSelectItem.setData("display",e))},PicaMarketPanel.prototype.destroy=function(){this.mSubCategorisScroll&&this.mSubCategorisScroll.destroy(),this.mPropGrid&&this.mPropGrid.destroy(),e.prototype.destroy.call(this)},PicaMarketPanel.prototype.onPropConfirmHandler=function(e,i){this.render.renderEmitter(this.key+"_buyItem",e)},PicaMarketPanel.prototype.layoutCategories=function(){this.mCategoriesBar.y=this.mCategoriesContainer.height+this.mShelfContainer.y,this.mSubCategeoriesContainer.addAt(this.mCategoriesBar,0),this.mPropContainer.y=this.mSubCategeoriesContainer.y+43*this.dpr+this.mSubCategeoriesContainer.height+9*this.dpr,this.mShelfBackground.y=this.mSubCategeoriesContainer.y+43*this.dpr,this.mSubCategorisScroll.y=this.mCategoriesBar.y+25*this.dpr,this.randomCon.y=this.mSubCategorisScroll.y,this.mPropGrid.y=this.mCategoriesBar.y+this.mSubCategeoriesContainer.height+.5*this.mPropGrid.height+5*this.dpr,this.mPropGrid.layout(),this.mSubCategorisScroll.layout(),this.mSubCategorisScroll.resetMask(),this.mPropGrid.resetMask()},PicaMarketPanel.prototype.preload=function(){this.addAtlas(this.key,"market/market.png","market/market.json"),this.addAtlas(f.c.commonKey,f.d.commonUrl+".png",f.d.commonUrl+".json"),e.prototype.preload.call(this)},PicaMarketPanel.prototype.init=function(){var i=this;if(!this.mInitialized){var n=this.scaleWidth,a=this.scaleHeight;this.mBackgroundColor=this.scene.make.graphics(void 0,!1),this.mBackgroundColor.fillGradientStyle(7304703,7304703,314367,314367),this.mBackgroundColor.fillRect(0,0,n,a),this.add(this.mBackgroundColor),this.mShelfContainer=this.scene.make.container({x:n/2,y:a},!1).setSize(n,290*this.dpr);for(var c=this.scene.textures.getFrame(this.key,"bg"),_=Math.ceil(n/c.width),T=Math.ceil((a-this.mShelfContainer.height+c.height)/c.height),x=0;x<_;x++)for(var S=0;S<T;S++){var j=this.scene.make.image({x:x*c.width,y:S*c.height,key:this.key,frame:"bg"},!1);j.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.add(j)}this.mShelfBackground=this.scene.make.graphics(void 0,!1),this.mCloseBtn=new h.Button(this.scene,f.d.uicommon,"back_arrow","back_arrow"),this.mCloseBtn.setPosition(21*this.dpr,45*this.dpr),this.mCloseBtn.setInteractive(new Phaser.Geom.Rectangle(-28*this.dpr,-20*this.dpr,56*this.dpr,40*this.dpr),Phaser.Geom.Rectangle.Contains),this.mCloseBtn.on(h.ClickEvent.Tap,this.onCloseHandler,this),this.moneycomp=new g.g(this.scene,190*this.dpr,28*this.dpr,this.dpr,this.scale),this.moneycomp.x=n-20*this.dpr,this.moneycomp.y=this.mCloseBtn.y,this.mPropContainer=this.scene.make.container(void 0,!1),this.mCategoriesContainer=this.scene.make.container(void 0,!1),this.mSubCategeoriesContainer=this.scene.make.container(void 0,!1),this.mShelfContainer.add([this.mShelfBackground,this.mCategoriesContainer,this.mPropContainer]),this.add([this.mShelfContainer,this.mSubCategeoriesContainer]),this.mSelectItem=new s.ElementDetail(this.scene,this.render,this.key,this.dpr,this.scale),this.mSelectItem.setSize(n,a-this.mShelfContainer.height),this.mTIle=this.scene.make.text({text:m.i18n.t("market.title"),y:30*this.dpr,style:{fontSize:23*this.dpr,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(0,.5),this.mTIle.y=this.mCloseBtn.y,this.mTIle.x=this.mCloseBtn.x+.5*this.mCloseBtn.width+10*this.dpr,this.add([this.mTIle,this.mSelectItem,this.mCloseBtn,this.moneycomp]),e.prototype.init.call(this),this.mCategoriesBar=this.scene.make.graphics(void 0,!1);var q=56*this.dpr,Y=41*this.dpr,X={x:n/2,y:0,table:{width:n,height:50*this.dpr,cellWidth:q,cellHeight:Y,reuseCellContainer:!0,zoom:this.scale,mask:!1},scrollMode:1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;return null===n&&(n=new l.TextButton(a,i.dpr)),n.getData("item")!==s&&(n.setText(s.value),n.setData({item:s}),s&&i.mPreSubCategoris&&i.mPreSubCategoris.key===s.key?n.changeDown():n.changeNormal()),n}};this.mSubCategorisScroll=new h.GameGridTable(this.scene,X),this.mSubCategorisScroll.on("cellTap",(function(e,n){i.onSelectSubCategoryHandler(e)})),this.add(this.mSubCategorisScroll),this.randomCon=this.scene.make.container(void 0,!1),this.randomCon.x=.5*n,this.randomCon.visible=!1,this.add(this.randomCon),this.randomRefeshTime=this.scene.make.text({x:.5*-n+10*this.dpr,y:-12*this.dpr,text:m.i18n.t("market.refreshtime"),style:{color:"#007AAE",fontSize:13*this.dpr,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(0,.5);var Z=80*this.dpr,$=30*this.dpr;this.randomRefreshBtn=new h.NineSliceButton(this.scene,.5*n,this.randomRefeshTime.y,Z,$,f.c.commonKey,"button_g",m.i18n.t("market.refresh"),this.dpr,this.scale,{left:15*this.dpr,top:15*this.dpr,right:15*this.dpr,bottom:15*this.dpr}),this.randomRefreshBtn.x=.5*n-.5*this.randomRefreshBtn.width-10*this.dpr,this.randomRefreshBtn.setTextOffset(0,5*this.dpr),this.randomRefreshBtn.setTextStyle({color:"#0",fontSize:13*this.dpr,fontFamily:m.Font.DEFULT_FONT}),this.randomRefreshBtn.setFontStyle("bold"),this.refreshIcon=this.scene.make.image({key:f.c.commonKey,frame:"iv_coin"}).setScale(.8),this.refreshIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.refreshIcon.setPosition(-10*this.dpr,-8*this.dpr),this.refreshNeedCount=this.scene.make.text({x:0*this.dpr,y:this.refreshIcon.y,text:"100",style:{fontSize:10*this.dpr,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(0,.5),this.randomRefreshBtn.add([this.refreshIcon,this.refreshNeedCount]),this.randomCon.add([this.randomRefeshTime,this.randomRefreshBtn]);var tt=this.scene.textures.getFrame(this.key,"border"),et=tt.width+6*this.dpr,it=tt.height+10*this.dpr,nt={x:n/2+4*this.dpr,y:0,table:{width:n,height:224*this.dpr,columns:3,cellWidth:et,cellHeight:it,reuseCellContainer:!0,cellOriginX:0,cellOriginY:0,zoom:this.scale,mask:!1},scroller:{backDeceleration:!1,slidingDeceleration:!1},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;return null===n&&(n=new o.MarketItem(a,0,0,i.dpr,i.scale)),n.setData({item:s}),n.setProp(s),n}};this.mPropGrid=new h.GameGridTable(this.scene,nt),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(e){var n=e.getData("item");n&&i.onSelectItemHandler(n)})),this.add(this.mPropGrid),this.resize(0,0),this.render.renderEmitter(this.key+"_getCategories")}},PicaMarketPanel.prototype.setSelect=function(){},PicaMarketPanel.prototype.clearCategories=function(e){e&&(e.map((function(e){return e.destroy()})),e=void 0)},PicaMarketPanel.prototype.onSelectCategoryHandler=function(e){if(this.mSubCategeoriesContainer){this.mSubCategorisScroll.setT(0),this.mPreSubCategoris=null,this.clearCategories(this.mSubTabs);var i=e.getData("category");if(this.mSelectedCategories=e,i){var n=i.subcategory;if(this.mSubCategorisScroll){this.mSubCategorisScroll.setItems(n),this.mSubCategorisScroll.layout();var a=this.mSubCategorisScroll.getCell(0);this.onSelectSubCategoryHandler(a.container)}}}},PicaMarketPanel.prototype.onSelectSubCategoryHandler=function(e){if(this.mSelectedCategories&&e instanceof l.TextButton){var i=this.mSelectedCategories.getData("category");if(i){var n=e.getData("item");n&&(this.queryProp(i.category.key,n.key),this.mPreSubCategoris=n,this.mPreSubCategorisItem&&this.mPreSubCategorisItem.changeNormal(),e.changeDown(),this.mPreSubCategorisItem=e)}}},PicaMarketPanel.prototype.queryProp=function(e,i){this.render.renderEmitter(this.key+"_queryProp",{page:1,category:e,subCategory:i})},PicaMarketPanel.prototype.onSelectItemHandler=function(e){this.mSelectItem.setProp(e),this.mSelectItem.setData("propdata",e);var i=e.item;if(i.suitType&&""!==i.suitType){var n=this.getCommodityResource(i);this.setCommodityResource(n)}else this.setCommodityResource(i)},PicaMarketPanel.prototype.onBuyItemHandler=function(e){var i=this.getBuyPackageData();if(i.count=e.quantity,e.quantity*i.sellingPrice.price>(i.sellingPrice.coinType===m.CoinType.DIAMOND?this.diamondValue:this.moneyValue)){var n={text:[{text:m.i18n.t("market.moneyless"),node:void 0}]};this.render.mainPeer.showMediator(c.ModuleName.PICANOTICE_NAME,!0,n)}else{var a=i,s=m.i18n.t("market.payment"),o=this.mSelectItem.getData("display"),h={key:this.key,confirmFunc:"onPropConfirmHandler",confirmAddData:e};this.showPropFun({resultHandler:h,data:a,resource:o,slider:!1,title:s})}},PicaMarketPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaMarketPanel.prototype.onPopItemCardHandler=function(e,i){e&&this.render.renderEmitter(this.key+"_popItemCard",{prop:e,display:i})},PicaMarketPanel.prototype.getBuyPackageData=function(){var e=this.mSelectItem.getData("propdata"),i={id:null,sellingPrice:null,name:null,shortName:null,count:1};return i.id=e.id,i.sellingPrice=e.price[0],i.name=e.name,i.shortName=e.shortName,i},PicaMarketPanel.prototype.showPropFun=function(e){this.render.mainPeer.showMediator(c.ModuleName.PICAPROPFUN_NAME,!0,e)},PicaMarketPanel.prototype.getCommodityResource=function(e){var i={};return i.avatar=c.AvatarSuitType.createAvatarBySn(e.suitType,e.sn,e.slot,e.tag,e.version),i.suits=[{suit_type:e.suitType,sn:e.sn,tag:e.tag,version:e.version}],i},PicaMarketPanel}(l.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMessageBoxPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(2),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaMessageBoxPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=h.ModuleName.PICAMESSAGEBOX_NAME,n}return c(PicaMessageBoxPanel,e),PicaMessageBoxPanel.prototype.show=function(e){if(this.mShowData=e,!this.mPreLoad)if(this.mInitialized){var i=e;this.mButtons=[],i&&(i.text&&i.text[0]&&(this.mText.setText(i.text[0].text),this.mText.x=-this.mText.width/2,this.mText.y=-this.mText.height),i.title&&this.mTitleLabel.setText(i.title.text));var n=i.button.sort((function(e,i){return e.param>i.param?1:-1}));if(n){var a=114*this.dpr,o=40*this.dpr,h=(this.width-30*this.dpr)/n.length;this.mButtonContaier.y=this.height/2-o;var c=this.scene.textures.getFrame(this.key,"yellow_btn_normal");if(!c)return;for(var m={left:13*this.dpr,top:13*this.dpr,bottom:c.width-2-13*this.dpr,right:c.height-2-13*this.dpr},f=.5*-(h*n.length),g=0;g<n.length;g++){var _=n[g]?n[g].text:"",T=n[g].param,x=1===T?"yellow_btn":"red_btn",S=1===T?l.Color.brownish:l.Color.white,j=new s.NineSliceButton(this.mScene,0,0,a,o,this.key,x,_,this.dpr,this.scale,m,void 0,n[g]);j.setTextStyle({fontFamily:l.Font.DEFULT_FONT,fontSize:16*this.dpr,color:S}),j.setFontStyle("bold"),j.x=f+.5*h,f+=h,this.mButtons.push(j),j.on(s.ClickEvent.Tap,this.onClickHandler,this)}this.mButtonContaier.add(this.mButtons),this.mButtonContaier.x=0}this.resize(0,0)}else this.preload()},PicaMessageBoxPanel.prototype.resize=function(i,n){var a=this.scene.cameras.main.width,s=this.scene.cameras.main.height;this.x=a/2,this.y=s/2,e.prototype.resize.call(this,i,n),this.border.setInteractive(new Phaser.Geom.Rectangle(.5*-a,.5*-s,a,s),Phaser.Geom.Rectangle.Contains)},PicaMessageBoxPanel.prototype.preload=function(){this.addAtlas(this.key,"pica_message_box/pica_message_box.png","pica_message_box/pica_message_box.json"),e.prototype.preload.call(this)},PicaMessageBoxPanel.prototype.init=function(){var i=this.scene.cameras.main,n=i.width,a=i.height,o=this.scene.make.graphics(void 0,!1);o.fillStyle(0,.6),o.fillRect(.5*-n,.5*-a,n,a),this.add(o),this.border=o;var h=this.scene.make.image({key:this.key,frame:"bg_universal_box"});this.add(h),this.setSize(h.width,h.height),this.closeBtn=new s.Button(this.scene,this.key,"close"),this.closeBtn.setDisplaySize(28*this.dpr,28*this.dpr),this.closeBtn.setPosition(.5*this.width-5*this.dpr,.5*-this.height+4*this.dpr),this.closeBtn.on(String(s.ClickEvent.Tap),this.onCloseHandler,this),this.add(this.closeBtn),this.mButtonContaier=this.scene.make.container(void 0,!1);var c=this.scene.make.image({y:-h.height/2,key:this.key,frame:"title"});c.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mTitleLabel=this.scene.make.text({y:c.y-6*this.dpr,style:{fontFamily:l.Font.DEFULT_FONT,fontSize:16*this.dpr,color:"#3366cc"}},!1).setOrigin(.5),this.mText=new s.BBCodeText(this.mScene,0,0,"",{fontSize:14*this.dpr+"px",fontFamily:l.Font.DEFULT_FONT,color:"#000000",origin:{x:.5,y:.5},wrap:{mode:"char",width:this.width},align:"center"}),this.add([h,c,this.mTitleLabel,this.mText,this.mButtonContaier]),e.prototype.init.call(this),this.resize(n,a),this.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains)},PicaMessageBoxPanel.prototype.onClickHandler=function(e,i){if(i){var n=i.getBtnData();if(n)if(n.local){if(n.clickhandler){var a=this.render.uiManager.getPanel(""+n.clickhandler.key);if(a&&n.clickhandler.clickfun)a[n.clickhandler.clickfun].apply(a,n.data)}this.render.renderEmitter(h.RENDER_PEER+"_"+this.key+"_hide")}else this.render.renderEmitter(h.RENDER_PEER+"_"+this.key+"_click",n)}},PicaMessageBoxPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(h.RENDER_PEER+"_"+this.key+"_hide")},PicaMessageBoxPanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMineCarPanel",(function(){return f}));var a,s,o=n(788),h=n(789),l=n(2),c=n(0),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaMineCarPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.uiManager=i,n.mFilterItem=[],n.key=l.ModuleName.PICAMINECAR_NAME,n.disInteractive(),n}return m(PicaMineCarPanel,e),PicaMineCarPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.mBackGround.clear(),this.mBackGround.fillStyle(7004927,0),this.mBackGround.fillRect(0,0,a,s),this.mBg.x=a/2,this.mBg.y=this.mBg.displayHeight/2+107*this.dpr,this.carIcon.x=this.mBg.x/2-4*this.dpr,this.carIcon.y=this.mBg.y-(this.mBg.displayHeight-this.carIcon.displayHeight)/2+4*this.dpr,this.mCloseBtn.x=this.mBg.x+this.mBg.displayWidth/2,this.mCloseBtn.y=this.mBg.y-(this.mBg.displayHeight-this.mCloseBtn.displayHeight)/2+10*this.dpr,this.mCounter.x=this.mBg.x/2,this.mCounter.y=this.mBg.y+(this.mBg.displayHeight-this.mDiscardBtn.displayHeight)/2-16*this.dpr,this.mCounter.setResolution(this.dpr),this.mTips.x=this.mBg.x+20*this.dpr,this.mTips.y=this.mBg.y-this.mBg.displayHeight/2-15*this.dpr,this.mDiscardBtn.x=this.mBg.x+this.mBg.displayWidth/2-this.mDiscardBtn.displayWidth/2-9*this.dpr,this.mDiscardBtn.y=this.mBg.y+this.mBg.displayHeight/2-this.mDiscardBtn.displayHeight/2-9*this.dpr,this.categoriesBg.x=this.mBg.x,this.categoriesBg.y=this.mBg.y-this.mBg.displayHeight/2+this.categoriesBg.displayHeight/2+38*this.dpr,this.mPropGrid.refreshPos(this.mBg.x+2*this.dpr,this.mBg.y+6*this.dpr),this.mCategoryTable.refreshPos(this.mBg.x,this.mBg.y-this.mBg.displayHeight/2+this.categoriesBg.displayHeight/2+44*this.dpr),this.mPropGrid.resetMask(),this.mCategoryTable.resetMask()},PicaMineCarPanel.prototype.show=function(i){e.prototype.show.call(this,i)},PicaMineCarPanel.prototype.setCategories=function(e){this.mPreSelectedCategorie=void 0,this.mPreSelectedCategorieData=void 0,this.mCategoryTable.setItems(e)},PicaMineCarPanel.prototype.setCategoriesData=function(e){this.mDiscardBtn.changeState(s.Discard),this.setCategories(e)},PicaMineCarPanel.prototype.addListen=function(){this.mInitialized&&(this.removeListen(),this.mCloseBtn.on("pointerup",this.onCloseHandler,this),this.mDiscardBtn.on(o.ClickEvent.Tap,this.enterDiscardMode,this))},PicaMineCarPanel.prototype.removeListen=function(){this.mInitialized&&(this.mCloseBtn.off("pointerup",this.onCloseHandler,this),this.mDiscardBtn.off(o.ClickEvent.Tap,this.enterDiscardMode,this))},PicaMineCarPanel.prototype.setProp=function(e,i){var n=e||[];this.mLimit=i||0,this.mFilterItem.length=0;for(var a=0,s=n;a<s.length;a++){var o=s[a];this.mFilterItem.push({item:o})}for(var h=this.mLimit-this.mFilterItem.length,l=0;l<h;l++)this.mFilterItem.push({item:null});this.mPropGrid.setItems(this.mFilterItem),this.mCounter.setText(n.length+"/"+this.mLimit)},PicaMineCarPanel.prototype.destroy=function(){this.mPropGrid&&this.mPropGrid.destroy(),this.mCategoryTable&&this.mCategoryTable.destroy(),e.prototype.destroy.call(this)},PicaMineCarPanel.prototype.queryRefreshPackage=function(){this.mPreSelectedCategorieData&&this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_querypackage",{type:4,key:this.mPreSelectedCategorieData.key})},PicaMineCarPanel.prototype.preload=function(){this.addAtlas(this.key,"mine_car/mine_car.png","mine_car/mine_car.json"),e.prototype.preload.call(this)},PicaMineCarPanel.prototype.init=function(){var i=this,n=this.scaleWidth,a=this.scaleHeight;this.setSize(n,a),this.mBackGround=this.scene.make.graphics(void 0,!1),this.mBackGround.clear(),this.mBackGround.fillStyle(7004927,0),this.mBackGround.fillRect(0,0,n,a),this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.mBg=this.scene.make.image({key:this.key,frame:"bg.png"}),this.mBg.x=n/2,this.mBg.y=a/2,this.carIcon=this.scene.make.image({key:this.key,frame:"car_icon.png"},!1),this.carIcon.x=-(this.mBg.width-this.carIcon.width)/2+28*this.dpr,this.carIcon.y=-(this.mBg.height-this.carIcon.height/2)/2+10*this.dpr,this.mCloseBtn=this.scene.make.image({key:this.key,frame:"close_btn.png"},!1),this.mCloseBtn.setInteractive(),this.mCloseBtn.x=this.mBg.width/2,this.mCloseBtn.y=-(this.mBg.height-this.mCloseBtn.height)/2+10*this.dpr,this.mCloseBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mCounter=this.scene.make.text({text:"25/50",style:{fontFamily:c.Font.DEFULT_FONT,color:"#FFFFFF",fontSize:12*this.dpr}},!1),this.mCounter.x=-this.displayWidth/2+17*this.dpr,this.mCounter.y=this.displayHeight/2-18*this.dpr-this.mCounter.height,this.mCounter.setFontStyle("bold"),this.mTips=new _(this.scene,this.key,this.dpr),this.mTips.x=40*this.dpr,this.mTips.y=-(this.mBg.height+this.mTips.height)/2+15*this.dpr,this.mDiscardBtn=new T(this.scene,this.key,"yellow_btn.png",void 0,"丢弃"),this.mDiscardBtn.x=(this.mBg.width-this.mDiscardBtn.displayWidth)/2-17*this.dpr,this.mDiscardBtn.y=(this.mBg.height-this.mDiscardBtn.displayHeight)/2-10*this.dpr,this.mDiscardBtn.setTextStyle({color:"##996600",fontFamily:c.Font.DEFULT_FONT,fontSize:10*this.dpr}),this.mDiscardBtn.changeState(s.Discard),this.categoriesBg=this.scene.make.image({key:this.key,frame:"nav_bg.png"}),this.categoriesBg.y=-(this.displayHeight-this.categoriesBg.displayHeight)/2+36*this.dpr;var h=this.scene.textures.getFrame(this.key,"item_border.png"),m=h.width+4*this.dpr,f=h.height+4*this.dpr,S=236*this.dpr,j={x:-7*this.dpr,y:-16*this.dpr,table:{width:S,height:295*this.dpr,columns:4,cellsCount:25,cellWidth:m,cellHeight:f,reuseCellContainer:!0,cellOriginX:0,cellOriginY:0,zoom:this.scale},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;return null===n&&(n=new g(a,i.key,i.dpr)),n.setData({item:s}),n.setProp(s),n}};this.mPropGrid=new o.GameGridTable(this.scene,j),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(e){i.onSelectItemHandler(e)}));var q=this.scene.textures.getFrame(this.key,"nav_btn_normal.png"),Y={x:-9*this.dpr,y:-155*this.dpr,table:{width:S,height:this.categoriesBg.displayHeight,cellWidth:q.width+4*this.dpr,cellHeight:q.height,reuseCellContainer:!0,cellOriginX:0,cellOriginY:0,zoom:this.scale},scrollMode:1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;return null===n&&((n=new x(a,i.key,"nav_btn_normal.png","nav_btn_down.png","1")).setTextStyle({color:"#566ddb",fontFamily:c.Font.DEFULT_FONT,fontSize:10*i.dpr}),n.setFontStyle("bold")),n.setText(s.value),n.setData("data",s),i.mPreSelectedCategorieData===s?(n.changeDown(),i.mPreSelectedCategorie=n):n.changeNormal(),i.mPreSelectedCategorie||i.onClickCategoryHandler(n),n}};this.mCategoryTable=new o.GameGridTable(this.scene,Y),this.mCategoryTable.layout(),this.mCategoryTable.on("cellTap",(function(e){i.onClickCategoryHandler(e)})),this.add([this.mBackGround,this.mBg,this.carIcon,this.mCounter,this.categoriesBg,this.mPropGrid,this.mCategoryTable,this.mCloseBtn,this.mDiscardBtn]),this.resize(this.scene.cameras.main.width,this.scene.cameras.main.height),e.prototype.init.call(this),this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_querycategory")},PicaMineCarPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_close")},PicaMineCarPanel.prototype.onSelectItemHandler=function(e){if(this.mDiscardBtn&&this.mDiscardBtn.buttonState!==s.Discard)return e.switchSelect(),void this.checkMode();e&&e.item.item?(this.mTips.parentContainer||this.add(this.mTips),this.mTips.setItem(e.item.item)):this.remove(this.mTips)},PicaMineCarPanel.prototype.onClickCategoryHandler=function(e){var i=e.getData("data");i&&(this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_querypackage",{type:4,key:i.key}),this.mPreSelectedCategorie&&this.mPreSelectedCategorie.changeNormal(),e.changeDown(),this.mPreSelectedCategorie=e,this.mPreSelectedCategorieData=i)},PicaMineCarPanel.prototype.checkMode=function(){if(this.mFilterItem&&!(this.mFilterItem.length<1)){for(var e=0,i=this.mFilterItem;e<i.length;e++){if(i[e].selected)return void this.mDiscardBtn.changeState(s.Sutmit)}this.mDiscardBtn.changeState(s.Cancel)}},PicaMineCarPanel.prototype.onDiscardSelectedItem=function(){var e=this;if(this.mFilterItem&&!(this.mFilterItem.length<1)){for(var i=[],n=[],a=0,s=this.mFilterItem;a<s.length;a++){var o=s[a];o.item&&o.selected&&(i.push(o.item),n.push(o.item.name+"*"+o.item.count))}new h.AlertView(this.scene,this.uiManager).show({text:c.i18n.t("minecar.confirmation",{name:""+n.join("、")}),title:c.i18n.t("minecar.discard"),oy:302*this.dpr*this.render.uiScale,callback:function(){e.render.renderEmitter(l.RENDER_PEER+"_"+e.key+"_discard",i)}})}},PicaMineCarPanel.prototype.enterDiscardMode=function(){if(this.mFilterItem){var e=this.mDiscardBtn.buttonState,i=!1;e===s.Discard?(this.mDiscardBtn.changeState(s.Cancel),i=!0):(e===s.Sutmit&&this.onDiscardSelectedItem(),this.mDiscardBtn.changeState(s.Discard)),this.mFilterItem.length>0&&this.mFilterItem[0].selectVisible!==i&&(this.mFilterItem.map((function(e){e.selectVisible=i,e.selected=!1})),this.mPropGrid.setItems(this.mFilterItem))}},PicaMineCarPanel}(h.BasePanel),g=function(e){function PackageItem(i,n,a){var s=e.call(this,i)||this,o=s.scene.make.image({key:n,frame:"item_border.png"},!1).setOrigin(0);return s.setSize(o.width,o.height),s.mItemImage=new h.DynamicImage(s.scene,0,0),s.mItemImage.setOrigin(0),s.mItemImage.setScale(a),s.mCounter=s.scene.make.text({x:o.displayWidth-2*a,y:o.displayHeight-1*a,style:{fontFamily:c.Font.DEFULT_FONT,fontSize:9*a,color:"#566DDB"}}).setOrigin(1),s.mCounter.setFontStyle("bold"),s.mSelectedIcon=s.scene.make.image({key:n,frame:"icon_normal.png"},!1),s.mSelectedIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),s.mSelectedIcon.x=o.width-2*a-s.mSelectedIcon.width/2,s.mSelectedIcon.y=2*a+s.mSelectedIcon.height/2,s.add(o),s.add([s.mItemImage,s.mCounter,s.mSelectedIcon]),s}return m(PackageItem,e),PackageItem.prototype.setProp=function(e){this.itemData=e;var i=e.item;if(!e||!i)return this.mItemImage.visible=!1,this.mCounter.visible=!1,void(this.mSelectedIcon.visible=!1);this.itemData&&(this.mItemImage.load(c.Url.getOsdRes(i.display.texturePath),this,this.onLoadCompleteHandler),this.mItemImage.visible=!0,i.count>1?(this.mCounter.setText(i.count.toString()),this.mCounter.visible=!0):this.mCounter.visible=!1,this.mSelectedIcon.visible=!!this.itemData.selectVisible,this.setSelected())},PackageItem.prototype.switchSelect=function(){this.itemData.item&&(this.itemData.selected=!this.itemData.selected,this.setSelected())},Object.defineProperty(PackageItem.prototype,"item",{get:function(){return this.itemData},enumerable:!1,configurable:!0}),PackageItem.prototype.onLoadCompleteHandler=function(){this.mItemImage&&(this.mItemImage.x=this.width-this.mItemImage.displayWidth>>1,this.mItemImage.y=this.height-this.mItemImage.displayHeight>>1)},PackageItem.prototype.setSelected=function(){this.itemData.selected?this.mSelectedIcon.setFrame("icon_selected.png"):this.mSelectedIcon.setFrame("icon_normal.png")},PackageItem}(Phaser.GameObjects.Container),_=function(e){function Tips(i,n,a){var s=e.call(this,i)||this;s.mDpr=a;var o=s.scene.make.image({key:n,frame:"tips_bg.png"},!1);return o.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),s.mName=s.scene.make.text({x:-o.width/2+12*a,y:-o.height/2+5*a,style:{fontFamily:c.Font.DEFULT_FONT,fontSize:10*a,color:"#000000"}},!1),s.mDes=s.scene.make.text({x:s.mName.x,style:{fontFamily:c.Font.DEFULT_FONT,fontSize:10*a,color:"#000000"}},!1).setOrigin(0,1),s.add([o,s.mName,s.mDes]),s.setSize(o.width,o.height),s}return m(Tips,e),Tips.prototype.setItem=function(e){if(e){var i=this.y,n=this.alpha;this.y=i+50*this.mDpr,this.alpha=0,this.scene.tweens.add({targets:this,props:{alpha:n,y:i},duration:200,ease:Phaser.Math.Easing.Elastic.Out}),this.mName.setText(e.shortName||e.name),this.mDes.setText(e.des)}},Tips}(Phaser.GameObjects.Container),T=function(e){function DiscardButton(i,n,a,s,o){return e.call(this,i,n,a,s,o)||this}return m(DiscardButton,e),DiscardButton.prototype.changeState=function(e){if(this.mState!==e)switch(this.mState=e,e){case s.Cancel:this.setText("取消"),this.setFrame("gray_btn.png");break;case s.Sutmit:this.setText("提交"),this.setFrame("yellow_btn.png");break;default:this.setText("丢弃"),this.setFrame("yellow_btn.png")}},Object.defineProperty(DiscardButton.prototype,"buttonState",{get:function(){return this.mState},enumerable:!1,configurable:!0}),DiscardButton}(o.Button);!function(e){e[e.Discard=0]="Discard",e[e.Cancel=1]="Cancel",e[e.Sutmit=2]="Sutmit"}(s||(s={}));var x=function(e){function CategorieButton(i,n,a,s,o){var h=e.call(this,i,n,a,s,o)||this;return h.disInteractive(),h.removeListen(),h.mBackground.setOrigin(0,0),h.mText&&h.mText.setPosition(h.mBackground.width/2,h.mBackground.height/2),h}return m(CategorieButton,e),CategorieButton}(o.TabButton)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMineSettlePanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(2),c=n(0),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaMineSettlePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=l.ModuleName.PICAMINESETTLE_NAME,n}return m(PicaMineSettlePanel,e),PicaMineSettlePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.bg.x=a/2,this.bg.y=s/2,this.titleimage.x=a/2,this.titleimage.y=this.bg.y-this.bg.displayHeight/2-8*this.dpr,this.confirmBtn.x=a/2,this.confirmBtn.y=this.bg.y+100*this.dpr,this.titleName.x=a/2,this.titleName.y=this.titleimage.y+32*this.dpr,this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.66),this.blackGraphic.fillRect(0,0,a,s),this.mPropGrid.refreshPos(a/2,this.bg.y-2*this.dpr),this.mPropGrid.resetMask(),this.setSize(a,s)},PicaMineSettlePanel.prototype.show=function(e){this.mShowData=e,this.refreshData(),this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen()):this.preload())},PicaMineSettlePanel.prototype.addListen=function(){this.mInitialized&&this.confirmBtn.on(String(s.ClickEvent.Tap),this.onConfirmBtnClick,this)},PicaMineSettlePanel.prototype.removeListen=function(){this.mInitialized&&this.confirmBtn.off(String(s.ClickEvent.Tap),this.onConfirmBtnClick,this)},PicaMineSettlePanel.prototype.preload=function(){this.addAtlas(this.key,"minesettle/settlement.png","minesettle/settlement.json"),this.addAtlas(h.c.commonKey,h.d.commonUrl+".png",h.d.commonUrl+".json"),e.prototype.preload.call(this)},PicaMineSettlePanel.prototype.init=function(){var i=this,n=this.cameraWidth,a=this.cameraHeight;this.bg=new o.NinePatch(this.scene,0,0,293*this.dpr,260*this.dpr,this.key,"bg",{left:10,top:10,right:10,bottom:10}),this.blackGraphic=this.scene.make.graphics(void 0,!1),this.blackGraphic.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains);var l=this.scene.textures.getFrame(this.key,"icon_test"),m=l.width+20*this.dpr,f=l.height+25*this.dpr,_={x:0,y:0,table:{width:280*this.dpr,height:160*this.dpr,columns:5,cellWidth:m,cellHeight:f,reuseCellContainer:!0,cellOriginX:0,cellOriginY:0,cellPadX:18*this.dpr,zoom:this.scale},clamplChildOY:!1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;return null===n&&(n=new g(a,i.dpr)),n.setData({item:s}),n.setItemData(s),n}};this.mPropGrid=new s.GameGridTable(this.scene,_),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(e){var n=e.itemData;n&&i.onSelectItemHandler(n)})),this.titleimage=this.scene.make.image({x:0,y:.5*-this.bg.displayWidth-10*this.dpr,key:this.key,frame:"title"},!1),this.titleimage.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titleName=this.scene.make.text({x:0,y:this.titleimage.y+32*this.dpr,text:c.i18n.t("mine.settle"),style:{fontSize:15*this.dpr,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(.5,.5),this.confirmBtn=new s.NineSliceButton(this.scene,0,100*this.dpr,90*this.dpr,40*this.dpr,h.c.commonKey,"yellow_btn",c.i18n.t("mine.savebag"),this.dpr,this.scale,{left:10*this.dpr,top:10*this.dpr,right:10*this.dpr,bottom:10*this.dpr}),this.confirmBtn.setTextStyle({color:"#976400",fontSize:16*this.dpr,fontFamily:c.Font.DEFULT_FONT}),this.add([this.blackGraphic,this.bg,this.titleimage,this.titleName,this.confirmBtn]),this.add(this.mPropGrid),this.resize(0,0),e.prototype.init.call(this)},PicaMineSettlePanel.prototype.setMineSettlePacket=function(e){this.mInitialized&&this.mPropGrid.setItems(e.items)},PicaMineSettlePanel.prototype.destroy=function(){this.mPropGrid&&this.mPropGrid.destroy(),this.confirmBtn&&this.confirmBtn.destroy(),this.mPropGrid=null,this.confirmBtn=null,e.prototype.destroy.call(this)},PicaMineSettlePanel.prototype.refreshData=function(){var e=this.getData("settleData");e&&this.setMineSettlePacket(e)},PicaMineSettlePanel.prototype.onSelectItemHandler=function(e){},PicaMineSettlePanel.prototype.onConfirmBtnClick=function(e){this.checkPointerDis(e)&&this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_hide")},PicaMineSettlePanel.prototype.checkPointerDis=function(e){return!this.render||Math.abs(e.downX-e.upX)<10*this.render.uiRatio*this.render.uiScale&&Math.abs(e.downY-e.upY)<10*this.render.uiRatio*this.render.uiScale},PicaMineSettlePanel}(o.BasePanel),g=function(e){function MineSettleItem(i,n){var a=e.call(this,i)||this;return a.dpr=n,a.icon=new o.DynamicImage(i,0,0),a.itemCount=a.scene.make.text({text:"600",style:{fontSize:18,fontFamily:c.Font.DEFULT_FONT}},!1),a.itemCount.setOrigin(.5,0),a.icon.setOrigin(0,0),a.icon.setScale(a.dpr),a.itemCount.setPosition(0,a.icon.height),a.add(a.icon),a.add(a.itemCount),a}return m(MineSettleItem,e),MineSettleItem.prototype.setItemData=function(e){var i=this;this.itemData=e,this.itemCount.setFontSize(14*this.dpr),this.itemCount.text=e.count+"";var n=c.Url.getOsdRes(e.texturePath);this.icon.load(n,this,(function(){i.icon.setScale(33*i.dpr/i.icon.width),i.icon.setPosition(0,3*i.dpr),i.itemCount.setPosition(.5*i.icon.displayWidth,i.icon.x+i.icon.displayHeight+3*i.dpr)}))},MineSettleItem.prototype.destroy=function(){e.prototype.destroy.call(this),this.icon&&this.icon.destroy(),this.itemCount&&this.itemCount.destroy(),this.itemData=null,this.icon=null,this.itemCount=null,this.scene=null},MineSettleItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNavigatePanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(2),c=n(0),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaNavigatePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key_lang="key_lang",n.key=l.ModuleName.PICANAVIGATE_NAME,n.UIType=s.UIType.Scene,n.setTween(!1),n.setInteractive(),n}return m(PicaNavigatePanel,e),PicaNavigatePanel.prototype.resize=function(i,n){var a=this.scale;i=i||this.mBackground.width*a,n=n||this.mBackground.height*a,this.setSize(i,n);var s=this.scene.cameras.main.width/a,o=this.scene.cameras.main.height,l=s/this.scene.textures.getFrame(h.c.commonKey,"menu_bg").width*this.dpr;this.mBackground.scaleX=l,this.mBackground.x=s/2,this.mBackground.setInteractive(),this.mCloseBtn.x=s-this.mCloseBtn.width/2-3*this.dpr,this.mGoHomeBtn.x=this.mCloseBtn.x-.5*this.mCloseBtn.width-.5*this.mGoHomeBtn.width-24*this.dpr,this.y=o-this.height/2,e.prototype.resize.call(this,i,n)},PicaNavigatePanel.prototype.addListen=function(){this.mInitialized&&this.interactiveBoo&&(this.mMapBtn.on("pointerup",this.onShowMapHandler,this),this.mShopBtn.on("pointerup",this.onShowShopHandler,this),this.mBagBtn.on("pointerup",this.onShowBagHandler,this),this.mFamilyBtn.on("pointerup",this.onShowFamilyHandler,this),this.mGoHomeBtn.on("pointerup",this.onShowGoHomeHandler,this),this.mCloseBtn.on("pointerup",this.onCloseHandler,this))},PicaNavigatePanel.prototype.removeListen=function(){this.mInitialized&&(this.mMapBtn.off("pointerup",this.onShowMapHandler,this),this.mShopBtn.off("pointerup",this.onShowShopHandler,this),this.mBagBtn.off("pointerup",this.onShowBagHandler,this),this.mFamilyBtn.off("pointerup",this.onShowFamilyHandler,this),this.mGoHomeBtn.on("pointerup",this.onShowGoHomeHandler,this),this.mCloseBtn.off("pointerup",this.onCloseHandler,this))},PicaNavigatePanel.prototype.hide=function(){this.mShow=!1,e.prototype.hide.call(this),this.removeListen()},PicaNavigatePanel.prototype.show=function(i){e.prototype.show.call(this,i),this.checkUpdateActive(),this.addListen()},PicaNavigatePanel.prototype.updateUIState=function(e){this.mInitialized&&("picanavigate.mapbtn"===e.name&&(this.mMapBtn.visible=e.visible,e.disabled?this.mMapBtn.removeInteractive():this.mMapBtn.setInteractive()),"picanavigate.marketbtn"===e.name&&(this.mShopBtn.visible=e.visible,e.disabled?this.mShopBtn.removeInteractive():this.mShopBtn.setInteractive()),"picanavigate.bagbtn"===e.name&&(this.mBagBtn.visible=e.visible,e.disabled?this.mBagBtn.removeInteractive():this.mBagBtn.setInteractive()),"picanavigate.gohomebtn"===e.name&&(this.mGoHomeBtn.visible=e.visible,e.disabled?this.mGoHomeBtn.removeInteractive():this.mGoHomeBtn.setInteractive()))},Object.defineProperty(PicaNavigatePanel.prototype,"isZh_CN",{get:function(){return"zh-CN"===c.i18n.language},enumerable:!1,configurable:!0}),PicaNavigatePanel.prototype.preload=function(){this.addAtlas(h.c.commonKey,h.d.commonUrl+".png",h.d.commonUrl+".json");var i="cn";this.isZh_CN||(i="en"),this.addAtlas(this.key_lang,"pica_navigate/pica_navigate_"+i+".png","pica_navigate/pica_navigate_"+i+".json"),e.prototype.preload.call(this)},PicaNavigatePanel.prototype.init=function(){this.mBackground=this.createImage(h.c.commonKey,"menu_bg"),this.mBackground.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mMapBtn=this.createButton(this.key_lang,"map_btn"),this.mShopBtn=this.createButton(this.key_lang,"shop_btn"),this.mBagBtn=this.createButton(this.key_lang,"bag_btn"),this.mFamilyBtn=this.createButton(this.key_lang,"family_btn"),this.mGoHomeBtn=this.createImage(this.key_lang,"home_btn").setInteractive(),this.mCloseBtn=this.createImage(h.c.commonKey,"close_1").setInteractive();var i,n=[this.mMapBtn,this.mShopBtn,this.mBagBtn,this.mFamilyBtn,this.mGoHomeBtn];this.add([this.mBackground]),this.add(n),this.add(this.mCloseBtn);for(var a=0;a<n.length;a++)0===a?n[a].x=10.33*this.dpr+.5*n[a].width:(i=n[a-1],n[a].x=i.x+12*this.dpr+.5*(n[a].width+i.width));var s=this.scale;this.resize(this.mBackground.width*s,this.mBackground.height*s),e.prototype.init.call(this)},PicaNavigatePanel.prototype.createButton=function(e,i){var n;return(n=this.isZh_CN?this.createImage(e,i):this.createSprite(e,i)).setInteractive(),n},PicaNavigatePanel.prototype.createImage=function(e,i){return this.scene.make.image({key:e,frame:i},!1)},PicaNavigatePanel.prototype.createSprite=function(e,i){var n=this.scene.make.sprite({key:this.key_lang,frame:i+"_1"});return this.scene.anims.create({key:i,frames:this.scene.anims.generateFrameNames(this.key_lang,{prefix:i+"_",frames:[1,3]}),duration:500,repeat:-1}),n.play(i),n},PicaNavigatePanel.prototype.onShowMapHandler=function(){this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_showPanel",l.ModuleName.PICAPARTYLIST_NAME)},PicaNavigatePanel.prototype.onShowShopHandler=function(){this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_showPanel",l.ModuleName.PICAMARKET_NAME)},PicaNavigatePanel.prototype.onShowBagHandler=function(){this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_showPanel",l.ModuleName.PICABAG_NAME)},PicaNavigatePanel.prototype.onShowFamilyHandler=function(){this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_showPanel",l.ModuleName.PICAGIFTEFFECT_NAME)},PicaNavigatePanel.prototype.onShowGoHomeHandler=function(){this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_goHome")},PicaNavigatePanel.prototype.onCloseHandler=function(){this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_close")},PicaNavigatePanel.prototype.checkUpdateActive=function(){var e=this;this.render.mainPeer.getActiveUIData(l.ModuleName.PICAHANDHELD_NAME).then((function(i){if(i)for(var n=0,a=i;n<a.length;n++){var s=a[n];e.updateUIState(s)}}))},PicaNavigatePanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewIllustratedItem",(function(){return m})),n.d(i,"PicaIllustratedItemButton",(function(){return f}));var a,s=n(0),o=n(789),h=n(790),l=n(791),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaNewIllustratedItem(i,n,a,l,c){var m=e.call(this,i,0,0,!0)||this;m.aniTweens=[],m.isplayingLight=!1,m.dpr=l,m.zoom=c,m.setSize(n,a),m.surveyImg=m.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_icon_base_1"}),m.surveyImg.y=.5*a-.5*m.surveyImg.height-7*l,m.surveyLight=m.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_icon_light"}),m.itemIcon=new o.DynamicImage(i,0,0),m.magnifyingImg=m.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_icon_magnifier"}),m.starImg=m.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_star1"}),m.starImg.y=.5*a-10*l,m.codeTex=m.scene.make.text({style:s.UIHelper.whiteStyle(l,10)}).setOrigin(.5),m.codeTex.y=m.starImg.y+10*l,m.discoveryTips=m.scene.make.text({text:s.i18n.t("illustrate.newdiscovery"),style:s.UIHelper.colorStyle("#FC1111",7*l)}),m.discoveryTips.x=.5*n-10*l,m.discoveryTips.y=.5*-a+15*l,m.discoveryTips.setStroke("#ffffff",2*l),m.discoveryTips.setFontStyle("bold"),m.discoveryTips.visible=!1,m.rarityTex=m.scene.make.text({text:s.i18n.t("common.rarity"),style:s.UIHelper.colorStyle("#18FF4E",7*l)}).setOrigin(0,.5),m.rarityTex.x=.5*-n,m.rarityTex.y=.5*-a+15*l,m.rarityTex.setStroke("#000000",2*l),m.rarityTex.setFontStyle("bold"),m.rarityTex.visible=!1,m.add([m.surveyImg,m.surveyLight,m.itemIcon,m.starImg,m.codeTex,m.magnifyingImg,m.rarityTex,m.discoveryTips]);for(var f=0,g=m.list;f<g.length;f++){g[f].y-=10*l}return m.enable=!0,m}return c(PicaNewIllustratedItem,e),PicaNewIllustratedItem.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearYoyoTween()},PicaNewIllustratedItem.prototype.setItemData=function(e,i){var n=this;if(void 0===i&&(i=!0),!this.itemData||this.itemData.id!==e.id||!this.isplayingLight){this.itemData=e,this.isplayingLight=!1,this.clearYoyoTween(),this.clearAniTweens();var a=s.Url.getOsdRes(e.texturePath);if(this.itemIcon.load(a,this,(function(){n.itemIcon.visible=!0})),this.itemIcon.scale=this.dpr/this.zoom,e){this.codeTex.text=i?e.code:e.name;var o=e.status;this.surveyLight.setFrame("illustrate_survey_icon_light"),this.rarityTex.visible=!1,this.surveyLight.visible=!1,this.magnifyingImg.visible=!1,this.discoveryTips.visible=!1,1===o?(this.surveyImg.setTexture(h.d.illustrate_new,"illustrate_survey_icon_base_1"),this.magnifyingImg.visible=!0,this.discoveryTips.visible=!0,this.itemIcon.alpha=.4):2===o?(this.surveyImg.setTexture(h.d.illustrate_new,"illustrate_survey_icon_base_1"),this.itemIcon.alpha=.4):3===o?(this.surveyImg.setTexture(h.d.illustrate_new,"illustrate_survey_icon_base_1"),this.itemIcon.alpha=1,this.playAni()):4===o&&(5===this.itemData.rarity&&(this.surveyLight.setFrame("illustrate_survey_icon_light_1"),this.rarityTex.visible=!0),this.surveyImg.setTexture(h.d.illustrate_new,"illustrate_survey_icon_base"),this.surveyLight.visible=!0,this.itemIcon.alpha=1),this.setStarImg(o,e.grade)}}},PicaNewIllustratedItem.prototype.playAni=function(){this.yoyoTween=this.scene.tweens.add({targets:this.itemIcon,y:{from:-2*this.dpr,to:2*this.dpr},ease:"Linear",duration:300,delay:0,yoyo:!0,repeat:-1})},PicaNewIllustratedItem.prototype.playLightAni=function(e){var i=this;this.clearYoyoTween(),this.itemIcon.y=0;var n=this.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_icon_base"});n.y=this.surveyImg.y,this.addAt(n,1),n.alpha=0;var a=this.createMask();this.surveyLight.mask=a.createGeometryMask(),this.setStarImg(4,this.itemData.grade),this.isplayingLight=!0,this.surveyLight.setFrame("illustrate_survey_icon_light");s.UIHelper.playAlphaTween(this.scene,n,0,1,500,void 0,0,new s.Handler(this,(function(){var o=.5*i.height+.5*i.surveyLight.height,h=-10*i.dpr;i.isplayingLight&&(i.surveyLight.visible=!0,i.surveyLight.y=o);s.UIHelper.playtPosYTween(i.scene,i.surveyLight,o,h,300,"Linear",0,new s.Handler(i,(function(){a.destroy(),n.destroy(),i.isplayingLight&&(i.surveyImg.setFrame("illustrate_survey_icon_base"),i.surveyLight.mask=void 0,5===i.itemData.rarity&&(i.surveyLight.setFrame("illustrate_survey_icon_light_1"),i.rarityTex.visible=!0)),e&&e.run()})))})))},PicaNewIllustratedItem.prototype.createMask=function(){var e=this.scene.make.graphics(void 0,!1);e.fillStyle(0,1),e.fillRect(.5*-this.width*this.zoom,.5*-this.height*this.zoom,this.width*this.zoom,this.height*this.zoom);var i=this.getWorldTransformMatrix();return e.x=i.tx,e.y=i.ty-30*this.dpr*this.zoom,e},PicaNewIllustratedItem.prototype.setStarImg=function(e,i){if(i>0){this.starImg.visible=!0;var n=(4!==e?"illustrate_survey_star_gray":"illustrate_survey_star")+i;this.starImg.setFrame(n)}else this.starImg.visible=!1},PicaNewIllustratedItem.prototype.clearYoyoTween=function(){this.yoyoTween&&(this.yoyoTween.stop(),this.yoyoTween.remove(),this.yoyoTween=void 0)},PicaNewIllustratedItem.prototype.clearAniTweens=function(){this.aniTweens.length=0,this.surveyLight.visible=!0;var e=-10*this.dpr;this.surveyLight.y=e,this.surveyLight.mask=void 0},PicaNewIllustratedItem}(o.ButtonEventDispatcher),f=function(e){function PicaIllustratedItemButton(i,n,a,o,l){var c=e.call(this,i,void 0,void 0,o,l,!1)||this;c.setSize(n,a),c.codeTex=c.scene.make.text({style:s.UIHelper.whiteStyle(o,10)}).setOrigin(0,.5),c.codeTex.x=.5*-c.width+9*o,c.codeTex.y=.5*c.height-4*o,c.star=c.scene.make.image({key:h.d.illustrate,frame:"illustrate_survey_star_empty"}),c.star.x=.5*c.width-.5*c.star.width-2*o,c.star.y=c.codeTex.y,c.star.visible=!1,c.surveyImg=c.scene.make.image({key:h.d.illustrate,frame:"illustrate_survey_nohave"}),c.add([c.codeTex,c.star,c.surveyImg]);for(var m=0,f=c.list;m<f.length;m++){f[m].y-=10*o}return c}return c(PicaIllustratedItemButton,e),PicaIllustratedItemButton.prototype.setItemData=function(i,n){(void 0===n&&(n=!0),e.prototype.setItemData.call(this,i,!1),i)&&(this.codeTex.text=n?i.code:i.name,4!==i.status?(this.bg.setTexture(h.d.illustrate,"illustrate_survey_nohave"),this.itemIcon.alpha=.4,this.star.alpha=.4):(this.bg.setTexture(h.d.uicommon,this.bgFrame),this.itemIcon.alpha=1,this.star.alpha=1),this.surveyImg.visible=!1)},PicaIllustratedItemButton}(l.ItemButton)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewIllustratedPanel",(function(){return X}));var a,s=n(790),o=n(2),h=n(0),l=n(792),c=n(1053),m=n(1050),f=n(804),g=n(1049),_=n(791),T=n(1048),x=n(1054),S=n(1045),j=n(1046),q=n(1047),Y=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),X=function(e){function PicaNewIllustratedPanel(i){var n=e.call(this,i)||this;return n.key=o.ModuleName.PICAILLUSTRATED_NEW_NAME,n.atlasNames=[s.d.uicommon,s.d.uicommon1,s.d.illustrate,s.d.illustrate_new],n.tempDatas={},n}return Y(PicaNewIllustratedPanel,e),PicaNewIllustratedPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;this.mBackground.x=.5*a,this.mBackground.y=.5*s,this.content.x=.5*a,this.content.y=.5*s,this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains),e.prototype.resize.call(this,a,s),this.setSize(a,s)},PicaNewIllustratedPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.listPanel&&this.listPanel.destroy(),this.detailPanel&&this.detailPanel.destroy()},PicaNewIllustratedPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.mBackground=new _.CommonBackground(this.scene,0,0,i,n),this.add(this.mBackground);var a=295*this.dpr,s=405*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(a,s),this.add([this.content]),this.resize(),e.prototype.init.call(this)},PicaNewIllustratedPanel.prototype.onShow=function(){this.openListPanel(),this.redObj&&this.setRedsState(this.redObj),this.autoOpenPanel()},PicaNewIllustratedPanel.prototype.setGallaryData=function(e){this.tempDatas.gallery=e,this.mInitialized&&this.detailPanel&&this.detailPanel.setGallaryData(e)},PicaNewIllustratedPanel.prototype.setDisplayCollectDatas=function(e){this.tempDatas.combinations=e,this.mInitialized&&(this.detailPanel&&this.detailPanel.setDisplayCollectDatas(e),this.checkCollectRewards(e))},PicaNewIllustratedPanel.prototype.setAlreadyCollectDatas=function(e){this.tempDatas.alreadycombinations=e,this.alreadyCollectPanel&&this.alreadyCollectPanel.setCombinationDatas(e)},PicaNewIllustratedPanel.prototype.setLevelGalleryGroups=function(e){this.levelRewardsPanel.setRewardsData(e)},PicaNewIllustratedPanel.prototype.setBadgeLevelDatas=function(e){this.collectBadgePanel.setBadgeDatas(e)},PicaNewIllustratedPanel.prototype.setRedsState=function(e){this.redObj=e,this.mInitialized&&(this.listPanel&&this.listPanel.setRedsState(this.redObj.redlist),this.detailPanel&&this.detailPanel.setRedsState(this.redObj[f.MainUIRedType.GALLERY]))},PicaNewIllustratedPanel.prototype.autoOpenPanel=function(){var e=this.showData;if(e&&"string"==typeof e){var i=e.split(":");"1"===i[0]&&(this.onListHandler("gallary"),this.detailPanel.setAutoOption(Number(i[1])))}},PicaNewIllustratedPanel.prototype.openListPanel=function(){this.showListPanel(),this.listPanel.setListData(),this.redObj&&this.listPanel.setRedsState(this.redObj.redlist)},PicaNewIllustratedPanel.prototype.showListPanel=function(){this.listPanel||(this.listPanel=new c.PicaNewIllustratedListPanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.listPanel.setHandler(new h.Handler(this,this.onListHandler)),this.content.add(this.listPanel)),this.listPanel.visible=!0},PicaNewIllustratedPanel.prototype.hideListPanel=function(){this.listPanel.visible=!1},PicaNewIllustratedPanel.prototype.openDetailPanel=function(){this.showDetailPanel(),this.tempDatas&&(this.tempDatas.gallery&&this.detailPanel.setGallaryData(this.tempDatas.gallery),this.tempDatas.combinations&&this.detailPanel.setDisplayCollectDatas(this.tempDatas.combinations)),this.redObj&&this.detailPanel.setRedsState(this.redObj[f.MainUIRedType.GALLERY])},PicaNewIllustratedPanel.prototype.showDetailPanel=function(){this.detailPanel||(this.detailPanel=new m.PicaNewIllustratedDetailPanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.detailPanel.setHandler(new h.Handler(this,this.onDetailHandler)),this.content.add(this.detailPanel)),this.detailPanel.resize(this.scaleWidth,this.scaleHeight),this.detailPanel.visible=!0},PicaNewIllustratedPanel.prototype.hideDetailPanel=function(){this.detailPanel.visible=!1},PicaNewIllustratedPanel.prototype.openFuriDetail=function(e,i){this.showFuriDetailPanel(i),this.furiDetail.setProp(e)},PicaNewIllustratedPanel.prototype.showFuriDetailPanel=function(e){var i=this;this.furiDetail||(this.furiDetail=new g.PicaNewFuriniDetailPanel(this.scene,this.render,334*this.dpr,353*this.dpr,this.dpr,this.scale),this.furiDetail.setHandler(new h.Handler(this,(function(){i.hideFuriDetailPanel(),e&&e.run()})))),this.content.add(this.furiDetail),this.furiDetail.visible=!0,this.furiDetail.refreshMask()},PicaNewIllustratedPanel.prototype.hideFuriDetailPanel=function(){this.content.remove(this.furiDetail),this.furiDetail.visible=!1},PicaNewIllustratedPanel.prototype.openCombinationPanel=function(e,i){this.showCombinationPanel(i),this.combinePanel.setGallaryData(e)},PicaNewIllustratedPanel.prototype.showCombinationPanel=function(e){var i=this;this.combinePanel||(this.combinePanel=new T.PicaNewCombinationPanel(this.scene,this.render,334*this.dpr,452*this.dpr,this.dpr,this.scale),this.combinePanel.setHandler(new h.Handler(this,(function(n,a){"close"===n&&e?e.runWith(a):i.onCombinationHandler(n,a)})))),this.content.add(this.combinePanel),this.combinePanel.visible=!0,this.combinePanel.refreshMask()},PicaNewIllustratedPanel.prototype.hideCombinationPanel=function(){this.content.remove(this.combinePanel),this.combinePanel.visible=!1},PicaNewIllustratedPanel.prototype.openLevelRewardsPanel=function(){this.showLevelRewardsPanel(),this.render.renderEmitter(this.key+"_getlevelexprewards")},PicaNewIllustratedPanel.prototype.showLevelRewardsPanel=function(){this.levelRewardsPanel||(this.levelRewardsPanel=new x.PicaNewLevelRewardsPanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.levelRewardsPanel.setHandler(new h.Handler(this,this.onLevelReceivedHandler))),this.content.add(this.levelRewardsPanel),this.levelRewardsPanel.visible=!0,this.levelRewardsPanel.refreshMask()},PicaNewIllustratedPanel.prototype.hideLevelRewardsPanel=function(){this.content.remove(this.levelRewardsPanel),this.levelRewardsPanel.visible=!1},PicaNewIllustratedPanel.prototype.openAlreadCollectedPanel=function(){this.showAlreadCollectedPanel(),this.render.renderEmitter(this.key+"_getcollectedrewards")},PicaNewIllustratedPanel.prototype.showAlreadCollectedPanel=function(){this.alreadyCollectPanel||(this.alreadyCollectPanel=new S.PicaNewAlreadyCollectedPanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.alreadyCollectPanel.setHandler(new h.Handler(this,this.onAlreadyCollectedHandler))),this.content.add(this.alreadyCollectPanel),this.alreadyCollectPanel.visible=!0,this.alreadyCollectPanel.refreshMask()},PicaNewIllustratedPanel.prototype.hideAlreadCollectedPanel=function(){this.content.remove(this.alreadyCollectPanel),this.alreadyCollectPanel.visible=!1},PicaNewIllustratedPanel.prototype.openCollectBadgePanel=function(){this.showCollectBadgePanel(),this.render.renderEmitter(this.key+"_getbadgelevelrewards")},PicaNewIllustratedPanel.prototype.showCollectBadgePanel=function(){this.collectBadgePanel||(this.collectBadgePanel=new j.PicaNewCollectBadgePanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.collectBadgePanel.setHandler(new h.Handler(this,this.onCollectBadgeHandler))),this.content.add(this.collectBadgePanel),this.collectBadgePanel.visible=!0,this.collectBadgePanel.refreshMask()},PicaNewIllustratedPanel.prototype.hideCollectBadgePanel=function(){this.content.remove(this.collectBadgePanel),this.collectBadgePanel.visible=!1},PicaNewIllustratedPanel.prototype.openCollectRewardsPanel=function(e){this.showCollectRewardsPanel(),this.collectRewardsPanel.setCombinationData(e)},PicaNewIllustratedPanel.prototype.showCollectRewardsPanel=function(){this.collectRewardsPanel||(this.collectRewardsPanel=new q.PicaNewCollectRewardsPanel(this.scene,334*this.dpr,455*this.dpr,this.dpr,this.scale),this.collectRewardsPanel.setHandler(new h.Handler(this,this.onCollectRewardsHandler))),this.content.add(this.collectRewardsPanel),this.collectRewardsPanel.show(),this.collectRewardsPanel.refreshMask()},PicaNewIllustratedPanel.prototype.checkCollectRewards=function(e){if(this.collectRewardsPanel&&this.collectRewardsPanel.visible){for(var i=!1,n=0,a=e;n<a.length;n++){var s=a[n];if(i=this.collectRewardsPanel.checkHasCombination(s))break}i||this.collectRewardsPanel.close()}},PicaNewIllustratedPanel.prototype.hideCollectRewardsPanel=function(){this.content.remove(this.collectRewardsPanel),this.collectRewardsPanel.hide()},PicaNewIllustratedPanel.prototype.onListHandler=function(e,i){"make"===e?this.render.renderEmitter(this.key+"_openpanel",e):"gallary"===e?(this.hideListPanel(),this.openDetailPanel()):"cooking"===e?this.render.renderEmitter(this.key+"_openpanel",e):"back"===e&&this.onCloseHandler()},PicaNewIllustratedPanel.prototype.onDetailHandler=function(e,i){"close"===e?(this.hideDetailPanel(),this.showListPanel()):"combinations"===e?this.openCombinationPanel(i,void 0):"furidetail"===e?(this.openFuriDetail(i),1===i.status&&this.render.renderEmitter(this.key+"_changeGalleryStatus",i.id)):"displaycollect"===e?this.render.renderEmitter(this.key+"_getdisplatcollectedlist"):"badgerewards"===e?(this.openCollectBadgePanel(),this.hideDetailPanel()):"showlevelrewards"===e?(this.openLevelRewardsPanel(),this.hideDetailPanel()):"showcombination"===e?(this.openCombinationPanel(i,void 0),this.hideDetailPanel()):"combinationrewards"===e?(this.openCollectRewardsPanel(i),this.hideDetailPanel()):"showalreadycollected"===e?(this.openAlreadCollectedPanel(),this.hideDetailPanel()):"getlightrewardsd"===e&&this.render.renderEmitter(this.key+"_getgallerylightrewards",i)},PicaNewIllustratedPanel.prototype.onCombinationHandler=function(e,i){var n=this;"furidetail"===e?(this.hideCombinationPanel(),this.openFuriDetail(i,new h.Handler(this,(function(){n.showCombinationPanel(void 0)})))):"close"===e&&(this.hideCombinationPanel(),this.showDetailPanel())},PicaNewIllustratedPanel.prototype.onLevelReceivedHandler=function(e,i){"back"===e?(this.hideLevelRewardsPanel(),this.showDetailPanel()):"rewards"===e?this.render.renderEmitter(this.key+"_getgalleryexprewards",i):"allrewards"===e&&this.render.renderEmitter(this.key+"_getallgalleryrewards")},PicaNewIllustratedPanel.prototype.onAlreadyCollectedHandler=function(e,i){var n=this;"close"===e?(this.hideAlreadCollectedPanel(),this.showDetailPanel()):"showcombination"===e&&(this.openCombinationPanel(i,new h.Handler(this,(function(){n.showAlreadCollectedPanel(),n.hideCombinationPanel()}))),this.hideAlreadCollectedPanel())},PicaNewIllustratedPanel.prototype.onCollectBadgeHandler=function(e,i){"close"===e?(this.hideCollectBadgePanel(),this.showDetailPanel()):"badgerewards"===e&&this.render.renderEmitter(this.key+"_getbadgerewards",i)},PicaNewIllustratedPanel.prototype.onCollectRewardsHandler=function(e,i){"close"===e?(this.hideCollectRewardsPanel(),this.showDetailPanel()):"combrewards"===e&&this.render.renderEmitter(this.key+"_getgatheringrewards",i)},PicaNewIllustratedPanel.prototype.onFuriDetailHandler=function(){this.hideFuriDetailPanel()},PicaNewIllustratedPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaNewIllustratedPanel}(l.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewMainPanel",(function(){return S}));var a,s=n(788),o=n(790),h=n(2),l=n(0),c=n(792),m=n(871),f=n(872),g=n(873),_=n(874),T=n(794),x=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),S=function(e){function PicaNewMainPanel(i){var n=e.call(this,i)||this;return n.isFold=!1,n.isSelfRoom=!1,n.redMap=new Map,n.atlasNames=[o.d.uicommon,o.d.iconcommon],n.key=h.ModuleName.PICANEWMAIN_NAME,n.maskLoadingEnable=!1,n}return x(PicaNewMainPanel,e),PicaNewMainPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;this.foldButton.x=15*this.dpr,this.foldButton.y=15*this.dpr+10*this.dpr,this.headPanel.x=.5*a,this.headPanel.y=.5*this.headPanel.height+20*this.dpr,this.leftPanel.x=.5*this.leftPanel.width+10*this.dpr,this.leftPanel.y=this.headPanel.height+.5*this.leftPanel.height+20*this.dpr,this.activityPanel.x=a-.5*this.activityPanel.width-10*this.dpr,this.activityPanel.y=this.headPanel.height+.5*this.activityPanel.height+0*this.dpr,e.prototype.resize.call(this,a,s)},PicaNewMainPanel.prototype.addListen=function(){e.prototype.addListen.call(this)},PicaNewMainPanel.prototype.removeListen=function(){e.prototype.removeListen.call(this)},PicaNewMainPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaNewMainPanel.prototype.hide=function(){e.prototype.hide.call(this)},PicaNewMainPanel.prototype.onShow=function(){this.checkUpdateActive(),this.tempDatas&&this.setRedsState(this.tempDatas)},PicaNewMainPanel.prototype.update=function(i){e.prototype.update.call(this)},PicaNewMainPanel.prototype.setPlayerInfo=function(e,i,n,a){this.headData={level:e,energy:i,money:n,diamond:a},this.mInitialized&&this.headPanel.setHeadData(e,i,n,a)},PicaNewMainPanel.prototype.setRoomInfo=function(e,i,n,a,s,o){void 0===o&&(o=!1),this.sceneData={sceneName:e,isPraise:n,people:a,roomType:s,isself:o},this.mInitialized&&(this.headPanel.setSceneData(e,i,n,a,s,o),this.isSelfRoom=o)},PicaNewMainPanel.prototype.updateUIState=function(e){this.mInitialized&&(this.activityPanel.updateUIState(e),this.leftPanel.updateUIState(e))},PicaNewMainPanel.prototype.setRedsState=function(e){this.tempDatas=e,this.mInitialized&&this.redMap.forEach((function(i,n){i.visible=-1!==e.indexOf(n)}))},PicaNewMainPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.foldButton=new s.Button(this.scene,o.d.uicommon,"home_retract"),this.foldButton.setInteractiveSize(50*this.dpr,50*this.dpr),this.foldButton.on(s.ClickEvent.Tap,this.onFoldButtonHandler,this),this.add(this.foldButton),this.headPanel=new g.PicaNewHeadPanel(this.scene,i,70*this.dpr,this.key,this.dpr),this.headPanel.setHandler(new l.Handler(this,this.onHeadHandler)),this.add(this.headPanel),this.leftPanel=new _.PicaNewLeftPanel(this.scene,40*this.dpr,170*this.dpr,this.key,this.dpr),this.leftPanel.setHandler(new l.Handler(this,this.onLeftHandler)),this.add(this.leftPanel),this.activityPanel=new m.PicaNewActivityPanel(this.render,this.scene,40*this.dpr,170*this.dpr,this.key,this.dpr),this.activityPanel.setHandler(new l.Handler(this,this.onActivityHandler)),this.add(this.activityPanel),this.chatPanel=new f.PicaNewChatPanel(this.scene,i,201*this.dpr,this.key,this.dpr),this.add(this.chatPanel),this.creatRedMap(),this.resize(i,n),e.prototype.init.call(this)},PicaNewMainPanel.prototype.fetchFoldButton=function(e){this.isFold=!e,this.onFoldButtonHandler()},PicaNewMainPanel.prototype.onInitialized=function(){this.headData&&this.headPanel.setHeadData(this.headData.level,this.headData.energy,this.headData.money,this.headData.diamond),this.sceneData&&this.headPanel.setSceneData(this.sceneData.sceneName,this.sceneData.isPraise,this.sceneData.people,this.sceneData.roomType,this.sceneData.isself)},PicaNewMainPanel.prototype.creatRedMap=function(){var e=this,i=this.activityPanel.redMap,n=this.leftPanel.redMap;i.forEach((function(i,n){var a=T.UITools.creatRedImge(e.scene,i);e.redMap.set(n,a)})),n.forEach((function(i,n){var a=T.UITools.creatRedImge(e.scene,i);e.redMap.set(n,a)}))},PicaNewMainPanel.prototype.onFoldButtonHandler=function(){this.isFold=!this.isFold,this.isFold?(this.foldButton.setFrameNormal("home_spread","home_spread"),this.headPanel.visible=!1,this.leftPanel.visible=!1,this.activityPanel.visible=!1):(this.foldButton.setFrameNormal("home_retract","home_retract"),this.headPanel.visible=!0,this.leftPanel.visible=!0,this.activityPanel.visible=!0)},PicaNewMainPanel.prototype.onHeadHandler=function(e,i){"head"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAPLAYERINFO_NAME):"energy"===e||("praise"===e?this.render.renderEmitter(h.EventType.QUERY_PRAISE,i):"recharge"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICARECHARGE_NAME):"room"===e?this.isSelfRoom&&this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_openhousepanel"):"party"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_querydecorate"):"online"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAONLINE_NAME):"tooqing"===e&&this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICASCENENAVIGATION_NAME))},PicaNewMainPanel.prototype.onLeftHandler=function(e,i){"maphome"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAPARTYNAVIGATION_NAME):"task"===e&&this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICATASK_NAME)},PicaNewMainPanel.prototype.onActivityHandler=function(e,i){"recharge"!==e&&"activity"!==e?"activity"===e||"indent"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAORDER_NAME):"recharge"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAFURNITURECOMPOSE_NAME):"email"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAMAIL_NAME):"roam"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAROAM_NAME):"shop"===e&&this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAMARKET_NAME):this.onNoticeHandler()},PicaNewMainPanel.prototype.onNavigateHandler=function(e,i){"bag"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICABAG_NAME):"friend"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAFRIEND_NAME):"avatar"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAAVATAR_NAME):"make"===e?this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAMANUFACTURE_NAME):"explore"===e&&this.render.renderEmitter(h.ModuleName.PICANEWMAIN_NAME+"_showpanel",h.ModuleName.PICAEXPLORELIST_NAME)},PicaNewMainPanel.prototype.checkUpdateActive=function(){var e=this;this.render.mainPeer.getActiveUIData(h.ModuleName.PICANEWMAIN_NAME).then((function(i){i&&e.updateUIState(i)}))},PicaNewMainPanel.prototype.onNoticeHandler=function(){var e={text:[{text:l.i18n.t("noticeTips.staytuned"),node:void 0}]};this.render.mainPeer.showMediator(h.ModuleName.PICANOTICE_NAME,!0,e)},PicaNewMainPanel}(c.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewMinePanel",(function(){return _}));var a,s=n(788),o=n(789),h=n(2),l=n(790),c=n(0),m=n(792),f=n(793),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaNewMinePanel(i){var n=e.call(this,i)||this;return n.itemButtons=[],n.key=h.ModuleName.PICANEWMINE_NAME,n.atlasNames=[l.d.uicommon,l.d.mine_new],n.UIType=s.UIType.Scene,n}return g(PicaNewMinePanel,e),PicaNewMinePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,0),this.blackGraphic.fillRect(0,0,a,s),this.content.x=.5*a,this.content.y=s+.5*this.content.height+10*this.dpr,this.content.setInteractive(),this.setInteractive(new Phaser.Geom.Rectangle(0,0,2*a,2*s),Phaser.Geom.Rectangle.Contains);var o=this.scaleHeight+.5*this.content.height+10*this.dpr,h=this.scaleHeight-.5*this.content.height-8*this.dpr;this.playMove(o,h)},PicaNewMinePanel.prototype.onShow=function(){this.render.renderEmitter(this.key+"_initialized"),this.setMineData(this.mineData),this.setPropDatas(this.itemDatas)},PicaNewMinePanel.prototype.addListen=function(){this.mInitialized&&(this.useButton.on(s.ClickEvent.Tap,this.onUseItemHandler,this),this.on("pointerup",this.OnCloseHandler,this))},PicaNewMinePanel.prototype.removeListen=function(){this.mInitialized&&(this.useButton.off(s.ClickEvent.Tap,this.onUseItemHandler,this),this.off("pointerup",this.OnCloseHandler,this))},PicaNewMinePanel.prototype.init=function(){var i=this;this.blackGraphic=this.scene.make.graphics(void 0,!1),this.add(this.blackGraphic),this.content=this.scene.make.container(void 0,!1),this.add(this.content),this.bg=this.scene.make.image({key:l.d.mine_new,frame:"mine_panel_bg"}),this.bottombg=this.scene.make.image({key:l.d.mine_new,frame:"mine_props_list_bg"}),this.bottombg.y=.5*this.bottombg.height;var n=this.bg.width,a=142*this.dpr;this.content.setSize(n,a),this.iconBg=this.scene.make.image({key:l.d.mine_new,frame:"mine_icon_bg"}),this.iconBg.x=.5*-n+.5*this.iconBg.width+8*this.dpr,this.iconBg.y=.5*-a+.5*this.iconBg.height+11*this.dpr,this.itemIcon=new o.DynamicImage(this.scene,this.iconBg.x,this.iconBg.y),this.durabilityText=this.scene.make.text({style:c.UIHelper.colorNumberStyle("#0075D0",12*this.dpr)}).setOrigin(.5),this.durabilityText.setStroke("#FFFFFF",2*this.dpr),this.durabilityText.x=this.itemIcon.x,this.durabilityText.y=this.iconBg.y+.5*this.iconBg.height+0*this.dpr,this.nameText=new s.BBCodeText(this.scene,0,0,"",c.UIHelper.whiteStyle(this.dpr,12)).setOrigin(0,.5),this.nameText.y=.5*-a+28*this.dpr,this.nameText.x=this.iconBg.x+.5*this.iconBg.width+15*this.dpr,this.scoreText=new s.BBCodeText(this.scene,0,0,"",c.UIHelper.colorStyle("#0075D0",11*this.dpr)).setOrigin(0,.5),this.scoreText.x=this.nameText.x,this.scoreText.y=this.nameText.y+20*this.dpr,this.useButton=new s.NineSliceButton(this.scene,0,0,97*this.dpr,38*this.dpr,l.d.uicommon,"yellow_btn_normal",c.i18n.t("common.use"),this.dpr,this.scale,c.UIHelper.button(this.dpr)),this.useButton.setTextStyle(c.UIHelper.brownishStyle(this.dpr,17)),this.useButton.setFontStyle("bold"),this.useButton.y=this.iconBg.y,this.useButton.x=.5*n-.5*this.useButton.width-20*this.dpr,this.gameScroll=new s.GameScroller(this.scene,{x:0,y:this.bottombg.y,width:n-4*this.dpr,height:80*this.dpr,zoom:this.scale,orientation:1,dpr:this.dpr,space:6*this.dpr,selfevent:!0,cellupCallBack:function(e){i.onGameScrollHandler(e)}}),this.content.add([this.bg,this.bottombg,this.iconBg,this.itemIcon,this.nameText,this.scoreText,this.useButton,this.durabilityText,this.gameScroll]),this.resize(),e.prototype.init.call(this)},PicaNewMinePanel.prototype.setMineData=function(e){if(this.mineData=e,this.mInitialized&&e){this.nameText.text="[b]"+e.name+" [color=#0075D0]"+e.lv+"[/color][color=#0075D0][size="+8*this.dpr+"]"+c.i18n.t("级")+"[/size][/color][/b]",this.scoreText.text="[color=#0075D0]"+c.i18n.t("mine.integraltips")+" [b]"+e.score+"[/b][/color]",this.durabilityText.text=e.durability+"/"+e.maxDurability;var i=c.Url.getOsdRes(e.icon);this.itemIcon.load(i),this.itemIcon.scale=this.dpr/this.scale}},PicaNewMinePanel.prototype.setPropDatas=function(e){if((e=e||[]).length<6&&(e=e.concat(new Array(6-e.length))),this.itemDatas=e,this.mInitialized&&e){for(var i=0,n=this.itemButtons;i<n.length;i++){(s=n[i]).visible=!1}for(var a=0;a<e.length;a++){var s=void 0;a<this.itemButtons.length?s=this.itemButtons[a]:(s=new f.ItemButton(this.scene,void 0,void 0,this.dpr,this.scale,!1),this.gameScroll.addItem(s),this.itemButtons.push(s)),s.setItemData(e[a]),s.visible=!0}this.gameScroll.Sort()}},PicaNewMinePanel.prototype.playMove=function(e,i){var n=this,a=this.scene.tweens.add({targets:this.content,y:{from:e,to:i},ease:"Linear",duration:150,onComplete:function(){a.stop(),a.remove(),n.gameScroll.refreshMask()}})},PicaNewMinePanel.prototype.onUseItemHandler=function(){this.curItem&&(this.render.renderEmitter(h.ModuleName.PICANEWROLE_NAME+"_useprop",this.curItem.itemData),this.OnCloseHandler())},PicaNewMinePanel.prototype.onGameScrollHandler=function(e){e.itemData&&(this.curItem&&(this.curItem.select=!1),e.select=!0,this.curItem=e)},PicaNewMinePanel.prototype.OnCloseHandler=function(){this.render.renderEmitter(this.key+"_hide")},PicaNewMinePanel}(m.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewRolePanel",(function(){return _}));var a,s=n(788),o=n(789),h=n(2),l=n(790),c=n(0),m=n(792),f=n(791),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaNewRolePanel(i){var n=e.call(this,i)||this;return n.followed=!1,n.key=h.ModuleName.PICANEWROLE_NAME,n.atlasNames=[l.d.uicommon,l.d.people_action],n.UIType=s.UIType.Scene,n}return g(PicaNewRolePanel,e),PicaNewRolePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.66),this.blackGraphic.fillRect(0,0,a,s),this.content.x=.5*a,this.content.y=s+.5*this.content.height+10*this.dpr,this.content.setInteractive(),this.setInteractive(new Phaser.Geom.Rectangle(0,0,2*a,2*s),Phaser.Geom.Rectangle.Contains);var o=this.scaleHeight+.5*this.content.height+10*this.dpr,h=this.scaleHeight-.5*this.content.height;this.playMove(o,h)},PicaNewRolePanel.prototype.onShow=function(){this.render.renderEmitter(this.key+"_initialized"),this.setRoleData(this.roleData),this.setFollowButton(this.followed)},PicaNewRolePanel.prototype.addListen=function(){this.mInitialized&&(this.openBigBtn.on(s.ClickEvent.Tap,this.onOpeningCharacterHandler,this),this.followBtn.on(s.ClickEvent.Tap,this.onFollowHandler,this),this.tradingBtn.on(s.ClickEvent.Tap,this.onTradingHandler,this),this.on("pointerup",this.OnCloseHandler,this))},PicaNewRolePanel.prototype.removeListen=function(){this.mInitialized&&(this.openBigBtn.off(s.ClickEvent.Tap,this.onOpeningCharacterHandler,this),this.followBtn.off(s.ClickEvent.Tap,this.onFollowHandler,this),this.tradingBtn.off(s.ClickEvent.Tap,this.onTradingHandler,this),this.off("pointerup",this.OnCloseHandler,this))},PicaNewRolePanel.prototype.init=function(){var i=this.scaleWidth,n=87*this.dpr;this.blackGraphic=this.scene.make.graphics(void 0,!1),this.add(this.blackGraphic),this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.add(this.content),this.bg=new o.ThreeSlicePath(this.scene,0,0,i,87*this.dpr,l.d.people_action,["people_panel_bg_left","people_panel_bg_middle","people_panel_bg_right"],this.dpr),this.bg.y=.5*n-.5*this.bg.height,this.content.add(this.bg),this.headAvatar=new o.UIDragonbonesDisplay(this.scene,this.render),this.headAvatar.x=.5*-i+60*this.dpr,this.headAvatar.y=35*this.dpr,this.headAvatar.scale=2*this.dpr,this.headAvatar.visible=!1,this.content.add(this.headAvatar),this.nameImage=new f.ImageValue(this.scene,60*this.dpr,20*this.dpr,l.d.people_action,"people_woman",this.dpr),this.nameImage.setOffset(-this.dpr,0),this.nameImage.setTextStyle(c.UIHelper.whiteStyle(this.dpr,14)),this.nameImage.setLayout(1),this.nameImage.setText(""),this.nameImage.x=this.headAvatar.x+70*this.dpr,this.nameImage.y=.5*-n+15*this.dpr,this.content.add(this.nameImage),this.levelLabel=this.scene.make.text({x:this.nameImage.x-8*this.dpr,y:this.nameImage.y+20*this.dpr,text:"",style:c.UIHelper.whiteStyle(this.dpr)}),this.levelLabel.setOrigin(0,.5),this.content.add(this.levelLabel),this.openBigBtn=new s.Button(this.scene,l.d.people_action,"people_minute","people_minute"),this.openBigBtn.setSize(20*this.dpr,20*this.dpr),this.openBigBtn.removeInteractive(),this.openBigBtn.setInteractive(),this.openBigBtn.y=.5*-n+15*this.dpr,this.openBigBtn.x=.5*i-20*this.dpr,this.content.add(this.openBigBtn);var a=["butt_yellow_left_s","butt_yellow_middle_s","butt_yellow_right_s"];this.followBtn=new o.ThreeSliceButton(this.scene,84*this.dpr,31*this.dpr,l.d.uicommon,a,a,c.i18n.t("player_info.follow")),this.followBtn.setTextStyle(c.UIHelper.brownishStyle(this.dpr)),this.followBtn.y=.5*n-.5*this.followBtn.height-5*this.dpr,this.followBtn.x=.5*-this.followBtn.width+20*this.dpr,this.content.add(this.followBtn);var h=["butt_red_left_s","butt_red_middle_s","butt_red_right_s"];this.tradingBtn=new o.ThreeSliceButton(this.scene,84*this.dpr,31*this.dpr,l.d.uicommon,h,h,c.i18n.t("player_info.trading")),this.tradingBtn.setTextStyle(c.UIHelper.brownishStyle(this.dpr)),this.tradingBtn.y=this.followBtn.y,this.tradingBtn.x=.5*this.tradingBtn.width+40*this.dpr,this.content.add(this.tradingBtn),this.actionContanier=new T(this.scene,this.dpr,this.scale),this.actionContanier.setHandler(new c.Handler(this,this.onPeopleActionHandler)),this.actionContanier.y=.5*-this.content.height-.5*this.actionContanier.height-10*this.dpr,this.actionContanier.x=40*this.dpr,this.content.add(this.actionContanier),this.resize(),e.prototype.init.call(this)},PicaNewRolePanel.prototype.setRoleData=function(e){if(this.roleData=e,this.mInitialized&&this.roleData){var i=h.AvatarSuitType.getSuitsFromItem(e.avatarSuit),n={id:e.id,avatar:i.avatar};this.headAvatar.visible=!1,this.headAvatar.setSuits(i.suits),this.headAvatar.visible=!0,this.headAvatar.load(n,void 0,!1),this.nameImage.setFrameValue(e.nickname,l.d.people_action,"people_man"),this.levelLabel.text=c.i18n.t("common.lv")+" "+e.level.level;var a=["butt_gray_left_s","butt_gray_middle_s","butt_gray_right_s"];this.tradingBtn.setFrameNormal(a,a),this.tradingBtn.setTextColor("#000000"),this.tradingBtn.setEnable(!1,!1)}},PicaNewRolePanel.prototype.setActionDatas=function(e){this.actionContanier.setActionDatas(e)},PicaNewRolePanel.prototype.setFollowButton=function(e){this.followed=e,this.mInitialized&&this.followBtn.setText(e?c.i18n.t("friendlist.unfollow"):c.i18n.t("friendlist.follow"))},PicaNewRolePanel.prototype.playMove=function(e,i){var n=this,a=this.scene.tweens.add({targets:this.content,y:{from:e,to:i},ease:"Linear",duration:150,onComplete:function(){a.stop(),a.remove(),n.actionContanier.refreshMask()}})},PicaNewRolePanel.prototype.onOpeningCharacterHandler=function(){this.render.renderEmitter(h.ModuleName.PICANEWROLE_NAME+"_openingcharacter",this.roleData),this.OnCloseHandler()},PicaNewRolePanel.prototype.onFollowHandler=function(){void 0!==this.roleData&&this.render.renderEmitter(h.ModuleName.PICANEWROLE_NAME+"_followcharacter",{uid:this.roleData.cid,follow:this.followed})},PicaNewRolePanel.prototype.onTradingHandler=function(){this.render.renderEmitter(h.ModuleName.PICANEWROLE_NAME+"_tradingcharacter",this.roleData)},PicaNewRolePanel.prototype.onPeopleActionHandler=function(e){this.render.renderEmitter(this.key+"_peopleaction",e)},PicaNewRolePanel.prototype.OnCloseHandler=function(){this.render.renderEmitter(this.key+"_hide")},PicaNewRolePanel}(m.PicaBasePanel),T=function(e){function PeopleActionContainer(i,n,a){var h=e.call(this,i)||this;return h.dpr=n,h.background=h.scene.make.image({key:l.d.people_action,frame:"people_action_bg"}),h.setSize(h.background.width,h.background.height),h.add(h.background),h.zoom=a,h.gamescroller=new s.GameScroller(h.scene,{x:0,y:0,width:h.width,height:h.height,zoom:a,dpr:h.dpr,align:2,orientation:1,space:10*h.dpr,selfevent:!0,padding:{left:3*h.dpr},cellupCallBack:function(e){h.onActionHandler(e)},celldownCallBack:function(e){h.tween=new o.TweenCompent(h.scene,e,{scale:.88,pingpang:!1}),h.tween.zoomIn()}}),h.gamescroller.on("pointerup",(function(){h.tween&&h.tween.zoomOut(!0)}),h),h.gamescroller.on("pointerout",(function(){h.tween&&h.tween.zoomOut(!0)}),h),h.add(h.gamescroller),h.setInteractive(),h}return g(PeopleActionContainer,e),PeopleActionContainer.prototype.refreshMask=function(){this.gamescroller.refreshMask()},PeopleActionContainer.prototype.setActionDatas=function(e){for(var i=.5*-this.width+6*this.dpr,n=0;n<e.length;n++){var a=e[n],o=a.texturePath,h=new s.Button(this.scene,l.d.people_action,o);h.x=i+.5*h.width+(h.width+8*this.dpr)*n,h.action=a,h.on(s.ClickEvent.Tap,this.onActionHandler,this),h.disInteractive(),this.gamescroller.addItem(h)}this.gamescroller.Sort()},PeopleActionContainer.prototype.setHandler=function(e){this.actionHandler=e},PeopleActionContainer.prototype.onActionHandler=function(e){this.actionHandler&&this.actionHandler.runWith(e.action)},PeopleActionContainer}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNoticePanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(2),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaNoticePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.isbigbg=!1,n.key=h.ModuleName.PICANOTICE_NAME,n}return c(PicaNoticePanel,e),PicaNoticePanel.prototype.show=function(e){var i=this;if(e&&Array.isArray(e)&&e.length>0&&(e=e[0]),this.mShowData=e,e&&e.display&&e.display.length>0&&(this.isbigbg=!0),this.mInitialized){if(e){var n=e.text;this.mContent&&n&&n.length>0&&(this.mContent.setText(n[0].text),this.isbigbg&&(this.mContent.y=.5*-this.bg.height+.5*this.mContent.height+2*this.dpr));var a=e.display;if(this.imageIcon&&a&&a.length>0){var s=l.Url.getOsdRes(a[0].texturePath);this.imageIcon.load(s,this,(function(){i.imageIcon.scale=i.dpr,i.mContent&&""!==i.mContent.text&&(i.imageIcon.y=.5*i.bg.height-.5*i.imageIcon.displayHeight-2*i.dpr)}))}this.scene.cameras.main.width;var o=2e3;e.time&&e.time.length>0&&(o=1e3*e.time),o+=500,this.scene.tweens.timeline({targets:this,duration:500,tweens:[{y:"-="+20*this.dpr,ease:"Bounce.easeOut"},{delay:o,y:"-="+20*this.dpr,ease:"Linear",alpha:0}],onComplete:function(){i.render.renderEmitter(h.RENDER_PEER+"_"+i.key+"_close")}});var c="center";if(e.data&&e.data.length>0){c=["left","center","right"][e.data]}this.mContent.setAlign(c);var m=this.mContent.height/(32*this.dpr);m=m<1?1:m,this.bg.scaleY=m}}else this.preload()},PicaNoticePanel.prototype.resize=function(){this.x=this.scene.cameras.main.width/2,this.y=170*this.dpr},PicaNoticePanel.prototype.preload=function(){var i=this.isbigbg?"pica_notice/bg_big.png":"pica_notice/bg.png",n=this.isbigbg?"pica_notice_bg_big":"pica_notice_bg";this.addImage(n,i),e.prototype.preload.call(this)},PicaNoticePanel.prototype.init=function(){var i=this.isbigbg?"pica_notice_bg_big":"pica_notice_bg";this.bg=this.scene.make.image({key:i},!1),this.bg.scaleY=3,this.mContent=new s.BBCodeText(this.mScene,0,0,"",{fontSize:16*this.dpr+"px",fontFamily:l.Font.DEFULT_FONT,stroke:"#000000",strokeThickness:1*this.dpr,align:"center",textMask:!1,shadow:{offsetX:0,offsetY:0,color:"#000",blur:4,stroke:!0,fill:!0},wrap:{mode:"char",width:this.bg.width*this.scale-12*this.dpr}}).setOrigin(.5,.5),this.mContent.setFontStyle("bold"),this.add([this.bg,this.mContent]),this.isbigbg&&(this.imageIcon=new o.DynamicImage(this.scene,0,0),this.add(this.imageIcon)),e.prototype.init.call(this),this.mScene.layerManager.addToLayer(o.MainUIScene.LAYER_TOOLTIPS,this),this.resize()},PicaNoticePanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaOnlinePanel",(function(){return T}));var a,s=n(789),o=n(790),h=n(2),l=n(0),c=n(792),m=n(788),f=n(1055),g=n(791),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),T=function(e){function PicaOnlinePanel(i){var n=e.call(this,i)||this;return n.key=h.ModuleName.PICAONLINE_NAME,n.atlasNames=[o.d.uicommon],n}return _(PicaOnlinePanel,e),PicaOnlinePanel.prototype.resize=function(e,i){this.scale;var n=this.scaleWidth,a=this.scaleHeight;this.mBackground.clear(),this.mBackground.fillStyle(118271,1),this.mBackground.fillRect(0,0,this.content.width,a),this.mBackground.x=.5*-this.content.width,this.mBackground.y=.5*-a,this.content.x=n+.5*this.content.width+10*this.dpr,this.content.y=.5*a,this.bottomPanel.x=.5*n,this.bottomPanel.y=.5*a,this.setSize(n,a)},PicaOnlinePanel.prototype.addListen=function(){this.mInitialized&&this.mBlack.on("pointerup",this.onCloseHandler,this)},PicaOnlinePanel.prototype.removeListen=function(){this.mInitialized&&this.mBlack.off("pointerup",this.onCloseHandler,this)},PicaOnlinePanel.prototype.destroy=function(){this.removeListen(),e.prototype.destroy.call(this)},PicaOnlinePanel.prototype.setOnlineDatas=function(e,i,n){this.onlineData=e,this.userid=n,this.people=i,this.mInitialized&&(this.peopleImg.setText(i+""),this.mGameGrid.setItems(e))},PicaOnlinePanel.prototype.setBlackList=function(e){this.blackList=e||[],this.mInitialized&&this.refreshBottomPanel()},PicaOnlinePanel.prototype.setAvatarList=function(e){for(var i=0,n=this.onlineData;i<n.length;i++)for(var a=n[i],s=0,o=e;s<o.length;s++){var h=o[s],l=h._id,c=h.avatar;a.platformId===l&&(a.avatar=c)}this.mInitialized&&this.mGameGrid.refresh()},PicaOnlinePanel.prototype.onInitialized=function(){this.onlineData&&this.mGameGrid.setItems(this.onlineData),this.people&&this.peopleImg.setText(this.people+"")},PicaOnlinePanel.prototype.init=function(){var i=this;if(!this.mInitialized){var n=this.scaleWidth,a=this.scaleHeight;this.mBlack=this.scene.make.graphics(void 0,!1),this.mBlack.fillStyle(0,.66),this.mBlack.fillRect(0,0,n,a),this.mBlack.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.add(this.mBlack),this.mBackground=this.scene.make.graphics(void 0,!1),this.content=this.scene.make.container(void 0,!1);var s=237*this.dpr;this.content.setSize(s,a),this.content.setInteractive(),this.bg=this.scene.make.image({key:o.d.uicommon,frame:"online_bg"}),this.bg.displayWidth=s,this.bg.y=.5*-a+.5*this.bg.height,this.titleTex=this.scene.make.text({x:0,y:0,text:l.i18n.t("online.title"),style:l.UIHelper.whiteStyle(this.dpr,18)}).setOrigin(0,.5),this.titleTex.setFontStyle("bold"),this.titleTex.x=.5*-this.content.width+10*this.dpr,this.titleTex.y=.5*-this.content.height+35*this.dpr,this.peopleImg=new g.ImageValue(this.scene,50*this.dpr,20*this.dpr,o.d.uicommon,"online_people",this.dpr),this.peopleImg.setOffset(-this.dpr,0),this.peopleImg.setTextStyle(l.UIHelper.whiteStyle(this.dpr,14)),this.peopleImg.setLayout(3),this.peopleImg.setText("1000"),this.peopleImg.x=.5*this.content.width-30*this.dpr,this.peopleImg.y=this.titleTex.y;var h=new l.Handler(this,this.onSimpleHandler),c={x:0,y:25*this.dpr,table:{width:s,height:a-40*this.dpr,columns:1,cellWidth:s,cellHeight:50*this.dpr,reuseCellContainer:!0,zoom:this.scale},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,n){e.scene;var a=e.index,s=e.item;return null===n&&(n=new x(i.scene,o.d.uicommon,i.dpr)).setHandler(h),n.setPlayerInfo(s,a),n}};this.mGameGrid=new m.GameGridTable(this.scene,c),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",this.onGridTableHandler,this),this.content.add([this.mBackground,this.bg,this.titleTex,this.peopleImg,this.mGameGrid]),this.add(this.content),this.bottomPanel=new f.PicaOnlineBottomPanel(this.scene,n,a,o.d.uicommon,this.dpr),this.bottomPanel.setHandler(new l.Handler(this,this.onBottomPanelHandler)),this.add(this.bottomPanel),this.bottomPanel.visible=!1,this.resize(0,0),e.prototype.init.call(this),this.playMove()}},PicaOnlinePanel.prototype.onGridTableHandler=function(e){var i=e.playerData;this.render.renderEmitter(this.key+"_openingcharacter",i.platformId)},PicaOnlinePanel.prototype.playMove=function(){var e=this,i=this.scaleWidth,n=i+.5*this.content.width+10*this.dpr,a=i-.5*this.content.width,s=this.scene.tweens.add({targets:this.content,x:{from:n,to:a},ease:"Linear",duration:300,onComplete:function(){s.stop(),s.remove(),e.mGameGrid.resetMask()}})},PicaOnlinePanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaOnlinePanel.prototype.onSimpleHandler=function(e){if(e.platformId===this.userid)this.render.renderEmitter(this.key+"_openingcharacter",e.platformId);else{this.add(this.bottomPanel),this.bottomPanel.show();var i=-1!==this.blackList.indexOf(e.platformId);this.bottomPanel.setRoleData(e,i)}},PicaOnlinePanel.prototype.refreshBottomPanel=function(){if(this.bottomPanel.visible){var e=this.bottomPanel.roleData.platformId,i=-1!==this.blackList.indexOf(e);this.bottomPanel.refreshBlack(i)}},PicaOnlinePanel.prototype.onBottomPanelHandler=function(e,i){"report"===e||("block"===e?this.render.renderEmitter(this.key+"_block",i):"close"===e&&this.closeBottomPanel())},PicaOnlinePanel.prototype.closeBottomPanel=function(){this.bottomPanel.hide(),this.remove(this.bottomPanel)},PicaOnlinePanel}(c.PicaBasePanel),x=function(e){function OnlineItem(i,n,a){var h=e.call(this,i,0,0)||this;return h.key=n,h.dpr=a,h.setSize(237*a,48*a),h.headicon=new s.DynamicImage(h.scene,0,0),h.headicon.x=.5*-h.width+10*h.dpr,h.headicon.y=0,h.headicon.scale=.8*h.dpr,h.headicon.visible=!1,h.add(h.headicon),h.nameImage=new g.ImageValue(h.scene,60*h.dpr,20*h.dpr,h.key,"people_woman",h.dpr),h.nameImage.setOffset(-h.dpr,0),h.nameImage.setTextStyle(l.UIHelper.whiteStyle(h.dpr,14)),h.nameImage.setLayout(1),h.nameImage.setText(""),h.nameImage.x=h.headicon.x+70*h.dpr,h.nameImage.y=.5*-h.height+15*h.dpr,h.add(h.nameImage),h.levelLabel=h.scene.make.text({x:h.nameImage.x-8*h.dpr,y:h.nameImage.y+20*h.dpr,text:"",style:l.UIHelper.whiteStyle(h.dpr)}),h.levelLabel.setOrigin(0,.5),h.add(h.levelLabel),h.vipImage=new g.ImageValue(h.scene,60*h.dpr,20*h.dpr,h.key,"people_woman",h.dpr),h.vipImage.setOffset(-h.dpr,0),h.vipImage.setTextStyle(l.UIHelper.whiteStyle(h.dpr,14)),h.vipImage.setLayout(1),h.vipImage.setText(""),h.vipImage.x=h.levelLabel.x+70*h.dpr,h.vipImage.y=.5*-h.width+15*h.dpr,h.line=h.scene.make.image({key:o.d.uicommon,frame:"online_divider"}),h.line.y=.5*h.height,h.add(h.line),h.simpleButton=new m.Button(h.scene,h.key,"online_more"),h.simpleButton.on(m.ClickEvent.Tap,h.onSimpleClickHandler,h),h.simpleButton.x=.5*h.width-.5*h.simpleButton.width-10*a,h.add(h.simpleButton),h}return _(OnlineItem,e),OnlineItem.prototype.setPlayerInfo=function(e){var i=this;if(this.playerData=e,this.nameImage.setText(e.nickname),this.levelLabel.text=l.i18n.t("common.lv")+" "+e.level.level,this.headicon.visible=!1,e.avatar){var n=l.Url.getOsdRes(e.avatar);this.headicon.load(n,this,(function(){i.headicon.x=.5*-i.width+.5*i.headicon.displayWidth+10*i.dpr,i.headicon.visible=!0}))}},OnlineItem.prototype.setHandler=function(e){this.sendHandler=e},OnlineItem.prototype.onSimpleClickHandler=function(){this.sendHandler&&this.sendHandler.runWith(this.playerData)},OnlineItem}(s.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaOpenPartyPanel",(function(){return _}));var a,s=n(1),o=n(788),h=n(789),l=n(2),c=n(0),m=n(790),f=n(875),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},_=function(e){function PicaOpenPartyPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.uiManager=i,n.key=l.ModuleName.PICAOPENPARTY_NAME,n}return g(PicaOpenPartyPanel,e),PicaOpenPartyPanel.prototype.resize=function(e,i){this.scale;var n=this.scaleWidth,a=this.scaleHeight;this.content.x=.5*n,this.content.y=.5*a,this.setSize(n,a),this.partyCreatePanel.resize()},PicaOpenPartyPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.addListen()):this.preload())},PicaOpenPartyPanel.prototype.addListen=function(){this.mInitialized&&this.closeBtn.on("pointerup",this.onCloseHandler,this)},PicaOpenPartyPanel.prototype.removeListen=function(){this.mInitialized&&this.closeBtn.off("pointerup",this.onCloseHandler,this)},PicaOpenPartyPanel.prototype.destroy=function(){this.removeListen(),e.prototype.destroy.call(this)},PicaOpenPartyPanel.prototype.setPartyData=function(e,i){return void 0===i&&(i=!0),__awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(a){switch(a.label){case 0:return this.settingBtn.visible=i,[4,this.render.mainPeer.getRoomUserName()];case 1:return n=a.sent(),this.partyCreatePanel.setPartyData(e,n,Math.ceil(this.render.mainPeer.getClockNow()/1e3)),e.created?this.partyBtn.setText(c.i18n.t("party.partymgr")):this.partyBtn.setText(c.i18n.t("main_ui.party")),[2]}}))}))},PicaOpenPartyPanel.prototype.preload=function(){this.addAtlas(this.key,"party/party.png","party/party.json"),this.addAtlas(m.c.commonKey,m.d.commonUrl+".png",m.d.commonUrl+".json"),this.addAtlas(m.c.common2Key,m.d.common2Url+".png",m.d.common2Url+".json"),e.prototype.preload.call(this)},PicaOpenPartyPanel.prototype.init=function(){if(!this.mInitialized){var i=this.scaleWidth,n=this.scaleHeight;this.mBackground=this.scene.make.graphics(void 0,!1),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,i,n),Phaser.Geom.Rectangle.Contains),this.mBackground.fillStyle(0,.66),this.mBackground.fillRect(0,0,i,n),this.add(this.mBackground),this.content=this.scene.make.container(void 0,!1);var a=295*this.dpr,s=450*this.dpr;this.content.setSize(a,s),this.bg=new o.NineSlicePatch(this.scene,0,0,a,s,m.c.common2Key,"bg",{left:20*this.dpr,top:20*this.dpr,right:20*this.dpr,bottom:60*this.dpr}),this.content.add(this.bg),this.closeBtn=this.scene.make.image({x:.5*this.bg.width-5*this.dpr,y:.5*-this.bg.height+5*this.dpr,key:m.c.commonKey,frame:"close"}).setScale(1.3),this.closeBtn.setInteractive(),this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.content.add([this.closeBtn]),this.partyBtn=this.createTabButton(c.i18n.t("main_ui.party")),this.settingBtn=this.createTabButton(c.i18n.t("common.setting")),this.partyBtn.setPosition(.5*-this.partyBtn.width-2*this.dpr,.5*-this.content.height-.5*this.partyBtn.height+3*this.dpr),this.settingBtn.setPosition(.5*this.settingBtn.width+2*this.dpr,this.partyBtn.y),this.topCheckBox=new h.CheckboxGroup,this.topCheckBox.appendItemAll([this.partyBtn,this.settingBtn]),this.topCheckBox.on("selected",this.onTabBtnHandler,this),this.content.add([this.partyBtn,this.settingBtn]),this.partyCreatePanel=new f.PicaOpenPartyCreatePanel(this.uiManager,0,0,this.content.width-20*this.dpr,this.content.height-70*this.dpr,this.key,this.dpr,this.scale),this.partyCreatePanel.on("openparty",this.onOpenPartyHandler,this),this.partyCreatePanel.on("showtips",this.showPanelHandler,this),this.partyCreatePanel.on("querytheme",this.onQueryThemeHandler,this),this.partyCreatePanel.y=0,this.content.add(this.partyCreatePanel),this.add(this.content),this.resize(0,0),e.prototype.init.call(this),this.topCheckBox.selectIndex(0)}},PicaOpenPartyPanel.prototype.onTabBtnHandler=function(e){this.partyBtn===e?(this.partyCreatePanel.show(),this.onQueryThemeHandler()):this.partyCreatePanel.hide(),this.settingBtn},PicaOpenPartyPanel.prototype.createTabButton=function(e){var i=new o.TabButton(this.scene,m.c.common2Key,"default_tab","check_tab",e);return i.tweenEnable=!1,i.setTextStyle({fontFamily:c.Font.DEFULT_FONT,fontSize:16*this.dpr,color:"#ffffff"}),i.setTextOffset(0,0),i},PicaOpenPartyPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(l.ModuleName.PICAOPENPARTY_NAME+"_close")},PicaOpenPartyPanel.prototype.onOpenPartyHandler=function(e,i,n,a,s){this.render.renderEmitter(l.ModuleName.PICAOPENPARTY_NAME+"_queryopen",{topic:e,name:i,des:n,ticket:a}),this.render.renderEmitter(l.ModuleName.PICAOPENPARTY_NAME+"_close"),this.showPanelHandler("PicaNotice",s?c.i18n.t("party.modifytips"):c.i18n.t("party.opentips"))},PicaOpenPartyPanel.prototype.showPanelHandler=function(e,i){if(this.mWorld){var n=new s.op_client.OP_VIRTUAL_WORLD_RES_CLIENT_SHOW_UI;n.text=[{text:i,node:void 0}],this.render.mainPeer.showMediator(e,!0,n)}},PicaOpenPartyPanel.prototype.onQueryThemeHandler=function(){this.render.renderEmitter(l.ModuleName.PICAOPENPARTY_NAME+"_querytheme")},PicaOpenPartyPanel}(h.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaPartyListPanel",(function(){return _}));var a,s=n(788),o=n(789),h=n(790),l=n(2),c=n(0),m=n(1057),f=n(1056),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaPartyListPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=l.ModuleName.PICAPARTYLIST_NAME,n}return g(PicaPartyListPanel,e),PicaPartyListPanel.prototype.resize=function(e,i){this.scale;var n=this.scaleWidth,a=this.scaleHeight;this.content.x=.5*n,this.content.y=.5*a+20*this.dpr,this.setSize(n,a)},PicaPartyListPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.addListen()):this.preload())},PicaPartyListPanel.prototype.addListen=function(){this.mInitialized&&this.closeBtn.on("pointerup",this.onCloseHandler,this)},PicaPartyListPanel.prototype.removeListen=function(){this.mInitialized&&this.closeBtn.off("pointerup",this.onCloseHandler,this)},PicaPartyListPanel.prototype.destroy=function(){this.removeListen(),e.prototype.destroy.call(this)},PicaPartyListPanel.prototype.setPartyListData=function(e,i){void 0===i&&(i=!0),this.mPartyData=e,this.partyNavigationPanel.setPartyDataList(e)},PicaPartyListPanel.prototype.setOnlineProgress=function(e){this.partyNavigationPanel.setSignProgress(e)},PicaPartyListPanel.prototype.setRoomListData=function(e){this.myRoomNavigationPanel.setRoomDataList(e)},PicaPartyListPanel.prototype.preload=function(){this.addAtlas(this.key,"party/party.png","party/party.json"),this.addAtlas(h.c.commonKey,h.d.commonUrl+".png",h.d.commonUrl+".json"),this.addAtlas(h.c.common2Key,h.d.common2Url+".png",h.d.common2Url+".json"),e.prototype.preload.call(this)},PicaPartyListPanel.prototype.init=function(){if(!this.mInitialized){var i=this.scaleWidth,n=this.scaleHeight;this.mBackground=this.scene.make.graphics(void 0,!1),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,i,n),Phaser.Geom.Rectangle.Contains),this.mBackground.fillStyle(0,.66),this.mBackground.fillRect(0,0,i,n),this.add(this.mBackground),this.content=this.scene.make.container(void 0,!1);var a=295*this.dpr,l=490*this.dpr;this.content.setSize(a,l),this.bg=new s.NineSlicePatch(this.scene,0,0,a,l,h.c.commonKey,"bg",{left:20*this.dpr,top:20*this.dpr,right:20*this.dpr,bottom:60*this.dpr}),this.content.add(this.bg),this.closeBtn=this.scene.make.image({x:.5*this.bg.width-5*this.dpr,y:.5*-this.bg.height+5*this.dpr,key:h.c.commonKey,frame:"close"}).setScale(1.3),this.closeBtn.setInteractive(),this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.content.add([this.closeBtn]),this.navigationBtn=this.createTabButton(c.i18n.t("party.navigation")),this.mineBtn=this.createTabButton(c.i18n.t("party.mine")),this.navigationBtn.setPosition(-this.navigationBtn.width-2*this.dpr,.5*-this.content.height-.5*this.navigationBtn.height+5*this.dpr),this.mineBtn.setPosition(this.navigationBtn.x+this.navigationBtn.width+2*this.dpr,this.navigationBtn.y),this.topCheckBox=new o.CheckboxGroup,this.topCheckBox.appendItemAll([this.navigationBtn,this.mineBtn]),this.topCheckBox.on("selected",this.onTabBtnHandler,this),this.content.add([this.navigationBtn,this.mineBtn]),this.add(this.content),this.resize(0,0),e.prototype.init.call(this),this.topCheckBox.selectIndex(0)}},PicaPartyListPanel.prototype.onTabBtnHandler=function(e){this.navigationBtn===e?(this.openPartyNavigationPanel(),this.hideRoomNavigationPanel(),this.render.renderEmitter(this.key+"_querylist"),this.render.renderEmitter(this.key+"_questprogress")):this.mineBtn===e?(this.openRoomNavigationPanel(),this.hidePartyNavigationPanel(),this.render.renderEmitter(this.key+"_getMyRoomList")):this.searchBtn},PicaPartyListPanel.prototype.openPartyNavigationPanel=function(){this.partyNavigationPanel||(this.partyNavigationPanel=new m.PicaOldPartyNavigationPanel(this.scene,this.content.width-40*this.dpr,this.content.height-40*this.dpr,this.key,this.dpr,this.scale),this.partyNavigationPanel.setHandler(new c.Handler(this,this.onPartyListHandler)),this.partyNavigationPanel.y=0*this.dpr,this.partyNavigationPanel.on("questreward",this.onProgressRewardHandler,this)),this.content.add(this.partyNavigationPanel),this.partyNavigationPanel.refreshMask()},PicaPartyListPanel.prototype.hidePartyNavigationPanel=function(){this.partyNavigationPanel&&this.content.remove(this.partyNavigationPanel)},PicaPartyListPanel.prototype.openRoomNavigationPanel=function(){this.myRoomNavigationPanel||(this.myRoomNavigationPanel=new f.PicaMyRoomNavigationPanel(this.scene,this.content.width-40*this.dpr,this.content.height-34*this.dpr,this.key,this.dpr,this.scale),this.myRoomNavigationPanel.setHandler(new c.Handler(this,this.onEnterRoomHandler)),this.myRoomNavigationPanel.y=-10*this.dpr),this.content.add(this.myRoomNavigationPanel),this.myRoomNavigationPanel.refreshMask()},PicaPartyListPanel.prototype.hideRoomNavigationPanel=function(){this.myRoomNavigationPanel&&(this.myRoomNavigationPanel.clear(),this.content.remove(this.myRoomNavigationPanel))},PicaPartyListPanel.prototype.createTabButton=function(e){var i=new s.TabButton(this.scene,h.c.common2Key,"default_tab_s","check_tab_s",e);return i.tweenEnable=!1,i.setTextStyle({fontFamily:c.Font.DEFULT_FONT,fontSize:16*this.dpr,color:"#ffffff"}),i},PicaPartyListPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaPartyListPanel.prototype.onPartyListHandler=function(e,i){"hotel"!==e&&"pictown"!==e&&"partylist"!==e||this.render.renderEmitter(this.key+"_queryenter",i.roomId)},PicaPartyListPanel.prototype.onProgressRewardHandler=function(e){this.render.renderEmitter(this.key+"_questreward",e)},PicaPartyListPanel.prototype.onEnterRoomHandler=function(e){this.render.renderEmitter(this.key+"_queryenter",e)},PicaPartyListPanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoomBaseListItem",(function(){return f})),n.d(i,"PicaRoomListItem",(function(){return g})),n.d(i,"PicaMyRoomListItem",(function(){return _}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(791),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaRoomBaseListItem(i,n){var a=e.call(this,i)||this;return a.dpr=n,a.bg=a.scene.make.image({key:h.d.map,frame:"map_party_list_bg"}),a.setSize(a.bg.width,a.bg.height),a.roomName=new s.BBCodeText(a.scene,0,0,"",l.UIHelper.colorStyle("#FFFFFF",14*n)).setOrigin(0,.5),a.playerCount=new c.ImageBBCodeValue(i,30*n,20*n,h.d.map,"map_party_people",n,l.UIHelper.colorStyle("#FFFFFF",13*n)),a.add([a.bg,a.roomName,a.playerCount]),a.init(),a}return m(PicaRoomBaseListItem,e),PicaRoomBaseListItem.prototype.setRoomData=function(e){this.roomData=e,this.roomName.text=e.name,this.playerCount.setText(e.playerCount)},PicaRoomBaseListItem.prototype.setHandler=function(e){this.send=e},PicaRoomBaseListItem.prototype.init=function(){},PicaRoomBaseListItem.prototype.layout=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i]},PicaRoomBaseListItem}(Phaser.GameObjects.Container),g=function(e){function PicaRoomListItem(){return null!==e&&e.apply(this,arguments)||this}return m(PicaRoomListItem,e),PicaRoomListItem.prototype.setRoomData=function(e){this.roomData=e,this.roomName.text=e.name,this.ownerName.setText(e.ownerName),this.playerCount.setText(e.playerCount)},PicaRoomListItem.prototype.init=function(){this.imagIcon=new o.DynamicImage(this.scene,0,0),this.imagIcon.setTexture("map_room_icon"),this.ownerName=new c.ImageBBCodeValue(this.scene,50*this.dpr,20*this.dpr,h.d.map,"map_party_homeowners",this.dpr,l.UIHelper.colorStyle("#242AC1",12*this.dpr)),this.add([this.imagIcon,this.ownerName]),this.layout()},PicaRoomListItem.prototype.layout=function(){this.imagIcon.x=.5*-this.width+.5*this.imagIcon.width+8*this.dpr,this.imagIcon.y=0,this.roomName.x=this.imagIcon.x+.5*this.imagIcon.width+10*this.dpr,this.roomName.y=-11*this.dpr,this.ownerName.x=this.roomName.x+.5*this.ownerName.width,this.ownerName.y=11*this.dpr,this.playerCount.x=.5*this.width-35*this.dpr},PicaRoomListItem}(f),_=function(e){function PicaMyRoomListItem(){return null!==e&&e.apply(this,arguments)||this}return m(PicaMyRoomListItem,e),PicaMyRoomListItem.prototype.setRoomData=function(e){this.roomData=e,this.defaultIcon.visible=!1,this.unlockTips.visible=!1,this.playerCount.visible=!1,this.unlockBtn.visible=!1,e.created?(this.roomName.text=e.name,this.playerCount.setText(e.playerCount),this.bg.setTexture(h.d.map,"map_party_list_bg"),this.defaultIcon.visible=e.isDefaultroom,this.playerCount.visible=!0,this.roomName.y=0):(this.unlockBtn.visible=!0,this.roomName.text=l.i18n.t("party.myroomnametips",{name:l.NumberUtils.NumberConvertZHCN(e.serial)}),e.unlocked?(this.unlockBtn.setFrameNormal("multiple_rooms_unlock"),this.roomName.y=0,this.bg.setTexture(h.d.map,"map_party_list_bg"),this.unlockBtn.setInteractive()):(this.unlockBtn.setFrameNormal("multiple_rooms_lock"),this.unlockTips.text=l.i18n.t("party.roomunlocktips",{name:e.unlocklevel}),this.roomName.y=-11*this.dpr,this.unlockTips.visible=!0,this.bg.setTexture(h.d.multiple_rooms,"multiple_rooms_unlock_bg"),this.unlockBtn.disInteractive()))},PicaMyRoomListItem.prototype.init=function(){this.defaultIcon=this.scene.make.image({key:h.d.multiple_rooms,frame:"multiple_rooms_current"}),this.unlockTips=this.scene.make.text({style:l.UIHelper.colorStyle("#242AC1",12*this.dpr)}).setOrigin(0,.5),this.unlockBtn=new s.Button(this.scene,h.d.multiple_rooms,"multiple_rooms_lock","multiple_rooms_lock"),this.unlockBtn.on(s.ClickEvent.Tap,this.onUnlockBtnHandler,this),this.add([this.defaultIcon,this.unlockTips,this.unlockBtn]),this.layout()},PicaMyRoomListItem.prototype.layout=function(){this.defaultIcon.x=.5*-this.width+.5*this.defaultIcon.width+10*this.dpr,this.defaultIcon.y=0,this.roomName.x=.5*-this.width+32*this.dpr,this.roomName.y=-11*this.dpr,this.playerCount.x=.5*this.width-32*this.dpr,this.unlockTips.x=this.roomName.x,this.unlockTips.y=11*this.dpr,this.unlockBtn.x=.5*this.width-.5*this.unlockBtn.width-15*this.dpr},PicaMyRoomListItem.prototype.onUnlockBtnHandler=function(){this.send&&this.send.run()},PicaMyRoomListItem}(f)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaPartyNavigationPanel",(function(){return j}));var a,s=n(788),o=n(789),h=n(2),l=n(0),c=n(877),m=n(876),f=n(792),g=n(790),_=n(1058),T=n(791),x=n(1059),S=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),j=function(e){function PicaPartyNavigationPanel(i){var n=e.call(this,i)||this;return n.toggleItems=[],n.key=h.ModuleName.PICAPARTYNAVIGATION_NAME,n.atlasNames=[g.d.map,g.d.multiple_rooms],n.textures=[{atlasName:"town_entrance_1",folder:g.d.map},{atlasName:"map_room_icon",folder:g.d.map}],n}return S(PicaPartyNavigationPanel,e),PicaPartyNavigationPanel.prototype.resize=function(e,i){var n=this.scaleWidth,a=this.scaleHeight;this.blackBg.clear(),this.blackBg.fillStyle(0,.66),this.blackBg.fillRect(0,0,n,a),this.content.x=.5*-this.content.width-10*this.dpr,this.content.y=.5*a,this.setSize(n,a)},PicaPartyNavigationPanel.prototype.onShow=function(){var e=this.mShowData||1;if(this.onToggleButtonHandler(void 0,this.toggleItems[e-1]),this.tempDatas)if(1===this.optionType||4===this.optionType)this.setNavigationListData(this.tempDatas);else if(2===this.optionType)this.setRoomListData(this.tempDatas);else if(3===this.optionType)for(var i=0,n=this.myRoomDatas;i<n.length;i++){var a=n[i];this.setSelfRoomListData(a)}this.progressData&&this.setOnlineProgress(this.progressData)},PicaPartyNavigationPanel.prototype.setPartyListData=function(e,i){void 0===i&&(i=!0),this.tempDatas=e},PicaPartyNavigationPanel.prototype.setNavigationListData=function(e){this.tempDatas=e,this.townPanel&&this.townPanel.setTownDatas(e)},PicaPartyNavigationPanel.prototype.setOnlineProgress=function(e){this.progressData=e,this.signProgressPanel&&this.signProgressPanel.setProgressDatas(e)},PicaPartyNavigationPanel.prototype.setRoomListData=function(e){this.tempDatas=e,this.roomPanel&&this.roomPanel.setRoomDatas(e)},PicaPartyNavigationPanel.prototype.setSelfRoomListData=function(e){this.myRoomDatas.push(e),this.myRoomPanel&&this.myRoomPanel.setRoomDatas(e),this.render.emitter.emit(PicaPartyNavigationPanel.PICASELFROOM_DATA)},PicaPartyNavigationPanel.prototype.setRoomTypeDatas=function(e){this.roomTypePanel&&this.roomTypePanel.setRoomTypeDatas(e)},PicaPartyNavigationPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaPartyNavigationPanel.prototype.onHide=function(){e.prototype.onHide.call(this),this.render.emitter.emit(PicaPartyNavigationPanel.PicaPartyNavigationPanel_CLOSE)},PicaPartyNavigationPanel.prototype.init=function(){var i=this;if(!this.mInitialized){var n=this.scaleWidth,a=this.scaleHeight;this.blackBg=this.scene.make.graphics(void 0,!1),this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.blackBg.on("pointerup",this.onCloseHandler,this),this.add(this.blackBg),this.content=this.scene.make.container(void 0,!1);var s=300*this.dpr,h=a;this.content.setSize(s,h),this.bg=new T.CommonBackground(this.scene,0,0,s,h),this.tilteName=this.scene.make.text({text:l.i18n.t("partynav.onlinetips"),style:l.UIHelper.colorStyle("#FFF449",12*this.dpr)}),this.tilteName.setOrigin(0,.5),this.tilteName.setFontStyle("bold"),this.tilteName.x=.5*-s+17*this.dpr,this.tilteName.y=.5*-h+40*this.dpr,this.signProgressPanel=new q(this.scene,s,45*this.dpr,g.d.map,this.dpr),this.signProgressPanel.y=this.tilteName.y+.5*this.signProgressPanel.height+13*this.dpr,this.signProgressPanel.setHandler(new l.Handler(this,this.onProgressHandler)),this.tooqingoption=new X(this.scene,this.dpr),this.tooqingoption.setOptionDatas({text:l.i18n.t("partynav.pica"),type:1},{text:l.i18n.t("partynav.tooqing"),type:2}),this.tooqingoption.setHandler(new l.Handler(this,this.onTooqingOptionHandler)),this.tooqingoption.y=this.signProgressPanel.y+.5*this.signProgressPanel.height+.5*this.tooqingoption.height+10*this.dpr,this.toggleCon=this.scene.make.container(void 0,!1),this.toggleCon.y=this.tooqingoption.y+.5*this.tooqingoption.height+20*this.dpr,this.add(this.toggleCon),this.optionLine=this.scene.make.image({key:g.d.map,frame:"map_nav_line"}),this.optionLine.displayHeight=2*this.dpr,this.selectLine=this.scene.make.image({key:g.d.map,frame:"map_nav_select"}),this.toggleCon.add([this.optionLine,this.selectLine]),this.itemtips=new o.ItemInfoTips(this.scene,121*this.dpr,46*this.dpr,g.d.uicommon,"tips_bg",this.dpr),this.itemtips.setVisible(!1),this.content.add([this.bg,this.tilteName,this.signProgressPanel,this.tooqingoption,this.toggleCon]),this.createOptionButtons(),this.add([this.content,this.itemtips]),this.resize(0,0),e.prototype.init.call(this),this.render.renderEmitter(this.key+"_questprogress"),this.playMove(new l.Handler(this,(function(){i.signProgressPanel.refreshMask(),i.townPanel&&i.townPanel.refreshMask(),i.myRoomPanel&&i.myRoomPanel.refreshMask(),i.roomPanel&&i.roomPanel.refreshMask()})),new l.Handler(this,(function(){i.townPanel&&i.townPanel.refreshMask(),i.myRoomPanel&&i.myRoomPanel.refreshMask(),i.roomPanel&&i.roomPanel.refreshMask()})))}},PicaPartyNavigationPanel.prototype.createOptionButtons=function(){for(var e=[{text:l.i18n.t("player_info.room"),type:2},{text:l.i18n.t("partynav.town"),type:1},{text:l.i18n.t("party.mine"),type:3}],i=272*this.dpr,n=i/e.length,a=20*this.dpr,h=-i/2,c=0;c<e.length;c++){var m=e[c],f=new o.ToggleColorButton(this.scene,n,20*this.dpr,this.dpr,m.text);f.on(s.ClickEvent.Tap,this.onToggleButtonHandler,this),f.x=h+.5*n,f.setData("item",m.type),f.setSize(n,a),this.toggleCon.add(f),f.setChangeColor("#FFF449"),f.setFontSize(14*this.dpr),h+=n,this.toggleItems.push(f)}this.optionLine.y=20*this.dpr,this.selectLine.y=this.optionLine.y},PicaPartyNavigationPanel.prototype.openTownNavigationPanel=function(){if(!this.townPanel){var e=.5*this.scaleHeight-this.toggleCon.y-22*this.dpr;this.townPanel=new c.PicaTownNavigationPanel(this.scene,274*this.dpr,e,this.dpr,this.scale),this.townPanel.setHandler(new l.Handler(this,this.onTownHandler)),this.townPanel.y=this.toggleCon.y+.5*e+25*this.dpr,this.content.add(this.townPanel)}this.townPanel.show(),this.townPanel.refreshMask()},PicaPartyNavigationPanel.prototype.hideTownNavigationPanel=function(){this.townPanel&&this.townPanel.hide()},PicaPartyNavigationPanel.prototype.openMyRoomPanel=function(){if(!this.myRoomPanel){var e=.5*this.scaleHeight-this.toggleCon.y-22*this.dpr;this.myRoomPanel=new m.PicaMyNavigationPanel(this.render,this.scene,274*this.dpr,e,this.dpr,this.scale),this.myRoomPanel.y=this.toggleCon.y+.5*e+25*this.dpr,this.myRoomPanel.setHandler(new l.Handler(this,this.onMyRoomHandler)),this.content.add(this.myRoomPanel)}this.myRoomPanel.show(),this.myRoomPanel.refreshMask()},PicaPartyNavigationPanel.prototype.hideMyRoomPanel=function(){this.myRoomPanel&&this.myRoomPanel.hide()},PicaPartyNavigationPanel.prototype.openRoomPanel=function(){if(!this.roomPanel){var e=.5*this.scaleHeight-this.toggleCon.y-18*this.dpr;this.roomPanel=new _.PicaRoomNavigationPanel(this.scene,274*this.dpr,e,this.dpr,this.scale),this.roomPanel.setHandler(new l.Handler(this,this.onRoomHandler)),this.roomPanel.y=this.toggleCon.y+.5*e-60*this.dpr,this.content.add(this.roomPanel)}this.roomPanel.visible=!0,this.roomPanel.refreshMask(),this.roomPanel.clearDatas()},PicaPartyNavigationPanel.prototype.hideRoomPanel=function(){this.roomPanel&&(this.roomPanel.visible=!1)},PicaPartyNavigationPanel.prototype.openRoomTypePanel=function(){if(!this.roomTypePanel){var e=this.scaleHeight;this.roomTypePanel=new x.PicaRoomTypePanel(this.scene,this.scaleWidth,e,this.dpr,this.scale),this.roomTypePanel.setHandler(new l.Handler(this,this.onRoomTypeHandler)),this.roomTypePanel.y=.5*this.scaleHeight,this.roomTypePanel.x=.5*this.scaleWidth,this.add(this.roomTypePanel)}this.roomTypePanel.visible=!0,this.roomTypePanel.refreshMask(),this.render.renderEmitter(this.key+"_getRoomTypeList")},PicaPartyNavigationPanel.prototype.hideRoomTypePanel=function(){this.roomTypePanel&&(this.roomTypePanel.visible=!1)},PicaPartyNavigationPanel.prototype.onToggleButtonHandler=function(e,i){this.curToggleItem!==i&&(this.curToggleItem&&(this.curToggleItem.isOn=!1),this.curToggleItem=i,this.optionType=i.getData("item"),this.selectLine.x=i.x,i.isOn=!0,this.hideTownNavigationPanel(),this.hideRoomPanel(),this.hideMyRoomPanel(),1===this.optionType||4===this.optionType?(this.openTownNavigationPanel(),this.render.renderEmitter(this.key+"_getnavigatelist",this.optionType)):2===this.optionType?(this.openRoomPanel(),this.render.renderEmitter(this.key+"_getRoomList",{page:1,perPage:100})):3===this.optionType&&(this.myRoomDatas=[],this.openMyRoomPanel(),this.render.renderEmitter(this.key+"_getMyRoomList")))},PicaPartyNavigationPanel.prototype.onTooqingOptionHandler=function(e){var i;i=1===e?[{text:l.i18n.t("player_info.room"),type:2},{text:l.i18n.t("partynav.town"),type:1},{text:l.i18n.t("party.mine"),type:3}]:[{text:l.i18n.t("partynav.hot"),type:4}];for(var n=0,a=this.toggleItems;n<a.length;n++){(o=a[n]).visible=!1}for(var s=0;s<i.length;s++){var o,h=i[s];(o=this.toggleItems[s]).setData("item",h.type),o.setText(h.text),o.visible=!0}this.curToggleItem&&(this.curToggleItem.isOn=!1,this.curToggleItem=void 0),this.onToggleButtonHandler(void 0,this.toggleItems[0])},PicaPartyNavigationPanel.prototype.onTownHandler=function(e,i){"enter"===e&&this.render.renderEmitter(this.key+"_queryenter",i)},PicaPartyNavigationPanel.prototype.onProgressHandler=function(e,i){if(this.progressData){var n=i.progressData;n.received||(n.targetValue<=this.progressData.currentProgressValue?this.render.renderEmitter(this.key+"_questreward",e):(this.itemtips.setItemData(n.rewards[0]),this.showItemTipsState(i)))}},PicaPartyNavigationPanel.prototype.onRoomHandler=function(e,i){"enter"===e?this.onEnterRoomHandler(i):"query"===e&&this.render.renderEmitter(this.key+"_getRoomList",{page:i,perPage:100})},PicaPartyNavigationPanel.prototype.onMyRoomHandler=function(e,i){"enter"===e?this.onEnterRoomHandler(i):"query"===e?this.render.renderEmitter(this.key+"_getMyRoomList"):"roomtype"===e&&(this.myRoomPanel.visible=!1,this.openRoomTypePanel())},PicaPartyNavigationPanel.prototype.onEnterRoomHandler=function(e){this.render.renderEmitter(this.key+"_queryenter",e)},PicaPartyNavigationPanel.prototype.onRoomTypeHandler=function(e){this.myRoomPanel.visible=!0,this.hideRoomTypePanel(),"close"!==e&&this.render.renderEmitter(this.key+"_createroom",e)},PicaPartyNavigationPanel.prototype.showItemTipsState=function(e,i){void 0===i&&(i=50*this.dpr);var n=this.itemtips.x,a=this.itemtips.y;this.setTipsPosition(e,i),n!==this.itemtips.x||a!==this.itemtips.y?this.itemtips.setVisible(!0):this.itemtips.setVisible(!this.itemtips.visible)},PicaPartyNavigationPanel.prototype.setTipsPosition=function(e,i){void 0===i&&(i=0);for(var n=e.x,a=e.y,s=e;s.parentContainer!==this;)n+=s.parentContainer.x,a+=s.parentContainer.y,s=s.parentContainer;n-.5*this.itemtips.width<0?this.itemtips.x=.5*this.itemtips.width+10*this.dpr:n+.5*this.itemtips.width>this.content.width?this.itemtips.x=this.content.width-.5*this.itemtips.width-20*this.dpr:this.itemtips.x=n,this.itemtips.y=a+.5*this.itemtips.height+10*this.dpr+i},PicaPartyNavigationPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaPartyNavigationPanel.prototype.playMove=function(e,i){var n=.5*-this.content.width-10*this.dpr,a=.5*this.content.width,s=this.scene.tweens.add({targets:this.content,x:{from:n,to:a},ease:"Linear",duration:300,onComplete:function(){s.stop(),s.remove(),e&&e.run()},onUpdate:function(){i&&i.run()}})},PicaPartyNavigationPanel.PicaPartyNavigationPanel_CLOSE="PicaPartyNavigationPanel_CLOSE",PicaPartyNavigationPanel.PICASELFROOM_DATA="PICASELFROOM_DATA",PicaPartyNavigationPanel}(f.PicaBasePanel),q=function(e){function SignProgressPanel(i,n,a,h,c){var m=e.call(this,i)||this;return m.progressItems=[],m.setSize(n,a),m.dpr=c,m.key=h,m.progress=new o.ProgressMaskBar(i,h,"map_online_progress_bottom","map_online_progress_top"),m.add(m.progress),m.text=new s.BBCodeText(i,.5*m.width-13*c,-35*c,"",l.UIHelper.whiteStyle(c,10)).setOrigin(1,.5),m.add(m.text),m}return S(SignProgressPanel,e),SignProgressPanel.prototype.refreshMask=function(){this.progress.refreshMask()},SignProgressPanel.prototype.setProgressDatas=function(e){for(var i=e.steps.length,n=100/(i-1),a=this.progress.width-37*this.dpr,s=0,o=0,h=0,l=0;l<i;l++){var c=e.steps[l],m=void 0;l<this.progressItems.length?m=this.progressItems[l]:(m=new Y(this.scene,0,0,this.key,this.dpr),this.add(m),this.progressItems.push(m),m.setHandler(this.receiveHandler)),m.x=.5*-a+(i>1?a*l/(i-1):.5*a),m.y=0,m.setItemData(c,l,e.currentProgressValue),c.targetValue<=e.currentProgressValue?l>0&&(o+=n):0===s&&(o+=n*(e.currentProgressValue-h)/(c.targetValue-h),s=c.targetValue),h=c.targetValue}this.progress.setProgress(o,100),this.initCountDown(s-e.currentProgressValue,h===s)},SignProgressPanel.prototype.setHandler=function(e){this.receiveHandler=e},SignProgressPanel.prototype.destroy=function(){clearInterval(this.timerID),e.prototype.destroy.call(this)},SignProgressPanel.prototype.initCountDown=function(e,i){var n=this;this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0);var timeextu=function(){var i=Math.floor(e/60),a=e%60,s=(i<10?"0"+i:i+"")+":"+(a<10?"0"+a:a+"");n.text.text=l.i18n.t("party.progresstips")+"[color=#FFF449]"+s+"[/color]",--e>0?n.timerID=setTimeout((function(){timeextu()}),1e3):(n.text.text="",n.timerID=void 0)};timeextu()},SignProgressPanel}(Phaser.GameObjects.Container),Y=function(e){function SignProgressItem(i,n,a,h,l){var c=e.call(this,i,n,a)||this;return c.dpr=l,c.bg=new s.Button(i,h,"map_online_undone_frame","map_online_undone_frame"),c.icon=new o.DynamicImage(i,0,0),c.finishIcon=i.make.image({key:h,frame:"map_online_Check"}),c.finishIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.balckgraphic=i.make.graphics(void 0,!1),c.balckgraphic.clear(),c.balckgraphic.fillStyle(0,.5),c.balckgraphic.fillCircle(0,0,16*l),c.add([c.bg,c.icon,c.balckgraphic,c.finishIcon]),c.finishIcon.visible=!1,c}return S(SignProgressItem,e),SignProgressItem.prototype.setItemData=function(e,i,n){var a=this;if(this.progressData=e,this.index=i,e.rewards&&e.rewards.length>0){var o=l.Url.getOsdRes(e.rewards[0].display.texturePath);this.icon.load(o,this,(function(){a.icon.scale=1,a.icon.scaleY=29*a.dpr/a.icon.displayHeight,a.icon.scaleX=a.icon.scaleY}))}this.finishIcon.visible=!1,this.balckgraphic.visible=!1,e.targetValue<=n?(this.bg.setFrameNormal("map_online_receive_frame","map_online_receive_frame"),e.received&&(this.finishIcon.visible=!0,this.balckgraphic.visible=!0),this.icon.clearTint()):(this.bg.setFrameNormal("map_online_undone_frame","map_online_undone_frame"),this.icon.setTint(9145210)),e.received?this.bg.off(String(s.ClickEvent.Tap),this.onReceiveHandler,this):(this.bg.off(String(s.ClickEvent.Tap),this.onReceiveHandler,this),this.bg.on(String(s.ClickEvent.Tap),this.onReceiveHandler,this))},SignProgressItem.prototype.setHandler=function(e){this.receiveHandler=e},SignProgressItem.prototype.onReceiveHandler=function(){this.receiveHandler&&this.receiveHandler.runWith([this.index,this])},SignProgressItem}(Phaser.GameObjects.Container),X=function(e){function TooQingChangeOption(i,n){var a=e.call(this,i)||this;a.leftBtn=new s.Button(i,g.d.map,"map_nav_picktown","map_nav_picktown",l.i18n.t("partynav.pica"),void 0,n),a.leftBtn.tweenEnable=!1,a.leftBtn.setTextStyle(l.UIHelper.colorStyle("#9D6000",14*n)),a.leftBtn.setFontStyle("bold"),a.rightBtn=new s.Button(i,g.d.map,"map_nav_tooqing","map_nav_tooqing",l.i18n.t("partynav.tooqing"),void 0,n),a.rightBtn.tweenEnable=!1,a.rightBtn.setTextStyle(l.UIHelper.colorStyle("#B0A9FF",14*n)),a.rightBtn.setFontStyle("bold");var o=a.leftBtn.width+a.rightBtn.width-14*n;return a.leftBtn.x=.5*-a.leftBtn.width+7*n,a.rightBtn.x=.5*a.rightBtn.width-7*n,a.leftBtn.on(s.ClickEvent.Tap,a.onLeftHandler,a),a.rightBtn.on(s.ClickEvent.Tap,a.onRightHandler,a),a.setSize(o,a.leftBtn.height),a.add([a.leftBtn,a.rightBtn]),a}return S(TooQingChangeOption,e),TooQingChangeOption.prototype.setHandler=function(e){this.send=e},TooQingChangeOption.prototype.setOptionDatas=function(e,i){this.leftBtn.setText(e.text),this.leftBtn.setData("optiontype",e.type),this.rightBtn.setText(i.text),this.rightBtn.setData("optiontype",i.type)},TooQingChangeOption.prototype.onLeftHandler=function(){this.curButton!==this.leftBtn&&(this.leftBtn.setFrameNormal("map_nav_picktown"),this.rightBtn.setFrameNormal("map_nav_tooqing"),this.send&&this.send.runWith(this.leftBtn.getData("optiontype")),this.curButton=this.leftBtn,this.leftBtn.setTextColor("#9D6000"),this.rightBtn.setTextColor("#B0A9FF"))},TooQingChangeOption.prototype.onRightHandler=function(){this.curButton!==this.rightBtn&&(this.leftBtn.setFrameNormal("map_nav_picktown_1"),this.rightBtn.setFrameNormal("map_nav_tooqing_1"),this.send&&this.send.runWith(this.rightBtn.getData("optiontype")),this.curButton=this.rightBtn,this.rightBtn.setTextColor("#9D6000"),this.leftBtn.setTextColor("#B0A9FF"))},TooQingChangeOption}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaGraphicsProgressBar",(function(){return o}));var a,s=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),o=function(e){function PicaGraphicsProgressBar(i,n,a,s,o,h){void 0===h&&(h=!0);var l=e.call(this,i,n,a)||this;return l.value=.5,l.bgGraphics=l.scene.make.graphics(void 0,!1),l.barGraphics=l.scene.make.graphics(void 0,!1),l.add([l.bgGraphics,l.barGraphics]),l.setSize(s,o),l.bgColor=0,l.barColor=267386880,l.bgGraphics.clear(),l.bgGraphics.fillStyle(l.bgColor,1),l.bgGraphics.fillRect(0,0,l.width,l.height),l.setValue(l.value),l}return s(PicaGraphicsProgressBar,e),PicaGraphicsProgressBar.prototype.setColor=function(e,i){this.barColor=e,i&&(this.bgColor=i),this.bgGraphics.clear(),this.bgGraphics.fillStyle(this.bgColor,1),this.bgGraphics.fillRect(0,0,this.width,this.height),this.setValue(this.value)},PicaGraphicsProgressBar.prototype.setValue=function(e){this.value=e;var i=this.width*(this.isHorizontal?e:1),n=this.height*(this.isHorizontal?1:e);this.barGraphics.clear(),this.barGraphics.fillStyle(this.barColor,1),this.barGraphics.fillRect(0,0,i,n)},PicaGraphicsProgressBar.prototype.setRoundedRectValue=function(e,i){this.value=e;var n=this.width*(this.isHorizontal?e:1),a=this.height*(this.isHorizontal?1:e);this.barGraphics.clear(),this.barGraphics.fillStyle(this.barColor,1),this.barGraphics.fillRoundedRect(0,0,n,a,i)},PicaGraphicsProgressBar}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaPlayerEditorPanel",(function(){return c}));var a,s=n(788),o=n(789),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaPlayerEditorPanel(i,n,a,l,c,m,f){var g=e.call(this,i,n,a)||this;g.dpr=0,g.key="",g.setSize(l,c),g.key=m,g.dpr=f;var _="bold "+15*g.dpr+"px Source Han Sans";g.title=g.scene.make.text({x:0,y:.5*-c+50*f,text:g.geti18n("edit_profile"),style:{font:_,blod:!0,color:"#ffffff",fontFamily:h.Font.DEFULT_FONT}}).setOrigin(.5);var T=g.scene.make.graphics(void 0,!1);T.clear(),T.fillStyle(16777215,.5),T.fillRect(0,0,247*f,350*f),T.setPosition(.5*-l,-184*f);var x=.5*-l+9*f,S=-170*f,j=50*f,q=g.scene.make.text({x:x,y:S,style:{blod:!0,color:"#0062BB",fontSize:15*f,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(0);q.setText(g.geti18n("user_name")+":"),g.inputText=new s.InputText(g.scene,x+q.width+20*f,S,162*f,27*f,{type:"input",fontSize:18*f+"px",color:"#0062BB",align:"center",placeholder:g.geti18n("input_nickname")}).setOrigin(0);var Y=g.createLine(-230*g.dpr*.5,S+32*g.dpr);g.add(T),g.add([g.title,q,g.inputText,Y]),g.idText=g.createText("I        D:","",x,S+j),g.constellationText=g.createText(g.geti18n("constellation")+":","",x,S+2*j),g.birthdayText=g.createText(g.geti18n("birthday")+":","",x,S+3*j),g.cityText=g.createText(g.geti18n("city")+":","",x,S+4*j);var X=g.scene.make.text({x:x,y:S+5*j,style:{blod:!0,color:"#0062BB",fontSize:15*f,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(0);X.setText(g.geti18n("signature")+":"),g.signInput=new s.InputText(g.scene,x+X.width+20*f,S+5*j,162*f,76*f,{type:"input",fontSize:18*f+"px",color:"#0062BB",align:"center",placeholder:g.geti18n("input_signature")}).setOrigin(0),g.add([X,g.signInput]);var Z=new s.Button(g.scene,"common_key","back_arrow","back_arrow"),$=new o.NinePatchButton(g.scene,0,.5*c-40*f,174*g.dpr,37*g.dpr,"common_key","yellow_btn",g.geti18n("save"),{left:12*g.dpr,top:12*g.dpr,right:12*g.dpr,bottom:12*g.dpr});return $.setTextStyle({fontSize:16*g.dpr,color:"#ED7814"}),Z.setPosition(x+8*f,.5*-c+50*f),Z.on(s.ClickEvent.Tap,g.onBackHandler,g),$.on(s.ClickEvent.Tap,g.onSaveHandler,g),g.add([Z,$]),g}return l(PicaPlayerEditorPanel,e),PicaPlayerEditorPanel.prototype.destroy=function(){this.inputText&&this.inputText.destroy(),this.signInput&&this.signInput.destroy(),e.prototype.destroy.call(this)},PicaPlayerEditorPanel.prototype.createText=function(e,i,n,a){var s=this.scene.make.text({x:n,y:a,style:{blod:!0,color:"#0062BB",fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(0,0);s.setText(e);var o=this.scene.make.text({x:n+s.width+20*this.dpr,y:a,text:i,style:{blod:!0,color:"#ffffff",fontSize:15*this.dpr,fontFamily:h.Font.DEFULT_FONT}}).setOrigin(0,0),l=this.createLine(-230*this.dpr*.5,a+32*this.dpr);return this.add([s,o,l]),o},PicaPlayerEditorPanel.prototype.geti18n=function(e){return h.i18n.t("player_info."+e)},PicaPlayerEditorPanel.prototype.createLine=function(e,i){var n=this.scene.make.graphics(void 0,!1);return n.clear(),n.fillStyle(25275,.6),n.fillRect(0,0,230*this.dpr,3),n.setPosition(e,i),n},PicaPlayerEditorPanel.prototype.onBackHandler=function(){this.visible=!1,this.emit("editorHide")},PicaPlayerEditorPanel.prototype.onSaveHandler=function(){},PicaPlayerEditorPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaPlayerInfoPanel",(function(){return x}));var a,s,o=n(878),h=n(788),l=n(790),c=n(0),m=n(2),f=n(789),g=n(792),_=n(791),T=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),x=function(e){function PicaPlayerInfoPanel(i){var n=e.call(this,i)||this;return n.dataMaps=new Map,n.key=m.ModuleName.PICAPLAYERINFO_NAME,n.atlasNames=[l.d.uicommon,l.d.friend_message],n.textures=[{atlasName:"Create_role_bg",folder:"texture"}],n}return T(PicaPlayerInfoPanel,e),PicaPlayerInfoPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.mBlackBG.clear(),this.mBlackBG.fillStyle(0,.66),this.mBlackBG.fillRect(0,0,a,s),this.topCon.y=.5*-s+30*this.dpr+.5*this.topCon.height,this.content.height=s,this.content.x=.5*-this.content.width-10*this.dpr,this.content.y=.5*s,this.content.setInteractive(),this.bottomCon.y=.5*s-.5*this.bottomCon.height;var o=s-this.topCon.height-this.bottomCon.height;this.bgImge.y=this.topCon.y+.5*this.topCon.height+.5*o-30*this.dpr,this.avatar.y=this.bgImge.y+60*this.dpr},PicaPlayerInfoPanel.prototype.hide=function(){e.prototype.hide.call(this)},PicaPlayerInfoPanel.prototype.addListen=function(){this.mInitialized&&(this.mBlackBG.on("pointerup",this.onCloseHandler,this),this.followBtn.on(h.ClickEvent.Tap,this.onFollowHandler,this))},PicaPlayerInfoPanel.prototype.removeListen=function(){this.mInitialized&&(this.mBlackBG.off("pointerup",this.onCloseHandler,this),this.followBtn.off(h.ClickEvent.Tap,this.onFollowHandler,this))},PicaPlayerInfoPanel.prototype.init=function(){var i=this,n=this.scaleWidth,a=this.scaleHeight;this.mBlackBG=this.scene.make.graphics(void 0,!1),this.mBlackBG.clear(),this.mBlackBG.fillStyle(7004927,0),this.mBlackBG.fillRect(0,0,n,a),this.mBlackBG.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.add(this.mBlackBG);var s=300*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(s,a),this.add(this.content),this.background=new _.CommonBackground(this.scene,0,0,s,a),this.bgImge=this.scene.make.image({key:"Create_role_bg"}),this.bgImge.alpha=.8,this.topCon=this.scene.make.container(void 0,!1),this.topCon.setSize(s,110*this.dpr),this.nickImge=new _.ImageValue(this.scene,100*this.dpr,20*this.dpr,l.d.uicommon,"people_woman",this.dpr,c.UIHelper.whiteStyle(this.dpr,18)),this.nickImge.setLayout(1),this.nickImge.x=.5*-s+25*this.dpr,this.nickImge.y=.5*-this.topCon.height+.5*this.nickImge.height,this.lvImage=new _.ImageValue(this.scene,20*this.dpr,15*this.dpr,l.d.friend_message,"friend_lv_icon",this.dpr,c.UIHelper.whiteStyle(this.dpr)),this.lvImage.setLayout(1),this.lvImage.setFontStyle("bold"),this.lvImage.x=this.nickImge.x,this.lvImage.y=this.nickImge.y+.5*this.nickImge.height+.5*this.lvImage.height+5*this.dpr,this.vipImage=new _.ImageValue(this.scene,20*this.dpr,15*this.dpr,l.d.friend_message,"friend_vip_icon",this.dpr,c.UIHelper.whiteStyle(this.dpr)),this.vipImage.setLayout(1),this.vipImage.setFontStyle("bold"),this.vipImage.x=this.lvImage.x+this.lvImage.width+5*this.dpr,this.vipImage.y=this.lvImage.y,this.nickName=this.scene.make.text({style:c.UIHelper.yellowStyle(this.dpr,14)}).setOrigin(0,.5),this.nickName.setFontStyle("bold"),this.nickName.x=this.lvImage.x-12*this.dpr,this.nickName.y=this.lvImage.y+.5*this.lvImage.height+15*this.dpr,this.topCon.add([this.nickImge,this.lvImage,this.vipImage,this.nickName]),this.avatar=new f.UIDragonbonesDisplay(this.scene,this.render),this.avatar.scale=2*this.dpr,this.avatar.x=0,this.avatar.y=-70*this.dpr,this.avatar.once("initialized",(function(){i.avatar.play({name:"idle",flip:!1})}));var h=274*this.dpr,m=310*this.dpr;this.bottomCon=this.scene.make.container(void 0,!1),this.bottomCon.setSize(h,m),this.middleCon=new S(this.scene,s,50*this.dpr,this.dpr),this.middleCon.y=.5*-m+.5*this.middleCon.height,this.middleCon.setHandler(new c.Handler(this,this.onMiddleConHandler)),this.bottombg=this.scene.make.graphics(void 0,!1),this.bottombg.clear(),this.bottombg.fillStyle(16777215,.3),this.bottombg.fillRect(0,0,h,175*this.dpr),this.bottombg.x=.5*-h,this.bottombg.y=this.middleCon.y+.5*this.middleCon.height+10*this.dpr;var g=this.createOptionButtons();g.y=this.bottombg.y+.5*g.height+15*this.dpr,this.mAttrPanel=new o.PicaAttributePanel(this.scene,0,0,274*this.dpr,150*this.dpr,this.key,this.dpr),this.mAttrPanel.y=g.y+.5*g.height+.5*this.mAttrPanel.height+5*this.dpr,this.followBtn=this.createNineButton(0,0,118*this.dpr,42*this.dpr,l.d.uicommon,"yellow_btn",c.i18n.t("player_info.follow"),"#996600"),this.followBtn.setTextStyle(c.UIHelper.brownishStyle(this.dpr,14)),this.followBtn.y=.5*m-.5*this.followBtn.height-15*this.dpr,this.followBtn.x=0,this.tradingBtn=this.createNineButton(0,0,118*this.dpr,42*this.dpr,l.d.uicommon,"yellow_btn",c.i18n.t("player_info.trading"),"#996600"),this.tradingBtn.setTextStyle(c.UIHelper.brownishStyle(this.dpr,14)),this.tradingBtn.y=this.followBtn.y,this.tradingBtn.x=-this.followBtn.x,this.tradingBtn.visible=!1,this.bottomCon.add([this.middleCon,this.bottombg,g,this.mAttrPanel,this.followBtn]),this.content.add([this.background,this.bgImge,this.topCon,this.avatar,this.bottomCon]),this.content.visible=!0,this.resize(n,a),e.prototype.init.call(this),this.playMove(new c.Handler(this,(function(){i.middleCon.refreshMask()})))},PicaPlayerInfoPanel.prototype.reqPlayerInfo=function(){this.render.renderEmitter(this.key+NaN)},PicaPlayerInfoPanel.prototype.setPlayerData=function(e){if(this.mInitialized){if(this.mPlayerData=e,this.content.visible=!0,this.avatar&&e.avatarSuit){var i=m.AvatarSuitType.getSuitsFromItem(e.avatarSuit);this.avatar.setSuits(i.suits),this.avatar.load({id:0,avatar:i.avatar},void 0,!1)}var n=e.nickname?e.nickname:"???",a=e.currentTitle?e.currentTitle:"???",o=e.level&&e.level.level?e.level.level:0;this.nickImge.setText(n),this.lvImage.setText(o+""),this.nickName.setText(c.i18n.t("player_info.player_title")+": "+a),this.vipImage.x=this.lvImage.x+.5*this.lvImage.width+.5*this.vipImage.width+10*this.dpr,this.dataMaps.clear();var h=e.lifeSkills?e.lifeSkills:[];this.dataMaps.set(s.Skill,h),e.isUser?(this.dataMaps.set(s.Attribute,e.properties?e.properties:[]),this.dataMaps.set(s.Badge,e.badges?e.badges:[]),this.followBtn.visible=!1,this.tradingBtn.visible=!1,this.isOwner=!0):(this.dataMaps.set(s.Attribute,e.properties?e.properties:[]),this.dataMaps.set(s.Badge,e.badges?e.badges:[]),this.followBtn.visible=!0,this.tradingBtn.visible=!0,this.isOwner=!1),this.middleCon.setPlayerDatas(e.pros,this.isOwner);var l=this.dataMaps.get(s.Attribute);l&&this.mAttrPanel.setAttributeData(l),this.setFriendRelation(m.FriendRelationEnum.Null)}else this.mShowData=e},PicaPlayerInfoPanel.prototype.createOptionButtons=function(){var e=208*this.dpr,i=23*this.dpr,n=this.scene.make.container(void 0,!1);n.setSize(e,i);for(var a,o=[c.i18n.t("player_info.option_attribute"),c.i18n.t("player_info.option_badge"),c.i18n.t("player_info.option_decorate")],l=[s.Attribute,s.Badge,s.Decorate],m=208*this.dpr,g=m/o.length,_=14*this.dpr,T=-m/2,x=0;x<o.length;x++){var S=o[x],j=l[x],q=new f.ToggleColorButton(this.scene,g,20*this.dpr,this.dpr,S);q.on(h.ClickEvent.Tap,this.onToggleButtonHandler,this),q.setStyle({color:"#0D16CA",fontSize:14*this.dpr}),n.add(q),q.setChangeColor("#464DDB"),q.setNormalColor("#0D16CA"),q.setData("optiontype",j),q.setSize(g,_),q.enable=!1,q.x=T+.5*g,q.y=0,q.alpha=.5,T+=g,a||(a=q)}var Y=this.scene.make.graphics(void 0,!1);return Y.clear(),Y.fillStyle(4607451,.25),Y.fillRect(-136*this.dpr,0,272*this.dpr,2*this.dpr),Y.y=.5*i,this.selectLine=this.scene.make.graphics(void 0,!1),this.selectLine.clear(),this.selectLine.fillStyle(4607451,1),this.selectLine.fillRect(-21*this.dpr,0,42*this.dpr,2*this.dpr),this.selectLine.y=Y.y,n.add([Y,this.selectLine]),this.onToggleButtonHandler(void 0,a),n},PicaPlayerInfoPanel.prototype.createGrideTable=function(e,i,n,a,s,o,l,c){var m=this,f={x:e,y:i,table:{width:n,height:a,columns:3,cellWidth:s,cellHeight:o,reuseCellContainer:!0,cellPadX:24*this.dpr,zoom:this.scale},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,i){e.scene;var n=e.item;return null===i&&(i=l()),i.setData({item:n}),i.setItemData(n,m.isOwner),i}},g=new h.GameGridTable(this.scene,f);return g.layout(),g.on("cellTap",(function(e){e&&c.runWith(e)})),g},PicaPlayerInfoPanel.prototype.createNineButton=function(e,i,n,a,s,o,l,m){var f=new h.NineSliceButton(this.scene,e,i,n,a,s,o,l,this.dpr,1,{left:14*this.dpr,top:14*this.dpr,right:15*this.dpr,bottom:14*this.dpr});return l&&(f.setTextStyle({color:m,fontSize:16*this.dpr,fontFamily:c.Font.DEFULT_FONT}),f.setFontStyle("bold")),f},PicaPlayerInfoPanel.prototype.setFriendRelation=function(e){this.isOwner||(this.mRelation=e,e===m.FriendRelationEnum.Followed||e===m.FriendRelationEnum.Friend?this.followBtn.setText(c.i18n.t("friendlist.unfollow")):this.followBtn.setText(c.i18n.t("friendlist.follow")))},PicaPlayerInfoPanel.prototype.onToggleButtonHandler=function(e,i){if(this.curToggleItem!==i){this.curToggleItem&&(this.curToggleItem.isOn=!1,this.curToggleItem.alpha=.5),i.alpha=1,this.curToggleItem=i,this.selectLine.x=i.x;var n=i.getData("optiontype"),a=this.dataMaps.get(n);a&&this.mAttrPanel.setAttributeData(a)}},PicaPlayerInfoPanel.prototype.onSelectItemHandler=function(e){},PicaPlayerInfoPanel.prototype.onFollowHandler=function(){if(this.mPlayerData)switch(this.mRelation){case m.FriendRelationEnum.Friend:case m.FriendRelationEnum.Followed:this.render.renderEmitter(this.key+"_unfollow",this.mPlayerData.cid);break;case m.FriendRelationEnum.Fans:case m.FriendRelationEnum.Null:this.render.renderEmitter(this.key+"_follow",this.mPlayerData.cid)}},PicaPlayerInfoPanel.prototype.onTradingHandler=function(){},PicaPlayerInfoPanel.prototype.onPrivateChatHandler=function(){},PicaPlayerInfoPanel.prototype.onExitHandler=function(){this.mWorld.exitUser()},PicaPlayerInfoPanel.prototype.onMiddleConHandler=function(e){"invite"===e?this.onIntiveHandler():"room"===e?this.onGoHomeHandler():"track"===e&&this.onTrackHandler()},PicaPlayerInfoPanel.prototype.onTrackHandler=function(){this.mPlayerData&&this.render.renderEmitter(this.key+"_track",this.mPlayerData.cid)},PicaPlayerInfoPanel.prototype.onIntiveHandler=function(){this.mPlayerData&&this.render.renderEmitter(this.key+"_invite",this.mPlayerData.cid)},PicaPlayerInfoPanel.prototype.onGoHomeHandler=function(){this.render.renderEmitter(this.key+"_gohome",this.mPlayerData.cid)},PicaPlayerInfoPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_hide")},PicaPlayerInfoPanel.prototype.playMove=function(e){var i=.5*-this.content.width-10*this.dpr,n=.5*this.content.width,a=this.scene.tweens.add({targets:this.content,x:{from:i,to:n},ease:"Linear",duration:300,onComplete:function(){a.stop(),a.remove(),e&&e.run()}})},PicaPlayerInfoPanel}(g.PicaBasePanel);!function(e){e[e.Skill=0]="Skill",e[e.Attribute=1]="Attribute",e[e.Badge=2]="Badge",e[e.Title=3]="Title",e[e.Avatar=4]="Avatar",e[e.Decorate=5]="Decorate"}(s||(s={}));var S=function(e){function MiddleContainer(i,n,a,s){var o=e.call(this,i)||this;return o.ownerArr=[],o.otherArr=[],o.setSize(n,a),o.dpr=s,o.init(),o}return T(MiddleContainer,e),MiddleContainer.prototype.refreshMask=function(){for(var e=0,i=this.ownerArr;e<i.length;e++){i[e].refreshMask()}},MiddleContainer.prototype.setHandler=function(e){this.sendHandler=e},MiddleContainer.prototype.setPlayerDatas=function(e,i){for(var n=0;n<this.ownerArr.length;n++){if((h=this.ownerArr[n]).visible=i,i){var a=e[n];a?h.setAttributeData(a.value,a.max):h.setAttributeData(0,void 0)}}for(var s=0,o=this.otherArr;s<o.length;s++){var h;(h=o[s]).visible=!i}},MiddleContainer.prototype.init=function(){for(var e=["friend_physical_icon","friend_saturationl_icon","friend_saturationl_icon"],i=["friend_physical_schedule_top","friend_saturationl_schedule_top","friend_physical_schedule_top"],n=0;n<e.length;n++){var a=e[n],s=i[n];(f=new j(this.scene,a,s,this.dpr)).visible=!1,this.ownerArr.push(f)}var o=["friend_invite_icon","friend_room_icon","friend_transaction_icon"],l=[c.i18n.t("player_info.invite"),c.i18n.t("player_info.room"),c.i18n.t("player_info.track")],m=["invite","room","track"];for(n=0;n<o.length;n++){a=o[n];var f,g=l[n],_=m[n];(f=new q(this.scene,a,g,this.dpr)).setTag(_),f.visible=!1,f.on(h.ClickEvent.Tap,this.onClickHandler,this),this.otherArr.push(f)}this.add(this.ownerArr),this.add(this.otherArr),this.setLayout(this.ownerArr),this.setLayout(this.otherArr)},MiddleContainer.prototype.setLayout=function(e){for(var i=89*this.dpr,n=5*this.dpr,a=e.length,s=.5*-(a*i+(a-1)*n)+.5*i,o=0;o<a;o++){e[o].x=s,s+=i+n}},MiddleContainer.prototype.onClickHandler=function(e,i){this.sendHandler&&this.sendHandler.runWith(i.tag)},MiddleContainer}(Phaser.GameObjects.Container),j=function(e){function AttributeProgressItem(i,n,a,s){var o=e.call(this,i,0,0)||this;return o.dpr=s,o.bg=o.scene.make.image({key:l.d.friend_message,frame:"friend_physical_bg"}),o.setSize(o.bg.width,o.bg.height),o.textImg=new _.ImageValue(i,o.width,15*s,l.d.friend_message,n,s,c.UIHelper.colorStyle("#0558CA",11*s)),o.textImg.y=.5*-o.height+.5*o.textImg.height+8*s,o.textImg.setLayout(2),o.progress=new f.ProgressMaskBar(i,l.d.friend_message,"friend_physical_schedule_bottom",a),o.progress.y=o.textImg.y+.5*o.textImg.height+.5*o.progress.height+7*s,o.add([o.bg,o.textImg,o.progress]),o}return T(AttributeProgressItem,e),AttributeProgressItem.prototype.refreshMask=function(){this.progress.refreshMask()},AttributeProgressItem.prototype.setAttributeData=function(e,i){void 0===i?(this.textImg.visible=!1,this.progress.visible=!1):(this.textImg.visible=!0,this.progress.visible=!0,this.textImg.setText(e+"/"+i),this.progress.setProgress(e,i))},AttributeProgressItem}(Phaser.GameObjects.Container),q=function(e){function OtherButtonItem(i,n,a,s){var o=e.call(this,i,0,0)||this;return o.dpr=s,o.bg=o.scene.make.image({key:l.d.friend_message,frame:"friend_physical_bg"}),o.setSize(o.bg.width,o.bg.height),o.image=o.scene.make.image({key:l.d.friend_message,frame:n}),o.text=o.scene.make.text({text:a,style:c.UIHelper.colorStyle("#FFF449",12*s)}).setOrigin(.5,0),o.text.setFontStyle("bold"),o.image.y=.5*-o.height+.5*o.image.height+3*s,o.text.y=o.image.y+.5*o.image.height+2*s,o.add([o.bg,o.image,o.text]),o.enable=!0,o.mTweenBoo=!0,o}return T(OtherButtonItem,e),OtherButtonItem.prototype.setTag=function(e){this.tag=e},OtherButtonItem}(f.ButtonEventDispatcher);!function(e){function SkillInfoItem(i,n,a,s,o){var l=e.call(this,i,n,a)||this;l.dpr=0;var m=l.scene.make.image({x:0,y:0,key:s,frame:"skill_bg"});return m.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),l.nameText=l.scene.make.text({x:-1*o,y:0,text:"",style:{color:"#996600",fontSize:12*o,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(0,.5),l.lvText=l.scene.make.text({x:-1*o,y:0,text:"",style:{color:"#996600",fontSize:12*o,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(0,.5),l.progressBar=new h.ProgressBar(l.scene,{x:48*o/2,y:15*o,width:41*o,height:4*o,background:{x:0,y:0,width:41*o,height:4*o,config:{top:1*o,left:2*o,right:2*o,bottom:1*o},key:s,frame:"slider_bg"},bar:{x:0,y:0,width:41*o,height:4*o,config:{top:1*o,left:2*o,right:2*o,bottom:1*o},key:s,frame:"slider_rate"},dpr:o,textConfig:void 0}),l.icon=new f.DynamicImage(l.scene,.5*-m.width+22*o,0),l.add([m,l.icon,l.nameText,l.lvText,l.progressBar]),l.setSize(m.width,m.height),l.dpr=o,l.key=s,l}T(SkillInfoItem,e),SkillInfoItem.prototype.setItemData=function(e,i){var n=this;void 0===i&&(i=!1),this.itemData=e,this.nameText.text=e.name;var a=i?-16*this.dpr:-11*this.dpr,s=i?20*this.dpr:25*this.dpr,o=10*this.dpr;this.nameText.y=a+.5*o,this.icon.setTexture(this.key,"test_skillicon");var h=this.icon.width;e.level?(this.lvText.text=e.level.level,this.lvText.y=a+s,this.progressBar.setProgress(e.level.currentLevelExp,e.level.nextLevelExp),this.progressBar.visible=i):(this.progressBar.visible=!1,this.lvText.visible=!1);var l=c.Url.getOsdRes(e.display.texturePath);this.icon.load(l,this,(function(){n.icon.scale=n.dpr;var e=.5*-n.width+.5*h+6*n.dpr;n.icon.setPosition(e,0)}))}}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaPropFunPanel",(function(){return _}));var a,s=n(795),o=n(788),h=n(789),l=n(2),c=n(0),m=n(790),f=n(796),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaPropFunPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.uiManager=i,n.itemCount=1,n.line=!1,n.key=l.ModuleName.PICAPROPFUN_NAME,n}return g(PicaPropFunPanel,e),PicaPropFunPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.66),this.blackGraphic.fillRect(0,0,a,s),this.content.x=a/2,this.content.y=s/2,this.setSize(a*this.scale,s*this.scale)},PicaPropFunPanel.prototype.show=function(e){if(this.mShowData=e,!this.mPreLoad)if(this.mInitialized){if(!this.mShow){this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen();var i=this.mShowData;this.setProp(i),this.updateData()}}else this.preload()},PicaPropFunPanel.prototype.addListen=function(){this.mInitialized&&(this.cancelBtn.on(o.ClickEvent.Tap,this.onCancelBtnHandler,this),this.confirmBtn.on(o.ClickEvent.Tap,this.onConfirmBtnHandler,this))},PicaPropFunPanel.prototype.removeListen=function(){this.mInitialized&&(this.cancelBtn.off(o.ClickEvent.Tap,this.onCancelBtnHandler,this),this.confirmBtn.off(o.ClickEvent.Tap,this.onConfirmBtnHandler,this))},PicaPropFunPanel.prototype.preload=function(){this.addAtlas(m.c.commonKey,m.d.commonUrl+".png",m.d.commonUrl+".json"),this.addAtlas(m.c.common2Key,m.d.common2Url+".png",m.d.common2Url+".json"),e.prototype.preload.call(this)},PicaPropFunPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight,a=this.dpr;this.blackGraphic=this.scene.make.graphics(void 0,!1),this.blackGraphic.setInteractive(new Phaser.Geom.Rectangle(0,0,i,n),Phaser.Geom.Rectangle.Contains),this.add(this.blackGraphic),this.content=this.scene.make.container(void 0,!1);var h=299*this.dpr,l=305*this.dpr;this.content.setSize(h,l),this.add(this.content);var f=new o.NineSlicePatch(this.scene,0,0,h,l,m.c.common2Key,"bg",{left:20*this.dpr,top:20*this.dpr,right:30*this.dpr,bottom:40*this.dpr});f.setInteractive(new Phaser.Geom.Rectangle(0,0,i,n),Phaser.Geom.Rectangle.Contains);var g=.5*-f.height+3*a,_=this.scene.make.image({x:0,y:g,key:m.c.common2Key,frame:"title"});_.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titleName=this.scene.make.text({x:0,y:g+3*a,text:"售出",style:{color:"#905B06",fontSize:16*a,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(.5),this.titleName.setFontStyle("bold"),this.itemName=this.scene.make.text({x:0,y:g+40*a,style:{color:"#000000",fontSize:15*a,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(.5);var T=-40*a;this.mDetailDisplay=new s.DetailDisplay(this.scene,this.render),this.mDetailDisplay.setFixedScale(this.dpr/this.scale),this.mDetailDisplay.y=T;var x=30*a;this.priceBg=this.scene.make.image({x:0,y:x,key:m.c.common2Key,frame:"price_bg"}),this.priceBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.pricText=this.scene.make.text({x:0,y:x,style:{color:"#000000",fontSize:15*a,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(.5),this.mCoinIcon=this.scene.make.image({x:-45*this.dpr,y:x,key:m.c.commonKey,frame:"iv_coin"},!1).setOrigin(.5),this.mCoinIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var S=new o.NineSlicePatch(this.scene,0,0,8,7*a,m.c.common2Key,"slider_bg",{left:3,top:1,right:3,bottom:1}),j=new o.NineSlicePatch(this.scene,0,0,8,7*a,m.c.common2Key,"slider_rate",{left:3,top:1,right:3,bottom:1}),q=this.scene.make.image({key:m.c.common2Key,frame:"block"});this.thumb=q,this.itemCountText=this.scene.make.text({x:0,y:0,style:{color:"#744803",fontSize:15*a,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(.5),this.slider=new o.GameSlider(this.scene,{x:0,y:70*a,width:136*a,height:7*a,orientation:1,background:S,indicator:j,thumb:q,offsetX:.5*q.width,valuechangeCallback:this.onSliderValueHandler,valuechangeCallbackScope:this,value:.5}),this.slider.add(this.itemCountText),this.slider.setValue(0);var Y=.5*f.height-30*a,X=-66*a;this.cancelBtn=new o.NineSliceButton(this.scene,X,Y,112*a,36*a,m.c.commonKey,"red_btn",c.i18n.t("common.cancel"),a,this.scale,{left:12*a,top:12*a,right:12*a,bottom:12*a}),this.confirmBtn=new o.NineSliceButton(this.scene,-X,Y,112*a,36*a,m.c.commonKey,"yellow_btn",c.i18n.t("common.confirm"),a,this.scale,{left:12*a,top:12*a,right:12*a,bottom:12*a}),this.cancelBtn.setTextStyle({color:"#FFFFFF",fontSize:16*a,fontFamily:c.Font.DEFULT_FONT}),this.confirmBtn.setTextStyle({color:"#976400",fontSize:16*a,fontFamily:c.Font.DEFULT_FONT}),this.content.add([f,_,this.titleName,this.itemName,this.mDetailDisplay,this.priceBg,this.mCoinIcon,this.pricText,this.slider,this.cancelBtn,this.confirmBtn]),this.resize(0,0),e.prototype.init.call(this)},PicaPropFunPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaPropFunPanel.prototype.setProp=function(e){this.prop=e;var i=this.prop.data,n=void 0===e.price||e.price;n=!!i.sellingPrice&&n;var a=void 0===e.slider||e.slider;if(this.line=e.line||!1,this.itemData=i,this.itemCount=a?1:this.itemData.count,e.resource&&this.setResource(e.resource),e.url&&this.mDetailDisplay.loadUrl(e.url),this.itemName.text=this.itemData.name||this.itemData.shortName,this.itemCountText.text=this.itemCount+"",e.title&&(this.titleName.text=e.title),n){this.pricText.visible=!0,this.priceBg.visible=!0,this.mCoinIcon.visible=!0,this.slider.y=70*this.dpr,this.pricText.text=c.Coin.getName(this.itemData.sellingPrice.coinType)+" x "+this.itemData.sellingPrice.price*this.itemCount;var s=c.Coin.getIcon(this.itemData.sellingPrice.coinType);this.mCoinIcon.setFrame(s),this.pricText.x=this.mCoinIcon.x+.5*this.mCoinIcon.width+.5*this.pricText.width+5*this.dpr}else this.pricText.visible=!1,this.priceBg.visible=!1,this.mCoinIcon.visible=!1,this.slider.y=50*this.dpr;if(e.resultHandler.key&&e.resultHandler.key.length>0){var o=this.uiManager.getPanel(""+e.resultHandler.key);o&&(e.resultHandler.confirmFunc&&e.resultHandler.confirmFunc in o&&"function"==typeof o[e.resultHandler.confirmFunc]&&(this.confirmHandler=o[e.resultHandler.confirmFunc]),e.resultHandler.confirmAddData&&(this.confirmHandlerAddData=e.resultHandler.confirmAddData),e.resultHandler.cancelFunc&&e.resultHandler.cancelFunc in o&&"function"==typeof o[e.resultHandler.cancelFunc]&&(this.cancelHandler=o[e.resultHandler.cancelFunc]))}this.slider.visible=a,this.slider.setValue(0)},PicaPropFunPanel.prototype.setResource=function(e){if(e)if(e.serializeString){var i=e.elepi;f.l.showDetailDisplay({display:this.mDetailDisplay,dpr:this.dpr,data:i,render:this.render,sn:e.sn,itemid:e.id,serialize:e.serializeString})}else e.avatar?this.mDetailDisplay.loadAvatar(e,2,new Phaser.Geom.Point(0,70)):e.display&&this.mDetailDisplay.loadDisplay(e);else this.mDetailDisplay.loadUrl(this.itemData.icon)},PicaPropFunPanel.prototype.updateData=function(){this.itemCountText&&(this.itemCountText.text=this.itemCount+""),this.pricText&&this.itemData&&this.itemData.sellingPrice&&(this.pricText.text=c.Coin.getName(this.itemData.sellingPrice.coinType)+" x "+this.itemData.sellingPrice.price*this.itemCount)},PicaPropFunPanel.prototype.onCancelBtnHandler=function(){var e=this.uiManager.getPanel(""+this.prop.resultHandler.key);e&&this.cancelHandler&&this.cancelHandler.apply(e,this.itemData),this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_close")},PicaPropFunPanel.prototype.onConfirmBtnHandler=function(){if(this.confirmHandler){var e=this.uiManager.getPanel(""+this.prop.resultHandler.key);e&&(this.confirmHandlerAddData?this.confirmHandler.apply(e,[this.confirmHandlerAddData,this.itemData,this.itemCount]):this.confirmHandler.apply(e,[this.itemData,this.itemCount]))}this.render.renderEmitter(l.RENDER_PEER+"_"+this.key+"_close")},PicaPropFunPanel.prototype.onSliderValueHandler=function(e){this.itemCountText.x=this.thumb.x,this.itemCount=this.line?this.calcuSliderValue(e):this.lineSliderValue(e),this.itemCount=this.itemCount||1,this.updateData()},PicaPropFunPanel.prototype.calcuSliderValue=function(e){var i=this.itemData?this.itemData.count:1,n=0;if(i<=40)n=Math.round(i*e);else if(e<=1/4)n=40*e;else{var a=i-10;if(a<=40)n=10+a*(e-1/4)/.75;else{var s=a/4;n=10;for(var o=1;o<4;o++){var h=s+a/12*(o-1);if(e>o/4&&e<=(o+1)/4){n+=h*(e-o/4)/(1/4);break}n+=h}}}return(n=Math.round(n))<1&&(n=1),n},PicaPropFunPanel.prototype.lineSliderValue=function(e){var i=this.itemData?this.itemData.count:1;return Math.round(i*e)},PicaPropFunPanel}(h.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRecastePanel",(function(){return _}));var a,s=n(788),o=n(789),h=n(796),l=n(790),c=n(2),m=n(0),f=n(792),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaRecastePanel(i){var n=e.call(this,i)||this;return n.tempData={},n.atlasNames=[l.d.uicommon,l.d.recast],n.textures=[{atlasName:"Recast_aims_icon_bg",folder:"texture"},{atlasName:"Recast_bg_texture",folder:"texture"}],n.key=c.ModuleName.PICARECASTE_NAME,n}return g(PicaRecastePanel,e),PicaRecastePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.mBackground.x=.5*a,this.mBackground.y=.5*s,this.mTopBg.x=.5*a,this.mTopBg.y=.5*this.mTopBg.height;var o=79*this.dpr,h=s-this.mPropGrid.height-.5*o-47*this.dpr;this.mCategoryCon.setSize(a,79*this.dpr),this.mCategoryCon.y=h,this.mCategoryCon.x=.5*a,this.mCategoriesBar.y=40*this.dpr,this.mCategoriesBar.x=.5*-a,this.mCategoriesBar.clear(),this.mCategoriesBar.fillStyle(4121087),this.mCategoriesBar.fillRect(0,0,a,40*this.dpr),this.confirmBtn.x=a-this.confirmBtn.width/2-10*this.dpr,this.confirmBtn.y=this.mCategoryCon.y-this.confirmBtn.height/2+25*this.dpr,this.labelTipTex.x=15*this.dpr,this.labelTipTex.y=this.confirmBtn.y,this.displayPanel.x=.5*a,this.displayPanel.y=.5*h+17*this.dpr,this.mPropGridBg.clear(),this.mPropGridBg.fillStyle(8250878),this.mPropGridBg.fillRect(0,0,this.mPropGrid.width,this.mPropGrid.height+10*this.dpr),this.mPropGridBg.y=s-this.mPropGrid.height-4*this.dpr,this.mPropGrid.x=a/2+3*this.dpr,this.mPropGrid.y=s-.5*this.mPropGrid.height,this.mPropGrid.layout(),this.mPropGrid.resetMask(),this.mCategoryScroll.refreshMask(),this.setSize(a,s),this.setInteractive()},PicaRecastePanel.prototype.setRecasteResult=function(e){e&&(this.mRecasteItemData.count--,this.displayPanel.setRecasteItemData(this.mRecasteItemData))},PicaRecastePanel.prototype.setCategories=function(e){if(this.tempData.subcategory=e,this.mInitialized&&e){this.mPreCategoryBtn=null,this.mSelectedCategeories=null;var i=60*this.dpr,n=41*this.dpr,a=[];this.mCategoryScroll.clearItems();var s={value:m.i18n.t("common.all"),key:"alltype"};e.unshift(s);for(var h=0;h<e.length;h++){var c=new o.TextButton(this.scene,this.dpr,1,e[h].value,0,0);c.setData("item",e[h]),c.setSize(i,n),this.mCategoryScroll.addItem(c),a[h]=c,c.setFontSize(18*this.dpr),c.setFontStyle("bold");var f=this.scene.make.image({key:l.d.recast,frame:"Recast_nav_Select"});f.y=21*this.dpr,c.add(f),f.visible=!1,c.setData("lineImg",f)}this.mCategoryScroll.Sort(),this.mCategoryScroll.refreshMask(),a.length>1&&this.onSelectSubCategoryHandler(a[0])}},PicaRecastePanel.prototype.onShow=function(){this.setStarData(this.starCount),this.setRecasteItemData(this.mShowData),this.setCategories(this.tempData.subcategory)},PicaRecastePanel.prototype.setProp=function(e){var i=(e=e||[]).length;i<18&&(e=e.concat(new Array(18-i))),this.mPropGrid.setItems(e)},PicaRecastePanel.prototype.setStarData=function(e){this.starCount=e,this.mInitialized&&this.starvalue.setText(e+"")},PicaRecastePanel.prototype.setRecasteItemData=function(e){this.mRecasteItemData=e,this.displayPanel.setRecasteItemData(e)},PicaRecastePanel.prototype.addListen=function(){this.mInitialized&&(this.mCloseBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this),this.confirmBtn.on(s.ClickEvent.Tap,this.onConfirmBtnHandler,this))},PicaRecastePanel.prototype.removeListen=function(){this.mInitialized&&(this.mCloseBtn.off(s.ClickEvent.Tap,this.onCloseHandler,this),this.confirmBtn.off(s.ClickEvent.Tap,this.onConfirmBtnHandler,this))},PicaRecastePanel.prototype.destroy=function(){this.mCategoryScroll&&this.mCategoryScroll.destroy(),this.mPropGrid&&this.mPropGrid.destroy(),e.prototype.destroy.call(this)},PicaRecastePanel.prototype.queryRecasteList=function(){if(this.mSelectedCategeories){var e=this.mSelectedCategeories;this.render.renderEmitter(this.key+"_queryrecastelist",{type:e.key,star:this.mRecasteItemData.grade})}},PicaRecastePanel.prototype.onInitialized=function(){this.starCount&&this.starvalue.setText(this.starCount+"")},PicaRecastePanel.prototype.init=function(){var i=this,n=this.scaleWidth,a=this.scaleHeight;this.mBackground=new h.a(this.scene,0,0,n,a),this.mTopBg=this.scene.make.image({key:"Recast_bg_texture"},!1),this.displayPanel=new T(this.scene,n,248*this.dpr,this.render,this.dpr,this.scale),this.mTopBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mCategoryCon=this.scene.make.container(void 0,!1),this.mCategoryCon.setSize(n,295*this.dpr),this.mCategoryCon.y=a-this.mCategoryCon.height,this.mCategoriesBar=this.scene.make.graphics(void 0,!1),this.mCategoryCon.add(this.mCategoriesBar),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.mCloseBtn=new o.ButtonEventDispatcher(this.scene,0,0),this.mCloseBtn.setSize(100*this.dpr,40*this.dpr),this.mCloseBtn.enable=!0,this.mCloseBtn.x=.5*this.mCloseBtn.width+10*this.dpr,this.mCloseBtn.y=45*this.dpr;var c=this.scene.make.image({key:l.d.uicommon,frame:"back_arrow"});c.x=.5*-this.mCloseBtn.width+.5*c.width+10*this.dpr;var f=this.scene.make.text({text:"",style:m.UIHelper.whiteStyle(this.dpr,18)}).setOrigin(0,.5);f.setFontStyle("bold"),f.text=m.i18n.t("furni_bag.recaste"),f.x=c.x+.5*c.width+10*this.dpr,this.mCloseBtn.add([c,f]);var g=new s.NineSlicePatch(this.scene,0,-this.dpr,80*this.dpr,28*this.dpr,l.d.uicommon,"home_assets_bg",{left:17*this.dpr,top:0*this.dpr,right:17*this.dpr,bottom:0*this.dpr});g.x=.5*-g.width,this.starvalue=new h.e(this.scene,60*this.dpr,26*this.dpr,l.d.recast,"Recast_pica star_big",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:m.Font.NUMBER}),this.starvalue.setLayout(1),this.starvalue.x=g.x-.5*g.width+22*this.dpr,this.starCountCon=this.scene.make.container(void 0,!1),this.starCountCon.setSize(g.width,g.height),this.starCountCon.add([g,this.starvalue]),this.starCountCon.x=n-20*this.dpr,this.starCountCon.y=this.mCloseBtn.y;var _=100*this.dpr,x=40*this.dpr,S=n-_/2-20*this.dpr,j=this.mCategoryCon.y-25*this.dpr;this.confirmBtn=this.createNineButton(S+100*this.dpr,j,_,x,l.d.uicommon,"yellow_btn",m.i18n.t("common.confirm"),"#996600"),this.labelTipTex=this.scene.make.text({text:m.i18n.t("recaste.tip"),style:m.UIHelper.colorStyle("#FAF916",14*this.dpr)}).setOrigin(0,.5),this.mCategoryScroll=new s.GameScroller(this.scene,{x:0,y:60*this.dpr,width:n,height:44*this.dpr,zoom:this.scale,orientation:1,dpr:this.dpr,space:10*this.dpr,selfevent:!0,cellupCallBack:function(e){i.onSelectSubCategoryHandler(e)}}),this.mPropGridBg=this.scene.make.graphics(void 0,!1),this.mCategoryCon.add(this.mCategoryScroll),this.add([this.mBackground,this.mPropGridBg,this.mTopBg,this.displayPanel,this.mCloseBtn,this.starCountCon,this.mCategoryCon,this.confirmBtn,this.labelTipTex]);var q=this.scene.textures.getFrame(l.d.uicommon,"bag_icon_common_bg"),Y=q.width+9*this.dpr,X=q.height+9*this.dpr,Z={x:0,y:0,table:{width:n,height:231*this.dpr,columns:3,cellWidth:Y,cellHeight:X,reuseCellContainer:!0,zoom:this.scale,mask:!1},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(e,n){var a=e.scene,s=e.item;return null===n&&(n=new h.f(a,l.d.uicommon,"bag_icon_common_bg",i.dpr,i.scale,!1)),n.setData({item:s}),n.setItemData(s),i.mSelectedItemData&&s&&i.mSelectedItemData.id===s.id&&(n.isSelect=!0,i.mSelectedItem=n),n}};this.mPropGrid=new s.GameGridTable(this.scene,Z),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(e){e&&i.onSelectItemHandler(e)})),this.add(this.mPropGrid),this.resize(0,0),e.prototype.init.call(this)},PicaRecastePanel.prototype.createNineButton=function(e,i,n,a,o,h,l,c){var f=new s.NineSliceButton(this.scene,e,i,n,a,o,h,l,this.dpr,1,{left:14*this.dpr,top:14*this.dpr,right:15*this.dpr,bottom:14*this.dpr});return l&&(f.setTextStyle({color:c,fontSize:16*this.dpr,fontFamily:m.Font.DEFULT_FONT}),f.setFontStyle("bold")),f},PicaRecastePanel.prototype.onSelectSubCategoryHandler=function(e){var i=e.getData("item");if(i){if(this.mPreCategoryBtn)this.mPreCategoryBtn.changeNormal(),this.mPreCategoryBtn.getData("lineImg").visible=!1;e.changeDown(),this.mSelectedCategeories=i,this.mPropGrid.setT(0),this.queryRecasteList(),this.mPreCategoryBtn=e,e.getData("lineImg").visible=!0}this.mPropGrid.setT(0)},PicaRecastePanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaRecastePanel.prototype.onSelectItemHandler=function(e){var i=e.getData("item");i&&this.mSelectedItemData===i||!i||(this.mSelectedItemData=i,this.displayPanel.setRecasteTargetData(i),this.mSelectedItem&&(this.mSelectedItem.select=!1),e.select=!0,this.mSelectedItem=e)},PicaRecastePanel.prototype.onConfirmBtnHandler=function(){var e;if(this.mSelectedItemData?this.starCount<this.mSelectedItemData.grade?e=m.i18n.t("furnicompose.starpicatips"):0===this.mRecasteItemData.count?e=m.i18n.t("recaste.counttips"):this.mRecasteItemData.id===this.mSelectedItemData.id&&(e=m.i18n.t("recaste.sametips")):e=m.i18n.t("recaste.selecttips"),e){var i={text:[{text:e,node:void 0}]};this.render.mainPeer.showMediator(c.ModuleName.PICANOTICE_NAME,!0,i)}else this.render.renderEmitter(this.key+"_queryrecaste",{consumedId:this.mRecasteItemData.id,targetId:this.mSelectedItemData.id})},PicaRecastePanel}(f.PicaBasePanel),T=function(e){function RecasteDisplayPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.setSize(n,a),l.dpr=o,l.zoom=h,l.render=s,l.init(),l}return g(RecasteDisplayPanel,e),RecasteDisplayPanel.prototype.setRecasteItemData=function(e){this.recasteItem.setItemData(e,!0),this.starvalue.setText(e.grade+"")},RecasteDisplayPanel.prototype.setRecasteTargetData=function(e){var i=e.elepi;h.l.showDetailDisplay({display:this.recasteTarget,dpr:this.dpr,data:i,render:this.render,sn:e.sn,itemid:e.id,serialize:e.serializeString}),this.starLevelImg.setFrame("Recast_star_big_"+e.grade),this.nameTex.text=e.name||e.shortName,this.starLevelImg.visible=!0},RecasteDisplayPanel.prototype.init=function(){var e=this,i=this.scene.make.image({key:"Recast_aims_icon_bg"});i.x=.5*this.width-.5*i.width-15*this.dpr,this.recasteItem=new h.f(this.scene,l.d.recast,"Recast_default_icon_bg",this.dpr,this.zoom,!1),this.recasteItem.x=.5*-this.width+.5*this.recasteItem.width+20*this.dpr,this.recasteItem.y=0;var n=this.scene.make.image({key:l.d.recast,frame:"Recast_arrow"});n.x=this.recasteItem.x+.5*this.recasteItem.width+.5*n.width+6*this.dpr,n.y=this.recasteItem.y,this.starvalue=new h.e(this.scene,60*this.dpr,20*this.dpr,l.d.recast,"Recast_pica star_small",this.dpr,m.UIHelper.colorNumberStyle("#ffffff",20*this.dpr)),this.starvalue.x=n.x-11*this.dpr,this.starvalue.y=n.y-10*this.dpr,this.nameTex=this.scene.make.text({text:"",style:m.UIHelper.colorStyle("#FFFF00",14*this.dpr)}).setOrigin(0,.5),this.nameTex.setFontStyle("bold"),this.nameTex.x=i.x-.5*i.width,this.nameTex.y=i.y-.5*i.height-18*this.dpr,this.starLevelImg=this.scene.make.image({key:l.d.recast,frame:"Recast_star_big_1"}).setOrigin(1,.5),this.starLevelImg.x=i.x+.5*i.width-.5*this.starLevelImg.width-12*this.dpr,this.starLevelImg.y=i.y-.5*i.height+.5*this.starLevelImg.height+8*this.dpr,this.starLevelImg.visible=!1,this.recasteTarget=new h.c(this.scene,this.render),this.recasteTarget.setFixedScale(2*this.dpr/this.zoom),this.recasteTarget.setComplHandler(new m.Handler(this,(function(){e.recasteTarget.visible=!0}))),this.recasteTarget.setTexture(l.d.uicommon,"bag_nothing",1),this.recasteTarget.setNearest(),this.recasteTarget.x=i.x,this.recasteTarget.y=i.y,this.add([i,this.recasteItem,this.recasteTarget,n,this.starvalue,this.nameTex,this.starLevelImg])},RecasteDisplayPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRechargePanel",(function(){return g}));var a,s,o=n(788),h=n(789),l=n(2),c=n(790),m=n(0),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaRechargePanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=l.ModuleName.PICARECHARGE_NAME,n}return f(PicaRechargePanel,e),PicaRechargePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.mBackground.clear(),this.mBackground.fillGradientStyle(7304703,7304703,314367,314367),this.mBackground.fillRect(0,0,a,s),this.content.setSize(a,s),this.content.x=.5*a,this.content.y=.5*s,this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains),this.top.y=.5*-s+.5*this.top.height,this.bottom.y=.5*s-.5*this.bottom.height;var o=640*this.dpr;this.middle.y=n<o?this.top.y+this.top.height+.5*this.middle.height:28*this.dpr;var h=this.top.height+this.bottom.height;this.bg.scaleY=1,this.bg.displayHeight=s-h+60*this.dpr,this.gamescroll&&this.gamescroll.refreshMask()},PicaRechargePanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen()):this.preload())},PicaRechargePanel.prototype.addListen=function(){this.mInitialized&&this.closeBtn.on("pointerup",this.OnClosePanel,this)},PicaRechargePanel.prototype.removeListen=function(){this.mInitialized&&this.closeBtn.off("pointerup",this.OnClosePanel,this)},PicaRechargePanel.prototype.preload=function(){this.addAtlas(this.key,"recharge/recharge.png","recharge/recharge.json"),this.addAtlas(c.c.commonKey,c.d.textureUrl(c.d.commonUrl),c.d.jsonUrl(c.d.commonUrl)),this.addAtlas(c.c.common2Key,c.d.textureUrl(c.d.common2Url),c.d.jsonUrl(c.d.common2Url)),this.addAtlas(c.c.common3Key,c.d.textureUrl(c.d.common3Url),c.d.jsonUrl(c.d.common3Url)),e.prototype.preload.call(this)},PicaRechargePanel.prototype.init=function(){this.mBackground=this.scene.make.graphics(void 0,!1),this.add(this.mBackground);var i=this.scaleWidth,n=this.scaleHeight;this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.add(this.content),this.bg=this.scene.make.image({key:this.key,frame:"recharge_bg"}),this.bg.scale=1,this.bg.displayHeight=n-(96*this.dpr+50*this.dpr),this.bg.y=23*this.dpr,this.content.add(this.bg),this.top=this.scene.make.container(void 0,!1),this.top.setSize(i,100*this.dpr),this.top.y=.5*-n+.5*this.top.height,this.content.add(this.top);var a=.5*-this.top.height;this.topbg=this.scene.make.image({key:this.key,frame:"recharge_head"}),this.topbg.y=a+.5*this.topbg.height+43*this.dpr,this.titlebg=this.scene.make.image({x:0,y:0,key:this.key,frame:"recharge_text"}),this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titlebg.y=a+45*this.dpr,this.tilteName=this.scene.make.text({x:0,y:this.titlebg.y+2*this.dpr,text:m.i18n.t("recharge.title"),style:m.UIHelper.titleYellowStyle_m(this.dpr)}).setOrigin(.5),this.tilteName.setFontStyle("bold"),this.tilteName.setResolution(this.dpr),this.closeBtn=new o.Button(this.scene,c.c.commonKey,"back_arrow","back_arrow"),this.closeBtn.x=.5*-i+.5*this.closeBtn.width+15*this.dpr,this.closeBtn.y=a+.5*this.closeBtn.height+10*this.dpr,this.diamondvalue=new h.ValueContainer(this.scene,c.c.common3Key,"diamond",this.dpr),this.diamondvalue.x=.5*i-46*this.dpr,this.diamondvalue.y=this.closeBtn.y,this.top.add([this.topbg,this.titlebg,this.tilteName,this.closeBtn,this.diamondvalue]),this.createMiddle(i,n),this.createBottom(i,50*this.dpr),this.itemtips=new h.ItemInfoTips(this.scene,150*this.dpr,46*this.dpr,c.c.common2Key,"tips_bg",this.dpr),this.itemtips.setVisible(!1),this.content.add(this.itemtips),this.resize(),e.prototype.init.call(this),this.setDataList()},PicaRechargePanel.prototype.setDataList=function(){var e=this;if(this.gamescroll){for(var i=0;i<3;i++){(n=new T(this.scene,this.width,110*this.dpr,this.key,this.dpr,this.scale)).setHandler(new m.Handler(this,(function(i){e.buy("com.tooqing.app.60diamond","测试付费项目")}))),n.setTwoData(),this.gamescroll.addItem(n)}this.gamescroll.Sort()}else{for(i=0;i<6;i++){var n;(n=new _(this.scene,this.key,this.dpr,this.scale)).setHandler(new m.Handler(this,(function(i){e.buy("com.tooqing.app.60diamond","测试付费项目")}))),this.gridlayout.add(n)}this.gridlayout.Layout()}},PicaRechargePanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaRechargePanel.prototype.createMiddle=function(e,i){this.middle=this.scene.make.container(void 0,!1),this.content.add(this.middle),this.banner=new x(this.scene,0,0,308*this.dpr,96*this.dpr,this.key,"recharge_banner",this.scale),this.middle.add(this.banner);var n=150*this.dpr,a=i-n;if(a<640*this.dpr-n){this.middle.setSize(e,a),this.middle.y=this.top.y+this.top.height+.5*this.middle.height,this.banner.y=.5*-this.middle.height+.5*this.banner.height,(m=this.scene.make.image({key:this.key,frame:"recharge_division"})).y=this.banner.y+.5*this.banner.height+.5*m.height,this.middle.add(m);var s=a-110*this.dpr,o=.5*s+m.y+.5*m.height;this.gamescroll=this.createGameScroll(0,o,e,s),this.middle.add(this.gamescroll)}else{this.middle.setSize(e,500*this.dpr),this.middle.y=28*this.dpr,this.banner.y=.5*-this.middle.height+.5*this.banner.height+3*this.dpr;for(var l=this.banner.y+.5*this.banner.height-this.dpr,c=0;c<4;c++){var m;(m=this.scene.make.image({key:this.key,frame:"recharge_division"})).y=l+.5*m.height,l+=131*this.dpr,this.middle.add(m)}this.gridlayout=new h.GridLayoutGroup(this.scene,this.width,this.height,{cellSize:new Phaser.Math.Vector2(149*this.dpr,110*this.dpr),space:new Phaser.Math.Vector2(10*this.dpr,21*this.dpr),startAxis:h.AxisType.Horizontal,constraint:h.ConstraintType.FixedColumnCount,constraintCount:2,alignmentType:h.AlignmentType.UpperCenter}),this.gridlayout.y=this.banner.y+.5*this.banner.height+21*this.dpr,this.middle.add(this.gridlayout)}},PicaRechargePanel.prototype.createBottom=function(e,i){this.bottom=this.scene.make.container(void 0,!1),this.bottom.setSize(e,i),this.content.add(this.bottom),this.bottom.y=.5*this.scaleHeight-.5*i;var n=this.scene.make.image({key:this.key,frame:"recharge_nav_bg"});this.bottom.add(n);var a=102*this.dpr,l=41*this.dpr,c=15*this.dpr,f=m.UIHelper.blueStyle(this.dpr,15);this.checkBox=new h.CheckboxGroup;for(var g=[s.GIFT,s.PRIVILEGE,s.DIAMONO],_=[m.i18n.t("recharge.gift"),m.i18n.t("recharge.privilege"),m.i18n.t("recharge.diamond")],T=.5*-(a*g.length+c*(g.length-1)),x=0;x<g.length;x++){var S=g[x],j=new o.TabButton(this.scene,this.key,"recharge_tab_uncheck","recharge_tab_check",_[x]);j.setTextStyle(f),j.setData("data",S),j.setSize(a,l),j.setFontStyle("bold"),j.y=1*this.dpr,j.x=T+.5*a,T+=a+c,this.checkBox.appendItem(j),this.bottom.add(j)}this.checkBox.on("selected",this.onTabButtonHandler,this),this.checkBox.selectIndex(0)},PicaRechargePanel.prototype.createGameScroll=function(e,i,n,a){return new o.GameScroller(this.scene,{x:e,y:i,width:n,height:a,zoom:this.scale,align:2,orientation:0,dpr:this.dpr,space:20*this.dpr,selfEvent:!0,padding:{top:10*this.dpr,bottom:10*this.dpr}})},PicaRechargePanel.prototype.buy=function(e,i){window.IAP&&window.IAP.buy(e,(function(){alert("购买"+i+"成功，等待发货！")}))},PicaRechargePanel.prototype.onTabButtonHandler=function(e){},PicaRechargePanel.prototype.OnClosePanel=function(){this.render.renderEmitter(l.ModuleName.PICARECHARGE_NAME+"_hide")},PicaRechargePanel.prototype.onPointerUpHandler=function(e){},PicaRechargePanel.prototype.onSendHandler=function(e){this.render.renderEmitter(l.ModuleName.PICARECHARGE_NAME+"_questwork",e)},PicaRechargePanel.prototype.onItemInfoTips=function(e,i,n){this.itemtips.visible=i,this.itemtips.x=n.x*this.scale-this.content.x,this.itemtips.y=n.y*this.scale-this.content.y-30*this.dpr,this.itemtips.setText(this.getDesText(e))},PicaRechargePanel.prototype.getDesText=function(e){return e||(e={sellingPrice:!0,tradable:!1}),m.i18n.t("work.attri",{name:""+e.name,value:e.neededCount})},PicaRechargePanel}(h.BasePanel),_=function(e){function RechargeItem(i,n,a,s){var l=e.call(this,i)||this;l.giftbags=[],l.key=n,l.dpr=a,l.zoom=s;var f=149*a,g=108*a;return l.setSize(f,g),l.bg=l.scene.make.image({key:n,frame:"recharge_diamond_bg"}),l.add(l.bg),l.title=new o.BBCodeText(l.scene,0,0,"",{color:"#ffffff",fontSize:14*a,fontFamily:m.Font.DEFULT_FONT}).setOrigin(.5),l.title.x=0,l.title.y=.5*-g+10*a,l.add(l.title),l.imgicon=l.scene.make.image({key:n,frame:"recharge_diamond_1.99"}),l.add(l.imgicon),l.imgicon.x=.5*-l.width+48*a,l.imgicon.y=2*a,l.tipsbg=l.scene.make.image({key:n,frame:"recharge_first_purchase"}),l.add(l.tipsbg),l.tipsbg.x=.5*l.width-.5*l.tipsbg.width+3*a,l.tipsbg.y=.5*-l.height+.5*l.tipsbg.height+23*a,l.tipsvalue=l.scene.make.text({text:"",style:m.UIHelper.whiteStyle(a)}),l.tipsvalue.setOrigin(0,.5),l.add(l.tipsvalue),l.tipsvalue.x=.5*-l.width+3*a,l.tipsvalue.y=l.tipsbg.y-7*a,l.tipstext=l.scene.make.text({text:"First Purchase",style:m.UIHelper.whiteStyle(a,11)}),l.tipstext.setOrigin(1,.5),l.add(l.tipstext),l.tipstext.x=.5*l.width-3*a,l.tipstext.y=l.tipsbg.y-3*a,l.purchaseBtn=new h.ThreeSliceButton(i,63*a,22*a,c.c.common3Key,m.UIHelper.threeYellowNormal,m.UIHelper.threeYellowNormal,"$ 1.99"),l.purchaseBtn.setTextStyle(m.UIHelper.brownishStyle(a)),l.purchaseBtn.setFontStyle("bold"),l.add(l.purchaseBtn),l.purchaseBtn.x=.5*l.width-.5*l.purchaseBtn.width-10*a,l.purchaseBtn.y=.5*l.height-.5*l.purchaseBtn.height-9*a,l.purchaseBtn.on(String(o.ClickEvent.Tap),l.onSendHandler,l),l.setRechargeData(void 0),l}return f(RechargeItem,e),RechargeItem.prototype.setHandler=function(e){this.sendHandler=e},RechargeItem.prototype.setRechargeData=function(e){this.rechargeData=e,this.title.text="[color=#FFE400]100[/color]Diamond",this.setPropItems()},RechargeItem.prototype.setPropItems=function(){for(var e=0,i=this.giftbags;e<i.length;e++){(o=i[e]).visible=!1,o.enable=!1}var n=[],a=0;1===n.length?(this.addimg&&(this.addimg.visible=!1),a=.5*this.width-55*this.dpr):(a+=20*this.dpr,this.addimg?this.addimg.visible=!0:(this.addimg=this.scene.make.image({key:this.key,frame:"recharge_diamond_gift"}),this.add(this.addimg)));for(var s=0;s<n.length;s++){var o=void 0,l=n[s];s<this.giftbags.length?o=this.giftbags[s]:((o=new h.PropItem(this.scene,this.key,"recharge_diamond_gift",this.dpr,this.zoom)).enable=!0,this.giftbags.push(o),this.add(o)),o.setItemData(l),o.visible=!0,o.x=a+.5*o.width,o.y=0,a+=o.width+20*this.dpr}},RechargeItem.prototype.onSendHandler=function(){this.sendHandler&&this.sendHandler.runWith([100])},RechargeItem}(Phaser.GameObjects.Container),T=function(e){function TwoRechargeItem(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.key=s,l.dpr=o,l.zoom=h,l.bottombg=l.scene.make.image({key:s,frame:"recharge_division"}),l.setSize(n,a),l.add(l.bottombg),l.bottombg.y=.5*l.height+.5*l.bottombg.height-1*o,l}return f(TwoRechargeItem,e),TwoRechargeItem.prototype.setHandler=function(e){this.sendHandler=e},TwoRechargeItem.prototype.setTwoData=function(){for(var e=0;e<2;e++){var i=new _(this.scene,this.key,this.dpr,this.scale);i.setHandler(this.sendHandler),this.add(i),i.x=.5*-i.width-5*this.dpr+e*(i.width+10*this.dpr)}},TwoRechargeItem}(Phaser.GameObjects.Container),x=function(e){function RechargeBanner(i,n,a,s,o,h,l,c){var m=e.call(this,i,n,a)||this;return m.key=h,m.frame=l,m.banners=[],m.setSize(s,o),m.setBannerData(),m.enable=!0,m}return f(RechargeBanner,e),RechargeBanner.prototype.setBannerData=function(){for(var e=0,i=0;i<6;i++){var n=new h.DynamicImage(this.scene,0,0,this.key,this.frame);this.banners.push(n),n.x=e,e+=n.width+10*this.dpr}this.add(this.banners)},RechargeBanner.prototype.onPointerMoveHandler=function(i){e.prototype.onPointerMoveHandler.call(this,i),this.banners.length>1&&this.moveBanner(i.deltaX)},RechargeBanner.prototype.onPointerUpHandler=function(e){this.interactiveBoo?this.mTweenBoo?this.tween(!1,this.pointerUp.bind(this,e)):this.pointerUp(e):this.soundGroup&&this.soundGroup.disabled&&this.playSound(this.soundGroup.disabled)},RechargeBanner.prototype.moveBanner=function(e){for(var i=0,n=this.banners;i<n.length;i++){n[i].x+=e}},RechargeBanner.prototype.tween=function(e,i){var n=this;this.mTweening=!0,this.mTween&&(this.mTween.stop(),this.mTween.remove(),this.mTween=void 0),this.mTween=this.scene.tweens.add({targets:this.list,duration:45,ease:"Linear",x:0,onComplete:function(){n.tweenComplete(),i&&i()},onCompleteParams:[this]})},RechargeBanner.prototype.tweenComplete=function(){this.mTweening=!1,this.mTween&&(this.mTween.stop(),this.mTween.remove(),this.mTween=void 0)},RechargeBanner}(h.SoundButton);!function(e){e[e.GIFT=0]="GIFT",e[e.PRIVILEGE=1]="PRIVILEGE",e[e.DIAMONO=2]="DIAMONO"}(s||(s={}))},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRenamePanel",(function(){return _}));var a,s=n(788),o=n(0),h=n(2),l=n(789),c=n(792),m=n(790),f=n(791),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaRenamePanel(i){var n=e.call(this,i)||this;return n.setTween(!1),n.scene.add.container(0,0).add(n),n.atlasNames=[m.d.uicommon,m.d.createrole],n.textures=[{atlasName:"Create_bg_texture",folder:"texture"},{atlasName:"Create_role_bg",folder:"texture"}],n.key=h.ModuleName.PICARENAME_NAME,n.uiLayer=l.MainUIScene.LAYER_DIALOG,n}return g(PicaRenamePanel,e),PicaRenamePanel.prototype.resize=function(e,i){var n=this.scaleWidth,a=this.scaleHeight;this.content.x=.5*n,this.content.y=.5*a},PicaRenamePanel.prototype.setSuitDatas=function(e){var i=h.AvatarSuitType.createHasBaseAvatar(e);this.displayAvatar(i)},PicaRenamePanel.prototype.setAvatarDatas=function(e){this.displayAvatar(e)},PicaRenamePanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.content=this.scene.make.container(void 0,!1),this.add(this.content),this.commonBackground=new f.CommonBackground(this.scene,0,0,i,n),this.mBottomBg=this.scene.make.image({key:"Create_bg_texture"}),this.mBottomBg.y=.5*n-.5*this.mBottomBg.height;var a=this.scene.make.image({key:"Create_role_bg"});a.y=-140*this.dpr,this.dragonbones=new l.UIDragonbonesDisplay(this.scene,this.render),this.dragonbones.scale=2.2*this.dpr,this.dragonbones.y=a.y+80*this.dpr,this.dragonbones.on("initialized",this.loadDragonbonesComplete,this);var h=new l.ButtonEventDispatcher(this.scene,0,0);h.setSize(130*this.dpr,130*this.dpr),h.enable=!0,h.on(s.ClickEvent.Tap,this.onAvatarClickHandler,this),h.y=this.dragonbones.y-65*this.dpr,this.backButton=new s.Button(this.scene,m.d.uicommon,"back_arrow"),this.backButton.x=.5*-i+.5*this.backButton.width+20*this.dpr,this.backButton.y=.5*-n+.5*this.backButton.height+23*this.dpr,this.backButton.on(s.ClickEvent.Tap,this.onBackHandler,this),this.inputCon=this.scene.make.container(void 0,!1),this.inputCon.y=this.dragonbones.y+90*this.dpr;var c=this.scene.make.image({key:m.d.createrole,frame:"Create_role_id_bg"});this.inputTex=new s.InputText(this.scene,-20*this.dpr,0,190*this.dpr,52*this.dpr,{type:"input",fontSize:18*this.dpr+"px",color:"#717171",align:"center",placeholder:o.i18n.t("create_role.enter_nick")}).setOrigin(.5),this.randomButton=new s.Button(this.scene,m.d.createrole,"Create_role_id_random","Create_role_id_random"),this.randomButton.x=.5*c.width-12*this.dpr-.5*this.randomButton.width,this.randomButton.y=0,this.randomButton.on(s.ClickEvent.Tap,this.onRandomNameHandler,this),this.inputCon.add([c,this.inputTex,this.randomButton]),this.enterButton=new s.NineSliceButton(this.scene,0,0,191*this.dpr,55*this.dpr,m.d.uicommon,"yellow_btn_normal",o.i18n.t("common.confirm"),this.dpr,this.scale,o.UIHelper.button(this.dpr)),this.enterButton.setTextStyle(o.UIHelper.brownishStyle(this.dpr,23)),this.enterButton.setFontStyle("bold"),this.enterButton.on(s.ClickEvent.Tap,this.onSubmitHandler,this),this.enterButton.y=this.inputCon.y+100*this.dpr,this.content.add([this.commonBackground,this.mBottomBg,a,this.dragonbones,h,this.inputCon,this.enterButton]),e.prototype.init.call(this),this.resize(0,0)},PicaRenamePanel.prototype.setNickName=function(e){this.inputTex&&(this.inputTex.text=e)},PicaRenamePanel.prototype.addListen=function(){this.inputTex.on("blur",this.onTextBlurHandler,this),this.inputTex.on("focus",this.onTextFocusHandler,this)},PicaRenamePanel.prototype.removeListen=function(){this.inputTex.off("blur",this.onTextBlurHandler,this),this.inputTex.off("focus",this.onTextFocusHandler,this)},PicaRenamePanel.prototype.onTextBlurHandler=function(){this.scene.input.off("gameobjectdown",this.onGameobjectDown,this)},PicaRenamePanel.prototype.onTextFocusHandler=function(){this.scene.input.on("gameobjectdown",this.onGameobjectDown,this)},PicaRenamePanel.prototype.onGameobjectDown=function(e,i){this.inputTex&&this.inputTex.setBlur()},PicaRenamePanel.prototype.onSubmitHandler=function(){this.render.renderEmitter(this.key+"_submit",this.inputTex.text)},PicaRenamePanel.prototype.onRandomNameHandler=function(){this.inputTex.setBlur(),this.render.renderEmitter(this.key+"_randomname",this.inputTex.text)},PicaRenamePanel.prototype.onAvatarClickHandler=function(){var e=["walk","run","greet01"],i={name:e[Math.floor(Math.random()*e.length)],flip:!1,times:1,playingQueue:{name:"idle",playTimes:-1}};this.dragonbones.play(i)},PicaRenamePanel.prototype.onBackHandler=function(){this.render.renderEmitter(this.key+"_hide")},PicaRenamePanel.prototype.displayAvatar=function(e){this.dragonbones.load({id:0,avatar:e},void 0,!1),this.dragonbones.startLoad()},PicaRenamePanel.prototype.loadDragonbonesComplete=function(){this.dragonbones.play({name:"idle",flip:!1})},PicaRenamePanel}(c.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRepairChoosePanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(2),l=n(790),c=n(792),m=n(791),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaRepairChoosePanel(i){var n=e.call(this,i)||this;return n.key=h.ModuleName.PICAREPAIRCHOOSE_NAME,n.atlasNames=[l.d.layout],n.UIType=s.UIType.Scene,n}return f(PicaRepairChoosePanel,e),PicaRepairChoosePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.66),this.blackGraphic.fillRect(0,0,a,s),this.content.x=.5*a,this.content.y=s+.5*this.content.height+10*this.dpr,this.content.setInteractive();var o=this.scaleHeight+.5*this.content.height+10*this.dpr,h=this.scaleHeight-.5*this.content.height;this.playMove(o,h),this.blackGraphic.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains)},PicaRepairChoosePanel.prototype.onShow=function(){this.tempDatas&&this.setChooseData(this.tempDatas)},PicaRepairChoosePanel.prototype.addListen=function(){this.mInitialized&&(this.cancelBtn.on(s.ClickEvent.Tap,this.onCancelHandler,this),this.confirmBtn.on(s.ClickEvent.Tap,this.onConfirmHandler,this))},PicaRepairChoosePanel.prototype.removeListen=function(){this.mInitialized&&(this.cancelBtn.on(s.ClickEvent.Tap,this.onCancelHandler,this),this.confirmBtn.on(s.ClickEvent.Tap,this.onConfirmHandler,this))},PicaRepairChoosePanel.prototype.init=function(){var i=this.scaleWidth,n=88*this.dpr;this.blackGraphic=this.scene.make.graphics(void 0,!1),this.add(this.blackGraphic),this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.add(this.content),this.bg=this.scene.make.image({key:l.d.layout,frame:"layout_panel_bg"}),this.grid=new o.GridLayoutGroup(this.scene,219*this.dpr,n,{cellSize:new Phaser.Math.Vector2(67*this.dpr,67*this.dpr),space:new Phaser.Math.Vector2(10*this.dpr,0),startAxis:o.AxisType.Horizontal,constraint:o.ConstraintType.FixedRowCount,constraintCount:1,alignmentType:o.AlignmentType.UpperCenter}),this.cancelBtn=new s.Button(this.scene,l.d.layout,"layout_cancel","layout_cancel"),this.cancelBtn.y=0,this.cancelBtn.x=.5*-i+.5*this.cancelBtn.width+10*this.dpr,this.confirmBtn=new s.Button(this.scene,l.d.layout,"layout_confirm","layout_confirm"),this.confirmBtn.y=0,this.confirmBtn.x=.5*i-.5*this.cancelBtn.width-10*this.dpr,this.content.add([this.bg,this.grid,this.cancelBtn,this.confirmBtn]),this.resize(),e.prototype.init.call(this)},PicaRepairChoosePanel.prototype.setChooseData=function(e){if(this.tempDatas=e,this.mInitialized){for(var i=0,n=e.group;i<n.length;i++){var a=n[i],o=new m.ItemButton(this.scene,l.d.uicommon,"bag_icon_common_bg",this.dpr,this.scale,!0);o.on(s.ClickEvent.Tap,this.onItemButtonHandler,this),this.grid.add(o),o.setItemData(a),a.id===e.id&&(this.curSelectItem=o,o.select=!0)}this.grid.Layout()}},PicaRepairChoosePanel.prototype.onItemButtonHandler=function(e,i){this.curSelectItem&&(this.curSelectItem.select=!1),this.curSelectItem=i,i.select=!0},PicaRepairChoosePanel.prototype.playMove=function(e,i){var n=this.scene.tweens.add({targets:this.content,y:{from:e,to:i},ease:"Linear",duration:150,onComplete:function(){n.stop(),n.remove()}})},PicaRepairChoosePanel.prototype.onCancelHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaRepairChoosePanel.prototype.onConfirmHandler=function(){if(this.curSelectItem&&this.curSelectItem.itemData){var e=this.curSelectItem.itemData;this.tempDatas.id===e.id?this.render.renderEmitter(h.ModuleName.PICAREPAIRCHOOSE_NAME+"_close"):this.render.renderEmitter(h.ModuleName.PICAREPAIRCHOOSE_NAME+"_querychange",{element_id:this.tempDatas.id,target_type:e.id})}},PicaRepairChoosePanel}(c.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRewardTipPanel",(function(){return c}));var a,s=n(789),o=n(2),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaRewardTipPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.uiManager=i,n.mTips=[],n.showingList=[],n.key=o.ModuleName.PICAREWARDTIP_NAME,n}return l(PicaRewardTipPanel,e),PicaRewardTipPanel.prototype.show=function(){e.prototype.show.call(this),this.mInitialized&&0===this.showingList.length&&this.showAward(),this.mScene.layerManager.addToLayer(s.MainUIScene.LAYER_TOOLTIPS,this)},PicaRewardTipPanel.prototype.appendAward=function(e){this.mTips.push(e),this.show()},PicaRewardTipPanel.prototype.addAward=function(){},PicaRewardTipPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.mTips&&(this.mTips=[])},PicaRewardTipPanel.prototype.preload=function(){this.addImage(this.key,"reaward_tips/bg.png"),e.prototype.preload.call(this)},PicaRewardTipPanel.prototype.init=function(){this.setSize(20,20),e.prototype.init.call(this),this.y=.5*this.scaleHeight},PicaRewardTipPanel.prototype.showAward=function(){if(!(this.mTips.length<1)&&this.scene&&!(this.showingList.length>=3)){for(var e=0,i=this.showingList;e<i.length;e++){i[e].beUp()}var n=new m(this.scene,this.key,this.dpr,this.scale);n.once("destroy",this.onDestroyHanlder,this),n.once("show",this.onAwardItemShowHandler,this),n.setProp(this.mTips.pop()),this.add(n),this.showingList.push(n)}},PicaRewardTipPanel.prototype.onAwardItemShowHandler=function(){this.showAward()},PicaRewardTipPanel.prototype.onDestroyHanlder=function(e){var i=this.showingList.indexOf(e);i>-1&&this.showingList.splice(i,1),this.showAward()},PicaRewardTipPanel}(s.BasePanel),m=function(e){function AwardItem(i,n,a,o){var l=e.call(this,i)||this;return l.mBg=l.scene.make.image({key:n},!1),l.mScaleRatio=a*o,l.blackGraphic=l.scene.make.graphics(void 0,!1),l.mImage=new s.DynamicImage(l.scene,0,0),l.mImage.setScale(a),l.mImage.setOrigin(.5,1),l.mImage.y=l.mBg.height*o/2,l.mLabel=l.scene.make.text({x:l.mBg.width*l.originX-6*l.mScaleRatio,style:{fontFamily:h.Font.DEFULT_FONT,fontSize:11*l.mScaleRatio,color:"#00FF00"}},!1).setOrigin(0,.5),l.addAt(l.mBg,0),l.add([l.blackGraphic,l.mImage,l.mLabel]),l.setSize(l.mBg.width*o,l.mBg.height*o),l}return l(AwardItem,e),AwardItem.prototype.setProp=function(e){if(e){e.display&&e.display.texturePath&&this.mImage.load(h.Url.getOsdRes(e.display.texturePath)),this.mLabel.setText(e.text),this.mLabel.x=this.mImage.x+.5*this.mImage.displayWidth+5*this.mScaleRatio,this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,1);var i=this.mImage.displayWidth+this.mLabel.width+3*this.mScaleRatio,n=this.mBg.displayHeight,a=.5*n;this.blackGraphic.fillRoundedRect(0,.5*-n,i,n,{tl:0,tr:a,br:a,bl:0}),this.showTween()}},AwardItem.prototype.showTween=function(){var e=this;this.scene.tweens.add({targets:this,props:{x:"+="+.3*this.width},ease:"Bounce.easeOut",onComplete:function(){e.emit("show"),e.closeDelay=setTimeout((function(){e.closeTween()}),1e3)},duration:300})},AwardItem.prototype.closeTween=function(){var e=this;this.scene&&this.scene.tweens.add({targets:this,props:{y:"-="+50*this.mScaleRatio,alpha:"0"},ease:"Linear",duration:300,onComplete:function(){e.destroy()}})},AwardItem.prototype.beUp=function(){var e=this;clearTimeout(this.closeDelay),this.scene.tweens.add({targets:this,props:{y:"-="+50*this.mScaleRatio},ease:"Linear",duration:300,onComplete:function(){e.closeDelay=setTimeout((function(){e.closeTween()}),1e3)}})},AwardItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoamPanel",(function(){return T}));var a,s=n(790),o=n(2),h=n(0),l=n(792),c=n(880),m=n(879),f=n(881),g=n(1060),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),T=function(e){function PicaRoamPanel(i){var n=e.call(this,i)||this;return n.isOneDraw=!0,n.key=o.ModuleName.PICAROAM_NAME,n.atlasNames=[s.d.uicommon,s.d.uicommon1,s.d.roam],n.textures=[{atlasName:"roam_stripe",folder:"roam"},{atlasName:"roam_topic",folder:"roam"},{atlasName:"roam_topic1",folder:"roam"},{atlasName:"roamone",folder:"roam_effect",foldType:s.b.NORMAL,uiType:s.e.video},{atlasName:"roamtenrepead",folder:"roam_effect",foldType:s.b.NORMAL,uiType:s.e.video},{atlasName:"roamreward",folder:"roam_effect",foldType:s.b.NORMAL,uiType:s.e.video},{atlasName:"roambefore",folder:"roam_effect",foldType:s.b.NORMAL,uiType:s.e.video}],n}return _(PicaRoamPanel,e),PicaRoamPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.mBackground.clear(),this.mBackground.fillStyle(0,.5),this.mBackground.fillRoundedRect(-this.x,-this.y,a,s),this.content.x=.5*a,this.content.y=.5*s,this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains)},PicaRoamPanel.prototype.preload=function(){e.prototype.preload.call(this)},PicaRoamPanel.prototype.addListen=function(){this.mInitialized},PicaRoamPanel.prototype.removeListen=function(){this.mInitialized},PicaRoamPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.roamListPanel&&this.roamListPanel.destroy(),this.roamDrawPanel&&this.roamDrawPanel.destroy(),this.roamPreviewPanel&&this.roamPreviewPanel.destroy()},PicaRoamPanel.prototype.init=function(){this.mBackground=this.scene.make.graphics(void 0,!1),this.add(this.mBackground);var i=295*this.dpr,n=405*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.add(this.content),this.resize(),e.prototype.init.call(this)},PicaRoamPanel.prototype.onShow=function(){this.openRoamList(),this.tempDatas&&(this.roamListPanel.setRoamDataList(this.tempDatas),this.openFirstDrawPanel())},PicaRoamPanel.prototype.setRoamDataList=function(e){if(this.tempDatas=e,this.mInitialized){if(this.roamListPanel.setRoamDataList(e),this.roamDrawPanel){var i=this.roamListPanel.getRoamTokenDatas();this.roamDrawPanel.setRoamDatas(i)}this.openFirstDrawPanel()}},PicaRoamPanel.prototype.openFirstDrawPanel=function(){if(this.mShowData){var e=this.roamListPanel.getRoamTokenDatas(this.mShowData-1);this.onRoamListHandler("roam",e),this.mShowData=void 0}},PicaRoamPanel.prototype.openRoamEffectOnePanel=function(e){this.hideRoamDrawPanel(),this.showRoamEffectOnePanel(),this.roamEffectOnePanel.setRewardDatas(e,this.isOneDraw)},PicaRoamPanel.prototype.hideRoamEffectOnePanel=function(){this.roamEffectOnePanel.visible=!1,this.showRoamDrawPanel()},PicaRoamPanel.prototype.payDrawHandler=function(e){this.render.renderEmitter(this.key+"_queryroamdraw",e),this.isOneDraw=!1},PicaRoamPanel.prototype.setRoamTokenData=function(e,i,n){this.roamDrawPanel&&this.roamDrawPanel.setMoneyData(e,i,n)},PicaRoamPanel.prototype.openRoamList=function(){this.showRoamListPanel()},PicaRoamPanel.prototype.showRoamListPanel=function(){this.roamListPanel||(this.roamListPanel=new c.PicaRoamListPanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.roamListPanel.setHandler(new h.Handler(this,this.onRoamListHandler))),this.content.add(this.roamListPanel),this.roamListPanel.visible=!0,this.roamListPanel.resize(this.scaleWidth,this.scaleHeight),this.render.renderEmitter(this.key+"_updatepools")},PicaRoamPanel.prototype.hideRoamListPanel=function(){this.roamListPanel.visible=!1},PicaRoamPanel.prototype.openRoamDrawPanel=function(e){this.showRoamDrawPanel(),this.roamDrawPanel.setRoamDatas(e);var i=e[0],n={tokenId:i.tokenId,alterId:i.alterTokenId};this.render.renderEmitter(this.key+"_updatetoken",n),this.tokenId=i.tokenId},PicaRoamPanel.prototype.showRoamDrawPanel=function(){this.roamDrawPanel||(this.roamDrawPanel=new m.PicaRoamDrawPanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.roamDrawPanel.setHandler(new h.Handler(this,this.onRoamDrawHandler)),this.content.add(this.roamDrawPanel)),this.roamDrawPanel.visible=!0,this.roamDrawPanel.resize(this.scaleWidth,this.scaleHeight)},PicaRoamPanel.prototype.hideRoamDrawPanel=function(){this.roamDrawPanel.visible=!1},PicaRoamPanel.prototype.showRoamPreviewPanel=function(){this.roamPreviewPanel||(this.roamPreviewPanel=new f.PicaRoamPreviewPanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.roamPreviewPanel.setHandler(new h.Handler(this,this.onRoamPreviewHandler)),this.content.add(this.roamPreviewPanel)),this.roamPreviewPanel.visible=!0,this.roamPreviewPanel.resize(this.scaleWidth,this.scaleHeight)},PicaRoamPanel.prototype.hideRoamPreviewPanel=function(){this.roamPreviewPanel.visible=!1},PicaRoamPanel.prototype.showRoamEffectOnePanel=function(){this.roamEffectOnePanel||(this.roamEffectOnePanel=new g.PicaRoamEffectOnePanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr),this.roamEffectOnePanel.setHandler(new h.Handler(this,this.onRoamEffectOneHandler)),this.content.add(this.roamEffectOnePanel)),this.roamEffectOnePanel.visible=!0},PicaRoamPanel.prototype.onRoamListHandler=function(e,i){"close"===e?this.onCloseHandler():"roam"===e&&(this.hideRoamListPanel(),this.openRoamDrawPanel(i))},PicaRoamPanel.prototype.onRoamDrawHandler=function(e,i){if("close"===e)this.hideRoamDrawPanel(),this.showRoamListPanel();else if("draw"===e)this.render.renderEmitter(this.key+"_queryroamdraw",i.id),this.isOneDraw=i.one;else{if("notice"===e){var n={text:[{text:i,node:void 0}]};return void this.render.mainPeer.showMediator(o.ModuleName.PICANOTICE_NAME,!0,n)}if("pay"===e){var a=h.UIHelper.createMessageBoxConfig(i.text,h.i18n.t("roam.title"),this.key,"payDrawHandler",[i.id]);this.render.mainPeer.showMediator(o.ModuleName.PICAMESSAGEBOX_NAME,!0,a)}else"preview"===e?this.showRoamPreviewPanel():"progressrewards"===e&&this.render.renderEmitter(this.key+"_queryprogressrewards",i)}},PicaRoamPanel.prototype.onRoamPreviewHandler=function(e,i){"close"===e&&this.hideRoamPreviewPanel()},PicaRoamPanel.prototype.onRoamEffectOneHandler=function(e){this.render.renderEmitter(this.key+"_queryrareeffect")},PicaRoamPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_hide")},PicaRoamPanel}(l.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"RoomBaseAttribute",(function(){return m})),n.d(i,"RoomNameAttribute",(function(){return f})),n.d(i,"RoomStateAttribute",(function(){return g})),n.d(i,"RoomEvaluateAttribute",(function(){return _}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function RoomBaseAttribute(i,n,a,s,o){var h=e.call(this,i)||this;return h.offset=0,h.dpr=s,h.zoom=o,h.offset=13*s,h.setSize(n,a),h.title=h.scene.make.text({style:l.UIHelper.blackStyle(s,14)}).setOrigin(0,.5),h.title.x=.5*-h.width,h.add(h.title),h}return c(RoomBaseAttribute,e),RoomBaseAttribute.prototype.setHandler=function(e){this.send=e},RoomBaseAttribute.prototype.setAttributeData=function(e){},RoomBaseAttribute}(Phaser.GameObjects.Container),f=function(e){function RoomNameAttribute(i,n,a,o,c,m,f){void 0===m&&(m="text"),void 0===f&&(f="");var g=e.call(this,i,n,a,o,c)||this;g.title.text=l.i18n.t("room_info.roomname");var _=190*o,T=34*o,x=g.title.x+g.title.width+13*o;return g.mNameInput=g.createInput(x,0,_,T,14*g.dpr,m,f),g.mNameInput.on("blur",g.onTextChangeHandler,g),g.saveBtn=new s.Button(g.scene,h.d.room_info,"room_name_edit"),g.saveBtn.tweenEnable=!0,g.saveBtn.setInteractiveSize(50*o,50*o),g.saveBtn.on(s.ClickEvent.Tap,g.onSaveHandler,g),g.saveBtn.x=x+_-20*o,g.add(g.saveBtn),g}return c(RoomNameAttribute,e),RoomNameAttribute.prototype.hide=function(){this.visible=!1,this.changeInputState(!1)},RoomNameAttribute.prototype.show=function(){this.visible=!0,this.changeInputState(!0)},RoomNameAttribute.prototype.setAttributeData=function(e){this.mNameInput.setText(e)},RoomNameAttribute.prototype.createInput=function(e,i,n,a,s,h,l){void 0===h&&(h="text"),void 0===l&&(l="");var c=this.scene.make.graphics(void 0,!1);c.fillStyle(10809331,1),c.fillRoundedRect(0,.5*-a,n,a,2*this.dpr),c.setPosition(e,i),this.add(c);var m=new o.InputField(this.scene,e+.5*n-10*this.dpr,i,n-40*this.dpr,a,{type:h,placeholder:l,color:"#000000",fontSize:s+"px",style:{}});return this.add(m),m},RoomNameAttribute.prototype.onTextChangeHandler=function(){var e=70*this.dpr;this.mNameInput.text=l.UIHelper.spliceText(e,this.mNameInput.text,13*this.dpr,this.scene)},RoomNameAttribute.prototype.changeInputState=function(e){this.mNameInput.visible=e,this.mNameInput.node.style.display=e?"true":"none",this.mNameInput.visible=e,this.mNameInput.node.style.display=e?"true":"none"},RoomNameAttribute.prototype.onSaveHandler=function(){var e=this.mNameInput.text;this.send&&this.send.runWith(["name",e])},Object.defineProperty(RoomNameAttribute.prototype,"text",{get:function(){return this.mNameInput.text},enumerable:!1,configurable:!0}),RoomNameAttribute}(m),g=function(e){function RoomStateAttribute(i,n,a,s,o){var c=e.call(this,i,n,a,s,o)||this;return c.title.text=l.i18n.t("room_info.roomstate"),c.tipImag=c.scene.make.image({key:h.d.room_info,frame:"room_status_party"}).setOrigin(0,.5),c.tipTex=c.scene.make.text({text:l.i18n.t("room_info.commontips"),style:l.UIHelper.blackStyle(s,14)}).setOrigin(0,.5),c.tipImag.x=c.title.x+c.title.width+c.offset,c.tipTex.x=c.tipImag.x,c.add([c.tipImag,c.tipTex]),c.tipImag.visible=!1,c}return c(RoomStateAttribute,e),RoomStateAttribute.prototype.setAttributeData=function(e){this.tipImag.visible=e,this.tipTex.visible=!e},RoomStateAttribute}(m),_=function(e){function RoomEvaluateAttribute(i,n,a,s,o){var h=e.call(this,i,n,a,s,o)||this;return h.title.text=l.i18n.t("room_info.roomevaluate"),h.tipTex=h.scene.make.text({text:l.i18n.t("room_info.commontips"),style:l.UIHelper.colorStyle("#1DB4E9",14*s)}).setOrigin(0,.5),h.tipTex.x=h.title.x+h.title.width+h.offset,h.add([h.tipTex]),h}return c(RoomEvaluateAttribute,e),RoomEvaluateAttribute.prototype.setAttributeData=function(e){this.tipTex.text=e+""},RoomEvaluateAttribute}(m);!function(e){function RoomAttributeValue(i,n,a,o,h,c){var m=e.call(this,i,n,a)||this;return m.dpr=c,m.setSize(o,h),m.nameText=m.scene.make.text({x:.5*-o+15*c,y:0,text:"",style:{fontFamily:l.Font.DEFULT_FONT,fontSize:14*c,color:"#FFC51A"}}).setOrigin(0,.5).setResolution(c),m.valueText=new s.BBCodeText(m.scene,0,0,"",{color:"#000000",fontSize:13*m.dpr,fontFamily:l.Font.DEFULT_FONT}).setOrigin(0,.5).setResolution(c),m.imgCon=m.scene.make.container(void 0,!1),m.imgCon.x=10*c,m.add([m.nameText,m.valueText,m.imgCon]),m}c(RoomAttributeValue,e),RoomAttributeValue.prototype.setTextInfo=function(e,i){this.nameText.text=e,this.valueText.text=i},RoomAttributeValue.prototype.setImageInfo=function(e,i,n){this.nameText.text=e;for(var a=0,s=10*this.dpr,o=0,h=n;o<h.length;o++){var l=h[o],c=this.scene.make.image({key:i,frame:l});c.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),c.x=a,a+=.5*c.width+s,this.imgCon.add(c)}this.valueText.visible=!1}}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoomPanel",(function(){return T}));var a,s=n(788),o=n(789),h=n(882),l=n(2),c=n(0),m=n(790),f=n(792),g=n(1061),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),T=function(e){function PicaRoomPanel(i){var n=e.call(this,i)||this;return n.key=l.ModuleName.PICAROOM_NAME,n.atlasNames=[m.d.uicommon,m.d.uicommon1,m.d.room_info,m.d.multiple_rooms],n}return _(PicaRoomPanel,e),PicaRoomPanel.prototype.resize=function(e,i){var n=this.scaleWidth,a=this.scaleHeight;this.content.x=.5*n,this.content.y=.5*a,this.roomInfoBtn.y=.5*-this.content.height-.5*this.roomInfoBtn.height+5*this.dpr,this.roomSettingBtn.y=this.roomInfoBtn.y,this.closeBtn.y=.5*-this.content.height+5*this.dpr,this.closeBtn.x=.5*this.content.width-5*this.dpr},PicaRoomPanel.prototype.onShow=function(){this.mRoomInfoData&&this.setRoomInfoData(this.mRoomInfoData),this.mPartyData&&this.setPartyInfo(this.mPartyData)},PicaRoomPanel.prototype.setRoomInfoData=function(e){this.mRoomInfoData=e,this.mInitialized&&this.roomInfoPanel&&this.roomInfoPanel.setAttributeData(e)},PicaRoomPanel.prototype.setPartyInfo=function(e){this.mPartyData=e,this.mInitialized&&this.roomInfoPanel&&this.roomInfoPanel.setPartyData(this.mPartyData)},PicaRoomPanel.prototype.init=function(){if(!this.mInitialized){var i=this.scaleWidth,n=this.scaleHeight;this.mBackground=this.scene.make.graphics(void 0,!1),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,i,n),Phaser.Geom.Rectangle.Contains),this.mBackground.fillStyle(0,.66),this.mBackground.fillRect(0,0,i,n),this.add(this.mBackground),this.content=this.scene.make.container(void 0,!1);var a=334*this.dpr,h=460*this.dpr;this.content.setSize(a,h),this.bg=new s.NineSlicePatch(this.scene,0,0,a,h,m.d.uicommon1,"bg",{left:20*this.dpr,top:20*this.dpr,right:20*this.dpr,bottom:60*this.dpr}),this.content.add(this.bg),this.closeBtn=new s.Button(this.scene,m.d.uicommon,"close","close"),this.closeBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this),this.content.add([this.closeBtn]),this.roomInfoBtn=this.createTabButton(c.i18n.t("room_info.infobtn"),"small_information",1),this.roomSettingBtn=this.createTabButton(c.i18n.t("room_info.setting"),"small_setting",2),this.roomInfoBtn.setPosition(.5*-this.roomInfoBtn.width-2*this.dpr,.5*-this.content.height-.5*this.roomInfoBtn.height+3*this.dpr),this.roomSettingBtn.setPosition(.5*this.roomSettingBtn.width+2*this.dpr,this.roomInfoBtn.y),this.topCheckBox=new o.CheckboxGroup,this.topCheckBox.appendItemAll([this.roomInfoBtn,this.roomSettingBtn]),this.topCheckBox.on("selected",this.onTabBtnHandler,this),this.content.add([this.roomInfoBtn,this.roomSettingBtn]),this.topCheckBox.selectIndex(0),this.add(this.content),this.resize(0,0),e.prototype.init.call(this)}},PicaRoomPanel.prototype.showRoomInfoPanel=function(){this.roomInfoPanel||(this.roomInfoPanel=new h.PicaRoomInfoPanel(this.scene,this.uiManager,0,0,this.content.width-40*this.dpr,this.content.height-70*this.dpr,this.dpr),this.roomInfoPanel.y=.5*-this.content.height+.5*this.roomInfoPanel.height+30*this.dpr,this.roomInfoPanel.setHandler(new c.Handler(this,this.onSendHandler)),this.content.add(this.roomInfoPanel)),this.roomInfoPanel.show()},PicaRoomPanel.prototype.hideRoomInfoPanel=function(){this.roomInfoPanel&&this.roomInfoPanel.hide()},PicaRoomPanel.prototype.showRoomSettingPanel=function(){this.roomSettingPanel||(this.roomSettingPanel=new g.PicaRoomSettingPanel(this.scene,0,0,this.content.width-40*this.dpr,this.content.height-70*this.dpr,this.dpr),this.roomSettingPanel.y=.5*-this.content.height+.5*this.roomSettingPanel.height+30*this.dpr,this.roomSettingPanel.setHandler(new c.Handler(this,this.onSendHandler)),this.content.add(this.roomSettingPanel)),this.roomSettingPanel.show()},PicaRoomPanel.prototype.hideRoomSettingPanel=function(){this.roomSettingPanel&&this.roomSettingPanel.hide()},PicaRoomPanel.prototype.onTabBtnHandler=function(e){1===e.getData("optionType")?(this.hideRoomSettingPanel(),this.showRoomInfoPanel(),this.mRoomInfoData&&this.roomInfoPanel.setAttributeData(this.mRoomInfoData),this.mPartyData&&this.roomInfoPanel.setPartyData(this.mPartyData)):(this.showRoomSettingPanel(),this.hideRoomInfoPanel())},PicaRoomPanel.prototype.createTabButton=function(e,i,n){var a=new s.TabButton(this.scene,m.d.room_info,"room_tab_unselected","room_tab_selected",e);a.setTextStyle({fontFamily:c.Font.DEFULT_FONT,fontSize:12*this.dpr,color:"#ffffff"}),a.setTextOffset(13*this.dpr,0);var o=this.scene.make.image({key:m.d.room_info,frame:i});return a.add(o),o.x=.5*-a.width+.5*o.width+23*this.dpr,a.setData("optionType",n),a},PicaRoomPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(l.ModuleName.PICAROOM_NAME+"_hide")},PicaRoomPanel.prototype.onSendHandler=function(e,i){"name"===e?i.length>=3?this.render.renderEmitter(l.ModuleName.PICAROOM_NAME+"_name",i):this.onNoticeHandler(c.i18n.t("room_info.editornametips")):"open"===e?this.onNoticeHandler(c.i18n.t("noticeTips.staytuned")):"defaultroom"===e&&this.render.renderEmitter(l.ModuleName.PICAROOM_NAME+"_defaultroom",this.mRoomInfoData.roomId)},PicaRoomPanel.prototype.onNoticeHandler=function(e){var i={text:[{text:e,node:void 0}]};this.render.mainPeer.showMediator(l.ModuleName.PICANOTICE_NAME,!0,i)},PicaRoomPanel}(f.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoomDecoratePanel",(function(){return g}));var a,s=n(883),o=n(2),h=n(0),l=n(792),c=n(790),m=n(791),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaRoomDecoratePanel(i){var n=e.call(this,i)||this;return n.key=o.ModuleName.PICAROOMDECORATE_NAME,n.atlasNames=[c.d.uicommon,c.d.uicommon1,c.d.decorateshop],n}return f(PicaRoomDecoratePanel,e),PicaRoomDecoratePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,i,n),this.setSize(a,s),this.mBackGround.clear(),this.mBackGround.fillStyle(0,.88),this.mBackGround.fillRect(0,0,a,s),this.content.x=.5*a,this.content.y=.5*s,this.moneycomp.x=a-20*this.dpr,this.moneycomp.y=.5*this.moneycomp.height+50*this.dpr},PicaRoomDecoratePanel.prototype.addListen=function(){this.mInitialized},PicaRoomDecoratePanel.prototype.removeListen=function(){this.mInitialized},PicaRoomDecoratePanel.prototype.init=function(){var i=this.scale,n=this.scaleWidth,a=this.scaleHeight;this.mBackGround=this.scene.make.graphics(void 0,!1),this.mBackGround.clear(),this.mBackGround.fillStyle(7004927,0),this.mBackGround.fillRect(0,0,n*i,a*i),this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.add(this.mBackGround),this.content=this.scene.make.container(void 0,!1),this.add(this.content),this.moneycomp=new m.MoneyCompent(this.scene,190*this.dpr,28*this.dpr,this.dpr,this.scale),this.add(this.moneycomp),this.resize(n,a),this.openManorShop(),e.prototype.init.call(this)},PicaRoomDecoratePanel.prototype.onShow=function(){this.setMoneyData(this.moneyValue,this.diamondValue)},PicaRoomDecoratePanel.prototype.setMoneyData=function(e,i){this.moneyValue=e,this.diamondValue=i,this.mInitialized&&this.moneycomp.setMoneyData(e,i)},PicaRoomDecoratePanel.prototype.setShopCategories=function(e){this.picShopPanel&&this.picShopPanel.setShopCategories(e)},PicaRoomDecoratePanel.prototype.setShopDatas=function(e){this.picShopPanel&&this.picShopPanel.setShopDatas(e)},PicaRoomDecoratePanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaRoomDecoratePanel.prototype.openManorShop=function(){this.showShopPanel(),this.render.renderEmitter(this.key+"_getCategories")},PicaRoomDecoratePanel.prototype.showShopPanel=function(){var e=this;if(!this.picShopPanel){var i=334*this.dpr,n=455*this.dpr;this.picShopPanel=new s.PicaRoomDecorateShopPanel(this.scene,0,0,i,n,this.key,this.dpr,this.scale),this.picShopPanel.setHandler(new h.Handler(this,(function(i,n){if("usetype"===i)e.render.renderEmitter(e.key+"_usingitem",n);else if("buytype"===i){var a=n.price.coinType===h.CoinType.DIAMOND?e.diamondValue:e.moneyValue;if(n.price.price>a){var s={text:[{text:h.i18n.t("market.moneyless"),node:void 0}]};e.render.mainPeer.showMediator(o.ModuleName.PICANOTICE_NAME,!0,s)}else e.render.renderEmitter(e.key+"_buyItem",n)}})),new h.Handler(this,(function(){e.hideShopPanel()}))),this.picShopPanel.on("queryProp",(function(i){e.render.renderEmitter(e.key+"_queryMarket",i)}),this)}this.content.add(this.picShopPanel),this.picShopPanel.refreshMask()},PicaRoomDecoratePanel.prototype.hideShopPanel=function(){this.onCloseHandler()},PicaRoomDecoratePanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_hide")},PicaRoomDecoratePanel}(l.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoomListPanel",(function(){return g})),n.d(i,"RoomDelegate",(function(){return _})),n.d(i,"RoomZoon",(function(){return x}));var a,s=n(1),o=n(788),h=n(789),l=n(2),c=n(0),m=n(790),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaRoomListPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.mSelectIndex=0,n.key=l.ModuleName.PICAROOMLIST_NAME,n}return f(PicaRoomListPanel,e),PicaRoomListPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;this.content.x=a>>1,this.content.y=s>>1,this.mBackGround.clear(),this.mBackGround.fillStyle(7004927,0),this.mBackGround.fillRect(0,0,a,s),this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains),e.prototype.resize.call(this,a,s),this.setSize(a,s)},PicaRoomListPanel.prototype.updateRoomList=function(e){e&&this.mRoomDele.updateList(e)},PicaRoomListPanel.prototype.updateMyRoomList=function(e){e&&this.mMyRoomDele.updateList(e)},PicaRoomListPanel.prototype.addListen=function(){this.mInitialized&&(this.mCloseBtn.on("pointerup",this.onCloseHandler,this),this.mSeachBtn.on("pointerup",this.onSeachHandler,this))},PicaRoomListPanel.prototype.removeListen=function(){this.mInitialized&&(this.mCloseBtn.off("pointerup",this.onCloseHandler,this),this.mSeachBtn.off("pointerup",this.onSeachHandler,this))},PicaRoomListPanel.prototype.destroy=function(){this.mScroller&&this.mScroller.destroy(),e.prototype.destroy.call(this)},PicaRoomListPanel.prototype.preload=function(){this.addAtlas(m.c.commonKey,m.d.commonUrl+".png",m.d.commonUrl+".json"),this.addAtlas(this.key,"pica_roomlist/pica_roomlist.png","pica_roomlist/pica_roomlist.json"),e.prototype.preload.call(this)},PicaRoomListPanel.prototype.init=function(){var i=this;this.setSize(this.scaleWidth,this.scaleWidth);var n=this.mWorld.uiScale,a=this.scene.make.image({key:this.key,frame:"bg.png"},!1).setInteractive();this.mBackGround=this.scene.make.graphics(void 0,!1),this.mCloseBtn=this.scene.make.image({key:this.key,frame:"close_btn.png"},!1).setInteractive(),this.mCloseBtn.x=a.width/2-this.mCloseBtn.width/2-2*this.dpr,this.mCloseBtn.y=-a.height/2+this.mCloseBtn.height/2,this.mRoomDeleBtn=new o.TabButton(this.scene,this.key,"checkbox_normal","checkbox_down",c.i18n.t("room_list.visit")),this.mRoomDeleBtn.x=-54*this.dpr,this.mRoomDeleBtn.y=-a.height/2+this.mRoomDeleBtn.displayHeight/2-4*this.dpr,this.mRoomDeleBtn.setTextStyle({color:"#3333cc",fontFamily:c.Font.DEFULT_FONT,fontSize:14*this.dpr}),this.mRoomDeleBtn.setFontStyle("bold"),this.mMyRoomDeleBtn=new o.TabButton(this.scene,this.key,"checkbox_normal","checkbox_down",c.i18n.t("room_list.my")),this.mMyRoomDeleBtn.x=54*this.dpr,this.mMyRoomDeleBtn.y=this.mRoomDeleBtn.y,this.mMyRoomDeleBtn.setTextStyle({color:"#3333cc",fontFamily:c.Font.DEFULT_FONT,fontSize:16*this.dpr}),this.mMyRoomDeleBtn.setFontStyle("bold");var s=new h.CheckboxGroup;s.appendItemAll([this.mRoomDeleBtn,this.mMyRoomDeleBtn]),s.on("selected",this.onSelectedHandler,this),this.mSelectIndex=0,this.mRoomContainer=this.scene.make.container(void 0,!1),this.mRoomContainer.setSize(282*this.dpr,362*this.dpr),this.mRoomContainer.y=-a.height/2+11*this.dpr*n,this.mSeachBtn=this.scene.make.image({key:this.key,frame:"seach_btn.png"},!1).setInteractive(),this.mSeachBtn.y=a.height/2-this.mSeachBtn.height/2+12*this.dpr;var l=this.scene.make.text({x:-35*this.dpr,y:this.mSeachBtn.y,text:c.i18n.t("room_list.seach"),style:{color:"#996600",fontFamily:c.Font.DEFULT_FONT,fontSize:14*this.dpr}},!1).setOrigin(.5),m=this.scene.make.text({x:35*this.dpr,y:this.mSeachBtn.y,text:c.i18n.t("room_list.room"),style:{color:"#996600",fontFamily:c.Font.DEFULT_FONT,fontSize:14*this.dpr}},!1).setOrigin(.5);this.content=this.scene.make.container(void 0,!1),this.content.setSize(a.width,a.height),this.content.add([a,this.mRoomContainer,this.mCloseBtn,this.mSeachBtn,l,m]),this.add([this.mBackGround,this.content]),e.prototype.init.call(this),this.resize(0,0);var f=this.mRoomContainer.width*this.scale,g=this.mRoomContainer.height*this.scale,_={x:this.scaleWidth-f/this.scale>>1,y:this.content.y-this.content.height/2+20*this.dpr*this.scale,clickX:0,clickY:0,width:this.scaleWidth,height:g,boundPad0:-40*this.dpr*n,zoom:n,dpr:this.dpr,value:this.content.y,valuechangeCallback:function(e){i.mRoomContainer.y=e-i.content.y-g/2},cellupCallBack:function(e){e.onEnterRoomHandler()},overminCallbackScope:this,overminCallback:function(){i.mRoomDele&&0===i.mSelectIndex&&i.mRoomDele.overminHandler(),i.mMyRoomDele||1!==i.mSelectIndex||i.mMyRoomDele.overminHandler()}};this.mScroller=new o.BaseScroller(this.scene,this.mRoomContainer,_),this.content.add([this.mRoomDeleBtn,this.mMyRoomDeleBtn,this.mCloseBtn]),s.selectIndex(0)},PicaRoomListPanel.prototype.showRoomList=function(){this.mMyRoomDele&&(this.mMyRoomDele.removeFromContainer(),this.mMyRoomDele.off("enterRoom",this.onEnterRoomHandler,this)),this.mRoomDele||(this.mRoomDele=new _(this.mRoomContainer,this.mScroller,this.scene,this.mWorld,this.key,this.dpr)),this.mRoomDele.on("enterRoom",this.onEnterRoomHandler,this),this.mRoomDele.addToContainer(),this.render.renderEmitter(l.ModuleName.PICAROOMLIST_NAME+"_getRoomList")},PicaRoomListPanel.prototype.showMyRoomList=function(){this.mRoomDele&&(this.mRoomDele.removeFromContainer(),this.mRoomDele.off("enterRoom",this.onEnterRoomHandler,this)),this.mMyRoomDele||(this.mMyRoomDele=new T(this.mRoomContainer,this.mScroller,this.mWorld,this.scene,this.key,this.dpr)),this.mMyRoomDele.on("enterRoom",this.onEnterRoomHandler,this),this.mMyRoomDele.addToContainer(),this.render.renderEmitter(l.ModuleName.PICAROOMLIST_NAME+"_getMyRoomList")},PicaRoomListPanel.prototype.onEnterRoomHandler=function(e){this.render.renderEmitter(l.ModuleName.PICAROOMLIST_NAME+"_enterRoom",e)},PicaRoomListPanel.prototype.onSelectedHandler=function(e){if(e instanceof o.Button){switch(this.mRoomContainer.removeAll(!1),e){case this.mRoomDeleBtn:this.showRoomList(),this.mSelectIndex=0;break;case this.mMyRoomDeleBtn:this.showMyRoomList(),this.mSelectIndex=1}e.setTextColor("#996600"),this.preTabButton&&this.preTabButton.setTextColor("#3333cc"),this.preTabButton=e}},PicaRoomListPanel.prototype.onSeachHandler=function(){},PicaRoomListPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(l.ModuleName.PICAROOMLIST_NAME+"_close")},PicaRoomListPanel}(h.BasePanel),_=function(e){function RoomDelegate(i,n,a,s,o,h){void 0===h&&(h=1);var l=e.call(this)||this;return l.mChildPad=0,l.mDpr=1,l.mHeight=0,l.mDpr=h,l.mRender=s,l.mChildPad=0,l.mScene=a,l.mContainer=i,l.mScroller=n,l.mKey=o,l.init(),l}return f(RoomDelegate,e),RoomDelegate.prototype.addListen=function(){this.mPopularityRoom.on("enterRoom",this.onEnterRoomHandler,this),this.mPlayerRoom.on("enterRoom",this.onEnterRoomHandler,this)},RoomDelegate.prototype.removeListen=function(){this.mPopularityRoom.off("enterRoom",this.onEnterRoomHandler,this),this.mPlayerRoom.off("enterRoom",this.onEnterRoomHandler,this)},RoomDelegate.prototype.updateList=function(e){this.mContent=e,this.mScroller.clearInteractiveObject(),this.mHeight=this.activity.height,this.mChildPad=this.activity.height+14*this.mDpr,this.mContent&&this.mPopularityRoom.addItem(e.popularRooms,this.mChildPad)},RoomDelegate.prototype.addToContainer=function(){this.addListen(),this.refreshPos()},RoomDelegate.prototype.removeFromContainer=function(){this.removeListen(),this.mPopularityRoom&&this.mPopularityRoom.clear(),this.mPlayerRoom&&this.mPlayerRoom.clear()},RoomDelegate.prototype.destroy=function(){this.removeListen(),this.mPlayerRoom&&this.mPopularityRoom.destroy(),this.mPopularityRoom&&this.mPopularityRoom.destroy(),this.mScroller&&this.mScroller.destroy(),this.activity&&this.activity.destroy(),e.prototype.destroy.call(this)},RoomDelegate.prototype.overminHandler=function(){var e=this.mPlayerRoom.updateItem();e&&this.mPlayerRoom.mRefreshRooms&&(this.mHeight+=e,this.mContainer.add(this.mPlayerRoom.mRefreshRooms),this.setUpdateScrollInteractive(this.mPlayerRoom.mRefreshRooms))},RoomDelegate.prototype.setUpdateScrollInteractive=function(e){for(var i=0,n=e.length;i<n;i++){var a=e[i];this.mScroller.setInteractiveObject(a)}this.mScroller.refreshBound(this.mHeight)},RoomDelegate.prototype.init=function(){var e=this;this.activity=this.mScene.make.image({key:this.mKey,frame:"activity_title.png"},!1),this.activity.y=this.activity.height/2+2*this.mDpr,this.mChildPad+=this.activity.height/2+18*this.mDpr,this.mPopularityRoom=new j(this.mScene,this.mKey,"popularity_icon.png",c.i18n.t("room_list.popularity_room"),this.mDpr,this.mRender.uiScale,0,this.mChildPad,(function(i){e.mPopularityRoom.roomList&&e.setScrollInteractive(e.mPopularityRoom.roomList),e.mHeight+=i,e.refreshPos(),e.mChildPad+=e.mPopularityRoom.height,e.mPlayerRoom.addItem(e.mContent.playerRooms,e.mChildPad)})),this.mPlayerRoom=new x(this.mScene,this.mKey,"player_icon.png",c.i18n.t("room_list.player_room"),this.mDpr,this.mRender.uiScale,0,this.mChildPad,(function(i){e.mPlayerRoom.roomList&&e.setScrollInteractive(e.mPlayerRoom.roomList),e.mHeight+=i,e.refreshPos(),e.mScroller.refreshBound(e.mHeight),e.mScroller.setValue(e.mContainer.parentContainer.y)})),this.mScroller.refreshBound(this.activity.height),this.mScroller.setValue(this.mContainer.parentContainer.y)},RoomDelegate.prototype.refreshPos=function(){var e=this;this.activity&&(this.activity.setTexture(this.mKey,"activity_title.png"),this.mContainer.add(this.activity)),this.mPopularityRoom&&this.mPopularityRoom.showList&&(this.mContainer.add(this.mPopularityRoom.showList),this.mPopularityRoom.roomList&&this.mPopularityRoom.roomList.forEach((function(i){e.mContainer.add(i)}))),this.mPlayerRoom&&this.mPlayerRoom.showList&&(this.mContainer.add(this.mPlayerRoom.showList),this.mPlayerRoom.roomList&&this.mPlayerRoom.roomList.forEach((function(i){e.mContainer.add(i)})))},RoomDelegate.prototype.onEnterRoomHandler=function(e){this.emit("enterRoom",e)},RoomDelegate.prototype.setScrollInteractive=function(e){for(var i=0,n=e.length;i<n;i++){var a=e[i];this.mScroller.setInteractiveObject(a)}this.refreshPos()},RoomDelegate}(Phaser.Events.EventEmitter),T=function(e){function MyRoomDelegate(i,n,a,s,o,h){return void 0===h&&(h=1),e.call(this,i,n,s,a,o,h)||this}return f(MyRoomDelegate,e),MyRoomDelegate.prototype.addListen=function(){this.mMyRoom.on("enterRoom",this.onEnterRoomHandler,this),this.mMyHistory.on("enterRoom",this.onEnterRoomHandler,this)},MyRoomDelegate.prototype.removeListen=function(){this.mMyRoom.off("enterRoom",this.onEnterRoomHandler,this),this.mMyHistory.off("enterRoom",this.onEnterRoomHandler,this)},MyRoomDelegate.prototype.addToContainer=function(){this.addListen(),this.refreshPos()},MyRoomDelegate.prototype.removeFromContainer=function(){this.removeListen(),this.mMyRoom&&this.mMyRoom.clear(),this.mMyHistory&&this.mMyHistory.clear()},MyRoomDelegate.prototype.updateList=function(e){this.mMyRoom&&(this.mContent=e,this.mScroller.clearInteractiveObject(),this.mHeight=this.activity.height,this.mChildPad=this.activity.height+14*this.mDpr,this.mMyRoom.addItem(e.selfRooms,this.mChildPad))},MyRoomDelegate.prototype.overminHandler=function(){var e=this.mMyHistory.updateItem();e&&this.mMyHistory.mRefreshRooms&&(this.mHeight+=e,this.mContainer.add(this.mMyHistory.mRefreshRooms),this.setUpdateScrollInteractive(this.mMyHistory.mRefreshRooms))},MyRoomDelegate.prototype.destroy=function(){this.mMyRoom&&this.mMyRoom.destroy(),this.mMyHistory&&this.mMyHistory.destroy(),e.prototype.destroy.call(this)},MyRoomDelegate.prototype.refreshPos=function(){var e=this;this.activity&&(this.activity.setTexture(this.mKey,"activity_title.png"),this.mContainer.add(this.activity)),this.mMyRoom&&this.mMyRoom.showList&&(this.mContainer.add(this.mMyRoom.showList),this.mMyRoom.roomList&&this.mMyRoom.roomList.forEach((function(i){e.mContainer.add(i)}))),this.mMyHistory&&this.mMyHistory.showList&&(this.mContainer.add(this.mMyHistory.showList),this.mMyHistory.roomList&&this.mMyHistory.roomList.forEach((function(i){e.mContainer.add(i)})))},MyRoomDelegate.prototype.init=function(){var e=this;this.activity=this.mScene.make.image({key:this.mKey,frame:"activity_title.png"},!1),this.activity.y=this.activity.height/2+2*this.mDpr,this.mChildPad=this.activity.height+14*this.mDpr,this.mMyRoom=new S(this.mScene,this.mKey,"my_room_icon.png",c.i18n.t("room_list.my_room"),this.mDpr,this.mRender.uiScale,0,this.mChildPad,(function(i){e.mMyRoom.roomList&&e.setScrollInteractive(e.mMyRoom.roomList),e.mHeight+=i,e.refreshPos(),e.mChildPad+=e.mMyRoom.height,e.mMyHistory.addItem(e.mContent.historyRooms,e.mChildPad)})),this.mMyHistory=new x(this.mScene,this.mKey,"history_icon.png",c.i18n.t("room_list.my_history"),this.mDpr,this.mRender.uiScale,0,this.mChildPad,(function(i){e.mMyHistory.roomList&&e.setScrollInteractive(e.mMyHistory.roomList),e.mHeight+=i,e.refreshPos(),e.mScroller.refreshBound(e.mHeight),e.mScroller.setValue(e.mContainer.parentContainer.y)})),this.mScroller.refreshBound(this.activity.height),this.mScroller.setValue(this.mContainer.parentContainer.y)},MyRoomDelegate.prototype.onEnterRoomHandler=function(e){this.emit("enterRoom",e)},MyRoomDelegate}(_),x=function(e){function RoomZoon(i,n,a,s,o,h,l,m,f){void 0===l&&(l=0),void 0===m&&(m=0);var g=e.call(this)||this;return g.mWidth=0,g.mHeight=0,g.mPad1=0,g.mShowList=[],g.mScene=i,g.mKey=n,g.mDpr=o,g.uiScale=h,g.mPad=m,g.mOrientaction=l,g.mIconFrame=a,g.mLabel=s,g.icon=i.make.image({key:n,frame:a},!1),g.icon.x=l?-254*o/2+m:-254*o/2,g.icon.y=l?0:m,g.text=i.make.text({text:s,style:{color:"#ffcc33",fontSize:16*o,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(0,.5),g.text.setStroke("#663300",2*o),g.text.x=l?g.icon.x+g.icon.width/2+4*o+m:g.icon.x+g.icon.width/2+4*o,g.text.y=l?0:m,g.mWidth=g.icon.width,g.mHeight=g.icon.height,g.mAddCallBack=f,g.mRooms=[],g}return f(RoomZoon,e),Object.defineProperty(RoomZoon.prototype,"showList",{get:function(){return this.mShowList},enumerable:!1,configurable:!0}),Object.defineProperty(RoomZoon.prototype,"roomList",{get:function(){return this.mRooms},enumerable:!1,configurable:!0}),RoomZoon.prototype.addItem=function(e,i){void 0===i&&(i=0),this.icon=this.mScene.make.image({key:this.mKey,frame:this.mIconFrame},!1),this.text=this.mScene.make.text({text:this.mLabel,style:{color:"#ffcc33",fontSize:16*this.mDpr,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(0,.5),this.text.setStroke("#663300",2*this.mDpr),this.icon.x=this.mOrientaction?-254*this.mDpr/2+i:-254*this.mDpr/2,this.icon.y=this.mOrientaction?0:i,this.text.x=this.mOrientaction?this.icon.x+this.icon.width/2+4*this.mDpr+i:this.icon.x+this.icon.width/2+4*this.mDpr,this.text.y=this.mOrientaction?0:i,this.mShowList.push(this.icon),this.mShowList.push(this.text),this.mHeight=this.icon.height,this.mPad=i||this.mPad,this.mPad1=i;var n=this.uiScale,a=this.mOrientaction?this.mPad+i:0,s=6*this.mDpr*n;if(e.length>0){var o=e.length;this.mPad+=this.icon.height+12*this.mDpr*n;for(var h=0;h<o;h++)if(h*(q.Hei+s)+this.mPad<=362*this.mDpr+q.Hei+s){var l=new q(this.mScene,this.mKey,this.mDpr);l.setInfo(e[0]),e.splice(0,1),l.on("enterRoom",this.onEnterRoomHandler,this),l.x=a;var m=h*(q.Hei+s)+this.mPad;this.mRooms.push(l),l.y=m,this.mHeight+=q.Hei+s}this.mRoomDatas=e}this.mHeight+=s,this.mAddCallBack&&this.mAddCallBack(this.mHeight)},RoomZoon.prototype.updateItem=function(){var e=this.mRoomDatas.slice(0,10),i=e.length;if(i<1)return 0;var n=this.uiScale,a=this.mOrientaction?this.mPad+this.mPad1:0,s=6*this.mDpr*n,o=this.mRooms.length;this.mRefreshRooms=[];for(var h=0,l=0;l<i;l++){var c=new q(this.mScene,this.mKey,this.mDpr);c.setInfo(e[l]),c.on("enterRoom",this.onEnterRoomHandler,this),c.x=a;var m=(l+o)*(q.Hei+s)+this.mPad;c.y=m,this.mRefreshRooms.push(c),this.mRooms.push(c),this.mHeight+=q.Hei+s,h+=q.Hei+s}return this.mRoomDatas.splice(0,10),h},Object.defineProperty(RoomZoon.prototype,"width",{get:function(){return this.mWidth},enumerable:!1,configurable:!0}),Object.defineProperty(RoomZoon.prototype,"height",{get:function(){return this.mHeight},enumerable:!1,configurable:!0}),RoomZoon.prototype.destroy=function(){this.clear(),e.prototype.destroy.call(this)},RoomZoon.prototype.clear=function(){for(var e=0,i=this.mRooms;e<i.length;e++){i[e].destroy()}for(var n=0,a=this.mShowList;n<a.length;n++){a[n].destroy()}this.icon.destroy(),this.text.destroy(),this.mShowList.length=0,this.mRooms.length=0},RoomZoon.prototype.onEnterRoomHandler=function(e){this.emit("enterRoom",e)},RoomZoon}(Phaser.Events.EventEmitter),S=function(e){function MyRoomZoon(){return null!==e&&e.apply(this,arguments)||this}return f(MyRoomZoon,e),MyRoomZoon.prototype.addItem=function(e,i){void 0===i&&(i=0),this.icon=this.mScene.make.image({key:this.mKey,frame:this.mIconFrame},!1),this.text=this.mScene.make.text({text:this.mLabel,style:{color:"#ffcc33",fontSize:16*this.mDpr,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(0,.5),this.text.setStroke("#663300",2*this.mDpr),this.icon.x=this.mOrientaction?-254*this.mDpr/2+i:-254*this.mDpr/2,this.icon.y=this.mOrientaction?0:i,this.text.x=this.mOrientaction?this.icon.x+this.icon.width/2+4*this.mDpr+i:this.icon.x+this.icon.width/2+4*this.mDpr,this.text.y=this.mOrientaction?0:i,this.mShowList.push(this.icon),this.mShowList.push(this.text),this.mHeight=this.icon.height,this.mPad=i||this.mPad;var n=this.uiScale,a=this.mOrientaction?this.mPad+i:0,s=6*this.mDpr*n;if(e.length>0){this.mPad+=this.icon.height+14*this.mDpr*n;for(var o=0;o<e.length;o++){var h=new Y(this.mScene,this.mKey,this.mDpr);h.setInfo(e[o]),h.on("enterRoom",this.onEnterRoomHandler,this),h.x=a;var l=o*(q.Hei+s)+this.mPad;h.y=l,this.mRooms[o]=h,this.mHeight+=q.Hei+s}}this.mHeight+=s,this.mAddCallBack&&this.mAddCallBack(this.mHeight)},MyRoomZoon}(x),j=function(e){function PopularRoomZoon(){return null!==e&&e.apply(this,arguments)||this}return f(PopularRoomZoon,e),PopularRoomZoon.prototype.addItem=function(e,i){void 0===i&&(i=0),this.icon=this.mScene.make.image({key:this.mKey,frame:this.mIconFrame},!1),this.text=this.mScene.make.text({text:this.mLabel,style:{color:"#ffcc33",fontSize:16*this.mDpr,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(0,.5),this.text.setStroke("#663300",2*this.mDpr),this.icon.x=this.mOrientaction?-254*this.mDpr/2+i:-254*this.mDpr/2,this.icon.y=this.mOrientaction?0:i,this.text.x=this.mOrientaction?this.icon.x+this.icon.width/2+4*this.mDpr+i:this.icon.x+this.icon.width/2+4*this.mDpr,this.text.y=this.mOrientaction?0:i,this.mShowList.push(this.icon),this.mShowList.push(this.text),this.mHeight=this.icon.height,this.mPad=i||this.mPad;var n=this.uiScale,a=this.mOrientaction?this.mPad:0,s=6*this.mDpr*n;if(e.length>0){this.mPad+=this.icon.height+12*this.mDpr*n;for(var o=0;o<e.length;o++){var h=new X(this.mScene,this.mKey,this.mDpr);h.setInfo(e[o]),h.setRank(o+1),h.on("enterRoom",this.onEnterRoomHandler,this),h.x=a;var l=o*(h.height+s)+this.mPad;h.y=l,this.mHeight+=h.height+s,this.mRooms[o]=h}}return this.mHeight+=s,this.mAddCallBack&&this.mAddCallBack(this.mHeight),this.mHeight},PopularRoomZoon}(x),q=function(e){function RoomItem(i,n,a){void 0===a&&(a=1);var s=e.call(this,i)||this;return s.mKey=n,s.mDpr=a,s.init(n,a),s}return f(RoomItem,e),RoomItem.prototype.setInfo=function(e){e&&(e.name&&this.mNickName.setText(e.name),e.playerCount&&this.mCounter.setText(e.playerCount.toString())),this.mCounterIcon.x=this.mCounter.x-this.mCounter.width/2-this.mCounterIcon.width/2-4*this.mDpr,this.mRoom=e},RoomItem.prototype.roomData=function(){return this.mRoom},RoomItem.prototype.onEnterRoomHandler=function(e){this.mRoom&&this.emit("enterRoom",this.mRoom.roomId)},RoomItem.prototype.init=function(e,i){this.mBackground=this.scene.make.image({key:e,frame:"room_gray.png"},!1).setInteractive(),this.setSize(this.mBackground.width,this.mBackground.height),RoomItem.Hei=this.mBackground.height,this.mNickName=this.scene.make.text({style:{color:"#000000",fontFamily:c.Font.DEFULT_FONT,fontSize:14*i}},!1),this.mNickName.x=-this.width/2+12*i,this.mNickName.y=-this.mNickName.height/2,this.mCounterIcon=this.scene.make.image({key:m.c.commonKey,frame:"home_persons"},!1),this.mCounter=this.scene.make.text({style:{color:"#000000",fontFamily:c.Font.DEFULT_FONT,fontSize:14*i}},!1).setOrigin(.5),this.mCounter.x=this.width/2-23*i,this.add([this.mBackground,this.mNickName,this.mCounterIcon,this.mCounter])},RoomItem.prototype.crateLabel=function(e){var i="",n="";e===s.op_def.EditModeRoomPrivacy.EDIT_MODE_ROOM_LOCKED?(i="passworld_label.png",n=c.i18n.t("room_list.password")):e===s.op_def.EditModeRoomPrivacy.EDIT_MODE_ROOM_PRIVATE&&(i="close_label.png",n=c.i18n.t("room_list.close")),""!==i&&""!==n&&(this.mLabelImg=this.scene.make.image({key:this.mKey,frame:i},!1),this.mLabelText=this.scene.make.text({text:n,style:{color:"#666666",fontFamily:c.Font.DEFULT_FONT,fontSize:12*this.mDpr}},!1).setOrigin(0,.5),this.add([this.mLabelImg,this.mLabelText]),this.mLabelImg.x=this.width/2-85*this.mDpr,this.mLabelText.x=this.mLabelImg.x-7*this.mDpr)},RoomItem}(Phaser.GameObjects.Container),Y=function(e){function MyRoomItem(i,n,a){return void 0===a&&(a=1),e.call(this,i,n,a)||this}return f(MyRoomItem,e),MyRoomItem.prototype.init=function(i,n){e.prototype.init.call(this,i,n),this.mBackground&&this.mBackground.setFrame("room_yellow.png"),this.mNickName&&(this.mNickName.setColor("#663300"),this.mCounter.setColor("#663300"))},MyRoomItem}(q),X=function(e){function PopularRoomItem(i,n,a){return void 0===a&&(a=1),e.call(this,i,n,a)||this}return f(PopularRoomItem,e),PopularRoomItem.prototype.setRank=function(e){this.mRankImage&&(this.mRankImage.setTexture(this.mKey,"rank_"+e+".png"),this.mRankImage.x=-this.width/2+this.mRankImage.width/2-2*this.mDpr,this.add(this.mRankImage))},PopularRoomItem.prototype.init=function(i,n){e.prototype.init.call(this,i,n),this.mRankImage=this.scene.make.image(void 0,!1),this.mNickName.x=-this.width/2+37*n},PopularRoomItem}(Y)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaSceneNavigationPanel",(function(){return g}));var a,s=n(2),o=n(0),h=n(884),l=n(792),c=n(791),m=n(790),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaSceneNavigationPanel(i){var n=e.call(this,i)||this;return n.key=s.ModuleName.PICASCENENAVIGATION_NAME,n.atlasNames=[m.d.map],n}return f(PicaSceneNavigationPanel,e),PicaSceneNavigationPanel.prototype.resize=function(e,i){var n=this.scaleWidth,a=this.scaleHeight;this.blackBg.clear(),this.blackBg.fillStyle(0,.66),this.blackBg.fillRect(0,0,n,a),this.content.x=.5*-this.content.width-10*this.dpr,this.content.y=.5*a,this.setSize(n,a)},PicaSceneNavigationPanel.prototype.onShow=function(){this.mNavigationData&&this.setNavigationListData(this.mNavigationData)},PicaSceneNavigationPanel.prototype.setNavigationListData=function(e){this.mNavigationData=e,this.mInitialized&&(this.openTownNavigationPanel(),this.townPanel.setTownDatas(e))},PicaSceneNavigationPanel.prototype.init=function(){var i=this;if(!this.mInitialized){var n=this.scaleWidth,a=this.scaleHeight;this.blackBg=this.scene.make.graphics(void 0,!1),this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0,0,n,a),Phaser.Geom.Rectangle.Contains),this.blackBg.on("pointerup",this.onCloseHandler,this),this.add(this.blackBg),this.content=this.scene.make.container(void 0,!1);var s=300*this.dpr,h=a;this.content.setSize(s,h),this.bg=new c.CommonBackground(this.scene,0,0,s,h),this.content.add([this.bg]),this.add([this.content]),this.resize(0,0),e.prototype.init.call(this),this.playMove(new o.Handler(this,(function(){i.townPanel&&i.townPanel.refreshMask()})),new o.Handler(this,(function(){i.townPanel&&i.townPanel.refreshMask()})))}},PicaSceneNavigationPanel.prototype.onHide=function(){this.hideTownNavigationPanel()},PicaSceneNavigationPanel.prototype.openTownNavigationPanel=function(){if(!this.townPanel){var e=60*this.dpr,i=this.scaleHeight-e;this.townPanel=new h.PicaSceneNavigationMapPanel(this.scene,274*this.dpr,i,this.dpr,this.scale),this.townPanel.setHandler(new o.Handler(this,this.onTownHandler)),this.townPanel.y=.5*e,this.content.add(this.townPanel)}this.townPanel.show(),this.townPanel.refreshMask()},PicaSceneNavigationPanel.prototype.hideTownNavigationPanel=function(){this.townPanel&&this.townPanel.hide()},PicaSceneNavigationPanel.prototype.onTownHandler=function(e,i){"enter"===e&&this.onEnterRoomHandler(i)},PicaSceneNavigationPanel.prototype.onEnterRoomHandler=function(e){this.render.renderEmitter(this.key+"_queryenter",e)},PicaSceneNavigationPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaSceneNavigationPanel.prototype.playMove=function(e,i){var n=.5*-this.content.width-10*this.dpr,a=.5*this.content.width,s=this.scene.tweens.add({targets:this.content,x:{from:n,to:a},ease:"Linear",duration:300,onComplete:function(){s.stop(),s.remove(),e&&e.run()},onUpdate:function(){i&&i.run()}})},PicaSceneNavigationPanel}(l.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaSurveyPanel",(function(){return f}));var a,s=n(789),o=n(2),h=n(790),l=n(0),c=n(792),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaSurveyPanel(i){var n=e.call(this,i)||this;return n.atlasNames=[h.d.uicommon,h.d.survey],n.key=o.ModuleName.PICASURVEY_NAME,n}return m(PicaSurveyPanel,e),PicaSurveyPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;this.topbg.x=.5*a,this.topbg.y=78*this.dpr,this.title.x=this.topbg.x,this.title.y=this.topbg.y,e.prototype.resize.call(this,a,s),this.setSize(a,s)},PicaSurveyPanel.prototype.init=function(){this.topbg=this.scene.make.image({key:h.d.survey,frame:"survey_title_bg"}),this.title=this.scene.make.text({text:l.i18n.t("illustrate.surveyfurni"),style:l.UIHelper.colorStyle("#27E8FF",16*this.dpr)}).setOrigin(.5),this.furniItem=new g(this.scene,this.dpr,this.scale),this.furniItem.visible=!1,this.add([this.topbg,this.title,this.furniItem]),this.resize(),e.prototype.init.call(this)},PicaSurveyPanel.prototype.setSurveyData=function(e){this.furniItem.scale=1,this.furniItem.visible=!0,this.furniItem.x=.5*this.width,this.furniItem.y=.5*this.height,this.furniItem.setItemData(e);var i=this.render.uiManager.getPanel(o.ModuleName.BOTTOM);this.targetPos=i.navigatePanel.getIllustredPos(),this.playMove(),this.setInteractive()},PicaSurveyPanel.prototype.playMove=function(){var e=this,i=this.targetPos.x/this.scale,n=this.targetPos.y/this.scale,a=this.furniItem.x,s=this.furniItem.y;this.moveTween=this.scene.tweens.add({targets:this.furniItem,x:{from:a,to:i},y:{from:s,to:n},ease:"Linear",duration:500,delay:1500,onComplete:function(){e.moveTween.stop(),e.moveTween.remove(),e.moveTween=void 0,e.furniItem.visible=!1,e.render.uiManager.getPanel(o.ModuleName.BOTTOM).navigatePanel.tweenButton(3),e.disInteractive()}});l.UIHelper.playScaleTween(this.scene,this.furniItem,1,0,500,"Linear",1500)},PicaSurveyPanel}(c.PicaBasePanel),g=function(e){function FurnitureItem(i,n,a){var o=e.call(this,i)||this;return o.dpr=n,o.zoom=a,o.lightBg=o.scene.make.image({key:h.d.survey,frame:"survey_light"}),o.bg=o.scene.make.image({key:h.d.survey,frame:"survey_ordinary_bg"}),o.iconImg=new s.DynamicImage(o.scene,0,0),o.star=o.scene.make.image({key:h.d.uicommon,frame:"bag_star_small_1"}).setOrigin(0,.5),o.nameTex=o.scene.make.text({style:l.UIHelper.whiteStyle(n,11)}).setOrigin(.5),o.setSize(o.bg.width,o.bg.height),o.iconImg.y=-5*n,o.star.x=.5*-o.width+5*n,o.star.y=.5*-o.height+10*n,o.nameTex.y=.5*o.height-10*n,o.add([o.lightBg,o.bg,o.iconImg,o.star,o.nameTex]),o.lightBg.setInteractive(),o}return m(FurnitureItem,e),FurnitureItem.prototype.setItemData=function(e){var i=this;this.itemData=e;var n=l.Url.getOsdRes(e.texturePath);this.iconImg.load(n,this,(function(){i.iconImg.visible=!0})),this.iconImg.scale=this.dpr/this.zoom,this.nameTex.text=e.name,this.star.setFrame("bag_star_small_"+e.grade),5===e.rarity?this.bg.setFrame("survey_rare_bg"):this.bg.setFrame("survey_ordinary_bg"),this.playRotateTween()},FurnitureItem.prototype.destroy=function(){e.prototype.destroy.call(this),this.intervalTimer&&clearInterval(this.intervalTimer)},FurnitureItem.prototype.playRotateTween=function(){var e=this;if(this.scene){this.lightBg.rotation=0,this.intervalTimer&&clearInterval(this.intervalTimer),this.lightBg.visible=!0;var i=0;this.intervalTimer=setInterval((function(){e.scene?(e.lightBg.rotation+=.1,(i+=30)>1500&&(clearInterval(e.intervalTimer),e.lightBg.visible=!1)):e.intervalTimer&&clearInterval(e.intervalTimer)}),30)}},FurnitureItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaTaskSidePanel",(function(){return a}));var a=function a(){}},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaTreasurePanel",(function(){return _}));var a,s=n(790),o=n(2),h=n(0),l=n(792),c=n(885),m=n(886),f=n(887),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaTreasurePanel(i){var n=e.call(this,i)||this;return n.atlasNames=[s.d.treasure,s.d.uicommon1,s.d.uicommon,s.d.circleeffect,s.d.stareffect],n.key=o.ModuleName.PICATREASURE_NAME,n}return g(PicaTreasurePanel,e),PicaTreasurePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.88),this.blackGraphic.fillRect(0,0,a,s),this.content.x=a/2,this.content.y=s/2,this.setSize(a*this.scale,s*this.scale)},PicaTreasurePanel.prototype.onShow=function(){this.setInteractive(),this.setTreasureData(this.showData)},PicaTreasurePanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.previewPanel&&this.previewPanel.destroy(),this.treasureOpenPanel&&this.treasureOpenPanel.destroy(),this.treasureAllOpenPanel&&this.treasureAllOpenPanel.destroy()},PicaTreasurePanel.prototype.init=function(){var i=this.cameraWidth,n=this.cameraHeight;this.blackGraphic=this.scene.make.graphics(void 0,!1),this.blackGraphic.setInteractive(new Phaser.Geom.Rectangle(0,0,i/this.scale,n/this.scale),Phaser.Geom.Rectangle.Contains),this.add(this.blackGraphic),this.content=this.scene.make.container(void 0,!1),this.add(this.content),this.resize(0,0),e.prototype.init.call(this)},PicaTreasurePanel.prototype.setTreasureData=function(e){this.trasureData=e,this.mInitialized&&e&&("preview"===e.type?this.setPreviewData(e.data):"open"===e.type?this.setTreasureOpenData(e.data):"roamdraw"===e.type?this.setTreasureAllOpenData(e.data):this.setPreviewData(e.data))},PicaTreasurePanel.prototype.setPreviewData=function(e){this.openPreviewPanel(),this.previewPanel.setTreasureData(e)},PicaTreasurePanel.prototype.setTreasureOpenData=function(e){this.openTreasureOpenPanel(),this.treasureOpenPanel.setTreasureData(e)},PicaTreasurePanel.prototype.setTreasureAllOpenData=function(e){this.openTreasureAllOpenPanel(),this.treasureAllOpenPanel.setTreasureData(e)},PicaTreasurePanel.prototype.openPreviewPanel=function(){var e=this,i=334*this.dpr,n=353*this.dpr;this.previewPanel||(this.previewPanel=new f.PicaTreasurePreviewPanel(this.scene,this.render,i,n,this.key,this.dpr,this.scale),this.previewPanel.setHandler(new h.Handler(this,(function(){e.hidePreviewPanel(),e.setTreasureOpenData(new Array(6))})),new h.Handler(this,this.OnCloseHandler))),this.content.add(this.previewPanel),this.previewPanel.resize(i,n),this.previewPanel.addListen()},PicaTreasurePanel.prototype.hidePreviewPanel=function(){this.content.remove(this.previewPanel),this.previewPanel.removeListen()},PicaTreasurePanel.prototype.openTreasureOpenPanel=function(){var e=this.width,i=310*this.dpr;this.treasureOpenPanel||(this.treasureOpenPanel=new m.PicaTreasureOpenPanel(this.scene,e,i,this.key,this.dpr,this.scale),this.treasureOpenPanel.setHandler(new h.Handler(this,this.OnCloseHandler)),this.treasureOpenPanel.y=-20*this.dpr),this.content.add(this.treasureOpenPanel),this.treasureOpenPanel.resize(e,i),this.treasureOpenPanel.addListen()},PicaTreasurePanel.prototype.hideOpenPanel=function(){this.content.remove(this.treasureOpenPanel),this.treasureOpenPanel.removeListen()},PicaTreasurePanel.prototype.openTreasureAllOpenPanel=function(){var e=this.width,i=320*this.dpr;this.treasureAllOpenPanel||(this.treasureAllOpenPanel=new c.PicaTreasureAllOpenPanel(this.scene,e,i,this.key,this.dpr,this.scale),this.treasureAllOpenPanel.setHandler(new h.Handler(this,this.OnCloseHandler)),this.treasureAllOpenPanel.y=-20*this.dpr),this.content.add(this.treasureAllOpenPanel),this.treasureAllOpenPanel.resize(e,i),this.treasureAllOpenPanel.addListen()},PicaTreasurePanel.prototype.hideAllOpenPanel=function(){this.content.remove(this.treasureAllOpenPanel),this.treasureAllOpenPanel.removeListen()},PicaTreasurePanel.prototype.OnCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaTreasurePanel}(l.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaWorkPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(2),l=n(790),c=n(0),m=n(791),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaWorkPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=h.ModuleName.PICAWORK_NAME,n.workItems=[],n}return f(PicaWorkPanel,e),PicaWorkPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.mBackground.clear(),this.mBackground.fillStyle(0,.5),this.mBackground.fillRoundedRect(-this.x,-this.y,a,s),this.content.x=.5*a,this.content.y=.5*s,this.mGameScroll.refreshMask(),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains),this.itemtips.setInvalidArea(c.Tool.getRectangle(this.helpBtn,this.scene))},PicaWorkPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen()):this.preload())},PicaWorkPanel.prototype.addListen=function(){this.mInitialized&&this.closeBtn.on("pointerup",this.OnClosePanel,this)},PicaWorkPanel.prototype.removeListen=function(){this.mInitialized&&this.closeBtn.off("pointerup",this.OnClosePanel,this)},PicaWorkPanel.prototype.preload=function(){this.addAtlas(this.key,"work/work.png","work/work.json"),this.addAtlas(l.c.commonKey,l.d.commonUrl+".png",l.d.commonUrl+".json"),this.addAtlas(l.c.common2Key,l.d.common2Url+".png",l.d.common2Url+".json"),e.prototype.preload.call(this)},PicaWorkPanel.prototype.init=function(){var i=this;this.mBackground=this.scene.make.graphics(void 0,!1),this.add(this.mBackground);var n=295*this.dpr,a=454*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(n,a),this.add(this.content),this.bg=new s.NineSlicePatch(this.scene,0,0,n,a,l.c.commonKey,"bg",{left:30*this.dpr,top:30*this.dpr,bottom:30*this.dpr,right:30*this.dpr});var h=.5*-a;this.titlebg=this.scene.make.image({x:0,y:0,key:l.c.common2Key,frame:"title"}),this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titlebg.y=h+3*this.dpr,this.tilteName=this.scene.make.text({x:0,y:this.titlebg.y+2*this.dpr,text:c.i18n.t("work.title"),style:{color:"#905C06",fontSize:15*this.dpr,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(.5),this.closeBtn=this.scene.make.image({x:.5*n-5*this.dpr,y:h+5*this.dpr,key:l.c.commonKey,frame:"close"}),this.tilteName.setStroke("#905C06",2),this.tilteName.setResolution(this.dpr),this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.closeBtn.setInteractive(),this.timesPorgress=new x(this.scene,76*this.dpr,14*this.dpr,this.key,"slider_orange",c.i18n.t("work.worktimes"),this.dpr),this.timesPorgress.setImageValue(this.key,"icon_work"),this.timesPorgress.y=.5*-a+40*this.dpr,this.timesPorgress.x=-43*this.dpr,this.powerProgress=new x(this.scene,76*this.dpr,14*this.dpr,this.key,"slider_blue",c.i18n.t("work.vim"),this.dpr),this.powerProgress.setImageValue(this.key,"icon_strength"),this.powerProgress.y=this.timesPorgress.y,this.powerProgress.x=70*this.dpr,this.helpBtn=new s.Button(this.scene,this.key,"icon_tips","icon_tips"),this.helpBtn.y=this.powerProgress.y,this.helpBtn.x=this.powerProgress.x+.5*this.powerProgress.width+5*this.dpr+.5*this.helpBtn.width,this.helpBtn.on(s.ClickEvent.Tap,this.onHelpHandler,this),this.mGameScroll=new s.GameScroller(this.scene,{x:0,y:18*this.dpr,width:n,height:a-70*this.dpr,zoom:this.scale,dpr:this.dpr,align:2,orientation:0,space:10*this.dpr,selfevent:!0,cellupCallBack:function(e){i.onPointerUpHandler(e)}}),this.itemtips=new o.ItemInfoTips(this.scene,150*this.dpr,46*this.dpr,l.c.common2Key,"tips_bg",this.dpr),this.itemtips.setVisible(!1),this.content.add([this.bg,this.closeBtn,this.titlebg,this.tilteName,this.timesPorgress,this.powerProgress,this.helpBtn,this.mGameScroll,this.itemtips]),this.resize(),e.prototype.init.call(this),this.emit("questlist")},PicaWorkPanel.prototype.setWorkDataList=function(e){var i=e.jobs;this.mGameScroll.clearItems(!1);for(var n=0,a=this.workItems;n<a.length;n++){(o=a[n]).visible=!1}for(var s=0;s<i.length;s++){var o=void 0;s<this.workItems.length?o=this.workItems[s]:(o=new _(this.scene,this.key,this.dpr),this.workItems.push(o),o.setHandler(new c.Handler(this,this.onSendHandler),new c.Handler(this,this.onItemInfoTips))),o.visible=!0,o.setJobData(i[s]),this.mGameScroll.addItem(o)}this.mGameScroll.Sort()},PicaWorkPanel.prototype.setProgressData=function(e,i){i&&this.timesPorgress.setProgressDatas(i),e&&this.powerProgress.setProgressDatas(e)},PicaWorkPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaWorkPanel.prototype.onHelpHandler=function(){this.itemtips.setVisible(!this.itemtips.visible),this.itemtips.setText(c.i18n.t("work.worktips")),this.itemtips.setTipsPosition(this.helpBtn,this.content)},PicaWorkPanel.prototype.OnClosePanel=function(){this.emit("hide")},PicaWorkPanel.prototype.onPointerUpHandler=function(e){this.selectItem&&this.selectItem.setExtend(!1),e.setExtend(!0),this.selectItem=e,this.mGameScroll.Sort(!0)},PicaWorkPanel.prototype.onSendHandler=function(e){this.emit("questwork",e)},PicaWorkPanel.prototype.onItemInfoTips=function(e,i,n){this.itemtips.visible=i,this.itemtips.x=n.x*this.scale-this.content.x,this.itemtips.y=n.y*this.scale-this.content.y-30*this.dpr,this.itemtips.setText(this.getDesText(e))},PicaWorkPanel.prototype.getDesText=function(e){return e||(e={sellingPrice:!0,tradable:!1}),c.i18n.t("work.attri",{name:""+e.name,value:e.neededCount})},PicaWorkPanel}(o.BasePanel),_=function(e){function WorkItem(i,n,a){var h=e.call(this,i)||this;h.imageValues=[],h.isExtend=!1,h.pointTimestamp=0,h.key=n,h.dpr=a;var f=256*a,g=68*a;h.setSize(f,g),h.topCon=i.make.container(void 0,!1),h.add(h.topCon),h.topCon.setSize(f,g),h.bg=new s.NineSlicePatch(h.scene,0,0,f,g,h.key,"bg_default",{left:6*h.dpr,top:0*h.dpr,bottom:0*h.dpr,right:6*a}),h.headIcon=new o.DynamicImage(i,0,0),h.title=i.make.text({x:.5*-h.width+60*a,y:.5*-g+5*a,text:"",style:{color:"#ffffff",fontSize:13*a,fontFamily:c.Font.DEFULT_FONT}}),h.salaryvalue=new m.ImageValue(i,60*a,20*a,h.key,void 0,h.dpr),h.salaryvalue.setTextStyle({color:"#FFEA00"}),h.salaryvalue.setFrameValue("",l.c.commonKey,"iv_coin"),h.salaryvalue.x=.5*h.width-30*a,h.salaryvalue.y=.5*-h.height+10*a,h.salaryLabel=i.make.text({x:h.salaryvalue.x-.5*h.salaryvalue.width-5*a,y:h.salaryvalue.y,text:c.i18n.t("work.salary")+":",style:{color:"#ffffff",fontSize:11*a,fontFamily:c.Font.DEFULT_FONT}}),h.salaryLabel.setOrigin(1,.5),h.worklabel=i.make.text({x:.5*-h.width+60*a,y:.5*h.height-12*a,text:"",style:{color:"#ffffff",fontSize:11*a,fontFamily:c.Font.DEFULT_FONT}}),h.worklabel.setOrigin(0,.5),h.topCon.add([h.bg,h.headIcon,h.title,h.salaryvalue,h.salaryLabel,h.worklabel]);var _=46*a;return h.bottomCon=i.make.container(void 0,!1),h.bottomCon.setSize(f,_),h.workbg=new s.NineSlicePatch(h.scene,0,0,h.width,_,h.key,"bg_a_unfold",{left:6*h.dpr,top:0*h.dpr,bottom:0*h.dpr,right:6*a}),h.workBtn=new s.NineSliceButton(i,0,0,90*a,36*a,l.c.commonKey,"yellow_btn_normal",c.i18n.t("work.title"),a,void 0,{left:14*h.dpr,top:14*h.dpr,bottom:14*h.dpr,right:14*a}),h.workBtn.x=0,h.workBtn.setTextStyle({fontSize:12*a,color:"#996600",fontFamily:c.Font.DEFULT_FONT}),h.workBtn.setFontStyle("bold"),h.bottomCon.add([h.workbg,h.workBtn]),h.workBtn.on(String(s.ClickEvent.Tap),h.onWorkHandler,h),h}return f(WorkItem,e),WorkItem.prototype.setHandler=function(e,i){this.sendHandler=e,this.tipsHandler=i},WorkItem.prototype.setJobData=function(e){var i=this;this.jobData=e;var n=c.Url.getOsdRes(e.display.texturePath);this.headIcon.load(n,this,(function(){i.headIcon.scale=1,i.headIcon.scaleX=45*i.dpr/i.headIcon.displayHeight,i.headIcon.scaleY=i.headIcon.scaleX,i.headIcon.x=.5*-i.width+.5*i.headIcon.displayWidth+10*i.dpr})),this.title.text=e.name;var a="0";if(e.rewards){var s=e.rewards[0].countRange;a=s.start+"~"+s.stop}this.salaryvalue.setText(a),this.salaryvalue.x=.5*this.width-.5*this.salaryvalue.width-10*this.dpr,this.salaryLabel.x=this.salaryvalue.x-.5*this.salaryvalue.width-5*this.dpr,this.worklabel.text=e.detail;for(var o=e.targets,h=0,l=this.imageValues;h<l.length;h++){(g=l[h]).visible=!1}for(var m=.5*-this.width+55*this.dpr,f=0;f<o.length;f++){var g=void 0,_=o[f];f<this.imageValues.length?g=this.imageValues[f]:(g=new T(this.scene,35*this.dpr,15*this.dpr,this.key,this.dpr),this.topCon.add(g),this.imageValues.push(g),g.setHandler(new c.Handler(this,this.onTipsandler)));var x=c.Url.getOsdRes(_.display.texturePath);g.setUrlValue(x,_.neededCount),g.setTextStyle({color:_.count>=_.neededCount?"#000000":"#E71313"}),g.setImageData(_),g.visible=!0,g.x=m+.5*g.width,g.y=0,m+=g.width+20*this.dpr}},WorkItem.prototype.setExtend=function(e){if(this.isExtend!==e)if(this.isExtend=e,this.bottomCon.visible=e,e){this.add(this.bottomCon);var i=this.topCon.height+this.bottomCon.height;this.setSize(this.width,i),this.topCon.y=.5*-i+.5*this.topCon.height,this.bottomCon.y=this.topCon.y+.5*this.topCon.height+.5*this.bottomCon.height,this.bg.setFrame("bg_click")}else{this.remove(this.bottomCon);i=this.topCon.height;this.setSize(this.width,i),this.topCon.y=0,this.bg.setFrame("bg_default")}},WorkItem.prototype.destroy=function(i){e.prototype.destroy.call(this,i)},WorkItem.prototype.onWorkHandler=function(){var e=(new Date).getTime();this.pointTimestamp>e||(this.pointTimestamp=e+1e3,this.sendHandler&&this.sendHandler.runWith(this.jobData.id))},WorkItem.prototype.onTipsandler=function(e,i){var n=e.getWorldTransformMatrix();this.tipsHandler&&this.tipsHandler.runWith([e.imageData,i,new Phaser.Geom.Point(n.tx,n.ty)])},WorkItem}(Phaser.GameObjects.Container),T=function(e){function PointerImageValue(i,n,a,s,o){var h=e.call(this,i,n,a,s,void 0,o)||this;return h.addListen(),h}return f(PointerImageValue,e),PointerImageValue.prototype.setImageData=function(e){this.imageData=e},PointerImageValue.prototype.setUrlValue=function(e,i){var n=this;this.value.text=i,this.icon.load(e,this,(function(){n.icon.scale=1,n.icon.scaleY=14*n.dpr/n.icon.displayHeight,n.icon.scaleX=n.icon.scaleY,n.value.x=n.icon.x+.5*n.icon.displayWidth+10*n.dpr,n.resetSize()}))},PointerImageValue.prototype.addListen=function(){this.setInteractive(),this.on("pointerdown",this.onClickDownHandler,this),this.scene.input.on("pointerup",this.onClickUpHandler,this)},PointerImageValue.prototype.removeListen=function(){this.disableInteractive(),this.off("pointerdown",this.onClickDownHandler,this),this.scene.input.off("pointerup",this.onClickUpHandler,this)},PointerImageValue.prototype.destroy=function(i){this.removeListen(),e.prototype.destroy.call(this,i)},PointerImageValue.prototype.setHandler=function(e){this.tipsHandler=e},PointerImageValue.prototype.create=function(){this.icon=new o.DynamicImage(this.scene,0,0),this.value=this.scene.make.text({x:0,y:this.offset.y,text:"10",style:{color:"#ffffff",fontSize:11*this.dpr,fontFamily:c.Font.DEFULT_FONT}}),this.value.setOrigin(0,.5),this.add([this.icon,this.value])},PointerImageValue.prototype.onClickDownHandler=function(){new Phaser.Geom.Point;this.tipsHandler&&this.tipsHandler.runWith([this,!0])},PointerImageValue.prototype.onClickUpHandler=function(){this.tipsHandler&&this.tipsHandler.runWith([this,!1])},PointerImageValue}(m.ImageValue),x=function(e){function ProgressItem(i,n,a,o,h,l,f){var g=e.call(this,i)||this;g.setSize(n,a),g.dpr=f,g.key=o;var _={x:0,y:0,width:n,height:a,background:{x:0,y:0,width:n,height:a,config:{top:0*f,left:7*f,right:7*f,bottom:0*f},key:o,frame:"slider_bottom"},bar:{x:0,y:0,width:n-4*f,height:a-4*f,config:{top:0*f,left:7*f,right:7*f,bottom:0*f},key:o,frame:h},dpr:f,textConfig:void 0};return g.progress=new s.ProgressBar(i,_),g.add(g.progress),g.imgvalue=new m.ImageValue(i,g.width-20*f,g.height,o,void 0,f),g.imgvalue.y=f,g.add(g.imgvalue),g.imgvalue.setTextStyle({fontSize:10*f,fontFamily:c.Font.NUMBER}),g.imgvalue.setTextFilter(Phaser.Textures.FilterMode.LINEAR),g.title=i.make.text({x:.5*-g.progress.width-3*f,y:0,text:l,style:{color:"#6A7AFF",fontSize:9*f,fontFamily:c.Font.DEFULT_FONT}}),g.title.setOrigin(1,.5),g.add(g.title),g}return f(ProgressItem,e),ProgressItem.prototype.setImageValue=function(e,i){this.imgvalue.setFrameValue("",e,i)},ProgressItem.prototype.setProgressDatas=function(e){this.progress.setProgress(e.value,e.max),this.imgvalue.setText(e.value+"/"+e.max)},ProgressItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PlaneGuidePanel",(function(){return l}));var a,s=n(789),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function PlaneGuidePanel(i){return e.call(this,1441619821,i)||this}return h(PlaneGuidePanel,e),PlaneGuidePanel.prototype.step1=function(e){this.guideEffect.createGuideEffect(this.getGuidePosition()),this.mPlayScene.input.on("gameobjectup",this.gameObjectUpHandler,this)},PlaneGuidePanel.prototype.getGuidePosition=function(){var e=this.render.config.scale_ratio,i=o.Tool.getPosByScenes(this.mPlayScene,{x:this.mElement.x,y:this.mElement.y});return{x:i.x+120*e-100,y:i.y+1*e}},PlaneGuidePanel}(s.BasePlaySceneGuide)},function(e,i,n){"use strict";n.r(i),n.d(i,"TaskPanel",(function(){return g}));var a,s=n(1),o=n(788),h=n(789),l=n(2),c=n(790),m=n(0),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function TaskPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.taskItems=[],n.key=l.ModuleName.PICATASK_NAME,n}return f(TaskPanel,e),TaskPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.blackBg.clear(),this.blackBg.fillStyle(0,.5),this.blackBg.fillRoundedRect(-this.x,-this.y,a,s),this.content.x=.5*a,this.content.y=.5*s,this.mGameScroll.refreshMask(),this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains)},TaskPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen()):this.preload())},TaskPanel.prototype.addListen=function(){this.mInitialized&&this.closeBtn.on("pointerup",this.OnClosePanel,this)},TaskPanel.prototype.removeListen=function(){this.mInitialized&&this.closeBtn.off("pointerup",this.OnClosePanel,this)},TaskPanel.prototype.preload=function(){this.addAtlas(this.key,"task/task.png","task/task.json"),this.addAtlas(c.c.commonKey,c.d.commonUrl+".png",c.d.commonUrl+".json"),e.prototype.preload.call(this)},TaskPanel.prototype.init=function(){this.setSize(this.scaleWidth,this.scaleWidth),this.blackBg=this.scene.make.graphics(void 0,!1),this.add(this.blackBg);var i=300*this.dpr,n=418*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.add(this.content),this.bg=new o.NineSlicePatch(this.scene,0,0,i,n,c.c.commonKey,"bg",{left:40,top:40,bottom:50,right:50});var a=this.bg.width,s=this.bg.height,h=.5*-this.bg.height;this.titlebg=this.scene.make.image({x:0,y:h,key:this.key,frame:"title"}),this.titlebg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titlebg.y=h-.5*this.titlebg.height+20*this.dpr;var f="bold "+15*this.dpr+"px Source Han Sans";this.tilteName=this.scene.make.text({x:0,y:h-12*this.dpr,text:m.i18n.t("task.title"),style:{font:f,color:"#8F4300",fontSize:15*this.dpr,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(.5,0),this.closeBtn=this.scene.make.image({x:.5*this.bg.width-5*this.dpr,y:h+5*this.dpr,key:c.c.commonKey,frame:"close"}),this.tilteName.setStroke("#8F4300",1),this.tilteName.setResolution(this.dpr),this.closeBtn.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.closeBtn.setInteractive();var g=this.scene.make.container(void 0,!1);g.setSize(80*this.dpr,30*this.dpr),g.setPosition(.5*-a+70*this.dpr,.5*-s+30*this.dpr),g.setInteractive(),g.on("pointerup",this.onOpenOptionHandler,this),this.optionText=this.scene.make.text({x:-30*this.dpr,y:0,text:m.i18n.t("task.all_task"),style:{color:"#8F4300",fontSize:16*this.dpr,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(0,.5),this.optionArrow=this.scene.make.image({x:0,y:0,key:this.key,frame:"drop_down"}),this.optionArrow.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.optionArrow.x=this.optionText.x+this.optionText.width+10*this.dpr,g.add([this.optionText,this.optionArrow]);var _=253*this.dpr,T=this.scene.make.graphics(void 0,!1);T.clear(),T.fillStyle(12632256,1),T.fillRect(.5*-_,-1,_,2),T.y=.5*-s+50*this.dpr,this.optionCon=this.scene.make.container(void 0,!1),this.optionCon.visible=!1,this.optionCon.y=.5*-s+50*this.dpr,this.mGameScroll=new o.GameScroller(this.scene,{x:0,y:18*this.dpr,width:a,height:s-70*this.dpr,zoom:this.scale,dpr:this.dpr,align:2,orientation:0,space:20*this.dpr,padding:{top:2*this.dpr}}),this.content.add([this.bg,this.closeBtn,this.titlebg,this.tilteName,this.mGameScroll,g,T,this.optionCon]),this.resize(),e.prototype.init.call(this),this.render.renderEmitter(l.ModuleName.PICATASK_NAME+"_questlist")},TaskPanel.prototype.setTaskDatas=function(e){this.mInitialized&&(this.curTaskItem&&this.curTaskItem.setExtend(!1),this.taskDatas=e,this.setTaskOptions(),this.setTaskItems(e),this.onTaskOptionHandler(this.curOptionItem))},TaskPanel.prototype.setTaskOptions=function(){for(var e=[0,s.op_pkt_def.PKT_Quest_Type.QUEST_MAIN_MISSION,s.op_pkt_def.PKT_Quest_Type.QUEST_SIDE_MISSION,s.op_pkt_def.PKT_Quest_Type.QUEST_DAILY_GOAL],i=this.optionCon.list,n=0,a=i;n<a.length;n++){(h=a[n]).visible=!1}for(var o=0;o<e.length;o++){var h=void 0;o<i.length?h=i[o]:((h=new S(this.scene,this.key,this.dpr)).setHandler(new m.Handler(this,this.onTaskOptionHandler)),this.optionCon.add(h)),h.visible=!0,h.setOptionData(e[o])}for(var l=0,c=0,f=i;c<f.length;c++){var g=f[c];g.y=g.height*g.originY+l,l+=g.height+2}this.curOptionItem||(this.curOptionItem=i[0])},TaskPanel.prototype.setTaskDetail=function(e){this.curTaskItem&&e&&this.curTaskItem.questData.id===e.id&&this.curTaskItem.setTaskDetail(e)},TaskPanel.prototype.setTaskItems=function(e){for(var i=0,n=this.taskItems;i<n.length;i++){(s=n[i]).visible=!1}for(var a=0;a<e.length;a++){var s=void 0;a<this.taskItems.length?s=this.taskItems[a]:(s=new _(this.scene,this.key,this.dpr),this.mGameScroll.addItem(s),s.setHandler(new m.Handler(this,this.onExtendsHandler),new m.Handler(this,this.onFinishHandler)),this.taskItems.push(s)),s.setTaskData(e[a]),s.visible=!0}this.mGameScroll.Sort()},TaskPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},TaskPanel.prototype.OnClosePanel=function(){this.render.renderEmitter(l.ModuleName.PICATASK_NAME+"_hide")},TaskPanel.prototype.onFinishHandler=function(e){this.render.renderEmitter(l.ModuleName.PICATASK_NAME+"_submitquest",e)},TaskPanel.prototype.onExtendsHandler=function(e,i){this.curTaskItem&&this.curTaskItem.setExtend(!1,!1),this.curTaskItem=i,e?this.render.renderEmitter(l.ModuleName.PICATASK_NAME+"_questdetail",i.questData.id):this.curTaskItem=null,this.mGameScroll.Sort(!0)},TaskPanel.prototype.onOpenOptionHandler=function(){var e=this.optionCon.visible;this.optionCon.visible=!e,this.optionArrow.scaleY=e?-1:1},TaskPanel.prototype.onTaskOptionHandler=function(e){for(var i=0,n=this.optionCon.list;i<n.length;i++){n[i].changeNormal()}var a;a=0===e.optionData?this.taskDatas:this.taskDatas.filter((function(i){return i.questType===e.optionData})),this.setTaskItems(a),this.optionCon.visible=!1,this.curOptionItem=e,e.changeDown(),this.optionText.text=e.optionText,this.optionArrow.x=this.optionText.x+this.optionText.width+10*this.dpr},TaskPanel}(h.BasePanel),_=function(e){function TaskItem(i,n,a){var s=e.call(this,i)||this;s.key=n,s.dpr=a;var l=254*a,c=45*a;s.content=i.make.container(void 0,!1),s.content.setSize(l,c),s.bg=new o.NineSlicePatch(s.scene,0,0,l,c,n,"main_bg",{left:6*a,top:6*a,bottom:6*a,right:6*a});var f=.5*-l,g=.5*-c,_=i.make.image({key:n,frame:"head_border"});return _.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),_.x=f+25*a,s.headIcon=new h.DynamicImage(i,_.x,0),s.headIcon.setTexture(n,"head_test"),s.typeBg=i.make.image({key:n,frame:"tag_main"}),s.typeBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),s.typeBg.setPosition(f+.5*s.typeBg.width,g+.5*s.typeBg.height-2*a),s.typeTex=i.make.text({x:0,y:0,text:m.i18n.t("task.m"),style:{color:"#ffffff",fontSize:10*s.dpr,fontFamily:m.Font.DEFULT_FONT}}),s.typeTex.setOrigin(.5).setPosition(s.typeBg.x-1*a,s.typeBg.y),s.taskName=i.make.text({x:s.headIcon.x+20*a,y:-9*a,text:"",style:{color:"#ffffff",fontSize:13*s.dpr,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(0,.5),s.taskDes=i.make.text({x:s.headIcon.x+25*a,y:10*a,text:"",style:{color:"#ffffff",fontSize:12*s.dpr,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(0,.5),s.finish=i.make.image({key:n,frame:"done"}),s.finish.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),s.finish.setPosition(.5*l-30*a,4*a),s.openBtn=new o.Button(i,n,"open","open"),s.setExtendBtn(s.openBtn),s.openBtn.setPosition(.5*l-25*a,4*a),s.closeBtn=new o.Button(i,n,"close"),s.setExtendBtn(s.closeBtn),s.closeBtn.setPosition(s.openBtn.x,s.openBtn.y).visible=!1,s.openBtn.on(o.ClickEvent.Tap,s.onOpenHandler,s),s.closeBtn.on(o.ClickEvent.Tap,s.onCloseHandler,s),s.content.add([s.bg,_,s.headIcon,s.typeBg,s.typeTex,s.taskName,s.taskDes,s.finish,s.openBtn,s.closeBtn]),s.add(s.content),s.setSize(l,c),s}return f(TaskItem,e),TaskItem.prototype.setTaskData=function(e){this.questData=e;var i=this.getQuestTypeTag(e.questType);this.typeBg.setFrame(i[0]),this.typeTex.text=i[1],this.setTextLimit(this.taskName,i[2]+e.name,12),this.bg.setFrame(i[3]),this.setTextLimit(this.taskDes,e.detail),this.taskDes.setColor(i[4]),this.finish.visible=e.stage===s.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED},TaskItem.prototype.setTaskDetail=function(e){var i=this.getQuestTypeTag(e.questType);this.extend&&this.extend.setItemData(e,i[5])},TaskItem.prototype.setHandler=function(e,i){this.extendHandler=e,this.finishHandler=i},TaskItem.prototype.setExtend=function(e,i){void 0===i&&(i=!0),e?i?this.onOpenHandler():this.openExtend():i?this.onCloseHandler():this.closeExtend()},TaskItem.prototype.onOpenHandler=function(){this.openExtend(),this.extendHandler&&this.extendHandler.runWith([!0,this])},TaskItem.prototype.openExtend=function(){this.extend||(this.extend=new T(this.scene,this.key,this.dpr),this.extend.setFinishHandler(new m.Handler(this,this.onFinishHandler)),this.add(this.extend),this.extend.y=.5*this.height+.5*this.extend.height),this.extend.visible=!0,this.height=this.content.height+this.extend.height,this.content.y=.5*-this.height+.5*this.content.height,this.extend.y=.5*-this.height+this.content.height+.5*this.extend.height,this.openBtn.visible=!1,this.closeBtn.visible=!0},TaskItem.prototype.setExtendBtn=function(e){var i=60*this.dpr,n=60*this.dpr,a=this.scene.make.graphics(void 0,!1);a.clear(),a.fillStyle(16185078,0),a.fillRect(.5*-i,.5*-n,i,n),e.addAt(a,0),e.setInteractive(new Phaser.Geom.Rectangle(0,0,i,n),Phaser.Geom.Rectangle.Contains)},TaskItem.prototype.onFinishHandler=function(){this.finishHandler&&this.finishHandler.runWith(this.questData.id)},TaskItem.prototype.onCloseHandler=function(){this.closeExtend(),this.extendHandler&&this.extendHandler.runWith([!1,this])},TaskItem.prototype.closeExtend=function(){this.extend&&(this.extend.visible=!1),this.height=this.content.height,this.content.y=0,this.openBtn.visible=!0,this.closeBtn.visible=!1},TaskItem.prototype.getQuestTypeTag=function(e){var i=[];return e===s.op_pkt_def.PKT_Quest_Type.QUEST_MAIN_MISSION?(i[0]="tag_main",i[1]=m.i18n.t("task.m"),i[2]=""+m.i18n.t("task.main"),i[3]="main_bg",i[4]="#4C42C8",i[5]="#8780E0",i):e===s.op_pkt_def.PKT_Quest_Type.QUEST_SIDE_MISSION?(i[0]="tag_side",i[1]=m.i18n.t("task.s"),i[2]=m.i18n.t("task.side"),i[3]="side_bg",i[4]="#CB0A1D",i[5]="#F4919B",i):e===s.op_pkt_def.PKT_Quest_Type.QUEST_DAILY_GOAL?(i[0]="tag_daly",i[1]=m.i18n.t("task.d"),i[2]=m.i18n.t("task.daily"),i[3]="daly_bg",i[4]="#866107",i[5]="#F1D56C",i):void 0},TaskItem.prototype.setTextLimit=function(e,i,n){if(void 0===n&&(n=15),i.length>n)for(var a=155*this.dpr,s=4;s<i.length;s++){var o=i.slice(0,s);if(e.setText(o).width>a){o+="...",e.setText(o);break}}else e.setText(i)},TaskItem}(Phaser.GameObjects.Container),T=function(e){function TaskItemExtend(i,n,a){var s=e.call(this,i)||this;s.needArr=[],s.rewardArr=[],s.dpr=0;var h=253*a,l=202*a;s.dpr=a;var f=new o.NineSlicePatch(s.scene,0,0,h,l,n,"detail_bg",{left:4,top:4,right:4,bottom:4}),g=.5*-h+10*a,_=.5*-l+5*a;s.taskLabel=i.make.text({x:g,y:_,text:m.i18n.t("task.objective"),style:{color:"#8F4300",fontSize:12*s.dpr,fontFamily:m.Font.DEFULT_FONT}}),s.taskTex=i.make.text({x:g,y:_+18*a,text:m.i18n.t("task.collect_materials"),style:{color:"#8F4300",fontSize:12*s.dpr,fontFamily:m.Font.DEFULT_FONT}}),s.taskTex.setWordWrapWidth(h-10*a,!0),s.rewardLabel=i.make.text({x:g,y:_+90*a,text:m.i18n.t("task.rewards"),style:{color:"#8F4300",fontSize:12*s.dpr,fontFamily:m.Font.DEFULT_FONT}});var T=i.make.image({key:n,frame:"reward_cutline"});return T.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),T.setPosition(0,_+110*a),s.line=T,s.finishBtn=new o.NineSliceButton(s.scene,Math.ceil(.5*h-40*s.dpr),Math.ceil(.5*l-25*s.dpr),60*s.dpr,30*s.dpr,c.c.commonKey,"button_g",m.i18n.t("task.submit_task"),s.dpr,s.scale,{left:12*s.dpr,top:12*s.dpr,right:12*s.dpr,bottom:12*s.dpr}),s.finishBtn.setTextStyle({fontSize:12*a,color:"#000000"}),s.finishBtn.on(o.ClickEvent.Tap,s.onFinishHandler,s),s.add([f,s.taskLabel,s.taskTex,s.rewardLabel,T,s.finishBtn]),s.setSize(h,l),s.key=n,s.finishBtn.visible=!1,s}return f(TaskItemExtend,e),TaskItemExtend.prototype.setItemData=function(e,i){this.taskLabel.setColor(i),this.taskTex.setColor(i),this.rewardLabel.setColor(i);var n=0,a=33*this.dpr;this.taskTex.text=this.getTaskTargetText(e),this.createTaskCells(this.needArr,e.targets,!0),n=this.taskTex.y+this.taskTex.height+5*this.dpr,e.targets.length>0&&(n+=.5*a,this.sortItem(this.needArr,n),n+=.5*a+8*this.dpr),this.rewardLabel.y=n,n+=this.rewardLabel.height+5*this.dpr,this.line.y=n,n+=5*this.dpr,this.createTaskCells(this.rewardArr,e.rewards,!1),n+=.5*a,this.sortItem(this.rewardArr,n),this.finishBtn.visible=e.stage===s.op_pkt_def.PKT_Quest_Stage.PKT_QUEST_STAGE_FINISHED},TaskItemExtend.prototype.setFinishHandler=function(e){this.finishHandler=e},TaskItemExtend.prototype.sortItem=function(e,i){void 0===i&&(i=0);for(var n=.5*-this.width+10*this.dpr,a=e,s=0,o=10*this.dpr,h=0,l=a;h<l.length;h++){var c=l[h];c.x=n+c.width*c.originX+s,c.y=i,s+=c.width+o}},TaskItemExtend.prototype.createTaskCells=function(e,i,n){void 0===n&&(n=!0);for(var a=0,s=e;a<s.length;a++){(h=s[a]).visible=!1}for(var o=0;o<i.length;o++){var h=void 0;o<e.length?h=e[o]:(h=new x(this.scene,this.key,this.dpr),e.push(h),this.add(h)),h.visible=!0,h.setCellData(i[o],n)}return e},TaskItemExtend.prototype.onFinishHandler=function(){this.finishHandler&&this.finishHandler.run()},TaskItemExtend.prototype.getTaskTargetText=function(e){e.targets;return e.detail},TaskItemExtend}(Phaser.GameObjects.Container),x=function(e){function TaskCell(i,n,a){var s=e.call(this,i)||this;return s.key=n,s.dpr=a,s.bg=i.make.image({key:n,frame:"task_bg"}),s.bg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),s.setSize(s.bg.width,s.bg.height),s.itemIcon=new h.DynamicImage(i,0,0),s.countTex=new o.BBCodeText(s.scene,0,0).setOrigin(.5).setFontSize(12*a).setFontFamily(m.Font.DEFULT_FONT),s.countTex.setPosition(.5*s.width,.5*s.height-2*a),s.add([s.bg,s.itemIcon,s.countTex]),s}return f(TaskCell,e),TaskCell.prototype.setCellData=function(e,i){var n=this;void 0===i&&(i=!0);var a=i?"task_bg":"reward_bg";this.bg.setTexture(this.key,a);var s=m.Url.getOsdRes(e.display.texturePath);this.itemIcon.load(s,this,(function(){n.itemIcon.scale=.6*n.dpr})),this.countTex.text=i?this.getCountText(e.count,e.neededCount):"[stroke=#666666][color=#666666]"+e.count+"[/color][/stroke]"},TaskCell.prototype.getCountText=function(e,i){var n=e>=i?"#0054FF":"#FF2B2B";return"[stroke="+n+"][color="+n+"]"+e+"[/color][/stroke]"+"/"+("[stroke=#2D2D2D][color=#2D2D2D]"+i+"[/color][/stroke]")},TaskCell}(Phaser.GameObjects.Container),S=function(e){function TaskOption(i,n,a){var s=e.call(this,i)||this;s.dpr=0;var o=256*a,h=30*a;s.dpr=a,s.bg=i.make.graphics(void 0,!1),s.text=i.make.text({x:0,y:0,text:"全部",style:{color:"#666666",fontSize:15*a,fontFamily:m.Font.DEFULT_FONT}}).setOrigin(0,.5),s.bg.clear(),s.bg.fillStyle(16185078,1),s.bg.fillRect(.5*-o,.5*-h,o,h);var l=s.scene.make.graphics(void 0,!1);return l.clear(),l.fillStyle(13421772,1),l.fillRect(.5*-o,.5*h,o,2),s.add([s.bg,s.text,l]),s.setSize(o,h),s.bg.setInteractive(new Phaser.Geom.Rectangle(.5*-o,.5*-h,o,h),Phaser.Geom.Rectangle.Contains),s.bg.on("pointerup",s.onClickHandler,s),s}return f(TaskOption,e),TaskOption.prototype.setSize=function(i,n){return e.prototype.setSize.call(this,i,n),this.text.setPosition(.5*-i+20*this.dpr,0),this.changeNormal(),this},TaskOption.prototype.setOptionData=function(e){this.optionData=e,e===s.op_pkt_def.PKT_Quest_Type.QUEST_MAIN_MISSION?this.text.text=m.i18n.t("task.main_quest"):e===s.op_pkt_def.PKT_Quest_Type.QUEST_SIDE_MISSION?this.text.text=m.i18n.t("task.side_quest"):e===s.op_pkt_def.PKT_Quest_Type.QUEST_DAILY_GOAL?this.text.text=m.i18n.t("task.daily_quest"):this.text.text=m.i18n.t("task.all_task"),this.optionText=this.text.text},TaskOption.prototype.changeDown=function(){this.bg.clear(),this.bg.fillStyle(14673663,1),this.bg.fillRect(.5*-this.width,.5*-this.height,this.width,this.height)},TaskOption.prototype.changeNormal=function(){this.bg.clear(),this.bg.fillStyle(16185078,1),this.bg.fillRect(.5*-this.width,.5*-this.height,this.width,this.height)},TaskOption.prototype.setHandler=function(e){this.clickHandler=e},TaskOption.prototype.onClickHandler=function(){this.clickHandler&&this.clickHandler.runWith(this)},TaskOption}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.d(i,"a",(function(){return l})),n.d(i,"b",(function(){return m}));var a,s,o,h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)});!function(e){e[e.IMAGE=0]="IMAGE",e[e.JSON=1]="JSON",e[e.ALTAS=2]="ALTAS",e[e.DRAGONBONES=3]="DRAGONBONES"}(s||(s={})),function(e){e[e.NONE=0]="NONE",e[e.PRELOAD=1]="PRELOAD",e[e.PROGRESS=2]="PROGRESS",e[e.COMPLETE=3]="COMPLETE",e[e.ERROR=4]="ERROR",e[e.RETRY=5]="RETRY"}(o||(o={}));var l=function(e){function LoadQueue(i){var n=e.call(this)||this;return n.scene=i,n.mQueue=[],n}return h(LoadQueue,e),LoadQueue.prototype.add=function(e){var i=this;e.forEach((function(e){if(e){var n=e.type,a=e.key,o=e.altasUrl,h=e.textureUrl,l=e.jsonUrl,c=e.boneUrl;switch(n){case s.ALTAS:i.scene.load.atlas(a,o);break;case s.IMAGE:i.scene.load.image(a,h);break;case s.JSON:i.scene.load.json(a,l);break;case s.DRAGONBONES:i.scene.load.dragonbone(a,h,l,c,null,null,{responseType:"arraybuffer"})}i.mQueue.push(e)}}))},LoadQueue.prototype.startLoad=function(){this.mQueue.forEach((function(e){e.state=o.PROGRESS})),this.addListen(),this.scene.load.start()},LoadQueue.prototype.destroy=function(){this.removeListen(),this.mQueue&&(this.mQueue=null),e.prototype.destroy.call(this)},LoadQueue.prototype.addListen=function(){this.removeListen(),this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE,this.fileComplete,this),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.totalComplete,this),this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.fileLoadError,this)},LoadQueue.prototype.removeListen=function(){this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE,this.fileComplete,this),this.scene.load.off(Phaser.Loader.Events.COMPLETE,this.totalComplete,this),this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,this.fileLoadError,this)},LoadQueue.prototype.totalComplete=function(){this.emit("QueueComplete"),this.clearQueue()},LoadQueue.prototype.fileComplete=function(e,i){this.emit("QueueProgress",this.scene.load.progress,e,i)},LoadQueue.prototype.fileLoadError=function(e){this.emit("QueueError",e.key)},LoadQueue.prototype.clearQueue=function(){this.removeListen(),this.mQueue&&(this.mQueue.length=0,this.mQueue=[])},LoadQueue}(Phaser.Events.EventEmitter),c=n(0),m=function(){function LoadingTips(){}return LoadingTips.enterWorld=function(){return c.i18n.t("loading.enter_game")},LoadingTips.loginGame=function(){return c.i18n.t("loading.logging")},LoadingTips.downloadGameConfig=function(){return c.i18n.t("loading.downloading_config")},LoadingTips.downloadSceneConfig=function(){return c.i18n.t("loading.downloading_scene_config")},LoadingTips.parseConfig=function(){return c.i18n.t("loading.parse_config")},LoadingTips.downloadJsonConfig=function(){return c.i18n.t("loading.downloading_json_config")},LoadingTips.loadingResources=function(){return c.i18n.t("loading.loading_resources")},LoadingTips.createScene=function(){return c.i18n.t("loading.create_scene")},LoadingTips.waitEnterRoom=function(){return c.i18n.t("loading.wait_enter_room")},LoadingTips}()},function(e,i,n){"use strict";n.d(i,"c",(function(){return a.b})),n.d(i,"a",(function(){return a.a})),n.d(i,"b",(function(){return s.a})),n.d(i,"d",(function(){return l}));var a=n(888),s=n(1019),o=n(788),h=n(0),l=function(){function SoundManager(e){this.render=e}return SoundManager.prototype.setScene=function(e){this.mSoundMap&&this.mSoundMap.clear(),this.mSoundMap=new Map,this.mScene=e},SoundManager.prototype.stopAll=function(){this.mScene?this.mSoundMap.forEach((function(e){e&&e.stop()})):h.Logger.getInstance().fatal(SoundManager.name+" scene does not exist,can't stopAll")},SoundManager.prototype.pauseAll=function(){this.mScene?this.mSoundMap.forEach((function(e){e&&e.pause()})):h.Logger.getInstance().fatal(SoundManager.name+" scene does not exist,can't pauseAll")},SoundManager.prototype.resume=function(){this.mScene?this.mSoundMap.forEach((function(e){e&&e.resume()})):h.Logger.getInstance().fatal(SoundManager.name+" scene does not exist,can't resumeAll")},SoundManager.prototype.destroy=function(){},SoundManager.prototype.playOsdSound=function(e){void 0===e.loop&&(e.loop=!1),this.play({key:e.soundKey,urls:h.Url.getOsdRes(e.soundKey),field:e.scope,soundConfig:{loop:e.loop}})},SoundManager.prototype.playSound=function(e){void 0===e.loop&&(e.loop=!1),this.play({key:e.soundKey,urls:h.Url.getRes(e.soundKey),field:e.scope,soundConfig:{loop:e.loop}})},SoundManager.prototype.play=function(e){if(this.mScene){var i=e.key;i||(i=Array.isArray(e.urls)?e.urls.join(""):e.urls);var n=e.field||o.SoundField.Background,a=this.mSoundMap.get(n);a||(a=new c(this.mScene),this.mSoundMap.set(n,a)),a.play(i,e.urls,e.soundConfig)}else h.Logger.getInstance().fatal(SoundManager.name+" scene does not exist. play "+e.key+" fatal")},SoundManager.prototype.stop=function(e){if(this.mScene){var i=this.mSoundMap.get(e);i&&i.stop()}else h.Logger.getInstance().fatal(SoundManager.name+" scene does not exist,can't stop")},SoundManager.prototype.pause=function(e){if(this.mScene){var i=this.mSoundMap.get(e);i&&i.pause()}else h.Logger.getInstance().fatal(SoundManager.name+" scene does not exist,can't pause")},SoundManager.prototype.resumes=function(e){if(this.mScene){var i=this.mSoundMap.get(e);i&&i.resume()}else h.Logger.getInstance().fatal(SoundManager.name+" scene does not exist,can't resume")},SoundManager}(),c=function(){function Sound(e){this.scene=e}return Sound.prototype.sound=function(){return this.mSound},Sound.prototype.play=function(e,i,n){if(this.scene)if(this.mSound&&this.mSound.key===e){if(this.mSound.isPlaying)return;this.mSound.play()}else if(this.mKey=e,this.scene.cache.audio.exists(e))this.startPlay();else{if(!i)return;this.scene.load.once("filecomplete-audio-"+e,this.onSoundCompleteHandler,this),this.scene.load.audio(e,i),this.scene.load.start()}},Sound.prototype.pause=function(){if(this.scene)if(this.mSound){if(this.mSound.isPaused)return;this.mSound.pause()}else;},Sound.prototype.stop=function(){if(this.scene)if(this.mSound){if(!this.mSound.isPlaying)return;this.mSound.stop()}else;},Sound.prototype.resume=function(){if(this.scene)if(this.mSound){if(!this.mSound.isPaused)return;this.mSound.resume()}else;},Sound.prototype.destroy=function(){this.mSound&&(this.mSound.stop(),this.mSound.destroy(),this.mSound=void 0)},Sound.prototype.onSoundCompleteHandler=function(){this.startPlay()},Sound.prototype.startPlay=function(){this.mSound&&(this.mSound.stop(),this.mSound.destroy()),this.mSound=this.scene.sound.add(this.mKey),this.mSound.play()},Sound}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return s}));var a=n(0),s=function(){function Account(){}return Account.prototype.getAccountData=function(){return this.accountData},Account.prototype.setAccount=function(e){this.accountData={id:e.id,fingerprint:e.fingerprint,refreshToken:e.refreshToken,expire:e.expire,accessToken:e.token||e.accessToken,gateway:e.gateway},this.saveLocalStorage()},Account.prototype.refreshToken=function(e){if(!this.accountData)try{this.accountData=JSON.parse(localStorage.getItem("token"))}catch(e){return a.Logger.getInstance().error("parse token error")}var i=e.newExpire,n=e.newFingerprint,s=e.newToken;this.accountData.expire=i,this.accountData.fingerprint=n,this.accountData.accessToken=s,this.saveLocalStorage()},Account.prototype.saveLocalStorage=function(){if(this.accountData){var e=this.accountData,i=e.id,n=e.fingerprint,s=e.refreshToken,o=e.expire,h=e.accessToken,l=e.gateway;try{localStorage.setItem("token",JSON.stringify({id:i,fingerprint:n,refreshToken:s,expire:o,accessToken:h,gateway:l}))}catch(e){a.Logger.getInstance().warn("write localStorage fail")}}},Account.prototype.clear=function(){this.accountData=null},Account.prototype.destroy=function(){this.clear(),localStorage.removeItem("token"),this.enterGame(void 0,void 0,void 0,void 0,void 0)},Account.prototype.enterGame=function(e,i,n,a,s,o){this.gameId=e,this.virtualWorldId=i,this.sceneID=n,this.loc=a,this.spawnPointId=s,this.worldId=o},Object.defineProperty(Account.prototype,"gameID",{get:function(){return this.gameId},enumerable:!1,configurable:!0}),Object.defineProperty(Account.prototype,"sceneId",{get:function(){return this.sceneID},enumerable:!1,configurable:!0}),Account}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return c}));var a,s=n(1016),o=n(71),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function BubbleContainer(i,n){var a=e.call(this,i)||this;return a.mBubbles=[],a.mScale=n,a.mArrow=new o.DynamicImage(a.scene,0,0),a.mArrow.scale=n,a.mArrow.load(h.Url.getRes("ui/chat/bubble_arrow.png")),a.add(a.mArrow),a}return l(BubbleContainer,e),BubbleContainer.prototype.addBubble=function(e,i){var n=this.createBubble(i),a=this.mBubbles.length,s=null,o=0;n.show(e,i);for(var h=a-1;h>=0;h--)o+=(s=this.mBubbles[h]).minHeight+5*this.mScale,s.tweenTo(-o);this.add(n),this.mArrow.y=4*this.mScale},BubbleContainer.prototype.follow=function(e){if(0!==this.mBubbles.length){var i=e.getPosition();i&&this.updatePos(i.x,i.y-110)}},BubbleContainer.prototype.updatePos=function(e,i){this.x=e*this.mScale,this.y=i*this.mScale},BubbleContainer.prototype.destroy=function(i){if(this.mBubbles){for(var n=null,a=this.mBubbles.length-1;a>=0;a--)(n=this.mBubbles[a])&&n.destroy();this.mBubbles=null,this.removeFormParent(),e.prototype.destroy.call(this,i)}},BubbleContainer.prototype.removeFormParent=function(){this.parentContainer&&this.parentContainer.remove(this)},BubbleContainer.prototype.createBubble=function(e){if(e){var i=new s.a(this.scene,this.mScale);this.mBubbles.push(i);var n=e.duration?e.duration:5e3;return i.durationRemove(n,this.onRemoveBubble,this),i}},BubbleContainer.prototype.onRemoveBubble=function(e){e&&(this.mBubbles=this.mBubbles.filter((function(i){return e!==i})),this.remove(e),e.destroy(),0===this.mBubbles.length&&this.removeFormParent())},BubbleContainer}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.d(i,"a",(function(){return c}));var a,s=n(818),o=n(788),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function Bubble(i,n){var a=e.call(this,i)||this;return a.mMinWidth=0,a.mMinHeight=0,a.mScale=n,a}return l(Bubble,e),Bubble.prototype.show=function(e,i){this.mChatContent=new o.BBCodeText(this.scene,0,0,e,{fontFamily:h.Font.DEFULT_FONT,fontSize:14*this.mScale,color:"#000000",origin:{x:0,y:0},wrap:{width:200*this.mScale,mode:"character"}}).setOrigin(.5,.5),this.add(this.mChatContent);var n=50*this.mScale,a=100*this.mScale;this.mMinHeight=this.mChatContent.height+30*this.mScale,this.mMinHeight=this.mMinHeight<n?n:this.mMinHeight,this.mMinWidth=this.mChatContent.width+30*this.mScale,this.mMinWidth=this.mMinWidth<a?a:this.mMinWidth,this.y=this.mMinHeight,this.mBubbleBg=new s.DynamicNinepatch(this.scene,this);var l=h.Url.getOsdRes(i.bubbleResource||"platformitem/thumbnail/bubble_01.png");this.mBubbleBg.load(l,{width:this.mMinWidth/this.mScale,height:this.mMinHeight/this.mScale,key:l,scale:1,config:{left:20,top:28,right:20,bottom:10}},this.onComplete,this)},Bubble.prototype.tweenTo=function(e){e+=this.mMinHeight,this.mToY=e,this.scene.tweens.add({targets:this,y:e,alpha:1,duration:200})},Bubble.prototype.durationRemove=function(e,i,n){var a=this;this.mTweenCompleteCallback=i,this.mTweenCallContext=n,this.mRemoveDelay=setTimeout((function(){a.removeTween()}),e)},Bubble.prototype.removeTween=function(){var e=this,i=this.mToY-30;this.scene.tweens.add({targets:this,y:i,alpha:0,duration:200,onComplete:function(){e.mTweenCompleteCallback&&e.mTweenCompleteCallback.call(e.mTweenCallContext,e)}})},Bubble.prototype.destroy=function(){this.mChatContent&&this.mChatContent.destroy(!0),this.mChatContent=null,this.mMinWidth=0,this.mMinHeight=0,this.mToY=0,this.mTweenCompleteCallback=null,this.mTweenCallContext=null,this.mRemoveDelay&&clearTimeout(this.mRemoveDelay),e.prototype.destroy.call(this,!0)},Bubble.prototype.onComplete=function(e){e&&this.scene&&(e.scale=this.mScale,this.addAt(e,0),e.y=-e.displayHeight>>1,this.mChatContent.y=-(e.displayHeight>>1)+8*this.mScale)},Object.defineProperty(Bubble.prototype,"minWidth",{get:function(){return this.mMinWidth},enumerable:!1,configurable:!0}),Object.defineProperty(Bubble.prototype,"minHeight",{get:function(){return this.mMinHeight},enumerable:!1,configurable:!0}),Bubble}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.d(i,"a",(function(){return o}));var a=n(0),s=n(799),o=function(){function GridsDebugger(e){this.render=e,this.isDebug=!1}return GridsDebugger.prototype.destroy=function(){this.mGraphic&&this.mGraphic.destroy(),this.mRoomSize=null},GridsDebugger.prototype.setData=function(e){this.mRoomSize=e,this.isDebug?this.show():this.hide()},GridsDebugger.prototype.show=function(){if(this.mRoomSize){var e=this.render.sceneManager.getMainScene();if(e&&e instanceof s.a){this.mGraphic&&this.mGraphic.destroy(),this.mGraphic=e.make.graphics(void 0,!1),this.mGraphic.clear(),this.mGraphic.lineStyle(1,65280),this.mGraphic.beginPath();for(var i=0;i<=this.mRoomSize.rows;i++)this.drawLine(this.mRoomSize,this.mGraphic,0,i,this.mRoomSize.cols,i);for(i=0;i<=this.mRoomSize.cols;i++)this.drawLine(this.mRoomSize,this.mGraphic,i,0,i,this.mRoomSize.rows);this.mGraphic.closePath(),this.mGraphic.strokePath(),e.layerManager.addToLayer("middleLayer",this.mGraphic)}}},GridsDebugger.prototype.hide=function(){this.mGraphic&&this.mGraphic.destroy()},GridsDebugger.prototype.q=function(){this.isDebug=!1,this.hide()},GridsDebugger.prototype.v=function(){this.isDebug||this.show(),this.isDebug=!0},GridsDebugger.prototype.drawLine=function(e,i,n,s,o,h){var l=new a.LogicPos(n,s);l=a.Position45.transformTo90(l,e),i.moveTo(l.x,l.y),l=new a.LogicPos(o,h),l=a.Position45.transformTo90(l,e),i.lineTo(l.x,l.y)},GridsDebugger}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return l}));var a=n(1013),s=n(798),o=n(0),h=n(2),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},l=function(){function MotionManager(e){this.render=e,this.isHolding=!1,this.holdDelay=200,this.isRunning=!0,this.scaleRatio=e.scaleRatio}return MotionManager.prototype.addListener=function(){this.scene&&(this.scene.input.on("pointerup",this.onPointerUpHandler,this),this.scene.input.on("pointerdown",this.onPointerDownHandler,this),this.scene.input.on("gameobjectdown",this.onGameObjectDownHandler,this),this.scene.input.on("gameobjectup",this.onGameObjectUpHandler,this),this.uiScene&&this.uiScene.input.on("gameobjectdown",this.onPointeroutHandler,this))},MotionManager.prototype.removeListener=function(){this.scene&&(this.scene.input.off("pointerup",this.onPointerUpHandler,this),this.scene.input.off("pointerdown",this.onPointerDownHandler,this),this.scene.input.off("pointermove",this.onPointerMoveHandler,this),this.scene.input.off("gameobjectdown",this.onGameObjectDownHandler,this),this.scene.input.off("gameobjectup",this.onGameObjectUpHandler,this),this.uiScene&&this.uiScene.input.off("gameobjectdown",this.onPointeroutHandler,this))},MotionManager.prototype.resize=function(e,i){this.scaleRatio=this.render.scaleRatio},MotionManager.prototype.update=function(e,i){if(this.isRunning&&!1!==this.isHolding&&(this.curtime+=i,!(this.curtime<200))){this.curtime=0;var n=this.scene.input.activePointer;if(n.camera&&n.camera.scene&&n.camera.scene.sys.settings.key===s.a.name)return this.isHolding=!1,this.scene.input.off("pointermove",this.onPointerMoveHandler,this),void this.clearGameObject();if(n&&this.render.displayManager&&this.render.displayManager.user&&this.render.displayManager.user.visible){var a=this.getPreUserPos(n);this.start(a.x/this.scaleRatio,a.y/this.scaleRatio)}}},MotionManager.prototype.setScene=function(e){this.removeListener(),this.scene=e,this.scene&&(this.uiScene=this.render.game.scene.getScene(h.SceneName.MAINUI_SCENE),this.addListener())},MotionManager.prototype.pauser=function(){this.isRunning=!1,this.isHolding=!1,this.clearGameObject()},MotionManager.prototype.resume=function(){this.isRunning=!0},MotionManager.prototype.destroy=function(){this.removeListener()},MotionManager.prototype.onGuideOnPointUpHandler=function(e,i){return __awaiter(this,void 0,void 0,(function(){var n,s,h,l;return __generator(this,(function(c){switch(c.label){case 0:return this.scene.input.off("pointermove",this.onPointerMoveHandler,this),i?i?(n=this.render.displayManager.getDisplay(i)).nodeType===a.c.CharacterNodeType?(this.render.mainPeer.activePlayer(i),this.clearGameObject(),[2]):[4,this.render.mainPeer.getInteractivePosition(i)]:[3,2]:[3,3];case 1:(s=c.sent())&&0!==s.length||(h=n.x,l=n.y,s=[{x:h,y:l}]),this.movePath(e.worldX/this.render.scaleRatio,e.worldY/this.render.scaleRatio,0,s,i),c.label=2;case 2:return[3,4];case 3:this.movePath(e.worldX/this.render.scaleRatio,e.worldY/this.render.scaleRatio,0,[new o.LogicPos(e.worldX/this.scaleRatio,e.worldY/this.scaleRatio)]),c.label=4;case 4:return this.clearGameObject(),[2]}}))}))},MotionManager.prototype.onPointerDownHandler=function(e){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(i){return this.isRunning?(this.render.guideManager.canInteractive()||(this.scene.input.on("pointermove",this.onPointerMoveHandler,this),this.holdTime=setTimeout((function(){e.isHolding=!0}),this.holdDelay)),[2]):[2]}))}))},MotionManager.prototype.onPointerUpHandler=function(e){return __awaiter(this,void 0,void 0,(function(){var i,n;return __generator(this,(function(a){switch(a.label){case 0:return this.isRunning?(this.isHolding=!1,this.scene.input.off("pointermove",this.onPointerMoveHandler,this),this.render.guideManager.canInteractive()?[2]:Math.abs(e.downX-e.upX)>=5*this.render.scaleRatio&&Math.abs(e.downY-e.upY)>=5*this.render.scaleRatio||e.upTime-e.downTime>this.holdDelay?(i=this.getPreUserPos(e),this.stop({x:i.x/this.scaleRatio,y:i.y/this.scaleRatio}),[3,5]):[3,1]):[2];case 1:return this.gameObject?(n=this.gameObject.getData("id"))?this.render.guideManager.canInteractive(n)?[2]:[4,this.getEleMovePath(n,e)]:[3,3]:[3,4];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:this.movePath(e.worldX/this.render.scaleRatio,e.worldY/this.render.scaleRatio,0,[new o.LogicPos(e.worldX/this.scaleRatio,e.worldY/this.scaleRatio)]),a.label=5;case 5:return this.clearGameObject(),[2]}}))}))},MotionManager.prototype.getEleMovePath=function(e,i){return __awaiter(this,void 0,void 0,(function(){var n,s,h,l;return __generator(this,(function(c){switch(c.label){case 0:return(n=this.render.displayManager.getDisplay(e))&&n.hasInteractive?n.nodeType===a.c.CharacterNodeType?(this.render.mainPeer.activePlayer(e),this.clearGameObject(),[2]):[4,this.render.mainPeer.getInteractivePosition(this.getMountId(e))]:(this.movePath(i.worldX/this.render.scaleRatio,i.worldY/this.render.scaleRatio,0,[new o.LogicPos(i.worldX/this.scaleRatio,i.worldY/this.scaleRatio)]),[2]);case 1:return(s=c.sent())&&0!==s.length||(h=n.x,l=n.y,s=[{x:h,y:l}]),this.movePath(i.worldX/this.render.scaleRatio,i.worldY/this.render.scaleRatio,0,s,e),[2]}}))}))},MotionManager.prototype.onPointerMoveHandler=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return this.isRunning?(this.isHolding=!0,[2]):[2]}))}))},MotionManager.prototype.onPointeroutHandler=function(e){if(this.isRunning&&!this.render.guideManager.canInteractive()){this.isHolding=!1,this.scene.input.off("pointermove",this.onPointerMoveHandler,this);var i=this.getPreUserPos(e);i&&(this.stop({x:i.x/this.scaleRatio,y:i.y/this.scaleRatio}),clearTimeout(this.holdTime))}},MotionManager.prototype.onGameObjectDownHandler=function(e,i){this.isRunning&&(this.render.guideManager.canInteractive()||(this.gameObject=i))},MotionManager.prototype.onGameObjectUpHandler=function(e,i){this.isRunning&&this.render.guideManager.canInteractive()},MotionManager.prototype.getMountId=function(e){var i=this.render.displayManager.getDisplay(e);return i?i.rootMount?this.getMountId(i.rootMount.id):i.id:-1},MotionManager.prototype.start=function(e,i,n){this.render.mainPeer.moveMotion(e,i,n)},MotionManager.prototype.movePath=function(e,i,n,a,s){this.render.mainPeer.findPath(a,s)},MotionManager.prototype.stop=function(e){this.render.mainPeer.stopMove(e.x,e.y)},MotionManager.prototype.getPreUserPos=function(e){if(!this.scene||!this.scene.cameras||!this.scene.cameras.main)return null;var i=this.render.displayManager.user,n=i.x,a=i.y,s=e.worldX/this.scaleRatio-n,o=e.worldY/this.scaleRatio-a;return this.scene.cameras.main.getWorldPoint(e.x-s,e.y-o)},MotionManager.prototype.clearGameObject=function(){this.gameObject=null,clearTimeout(this.holdTime)},MotionManager}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return a}));var a=function(){function LocalStorageManager(){}return LocalStorageManager.prototype.setItem=function(e,i){localStorage.setItem(e,i)},LocalStorageManager.prototype.removeItem=function(e){localStorage.removeItem(e)},LocalStorageManager.prototype.getItem=function(e){return localStorage.getItem(e)},LocalStorageManager.prototype.clear=function(){localStorage.clear()},LocalStorageManager.prototype.destroy=function(){this.clear()},LocalStorageManager}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return h}));var a,s=n(799),o=n(0),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};!function(e){e[e.None=0]="None",e[e.All=1]="All",e[e.OnlyWalkable=2]="OnlyWalkable",e[e.OnlyNotWalkable=3]="OnlyNotWalkable"}(a||(a={}));var h=function(){function AstarDebugger(e){this.render=e,this.isDebug=!1,this.CIRCLE_RADIUS_POINTS=2,this.CIRCLE_RADIUS_START_POSITION=4,this.CIRCLE_RADIUS_TARGET_POSITION=4,this.CIRCLE_COLOR_POINTS_PASS=65280,this.CIRCLE_COLOR_POINTS_NOTPASS=16711680,this.CIRCLE_COLOR_START_POSITION=16776960,this.CIRCLE_COLOR_TARGET_POSITION=16776960,this.LINE_COLOR_PATH=16776960,this.mPointsShowType=a.None,this.mPoints_Walkable=null,this.mPoints_NotWalkable=null,this.mPath=null}return AstarDebugger.prototype.q=function(){this.isDebug=!1,this.clearAll()},AstarDebugger.prototype.v=function(){this.isDebug||this.drawPoints(),this.isDebug=!0},AstarDebugger.prototype.destroy=function(){this.clearAll(),this.mAstarSize&&(this.mAstarSize=null)},AstarDebugger.prototype.init=function(e,i){this.mAstarSize=i,this.isDebug?this.drawPoints():this.clearAll()},AstarDebugger.prototype.update=function(e,i,n){this.mAstarSize&&(this.isDebug?this.drawPoints():this.clearAll())},AstarDebugger.prototype.showPath=function(e,i,n){this.mAstarSize&&(this.isDebug?this.drawPath(e,i,n):this.clearPath())},AstarDebugger.prototype.drawPoints=function(){return __awaiter(this,void 0,void 0,(function(){var e,i,n,h,l,c,m,f,g,_,T;return __generator(this,(function(x){switch(x.label){case 0:if(this.mPointsShowType===a.None)return[2];if(!this.mAstarSize)return[2];if(!((e=this.render.sceneManager.getMainScene())&&e instanceof s.a))return[2];this.clearAll(),i=[],n=[],h=0,x.label=1;case 1:if(!(h<this.mAstarSize.rows))return[3,6];l=0,x.label=2;case 2:return l<this.mAstarSize.cols?[4,this.render.physicalPeer.isWalkableAt(l,h)]:[3,5];case 3:if(c=x.sent(),this.mPointsShowType===a.OnlyWalkable&&!c)return[3,4];if(this.mPointsShowType===a.OnlyNotWalkable&&c)return[3,4];T=new o.LogicPos(l,h),(T=o.Position45.transformTo90(T,this.mAstarSize)).y+=this.mAstarSize.tileHeight/2,c?i.push(T):n.push(T),x.label=4;case 4:return l++,[3,2];case 5:return h++,[3,1];case 6:if(i.length>0){for(this.mPoints_Walkable=e.make.graphics(void 0,!1),this.mPoints_Walkable.clear(),this.mPoints_Walkable.fillStyle(this.CIRCLE_COLOR_POINTS_PASS,1),m=0,f=i;m<f.length;m++)T=f[m],this.mPoints_Walkable.fillCircle(T.x,T.y,this.CIRCLE_RADIUS_POINTS);e.layerManager.addToLayer("middleLayer",this.mPoints_Walkable)}if(n.length>0){for(this.mPoints_NotWalkable=e.make.graphics(void 0,!1),this.mPoints_NotWalkable.clear(),this.mPoints_NotWalkable.fillStyle(this.CIRCLE_COLOR_POINTS_NOTPASS,1),g=0,_=n;g<_.length;g++)T=_[g],this.mPoints_NotWalkable.fillCircle(T.x,T.y,this.CIRCLE_RADIUS_POINTS);e.layerManager.addToLayer("middleLayer",this.mPoints_NotWalkable)}return[2]}}))}))},AstarDebugger.prototype.clearAll=function(){this.mPoints_Walkable&&(this.mPoints_Walkable.destroy(),this.mPoints_Walkable=null),this.mPoints_NotWalkable&&(this.mPoints_NotWalkable.destroy(),this.mPoints_NotWalkable=null),this.clearPath()},AstarDebugger.prototype.clearPath=function(){this.mPath&&(this.mPath.destroy(),this.mPath=null)},AstarDebugger.prototype.drawPath=function(e,i,n){if(this.mAstarSize){var a=this.render.sceneManager.getMainScene();if(a&&a instanceof s.a){if(this.mPath||(this.mPath=a.make.graphics(void 0,!1)),this.mPath.clear(),this.mPath.fillStyle(this.CIRCLE_COLOR_START_POSITION,1),this.mPath.fillCircle(e.x,e.y,this.CIRCLE_RADIUS_START_POSITION),this.mPath.fillStyle(this.CIRCLE_COLOR_TARGET_POSITION,1),this.mPath.fillCircle(i.x,i.y,this.CIRCLE_RADIUS_TARGET_POSITION),n.length>1){this.mPath.lineStyle(1,this.LINE_COLOR_PATH),this.mPath.beginPath();for(var h=0;h<n.length-1;h++){var l=n[h],c=new o.LogicPos(l.x,l.y);this.mPath.moveTo(c.x,c.y),l=n[h+1],c=new o.LogicPos(l.x,l.y),this.mPath.lineTo(c.x,c.y)}this.mPath.closePath(),this.mPath.strokePath()}a.layerManager.addToLayer("middleLayer",this.mPath)}}},AstarDebugger}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return o}));var a=n(0),s=n(893),o=function(){function SortDebugger(e){this.render=e,this.isDebug=!1,this.RECT_COLOR=65280,SortDebugger._instance=this,this.mData=new Map,this.mGraphics=new Map}return SortDebugger.getInstance=function(){return SortDebugger._instance||a.Logger.getInstance().error("SortDebugger not created"),SortDebugger._instance},SortDebugger.prototype.q=function(){this.isDebug=!1,this.clear()},SortDebugger.prototype.v=function(){this.isDebug||this.redraw(),this.isDebug=!0},SortDebugger.prototype.clear=function(){this.mGraphics.forEach((function(e){e.destroy()})),this.mGraphics.clear()},SortDebugger.prototype.addDisplayObject=function(e,i,n,a,o){var l=this,c=new h(i,n,a,o);if(this.mData.set(e,c),this.isDebug){var m=this.render.sceneManager.getMainScene();m&&m instanceof s.b&&this.render.mainPeer.getCurrentRoomSize().then((function(i){l.mGraphics.get(e)&&l.mGraphics.get(e).destroy(),l.mGraphics.set(e,l.drawObj(m,l.RECT_COLOR,c,i))}))}},SortDebugger.prototype.redraw=function(){var e=this;this.clear();var i=this.render.sceneManager.getMainScene();i&&i instanceof s.b&&this.render.mainPeer.getCurrentRoomSize().then((function(n){e.mData.forEach((function(a,s){e.mGraphics.set(s,e.drawObj(i,e.RECT_COLOR,a,n))}))}))},SortDebugger.prototype.drawObj=function(e,i,n,s){a.Logger.getInstance().debug("#sort drawRect: ",n);var o=new a.LogicPos(n.x,n.y),h=new a.LogicPos(n.x+n.w,n.y),l=new a.LogicPos(n.x+n.w,n.y+n.h),c=new a.LogicPos(n.x,n.y+n.h),m=e.make.graphics(void 0,!1);return m.lineStyle(1,i),m.fillStyle(i,1),m.moveTo(o.x,o.y),m.lineTo(h.x,h.y),m.lineTo(l.x,l.y),m.lineTo(c.x,c.y),m.lineTo(o.x,o.y),m.fillPath(),e.layerManager.addToLayer("middleLayer",m),m},SortDebugger}(),h=function h(e,i,n,a){this.x=e,this.y=i,this.w=n,this.h=a}},function(e,i,n){"use strict";n.d(i,"a",(function(){return c}));var a,s=n(4),o=n(2),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function CreateRoleScene(){return e.call(this,{key:o.SceneName.CREATE_ROLE_SCENE})||this}return l(CreateRoleScene,e),CreateRoleScene.prototype.init=function(i){e.prototype.init.call(this,i),this.params=i.params},CreateRoleScene.prototype.create=function(){this.render&&(this.render.uiManager.setScene(this),h.Logger.getInstance().debug("createrole===scene"));e.prototype.create.call(this)},CreateRoleScene.prototype.stop=function(){this.render&&this.render.showMediator("CreateRoleScene",!1),e.prototype.stop.call(this)},CreateRoleScene}(s.BasicScene)},function(e,i,n){"use strict";n.d(i,"a",(function(){return c}));var a,s=n(0),o=n(4),h=n(2),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function GamePauseScene(){return e.call(this,{key:h.SceneName.GAMEPAUSE_SCENE})||this}return l(GamePauseScene,e),GamePauseScene.prototype.preload=function(){this.load.image("gamepause.png",s.Url.getRes("gamepause.png"))},GamePauseScene.prototype.create=function(){e.prototype.create.call(this);var i=this.scale.gameSize.width,n=this.scale.gameSize.height;this.bg=this.add.graphics(),this.bg.fillStyle(0,.8),this.bg.fillRect(0,0,i,n),this.pauseImg=this.add.image(i>>1,n>>1,"gamepause.png"),this.tipTF=this.add.text(i-240>>1,n-50,"点击任意位置开始游戏",{font:"30px Tahoma"}),this.scale.on("resize",this.checkSize,this),this.checkSize(new s.Size(i,n)),this.input.on("pointerdown",this.downHandler,this)},GamePauseScene.prototype.awake=function(){this.scale.on("resize",this.checkSize,this),this.input.on("pointerdown",this.downHandler,this),this.scene.wake()},GamePauseScene.prototype.sleep=function(){this.scale.off("resize",this.checkSize,this),this.input.off("pointerdown",this.downHandler,this),this.scene.sleep()},GamePauseScene.prototype.getKey=function(){return this.sys.config.key},GamePauseScene.prototype.downHandler=function(){this.render.onFocus()},GamePauseScene.prototype.checkSize=function(e){var i=e.width,n=e.height;this.bg.clear(),this.bg.fillStyle(0,.8),this.bg.fillRect(0,0,i,n),this.pauseImg.scaleX=this.pauseImg.scaleY=.7*this.render.uiScale,this.pauseImg.x=i>>1,this.pauseImg.y=n>>1,this.tipTF.scaleX=this.tipTF.scaleY=this.render.uiScale,this.tipTF.x=i-280*this.render.uiScale>>1,this.tipTF.y=n-50*this.render.uiScale},GamePauseScene}(o.BasicScene)},function(e,i,n){"use strict";n.d(i,"a",(function(){return g}));var a,s=n(0),o=n(4),h=n(14),l=n.n(h),c=n(2),m=n(798),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function LoadingScene(){var i=e.call(this,{key:c.SceneName.LOADING_SCENE})||this;return i.mTxtList=[],i.mErrorList=[],i}return f(LoadingScene,e),LoadingScene.prototype.preload=function(){this.load.image("avatar_placeholder",s.Url.getRes("dragonbones/avatar.png")),this.load.atlas("curtain",s.Url.getUIRes(this.dpr,"loading/curtain.png"),s.Url.getUIRes(this.dpr,"loading/curtain.json")),this.load.atlas("loading",s.Url.getRes("ui/loading/loading.png"),s.Url.getRes("ui/loading/loading.json")),this.load.script("webfont",s.Url.RES_PATH+"scripts/webfont/1.6.26/webfont.js"),this.load.atlas(c.ModuleName.MASK_LOADING_NAME,s.Url.getUIRes(this.dpr,"mask_loading/mask_loading.png"),s.Url.getUIRes(this.dpr,"mask_loading/mask_loading.json")),this.load.atlas(c.ModuleName.ALERTVIEW_NAME,s.Url.getUIRes(this.dpr,"pica_alert/pica_alert.png"),s.Url.getUIRes(this.dpr,"pica_alert/pica_alert.json"))},LoadingScene.prototype.init=function(i){e.prototype.init.call(this,i),this.createFont(),this.dpr=i.dpr||s.UiUtils.baseDpr,this.mRequestCom=!1,this.progressData=i.data,this.mCallback=i.callBack,this.tipsText=i.text||""},LoadingScene.prototype.create=function(){try{WebFont.load({custom:{families:["Source Han Sans","tt0173m_","tt0503m_","t04B25"]}})}catch(e){s.Logger.getInstance().warn("webfont failed to load")}var i=this.scale.gameSize.width,n=this.scale.gameSize.height;this.anims.create({key:"loading_anis",frames:this.anims.generateFrameNames("loading",{prefix:"loading_",start:1,end:3,zeroPad:1,suffix:".png"}),frameRate:5,repeat:-1}),this.curtain=new _(this,this.dpr),this.mask=this.add.graphics({x:0,y:0}),this.mask.fillStyle(0),this.mask.fillRect(0,0,i,n);var a=this.render.uiRatio;for(var h in this.bg=this.add.sprite(.5*i,.5*n,"loading").setScale(this.render.uiScale*a*2),this.bg.play("loading_anis"),this.progressText=this.add.text(this.bg.x,this.bg.y+.5*this.bg.displayHeight,this.tipsText,{fontSize:12*a,fontFamily:s.Font.DEFULT_FONT}).setOrigin(.5),this.debug=this.add.text(i-4*a,n-4*a,"v"+l.a+" "+this.getDebug(),{fontSize:12*a,fontFamily:s.Font.DEFULT_FONT}).setOrigin(1),this.layerManager.addLayer(this,o.BaseLayer,m.a.LAYER_UI,1),this.layerManager.addLayer(this,o.BaseLayer,m.a.LAYER_DIALOG,2),this.layerManager.addLayer(this,o.BaseLayer,m.a.LAYER_TOOLTIPS,3),this.layerManager.addLayer(this,o.BaseLayer,m.a.LAYER_MASK,4),this.progressData)this.loadProgress(this.progressData[h]);e.prototype.create.call(this),this.render.uiManager.setScene(this)},LoadingScene.prototype.getProgress=function(){return"test"},LoadingScene.prototype.updateProgress=function(e){!e||e.length<0||(this.tipsText=e,e&&this.progressText&&this.progressText.active&&this.progressText.setText(e))},LoadingScene.prototype.loadProgress=function(e){var i=this.mTxtList.length,n=this.render.uiRatio,a=this.add.text(this.bg.x-this.scale.gameSize.width/2,this.scale.gameSize.height-10*n*(i+1),"",{fontSize:12*n,fontFamily:s.Font.DEFULT_FONT}).setOrigin(0,.5);a.setText(e),this.mTxtList.unshift(a)},LoadingScene.prototype.showErrorMsg=function(e){var i=this.scale.gameSize.width,n=this.mErrorList.length,a=this.render.uiRatio,o=this.add.text(i-4*a,15*a*n,"",{fontSize:12*a,fontFamily:s.Font.DEFULT_FONT}).setOrigin(1);o.setText(e),this.mErrorList.unshift(o)},LoadingScene.prototype.wake=function(i){var n=this;this.scene&&this.scene.settings&&(this.curtain&&(this.displayVisible(!0),this.curtain.open().then((function(){n.scene.wake()})).catch((function(e){s.Logger.getInstance().debug(e)})),this.scene.bringToTop(c.SceneName.LOADING_SCENE),e.prototype.wake.call(this,i)),i&&(this.tipsText=i.text,s.Logger.getInstance().debug("loadState:----",i.text),i.text&&this.progressText&&this.progressText.active&&this.progressText.setText(i.text)))},LoadingScene.prototype.sleep=function(){var e=this;this.mTxtList.forEach((function(e){e.destroy()})),this.mErrorList.forEach((function(e){e.destroy()})),this.mErrorList.length=0,this.mErrorList=[],this.mTxtList.length=0,this.mTxtList=[],this.progressText&&this.progressText.active&&this.progressText.setText(""),this.scene&&this.scene.settings&&(this.curtain?(this.displayVisible(!1),this.curtain.close().then((function(){e.scene.sleep()}))):(this.displayVisible(!0),this.scene.sleep()))},LoadingScene.prototype.appendProgress=function(e){this.progressText&&this.progressText.setText(e)},LoadingScene.prototype.getKey=function(){return this.sys.config.key},LoadingScene.prototype.getDebug=function(){var e="WebGL",i=this.game.config;i.renderType===Phaser.CANVAS?e="Canvas":i.renderType===Phaser.HEADLESS&&(e="Headless");var n=i.audio,a=this.game.device.audio;return"("+e+" | "+(!a.webAudio||n&&n.disableWebAudio?n&&n.noAudio||!a.webAudio&&!a.audioData?"No Audio":"HTML5 Audio":"Web Audio")+")"},LoadingScene.prototype.displayVisible=function(e){this.bg&&(this.bg.visible=e,this.debug.visible=e,this.mask.visible=e)},LoadingScene.prototype.createFont=function(){var e=document.createElement("style");document.head.appendChild(e);var i=e.sheet,n="@font-face { font-family: 'tt0173m_'; src: url('"+s.Url.getRes("fonts/en/tt0173m_.ttf")+"') format('truetype');font-display:swap }\n",a="@font-face { font-family: 'tt0503m_'; src: url('"+s.Url.getRes("fonts/en/tt0503m_.ttf")+"') format('truetype'); font-display:swap}\n",o="@font-face { font-family: 't04B25'; src: url('"+s.Url.getRes("fonts/04B.ttf")+"') format('truetype'); font-display:swap}";i.insertRule(n,0),i.insertRule(a,0),i.insertRule(o,0)},LoadingScene}(o.BasicScene),_=function(){function Curtain(e,i){this.scene=e,this.dpr=i,this.key="curtain",this.upDisplay=this.scene.add.image(0,0,this.key,"up.png").setOrigin(0).setVisible(!1).setScale(this.dpr),this.downDisplay=this.scene.add.image(0,0,this.key,"down.png").setOrigin(0,1).setVisible(!1).setScale(this.dpr)}return Curtain.prototype.open=function(){var e=this;return this.upDisplay.visible=!0,this.downDisplay.visible=!0,new Promise((function(i,n){if(e.scene.cameras.main)if(e.upTween||e.downTween)n();else{var a=e.scene.cameras.main.height;e.upDisplay.y=-e.upDisplay.displayHeight,e.downDisplay.y=a+e.downDisplay.displayHeight,e.upTween=e.scene.tweens.add({targets:e.upDisplay,props:{y:0},duration:1e3}),e.downTween=e.scene.tweens.add({targets:e.downDisplay,props:{y:a},duration:1e3,onComplete:function(){e.clearTween(),i()}})}else i()}))},Curtain.prototype.close=function(){var e=this;return this.downDisplay.visible=!0,this.upDisplay.visible=!0,new Promise((function(i,n){if(e.scene.cameras.main){var a=e.scene.cameras.main.height;e.upDisplay.y=0,e.downDisplay.y=a,e.clearTween(),e.upTween=e.scene.tweens.add({targets:e.upDisplay,props:{y:-e.upDisplay.displayHeight},duration:1e3}),e.downTween=e.scene.tweens.add({targets:e.downDisplay,props:{y:a+e.downDisplay.displayHeight},duration:1e3,onComplete:function(){e.clearTween(),i()}})}else i(null)}))},Curtain.prototype.destroy=function(){},Curtain.prototype.clearTween=function(){this.upTween&&(this.upTween.stop(),this.upTween=null),this.downTween&&(this.downTween.stop(),this.downTween=null)},Curtain}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return c}));var a,s=n(4),o=n(2),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function LoginAccountScene(){return e.call(this,{key:o.SceneName.LOGINACCOUNT_SCENE})||this}return l(LoginAccountScene,e),LoginAccountScene.prototype.preload=function(){var e=2;this.mWorld&&(e=this.mWorld.uiRatio||2),this.load.image("avatar_placeholder",h.Url.getRes("dragonbones/avatar.png")),this.load.atlas("curtain",h.Url.getUIRes(e,"loading/curtain.png"),h.Url.getUIRes(e,"loading/curtain.json")),this.load.atlas("loading",h.Url.getRes("ui/loading/loading.png"),h.Url.getRes("ui/loading/loading.json")),this.load.script("webfont","./resources/scripts/webfont/1.6.26/webfont.js")},LoginAccountScene.prototype.init=function(i){e.prototype.init.call(this,i),this.createFont(),this.mWorld=i.world,this.mCallback=i.callBack},LoginAccountScene.prototype.create=function(){var i=this;e.prototype.create.call(this);try{WebFont.load({custom:{families:["Source Han Sans","tt0173m_","tt0503m_","t04B25"]}})}catch(e){h.Logger.getInstance().warn("webfont failed to load")}var n=this.scale.gameSize.width,a=this.scale.gameSize.height;this.anims.create({key:"loading_anis",frames:this.anims.generateFrameNames("loading",{prefix:"loading_",start:1,end:3,zeroPad:1,suffix:".png"}),frameRate:5,repeat:-1});var s=this.mWorld.uiRatio;this.bg=this.add.sprite(.5*n,.5*a,"loading").setScale(this.mWorld.uiScale*s*2),this.bg.play("loading_anis"),this.checkSize(new h.Size(n,a)),this.scale.on("resize",this.checkSize,this);var o=this.add.graphics();o.fillStyle(16763904,.8),o.fillRect(0,0,100,50),o.setInteractive(new Phaser.Geom.Rectangle(0,0,100,50),Phaser.Geom.Rectangle.Contains),o.x=200,o.y=300,o.on("pointerdown",(function(){i.mCallback&&(i.mCallback.call(i,i),i.mCallback=void 0)}),this)},LoginAccountScene.prototype.getKey=function(){return this.sys.config.key},LoginAccountScene.prototype.checkSize=function(e){},LoginAccountScene.prototype.createFont=function(){var e=document.createElement("style");document.head.appendChild(e);var i=e.sheet;i.insertRule("@font-face { font-family: 'tt0173m_'; src: url('./resources/fonts/en/tt0173m_.ttf') format('truetype');font-display:swap }\n",0),i.insertRule("@font-face { font-family: 'tt0503m_'; src: url('./resources/fonts/en/tt0503m_.ttf') format('truetype'); font-display:swap}\n",0),i.insertRule("@font-face { font-family: 't04B25'; src: url('./resources/fonts/04B.ttf') format('truetype'); font-display:swap}",0)},LoginAccountScene}(s.BasicScene)},function(e,i,n){"use strict";n.d(i,"a",(function(){return m}));var a,s=n(2),o=n(4),h=n(798),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function LoginScene(){return e.call(this,{key:s.SceneName.LOGIN_SCENE})||this}return c(LoginScene,e),LoginScene.prototype.preload=function(){this.load.atlas(s.ModuleName.MASK_LOADING_NAME,l.Url.getUIRes(this.dpr,"mask_loading/mask_loading.png"),l.Url.getUIRes(this.dpr,"mask_loading/mask_loading.json"))},LoginScene.prototype.create=function(){(e.prototype.create.call(this),this.render)&&(this.render.uiManager.setScene(this),this.render.showMediator(s.ModuleName.PICA_BOOT_NAME,!0),this.render.gameLoadedCallBack(),this.render.hideLoading(),this.layerManager.addLayer(this,o.BaseLayer,h.a.LAYER_UI,1),this.layerManager.addLayer(this,o.BaseLayer,h.a.LAYER_DIALOG,2))},LoginScene.prototype.init=function(i){e.prototype.init.call(this,i),i&&(this.dpr=i.dpr)},LoginScene.prototype.stop=function(){this.render&&this.render.showMediator("Login",!1),e.prototype.stop.call(this)},LoginScene.prototype.sleep=function(){this.render&&this.render.showMediator("Login",!1)},LoginScene}(o.BasicScene)},function(e,i,n){"use strict";n.d(i,"a",(function(){return l}));var a,s=n(4),o=n(2),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function SelectRoleScene(){return e.call(this,{key:o.SceneName.SELECTROLE_SCENE})||this}return h(SelectRoleScene,e),SelectRoleScene.prototype.preload=function(){},SelectRoleScene.prototype.init=function(e){this.mWorld=e},SelectRoleScene.prototype.create=function(){e.prototype.create.call(this)},Object.defineProperty(SelectRoleScene.prototype,"key",{get:function(){return this.sys.config.key},enumerable:!1,configurable:!0}),SelectRoleScene}(s.BasicScene)},function(e,i,n){"use strict";n.d(i,"a",(function(){return Z}));var a,s,o=n(2),h=n(0),l=n(1012),c=n(4),m=n(1022),f=n(1023),g=n(1024),_=n(1025),T=n(1026),x=n(798),S=n(799),j=n(819),q=n(1027),Y=n(1029),X=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),Z=function(e){function SceneManager(i){var n=e.call(this,i)||this;return n.render.exportProperty(n,n.render,o.ModuleName.SCENEMANAGER_NAME).onceReady((function(){})),n}return X(SceneManager,e),Object.defineProperty(SceneManager.prototype,"currentScene",{get:function(){var e=this.render.game.scene;return e?e.getScene(this.mCurSceneName):null},enumerable:!1,configurable:!0}),SceneManager.prototype.resize=function(e,i){var n=this.render.game.scene;if(!n)return null;var a=this.render.scaleRatio,s=n.getScene(o.SceneName.PLAY_SCENE);s&&s.setScale(a);var h=n.getScene(o.SceneName.MAINUI_SCENE);h&&h.setScale(a)},SceneManager.prototype.getSceneByName=function(e){if(this.render&&this.render.game)return this.render.game.scene.getScene(e)},SceneManager.prototype.showProgress=function(e){var i=this.render.game.scene;if(i){var n=i.getScene(o.SceneName.LOADING_SCENE);if(n&&n.scene.isActive){e*=100;var a=h.StringUtils.format("正在加载资源 {0}",[e.toFixed(0)+"%"]);n.updateProgress(a)}var s=i.getScene(o.SceneName.GAMEPAUSE_SCENE);s&&s.scene.isActive()||i.bringToTop(o.SceneName.LOADING_SCENE)}},SceneManager.prototype.bringToTop=function(e){var i=this.render.game.scene;if(i){var n=i.getScene(e);n&&n.scene.isActive&&i.bringToTop(e)}},SceneManager.prototype.startScene=function(e,i){var n=this.render.game.scene;if(i||(i={render:this.render}),n&&this.sceneClass.hasOwnProperty(e)){if(i.render=this.render,void 0!==i.state)switch(i.state){case o.LoadState.ENTERWORLD:i.text=l.b.enterWorld();break;case o.LoadState.DOWNLOADGAMECONFIG:i.loadProgress="异世界发现中...",i.text=l.b.downloadGameConfig();break;case o.LoadState.DOWNLOADSCENECONFIG:i.loadProgress="构建次元空间...",i.text=l.b.downloadSceneConfig();break;case o.LoadState.LOADINGRESOURCES:i.text=l.b.loadingResources();break;case o.LoadState.LOGINGAME:i.loadProgress="勇者，正在穿越异世界...",i.text=l.b.loginGame();break;case o.LoadState.PARSECONFIG:i.loadProgress="大贤者迪塔装载中...",i.text=l.b.parseConfig();break;case o.LoadState.LOADJSON:i.loadProgress="大贤者杰森装载中...",i.text=l.b.downloadSceneConfig();break;case o.LoadState.WAITENTERROOM:i.loadProgress="大魔术咏唱:真理之门...",i.text=l.b.waitEnterRoom();break;case o.LoadState.CREATESCENE:i.text=l.b.createScene()}this.mCurSceneName&&this.mCurSceneName!==e&&this.currentScene&&(this.currentScene.sceneChange=!0);var a=n.getScene(e);if(a)a.scene.isActive(e)?(i.text&&i.text.length>0&&a.updateProgress(i.text),i.loadProgress&&a.loadProgress(i.loadProgress)):a.wake(i),i.callBack&&i.callBack();else this.render.emitter.once("sceneCreated",(function(){h.Logger.getInstance().debug("sceneCreated===scenemanager"),i.callBack&&i.callBack()}),this),n.add(e,this.sceneClass[e]),n.start(e,i);this.mCurSceneName=e}},SceneManager.prototype.launchScene=function(e,i,n,a){var s=this.render.game.scene;if(a||(a={render:this.render}),s){a.render=this.render;var o=s.getScene(i);this.render.emitter.once("sceneCreated",(function(){a.callBack&&a.callBack()}),this),o||s.add(i,this.sceneClass[n]),e.scene.launch(i,a)}},SceneManager.prototype.stopScene=function(e){var i=this.render.game.scene;if(!i)return Promise.reject("start faild. SceneManager does not exist");if(!this.sceneClass.hasOwnProperty(e))return Promise.reject("className error: "+e);var n=i.getScene(e);n&&(n.stop(),this.render.game.scene.remove(e))},SceneManager.prototype.wakeScene=function(e,i){var n=this.render.game.scene;if(!n)return Promise.reject("start faild. SceneManager does not exist");if(!this.sceneClass.hasOwnProperty(e))return Promise.reject("className error: "+e);var a=n.getScene(e);a&&a.wake(i)},SceneManager.prototype.sleepScene=function(e){if(this.render.game.scene.getScene(e)){var i=this.render.game.scene.getScene(e);i.scene.isActive(e)&&i.sleep()}else h.Logger.getInstance().debug(e+"sleep faild")},SceneManager.prototype.pauseScene=function(e){var i=this.render.game.scene.getScene(e);i?i.scene.pause(e):h.Logger.getInstance().error("scene not found : ",e)},SceneManager.prototype.resumeScene=function(e){var i=this.render.game.scene.getScene(e);i?i.scene.resume(e):h.Logger.getInstance().error("scene not found : ",e)},SceneManager.prototype.remove=function(e){this.render.game.scene.remove(e)},SceneManager.prototype.isActive=function(e){return!!this.render.game.scene.getScene(e)&&this.render.game.scene.getScene(e).scene.isActive()},SceneManager.prototype.destroy=function(){this.mCurSceneName&&(this.mCurSceneName=void 0),this.render&&this.render.hasOwnProperty(o.ModuleName.SCENEMANAGER_NAME)&&delete this.render[o.ModuleName.SCENEMANAGER_NAME],this.mMainScene=void 0},SceneManager.prototype.updateInput=function(e){this.render.game.scene.getScenes().map((function(i){return i.input.enabled=e!==s.Disable}))},SceneManager.prototype.initScene=function(){this.sceneClass={BasicScene:c.BasicScene,CreateRoleScene:m.a,GamePauseScene:f.a,LoadingScene:g.a,LoginAccountScene:_.a,LoginScene:T.a,MainUIScene:x.a,PlayScene:S.a,RoomScene:j.a,SelectRoleScene:q.a,SkyBoxScene:c.SkyBoxScene,BlackScene:Y.a}},SceneManager.prototype.sceneCallback=function(e){return Promise.resolve()},SceneManager}(c.BaseSceneManager);!function(e){e[e.Disable=0]="Disable",e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard",e[e.All=3]="All"}(s||(s={}))},function(e,i,n){"use strict";n.d(i,"a",(function(){return c}));var a,s=n(4),o=n(2),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function BlackScene(){return e.call(this,{key:o.SceneName.BLACK_SCENE})||this}return l(BlackScene,e),BlackScene.prototype.preload=function(){this.load.script("webfont",h.Url.getRes("scripts/webfont/1.6.26/webfont.js"))},BlackScene.prototype.create=function(){e.prototype.create.call(this);try{WebFont.load({custom:{families:["Source Han Sans","tt0173m_","tt0503m_","t04B25"]}})}catch(e){h.Logger.getInstance().warn("webfont failed to load")}var i=this.scale.gameSize.width,n=this.scale.gameSize.height,a=this.render.uiRatio,s=this.add.graphics(void 0);s.fillStyle(0),s.fillRect(0,0,i,n);this.add.text(i/2,n/2,h.i18n.t("blackScene.tips"),{fontSize:12*a,fontFamily:h.Font.DEFULT_FONT}).setOrigin(.5)},BlackScene.prototype.awake=function(){this.scene.wake()},BlackScene.prototype.sleep=function(){this.scene.sleep()},BlackScene}(s.BasicScene)},function(e,i,n){"use strict";n.d(i,"a",(function(){return s}));var a=n(0),s=function(){function EditorModeDebugger(e){this.render=e,this.isDebug=!1,EditorModeDebugger._instance=this}return EditorModeDebugger.getInstance=function(){return EditorModeDebugger._instance||a.Logger.getInstance().error("SortDebugger not created"),EditorModeDebugger._instance},EditorModeDebugger.prototype.getIsDebug=function(){return this.isDebug},EditorModeDebugger.prototype.q=function(){this.isDebug&&this.render.mainPeer.elementsHideReferenceArea(),this.isDebug=!1},EditorModeDebugger.prototype.v=function(){this.isDebug||this.render.mainPeer.elementsShowReferenceArea(),this.isDebug=!0},EditorModeDebugger}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return o}));var a=n(1032),s=n(820),o=function(){function InputManager(e){this.render=e,this.mMouseManager=new s.a(e)}return InputManager.prototype.showJoystick=function(){this.mJoystickManager=new a.a(this.render),this.mJoystickManager.setScene(this.mScene)},InputManager.prototype.setScene=function(e){this.mScene=e,this.mMouseManager.changeScene(e),this.mJoystickManager&&this.mJoystickManager.setScene(e)},InputManager.prototype.resize=function(e,i){this.mMouseManager.resize(e,i)},InputManager.prototype.update=function(e,i){},InputManager.prototype.destroy=function(){this.mMouseManager&&this.mMouseManager.destroy(),this.mJoystickManager&&this.mJoystickManager.destroy()},InputManager.prototype.changeMouseManager=function(e){this.mMouseManager&&this.mMouseManager.destroy(),this.mMouseManager=e,this.mScene&&this.mMouseManager.changeScene(this.mScene)},InputManager}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return h}));var a,s=n(3),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function JoystickManager(i){var n=e.call(this)||this;return n.render=i,n.mScaleRatio=i.scaleRatio,n.mJoystick=n.render.mainPeer.JoystickManager,n}return o(JoystickManager,e),JoystickManager.prototype.setScene=function(e){this.scene=e,e&&this.onListener()},JoystickManager.prototype.onListener=function(){this.scene.input.on("pointerdown",this.onDownHandler,this),this.scene.input.on("pointerup",this.onUpHandler,this)},JoystickManager.prototype.offListener=function(){this.scene.input.off("pointermove",this.onPointerMoveHandler,this),this.scene.input.off("pointerdown",this.onDownHandler,this),this.scene.input.off("pointerup",this.onUpHandler,this)},JoystickManager.prototype.destroy=function(){this.offListener()},JoystickManager.prototype.onPointerMoveHandler=function(e){this.calcAngle(e)},JoystickManager.prototype.onDownHandler=function(e){this.scene.input.on("pointermove",this.onPointerMoveHandler,this),this.calcAngle(e),this.start()},JoystickManager.prototype.onUpHandler=function(e){this.scene.input.off("pointermove",this.onPointerMoveHandler,this),(e.downX-e.upX>10*this.mScaleRatio||Math.abs(e.downY-e.upY)>10*this.mScaleRatio)&&this.stop()},JoystickManager.prototype.calcAngle=function(e){this.mJoystick&&this.mJoystick.calcAngle(Math.ceil(e.worldX/this.mScaleRatio),Math.ceil(e.worldY/this.mScaleRatio))},JoystickManager.prototype.start=function(){this.mJoystick&&this.mJoystick.start()},JoystickManager.prototype.stop=function(){this.mJoystick&&this.mJoystick.stop()},JoystickManager}(s.PacketHandler)},function(e,i,n){"use strict";n.r(i),n.d(i,"normalizePatchesConfig",(function(){return normalizePatchesConfig}));var normalizePatchesConfig=function(e){return e.bottom=void 0!==e.bottom?e.bottom:e.top,e.left=void 0!==e.left?e.left:e.top,e.right=void 0!==e.right?e.right:e.left,e}},function(e,i,n){var a={"./":806,"./bag":811,"./bag/":811,"./bag/IListItemRender":921,"./bag/IListItemRender.ts":921,"./bag/bagView/bagPanel":922,"./bag/bagView/bagPanel.ts":922,"./bag/basebag":919,"./bag/basebag.ts":919,"./bag/baseitem":920,"./bag/baseitem.ts":920,"./bag/index":811,"./bag/index.ts":811,"./bag/storage/storagePanel":923,"./bag/storage/storagePanel.ts":923,"./components":797,"./components/":797,"./components/TextButton":897,"./components/TextButton.ts":897,"./components/alert.view":901,"./components/alert.view.ts":901,"./components/background.scale.button":911,"./components/background.scale.button.ts":911,"./components/base.batch.panel":899,"./components/base.batch.panel.ts":899,"./components/base.panel":822,"./components/base.panel.ts":822,"./components/button.event.dispatch":802,"./components/button.event.dispatch.ts":802,"./components/checkbox.group":896,"./components/checkbox.group.ts":896,"./components/checkbox.toggle":917,"./components/checkbox.toggle.ts":917,"./components/dragDropIcon":825,"./components/dragDropIcon.ts":825,"./components/dynamic.image":71,"./components/dynamic.image.ts":71,"./components/dynamic.ninepatch":818,"./components/dynamic.ninepatch.ts":818,"./components/dynamic.sprite":894,"./components/dynamic.sprite.ts":894,"./components/grid.layout.group":906,"./components/grid.layout.group.ts":906,"./components/icon.btn":826,"./components/icon.btn.ts":826,"./components/icon.select.btn":909,"./components/icon.select.btn.ts":909,"./components/idragable":907,"./components/idragable.ts":907,"./components/idropable":908,"./components/idropable.ts":908,"./components/index":797,"./components/index.ts":797,"./components/input.field":916,"./components/input.field.ts":916,"./components/input.panel":895,"./components/input.panel.ts":895,"./components/item.slot":810,"./components/item.slot.ts":810,"./components/label.input":898,"./components/label.input.ts":898,"./components/material.item":910,"./components/material.item.ts":910,"./components/nine.patch":801,"./components/nine.patch.ts":801,"./components/ninepatch.button":900,"./components/ninepatch.button.ts":900,"./components/patches.config":1033,"./components/patches.config.ts":1033,"./components/progress.mask.bar":827,"./components/progress.mask.bar.ts":827,"./components/progress.three.bar":913,"./components/progress.three.bar.ts":913,"./components/progress.three.mask.bar":912,"./components/progress.three.mask.bar.ts":912,"./components/prop.item":824,"./components/prop.item.ts":824,"./components/soundButton":823,"./components/soundButton.ts":823,"./components/tap":821,"./components/tap.ts":821,"./components/texture.sprite":915,"./components/texture.sprite.ts":915,"./components/three.button":903,"./components/three.button.ts":903,"./components/three.slice.path":809,"./components/three.slice.path.ts":809,"./components/tips":924,"./components/tips/":924,"./components/tips/ItemInfoTips":902,"./components/tips/ItemInfoTips.ts":902,"./components/tips/TextToolTip":807,"./components/tips/TextToolTip.ts":807,"./components/tips/index":924,"./components/tips/index.ts":924,"./components/tips/itoolTip":808,"./components/tips/itoolTip.ts":808,"./components/tips/toolTip":800,"./components/tips/toolTip.ts":800,"./components/toggle.button":828,"./components/toggle.button.ts":828,"./components/toggle.color.button":914,"./components/toggle.color.button.ts":914,"./components/tween.compent":904,"./components/tween.compent.ts":904,"./components/value.container":905,"./components/value.container.ts":905,"./index":806,"./index.ts":806,"./rank/basicRankPanel":1035,"./rank/basicRankPanel.ts":1035,"./rank/rankPanel":925,"./rank/rankPanel.ts":925,"./ui.manager":918,"./ui.manager.ts":918};function webpackContext(e){var i=webpackContextResolve(e);return n(i)}function webpackContextResolve(e){if(!n.o(a,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return a[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(a)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=1034},function(e,i,n){"use strict";n.r(i),n.d(i,"BasicRankPanel",(function(){return c}));var a,s=n(0),o=n(822),h=n(801),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function BasicRankPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.mTexts=[],n.disInteractive(),n}return l(BasicRankPanel,e),BasicRankPanel.prototype.addItem=function(e){if(this.setData("data",e),this.mInitialized){this.clearText();var i=e.text;if(i&&!(i.length<1)){this.mTitleLabel&&(this.mTitleLabel.setText(i[0].text),this.mTitleLabel.setData("node",i[0].node));for(var n=[-this.width/2+15,-this.width/2+63,-this.width/2+241],a=0,o=1;o<4;o++){a=(h=this.scene.make.text({x:n[o-1],y:-this.height/2+22,text:i?i[o].text:"123",style:{font:s.Font.YAHEI_16_BOLD}},!1)).y,h.setData("node",i[o].node),h.setStroke("#000000",2),this.mChildContainer.add(h),this.mTexts.push(h)}a+=20;for(o=4;o<i.length;o++){var h,l=i[o],c=(o-4)%3,m=22*Math.floor((o-4)/3);(h=this.scene.make.text({x:n[c],y:a+m,text:l?l.text:"123",style:{font:s.Font.YAHEI_14_BOLD}},!1)).setData("node",l.node),h.setStroke("#000000",2),this.mChildContainer.add(h),this.mTexts.push(h)}}}},BasicRankPanel.prototype.tweenView=function(e){},BasicRankPanel.prototype.update=function(e){this.addItem(e)},BasicRankPanel.prototype.destroy=function(){this.mBackground&&this.mBackground.destroy();for(var i=this.mTexts.length,n=0;n<i;n++){var a=this.mTexts[n];a&&(a.destroy(!0),a=null)}this.mTitleLabel&&this.mTitleLabel.destroy(!0),this.mTexts=[],this.mBackground=null,this.mTitleLabel=null,e.prototype.destroy.call(this)},BasicRankPanel.prototype.preload=function(){this.scene.load.image(s.Background.getName(),s.Background.getPNG()),this.scene.load.image(s.Border.getName(),s.Border.getPNG()),this.scene.load.atlas("clsBtn",s.Url.getRes("ui/common/common_clsBtn.png"),s.Url.getRes("ui/common/common_clsBtn.json")),this.scene.load.atlas("rank_atlas",s.Url.getRes("ui/rank/rank_atlas.png"),s.Url.getRes("ui/rank/rank_atlas.json")),e.prototype.preload.call(this)},BasicRankPanel.prototype.init=function(){if(!this.mInitialized){this.setSize(328,361),this.mBackground=new h.NinePatch(this.scene,0,0,328,361,s.Background.getName(),null,s.Background.getConfig()),this.add(this.mBackground),this.mChildContainer=this.scene.make.container({},!1),this.add(this.mChildContainer);var i=new h.NinePatch(this.scene,0,0,315,318,s.Border.getName(),null,s.Border.getConfig());this.mChildContainer.add(i);var n=this.scene.make.image({x:-this.width/2+20,y:-this.height/2-12,key:"rank_atlas",frame:"icon.png"},!1).setOrigin(0,0);this.add(n),this.mTitleLabel=this.scene.make.text({x:-this.width/2+54,y:-this.height/2-10,text:"排行榜",style:{font:s.Font.YAHEI_20_BOLD}}).setOrigin(0,0).setStroke("#000000",2),this.add(this.mTitleLabel),e.prototype.init.call(this)}},BasicRankPanel.prototype.clearText=function(){for(var e=0,i=this.mTexts;e<i.length;e++){i[e].destroy()}this.mTexts.length=0},BasicRankPanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaLevelUpEffectPanel",(function(){return l}));var a,s=n(790),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function PicaLevelUpEffectPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.effectQueue=[],h.isPlaying=!1,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h}return h(PicaLevelUpEffectPanel,e),PicaLevelUpEffectPanel.prototype.resize=function(e,i){this.setSize(e,i);var n=e,a=370*this.dpr;this.maskBlack.fillStyle(0,1),this.maskBlack.fillRect(0,0,n,a);var s=.5*-this.height+0*this.dpr;this.maskBlack.y=0*this.dpr/this.zoom,this.maskBlack.x=0,this.content.y=s+a,this.tipCon.x=.5*-this.width,this.tipCon.y=s+.8*a-65*this.dpr+.5*this.tipCon.height,this.content.visible=!1,this.tipCon.visible=!1},PicaLevelUpEffectPanel.prototype.setHandler=function(e){this.sendHander=e},PicaLevelUpEffectPanel.prototype.setLevelUpData=function(e){for(var i=0,n=e;i<n.length;i++){for(var a=n[i],s=!1,o=0,h=this.effectQueue;o<h.length;o++){var l=h[o];a.level===l.level&&(s=!0)}s||this.effectQueue.push(a)}this.playNext()},PicaLevelUpEffectPanel.prototype.playNext=function(){var e=this;if(!this.isPlaying)if(this.effectQueue.length>0){this.visible=!0;var i=this.effectQueue.shift();this.tipTex.text=i.tips,this.levelTex.text=i.level+"";this.dpr;var n=370*this.dpr,a=.5*-this.height+0*this.dpr,s=a+.8*n,h=a+.5*n-70*this.dpr;o.UIHelper.playtPosYTween(this.scene,this.content,s,h,300,"Bounce.easeOut",0,new o.Handler(this,(function(){e.lightSprite.play("light"),e.lightSprite.visible=!0,setTimeout((function(){if(e.scene){e.tipCon.visible=!1;var i=.5*-e.width;e.tipCon.x=i,o.UIHelper.playtPosXTween(e.scene,e.tipCon,i,0,200,"Bounce.easeOut")}}),900)}))),this.wingSprite.play("wing"),this.content.visible=!0,this.isPlaying=!0}else this.sendHander&&this.sendHander.run()},PicaLevelUpEffectPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.maskBlack.destroy()},PicaLevelUpEffectPanel.prototype.init=function(){this.content=this.scene.make.container(void 0,!1),this.add(this.content),this.maskBlack=this.scene.make.graphics(void 0,!1),this.content.setMask(this.maskBlack.createGeometryMask()),this.lightSprite=this.createSprite(s.d.effectlevelup,"light","lv_light_0",[1,2],3,-1).setOrigin(.5),this.yuSprite=this.createSprite(s.d.effectlevelup,"eclosion","lv_eclosion_0",[1,4],7,2),this.yuSprite.on(Phaser.Animations.Events.SPRITE_ANIMATION_COMPLETE,this.onYuAniComplHandler,this),this.wingSprite=this.createSprite(s.d.effectlevelup,"wing","lv_wing_0",[1,2,3,4,5,6,7,8,9,8,7,6,5,4],7),this.wingSprite.on(Phaser.Animations.Events.SPRITE_ANIMATION_UPDATE,this.onWingAniHandler,this),this.levelbg=this.scene.make.image({key:s.d.effectlevelup,frame:"lv_prospect"}),this.levelTex=this.scene.make.text({style:o.UIHelper.whiteStyle(this.dpr,30)}).setOrigin(.5),this.levelTex.setFontStyle("bold"),this.levelTex.y=10*this.dpr,this.tipCon=this.scene.make.container(void 0,!1);var e=this.scene.make.image({key:s.d.effectlevelup,frame:"lv_Unlock_bg"});this.tipTex=this.scene.make.text({style:o.UIHelper.yellowStyle(this.dpr)}).setOrigin(.5),this.tipCon.add([e,this.tipTex]),this.tipCon.visible=!1,this.tipCon.setSize(e.width,e.height),this.content.add([this.lightSprite,this.yuSprite,this.wingSprite,this.levelbg,this.levelTex]),this.add(this.tipCon),this.resize(this.width,this.height),this.lightSprite.visible=!1,this.yuSprite.visible=!1},PicaLevelUpEffectPanel.prototype.createSprite=function(e,i,n,a,s,o){void 0===s&&(s=30),void 0===o&&(o=0);var h=this.scene.make.sprite({key:e,frame:n+"1"});return a.length<=2?this.scene.anims.create({key:i,frames:this.scene.anims.generateFrameNames(e,{prefix:n+"",start:a[0],end:a[1]}),frameRate:s,repeat:o}):this.scene.anims.create({key:i,frames:this.scene.anims.generateFrameNames(e,{prefix:n+"",frames:a}),frameRate:s,repeat:o}),h},PicaLevelUpEffectPanel.prototype.onWingAniHandler=function(e,i,n){"lv_wing_09"===i.textureFrame&&(this.yuSprite.alpha=1,this.yuSprite.play("eclosion"),this.yuSprite.visible=!0)},PicaLevelUpEffectPanel.prototype.onYuAniComplHandler=function(){var e=this;o.UIHelper.playAlphaTween(this.scene,this.yuSprite,1,0,200,"Linear"),o.UIHelper.playAlphaTween(this.scene,this,1,0,200,"Linear",2200,new o.Handler(this,(function(){e.visible=!1,e.alpha=1,e.tipCon.visible=!1,e.content.visible=!1,e.lightSprite.visible=!1,e.yuSprite.visible=!1,e.isPlaying=!1,e.playNext()})))},PicaLevelUpEffectPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"Item",(function(){return l}));var a,s=n(789),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function Item(i){var n=e.call(this,i)||this,a=i.make.image({key:"prop_background"}).setOrigin(0,0);return n.setSize(a.width,a.height),n.add(a),n.mImage=new s.DynamicImage(n.scene,0,0).setOrigin(0,0),n.add(n.mImage),n.mCount=i.make.text(void 0,!1),n.mCount.setAlign("right"),n.mCount.y=n.height-20,n.add(n.mCount),n}return h(Item,e),Item.prototype.setProp=function(e){var i=this;this.mProp=e,this.mCount&&e&&(this.mImage.load(o.Url.getOsdRes(e.texturePath),this,(function(){i.mImage.setInteractive(),i.scene.input.setDraggable(i.mImage);var e=1;i.mImage.width>i.width&&(e=i.width/i.mImage.width),i.mImage.height>i.height&&(e=i.height/i.mImage.height),i.mImage.scale=e})),this.mCount.setText(e.count>1?e.count.toString():""),this.mCount.x=this.width-this.mCount.width)},Item.prototype.clear=function(){this.count&&this.mProp&&(this.mCount.setText(""),this.mImage.setTexture(void 0),this.mImage.off("pointerup",this.onPointerUpHandler,this),this.mProp=void 0)},Item.prototype.destroy=function(){this.clear(),e.prototype.destroy.call(this)},Object.defineProperty(Item.prototype,"prop",{get:function(){return this.mProp},enumerable:!1,configurable:!0}),Item.prototype.onPointerUpHandler=function(){this.emit("click",this.mProp)},Item}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaFuriniDetailPanel",(function(){return f}));var a,s=n(795),o=n(788),h=n(0),l=n(790),c=n(796),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaFuriniDetailPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.setSize(a,s),l.dpr=o,l.zoom=h,l.render=n,l.setInteractive(),l.init(),l}return m(PicaFuriniDetailPanel,e),PicaFuriniDetailPanel.prototype.resize=function(e,i){e=e||this.width,i=i||this.height,this.setSize(e,i),this.maskGraphic.clear(),this.maskGraphic.fillStyle(4121087);var n=(this.width-20*this.dpr)*this.zoom,a=150*this.dpr*this.zoom;this.maskGraphic.fillRect(.5*-n,.5*-a,n,a)},PicaFuriniDetailPanel.prototype.refreshMask=function(){var e=this.mDetailDisplay.getWorldTransformMatrix();this.maskGraphic.x=e.tx,this.maskGraphic.y=e.ty},PicaFuriniDetailPanel.prototype.init=function(){var e=1.5*this.width,i=3*this.height;this.backgrand=this.scene.make.graphics(void 0,!1),this.backgrand.fillStyle(0,.66),this.backgrand.fillRect(.5*-e,.5*-i,e,i),this.backgrand.setInteractive(new Phaser.Geom.Rectangle(.5*-e,.5*-i,e,i),Phaser.Geom.Rectangle.Contains);var n=new o.NineSlicePatch(this.scene,0,0,this.width,this.height,l.d.uicommon1,"bg",{left:20*this.dpr,top:20*this.dpr,right:30*this.dpr,bottom:40*this.dpr});this.closeButton=new o.Button(this.scene,l.d.uicommon,"close"),this.closeButton.x=.5*this.width-.5*this.closeButton.width+10*this.dpr,this.closeButton.y=.5*-this.height+.5*this.closeButton.height-10*this.dpr,this.closeButton.on(o.ClickEvent.Tap,this.onCloseHandler,this);var a=.5*-n.height+3*this.dpr,c=this.scene.make.image({x:0,y:a,key:l.d.uicommon1,frame:"title"});c.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titleName=this.scene.make.text({x:0,y:a+3*this.dpr,text:h.i18n.t("illustrate.furindetail"),style:h.UIHelper.colorStyle("#905B06",16*this.dpr)},!1).setOrigin(.5),this.titleName.setFontStyle("bold"),this.codeName=this.scene.make.text({x:.5*this.width-25*this.dpr,y:a+40*this.dpr,style:h.UIHelper.colorStyle("#205BBC",12*this.dpr)},!1).setOrigin(1,.5),this.mDetailDisplay=new s.DetailDisplay(this.scene,this.render),this.mDetailDisplay.setFixedScale(this.dpr/this.scale),this.mDetailDisplay.y=-60*this.dpr,this.maskGraphic=this.scene.make.graphics(void 0,!1),this.mDetailDisplay.mask=this.maskGraphic.createGeometryMask(),this.starImg=this.scene.make.image({key:l.d.uicommon,frame:"bag_star_big_1"}),this.starImg.y=50*this.dpr,this.bottomBg=this.scene.make.graphics(void 0,!1),this.bottomBg.clear(),this.bottomBg.fillStyle(5427711,.22);var m=293*this.dpr,f=78*this.dpr;this.bottomBg.fillRoundedRect(.5*-m,.5*-f,m,f),this.bottomBg.y=.5*this.height-.5*f-25*this.dpr,this.furinName=this.scene.make.text({style:h.UIHelper.colorStyle("#205BBC",15*this.dpr)}).setOrigin(0,.5),this.furinName.x=.5*-m+10*this.dpr,this.furinName.y=this.bottomBg.y-.5*f+18*this.dpr,this.furiDes=this.scene.make.text({style:h.UIHelper.colorStyle("#000000",11*this.dpr)}).setOrigin(0,.5),this.furiDes.setWordWrapWidth(m-10*this.dpr,!0),this.furiDes.x=this.furinName.x,this.furiDes.y=this.furinName.y+25*this.dpr,this.add([this.backgrand,n,c,this.titleName,this.closeButton,this.codeName,this.mDetailDisplay,this.starImg,this.bottomBg,this.furinName,this.furiDes]),this.resize(0,0)},PicaFuriniDetailPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.maskGraphic.destroy()},PicaFuriniDetailPanel.prototype.setProp=function(e){this.itemData=e,this.codeName.text=e.code,this.furinName.text=e.name,this.furiDes.text=e.des,this.starImg.setFrame("bag_star_big_"+e.grade),this.setResource(e)},PicaFuriniDetailPanel.prototype.setHandler=function(e){this.send=e},PicaFuriniDetailPanel.prototype.setResource=function(e){var i=e.serializeString?e.elepi:e;c.l.showDetailDisplay({display:this.mDetailDisplay,dpr:this.dpr,data:i,render:this.render,sn:e.sn,itemid:e.id,serialize:e.serializeString})},PicaFuriniDetailPanel.prototype.onCloseHandler=function(){this.send&&this.send.run()},PicaFuriniDetailPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaIllustratedDetailPanel",(function(){return _}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(791),m=n(1040),f=n(1041),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaIllustratedDetailPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.minit=!1,h.redMap=new Map,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h.setInteractive(),h}return g(PicaIllustratedDetailPanel,e),PicaIllustratedDetailPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height,s=20*this.dpr;this.topCon.y=.5*-this.height+.5*this.topCon.height+s,this.horProgress.refreshMask(),this.setSize(n,a),this.layoutOption(this.optionType),this.minit=!0},PicaIllustratedDetailPanel.prototype.setHandler=function(e){this.send=e},PicaIllustratedDetailPanel.prototype.setGallaryData=function(e,i){(e||i)&&(this.galleryData=e,this.combinations=i,1===this.optionType?e&&(this.setHorRewardsStatus(e.reward1Progress,e.reward1Max),-1===e.reward2Max?(e.reward2Max=e.reward2Progress,this.acquire.enable=!1):e.reward2Progress>=e.reward2Max?this.acquire.enable=!0:this.acquire.enable=!1,this.acquireTex.text=e.reward2Progress+"/"+e.reward2Max,this.acquireImg.setFrame("illustrate_badge_icon_"+e.reward2NextIndex),this.horLevelTex.text=e.reward1NextIndex+"",this.galleryPanel.setGallaryData(e)):2===this.optionType&&this.collectPanel.setCombinationData(i))},PicaIllustratedDetailPanel.prototype.setHorRewardsStatus=function(e,i){-1===i?(i=e,this.horRewards.setFrameNormal("illustrate_survey_icon_1","illustrate_survey_icon_1"),this.horRewards.disInteractive()):e>=i?(this.horRewards.setFrameNormal("illustrate_survey_icon","illustrate_survey_icon"),this.horRewards.setInteractive()):(this.horRewards.setFrameNormal("illustrate_survey_icon_2","illustrate_survey_icon_2"),this.horRewards.disInteractive()),this.horProgress.setProgress(e,i),this.horProgress.setText(e+" / "+i)},PicaIllustratedDetailPanel.prototype.setDoneMissionList=function(e){this.collectPanel&&this.collectPanel.setDoneMissionList(e)},PicaIllustratedDetailPanel.prototype.setRedsState=function(e){this.redMap.forEach((function(i,n){i.visible=-1!==e.indexOf(n)}))},PicaIllustratedDetailPanel.prototype.init=function(){this.topCon=this.scene.make.container(void 0,!1),this.topCon.setSize(this.width,100*this.dpr),this.acquire=new o.ButtonEventDispatcher(this.scene,0,0,!0),this.acquire.setSize(42*this.dpr,38*this.dpr),this.acquire.enable=!0,this.acquire.on(s.ClickEvent.Tap,this.onAcquireRewardsHandler,this),this.acquireImg=this.scene.make.image({key:h.d.illustrate,frame:"illustrate_badge_icon_1"}),this.acquireTex=this.scene.make.text({style:l.UIHelper.whiteStyle(this.dpr,10)}).setOrigin(.5),this.acquireTex.setStroke("#26365A",2*this.dpr),this.acquireTex.y=this.acquireImg.y+.5*this.acquireImg.height+3*this.dpr,this.acquire.add([this.acquireImg,this.acquireTex]),this.acquire.x=.5*this.topCon.width-.5*this.acquire.width-20*this.dpr,this.acquire.y=.5*-this.topCon.height+.5*this.acquire.height+15*this.dpr,this.toggleCon=this.scene.make.container(void 0,!1),this.selectLine=this.scene.make.image({key:h.d.illustrate,frame:"illustrate_nav_select"}),this.toggleCon.add(this.selectLine),this.toggleCon.y=0,this.horProgress=new o.ProgressMaskBar(this.scene,h.d.illustrate,"illustrate_survey_lv_bottom","illustrate_survey_lv_top",l.UIHelper.whiteStyle(this.dpr,6)),this.horProgress.y=this.toggleCon.y+.5*this.toggleCon.height+50*this.dpr,this.horProgress.x=-5*this.dpr,this.levelBg=this.scene.make.image({key:h.d.illustrate,frame:"illustrate_survey_lv_icon"}),this.levelBg.x=this.horProgress.x-.5*this.horProgress.width-.5*this.levelBg.width-8*this.dpr,this.levelBg.y=this.horProgress.y,this.horLevelTex=this.scene.make.text({style:l.UIHelper.whiteStyle(this.dpr,12)}).setOrigin(.5),this.horLevelTex.setFontStyle("bold"),this.horLevelTex.x=this.levelBg.x,this.horLevelTex.y=this.levelBg.y,this.horRewards=new s.Button(this.scene,h.d.illustrate,"illustrate_survey_icon","illustrate_survey_icon"),this.horRewards.x=this.horProgress.x+.5*this.horProgress.width+5*this.dpr+.5*this.horRewards.width,this.horRewards.y=this.horProgress.y,this.horRewards.on(s.ClickEvent.Tap,this.onHorRewardsHandler,this),this.topCon.add([this.acquire,this.toggleCon,this.horProgress,this.levelBg,this.horLevelTex,this.horRewards]),this.createOptionButtons();var e=.5*this.height-this.topCon.y-.5*this.topCon.height;this.galleryPanel=new m.PicaIllustratedGalleryPanel(this.scene,this.width-20*this.dpr,e-23*this.dpr,this.dpr,this.zoom),this.collectPanel=new f.PicaIllustredCollectPanel(this.scene,this.width,e-13*this.dpr,this.dpr,this.zoom),this.galleryPanel.setHandler(new l.Handler(this,this.onCollectHandler)),this.collectPanel.setHandler(new l.Handler(this,this.onCollectHandler)),this.collectPanel.visible=!1,this.galleryPanel.visible=!1,this.add([this.topCon,this.galleryPanel,this.collectPanel]),this.resize()},PicaIllustratedDetailPanel.prototype.createOptionButtons=function(){for(var e=[{text:l.i18n.t("illustrate.title"),type:1},{text:l.i18n.t("illustrate.collect"),type:2}],i=120*this.dpr,n=i/e.length,a=20*this.dpr,h=-i/2,c=0;c<e.length;c++){var m=e[c],f=new o.ToggleColorButton(this.scene,n,20*this.dpr,this.dpr,m.text,l.UIHelper.colorStyle("#ffffff",14*this.dpr));f.on(s.ClickEvent.Tap,this.onToggleButtonHandler,this),f.x=h+.5*n,f.setData("item",m.type),f.setSize(n,a),this.toggleCon.add(f),f.setChangeColor("#FFF449"),f.setNormalColor("#ffffff"),f.setFontStyle("bold"),h+=n,this.curToggle||this.onToggleButtonHandler(void 0,f)}this.selectLine.y=20*this.dpr},PicaIllustratedDetailPanel.prototype.onToggleButtonHandler=function(e,i){this.curToggle!==i&&(this.curToggle&&(this.curToggle.isOn=!1),i.isOn=!0,this.curToggle=i,this.optionType=i.getData("item"),this.selectLine.x=i.x,this.minit&&(this.layoutOption(this.optionType),this.setGallaryData(this.galleryData,this.combinations)))},PicaIllustratedDetailPanel.prototype.layoutOption=function(e){var i=.5*this.height-this.topCon.y-.5*this.topCon.height,n=30*this.dpr;if(1===e){this.acquire.visible=!0,this.levelBg.visible=!0,this.horLevelTex.visible=!0,this.horRewards.visible=!0,this.horProgress.visible=!0,i-=23*this.dpr,n=30*this.dpr,this.collectPanel.visible=!1,this.galleryPanel.visible=!0;var a=this.topCon.y+.5*this.topCon.height+.5*i+n;this.galleryPanel.y=a,this.galleryPanel.resize(this.width-20*this.dpr,i)}else if(2===e){this.acquire.visible=!1,this.levelBg.visible=!1,this.horLevelTex.visible=!1,this.horRewards.visible=!1,this.horProgress.visible=!1,i+=40*this.dpr,n=-10*this.dpr,this.galleryPanel.visible=!1,this.collectPanel.visible=!0;a=this.topCon.y+.5*this.topCon.height+.5*i+n;this.collectPanel.y=a,this.collectPanel.resize(this.width,i)}},PicaIllustratedDetailPanel.prototype.onHorRewardsHandler=function(){this.send&&this.send.runWith(["rewards",1])},PicaIllustratedDetailPanel.prototype.onAcquireRewardsHandler=function(){this.send&&this.send.runWith(["rewards",2])},PicaIllustratedDetailPanel.prototype.onSelectItemHandler=function(e){e.showTips()},PicaIllustratedDetailPanel.prototype.onCollectHandler=function(e,i){this.send&&this.send.runWith([e,i])},PicaIllustratedDetailPanel.prototype.onGalleryHandler=function(e,i){this.send&&this.send.runWith([e,i])},PicaIllustratedDetailPanel}(Phaser.GameObjects.Container);!function(e){function IllustratedItem(i,n,a,s,o){var c=e.call(this,i,void 0,void 0,s,o,!1)||this;c.setSize(n,a),c.codeTex=c.scene.make.text({style:l.UIHelper.whiteStyle(s,10)}).setOrigin(0,.5),c.codeTex.x=.5*-c.width+9*s,c.codeTex.y=.5*c.height-4*s,c.star=c.scene.make.image({key:h.d.illustrate,frame:"illustrate_survey_star_empty"}),c.star.x=.5*c.width-.5*c.star.width-2*s,c.star.y=c.codeTex.y,c.star.visible=!1,c.surveyImg=c.scene.make.image({key:h.d.illustrate,frame:"illustrate_survey_nohave"}),c.add([c.codeTex,c.star]);for(var m=0,f=c.list;m<f.length;m++){f[m].y-=10*s}return c}g(IllustratedItem,e),IllustratedItem.prototype.setItemData=function(i){if(e.prototype.setItemData.call(this,i,!1),i){this.codeTex.text=i.code;var n=i.status;this.surveyImg.visible=1===n}}}(c.ItemButton)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaIllustratedGalleryPanel",(function(){return l}));var a,s=n(788),o=n(972),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function PicaIllustratedGalleryPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h.setInteractive(),h}return h(PicaIllustratedGalleryPanel,e),PicaIllustratedGalleryPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),this.mGameGrid.setSize(n,a),this.mGameGrid.resetMask()},PicaIllustratedGalleryPanel.prototype.setHandler=function(e){this.send=e},PicaIllustratedGalleryPanel.prototype.setGallaryData=function(e){e&&(this.galleryData=e,this.mGameGrid.setItems(e.list))},PicaIllustratedGalleryPanel.prototype.init=function(){var e=this,i=this.height,n=87*this.dpr,a=92*this.dpr,h={x:0,y:0,table:{width:this.width,height:i,columns:4,cellWidth:n,cellHeight:a,reuseCellContainer:!0,cellPadX:-5*this.dpr,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,s){i.scene,e.mGameGrid.items.length,i.index;var h=i.item;return null===s&&(s=new o.IllustratedItem(e.scene,n,a,e.dpr,e.zoom)),s.setItemData(h),s}};this.mGameGrid=new s.GameGridTable(this.scene,h),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",(function(i){e.onSelectItemHandler(i)})),this.add(this.mGameGrid),this.resize()},PicaIllustratedGalleryPanel.prototype.onSelectItemHandler=function(e){this.send&&this.send.runWith(["furidetail",e.itemData])},PicaIllustratedGalleryPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaIllustredCollectPanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(972),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaIllustredCollectPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.doneMissions=[],h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h.setInteractive(),h}return m(PicaIllustredCollectPanel,e),PicaIllustredCollectPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),this.mGameGrid.setSize(n,a),this.mGameGrid.resetMask()},PicaIllustredCollectPanel.prototype.setHandler=function(e){this.send=e},PicaIllustredCollectPanel.prototype.setCombinationData=function(e){this.mGameGrid.setItems(e);for(var i=this.getCellsHeights(e),n=0;n<i.length;n++){i[n];var a=this.mGameGrid.getCell(n);a.setHeight(i[a.index])}return this.mGameGrid.layout(),this.mGameGrid.setT(0),i},PicaIllustredCollectPanel.prototype.setDoneMissionList=function(e){e&&(this.doneMissions=e),this.mGameGrid.refresh()},PicaIllustredCollectPanel.prototype.init=function(){var e=this,i=this.height,n=326*this.dpr,a=100*this.dpr,o={x:15*this.dpr,y:0,table:{width:this.width,height:i,columns:1,cellWidth:n,cellHeight:a,reuseCellContainer:!0,cellPadX:0*this.dpr,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,s){i.scene,e.mGameGrid.items.length,i.index;var o=i.item;null===s&&(s=new g(e.scene,n,a,e.dpr,e.zoom)).setHandler(e.send);var h=!1;return-1!==e.doneMissions.indexOf(o.id)&&(h=!0),s.setCombinationData(o,h),i.setHeight(s.height),s}};this.mGameGrid=new s.GameGridTable(this.scene,o),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",(function(i){e.onSelectItemHandler(i)})),this.add(this.mGameGrid),this.resize()},PicaIllustredCollectPanel.prototype.onSelectItemHandler=function(e){e.checkExtendRect()},PicaIllustredCollectPanel.prototype.getCellsHeights=function(e){for(var i=[],n=0,a=e;n<a.length;n++){var s=a[n].requirement,o=78*this.dpr;o+=92*Math.ceil(s.length/4)*this.dpr,i.push(o)}return i},PicaIllustredCollectPanel}(Phaser.GameObjects.Container),g=function(e){function IllustratedCollectItem(i,n,a,c,m){var f=e.call(this,i)||this;f.isTooqingContainerLite=!0,f.iscallRewards=!1,f.setSize(n,a),f.dpr=c,f.zoom=m,f.background=f.scene.make.graphics(void 0,!1),f.background.clear(),f.background.fillStyle(6211327,1),f.background.fillRoundedRect(.5*-n,.5*-a,n,a,5*c),f.topCon=f.scene.make.container(void 0,!1),f.topCon.setSize(f.width,58*f.dpr),f.titleTex=f.scene.make.text({style:l.UIHelper.whiteStyle(c)}).setOrigin(0,.5),f.titleTex.x=.5*-f.topCon.width+10*c,f.titleTex.y=.5*-f.topCon.height+20*c,f.titleTex.setFontStyle("bold"),f.desTex=f.scene.make.text({style:l.UIHelper.colorStyle("#006ED4",10*c)}).setOrigin(0,.5),f.desTex.x=f.titleTex.x,f.desTex.y=f.titleTex.y+20*c,f.progress=new o.ProgressMaskBar(f.scene,h.d.illustrate,"illustrate_survey_lv_bottom","illustrate_survey_lv_top",l.UIHelper.whiteStyle(f.dpr,8)),f.progress.y=f.desTex.y+.5*f.progress.height+15*f.dpr,f.progress.x=-20*f.dpr,f.rewardsBtn=new s.Button(f.scene,h.d.illustrate,"illustrate_survey_icon","illustrate_survey_icon"),f.rewardsBtn.x=f.progress.x+.5*f.progress.width+10*f.dpr+.5*f.rewardsBtn.width,f.rewardsBtn.y=f.progress.y-.5*f.rewardsBtn.height,f.rewardsBtn.on(s.ClickEvent.Tap,f.onRewardsHandler,f),f.topCon.add([f.titleTex,f.desTex,f.progress,f.rewardsBtn]);var g=305*f.dpr,_=f.height-f.topCon.height;return f.gridLayout=new o.GridLayoutGroup(f.scene,g,_,{cellSize:new Phaser.Math.Vector2(87*f.dpr,92*f.dpr),space:new Phaser.Math.Vector2(-10*c,0*f.dpr),startAxis:o.AxisType.Horizontal,constraint:o.ConstraintType.FixedColumnCount,constraintCount:4,alignmentType:o.AlignmentType.UpperCenter}),f.add([f.background,f.topCon,f.gridLayout]),f}return m(IllustratedCollectItem,e),IllustratedCollectItem.prototype.refreshMask=function(){this.progress.refreshMask()},IllustratedCollectItem.prototype.syncPosition=function(){this.refreshMask()},IllustratedCollectItem.prototype.getAllChildren=function(){},IllustratedCollectItem.prototype.setCombinationData=function(e,i){this.combiData=e,this.titleTex.text=e.name,this.desTex.text=e.des;for(var n=this.gridLayout.list,a=0,s=n;a<s.length;a++){(f=s[a]).visible=!1}for(var o=0,h=e.requirement.length,l=0;l<e.requirement.length;l++){var m=e.requirement[l],f=void 0;l<n.length?f=n[l]:(f=new c.IllustratedItem(this.scene,87*this.dpr,92*this.dpr,this.dpr,this.zoom),this.gridLayout.add(f)),f.visible=!0,f.setItemData(m),2===m.status&&o++}this.progress.setProgress(o,h),this.progress.setText(o+"/"+h),this.iscallRewards=o===h,i?(this.iscallRewards=!1,this.rewardsBtn.setFrameNormal("illustrate_survey_icon_1","illustrate_survey_icon_1")):this.iscallRewards?this.rewardsBtn.setFrameNormal("illustrate_survey_icon","illustrate_survey_icon"):this.rewardsBtn.setFrameNormal("illustrate_survey_icon_2","illustrate_survey_icon_2"),this.gridLayout.Layout(),this.layout()},IllustratedCollectItem.prototype.setHandler=function(e){this.send=e},IllustratedCollectItem.prototype.checkExtendRect=function(){if(!this.gridLayout.visible)return!1;var e=this.scene.input.activePointer;if(l.Tool.checkPointerContains(this.gridLayout,e))for(var i=0,n=this.gridLayout.list;i<n.length;i++){var a=n[i];l.Tool.checkPointerContains(a,e)&&this.send&&this.send.runWith(["furidetail",a.itemData])}},IllustratedCollectItem.prototype.layout=function(){var e=20*this.dpr,i=this.topCon.height+this.gridLayout.height+e;this.setSize(this.width,i),this.background.clear(),this.background.fillStyle(6211327,1);var n=i-e+10*this.dpr;this.background.fillRect(.5*-this.width,.5*-i,this.width,n),this.topCon.y=.5*-this.height+.5*this.topCon.height,this.gridLayout.y=this.topCon.y+.5*this.topCon.height+.5*this.gridLayout.height+e-5*this.dpr},IllustratedCollectItem.prototype.onRewardsHandler=function(){this.send&&this.iscallRewards&&this.send.runWith(["combinations",this.combiData.id])},IllustratedCollectItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaIllustratedListPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(794),m=n(804),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaIllustratedListPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.redMap=new Map,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h}return f(PicaIllustratedListPanel,e),PicaIllustratedListPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a)},PicaIllustratedListPanel.prototype.setHandler=function(e){this.send=e},PicaIllustratedListPanel.prototype.init=function(){var e=305*this.dpr,i=330*this.dpr;this.gridLayout=new o.GridLayoutGroup(this.scene,e,i,{cellSize:new Phaser.Math.Vector2(304*this.dpr,96*this.dpr),space:new Phaser.Math.Vector2(0,21*this.dpr),startAxis:o.AxisType.Horizontal,constraint:o.ConstraintType.FixedColumnCount,constraintCount:1,alignmentType:o.AlignmentType.UpperCenter}),this.add(this.gridLayout),this.resize()},PicaIllustratedListPanel.prototype.setListData=function(){for(var e=0,i=this.getListData();e<i.length;e++){var n=i[e],a=new _(this.scene,304*this.dpr,96*this.dpr,this.dpr,this.zoom);if(a.setDisplayData(n),this.gridLayout.add(a),n.redType){var s=c.UITools.creatRedImge(this.scene,a);this.redMap.set(n.redType,s)}}this.gridLayout.Layout()},PicaIllustratedListPanel.prototype.setRedsState=function(e){this.redMap.forEach((function(i,n){i.visible=-1!==e.indexOf(n)}))},PicaIllustratedListPanel.prototype.getListData=function(){var e=new l.Handler(this,this.onSelectItemHandler),i={bg:"illustrate_furniture_bg",left:"illustrate_furniture_picture",textImg:"illustrate_furniture_title",text:l.i18n.t("illustrate.furin"),textColor:"#0C6DA3",send:e,tag:"gallary",redType:m.MainUIRedType.GALLERY};l.i18n.t("illustrate.avatar");return[i,{bg:"illustrate_make_bg",left:"illustrate_make_picture",textImg:"illustrate_make_title",text:l.i18n.t("illustrate.make"),textColor:"#3027A1",send:e,tag:"make"},{bg:"illustrate_cooking_bg",left:"illustrate_cooking_picture",textImg:"illustrate_cooking_title",text:l.i18n.t("illustrate.cooking"),textColor:"#3027A1",send:e,tag:"cooking"}]},PicaIllustratedListPanel.prototype.onSelectItemHandler=function(e){this.send&&this.send.runWith([e])},PicaIllustratedListPanel}(Phaser.GameObjects.Container),_=function(e){function IllustratedItem(i,n,a,o,c){var m=e.call(this,i,0,0)||this;return m.setSize(n,a),m.dpr=o,m.zoom=c,m.bg=m.scene.make.image({key:h.d.illustrate,frame:"illustrate_furniture_bg"}),m.leftImg=m.scene.make.image({key:h.d.illustrate,frame:"illustrate_furniture_picture"}),m.textImg=m.scene.make.image({key:h.d.illustrate,frame:"illustrate_furniture_title"}),m.textTex=m.scene.make.text({style:l.UIHelper.colorStyle("#0C6DA3",12*o)}).setOrigin(.5),m.leftImg.x=.5*-m.leftImg.width,m.leftImg.y=9*o,m.textImg.x=.25*m.width,m.textImg.y=.5*-m.textImg.height,m.textTex.x=m.textImg.x,m.textTex.y=m.textImg.y+.5*m.textImg.height+13*o,m.add([m.bg,m.leftImg,m.textImg,m.textTex]),m.on(s.ClickEvent.Tap,m.onClickHandler,m),m.enable=!0,m}return f(IllustratedItem,e),IllustratedItem.prototype.setDisplayData=function(e){this.bg.setFrame(e.bg),this.leftImg.setFrame(e.left),this.textImg.setFrame(e.textImg),this.textTex.text=e.text,this.textTex.setColor(e.textColor),this.tag=e.tag,this.send=e.send},IllustratedItem.prototype.onClickHandler=function(){this.send&&this.send.runWith(this.tag)},IllustratedItem}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaFurnitureComposePanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(791),l=n(790),c=n(2),m=n(0),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaFurnitureComposePanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.render=n,l.mSelectedItemData=[],l.subCategoryType=1,l.setSize(a,s),l.dpr=o,l.zoom=h,l.key=c.ModuleName.PICAMANUFACTURE_NAME,l.init(),l}return f(PicaFurnitureComposePanel,e),PicaFurnitureComposePanel.prototype.resize=function(e,i){var n=e,a=i;this.mBackground.x=.5*n,this.mBackground.y=.5*a,this.topBackground.x=.5*n,this.topBackground.y=.5*this.topBackground.height;var s=79*this.dpr,o=a-this.mPropGrid.height-.5*s-47*this.dpr;this.furiAnimation.x=.5*n,this.furiAnimation.y=.5*o+7*this.dpr,this.mCategoryCon.setSize(n,79*this.dpr),this.mCategoryCon.y=o,this.mCategoryCon.x=.5*n,this.mCategoriesBar.y=40*this.dpr,this.mCategoriesBar.x=.5*-n,this.mCategoriesBar.clear(),this.mCategoriesBar.fillStyle(10841086),this.mCategoriesBar.fillRect(0,0,n,40*this.dpr),this.mCategoriesBar.fillStyle(8539348),this.mCategoriesBar.fillRect(0,40*this.dpr,n,3*this.dpr),this.composeBtn.x=n-this.composeBtn.width/2-20*this.dpr,this.composeBtn.y=this.mCategoryCon.y-this.composeBtn.height/2+35*this.dpr,this.mPropGridBg.clear(),this.mPropGridBg.fillStyle(13531891),this.mPropGridBg.fillRect(0,0,this.mPropGrid.width,this.mPropGrid.height+10*this.dpr),this.mPropGridBg.y=a-this.mPropGrid.height-4*this.dpr,this.mPropGrid.x=n/2+3*this.dpr,this.mPropGrid.y=a-.5*this.mPropGrid.height,this.mPropGrid.layout(),this.mPropGrid.resetMask(),this.mCategoryScroll.refreshMask(),this.setSize(n,a),this.setInteractive()},PicaFurnitureComposePanel.prototype.setCategories=function(){var e=[{name:m.i18n.t("furnicompose.onestar"),value:1},{name:m.i18n.t("furnicompose.twostar"),value:2},{name:m.i18n.t("furnicompose.threestar"),value:3},{name:m.i18n.t("furnicompose.fourstar"),value:4}];this.mPreCategoryBtn=null,this.mSelectedCategeories=null;var i=60*this.dpr,n=41*this.dpr,a=[];this.mCategoryScroll.clearItems();for(var s=0;s<e.length;s++){var h=new o.TextButton(this.scene,this.dpr,1,e[s].name,0,0);h.setData("item",e[s]),h.setSize(i,n),this.mCategoryScroll.addItem(h),h.setChangeColor("#FFE63C"),a[s]=h,h.setFontSize(16*this.dpr),h.setFontStyle("bold")}this.mCategoryScroll.setAlign(1),this.mCategoryScroll.Sort(),this.mCategoryScroll.refreshMask(),a.length>1&&this.onSelectSubCategoryHandler(a[0])},PicaFurnitureComposePanel.prototype.setGridProp=function(e){this.setProps(e),this.mPropGrid.setT(0),this.updateSelectItemDatas(e)},PicaFurnitureComposePanel.prototype.updateGridProp=function(e){this.setProps(e),this.updateSelectItemDatas(e)},PicaFurnitureComposePanel.prototype.setProps=function(e){var i=(e=e||[]).length;i<24&&(e=e.concat(new Array(24-i))),this.mPropGrid.setItems(e)},PicaFurnitureComposePanel.prototype.setStarData=function(e){this.starCount=e},PicaFurnitureComposePanel.prototype.updateSelectItemDatas=function(e){for(var i=[],n=0,a=this.mSelectedItemData;n<a.length;n++)for(var s=a[n],o=0,h=e;o<h.length;o++){var l=h[o];s&&l.indexId===s.indexId&&i.push(l)}this.mSelectedItemData.length=0,this.mSelectedItemData=i},PicaFurnitureComposePanel.prototype.setComposeResult=function(e){},PicaFurnitureComposePanel.prototype.destroy=function(){this.mCategoryScroll&&this.mCategoryScroll.destroy(),this.mPropGrid&&this.mPropGrid.destroy(),e.prototype.destroy.call(this)},PicaFurnitureComposePanel.prototype.queryRefreshPackage=function(e){this.queryPackege(e)},PicaFurnitureComposePanel.prototype.init=function(){var e=this,i=this.width,n=this.height;this.mBackground=new h.CommonBackground(this.scene,0,0,i,n,l.d.effectcommon,"synthetic_bg",13204211),this.topBackground=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_bg_stripe"}),this.mCategoryCon=this.scene.make.container(void 0,!1),this.mCategoryCon.setSize(i,295*this.dpr),this.mCategoryCon.y=n-this.mCategoryCon.height,this.mCategoriesBar=this.scene.make.graphics(void 0,!1),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,i,n),Phaser.Geom.Rectangle.Contains),this.furiAnimation=new _(this.scene,this.dpr,this.scale),this.furiAnimation.setHandler(new m.Handler(this,this.onFuriComposeAnimationHandler));var a=100*this.dpr,o=40*this.dpr,c=i-a/2-20*this.dpr,f=this.mCategoryCon.y-25*this.dpr;this.composeBtn=this.createNineButton(c+100*this.dpr,f,a,o,l.d.uicommon,"yellow_btn",m.i18n.t("compose.title"),"#996600"),this.composeBtn.on(s.ClickEvent.Tap,this.onComposeBtnHandler,this),this.mCategoryScroll=new s.GameScroller(this.scene,{x:0,y:60*this.dpr,width:i,height:41*this.dpr,zoom:this.zoom,orientation:1,dpr:this.dpr,space:28*this.dpr,selfevent:!0,cellupCallBack:function(i){e.onSelectSubCategoryHandler(i)}}),this.mPropGridBg=this.scene.make.graphics(void 0,!1),this.mCategoryCon.add([this.mCategoriesBar,this.mCategoryScroll]),this.add([this.mBackground,this.topBackground,this.mPropGridBg,this.furiAnimation,this.mCategoryCon,this.composeBtn]);var g=this.scene.textures.getFrame(l.d.uicommon,"bag_icon_common_bg"),T=g.width+9*this.dpr,x=g.height+9*this.dpr,S={x:0,y:0,table:{width:i,height:231*this.dpr,columns:3,cellWidth:T,cellHeight:x,reuseCellContainer:!0,zoom:this.scale,mask:!1},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(i,n){var a=i.scene,s=i.item;return null===n&&(n=new h.ItemButton(a,l.d.effectcommon,"synthetic_icon_bg",e.dpr,e.scale,!1)),n.setData({item:s}),n.setItemData(s,!0),n}};this.mPropGrid=new s.GameGridTable(this.scene,S),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(i){i&&e.onSelectItemHandler(i)})),this.add(this.mPropGrid),this.resize(this.width,this.height)},PicaFurnitureComposePanel.prototype.createNineButton=function(e,i,n,a,o,h,l,c){var f=new s.NineSliceButton(this.scene,e,i,n,a,o,h,l,this.dpr,1,{left:14*this.dpr,top:14*this.dpr,right:15*this.dpr,bottom:14*this.dpr});return l&&(f.setTextStyle({color:c,fontSize:16*this.dpr,fontFamily:m.Font.DEFULT_FONT}),f.setFontStyle("bold")),f},PicaFurnitureComposePanel.prototype.onSelectSubCategoryHandler=function(e){var i=e.getData("item");i&&(this.mPreCategoryBtn&&this.mPreCategoryBtn.changeNormal(),e.changeDown(),this.mSelectedCategeories=i,this.subCategoryType=i.value,this.queryPackege(!1),this.mPreCategoryBtn=e),this.mPropGrid.setT(0),this.furiAnimation.clearItemDatas(!0),this.furiAnimation.setStarType(this.subCategoryType)},PicaFurnitureComposePanel.prototype.queryPackege=function(e){this.mSelectedCategeories&&this.render.renderEmitter(this.key+"_queryfuripackage",{type:this.subCategoryType,update:e})},PicaFurnitureComposePanel.prototype.onSelectItemHandler=function(e){var i=e.getData("item");i&&this.checkSelectItemDatas(i,!0)},PicaFurnitureComposePanel.prototype.onComposeBtnHandler=function(){if(this.mSelectedItemData&&5===this.mSelectedItemData.length){if(this.starCount<this.subCategoryType){var e={text:[{text:m.i18n.t("furnicompose.starpicatips"),node:void 0}]};return void this.render.mainPeer.showMediator(c.ModuleName.PICANOTICE_NAME,!0,e)}for(var i=[],n=0,a=this.mSelectedItemData;n<a.length;n++){e=a[n];i.push(e.id)}this.render.renderEmitter(this.key+"_queryfuricompose",i),this.furiAnimation.playComposeAnimation(),this.mSelectedItemData.length=0}else{e={text:[{text:m.i18n.t("furnicompose.selecttips"),node:void 0}]};this.render.mainPeer.showMediator(c.ModuleName.PICANOTICE_NAME,!0,e)}},PicaFurnitureComposePanel.prototype.checkSelectItemDatas=function(e,i){if(!i||5!==this.mSelectedItemData.length){for(var n=-1,a=0;a<this.mSelectedItemData.length;a++){this.mSelectedItemData[a].indexId===e.indexId&&(n=a)}if(i)e.count>0&&(this.mSelectedItemData.push(e),this.furiAnimation.setItemData(e,this.subCategoryType),e.count--);else if(-1!==n)this.mSelectedItemData.splice(n,1)[0].count++;this.mPropGrid.refresh()}},PicaFurnitureComposePanel.prototype.onFuriComposeAnimationHandler=function(e,i){"remove"===e&&this.checkSelectItemDatas(i,!1)},PicaFurnitureComposePanel}(Phaser.GameObjects.Container),_=function(e){function FuriComposeAnimation(i,n,a){var s=e.call(this,i)||this;return s.starImgList=[],s.itemList=[],s.indexeds=[0,0,0,0,0],s.tweens=[],s.canPlay=!1,s.dpr=n,s.zoom=a,s.init(),s.setSize(s.bgring1.width,s.bgring1.height),s}return f(FuriComposeAnimation,e),FuriComposeAnimation.prototype.setHandler=function(e){this.send=e},FuriComposeAnimation.prototype.setStarType=function(e){this.starType=e,this.bgstarLev.setFrame("synthetic_center_star"+(e+1)),this.spendStarTex.text=m.i18n.t("furnicompose.spendstar",{name:e}),this.bgstarLev.visible=!0},FuriComposeAnimation.prototype.setItemData=function(e,i){this.starType=i;for(var n=-1,a=0;a<this.indexeds.length;a++){if(0===this.indexeds[a])-1===n&&(n=a);else this.itemList[a].itemData.indexId===e.indexId&&0}-1!==n&&e.count>0&&(this.indexeds[n]=1,this.itemList[n].setItemData(e),this.starImgList[n].visible=!0,this.playAnimation());this.displayStarImg()},FuriComposeAnimation.prototype.removeItemData=function(e){this.indexeds[e]=0;var i=this.itemList[e];i.itemData&&(this.send&&this.send.runWith(["remove",i.itemData]),i.setItemData(void 0)),this.displayStarImg();for(var n=!1,a=0,s=this.indexeds;a<s.length;a++){1===s[a]&&(n=!0)}n?this.playAnimation():this.stopAnimation()},FuriComposeAnimation.prototype.clearItemDatas=function(e){for(var i=0;i<this.indexeds.length;i++){this.indexeds[i]=0;var n=this.itemList[i];n.itemData&&(e&&this.send&&this.send.runWith(["remove",n.itemData]),n.setItemData(void 0))}this.stopTweens(),this.displayStarImg(),this.stopAnimation(),this.layoutItemsPosition()},FuriComposeAnimation.prototype.playComposeAnimation=function(){for(var e=0,i=this.itemList;e<i.length;e++){var n=i[e];this.playMove(n,0,0,200)}},FuriComposeAnimation.prototype.update=function(){this.canPlay&&(this.bgring1.rotation+=.04,this.bgring2.rotation-=.015,this.bgring3.rotation+=.02)},FuriComposeAnimation.prototype.destroy=function(){e.prototype.destroy.call(this),this.stopAnimation(),this.stopTweens()},FuriComposeAnimation.prototype.init=function(){this.bgring1=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_1"}),this.bgring2=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_2"}),this.bgring3=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_3"}),this.bgring4=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_4"}),this.bgring5=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_5"}),this.bgring6=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_ring_6"}),this.bgringstar=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_star_default"}),this.bgstarLev=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_center_star2"}),this.bglightstar=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_star_illume_5"}),this.bglightstar.y=3*this.dpr,this.spendStarTex=new s.BBCodeText(this.scene,0,.5*this.bgring1.height+15*this.dpr,"",m.UIHelper.whiteStyle(this.dpr,11)).setOrigin(.5),this.add([this.bgring1,this.bgring2,this.bgring3,this.bgring4,this.bgring5,this.bgring6,this.bgringstar,this.bgstarLev,this.bglightstar,this.spendStarTex]),this.createStarImg(),this.createItem(),this.bglightstar.visible=!1,this.bgstarLev.visible=!1},FuriComposeAnimation.prototype.createStarImg=function(){for(var e=2*Math.PI/5-.0096,i=0;i<5;i++){var n=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_star_illume_1"});n.rotation=-e*i+5e-4,this.starImgList.push(n),n.visible=!1,n.y=3*this.dpr,n.x=-2*this.dpr}this.add(this.starImgList)},FuriComposeAnimation.prototype.createItem=function(){for(var e=0;e<5;e++){var i=new T(this.scene,this.dpr,this.zoom);this.itemList.push(i),i.on(s.ClickEvent.Tap,this.onItemHandler,this)}this.add(this.itemList),this.layoutItemsPosition()},FuriComposeAnimation.prototype.layoutItemsPosition=function(){for(var e=3*Math.PI/2-2*Math.PI/5,i=108*this.dpr,n=0;n<this.itemList.length;n++){var a=this.itemList[n],s=e-2*Math.PI/5*n;a.y=Math.sin(s)*i,a.x=Math.cos(s)*i}},FuriComposeAnimation.prototype.displayStarImg=function(){for(var e=0,i=0;i<this.indexeds.length;i++){var n=this.indexeds[i];this.starImgList[i].visible=0!==n,0===n?this.starImgList[i].visible=!1:(this.starImgList[i].visible=!0,e++)}if(5===e){this.bglightstar.visible=!0;for(var a=0,s=this.starImgList;a<s.length;a++){s[a].visible=!1}}else this.bglightstar.visible=!1},FuriComposeAnimation.prototype.playAnimation=function(){this.canPlay=!0,this.timerID||(this.timerID=setInterval(this.update.bind(this),20))},FuriComposeAnimation.prototype.stopAnimation=function(){this.canPlay=!1,this.bgring1.rotation=0,this.bgring2.rotation=0,this.bgring3.rotation=0,this.timerID&&(this.timerID=clearInterval(this.timerID),this.timerID=void 0)},FuriComposeAnimation.prototype.onItemHandler=function(e,i){var n=this.itemList.indexOf(i);this.removeItemData(n)},FuriComposeAnimation.prototype.playMove=function(e,i,n,a){var s=this;if(this.scene){var o=this.scene.tweens.add({targets:e,x:{value:0},y:{value:3*this.dpr},ease:"Linear",duration:a,onComplete:function(){o.stop(),o.remove(),s.clearItemDatas(!1)}});this.tweens.push(o)}},FuriComposeAnimation.prototype.stopTweens=function(){for(var e=0,i=this.tweens;e<i.length;e++){var n=i[e];n.stop(),n.remove()}this.tweens.length=0},FuriComposeAnimation}(Phaser.GameObjects.Container),T=function(e){function FuriComposeItem(i,n,a){var s=e.call(this,i,0,0)||this;return s.dpr=n,s.zoom=a,s.init(),s.setSize(s.bg.width,s.bg.height),s.enable=!0,s}return f(FuriComposeItem,e),FuriComposeItem.prototype.setItemData=function(e){if(this.itemData=e,this.clearTween(),this.lightbg.alpha=0,this.icon.alpha=0,e){var i=m.Url.getOsdRes(e.texturePath);this.icon.load(i),this.icon.visible=!0,this.playAlphaAni([this.icon,this.lightbg])}else this.icon.visible=!1},FuriComposeItem.prototype.init=function(){this.bg=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_default"}),this.lightbg=this.scene.make.image({key:l.d.effectcommon,frame:"synthetic_Light"}),this.icon=new o.DynamicImage(this.scene,0,0),this.icon.scale=this.dpr/this.zoom,this.add([this.bg,this.lightbg,this.icon]),this.lightbg.alpha=0,this.icon.alpha=0},FuriComposeItem.prototype.playAlphaAni=function(e){if(this.scene){this.clearTween();var i=this.scene.tweens.add({targets:e,alpha:{from:0,to:1},ease:"Linear",duration:300,onComplete:function(){i.stop(),i.remove()}});this.alphaTween=i}},FuriComposeItem.prototype.clearTween=function(){this.alphaTween&&(this.alphaTween.stop(),this.alphaTween.remove(),this.alphaTween=void 0)},FuriComposeItem}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRecastePanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(796),l=n(790),c=n(2),m=n(0),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaRecastePanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.render=n,l.isBag=!0,l.setSize(a,s),l.dpr=o,l.zoom=h,l.key=c.ModuleName.PICAMANUFACTURE_NAME,l.init(),l}return f(PicaRecastePanel,e),PicaRecastePanel.prototype.resize=function(e,i){var n=e,a=i;this.setSize(e,i),this.mBackground.x=.5*n,this.mBackground.y=.5*a,this.mTopBg.x=.5*n,this.mTopBg.y=.5*this.mTopBg.height;var s=79*this.dpr,o=a-this.mPropGrid.height-.5*s-47*this.dpr;this.mCategoryCon.setSize(n,79*this.dpr),this.mCategoryCon.y=o,this.mCategoryCon.x=.5*n,this.mCategoriesBar.y=40*this.dpr,this.mCategoriesBar.x=.5*-n,this.mCategoriesBar.clear(),this.mCategoriesBar.fillStyle(4121087),this.mCategoriesBar.fillRect(0,0,n,40*this.dpr),this.confirmBtn.x=n-this.confirmBtn.width/2-10*this.dpr,this.confirmBtn.y=this.mCategoryCon.y-this.confirmBtn.height/2+25*this.dpr,this.labelTipTex.x=15*this.dpr,this.labelTipTex.y=this.confirmBtn.y,this.labelTipTex.visible=!1,this.mDetailBubble.x=this.labelTipTex.x,this.mDetailBubble.y=this.labelTipTex.y+20*this.dpr-this.mDetailBubble.height,this.displayPanel.x=.5*n,this.displayPanel.y=.5*o+17*this.dpr,this.mPropGridBg.clear(),this.mPropGridBg.fillStyle(8250878),this.mPropGridBg.fillRect(0,0,this.mPropGrid.width,this.mPropGrid.height+10*this.dpr),this.mPropGridBg.y=a-this.mPropGrid.height-6*this.dpr,this.mPropGrid.x=n/2+3*this.dpr,this.mPropGrid.y=a-.5*this.mPropGrid.height,this.mPropGrid.layout(),this.mPropGrid.resetMask(),this.mCategoryScroll.refreshMask(),this.displayPanel.refreshMask(),this.setSize(n,a),this.setInteractive()},PicaRecastePanel.prototype.setRecasteResult=function(e){e&&(this.mRecasteItemData.count--,this.displayPanel.setRecasteItemData(this.mRecasteItemData))},PicaRecastePanel.prototype.setCategories=function(e){if(e){this.mPreCategoryBtn=null,this.mSelectedCategeories=null;var i=60*this.dpr,n=41*this.dpr,a=[];this.mCategoryScroll.clearItems();var s={value:this.isBag?m.i18n.t("common.bag"):m.i18n.t("common.recast"),key:"alltype"};e.unshift(s);for(var h=0;h<e.length;h++){var c=new o.TextButton(this.scene,this.dpr,1,e[h].value,0,0);c.setData("item",e[h]),c.setSize(i,n),this.mCategoryScroll.addItem(c),a[h]=c,c.setFontSize(18*this.dpr),c.setFontStyle("bold");var f=this.scene.make.image({key:l.d.recast,frame:"Recast_nav_Select"});f.y=21*this.dpr,c.add(f),f.visible=!1,f.displayHeight=4*this.dpr,c.setData("lineImg",f)}this.mCategoryScroll.Sort(),this.mCategoryScroll.refreshMask(),a.length>1&&this.onSelectSubCategoryHandler(a[0])}},PicaRecastePanel.prototype.setProp=function(e){var i=(e=e||[]).length;i<18&&(e=e.concat(new Array(18-i))),this.mPropGrid.setItems(e)},PicaRecastePanel.prototype.setStarData=function(e){this.starCount=e},PicaRecastePanel.prototype.setRecasteItemData=function(e,i){e&&"object"==typeof e?(this.mRecasteItemData=e,this.displayPanel.setRecasteItemData(e),this.mDetailBubble.setProp(e,0,void 0),i&&this.onDisplayPanelHandler("blueprint",!0)):(this.onDisplayPanelHandler("itembutton"),this.displayPanel.setRecasteItemData(void 0))},PicaRecastePanel.prototype.destroy=function(){this.mCategoryScroll&&this.mCategoryScroll.destroy(),this.mPropGrid&&this.mPropGrid.destroy(),e.prototype.destroy.call(this)},PicaRecastePanel.prototype.queryRecasteList=function(){if(this.mSelectedCategeories){var e=this.mSelectedCategeories;this.render.renderEmitter(this.key+"_queryrecastelist",{type:e.key,star:this.mRecasteItemData.grade})}},PicaRecastePanel.prototype.init=function(){var e=this,i=this.width,n=this.height;this.mBackground=new h.a(this.scene,0,0,i,n),this.mTopBg=this.scene.make.image({key:"Recast_bg_texture"},!1),this.displayPanel=new _(this.scene,i,248*this.dpr,this.render,this.dpr,this.scale),this.displayPanel.setHandler(new m.Handler(this,this.onDisplayPanelHandler)),this.mTopBg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mCategoryCon=this.scene.make.container(void 0,!1),this.mCategoryCon.setSize(i,295*this.dpr),this.mCategoryCon.y=n-this.mCategoryCon.height,this.mCategoriesBar=this.scene.make.graphics(void 0,!1),this.mCategoryCon.add(this.mCategoriesBar),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,i,n),Phaser.Geom.Rectangle.Contains);var a=100*this.dpr,o=40*this.dpr,c=i-a/2-20*this.dpr,f=this.mCategoryCon.y-25*this.dpr;this.confirmBtn=this.createNineButton(c+100*this.dpr,f,a,o,l.d.uicommon,"yellow_btn",m.i18n.t("common.confirm"),"#996600"),this.confirmBtn.on(s.ClickEvent.Tap,this.onConfirmBtnHandler,this),this.mDetailBubble=new h.b(this.scene,l.d.uicommon,this.dpr,this.zoom,100*this.dpr,50*this.dpr),this.mDetailBubble.x=10*this.dpr,this.labelTipTex=this.scene.make.text({text:m.i18n.t("recaste.tip"),style:m.UIHelper.colorStyle("#FAF916",14*this.dpr)}).setOrigin(0,.5),this.mCategoryScroll=new s.GameScroller(this.scene,{x:0,y:60*this.dpr,width:i,height:44*this.dpr,zoom:this.zoom,orientation:1,dpr:this.dpr,space:10*this.dpr,selfevent:!0,cellupCallBack:function(i){e.onSelectSubCategoryHandler(i)}}),this.mPropGridBg=this.scene.make.graphics(void 0,!1),this.mCategoryCon.add(this.mCategoryScroll),this.add([this.mBackground,this.mPropGridBg,this.mTopBg,this.displayPanel,this.mCategoryCon,this.confirmBtn,this.mDetailBubble,this.labelTipTex]);var g=this.scene.textures.getFrame(l.d.uicommon,"bag_icon_common_bg"),T=g.width+9*this.dpr,x=g.height+9*this.dpr,S={x:0,y:0,table:{width:i,height:231*this.dpr,columns:3,cellWidth:T,cellHeight:x,reuseCellContainer:!0,zoom:this.scale,mask:!1},scrollMode:1,clamplChildOY:!1,createCellContainerCallback:function(i,n){var a=i.scene,s=i.item;return null===n&&(n=new h.f(a,l.d.uicommon,"bag_icon_common_bg",e.dpr,e.scale,!1)),n.setData({item:s}),n.setItemData(s),e.mSelectedItemData&&s&&e.mSelectedItemData.id===s.id&&(n.isSelect=!0,e.mSelectedItem=n),n}};this.mPropGrid=new s.GameGridTable(this.scene,S),this.mPropGrid.layout(),this.mPropGrid.on("cellTap",(function(i){i&&e.onSelectItemHandler(i)})),this.add(this.mPropGrid),this.resize(0,0)},PicaRecastePanel.prototype.createNineButton=function(e,i,n,a,o,h,l,c){var f=new s.NineSliceButton(this.scene,e,i,n,a,o,h,l,this.dpr,1,{left:14*this.dpr,top:14*this.dpr,right:15*this.dpr,bottom:14*this.dpr});return l&&(f.setTextStyle({color:c,fontSize:16*this.dpr,fontFamily:m.Font.DEFULT_FONT}),f.setFontStyle("bold")),f},PicaRecastePanel.prototype.onSelectSubCategoryHandler=function(e){var i=e.getData("item");if(i){if(this.mPreCategoryBtn)this.mPreCategoryBtn.changeNormal(),this.mPreCategoryBtn.getData("lineImg").visible=!1;e.changeDown(),this.mSelectedCategeories=i,this.mPreCategoryBtn=e;var n=e.getData("lineImg");n.visible=!0,n.setFrame(this.isBag?"Recast_nav_Select":"Recast_nav_Select_1"),this.isBag?this.queryPackege():this.queryRecasteList()}this.mPropGrid.setT(0)},PicaRecastePanel.prototype.queryPackege=function(){this.mSelectedCategeories&&this.render.renderEmitter(this.key+"_queryPackage",this.mSelectedCategeories.key)},PicaRecastePanel.prototype.onSelectItemHandler=function(e){var i=e.getData("item");i&&this.mSelectedItemData===i||!i||(this.mSelectedItemData=i,this.isBag?(this.displayPanel.setRecasteItemData(i),this.mRecasteItemData=i):this.displayPanel.setRecasteTargetData(i),this.mSelectedItem&&(this.mSelectedItem.select=!1),e.select=!0,this.mSelectedItem=e,this.mDetailBubble.setProp(i,0,void 0),this.mDetailBubble.y=this.labelTipTex.y+20*this.dpr-this.mDetailBubble.height)},PicaRecastePanel.prototype.clearRecastData=function(){this.mDetailBubble.setProp(void 0,0,void 0),this.mDetailBubble.setTipsText(""),this.mRecasteItemData=void 0,this.mSelectedItemData=void 0,this.mSelectedItem=void 0},PicaRecastePanel.prototype.onConfirmBtnHandler=function(){var e;if(this.mSelectedItemData?this.starCount<this.mSelectedItemData.grade?e=m.i18n.t("furnicompose.starpicatips"):0===this.mRecasteItemData.count?e=m.i18n.t("recaste.counttips"):this.mRecasteItemData.id===this.mSelectedItemData.id&&(e=m.i18n.t("recaste.sametips")):e=m.i18n.t("recaste.selecttips"),e){var i={text:[{text:e,node:void 0}]};this.render.mainPeer.showMediator(c.ModuleName.PICANOTICE_NAME,!0,i)}else this.render.renderEmitter(this.key+"_queryrecaste",{consumedId:this.mRecasteItemData.id,targetId:this.mSelectedItemData.id})},PicaRecastePanel.prototype.onDisplayPanelHandler=function(e,i){if("itembutton"===e)this.mCategoriesBar.clear(),this.mCategoriesBar.fillStyle(4121087),this.mCategoriesBar.fillRect(0,0,this.width,40*this.dpr),this.mPropGridBg.clear(),this.mPropGridBg.fillStyle(8250878),this.mPropGridBg.fillRect(0,0,this.width,this.mPropGrid.height+10*this.dpr),this.isBag=!0,this.clearRecastData();else if("blueprint"===e){if(!i){var n={text:[{text:m.i18n.t("recaste.selecttips"),node:void 0}]};return void this.render.mainPeer.showMediator(c.ModuleName.PICANOTICE_NAME,!0,n)}this.mCategoriesBar.clear(),this.mCategoriesBar.fillStyle(13024758),this.mCategoriesBar.fillRect(0,0,this.width,40*this.dpr),this.mPropGridBg.clear(),this.mPropGridBg.fillStyle(13024758),this.mPropGridBg.fillRect(0,0,this.width,this.mPropGrid.height+10*this.dpr),this.isBag=!1}this.render.renderEmitter(this.key+"_queryRecastCategories")},PicaRecastePanel}(Phaser.GameObjects.Container),_=function(e){function RecasteDisplayPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.haveRecastData=!1,l.setSize(n,a),l.dpr=o,l.zoom=h,l.render=s,l.init(),l}return f(RecasteDisplayPanel,e),RecasteDisplayPanel.prototype.refreshMask=function(){var e=this.rightbg.getWorldTransformMatrix();this.maskGraphic.x=e.tx-this.rightbg.width/this.zoom*.5,this.maskGraphic.y=e.ty-this.rightbg.height/this.zoom*.5},RecasteDisplayPanel.prototype.setHandler=function(e){this.send=e},RecasteDisplayPanel.prototype.setRecasteItemData=function(e){e?(this.recasteItem.setItemData(e,!0),this.starvalue.setText(e.grade+""),this.haveRecastData=!0):this.clearDisplay()},RecasteDisplayPanel.prototype.setRecasteTargetData=function(e){var i=e.serializeString?e.elepi:e;h.l.showDetailDisplay({display:this.recasteTarget,dpr:this.dpr,data:i,render:this.render,sn:e.sn,itemid:e.id,serialize:e.serializeString}),this.recasteTarget.visible=!0,this.starLevelImg.setFrame("Recast_star_big_"+e.grade),this.nameTex.text=e.name||e.shortName,this.starLevelImg.visible=!0,this.rightTips.visible=!1,this.rightButton.visible=!1},RecasteDisplayPanel.prototype.init=function(){var e=this;this.rightbg=this.scene.make.image({key:"Recast_aims_icon_bg"}),this.rightbg.x=.5*this.width-.5*this.rightbg.width-15*this.dpr,this.recasteItem=new h.f(this.scene,l.d.recast,"Recast_default_icon_bg",this.dpr,this.zoom,!0),this.recasteItem.on(s.ClickEvent.Tap,this.onItemButtonHandler,this),this.recasteItem.setShowTips(!1),this.recasteItem.x=.5*-this.width+.5*this.recasteItem.width+20*this.dpr,this.recasteItem.y=0;var i=this.scene.make.image({key:l.d.recast,frame:"Recast_arrow"});i.x=this.recasteItem.x+.5*this.recasteItem.width+.5*i.width+6*this.dpr,i.y=this.recasteItem.y,this.starvalue=new h.e(this.scene,60*this.dpr,20*this.dpr,l.d.recast,"Recast_pica star_small",this.dpr,m.UIHelper.colorNumberStyle("#ffffff",20*this.dpr)),this.starvalue.x=i.x-11*this.dpr,this.starvalue.y=i.y-10*this.dpr,this.nameTex=this.scene.make.text({text:"",style:m.UIHelper.colorStyle("#FFFF00",14*this.dpr)}).setOrigin(0,.5),this.nameTex.setFontStyle("bold"),this.nameTex.x=this.rightbg.x-.5*this.rightbg.width,this.nameTex.y=this.rightbg.y-.5*this.rightbg.height-18*this.dpr,this.starLevelImg=this.scene.make.image({key:l.d.recast,frame:"Recast_star_big_1"}).setOrigin(1,.5),this.starLevelImg.x=this.rightbg.x+.5*this.rightbg.width-.5*this.starLevelImg.width-12*this.dpr,this.starLevelImg.y=this.rightbg.y-.5*this.rightbg.height+.5*this.starLevelImg.height+8*this.dpr,this.starLevelImg.visible=!1,this.recasteTarget=new h.c(this.scene,this.render),this.recasteTarget.setFixedScale(2*this.dpr/this.zoom),this.recasteTarget.setComplHandler(new m.Handler(this,(function(){e.recasteTarget.visible=!0}))),this.maskGraphic=this.scene.make.graphics(void 0,!1),this.maskGraphic.clear(),this.maskGraphic.fillStyle(4121087),this.maskGraphic.fillRect(0,0,this.rightbg.width,this.rightbg.height),this.recasteTarget.mask=this.maskGraphic.createGeometryMask(),this.recasteTarget.setTexture(l.d.uicommon,"bag_nothing",1),this.recasteTarget.setNearest(),this.recasteTarget.x=this.rightbg.x,this.recasteTarget.y=this.rightbg.y,this.rightButton=new s.Button(this.scene,l.d.recast,"Recast_add"),this.rightButton.on(s.ClickEvent.Tap,this.onBlueprintHandler,this),this.rightButton.x=this.recasteTarget.x,this.rightButton.y=this.recasteTarget.y,this.rightTips=this.scene.make.text({text:m.i18n.t("recaste.selecttips"),style:m.UIHelper.whiteStyle(this.dpr)}).setOrigin(.5),this.rightTips.x=this.rightButton.x,this.rightTips.y=this.rightButton.y+.5*this.rightButton.height+20*this.dpr,this.add([this.rightbg,this.recasteItem,this.recasteTarget,this.rightButton,this.rightTips,i,this.starvalue,this.nameTex,this.starLevelImg]),this.clearDisplay()},RecasteDisplayPanel.prototype.onItemButtonHandler=function(){this.clearDisplay(),this.send&&this.send.runWith("itembutton")},RecasteDisplayPanel.prototype.onBlueprintHandler=function(){this.send&&this.send.runWith(["blueprint",this.haveRecastData])},RecasteDisplayPanel.prototype.clearDisplay=function(){this.recasteItem.setItemData(void 0),this.recasteItem.setIconTexture(l.d.recast,"Recast_default_icon",!0),this.recasteTarget.visible=!1,this.rightButton.visible=!0,this.rightTips.visible=!0,this.haveRecastData=!1},RecasteDisplayPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewAlreadyCollectedPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(791),m=n(794),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaNewAlreadyCollectedPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h.setInteractive(),h}return f(PicaNewAlreadyCollectedPanel,e),PicaNewAlreadyCollectedPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),this.backButton.x=.5*-this.width+.5*this.backButton.width+10*this.dpr,this.backButton.y=.5*-this.height+45*this.dpr},PicaNewAlreadyCollectedPanel.prototype.refreshMask=function(){this.mGrid.resetMask()},PicaNewAlreadyCollectedPanel.prototype.setHandler=function(e){this.send=e},PicaNewAlreadyCollectedPanel.prototype.setCombinationDatas=function(e){0!==e.length?(this.noCombinationTip.visible=!1,this.collectedData=e,this.mGrid.setItems(e)):this.noCombinationTip.visible=!0},PicaNewAlreadyCollectedPanel.prototype.init=function(){this.mBackground=new c.CommonBackground(this.scene,0,0,this.width,this.height,h.d.illustrate_new,"illustrate_survey_bg",12836852);var e=this.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_bg_veins"});e.y=.5*-this.height+.5*e.height,this.mBackground.add(e),this.add(this.mBackground),this.backButton=m.UITools.createBackButton(this.scene,this.dpr,this.onBackHandler,this,l.i18n.t("illustrate.collected")),this.createGridTable();var i=this.scene.make.image({key:h.d.uicommon,frame:"task_no"}),n=this.scene.make.text({text:l.i18n.t("illustrate.nocomniationtip"),style:l.UIHelper.whiteStyle(this.dpr)}).setOrigin(.5);n.y=.5*i.height+15*this.dpr,this.noCombinationTip=this.scene.make.container(void 0),this.noCombinationTip.add([i,n]),this.noCombinationTip.y=-10*this.dpr,this.noCombinationTip.visible=!1,this.add([this.mBackground,this.backButton,this.mGrid,this.noCombinationTip]),this.resize()},PicaNewAlreadyCollectedPanel.prototype.createGridTable=function(){var e=this,i=this.height-80*this.dpr,n=this.width-30*this.dpr,a=84*this.dpr,o=138*this.dpr,h={x:0,y:0,table:{width:n,height:i,columns:4,cellWidth:a,cellHeight:o,reuseCellContainer:!0,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,n){var s=i.item;return null===n&&(n=new _(e.scene,a,o,e.dpr,e.zoom)),n.setCombinationData(s),n}};this.mGrid=new s.GameGridTable(this.scene,h),this.mGrid.layout(),this.mGrid.on("cellTap",(function(i){e.onSelectItemHandler(i)})),this.mGrid.y=.5*-this.height+78*this.dpr+.5*this.mGrid.height},PicaNewAlreadyCollectedPanel.prototype.onSelectItemHandler=function(e){var i=e.combinationData;this.send&&this.send.runWith(["showcombination",i])},PicaNewAlreadyCollectedPanel.prototype.onBackHandler=function(){this.send&&this.send.runWith("close")},PicaNewAlreadyCollectedPanel}(Phaser.GameObjects.Container),_=function(e){function CollectedItem(i,n,a,s,c){var m=e.call(this,i,0,0)||this;return m.dpr=s,m.zoom=c,m.setSize(n,a),m.bg=m.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_favorites_badge_bg"}),m.itemIcon=new o.DynamicImage(i,0,0),m.itemIcon.y=-30*s,m.title=m.scene.make.text({style:l.UIHelper.colorStyle("#996600",11*s)}).setOrigin(.5),m.title.setFontStyle("bold"),m.title.y=14*s,m.line=m.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_favorites_badge_line"}),m.line.y=m.title.y+13*s,m.countTex=m.scene.make.text({style:l.UIHelper.colorStyle("#000000",11*s)}).setOrigin(.5),m.countTex.setFontStyle("bold"),m.countTex.y=m.line.y+13*s,m.add([m.bg,m.itemIcon,m.title,m.line,m.countTex]),m}return f(CollectedItem,e),CollectedItem.prototype.setCombinationData=function(e){this.combinationData=e;var i=e.requirement[0],n=l.Url.getOsdRes(i.texturePath);this.itemIcon.load(n),this.itemIcon.scale=this.dpr/this.zoom,this.title.text=e.name,this.title.text=l.UIHelper.spliceText(this.bg.width-30*this.dpr,e.name,11*this.dpr,this.scene);var a=e.requirement.length;this.countTex.text=a+"/"+a},Object.defineProperty(CollectedItem.prototype,"select",{set:function(e){this.bg.setFrame(e?"illustrate_survey_reward_icon1":"illustrate_survey_reward_icon")},enumerable:!1,configurable:!0}),CollectedItem.prototype.setHandler=function(e){this.send=e},CollectedItem.prototype.onRewardHandler=function(){this.send&&this.send.runWith(["recivedreward",this.combinationData])},CollectedItem}(o.ButtonEventDispatcher);!function(e){function LevelItem(i,n,a,s,o){var c=e.call(this,i,0,0)||this;return c.dpr=s,c.zoom=o,c.setSize(n,a),c.linebg=c.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_lv_bg_line"}),c.bg=c.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_lv_bg"}),c.levelTex=c.scene.make.text({style:l.UIHelper.whiteStyle(s)}),c.add([c.linebg,c.bg,c.levelTex]),c}f(LevelItem,e),LevelItem.prototype.setLevelData=function(e){this.groupData=e,this.levelTex.text=e.level<10?"0"+e.level:""+e.level},Object.defineProperty(LevelItem.prototype,"select",{set:function(e){this.bg.setFrame(e?"illustrate_survey_lv_bg1":"illustrate_survey_lv_bg")},enumerable:!1,configurable:!0})}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewCollectBadgePanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(791),m=n(794),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaNewCollectBadgePanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h.setInteractive(),h}return f(PicaNewCollectBadgePanel,e),PicaNewCollectBadgePanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),this.backButton.x=.5*-this.width+.5*this.backButton.width+10*this.dpr,this.backButton.y=.5*-this.height+45*this.dpr},PicaNewCollectBadgePanel.prototype.refreshMask=function(){this.mGrid.resetMask()},PicaNewCollectBadgePanel.prototype.setHandler=function(e){this.send=e},PicaNewCollectBadgePanel.prototype.setBadgeDatas=function(e){this.badgeData=e,this.mGrid.setItems(e)},PicaNewCollectBadgePanel.prototype.init=function(){this.mBackground=new c.CommonBackground(this.scene,0,0,this.width,this.height,h.d.illustrate_new,"illustrate_survey_bg",12836852);var e=this.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_bg_veins"});e.y=.5*-this.height+.5*e.height,this.mBackground.add(e),this.add(this.mBackground),this.backButton=m.UITools.createBackButton(this.scene,this.dpr,this.onBackHandler,this,l.i18n.t("illustrate.collectbadge")),this.createGridTable(),this.add([this.mBackground,this.backButton,this.mGrid]),this.resize()},PicaNewCollectBadgePanel.prototype.createGridTable=function(){var e=this,i=this.height-80*this.dpr,n=323*this.dpr,a=108*this.dpr,o=215*this.dpr,h={x:0,y:0,table:{width:n,height:i,columns:3,cellWidth:a,cellHeight:o,reuseCellContainer:!0,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,n){var s=i.item;return null===n&&(n=new _(e.scene,a,o,e.dpr,e.zoom)),n.setBadgeData(s),n.setHandler(e.send),n}};this.mGrid=new s.GameGridTable(this.scene,h),this.mGrid.layout(),this.mGrid.on("cellTap",(function(i){e.onSelectItemHandler(i)})),this.mGrid.y=.5*-this.height+68*this.dpr+.5*this.mGrid.height},PicaNewCollectBadgePanel.prototype.onSelectItemHandler=function(e){e.badgeData},PicaNewCollectBadgePanel.prototype.onBackHandler=function(){this.send&&this.send.runWith("close")},PicaNewCollectBadgePanel}(Phaser.GameObjects.Container),_=function(e){function CollectBadgeItem(i,n,a,c,m){var f=e.call(this,i,0,0)||this;return f.dpr=c,f.zoom=m,f.setSize(n,a),f.bg=f.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_badge_bg"}),f.badgeIcon=new o.DynamicImage(i,0,0),f.badgeIcon.setTexture(h.d.illustrate_new,"illustrate_survey_badge1"),f.badgeIcon.y=.5*-a+.5*f.badgeIcon.height+20*c,f.titlebg=f.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_badge_title"}),f.titlebg.y=5*c,f.title=f.scene.make.text({style:l.UIHelper.colorStyle("#ffffff",11*c)}).setOrigin(.5),f.title.setFontStyle("bold"),f.title.y=f.titlebg.y,f.countTex=f.scene.make.text({style:l.UIHelper.colorStyle("#A54A00",11*c)}).setOrigin(.5),f.countTex.setFontStyle("bold"),f.countTex.y=30*c,f.rewardsBtn=new o.ThreeSliceButton(f.scene,62*f.dpr,25*f.dpr,h.d.uicommon,l.UIHelper.threeRedSmall,l.UIHelper.threeRedSmall,l.i18n.t("common.receivereward")),f.rewardsBtn.setTextStyle(l.UIHelper.whiteStyle(f.dpr)),f.rewardsBtn.setFontStyle("bold"),f.rewardsBtn.y=f.countTex.y+28*c,f.rewardsBtn.on(s.ClickEvent.Tap,f.onRewardsHandler,f),f.add([f.bg,f.badgeIcon,f.titlebg,f.title,f.countTex,f.rewardsBtn]),f}return f(CollectBadgeItem,e),CollectBadgeItem.prototype.setBadgeData=function(e){this.badgeData=e;var i="illustrate_survey_badge"+e.id;this.badgeIcon.setFrame(i),this.title.text=l.i18n.t("illustrate.badgecollecttips",{name:e.id}),this.countTex.text=e.progress+"/"+e.exp,1===e.received?(this.rewardsBtn.setFrameNormal(l.UIHelper.threeGraySmall),this.rewardsBtn.setText(l.i18n.t("common.receivereward")),this.rewardsBtn.disInteractive()):2===e.received?(this.rewardsBtn.setFrameNormal(l.UIHelper.threeRedSmall),this.rewardsBtn.setText(l.i18n.t("common.receivereward")),this.rewardsBtn.setInteractive()):3===e.received&&(this.rewardsBtn.setFrameNormal(l.UIHelper.threeGraySmall),this.rewardsBtn.setText(l.i18n.t("common.received")),this.rewardsBtn.disInteractive())},Object.defineProperty(CollectBadgeItem.prototype,"select",{set:function(e){this.bg.setFrame(e?"illustrate_survey_reward_icon1":"illustrate_survey_reward_icon")},enumerable:!1,configurable:!0}),CollectBadgeItem.prototype.setHandler=function(e){this.send=e},CollectBadgeItem.prototype.onRewardsHandler=function(){this.send&&this.send.runWith(["badgerewards",this.badgeData.id])},CollectBadgeItem}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewCollectRewardsPanel",(function(){return m}));var a,s=n(788),o=n(0),h=n(790),l=n(789),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaNewCollectRewardsPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h.setInteractive(),h}return c(PicaNewCollectRewardsPanel,e),PicaNewCollectRewardsPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),this.mGameGrid.resetMask()},PicaNewCollectRewardsPanel.prototype.refreshMask=function(){this.mGameGrid.resetMask()},PicaNewCollectRewardsPanel.prototype.show=function(){this.visible=!0},PicaNewCollectRewardsPanel.prototype.hide=function(){this.visible=!1},PicaNewCollectRewardsPanel.prototype.close=function(){this.onCloseHandler()},PicaNewCollectRewardsPanel.prototype.setHandler=function(e){this.send=e},PicaNewCollectRewardsPanel.prototype.checkHasCombination=function(e){return!(!this.combinations||this.combinations.id!==e.id)&&(this.setCombinationData(e),!0)},PicaNewCollectRewardsPanel.prototype.setCombinationData=function(e){this.combinations=e,this.mGameGrid.setItems(e.rewardItems)},PicaNewCollectRewardsPanel.prototype.init=function(){var e=this,i=1.5*this.width,n=3*this.height;this.backgrand=this.scene.make.graphics(void 0,!1),this.backgrand.fillStyle(0,.66),this.backgrand.fillRect(.5*-i,.5*-n,i,n),this.backgrand.setInteractive(new Phaser.Geom.Rectangle(.5*-i,.5*-n,i,n),Phaser.Geom.Rectangle.Contains);var a=new s.NineSlicePatch(this.scene,0,0,this.width,this.height,h.d.uicommon1,"bg",{left:20*this.dpr,top:20*this.dpr,right:30*this.dpr,bottom:40*this.dpr});this.closeButton=new s.Button(this.scene,h.d.uicommon,"close"),this.closeButton.x=.5*this.width-.5*this.closeButton.width+10*this.dpr,this.closeButton.y=.5*-this.height+.5*this.closeButton.height-10*this.dpr,this.closeButton.on(s.ClickEvent.Tap,this.onCloseHandler,this);var l=.5*-a.height+3*this.dpr,c=this.scene.make.image({x:0,y:l,key:h.d.uicommon1,frame:"title"});c.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titleName=this.scene.make.text({x:0,y:l+3*this.dpr,text:o.i18n.t("illustrate.collectrewards"),style:o.UIHelper.colorStyle("#905B06",16*this.dpr)},!1).setOrigin(.5),this.titleName.setFontStyle("bold");var m=318*this.dpr,g=298*this.dpr,_=298*this.dpr,T=80*this.dpr,x={x:0,y:0,table:{width:g,height:m,columns:1,cellWidth:_,cellHeight:T,reuseCellContainer:!0,cellPadX:0*this.dpr,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,n){i.scene;var a=i.index;i.item;return null===n&&(n=new f(e.scene,_,T,e.dpr,e.zoom)).setHandler(e.send),n.setCombinationData(e.combinations,a+1),i.setHeight(n.height),n}};this.mGameGrid=new s.GameGridTable(this.scene,x),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",(function(i){e.onSelectItemHandler(i)})),this.mGameGrid.y=-30*this.dpr,this.confirmBtn=new s.NineSliceButton(this.scene,0,0,127*this.dpr,40*this.dpr,h.d.uicommon,"yellow_btn_normal",o.i18n.t("common.affirm"),this.dpr,this.zoom,o.UIHelper.button(this.dpr)),this.confirmBtn.setFontStyle("bold"),this.confirmBtn.setTextStyle(o.UIHelper.brownishStyle(this.dpr,20)),this.confirmBtn.on(s.ClickEvent.Tap,this.onConfirmHandler,this),this.confirmBtn.y=.5*this.height-.5*this.confirmBtn.height-32*this.dpr,this.add([this.backgrand,a,this.closeButton,c,this.titleName,this.mGameGrid,this.confirmBtn]),this.resize()},PicaNewCollectRewardsPanel.prototype.onSelectItemHandler=function(e){},PicaNewCollectRewardsPanel.prototype.onConfirmHandler=function(){this.onCloseHandler()},PicaNewCollectRewardsPanel.prototype.onCloseHandler=function(){this.send&&this.send.runWith("close")},PicaNewCollectRewardsPanel}(Phaser.GameObjects.Container),f=function(e){function CollectRewardsItem(i,n,a,c,m){var f=e.call(this,i)||this;return f.setSize(n,a),f.dpr=c,f.zoom=m,f.background=f.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_collect_popup_bg_1"}),f.itemIcon=new l.DynamicImage(i,.5*-n+36*c,0),f.itemCountTex=f.scene.make.text({style:o.UIHelper.blackStyle(c)}).setOrigin(.5),f.itemCountTex.x=f.itemIcon.x+15*c,f.itemCountTex.y=15*c,f.itemCountTex.setFontStyle("bold"),f.titleTex=f.scene.make.text({style:o.UIHelper.whiteStyle(c)}).setOrigin(0,.5),f.titleTex.x=.5*-f.width+80*c,f.titleTex.y=-10*c,f.titleTex.setFontStyle("bold"),f.desTex=f.scene.make.text({style:o.UIHelper.colorStyle("#006ED4",10*c)}).setOrigin(0,.5),f.desTex.x=f.titleTex.x,f.desTex.y=10*c,f.collectTex=f.scene.make.text({style:o.UIHelper.colorStyle("#006ED4",10*c)}).setOrigin(.5),f.collectTex.setFontStyle("bold"),f.collectTex.x=.5*n-38*c,f.collectTex.y=-10*c,f.rewardsBtn=new l.ThreeSliceButton(f.scene,62*f.dpr,25*f.dpr,h.d.uicommon,o.UIHelper.threeRedSmall,o.UIHelper.threeRedSmall,o.i18n.t("common.receivereward")),f.rewardsBtn.setTextStyle(o.UIHelper.whiteStyle(f.dpr)),f.rewardsBtn.setFontStyle("bold"),f.rewardsBtn.x=.5*n-.5*f.rewardsBtn.width-10*c,f.rewardsBtn.y=.5*a-.5*f.rewardsBtn.height-15*c,f.rewardsBtn.on(s.ClickEvent.Tap,f.onRewardsHandler,f),f.add([f.background,f.itemIcon,f.itemCountTex,f.titleTex,f.desTex,f.collectTex,f.rewardsBtn]),f}return c(CollectRewardsItem,e),CollectRewardsItem.prototype.setCombinationData=function(e,i){this.combiData=e,this.indexed=i,this.titleTex.text=e.name,this.desTex.text=e.des;var n=e.rewardItems[i-1],a=o.Url.getOsdRes(n.texturePath);this.itemIcon.load(a),this.itemIcon.scale=this.dpr/this.zoom,this.itemCountTex.visible=!0,this.itemCountTex.text=n.count+"";var s=this.getbgName(Number(e.difficult)),h=s[0];this.background.setFrame(s[1]);var l=e.subsection[i-1];this.collectTex.text=e.gotcount+"/"+l,this.collectTex.setColor(h),this.desTex.setColor(h),e&&(e.gotindex&&-1!==e.gotindex.indexOf(i)?(this.rewardsBtn.setFrameNormal(o.UIHelper.threeGraySmall),this.rewardsBtn.setText(o.i18n.t("common.received")),this.rewardsBtn.disInteractive()):e.gotcount>=l?(this.rewardsBtn.setFrameNormal(o.UIHelper.threeRedSmall),this.rewardsBtn.setText(o.i18n.t("common.receivereward")),this.rewardsBtn.setInteractive()):(this.rewardsBtn.setFrameNormal(o.UIHelper.threeGraySmall),this.rewardsBtn.setText(o.i18n.t("common.receivereward")),this.rewardsBtn.disInteractive()))},CollectRewardsItem.prototype.setHandler=function(e){this.send=e},CollectRewardsItem.prototype.onRewardsHandler=function(){this.send&&this.send.runWith(["combrewards",{id:this.combiData.id,indexed:this.indexed}])},CollectRewardsItem.prototype.getbgName=function(e){var i;switch(e){case 1:i=["#006523","illustrate_collect_popup_bg_1"];break;case 2:i=["#005BAF","illustrate_collect_popup_bg_2"];break;case 3:i=["#692DD6","illustrate_collect_popup_bg_3"];break;case 4:i=["#7C4C00","illustrate_collect_popup_bg_4"];break;case 5:i=["#A50005","illustrate_collect_popup_bg_5"]}return i},CollectRewardsItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewCombinationPanel",(function(){return m}));var a,s=n(788),o=n(0),h=n(790),l=n(980),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaNewCombinationPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.setSize(a,s),l.dpr=o,l.zoom=h,l.render=n,l.setInteractive(),l.init(),l}return c(PicaNewCombinationPanel,e),PicaNewCombinationPanel.prototype.resize=function(e,i){e=e||this.width,i=i||this.height,this.setSize(e,i)},PicaNewCombinationPanel.prototype.refreshMask=function(){this.mGameGrid.resetMask()},PicaNewCombinationPanel.prototype.init=function(){var e=1.5*this.width,i=3*this.height;this.backgrand=this.scene.make.graphics(void 0,!1),this.backgrand.fillStyle(0,.77),this.backgrand.fillRect(.5*-e,.5*-i,e,i),this.backgrand.setInteractive(new Phaser.Geom.Rectangle(.5*-e,.5*-i,e,i),Phaser.Geom.Rectangle.Contains);var n=new s.NineSlicePatch(this.scene,0,0,this.width,this.height,h.d.uicommon1,"bg",{left:20*this.dpr,top:20*this.dpr,right:30*this.dpr,bottom:40*this.dpr});this.closeButton=new s.Button(this.scene,h.d.uicommon,"close"),this.closeButton.x=.5*this.width-.5*this.closeButton.width+10*this.dpr,this.closeButton.y=.5*-this.height+.5*this.closeButton.height-10*this.dpr,this.closeButton.on(s.ClickEvent.Tap,this.onCloseHandler,this);var a=.5*-n.height+3*this.dpr,l=this.scene.make.image({x:0,y:a,key:h.d.uicommon1,frame:"title"});l.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titleName=this.scene.make.text({x:0,y:a+3*this.dpr,text:o.i18n.t("illustrate.furindetail"),style:o.UIHelper.colorStyle("#905B06",16*this.dpr)},!1).setOrigin(.5),this.titleName.setFontStyle("bold"),this.bottomBg=this.scene.make.graphics(void 0,!1),this.bottomBg.clear(),this.bottomBg.fillStyle(5427711,1);var c=298*this.dpr,m=390*this.dpr;this.bottomBg.fillRoundedRect(.5*-c,.5*-m,c,m),this.bottomBg.y=.5*-this.height+.5*m+45*this.dpr,this.combineNameBg=this.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_favorites_popup_title"}),this.combineNameBg.y=.5*-this.height+75*this.dpr,this.combinName=this.scene.make.text({style:o.UIHelper.whiteStyle(this.dpr,14)}).setOrigin(.5),this.combinName.y=this.combineNameBg.y,this.createGridTable(),this.add([this.backgrand,n,l,this.titleName,this.closeButton,this.bottomBg,this.combineNameBg,this.combinName,this.mGameGrid]),this.resize(0,0)},PicaNewCombinationPanel.prototype.setGallaryData=function(e){this.combinName.text=e.name,this.mGameGrid.setItems(e.requirement),this.mGameGrid.setT(0)},PicaNewCombinationPanel.prototype.setHandler=function(e){this.send=e},PicaNewCombinationPanel.prototype.onCloseHandler=function(){this.send&&this.send.runWith("close")},PicaNewCombinationPanel.prototype.createGridTable=function(){var e=this,i=330*this.dpr,n=285*this.dpr,a=73*this.dpr,o=92*this.dpr,h={x:0,y:0,table:{width:n,height:i,columns:4,cellWidth:a,cellHeight:o,reuseCellContainer:!0,cellPadX:-5*this.dpr,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,n){i.scene,e.mGameGrid.items.length,i.index;var s=i.item;return null===n&&(n=new l.PicaIllustratedItemButton(e.scene,a,o,e.dpr,e.zoom)),n.setItemData(s),n}};this.mGameGrid=new s.GameGridTable(this.scene,h),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",(function(i){e.onSelectItemHandler(i)})),this.mGameGrid.y=.5*this.height-.5*i-20*this.dpr},PicaNewCombinationPanel.prototype.onSelectItemHandler=function(e){this.send&&this.send.runWith(["furidetail",e.itemData])},PicaNewCombinationPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewFuriniDetailPanel",(function(){return f}));var a,s=n(795),o=n(788),h=n(0),l=n(790),c=n(796),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaNewFuriniDetailPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.setSize(a,s),l.dpr=o,l.zoom=h,l.render=n,l.setInteractive(),l.init(),l}return m(PicaNewFuriniDetailPanel,e),PicaNewFuriniDetailPanel.prototype.resize=function(e,i){e=e||this.width,i=i||this.height,this.setSize(e,i),this.maskGraphic.clear(),this.maskGraphic.fillStyle(4121087);var n=(this.width-20*this.dpr)*this.zoom,a=150*this.dpr*this.zoom;this.maskGraphic.fillRect(.5*-n,.5*-a,n,a)},PicaNewFuriniDetailPanel.prototype.refreshMask=function(){var e=this.mDetailDisplay.getWorldTransformMatrix();this.maskGraphic.x=e.tx,this.maskGraphic.y=e.ty},PicaNewFuriniDetailPanel.prototype.init=function(){var e=1.5*this.width,i=3*this.height;this.backgrand=this.scene.make.graphics(void 0,!1),this.backgrand.fillStyle(0,.66),this.backgrand.fillRect(.5*-e,.5*-i,e,i),this.backgrand.setInteractive(new Phaser.Geom.Rectangle(.5*-e,.5*-i,e,i),Phaser.Geom.Rectangle.Contains);var n=new o.NineSlicePatch(this.scene,0,0,this.width,this.height,l.d.uicommon1,"bg",{left:20*this.dpr,top:20*this.dpr,right:30*this.dpr,bottom:40*this.dpr});n.setInteractive(),this.closeButton=new o.Button(this.scene,l.d.uicommon,"close"),this.closeButton.x=.5*this.width-.5*this.closeButton.width+10*this.dpr,this.closeButton.y=.5*-this.height+.5*this.closeButton.height-10*this.dpr,this.closeButton.on(o.ClickEvent.Tap,this.onCloseHandler,this);var a=.5*-n.height+3*this.dpr,c=this.scene.make.image({x:0,y:a,key:l.d.uicommon1,frame:"title"});c.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.titleName=this.scene.make.text({x:0,y:a+3*this.dpr,text:h.i18n.t("illustrate.furindetail"),style:h.UIHelper.colorStyle("#905B06",16*this.dpr)},!1).setOrigin(.5),this.titleName.setFontStyle("bold"),this.codeName=this.scene.make.text({x:.5*this.width-25*this.dpr,y:a+40*this.dpr,style:h.UIHelper.colorStyle("#205BBC",12*this.dpr)},!1).setOrigin(1,.5),this.mDetailDisplay=new s.DetailDisplay(this.scene,this.render),this.mDetailDisplay.setFixedScale(this.dpr/this.scale),this.mDetailDisplay.y=-60*this.dpr,this.maskGraphic=this.scene.make.graphics(void 0,!1),this.mDetailDisplay.mask=this.maskGraphic.createGeometryMask(),this.starImg=this.scene.make.image({key:l.d.uicommon,frame:"bag_star_big_1"}),this.starImg.y=50*this.dpr,this.bottomBg=this.scene.make.graphics(void 0,!1),this.bottomBg.clear(),this.bottomBg.fillStyle(5427711,.22);var m=293*this.dpr,f=78*this.dpr;this.bottomBg.fillRoundedRect(.5*-m,.5*-f,m,f),this.bottomBg.y=.5*this.height-.5*f-25*this.dpr,this.furinName=this.scene.make.text({style:h.UIHelper.colorStyle("#205BBC",15*this.dpr)}).setOrigin(0,.5),this.furinName.x=.5*-m+10*this.dpr,this.furinName.y=this.bottomBg.y-.5*f+18*this.dpr,this.furiDes=this.scene.make.text({style:h.UIHelper.colorStyle("#000000",11*this.dpr)}).setOrigin(0,.5),this.furiDes.setWordWrapWidth(m-10*this.dpr,!0),this.furiDes.x=this.furinName.x,this.furiDes.y=this.furinName.y+25*this.dpr,this.add([this.backgrand,n,c,this.titleName,this.closeButton,this.codeName,this.mDetailDisplay,this.starImg,this.bottomBg,this.furinName,this.furiDes]),this.resize(0,0),this.backgrand.on("pointerup",this.onCloseHandler,this)},PicaNewFuriniDetailPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.maskGraphic.destroy()},PicaNewFuriniDetailPanel.prototype.setProp=function(e){this.itemData=e,this.codeName.text=e.code,this.furinName.text=e.name,this.furiDes.text=e.des,this.starImg.setFrame("bag_star_big_"+e.grade),this.setResource(e)},PicaNewFuriniDetailPanel.prototype.setHandler=function(e){this.send=e},PicaNewFuriniDetailPanel.prototype.setResource=function(e){var i=e.serializeString?e.elepi:e;c.l.showDetailDisplay({display:this.mDetailDisplay,dpr:this.dpr,data:i,render:this.render,sn:e.sn,itemid:e.id,serialize:e.serializeString})},PicaNewFuriniDetailPanel.prototype.onCloseHandler=function(){this.send&&this.send.run()},PicaNewFuriniDetailPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewIllustratedDetailPanel",(function(){return T}));var a,s,o=n(788),h=n(789),l=n(790),c=n(0),m=n(791),f=n(1051),g=n(1052),_=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),T=function(e){function PicaNewIllustratedDetailPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.minit=!1,h.redMap=new Map,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h.setInteractive(),h}return _(PicaNewIllustratedDetailPanel,e),PicaNewIllustratedDetailPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.backButton.x=.5*-this.width+.5*this.backButton.width+10*this.dpr,this.backButton.y=.5*-this.height+45*this.dpr;var s=20*this.dpr;this.topCon.y=.5*-this.height+.5*this.topCon.height+s,this.toggleCon.y=this.topCon.y,this.horProgress.refreshMask(),this.setSize(n,a),this.layoutOption(this.optionType),this.minit=!0},PicaNewIllustratedDetailPanel.prototype.setHandler=function(e){this.send=e},PicaNewIllustratedDetailPanel.prototype.setGallaryData=function(e){e&&(this.galleryData=e,1===this.optionType&&e&&(this.setHorRewardsStatus(e.galleryExp,e.nextLevelExp,e.beforeExp),this.badgeTex.text=e.badgeExp+"/"+e.badgePresentLevelexp,this.badgeImg.setFrame("illustrate_survey_badge"+e.badgeLevel),this.levelButton.setText(e.galleryLevel+""),this.galleryPanel.setGallaryData(e)))},PicaNewIllustratedDetailPanel.prototype.setDisplayCollectDatas=function(e){this.combinations=e,2===this.optionType&&this.collectPanel.setCombinationData(e)},PicaNewIllustratedDetailPanel.prototype.setHorRewardsStatus=function(e,i,n){var a=e-n,s=i-n;this.horProgress.setProgress(a,s),this.progressTex.setText(e+" / "+i);for(var o=Math.floor(a/s*3+.01),h=0;h<this.rewardImgs.length;h++)h+1<=o?this.rewardImgs[h].setFrame("illustrate_survey_lv_reward"):this.rewardImgs[h].setFrame("illustrate_survey_lv_reward_1")},PicaNewIllustratedDetailPanel.prototype.setRedsState=function(e){this.redMap.forEach((function(i,n){i.visible=-1!==e.indexOf(n)}))},PicaNewIllustratedDetailPanel.prototype.setAutoOption=function(e){for(var i=0,n=this.toggleCon.list;i<n.length;i++){var a=n[i];a.getData("item")===e&&this.onToggleButtonHandler(void 0,a)}},PicaNewIllustratedDetailPanel.prototype.init=function(){this.mBackground=new m.CommonBackground(this.scene,0,0,this.width,this.height,l.d.illustrate_new,"illustrate_survey_bg",12836852);var e=this.scene.make.image({key:l.d.illustrate_new,frame:"illustrate_survey_bg_veins"});e.y=.5*-this.height+.5*e.height,this.mBackground.add(e),this.add(this.mBackground),this.backButton=m.UITools.createBackButton(this.scene,this.dpr,this.onBackHandler,this),this.topCon=this.scene.make.container(void 0,!1),this.topCon.setSize(this.width,100*this.dpr),this.galleryCon=this.scene.make.container(void 0,!1),this.badgeButton=new h.ButtonEventDispatcher(this.scene,0,0,!0),this.badgeButton.setSize(60*this.dpr,60*this.dpr),this.badgeButton.enable=!0,this.badgeButton.on(o.ClickEvent.Tap,this.onBadgeRewardsHandler,this),this.badgeImg=this.scene.make.image({key:l.d.illustrate_new,frame:"illustrate_survey_badge1"}),this.badgeTex=this.scene.make.text({style:c.UIHelper.whiteStyle(this.dpr,10)}).setOrigin(.5),this.badgeTex.setFontStyle("bold"),this.badgeTex.setStroke("#26365A",2*this.dpr),this.badgeTex.y=this.badgeImg.y+.5*this.badgeImg.height-5*this.dpr,this.badgeButton.add([this.badgeImg,this.badgeTex]),this.badgeButton.x=.5*this.topCon.width-.5*this.badgeButton.width-10*this.dpr,this.badgeButton.y=.5*-this.topCon.height+.5*this.badgeButton.height+5*this.dpr,this.redMap.set(s.badgeLevel,this.creatRedImge(this.scene,this.badgeButton,!1)),this.toggleCon=this.scene.make.container(void 0,!1),this.selectLine=this.scene.make.image({key:l.d.illustrate_new,frame:"illustrate_nav_select"}),this.toggleCon.add(this.selectLine),this.toggleCon.y=0,this.horProgress=new h.ProgressMaskBar(this.scene,l.d.illustrate_new,"illustrate_survey_lv_bottom","illustrate_survey_lv_top",c.UIHelper.whiteStyle(this.dpr,6)),this.horProgress.y=this.toggleCon.y+.5*this.toggleCon.height+50*this.dpr,this.horProgress.x=15*this.dpr,this.createRewardImgs(),this.levelButton=new o.Button(this.scene,l.d.illustrate_new,"illustrate_survey_lv_icon","illustrate_survey_lv_icon","1",void 0,this.dpr,this.zoom),this.levelButton.setFontStyle("bold"),this.levelButton.setTextStyle(c.UIHelper.whiteStyle(this.dpr,15)),this.levelButton.x=this.horProgress.x-.5*this.horProgress.width-.5*this.levelButton.width-8*this.dpr,this.levelButton.y=this.horProgress.y,this.redMap.set(s.expLevel,this.creatRedImge(this.scene,this.levelButton)),this.levelButton.on(o.ClickEvent.Tap,this.onHorRewardsHandler,this),this.progressTex=this.scene.make.text({style:c.UIHelper.whiteStyle(this.dpr)}).setOrigin(.5),this.progressTex.setFontStyle("bold"),this.progressTex.x=this.horProgress.x,this.progressTex.y=this.horProgress.y+6*this.dpr;var i=new h.ButtonEventDispatcher(this.scene,0,this.levelButton.y);i.y=this.levelButton.y,i.setSize(260*this.dpr,30*this.dpr),i.enable=!0,i.on(o.ClickEvent.Tap,this.onHorRewardsHandler,this),this.galleryCon.add([this.badgeButton,this.horProgress,i,this.levelButton,this.progressTex]),this.collectedButton=new o.Button(this.scene,l.d.illustrate_new,"illustrate_collect_badge","illustrate_collect_badge",void 0,this.dpr,this.zoom),this.collectedButton.on(o.ClickEvent.Tap,this.onCollectedHandler,this),this.collectedButton.x=this.badgeButton.x,this.collectedButton.y=this.badgeButton.y,this.topCon.add([this.galleryCon,this.collectedButton]),this.createOptionButtons();var n=.5*this.height-this.topCon.y-.5*this.topCon.height;this.galleryPanel=new f.PicaNewIllustratedGalleryPanel(this.scene,this.width-20*this.dpr,n-23*this.dpr,this.dpr,this.zoom),this.collectPanel=new g.PicaIllustredCollectPanel(this.scene,this.width,n-13*this.dpr,this.dpr,this.zoom),this.galleryPanel.setHandler(new c.Handler(this,this.onCollectHandler)),this.collectPanel.setHandler(new c.Handler(this,this.onCollectHandler)),this.collectPanel.hide(),this.galleryPanel.hide(),this.add([this.backButton,this.topCon,this.toggleCon,this.galleryPanel,this.collectPanel]),this.resize()},PicaNewIllustratedDetailPanel.prototype.createOptionButtons=function(){for(var e=[{text:c.i18n.t("illustrate.title"),type:1},{text:c.i18n.t("illustrate.collect"),type:2}],i=120*this.dpr,n=i/e.length,a=20*this.dpr,l=-i/2,m=0;m<e.length;m++){var f=e[m],g=new h.ToggleColorButton(this.scene,n,20*this.dpr,this.dpr,f.text,c.UIHelper.colorStyle("#ffffff",14*this.dpr));g.on(o.ClickEvent.Tap,this.onToggleButtonHandler,this),g.x=l+.5*n,g.setData("item",f.type),g.setSize(n,a),this.toggleCon.add(g),g.setChangeColor("#FFF449"),g.setNormalColor("#ffffff"),g.setFontStyle("bold"),l+=n,this.curToggle||this.onToggleButtonHandler(void 0,g);var _=0===m?s.galley:s.collect;this.redMap.set(_,this.creatRedImge(this.scene,g,!1))}this.selectLine.y=20*this.dpr},PicaNewIllustratedDetailPanel.prototype.createRewardImgs=function(){this.rewardImgs=[];for(var e=this.horProgress.width,i=this.horProgress.y-15*this.dpr,n=.5*-e+this.horProgress.x,a=e/3,s=0;s<3;s++){var o=this.scene.make.image({key:l.d.illustrate_new,frame:"illustrate_survey_lv_reward_1"});o.y=i,o.x=n+a*(s+1)+(2===s?-10*this.dpr:0),this.rewardImgs.push(o),this.galleryCon.add(o)}},PicaNewIllustratedDetailPanel.prototype.creatRedImge=function(e,i,n){void 0===n&&(n=!0);var a=e.make.image({key:l.d.illustrate_new,frame:"illustrate_survey_lv_prompt_s"});return a.x=n?.5*-i.width+.5*a.width:.5*i.width-.5*a.width,a.y=.5*-i.height+.5*a.height,i.add(a),a.visible=!1,a},PicaNewIllustratedDetailPanel.prototype.onToggleButtonHandler=function(e,i){this.curToggle!==i&&(this.curToggle&&(this.curToggle.isOn=!1),i.isOn=!0,this.curToggle=i,this.optionType=i.getData("item"),this.selectLine.x=i.x,this.minit&&(this.layoutOption(this.optionType),1===this.optionType?this.setGallaryData(this.galleryData):2===this.optionType&&this.send&&this.send.runWith("displaycollect")))},PicaNewIllustratedDetailPanel.prototype.layoutOption=function(e){var i=.5*this.height-this.topCon.y-.5*this.topCon.height;if(1===e){this.galleryCon.visible=!0,this.collectedButton.visible=!1,i-=23*this.dpr,this.collectPanel.hide(),this.galleryPanel.show();var n=this.topCon.y+.5*this.topCon.height+.5*i+20*this.dpr;this.galleryPanel.y=n,this.galleryPanel.resize(this.width,i)}else if(2===e){this.galleryCon.visible=!1,this.collectedButton.visible=!0,i+=40*this.dpr,this.galleryPanel.hide(),this.collectPanel.show();n=this.topCon.y+.5*this.topCon.height+.5*i-10*this.dpr;this.collectPanel.y=n,this.collectPanel.resize(this.width,i)}},PicaNewIllustratedDetailPanel.prototype.onHorRewardsHandler=function(){this.send&&this.send.runWith("showlevelrewards")},PicaNewIllustratedDetailPanel.prototype.onBadgeRewardsHandler=function(){this.send&&this.send.runWith("badgerewards")},PicaNewIllustratedDetailPanel.prototype.onSelectItemHandler=function(e){e.showTips()},PicaNewIllustratedDetailPanel.prototype.onCollectHandler=function(e,i){this.send&&this.send.runWith([e,i])},PicaNewIllustratedDetailPanel.prototype.onCollectedHandler=function(){this.send&&this.send.runWith("showalreadycollected")},PicaNewIllustratedDetailPanel.prototype.onBackHandler=function(){this.send&&this.send.runWith("close")},PicaNewIllustratedDetailPanel}(Phaser.GameObjects.Container);!function(e){e[e.expLevel=9]="expLevel",e[e.badgeLevel=11]="badgeLevel",e[e.galley=2]="galley",e[e.collect=10]="collect"}(s||(s={}))},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewIllustratedGalleryPanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(980),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaNewIllustratedGalleryPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.horizontalItem=[],h.pageCount=0,h.maxPage=0,h.pagInterval=4,h.slidermoving=!1,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h}return m(PicaNewIllustratedGalleryPanel,e),PicaNewIllustratedGalleryPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),a>600*this.dpr&&(this.pagInterval=5),this.gridLayout.y=.5*-this.height+.5*this.gridLayout.height,this.bottomPageTex.y=.5*this.height-40*this.dpr,this.horSlider.y=this.bottomPageTex.y+20*this.dpr,this.leftPageBtn.x=this.horSlider.x-135*this.dpr-25*this.dpr,this.leftPageBtn.y=this.horSlider.y,this.rightPageBtn.x=this.horSlider.x+135*this.dpr+25*this.dpr,this.rightPageBtn.y=this.horSlider.y,this.setInteractive()},PicaNewIllustratedGalleryPanel.prototype.show=function(){this.scene.input.on("pointerup",this.onSliderUpHandler,this),this.visible=!0},PicaNewIllustratedGalleryPanel.prototype.hide=function(){this.scene.input.off("pointerup",this.onSliderUpHandler,this),this.visible=!1},PicaNewIllustratedGalleryPanel.prototype.setHandler=function(e){this.send=e},PicaNewIllustratedGalleryPanel.prototype.setGallaryData=function(e){if(e){this.galleryData=e;var i=e.list;this.maxPage=Math.ceil(i.length/(4*this.pagInterval)),this.pageCount=this.pageCount||1,this.setItemPages(this.pageCount),this.horSlider.setValue(this.pageCount/this.maxPage)}},PicaNewIllustratedGalleryPanel.prototype.init=function(){var e=96*this.dpr,i=this.width,n=100*this.dpr;this.gridLayout=new o.GridLayoutGroup(this.scene,i,n,{cellSize:new Phaser.Math.Vector2(i,e),space:new Phaser.Math.Vector2(0,10*this.dpr),startAxis:o.AxisType.Horizontal,constraint:o.ConstraintType.FixedColumnCount,constraintCount:1,alignmentType:o.AlignmentType.UpperCenter}),this.add(this.gridLayout),this.bottomPageTex=this.scene.make.text({style:l.UIHelper.colorStyle("#3E5DB2",12*this.dpr)}).setOrigin(.5);var a=this.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_page_bottom"}),c=this.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_page_top"}),m=this.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_page"});this.thumb=m,this.pageCountText=this.scene.make.text({style:l.UIHelper.colorStyle("#744803",14*this.dpr)}).setOrigin(.5),this.horSlider=new s.GameSlider(this.scene,{x:0,y:0,width:269*this.dpr,height:4*this.dpr,orientation:1,background:a,indicator:c,thumb:m,offsetX:.5*m.width,valuechangeCallback:this.onSliderValueHandler,valuechangeCallbackScope:this,value:.5}),m.on("pointerup",this.onSliderUpHandler,this),this.horSlider.add(this.pageCountText),this.horSlider.setValue(0),this.leftPageBtn=new s.Button(this.scene,h.d.illustrate_new,"illustrate_survey_arrow_left"),this.leftPageBtn.setInteractiveSize(30*this.dpr,30*this.dpr),this.leftPageBtn.on(s.ClickEvent.Tap,this.onLeftPageHandler,this),this.rightPageBtn=new s.Button(this.scene,h.d.illustrate_new,"illustrate_survey_arrow_right"),this.rightPageBtn.on(s.ClickEvent.Tap,this.onRightPageHandler,this),this.rightPageBtn.setInteractiveSize(30*this.dpr,30*this.dpr),this.add([this.gridLayout,this.bottomPageTex,this.horSlider,this.leftPageBtn,this.rightPageBtn]),this.resize()},PicaNewIllustratedGalleryPanel.prototype.setHorizontalItems=function(e){for(var i=0,n=this.horizontalItem;i<n.length;i++){(h=n[i]).visible=!1}for(var a=330*this.dpr,s=96*this.dpr,o=0;o<e.length;o++){var h=void 0;o<this.horizontalItem.length?h=this.horizontalItem[o]:((h=new g(this.scene,a,s,this.dpr,this.zoom)).setHandler(new l.Handler(this,this.onSelectItemHandler)),this.gridLayout.add(h),this.horizontalItem.push(h)),h.setItemDatas(e[o]),h.visible=!0}this.gridLayout.Layout(),this.gridLayout.y=.5*-this.height+.5*this.gridLayout.height},PicaNewIllustratedGalleryPanel.prototype.getItemDataArr=function(e){for(var i=[],n=0;n<e.length;n+=4){var a=e.slice(n,n+4);i.push(a)}return i},PicaNewIllustratedGalleryPanel.prototype.setItemPages=function(e){var i=4*this.pagInterval,n=(e-1)*i,a=this.galleryData.list.slice(n,n+i),s=this.getItemDataArr(a);this.bottomPageTex.text=e+"/"+this.maxPage,this.setHorizontalItems(s),this.slidermoving=!1},PicaNewIllustratedGalleryPanel.prototype.onSelectItemHandler=function(e){var i=this,n=e.itemData;if(n){var a=n.status,s=!1;3===a?e.playLightAni(new l.Handler(this,(function(){i.send&&i.send.runWith(["getlightrewardsd",n.id])}))):1===a?s=!0:2!==a&&4!==a||(s=!0),s&&this.send&&this.send.runWith(["furidetail",n])}},PicaNewIllustratedGalleryPanel.prototype.onSliderValueHandler=function(e){this.pageCountText.x=this.thumb.x;var i=Math.floor(this.maxPage*e+.9);i>this.maxPage?i=this.maxPage:0===i&&(i=1),this.pageCountText.text=""+(this.pageCount<10?"0"+this.pageCount:this.pageCount),this.pageCount!==i&&(this.pageCount=i,this.slidermoving=!0)},PicaNewIllustratedGalleryPanel.prototype.onSliderUpHandler=function(){this.slidermoving&&this.setItemPages(this.pageCount),this.slidermoving=!1,this.horSlider.setValue(this.pageCount/this.maxPage)},PicaNewIllustratedGalleryPanel.prototype.onLeftPageHandler=function(){1!==this.pageCount&&(this.pageCount--,this.setItemPages(this.pageCount),this.horSlider.setValue(this.pageCount/this.maxPage))},PicaNewIllustratedGalleryPanel.prototype.onRightPageHandler=function(){this.pageCount!==this.maxPage&&(this.pageCount++,this.setItemPages(this.pageCount),this.horSlider.setValue(this.pageCount/this.maxPage))},PicaNewIllustratedGalleryPanel}(Phaser.GameObjects.Container),g=function(e){function IllustratedHorizontalItem(i,n,a,s,o){var l=e.call(this,i)||this;return l.items=[],l.dpr=s,l.zoom=o,l.setSize(n,a),l.bg=l.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_list_bg"}),l.bg.y=.5*a-.5*l.bg.height,l.add(l.bg),l}return m(IllustratedHorizontalItem,e),IllustratedHorizontalItem.prototype.setItemDatas=function(e){for(var i=0,n=this.items;i<n.length;i++){(f=n[i]).visible=!1}for(var a=-114*this.dpr,o=32*this.dpr,h=48*this.dpr,l=95*this.dpr,m=0;m<e.length;m++){var f=void 0;m<this.items.length?f=this.items[m]:((f=new c.PicaNewIllustratedItem(this.scene,h,l,this.dpr,this.zoom)).on(s.ClickEvent.Tap,this.onItemHandler,this),this.add(f),this.items.push(f)),f.setItemData(e[m]),f.visible=!0,f.x=a,a+=h+o}},IllustratedHorizontalItem.prototype.setHandler=function(e){this.send=e},IllustratedHorizontalItem.prototype.onItemHandler=function(e,i){this.send&&this.send.runWith(i)},IllustratedHorizontalItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaIllustredCollectPanel",(function(){return m}));var a,s=n(788),o=n(0),h=n(790),l=n(789),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaIllustredCollectPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h.setInteractive(),h}return c(PicaIllustredCollectPanel,e),PicaIllustredCollectPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),this.mGameGrid.setSize(n,a-30*this.dpr),this.mGameGrid.y=-15*this.dpr,this.mGameGrid.resetMask()},PicaIllustredCollectPanel.prototype.refresMask=function(){this.mGameGrid.resetMask()},PicaIllustredCollectPanel.prototype.show=function(){this.visible=!0},PicaIllustredCollectPanel.prototype.hide=function(){this.visible=!1},PicaIllustredCollectPanel.prototype.setHandler=function(e){this.send=e},PicaIllustredCollectPanel.prototype.setCombinationData=function(e){if(0===e.length)return this.noCombinationTip.visible=!0,void(this.mGameGrid.visible=!1);this.noCombinationTip.visible=!1,this.mGameGrid.visible=!0,this.mGameGrid.setItems(e),this.mGameGrid.layout(),this.mGameGrid.setT(0)},PicaIllustredCollectPanel.prototype.init=function(){var e=this,i=this.height,n=326*this.dpr,a=82*this.dpr,l={x:15*this.dpr,y:0,table:{width:this.width,height:i,columns:1,cellWidth:n,cellHeight:a,reuseCellContainer:!0,cellPadX:0*this.dpr,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,s){var h=i.item;return null===s&&(s=new f(e.scene,n,a,e.dpr,e.zoom)).setHandler(new o.Handler(e,e.onItemHandler)),s.setCombinationData(h),i.setHeight(s.height),s}};this.mGameGrid=new s.GameGridTable(this.scene,l),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",(function(i){e.onSelectItemHandler(i)}));var c=this.scene.make.image({key:h.d.uicommon,frame:"task_no"}),m=this.scene.make.text({text:o.i18n.t("illustrate.nocomniationtip"),style:o.UIHelper.whiteStyle(this.dpr)}).setOrigin(.5);m.y=.5*c.height+15*this.dpr,this.noCombinationTip=this.scene.make.container(void 0),this.noCombinationTip.add([c,m]),this.noCombinationTip.y=.5*-this.height+100*this.dpr,this.noCombinationTip.visible=!1,this.add([this.mGameGrid,this.noCombinationTip]),this.resize()},PicaIllustredCollectPanel.prototype.onSelectItemHandler=function(e){this.send&&this.send.runWith(["showcombination",e.combiData])},PicaIllustredCollectPanel.prototype.onItemHandler=function(e,i){"combrewards"===e&&(this.send&&this.send.runWith(["combinationrewards",i]),this.curSelectData=i)},PicaIllustredCollectPanel}(Phaser.GameObjects.Container),f=function(e){function IllustratedCollectItem(i,n,a,c,m){var f=e.call(this,i)||this;return f.setSize(n,a),f.dpr=c,f.zoom=m,f.background=f.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_collect_bg_1"}),f.itemIcon=new l.DynamicImage(i,.5*-n+36*c,0),f.titleTex=f.scene.make.text({style:o.UIHelper.whiteStyle(c)}).setOrigin(0,.5),f.titleTex.x=.5*-f.width+80*c,f.titleTex.y=-10*c,f.titleTex.setFontStyle("bold"),f.desTex=f.scene.make.text({style:o.UIHelper.colorStyle("#006ED4",10*c)}).setOrigin(0,.5),f.desTex.x=f.titleTex.x,f.desTex.y=10*c,f.collectTex=f.scene.make.text({style:o.UIHelper.whiteStyle(c,14)}).setOrigin(1,.5),f.collectTex.setFontStyle("bold"),f.collectTex.x=.5*n-42*c,f.rewardsBtn=new s.Button(f.scene,h.d.illustrate_new,"illustrate_collect_reward","illustrate_collect_reward"),f.rewardsBtn.x=.5*f.width-10*f.dpr-.5*f.rewardsBtn.width,f.rewardsBtn.y=0,f.rewardsBtn.on(s.ClickEvent.Tap,f.onRewardsHandler,f),f.rewardRed=f.creatRedImge(i,f.rewardsBtn,!1),f.add([f.background,f.itemIcon,f.titleTex,f.desTex,f.collectTex,f.rewardsBtn]),f}return c(IllustratedCollectItem,e),IllustratedCollectItem.prototype.setCombinationData=function(e){this.combiData=e,this.titleTex.text=e.name,this.desTex.text=e.des,e.difficult=Number(e.difficult);var i=e.requirement[0],n=o.Url.getOsdRes(i.texturePath);this.itemIcon.load(n),this.itemIcon.scale=this.dpr/this.zoom;var a=this.getbgName(e.difficult),s=a[0];this.background.setFrame(a[1]),this.collectTex.text=e.gotcount+"/"+e.requirement.length,this.collectTex.setColor(s),this.desTex.setColor(s),this.rewardRed.visible=e.hasRewards},IllustratedCollectItem.prototype.setHandler=function(e){this.send=e},IllustratedCollectItem.prototype.onRewardsHandler=function(){this.send&&this.send.runWith(["combrewards",this.combiData])},IllustratedCollectItem.prototype.getbgName=function(e){var i;switch(e){case 1:i=["#006523","illustrate_collect_bg_1"];break;case 2:i=["#005BAF","illustrate_collect_bg_2"];break;case 3:i=["#692DD6","illustrate_collect_bg_3"];break;case 4:i=["#7C4C00","illustrate_collect_bg_4"];break;case 5:i=["#A50005","illustrate_collect_bg_5"]}return i},IllustratedCollectItem.prototype.creatRedImge=function(e,i,n){void 0===n&&(n=!0);var a=e.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_lv_prompt_s"});return a.x=n?.5*-i.width+.5*a.width:.5*i.width-.5*a.width,a.y=.5*-i.height+.5*a.height,i.add(a),a.visible=!1,a},IllustratedCollectItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewIllustratedListPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(794),m=n(804),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaNewIllustratedListPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.redMap=new Map,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h}return f(PicaNewIllustratedListPanel,e),PicaNewIllustratedListPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),this.backButton.x=.5*-this.width+.5*this.backButton.width+10*this.dpr,this.backButton.y=.5*-this.height+45*this.dpr},PicaNewIllustratedListPanel.prototype.setHandler=function(e){this.send=e},PicaNewIllustratedListPanel.prototype.init=function(){this.backButton=c.UITools.createBackButton(this.scene,this.dpr,this.onBackHandler,this,l.i18n.t("illustrate.title"));var e=305*this.dpr,i=330*this.dpr;this.gridLayout=new o.GridLayoutGroup(this.scene,e,i,{cellSize:new Phaser.Math.Vector2(304*this.dpr,96*this.dpr),space:new Phaser.Math.Vector2(0,21*this.dpr),startAxis:o.AxisType.Horizontal,constraint:o.ConstraintType.FixedColumnCount,constraintCount:1,alignmentType:o.AlignmentType.UpperCenter}),this.add([this.gridLayout,this.backButton]),this.resize()},PicaNewIllustratedListPanel.prototype.setListData=function(){for(var e=0,i=this.getListData();e<i.length;e++){var n=i[e],a=new _(this.scene,304*this.dpr,96*this.dpr,this.dpr,this.zoom);if(a.setDisplayData(n),this.gridLayout.add(a),n.redType){var s=c.UITools.creatRedImge(this.scene,a);this.redMap.set(n.redType,s)}}this.gridLayout.Layout()},PicaNewIllustratedListPanel.prototype.setRedsState=function(e){this.redMap.forEach((function(i,n){i.visible=-1!==e.indexOf(n)}))},PicaNewIllustratedListPanel.prototype.getListData=function(){var e=new l.Handler(this,this.onSelectItemHandler),i={bg:"illustrate_furniture_bg",left:"illustrate_furniture_picture",textImg:"illustrate_furniture_title",text:l.i18n.t("illustrate.furin"),textColor:"#0C6DA3",send:e,tag:"gallary",redType:m.MainUIRedType.GALLERY};l.i18n.t("illustrate.avatar");return[i,{bg:"illustrate_make_bg",left:"illustrate_make_picture",textImg:"illustrate_make_title",text:l.i18n.t("illustrate.make"),textColor:"#3027A1",send:e,tag:"make"},{bg:"illustrate_cooking_bg",left:"illustrate_cooking_picture",textImg:"illustrate_cooking_title",text:l.i18n.t("illustrate.cooking"),textColor:"#3027A1",send:e,tag:"cooking"}]},PicaNewIllustratedListPanel.prototype.onSelectItemHandler=function(e){this.send&&this.send.runWith([e])},PicaNewIllustratedListPanel.prototype.onBackHandler=function(){this.send&&this.send.runWith("back")},PicaNewIllustratedListPanel}(Phaser.GameObjects.Container),_=function(e){function IllustratedItem(i,n,a,o,c){var m=e.call(this,i,0,0)||this;return m.setSize(n,a),m.dpr=o,m.zoom=c,m.bg=m.scene.make.image({key:h.d.illustrate,frame:"illustrate_furniture_bg"}),m.leftImg=m.scene.make.image({key:h.d.illustrate,frame:"illustrate_furniture_picture"}),m.textImg=m.scene.make.image({key:h.d.illustrate,frame:"illustrate_furniture_title"}),m.textTex=m.scene.make.text({style:l.UIHelper.colorStyle("#0C6DA3",12*o)}).setOrigin(.5),m.leftImg.x=.5*-m.leftImg.width,m.leftImg.y=9*o,m.textImg.x=.25*m.width,m.textImg.y=.5*-m.textImg.height,m.textTex.x=m.textImg.x,m.textTex.y=m.textImg.y+.5*m.textImg.height+13*o,m.add([m.bg,m.leftImg,m.textImg,m.textTex]),m.on(s.ClickEvent.Tap,m.onClickHandler,m),m.enable=!0,m}return f(IllustratedItem,e),IllustratedItem.prototype.setDisplayData=function(e){this.bg.setFrame(e.bg),this.leftImg.setFrame(e.left),this.textImg.setFrame(e.textImg),this.textTex.text=e.text,this.textTex.setColor(e.textColor),this.tag=e.tag,this.send=e.send},IllustratedItem.prototype.onClickHandler=function(){this.send&&this.send.runWith(this.tag)},IllustratedItem}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewLevelRewardsPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=n(791),m=n(794),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaNewLevelRewardsPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.redMap=new Map,h.setSize(n,a),h.dpr=s,h.zoom=o,h.init(),h.setInteractive(),h}return f(PicaNewLevelRewardsPanel,e),PicaNewLevelRewardsPanel.prototype.resize=function(e,i){var n=e||this.width,a=i||this.height;this.setSize(n,a),this.backButton.x=.5*-this.width+.5*this.backButton.width+10*this.dpr,this.backButton.y=.5*-this.height+45*this.dpr,this.oneKeyBtn.x=.5*this.width-.5*this.oneKeyBtn.width-10*this.dpr,this.oneKeyBtn.y=this.backButton.y,this.titlebg.x=.5*this.width-152*this.dpr,this.titlebg.y=-260*this.dpr,this.titleTex.x=this.titlebg.x,this.titleTex.y=this.titlebg.y,this.rewardsPanel.x=this.titleTex.x,this.rewardsPanel.y=this.titleTex.y+.5*this.rewardsPanel.height+35*this.dpr,this.mLevelGrid.y=25*this.dpr,this.mLevelGrid.x=.5*-this.width+this.mLevelGrid.width-10*this.dpr},PicaNewLevelRewardsPanel.prototype.refreshMask=function(){this.mLevelGrid.resetMask()},PicaNewLevelRewardsPanel.prototype.setHandler=function(e){this.send=e},PicaNewLevelRewardsPanel.prototype.setRewardsData=function(e){this.galleryData=e,this.mLevelGrid.setItems(e)},PicaNewLevelRewardsPanel.prototype.init=function(){this.mBackground=new c.CommonBackground(this.scene,0,0,this.width,this.height,h.d.illustrate_new,"illustrate_survey_bg",12836852);var e=this.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_bg_veins"});e.y=.5*-this.height+.5*e.height,this.mBackground.add(e),this.add(this.mBackground),this.backButton=m.UITools.createBackButton(this.scene,this.dpr,this.onBackHandler,this,l.i18n.t("illustrate.progressreward")),this.oneKeyBtn=new o.ThreeSliceButton(this.scene,62*this.dpr,25*this.dpr,h.d.uicommon,l.UIHelper.threeYellowSmall,l.UIHelper.threeYellowSmall,l.i18n.t("mail.onekey")),this.oneKeyBtn.setTextStyle(l.UIHelper.brownishStyle(this.dpr)),this.oneKeyBtn.setFontStyle("bold"),this.oneKeyBtn.on(s.ClickEvent.Tap,this.onAllReceiveHandler,this),this.titlebg=this.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_title_bg"}),this.titleTex=this.scene.make.text({style:l.UIHelper.colorStyle("#996600",15*this.dpr)}).setOrigin(.5),this.createGridTable(),this.rewardsPanel=new _(this.scene,266*this.dpr,443*this.dpr,this.dpr,this.zoom),this.rewardsPanel.setHandler(new l.Handler(this,this.onReceivedHandler)),this.add([this.mBackground,this.backButton,this.oneKeyBtn,this.titlebg,this.titleTex,this.rewardsPanel,this.mLevelGrid]),this.resize()},PicaNewLevelRewardsPanel.prototype.createGridTable=function(){var e=this,i=this.height-110*this.dpr,n=50*this.dpr,a=48*this.dpr,o=85*this.dpr,h={x:0,y:0,table:{width:n,height:i,columns:1,cellWidth:a,cellHeight:o,reuseCellContainer:!0,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,n){var s=i.item;return null===n&&(n=new x(e.scene,a,o,e.dpr,e.zoom)),n.setLevelData(s),e.setDefaultItem(n,s),n}};this.mLevelGrid=new s.GameGridTable(this.scene,h),this.mLevelGrid.layout(),this.mLevelGrid.on("cellTap",(function(i){e.onSelectItemHandler(i)}))},PicaNewLevelRewardsPanel.prototype.onSelectItemHandler=function(e){if(this.curLevelItem!==e){this.curLevelItem&&(this.curLevelItem.select=!1),e.select=!0,this.curLevelItem=e;var i=e.groupData;this.titleTex.text=l.i18n.t("illustrate.levelrewardtips",{name:i.level}),this.rewardsPanel.setRewardsData(i)}},PicaNewLevelRewardsPanel.prototype.setDefaultItem=function(e,i){((i.rewards||!i.allReceived)&&!this.curLevelItem||this.curLevelItem&&this.curLevelItem.groupData.level===i.level)&&(this.curLevelItem=void 0,this.onSelectItemHandler(e))},PicaNewLevelRewardsPanel.prototype.onReceivedHandler=function(e){this.send&&this.send.runWith(["rewards",e.id])},PicaNewLevelRewardsPanel.prototype.onAllReceiveHandler=function(){this.send&&this.send.runWith("allrewards")},PicaNewLevelRewardsPanel.prototype.onBackHandler=function(){this.send&&this.send.runWith("back")},PicaNewLevelRewardsPanel}(Phaser.GameObjects.Container),_=function(e){function RightRewardsPanel(i,n,a,s,h){var c=e.call(this,i)||this;c.gridItems=[],c.progress=0,c.dpr=s,c.zoom=h,c.setSize(n,a),c.rightBg=c.scene.make.graphics(void 0,!1),c.rightBg.clear(),c.rightBg.fillStyle(8036088,1),c.rightBg.fillRoundedRect(.5*-n,.5*-a,n,a);var m=124*c.dpr,f=108*s,g=a;return c.gridLayout=new o.GridLayoutGroup(c.scene,f,g,{cellSize:new Phaser.Math.Vector2(f,m),space:new Phaser.Math.Vector2(0,17*c.dpr),startAxis:o.AxisType.Horizontal,constraint:o.ConstraintType.FixedColumnCount,constraintCount:1,alignmentType:o.AlignmentType.UpperCenter}),c.rewardsTips=c.scene.make.text({style:l.UIHelper.colorStyle("#1A1B1B",11*s)}).setOrigin(0,.5),c.rewardsTips.x=.5*-n,c.rewardsTips.y=.5*a+15*s,c.add([c.rightBg,c.gridLayout,c.rewardsTips]),c}return f(RightRewardsPanel,e),RightRewardsPanel.prototype.setRewardsData=function(e){this.progress=e.progress,this.setGridItems(e.gallery)},RightRewardsPanel.prototype.setHandler=function(e){this.send=e},RightRewardsPanel.prototype.setGridItems=function(e){for(var i=0,n=this.gridItems;i<n.length;i++){(l=n[i]).visible=!1}for(var a=108*this.dpr,o=124*this.dpr,h=0;h<e.length;h++){var l=void 0,c=e[h];h<this.gridItems.length?l=this.gridItems[h]:((l=new T(this.scene,a,o,this.dpr,this.zoom)).on(s.ClickEvent.Tap,this.onSelectHandler,this),l.setHandler(this.send),this.gridLayout.add(l),this.gridItems.push(l)),l.setItemData(c),l.visible=!0,this.setDefaultItem(l,c)}this.gridLayout.Layout()},RightRewardsPanel.prototype.onSelectHandler=function(e,i){this.curItem&&(this.curItem.select=!1),i.select=!0,this.curItem=i,this.rewardsTips.text=l.i18n.t("illustrate.meetrewardtips",{name:i.galleryData.exp})},RightRewardsPanel.prototype.setDefaultItem=function(e,i){this.curItem&&this.curItem.galleryData.id!==i.id||(this.curItem=void 0,this.onSelectHandler(void 0,e))},RightRewardsPanel}(Phaser.GameObjects.Container),T=function(e){function RewardItem(i,n,a,c,m){var f=e.call(this,i,0,0)||this;return f.dpr=c,f.zoom=m,f.setSize(n,a),f.bg=f.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_reward_icon"}),f.itemIcon=new o.DynamicImage(i,0,0),f.itemIcon.y=-10*c,f.rewardBtn=new o.ThreeSliceButton(f.scene,62*f.dpr,25*f.dpr,h.d.uicommon,l.UIHelper.threeRedSmall,l.UIHelper.threeRedSmall,l.i18n.t("common.receivereward")),f.rewardBtn.y=40*c,f.rewardBtn.setTextStyle(l.UIHelper.whiteStyle(f.dpr)),f.rewardBtn.setFontStyle("bold"),f.rewardBtn.on(s.ClickEvent.Tap,f.onRewardHandler,f),f.add([f.bg,f.itemIcon,f.rewardBtn]),f.enable=!0,f}return f(RewardItem,e),RewardItem.prototype.setItemData=function(e){var i=this;this.galleryData=e;var n=e.rewardItems,a=l.Url.getOsdRes(n.texturePath);this.itemIcon.load(a,this,(function(){i.itemIcon.visible=!0})),this.itemIcon.scale=this.dpr/this.zoom,1===e.received?(this.rewardBtn.setFrameNormal(l.UIHelper.threeGraySmall),this.rewardBtn.setText(l.i18n.t("common.receivereward")),this.rewardBtn.disInteractive()):2===e.received?(this.rewardBtn.setFrameNormal(l.UIHelper.threeRedSmall),this.rewardBtn.setText(l.i18n.t("common.receivereward")),this.rewardBtn.setInteractive()):3===e.received&&(this.rewardBtn.setFrameNormal(l.UIHelper.threeGraySmall),this.rewardBtn.setText(l.i18n.t("common.received")),this.rewardBtn.disInteractive())},Object.defineProperty(RewardItem.prototype,"select",{set:function(e){this.bg.setFrame(e?"illustrate_survey_reward_icon1":"illustrate_survey_reward_icon")},enumerable:!1,configurable:!0}),RewardItem.prototype.setHandler=function(e){this.send=e},RewardItem.prototype.onRewardHandler=function(){this.send&&this.send.runWith([this.galleryData])},RewardItem}(o.ButtonEventDispatcher),x=function(e){function LevelItem(i,n,a,s,o){var c=e.call(this,i,0,0)||this;return c.dpr=s,c.zoom=o,c.setSize(n,a),c.linebg=c.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_lv_bg_line"}),c.bg=c.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_lv_bg"}),c.levelTex=c.scene.make.text({style:l.UIHelper.whiteStyle(s)}).setOrigin(.5),c.iconImg=c.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_lv_icon_s"}),c.redImg=c.scene.make.image({key:h.d.illustrate_new,frame:"illustrate_survey_lv_prompt_s"}),c.redImg.x=.5*-c.iconImg.width,c.redImg.y=.5*-c.iconImg.height,c.add([c.linebg,c.bg,c.iconImg,c.levelTex,c.redImg]),c}return f(LevelItem,e),LevelItem.prototype.setLevelData=function(e){this.groupData=e,this.levelTex.text=e.level<10?"0"+e.level:""+e.level,this.redImg.visible=e.rewards},Object.defineProperty(LevelItem.prototype,"select",{set:function(e){e?(this.bg.setFrame("illustrate_survey_lv_bg1"),this.iconImg.setFrame("illustrate_survey_lv_icon"),this.redImg.visible=!1):(this.bg.setFrame("illustrate_survey_lv_bg"),this.iconImg.setFrame("illustrate_survey_lv_icon_s"),this.redImg.visible=this.groupData.rewards)},enumerable:!1,configurable:!0}),LevelItem}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaOnlineBottomPanel",(function(){return c}));var a,s=n(788),o=n(789),h=n(0),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function PicaOnlineBottomPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.key=s,h.dpr=o,h.isblack=!1,h.setSize(n,a),h.setInteractive(),h.init(),h}return l(PicaOnlineBottomPanel,e),PicaOnlineBottomPanel.prototype.init=function(){var e=this.width,i=69*this.dpr;this.blackGraphic=this.scene.make.graphics(void 0,!1),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.66),this.blackGraphic.fillRect(0,0,this.width,this.height),this.blackGraphic.x=.5*-this.width,this.blackGraphic.y=.5*-this.height,this.add(this.blackGraphic),this.content=this.scene.make.container(void 0,!1),this.content.setSize(e,i),this.add(this.content),this.bg=new o.ThreeSlicePath(this.scene,0,0,e,87*this.dpr,this.key,["people_panel_bg_left","people_panel_bg_middle","people_panel_bg_right"],this.dpr),this.bg.y=.5*i-.5*this.bg.height+18*this.dpr,this.content.add(this.bg),this.headIcon=new o.DynamicImage(this.scene,0,0),this.headIcon.x=.5*-e+40*this.dpr,this.headIcon.y=0*this.dpr,this.headIcon.scale=this.dpr,this.headIcon.visible=!1,this.content.add(this.headIcon),this.nameText=this.scene.make.text({x:.5*-e+96*this.dpr,y:.5*-i+15*this.dpr,text:"",style:h.UIHelper.whiteStyle(this.dpr,14)}),this.nameText.setFontStyle("bold"),this.nameText.setOrigin(0,.5),this.content.add(this.nameText);var n=["butt_yellow_left_s","butt_yellow_middle_s","butt_yellow_right_s"];this.reportBtn=new o.ThreeSliceButton(this.scene,84*this.dpr,31*this.dpr,this.key,n,n,h.i18n.t("player_info.report")),this.reportBtn.setTextStyle(h.UIHelper.brownishStyle(this.dpr)),this.reportBtn.y=.5*i-.5*this.reportBtn.height-5*this.dpr,this.reportBtn.x=.5*this.reportBtn.width+20*this.dpr,this.reportBtn.on(s.ClickEvent.Tap,this.onReportHandler,this),this.content.add(this.reportBtn);var a=["butt_red_left_s","butt_red_middle_s","butt_red_right_s"];this.blackBtn=new o.ThreeSliceButton(this.scene,84*this.dpr,31*this.dpr,this.key,a,a,h.i18n.t("player_info.blockuer")),this.blackBtn.setTextStyle(h.UIHelper.whiteStyle(this.dpr)),this.blackBtn.y=this.reportBtn.y,this.blackBtn.x=.5*-this.blackBtn.width-5*this.dpr,this.blackBtn.on(s.ClickEvent.Tap,this.onBlockHandler,this),this.content.add(this.blackBtn),this.content.x=0,this.content.y=.5*this.height+.5*this.content.height+10*this.dpr,this.content.setInteractive()},PicaOnlineBottomPanel.prototype.setRoleData=function(e,i){var n=this;if(this.roleData=e,this.isblack=i,this.roleData){if(this.headIcon.visible=!1,this.nameText.text=e.nickname,e.avatar){var a=h.Url.getOsdRes(e.avatar);this.headIcon.load(a,this,(function(){n.headIcon.visible=!0}))}this.blackBtn.setText(i?h.i18n.t("player_info.remove_black"):h.i18n.t("player_info.blockuer"))}},PicaOnlineBottomPanel.prototype.refreshBlack=function(e){this.setRoleData(this.roleData,e)},PicaOnlineBottomPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaOnlineBottomPanel.prototype.addListen=function(){this.reportBtn.on(s.ClickEvent.Tap,this.onReportHandler,this),this.blackBtn.on(s.ClickEvent.Tap,this.onBlockHandler,this),this.on("pointerdown",this.onCloseHandler,this)},PicaOnlineBottomPanel.prototype.removeListen=function(){this.reportBtn.off(s.ClickEvent.Tap,this.onReportHandler,this),this.blackBtn.off(s.ClickEvent.Tap,this.onBlockHandler,this),this.off("pointerdown",this.onCloseHandler,this)},PicaOnlineBottomPanel.prototype.show=function(){this.addListen(),this.visible=!0;var e=.5*this.height+.5*this.content.height+10*this.dpr;this.content.y=e;var i=e,n=.5*this.height-.5*this.content.height;this.playMove(i,n)},PicaOnlineBottomPanel.prototype.hide=function(){this.removeListen(),this.visible=!1},PicaOnlineBottomPanel.prototype.playMove=function(e,i){var n=this.scene.tweens.add({targets:this.content,y:{from:e,to:i},ease:"Linear",duration:150,onComplete:function(){n.stop(),n.remove()}})},PicaOnlineBottomPanel.prototype.onReportHandler=function(){this.sendHandler&&this.sendHandler.runWith(["report"])},PicaOnlineBottomPanel.prototype.onBlockHandler=function(){this.sendHandler&&this.sendHandler.runWith(["block",{uid:this.roleData.platformId,black:!this.isblack}])},PicaOnlineBottomPanel.prototype.onCloseHandler=function(){this.hide(),this.sendHandler&&this.sendHandler.runWith(["close"])},PicaOnlineBottomPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMyRoomNavigationPanel",(function(){return m}));var a,s=n(788),o=n(791),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaMyRoomNavigationPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.setSize(n,a),l.key=s,l.dpr=o,l.zoom=h,l.create(),l}return c(PicaMyRoomNavigationPanel,e),PicaMyRoomNavigationPanel.prototype.create=function(){var e=this;this.gameScroll=new s.GameScroller(this.scene,{x:0,y:10*this.dpr,width:this.width,height:this.height,zoom:this.zoom,align:2,orientation:0,dpr:this.dpr,space:10*this.dpr,padding:{top:10*this.dpr},cellupCallBack:function(i){e.onGameScrollHandler(i)}}),this.add(this.gameScroll)},PicaMyRoomNavigationPanel.prototype.clear=function(){this.gameScroll.clearItems(!0)},PicaMyRoomNavigationPanel.prototype.refreshMask=function(){this.gameScroll.refreshMask()},PicaMyRoomNavigationPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaMyRoomNavigationPanel.prototype.setRoomDataList=function(e){var i=this;this.gameScroll.clearItems(!0),this.setMyRoomDatas(e.selfRooms,new l.Handler(this,(function(){i.setHistoryDatas(e.historyRooms)})))},PicaMyRoomNavigationPanel.prototype.setMyRoomDatas=function(e,i){var n=new o.ImageValue(this.scene,78*this.dpr,15*this.dpr,this.key,"my_house",this.dpr,{color:"#FFC51A",fontSize:13*this.dpr,fontFamily:l.Font.DEFULT_FONT});n.setStroke("#744803",2*this.dpr),n.x=.5*-this.width+20*this.dpr,n.setFrameValue(l.i18n.t("room_list.my_room"),this.key,"my_house"),this.gameScroll.addItem(n),this.createRoomItemByFrame(e,"my_home_bg","#744803",i)},PicaMyRoomNavigationPanel.prototype.createRoomItemByFrame=function(e,i,n,a){var s=this;void 0===i&&(i="list_bg"),void 0===n&&(n="#333333");var o=0,framefun=function(){for(var h=0,l=e.slice(o,o+5);h<l.length;h++){var c=l[h],m=new f(s.scene,s.key,s.dpr,i,n);m.setRoomData(c),s.gameScroll.addItem(m)}s.gameScroll.Sort(!0),(o+=5)<e.length?setTimeout((function(){framefun()}),20):a&&a.run()};framefun()},PicaMyRoomNavigationPanel.prototype.setHistoryDatas=function(e){var i=new o.ImageValue(this.scene,78*this.dpr,30*this.dpr,this.key,"footprint",this.dpr,{color:"#FFC51A",fontSize:13*this.dpr,fontFamily:l.Font.DEFULT_FONT});i.setStroke("#744803",2*this.dpr),i.x=.5*-this.width+20*this.dpr,i.setFrameValue(l.i18n.t("room_list.my_history"),this.key,"footprint"),this.gameScroll.addItem(i),this.createRoomItemByFrame(e)},PicaMyRoomNavigationPanel.prototype.onGameScrollHandler=function(e){e&&e.roomData&&this.onSendHandler(e.roomData)},PicaMyRoomNavigationPanel.prototype.onSendHandler=function(e){this.sendHandler&&this.sendHandler.runWith(e.roomId)},PicaMyRoomNavigationPanel}(Phaser.GameObjects.Container),f=function(e){function RoomListItem(i,n,a,c,m){void 0===c&&(c="list_bg"),void 0===m&&(m="#333333");var f=e.call(this,i)||this;return f.key=n,f.dpr=a,f.bg=new s.NineSlicePatch(f.scene,0,0,254*a,40*a,f.key,c,{left:12*f.dpr,top:0*f.dpr,right:12*f.dpr,bottom:0*f.dpr}),f.add(f.bg),f.setSize(f.bg.width,f.bg.height),f.roomName=new s.BBCodeText(f.scene,.5*-f.width+10*a,.5*-f.height+5*a,"",{fontFamily:l.Font.DEFULT_FONT,fontSize:12*a,color:m}),f.roomName.setOrigin(0),f.add(f.roomName),f.roomOwnerName=new o.ImageBBCodeValue(i,50*a,20*a,n,"user",a,{fontFamily:l.Font.DEFULT_FONT,fontSize:11*a,color:"#333333"}),f.roomOwnerName.x=f.roomName.x+.5*f.roomOwnerName.width,f.roomOwnerName.y=f.roomName.y+25*a,f.add(f.roomOwnerName),f.playerCount=new o.ImageBBCodeValue(i,30*a,20*a,h.c.commonKey,"home_persons",a,{fontFamily:l.Font.DEFULT_FONT,fontSize:12*a,color:"#333333"}),f.playerCount.x=.5*f.width-35*a,f.add(f.playerCount),f}return c(RoomListItem,e),RoomListItem.prototype.setRoomData=function(e){this.roomData=e,this.roomName.text="[b]"+e.name+"[/b]",this.playerCount.setText("[b]"+e.playerCount+"[/b]"),this.roomOwnerName.setText(e.ownerName)},RoomListItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaOldPartyNavigationPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(2),c=n(0),m=n(791),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaOldPartyNavigationPanel(i,n,a,s,o,h){var l=e.call(this,i)||this;return l.setSize(n,a),l.key=s,l.dpr=o,l.zoom=h,l.create(),l}return f(PicaOldPartyNavigationPanel,e),PicaOldPartyNavigationPanel.prototype.create=function(){var e=this;this.signProgressPanel=new T(this.scene,252*this.dpr,45*this.dpr,this.key,this.dpr),this.signProgressPanel.y=.5*-this.height+15*this.dpr,this.signProgressPanel.setHandler(new c.Handler(this,this.onProgressHandler)),this.add(this.signProgressPanel);var i={x:0,y:60*this.dpr,table:{width:254*this.dpr,height:330*this.dpr,columns:1,cellWidth:254*this.dpr,cellHeight:50*this.dpr,reuseCellContainer:!0,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,n){i.scene;var a=i.index,s=i.item;return null===n&&(n=new _(e.scene,e.key,e.dpr)),n.setPartyData(s,a),n}};this.mGameGrid=new s.GameGridTable(this.scene,i),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",this.onGridTableHandler,this),this.add(this.mGameGrid),this.noPartyImg=this.scene.make.image({key:this.key,frame:"no_party"}),this.noPartyImg.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.noPartyImg.y=20*this.dpr,this.add(this.noPartyImg),this.noPartyText=this.scene.make.text({x:0,y:this.noPartyImg.y+.5*this.noPartyImg.height+10*this.dpr,text:c.i18n.t("party.nopartytips"),style:{color:"#AAAAAA",fontSize:13*this.dpr,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(.5),this.add(this.noPartyText),this.itemtips=new o.ItemInfoTips(this.scene,121*this.dpr,46*this.dpr,h.c.common2Key,"tips_bg",this.dpr),this.itemtips.setVisible(!1),this.add(this.itemtips),this.hotelBtn=new s.Button(this.scene,this.key,"hotel","hotel",c.i18n.t("party.hotel")),this.hotelBtn.text.setOrigin(0,1),this.hotelBtn.tweenScale=.88,this.hotelBtn.setTextStyle({fontSize:13*this.dpr,fontFamily:c.Font.DEFULT_FONT,color:"#FFDE00",stroke:"#222222",strokeThickness:2*this.dpr}),this.hotelBtn.setTextOffset(.5*-this.hotelBtn.width+5*this.dpr,.5*this.hotelBtn.height-2*this.dpr),this.hotelBtn.setPosition(.5*-this.hotelBtn.width-18*this.dpr,this.signProgressPanel.y+.5*this.signProgressPanel.height+.5*this.hotelBtn.height+20*this.dpr),this.hotelBtn.on(String(s.ClickEvent.Tap),this.onHotelHandler,this),this.add(this.hotelBtn),this.picatownBtn=new s.Button(this.scene,this.key,"town","town",c.i18n.t("party.picatown")),this.picatownBtn.text.setOrigin(0,1),this.picatownBtn.tweenScale=.88,this.picatownBtn.setTextStyle({fontSize:13*this.dpr,fontFamily:c.Font.DEFULT_FONT,color:"#FFDE00",stroke:"#222222",strokeThickness:2*this.dpr}),this.picatownBtn.setTextOffset(.5*-this.picatownBtn.width+5*this.dpr,.5*this.picatownBtn.height-2*this.dpr),this.picatownBtn.setPosition(.5*this.picatownBtn.width-10*this.dpr,this.hotelBtn.y),this.picatownBtn.on(String(s.ClickEvent.Tap),this.onPicatownHandler,this),this.add(this.picatownBtn)},PicaOldPartyNavigationPanel.prototype.refreshMask=function(){this.mGameGrid.resetMask()},PicaOldPartyNavigationPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaOldPartyNavigationPanel.prototype.setPartyDataList=function(e){this.partyData=e,e.party.length>0?(this.mGameGrid.setItems(e.party),this.mGameGrid.visible=!0,this.noPartyText.visible=!1,this.noPartyImg.visible=!1):(this.noPartyText.visible=!0,this.noPartyImg.visible=!0,this.mGameGrid.visible=!1)},PicaOldPartyNavigationPanel.prototype.setSignProgress=function(e){this.progressData=e,this.signProgressPanel.setProgressDatas(e)},PicaOldPartyNavigationPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaOldPartyNavigationPanel.prototype.onGridTableHandler=function(e){this.onSendHandler(e.partyData)},PicaOldPartyNavigationPanel.prototype.onHotelHandler=function(){this.partyData&&this.sendHandler&&this.sendHandler.runWith(["hotel",this.partyData.hotel])},PicaOldPartyNavigationPanel.prototype.onPicatownHandler=function(){this.partyData&&this.sendHandler&&this.sendHandler.runWith(["pictown",this.partyData.picatown])},PicaOldPartyNavigationPanel.prototype.onSendHandler=function(e){this.sendHandler&&this.sendHandler.runWith(["partylist",e])},PicaOldPartyNavigationPanel.prototype.onProgressHandler=function(e,i){if(this.progressData){var n=i.progressData;n.received||(n.targetValue<=this.progressData.currentProgressValue?this.emit("questreward",e):(this.itemtips.setItemData(n.rewards[0]),this.showItemTipsState(i)))}},PicaOldPartyNavigationPanel.prototype.showItemTipsState=function(e,i){void 0===i&&(i=0);var n=this.itemtips.x,a=this.itemtips.y;this.setTipsPosition(e,i),n!==this.itemtips.x||a!==this.itemtips.y?this.itemtips.setVisible(!0):this.itemtips.setVisible(!this.itemtips.visible)},PicaOldPartyNavigationPanel.prototype.setTipsPosition=function(e,i){void 0===i&&(i=0);for(var n=e.x,a=e.y,s=e;s.parentContainer!==this;)n+=s.parentContainer.x,a+=s.parentContainer.y,s=s.parentContainer;n-.5*this.itemtips.width<.5*-this.width?this.itemtips.x=.5*this.itemtips.width-.5*this.width+20*this.dpr:n+.5*this.itemtips.width>.5*this.width?this.itemtips.x=.5*this.width-.5*this.itemtips.width-20*this.dpr:this.itemtips.x=n,this.itemtips.y=a-.5*this.itemtips.height+10*this.dpr+i},PicaOldPartyNavigationPanel}(Phaser.GameObjects.Container),_=function(e){function PartyListItem(i,n,a){var l=e.call(this,i)||this;return l.key=n,l.dpr=a,l.bg=new s.NineSlicePatch(l.scene,0,0,254*a,40*a,l.key,"list_bg",{left:12*l.dpr,top:0*l.dpr,right:12*l.dpr,bottom:0*l.dpr}),l.add(l.bg),l.setSize(l.bg.width,l.bg.height),l.imagIcon=new o.DynamicImage(i,0,0),l.imagIcon.setTexture(l.key,"party_icon_1"),l.imagIcon.x=.5*-l.width+.5*l.imagIcon.width+8*a,l.imagIcon.y=.5*-l.height+.5*l.imagIcon.height+5*a,l.add(l.imagIcon),l.hotImageValue=new m.ImageBBCodeValue(i,30*a,10*a,n,"hot",a,{fontSize:9*a,color:"#FFDD00",fontFamily:c.Font.DEFULT_FONT,stroke:"#666666",strokeThickness:2*a}),l.hotImageValue.setOffset(-3*a,0),l.hotImageValue.x=.5*-l.width+.5*l.hotImageValue.width+8*a,l.hotImageValue.y=.5*l.height-.5*l.hotImageValue.height-5*a,l.add(l.hotImageValue),l.partyName=new s.BBCodeText(l.scene,.5*-l.width+45*a,.5*-l.height+5*a,"",{fontFamily:c.Font.DEFULT_FONT,fontSize:12*a,color:"#333333"}),l.partyName.setOrigin(0),l.add(l.partyName),l.partyOwnerName=new m.ImageBBCodeValue(i,50*a,20*a,n,"user",a,{fontFamily:c.Font.DEFULT_FONT,fontSize:11*a,color:"#333333"}),l.partyOwnerName.x=l.partyName.x+.5*l.partyOwnerName.width,l.partyOwnerName.y=l.partyName.y+25*a,l.add(l.partyOwnerName),l.playerCount=new m.ImageBBCodeValue(i,30*a,20*a,h.c.commonKey,"home_persons",a,{fontFamily:c.Font.DEFULT_FONT,fontSize:12*a,color:"#333333"}),l.playerCount.x=.5*l.width-35*a,l.add(l.playerCount),l}return f(PartyListItem,e),PartyListItem.prototype.setPartyData=function(e){this.partyData=e;var i=e.topic.display.texturePath,n=i.lastIndexOf("/"),a=i.slice(n+1,i.length),s=i.slice(0,n+1),o=c.Url.getOsdRes(s+a+"_s_"+this.dpr+"x.png");this.imagIcon.load(o),this.hotImageValue.setText(this.getHotText(e.focus)),this.partyName.text="[b]"+e.name+"[/b]",this.playerCount.setText("[b]"+e.playerCount+"[/b]"),this.partyOwnerName.setText(e.ownerName)},PartyListItem.prototype.getHotText=function(e){var i=e+"";return"en"===c.i18n.language?i.length>=4&&i.length<7?i=Math.floor(e/100)/10+c.i18n.t("quantityunit.k"):i.length>=7&&(i=Math.floor(e/1e5)/10+c.i18n.t("quantityunit.m")):i=l.ChineseUnit.getChineseUnit(e,1),"[stroke]"+i+" [/stroke]"},PartyListItem}(Phaser.GameObjects.Container),T=function(e){function SignProgressPanel(i,n,a,o,h){var l=e.call(this,i)||this;l.progressItems=[],l.setSize(n,a),l.dpr=h,l.key=o;var m={x:0*h/2,y:15*h,width:218*h,height:11*h,background:{x:0,y:0,width:251*h,height:11*h,config:{top:0*h,left:7*h,right:7*h,bottom:0*h},key:o,frame:"order_progress_bottom"},bar:{x:0,y:0,width:251*h,height:11*h,config:{top:0*h,left:7*h,right:7*h,bottom:0*h},key:o,frame:"order_progress_top"},dpr:h,textConfig:void 0};return l.progress=new s.ProgressBar(i,m),l.add(l.progress),l.text=i.make.text({x:l.width/2,y:.5*-l.height+11*h,text:"",style:{color:"#6666FF",fontSize:13*h,fontFamily:c.Font.DEFULT_FONT}}),l.text.setOrigin(1,.5),l.add(l.text),l}return f(SignProgressPanel,e),SignProgressPanel.prototype.setProgressDatas=function(e){for(var i=e.steps.length,n=100/(i-1),a=this.progress.width,s=0,o=0,h=0,l=0;l<i;l++){var c=e.steps[l],m=void 0;l<this.progressItems.length?m=this.progressItems[l]:(m=new x(this.scene,0,0,this.key,this.dpr),this.add(m),this.progressItems.push(m),m.setHandler(this.receiveHandler)),m.x=.5*-a+(i>1?a*l/(i-1):.5*a),m.y=15*this.dpr,m.setItemData(c,l,e.currentProgressValue),c.targetValue<=e.currentProgressValue?l>0&&(o+=n):0===s&&(o+=n*(e.currentProgressValue-h)/(c.targetValue-h),s=c.targetValue),h=c.targetValue}this.progress.setProgress(o,100),this.initCountDown(s-e.currentProgressValue,h===s)},SignProgressPanel.prototype.setHandler=function(e){this.receiveHandler=e},SignProgressPanel.prototype.destroy=function(){clearInterval(this.timerID),e.prototype.destroy.call(this)},SignProgressPanel.prototype.initCountDown=function(e,i){var n=this;this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0);var timeextu=function(){var i=Math.floor(e/60),a=e%60,s=(i<10?"0"+i:i+"")+":"+(a<10?"0"+a:a+"");n.text.text=c.i18n.t("party.progresstips",{timer:s}),--e>0?n.timerID=setTimeout((function(){timeextu()}),1e3):(n.text.text="",n.timerID=void 0)};timeextu()},SignProgressPanel}(Phaser.GameObjects.Container),x=function(e){function SignProgressItem(i,n,a,h,l){var m=e.call(this,i,n,a)||this;return m.dpr=l,m.key=h,m.bg=new s.Button(i,h,"order_progress_unfinished","order_progress_unfinished"),m.icon=new o.DynamicImage(i,0,0),m.text=i.make.text({x:2*l,y:.5*-m.bg.height-8*l,text:"10",style:{color:"#FFDD00",fontSize:13*l,fontFamily:c.Font.DEFULT_FONT}}),m.text.setStroke("#905B06",2*l).setOrigin(.5),m.finishIcon=i.make.image({key:h,frame:"order_progress_ok"}),m.finishIcon.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),m.balckgraphic=i.make.graphics(void 0,!1),m.balckgraphic.clear(),m.balckgraphic.fillStyle(0,.5),m.balckgraphic.fillCircle(0,0,16*l),m.add([m.bg,m.icon,m.text,m.balckgraphic,m.finishIcon]),m.finishIcon.visible=!1,m}return f(SignProgressItem,e),SignProgressItem.prototype.setItemData=function(e,i,n){var a=this;if(this.progressData=e,this.index=i,this.text.text=0===i?c.i18n.t("partynav.onlinetips"):c.i18n.t("party.onlinetime",{name:Math.floor(e.targetValue/60)}),this.text.visible=0===i,e.rewards&&e.rewards.length>0){var o=c.Url.getOsdRes(e.rewards[0].display.texturePath);this.icon.load(o,this,(function(){a.icon.scale=1,a.icon.scaleY=29*a.dpr/a.icon.displayHeight,a.icon.scaleX=a.icon.scaleY}))}this.finishIcon.visible=!1,this.balckgraphic.visible=!1,e.targetValue<=n?(this.bg.setFrameNormal("order_progress_finished","order_progress_finished"),e.received&&(this.finishIcon.visible=!0,this.balckgraphic.visible=!0),this.icon.clearTint()):(this.bg.setFrameNormal("order_progress_unfinished","order_progress_unfinished"),this.icon.setTint(9145210)),e.received?this.bg.off(String(s.ClickEvent.Tap),this.onReceiveHandler,this):(this.bg.off(String(s.ClickEvent.Tap),this.onReceiveHandler,this),this.bg.on(String(s.ClickEvent.Tap),this.onReceiveHandler,this))},SignProgressItem.prototype.setHandler=function(e){this.receiveHandler=e},SignProgressItem.prototype.onReceiveHandler=function(){this.receiveHandler&&this.receiveHandler.runWith([this.index,this])},SignProgressItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoomNavigationPanel",(function(){return l}));var a,s=n(788),o=n(989),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function PicaRoomNavigationPanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.datas=[],h.isQuerying=!1,h.dataLength=0,h.nextPageNum=0,h.maxPage=0,h.setSize(n,a),h.dpr=s,h.zoom=o,h.create(),h}return h(PicaRoomNavigationPanel,e),PicaRoomNavigationPanel.prototype.create=function(){var e=this,i={x:0,y:82*this.dpr,table:{width:this.width,height:this.height-5*this.dpr,columns:1,cellWidth:this.width,cellHeight:75*this.dpr,reuseCellContainer:!0,zoom:this.zoom},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(i,n){i.scene;var a=i.index,s=i.item;return null===n&&(n=new o.PicaRoomListItem(e.scene,e.dpr)),n.setRoomData(s,a),e.isCanQuery(a)&&e.queryNextPage(),n}};this.mGameGrid=new s.GameGridTable(this.scene,i),this.mGameGrid.layout(),this.mGameGrid.on("cellTap",this.onGridTableHandler,this),this.add(this.mGameGrid)},PicaRoomNavigationPanel.prototype.refreshMask=function(){this.mGameGrid.resetMask()},PicaRoomNavigationPanel.prototype.setHandler=function(e){this.sendHandler=e},PicaRoomNavigationPanel.prototype.setRoomDatas=function(e){if(0===this.datas.length)this.mGameGrid.setItems(e.rooms);else{var i=this.mGameGrid.items;i=i.concat(e.rooms),this.mGameGrid.gridTable.setItems(i)}this.datas.push(e),this.dataLength+=e.rooms.length,this.nextPageNum=e.page+1,this.maxPage=e.maxPage,this.isQuerying=!1},PicaRoomNavigationPanel.prototype.clearDatas=function(){this.datas.length=0,this.dataLength=1,this.nextPageNum=-1,this.isQuerying=!1},PicaRoomNavigationPanel.prototype.onGridTableHandler=function(e){this.sendHandler&&this.sendHandler.runWith(["enter",e.roomData.roomId])},PicaRoomNavigationPanel.prototype.queryNextPage=function(){this.isQuerying||(this.sendHandler&&this.sendHandler.runWith(["query",this.nextPageNum]),this.isQuerying=!0)},PicaRoomNavigationPanel.prototype.isCanQuery=function(e){return-1!==this.nextPageNum&&(!this.isQuerying&&this.maxPage>=this.nextPageNum&&this.dataLength<e+10)},PicaRoomNavigationPanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoomTypePanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(790),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function PicaRoomTypePanel(i,n,a,s,o){var h=e.call(this,i)||this;return h.typeItems=[],h.dpr=s,h.zoom=o,h.setSize(n,a),h.create(),h}return c(PicaRoomTypePanel,e),PicaRoomTypePanel.prototype.create=function(){var e=this;this.background=this.scene.make.graphics(void 0,!1),this.background.fillStyle(2105378,1),this.background.fillRect(.5*-this.width,.5*-this.height,this.width,this.height),this.background.setInteractive(new Phaser.Geom.Rectangle(.5*-this.width,.5*-this.height,this.width,this.height),Phaser.Geom.Rectangle.Contains),this.background.on("pointerup",this.onCloseHandler,this),this.titlebg=this.scene.make.image({key:h.d.multiple_rooms,frame:"multiple_rooms_select_title"}),this.titleTex=this.scene.make.text({text:l.i18n.t("party.roomtypetitle"),style:l.UIHelper.colorStyle("#986500",16*this.dpr)}).setOrigin(.5),this.titlebg.y=-180*this.dpr,this.titleTex.y=this.titlebg.y,this.confirmBtn=new s.NineSliceButton(this.scene,0,180*this.dpr,150*this.dpr,55*this.dpr,h.d.uicommon,"yellow_btn_normal",l.i18n.t("common.confirm"),this.dpr,this.zoom,l.UIHelper.button(this.dpr)),this.confirmBtn.setTextStyle(l.UIHelper.brownishStyle(this.dpr,22)),this.confirmBtn.setFontStyle("bold"),this.confirmBtn.on(s.ClickEvent.Tap,this.onConfirmHandler,this),this.mGameScroll=new s.GameScroller(this.scene,{x:0,y:0,width:this.width,height:200*this.dpr,zoom:this.zoom,dpr:this.dpr,align:2,orientation:1,space:40*this.dpr,selfevent:!0,cellupCallBack:function(i){e.onPointerUpHandler(i)},valuechangeCallback:function(e){}}),this.add([this.background,this.titlebg,this.titleTex,this.mGameScroll,this.confirmBtn])},PicaRoomTypePanel.prototype.refreshMask=function(){this.mGameScroll.refreshMask()},PicaRoomTypePanel.prototype.setHandler=function(e){this.sendHandler=e},PicaRoomTypePanel.prototype.setRoomTypeDatas=function(e){e.unshift(void 0),e.push(void 0);for(var i=0;i<e.length;i++){var n=void 0,a=e[i],s=180*this.dpr,o=140*this.dpr;a||(s=50*this.dpr),i<this.typeItems.length?n=this.typeItems[i]:(n=new f(this.scene,s,o,this.dpr),this.mGameScroll.addItem(n),this.typeItems.push(n)),n.visible=!0,n.setTypeData(e[i])}this.mGameScroll.Sort()},PicaRoomTypePanel.prototype.onPointerUpHandler=function(e){e.typeData&&this.curItem!==e&&(e.select=!0,this.curItem&&(this.curItem.select=!1),this.curItem=e)},PicaRoomTypePanel.prototype.onConfirmHandler=function(){this.sendHandler&&this.curItem&&this.curItem.typeData&&this.sendHandler.runWith(this.curItem.typeData.id)},PicaRoomTypePanel.prototype.onCloseHandler=function(){this.sendHandler&&this.sendHandler.runWith("close")},PicaRoomTypePanel}(Phaser.GameObjects.Container),f=function(e){function RoomTypeItem(i,n,a,s){var l=e.call(this,i)||this;return l.dpr=s,l.setSize(n,a),l.dyimg=new o.DynamicImage(i,0,0,h.d.multiple_rooms,"multiple_rooms_type1"),l.selected=l.scene.make.image({key:h.d.multiple_rooms,frame:"multiple_rooms_unselected"}),l.selected.x=.5*n,l.selected.y=.5*-a,l.add([l.dyimg,l.selected]),l}return c(RoomTypeItem,e),RoomTypeItem.prototype.setTypeData=function(e){if(!e)return this.dyimg.visible=!1,void(this.selected.visible=!1);this.dyimg.visible=!0,this.selected.visible=!0,this.typeData=e;var i=l.Url.getOsdRes(e.texturePath+"_"+this.dpr+"x.png");this.dyimg.load(i)},Object.defineProperty(RoomTypeItem.prototype,"select",{set:function(e){this.selected.setFrame(e?"multiple_rooms_selected":"multiple_rooms_unselected")},enumerable:!1,configurable:!0}),RoomTypeItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoamEffectOnePanel",(function(){return h}));var a,s=n(0),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function PicaRoamEffectOnePanel(i,n,a,s){var o=e.call(this,i)||this;return o.isOne=!0,o.loopTimes=0,o.setSize(n,a),o.init(),o.setInteractive(),o}return o(PicaRoamEffectOnePanel,e),PicaRoamEffectOnePanel.prototype.init=function(){this.blackGraphic=this.scene.make.graphics(void 0,!1),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,1),this.blackGraphic.fillRect(.5*-this.width,.5*-this.height,2*this.width,2*this.height),this.blackGraphic.visible=!1,this.blackGraphic.alpha=0,this.video=this.scene.make.video({key:"roambefore"}),this.add([this.video,this.blackGraphic])},PicaRoamEffectOnePanel.prototype.setHandler=function(e){this.send=e},PicaRoamEffectOnePanel.prototype.setRewardDatas=function(e,i){this.rewardDatas=e,this.isOne=i,this.playBeforeVideo(),this.setVideoSize(),this.video.visible=!0,this.blackGraphic.visible=!1},PicaRoamEffectOnePanel.prototype.play=function(){this.video&&this.video.play(!1)},PicaRoamEffectOnePanel.prototype.playBeforeVideo=function(){var e=this;this.video.removeAllListeners(),this.video.changeSource("roambefore",!0),this.video.on("complete",(function(){e.playRewardVideo()}),this),this.video.on("pointerup",this.onPointerUpHandler,this),this.video.setInteractive()},PicaRoamEffectOnePanel.prototype.playRewardVideo=function(){var e=this;this.video.removeAllListeners(),this.isOne?"roamone"!==this.video.getVideoKey()?this.video.changeSource("roamone",!0):this.video.play():("roamtenrepead"!==this.video.getVideoKey()?this.video.changeSource("roamtenrepead",!0,!1):this.video.play(),this.loopTimes=1),setTimeout((function(){e.video.on("complete",e.onCompleteHandler,e),e.video.on("pointerup",e.onPointerUpHandler,e),e.video.setInteractive()}),20)},PicaRoamEffectOnePanel.prototype.onCompleteHandler=function(){if(!this.isOne&&this.loopTimes>0)return this.loopTimes--,void(0===this.loopTimes?this.video.changeSource("roamreward",!0,!1):this.video.play());this.send&&this.send.runWith("compl"),this.blackGraphic.alpha=0,this.blackGraphic.visible=!0,s.UIHelper.playAlphaTween(this.scene,this.blackGraphic,0,1)},PicaRoamEffectOnePanel.prototype.onPointerUpHandler=function(){this.isOne=!0,this.video.stop(),this.onCompleteHandler()},PicaRoamEffectOnePanel.prototype.setVideoSize=function(){if(this.video.frame){this.video.scale=1;var e=this.width/this.video.displayWidth,i=this.height/this.video.displayHeight;this.video.scale=e>i?e:i}},PicaRoamEffectOnePanel}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaRoomSettingPanel",(function(){return f}));var a,s=n(788),o=n(0),h=n(789),l=n(790),c=n(1001),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaRoomSettingPanel(i,n,a,s,o,h){var l=e.call(this,i,n,a)||this;return l.dpr=h,l.setSize(s,o),l.createAttribute(),l}return m(PicaRoomSettingPanel,e),PicaRoomSettingPanel.prototype.setAttributeData=function(e){this.roomPassword.setAttributeData(e.name)},PicaRoomSettingPanel.prototype.setHandler=function(e){this.send=e},PicaRoomSettingPanel.prototype.createAttribute=function(){var e=.5*-this.height+25*this.dpr,i=34*this.dpr,n=this.width-10*this.dpr,a=20*this.dpr+i;this.roomPassword=new c.RoomNameAttribute(this.scene,n,i,this.dpr,this.zoom,"number",o.i18n.t("room_info.inputtips")),this.roomPassword.setHandler(new o.Handler(this,this.onPassWordHandler)),this.roomPassword.y=e,e+=a,this.passwordTips=this.scene.make.text({text:o.i18n.t("room_info.passwordtips"),style:o.UIHelper.colorStyle("#A0A0A0",10*this.dpr)}).setOrigin(0,.5),this.passwordTips.x=-60*this.dpr,this.passwordTips.y=e+30*this.dpr,this.friendBtn=new g(this.scene,this.dpr),this.friendBtn.x=this.passwordTips.x,this.friendBtn.y=this.passwordTips.y+30*this.dpr,this.friendBtn.on(s.ClickEvent.Tap,this.onToggleHandler,this),this.friendinvite=new g(this.scene,this.dpr),this.friendinvite.x=this.friendBtn.x,this.friendinvite.y=this.friendBtn.y+30*this.dpr,this.friendinvite.on(s.ClickEvent.Tap,this.onToggleHandler,this),this.saveButton=new s.NineSliceButton(this.scene,0,0,114*this.dpr,36*this.dpr,l.d.uicommon,"button_g",o.i18n.t("room_info.savesetting"),this.dpr,1,o.UIHelper.button(this.dpr)),this.saveButton.y=.5*this.height-.5*this.saveButton.height-100*this.dpr,this.saveButton.on(s.ClickEvent.Tap,this.onSaveHandler,this),this.add([this.roomPassword,this.passwordTips,this.friendBtn,this.friendinvite,this.saveButton])},PicaRoomSettingPanel.prototype.hide=function(){this.visible=!1,this.roomPassword.hide()},PicaRoomSettingPanel.prototype.show=function(){this.visible=!0,this.roomPassword.show()},PicaRoomSettingPanel.prototype.onPassWordHandler=function(){this.send&&this.send.runWith(["password",this.roomPassword.text])},PicaRoomSettingPanel.prototype.onSaveHandler=function(){this.send&&this.send.runWith(["setting",{password:this.roomPassword.text,permission:this.permission}])},PicaRoomSettingPanel.prototype.onToggleHandler=function(e,i){},PicaRoomSettingPanel}(Phaser.GameObjects.Container),g=function(e){function ToggleText(i,n){var a=e.call(this,i)||this;return a.dpr=n,a.toggle=new h.ToggleButton(i,50*n,50*n,l.d.room_info,"room_authority_unselected","room_authority_selected",n),a.text=i.make.text({style:o.UIHelper.blackStyle(n)}).setOrigin(0,.5),a.text.x=.5*a.toggle.width+5*n,a.add([a.toggle,a.text]),a}return m(ToggleText,e),ToggleText.prototype.setText=function(e){this.text.text=e},ToggleText.prototype.on=function(e,i,n){return this.toggle.on(e,i,n),this},ToggleText}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.d(i,"a",(function(){return f})),n.d(i,"c",(function(){return g})),n.d(i,"b",(function(){return T}));var a,s=n(2),o=n(0),h=n(893),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function GuideEffect(i,n){void 0===n&&(n=1);var a=e.call(this,i)||this;return a.tmpScale=n,a.mInitialized=!1,a.mScale=1,a.mResources=new Map,a.mScale*=a.tmpScale,a.preload(),a}return l(GuideEffect,e),GuideEffect.prototype.preload=function(){var e=this,i=0;this.mResources.set("guideBg",{key:"guideBg",url:"guide/guideBg.png",type:"image"}),this.mResources.set("handEffect",{key:"handEffect",url:"ui/fall_effect/falleffect.png",data:"ui/fall_effect/falleffect.json",type:"atlas"}),this.mResources&&this.mResources.forEach((function(n){e.scene.textures.exists(n.key)||(i++,n.type&&e.scene.load[n.type]&&e.scene.load[n.type](n.key,o.Url.getRes(n.url),o.Url.getRes(n.data)))}),this),i>0?(this.addListen(),this.scene.load.start()):(this.mResources&&this.mResources.clear(),this.setInitialize(!0))},GuideEffect.prototype.createGuideEffect=function(e){if(this.mInitialized){var i=this.scene.cameras.main.width,n=this.scene.cameras.main.height;this.setSize(i,n),this.mGuideEffect||(this.mGuideEffect=this.scene.make.image({x:0,y:0,key:"guideBg"}),this.mGuideEffect.setOrigin(0,0),this.mGuideEffect.frame.setSize(i+20,n+20),this.mGuideEffect.setPosition(0,0),this.mHandDisplay=new m(this.scene,"handEffect"),this.mHandDisplay.scale=this.tmpScale,this.scene.layerManager.addToLayer(h.a.LAYER_MASK,this.mGuideEffect),this.scene.layerManager.addToLayer(h.a.LAYER_MASK,this.mHandDisplay)),this.updatePos(e),this.start()}else this.mCachePos=e},GuideEffect.prototype.updatePos=function(e){if(this.mMask)this.mMask.setPosition(e.x,e.y);else{this.mMask=this.scene.make.graphics(void 0),this.mMask.fillStyle(0),this.mMask.fillCircle(0,0,50),this.mMask.setPosition(e.x,e.y);var i=this.mMask.createGeometryMask().setInvertAlpha(!0);this.mGuideEffect.setMask(i)}this.mHandDisplay&&this.mHandDisplay.setPosition(e.x,e.y)},GuideEffect.prototype.start=function(){this.scaleTween()},GuideEffect.prototype.stop=function(){this.mScaleTween&&(this.mScaleTween.stop(),this.mScaleTween=null)},GuideEffect.prototype.scaleTween=function(){var e=this;if(!this.mScaleTween&&this.scene){var i=this;this.mScaleTween=this.scene.tweens.add({targets:i.mMask,duration:700,ease:"Linear",props:{scaleX:{value:i.mScale>.5*this.tmpScale?.5*this.tmpScale:1*this.tmpScale},scaleY:{value:i.mScale>.5*this.tmpScale?.5*this.tmpScale:1*this.tmpScale}},onComplete:function(){i.mScale=i.mScale>.5*e.tmpScale?.5*e.tmpScale:1*e.tmpScale,i.mScaleTween&&(i.mScaleTween=void 0),i.scaleTween()}})}},GuideEffect.prototype.destroy=function(){this.disableInteractive(),this.stop(),this.mGuideEffect&&(this.mGuideEffect.destroy(),this.mGuideEffect=null),this.mHandDisplay&&(this.mHandDisplay.destroy(),this.mHandDisplay=null),this.mMask&&(this.mMask.clear(),this.mMask.destroy(),this.mMask=null),this.setInitialize(!1),this.removeListen(),e.prototype.destroy.call(this)},GuideEffect.prototype.setInitialize=function(e){this.mInitialized=e,e&&this.mCachePos&&this.createGuideEffect(this.mCachePos)},GuideEffect.prototype.addListen=function(){this.scene&&(this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.loadError,this),this.scene.load.on(Phaser.Loader.Events.FILE_COMPLETE,this.loadImageHandler,this))},GuideEffect.prototype.removeListen=function(){this.scene&&(this.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,this.loadError,this),this.scene.load.off(Phaser.Loader.Events.FILE_COMPLETE,this.loadImageHandler,this))},GuideEffect.prototype.loadImageHandler=function(e){this.mResources&&(this.mResources.has(e)&&this.mResources.delete(e),0===this.mResources.size&&(this.setInitialize(!0),this.removeListen()))},GuideEffect.prototype.loadError=function(e){this.mResources&&this.loadImageHandler(e.key)},GuideEffect}(Phaser.GameObjects.Container),m=function(e){function HandDisplay(i,n){var a=e.call(this,i)||this;a.mImage=i.make.sprite({key:n,x:9,y:-20},!1),a.add(a.mImage);var s={key:"hand_enable",frames:a.scene.anims.generateFrameNames("handEffect",{prefix:"enable",end:3,zeroPad:2}),frameRate:4,repeat:-1};return a.scene.anims.create(s),a.mImage.play("hand_enable"),a}return l(HandDisplay,e),HandDisplay}(Phaser.GameObjects.Container),f=function(){function BaseGuide(e){this.render=e,this.mIsShow=!1,this.scene=e.sceneManager.getSceneByName(s.SceneName.MAINUI_SCENE),this.uiManager=e.uiManager}return Object.defineProperty(BaseGuide.prototype,"data",{get:function(){return this.mData},enumerable:!1,configurable:!0}),BaseGuide.prototype.show=function(e){this.mIsShow=!0,this.mData=e,this.id=e.id,this.guideID=e.guideID,this.guideEffect||(this.guideEffect=new c(this.scene,this.render.uiRatio)),this.render.guideManager.startGuide(this)},BaseGuide.prototype.end=function(){this.hide()},BaseGuide.prototype.hide=function(){this.mIsShow=!1,this.render.guideManager.stopGuide(),this.guideEffect&&(this.guideEffect.destroy(),this.guideEffect=null),this.render.uiManager.closePanel(this.id)},BaseGuide.prototype.checkInteractive=function(e){return!0},BaseGuide.prototype.destroy=function(){this.hide()},BaseGuide.prototype.resize=function(){},BaseGuide.prototype.isShow=function(){return this.mIsShow},BaseGuide.prototype.addExportListener=function(e){},BaseGuide}(),g=function(){function GuideManager(e){this.render=e,this.guideMap=new Map}return Object.defineProperty(GuideManager.prototype,"curGuide",{get:function(){return this.mGurGuide},enumerable:!1,configurable:!0}),GuideManager.prototype.canInteractive=function(e){return!!this.mGurGuide&&(!e||this.mGurGuide.checkInteractive(e))},GuideManager.prototype.init=function(e){},GuideManager.prototype.destroy=function(){this.guideMap.forEach((function(e){e.destroy()})),this.guideMap.clear(),this.guideMap=null},GuideManager.prototype.startGuide=function(e){this.mGurGuide=e},GuideManager.prototype.stopGuide=function(){this.mGurGuide=null},GuideManager}(),_=function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),T=function(e){function BasePlaySceneGuide(i,n){var a=e.call(this,n.render)||this;return a.mElementID=i,a.mPlayScene=a.render.game.scene.getScene(s.SceneName.PLAY_SCENE),a}return _(BasePlaySceneGuide,e),Object.defineProperty(BasePlaySceneGuide.prototype,"data",{get:function(){return this.mElementID},enumerable:!1,configurable:!0}),BasePlaySceneGuide.prototype.show=function(i){e.prototype.show.call(this,i),this.mElement=this.render.displayManager.getDisplay(this.mElementID),this.mElement||this.end(),this.step1(this.getGuidePosition())},BasePlaySceneGuide.prototype.hide=function(){this.mPlayScene.input.off("gameobjectup",this.gameObjectUpHandler,this),this.mPointer&&this.mPlayScene.motionMgr.onGuideOnPointUpHandler(this.mPointer,this.mElementID),e.prototype.hide.call(this)},BasePlaySceneGuide.prototype.checkInteractive=function(e){return e!==this.mElementID},BasePlaySceneGuide.prototype.step1=function(e){var i={x:e.x,y:e.y};this.guideEffect.createGuideEffect(i),this.mPlayScene.input.on("gameobjectup",this.gameObjectUpHandler,this)},BasePlaySceneGuide.prototype.gameObjectUpHandler=function(e,i){i.getData("id")===this.mElementID&&(this.mPointer=e,this.end())},BasePlaySceneGuide.prototype.updateGuidePos=function(){this.guideEffect.createGuideEffect(this.getGuidePosition())},BasePlaySceneGuide.prototype.getGuidePosition=function(){var e=o.Tool.getPosByScenes(this.mPlayScene,{x:this.mElement.x,y:this.mElement.y});return{x:e.x,y:e.y}},BasePlaySceneGuide}(f)},function(e,i,n){"use strict";n.d(i,"a",(function(){return l}));var a,s=n(1),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function FallEffect(i,n){var a=e.call(this,i)||this;return a.scale=n,a}return h(FallEffect,e),FallEffect.prototype.show=function(e){this.mStatus=e,this.load()},FallEffect.prototype.load=function(){this.scene.textures.exists("fall_effect")?this.onCompleteHandler():(this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.onCompleteHandler,this),this.scene.load.atlas("fall_effect",o.Url.getRes("ui/fall_effect/falleffect.png"),o.Url.getRes("ui/fall_effect/falleffect.json")),this.scene.load.start())},FallEffect.prototype.showEnable=function(){this.mDisplay=new c(this.scene,"fall_effect"),this.add(this.mDisplay)},FallEffect.prototype.showDisable=function(){this.mDisplay=new m(this.scene,"fall_effect"),this.add(this.mDisplay)},FallEffect.prototype.onCompleteHandler=function(){var e=this;this.mStatus===s.op_def.PathReachableStatus.PATH_REACHABLE_AREA||this.mStatus===s.op_def.PathReachableStatus.PATH_REACHABLE_WITH_INTERACTION_SPRITE?this.showEnable():this.showDisable(),this.scene.tweens.add({targets:this,duration:1e3,ease:"Expo",delay:300,props:{alpha:0},onComplete:function(){e.destroy(),e.emit("remove",e)}})},FallEffect}(Phaser.GameObjects.Container),c=function(e){function EnableDisplay(i,n){var a=e.call(this,i)||this;a.mImage=i.make.sprite({key:n,x:9,y:-20},!1).setScale(.5),a.add(a.mImage),a.mEllipse=i.make.sprite(void 0,!1),a.addAt(a.mEllipse,0);var s={key:"fill_effect_enable",frames:a.scene.anims.generateFrameNames("fall_effect",{prefix:"enable",end:3,zeroPad:2}),frameRate:10,repeat:0};a.scene.anims.create(s),a.mImage.play("fill_effect_enable");var o={key:"fill_effect_ellipse",frames:a.scene.anims.generateFrameNames("fall_effect",{prefix:"ellipse",end:7,zeroPad:2}),frameRate:18,repeat:0};return a.scene.anims.create(o),a.mEllipse.play("fill_effect_ellipse"),a}return h(EnableDisplay,e),EnableDisplay}(Phaser.GameObjects.Container),m=function(e){function DisableDisplay(i,n){var a=e.call(this,i)||this;return a.mImage=i.make.image({key:n,y:-6,frame:"disable"},!1).setScale(.5),a.add(a.mImage),a.mEllipse=i.make.image({key:n,frame:"forbid"},!1).setScale(.5),a.add([a.mImage,a.mEllipse]),a}return h(DisableDisplay,e),DisableDisplay}(Phaser.GameObjects.Container);!function(){function FallEffectContainer(e){this.render=e,this.mFalls=[]}FallEffectContainer.prototype.addFall=function(e,i){if(e){var n=this.render.sceneManager.getMainScene(),a=new l(n,this.render.scaleRatio);a.once("remove",this.onRemoveHandler,this),a.setPosition(e.x,e.y),n.layerManager.addToLayer("sceneUILayer",a)}},FallEffectContainer.prototype.onRemoveHandler=function(e){}}()},function(e,i,n){"use strict";n.d(i,"a",(function(){return h}));var a,s=n(789),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function PicaGuideManager(i){var n=e.call(this,i)||this;return n.render=i,n}return o(PicaGuideManager,e),PicaGuideManager.prototype.stopGuide=function(){if(this.mGurGuide){var i=this.mGurGuide.guideID;this.render.mainPeer.stopGuide(i),e.prototype.stopGuide.call(this)}},PicaGuideManager}(s.GuideManager)},function(e,i,n){"use strict";n.d(i,"a",(function(){return m}));var a,s=n(820),o=n(0),h=n(888),l=n(2),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},m=function(e){function MouseManagerDecorate(i){var n=e.call(this,i)||this;return n.render=i,n.downGameObject=!1,n.downDisplay=null,n}return c(MouseManagerDecorate,e),MouseManagerDecorate.prototype.destroy=function(){this.removeListener(),e.prototype.destroy.call(this)},MouseManagerDecorate.prototype.onUpdate=function(e,i){},MouseManagerDecorate.prototype.changeScene=function(i){var n=this;this.removeListener(),e.prototype.changeScene.call(this,i),this.removeListener(),this.addListener(),this.render.mainPeer.getCurrentRoomMiniSize().then((function(e){n.roomSize=e}))},MouseManagerDecorate.prototype.onPointerDownHandler=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return this.downGameObject||(this.downDisplay=null,this.downPointerPos=new o.LogicPos(e.worldX/this.render.scaleRatio,e.worldY/this.render.scaleRatio),this.scene.input.off("pointermove",this.onPointerMoveHandler,this),this.scene.input.on("pointermove",this.onPointerMoveHandler,this),this.scene.input.off("pointerup",this.onPointerUpHandler,this),this.scene.input.on("pointerup",this.onPointerUpHandler,this)),[2]}))}))},MouseManagerDecorate.prototype.onPointerUpHandler=function(e){return __awaiter(this,void 0,void 0,(function(){var i,n,a,s,h,l;return __generator(this,(function(c){switch(c.label){case 0:return[4,this.render.mainPeer.getDecorateSelectedElementID()];case 1:return i=c.sent(),(n=this.render.displayManager.getDisplay(i))&&n===this.downDisplay?(a=new o.LogicPos(e.worldX/this.render.scaleRatio,e.worldY/this.render.scaleRatio),s=new o.LogicPos(a.x+this.downDisplayPos.x-this.downPointerPos.x,a.y+this.downDisplayPos.y-this.downPointerPos.y),[4,this.render.mainPeer.decoratePointerPosToElementPos(i,s)]):[3,3];case 2:return h=c.sent(),l=new o.LogicPos(h.x-this.downDisplayPos.x,h.y-this.downDisplayPos.y),this.render.mainPeer.decorateMoveElement(i,l),[3,4];case 3:Math.abs(e.downX-e.x)<5*this.zoom&&Math.abs(e.downY-e.y)<5*this.zoom&&this.downDisplay&&this.render.mainPeer.decorateSelectElement(this.downDisplay.id),c.label=4;case 4:return this.clearDownData(),[2]}}))}))},MouseManagerDecorate.prototype.onPointerMoveHandler=function(e){return __awaiter(this,void 0,void 0,(function(){var i,n,a,s,h;return __generator(this,(function(c){switch(c.label){case 0:return i=new o.LogicPos(e.worldX/this.render.scaleRatio,e.worldY/this.render.scaleRatio),[4,this.render.mainPeer.getDecorateSelectedElementID()];case 1:return n=c.sent(),(a=this.render.displayManager.getDisplay(n))&&a===this.downDisplay?(s=new o.LogicPos(i.x+this.downDisplayPos.x-this.downPointerPos.x,i.y+this.downDisplayPos.y-this.downPointerPos.y),[4,this.render.mainPeer.decoratePointerPosToElementPos(n,s)]):[3,3];case 2:return h=c.sent(),a.setPosition(h.x,h.y),this.render.mainPeer.updateDecorateElementCanPlaceShow(n,h.x,h.y),[3,4];case 3:Math.abs(e.downX-e.x)<5*this.zoom&&Math.abs(e.downY-e.y)<5*this.zoom||(this.downDisplay=null,this.render.camerasManager.offsetScroll(e.prevPosition.x-e.position.x,e.prevPosition.y-e.position.y)),c.label=4;case 4:return this.render.emitter.emit(l.MessageType.DECORATE_UPDATE_SELECTED_ELEMENT_POSITION),[2]}}))}))},MouseManagerDecorate.prototype.onPointeroutHandler=function(){this.clearDownData()},MouseManagerDecorate.prototype.onGameObjectDownHandler=function(e,i){return __awaiter(this,void 0,void 0,(function(){var n,a,s;return __generator(this,(function(l){switch(l.label){case 0:return i?(this.downGameObject=!0,this.scene.input.off("pointermove",this.onPointerMoveHandler,this),this.scene.input.on("pointermove",this.onPointerMoveHandler,this),this.scene.input.off("pointerup",this.onPointerUpHandler,this),this.scene.input.on("pointerup",this.onPointerUpHandler,this),(n=i.getData("id"))?(a=this.render.displayManager.getDisplay(n),(s=a&&a.nodeType===h.b.ElementNodeType)?[4,this.render.mainPeer.isElementLocked(n)]:[3,2]):[3,3]):[2];case 1:s=!l.sent(),l.label=2;case 2:s&&(this.downDisplay=a,this.downPointerPos=new o.LogicPos(e.worldX/this.render.scaleRatio,e.worldY/this.render.scaleRatio),this.downDisplayPos=new o.LogicPos(a.x,a.y)),l.label=3;case 3:return[2]}}))}))},MouseManagerDecorate.prototype.clearDownData=function(){this.downGameObject=!1,this.downDisplay=null,this.downPointerPos=new o.LogicPos,this.downDisplayPos=new o.LogicPos,this.scene.input.off("pointermove",this.onPointerMoveHandler,this),this.scene.input.off("pointerup",this.onPointerUpHandler,this)},MouseManagerDecorate.prototype.addListener=function(){this.scene&&(this.scene.input.on("pointerdown",this.onPointerDownHandler,this),this.scene.input.on("gameobjectdown",this.onGameObjectDownHandler,this))},MouseManagerDecorate.prototype.removeListener=function(){this.scene&&(this.scene.input.off("pointerup",this.onPointerUpHandler,this),this.scene.input.off("pointerdown",this.onPointerDownHandler,this),this.scene.input.off("pointermove",this.onPointerMoveHandler,this),this.scene.input.off("gameobjectdown",this.onGameObjectDownHandler,this),this.scene.input.off("gameobjectup",this.onGameObjectUpHandler,this))},MouseManagerDecorate}(s.a)},function(e,i,n){"use strict";n(1014)},function(e,i,n){"use strict";n(890);var a=n(891);n.d(i,"DragonbonesDisplay",(function(){return a.a}));var s=n(892);n.d(i,"FramesDisplay",(function(){return s.a}));n(1016),n(1015);var o=n(1068);n.d(i,"UIDragonbonesDisplay",(function(){return o.a}));var h=n(1069);n.o(h,"AlertView")&&n.d(i,"AlertView",(function(){return h.AlertView})),n.o(h,"AlignmentType")&&n.d(i,"AlignmentType",(function(){return h.AlignmentType})),n.o(h,"AnimationModel")&&n.d(i,"AnimationModel",(function(){return h.AnimationModel})),n.o(h,"AxisType")&&n.d(i,"AxisType",(function(){return h.AxisType})),n.o(h,"BackgroundScaleButton")&&n.d(i,"BackgroundScaleButton",(function(){return h.BackgroundScaleButton})),n.o(h,"BaseGuide")&&n.d(i,"BaseGuide",(function(){return h.BaseGuide})),n.o(h,"BasePanel")&&n.d(i,"BasePanel",(function(){return h.BasePanel})),n.o(h,"BasePlaySceneGuide")&&n.d(i,"BasePlaySceneGuide",(function(){return h.BasePlaySceneGuide})),n.o(h,"BubbleAnimation")&&n.d(i,"BubbleAnimation",(function(){return h.BubbleAnimation})),n.o(h,"ButtonEventDispatcher")&&n.d(i,"ButtonEventDispatcher",(function(){return h.ButtonEventDispatcher})),n.o(h,"CheckBoxToggle")&&n.d(i,"CheckBoxToggle",(function(){return h.CheckBoxToggle})),n.o(h,"CheckboxGroup")&&n.d(i,"CheckboxGroup",(function(){return h.CheckboxGroup})),n.o(h,"ConstraintType")&&n.d(i,"ConstraintType",(function(){return h.ConstraintType})),n.o(h,"DisplayManager")&&n.d(i,"DisplayManager",(function(){return h.DisplayManager})),n.o(h,"DynamicImage")&&n.d(i,"DynamicImage",(function(){return h.DynamicImage})),n.o(h,"FrameAnimation")&&n.d(i,"FrameAnimation",(function(){return h.FrameAnimation})),n.o(h,"GridLayoutGroup")&&n.d(i,"GridLayoutGroup",(function(){return h.GridLayoutGroup})),n.o(h,"GuideManager")&&n.d(i,"GuideManager",(function(){return h.GuideManager})),n.o(h,"InputField")&&n.d(i,"InputField",(function(){return h.InputField})),n.o(h,"InputManager")&&n.d(i,"InputManager",(function(){return h.InputManager})),n.o(h,"InputPanel")&&n.d(i,"InputPanel",(function(){return h.InputPanel})),n.o(h,"ItemInfoTips")&&n.d(i,"ItemInfoTips",(function(){return h.ItemInfoTips})),n.o(h,"LabelInput")&&n.d(i,"LabelInput",(function(){return h.LabelInput})),n.o(h,"LocalStorageManager")&&n.d(i,"LocalStorageManager",(function(){return h.LocalStorageManager})),n.o(h,"MainUIScene")&&n.d(i,"MainUIScene",(function(){return h.MainUIScene})),n.o(h,"NinePatch")&&n.d(i,"NinePatch",(function(){return h.NinePatch})),n.o(h,"NinePatchButton")&&n.d(i,"NinePatchButton",(function(){return h.NinePatchButton})),n.o(h,"PlayScene")&&n.d(i,"PlayScene",(function(){return h.PlayScene})),n.o(h,"ProgressMaskBar")&&n.d(i,"ProgressMaskBar",(function(){return h.ProgressMaskBar})),n.o(h,"ProgressThreeBar")&&n.d(i,"ProgressThreeBar",(function(){return h.ProgressThreeBar})),n.o(h,"PropItem")&&n.d(i,"PropItem",(function(){return h.PropItem})),n.o(h,"Render")&&n.d(i,"Render",(function(){return h.Render})),n.o(h,"SceneManager")&&n.d(i,"SceneManager",(function(){return h.SceneManager})),n.o(h,"SoundButton")&&n.d(i,"SoundButton",(function(){return h.SoundButton})),n.o(h,"SoundManager")&&n.d(i,"SoundManager",(function(){return h.SoundManager})),n.o(h,"Tap")&&n.d(i,"Tap",(function(){return h.Tap})),n.o(h,"TextButton")&&n.d(i,"TextButton",(function(){return h.TextButton})),n.o(h,"TextToolTips")&&n.d(i,"TextToolTips",(function(){return h.TextToolTips})),n.o(h,"ThreeSliceButton")&&n.d(i,"ThreeSliceButton",(function(){return h.ThreeSliceButton})),n.o(h,"ThreeSlicePath")&&n.d(i,"ThreeSlicePath",(function(){return h.ThreeSlicePath})),n.o(h,"ToggleButton")&&n.d(i,"ToggleButton",(function(){return h.ToggleButton})),n.o(h,"ToggleColorButton")&&n.d(i,"ToggleColorButton",(function(){return h.ToggleColorButton})),n.o(h,"TweenCompent")&&n.d(i,"TweenCompent",(function(){return h.TweenCompent})),n.o(h,"UiManager")&&n.d(i,"UiManager",(function(){return h.UiManager})),n.o(h,"ValueContainer")&&n.d(i,"ValueContainer",(function(){return h.ValueContainer}));n(1017),n(1020),n(1021),n(1030);var l=n(1108);n.d(i,"AnimationModel",(function(){return l.a})),n.d(i,"BubbleAnimation",(function(){return l.b})),n.d(i,"FrameAnimation",(function(){return l.c}))},function(e,i,n){"use strict";n.d(i,"a",(function(){return h}));var a,s=n(891),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function UIDragonbonesDisplay(){var i=null!==e&&e.apply(this,arguments)||this;return i.mInteractive=!1,i.isBack=!1,i}return o(UIDragonbonesDisplay,e),UIDragonbonesDisplay.prototype.play=function(i){i.name=this.getAnimationName(i.name)+(this.isBack?"_back":""),e.prototype.play.call(this,i),this.mArmatureDisplay&&(this.mArmatureDisplay.hasDBEventListener(dragonBones.EventObject.LOOP_COMPLETE)&&this.mArmatureDisplay.removeDBEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onArmatureLoopComplete,this),i.times>0&&this.mArmatureDisplay.addDBEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onArmatureLoopComplete,this))},UIDragonbonesDisplay.prototype.setBack=function(e){this.isBack=e},UIDragonbonesDisplay.prototype.setCompleteHandler=function(e){this.mComplHandler=e},UIDragonbonesDisplay.prototype.setSuits=function(e){if(e)for(var i=0,n=e;i<n.length;i++){var a=n[i];if("weapon"===a.suit_type&&a.tag)return void(this.AniAction=JSON.parse(a.tag).action)}this.AniAction=void 0},UIDragonbonesDisplay.prototype.getAnimationName=function(e){if(this.AniAction){if("idle"===e)return this.AniAction[0];if("walk"===e)return this.AniAction[1]}return e},Object.defineProperty(UIDragonbonesDisplay.prototype,"back",{get:function(){return this.isBack},enumerable:!1,configurable:!0}),UIDragonbonesDisplay.prototype.displayCreated=function(){e.prototype.displayCreated.call(this),this.play({name:"idle",flip:!1})},UIDragonbonesDisplay.prototype.onArmatureLoopComplete=function(e){if(this.mArmatureDisplay&&this.mAnimation){this.mArmatureDisplay.removeDBEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onArmatureLoopComplete,this);var i=this.mAnimation.playingQueue;if(i&&void 0!==i.name){var n={name:i.name,times:i.playTimes,flip:this.mAnimation.flip};this.play(n)}else this.mComplHandler&&this.mComplHandler.run()}},UIDragonbonesDisplay}(s.a)},function(e,i){},function(e,i,n){"use strict";var a=n(1031);n.d(i,"a",(function(){return a.a}));n(1032),n(820),n(1018)},function(e,i,n){"use strict";(function(e){n.d(i,"a",(function(){return ct}));var a,s,o=n(72),h=(n(670),n(1072)),l=n(0),c=n(3),m=n(1),f=n(1014),g=n(1028),_=n(1019),T=n(799),x=n(889),S=n(32),j=n(2),q=n(888),Y=n(1031),X=n(1073),Z=n(14),$=n.n(Z),tt=n(1020),et=n(1030),it=n(1017),nt=n(1021),rt=n(806),at=n(1062),st=n(820),ot=n(1013),ht=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__decorate=function(e,i,n,a){var s,o=arguments.length,h=o<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(e,i,n,a);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(h=(o<3?s(h):o>3?s(i,n,h):s(i,n))||h);return o>3&&h&&Object.defineProperty(i,n,h),h},__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};for(var lt in m)c.PBpacket.addProtocol(m[lt]);!function(e){e[e.DIRECTION_MOVE_STYLE=1]="DIRECTION_MOVE_STYLE",e[e.FOLLOW_MOUSE_MOVE_STYLE=2]="FOLLOW_MOUSE_MOVE_STYLE",e[e.PATH_MOVE_STYLE=3]="PATH_MOVE_STYLE"}(s||(s={}));var ct=function(i){function Render(e,n){var a=i.call(this,j.RENDER_PEER)||this;return a.isConnect=!1,a.sceneCreated=!1,a.DEFAULT_WIDTH=360,a.DEFAULT_HEIGHT=640,a._moveStyle=0,a.isPause=!1,a.mWorkerDestroyMap=new Map,a.hiddenDelay=6e4,l.Logger.getInstance().log("config ====>",e),a.emitter=new Phaser.Events.EventEmitter,a.mConfig=e,a.mCallBack=n,a.gridsDebugger=new it.a(a),a.astarDebugger=new tt.a(a),a.sortDebugger=new nt.a(a),a.editorModeDebugger=new et.a(a),a.mConnectFailFunc=a.mConfig.connectFail,a.mGameCreatedFunc=a.mConfig.game_created,a.mGameLoadedFunc=a.mConfig.gameLoaded,a.mConfig.hasConnectFail=!!a.mConnectFailFunc,a.mConfig.hasCloseGame=!!a.mConfig.closeGame,a.mConfig.hasGameCreated=!!a.mConfig.game_created,a.mConfig.hasReload=!!a.mConfig.reload,a.mConfig.hasGameLoaded=!!a.mConfig.gameLoaded,delete a.mConfig.connectFail,delete a.mConfig.game_created,delete a.mConfig.closeGame,delete a.mConfig.gameLoaded,a.initConfig(),l.Logger.getInstance().log("Render version ====>:","v"+$.a),a.initWorker(),a}return ht(Render,i),Object.defineProperty(Render.prototype,"physicalPeer",{get:function(){throw new Error("physical has been discarded")},enumerable:!1,configurable:!0}),Render.prototype.setKeyBoardHeight=function(e){throw new Error("Method not implemented.")},Object.defineProperty(Render.prototype,"config",{get:function(){return this.mConfig},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"uiRatio",{get:function(){return this.mUIRatio},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"devicePixelRatio",{get:function(){return this.mConfig.devicePixelRatio},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"uiScale",{get:function(){return this.mUIScale},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"scaleRatio",{get:function(){return this.mScaleRatio},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"roomSize",{get:function(){return this.mRoomSize},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"roomMiniSize",{get:function(){return this.mRoomMiniSize},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"account",{get:function(){return this.mAccount},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"uiManager",{get:function(){return this.mUiManager},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"sceneManager",{get:function(){return this.mSceneManager},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"guideManager",{get:function(){return this.mGuideManager},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"camerasManager",{get:function(){return this.mCameraManager},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"displayManager",{get:function(){return this.mDisplayManager},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"soundManager",{get:function(){return this.mSoundManager},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"localStorageManager",{get:function(){return this.mLocalStorageManager},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"editorCanvasManager",{get:function(){return this.mEditorCanvasManager},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"game",{get:function(){return this.mGame},enumerable:!1,configurable:!0}),Render.prototype.getSize=function(){if(this.mGame)return this.mGame.scale.gameSize},Render.prototype.createGame=function(){var e=this;this.newGame().then((function(){e.createManager(),e.remote[j.MAIN_WORKER].MainPeer.createGame(e.mConfig)}))},Render.prototype.createManager=function(){this.mUiManager||(this.mUiManager=new rt.UiManager(this)),this.mCameraManager||(this.mCameraManager=new x.a(this)),this.mLocalStorageManager||(this.mLocalStorageManager=new _.a),this.mSceneManager||(this.mSceneManager=new g.a(this)),this.mGuideManager||(this.mGuideManager=new at.c(this)),this.mInputManager||(this.mInputManager=new Y.a(this)),this.mSoundManager||(this.mSoundManager=new ot.d(this)),this.mDisplayManager||(this.mDisplayManager=new q.a(this)),this.mEditorCanvasManager||(this.mEditorCanvasManager=new X.a(this))},Render.prototype.destroyManager=function(){this.mUiManager&&(this.mUiManager.destroy(),this.mUiManager=void 0),this.mCameraManager&&(this.mCameraManager.destroy(),this.mCameraManager=void 0),this.mSceneManager&&(this.mSceneManager.destroy(),this.mSceneManager=void 0),this.mSoundManager&&(this.mSoundManager.destroy(),this.mSoundManager=void 0),this.mGuideManager&&(this.mGuideManager.destroy(),this.mGuideManager=void 0),this.mInputManager&&(this.mInputManager.destroy(),this.mInputManager=void 0),this.mDisplayManager&&(this.mDisplayManager.destroy(),this.mDisplayManager=void 0),this.mEditorCanvasManager&&(this.mEditorCanvasManager.destroy(),this.mEditorCanvasManager=void 0)},Render.prototype.clearManager=function(){this.sceneCreated=!1,this.emitter.emit(Render.SCENE_DESTROY),this.mUiManager&&this.mUiManager.destroy(),this.mCameraManager&&this.mCameraManager.destroy(),this.mSoundManager&&this.mSoundManager.destroy(),this.mSceneManager&&this.mSceneManager.destroy(),this.mInputManager&&this.mInputManager.destroy(),this.mDisplayManager&&this.mDisplayManager.destroy()},Render.prototype.enterGame=function(){this.remote[j.MAIN_WORKER].MainPeer.loginEnterWorld(),this.mGame.scene.remove(j.SceneName.LOGIN_SCENE)},Render.prototype.resize=function(e,i){if(.65*e>i)this.dealTipsScene(j.SceneName.BLACK_SCENE,!0);else{var n=this.mGame.scene.getScene(j.SceneName.BLACK_SCENE);n&&n.scene.isActive()&&this.dealTipsScene(j.SceneName.BLACK_SCENE,!1)}var a=this.uiManager.getPanel(j.ModuleName.BOTTOM);if(a){var s=this.game.domContainer.getElementsByTagName("input");if(s&&s.length>0)return a.getInputFocusing()?void a.showKeyboard(e*this.mConfig.devicePixelRatio,i*this.mConfig.devicePixelRatio):void a.hideKeyboard()}this.mConfig&&(this.mConfig.width=e,this.mConfig.height=i);var o=e*this.mConfig.devicePixelRatio,h=i*this.mConfig.devicePixelRatio;if(this.initRatio(),this.mGame){this.mGame.scale.zoom=1/this.mConfig.devicePixelRatio,this.mGame.scale.resize(o,h);for(var l=0,c=this.mGame.scene.scenes;l<c.length;l++){var m=c[l].cameras.main;m&&m.setPixelRatio&&m.setPixelRatio(this.mScaleRatio)}}this.mUiManager&&this.mUiManager.resize(o,h),this.mInputManager&&this.mInputManager.resize(o,h),this.mDisplayManager&&this.mDisplayManager.resize(o,h),this.mCameraManager&&this.mCameraManager.resize(e,i)},Render.prototype.onOrientationChange=function(e,i,n){},Render.prototype.scaleChange=function(e){},Render.prototype.enableClick=function(){var e=this.sceneManager.getMainScene();e&&(e.input.enabled=!0);var i=this.game.scene.getScene("MainUIScene");i&&(i.input.enabled=!0)},Render.prototype.disableClick=function(){if(this.sceneManager){var e=this.sceneManager.getMainScene();e&&(e.input.enabled=!1);var i=this.game.scene.getScene("MainUIScene");i&&(i.input.enabled=!1)}},Render.prototype.keyboardDidShow=function(e){var i=this.uiManager.getPanel(j.ModuleName.BOTTOM),n=this.mConfig.width,a=this.mConfig.height-e;i&&i.showKeyboard(n*this.mConfig.devicePixelRatio,a*this.mConfig.devicePixelRatio)},Render.prototype.keyboardDidHide=function(){var e=this.uiManager.getPanel(j.ModuleName.BOTTOM);e&&e.hideKeyboard()},Render.prototype.visibilitychange=function(e){var i=this;"hidden"===e?this.mHiddenTime=setTimeout((function(){clearTimeout(i.mHiddenTime),i.hidden()}),this.hiddenDelay):clearTimeout(this.mHiddenTime)},Render.prototype.showErrorMsg=function(e){this.uiManager.showErrorMsg(e)},Render.prototype.hidden=function(){var e=this,i=this.sceneManager.getSceneByName(j.SceneName.LOGIN_SCENE);i&&i.scene.isActive()||this.destroy(!1).then((function(){e.initWorker()}))},Render.prototype.startFullscreen=function(){},Render.prototype.stopFullscreen=function(){},Render.prototype.setGameConfig=function(e){},Render.prototype.updatePalette=function(e){this.mainPeer.updatePalette(e)},Render.prototype.updateMoss=function(e){this.mainPeer.updateMoss(e)},Render.prototype.restart=function(e,i){},Render.prototype.initUI=function(){this.remote[j.MAIN_WORKER].MainPeer.initUI()},Render.prototype.startRoomPlay=function(){this.sceneCreated=!0,this.emitter.emit(Render.SCENE_CREATED),this.remote[j.MAIN_WORKER].MainPeer.startRoomPlay()},Render.prototype.updateRoom=function(e,i){this.mInputManager.update(e,i),this.mDisplayManager.update(e,i)},Render.prototype.destroyWorker=function(e){for(var i=this,n=[],_loop_1=function(e){var s=new l.ValueResolver,o=s.promise((function(){var n=i.remote[e];for(var a in n){if(Object.prototype.hasOwnProperty.call(n,a))n[a].destroy()}}));n.push(o),a.mWorkerDestroyMap.set(e,s)},a=this,s=0,o=e;s<o.length;s++){_loop_1(o[s])}return Promise.all(n)},Render.prototype.destroy=function(e){var n=this;return void 0===e&&(e=!0),new Promise((function(a,s){n.destroyWorker([j.MAIN_WORKER]).then((function(){n.mGame?(n.destroyManager(),n.mGame.events.off(Phaser.Core.Events.FOCUS,n.onFocus,n),n.mGame.events.off(Phaser.Core.Events.BLUR,n.onBlur,n),n.mGame.scale.off("enterfullscreen",n.onFullScreenChange,n),n.mGame.scale.off("leavefullscreen",n.onFullScreenChange,n),n.mGame.scale.off("orientationchange",n.onOrientationChange,n),n.mGame.plugins.removeGlobalPlugin("rexButton"),n.mGame.plugins.removeGlobalPlugin("rexNinePatchPlugin"),n.mGame.plugins.removeGlobalPlugin("rexInputText"),n.mGame.plugins.removeGlobalPlugin("rexBBCodeTextPlugin"),n.mGame.plugins.removeGlobalPlugin("rexMoveTo"),n.mGame.plugins.removeScenePlugin("DragonBones"),n.mGame.events.once(Phaser.Core.Events.DESTROY,(function(){n.mGame=void 0,e&&i.prototype.destroy.call(n),a()})),n.mGame.destroy(!0)):(e&&i.prototype.destroy.call(n),a())}))}))},Object.defineProperty(Render.prototype,"curTime",{get:function(){return this._curTime},enumerable:!1,configurable:!0}),Object.defineProperty(Render.prototype,"moveStyle",{get:function(){return this._moveStyle},enumerable:!1,configurable:!0}),Render.prototype.initGameConfig=function(e){this.remote[j.MAIN_WORKER].MainPeer.initGameConfig(JSON.stringify(e))},Render.prototype.newGame=function(){var e=this;return new Promise((function(i,n){e.mGame&&i(!0),e.gameConfig={type:Phaser.AUTO,parent:e.mConfig.parent,loader:{timeout:1e4},disableContextMenu:!0,transparent:!1,backgroundColor:0,resolution:1,fps:{target:45,forceSetTimeOut:!0},dom:{createContainer:!0},plugins:{scene:[{key:"DragonBones",plugin:dragonBones.phaser.plugin.DragonBonesScenePlugin,mapping:"dragonbone"}]},render:{pixelArt:!0,roundPixels:!0},scale:{mode:Phaser.Scale.NONE,width:e.mConfig.baseWidth*e.devicePixelRatio,height:e.mConfig.baseHeight*e.devicePixelRatio,zoom:1/e.devicePixelRatio}},Object.assign(e.gameConfig,e.mConfig),e.mGame=new o.Game(e.gameConfig),e.mGame.input.mouse.capture=!0,e.mGame.device.os.desktop&&(e.mUIScale=1,e.mConfig.platform=j.PlatFormType.PC),i(!0)}))},Render.prototype.closeConnect=function(e){this.mainPeer.closeConnect(e)},Render.prototype.send=function(e){this.mainPeer.send(e.Serialization)},Render.prototype.terminate=function(){this.mainPeer.terminate()},Render.prototype.changeScene=function(e){this.mInputManager&&this.mInputManager.setScene(e),this.mSoundManager&&this.mSoundManager.setScene(e)},Render.prototype.onFocus=function(){},Render.prototype.onBlur=function(){},Render.prototype.syncClock=function(e){this.mainPeer.syncClock(e)},Render.prototype.clearClock=function(){this.mainPeer.clearClock()},Render.prototype.destroyClock=function(){this.mainPeer.destroyClock()},Render.prototype.exitUser=function(){this.mainPeer.exitUser()},Render.prototype.requestCurTime=function(){this.mainPeer.requestCurTime()},Render.prototype.setDirection=function(e,i){this.mainPeer.setDirection(e,i)},Render.prototype.onLoginErrorHanlerCallBack=function(e,i){},Render.prototype.onShowErrorHandlerCallBack=function(e,i){},Render.prototype.getCurrentRoomSize=function(){return this.mainPeer.getCurrentRoomSize()},Render.prototype.getCurrentRoomMiniSize=function(){return this.mainPeer.getCurrentRoomMiniSize()},Render.prototype.syncCameraScroll=function(){this.mMainPeer&&this.mMainPeer.syncCameraScroll()},Render.prototype.renderEmitter=function(e,i){this.mMainPeer&&this.mMainPeer.renderEmitter(e,i)},Render.prototype.renderToPhysicalEmitter=function(e,i){this.physicalPeer&&this.physicalPeer.renderEmitter(e,i)},Render.prototype.showMediator=function(e,i){this.mMainPeer&&this.mMainPeer.showMediator(e,i)},Render.prototype.getMainScene=function(){return this.mSceneManager.getMainScene()},Render.prototype.updateGateway=function(){var e=this.account.accountData;if(e&&e.gateway){if(this.mConfig.server_addr){var i=this.mConfig.server_addr;i.host||(i.host=e.gateway.host),i.port||(i.port=e.gateway.port)}else this.mConfig.server_addr=e.gateway;void 0===this.mConfig.server_addr.secure&&(this.mConfig.server_addr.secure=!0),this.mainPeer.setConfig(this.mConfig)}},Render.prototype.destroyAccount=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(i){return[2,new Promise((function(i,n){e.mAccount&&e.mAccount.destroy(),i()}))]}))}))},Render.prototype.reconnect=function(){this.createGame()},Render.prototype.showLogin=function(){var e={dpr:this.uiRatio,render:this};this.sceneManager&&this.mSceneManager.startScene(j.SceneName.LOGIN_SCENE,e)},Render.prototype.hideLogin=function(){this.sceneManager&&this.sceneManager.stopScene(j.SceneName.LOGIN_SCENE)},Render.prototype.checkContains=function(e,i,n){var a=this;return new Promise((function(e,s){e(a.mCameraManager.checkContains(new l.Pos(i,n)))}))},Render.prototype.showCreateRolePanel=function(e){var i=this;return new Promise((function(n,a){var createPanel=function(){i.mUiManager.showPanel(j.ModuleName.PICACREATEROLE_NAME,e).then((function(e){e?e.addExportListener((function(){n(!0)})):a(!1)}))};i.mUiManager.scene&&i.mUiManager.scene.scene.key===j.SceneName.CREATE_ROLE_SCENE?createPanel():i.mSceneManager.startScene(j.SceneName.CREATE_ROLE_SCENE,{callBack:function(){createPanel()}})}))},Render.prototype.updateModel=function(e,i){this.displayManager&&this.displayManager.updateModel(e,i)},Render.prototype.getIndexInLayer=function(e){if(!this.displayManager)return-1;var i=this.displayManager.getDisplay(e);return i?i.parentContainer.getIndex(i):-1},Render.prototype.changeLayer=function(e,i,n){if(this.displayManager){var a=this.displayManager.getDisplay(e);a&&(a.parentContainer.remove(a),this.displayManager.addToLayer(i,a,n))}},Render.prototype.showCreateRole=function(e){this.mSceneManager&&this.mSceneManager.startScene(j.SceneName.CREATE_ROLE_SCENE,{render:this,params:e})},Render.prototype.hideCreateRole=function(){this.mSceneManager&&this.mSceneManager.stopScene(j.SceneName.CREATE_ROLE_SCENE)},Render.prototype.showPlay=function(e){this.mSceneManager&&this.mSceneManager.startScene(j.SceneName.PLAY_SCENE,{render:this,params:e})},Render.prototype.updateFPS=function(){if(this.game){var e=this.game.scene.getScene(j.SceneName.MAINUI_SCENE);e&&e.scene.isVisible&&e.scene.isActive&&e.scene.isPaused&&e.updateFPS()}},Render.prototype.endFPS=function(){},Render.prototype.hidePlay=function(){this.mSceneManager&&this.mSceneManager.stopScene(j.SceneName.PLAY_SCENE)},Render.prototype.showPanel=function(e,i){var n=this;return new Promise((function(a,s){n.mUiManager.showPanel(e,i).then((function(e){e?e.addExportListener((function(){a(!0)})):s(!1)}))}))},Render.prototype.hidePanel=function(e){this.mUiManager&&this.mUiManager.hidePanel(e)},Render.prototype.showBatchPanel=function(e,i){this.mUiManager&&this.mUiManager.showBatchPanel(e,i)},Render.prototype.hideBatchPanel=function(e){this.mUiManager&&this.mUiManager.hideBatchPanel(e)},Render.prototype.reload=function(){l.Logger.getInstance().log("game relaod =====>")},Render.prototype.showJoystick=function(){this.mInputManager&&this.mInputManager.showJoystick()},Render.prototype.setInputVisible=function(e){},Render.prototype.onShowErrorHandler=function(e,i){this.onShowErrorHandlerCallBack(e,i)},Render.prototype.onLoginErrorHanler=function(e,i){this.onLoginErrorHanlerCallBack(e,i)},Render.prototype.updateCharacterPackage=function(){this.emitter.emit(j.MessageType.UPDATED_CHARACTER_PACKAGE)},Render.prototype.displayReady=function(e,i){var n=this.mDisplayManager.getDisplay(e);n&&i&&(n.play(i),n.showNickname())},Render.prototype.soundChangeRoom=function(e){},Render.prototype.playOsdSound=function(e){this.mSoundManager&&this.mSoundManager.playOsdSound(e)},Render.prototype.playSound=function(e){this.mSoundManager&&this.mSoundManager.playSound(e)},Render.prototype.stopAllSound=function(){this.mSoundManager&&this.mSoundManager.stopAll()},Render.prototype.pauseAll=function(){this.mSoundManager&&this.mSoundManager.pauseAll()},Render.prototype.startFireMove=function(e,i){this.mDisplayManager&&this.mDisplayManager.startFireMove(e,i)},Render.prototype.resume=function(){this.mSoundManager&&this.mSoundManager.resume()},Render.prototype.onConnected=function(){this.isConnect=!0},Render.prototype.onDisConnected=function(){this.isConnect=!1},Render.prototype.onConnectError=function(e){this.isConnect=!1},Render.prototype.connectFail=function(){this.isConnect=!1,this.mConnectFailFunc&&this.mConnectFailFunc()},Render.prototype.updateUIState=function(e,i){this.uiManager.updateUIState(e,i)},Render.prototype.setMoveStyle=function(e){this._moveStyle=e},Render.prototype.onEnterRoom=function(e){},Render.prototype.scaleTween=function(e,i){},Render.prototype.getRenderPosition=function(e,i){return[]},Render.prototype.createAccount=function(e,i,n,a,s){var o=this;return new Promise((function(h,c){o.mAccount||(o.mAccount=new f.a);var m=(new Date).getTime();l.Logger.getInstance().debug("createAccount ====>",m),o.exportProperty(o.mAccount,o,j.ModuleName.ACCOUNT_NAME).onceReady((function(){l.Logger.getInstance().debug("createAccountExport ====>",(new Date).getTime()-m),o.mAccount.enterGame(e,i,n,a,s),h(!0)}))}))},Render.prototype.refreshAccount=function(e){this.account.refreshToken(e),this.updateGateway()},Render.prototype.getAccount=function(){return this.mAccount},Render.prototype.setAccount=function(e){this.mAccount.setAccount(e),this.updateGateway()},Render.prototype.clearAccount=function(){this.mAccount.clear()},Render.prototype.getWorldView=function(){var e=this;if(this.sceneManager)return new Promise((function(i,n){var a=e.sceneManager.getMainScene();if(a){var s=a.cameras.main,o=s.worldView;i({x:o.x-600,y:o.y-300,width:s.width+1200,height:s.height+600,zoom:s.zoom,scrollX:s.scrollX,scrollY:s.scrollY})}}))},Render.prototype.onClockReady=function(){},Render.prototype.i18nString=function(e){return l.i18n.t(e)},Render.prototype.showAlert=function(e,i){var n=this;return void 0===i&&(i=!0),new Promise((function(a,s){n.uiManager&&n.uiManager.showAlertView(e,i,void 0,(function(){a(null)}))}))},Render.prototype.showAlertReconnect=function(e){var i=this;this.uiManager&&this.uiManager.showAlertView(e,!0,!1,(function(){var e=i.uiManager.getPanel(j.ModuleName.PICA_BOOT_NAME);e&&e.isShow()?e.show():i.mainPeer.reconnect()}))},Render.prototype.showLoading=function(e){var i=this;this.mSceneManager&&(void 0===e&&(e={}),e.callBack=function(){return e.sceneName&&i.mSceneManager.startScene(e.sceneName),new Promise((function(e,i){e(null)}))},e.dpr=this.uiRatio,this.mSceneManager.startScene(j.SceneName.LOADING_SCENE,e))},Render.prototype.updateProgress=function(e){e>1&&(e=1),e.toFixed(2),this.mSceneManager&&this.mSceneManager.showProgress(e)},Render.prototype.hideLoading=function(){if(!this.mSceneManager)return l.Logger.getInstance().error("HideLoading failed. SceneManager does not exist.");this.mSceneManager.sleepScene(j.SceneName.LOADING_SCENE)},Render.prototype.loadStart=function(e,i){},Render.prototype.roomPause=function(e){},Render.prototype.roomResume=function(e){},Render.prototype.removeScene=function(e){this.sceneManager&&this.sceneManager.remove(e)},Render.prototype.showCreatePanelError=function(e){},Render.prototype.createSetNickName=function(e){},Render.prototype.createAnotherGame=function(e,i,n,a,s,o,h,c){l.Logger.getInstance().debug("gotoanothergame ====>"),this.account.enterGame(e,i,n,{x:a,y:s,z:o},h,c)},Render.prototype.setCamerasBounds=function(e,i,n,a){this.mCameraManager&&this.mCameraManager.setBounds(e,i,n,a)},Render.prototype.getCameraMidPos=function(){if(!this.mCameraManager)return new l.LogicPos(0,0);var e=this.mCameraManager.camera.worldView;return new l.LogicPos((e.x+e.width/2)/this.scaleRatio,(e.y+e.height/2)/this.scaleRatio)},Render.prototype.setCamerasScroll=function(e,i,n){this.mCameraManager&&this.mCameraManager.scrollTargetPoint(e,i,n)},Render.prototype.setInteractive=function(e,i){if(this.mDisplayManager){var n=this.mDisplayManager.getDisplay(e);n&&n.setInteractive()}},Render.prototype.disableInteractive=function(e,i){var n=this.mDisplayManager.getDisplay(e);n&&n.disableInteractive()},Render.prototype.fadeIn=function(e,i){},Render.prototype.fadeOut=function(e,i){},Render.prototype.fadeAlpha=function(e,i,n){},Render.prototype.getCurTime=function(e){return this._curTime=e},Render.prototype.gameLoadedCallBack=function(){this.mGameLoadedFunc&&this.mGameLoadedFunc.call(this)},Render.prototype.createGameCallBack=function(e){this.mGame.events.on(Phaser.Core.Events.FOCUS,this.onFocus,this),this.mGame.events.on(Phaser.Core.Events.BLUR,this.onBlur,this),this.resize(this.mConfig.width,this.mConfig.height),this.mGameCreatedFunc&&(l.Logger.getInstance().log("render game_created"),this.mGameCreatedFunc.call(this)),this.gameCreated(e)},Render.prototype.addFillEffect=function(e,i,n){this.displayManager.addFillEffect(e,i,n)},Render.prototype.clearRoom=function(){this.clearManager()},Render.prototype.clearGame=function(e){var i=this;return new Promise((function(n,a){i.mGame?(l.Logger.getInstance().log("====================>>>>>>>> clear game"),i.mGame.events.off(Phaser.Core.Events.FOCUS,i.onFocus,i),i.mGame.events.off(Phaser.Core.Events.BLUR,i.onBlur,i),i.mGame.scale.off("enterfullscreen",i.onFullScreenChange,i),i.mGame.scale.off("leavefullscreen",i.onFullScreenChange,i),i.mGame.scale.off("orientationchange",i.onOrientationChange,i),i.mGame.plugins.removeGlobalPlugin("rexButton"),i.mGame.plugins.removeGlobalPlugin("rexNinePatchPlugin"),i.mGame.plugins.removeGlobalPlugin("rexInputText"),i.mGame.plugins.removeGlobalPlugin("rexBBCodeTextPlugin"),i.mGame.plugins.removeGlobalPlugin("rexMoveTo"),i.mGame.plugins.removeScenePlugin("DragonBones"),i.destroyManager(),i.mGame.events.once(Phaser.Core.Events.DESTROY,(function(){i.mGame=void 0,e?i.newGame().then((function(){i.createManager(),n()})):n()})),i.mGame.destroy(!0)):n()}))},Render.prototype.getMessage=function(e){return l.i18n.t(e)},Render.prototype.setLocalStorage=function(e,i){this.localStorageManager&&this.localStorageManager.setItem(e,i)},Render.prototype.getLocalStorage=function(e){return this.localStorageManager?this.localStorageManager.getItem(e):""},Render.prototype.removeLocalStorage=function(e){this.localStorageManager&&this.localStorageManager.removeItem(e)},Render.prototype.createPanel=function(e,i){var n=this;return new Promise((function(a,s){if(n.uiManager){var o=n.uiManager.showPanel(e);n.exportProperty(o,n,i).onceReady((function(){a(!0)}))}else s("uiManager not found")}))},Render.prototype.roomstartPlay=function(){if(this.mSceneManager&&this.mCameraManager){var e=this.mSceneManager.getMainScene();e?this.mCameraManager.camera=e.cameras.main:l.Logger.getInstance().fatal("scene does not exist")}},Render.prototype.roomReady=function(){if(this.mSceneManager&&this.mCameraManager){var e=this.mSceneManager.getMainScene();e?e instanceof T.a&&e.onRoomCreated():l.Logger.getInstance().fatal("scene does not exist")}},Render.prototype.playAnimation=function(e,i,n,a){if(this.mDisplayManager){var s=this.mDisplayManager.getDisplay(e);s&&s.play(i)}},Render.prototype.setHasInteractive=function(e,i){if(this.mDisplayManager){var n=this.mDisplayManager.getDisplay(e);n&&(n.hasInteractive=i)}},Render.prototype.setCameraScroller=function(e,i){if(this.mSceneManager&&this.mCameraManager){var n=this.mSceneManager.getMainScene();if(n){var a=n.scale;this.mCameraManager.setScroll(e*this.scaleRatio-a.width/2,i*this.scaleRatio-a.height/2),this.syncCameraScroll()}else l.Logger.getInstance().fatal("scene does not exist")}},Render.prototype.createDragonBones=function(e,i,n,a){this.mDisplayManager&&this.mDisplayManager.addDragonbonesDisplay(e,i,n,a)},Render.prototype.createUserDragonBones=function(e,i){this.mDisplayManager&&this.mDisplayManager.addUserDragonbonesDisplay(e,!0,i)},Render.prototype.createFramesDisplay=function(e,i,n){this.mDisplayManager?this.mDisplayManager.addFramesDisplay(e,i,n):l.Logger.getInstance().debug("no displayManager ====>")},Render.prototype.createTerrainDisplay=function(e,i,n){this.mDisplayManager&&this.mDisplayManager.addTerrainDisplay(e,i,n)},Render.prototype.setModel=function(e){this.mDisplayManager&&this.mDisplayManager.setModel(e)},Render.prototype.setPlayerModel=function(e){this.mDisplayManager&&this.mDisplayManager.setModel(e)},Render.prototype.addSkybox=function(e){this.mDisplayManager&&this.mDisplayManager.addSkybox(e)},Render.prototype.removeSkybox=function(e){this.mDisplayManager&&this.mDisplayManager.removeSkybox(e)},Render.prototype.showMatterDebug=function(e){this.mDisplayManager&&this.mDisplayManager.showMatterDebug(e)},Render.prototype.hideMatterDebug=function(){this.mDisplayManager&&this.mDisplayManager.hideMatterDebug()},Render.prototype.drawServerPosition=function(e,i){this.mDisplayManager&&this.mDisplayManager.drawServerPosition(e,i)},Render.prototype.hideServerPosition=function(){this.mDisplayManager&&this.mDisplayManager.hideServerPosition()},Render.prototype.changeAlpha=function(e,i){this.mDisplayManager&&this.mDisplayManager.changeAlpha(e,i)},Render.prototype.removeBlockObject=function(e){this.mDisplayManager&&this.mDisplayManager.removeDisplay(e)},Render.prototype.setPosition=function(e,i,n,a){if(this.mDisplayManager){var s=this.mDisplayManager.getDisplay(e);s&&s.setPosition(i,n,a)}},Render.prototype.showBubble=function(e,i,n){if(this.mDisplayManager){var a=this.mDisplayManager.getDisplay(e);a&&a.showBubble(i,n)}},Render.prototype.clearBubble=function(e){var i=this.mDisplayManager.getDisplay(e);i&&i.clearBubble()},Render.prototype.startFollow=function(e){var i=this.mDisplayManager.getDisplay(e);i&&this.mCameraManager.startFollow(i)},Render.prototype.stopFollow=function(){this.mCameraManager&&this.mCameraManager.stopFollow()},Render.prototype.cameraFollow=function(e,i){return __awaiter(this,void 0,void 0,(function(){var n,a,s=this;return __generator(this,(function(o){return(n=this.mDisplayManager.getDisplay(e))?"liner"===i?(a=n.getPosition(),this.mCameraManager.stopFollow(),this.mCameraManager.pan(a.x,a.y,300).then((function(){s.mCameraManager.startFollow(n)}))):this.mCameraManager.startFollow(n):this.mCameraManager.stopFollow(),[2]}))}))},Render.prototype.cameraPan=function(e){var i=this.mDisplayManager.getDisplay(e);i&&this.mCameraManager.pan(i.x,i.y,300)},Render.prototype.updateSkyboxState=function(e){this.mDisplayManager&&this.mDisplayManager.updateSkyboxState(e)},Render.prototype.setLayerDepth=function(e){var i=this.mSceneManager.getMainScene();i?i.layerManager.depthSurfaceDirty=e:l.Logger.getInstance().fatal("scene does not exist")},Render.prototype.doMove=function(e,i){this.mDisplayManager&&this.mDisplayManager.displayDoMove(e,i)},Render.prototype.showNickname=function(e,i){this.mDisplayManager&&this.mDisplayManager.showNickname(e,i)},Render.prototype.showTopDisplay=function(e,i){this.mDisplayManager&&this.mDisplayManager.showTopDisplay(e,i)},Render.prototype.SetDisplayVisible=function(e,i){if(this.mDisplayManager){var n=this.displayManager.getDisplay(e);n&&n.setVisible(i)}},Render.prototype.showRefernceArea=function(e,i,n,a){var s=this.mDisplayManager.getDisplay(e);s&&s.showRefernceArea(i,n,a)},Render.prototype.hideRefernceArea=function(e){var i=this.mDisplayManager.getDisplay(e);i&&i.hideRefernceArea()},Render.prototype.showEditGrids=function(e,i){this.displayManager&&this.displayManager.showGrids(e,i)},Render.prototype.hideEditGrids=function(){this.displayManager&&this.displayManager.hideGrids()},Render.prototype.displayAnimationChange=function(e){var i=e.id,n=e.direction,a=this.mDisplayManager.getDisplay(i);a&&(a.direction=n,a.play(e.animation))},Render.prototype.workerEmitter=function(e,i){this.emitter.emit(e,i)},Render.prototype.physicalEmitter=function(e,i){this.emitter.emit(e,i)},Render.prototype.mount=function(e,i,n){this.mDisplayManager&&this.mDisplayManager.mount(e,i,n)},Render.prototype.unmount=function(e,i){this.mDisplayManager&&this.mDisplayManager.unmount(e,i)},Render.prototype.updateInput=function(e){this.sceneManager&&this.sceneManager.updateInput(e)},Render.prototype.addEffect=function(e,i,n){this.mDisplayManager&&this.mDisplayManager.addEffect(e,i,n)},Render.prototype.removeEffect=function(e,i){this.mDisplayManager&&this.mDisplayManager.removeEffect(e,i)},Render.prototype.switchBaseMouseManager=function(){if(this.mInputManager){this.mInputManager.changeMouseManager(new st.a(this));var e=this.mGame.scene.getScene(j.SceneName.PLAY_SCENE);e&&(e.resumeMotion(),e.enableCameraMove())}},Render.prototype.liftItem=function(e,i,n){this.displayManager.liftItem(e,i,n)},Render.prototype.clearMount=function(e){this.mDisplayManager.clearMount(e)},Render.prototype.throwElement=function(e,i,n,a){this.displayManager.throwElement(e,i,n,a)},Render.prototype.switchDecorateMouseManager=function(){},Render.prototype.setRoomSize=function(e,i){this.mRoomSize=e,this.mRoomMiniSize=i},Render.prototype.onWorkerUnlinked=function(e){this.mWorkerDestroyMap.has(e)&&(this.mWorkerDestroyMap.get(e).resolve(null),this.mWorkerDestroyMap.delete(e))},Render.prototype.onFullScreenChange=function(){this.resize(this.mGame.scale.gameSize.width,this.mGame.scale.gameSize.height)},Render.prototype.gameCreated=function(e){this.mCallBack&&this.mCallBack(),this.mConfig.game_created&&this.mConfig.game_created(),this.mGame.scale.on("enterfullscreen",this.onFullScreenChange,this),this.mGame.scale.on("leavefullscreen",this.onFullScreenChange,this)},Render.prototype.initConfig=function(){this.mConfig.devicePixelRatio||(this.mConfig.devicePixelRatio=window.devicePixelRatio||2),void 0===this.mConfig.width&&(this.mConfig.width=window.innerWidth),void 0===this.mConfig.height&&(this.mConfig.height=window.innerHeight),this.initRatio(),l.Url.OSD_PATH=this.mConfig.osd,l.Url.RES_PATH="resources/",l.Url.RESUI_PATH=l.Url.RES_PATH+"ui/",Object(l.initLocales)(S.relative(e,l.Url.RES_PATH+"/locales/{{lng}}.json"))},Render.prototype.initRatio=function(){this.mScaleRatio=Math.ceil(this.mConfig.devicePixelRatio||l.UiUtils.baseDpr),this.mConfig.scale_ratio=this.mScaleRatio,this.mUIRatio=Math.round(this.mConfig.devicePixelRatio||l.UiUtils.baseDpr),this.mUIRatio>l.UiUtils.MaxDpr&&(this.mUIRatio=l.UiUtils.MaxDpr);var e=this.mConfig.width/this.DEFAULT_WIDTH*(this.mConfig.devicePixelRatio/this.mUIRatio),i=!1;this.game&&(i=this.game.device.os.desktop),this.mUIScale=i?l.UiUtils.baseScale:e},Render.prototype.resumeScene=function(){switch(this.mConfig.platform){case j.PlatFormType.APP:this.mainPeer.reconnect();break;case j.PlatFormType.PC:case j.PlatFormType.NOPC:if(l.Logger.getInstance().debug("#BlackSceneFromBackground; world.resumeScene(); isPause:"+this.isPause+"; mGame:"+this.mGame),!this.isPause)return;this.isPause=!1,this.mGame&&(this.sceneManager.currentScene&&this.sceneManager.currentScene.scene.resume(),this.mainPeer.onFocus(),this.dealTipsScene(j.SceneName.GAMEPAUSE_SCENE,!1))}},Render.prototype.pauseScene=function(){l.Logger.getInstance().debug("#BlackSceneFromBackground; world.pauseScene(); isPause:"+this.isPause+"; mGame:"+this.mGame),this.isPause||(this.isPause=!0,this.mGame&&(this.sceneManager.currentScene&&this.sceneManager.currentScene.scene.pause(),this.mainPeer.onBlur(),this.dealTipsScene(j.SceneName.GAMEPAUSE_SCENE,!0)))},Render.prototype.dealTipsScene=function(e,i){if(!this.mGame.scene.getScene(e)){var n=this.sceneManager.getSceneClass(e);this.mGame.scene.add(e,n)}var a=this.mGame.scene.getScene(j.SceneName.GAMEPAUSE_SCENE),s=this.mGame.scene.getScene(j.SceneName.PLAY_SCENE),o=this.mGame.scene.getScene(j.SceneName.MAINUI_SCENE),h=this.mGame.scene.getScene(j.SceneName.LOGIN_SCENE);i?(this.mGame.scene.start(e,{render:this}),e!==j.SceneName.GAMEPAUSE_SCENE&&a&&a.scene.pause(),s&&s.scene.pause(),o&&(o.scene.pause(),o.scene.setVisible(!1)),h&&h.scene.isActive()&&h.scene.setVisible(!1)):(this.mGame.scene.stop(e),e!==j.SceneName.GAMEPAUSE_SCENE&&a&&a.scene.resume(),s&&s.scene.resume(),o&&(o.scene.resume(),o.scene.setVisible(!0)),h&&h.scene.isActive()&&h.scene.setVisible(!0))},Render.prototype.initWorker=function(){var e=this;this.linkTo(j.MAIN_WORKER,j.MAIN_WORKER_URL,!0).onceReady((function(){e.mMainPeer=e.remote[j.MAIN_WORKER].MainPeer,e.mMainPeer.updateFps(),e.createGame(),l.Logger.getInstance().debug("worker onReady")}))},Object.defineProperty(Render.prototype,"mainPeer",{get:function(){if(!this.mMainPeer)throw new Error("can't find main worker");return this.mMainPeer},enumerable:!1,configurable:!0}),Render.SCENE_CREATED="SCENE_CREATED",Render.SCENE_DESTROY="SCENE_DESTROY",__decorate([Object(h.Export)()],Render.prototype,"gridsDebugger",void 0),__decorate([Object(h.Export)()],Render.prototype,"astarDebugger",void 0),__decorate([Object(h.Export)()],Render.prototype,"sortDebugger",void 0),__decorate([Object(h.Export)()],Render.prototype,"editorModeDebugger",void 0),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"showErrorMsg",null),__decorate([Object(h.Export)()],Render.prototype,"hidden",null),__decorate([Object(h.Export)()],Render.prototype,"destroyAccount",null),__decorate([Object(h.Export)()],Render.prototype,"reconnect",null),__decorate([Object(h.Export)()],Render.prototype,"showLogin",null),__decorate([Object(h.Export)()],Render.prototype,"hideLogin",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"checkContains",null),__decorate([Object(h.Export)()],Render.prototype,"showCreateRolePanel",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"updateModel",null),__decorate([Object(h.Export)()],Render.prototype,"getIndexInLayer",null),__decorate([Object(h.Export)()],Render.prototype,"changeLayer",null),__decorate([Object(h.Export)()],Render.prototype,"showCreateRole",null),__decorate([Object(h.Export)()],Render.prototype,"hideCreateRole",null),__decorate([Object(h.Export)()],Render.prototype,"showPlay",null),__decorate([Object(h.Export)()],Render.prototype,"updateFPS",null),__decorate([Object(h.Export)()],Render.prototype,"endFPS",null),__decorate([Object(h.Export)()],Render.prototype,"hidePlay",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"showPanel",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"hidePanel",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"showBatchPanel",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"hideBatchPanel",null),__decorate([Object(h.Export)()],Render.prototype,"reload",null),__decorate([Object(h.Export)()],Render.prototype,"showJoystick",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.boolean])],Render.prototype,"setInputVisible",null),__decorate([Object(h.Export)()],Render.prototype,"onShowErrorHandler",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"onLoginErrorHanler",null),__decorate([Object(h.Export)()],Render.prototype,"updateCharacterPackage",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"displayReady",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"soundChangeRoom",null),__decorate([Object(h.Export)()],Render.prototype,"playOsdSound",null),__decorate([Object(h.Export)()],Render.prototype,"playSound",null),__decorate([Object(h.Export)()],Render.prototype,"stopAllSound",null),__decorate([Object(h.Export)()],Render.prototype,"pauseAll",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"startFireMove",null),__decorate([Object(h.Export)()],Render.prototype,"resume",null),__decorate([Object(h.Export)()],Render.prototype,"onConnected",null),__decorate([Object(h.Export)()],Render.prototype,"onDisConnected",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"onConnectError",null),__decorate([Object(h.Export)()],Render.prototype,"connectFail",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"updateUIState",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"setMoveStyle",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.unit8array])],Render.prototype,"onEnterRoom",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"scaleTween",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"getRenderPosition",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str,h.webworker_rpc.ParamType.str])],Render.prototype,"createAccount",null),__decorate([Object(h.Export)()],Render.prototype,"refreshAccount",null),__decorate([Object(h.Export)()],Render.prototype,"getAccount",null),__decorate([Object(h.Export)()],Render.prototype,"setAccount",null),__decorate([Object(h.Export)()],Render.prototype,"clearAccount",null),__decorate([Object(h.Export)()],Render.prototype,"getWorldView",null),__decorate([Object(h.Export)()],Render.prototype,"onClockReady",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"i18nString",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"showAlert",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"showAlertReconnect",null),__decorate([Object(h.Export)()],Render.prototype,"showLoading",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"updateProgress",null),__decorate([Object(h.Export)()],Render.prototype,"hideLoading",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str,h.webworker_rpc.ParamType.str])],Render.prototype,"loadStart",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"roomPause",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"roomResume",null),__decorate([Object(h.Export)()],Render.prototype,"removeScene",null),__decorate([Object(h.Export)()],Render.prototype,"showCreatePanelError",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"createSetNickName",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str,h.webworker_rpc.ParamType.str])],Render.prototype,"createAnotherGame",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"setCamerasBounds",null),__decorate([Object(h.Export)()],Render.prototype,"getCameraMidPos",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"setCamerasScroll",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"setInteractive",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"disableInteractive",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"fadeIn",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"fadeOut",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"fadeAlpha",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"getCurTime",null),__decorate([Object(h.Export)()],Render.prototype,"gameLoadedCallBack",null),__decorate([Object(h.Export)()],Render.prototype,"createGameCallBack",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"addFillEffect",null),__decorate([Object(h.Export)()],Render.prototype,"clearRoom",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.boolean])],Render.prototype,"clearGame",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"getMessage",null),__decorate([Object(h.Export)()],Render.prototype,"setLocalStorage",null),__decorate([Object(h.Export)()],Render.prototype,"getLocalStorage",null),__decorate([Object(h.Export)()],Render.prototype,"removeLocalStorage",null),__decorate([Object(h.Export)()],Render.prototype,"createPanel",null),__decorate([Object(h.Export)()],Render.prototype,"roomstartPlay",null),__decorate([Object(h.Export)()],Render.prototype,"roomReady",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"playAnimation",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.boolean])],Render.prototype,"setHasInteractive",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"setCameraScroller",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"createDragonBones",null),__decorate([Object(h.Export)()],Render.prototype,"createUserDragonBones",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"createFramesDisplay",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"createTerrainDisplay",null),__decorate([Object(h.Export)()],Render.prototype,"setModel",null),__decorate([Object(h.Export)()],Render.prototype,"setPlayerModel",null),__decorate([Object(h.Export)()],Render.prototype,"addSkybox",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"removeSkybox",null),__decorate([Object(h.Export)()],Render.prototype,"showMatterDebug",null),__decorate([Object(h.Export)()],Render.prototype,"hideMatterDebug",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"drawServerPosition",null),__decorate([Object(h.Export)()],Render.prototype,"hideServerPosition",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"changeAlpha",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"removeBlockObject",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"setPosition",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.str])],Render.prototype,"showBubble",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"clearBubble",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"startFollow",null),__decorate([Object(h.Export)()],Render.prototype,"stopFollow",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"cameraFollow",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"cameraPan",null),__decorate([Object(h.Export)()],Render.prototype,"updateSkyboxState",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.boolean])],Render.prototype,"setLayerDepth",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"doMove",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.str])],Render.prototype,"showNickname",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"showTopDisplay",null),__decorate([Object(h.Export)()],Render.prototype,"SetDisplayVisible",null),__decorate([Object(h.Export)()],Render.prototype,"showRefernceArea",null),__decorate([Object(h.Export)()],Render.prototype,"hideRefernceArea",null),__decorate([Object(h.Export)()],Render.prototype,"showEditGrids",null),__decorate([Object(h.Export)()],Render.prototype,"hideEditGrids",null),__decorate([Object(h.Export)()],Render.prototype,"displayAnimationChange",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"workerEmitter",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.str])],Render.prototype,"physicalEmitter",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"mount",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num,h.webworker_rpc.ParamType.num])],Render.prototype,"unmount",null),__decorate([Object(h.Export)([h.webworker_rpc.ParamType.num])],Render.prototype,"updateInput",null),__decorate([Object(h.Export)()],Render.prototype,"addEffect",null),__decorate([Object(h.Export)()],Render.prototype,"removeEffect",null),__decorate([Object(h.Export)()],Render.prototype,"switchBaseMouseManager",null),__decorate([Object(h.Export)()],Render.prototype,"liftItem",null),__decorate([Object(h.Export)()],Render.prototype,"clearMount",null),__decorate([Object(h.Export)()],Render.prototype,"throwElement",null),__decorate([Object(h.Export)()],Render.prototype,"switchDecorateMouseManager",null),__decorate([Object(h.Export)()],Render.prototype,"setRoomSize",null),Render}(h.RPCPeer)}).call(this,"/")},,function(e,i,n){"use strict";n.d(i,"a",(function(){return o}));var a=n(30),s=n(52),o=function(){function EditorCanvasManager(e){this.render=e,this.AVATAR_CANVAS_TEST_DATA=[{id:"5facff1a67d3b140e835e1d0",parts:["head_hair"]}],this.AVATAR_CANVAS_RESOURCE_PATH="https://osd-alpha.tooqing.com",this.AVATAR_CANVAS_PARENT="avatarCanvas",this.SCENEKEY_SNAPSHOT="AvatarEditorSnapshotScene"}return EditorCanvasManager.prototype.destroy=function(){this.render.game&&(this.render.game.scene.stop(this.SCENEKEY_SNAPSHOT),this.render.game.scene.remove(this.SCENEKEY_SNAPSHOT))},EditorCanvasManager.prototype.createHeadIcon=function(e){var i=this;return new Promise((function(n,o){i.render.game.scene.getScene(i.SCENEKEY_SNAPSHOT)||i.render.game.scene.add(i.SCENEKEY_SNAPSHOT,a.c,!1),i.render.sceneManager.currentScene.scene.launch(i.SCENEKEY_SNAPSHOT,{onCreated:function(a){i.render.game.scene.sendToBack(i.SCENEKEY_SNAPSHOT);new s.a(a,i.AVATAR_CANVAS_RESOURCE_PATH,i.render.emitter,!1,e,(function(e){e.generateHeadIcon().then((function(a){n(a),e.destroy(),i.render.game.scene.stop(i.SCENEKEY_SNAPSHOT),i.render.game.scene.remove(i.SCENEKEY_SNAPSHOT)}))}))}})}))},EditorCanvasManager}()},function(e,i,n){"use strict";n.r(i),n.d(i,"FurnitureGuidePanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(834),l=n(2),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function FurnitureGuidePanel(i){return e.call(this,1649761875,i)||this}return c(FurnitureGuidePanel,e),FurnitureGuidePanel.prototype.gameObjectDownHandler=function(e,i){var n=this;i.getData("id")===this.mElementID&&(this.mPointer=e,this.mPlayScene.input.off("gameobjectdown",this.gameObjectDownHandler,this),this.render.emitter.once(h.PicaFurniFunPanel.PICAFURNIFUN_SHOW,(function(){var e=n.uiManager.getPanel(l.ModuleName.PICAFURNIFUN_NAME).confirmBtn,i=e.getWorldTransformMatrix();n.guideEffect.createGuideEffect({x:i.tx,y:i.ty}),e.on(s.ClickEvent.Tap,(function(){n.end()}),n)}),this))},FurnitureGuidePanel}(o.BasePlaySceneGuide)},function(e,i,n){"use strict";n.r(i),n.d(i,"ActivityGuidePanel",(function(){return c}));var a,s=n(789),o=n(2),h=n(788),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function ActivityGuidePanel(i){return e.call(this,i.render)||this}return l(ActivityGuidePanel,e),ActivityGuidePanel.prototype.show=function(i){e.prototype.show.call(this,i),this.step1()},ActivityGuidePanel.prototype.step1=function(){var e=this.uiManager.getPanel(o.ModuleName.PICANEWMAIN_NAME).activityPanel.arrowButton,i=e.getWorldTransformMatrix();this.guideEffect.createGuideEffect({x:i.tx,y:i.ty}),e.once(h.ClickEvent.Tap,this.end,this)},ActivityGuidePanel}(s.BaseGuide)},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i){},function(e,i,n){"use strict";var a;n.d(i,"a",(function(){return a})),function(e){e[e.MAIL=1]="MAIL",e[e.GALLERY=2]="GALLERY",e[e.PACKAGE=3]="PACKAGE",e[e.ORDER=4]="ORDER",e[e.TASK=5]="TASK",e[e.FRIEND=6]="FRIEND",e[e.DRESS=7]="DRESS",e[e.MAIN=8]="MAIN"}(a||(a={}));!function(){function RedEventType(){}RedEventType.MAIN_PANEL_RED="MAIN_PANEL_RED",RedEventType.GALLERY_PANEL_RED="GALLERY_PANEL_RED",RedEventType.TASK_PANEL_RED="TASK_PANEL_RED"}()},function(e,i,n){"use strict";n.r(i),n.d(i,"ChatPanel",(function(){return m}));var a,s=n(789),o=n(788),h=n(2),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function ChatPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.uiManager=i,n.chatCatchArr=[],n.chatMaxLen=100,n.scale=1,n.key=h.ModuleName.CHAT_NAME,n}return c(ChatPanel,e),ChatPanel.prototype.show=function(i){e.prototype.show.call(this,i),this.initialized&&this.checkUpdateActive()},ChatPanel.prototype.resize=function(i,n){var a=this.scale,s=this.scene.cameras.main.width,o=this.scene.cameras.main.height;i=s,n=n||133*this.dpr,this.mInputPanel.resize(),this.setSize(s,n+this.mInputPanel.height),this.y=o-this.height-54*this.dpr,this.mBackground.clear(),this.mBackground.fillStyle(0,.6),this.mBackground.fillRect(0,0,s/this.scale,n/this.scale),this.mTextArea.childrenMap.child.setMinSize(i,(n-16*this.dpr)*a),this.mTextArea.layout(),this.mTextArea.setPosition(this.width/2+4*this.dpr,this.y+this.mTextArea.height/2+10*this.dpr*a),this.mTextArea.childrenMap.text.y=8*this.dpr,this.mTextArea.scrollToBottom(),e.prototype.resize.call(this,i,n),this.mBackground.input=void 0,this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,s/this.scale,n/this.scale),Phaser.Geom.Rectangle.Contains)},ChatPanel.prototype.addListen=function(){this.mInputPanel.on("enter",this.onSendMsgHandler,this)},ChatPanel.prototype.removeListen=function(){this.mInputPanel.on("enter",this.onSendMsgHandler,this)},ChatPanel.prototype.appendChat=function(e){this.chatCatchArr.push(e),this.chatCatchArr.length>this.chatMaxLen&&this.chatCatchArr.shift(),this.mTextArea&&(this.mTextArea.appendText(e),this.mTextArea.scrollToBottom())},ChatPanel.prototype.init=function(){var i=this.scene.cameras.main.width;this.scene.cameras.main.height;this.mBackground=this.scene.make.graphics(void 0,!1);var n=this.scale;this.mOutputText=new o.BBCodeText(this.mScene,0,0,"",{fontSize:12*this.dpr/n+"px",fontFamily:l.Font.DEFULT_FONT,stroke:"#000000",strokeThickness:1*this.dpr*n,textMask:!1,shadow:{offsetX:0,offsetY:0,color:"#000",blur:4,stroke:!0,fill:!0},wrap:{mode:"char",width:i-12*this.dpr*n}}),this.mTextArea=new o.TextArea(this.mScene,{x:i/2+4*this.dpr*n,y:160*this.dpr*n,textWidth:i-4*this.dpr*n,textHeight:126*this.dpr*n,text:this.mOutputText}).layout(),this.mInputPanel=new f(this.scene,this.dpr),this.mInputPanel.y=134*this.dpr,this.add([this.mBackground,this.mTextArea,this.mOutputText,this.mInputPanel]),this.resize(this.width,133*this.dpr),e.prototype.init.call(this)},ChatPanel.prototype.checkUpdateActive=function(){var e=this;this.render.mainPeer.getActiveUIData(h.ModuleName.PICACHAT_NAME).then((function(i){if(i)for(var n=0,a=i;n<a.length;n++){var s=a[n];e.updateUIState(s)}}))},ChatPanel.prototype.sendChat=function(e){if(e){var i=this.mediator;i&&i.sendChat(e)}},ChatPanel.prototype.onSendMsgHandler=function(e){this.sendChat(e)},Object.defineProperty(ChatPanel.prototype,"mediator",{get:function(){return this.render.mainPeer[h.ModuleName.CHAT_NAME]},enumerable:!1,configurable:!0}),ChatPanel}(s.BasePanel),f=function(e){function InputPanle(i,n){var a=e.call(this,i)||this;a.dpr=n,a.background=i.make.graphics(void 0,!1);var o=l.i18n.t("chat.placeholder"),h=a.scene.cameras.main.width;return a.inputText=new s.LabelInput(a.scene,{width:h,height:16*a.dpr,placeholder:o,fontSize:11*a.dpr+"px",color:"#ffffff"}).setOrigin(0,.5),a.add([a.background,a.inputText]),a.inputText.on("enter",a.onEnterHandler,a),a}return c(InputPanle,e),InputPanle.prototype.resize=function(){var e=this.scene.cameras.main.width;this.setSize(e,38.33*this.dpr),this.inputText.x=46*this.dpr,this.inputText.y=.5*this.height,this.background.clear(),this.background.fillStyle(0,.6),this.background.fillRect(0,0,e,this.height),this.background.input=void 0,this.background.setInteractive(new Phaser.Geom.Rectangle(0,0,e/this.scale,this.height/this.scale),Phaser.Geom.Rectangle.Contains)},InputPanle.prototype.onEnterHandler=function(){this.emit("enter",this.inputText.text),this.inputText.setBlur(),this.inputText.setText("")},InputPanle}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"DropElementPanel",(function(){return m}));var a,s=n(788),o=n(789),h=n(2),l=n(0),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function DropElementPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=h.ModuleName.PICA_DROP_ELEMENT_NAME,n}return c(DropElementPanel,e),DropElementPanel.prototype.update=function(i){e.prototype.update.call(this,i),this.updateElement()},DropElementPanel.prototype.preload=function(){this.addAtlas(h.ModuleName.CUTINMENU_NAME,"cutInmenu/cutInmenu.png","cutInmenu/cutInmenu.json"),e.prototype.preload.call(this)},DropElementPanel.prototype.init=function(){var i=this.scene.make.image({key:h.ModuleName.CUTINMENU_NAME,frame:"minebag_bg"},!1).setInteractive();new o.Tap(i);i.on(s.ClickEvent.Tap,this.onTapHandler,this),this.setSize(i.width,i.height);var n=this.scene.make.text({text:l.i18n.t("dropElement.tips"),x:.2*-this.width,y:.5*this.height-4*this.dpr,style:{color:"#ffffff",fontSize:14*this.dpr,fotnFamily:l.Font.DEFULT_FONT}}).setOrigin(.5,1);n.setStroke("0x0",2*this.dpr*this.scale),n.setFontStyle("bold"),this.add([i,n]),this.updateElement(),e.prototype.init.call(this);var a=this.scene.cameras.main,c=a.width,m=a.height;this.x=c-5*this.dpr,this.y=.5*m+40*this.dpr+this.displayHeight},DropElementPanel.prototype.updateElement=function(){this.mShowData&&this.showData.texturePath&&(this.element||(this.element=new o.DynamicImage(this.scene,.2*-this.width,.5*this.height-8*this.dpr).setOrigin(.5,1),this.element.scale=this.dpr),this.element.load(l.Url.getOsdRes(this.mShowData.texturePath)),this.addAt(this.element,1))},DropElementPanel.prototype.onTapHandler=function(){var e=this.render.mainPeer[this.key];e&&e.drop()},DropElementPanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"GMToolsPanel",(function(){return m}));var a,s=n(788),o=n(790),h=n(789),l=n(2),c=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),m=function(e){function GMToolsPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=l.ModuleName.GM_TOOLS_NAME,n}return c(GMToolsPanel,e),GMToolsPanel.prototype.show=function(i){e.prototype.show.call(this,i),this.mInitialized&&this.showButtons()},GMToolsPanel.prototype.update=function(i){e.prototype.update.call(this,i),this.mInitialized&&this.showButtons()},GMToolsPanel.prototype.addListen=function(){this.mInitialized&&(this.command.on("enter",this.onEnterCommandHandler,this),this.closeBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this),this.commitBtn.on(s.ClickEvent.Tap,this.onCommitCmdHandler,this))},GMToolsPanel.prototype.removeListen=function(){this.mInitialized&&(this.command.off("enter",this.onEnterCommandHandler,this),this.closeBtn.off(s.ClickEvent.Tap,this.onCloseHandler,this),this.commitBtn.off(s.ClickEvent.Tap,this.onCommitCmdHandler,this))},GMToolsPanel.prototype.resize=function(){var e=this.scaleWidth,i=this.scaleHeight;this.setSize(this.scaleWidth,this.scaleHeight),this.closeBtn.x=.5*(e-this.closeBtn.width)-16*this.dpr,this.closeBtn.y=.5*-(i-this.closeBtn.height)+16*this.dpr,this.background.clear(),this.background.fillStyle(0,.6),this.background.fillRect(0,0,e,i),this.background.x=.5*-e,this.background.y=.5*-i,this.background.setInteractive(new Phaser.Geom.Rectangle(0,0,e,i),Phaser.Geom.Rectangle.Contains),this.command.x=.5*-this.width+20*this.dpr,this.command.y=.5*-this.height+60*this.dpr,this.x=.5*this.cameraWidth,this.y=.5*this.cameraHeight,this.commitBtn.x=this.command.x+this.command.width+.5*this.commitBtn.width+16*this.dpr,this.commitBtn.y=this.command.y+.5*this.command.height,this.gridtable.setSize(this.width,i-110*this.dpr),this.gridtable.layout(),this.gridtable.resetMask()},GMToolsPanel.prototype.preload=function(){this.addAtlas(o.c.commonKey,o.d.commonUrl+".png",o.d.commonUrl+".json"),e.prototype.preload.call(this)},GMToolsPanel.prototype.init=function(){var i=this,n=this.scaleWidth,a=this.scaleHeight;this.setSize(n,a),this.background=this.scene.make.graphics(void 0,!1);var l=this.scale,c=n-30*this.dpr,m=46*this.dpr,g=null;this.scene.textures.exists("gmtools_btn")||((g=this.scene.make.graphics(void 0,!1)).fillStyle(36026),g.fillRoundedRect(0,0,c,m),g.generateTexture("gmtools_btn",c,m)),this.command=new h.LabelInput(this.scene,{width:this.width-110*this.dpr,height:16*this.dpr,placeholder:"输入命令",fontSize:14*this.dpr+"px",color:"#666666"}).setOrigin(0,0),this.command.x=.5*-this.width+20*this.dpr,this.command.y=.5*-this.height+60*this.dpr,this.command.createBackground(6*this.dpr,10*this.dpr),this.scene.textures.exists("gmtools_commit")||(g.clear(),g.fillStyle(699050),g.fillRoundedRect(0,0,50*this.dpr,30*this.dpr),g.generateTexture("gmtools_commit",50*this.dpr,30*this.dpr),g.destroy()),this.commitBtn=new s.Button(this.scene,"gmtools_commit","","","提交"),this.commitBtn.setTextStyle({fontSize:12*this.dpr});var _=54*this.dpr,T={x:0,y:60*this.dpr,table:{width:n,height:a-110*this.dpr,columns:1,cellWidth:n,cellHeight:_,reuseCellContainer:!0,zoom:l,cellPadX:0,cellPadY:10*this.dpr},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,n){var a=e.item;return null===n&&(n=new f(i.scene,91*i.dpr,46*i.dpr,i.dpr)).on("targetUI",i.onTargetUIHandler,i),n.setSize(e.width,e.height),n.setData({item:a}),n.setItemData(a),n}};this.gridtable=new s.GameGridTable(this.scene,T),this.gridtable.on("cellTap",(function(e){if(e){var n=e.item;n&&n.node&&i.onTargetUIHandler(n.node.id)}})),this.closeBtn=new s.Button(this.scene,o.c.commonKey,"close"),this.add([this.background,this.gridtable,this.closeBtn,this.command,this.commitBtn]),e.prototype.init.call(this),this.resize()},GMToolsPanel.prototype.showButtons=function(){if(this.mShowData){var e=this.showData,i=e.button;i.length>=1&&this.gridtable.setItems(i);var n=e.inputText;n&&n.length>0&&this.command.setData({item:n[0]})}},GMToolsPanel.prototype.onTargetUIHandler=function(e){!this.mShowData||this.mShowData.length<1||(this.emit("targetUI",this.mShowData.id,e),this.render.renderEmitter(this.key+"_targetUI",{id:this.mShowData.id,componentId:e}),this.command.setBlur())},GMToolsPanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},GMToolsPanel.prototype.onCommitCmdHandler=function(){if(this.command.setBlur(),this.mShowData&&!(this.mShowData.length<1)){var e=this.command.text;if(e){var i=this.command.getData("item");i&&i.node&&this.render.renderEmitter(this.key+"_targetUI",{id:this.mShowData.id,componentId:i.node.id,text:e})}}},GMToolsPanel.prototype.onEnterCommandHandler=function(){this.onCommitCmdHandler()},GMToolsPanel}(h.BasePanel),f=function(e){function Item(i,n,a,o){var h=e.call(this,i)||this;return h.btn=new s.Button(h.scene,"gmtools_btn","","","1"),h.btn.on(String(s.ClickEvent.Tap),h.onBtnHandler,h),h.btn.setTextStyle({fontSize:12*o}),h.btn.removeInteractive(),h.add(h.btn),h}return c(Item,e),Item.prototype.setItemData=function(e){this.item=e,this.btn.setText(e.text)},Item.prototype.onBtnHandler=function(){this.item&&this.emit("targetUI",this.item.id)},Item}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"MaskLoadingPanel",(function(){return l}));var a,s=n(789),o=n(2),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function MaskLoadingPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.key=o.ModuleName.MASK_LOADING_NAME,n}return h(MaskLoadingPanel,e),MaskLoadingPanel.prototype.resize=function(){var e=this.scene.cameras.main,i=e.width,n=e.height;this.maskGrap.fillRect(0,0,i,n);var a=new Phaser.Geom.Rectangle(0,0,i,n);this.maskGrap.input?this.maskGrap.input.hitArea=a:this.maskGrap.setInteractive(a,Phaser.Geom.Rectangle.Contains)},MaskLoadingPanel.prototype.init=function(){var i=this.scene.cameras.main,n=i.width,a=i.height;this.maskGrap=this.scene.make.graphics(void 0,!1),this.maskGrap.fillStyle(0,.4);var o=this.key+"_ani";this.scene.anims.create({key:o,frames:this.scene.anims.generateFrameNames(this.key,{prefix:"",start:1,end:22,zeroPad:2,suffix:".png"}),frameRate:12,repeat:-1}),this.ani=this.scene.make.sprite({key:this.key}),this.ani.x=n/this.scale*.5,this.ani.y=a/this.scale*.5,this.ani.play(o),this.add([this.maskGrap,this.ani]),e.prototype.init.call(this),this.mScene.layerManager.addToLayer(s.MainUIScene.LAYER_MASK,this),this.resize()},MaskLoadingPanel.prototype.__exportProperty=function(){},MaskLoadingPanel}(s.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaBootPanel",(function(){return f}));var a,s=n(788),o=n(790),h=n(2),l=n(0),c=n(792),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaBootPanel(i){var n=e.call(this,i)||this;return n.maskLoadingEnable=!1,n.key=h.ModuleName.PICA_BOOT_NAME,n.atlasNames=[o.d.uicommon1,o.d.uicommon],n.mMediator=n.render.mainPeer[h.ModuleName.PICA_BOOT_NAME],n}return m(PicaBootPanel,e),PicaBootPanel.prototype.show=function(i){e.prototype.show.call(this,i),this.mInitialized&&(this.playBtn.enabled=!0)},PicaBootPanel.prototype.addListen=function(){this.playBtn.on(s.ClickEvent.Tap,this.onPlayHandler,this),this.navigate.addListen(),this.navigate.on("showLogin",this.onShowLoginHandler,this),this.navigate.on("showNotice",this.onShowNoticeHandler,this)},PicaBootPanel.prototype.removeListen=function(){this.mInitialized&&(this.playBtn.off(s.ClickEvent.Tap,this.onPlayHandler,this),this.navigate.removeListen(),this.navigate.off("showLogin",this.onShowLoginHandler,this),this.navigate.off("showNotice",this.onShowNoticeHandler,this))},PicaBootPanel.prototype.init=function(){var i=this.scene.cameras.main.width,n=this.scene.cameras.main.height,a=i/this.scale,s=n/this.scale;this.x=i*this.originX,this.y=n*this.originY;var h=this.scene.make.image({x:0,y:.5*-s+40*this.dpr,key:this.key,frame:"login_logo"},!1).setOrigin(.5,0);h.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var c=this.scene.make.image({key:this.key,frame:"login_bg"}),m=n/c.height;c.setScale(m),c.texture.setFilter(Phaser.Textures.FilterMode.LINEAR);var f=this.scene.make.text({text:"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。\n适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",style:{color:"#FFEC48",align:"center",fontSize:11*this.dpr+"px",fontFamily:l.Font.DEFULT_FONT}},!1).setOrigin(.5).setStroke("0x0",2*this.dpr*this.scale);f.y=.5*(s-f.height)-50*this.dpr;var _=this.scene.make.text({text:"本网络游戏适合年满16周岁以上的用户，请您确认已如实进行\n实名注册，为了您的健康，请合理控制游戏时间。",style:{color:"#FFFFFF",align:"center",fontSize:9.33*this.dpr,fontFamily:l.Font.DEFULT_FONT}}).setOrigin(.5).setStroke("0x0",2*this.dpr*this.scale);_.y=.5*(s-_.height)-16*this.dpr,this.playBtn=new T(this.scene,0,.5*-s+.75*s,191*this.dpr,60*this.dpr,o.d.uicommon,"yellow_btn",l.i18n.t("boot.play"),this.dpr,1,{left:12*this.dpr,top:12*this.dpr,right:14*this.dpr,bottom:12*this.dpr}),this.playBtn.setTextStyle({color:"#995E00",fontSize:22*this.dpr,fontFamily:l.Font.DEFULT_FONT}),this.playBtn.setFontStyle("bold"),this.navigate=new g(this.scene,this.key,this.dpr),this.navigate.x=.5*a-38*this.dpr,this.navigate.y=.5*-s+41*this.dpr,this.add([c,h,f,_,this.playBtn,this.navigate]),e.prototype.init.call(this),this.resize()},PicaBootPanel.prototype.updatePanelList=function(){if(this.scene){var e=this.parentContainer.list;e&&this.hasPanel(e.length>1)}},PicaBootPanel.prototype.popPanel=function(){this.hasPanel(!0)},PicaBootPanel.prototype.hidePanel=function(){this.hasPanel(!1)},PicaBootPanel.prototype.setBootState=function(e){this.mState=e},PicaBootPanel.prototype.showNotice=function(){this.notice||(this.notice=new _(this.scene,this.dpr,this.mShowData.notice_url,this.scale),this.notice.on("close",this.closeNotice,this),this.notice.x=this.x,this.notice.y=this.y),this.mScene.layerManager.addToLayer(this.uiLayer,this.notice),this.updatePanelList()},PicaBootPanel.prototype.tryLogin=function(e,i,n){var a=this.mMediator;a&&a.phoneLogin(e,i,n)},PicaBootPanel.prototype.preload=function(){this.addAtlas(this.key,"pica_boot/pica_boot.png","pica_boot/pica_boot.json"),this.addImage("login_notice_bg","pica_boot/login_notice_bg.png"),e.prototype.preload.call(this)},PicaBootPanel.prototype.onPlayHandler=function(){if(!this.logged())return this.showLogin();"ready"===this.mState&&this.mMediator&&(this.mMediator.enterGame(),this.playBtn.enabled=!1)},PicaBootPanel.prototype.logged=function(){var e=this.render.localStorageManager.getItem("token");if(e){try{var i=JSON.parse(e);this.render.setAccount(i)}catch(i){return l.Logger.getInstance().error("parse token "+e+" failed"),!1}return!0}return!1},PicaBootPanel.prototype.showLogin=function(){this.mMediator&&this.mMediator.showLogin()},PicaBootPanel.prototype.onShowLoginHandler=function(){this.showLogin()},PicaBootPanel.prototype.onShowNoticeHandler=function(){this.showNotice()},PicaBootPanel.prototype.hasPanel=function(e){this.mInitialized&&(this.playBtn.visible=!e,this.navigate.visible=!e)},PicaBootPanel.prototype.closeNotice=function(){this.notice&&this.notice.destroy(),this.notice=void 0,this.updatePanelList()},PicaBootPanel}(c.PicaBasePanel),g=function(e){function Navigate(i,n,a){var o=e.call(this,i)||this;o.key=n,o.btns=[];for(var h=["login_notice","login_user"],l=0;l<h.length;l++){var c=new s.Button(o.scene,o.key,h[l]);c.y=58*l*a,o.btns.push(c)}return o.add(o.btns),o}return m(Navigate,e),Navigate.prototype.addListen=function(){for(var e=0,i=this.btns;e<i.length;e++){i[e].on(s.ClickEvent.Tap,this.onClickBtnHandler,this)}},Navigate.prototype.removeListen=function(){for(var e=0,i=this.btns;e<i.length;e++){i[e].off(s.ClickEvent.Tap,this.onClickBtnHandler,this)}},Navigate.prototype.onClickBtnHandler=function(e,i){switch(i){case this.btns[1]:this.emit("showLogin");break;case this.btns[0]:this.emit("showNotice")}},Navigate}(Phaser.GameObjects.Container),_=function(e){function PicaNotice(i,n,a,h){var c=e.call(this,i)||this;c.scale=h,c.setSize(295*n,470*n),c.closeBtn=new s.Button(c.scene,o.d.uicommon,"close"),c.closeBtn.x=.5*c.width,c.closeBtn.y=.5*-c.height,c.closeBtn.on(s.ClickEvent.Tap,c.onCloseHandler,c);var m=c.scene.cameras.main,f=m.width,g=m.height,_=c.scene.make.graphics(void 0,!1);_.fillStyle(0,.4),_.fillRect(.5*-f,.5*-g,f,g);var T=c.scene.make.image({key:"login_notice_bg"}),x=c.scene.make.image({y:.5*-(c.height+18*n),key:o.d.uicommon1,frame:"title"}),S=c.scene.make.text({text:l.i18n.t("boot.notice"),y:x.y+2*n,style:{align:"center",fontSize:16*n,fontFamily:l.Font.DEFULT_FONT,color:"#905B06"}}).setOrigin(.5).setFontStyle("bold");return c.view=c.scene.add.dom(0,0,"iframe",{width:c.width-28*n+"px",height:c.height-28*n+"px",border:"0"}),c.view.node.src=a+"?t="+Date.now(),c.add([c.view,_,T,x,S,c.closeBtn]),c}return m(PicaNotice,e),PicaNotice.prototype.onCloseHandler=function(){this.emit("close")},PicaNotice}(Phaser.GameObjects.Container),T=function(e){function PlayBtn(i,n,a,s,o,h,l,c,m,f,g,_,T){return e.call(this,i,n,a,s,o,h,l,c,m,f,g,_,T)||this}return m(PlayBtn,e),Object.defineProperty(PlayBtn.prototype,"enabled",{set:function(e){this.mBackground&&(this.remove(this.mBackground),this.mBackground.destroy()),this.mText&&this.remove(this.mText),e?(this.mFrame="yellow_btn",this.createBackground(),this.setInteractive()):(this.mFrame="butt_gray",this.createBackground(),this.removeInteractive()),this.mText&&(this.add(this.mText),this.mText.setColor(e?"#995E00":"#808080"))},enumerable:!1,configurable:!0}),PlayBtn}(s.NineSliceButton);!function(e){function GrayScalePipeline(i){return e.call(this,{game:i,renderer:i.renderer,fragShader:"\n            precision mediump float;\n            uniform sampler2D uMainSampler;\n            varying vec2 outTexCoord;\n            void main(void) {\n            vec4 color = texture2D(uMainSampler, outTexCoord);\n            float gray = dot(color.rgb, vec3(0.299, 0.587, 0.114));\n            gl_FragColor = vec4(vec3(gray), 1.0);\n            }"})||this}m(GrayScalePipeline,e)}(Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaCookingPanel",(function(){return _}));var a,s=n(788),o=n(789),h=n(2),l=n(790),c=n(0),m=n(792),f=n(796),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaCookingPanel(i){var n=e.call(this,i)||this;return n.cookingIDs=[],n.key=h.ModuleName.PICACOOKING_NAME,n.atlasNames=[l.d.uicommon,l.d.cooking],n.UIType=s.UIType.Scene,n}return g(PicaCookingPanel,e),PicaCookingPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.blackGraphic.clear(),this.blackGraphic.fillStyle(0,.1),this.blackGraphic.fillRect(0,0,a,s),this.content.x=.5*a,this.content.y=s+.5*this.content.height+10*this.dpr,this.content.setInteractive();var o=this.scaleHeight+.5*this.content.height+10*this.dpr,h=this.scaleHeight-.5*this.content.height;this.playMove(o,h),this.setInteractive(new Phaser.Geom.Rectangle(0,0,2*a,2*s),Phaser.Geom.Rectangle.Contains)},PicaCookingPanel.prototype.onShow=function(){this.render.renderEmitter(this.key+"_initialized"),this.categoryDatas&&this.setCategoryDatas(this.categoryDatas)},PicaCookingPanel.prototype.addListen=function(){this.mInitialized&&this.on("pointerup",this.OnCloseHandler,this)},PicaCookingPanel.prototype.removeListen=function(){this.mInitialized&&this.off("pointerup",this.OnCloseHandler,this)},PicaCookingPanel.prototype.init=function(){this.blackGraphic=this.scene.make.graphics(void 0,!1),this.add(this.blackGraphic),this.content=this.scene.make.container(void 0,!1),this.bg=this.scene.make.image({key:l.d.cooking,frame:"cooking_cook_panel"}),this.content.setSize(this.scaleWidth,this.bg.height);var i=this.scaleWidth-104*this.dpr,n=60*this.dpr;this.cookingGrid=new o.GridLayoutGroup(this.scene,i,n,{cellSize:new Phaser.Math.Vector2(57*this.dpr,57*this.dpr),space:new Phaser.Math.Vector2(8*this.dpr,0),startAxis:o.AxisType.Horizontal,constraint:o.ConstraintType.FixedRowCount,constraintCount:1,alignmentType:o.AlignmentType.UpperCenter}),this.cookingGrid.x=-48*this.dpr;c.UIHelper.threeYellowBig;this.cookingButton=new s.NineSliceButton(this.scene,0,0,85*this.dpr,40*this.dpr,l.d.uicommon,"yellow_btn_normal",c.i18n.t("illustrate.cooking"),this.dpr,this.scale,{left:18*this.dpr,top:18*this.dpr,right:18*this.dpr,bottom:20*this.dpr}),this.cookingButton.setTextStyle(c.UIHelper.brownishStyle(this.dpr,16)),this.cookingButton.setFontStyle("bold"),this.cookingButton.y=.5*n-.5*this.cookingButton.height-5*this.dpr,this.cookingButton.x=.5*this.content.width-.5*this.cookingButton.width-6*this.dpr,this.cookingButton.on(s.ClickEvent.Tap,this.onCookingButtonHandler,this),this.chooseContanier=new x(this.scene,this.dpr,this.scale),this.chooseContanier.setHandler(new c.Handler(this,this.onCookingCategoryHandler)),this.chooseContanier.y=.5*-this.content.height-.5*this.chooseContanier.height-2*this.dpr,this.chooseContanier.visible=!1,this.content.add([this.bg,this.cookingGrid,this.cookingButton,this.chooseContanier]),this.add([this.blackGraphic,this.content]),this.createCookingItem(),this.resize(),e.prototype.init.call(this)},PicaCookingPanel.prototype.setCategoryDatas=function(e){this.categoryDatas=e,this.mInitialized&&e&&this.chooseContanier.setCategoryDatas(e)},PicaCookingPanel.prototype.setCookingDatas=function(e){this.chooseContanier.setCookingDatas(e)},PicaCookingPanel.prototype.createCookingItem=function(){for(var e=0;e<4;e++){var i=new T(this.scene,this.dpr,this.scale);i.on(s.ClickEvent.Tap,this.onCookingItemHandler,this),i.indexed=e,this.cookingGrid.add(i)}this.cookingGrid.Layout()},PicaCookingPanel.prototype.playMove=function(e,i){var n=this,a=this.scene.tweens.add({targets:this.content,y:{from:e,to:i},ease:"Linear",duration:150,onComplete:function(){a.stop(),a.remove(),n.chooseContanier.refreshMask()}})},PicaCookingPanel.prototype.onCookingButtonHandler=function(){this.render.renderEmitter(h.ModuleName.PICANEWROLE_NAME+"_cookingids",this.cookingIDs),this.OnCloseHandler()},PicaCookingPanel.prototype.onCookingItemHandler=function(e,i){this.curCookingItem=i,this.chooseContanier.show()},PicaCookingPanel.prototype.onCookingCategoryHandler=function(e,i){if("category"===e)this.render.renderEmitter(this.key+"_categorytype",e);else{if(this.curCookingItem){this.curCookingItem.setItemData(i);var n=this.curCookingItem.indexed;this.cookingIDs[n]=i.id}this.chooseContanier.hide()}},PicaCookingPanel.prototype.OnCloseHandler=function(){this.render.renderEmitter(this.key+"_hide")},PicaCookingPanel}(m.PicaBasePanel),T=function(e){function CookingItem(i,n,a){var s=e.call(this,i,l.d.cooking,"cooking_cook_icon_bg",n,a,!0)||this;return s.setSize(s.bg.width,s.bg.height),s.itemIcon.setTexture(l.d.cooking,"cooking_cook_icon_add"),s.countTex.visible=!1,s.starImg.visible=!1,s.isShowTips=!1,s}return g(CookingItem,e),CookingItem.prototype.setItemData=function(e){var i=this;if(this.itemData!==e)if(this.itemData=e,this.select=!1,this.itemIcon.scale=1,e){var n=c.Url.getOsdRes(e.texturePath);if(this.itemIcon.load(n,this,(function(){i.itemIcon.visible=!0})),this.itemIcon.scale=this.dpr/this.zoom,e.grade>0){this.starImg.visible=!0;var a="bag_star_small_"+e.grade;this.starImg.setFrame(a)}else this.starImg.visible=!1}else this.itemIcon.setTexture(l.d.cooking,"cooking_cook_icon_add")},CookingItem}(f.f),x=function(e){function ChooseContainer(i,n,a){var o=e.call(this,i)||this;o.dpr=n,o.background=o.scene.make.image({key:l.d.cooking,frame:"cooking_material_panel"});var h=o.background.width,c=144*n;o.setSize(h,c),o.background.y=.5*c-.5*o.background.height,o.add(o.background),o.zoom=a;var m=38*n;o.toggleScroll=new s.GameScroller(o.scene,{x:0,y:.5*-c+.5*m+3*n,width:o.width-44*n,height:m,zoom:a,dpr:o.dpr,align:2,orientation:1,space:3*o.dpr,selfevent:!0,cellupCallBack:function(e){o.onToggleHandler(e)}});var g=o.background.height;return o.gamescroller=new s.GameScroller(o.scene,{x:0,y:o.background.y+5*n,width:o.width-28*n,height:g,zoom:a,dpr:o.dpr,align:2,orientation:1,space:3*o.dpr,selfevent:!0,cellupCallBack:function(e){o.onChooseHandler(e)},celldownCallBack:function(e){f.h.Inst.showTips(e,e.itemData,"pointerup")}}),o.add([o.toggleScroll,o.gamescroller]),o.setInteractive(),o}return g(ChooseContainer,e),ChooseContainer.prototype.show=function(){this.onToggleHandler(this.toggleScroll.getItemAt(0)),this.visible=!0},ChooseContainer.prototype.hide=function(){this.visible=!1},ChooseContainer.prototype.refreshMask=function(){this.gamescroller.refreshMask(),this.toggleScroll.refreshMask()},ChooseContainer.prototype.setCategoryDatas=function(e){this.categoryDatas=e;for(var i=0,n=e;i<n.length;i++){var a=n[i],s=new o.ToggleButton(this.scene,77*this.dpr,37*this.dpr,l.d.cooking,"cooking_nav_unselected","cooking_nav_selected",this.dpr,"");s.setNormalColor("#ffffff"),s.setText(a.name),s.category=a,this.toggleScroll.addItem(s),s.enable=!1}this.toggleScroll.Sort()},ChooseContainer.prototype.setCookingDatas=function(e){if(this.itemsArr)for(var i=0,n=this.itemsArr;i<n.length;i++){(s=n[i]).visible=!1}else this.itemsArr=[];this.gamescroller.clearItems(!1);for(var a=0;a<e.length;a++){var s=void 0;a<this.itemsArr.length?s=this.itemsArr[a]:(s=new f.f(this.scene,l.d.cooking,"cooking_material_icon_bg",this.dpr,this.zoom,!1),this.itemsArr.push(s)),s.setItemData(e[a]),s.visible=!0}this.gamescroller.addItems(this.itemsArr),this.gamescroller.Sort()},ChooseContainer.prototype.setHandler=function(e){this.sendHandler=e},ChooseContainer.prototype.onToggleHandler=function(e){this.curTog&&(this.curTog.setNormalColor("#ffffff"),this.curTog.isOn=!1),e.isOn=!0,e.setChangeColor("#FFF600"),this.curTog=e;var i=e.category;this.sendHandler&&this.sendHandler.runWith(["category",i.type])},ChooseContainer.prototype.onChooseHandler=function(e){this.sendHandler&&this.sendHandler.runWith(["choose",e.itemData])},ChooseContainer}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaDecoratePanel",(function(){return _}));var a,s=n(789),o=n(2),h=n(790),l=n(788),c=n(0),m=n(829),f=n(792),g=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),_=function(e){function PicaDecoratePanel(i){var n=e.call(this,i)||this;return n.mBtns_QuickSelectFurniture=[],n.key=o.ModuleName.PICADECORATE_NAME,n.atlasNames=[h.d.uicommon,h.d.effectcommon,h.d.room_decorate],n}return g(PicaDecoratePanel,e),PicaDecoratePanel.prototype.show=function(i){e.prototype.show.call(this,i)},PicaDecoratePanel.prototype.addListen=function(){this.mBtn_Close.on("pointerup",this.btnHandler_Close,this),this.mBtn_SaveAndExit.on("pointerup",this.btnHandler_SaveAndExit,this),this.mBtn_RemoveAll.on("pointerup",this.btnHandler_RemoveAll,this),this.mBtn_Reverse.on("pointerup",this.btnHandler_Reverse,this),this.mBtn_Bag.on("pointerup",this.btnHandler_Bag,this),this.decorateBtn.on(l.ClickEvent.Tap,this.onDecorateShopHandler,this)},PicaDecoratePanel.prototype.removeListen=function(){this.mBtn_Close.off("pointerup",this.btnHandler_Close,this),this.mBtn_SaveAndExit.off("pointerup",this.btnHandler_SaveAndExit,this),this.mBtn_RemoveAll.off("pointerup",this.btnHandler_RemoveAll,this),this.mBtn_Reverse.off("pointerup",this.btnHandler_Reverse,this),this.mBtn_Bag.off("pointerup",this.btnHandler_Bag,this),this.decorateBtn.off(l.ClickEvent.Tap,this.onDecorateShopHandler,this)},PicaDecoratePanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaDecoratePanel.prototype.setSelectedFurniture=function(e){var i=this;if(e){this.mBtn_SelectedFurniture.off("pointerup"),this.mBtn_SelectedFurniture.on("pointerup",(function(){i.onFurnitureClick(e.id)}),this),e.grade=0,this.mBtn_SelectedFurniture.setItemData(e,!0),this.mBtn_SelectedFurniture.enable=e.count>0}},PicaDecoratePanel.prototype.showSaveBtn=function(){this.mBtn_SaveAndExit&&(this.mBtn_SaveAndExit.visible=!0)},PicaDecoratePanel.prototype.hideSaveBtn=function(){this.mBtn_SaveAndExit&&(this.mBtn_SaveAndExit.visible=!1)},PicaDecoratePanel.prototype.updateFurnitureCount=function(e,i){this.mBtn_SelectedFurniture.itemData&&(this.mBtn_SelectedFurniture.itemData.id===e&&((s=this.mBtn_SelectedFurniture.itemData).count=i,this.mBtn_SelectedFurniture.setItemData(s,!0),this.mBtn_SelectedFurniture.enable=s.count>0));for(var n=0,a=this.mBtns_QuickSelectFurniture;n<a.length;n++){var s,o=a[n];if(o.itemData.id===e)(s=o.itemData).count=i,o.setItemData(s,!0),o.enable=s.count>0}},PicaDecoratePanel.prototype.setQuickSelectFurnitures=function(e){var i=this;if(!(this.mBtns_QuickSelectFurniture.length>0)){this.scene.cameras.main.height;for(var n=0,_loop_1=function(e){var s=new m.ItemButton(a.scene,h.d.uicommon,"bag_icon_common_bg",a.dpr,a.scale,!1);s.countTextColor="#ffffff",s.countTextOffset=new c.LogicPos(.5*s.width-12*a.dpr,.5*s.height-10*a.dpr),s.BGVisible=!1,s.x=90*a.dpr+55*a.dpr*n,s.y=a.mDynamicBtnsY,e.grade=0,s.setItemData(e,!0),s.enable=e.count>0,s.off(l.ClickEvent.Tap,null,a),s.on(l.ClickEvent.Tap,(function(){i.onFurnitureClick(e.id)}),a),a.mBtns_QuickSelectFurniture.push(s),n++},a=this,s=0,o=e;s<o.length;s++){_loop_1(o[s])}this.add(this.mBtns_QuickSelectFurniture)}},PicaDecoratePanel.prototype.init=function(){var i=this.scene.cameras.main.width/this.scaleX,n=this.scene.cameras.main.height/this.scaleY;this.mBtn_Close=new l.Button(this.scene,h.d.room_decorate,"room_decorate_previous","room_decorate_previous"),this.mBtn_Close.x=20*this.dpr+.5*this.mBtn_Close.width,this.mBtn_Close.y=48*this.dpr,this.add(this.mBtn_Close),this.mBtn_SaveAndExit=new l.Button(this.scene,h.d.room_decorate,"room_decorate_save","room_decorate_save"),this.mBtn_SaveAndExit.x=i-20*this.dpr-.5*this.mBtn_SaveAndExit.width,this.mBtn_SaveAndExit.y=48*this.dpr,this.add(this.mBtn_SaveAndExit);var a=60*this.dpr;this.mGraphics_Bottom=this.scene.add.graphics(),this.mGraphics_Bottom.clear(),this.mGraphics_Bottom.fillStyle(0,.6),this.mGraphics_Bottom.fillRect(0,0,i*this.scaleX,a),this.mGraphics_Bottom.y=n-a,this.mDynamicBtnsY=this.mGraphics_Bottom.y+.5*a,this.mGraphics_Bottom.setDepth(-1),this.add(this.mGraphics_Bottom);var s=63*this.dpr,o=this.scene.add.graphics();o.clear(),o.fillStyle(0,.6),o.fillRect(0,0,i*this.scaleX,s),o.y=n-a-4*this.dpr-s,this.add(o),this.mBtn_RemoveAll=new l.Button(this.scene,h.d.room_decorate,"room_decorate_delete","room_decorate_delete"),this.mBtn_RemoveAll.x=10*this.dpr+.5*this.mBtn_RemoveAll.width,this.mBtn_RemoveAll.y=o.y+.5*s,this.mBtn_Reverse=new l.Button(this.scene,h.d.room_decorate,"room_decorate_withdraw","room_decorate_withdraw"),this.mBtn_Reverse.x=this.mBtn_RemoveAll.x+.5*this.mBtn_RemoveAll.width+10*this.dpr+.5*this.mBtn_Reverse.width,this.mBtn_Reverse.y=o.y+.5*s,this.mBtn_Bag=new l.Button(this.scene,h.d.room_decorate,"room_decorate_Furniture","room_decorate_Furniture",c.i18n.t("furni_bag.furni")),this.mBtn_Bag.x=i-.5*this.mBtn_Bag.width-10*this.dpr,this.mBtn_Bag.y=o.y+.5*s,this.mBtn_Bag.setTextStyle({color:"#ffffff",fontFamily:c.Font.DEFULT_FONT,fontSize:13*this.dpr}),this.mBtn_Bag.setTextOffset(9*this.dpr,0),this.decorateBtn=new l.Button(this.scene,h.d.room_decorate,"room_decorate_decoration","room_decorate_decoration",c.i18n.t("furni_bag.decoratebtn")),this.decorateBtn.x=this.mBtn_Bag.x-this.mBtn_Bag.width-16*this.dpr,this.decorateBtn.y=this.mBtn_Bag.y,this.decorateBtn.setTextStyle(c.UIHelper.whiteStyle(this.dpr,13)),this.decorateBtn.setTextOffset(9*this.dpr,0),this.add([this.mBtn_RemoveAll,this.mBtn_Reverse,this.mBtn_Bag,this.decorateBtn]),this.mBtn_SelectedFurniture=new m.ItemButton(this.scene,h.d.room_decorate,"room_decorate_icon_default",this.dpr,this.scale,!1),this.mBtn_SelectedFurniture.countTextColor="#ffffff",this.mBtn_SelectedFurniture.countTextOffset=new c.LogicPos(.5*this.mBtn_SelectedFurniture.width-12*this.dpr,.5*this.mBtn_SelectedFurniture.height-10*this.dpr),this.mBtn_SelectedFurniture.BGVisible=!0,this.mBtn_SelectedFurniture.x=30*this.dpr,this.mBtn_SelectedFurniture.y=this.mDynamicBtnsY,this.add(this.mBtn_SelectedFurniture),e.prototype.init.call(this)},Object.defineProperty(PicaDecoratePanel.prototype,"mediator",{get:function(){return this.render.mainPeer[this.key]},enumerable:!1,configurable:!0}),PicaDecoratePanel.prototype.btnHandler_Close=function(){var e=this;new s.AlertView(this.scene,this.uiManager).show({text:this.mShowData.closeAlertText||"no data of PKT_SYS0000021",oy:302*this.dpr*this.render.uiScale,callback:function(){e.mediator.btnHandler_Close()}})},PicaDecoratePanel.prototype.btnHandler_SaveAndExit=function(){this.mediator.btnHandler_SaveAndExit()},PicaDecoratePanel.prototype.btnHandler_RemoveAll=function(){this.mediator.btnHandler_RemoveAll()},PicaDecoratePanel.prototype.btnHandler_Reverse=function(){this.mediator.btnHandler_Reverse()},PicaDecoratePanel.prototype.btnHandler_Bag=function(){this.mediator.btnHandler_Bag()},PicaDecoratePanel.prototype.onFurnitureClick=function(e){this.mediator.onFurnitureClick(e)},PicaDecoratePanel.prototype.onDecorateShopHandler=function(){this.mediator.btnHandler_Shop()},PicaDecoratePanel}(f.PicaBasePanel);!function(e){function FurnitureButton(i,n,a){var s=e.call(this,i)||this;return s.key=n,s.dpr=a,s.mText=s.scene.make.text({x:.5*s.width-5*s.dpr,y:0,text:"",padding:{left:0,right:10*s.dpr},style:{fontFamily:c.Font.DEFULT_FONT,fontSize:28*s.dpr,color:"#FCF863"}}).setFontStyle("bold italic").setStroke("#C25E0D",2*s.dpr).setOrigin(.5),s.add(s.mText),s}g(FurnitureButton,e),FurnitureButton.prototype.setDisplay=function(e){this.mButton&&this.remove(this.mButton),this.mButton=new l.Button(this.scene,e.texturePath)},FurnitureButton.prototype.setCount=function(e){this.mText.text=e+""}}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaIllustratedPanel",(function(){return j}));var a,s=n(789),o=n(790),h=n(2),l=n(0),c=n(792),m=n(1042),f=n(1039),g=n(788),_=n(804),T=n(1038),x=n(791),S=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),j=function(e){function PicaIllustratedPanel(i){var n=e.call(this,i)||this;return n.key=h.ModuleName.PICAILLUSTRATED_NAME,n.atlasNames=[o.d.uicommon,o.d.uicommon1,o.d.illustrate],n.tempDatas={},n}return S(PicaIllustratedPanel,e),PicaIllustratedPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;this.mBackground.x=.5*a,this.mBackground.y=.5*s,this.content.x=.5*a,this.content.y=.5*s,this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains),e.prototype.resize.call(this,a,s),this.setSize(a,s)},PicaIllustratedPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.listPanel&&this.listPanel.destroy(),this.detailPanel&&this.detailPanel.destroy()},PicaIllustratedPanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.mBackground=new x.CommonBackground(this.scene,0,0,i,n),this.add(this.mBackground),this.backButton=new s.ButtonEventDispatcher(this.scene,0,0),this.backButton.setSize(80*this.dpr,22*this.dpr),this.backButton.enable=!0,this.backButton.on(g.ClickEvent.Tap,this.onCloseHandler,this),this.backButton.x=.5*this.backButton.width+10*this.dpr,this.backButton.y=45*this.dpr;var a=this.scene.make.image({key:o.d.uicommon,frame:"back_arrow"});a.x=.5*-this.backButton.width+.5*a.width+10*this.dpr,this.titleTex=this.scene.make.text({text:l.i18n.t("illustrate.title"),style:l.UIHelper.whiteStyle(this.dpr,20)}).setOrigin(0,.5),this.titleTex.x=a.x+.5*a.width+15*this.dpr,this.backButton.add([a,this.titleTex]);var h=295*this.dpr,c=405*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(h,c),this.add([this.content,this.backButton]),this.resize(),e.prototype.init.call(this)},PicaIllustratedPanel.prototype.onShow=function(){this.openListPanel(),this.redObj&&this.setRedsState(this.redObj)},PicaIllustratedPanel.prototype.setGallaryData=function(e,i){this.tempDatas.gallery=e,this.tempDatas.combinations=i,this.mInitialized&&this.detailPanel&&this.detailPanel.setGallaryData(e,i)},PicaIllustratedPanel.prototype.setDoneMissionList=function(e){this.tempDatas.donemission=e,this.mInitialized&&this.detailPanel&&this.detailPanel.setDoneMissionList(e)},PicaIllustratedPanel.prototype.setRedsState=function(e){this.redObj=e,this.mInitialized&&(this.listPanel&&this.listPanel.setRedsState(this.redObj.redlist),this.detailPanel&&this.detailPanel.setRedsState(this.redObj[_.MainUIRedType.GALLERY]))},PicaIllustratedPanel.prototype.openListPanel=function(){this.showListPanel(),this.listPanel.setListData(),this.redObj&&this.listPanel.setRedsState(this.redObj.redlist)},PicaIllustratedPanel.prototype.showListPanel=function(){this.listPanel||(this.listPanel=new m.PicaIllustratedListPanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.listPanel.setHandler(new l.Handler(this,this.onListHandler)),this.content.add(this.listPanel)),this.listPanel.visible=!0,this.titleTex.visible=!0},PicaIllustratedPanel.prototype.hideListPanel=function(){this.listPanel.visible=!1},PicaIllustratedPanel.prototype.openDetailPanel=function(){this.showDetailPanel(),this.tempDatas&&(this.detailPanel.setGallaryData(this.tempDatas.gallery,this.tempDatas.combinations),this.tempDatas.donemission&&this.detailPanel.setDoneMissionList(this.tempDatas.donemission)),this.redObj&&this.detailPanel.setRedsState(this.redObj[_.MainUIRedType.GALLERY])},PicaIllustratedPanel.prototype.showDetailPanel=function(){this.detailPanel||(this.detailPanel=new f.PicaIllustratedDetailPanel(this.scene,this.scaleWidth,this.scaleHeight,this.dpr,this.scale),this.detailPanel.setHandler(new l.Handler(this,this.onDetailHandler)),this.content.add(this.detailPanel)),this.detailPanel.resize(this.scaleWidth,this.scaleHeight),this.detailPanel.visible=!0,this.titleTex.visible=!1},PicaIllustratedPanel.prototype.hideDetailPanel=function(){this.detailPanel.visible=!1},PicaIllustratedPanel.prototype.openFuriDetail=function(e){this.showFuriDetailPanel(),this.furiDetail.setProp(e)},PicaIllustratedPanel.prototype.showFuriDetailPanel=function(){this.furiDetail||(this.furiDetail=new T.PicaFuriniDetailPanel(this.scene,this.render,334*this.dpr,353*this.dpr,this.dpr,this.scale),this.furiDetail.setHandler(new l.Handler(this,this.onFuriDetailHandler))),this.content.add(this.furiDetail),this.furiDetail.visible=!0,this.furiDetail.refreshMask()},PicaIllustratedPanel.prototype.hideFuriDetailPanel=function(){this.content.remove(this.furiDetail),this.furiDetail.visible=!1},PicaIllustratedPanel.prototype.onListHandler=function(e,i){"make"===e?this.render.renderEmitter(this.key+"_openpanel",e):"gallary"===e?(this.hideListPanel(),this.openDetailPanel()):"cooking"===e&&this.render.renderEmitter(this.key+"_openpanel",e)},PicaIllustratedPanel.prototype.onDetailHandler=function(e,i){"close"===e?(this.hideDetailPanel(),this.showListPanel()):"rewards"===e?this.render.renderEmitter(this.key+"_queryrewards",i):"combinations"===e?this.render.renderEmitter(this.key+"_querycombinations",i):"furidetail"===e&&this.openFuriDetail(i)},PicaIllustratedPanel.prototype.onFuriDetailHandler=function(){this.hideFuriDetailPanel()},PicaIllustratedPanel.prototype.onCloseHandler=function(){if(this.detailPanel&&this.detailPanel.visible)return this.hideDetailPanel(),void this.showListPanel();this.render.renderEmitter(this.key+"_close")},PicaIllustratedPanel}(c.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaLoginPanel",(function(){return f}));var a,s=n(788),o=n(789),h=n(790),l=n(2),c=n(0),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),f=function(e){function PicaLoginPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.areaCode="86",n.downcount=-1,n.key=l.ModuleName.PICA_LOGIN_NAME,n.mMediator=n.render.mainPeer[l.ModuleName.PICA_LOGIN_NAME],n.errorCode=new Map,n.errorCode.set(40004,"手机验证码已过期"),n.errorCode.set(40001,"用户名或手机号没找到"),n.errorCode.set(40002,"密码不正确"),n.errorCode.set(40003,"该商品已经添加到购物车"),n.errorCode.set(40005,"手机验证码不正确"),n.errorCode.set(40006,"您未获得测试资格\n关注“皮卡堂手游”微信公众号下次一定！"),n}return m(PicaLoginPanel,e),PicaLoginPanel.prototype.setInputVisible=function(e){this.mPhoneCodeInput&&(this.mPhoneCodeInput.visible=e,this.mPhoneInput.visible=e)},PicaLoginPanel.prototype.destroy=function(){this.parentContainer&&this.parentContainer.remove(this,!1),this.parent&&this.parent.destroy(),e.prototype.destroy.call(this),this.updatePanelList(),this.fetchTime&&clearTimeout(this.fetchTime)},PicaLoginPanel.prototype.setLoginEnable=function(e){this.mLoginBtn.enable=e},PicaLoginPanel.prototype.addListen=function(){this.mLoginBtn.on(s.ClickEvent.Tap,this.onLoginHandler,this),this.mPhoneInput.on("enter",this.onEnterPhoneHandler,this),this.mPhoneInput.on("textchange",this.onCodeChangeHandler,this),this.mPhoneCodeInput.on("enter",this.onEnterCodeHandler,this),this.mPhoneCodeInput.on("textchange",this.onCodeChangeHandler,this),this.mCloseBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this),this.fetchCode.on(s.ClickEvent.Tap,this.onFetchCodeHandler,this)},PicaLoginPanel.prototype.removeListen=function(){this.mLoginBtn.off(s.ClickEvent.Tap,this.onLoginHandler,this),this.mPhoneInput.off("enter",this.onEnterPhoneHandler,this),this.mPhoneInput.off("textchange",this.onCodeChangeHandler,this),this.mPhoneCodeInput.off("enter",this.onEnterCodeHandler,this),this.mPhoneCodeInput.off("textchange",this.onCodeChangeHandler,this),this.fetchCode.off(s.ClickEvent.Tap,this.onFetchCodeHandler,this),this.mCloseBtn.off(s.ClickEvent.Tap,this.onCloseHandler,this)},PicaLoginPanel.prototype.showError=function(e){var i=e.code,n=this.errorCode.get(i);n?this.mErrorTips.setText(n):this.mErrorTips.setText(e.msg)},PicaLoginPanel.prototype.resize=function(){var e=this.scene.cameras.main,i=e.width,n=e.height,a=new Phaser.Geom.Rectangle(.5*-i,.5*-n,i,n);this.mMaskBg.clear(),this.mMaskBg.fillStyle(0,0),this.mMaskBg.fillRect(a.x,a.y,a.width,a.height),this.mMaskBg.input?this.mMaskBg.input.hitArea=a:this.mMaskBg.setInteractive(a,Phaser.Geom.Rectangle.Contains)},PicaLoginPanel.prototype.preload=function(){this.addAtlas(this.key,"pica_login/pica_login.png","pica_login/pica_login.json"),this.addAtlas(h.c.commonKey,h.d.commonUrl+".png",h.d.commonUrl+".json"),e.prototype.preload.call(this)},PicaLoginPanel.prototype.init=function(){var i=this.scene.cameras.main,n=i.width,a=i.height;this.x=n*this.originX,this.y=a*this.originY;var l=this.scene.make.container(void 0,!1);l.add(this),this.mMaskBg=this.scene.make.graphics(void 0,!1),this.add([this.mMaskBg,l]);var m=this.scene.make.image({key:h.c.commonKey,frame:"bg"},!1);l.setSize(m.width,m.height);var f=this.scene.make.text({y:.5*-l.height+19*this.dpr,text:"登  录",style:{color:"#FFD248",fontSize:26*this.dpr,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(.5,0).setFontStyle("bold").setStroke("#572D00",4*this.dpr);f.setFontStyle("bold"),this.mPhoneInput=new o.InputField(this.scene,0,0,220*this.dpr,40*this.dpr,{type:"tel",maxLength:11,placeholder:"请输入手机号码",color:"#717171",fontSize:16*this.dpr+"px"});var g=this.createInput(this.mPhoneInput,0,.5*-l.height+100*this.dpr),_=localStorage.getItem("accountphone");if(_)try{this.mPhoneInput.text=JSON.parse(_).account}catch(e){}this.mPhoneCodeInput=new o.InputField(this.scene,0,0,156*this.dpr,40*this.dpr,{type:"tel",maxLength:4,placeholder:"验证码",color:"#717171",text:"",fontSize:16*this.dpr+"px"}).setOrigin(0,.5);var T=this.createInput(this.mPhoneCodeInput,0,.5*-l.height+176*this.dpr,220*this.dpr);this.mPhoneCodeInput.x=-T.width/2+8*this.dpr,this.fetchCode=new s.Button(this.scene,this.key,"login_resend_pin_butt",void 0,"发送验证码"),this.fetchCode.x=.5*(T.width-this.fetchCode.width)-4.33*this.dpr,this.fetchCode.setTextStyle({fontSize:12.45*this.dpr,fontFamily:c.Font.DEFULT_FONT}),T.add([this.fetchCode]),this.mLoginBtn=new s.NineSliceButton(this.scene,0,.5*l.height-51*this.dpr,191*this.dpr,60*this.dpr,h.c.commonKey,"yellow_btn","登 录",this.dpr,1,{left:12*this.dpr,top:12*this.dpr,right:14*this.dpr,bottom:12*this.dpr}),this.mLoginBtn.setTextStyle({color:"#995E00",fontSize:22*this.dpr,fontFamily:c.Font.DEFULT_FONT}),this.mLoginBtn.setFontStyle("bold"),this.mErrorTips=this.scene.make.text({x:.5*-T.width,y:T.y+.5*T.height+8*this.dpr,style:{color:"#FF0000",fontSize:12*this.dpr+"px",fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(0,0),this.mCloseBtn=new s.Button(this.scene,h.c.commonKey,"close"),this.mCloseBtn.x=.5*(m.width-this.mCloseBtn.width),this.mCloseBtn.y=.5*-(m.height-this.mCloseBtn.height);var x=new s.BBCodeText(this.scene,0,0,"我已阅读并同意皮卡堂的[area=userService][color=#253FCA]《用户服务协议》[/color][/area]",{color:"#8C8C8C",fontSize:11*this.dpr,fontFamily:c.Font.DEFULT_FONT}).setOrigin(.5,.5).setInteractive().on("areadown",(function(e){c.Helpers.openUrl("https://picatown.com/con_news/news.php?nid=1201")}));this.acceptBtn=new s.CheckBox(this.scene,this.key,"accept_unchecked","accept_checked").on(s.ClickEvent.Tap,this.onCheckboxHandler,this),x.x=8*this.dpr,x.y=this.mLoginBtn.y-.5*this.mLoginBtn.height-20*this.dpr,this.acceptBtn.x=x.x-.5*x.width-8*this.dpr,this.acceptBtn.y=x.y,this.acceptBtn.selected=!0,this.add([m,f,this.mCloseBtn,g,T,x,this.mLoginBtn,this.mErrorTips,this.acceptBtn]),e.prototype.init.call(this),this.resize(),this.updatePanelList()},PicaLoginPanel.prototype.updatePanelList=function(){if(this.render&&this.render.uiManager){var e=this.render.uiManager.getPanel(l.ModuleName.PICA_BOOT_NAME);e&&e.updatePanelList()}},PicaLoginPanel.prototype.createInput=function(e,i,n,a){var s=this.scene.make.container({x:i,y:n},!1),o=(this.scene.textures.getFrame(this.key,"input_bg"),this.scene.make.image({key:this.key,frame:"input_bg"}));return s.add([e,o]),s.setSize(o.width,o.height),s},PicaLoginPanel.prototype.onFetchCodeHandler=function(){var e=this,i=this.mPhoneInput.text;11===i.length?this.fetchTime||(this.downcount=60,this.fetchTime=setInterval((function(){--e.downcount<=0&&(clearInterval(e.fetchTime),e.fetchTime=void 0),e.downcount>0?e.fetchCode.setText("获取验证码("+e.downcount+")"):e.fetchCode.setText("获取验证码")}),1e3),this.mMediator&&this.mMediator.fetchCode(i,this.areaCode)):this.mErrorTips.setText("手机格式错误")},PicaLoginPanel.prototype.tryLogin=function(){var e=this.mPhoneInput.text,i=this.mPhoneCodeInput.text;11===e.length?i?this.acceptBtn.selected?(this.mMediator||(this.mMediator=this.render.mainPeer[l.ModuleName.PICA_LOGIN_NAME]),this.mMediator.phoneLogin(e.toString(),i,this.areaCode)):this.mErrorTips.setText("必须接受用户协议"):this.mErrorTips.setText("验证码格式错误"):this.mErrorTips.setText("手机格式错误")},PicaLoginPanel.prototype.onEnterPhoneHandler=function(){this.mPhoneCodeInput.setFocus()},PicaLoginPanel.prototype.onEnterCodeHandler=function(){this.mPhoneCodeInput.setBlur(),this.tryLogin()},PicaLoginPanel.prototype.onCheckboxHandler=function(){this.mLoginBtn.enable=this.acceptBtn.selected},PicaLoginPanel.prototype.onLoginHandler=function(){this.tryLogin()},PicaLoginPanel.prototype.onCodeChangeHandler=function(){this.mErrorTips.text&&this.mErrorTips.setText("")},PicaLoginPanel.prototype.onCloseHandler=function(){this.mMediator.hide()},PicaLoginPanel}(o.BasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaManufacturePanel",(function(){return x}));var a,s=n(788),o=n(789),h=n(790),l=n(2),c=n(0),m=n(792),f=n(1043),g=n(1044),_=n(791),T=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),x=function(e){function PicaManufacturePanel(i){var n=e.call(this,i)||this;return n.atlasNames=[h.d.uicommon,h.d.effectcommon,h.d.recast],n.textures=[{atlasName:"Recast_aims_icon_bg",folder:"texture"},{atlasName:"Recast_bg_texture",folder:"texture"}],n.key=l.ModuleName.PICAMANUFACTURE_NAME,n}return T(PicaManufacturePanel,e),PicaManufacturePanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;this.mCloseBtn.x=.5*this.mCloseBtn.width+0*this.dpr,this.mCloseBtn.y=45*this.dpr,this.starCountCon.y=this.mCloseBtn.y,this.starCountCon.x=a-15*this.dpr,this.toggleCon.x=.5*a,this.toggleCon.y=.5*this.toggleCon.height+40*this.dpr,this.composePanel.resize(a,s),this.recastPanel.resize(a,s),e.prototype.resize.call(this,a,s),this.setInteractive()},PicaManufacturePanel.prototype.onShow=function(){var e=this.mShowData?2:1;if(this.onToggleButtonHandler(void 0,this.toggleCon.getAt(e)),2===this.optionType){this.recastPanel.setStarData(this.starCount),this.recastPanel.setRecasteItemData(this.mShowData,!0),this.tempDatas&&this.tempDatas.subcategory&&this.recastPanel.setCategories(this.tempDatas.subcategory);var i=this.render.uiManager.getPanel(l.ModuleName.PICABAG_NAME);i&&(i.visible=!1)}},PicaManufacturePanel.prototype.onHide=function(){if(this.mShowData){var e=this.render.uiManager.getPanel(l.ModuleName.PICABAG_NAME);e&&(e.visible=!0)}},PicaManufacturePanel.prototype.setCategories=function(e){this.tempDatas={subcategory:e},this.mInitialized&&(1===this.optionType?this.composePanel.setCategories():2===this.optionType&&this.recastPanel.setCategories(e))},PicaManufacturePanel.prototype.setRecasteResult=function(e){this.recastPanel.setRecasteResult(e)},PicaManufacturePanel.prototype.setGridProp=function(e){1===this.optionType?this.composePanel.setGridProp(e):this.recastPanel.setProp(e)},PicaManufacturePanel.prototype.updateGridProp=function(e){this.composePanel.updateGridProp(e)},PicaManufacturePanel.prototype.setStarData=function(e){this.starCount=e,this.mInitialized&&(this.composePanel.setStarData(this.starCount),this.recastPanel.setStarData(this.starCount),this.starvalue.setText(e+""))},PicaManufacturePanel.prototype.setComposeResult=function(e){},PicaManufacturePanel.prototype.queryRefreshPackage=function(e){this.composePanel.queryRefreshPackage(e)},PicaManufacturePanel.prototype.onInitialized=function(){this.starCount&&(this.composePanel.setStarData(this.starCount),this.recastPanel.setStarData(this.starCount),this.starvalue.setText(this.starCount+""))},PicaManufacturePanel.prototype.init=function(){var i=this.scaleWidth,n=this.scaleHeight;this.setSize(i,n),this.composePanel=new f.PicaFurnitureComposePanel(this.scene,this.render,this.width,this.height,this.dpr,this.scale),this.recastPanel=new g.PicaRecastePanel(this.scene,this.render,this.width,this.height,this.dpr,this.scale),this.mCloseBtn=new o.ButtonEventDispatcher(this.scene,0,0),this.mCloseBtn.on(s.ClickEvent.Tap,this.onCloseHandler,this),this.mCloseBtn.x=.5*this.mCloseBtn.width+10*this.dpr,this.mCloseBtn.y=45*this.dpr;var a=this.scene.make.image({key:h.d.uicommon,frame:"back_arrow"});this.mCloseBtn.add(a),this.mCloseBtn.setSize(80*this.dpr,a.height),this.mCloseBtn.enable=!0;var l=new s.NineSlicePatch(this.scene,0,-this.dpr,80*this.dpr,28*this.dpr,h.d.uicommon,"home_assets_bg",{left:17*this.dpr,top:0*this.dpr,right:17*this.dpr,bottom:0*this.dpr});l.x=.5*-l.width,this.starvalue=new _.ImageValue(this.scene,60*this.dpr,26*this.dpr,h.d.recast,"Recast_pica star_big",this.dpr,{color:"#ffffff",fontSize:15*this.dpr,fontFamily:c.Font.NUMBER}),this.starvalue.setLayout(1),this.starvalue.x=l.x-.5*l.width+22*this.dpr,this.starCountCon=this.scene.make.container(void 0,!1),this.starCountCon.setSize(l.width,l.height),this.starCountCon.add([l,this.starvalue]),this.starCountCon.x=i-20*this.dpr,this.starCountCon.y=.5*-this.height+20*this.dpr,this.toggleCon=this.scene.make.container(void 0,!1),this.toggleCon.y=20*this.dpr,this.selectLine=this.scene.make.image({key:h.d.recast,frame:"Recast_bookmark_select"}),this.toggleCon.add(this.selectLine),this.add([this.composePanel,this.recastPanel,this.mCloseBtn,this.starCountCon,this.toggleCon]),this.createOptionButtons(),this.resize(0,0),e.prototype.init.call(this)},PicaManufacturePanel.prototype.createOptionButtons=function(){for(var e=[{text:c.i18n.t("compose.title"),type:1},{text:c.i18n.t("common.recast"),type:2}],i=120*this.dpr,n=i/e.length,a=20*this.dpr,h=-i/2,l=0;l<e.length;l++){var m=e[l],f=new o.ToggleColorButton(this.scene,n,20*this.dpr,this.dpr,m.text,c.UIHelper.colorStyle("#EEEEEE",14*this.dpr));f.on(s.ClickEvent.Tap,this.onToggleButtonHandler,this),f.x=h+.5*n,f.setData("item",m.type),f.setSize(n,a),this.toggleCon.add(f),f.setChangeColor("#FFFF00"),f.setNormalColor("#EEEEEE"),f.setFontStyle("bold"),h+=n}this.selectLine.y=15*this.dpr},PicaManufacturePanel.prototype.onToggleButtonHandler=function(e,i){this.curToggleItem!==i&&(this.curToggleItem&&(this.curToggleItem.isOn=!1),i.isOn=!0,this.curToggleItem=i,this.optionType=i.getData("item"),this.selectLine.x=i.x,1===this.optionType?(this.composePanel.visible=!0,this.recastPanel.visible=!1):2===this.optionType&&(this.composePanel.visible=!1,this.recastPanel.visible=!0,this.recastPanel.setRecasteItemData(this.mShowData,!0)))},PicaManufacturePanel.prototype.onCloseHandler=function(){this.render.renderEmitter(this.key+"_close")},PicaManufacturePanel}(m.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaMarqueePanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(790),l=n(2),c=n(0),m=n(792),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaMarqueePanel(i){var n=e.call(this,i)||this;return n.atlasNames=[h.d.bulletin],n.key=l.ModuleName.PICAMARQUEE_NAME,n}return f(PicaMarqueePanel,e),PicaMarqueePanel.prototype.resize=function(){this.x=this.scene.cameras.main.width/2,this.y=120*this.dpr,this.maskGraphic.x=this.x,this.maskGraphic.y=this.y},PicaMarqueePanel.prototype.onShow=function(){this.tempDatas&&this.setMarqueeData(this.tempDatas)},PicaMarqueePanel.prototype.setMarqueeData=function(e){if(this.tempDatas=e,this.mInitialized){var i=e.tips,n=e.message||"",a=e.playtimes||1;this.mContent.text=i?"[color=#FFEA00]["+i+"][/color]"+n:n;var s=6e3/(267*this.dpr),o=this.mContent.width*s;o=o<6e3?6e3:o,this.playAni(o,a)}},PicaMarqueePanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.maskGraphic.destroy()},PicaMarqueePanel.prototype.init=function(){this.content=this.scene.make.container(void 0,!1),this.bg=this.scene.make.image({key:h.d.bulletin,frame:"bulletin_bg"},!1),this.content.setSize(this.bg.width,this.bg.height),this.lightSprite=this.createSprite(h.d.bulletin,"bulletinlight","bulletin_light_",[1,2],10,-1),this.mContent=new s.BBCodeText(this.mScene,0,0,"",c.UIHelper.colorStyle("#68FAFF",11*this.dpr)).setOrigin(0,.5),this.maskGraphic=this.scene.make.graphics(void 0,!1);var i=this.bg.width/this.scale-20*this.dpr,n=this.bg.height/this.scale;this.maskGraphic.fillStyle(0,1),this.maskGraphic.fillRect(.5*-i,.5*-n,i,n),this.content.add([this.mContent]),this.add([this.bg,this.lightSprite,this.content]),this.content.setMask(this.maskGraphic.createGeometryMask()),e.prototype.init.call(this),this.mScene.layerManager.addToLayer(o.MainUIScene.LAYER_TOOLTIPS,this),this.resize()},PicaMarqueePanel.prototype.playAni=function(e,i){var n=this,a=10*this.dpr,s=this.content.width,o=.5*s+a,h=.5*-s-this.mContent.width-a+5*this.dpr;c.UIHelper.playtPosXTween(this.scene,this.mContent,o,h,e,"Linear",0,c.Handler.create(this,(function(){i>0?n.playAni(e,i):n.render.renderEmitter(n.key+"_close")}))),i--},PicaMarqueePanel.prototype.createSprite=function(e,i,n,a,s,o){void 0===s&&(s=30),void 0===o&&(o=0);var h=this.scene.make.sprite({key:e,frame:n+"1"});return this.scene.anims.create({key:i,frames:this.scene.anims.generateFrameNames(e,{prefix:n+"",start:a[0],end:a[1]}),frameRate:s,repeat:o}),h.play(i),h},PicaMarqueePanel}(m.PicaBasePanel)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaNewOldMainPanel",(function(){return f}));var a,s=n(788),o=n(790),h=n(789),l=n(2),c=n(0),m=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},f=function(e){function PicaNewOldMainPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.isSceneNameActive=!1,n.key=l.ModuleName.PICAMAINUI_NAME,n}return m(PicaNewOldMainPanel,e),PicaNewOldMainPanel.prototype.show=function(i){e.prototype.show.call(this,i),this.mInitialized&&(this.setInteractive(),this.update(this.mShowData),this.checkUpdateActive())},PicaNewOldMainPanel.prototype.resize=function(i,n){var a=this.scene.cameras.main.width/this.scale,s=this.scene.cameras.main.height/this.scale;e.prototype.resize.call(this,a,s),this.mCoinValue.x=a-this.mCoinValue.width/2-5*this.dpr,this.mDiamondValue.x=a-this.mDiamondValue.width/2-5*this.dpr},PicaNewOldMainPanel.prototype.preload=function(){this.addAtlas(this.key,"main_ui/mainui.png","main_ui/mainui.json"),this.addAtlas(o.c.commonKey,o.d.commonUrl+".png",o.d.commonUrl+".json"),e.prototype.preload.call(this)},PicaNewOldMainPanel.prototype.addListen=function(){e.prototype.addListen.call(this),this.mInitialized&&(this.roomCon?(this.roomCon.on("pointerup",this.onOpenRoomPanel,this),this.render.emitter.on(l.EventType.UPDATE_ROOM_INFO,this.onUpdateRoomHandler,this),this.render.emitter.on(l.EventType.UPDATE_PLAYER_INFO,this.onUpdatePlayerHandler,this),this.render.emitter.on(l.EventType.UPDATE_PARTY_STATE,this.onUpdatePartyHandler,this)):c.Logger.getInstance().fatal(PicaNewOldMainPanel.name+": sceneName does not exist!"))},PicaNewOldMainPanel.prototype.removeListen=function(){e.prototype.removeListen.call(this),this.mInitialized&&(this.roomCon?(this.roomCon.off("pointerup",this.onOpenRoomPanel,this),this.render.emitter.off(l.EventType.UPDATE_ROOM_INFO,this.onUpdateRoomHandler,this),this.render.emitter.off(l.EventType.UPDATE_PLAYER_INFO,this.onUpdatePlayerHandler,this),this.render.emitter.off(l.EventType.UPDATE_PARTY_STATE,this.onUpdatePartyHandler,this)):c.Logger.getInstance().fatal(PicaNewOldMainPanel.name+": sceneName does not exist!"))},PicaNewOldMainPanel.prototype.destroy=function(){e.prototype.destroy.call(this),this.playerInfo=void 0,this.roomInfo=void 0},PicaNewOldMainPanel.prototype.update=function(i){e.prototype.update.call(this),i&&(i.hasOwnProperty("roomId")?this.roomInfo=i:this.playerInfo=i),this.playerInfo&&this.updatePlayerInfo(this.playerInfo),this.roomInfo&&this.updateRoomInfo(this.roomInfo)},PicaNewOldMainPanel.prototype.updatePlayerInfo=function(e){if(this.playerInfo=e,this.mInitialized){if(e.level){var i=e.level;this.playerLv.text=i.level+""}if(void 0!==e.coin&&this.mCoinValue.setText(this.getCoin().value+""||"0"),void 0!==e.diamond&&this.mDiamondValue.setText(this.getDiamond().value+""||"0"),e.energy){var n=e.energy;n?this.mStrengthValue.setValue(n.currentValue,n.max):this.mStrengthValue.setValue(0,100)}this.mSceneName.rightIcon.visible=this.isSelfRoom}},PicaNewOldMainPanel.prototype.getCoin=function(){for(var e=0,i=this.playerInfo.properties;e<i.length;e++){var n=i[e];if(n.hasOwnProperty("id")){if("IV0000001"===n.id)return n}else c.Logger.getInstance().error(n.key+"  缺少ID")}},PicaNewOldMainPanel.prototype.getDiamond=function(){for(var e=0,i=this.playerInfo.properties;e<i.length;e++){var n=i[e];if(n.hasOwnProperty("id")){if("IV0000002"===n.id)return n}else c.Logger.getInstance().error(n.key+"  缺少ID")}},PicaNewOldMainPanel.prototype.updateRoomInfo=function(e){this.roomInfo=e,this.mInitialized&&(this.roomCon.setSize(60*this.dpr,30*this.dpr),e.name&&(this.mSceneName.setText(e.name),this.roomCon.setSize(2*this.mSceneName.rightbound,30*this.dpr)),this.roomCon.setInteractive(),this.isSceneNameActive=!0,e.playerCount&&this.mCounter.setText(""+e.playerCount),this.mCounter.x=this.mSceneName.x+this.mSceneName.rightbound+5*this.dpr,this.praiseBtn.visible=!1,e.roomType&&("room"!==e.roomType&&"store"!==e.roomType||(this.praiseBtn.visible=!0),this.praiseBtn.setText(e.praise+""),this.praiseBtn.selected=e.hasPraised,e.hasPraised?(this.praiseBtn.setTextColor("#8E99C1"),this.praiseImg.setFrame("praise_after")):(this.praiseBtn.setTextColor("#ffffff"),this.praiseImg.setFrame("praise_before"))),this.mSceneName.rightIcon.visible=this.isSelfRoom,this.partyBtn.visible=this.isSelfRoom,e.openingParty?this.partyBtn.setText(c.i18n.t("common.manager")):this.partyBtn.setText(c.i18n.t("main_ui.party")))},Object.defineProperty(PicaNewOldMainPanel.prototype,"isSelfRoom",{get:function(){if(!this.playerInfo||!this.roomInfo)return!1;for(var e=this.playerInfo.rooms,i=this.roomInfo.roomId,n=0,a=e;n<a.length;n++){if(a[n].roomId===i)return!0}return!1},enumerable:!1,configurable:!0}),PicaNewOldMainPanel.prototype.updateUIState=function(e){this.mInitialized&&("mainui.playerinfo"===e.name&&(this.playerCon.visible=e.visible),"mainui.roominfo"===e.name&&(this.roomCon.visible=e.visible),"mainui.headbtn"===e.name&&(e.disabled?this.playerIcon.removeInteractive():this.playerIcon.setInteractive()),"mainui.entereditorbtn"===e.name&&(this.mSceneName.visible=e.visible,this.isSceneNameActive&&(e.disabled?this.roomCon.removeInteractive():(this.roomCon.setSize(2*this.mSceneName.rightbound,30*this.dpr),this.roomCon.setInteractive()))))},PicaNewOldMainPanel.prototype.init=function(){var i=this.scene.cameras.main.width,n=this.scene.cameras.main.height;this.playerCon=this.scene.make.container(void 0,!1),this.playerCon.y=25*this.dpr,this.add(this.playerCon),this.mCoinValue=new g(this.scene,this.key,"coin",this.dpr),this.mDiamondValue=new g(this.scene,this.key,"diamond",this.dpr),this.mDiamondValue.setHandler(new c.Handler(this,this.onOpenRechargeHandler)),this.mDiamondValue.y=35*this.dpr;var a=this.scene.textures.getFrame(this.key,"strength_progress");this.mStrengthValue=new x(this.scene,this.key,"strength_icon",this.dpr),this.mStrengthValue.x=76*this.dpr;var l=new s.NineSlicePatch(this.scene,68*this.dpr/2,this.mStrengthValue.height/2-a.height-1*this.dpr,92*this.dpr,a.height,this.key,"strength_progress",{left:8*this.dpr,top:3*this.dpr,right:a.width-2-8*this.dpr,bottom:a.height-1-3*this.dpr});this.mStrengthValue.setProgress(l,this.scale),this.playerIcon=this.scene.make.image({key:this.key,frame:"head"}),this.playerIcon.x=.5*-this.mStrengthValue.width-8*this.dpr,this.mStrengthValue.add(this.playerIcon),this.playerIcon.on("pointerup",this.onHeadHandler,this),this.playerIcon.setInteractive(),this.mStrengthValue.setValue(1e3,1e3),this.mStrengthValue.setInteractive(),this.mStrengthValue.on("pointerup",this.onStrengthHandler,this);var m=this.playerIcon.x+.5*this.playerIcon.width-2*this.dpr,f=this.playerIcon.y+.5*this.playerIcon.height-10*this.dpr;this.playerLv=this.scene.make.text({text:"0",x:m,y:f,style:{fontSize:11*this.dpr,bold:!0,fontFamily:c.Font.DEFULT_FONT,color:"#356EE3"}},!1).setOrigin(1,0),this.playerLv.setShadow(0,0,"#ffffff",2),this.playerLv.setStroke("#356EE3",2),this.playerLv.setShadowStroke(!0),this.mStrengthValue.add(this.playerLv),this.playerCon.add([this.mStrengthValue,this.mCoinValue,this.mDiamondValue]),this.roomCon=this.scene.make.container(void 0,!1),this.roomCon.y=this.playerCon.y+32*this.dpr,this.add(this.roomCon),this.mSceneName=new T(this.scene,this.key,"room_icon","setting_icon",this.dpr),this.mSceneName.setText(""),this.mSceneName.x=18*this.dpr,this.mCounter=new _(this.scene,o.c.commonKey,"home_persons",this.dpr),this.mCounter.setText(""),this.mCounter.x=this.mSceneName.x+this.mSceneName.rightbound+5*this.dpr,this.mCounter.y=this.mSceneName.y,this.mCounter.setColor("#28D5F5"),this.textToolTip=new h.TextToolTips(this.scene,o.c.commonKey,"tips_bg",this.dpr,this.scale),this.textToolTip.setSize(160*this.dpr,45).visible=!1,this.praiseBtn=new s.CheckBox(this.scene,this.key,"praise_before_bg","praise_after_bg","1"),this.praiseBtn.y=this.mSceneName.y+this.mSceneName.height+.5*this.praiseBtn.height+20*this.dpr,this.praiseBtn.x=8*this.dpr+.5*this.praiseBtn.width,this.praiseBtn.setTextStyle({fontSize:11*this.dpr,fontFamily:c.Font.DEFULT_FONT}),this.praiseBtn.setTextOffset(10*this.dpr,0),this.praiseBtn.on(String(s.ClickEvent.Tap),this.onPraiseHandler,this),this.praiseImg=this.scene.make.image({key:this.key,frame:"praise_before"}),this.praiseImg.x=-10*this.dpr,this.praiseBtn.add(this.praiseImg),this.partyBtn=new s.Button(this.scene,this.key,"home_party_bg","home_party_bg",c.i18n.t("main_ui.party")),this.partyBtn.x=this.praiseBtn.x+.5*this.praiseBtn.width+.5*this.partyBtn.width+5*this.dpr,this.partyBtn.y=this.praiseBtn.y,this.partyBtn.setTextOffset(8*this.dpr,0),this.partyBtn.setTextStyle({fontSize:11*this.dpr,fontFamily:c.Font.DEFULT_FONT}),this.partyBtn.on(String(s.ClickEvent.Tap),this.onPartyHandler,this),this.roomCon.add([this.mSceneName,this.mCounter,this.praiseBtn,this.partyBtn,this.textToolTip]),this.roomCon.setSize(2*this.mSceneName.rightbound,30*this.dpr),this.resize(i,n),e.prototype.init.call(this)},PicaNewOldMainPanel.prototype.onOpenRoomPanel=function(){this.render.renderEmitter("openroompanel")},PicaNewOldMainPanel.prototype.onHeadHandler=function(){this.render.renderEmitter("showPanel",l.ModuleName.CHARACTERINFO_NAME)},PicaNewOldMainPanel.prototype.onStrengthHandler=function(){var e=this;if(this.playerInfo){var i=this.playerInfo.energy,n=i.currentValue+"/"+i.max+"\n",a=c.i18n.t("main_ui.energy_tips",{name:n,interpolation:{escapeValue:!1}});this.textToolTip.visible||this.scene.input.on("pointerdown",this.onTextToolTipHandler,this),this.textToolTip.setDelayText(a,3e3,new c.Handler(this,(function(){e.scene.input.off("pointerdown",e.onTextToolTipHandler,e)}))),this.textToolTip.setPosition(120*this.dpr,20*this.dpr)}},PicaNewOldMainPanel.prototype.onTextToolTipHandler=function(){this.textToolTip.visible=!1,this.scene.input.off("pointerdown",this.onTextToolTipHandler,this)},PicaNewOldMainPanel.prototype.checkUpdateActive=function(){return __awaiter(this,void 0,void 0,(function(){var e,i,n,a;return __generator(this,(function(s){switch(s.label){case 0:return[4,this.mWorld.mainPeer.getActiveUIData("PicaMainUI")];case 1:if(e=s.sent())for(i=0,n=e;i<n.length;i++)a=n[i],this.updateUIState(a);return[2]}}))}))},PicaNewOldMainPanel.prototype.onUpdatePlayerHandler=function(e){this.playerInfo=e,this.updatePlayerInfo(e)},PicaNewOldMainPanel.prototype.onUpdateRoomHandler=function(e){this.roomInfo=e,this.updateRoomInfo(e)},PicaNewOldMainPanel.prototype.onUpdatePartyHandler=function(e){this.roomInfo&&this.updateRoomInfo(this.roomInfo)},PicaNewOldMainPanel.prototype.onPraiseHandler=function(e,i){this.render.renderEmitter(l.EventType.QUERY_PRAISE,i.selected)},PicaNewOldMainPanel.prototype.onPartyHandler=function(){this.render.renderEmitter("showPanel",l.ModuleName.PICAOPENPARTY_NAME)},PicaNewOldMainPanel.prototype.onOpenRechargeHandler=function(){this.render.renderEmitter("showPanel",l.ModuleName.PICARECHARGE_NAME)},PicaNewOldMainPanel}(h.BasePanel),g=function(e){function ValueContainer(i,n,a,s){void 0===s&&(s=1);var o=e.call(this,i)||this;return o.init(n,a,s),o}return m(ValueContainer,e),ValueContainer.prototype.setText=function(e){this.mText.setText(e)},ValueContainer.prototype.setHandler=function(e){this.sendHandler=e},ValueContainer.prototype.init=function(e,i,n){var a=this.scene.make.image({key:e,frame:"home_progress_bottom"},!1);a.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mLeft=this.scene.make.image({key:e,frame:i},!1),this.mLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mText=this.scene.make.text({text:"0",width:a.width,height:a.height,style:{fontSize:14*n,fontFamily:c.Font.NUMBER}},!1).setOrigin(.5),this.mText.setStroke("#000000",1*n),this.mText.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mAddBtn=new s.Button(this.scene,e,"add_btn","add_btn"),this.setSize(a.width,a.height),this.mLeft.x=.5*-a.width+5*n,this.mLeft.y=a.y+.5*a.height-.5*this.mLeft.height,this.mAddBtn.x=this.width*this.originX-this.mAddBtn.width*this.originX-5*n,this.mText.x=4*n,this.add([a,this.mLeft,this.mText,this.mAddBtn]),this.mAddBtn.on(s.ClickEvent.Tap,this.onAddHandler,this)},ValueContainer.prototype.onAddHandler=function(){this.sendHandler&&this.sendHandler.run()},ValueContainer}(Phaser.GameObjects.Container),_=function(e){function IconText(i,n,a,s){void 0===s&&(s=1);var o=e.call(this,i)||this,h=i.make.image({key:n,frame:a},!1);return o.mText=i.make.text({style:{fontSize:14*s,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(0,.5),o.mText.x=h.width/2+4*s,o.mText.setStroke("#000000",2*s),o.add([h,o.mText]),o}return m(IconText,e),IconText.prototype.setText=function(e){this.mText.setText(e)},IconText.prototype.setStroke=function(e,i){this.mText.setStroke(e,i)},IconText.prototype.setColor=function(e){this.mText.setColor(e)},IconText}(Phaser.GameObjects.Container),T=function(e){function SceneName(i,n,a,s,o){void 0===o&&(o=1);var h=e.call(this,i,n,a,o)||this;return h.mDpr=o,h.mRightIcon=i.make.image({y:2*o,key:n,frame:s},!1),h.add(h.mRightIcon),h.mRightIcon.y=8*o,h.mRightIcon.x=10*o,h}return m(SceneName,e),SceneName.prototype.setText=function(i){e.prototype.setText.call(this,i)},Object.defineProperty(SceneName.prototype,"rightbound",{get:function(){return this.mText.x+this.mText.width+10*this.mDpr},enumerable:!1,configurable:!0}),Object.defineProperty(SceneName.prototype,"rightIcon",{get:function(){return this.mRightIcon},enumerable:!1,configurable:!0}),SceneName}(_),x=(function(e){function ExpProgress(i,n,a,o,h){var l=e.call(this,i)||this,m=h.getSize().width/o,f=l.scene.textures.getFrame(n,"exp_bg");l.setSize(m,f.height);var g=l.width,_=l.height;l.mProgressBar=new S(i,a),l.mProgressBar.setSize(l.width,l.height);var T=new s.NineSlicePatch(l.scene,g/2,_/2,g,_,n,"exp_bg",{left:8*a,top:3*a,right:f.width-2-8*a,bottom:f.height-1-3*a});l.mProgressBar.setBackground(T),f=l.scene.textures.getFrame(n,"exp_progress");var x=new s.NineSlicePatch(l.scene,g/2,_/2,m,f.height,n,"exp_progress",{left:8*a,top:3*a,right:f.width-2-10*a,bottom:f.height-1-5*a});return l.mProgressBar.setProgress(x,o),l.mProgressBar.setRatio(.5),l.mCurrentLv=i.make.text({text:"57",style:{fontSize:10*a,fontFamily:c.Font.DEFULT_FONT}},!1),l.mCurrentLv.setStroke("#000000",1*a),l.mNextLv=i.make.text({text:"58",style:{fontSize:10*a,fontFamily:c.Font.DEFULT_FONT}},!1).setOrigin(0,0),l.mNextLv.setStroke("#000000",1*a),l.mNextLv.x=l.width-l.mNextLv.width,l.add([l.mProgressBar,l.mCurrentLv,l.mNextLv]),l}m(ExpProgress,e),ExpProgress.prototype.setLv=function(e,i){this.mCurrentLv.setText(e.toString()),this.mNextLv.setText((e+1).toString()),this.mNextLv.x=this.width-this.mNextLv.width,this.mProgressBar.setRatio(i)}}(Phaser.GameObjects.Container),function(e){function ProgressValue(i,n,a,s){return e.call(this,i,n,a,s)||this}return m(ProgressValue,e),ProgressValue.prototype.setProgress=function(e,i){this.mProgress.setProgress(e,i)},ProgressValue.prototype.setValue=function(e,i){this.mText&&(this.mText.text=e+"/"+i,this.mProgress.setRatio(e/i))},ProgressValue.prototype.setInteractive=function(i){return i=i||new Phaser.Geom.Rectangle(0,0,this.width,this.height),e.prototype.setInteractive.call(this,i,Phaser.Geom.Rectangle.Contains),this},ProgressValue.prototype.init=function(e,i,n){var a=this.scene.make.image({key:e,frame:"home_progress_bottom"},!1);a.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.setSize(a.width,a.height),this.mLeft=this.scene.make.image({key:e,frame:i},!1),this.mLeft.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mProgress=new S(this.scene,n),this.mProgress.x=-this.width/2+10*n,this.mProgress.y=4*n,this.mText=this.scene.make.text({text:"0",width:a.width,height:a.height,style:{fontSize:10*n,fontFamily:c.Font.NUMBER}},!1).setOrigin(.5),this.mText.setStroke("#000000",1*n),this.mText.texture.setFilter(Phaser.Textures.FilterMode.LINEAR),this.mAddBtn=new s.Button(this.scene,e,"add_btn","add_btn"),this.setSize(a.width,a.height),this.mLeft.x=-this.width*this.originX+13*n,this.mAddBtn.x=this.width*this.originX-10*n,this.add([a,this.mProgress,this.mLeft,this.mText,this.mAddBtn])},ProgressValue}(g)),S=function(e){function ProgressBar(i,n){var a=e.call(this,i)||this;return a.dpr=n,a}return m(ProgressBar,e),ProgressBar.prototype.setBackground=function(e){this.addAt(e,0)},ProgressBar.prototype.setProgress=function(e,i){this.mScale=i,this.mProgress=e,this.add(this.mProgress),this.setSize(e.width*this.mScale,e.height*this.mScale);var n=e.getWorldTransformMatrix();this.worldpos=new Phaser.Geom.Point(n.tx,n.ty),this.mMaskGraphics=this.scene.make.graphics(void 0,!1),this.mMaskGraphics.fillStyle(16750848),this.mMaskGraphics.fillRect(0,0,this.width,this.height+8*this.dpr),this.mProgress.mask=new Phaser.Display.Masks.GeometryMask(this.scene,this.mMaskGraphics),this.mMaskGraphics.y=n.ty+this.height+4*this.dpr,this.mMaskGraphics.x=n.tx},ProgressBar.prototype.setRatio=function(e){this.mMaskGraphics&&(this.mMaskGraphics.x=this.worldpos.x+4*this.dpr-.5*this.mProgress.width+(this.width*e-this.width))},ProgressBar}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaOrderPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(2),l=n(790),c=n(0),m=n(791),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),__awaiter=function(e,i,n,a){return new(n||(n=Promise))((function(s,o){function fulfilled(e){try{step(a.next(e))}catch(e){o(e)}}function rejected(e){try{step(a.throw(e))}catch(e){o(e)}}function step(e){e.done?s(e.value):function adopt(e){return e instanceof n?e:new n((function(i){i(e)}))}(e.value).then(fulfilled,rejected)}step((a=a.apply(e,i||[])).next())}))},__generator=function(e,i){var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(l){return function step(o){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return h.label++,{value:o[1],done:!1};case 5:h.label++,a=o[1],o=[0];continue;case 7:o=h.ops.pop(),h.trys.pop();continue;default:if(!(s=h.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){h=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){h.label=o[1];break}if(6===o[0]&&h.label<s[1]){h.label=s[1],s=o;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(o);break}s[2]&&h.ops.pop(),h.trys.pop();continue}o=i.call(e,h)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},g=function(e){function PicaOrderPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.uiManager=i,n.key=h.ModuleName.PICAORDER_NAME,n}return f(PicaOrderPanel,e),PicaOrderPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.mBackground.clear(),this.mBackground.fillStyle(0,.5),this.mBackground.fillRoundedRect(-this.x,-this.y,a,s),this.content.x=.5*a,this.content.y=.5*s+10*this.dpr,this.mGameGrid.resetMask(),this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0,0,a,s),Phaser.Geom.Rectangle.Contains)},PicaOrderPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.setInteractive(),this.addListen()):this.preload())},PicaOrderPanel.prototype.addListen=function(){this.mInitialized&&this.closeBtn.on("pointerup",this.OnClosePanel,this)},PicaOrderPanel.prototype.removeListen=function(){this.mInitialized&&this.closeBtn.off("pointerup",this.OnClosePanel,this)},PicaOrderPanel.prototype.preload=function(){this.addAtlas(this.key,"order/order.png","order/order.json"),this.addAtlas(l.c.commonKey,l.d.commonUrl+".png",l.d.commonUrl+".json"),this.addAtlas(l.c.common2Key,l.d.common2Url+".png",l.d.common2Url+".json"),c.Logger.getInstance().debug("=====>> dpr",this.dpr),e.prototype.preload.call(this)},PicaOrderPanel.prototype.init=function(){var i=this;this.mBackground=this.scene.make.graphics(void 0,!1),this.add(this.mBackground);var n=295*this.dpr,a=454*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(n,a),this.add(this.content),this.bg=new s.NineSlicePatch(this.scene,0,0,n,a,l.c.commonKey,"bg",{left:30*this.dpr,top:30*this.dpr,bottom:30*this.dpr,right:30*this.dpr});var f=.5*-a;this.titlebg=this.scene.make.image({x:0,y:0,key:this.key,frame:"order_title_bg"}),this.titlebg.y=f-.5*this.titlebg.height+2*this.dpr;var g=this.scene.make.image({x:0,y:0,key:this.key,frame:"order_title"});g.y=this.titlebg.y+34*this.dpr,this.tilteName=this.scene.make.text({x:0,y:f-18*this.dpr,text:c.i18n.t("order.title"),style:{color:"#905B06",fontSize:15*this.dpr,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(.5,0),this.closeBtn=this.scene.make.image({x:.5*n-5*this.dpr,y:f+5*this.dpr,key:l.c.commonKey,frame:"close"}),this.tilteName.setStroke("#8F4300",2),this.tilteName.setResolution(this.dpr),this.closeBtn.setInteractive(),this.orderProgressPanel=new S(this.scene,252*this.dpr,45*this.dpr,this.key,this.dpr),this.orderProgressPanel.y=.5*-a+20*this.dpr,this.orderProgressPanel.setHandler(new c.Handler(this,this.onProgressHandler));var T={x:0,y:15*this.dpr,table:{width:n-40*this.dpr,height:a-110*this.dpr,columns:1,cellWidth:n-40*this.dpr,cellHeight:70*this.dpr,reuseCellContainer:!0,zoom:this.scale},scrollMode:0,clamplChildOY:!1,createCellContainerCallback:function(e,n){e.scene;var a=e.index,s=e.item;return null===n&&((n=new _(i.uiManager,i.key,i.dpr)).setHandler(new c.Handler(i,i.onSendHandler),new c.Handler(i,i.onRefreshOrderList),new c.Handler(i,i.onItemInfoTips)),n.on("pointerdown",i.onClickDownHandler,i)),n.setOrderData(s,a),n}};this.mGameGrid=new s.GameGridTable(this.scene,T),this.mGameGrid.layout(),this.goldImageValue=new m.ImageValue(this.scene,50*this.dpr,14*this.dpr,this.key,"iv_coin_s",this.dpr),this.goldImageValue.setFrameValue("",this.key,"order_precious"),this.goldImageValue.setTextStyle({color:"#144B99",fontSize:10*this.dpr,fontFamily:c.Font.DEFULT_FONT}),this.goldImageValue.setFontStyle("bold"),this.goldImageValue.y=.5*a-25*this.dpr,this.goldImageValue.visible=!1,this.orderProgressPanel.visible=!1,this.itemtips=new o.ItemInfoTips(this.scene,121*this.dpr,46*this.dpr,l.c.common2Key,"tips_bg",this.dpr),this.itemtips.setVisible(!1),this.content.add([this.bg,this.closeBtn,this.titlebg,g,this.tilteName,this.orderProgressPanel,this.mGameGrid,this.goldImageValue,this.itemtips]),this.resize(),e.prototype.init.call(this),this.render.renderEmitter(h.ModuleName.PICAORDER_NAME+"_questlist"),this.render.renderEmitter(h.ModuleName.PICAORDER_NAME+"_questprogress")},PicaOrderPanel.prototype.setOrderDataList=function(e){this.goldImageValue.visible=!0,this.orderProgressPanel.visible=!0;var i=e.orders;this.mGameGrid.setItems(i),this.royalOrderLimit=e.royalOrderLimit,this.goldImageValue.setText(this.royalOrderLimit.currentValue+"/"+this.royalOrderLimit.max),this.goldImageValue.resetSize(),this.goldImageValue.x=.5*this.content.width-.5*this.goldImageValue.width-20*this.dpr},PicaOrderPanel.prototype.setOrderProgress=function(e){this.progressData=e,this.orderProgressPanel.setProgressDatas(e)},PicaOrderPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaOrderPanel.prototype.OnClosePanel=function(){this.render.renderEmitter(h.ModuleName.PICAORDER_NAME+"_hide")},PicaOrderPanel.prototype.onSendHandler=function(e,i){var n=this;2===i?new o.AlertView(this.scene,this.uiManager).show({text:c.i18n.t("order.refreshtips"),title:c.i18n.t("order.refreshtitle"),oy:302*this.dpr*this.mWorld.uiScale,callback:function(){n.render.renderEmitter(h.ModuleName.PICAORDER_NAME+"_changeorder",{index:e,orderOperator:i})}}):this.render.renderEmitter(h.ModuleName.PICAORDER_NAME+"_changeorder",{index:e,orderOperator:i})},PicaOrderPanel.prototype.onProgressHandler=function(e,i){if(this.progressData){var n=i.progressData;n.received||(n.targetValue<=this.progressData.currentProgressValue?this.render.renderEmitter(h.ModuleName.PICAORDER_NAME+"_questreward",e):(this.itemtips.setItemData(n.rewards[0]),this.showItemTipsState(i)))}},PicaOrderPanel.prototype.onRefreshOrderList=function(){this.render.renderEmitter(h.ModuleName.PICAORDER_NAME+"_questlist")},PicaOrderPanel.prototype.onItemInfoTips=function(e){var i=e.itemData;this.itemtips.setItemData(i),this.showItemTipsState(e,10*this.dpr)},PicaOrderPanel.prototype.onClickDownHandler=function(){this.itemtips.setVisible(!1)},PicaOrderPanel.prototype.showItemTipsState=function(e,i){void 0===i&&(i=0);var n=this.itemtips.x,a=this.itemtips.y;this.setTipsPosition(e,i),n!==this.itemtips.x||a!==this.itemtips.y?this.itemtips.setVisible(!0):this.itemtips.setVisible(!this.itemtips.visible)},PicaOrderPanel.prototype.setTipsPosition=function(e,i){void 0===i&&(i=0);for(var n=e.x,a=e.y,s=e;s.parentContainer!==this.content;)n+=s.parentContainer.x,a+=s.parentContainer.y,s=s.parentContainer;n-.5*this.itemtips.width<.5*-this.content.width?this.itemtips.x=.5*this.itemtips.width-.5*this.content.width+20*this.dpr:n+.5*this.itemtips.width>.5*this.content.width?this.itemtips.x=.5*this.content.width-.5*this.itemtips.width-20*this.dpr:this.itemtips.x=n,this.itemtips.y=a-.5*this.itemtips.height+10*this.dpr+i},PicaOrderPanel}(o.BasePanel),_=function(e){function OrderItem(i,n,a){var h=e.call(this,i.scene)||this;h.materialItems=[],h.imageValues=[],h.orderRewards=[],h.key=n,h.dpr=a,h.mScene=i.scene,h.mRender=i.render,h.bg=h.mScene.make.image({key:n,frame:"order_ordinary_bg"}),h.add(h.bg),h.setSize(h.bg.width,h.bg.height),h.headbg=h.mScene.make.image({key:n,frame:"order_ordinary_head_bg"}),h.add(h.headbg),h.headbg.x=.5*-h.width+.5*h.headbg.width+4*a,h.headbg.y=5*a,h.headIcon=new o.DynamicImage(h.mScene,h.headbg.x,0),h.add(h.headIcon),h.refreshBtn=new s.Button(h.mScene,h.key,"order_delete_bg","order_delete_bg"),h.refreshBtn.x=.5*h.width-.5*h.refreshBtn.width,h.refreshBtn.y=.5*-h.height+.5*h.refreshBtn.height,h.add(h.refreshBtn);var f=h.mScene.make.image({key:n,frame:"order_delete"});return h.refreshBtn.add(f),h.sendBtn=new s.Button(h.mScene,l.c.commonKey,"order_green_butt","order_green_butt",c.i18n.t("order.send")),h.sendBtn.x=.5*h.width-.5*h.sendBtn.width-5*a,h.sendBtn.setTextStyle({fontSize:10*a}),h.add(h.sendBtn),h.sendTitle=h.mScene.make.text({x:.5*h.width-5*a,y:0,text:c.i18n.t("order.deliverying"),style:{color:"#ffffff",fontSize:13*a,fontFamily:c.Font.DEFULT_FONT}}),h.sendTitle.setOrigin(1,.5),h.add(h.sendTitle),h.acceleBtn=new s.Button(h.mScene,l.c.commonKey,"order_red_butt","order_red_butt",c.i18n.t("order.accele")),h.acceleBtn.x=20*a,h.acceleBtn.y=0,h.acceleBtn.setTextStyle({fontSize:11*a}),h.add(h.acceleBtn),h.acceleSpend=new m.ImageValue(h.mScene,30*a,10*a,h.key,"iv_coin_s",h.dpr),h.acceleSpend.x=h.acceleBtn.x,h.acceleSpend.y=h.acceleBtn.y-.5*h.acceleBtn.height-10*a,h.add(h.acceleSpend),h.calcuTime=new m.ImageValue(h.mScene,30*a,10*a,h.key,"iv_coin_s",a),h.add(h.calcuTime),h.calcuTime.setTextStyle({color:"#144B99",fontSize:10*h.dpr,fontFamily:c.Font.DEFULT_FONT}),h.calcuTime.setFontStyle("bold"),h.calcuTime.x=h.acceleBtn.x,h.calcuTime.y=h.acceleBtn.y+.5*h.acceleBtn.height+10*a,h.sendBtn.on(String(s.ClickEvent.Tap),h.onSendHandler,h),h.acceleBtn.on(String(s.ClickEvent.Tap),h.onAcceleHandler,h),h.refreshBtn.on(String(s.ClickEvent.Tap),h.onRefreshHandler,h),h.setInteractive(),h}return f(OrderItem,e),OrderItem.prototype.setHandler=function(e,i,n){this.sendHandler=e,this.tipsHandler=n,this.refreshHandler=i},OrderItem.prototype.setOrderData=function(e,i){if(this.orderData=e,this.index=i,this.hideAllElement(),this.bg.setFrame(5===e.questType?"order_precious_bg":"order_ordinary_bg"),4!==e.stage){var n=e.display.texturePath+"_"+this.dpr+"x.png",a=c.Url.getOsdRes(n);this.headIcon.load(a,this,(function(){})),this.headIcon.visible=!0}1===e.stage?(this.deliveryState(e),this.orderOperator=0):2===e.stage?this.deliveryingState(e):3===e.stage?(this.rewardState(e),this.orderOperator=3):4===e.stage&&(this.cooldownState(e),this.orderOperator=1)},OrderItem.prototype.destroy=function(i){this.timeID&&(clearTimeout(this.timeID),this.timeID=void 0),e.prototype.destroy.call(this,i)},OrderItem.prototype.getServiceTimestamp=function(){return this.mRender.mainPeer.now()},OrderItem.prototype.onAcceleHandler=function(){this.sendHandler&&this.sendHandler.runWith([this.index,this.orderOperator])},OrderItem.prototype.onSendHandler=function(){this.sendHandler&&this.sendHandler.runWith([this.index,this.orderOperator])},OrderItem.prototype.onRefreshHandler=function(){this.sendHandler&&this.sendHandler.runWith([this.index,2])},OrderItem.prototype.deliveryState=function(e){var i=e.questType;this.headbg.setFrame(5===i?"order_precious_head_bg":"order_ordinary_head_bg"),this.refreshBtn.visible=!0,this.refreshBtn.setInteractive(),this.refreshBtn.setFrameNormal(5===i?"order_precious_delete_bg":"order_delete_bg");for(var n=.5*-this.width+58*this.dpr,a=!0,s=0;s<e.targets.length;s++){var o=e.targets[s],h=void 0;s<this.materialItems.length?h=this.materialItems[s]:(h=new T(this.scene,this.key,this.dpr),this.add(h),this.materialItems.push(h),h.setHandler(this.tipsHandler),h.addListen()),h.setMaterialData(o),h.x=n+.5*h.width,n+=h.width+8*this.dpr,h.y=-10*this.dpr,h.visible=!0,a&&(a=o.count>=o.neededCount)}a?(this.sendBtn.setFrameNormal("order_green_butt"),this.sendBtn.setInteractive()):(this.sendBtn.setFrameNormal("order_gray_butt"),this.sendBtn.disInteractive()),this.sendBtn.visible=!0,this.sendBtn.setText(c.i18n.t("order.send")),this.sendBtn.setTextColor("#ffffff"),n=.5*-this.width+58*this.dpr;for(s=0;s<e.rewards.length;s++){var l=e.rewards[s];h=void 0;s<this.imageValues.length?h=this.imageValues[s]:(h=new m.DynamicImageValue(this.scene,30*this.dpr,20*this.dpr,this.key,"iv_coin_s",this.dpr),this.add(h),this.imageValues.push(h)),h.setOffset(0,this.dpr),h.setText(""+l.count),h.load(c.Url.getOsdRes(l.texturePath)),h.setTextStyle({color:5===i?"#ffffff":"#2154BD"});var f=h.textWidth+20*this.dpr;h.x=n+.5*f,n+=f+5*this.dpr,h.y=.5*this.height-.5*h.height+0*this.dpr,h.visible=!0}},OrderItem.prototype.deliveryingState=function(e){var i=this;this.deliverybg?this.deliverybg.visible=!0:(this.deliverybg=this.scene.make.image({key:this.key,frame:"order_transport"}),this.addAt(this.deliverybg,1),this.deliverybg.x=.5*this.width-.5*this.deliverybg.width-10*this.dpr),this.headbg.setFrame("order_ordinary_head_bg"),this.sendTitle.visible=!0,this.timeID&&(clearTimeout(this.timeID),this.timeID=void 0);var timeextu=function(){return __awaiter(i,void 0,void 0,(function(){var i,n,a,s,o;return __generator(this,(function(h){switch(h.label){case 0:return[4,this.getServiceTimestamp()];case 1:return i=h.sent(),(n=Math.ceil(e.deliveryDeadline-i/1e3))<0&&(n=0),a=Math.floor(n/60),o=(a<10?"0"+a:a+"")+":"+((s=n%60)<10?"0"+s:s+""),this.calcuTime.visible=!0,this.calcuTime.setFrameValue(o,this.key,"order_time"),this.calcuTime.resetSize(),this.calcuTime.x=.5*this.width-.5*this.calcuTime.width-10*this.dpr,this.calcuTime.y=.5*this.height-.5*this.calcuTime.height-5*this.dpr,n>0?this.timeID=setTimeout((function(){timeextu()}),1e3):(this.timeID&&this.refreshHandler&&this.refreshHandler.run(),this.timeID=void 0),[2]}}))}))};timeextu();for(var n=.5*-this.width+60*this.dpr,a=0;a<e.rewards.length;a++){var s=e.rewards[a],o=void 0;a<this.imageValues.length?o=this.imageValues[a]:(o=new m.DynamicImageValue(this.scene,30*this.dpr,20*this.dpr,this.key,"iv_coin_s",this.dpr),this.add(o),this.imageValues.push(o)),o.setText(""+s.count),o.load(c.Url.getOsdRes(s.texturePath)),o.setTextStyle({color:"#2154BD"});var h=o.textWidth+20*this.dpr;o.x=n+.5*h,n+=h+5*this.dpr,o.y=.5*this.height-.5*o.height+0*this.dpr,o.visible=!0}},OrderItem.prototype.rewardState=function(e){this.headbg.setFrame("order_ordinary_head_bg"),this.sendBtn.visible=!0,this.sendBtn.setInteractive(),this.sendBtn.setFrameNormal("order_yellow_butt"),this.sendBtn.setText(c.i18n.t("order.receive")),this.sendBtn.setTextColor("#9A6600");for(var i=.5*-this.width+60*this.dpr,n=0;n<e.rewards.length;n++){var a=e.rewards[n],s=void 0;n<this.orderRewards.length?s=this.orderRewards[n]:(s=new x(this.scene,this.key,this.dpr),this.add(s),this.orderRewards.push(s)),s.x=i+.5*s.width,i+=s.width+20*this.dpr,s.y=-6*this.dpr,s.visible=!0,s.setItemData(a)}},OrderItem.prototype.cooldownState=function(e){var i=this;this.headbg.setFrame("order_unknown_head"),this.headIcon.visible=!1,this.acceleBtn.visible=!0,this.acceleBtn.setInteractive(),this.acceleSpend.visible=!0,this.calcuTime.visible=!0,this.calcuTime.y=this.acceleBtn.y+.5*this.acceleBtn.height+10*this.dpr,this.timeID&&(clearTimeout(this.timeID),this.timeID=void 0);var timeextu=function(){return __awaiter(i,void 0,void 0,(function(){var i,n,a,s,o;return __generator(this,(function(h){switch(h.label){case 0:return[4,this.getServiceTimestamp()];case 1:return i=h.sent(),(n=Math.ceil(e.refreshDeadline-i/1e3))<0&&(n=0),a=Math.floor(n/60),o=(a<10?"0"+a:a+"")+":"+((s=n%60)<10?"0"+s:s+""),this.calcuTime.visible=!0,this.calcuTime.setFrameValue(o,this.key,"order_time"),this.calcuTime.resetSize(),this.calcuTime.x=this.acceleBtn.x,this.acceleSpend.setFrameValue(a+"",this.key,"iv_diamond_s"),n>0?this.timeID=setTimeout((function(){timeextu()}),1e3):(this.timeID&&this.refreshHandler&&this.refreshHandler.run(),this.timeID=void 0),[2]}}))}))};timeextu()},OrderItem.prototype.getIconName=function(e){var i=e,n=i.lastIndexOf("/"),a=i.lastIndexOf(".");return i.slice(n+1,a)},OrderItem.prototype.hideAllElement=function(){this.refreshBtn.visible=!1,this.refreshBtn.disInteractive(),this.sendBtn.visible=!1,this.sendBtn.disInteractive(),this.sendTitle.visible=!1,this.acceleBtn.visible=!1,this.acceleBtn.disInteractive(),this.acceleSpend.visible=!1,this.calcuTime.visible=!1,this.deliverybg&&(this.deliverybg.visible=!1);for(var e=0,i=this.materialItems;e<i.length;e++){(h=i[e]).visible=!1,h.removeListen()}for(var n=0,a=this.orderRewards;n<a.length;n++){(h=a[n]).visible=!1}for(var s=0,o=this.imageValues;s<o.length;s++){var h;(h=o[s]).visible=!1}this.timeID&&(clearTimeout(this.timeID),this.timeID=void 0)},OrderItem}(Phaser.GameObjects.Container),T=function(e){function MaterialItem(i,n,a){var h=e.call(this,i)||this;return h.key=n,h.dpr=a,h.bg=i.make.image({key:n,frame:"order_demand_icon"}),h.setSize(h.bg.width,h.bg.height),h.icon=new o.DynamicImage(i,0,-5*a),h.icon.setSize(15*a,15*a),h.value=new s.BBCodeText(h.scene,0,.5*h.height-10*a,"60/30",{color:"#0",fontSize:8*h.dpr,fontFamily:c.Font.DEFULT_FONT}).setOrigin(.5),h.add([h.bg,h.icon,h.value]),h.setInteractive(),h}return f(MaterialItem,e),MaterialItem.prototype.setMaterialData=function(e){var i=this;this.itemData=e;var n=c.Url.getOsdRes(e.texturePath);this.icon.load(n,this,(function(){i.icon.scale=1,i.icon.scaleX=15*i.dpr/i.icon.displayWidth,i.icon.scaleY=i.icon.scaleX})),this.value.text=e.count+"/"+e.neededCount},MaterialItem.prototype.setHandler=function(e){this.tipsHandler=e},MaterialItem.prototype.addListen=function(){this.on("pointerup",this.onClickHandler,this)},MaterialItem.prototype.removeListen=function(){this.off("pointerdown",this.onClickHandler,this)},MaterialItem.prototype.destroy=function(i){this.removeListen(),e.prototype.destroy.call(this,i)},MaterialItem.prototype.onClickHandler=function(){this.tipsHandler&&this.tipsHandler.runWith(this)},MaterialItem}(Phaser.GameObjects.Container),x=function(e){function OrderRewardItem(i,n,a){var s=e.call(this,i)||this;return s.key=n,s.dpr=a,s.bg=i.make.image({key:n,frame:"order_reward"}),s.setSize(s.bg.width,s.bg.height),s.icon=new o.DynamicImage(s.scene,0,0),s.icon.scale=.8*a,s.add([s.bg,s.icon]),s}return f(OrderRewardItem,e),OrderRewardItem.prototype.setItemData=function(e){this.imageValue=new m.DynamicImageValue(this.scene,30*this.dpr,20*this.dpr,this.key,void 0,this.dpr),this.imageValue.setText(""+e.count),this.imageValue.load(c.Url.getOsdRes(e.texturePath)),this.imageValue.x=3*this.dpr,this.imageValue.y=this.height-.5*this.imageValue.height+6*this.dpr,this.imageValue.setOffset(0,this.dpr),this.imageValue.setTextStyle({color:"#2154BD"}),this.add([this.imageValue]),this.icon.load(c.Url.getOsdRes(e.texturePath))},OrderRewardItem.prototype.getIconName=function(e){var i=e,n=i.lastIndexOf("/"),a=i.lastIndexOf(".");return i.slice(n+1,a)},OrderRewardItem}(Phaser.GameObjects.Container),S=function(e){function OrderProgressPanel(i,n,a,o,h){var l=e.call(this,i)||this;l.progressItems=[],l.setSize(n,a),l.dpr=h,l.key=o;var c={x:0*h/2,y:15*h,width:251*h,height:11*h,background:{x:0,y:0,width:251*h,height:11*h,config:{top:0*h,left:7*h,right:7*h,bottom:0*h},key:o,frame:"order_progress_bottom"},bar:{x:0,y:0,width:251*h,height:11*h,config:{top:0*h,left:7*h,right:7*h,bottom:0*h},key:o,frame:"order_progress_top"},dpr:h,textConfig:void 0};return l.progress=new s.ProgressBar(i,c),l.add(l.progress),l}return f(OrderProgressPanel,e),OrderProgressPanel.prototype.setProgressDatas=function(e){for(var i=e.steps.length,n=100/i,a=0,s=0,o=!1,h=0;h<i;h++){var l=e.steps[h],c=void 0;h<this.progressItems.length?c=this.progressItems[h]:(c=new j(this.scene,0,0,this.key,this.dpr),this.add(c),this.progressItems.push(c),c.setHandler(this.receiveHandler)),c.x=.5*-this.width+this.width*(h+1)/i-16*this.dpr,c.y=15*this.dpr,c.setItemData(l,h,e.currentProgressValue),e.currentProgressValue>=l.targetValue?s+=n:o||(s+=n*(e.currentProgressValue-a)/(l.targetValue-a),o=!0),a=l.targetValue}this.progress.setProgress(s,100)},OrderProgressPanel.prototype.setHandler=function(e){this.receiveHandler=e},OrderProgressPanel}(Phaser.GameObjects.Container),j=function(e){function OrderProgressItem(i,n,a,h,l){var m=e.call(this,i,n,a)||this;return m.dpr=l,m.key=h,m.bg=new s.Button(i,h,"order_progress_unfinished","order_progress_unfinished"),m.icon=new o.DynamicImage(i,0,0),m.text=i.make.text({x:0,y:.5*m.bg.height+10*l,text:"10",style:{color:"#2154BD",fontSize:12*l,fontFamily:c.Font.DEFULT_FONT}}),m.text.setFontStyle("bold"),m.text.setOrigin(.5),m.finishIcon=i.make.image({key:h,frame:"order_progress_ok"}),m.balckgraphic=i.make.graphics(void 0,!1),m.balckgraphic.clear(),m.balckgraphic.fillStyle(0,.5),m.balckgraphic.fillCircle(0,0,16*l),m.add([m.bg,m.icon,m.text,m.balckgraphic,m.finishIcon]),m.finishIcon.visible=!1,m}return f(OrderProgressItem,e),OrderProgressItem.prototype.setItemData=function(e,i,n){var a=this;if(this.progressData=e,this.index=i,this.text.text=e.targetValue+"",e.rewards){var o=c.Url.getOsdRes(e.rewards[0].texturePath);this.icon.load(o,this,(function(){a.icon.scale=1,a.icon.scaleY=29*a.dpr/a.icon.displayHeight,a.icon.scaleX=a.icon.scaleY}))}this.finishIcon.visible=!1,this.balckgraphic.visible=!1,e.targetValue<=n?(this.bg.setFrameNormal("order_progress_finished","order_progress_finished"),e.received&&(this.finishIcon.visible=!0,this.balckgraphic.visible=!0),this.text.setColor("#2154BD")):(this.bg.setFrameNormal("order_progress_unfinished","order_progress_unfinished"),this.text.setColor("#989898")),e.received?this.bg.off(String(s.ClickEvent.Tap),this.onReceiveHandler,this):(this.bg.off(String(s.ClickEvent.Tap),this.onReceiveHandler,this),this.bg.on(String(s.ClickEvent.Tap),this.onReceiveHandler,this))},OrderProgressItem.prototype.setHandler=function(e){this.receiveHandler=e},OrderProgressItem.prototype.onReceiveHandler=function(){this.receiveHandler&&this.receiveHandler.runWith([this.index,this])},OrderProgressItem}(Phaser.GameObjects.Container)},function(e,i,n){"use strict";n.r(i),n.d(i,"PicaWorkPanel",(function(){return g}));var a,s=n(788),o=n(789),h=n(2),l=n(790),c=n(0),m=n(791),f=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),g=function(e){function PicaWorkPanel(i){var n=e.call(this,i.scene,i.render)||this;return n.imageValues=[],n.curProgress=0,n.isWorking=!1,n.moneyAniKey="workemoeny",n.starAniKey="workstar",n.canWork=!1,n.key=h.ModuleName.PICAWORK_NAME,n}return f(PicaWorkPanel,e),PicaWorkPanel.prototype.resize=function(i,n){var a=this.scaleWidth,s=this.scaleHeight;e.prototype.resize.call(this,a,s),this.setSize(a,s),this.content.x=.5*a,this.content.y=s-.5*this.content.height,this.content.setInteractive()},PicaWorkPanel.prototype.show=function(e){this.mShowData=e,this.mPreLoad||(this.mInitialized?this.mShow||(this.soundGroup&&this.soundGroup.open&&this.playSound(this.soundGroup.open),!this.mTweening&&this.mTweenBoo?this.showTween(!0):this.mShow=!0,this.addListen(),this.render.renderEmitter(this.key+"_initialized")):this.preload())},PicaWorkPanel.prototype.addListen=function(){this.mInitialized&&this.closeBtn.on("pointerup",this.OnClosePanel,this)},PicaWorkPanel.prototype.removeListen=function(){this.mInitialized&&this.closeBtn.off("pointerup",this.OnClosePanel,this)},PicaWorkPanel.prototype.destroy=function(){e.prototype.destroy.call(this)},PicaWorkPanel.prototype.preload=function(){this.addAtlas(this.key,"work/work.png","work/work.json"),this.addAtlas(l.c.commonKey,l.d.textureUrl(l.d.commonUrl),l.d.jsonUrl(l.d.commonUrl)),this.addAtlas(l.c.common2Key,l.d.textureUrl(l.d.common2Url),l.d.jsonUrl(l.d.common2Url)),e.prototype.preload.call(this)},PicaWorkPanel.prototype.init=function(){var i=this.scaleWidth,n=153*this.dpr;this.content=this.scene.make.container(void 0,!1),this.content.setSize(i,n),this.add(this.content),this.bg=this.scene.make.image({key:this.key,frame:"work_bg"}),this.bg.y=.5*n-.5*this.bg.height,this.headIcon=new o.DynamicImage(this.scene,0,0,this.key,"work_npc"),this.headIcon.x=.5*-i+65*this.dpr,this.headIcon.y=-5*this.dpr,this.headIcon.scale=this.dpr,this.headIcon.visible=!1;var a=new s.NineSlicePatch(this.scene,0,0,95*this.dpr,24*this.dpr,this.key,"work_name",{left:14*this.dpr,top:0*this.dpr,bottom:0*this.dpr,right:14*this.dpr});a.x=.5*-i+.5*a.width+15*this.dpr,a.y=35*this.dpr,this.titleName=this.scene.make.text({x:a.x,y:a.y,text:"这是额二比大厨师",style:{color:"#FFE11A",fontSize:11*this.dpr,fontFamily:c.Font.DEFULT_FONT}}).setOrigin(.5),this.salaryLabel=this.scene.make.text({x:.5*-i+20*this.dpr,y:this.bg.y+7*this.dpr,text:c.i18n.t("work.salary")+":",style:c.UIHelper.whiteStyle(this.dpr,11)}),this.salaryLabel.setOrigin(0,.5),this.salaryvalue=new m.ImageValue(this.scene,60*this.dpr,20*this.dpr,l.c.commonKey,"iv_coin",this.dpr),this.salaryvalue.setOffset(-this.dpr,0),this.salaryvalue.setTextStyle({color:"#FFEA00"}),this.salaryvalue.setLayout(1),this.salaryvalue.x=this.salaryLabel.x+this.salaryLabel.width+.5*this.salaryvalue.width+3*this.dpr,this.salaryvalue.y=this.salaryLabel.y,this.workbutton=new T(this.scene,132*this.dpr,35*this.dpr,this.key,"progress_top",c.i18n.t("work.title"),this.dpr),this.workbutton.x=30*this.dpr,this.workbutton.y=5*this.dpr,this.workbutton.on(s.ClickEvent.Tap,this.onSendHandler,this),this.starSprite=this.createSprite(this.key,this.starAniKey,"star",[1,30],24),this.moneySprite=this.createSprite(this.key,this.moneyAniKey,"workover",[1,10],24),this.starSprite.x=this.workbutton.x,this.starSprite.y=this.workbutton.y,this.moneySprite.x=this.starSprite.x,this.moneySprite.y=this.starSprite.y,this.closeBtn=new s.Button(this.scene,this.key,"close","close"),this.closeBtn.y=this.bg.y+2*this.dpr,this.closeBtn.x=.5*this.content.width-.5*this.closeBtn.width-10*this.dpr,this.itemtips=new o.ItemInfoTips(this.scene,150*this.dpr,46*this.dpr,l.c.common2Key,"tips_bg",this.dpr),this.itemtips.setVisible(!1),this.content.add([this.headIcon,this.bg,this.closeBtn,a,this.titleName,this.salaryLabel,this.salaryvalue,this.workbutton,this.starSprite,this.moneySprite,this.closeBtn,this.itemtips]),this.resize(),e.prototype.init.call(this),this.render.renderEmitter(this.key+"_questlist")},PicaWorkPanel.prototype.setWorkData=function(e){this.setJobData(e),this.workbutton.setProgressDatas(0,100)},PicaWorkPanel.prototype.setWorkChance=function(e){this.canWork=e},PicaWorkPanel.prototype.setJobData=function(e){this.jobData=e,this.headIcon.visible=!0,this.titleName.text=e.name;var i="0";if(e.rewards){var n=e.rewards[0].countRange;i=n[0]+"~"+n[1]}this.salaryvalue.setText(i);for(var a=0,s=this.imageValues;a<s.length;a++){(m=s[a]).visible=!1}for(var o=e.requirements,h=this.salaryvalue.x+.5*this.salaryvalue.width+20*this.dpr,l=0;l<o.length;l++){var m=void 0,f=o[l];l<this.imageValues.length?m=this.imageValues[l]:(m=new _(this.scene,35*this.dpr,15*this.dpr,this.key,this.dpr),this.content.add(m),this.imageValues.push(m),m.setHandler(new c.Handler(this,this.onItemInfoTips)));var g=c.Url.getOsdRes(f.texturePath);m.setUrlValue(g,f.count),m.setTextStyle({color:f.count>=f.count?"#000000":"#E71313"}),m.setImageData(f),m.visible=!0,m.x=h+.5*m.width,m.y=this.salaryLabel.y,m.visible=!0,h+=m.width+20*this.dpr}},PicaWorkPanel.prototype.createSprite=function(e,i,n,a,s,o,h){void 0===s&&(s=30),void 0===o&&(o=0);var l=this.scene.make.sprite({key:e,frame:n+"1"});l.visible=!1;var c=this.scene.anims.create({key:i,frames:this.scene.anims.generateFrameNames(e,{prefix:n+"",start:a[0],end:a[1]}),frameRate:s,repeat:o});return c.removeAllListeners(),c.on(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){l.visible=!1,h&&h.run()}),this),c.on(Phaser.Animations.Events.ANIMATION_START,(function(){l.visible=!0}),this),l},PicaWorkPanel.prototype.calculateTimeout=function(){var e=this;this.isWorking=!0,this.interTimeerID=setTimeout((function(){e.curProgress+=.1,e.workbutton.setProgressDatas(e.curProgress,100),e.curProgress<100?e.calculateTimeout():(e.isWorking=!1,e.curProgress=0,e.workbutton.setProgressDatas(e.curProgress,100),e.render.renderEmitter(e.key+"_questwork",e.jobData.id),e.interTimeerID=void 0,e.moneySprite.play(e.moneyAniKey))}),20)},PicaWorkPanel.prototype.OnClosePanel=function(){this.interTimeerID&&clearTimeout(this.interTimeerID),this.render.renderEmitter(this.key+"_hide")},PicaWorkPanel.prototype.onSendHandler=function(e){if(this.canWork)this.curProgress+=3,this.isWorking||this.calculateTimeout(),this.starSprite.play(this.starAniKey,!0);else{var i={text:[{text:c.i18n.t("work.enoughtips"),node:void 0}]};this.render.mainPeer.showMediator(h.ModuleName.PICANOTICE_NAME,!0,i)}},PicaWorkPanel.prototype.onItemInfoTips=function(e){var i=e.imageData;this.itemtips.visible=!0,this.itemtips.setTipsPosition(e,this),this.itemtips.setText(this.getDesText(i))},PicaWorkPanel.prototype.getDesText=function(e){return e||(e={sellingPrice:!0,tradable:!1}),c.i18n.t("work.attri",{name:""+e.name,value:e.neededCount})},PicaWorkPanel}(o.BasePanel),_=function(e){function PointerImageValue(i,n,a,s,o){var h=e.call(this,i,n,a,s,void 0,o)||this;return h.addListen(),h}return f(PointerImageValue,e),PointerImageValue.prototype.setImageData=function(e){this.imageData=e},PointerImageValue.prototype.setUrlValue=function(e,i){var n=this;this.value.text=i,this.icon.load(e,this,(function(){n.icon.scale=1,n.icon.scaleY=14*n.dpr/n.icon.displayHeight,n.icon.scaleX=n.icon.scaleY,n.value.x=n.icon.x+.5*n.icon.displayWidth+10*n.dpr,n.resetSize()}))},PointerImageValue.prototype.addListen=function(){this.setInteractive(),this.on("pointerdown",this.onClickDownHandler,this),this.scene.input.on("pointerup",this.onClickUpHandler,this)},PointerImageValue.prototype.removeListen=function(){this.disableInteractive(),this.off("pointerdown",this.onClickDownHandler,this),this.scene.input.off("pointerup",this.onClickUpHandler,this)},PointerImageValue.prototype.destroy=function(i){this.removeListen(),e.prototype.destroy.call(this,i)},PointerImageValue.prototype.setHandler=function(e){this.tipsHandler=e},PointerImageValue.prototype.create=function(){this.icon=new o.DynamicImage(this.scene,0,0),this.value=this.scene.make.text({x:0,y:this.offset.y,text:"10",style:{color:"#ffffff",fontSize:11*this.dpr,fontFamily:c.Font.DEFULT_FONT}}),this.value.setOrigin(0,.5),this.add([this.icon,this.value])},PointerImageValue.prototype.onClickDownHandler=function(){new Phaser.Geom.Point;this.tipsHandler&&this.tipsHandler.runWith([this,!0])},PointerImageValue.prototype.onClickUpHandler=function(){this.tipsHandler&&this.tipsHandler.runWith([this,!1])},PointerImageValue}(m.ImageValue),T=function(e){function ProgressItem(i,n,a,s,h,l,m){var f=e.call(this,i,0,0)||this;return f.setSize(n,a),f.dpr=m,f.key=s,f.progress=new o.ProgressMaskBar(i,s,"progress_bottom","progress_top"),f.add(f.progress),f.title=i.make.text({x:0,y:0,text:l,style:{color:"#512103",fontSize:14*m,fontFamily:c.Font.DEFULT_FONT}}),f.title.setFontStyle("bold"),f.title.setOrigin(.5),f.add(f.title),f.enable=!0,f.mDuration=35,f}return f(ProgressItem,e),ProgressItem.prototype.setProgressDatas=function(e,i){this.progress.setProgress(e,i)},ProgressItem}(o.ButtonEventDispatcher)},function(e,i,n){"use strict";n.r(i),n.d(i,"RoomGuidePanel",(function(){return l}));var a,s=n(789),o=n(0),h=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),l=function(e){function RoomGuidePanel(i){return e.call(this,1589349967,i)||this}return h(RoomGuidePanel,e),RoomGuidePanel.prototype.step1=function(e){this.guideEffect.createGuideEffect(this.getGuidePosition()),this.mPlayScene.input.on("gameobjectup",this.gameObjectUpHandler,this)},RoomGuidePanel.prototype.getGuidePosition=function(){var e=this.render.config.scale_ratio,i=o.Tool.getPosByScenes(this.mPlayScene,{x:this.mElement.x,y:this.mElement.y});return{x:i.x-5*e,y:i.y+95*e}},RoomGuidePanel}(s.BasePlaySceneGuide)},function(e,i,n){"use strict";n.r(i),n.d(i,"SofaGuidePanel",(function(){return h}));var a,s=n(789),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),h=function(e){function SofaGuidePanel(i){return e.call(this,1589349967,i)||this}return o(SofaGuidePanel,e),SofaGuidePanel.prototype.step1=function(e){var i=this.render.config.scale_ratio,n={x:e.x-10*i,y:e.y+70*i};this.guideEffect.createGuideEffect(n),this.mPlayScene.input.on("gameobjectdown",this.gameObjectUpHandler,this)},SofaGuidePanel}(s.BasePlaySceneGuide)},function(e,i,n){"use strict";n.d(i,"a",(function(){return h})),n.d(i,"b",(function(){return g})),n.d(i,"c",(function(){return x}));var a,s=n(1),o=n(0),h=function(){function AnimationModel(e){var i=e.baseLoc.split(",");this.mNode=e.node,this.id=e.node.id,this.name=e.node.name,this.frameName=e.frameName,!e.frameName||this.frameName.length,this.loop=e.loop,e.loop,e.frameRate,e.originPoint,e.baseLoc,this.frameRate=e.frameRate,this.baseLoc=new o.LogicPoint(parseInt(i[0],10),parseInt(i[1],10));var n=e.originPoint;this.originPoint=new o.LogicPoint(n[0],n[1]),"string"==typeof e.collisionArea?this.collisionArea=this.stringToArray(e.collisionArea,",","&")||[[0]]:this.collisionArea=e.collisionArea||[[0]],"string"==typeof e.walkableArea?this.walkableArea=this.stringToArray(e.walkableArea,",","&")||[[0]]:this.walkableArea=e.walkableArea||[[0]],this.interactiveArea=e.interactiveArea,this.changeLayer(e.layer),this.mountLayer=e.mountLayer}return AnimationModel.prototype.changeLayer=function(e){this.layer=e,this.layer.length<1&&(this.layer=[{frameName:this.frameName,offsetLoc:this.baseLoc}])},AnimationModel.prototype.createProtocolObject=function(){var e=s.op_gameconfig_01.AnimationData.create();e.node=this.mNode,e.baseLoc=this.baseLoc.x+","+this.baseLoc.y,e.node.name=this.name,e.loop=this.loop,e.frameRate=this.frameRate,e.frameName=this.frameName,e.originPoint=[this.originPoint.x,this.originPoint.y],e.walkOriginPoint=[this.originPoint.x,this.originPoint.y],e.walkableArea=this.arrayToString(this.walkableArea,",","&"),e.collisionArea=this.arrayToString(this.collisionArea,",","&"),e.interactiveArea=this.interactiveArea;for(var i=[],n=0,a=this.layer;n<a.length;n++){var o=a[n];i.push(s.op_gameconfig_01.AnimationLayer.create(o))}return e.layer=i,this.changeLayer(e.layer),e.mountLayer=this.mountLayer,e},AnimationModel.prototype.stringToArray=function(e,i,n){if(e){for(var a=[],s=0,o=e.split(n);s<o.length;s++){var h=o[s].split(i);a.push(h.map((function(e){return parseInt(e,10)})))}return a}},AnimationModel.prototype.arrayToString=function(e,i,n){if(!e)return"";for(var a=[],s=0,o=e;s<o.length;s++){var h=o[s];a.push(h.join(i))}return a.join(n)},AnimationModel}(),l=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}),c=function(e){function BaseAnimation(i){var n=e.call(this,i)||this;return n.loaded=!1,n.isPlaying=!1,n.loop=!1,n}return l(BaseAnimation,e),BaseAnimation.prototype.load=function(e,i,n){this.destroy(),this.resName=e||i,this.curAniName=e,this.textureUrl=i},BaseAnimation.prototype.play=function(e){e&&(this.curAniName=e),this.isPlaying=!0},BaseAnimation.prototype.destroy=function(){this.animUrlData&&this.animUrlData.dispose(),this.animUrlData=void 0,this.curAniName=void 0,this.isPlaying=!1,this.loaded=!1,this.loop=!1},BaseAnimation.prototype.onLoadComplete=function(e,i,n){},BaseAnimation}(Phaser.GameObjects.Container),m=function(){function AnimationUrlData(){}return AnimationUrlData.prototype.setData=function(e,i,n,a,s){void 0===s&&(s=".json"),this.resName=e,this.pngUrl=i,this.jsonUrl=n,this.boneUrl=a,this.responseType=".dbbin"===s?"arraybuffer":null,this.boneXhrSettings=this.responseType?{responseType:"arraybuffer"}:null},AnimationUrlData.prototype.setDisplayData=function(e,i,n){void 0===n&&(n=".json"),this.pngUrl=e,this.jsonUrl=i,this.responseType=".dbbin"===n?"arraybuffer":null,this.boneXhrSettings=this.responseType?{responseType:"arraybuffer"}:null},AnimationUrlData.prototype.dispose=function(){this.textureXhrSettings=null,this.atlasXhrSettings=null,this.boneXhrSettings=null},AnimationUrlData}(),f=function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),g=function(e){function BubbleAnimation(i){return e.call(this,i)||this}return f(BubbleAnimation,e),BubbleAnimation.prototype.load=function(i,n,a){e.prototype.load.call(this,i,n,a),this.animUrlData=new m,i?this.animUrlData.setData(this.resName,this.textureUrl,a):this.animUrlData.setDisplayData(n,a),this.scene.load.image(this.resName,this.animUrlData.pngUrl),this.scene.load.image(this.animUrlData.jsonUrl,this.animUrlData.jsonUrl),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.onLoadComplete,this),this.scene.load.start()},BubbleAnimation.prototype.play=function(i){e.prototype.play.call(this,i),this.frameAnim&&(this.setScale(.2,.2),this.y=50,this.scene.tweens.add({targets:this,y:{value:-100,duration:300,ease:"Bounce.easeOut"},scaleX:{value:1,duration:300,ease:"Bounce.easeOut"},scaleY:{value:1,duration:300,ease:"Bounce.easeOut"}}))},BubbleAnimation.prototype.destroy=function(){e.prototype.destroy.call(this),this.frameAnim&&this.frameAnim.destroy(),this.bubblebg&&this.bubblebg.destroy(),this.frameAnim=null,this.bubblebg=null},BubbleAnimation.prototype.onLoadComplete=function(e,i,n){this.loaded=!0,this.bubblebg=this.scene.add.image(0,0,this.resName),this.frameAnim=this.scene.add.image(0,0,this.animUrlData.jsonUrl),this.add([this.bubblebg,this.frameAnim]),this.isPlaying&&this.play()},BubbleAnimation}(c),_=function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}(),T=(function(e){function DragonbonesAnimation(i){return e.call(this,i)||this}_(DragonbonesAnimation,e),DragonbonesAnimation.prototype.load=function(i,n,a,s){e.prototype.load.call(this,i,n,a),this.animUrlData=new m,i?this.animUrlData.setData(this.resName,this.textureUrl,s,".dbbin"):this.animUrlData.setDisplayData(n,a),this.scene.load.dragonbone(this.resName,this.animUrlData.pngUrl,this.animUrlData.jsonUrl,this.animUrlData.boneUrl,this.animUrlData.textureXhrSettings,this.animUrlData.atlasXhrSettings,this.animUrlData.boneXhrSettings),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.onLoadComplete,this),this.scene.load.start()},DragonbonesAnimation.prototype.play=function(i){e.prototype.play.call(this,i),this.armatureDisplay&&this.armatureDisplay.animation.play(i)},DragonbonesAnimation.prototype.destroy=function(){e.prototype.destroy.call(this),this.armatureDisplay&&this.armatureDisplay.destroy(),this.armatureDisplay=null},DragonbonesAnimation.prototype.onLoadComplete=function(e,i,n){this.loaded=!0,this.armatureDisplay=this.scene.add.armature("mecha_1002_101d",this.resName),this.add(this.armatureDisplay),this.isPlaying&&this.play(this.curAniName)}}(c),function(){var extendStatics=function(e,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)};return function(e,i){function __(){this.constructor=e}extendStatics(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}()),x=function(e){function FrameAnimation(i){return e.call(this,i)||this}return T(FrameAnimation,e),FrameAnimation.prototype.load=function(i,n,a,s){e.prototype.load.call(this,i,n,a),this.complHandler=s,this.animUrlData=new m,i?this.animUrlData.setData(this.resName,n,a):this.animUrlData.setDisplayData(n,a),this.scene.textures.exists(this.resName)?this.onLoadComplete():(this.scene.load.atlas(this.resName,this.animUrlData.pngUrl,this.animUrlData.jsonUrl,this.animUrlData.textureXhrSettings,this.animUrlData.atlasXhrSettings),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.onLoadComplete,this),this.scene.load.start())},FrameAnimation.prototype.play=function(i){e.prototype.play.call(this,i),this.frameAnim&&this.frameAnim.play(this.curAniName)},FrameAnimation.prototype.destroy=function(){e.prototype.destroy.call(this),this.frameAnim&&this.frameAnim.destroy(),this.frameAnim=null,this.complHandler=void 0},FrameAnimation.prototype.onLoadComplete=function(e,i,n){this.loaded=!0,this.scene.anims.exists(this.curAniName)||this.scene.anims.create({key:this.curAniName,frames:this.scene.anims.generateFrameNames(this.resName),repeat:-1}),this.frameAnim||(this.frameAnim=this.scene.add.sprite(0,0,this.resName),this.add(this.frameAnim)),0===this.width?(this.setSize(this.frameAnim.width,this.frameAnim.height),this.scale=1):this.scale=this.width/this.frameAnim.displayWidth,this.isPlaying||this.play(this.curAniName),this.complHandler&&this.complHandler.run()},FrameAnimation}(c)},function(e,i,n){"use strict";n.d(i,"a",(function(){return s.a}));var a,s=n(889),o=(a=function(e,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(e,i)},function(e,i){function __(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)});(function(e){function EditorCamerasManager(){return null!==e&&e.apply(this,arguments)||this}o(EditorCamerasManager,e),EditorCamerasManager.prototype.centerCameas=function(){},EditorCamerasManager.prototype.offsetScroll=function(e,i){if(this.mMain)for(var n=0,a=this.mCameras;n<a.length;n++){var s=a[n];s.scrollX+=e/this.zoom,s.scrollY+=i/this.zoom}},EditorCamerasManager.prototype.syncCameraScroll=function(){}})(s.a),n(74)},function(e,i,n){var a={"./":791,"./ FurnitureGuide/FurnitureGuidePanel":1074,"./ FurnitureGuide/FurnitureGuidePanel.ts":1074,"./Activity/ActivityPanel":935,"./Activity/ActivityPanel.ts":935,"./ActivityGuide/ActivityGuidePanel":1075,"./ActivityGuide/ActivityGuidePanel.ts":1075,"./BagGuide/BagGuidePanel":942,"./BagGuide/BagGuidePanel.ts":942,"./Bottom/BottomPanel":943,"./Bottom/BottomPanel.ts":943,"./Bubble/InteractionBubbleCell":837,"./Bubble/InteractionBubbleCell.ts":837,"./Bubble/InteractionBubbleContainer":838,"./Bubble/InteractionBubbleContainer.ts":838,"./Bubble/InteractiveBubblePanel":944,"./Bubble/InteractiveBubblePanel.ts":944,"./CharacterInfo/CharacterAttributePanel":830,"./CharacterInfo/CharacterAttributePanel.ts":830,"./CharacterInfo/CharacterEditorPanel":831,"./CharacterInfo/CharacterEditorPanel.ts":831,"./CharacterInfo/CharacterInfoPanel":936,"./CharacterInfo/CharacterInfoPanel.ts":936,"./CharacterInfo/GraphicsProgressBar":937,"./CharacterInfo/GraphicsProgressBar.ts":937,"./Chat/ChatPanel":1092,"./Chat/ChatPanel.ts":1092,"./Components":793,"./Components/":793,"./Components/Item.button":829,"./Components/Item.button.ts":829,"./Components/MoreButtonPanel":933,"./Components/MoreButtonPanel.ts":933,"./Components/back.text.button":926,"./Components/back.text.button.ts":926,"./Components/common.background":930,"./Components/common.background.ts":930,"./Components/detail.bubble":928,"./Components/detail.bubble.ts":928,"./Components/detail.display":795,"./Components/detail.display.ts":795,"./Components/energy.progress.bar":927,"./Components/energy.progress.bar.ts":927,"./Components/image.value":813,"./Components/image.value.ts":813,"./Components/index":793,"./Components/index.ts":793,"./Components/input.view":931,"./Components/input.view.ts":931,"./Components/items.consume.funpanel":932,"./Components/items.consume.funpanel.ts":932,"./Components/money.compent":929,"./Components/money.compent.ts":929,"./CreateRole/CreateRolePanel":945,"./CreateRole/CreateRolePanel.ts":945,"./CutIn/CutInPanel":946,"./CutIn/CutInPanel.ts":946,"./CutInMenu/CutInMenuPanel":947,"./CutInMenu/CutInMenuPanel.ts":947,"./Dialog/DialogPanel":948,"./Dialog/DialogPanel.ts":948,"./DropElement/DropElementPanel":1093,"./DropElement/DropElementPanel.ts":1093,"./ExploreGuide/ExploreGuidePanel":949,"./ExploreGuide/ExploreGuidePanel.ts":949,"./FriendInvite/FriendInvitePanel":950,"./FriendInvite/FriendInvitePanel.ts":950,"./GMTools/GMToolsPanel":1094,"./GMTools/GMToolsPanel.ts":1094,"./HomeGuide/HomeGuidePanel":951,"./HomeGuide/HomeGuidePanel.ts":951,"./HotelGuide/BaseHotelGuidePanel":843,"./HotelGuide/BaseHotelGuidePanel.ts":843,"./HotelGuide/HotelGuidePanel":952,"./HotelGuide/HotelGuidePanel.ts":952,"./Login/LoginPanel":953,"./Login/LoginPanel.ts":953,"./Login/VerifiePanel":954,"./Login/VerifiePanel.ts":954,"./MaskLoading/MaskLoadingPanel":1095,"./MaskLoading/MaskLoadingPanel.ts":1095,"./PicManorInfo/PicManorInfoPanel":955,"./PicManorInfo/PicManorInfoPanel.ts":955,"./PicManorInfo/PicaManorBasePanel":816,"./PicManorInfo/PicaManorBasePanel.ts":816,"./PicManorInfo/PicaManorChildPanel":846,"./PicManorInfo/PicaManorChildPanel.ts":846,"./PicManorInfo/PicaManorShopPanel":847,"./PicManorInfo/PicaManorShopPanel.ts":847,"./PicManorInfo/PicaManorTipsPanel":956,"./PicManorInfo/PicaManorTipsPanel.ts":956,"./PicRoomUpgrade/PicRoomUpgradePanel":957,"./PicRoomUpgrade/PicRoomUpgradePanel.ts":957,"./PicaAvatar/PicaAvatarPanel":958,"./PicaAvatar/PicaAvatarPanel.ts":958,"./PicaBag/PicaBagPanel":835,"./PicaBag/PicaBagPanel.ts":835,"./PicaBoot/PicaBootPanel":1096,"./PicaBoot/PicaBootPanel.ts":1096,"./PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel":848,"./PicaBusinessMarketingPlan/PicaBusinessChoosePlanPanel.ts":848,"./PicaBusinessMarketingPlan/PicaBusinessMarketingPlanPanel":959,"./PicaBusinessMarketingPlan/PicaBusinessMarketingPlanPanel.ts":959,"./PicaBusinessMarketingPlan/PicaBusinessPlanPanel":849,"./PicaBusinessMarketingPlan/PicaBusinessPlanPanel.ts":849,"./PicaBusinessStreet/PicaBusinessContentPanel":817,"./PicaBusinessStreet/PicaBusinessContentPanel.ts":817,"./PicaBusinessStreet/PicaBusinessHistoryPanel":850,"./PicaBusinessStreet/PicaBusinessHistoryPanel.ts":850,"./PicaBusinessStreet/PicaBusinessMyStreetPanel":851,"./PicaBusinessStreet/PicaBusinessMyStreetPanel.ts":851,"./PicaBusinessStreet/PicaBusinessRankRewardPanel":852,"./PicaBusinessStreet/PicaBusinessRankRewardPanel.ts":852,"./PicaBusinessStreet/PicaBusinessRankingDetailPanel":853,"./PicaBusinessStreet/PicaBusinessRankingDetailPanel.ts":853,"./PicaBusinessStreet/PicaBusinessRankingPanel":854,"./PicaBusinessStreet/PicaBusinessRankingPanel.ts":854,"./PicaBusinessStreet/PicaBusinessStoreCreatePanel":855,"./PicaBusinessStreet/PicaBusinessStoreCreatePanel.ts":855,"./PicaBusinessStreet/PicaBusinessStreetListPanel":856,"./PicaBusinessStreet/PicaBusinessStreetListPanel.ts":856,"./PicaBusinessStreet/PicaBusinessStreetPanel":960,"./PicaBusinessStreet/PicaBusinessStreetPanel.ts":960,"./PicaBusinessStreet/SecondaryMenuPanel":805,"./PicaBusinessStreet/SecondaryMenuPanel.ts":805,"./PicaChat/PicaChatInputPanel":832,"./PicaChat/PicaChatInputPanel.ts":832,"./PicaChat/PicaChatPanel":939,"./PicaChat/PicaChatPanel.ts":939,"./PicaChat/PicaGiftPanel":833,"./PicaChat/PicaGiftPanel.ts":833,"./PicaCompose/PicaComposePanel":961,"./PicaCompose/PicaComposePanel.ts":961,"./PicaCooking/PicaCookingPanel":1097,"./PicaCooking/PicaCookingPanel.ts":1097,"./PicaCreateRole/PicaCreateRolePanel":962,"./PicaCreateRole/PicaCreateRolePanel.ts":962,"./PicaDecorate/PicaDecoratePanel":1098,"./PicaDecorate/PicaDecoratePanel.ts":1098,"./PicaDecorateControl/PicaDecorateControlPanel":963,"./PicaDecorateControl/PicaDecorateControlPanel.ts":963,"./PicaEffectMgr/PicaEffectMgrPanel":964,"./PicaEffectMgr/PicaEffectMgrPanel.ts":964,"./PicaEffectMgr/PicaFurniUnlockEffectPanel":857,"./PicaEffectMgr/PicaFurniUnlockEffectPanel.ts":857,"./PicaEffectMgr/PicaLevelUpEffectPanel":1036,"./PicaEffectMgr/PicaLevelUpEffectPanel.ts":1036,"./PicaElementStorage/Item":1037,"./PicaElementStorage/Item.ts":1037,"./PicaElementStorage/PicaElementStoragePanel":965,"./PicaElementStorage/PicaElementStoragePanel.ts":965,"./PicaElevator/PicaElevatorPanel":966,"./PicaElevator/PicaElevatorPanel.ts":966,"./PicaEquipUpgrade/PicaEquipUpgradeItem":858,"./PicaEquipUpgrade/PicaEquipUpgradeItem.ts":858,"./PicaEquipUpgrade/PicaEquipUpgradePanel":967,"./PicaEquipUpgrade/PicaEquipUpgradePanel.ts":967,"./PicaExploreList/PicaChapterLevelClue":814,"./PicaExploreList/PicaChapterLevelClue.ts":814,"./PicaExploreList/PicaExploreListBottomPanel":841,"./PicaExploreList/PicaExploreListBottomPanel.ts":841,"./PicaExploreList/PicaExploreListDetailPanel":840,"./PicaExploreList/PicaExploreListDetailPanel.ts":840,"./PicaExploreList/PicaExploreListLevelPanel":842,"./PicaExploreList/PicaExploreListLevelPanel.ts":842,"./PicaExploreList/PicaExploreListPanel":839,"./PicaExploreList/PicaExploreListPanel.ts":839,"./PicaExploreLog/PicaExploreLogPanel":968,"./PicaExploreLog/PicaExploreLogPanel.ts":968,"./PicaExploreLog/PicaExploreLogSettlePanel":859,"./PicaExploreLog/PicaExploreLogSettlePanel.ts":859,"./PicaFriend/PicaFriendPanel":969,"./PicaFriend/PicaFriendPanel.ts":969,"./PicaFurniFun/PicaFurniFunPanel":834,"./PicaFurniFun/PicaFurniFunPanel.ts":834,"./PicaFurnitureCompose/PicaFurnitureComposePanel":970,"./PicaFurnitureCompose/PicaFurnitureComposePanel.ts":970,"./PicaGiftEffect/PicaGiftEffectPanel":971,"./PicaGiftEffect/PicaGiftEffectPanel.ts":971,"./PicaGiftEffect/PicaGiftLateralItem":861,"./PicaGiftEffect/PicaGiftLateralItem.ts":861,"./PicaGiftEffect/PicaGiftLaterctPanel":860,"./PicaGiftEffect/PicaGiftLaterctPanel.ts":860,"./PicaGiftEffect/PicaGiftPlayerPanel":862,"./PicaGiftEffect/PicaGiftPlayerPanel.ts":862,"./PicaHandheld/PicaHandheldPanel":938,"./PicaHandheld/PicaHandheldPanel.ts":938,"./PicaIllustrated/PicaFuriniDetailPanel":1038,"./PicaIllustrated/PicaFuriniDetailPanel.ts":1038,"./PicaIllustrated/PicaIllustratedDetailPanel":1039,"./PicaIllustrated/PicaIllustratedDetailPanel.ts":1039,"./PicaIllustrated/PicaIllustratedGalleryPanel":1040,"./PicaIllustrated/PicaIllustratedGalleryPanel.ts":1040,"./PicaIllustrated/PicaIllustratedItem":972,"./PicaIllustrated/PicaIllustratedItem.ts":972,"./PicaIllustrated/PicaIllustratedListPanel":1042,"./PicaIllustrated/PicaIllustratedListPanel.ts":1042,"./PicaIllustrated/PicaIllustratedPanel":1099,"./PicaIllustrated/PicaIllustratedPanel.ts":1099,"./PicaIllustrated/PicaIllustredCollectPanel":1041,"./PicaIllustrated/PicaIllustredCollectPanel.ts":1041,"./PicaItemPopCard/PicaItemPopCardPanel":973,"./PicaItemPopCard/PicaItemPopCardPanel.ts":973,"./PicaLogin/PicaLoginPanel":1100,"./PicaLogin/PicaLoginPanel.ts":1100,"./PicaMail/PicaMailItem":863,"./PicaMail/PicaMailItem.ts":863,"./PicaMail/PicaMailMainPanel":864,"./PicaMail/PicaMailMainPanel.ts":864,"./PicaMail/PicaMailPanel":865,"./PicaMail/PicaMailPanel.ts":865,"./PicaMainUI/PicaMainUIPanel":940,"./PicaMainUI/PicaMainUIPanel.ts":940,"./PicaManorList/PicaManorContentPanel":866,"./PicaManorList/PicaManorContentPanel.ts":866,"./PicaManorList/PicaManorListPanel":974,"./PicaManorList/PicaManorListPanel.ts":974,"./PicaManorList/PicaManorScrollPanel":867,"./PicaManorList/PicaManorScrollPanel.ts":867,"./PicaManufacture/PicaFurnitureComposePanel":1043,"./PicaManufacture/PicaFurnitureComposePanel.ts":1043,"./PicaManufacture/PicaManufacturePanel":1101,"./PicaManufacture/PicaManufacturePanel.ts":1101,"./PicaManufacture/PicaRecastePanel":1044,"./PicaManufacture/PicaRecastePanel.ts":1044,"./PicaMarket/ElementDetail":868,"./PicaMarket/ElementDetail.ts":868,"./PicaMarket/NumberCounter":869,"./PicaMarket/NumberCounter.ts":869,"./PicaMarket/PicaMarketPanel":975,"./PicaMarket/PicaMarketPanel.ts":975,"./PicaMarket/item":870,"./PicaMarket/item.ts":870,"./PicaMarquee/PicaMarqueePanel":1102,"./PicaMarquee/PicaMarqueePanel.ts":1102,"./PicaMessageBox/PicaMessageBoxPanel":976,"./PicaMessageBox/PicaMessageBoxPanel.ts":976,"./PicaMineCar/PicaMineCarPanel":977,"./PicaMineCar/PicaMineCarPanel.ts":977,"./PicaMineSettle/PicaMineSettlePanel":978,"./PicaMineSettle/PicaMineSettlePanel.ts":978,"./PicaNavigate/PicaNavigatePanel":979,"./PicaNavigate/PicaNavigatePanel.ts":979,"./PicaNewIllustrated/PicaNewAlreadyCollectedPanel":1045,"./PicaNewIllustrated/PicaNewAlreadyCollectedPanel.ts":1045,"./PicaNewIllustrated/PicaNewCollectBadgePanel":1046,"./PicaNewIllustrated/PicaNewCollectBadgePanel.ts":1046,"./PicaNewIllustrated/PicaNewCollectRewardsPanel":1047,"./PicaNewIllustrated/PicaNewCollectRewardsPanel.ts":1047,"./PicaNewIllustrated/PicaNewCombinationPanel":1048,"./PicaNewIllustrated/PicaNewCombinationPanel.ts":1048,"./PicaNewIllustrated/PicaNewFuriniDetailPanel":1049,"./PicaNewIllustrated/PicaNewFuriniDetailPanel.ts":1049,"./PicaNewIllustrated/PicaNewIllustratedDetailPanel":1050,"./PicaNewIllustrated/PicaNewIllustratedDetailPanel.ts":1050,"./PicaNewIllustrated/PicaNewIllustratedGalleryPanel":1051,"./PicaNewIllustrated/PicaNewIllustratedGalleryPanel.ts":1051,"./PicaNewIllustrated/PicaNewIllustratedItem":980,"./PicaNewIllustrated/PicaNewIllustratedItem.ts":980,"./PicaNewIllustrated/PicaNewIllustratedListPanel":1053,"./PicaNewIllustrated/PicaNewIllustratedListPanel.ts":1053,"./PicaNewIllustrated/PicaNewIllustratedPanel":981,"./PicaNewIllustrated/PicaNewIllustratedPanel.ts":981,"./PicaNewIllustrated/PicaNewIllustredCollectPanel":1052,"./PicaNewIllustrated/PicaNewIllustredCollectPanel.ts":1052,"./PicaNewIllustrated/PicaNewLevelRewardsPanel":1054,"./PicaNewIllustrated/PicaNewLevelRewardsPanel.ts":1054,"./PicaNewMain/PicaNewActivityPanel":871,"./PicaNewMain/PicaNewActivityPanel.ts":871,"./PicaNewMain/PicaNewChatPanel":872,"./PicaNewMain/PicaNewChatPanel.ts":872,"./PicaNewMain/PicaNewHeadPanel":873,"./PicaNewMain/PicaNewHeadPanel.ts":873,"./PicaNewMain/PicaNewLeftPanel":874,"./PicaNewMain/PicaNewLeftPanel.ts":874,"./PicaNewMain/PicaNewMainPanel":982,"./PicaNewMain/PicaNewMainPanel.ts":982,"./PicaNewMain/PicaNewNavigatePanel":836,"./PicaNewMain/PicaNewNavigatePanel.ts":836,"./PicaNewMain/PicaNewOldMainPanel":1103,"./PicaNewMain/PicaNewOldMainPanel.ts":1103,"./PicaNewMine/PicaNewMinePanel":983,"./PicaNewMine/PicaNewMinePanel.ts":983,"./PicaNewRole/PicaNewRolePanel":984,"./PicaNewRole/PicaNewRolePanel.ts":984,"./PicaNotice/PicaNoticePanel":985,"./PicaNotice/PicaNoticePanel.ts":985,"./PicaOnline/PicaOnlineBottomPanel":1055,"./PicaOnline/PicaOnlineBottomPanel.ts":1055,"./PicaOnline/PicaOnlinePanel":986,"./PicaOnline/PicaOnlinePanel.ts":986,"./PicaOpenParty/PicaOpenPartyCreatePanel":875,"./PicaOpenParty/PicaOpenPartyCreatePanel.ts":875,"./PicaOpenParty/PicaOpenPartyPanel":987,"./PicaOpenParty/PicaOpenPartyPanel.ts":987,"./PicaOrder/PicaOrderPanel":1104,"./PicaOrder/PicaOrderPanel.ts":1104,"./PicaPartyList/PicaMyRoomNavigationPanel":1056,"./PicaPartyList/PicaMyRoomNavigationPanel.ts":1056,"./PicaPartyList/PicaOldPartyNavigationPanel":1057,"./PicaPartyList/PicaOldPartyNavigationPanel.ts":1057,"./PicaPartyList/PicaPartyListPanel":988,"./PicaPartyList/PicaPartyListPanel.ts":988,"./PicaPartyNavigation/PicaMyNavigationPanel":876,"./PicaPartyNavigation/PicaMyNavigationPanel.ts":876,"./PicaPartyNavigation/PicaPartyNavigationPanel":990,"./PicaPartyNavigation/PicaPartyNavigationPanel.ts":990,"./PicaPartyNavigation/PicaRoomListItem":989,"./PicaPartyNavigation/PicaRoomListItem.ts":989,"./PicaPartyNavigation/PicaRoomNavigationPanel":1058,"./PicaPartyNavigation/PicaRoomNavigationPanel.ts":1058,"./PicaPartyNavigation/PicaRoomTypePanel":1059,"./PicaPartyNavigation/PicaRoomTypePanel.ts":1059,"./PicaPartyNavigation/PicaTownNavigationPanel":877,"./PicaPartyNavigation/PicaTownNavigationPanel.ts":877,"./PicaPlayerInfo/PicaAttributePanel":878,"./PicaPlayerInfo/PicaAttributePanel.ts":878,"./PicaPlayerInfo/PicaGraphicsProgressBar":991,"./PicaPlayerInfo/PicaGraphicsProgressBar.ts":991,"./PicaPlayerInfo/PicaPlayerEditorPanel":992,"./PicaPlayerInfo/PicaPlayerEditorPanel.ts":992,"./PicaPlayerInfo/PicaPlayerInfoPanel":993,"./PicaPlayerInfo/PicaPlayerInfoPanel.ts":993,"./PicaPropFun/PicaPropFunPanel":994,"./PicaPropFun/PicaPropFunPanel.ts":994,"./PicaRecaste/PicaRecastePanel":995,"./PicaRecaste/PicaRecastePanel.ts":995,"./PicaRecharge/PicaRechargePanel":996,"./PicaRecharge/PicaRechargePanel.ts":996,"./PicaRename/PicaRenamePanel":997,"./PicaRename/PicaRenamePanel.ts":997,"./PicaRepairChoose/PicaRepairChoosePanel":998,"./PicaRepairChoose/PicaRepairChoosePanel.ts":998,"./PicaRewardTip/PicaRewardTipPanel":999,"./PicaRewardTip/PicaRewardTipPanel.ts":999,"./PicaRoam/PicaRoamDrawPanel":879,"./PicaRoam/PicaRoamDrawPanel.ts":879,"./PicaRoam/PicaRoamEffectOnePanel":1060,"./PicaRoam/PicaRoamEffectOnePanel.ts":1060,"./PicaRoam/PicaRoamListPanel":880,"./PicaRoam/PicaRoamListPanel.ts":880,"./PicaRoam/PicaRoamPanel":1e3,"./PicaRoam/PicaRoamPanel.ts":1e3,"./PicaRoam/PicaRoamPreviewPanel":881,"./PicaRoam/PicaRoamPreviewPanel.ts":881,"./PicaRoom/PicaRoomInfoPanel":882,"./PicaRoom/PicaRoomInfoPanel.ts":882,"./PicaRoom/PicaRoomPanel":1002,"./PicaRoom/PicaRoomPanel.ts":1002,"./PicaRoom/PicaRoomSettingPanel":1061,"./PicaRoom/PicaRoomSettingPanel.ts":1061,"./PicaRoom/RoomBaseAttribute":1001,"./PicaRoom/RoomBaseAttribute.ts":1001,"./PicaRoomDecorate/PicaRoomDecoratePanel":1003,"./PicaRoomDecorate/PicaRoomDecoratePanel.ts":1003,"./PicaRoomDecorate/PicaRoomDecorateShopPanel":883,"./PicaRoomDecorate/PicaRoomDecorateShopPanel.ts":883,"./PicaRoomList/PicaRoomListPanel":1004,"./PicaRoomList/PicaRoomListPanel.ts":1004,"./PicaSceneNavigation/PicaSceneNavigationMapPanel":884,"./PicaSceneNavigation/PicaSceneNavigationMapPanel.ts":884,"./PicaSceneNavigation/PicaSceneNavigationPanel":1005,"./PicaSceneNavigation/PicaSceneNavigationPanel.ts":1005,"./PicaSurvey/PicaSurveyPanel":1006,"./PicaSurvey/PicaSurveyPanel.ts":1006,"./PicaTask/PicaTaskItem":845,"./PicaTask/PicaTaskItem.ts":845,"./PicaTask/PicaTaskMainPanel":844,"./PicaTask/PicaTaskMainPanel.ts":844,"./PicaTask/PicaTaskPanel":815,"./PicaTask/PicaTaskPanel.ts":815,"./PicaTask/PicaTaskSidePanel":1007,"./PicaTask/PicaTaskSidePanel.ts":1007,"./PicaTreasure/PicaTreasureAllOpenPanel":885,"./PicaTreasure/PicaTreasureAllOpenPanel.ts":885,"./PicaTreasure/PicaTreasureOpenPanel":886,"./PicaTreasure/PicaTreasureOpenPanel.ts":886,"./PicaTreasure/PicaTreasurePanel":1008,"./PicaTreasure/PicaTreasurePanel.ts":1008,"./PicaTreasure/PicaTreasurePreviewPanel":887,"./PicaTreasure/PicaTreasurePreviewPanel.ts":887,"./PicaWork/PicaWorkOldPanel":1009,"./PicaWork/PicaWorkOldPanel.ts":1009,"./PicaWork/PicaWorkPanel":1105,"./PicaWork/PicaWorkPanel.ts":1105,"./PlaneGuide/PlaneGuidePanel":1010,"./PlaneGuide/PlaneGuidePanel.ts":1010,"./RoomGuide/RoomGuidePanel":1106,"./RoomGuide/RoomGuidePanel.ts":1106,"./SinglePanel/PicaItemTipsPanel":803,"./SinglePanel/PicaItemTipsPanel.ts":803,"./SinglePanel/PicaSingleManager":812,"./SinglePanel/PicaSingleManager.ts":812,"./SofaGuide/SofaGuidePanel":1107,"./SofaGuide/SofaGuidePanel.ts":1107,"./Task/TaskPanel":1011,"./Task/TaskPanel.ts":1011,"./index":791,"./index.ts":791,"./pica.Renderuimanager":941,"./pica.Renderuimanager.ts":941,"./pica.base.panel":792,"./pica.base.panel.ts":792,"./uitool":794,"./uitool/":794,"./uitool/index":794,"./uitool/index.ts":794,"./uitool/ui.tools":934,"./uitool/ui.tools.ts":934};function webpackContext(e){var i=webpackContextResolve(e);return n(i)}function webpackContextResolve(e){if(!n.o(a,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return a[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(a)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=1110}]]);