!function webpackUniversalModuleDefinition(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.utils=n():t.utils=n()}(this,(function(){return function(t){var n={};function __webpack_require__(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}return __webpack_require__.m=t,__webpack_require__.c=n,__webpack_require__.d=function(t,n,e){__webpack_require__.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,n){if(1&n&&(t=__webpack_require__(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(__webpack_require__.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)__webpack_require__.d(e,r,function(n){return t[n]}.bind(null,r));return e},__webpack_require__.n=function(t){var n=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(n,"a",n),n},__webpack_require__.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}({3:function(t,n,e){"use strict";e.r(n),e.d(n,"HTTP_REGEX",(function(){return r})),e.d(n,"Url",(function(){return o})),e.d(n,"ResUtils",(function(){return u})),e.d(n,"BlackButton",(function(){return i})),e.d(n,"BlueButton",(function(){return c})),e.d(n,"WhiteButton",(function(){return a})),e.d(n,"CloseButton",(function(){return s})),e.d(n,"Background",(function(){return f})),e.d(n,"Border",(function(){return l})),e.d(n,"TransparentButton",(function(){return g})),e.d(n,"Tool",(function(){return p})),e.d(n,"load",(function(){return load})),e.d(n,"loadArr",(function(){return loadArr})),e.d(n,"Algorithm",(function(){return d})),e.d(n,"CopyProtoType",(function(){return h})),e.d(n,"StringUtils",(function(){return m})),e.d(n,"ObjectAssign",(function(){return _})),e.d(n,"UiUtils",(function(){return B})),e.d(n,"isMobile",(function(){return isMobile})),e.d(n,"HttpLoadManager",(function(){return b})),e.d(n,"Helpers",(function(){return y}));var r=/^(http|https):/i,o=function(){function Url(){}return Url.getRes=function(t){if(t)try{return Url.REQUIRE_CONTEXT("resources/"+t).default}catch(t){return}},Url.getUIRes=function(t,n){if(n)try{return Url.REQUIRE_CONTEXT("resources/ui/"+t+"x/"+n).default}catch(t){console.error(n+" does not exist")}},Url.getNormalUIRes=function(t){try{return Url.REQUIRE_CONTEXT("resources/ui/"+t).default}catch(n){console.error(t+" does not exist")}},Url.getOsdRes=function(t){if(t)return Url.OSD_PATH?(r.test(Url.OSD_PATH),Url.OSD_PATH+t):t;console.warn("splicing url failed")},Url.OSD_PATH="",Url.RES_PATH="",Url.RESUI_PATH="",Url.RESOURCE_ROOT="",Url}(),u=function(){function ResUtils(){}return ResUtils.getPartName=function(t){return t+"_png"},ResUtils.getPartUrl=function(t){return r.test(o.OSD_PATH),o.OSD_PATH+"avatar/part/"+t+".png"},ResUtils.getUsrAvatarTextureUrls=function(t){return{img:o.OSD_PATH+"user_avatar/texture/"+t+".png",json:o.OSD_PATH+"user_avatar/texture/"+t+".json"}},ResUtils.getGameConfig=function(t){return r.test(t)?t:o.OSD_PATH+t},ResUtils.getResRoot=function(t){return o.RESOURCE_ROOT?o.RESOURCE_ROOT+"/"+t:t},ResUtils}(),i=function(){function BlackButton(){}return BlackButton.getName=function(){return"black_button"},BlackButton.getPNG=function(){return o.getRes("ui/common/button.png")},BlackButton.getColumns=function(){return[4,2,4]},BlackButton.getRows=function(){return[4,2,4]},BlackButton.left=function(){return 4},BlackButton.top=function(){return 4},BlackButton.right=function(){return 4},BlackButton.bottom=function(){return 4},BlackButton.getConfig=function(){return{top:4,left:4,right:4,bottom:4}},BlackButton}(),c=function(){function BlueButton(){}return BlueButton.getName=function(){return"button_blue"},BlueButton.getPNG=function(){return o.getRes("ui/common/button_blue.png")},BlueButton.getJSON=function(){return o.getRes("ui/common/button_blue.json")},BlueButton.getColumns=function(){return[7,1,7]},BlueButton.getRows=function(){return[7,1,7]},BlueButton.left=function(){return 7},BlueButton.top=function(){return 7},BlueButton.right=function(){return 7},BlueButton.bottom=function(){return 7},BlueButton.getConfig=function(){return{left:7,top:7,right:7,bottom:7}},BlueButton}(),a=function(){function WhiteButton(){}return WhiteButton.getName=function(){return"button_white"},WhiteButton.getPNG=function(){return o.getRes("ui/common/button_white.png")},WhiteButton.getJSON=function(){return o.getRes("ui/common/button_white.json")},WhiteButton.getColumns=function(){return[7,1,7]},WhiteButton.getRows=function(){return[7,1,7]},WhiteButton.left=function(){return 7},WhiteButton.top=function(){return 7},WhiteButton.right=function(){return 7},WhiteButton.bottom=function(){return 7},WhiteButton.getConfig=function(){return{left:7,top:7,right:7,bottom:7}},WhiteButton}(),s=function(){function CloseButton(){}return CloseButton.getName=function(){return"common_clsBtn"},CloseButton.getPNG=function(){return o.getRes("ui/common/common_clsBtn.png")},CloseButton.getJSON=function(){return o.getRes("ui/common/common_clsBtn.json")},CloseButton.getFrameConfig=function(){return{frameWidth:16,frameHeight:16,startFrame:1,endFrame:3}},CloseButton}(),f=function(){function Background(){}return Background.getName=function(){return"common_background"},Background.getPNG=function(){return o.getRes("ui/common/common_panelBg.png")},Background.getColumns=function(){return[11,9,11]},Background.getRows=function(){return[14,13,14]},Background.left=function(){return 10},Background.top=function(){return 15},Background.right=function(){return 10},Background.bottom=function(){return 15},Background.getConfig=function(){return{left:10,top:15,right:10,bottom:15}},Background}(),l=function(){function Border(){}return Border.getName=function(){return"common_border"},Border.getPNG=function(){return o.getRes("ui/common/common_border.png")},Border.getColumns=function(){return[4,2,4]},Border.getRows=function(){return[4,2,4]},Border.left=function(){return 4},Border.top=function(){return 4},Border.right=function(){return 4},Border.bottom=function(){return 4},Border.getConfig=function(){return{left:4,top:4,right:4,bottom:4}},Border}(),g=function(){function TransparentButton(){}return TransparentButton.getName=function(){return"button_transparent"},TransparentButton.getPNG=function(){return o.getRes("ui/common/button_transparent.png")},TransparentButton.getJSON=function(){return o.getRes("ui/common/button_transparent.json")},TransparentButton.left=function(){return 4},TransparentButton.top=function(){return 4},TransparentButton.right=function(){return 4},TransparentButton.bottom=function(){return 4},TransparentButton.getConfig=function(){return{left:4,top:4,right:4,bottom:4}},TransparentButton}(),p=function(){function Tool(){}return Tool.equalArr=function(t,n){if(t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0},Tool.getPosByScenes=function(t,n){var e=t.cameras.main;return{x:n.x-e.scrollX,y:n.y-e.scrollY}},Tool.twoPointDistance=function(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))},Tool.twoPointRadin=function(t,n){var e=t.x-n.x,r=t.y-n.y,o=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),u=Math.acos(e/o);return n.y<t.y&&(u=-u),u},Tool.formatChineseString=function(t,n,e){"string"==typeof n&&(n=parseInt(n,10));var r=Math.floor(e/n);return this.chunk(t,r).join(" ")},Tool.checkChinese=function(t){for(var n=/[\u4e00-\u9fa5]+/,e=t.split(""),r=0,o=e.length;r<o;r++)if(n.test(e[r]))return!0;return!1},Tool.checkItemName=function(t,n){var e=n.split("")||[],r=!1;return e.forEach((function(n){if(n)for(var e=new RegExp(n),o=t.split(""),u=0,i=o.length;u<i;u++)if(e.test(o[u])){r=!0;break}})),r},Tool.calcAngle=function(t,n){return Math.atan2(n.y-t.y,n.x-t.x)*(180/Math.PI)},Tool.calculateDirectionByRadin=function(t){var n=t*(180/Math.PI);return n>90?3:n>=0?5:n>=-90?7:1},Tool.angleToDirections=function(t,n,e){switch(void 0===e&&(e={}),e.left=!1,e.right=!1,e.up=!1,e.down=!1,t=(t+360)%360,n){case 0:t<180?e.down=!0:e.up=!0;break;case 1:t>90&&t<=270?e.left=!0:e.right=!0;break;case 2:t>45&&t<=135?e.down=!0:t>135&&t<=225?e.left=!0:t>225&&t<=315?e.up=!0:e.right=!0;break;case 3:t>22.5&&t<=67.5?(e.down=!0,e.right=!0):t>67.5&&t<=112.5?e.down=!0:t>112.5&&t<=157.5?(e.down=!0,e.left=!0):t>157.5&&t<=202.5?e.left=!0:t>202.5&&t<=247.5?(e.left=!0,e.up=!0):t>247.5&&t<=292.5?e.up=!0:t>292.5&&t<=337.5?(e.up=!0,e.right=!0):e.right=!0}return e},Tool.checkPointerContains=function(t,n){if(!t)return!1;var e=-t.width/2,r=t.width/2,o=-t.height/2,u=t.height/2;if(n){var i=t.getWorldTransformMatrix(),c=i.scaleX,a=(n.x-i.tx)/c,s=(n.y-i.ty)/c;return e<=a&&r>=a&&o<=s&&u>=s}return!1},Tool.baseName=function(t){var n=new String(t).substring(t.lastIndexOf("/")+1);return-1!==n.lastIndexOf(".")&&(n=n.substring(0,n.lastIndexOf("."))),n},Tool.isNumeric=function(t){return"string"==typeof t&&(!isNaN(t)&&!isNaN(parseFloat(t)))},Tool.chunk=function(t,n){for(var e=[],r=0;r<t.length;r+=n)e.push(t.substr(r,n));return e},Tool}();function load(t,n){return new Promise((function(e,r){var o=new XMLHttpRequest;o.addEventListener("error",(function(){console.log("http error =============>>>>")})),o.timeout=2e4,o.onload=function(n){var o=n.currentTarget;o&&200===o.status?e(n.currentTarget):r(t+" load error "+o.status)},o.onerror=function(){console.log("http error ====>"),r(t+" load error!!!!!")},o.ontimeout=function(n){console.log("http timeout ====>"),r(t+" load ontimeout!!!!!")},o.open("GET",t,!0),o.responseType=n||"",o.send()}))}function loadArr(t){return new Promise((function(n,e){var r=0,o=[],u=new Map,compl=function(){if(t.length===r)0===o.length?n(u):e(o);else{var i=t[r];load(i.path,i.type).then((function(t){u.set(i.resName,t),compl()}),(function(t){o.push(t),compl()}))}r++};compl()}))}var d=function(){function Algorithm(){}return Algorithm.median=function(t){var n=t.sort((function(t,n){return n-t})),e=Math.floor(n.length/2);return n.length%2==0?(n[e-1]+n[e])/2:n[e]},Algorithm}(),h=function(){function CopyProtoType(){}return CopyProtoType.copyProtoParam=function(t){return t.forEach((function(t){for(var n in t)"function"!=typeof t.constructor.prototype[n]&&(t.hasOwnProperty(n)||(t[n]=t.constructor.prototype[n]))})),t},CopyProtoType}(),m=function(){function StringUtils(){}return StringUtils.format=function(t,n){if(0===arguments.length)return this;if("object"==typeof n){for(var e in n)t=t.replace(new RegExp("\\{"+e+"\\}","g"),n[e]);return t}for(var r=0;r<n.length;r++)t=t.replace(new RegExp("\\{"+r+"\\}","g"),n[r]);return t},StringUtils.isNullOrUndefined=function(t){if(null==t)return!0},StringUtils}(),_=function(){function ObjectAssign(){}return ObjectAssign.excludeTagAssign=function(t,n,e){if(void 0===e&&(e="exclude"),t&&n){var r=t[e]||n[e];for(var o in n)if(o!==e&&n.hasOwnProperty(o)){var u=n[o];"object"==typeof u?(t.hasOwnProperty(o)||(Array.isArray(u)?t[o]=[]:t[o]={}),this.excludeTagAssign(t[o],u,e)):r?-1===r.indexOf(o)&&(t[o]=n[o]):t[o]=n[o]}}else console.error("source",t,"target",n)},ObjectAssign.excludeAssign=function(t,n,e){for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];"object"==typeof o?(t.hasOwnProperty(r)||(Array.isArray(o)?t[r]=[]:t[r]={}),this.excludeAssign(t[r],o)):e?-1===e.indexOf(r)&&(t[r]=n[r]):t[r]=n[r]}},ObjectAssign.excludeAllAssign=function(t,n){for(var e in n)if(n.hasOwnProperty(e)){var r=n[e];"object"==typeof r?(t.hasOwnProperty(e)||(Array.isArray(r)?t[e]=[]:t[e]={}),this.excludeAllAssign(t[e],r)):t.hasOwnProperty(e)||(t[e]=r)}},ObjectAssign}(),B=function(){function UiUtils(){}return UiUtils.baseDpr=2,UiUtils.baseScale=1,UiUtils.MaxDpr=3,UiUtils}();function isMobile(t){return!1===t.device.os.desktop}var b=function(){function HttpLoadManager(){this.mCacheList=[],this.mCurLen=0}return HttpLoadManager.prototype.update=function(t,n){if(this.mCacheList&&this.mCurLen<HttpLoadManager.maxLen)for(var e=HttpLoadManager.maxLen-this.mCurLen,r=this.mCacheList.splice(0,e),o=0;o<e;o++){var u=r[o];u&&(this.mCurLen++,u.send())}},HttpLoadManager.prototype.destroy=function(){this.mCacheList.length=0,this.mCacheList=[],this.mCurLen=0},HttpLoadManager.prototype.addLoader=function(t){var n=this;if(this.mCurLen<HttpLoadManager.maxLen){var e=t.path,r=t.responseType;return new Promise((function(t,o){var u=new XMLHttpRequest;u.addEventListener("error",(function(){console.log("http error =============>>>>")})),u.timeout=2e4,u.onload=function(r){n.mCurLen--;var u=r.currentTarget;u&&200===u.status?t(r.currentTarget):o(e+" load error "+u.status)},u.onerror=function(){n.mCurLen--,console.log("http error ====>"),o(e+" load error!!!!!")},u.ontimeout=function(t){n.mCurLen--,console.log("http timeout ====>"),o(e+" load ontimeout!!!!!")},u.open("GET",e,!0),u.responseType=r||"",n.mCurLen++,u.send()}))}this.mCacheList.unshift(t)},HttpLoadManager.prototype.startSingleLoader=function(t){var n=this,e=t.path,r=t.responseType;return new Promise((function(t,o){var u=new XMLHttpRequest;u.addEventListener("error",(function(){console.log("http error =============>>>>")})),u.timeout=2e4,u.onload=function(r){n.mCurLen--;var u=r.currentTarget;u&&200===u.status?t(r.currentTarget):o(e+" load error "+u.status)},u.onerror=function(){n.mCurLen--,console.log("http error ====>"),o(e+" load error!!!!!")},u.ontimeout=function(t){n.mCurLen--,console.log("http timeout ====>"),o(e+" load ontimeout!!!!!")},u.open("GET",e,!0),u.responseType=r||"",n.mCurLen>=HttpLoadManager.maxLen?n.mCacheList.push(u):(n.mCurLen++,u.send())}))},HttpLoadManager.prototype.startListLoader=function(t){var n=this;return new Promise((function(e,r){for(var o=t.length,u=0;u<o;u++){var i=t[u];i&&n.startSingleLoader(i).then((function(t){e(t)})).catch((function(){e(null)}))}}))},HttpLoadManager.maxLen=30,HttpLoadManager}(),y=function(){function Helpers(){}return Helpers.openUrl=function(t){var n=window.open("","_blank");n&&(n.location.href=t)},Helpers}()}})}));