/*! For license information please see vendors~game_v1.0.493.js.LICENSE.txt */
(this.webpackJsonpTooqingCore=this.webpackJsonpTooqingCore||[]).push([["vendors~game"],{"./node_modules/copy-text-to-clipboard/index.js":function(module,exports,__webpack_require__){"use strict";eval("\n\nconst copyTextToClipboard = (input, {target = document.body} = {}) => {\n\tconst element = document.createElement('textarea');\n\tconst previouslyFocusedElement = document.activeElement;\n\n\telement.value = input;\n\n\t// Prevent keyboard from showing on mobile\n\telement.setAttribute('readonly', '');\n\n\telement.style.contain = 'strict';\n\telement.style.position = 'absolute';\n\telement.style.left = '-9999px';\n\telement.style.fontSize = '12pt'; // Prevent zooming on iOS\n\n\tconst selection = document.getSelection();\n\tlet originalRange = false;\n\tif (selection.rangeCount > 0) {\n\t\toriginalRange = selection.getRangeAt(0);\n\t}\n\n\ttarget.append(element);\n\telement.select();\n\n\t// Explicit selection workaround for iOS\n\telement.selectionStart = 0;\n\telement.selectionEnd = input.length;\n\n\tlet isSuccess = false;\n\ttry {\n\t\tisSuccess = document.execCommand('copy');\n\t} catch (_) {}\n\n\telement.remove();\n\n\tif (originalRange) {\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(originalRange);\n\t}\n\n\t// Get the focus back on the previously focused element, if any\n\tif (previouslyFocusedElement) {\n\t\tpreviouslyFocusedElement.focus();\n\t}\n\n\treturn isSuccess;\n};\n\nmodule.exports = copyTextToClipboard;\n// TODO: Remove this for the next major release\nmodule.exports.default = copyTextToClipboard;\n\n\n//# sourceURL=webpack://TooqingCore/./node_modules/copy-text-to-clipboard/index.js?")},"./node_modules/webworker-rpc/release/index.js":function(module,exports,__webpack_require__){eval('!function(e,t){ true?module.exports=t():undefined}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=20)}([function(e,t,r){var n,o,i;o=[r(4)],void 0===(i="function"==typeof(n=function(e){"use strict";var t,r,n,o=e.Reader,i=e.Writer,s=e.util,a=e.roots.default||(e.roots.default={});return a.webworker_rpc=((n={}).MSG_ERR=(t={},(r=Object.create(t))[t[0]="OK"]=0,r),n.Executor=function(){function t(e){if(this.params=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.method="",t.prototype.context="",t.prototype.params=s.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=i.create()),t.uint32(10).string(e.method),null!=e.context&&Object.hasOwnProperty.call(e,"context")&&t.uint32(18).string(e.context),null!=e.params&&e.params.length)for(var r=0;r<e.params.length;++r)a.webworker_rpc.Param.encode(e.params[r],t.uint32(26).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new a.webworker_rpc.Executor;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.method=e.string();break;case 2:n.context=e.string();break;case 3:n.params&&n.params.length||(n.params=[]),n.params.push(a.webworker_rpc.Param.decode(e,e.uint32()));break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("method"))throw s.ProtocolError("missing required \'method\'",{instance:n});return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!s.isString(e.method))return"method: string expected";if(null!=e.context&&e.hasOwnProperty("context")&&!s.isString(e.context))return"context: string expected";if(null!=e.params&&e.hasOwnProperty("params")){if(!Array.isArray(e.params))return"params: array expected";for(var t=0;t<e.params.length;++t){var r=a.webworker_rpc.Param.verify(e.params[t]);if(r)return"params."+r}}return null},t.fromObject=function(e){if(e instanceof a.webworker_rpc.Executor)return e;var t=new a.webworker_rpc.Executor;if(null!=e.method&&(t.method=String(e.method)),null!=e.context&&(t.context=String(e.context)),e.params){if(!Array.isArray(e.params))throw TypeError(".webworker_rpc.Executor.params: array expected");t.params=[];for(var r=0;r<e.params.length;++r){if("object"!=typeof e.params[r])throw TypeError(".webworker_rpc.Executor.params: object expected");t.params[r]=a.webworker_rpc.Param.fromObject(e.params[r])}}return t},t.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.params=[]),t.defaults&&(r.method="",r.context=""),null!=e.method&&e.hasOwnProperty("method")&&(r.method=e.method),null!=e.context&&e.hasOwnProperty("context")&&(r.context=e.context),e.params&&e.params.length){r.params=[];for(var n=0;n<e.params.length;++n)r.params[n]=a.webworker_rpc.Param.toObject(e.params[n],t)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),n.Param=function(){function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var r;return t.prototype.t=0,t.prototype.valStr="",t.prototype.valBool=!1,t.prototype.valNum=0,t.prototype.valBytes=s.newBuffer([]),t.prototype.valExecutor=null,Object.defineProperty(t.prototype,"val",{get:s.oneOfGetter(r=["valStr","valBool","valNum","valBytes","valExecutor"]),set:s.oneOfSetter(r)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),t.uint32(8).int32(e.t),null!=e.valStr&&Object.hasOwnProperty.call(e,"valStr")&&t.uint32(18).string(e.valStr),null!=e.valBool&&Object.hasOwnProperty.call(e,"valBool")&&t.uint32(24).bool(e.valBool),null!=e.valNum&&Object.hasOwnProperty.call(e,"valNum")&&t.uint32(32).int32(e.valNum),null!=e.valBytes&&Object.hasOwnProperty.call(e,"valBytes")&&t.uint32(42).bytes(e.valBytes),null!=e.valExecutor&&Object.hasOwnProperty.call(e,"valExecutor")&&a.webworker_rpc.Executor.encode(e.valExecutor,t.uint32(50).fork()).ldelim(),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new a.webworker_rpc.Param;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.t=e.int32();break;case 2:n.valStr=e.string();break;case 3:n.valBool=e.bool();break;case 4:n.valNum=e.int32();break;case 5:n.valBytes=e.bytes();break;case 6:n.valExecutor=a.webworker_rpc.Executor.decode(e,e.uint32());break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("t"))throw s.ProtocolError("missing required \'t\'",{instance:n});return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};switch(e.t){default:return"t: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:}if(null!=e.valStr&&e.hasOwnProperty("valStr")&&(t.val=1,!s.isString(e.valStr)))return"valStr: string expected";if(null!=e.valBool&&e.hasOwnProperty("valBool")){if(1===t.val)return"val: multiple values";if(t.val=1,"boolean"!=typeof e.valBool)return"valBool: boolean expected"}if(null!=e.valNum&&e.hasOwnProperty("valNum")){if(1===t.val)return"val: multiple values";if(t.val=1,!s.isInteger(e.valNum))return"valNum: integer expected"}if(null!=e.valBytes&&e.hasOwnProperty("valBytes")){if(1===t.val)return"val: multiple values";if(t.val=1,!(e.valBytes&&"number"==typeof e.valBytes.length||s.isString(e.valBytes)))return"valBytes: buffer expected"}if(null!=e.valExecutor&&e.hasOwnProperty("valExecutor")){if(1===t.val)return"val: multiple values";t.val=1;var r=a.webworker_rpc.Executor.verify(e.valExecutor);if(r)return"valExecutor."+r}return null},t.fromObject=function(e){if(e instanceof a.webworker_rpc.Param)return e;var t=new a.webworker_rpc.Param;switch(e.t){case"UNKNOWN":case 0:t.t=0;break;case"str":case 1:t.t=1;break;case"boolean":case 2:t.t=2;break;case"num":case 3:t.t=3;break;case"unit8array":case 4:t.t=4;break;case"executor":case 5:t.t=5}if(null!=e.valStr&&(t.valStr=String(e.valStr)),null!=e.valBool&&(t.valBool=Boolean(e.valBool)),null!=e.valNum&&(t.valNum=0|e.valNum),null!=e.valBytes&&("string"==typeof e.valBytes?s.base64.decode(e.valBytes,t.valBytes=s.newBuffer(s.base64.length(e.valBytes)),0):e.valBytes.length&&(t.valBytes=e.valBytes)),null!=e.valExecutor){if("object"!=typeof e.valExecutor)throw TypeError(".webworker_rpc.Param.valExecutor: object expected");t.valExecutor=a.webworker_rpc.Executor.fromObject(e.valExecutor)}return t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.t=t.enums===String?"UNKNOWN":0),null!=e.t&&e.hasOwnProperty("t")&&(r.t=t.enums===String?a.webworker_rpc.ParamType[e.t]:e.t),null!=e.valStr&&e.hasOwnProperty("valStr")&&(r.valStr=e.valStr,t.oneofs&&(r.val="valStr")),null!=e.valBool&&e.hasOwnProperty("valBool")&&(r.valBool=e.valBool,t.oneofs&&(r.val="valBool")),null!=e.valNum&&e.hasOwnProperty("valNum")&&(r.valNum=e.valNum,t.oneofs&&(r.val="valNum")),null!=e.valBytes&&e.hasOwnProperty("valBytes")&&(r.valBytes=t.bytes===String?s.base64.encode(e.valBytes,0,e.valBytes.length):t.bytes===Array?Array.prototype.slice.call(e.valBytes):e.valBytes,t.oneofs&&(r.val="valBytes")),null!=e.valExecutor&&e.hasOwnProperty("valExecutor")&&(r.valExecutor=a.webworker_rpc.Executor.toObject(e.valExecutor,t),t.oneofs&&(r.val="valExecutor")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),n.ParamType=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="str"]=1,t[e[2]="boolean"]=2,t[e[3]="num"]=3,t[e[4]="unit8array"]=4,t[e[5]="executor"]=5,t}(),n.Header=function(){function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.serviceName="",t.prototype.remoteExecutor=null,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),t.uint32(10).string(e.serviceName),a.webworker_rpc.Executor.encode(e.remoteExecutor,t.uint32(18).fork()).ldelim(),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new a.webworker_rpc.Header;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.serviceName=e.string();break;case 2:n.remoteExecutor=a.webworker_rpc.Executor.decode(e,e.uint32());break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("serviceName"))throw s.ProtocolError("missing required \'serviceName\'",{instance:n});if(!n.hasOwnProperty("remoteExecutor"))throw s.ProtocolError("missing required \'remoteExecutor\'",{instance:n});return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!s.isString(e.serviceName))return"serviceName: string expected";var t=a.webworker_rpc.Executor.verify(e.remoteExecutor);return t?"remoteExecutor."+t:null},t.fromObject=function(e){if(e instanceof a.webworker_rpc.Header)return e;var t=new a.webworker_rpc.Header;if(null!=e.serviceName&&(t.serviceName=String(e.serviceName)),null!=e.remoteExecutor){if("object"!=typeof e.remoteExecutor)throw TypeError(".webworker_rpc.Header.remoteExecutor: object expected");t.remoteExecutor=a.webworker_rpc.Executor.fromObject(e.remoteExecutor)}return t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.serviceName="",r.remoteExecutor=null),null!=e.serviceName&&e.hasOwnProperty("serviceName")&&(r.serviceName=e.serviceName),null!=e.remoteExecutor&&e.hasOwnProperty("remoteExecutor")&&(r.remoteExecutor=a.webworker_rpc.Executor.toObject(e.remoteExecutor,t)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),n.ExecutePacket=function(){function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.id=0,t.prototype.header=null,t.prototype.bodyLen=0,t.prototype.body=s.newBuffer([]),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),t.uint32(8).int32(e.id),a.webworker_rpc.Header.encode(e.header,t.uint32(18).fork()).ldelim(),null!=e.bodyLen&&Object.hasOwnProperty.call(e,"bodyLen")&&t.uint32(24).int32(e.bodyLen),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(34).bytes(e.body),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new a.webworker_rpc.ExecutePacket;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.id=e.int32();break;case 2:n.header=a.webworker_rpc.Header.decode(e,e.uint32());break;case 3:n.bodyLen=e.int32();break;case 4:n.body=e.bytes();break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("id"))throw s.ProtocolError("missing required \'id\'",{instance:n});if(!n.hasOwnProperty("header"))throw s.ProtocolError("missing required \'header\'",{instance:n});return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!s.isInteger(e.id))return"id: integer expected";var t=a.webworker_rpc.Header.verify(e.header);return t?"header."+t:null!=e.bodyLen&&e.hasOwnProperty("bodyLen")&&!s.isInteger(e.bodyLen)?"bodyLen: integer expected":null!=e.body&&e.hasOwnProperty("body")&&!(e.body&&"number"==typeof e.body.length||s.isString(e.body))?"body: buffer expected":null},t.fromObject=function(e){if(e instanceof a.webworker_rpc.ExecutePacket)return e;var t=new a.webworker_rpc.ExecutePacket;if(null!=e.id&&(t.id=0|e.id),null!=e.header){if("object"!=typeof e.header)throw TypeError(".webworker_rpc.ExecutePacket.header: object expected");t.header=a.webworker_rpc.Header.fromObject(e.header)}return null!=e.bodyLen&&(t.bodyLen=0|e.bodyLen),null!=e.body&&("string"==typeof e.body?s.base64.decode(e.body,t.body=s.newBuffer(s.base64.length(e.body)),0):e.body.length&&(t.body=e.body)),t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.id=0,r.header=null,r.bodyLen=0,t.bytes===String?r.body="":(r.body=[],t.bytes!==Array&&(r.body=s.newBuffer(r.body)))),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),null!=e.header&&e.hasOwnProperty("header")&&(r.header=a.webworker_rpc.Header.toObject(e.header,t)),null!=e.bodyLen&&e.hasOwnProperty("bodyLen")&&(r.bodyLen=e.bodyLen),null!=e.body&&e.hasOwnProperty("body")&&(r.body=t.bytes===String?s.base64.encode(e.body,0,e.body.length):t.bytes===Array?Array.prototype.slice.call(e.body):e.body),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),n.ResponesPacket=function(){function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.id=0,t.prototype.val=null,t.prototype.err="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),t.uint32(8).int32(e.id),null!=e.val&&Object.hasOwnProperty.call(e,"val")&&a.webworker_rpc.Param.encode(e.val,t.uint32(18).fork()).ldelim(),null!=e.err&&Object.hasOwnProperty.call(e,"err")&&t.uint32(26).string(e.err),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new a.webworker_rpc.ResponesPacket;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.id=e.int32();break;case 2:n.val=a.webworker_rpc.Param.decode(e,e.uint32());break;case 3:n.err=e.string();break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("id"))throw s.ProtocolError("missing required \'id\'",{instance:n});return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!s.isInteger(e.id))return"id: integer expected";if(null!=e.val&&e.hasOwnProperty("val")){var t=a.webworker_rpc.Param.verify(e.val);if(t)return"val."+t}return null!=e.err&&e.hasOwnProperty("err")&&!s.isString(e.err)?"err: string expected":null},t.fromObject=function(e){if(e instanceof a.webworker_rpc.ResponesPacket)return e;var t=new a.webworker_rpc.ResponesPacket;if(null!=e.id&&(t.id=0|e.id),null!=e.val){if("object"!=typeof e.val)throw TypeError(".webworker_rpc.ResponesPacket.val: object expected");t.val=a.webworker_rpc.Param.fromObject(e.val)}return null!=e.err&&(t.err=String(e.err)),t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.id=0,r.val=null,r.err=""),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),null!=e.val&&e.hasOwnProperty("val")&&(r.val=a.webworker_rpc.Param.toObject(e.val,t)),null!=e.err&&e.hasOwnProperty("err")&&(r.err=e.err),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),n.RegistryPacket=function(){function t(e){if(this.executors=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.id=0,t.prototype.serviceName="",t.prototype.executors=s.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=i.create()),t.uint32(8).int32(e.id),t.uint32(18).string(e.serviceName),null!=e.executors&&e.executors.length)for(var r=0;r<e.executors.length;++r)a.webworker_rpc.Executor.encode(e.executors[r],t.uint32(26).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new a.webworker_rpc.RegistryPacket;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.id=e.int32();break;case 2:n.serviceName=e.string();break;case 3:n.executors&&n.executors.length||(n.executors=[]),n.executors.push(a.webworker_rpc.Executor.decode(e,e.uint32()));break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("id"))throw s.ProtocolError("missing required \'id\'",{instance:n});if(!n.hasOwnProperty("serviceName"))throw s.ProtocolError("missing required \'serviceName\'",{instance:n});return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!s.isInteger(e.id))return"id: integer expected";if(!s.isString(e.serviceName))return"serviceName: string expected";if(null!=e.executors&&e.hasOwnProperty("executors")){if(!Array.isArray(e.executors))return"executors: array expected";for(var t=0;t<e.executors.length;++t){var r=a.webworker_rpc.Executor.verify(e.executors[t]);if(r)return"executors."+r}}return null},t.fromObject=function(e){if(e instanceof a.webworker_rpc.RegistryPacket)return e;var t=new a.webworker_rpc.RegistryPacket;if(null!=e.id&&(t.id=0|e.id),null!=e.serviceName&&(t.serviceName=String(e.serviceName)),e.executors){if(!Array.isArray(e.executors))throw TypeError(".webworker_rpc.RegistryPacket.executors: array expected");t.executors=[];for(var r=0;r<e.executors.length;++r){if("object"!=typeof e.executors[r])throw TypeError(".webworker_rpc.RegistryPacket.executors: object expected");t.executors[r]=a.webworker_rpc.Executor.fromObject(e.executors[r])}}return t},t.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.executors=[]),t.defaults&&(r.id=0,r.serviceName=""),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),null!=e.serviceName&&e.hasOwnProperty("serviceName")&&(r.serviceName=e.serviceName),e.executors&&e.executors.length){r.executors=[];for(var n=0;n<e.executors.length;++n)r.executors[n]=a.webworker_rpc.Executor.toObject(e.executors[n],t)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),n.WebWorkerMessage=function(){function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var r;return t.prototype.key="",t.prototype.dataRegistry=null,t.prototype.dataExecute=null,t.prototype.dataResponse=null,Object.defineProperty(t.prototype,"data",{get:s.oneOfGetter(r=["dataRegistry","dataExecute","dataResponse"]),set:s.oneOfSetter(r)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),t.uint32(10).string(e.key),null!=e.dataRegistry&&Object.hasOwnProperty.call(e,"dataRegistry")&&a.webworker_rpc.RegistryPacket.encode(e.dataRegistry,t.uint32(18).fork()).ldelim(),null!=e.dataExecute&&Object.hasOwnProperty.call(e,"dataExecute")&&a.webworker_rpc.ExecutePacket.encode(e.dataExecute,t.uint32(26).fork()).ldelim(),null!=e.dataResponse&&Object.hasOwnProperty.call(e,"dataResponse")&&a.webworker_rpc.ResponesPacket.encode(e.dataResponse,t.uint32(34).fork()).ldelim(),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof o||(e=o.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new a.webworker_rpc.WebWorkerMessage;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.key=e.string();break;case 2:n.dataRegistry=a.webworker_rpc.RegistryPacket.decode(e,e.uint32());break;case 3:n.dataExecute=a.webworker_rpc.ExecutePacket.decode(e,e.uint32());break;case 4:n.dataResponse=a.webworker_rpc.ResponesPacket.decode(e,e.uint32());break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("key"))throw s.ProtocolError("missing required \'key\'",{instance:n});return n},t.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(!s.isString(e.key))return"key: string expected";if(null!=e.dataRegistry&&e.hasOwnProperty("dataRegistry")&&(t.data=1,r=a.webworker_rpc.RegistryPacket.verify(e.dataRegistry)))return"dataRegistry."+r;if(null!=e.dataExecute&&e.hasOwnProperty("dataExecute")){if(1===t.data)return"data: multiple values";if(t.data=1,r=a.webworker_rpc.ExecutePacket.verify(e.dataExecute))return"dataExecute."+r}if(null!=e.dataResponse&&e.hasOwnProperty("dataResponse")){if(1===t.data)return"data: multiple values";var r;if(t.data=1,r=a.webworker_rpc.ResponesPacket.verify(e.dataResponse))return"dataResponse."+r}return null},t.fromObject=function(e){if(e instanceof a.webworker_rpc.WebWorkerMessage)return e;var t=new a.webworker_rpc.WebWorkerMessage;if(null!=e.key&&(t.key=String(e.key)),null!=e.dataRegistry){if("object"!=typeof e.dataRegistry)throw TypeError(".webworker_rpc.WebWorkerMessage.dataRegistry: object expected");t.dataRegistry=a.webworker_rpc.RegistryPacket.fromObject(e.dataRegistry)}if(null!=e.dataExecute){if("object"!=typeof e.dataExecute)throw TypeError(".webworker_rpc.WebWorkerMessage.dataExecute: object expected");t.dataExecute=a.webworker_rpc.ExecutePacket.fromObject(e.dataExecute)}if(null!=e.dataResponse){if("object"!=typeof e.dataResponse)throw TypeError(".webworker_rpc.WebWorkerMessage.dataResponse: object expected");t.dataResponse=a.webworker_rpc.ResponesPacket.fromObject(e.dataResponse)}return t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key=""),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.dataRegistry&&e.hasOwnProperty("dataRegistry")&&(r.dataRegistry=a.webworker_rpc.RegistryPacket.toObject(e.dataRegistry,t),t.oneofs&&(r.data="dataRegistry")),null!=e.dataExecute&&e.hasOwnProperty("dataExecute")&&(r.dataExecute=a.webworker_rpc.ExecutePacket.toObject(e.dataExecute,t),t.oneofs&&(r.data="dataExecute")),null!=e.dataResponse&&e.hasOwnProperty("dataResponse")&&(r.dataResponse=a.webworker_rpc.ResponesPacket.toObject(e.dataResponse,t),t.oneofs&&(r.data="dataResponse")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),n),a})?n.apply(t,o):n)||(e.exports=i)},function(e,t,r){"use strict";(function(e){var n=t;function o(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&o(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(7),n.base64=r(8),n.EventEmitter=r(9),n.float=r(10),n.inquire=r(11),n.utf8=r(12),n.pool=r(13),n.LongBits=r(14),n.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),n.global=n.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=o,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}).call(this,r(6))},function(e,t,r){"use strict";e.exports=f;var n,o=r(1),i=o.LongBits,s=o.base64,a=o.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var p=function(){return o.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}};function h(e,t,r){t[r]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function w(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}f.create=p(),f.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(f.alloc=o.pool(f.alloc,o.Array.prototype.subarray)),f.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},d.prototype=Object.create(c.prototype),d.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(y,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=i.from(e);return this._push(y,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(y,t.length(),t)},f.prototype.bool=function(e){return this._push(h,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(w,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=i.from(e);return this._push(w,4,t.lo)._push(w,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var v=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(o.isString(e)){var r=f.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},f.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(h,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},f._configure=function(e){n=e,f.create=p(),n._configure()}},function(e,t,r){"use strict";e.exports=c;var n,o=r(1),i=o.LongBits,s=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},f=function(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new n(e):l(e)})(e)}:l};function p(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new i(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=f(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=f(),n._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return d.call(this)[t](!0)},sfixed64:function(){return d.call(this)[t](!1)}})}},function(e,t,r){"use strict";e.exports=r(5)},function(e,t,r){"use strict";var n=t;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(2),n.BufferWriter=r(15),n.Reader=r(3),n.BufferReader=r(16),n.util=r(1),n.rpc=r(17),n.roots=r(19),n.configure=o,o()},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),n=0,o=2,i=!0;for(;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,s){r[n]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,s(e))}}))}},function(e,t,r){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var o=new Array(64),i=new Array(123),s=0;s<64;)i[o[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(e,t,r){for(var n,i=null,s=[],a=0,c=0;t<r;){var u=e[t++];switch(c){case 0:s[a++]=o[u>>2],n=(3&u)<<4,c=1;break;case 1:s[a++]=o[n|u>>4],n=(15&u)<<2,c=2;break;case 2:s[a++]=o[n|u>>6],s[a++]=o[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=o[n],s[a++]=61,1===c&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};n.decode=function(e,t,r){for(var n,o=r,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&s>1)break;if(void 0===(c=i[c]))throw Error("invalid encoding");switch(s){case 0:n=c,s=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,s=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,s=3;break;case 3:t[r++]=(3&n)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return r-o},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,r){"use strict";function n(){this._listeners={}}e.exports=n,n.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},n.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},function(e,t,r){"use strict";function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,s=8388607&n;return 255===i?s?NaN:o*(1/0):0===i?1401298464324817e-60*o*s:o*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,o),e.writeFloatBE=t.bind(null,i),e.readFloatLE=r.bind(null,s),e.readFloatBE=r.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,r,n,o,i){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((s<<31|2146435072)>>>0,o,i+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,o,i+t),e((s<<31|a/4294967296)>>>0,o,i+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,o,i+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,o,i+r)}}}function r(e,t,r,n,o){var i=e(n,o+t),s=e(n,o+r),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=r.bind(null,s,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function o(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=n(n)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,r){"use strict";var n=t;n.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],s=0;t<r;)(n=e[t++])<128?i[s++]=n:n>191&&n<224?i[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(n>>10),i[s++]=56320+(1023&n)):i[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},n.write=function(e,t,r){for(var n,o,i=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&o),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=r||8192,o=n>>>1,i=null,s=n;return function(r){if(r<1||r>o)return e(r);s+r>n&&(i=e(n),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},function(e,t,r){"use strict";e.exports=o;var n=r(1);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=o.zeroHash="\\0\\0\\0\\0\\0\\0\\0\\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===s?i:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){"use strict";e.exports=i;var n=r(2);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(1);function i(){n.call(this)}function s(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},function(e,t,r){"use strict";e.exports=i;var n=r(3);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(1);function i(e){n.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},function(e,t,r){"use strict";t.Service=r(18)},function(e,t,r){"use strict";e.exports=o;var n=r(1);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,r,o,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof o))try{r=o[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";r.r(t),r.d(t,"webworker_rpc",(function(){return o.webworker_rpc})),r.d(t,"RPCEmitter",(function(){return j})),r.d(t,"RPCPeer",(function(){return A})),r.d(t,"LinkListener",(function(){return M})),r.d(t,"ExportAll",(function(){return x})),r.d(t,"Export",(function(){return E})),r.d(t,"RemoteListener",(function(){return O})),r.d(t,"RPCMessage",(function(){return a})),r.d(t,"RPCRegistryPacket",(function(){return c})),r.d(t,"RPCExecutePacket",(function(){return u})),r.d(t,"RPCResponsePacket",(function(){return p})),r.d(t,"RPCExecutor",(function(){return l})),r.d(t,"RPCParam",(function(){return f}));var n,o=r(0),i=function(){function e(){var e=this;this.resolver=null,this.rejecter=null,this.set=function(t,r){if(void 0===r&&(r=null),e.resolver){var n=new Error("Resolver already exists");if(r)return r(n);throw n}e.resolver=t,e.rejecter=r},this.promise=function(t){return new Promise((function(r,n){if(e.set(r,n),t)try{t()}catch(t){e.reject(t)}}))},this.resolve=function(t){if(!e.resolver){var r=new Error("No Resolver");if(e.rejecter)return e.rejecter(r);throw r}e.resolver(t),e.resolver=null,e.rejecter=null},this.reject=function(t){if(!e.rejecter)throw t;e.rejecter(t),e.resolver=null,e.rejecter=null}}return e.create=function(){return new e},e}(),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(t,r){var n=e.call(this)||this;if(n.encodeable=!0,n.key=t,r instanceof c)n.dataRegistry=r;else if(r instanceof u){n.dataExecute=r,r.header.remoteExecutor.hasUnknownParam&&(n.encodeable=!1)}else r instanceof p&&(n.dataResponse=r,r.hasUnknownParam&&(n.encodeable=!1));return n}return s(t,e),t}(o.webworker_rpc.WebWorkerMessage),c=function(e){function t(t,r,n){var o=e.call(this)||this;return o.id=t,o.serviceName=r,o.executors=n,o}return s(t,e),t.checkType=function(e){if(!e)return!1;if(!("id"in e))return!1;if(!("serviceName"in e))return!1;if("executors"in e){if(!Array.isArray(e.executors))return!1;if(e.executors.length>0)for(var t=0,r=e.executors;t<r.length;t++){var n=r[t];if(!l.checkType(n))return!1}}return!0},t}(o.webworker_rpc.RegistryPacket),u=function(e){function t(t,r,n,i,s){var a=e.call(this)||this;return a.id=t,a.header=new o.webworker_rpc.Header,a.header.serviceName=r,a.header.remoteExecutor=new l(n,i,s),a}return s(t,e),t.checkType=function(e){if(!e)return!1;if(!("id"in e))return!1;if(!("header"in e))return!1;var t=e.header;if(!("serviceName"in t))return!1;if(!("remoteExecutor"in t))return!1;var r=t.remoteExecutor;return!!l.checkType(r)},t}(o.webworker_rpc.ExecutePacket),l=function(e){function t(t,r,n){var i=e.call(this)||this;if(i.hasUnknownParam=!1,i.method=t,r&&(i.context=r),n){for(var s=0,a=n;s<a.length;s++){if(a[s].t===o.webworker_rpc.ParamType.UNKNOWN){i.hasUnknownParam=!0;break}}i.params=n}return i}return s(t,e),t.checkType=function(e){if(!e)return!1;if(!("method"in e))return!1;if("params"in e){if(!Array.isArray(e.params))return!1;if(e.params.length>0)for(var t=0,r=e.params;t<r.length;t++){var n=r[t];if(!f.checkType(n))return!1}}return!0},t}(o.webworker_rpc.Executor),f=function(e){function t(t,r){var n=e.call(this)||this;switch(n.t=t,t){case o.webworker_rpc.ParamType.UNKNOWN:n.valUnknown=r;break;case o.webworker_rpc.ParamType.str:n.valStr=r;break;case o.webworker_rpc.ParamType.boolean:n.valBool=r;break;case o.webworker_rpc.ParamType.num:n.valNum=r;break;case o.webworker_rpc.ParamType.unit8array:n.valBytes=r;break;case o.webworker_rpc.ParamType.executor:n.valExecutor=r;break;default:console.error("unkonw type : ",t)}return n}return s(t,e),t.checkType=function(e){return!!e&&"t"in e},t.getValue=function(e){switch(e.t){case o.webworker_rpc.ParamType.UNKNOWN:return e.valUnknown;case o.webworker_rpc.ParamType.boolean:return e.valBool;case o.webworker_rpc.ParamType.num:return e.valNum;case o.webworker_rpc.ParamType.str:return e.valStr;case o.webworker_rpc.ParamType.unit8array:return e.valBytes;case o.webworker_rpc.ParamType.executor:return e.valExecutor;default:return null}},t.createByValue=function(e){return null==e?new t(o.webworker_rpc.ParamType.UNKNOWN,e):"string"==typeof e?new t(o.webworker_rpc.ParamType.str,e):"boolean"==typeof e?new t(o.webworker_rpc.ParamType.boolean,e):"number"==typeof e?new t(o.webworker_rpc.ParamType.num,e):e.constructor===Uint8Array?new t(o.webworker_rpc.ParamType.unit8array,e):e instanceof o.webworker_rpc.Executor?new t(o.webworker_rpc.ParamType.executor,e):new t(o.webworker_rpc.ParamType.UNKNOWN,e)},t}(o.webworker_rpc.Param),p=function(e){function t(t,r,n){var i=e.call(this)||this;return i.hasUnknownParam=!1,i.id=t,r&&(i.val=r,r.t===o.webworker_rpc.ParamType.UNKNOWN&&(i.hasUnknownParam=!0)),n&&(i.err=n),i}return s(t,e),t.checkType=function(e){if(!e)return!1;if(!("id"in e))return!1;if("vals"in e){if(!Array.isArray(e.vals))return!1;if(e.vals.length>0)for(var t=0,r=e.vals;t<r.length;t++){var n=r[t];if(!f.checkType(n))return!1}}return!0},t}(o.webworker_rpc.ResponesPacket),h=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),d=function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},w=[],v=new Map,b=[],m=new Map,g=function(e,t,r,n){var o="function"==typeof e?e.name+".constructor":e.constructor.name,i=[];if(null!=n)for(var s=0,a=n;s<a.length;s++){var c=a[s];i.push(new f(c))}k(new l(t,o,i))},k=function(e){return w.findIndex((function(t){return t.method===e.method&&t.context===e.context}))<0&&(w.push(e),!0)};function x(){return function(e){return b.push(e.name),e}}function E(e){return function(t,r,n){null!=n?g(t,r,0,e):function(e,t){var r="function"==typeof e?e.name+".constructor":e.constructor.name;m.has(r)||m.set(r,[]),m.get(r).push(t)}(t,r)}}var _=new Map;function O(e,t,r,n){return function(o,i,s){g(o,i,0,n);var a="function"==typeof o?o.name+".constructor":o.constructor.name,c=[];if(null!=n)for(var u=0,p=n;u<p.length;u++){var h=p[u];c.push(new f(h))}var d=null;d=c.length>0?new l(i,a,c):new l(i,a),_.has(e)||_.set(e,[]),_.get(e).push({context:t,event:r,executor:d})}}var P=function(e){if("undefined"!=typeof MessageChannel){var t=new Map,r=null,n=function(e,n){t.has(e)||(0===t.size&&(r=n),t.set(e,n),n.onmessage=function(e){var t=e.data.key;if(null!=t)switch(t){case"requestLink":o(e);break;case"unlink":i(e);break;case"destroyManager":s(e)}})},o=function(e){var o=e.data,i=o.serviceName,s=o.workerName,a=o.workerUrl,c=new MessageChannel;if(t.has(i))if(t.get(i).postMessage({key:"link",workers:[s]},[c.port1]),t.has(s))t.get(s).postMessage({key:"link",workers:[i]},[c.port2]);else{if(null==a)return void console.error("worker url undefined");var u=new MessageChannel;if(null==r)return;r.postMessage({key:"proxyCreateWorker",workerName:s,workerUrl:a,msg:{key:"link",workers:["__MANAGER",i]}},[u.port2,c.port2]),n(s,u.port1)}else console.error("__MANAGER not yet link to "+i)},i=function(e){var r=e.data.worker;t.has(r)&&t.delete(r)},s=function(e){for(var r=0,n=Array.from(t.keys());r<n.length;r++){var o=n[r];t.get(o).postMessage({key:"unlink",worker:"__MANAGER"})}console.log("webworker-rpc: close manager worker"),self.close()};switch(e.data.key){case"link":!function(e){for(var t=e.data.workers,r=e.ports,o=0;o<r.length;o++){var i=r[o],s=t[o];n(s,i)}}(e)}}else console.error("MessageChannel undefined")},R=["prototype","__proto__","self","worker","remote","getInstance","_instance"],S=["destroy"];function N(){return function(e,t,r){for(var n in e)R.includes(n)||R.push(n);for(var o=0,i=e.constructor;o<i.length;o++){n=i[o];R.includes(n)||R.push(n)}}}var j=function(){function e(){this.emitFunctions=new Map,v.set(this.constructor.name,this),this.exportFunction("on",[new f(o.webworker_rpc.ParamType.str),new f(o.webworker_rpc.ParamType.executor),new f(o.webworker_rpc.ParamType.str)]),this.exportFunction("off",[new f(o.webworker_rpc.ParamType.str)])}return e.prototype.on=function(e,t,r){this.emitFunctions.has(e)||this.emitFunctions.set(e,[]),this.emitFunctions.get(e).push({worker:r,executor:t})},e.prototype.off=function(e,t,r){if(this.emitFunctions.has(e))if(t&&t instanceof l&&r&&"string"==typeof r){var n=this.emitFunctions.get(e),o=n.findIndex((function(e){return e.worker===r&&e.executor===t}));o>0&&n.splice(o,0)}else this.emitFunctions.delete(e)},e.prototype.emit=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(this.emitFunctions.has(e))if(A.getInstance())for(var o=this.emitFunctions.get(e),i=0,s=o;i<s.length;i++){var a=s[i];a.worker in A.getInstance().remote&&(t=A.getInstance().remote[a.worker][a.executor.context])[a.executor.method].apply(t,r)}else console.error("no peer created")},e.prototype.exportFunction=function(e,t){return k(new l(e,this.constructor.name,t))},d([N(),y("design:type",Function),y("design:paramtypes",[String,l,String]),y("design:returntype",void 0)],e.prototype,"on",null),e}(),A=function(e){function t(r){var n=e.call(this)||this;return n.MESSAGEKEY_LINK="link",n.MESSAGEKEY_REQUESTLINK="requestLink",n.MESSAGEKEY_ADDREGISTRY="addRegistry",n.MESSAGEKEY_GOTREGISTRY="gotRegistry",n.MESSAGEKEY_EXECUTE="execute",n.MESSAGEKEY_RESPOND="respond",n.MESSAGEKEY_UNLINK="unlink",n.MESSAGEKEY_PROXYCREATEWORKER="proxyCreateWorker",n.MESSAGEKEY_DESTROYMANAGER="destroyManager",n.exported=!1,"undefined"==typeof MessageChannel?(console.error("MessageChannel undefined"),n):null==r?(console.error("param <name> error"),n):t._instance?(console.error("duplicate RPCPeer created: "+r+" & "+t._instance.name),n):(t._instance=n,console.log("webworker-rpc: new peer: ",r),n.exportFunction("destroy"),n.name=r,n.worker=self,n.registry=new Map,n.channels=new Map,n.linkListeners=new Map,n.linkTasks=[],n.resolvers=new Map,n.registryPackID=0,n.resolverID=0,n.syncRegistryListeners=new Map,n.worker.addEventListener("message",(function(e){var t=e.data.key;void 0!==t&&t===n.MESSAGEKEY_LINK&&n.onMessage_Link(e)})),n)}return h(t,e),t.getInstance=function(){return t._instance},t.prototype.linkTo=function(e,t){if(this.linkListeners.has(e))return console.warn("already requested link to "+e),this.linkListeners.get(e);var r=new M(this.name,e);if(this.linkListeners.set(e,r),!this.channels.has("__MANAGER")){var n=this.worker.name;if(void 0!==n&&n===this.name)return this.linkTasks.push({workerName:e,workerUrl:t}),r;if("undefined"==typeof Worker)return void console.error("Worker undefined! can not create manager worker.");var o=this.getManagerWorkerURL(),i=new Worker(o),s=new MessageChannel;i.postMessage({key:this.MESSAGEKEY_LINK,workers:[this.name]},[s.port2]),this.addLink("__MANAGER",s.port1)}return this.channels.get("__MANAGER").postMessage({key:this.MESSAGEKEY_REQUESTLINK,serviceName:this.name,workerName:e,workerUrl:t}),r},t.prototype.destroyManagerWorker=function(){this.channels.has("__MANAGER")&&this.channels.get("__MANAGER").postMessage({key:this.MESSAGEKEY_DESTROYMANAGER})},t.prototype.destroy=function(){for(var e=0,r=Array.from(this.channels.keys());e<r.length;e++){var n=r[e];if(_.has(n))for(var o=0,i=_.get(n);o<i.length;o++){var s=i[o];this.remote[n][s.context].off(s.event,s.executor,this.name)}this.channels.get(n).postMessage({key:this.MESSAGEKEY_UNLINK,worker:this.name})}void 0!==t._instance&&null!==t._instance&&(t._instance=null),console.log("webworker-rpc: close "+this.name),self.close()},t.prototype.exportProperty=function(e,t,r){if(null==r)for(var n in t){if(Object.prototype.hasOwnProperty.call(t,n))t[n]===e&&(r=n)}if(0!==r.length){t[r]!==e&&(void 0!==t[r]&&null!==t[r]&&console.warn(r+" exist, replaced"),t[r]=e);for(var o="",i=0,s=Array.from(v.keys());i<s.length;i++){var a=s[i];if(v.get(a)===t){o=a;break}}var u=o;if(0===o.length){if(u=t.constructor.name,v.has(u))return void console.error("context name <"+u+"> exist");v.set(u,t)}var l=this.exportObject(e,u+"."+r,!1),f=Array.from(this.channels.keys());this.registryPackID++;var p=new B(this.registryPackID,f);this.syncRegistryListeners.set(this.registryPackID,p);for(var h=0,d=f;h<d.length;h++){a=d[h];this.postRegistry(a,new c(this.registryPackID,this.name,l))}return p}console.error(e+" is not in "+t)},t.prototype.onWorkerUnlinked=function(e){console.log(this.name+" onWorkerUnlinked: ",e)},t.prototype.addLink=function(e,t){var r=this;if(this.channels.has(e))this.registry.has(e)&&this.updateLinkState(e);else if(this.channels.set(e,t),t.onmessage=function(e){var t=e.data.key;if(null!=t)switch(t){case r.MESSAGEKEY_LINK:r.onMessage_Link(e);break;case r.MESSAGEKEY_ADDREGISTRY:r.onMessage_AddRegistry(e);break;case r.MESSAGEKEY_GOTREGISTRY:r.onMessage_GotRegistry(e);break;case r.MESSAGEKEY_EXECUTE:r.onMessage_Execute(e);break;case r.MESSAGEKEY_RESPOND:r.onMessage_Respond(e);break;case r.MESSAGEKEY_UNLINK:r.onMessage_Unlink(e);break;case r.MESSAGEKEY_PROXYCREATEWORKER:r.onMessage_ProxyCreateWorker(e)}},this.updateRegistry(),this.postRegistry(e,new c(this.registryPackID,this.name,w)),"__MANAGER"===e)for(var n=this.linkTasks.length,o=0;o<n;o++){var i=this.linkTasks.pop();this.channels.get("__MANAGER").postMessage({key:this.MESSAGEKEY_REQUESTLINK,serviceName:this.name,workerName:i.workerName,workerUrl:i.workerUrl})}},t.prototype.execute=function(e,t,r,n){var s=this;if(this.registry.has(e)){var c=this.registry.get(e).find((function(e){return e.context===r&&e.method===t}));if(null!=c){var l=c.params;if(l&&l.length>0){if(!n||0===n.length)return void console.error("method <"+t+"> execute error! ","param.length = 0");if(l.length>n.length)return void console.error("method <"+t+"> execute error! ","param not enough");for(var f=0;f<l.length;f++){var p=l[f],h=n[f];if(p.t!==h.t)return void console.error("method <"+t+"> execute error! ","param type not match, registry: <",o.webworker_rpc.ParamType[p.t],">; execute: <",o.webworker_rpc.ParamType[h.t],">")}}var d=this.resolverID++,y=new i;return this.resolvers.set(d,y),y.promise((function(){var i=new a(s.MESSAGEKEY_EXECUTE,new u(d,s.name,t,r,n));if(i.encodeable){var c=o.webworker_rpc.WebWorkerMessage.encode(i).finish().buffer;s.channels.has(e)&&s.channels.get(e).postMessage(i,[].concat(c.slice(0)))}else s.channels.has(e)&&s.channels.get(e).postMessage(i)}))}console.error("method <"+t+"> not registed")}else console.error("worker <"+e+"> not registed")},t.prototype.respond=function(e,t,r,n){var i=new a(this.MESSAGEKEY_RESPOND,new p(t,r,n));if(i.encodeable){var s=o.webworker_rpc.WebWorkerMessage.encode(i).finish().buffer;this.channels.has(e)&&this.channels.get(e).postMessage(i,[].concat(s.slice(0)))}else this.channels.has(e)&&this.channels.get(e).postMessage(i)},t.prototype.updateRegistry=function(){if(!this.exported){this.exported=!0;for(var e=0,t=b;e<t.length;e++){var r=t[e];v.has(r)?this.exportObject(v.get(r),r):console.error("ExportAll only decorate Emitter!")}for(var n=0,o=Array.from(m.keys());n<o.length;n++){var i=o[n],s=i.split("."),a=s[0];if(v.has(a))for(var c=0,u=m.get(i);c<u.length;c++){for(var l=u[c],f=v.get(a),p=1;p<s.length;p++){f=f[s[p]]}l in f?this.exportObject(f[l],i+"."+l,!1):console.error(l+" not in ",f)}else console.error("Export only decorate Emitter!")}}},t.prototype.postRegistry=function(e,t){if("__MANAGER"!==e){var r=new a(this.MESSAGEKEY_ADDREGISTRY,t),n=o.webworker_rpc.WebWorkerMessage.encode(r).finish().buffer;if(this.channels.has(e))this.channels.get(e).postMessage(r,[].concat(n.slice(0)))}},t.prototype.onMessage_Link=function(e){for(var t=e.data.workers,r=e.ports,n=0;n<r.length;n++){var o=r[n],i=t[n];this.addLink(i,o)}},t.prototype.onMessage_AddRegistry=function(e){var t=e.data.dataRegistry;if(null!=t)if(c.checkType(t)){var r=t;this.registry.has(r.serviceName)||this.registry.set(r.serviceName,[]);var n=this.registry.get(r.serviceName).concat(r.executors);if(this.registry.set(r.serviceName,n),this.addRegistryProperty(r),this.channels.has(r.serviceName))this.channels.get(r.serviceName).postMessage({key:this.MESSAGEKEY_GOTREGISTRY,worker:this.name,id:r.id});if(this.updateLinkState(r.serviceName),_.has(r.serviceName)){for(var o=0,i=_.get(r.serviceName);o<i.length;o++){var s=i[o];this.remote[r.serviceName][s.context].on(s.event,s.executor,this.name)}_.delete(r.serviceName)}}else console.warn("<data> type error: ",t);else console.warn("<data> not in ev.data")},t.prototype.onMessage_GotRegistry=function(e){var t=e.data,r=t.worker,n=t.id;this.linkListeners.has(r)&&this.linkListeners.get(r).setPortReady(r),this.syncRegistryListeners.has(n)&&this.syncRegistryListeners.get(n).workerGotRegistry(r)},t.prototype.onMessage_Execute=function(e){var t=this,r=e.data.dataExecute;if(null!=r)if(u.checkType(r)){var n=r,o=n.id,i=n.header.serviceName,s=n.header.remoteExecutor,a=[];if(void 0!==s.params&&null!==s.params)for(var c=0,l=s.params;c<l.length;c++){var p=l[c],h=f.getValue(p);a.push(h)}var d=this.executeFunctionByName(s.method,s.context,a);d instanceof Promise?d.then((function(e){t.handlerExcuteResult(i,o,e)})):this.handlerExcuteResult(i,o,d)}else console.warn("<data> type error: ",r);else console.warn("<data> not in ev.data")},t.prototype.onMessage_Respond=function(e){var t=e.data.dataResponse;if(null!=t)if(p.checkType(t)){var r=t;if(this.resolvers.has(r.id)){var n=this.resolvers.get(r.id);if(this.resolvers.delete(r.id),void 0!==r.err&&null!==r.err)return console.error("get error response: ",r.err),void n.reject(r.err);void 0===r.val||null===r.val?n.resolve():n.resolve(f.getValue(r.val))}else console.error("respones.id undefined: ",r.id)}else console.warn("<data> type error: ",t);else console.warn("<data> not in ev.data")},t.prototype.onMessage_Unlink=function(e){var t=e.data.worker;this.channels.has(t)&&this.channels.delete(t),this.registry.has(t)&&this.registry.delete(t),void 0!==this.remote&&null!==this.remote&&t in this.remote&&delete this.remote[t],this.onWorkerUnlinked(t)},t.prototype.onMessage_ProxyCreateWorker=function(e){var t=e.data,r=t.workerName,n=t.workerUrl,o=t.msg;if("undefined"!=typeof Worker){console.log("webworker-rpc ProxyCreateWorker: location: ",location);var i=location.origin+location.pathname;i.endsWith("index.html")?i=i.slice(0,-10):i.endsWith("index.html/")&&(i=i.slice(0,-11)+"/");var s=i+n,a=new Worker(s,{name:r});console.log(this.name+" create worker: ",s,r);for(var c=[],u=0,l=e.ports;u<l.length;u++){var f=l[u];c.push(f)}a.postMessage(o,c)}else console.error("Worker undefined! can not create worker")},t.prototype.exportObject=function(e,t,r){void 0===r&&(r=!0);var n=[];for(var o in e)if(!R.includes(o)||S.includes(o)){var i=e[o];if("function"==typeof i){var s=new l(o,t);k(s)&&n.push(s)}else if(r&&i instanceof Object){var a=t.concat(".",o);n=n.concat(this.exportObject(i,a))}}var c=t.split(".");if("constructor"!==c[c.length-1]){var u=e.constructor,f=this.exportObject(u,t+".constructor",r);n=n.concat(f)}return n},t.prototype.executeFunctionByName=function(e,t,r){var n=this.getContext(t);return null==n?(console.error("excute function <"+e+"> error, no context <"+t+"> exist"),null):n[e].apply(n,r)},t.prototype.getContext=function(e){var t=e.split(".");if(!v.has(t[0]))return console.error("no context exist: ",t[0]),null;for(var r=v.get(t[0]),n=1;n<t.length;n++){var o=t[n];if(!(o in r))return console.error(o+" is undefined in ",r),null;r=r[o]}return r},t.prototype.addRegistryProperty=function(e){var t=this;void 0!==this.remote&&null!==this.remote||(this.remote={});var r=e.serviceName,n=e.executors,o={};r in this.remote?o=this.remote[r]:T(this.remote,r,o);for(var i=function(e){for(var n=e.context.split("."),i=o,s=0,a=n;s<a.length;s++){var c=a[s];"constructor"!==c&&(c in i||T(i,c,{}),i=i[c])}T(i,e.method,(function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=[];if(null!=n)for(var s=0,a=n;s<a.length;s++){var c=a[s];i.push(f.createByValue(c))}return t.execute(r,e.method,e.context,i)}))},s=0,a=n;s<a.length;s++){i(a[s])}console.log(this.name+".remote: ",this.remote)},t.prototype.getManagerWorkerURL=function(){var e=P.toString(),t=new Blob(["\\n            self.addEventListener(\'message\', function(e) {\\n                (("+e+")(e));\\n            });\\n        "],{type:"text/javascript"});return URL.createObjectURL(t)},t.prototype.updateLinkState=function(e){this.linkListeners.has(e)&&this.linkListeners.get(e).setPortReady(this.name)},t.prototype.handlerExcuteResult=function(e,t,r){this.respond(e,t,f.createByValue(r))},d([N(),y("design:type",Function),y("design:paramtypes",[String,String]),y("design:returntype",M)],t.prototype,"linkTo",null),t}(j),M=function(){function e(e,t){this.port1="",this.port2="",this.port1Ready=!1,this.port2Ready=!1,this.port1=e,this.port2=t}return e.prototype.onceReady=function(e){this.readyFunc=e},e.prototype.setPortReady=function(e){this.port1!==e&&this.port2!==e||(this.port1Ready||(this.port1Ready=this.port1===e),this.port2Ready||(this.port2Ready=this.port2===e),this.port1Ready&&this.port2Ready&&this.readyFunc&&(this.readyFunc(),this.readyFunc=null))},e}(),B=function(){function e(e,t){this.id=e,this.workersState=new Map;for(var r=0,n=t;r<n.length;r++){var o=n[r];"__MANAGER"!==o&&this.workersState.set(o,!1)}}return e.prototype.onceReady=function(e){this.readyFunc=e},e.prototype.workerGotRegistry=function(e){if(this.workersState.has(e)){this.workersState.set(e,!0);for(var t=!0,r=0,n=Array.from(this.workersState.keys());r<n.length;r++){var o=n[r];if(!this.workersState.get(o)){t=!1;break}}t&&this.readyFunc&&(this.readyFunc(),this.readyFunc=null)}},e}();function T(e,t,r){return t in e?(console.error("key exist, add property failed!",e,t),e):(e[t]=r,e)}}])}));\n\n//# sourceURL=webpack://TooqingCore/./node_modules/webworker-rpc/release/index.js?')}}]);