(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("game-core"), require("pixelpai_proto"), require("tooqingui"));
	else if(typeof define === 'function' && define.amd)
		define(["game-core", "pixelpai_proto", "tooqingui"], factory);
	else if(typeof exports === 'object')
		exports["picatown-core"] = factory(require("game-core"), require("pixelpai_proto"), require("tooqingui"));
	else
		root["picatown-core"] = factory(root["game-core"], root["pixelpai_proto"], root["tooqingui"]);
})(window, function(__WEBPACK_EXTERNAL_MODULE_game_core__, __WEBPACK_EXTERNAL_MODULE_pixelpai_proto__, __WEBPACK_EXTERNAL_MODULE_tooqingui__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js":
/*!********************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/net-socket-packet/dist/index.js ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PacketHandler_1 = __webpack_require__(/*! ./src/PacketHandler */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/src/PacketHandler.js\");\nexports.PacketHandler = PacketHandler_1.PacketHandler;\nvar Packet_1 = __webpack_require__(/*! ./src/Packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/src/Packet.js\");\nexports.Packet = Packet_1.Packet;\nexports.PBpacket = Packet_1.PBpacket;\nvar buffer_1 = __webpack_require__(/*! buffer/ */ \"./node_modules/node-libs-browser/node_modules/buffer/index.js\");\nexports.Buffer = buffer_1.Buffer;\n\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/net-socket-packet/dist/index.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/net-socket-packet/dist/src/Packet.js":
/*!*************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/net-socket-packet/dist/src/Packet.js ***!
  \*************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar buffer_1 = __webpack_require__(/*! buffer/ */ \"./node_modules/node-libs-browser/node_modules/buffer/index.js\");\nvar protocols = [];\nvar _S = new String('S').charCodeAt(0), _D = new String('D').charCodeAt(0), _C = new String('C').charCodeAt(0);\nvar PACKET_MAGIC_D = (_S << 8 | _D); //'DS'   default=not zip\nvar PACKET_MAGIC_C = (_S << 8 | _C); //'CS'    zip\nvar HEAD_BYTES_SIZE = 2 + 4 + 4 + 4 + 4;\nvar PacketHeader = /** @class */ (function () {\n    function PacketHeader(op, param) {\n        /**\n         * // --- Header structure --- \\\\\n         * +------------------------------------------------------------+\n         * |    magic   +   uint16  +   2Bytes  +       zip or not      |\n         * +------------------------------------------------------------+\n         * |  body_len  +   uint16  +   2Bytes  +   Packet body length  |\n         * +------------------------------------------------------------+\n         * |    opcode  +   uint32  +   4Bytes  +    operation code     |\n         * +------------------------------------------------------------+\n         * |    uuid    +   uint64  +   4Bytes  +  Connection SessionID |\n         * +------------------------------------------------------------+\n         * |    param   +   uint32  +   4Bytes  +   parameter of packet |\n         * +------------------------------------------------------------+\n         */\n        this._head_len = HEAD_BYTES_SIZE;\n        this._len = 0;\n        this._buf = buffer_1.Buffer.alloc(0);\n        this._offset = 0;\n        this._opcode = 0;\n        this._param = 0;\n        this._magic = PACKET_MAGIC_D;\n        this._uuid = 0; // useless for client\n        if (typeof op == \"number\") {\n            this._opcode = op;\n        }\n        if (typeof param == \"number\") {\n            this._param = param;\n        }\n    }\n    Object.defineProperty(PacketHeader.prototype, \"length\", {\n        get: function () {\n            return this._buf.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PacketHeader.prototype, \"opcode\", {\n        get: function () {\n            return this._opcode;\n        },\n        set: function (op) {\n            this._opcode = op;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PacketHeader.prototype, \"param\", {\n        get: function () {\n            return this._param;\n        },\n        set: function (p) {\n            this._param = p;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PacketHeader.prototype, \"magic\", {\n        get: function () {\n            return this._magic;\n        },\n        set: function (mc) {\n            this._magic = mc;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PacketHeader.prototype, \"uuid\", {\n        get: function () {\n            return this._uuid;\n        },\n        set: function (id) {\n            this._uuid = id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PacketHeader.prototype, \"blen\", {\n        get: function () {\n            return this._len;\n        },\n        set: function (l) {\n            this._len = l;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PacketHeader.prototype.pack = function () {\n        this.clean_buf();\n        this._buf.writeUInt16LE(this._magic, this._offset);\n        this._offset += 2;\n        this._buf.writeUInt32LE(this._len, this._offset);\n        this._offset += 4;\n        this._buf.writeUInt32LE(this._opcode, this._offset);\n        this._offset += 4;\n        this._buf.writeUInt32LE(this._uuid, this._offset);\n        this._offset += 4;\n        this._buf.writeUInt32LE(this._param, this._offset);\n        this._offset += 4;\n        return this._buf;\n    };\n    PacketHeader.prototype.unpack = function (buffer) {\n        if (buffer.length < this._head_len) {\n            throw new Error(\"Packet header length invalid.\");\n        }\n        var offset = 0;\n        this._magic = buffer.readUInt16LE(offset);\n        offset += 2;\n        this._len = buffer.readUInt32LE(offset);\n        offset += 4;\n        this._opcode = buffer.readUInt32LE(offset);\n        offset += 4;\n        // Do not read uuid\n        this._uuid = buffer.readUInt32LE(offset);\n        offset += 4;\n        this._param = buffer.readUInt32LE(offset);\n        offset += 4;\n        return offset;\n    };\n    PacketHeader.prototype.clean_buf = function () {\n        this._buf = buffer_1.Buffer.alloc(this._head_len);\n        this._offset = 0;\n    };\n    return PacketHeader;\n}());\nexports.PacketHeader = PacketHeader;\nvar Packet = /** @class */ (function () {\n    function Packet(opcode, param) {\n        this.mContentBuf = buffer_1.Buffer.alloc(0);\n        this.mHeader = new PacketHeader();\n        this._init(opcode, param);\n    }\n    Object.defineProperty(Packet.prototype, \"header\", {\n        get: function () {\n            return this.mHeader;\n        },\n        set: function (head) {\n            this.mHeader = head;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Packet.prototype, \"opcode\", {\n        get: function () {\n            return this.mHeader.opcode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Packet.prototype, \"content\", {\n        get: function () {\n            return this.mContent;\n        },\n        set: function (content) {\n            this.mContent = content;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Packet.prototype.Serialization = function () {\n        this._contentEncode();\n        var buf;\n        var _a = this._mkHead(), headBuf = _a.headBuf, headLength = _a.headLength;\n        buf = buffer_1.Buffer.concat([headBuf, this.mContentBuf], headLength + this.mContentBuf.length);\n        return buf;\n    };\n    Packet.prototype.Deserialization = function (buf) {\n        if (buf.length < HEAD_BYTES_SIZE) {\n            throw new Error(\"Packet is smaller than header size.\");\n        }\n        var pos = this.mHeader.unpack(buf);\n        var content_len = this.mHeader.blen;\n        this.mContentBuf = buffer_1.Buffer.alloc(content_len);\n        buf.copy(this.mContentBuf, 0, pos);\n        this._contentDecode();\n        return false;\n    };\n    Packet.prototype._init = function (opcode, param) {\n        if (typeof opcode !== 'undefined') {\n            this.mHeader = new PacketHeader(opcode, param);\n        }\n        else {\n            this.mHeader = new PacketHeader();\n        }\n    };\n    Packet.prototype._contentEncode = function () {\n    };\n    Packet.prototype._contentDecode = function () {\n    };\n    Packet.prototype._mkHead = function () {\n        this.mHeader.blen = this.mContentBuf.length;\n        var headBuf = this.mHeader.pack(), headLength = headBuf.length;\n        return { headBuf: headBuf, headLength: headLength };\n    };\n    return Packet;\n}());\nexports.Packet = Packet;\nvar OPCODE_REGXP = /^_(OP_.+)/;\nvar PBpacket = /** @class */ (function (_super) {\n    __extends(PBpacket, _super);\n    function PBpacket(opcode, param) {\n        var _this = _super.call(this) || this;\n        _this._opcode_str = '';\n        _this._pbClass = undefined;\n        _this._init(opcode, param);\n        return _this;\n    }\n    Object.defineProperty(PBpacket.prototype, \"pbClass\", {\n        get: function () {\n            return this._pbClass;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PBpacket.getProtocol = function () {\n        return protocols;\n    };\n    PBpacket.addProtocol = function (proto) {\n        protocols.push(proto);\n    };\n    PBpacket.prototype._init = function (opcode, param) {\n        _super.prototype._init.call(this, opcode, param);\n        this._reflection();\n    };\n    PBpacket.prototype._contentEncode = function () {\n        if (typeof this._pbClass === 'undefined') {\n            // console.warn(new Error(`_pbClass is undefined.`));\n            return;\n        }\n        if (typeof this.mContent === 'undefined') {\n            return console.warn(new Error(\"Content is undefined.\"));\n        }\n        this.mContentBuf = new buffer_1.Buffer(this._pbClass.encode(this.mContent).finish());\n    };\n    ;\n    PBpacket.prototype._contentDecode = function () {\n        // reflection first, transform opcode to protocol class.\n        this._reflection();\n        if (typeof this._pbClass === 'undefined') {\n            // console.warn(new Error(`_pbClass is undefined.`));\n            return;\n        }\n        if (typeof this.mContentBuf === 'undefined') {\n            return console.warn(new Error(\"Content buffer is undefined.\"));\n        }\n        // override the Content object from buff\n        try {\n            this.mContent = this._pbClass.decode(this.mContentBuf);\n        }\n        catch (e) {\n            console.error(\"_contentDecode error: \" + e);\n        }\n    };\n    ;\n    PBpacket.prototype._reflection = function () {\n        var _this = this;\n        var op = this.mHeader.opcode;\n        if (op !== undefined) {\n            // find opcode_T from all protos\n            var self_1 = this;\n            protocols.forEach(function (proto) {\n                if ('OPCODE' in proto && op in proto['OPCODE']) {\n                    self_1._opcode_str = proto['OPCODE'][op];\n                    var class_reg = OPCODE_REGXP.exec(_this._opcode_str);\n                    if (class_reg && class_reg.length > 0) {\n                        var class_T = class_reg[1];\n                        if (class_T in proto) {\n                            self_1._pbClass = proto[class_T];\n                        }\n                    }\n                }\n            });\n            if (typeof this._pbClass !== 'undefined')\n                this._buildContent();\n        }\n    };\n    ;\n    PBpacket.prototype._buildContent = function () {\n        if (typeof this._pbClass !== 'undefined' && 'create' in this._pbClass)\n            this.mContent = new this._pbClass.create();\n    };\n    PBpacket.prototype.toString = function () {\n        return \"OP[\" + this.mHeader.opcode + \"] \" + this._opcode_str + \" - Content_Len: \" + this.mContentBuf.length;\n    };\n    return PBpacket;\n}(Packet));\nexports.PBpacket = PBpacket;\n\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/net-socket-packet/dist/src/Packet.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/net-socket-packet/dist/src/PacketHandler.js":
/*!********************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/net-socket-packet/dist/src/PacketHandler.js ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Collections = __webpack_require__(/*! typescript-collections */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/index.js\");\nvar PacketHandler = /** @class */ (function () {\n    function PacketHandler() {\n        this.mOnReceivedFunDict = new Collections.Dictionary();\n    }\n    PacketHandler.prototype.onPacketArrived = function (packet) {\n        var callbackFun = this.mOnReceivedFunDict.getValue(packet.opcode);\n        if (callbackFun) {\n            try {\n                callbackFun.call(this, packet);\n                console.info(\"Finish handle OPCODE: 0x\" + packet.opcode.toString(16) + \" / \" + packet.opcode.toString());\n                return true;\n            }\n            catch (e) {\n                console.error(e);\n            }\n        }\n        return false;\n    };\n    PacketHandler.prototype.addHandlerFun = function (opcode, fun) {\n        this.mOnReceivedFunDict.setValue(opcode, fun);\n    };\n    return PacketHandler;\n}());\nexports.PacketHandler = PacketHandler;\n\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/net-socket-packet/dist/src/PacketHandler.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/BSTree.js":
/*!******************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/BSTree.js ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BSTreeKV_1 = __webpack_require__(/*! ./BSTreeKV */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/BSTreeKV.js\");\n/**\n * Special-case of the binary search tree in which the search key is equal to the element type.\n * This definition is suitable when the element type can not be split between what defines its order\n * and what does not (eg. primitive types as opposed to indexed records).\n *\n * The table below shows some use-case examples for both interfaces:\n *\n *           element type              |  most suitable interface\n * ------------------------------------|----------------------------\n *    number                           |  BSTree<number>\n *    string                           |  BSTree<string>\n * { order: number, data: string }     |  BSTreeKV<{order: number}, {order: number, data: string}>\n *\n * @see BSTreeKV\n */\nvar BSTree = /** @class */ (function (_super) {\n    __extends(BSTree, _super);\n    function BSTree() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return BSTree;\n}(BSTreeKV_1.default));\nexports.default = BSTree;\n//# sourceMappingURL=BSTree.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/BSTree.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/BSTreeKV.js":
/*!********************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/BSTreeKV.js ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\nvar Queue_1 = __webpack_require__(/*! ./Queue */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Queue.js\");\n/**\n * General binary search tree implementation.\n *\n * This interface allows one to search elements using a subset of their attributes (thus the\n * tree can be used as an index for complex objects).\n * The attributes required to define an ordering in the tree must be defined in the type K.\n * Any additional attribute must be defined in the type V.\n *\n * @see BSTree\n */\nvar BSTreeKV = /** @class */ (function () {\n    /**\n     * Creates an empty binary search tree.\n     * @class <p>A binary search tree is a binary tree in which each\n     * internal node stores an element such that the elements stored in the\n     * left subtree are less than it and the elements\n     * stored in the right subtree are greater.</p>\n     * <p>Formally, a binary search tree is a node-based binary tree data structure which\n     * has the following properties:</p>\n     * <ul>\n     * <li>The left subtree of a node contains only nodes with elements less\n     * than the node's element</li>\n     * <li>The right subtree of a node contains only nodes with elements greater\n     * than the node's element</li>\n     * <li>Both the left and right subtrees must also be binary search trees.</li>\n     * </ul>\n     * <p>If the inserted elements are custom objects a compare function must\n     * be provided at construction time, otherwise the <=, === and >= operators are\n     * used to compare elements. Example:</p>\n     * <pre>\n     * function compare(a, b) {\n     *  if (a is less than b by some ordering criterion) {\n     *     return -1;\n     *  } if (a is greater than b by the ordering criterion) {\n     *     return 1;\n     *  }\n     *  // a must be equal to b\n     *  return 0;\n     * }\n     * </pre>\n     * @constructor\n     * @param {function(Object,Object):number=} compareFunction optional\n     * function used to compare two elements. Must return a negative integer,\n     * zero, or a positive integer as the first argument is less than, equal to,\n     * or greater than the second.\n     */\n    function BSTreeKV(compareFunction) {\n        this.root = null;\n        this.compare = compareFunction || util.defaultCompare;\n        this.nElements = 0;\n    }\n    /**\n     * Adds the specified element to this tree if it is not already present.\n     * @param {Object} element the element to insert.\n     * @return {boolean} true if this tree did not already contain the specified element.\n     */\n    BSTreeKV.prototype.add = function (element) {\n        if (util.isUndefined(element)) {\n            return false;\n        }\n        if (this.insertNode(this.createNode(element)) !== null) {\n            this.nElements++;\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Removes all of the elements from this tree.\n     */\n    BSTreeKV.prototype.clear = function () {\n        this.root = null;\n        this.nElements = 0;\n    };\n    /**\n     * Returns true if this tree contains no elements.\n     * @return {boolean} true if this tree contains no elements.\n     */\n    BSTreeKV.prototype.isEmpty = function () {\n        return this.nElements === 0;\n    };\n    /**\n     * Returns the number of elements in this tree.\n     * @return {number} the number of elements in this tree.\n     */\n    BSTreeKV.prototype.size = function () {\n        return this.nElements;\n    };\n    /**\n     * Returns true if this tree contains the specified element.\n     * @param {Object} element element to search for.\n     * @return {boolean} true if this tree contains the specified element,\n     * false otherwise.\n     */\n    BSTreeKV.prototype.contains = function (element) {\n        if (util.isUndefined(element)) {\n            return false;\n        }\n        return this.searchNode(this.root, element) !== null;\n    };\n    /**\n     * Looks for the value with the provided search key.\n     * @param {Object} element The key to look for\n     * @return {Object} The value found or undefined if it was not found.\n     */\n    BSTreeKV.prototype.search = function (element) {\n        var ret = this.searchNode(this.root, element);\n        if (ret === null) {\n            return undefined;\n        }\n        return ret.element;\n    };\n    /**\n     * Removes the specified element from this tree if it is present.\n     * @return {boolean} true if this tree contained the specified element.\n     */\n    BSTreeKV.prototype.remove = function (element) {\n        var node = this.searchNode(this.root, element);\n        if (node === null) {\n            return false;\n        }\n        this.removeNode(node);\n        this.nElements--;\n        return true;\n    };\n    /**\n     * Executes the provided function once for each element present in this tree in\n     * in-order.\n     * @param {function(Object):*} callback function to execute, it is invoked with one\n     * argument: the element value, to break the iteration you can optionally return false.\n     */\n    BSTreeKV.prototype.inorderTraversal = function (callback) {\n        this.inorderTraversalAux(this.root, callback, {\n            stop: false\n        });\n    };\n    /**\n     * Executes the provided function once for each element present in this tree in pre-order.\n     * @param {function(Object):*} callback function to execute, it is invoked with one\n     * argument: the element value, to break the iteration you can optionally return false.\n     */\n    BSTreeKV.prototype.preorderTraversal = function (callback) {\n        this.preorderTraversalAux(this.root, callback, {\n            stop: false\n        });\n    };\n    /**\n     * Executes the provided function once for each element present in this tree in post-order.\n     * @param {function(Object):*} callback function to execute, it is invoked with one\n     * argument: the element value, to break the iteration you can optionally return false.\n     */\n    BSTreeKV.prototype.postorderTraversal = function (callback) {\n        this.postorderTraversalAux(this.root, callback, {\n            stop: false\n        });\n    };\n    /**\n     * Executes the provided function once for each element present in this tree in\n     * level-order.\n     * @param {function(Object):*} callback function to execute, it is invoked with one\n     * argument: the element value, to break the iteration you can optionally return false.\n     */\n    BSTreeKV.prototype.levelTraversal = function (callback) {\n        this.levelTraversalAux(this.root, callback);\n    };\n    /**\n     * Returns the minimum element of this tree.\n     * @return {*} the minimum element of this tree or undefined if this tree is\n     * is empty.\n     */\n    BSTreeKV.prototype.minimum = function () {\n        if (this.isEmpty() || this.root === null) {\n            return undefined;\n        }\n        return this.minimumAux(this.root).element;\n    };\n    /**\n     * Returns the maximum element of this tree.\n     * @return {*} the maximum element of this tree or undefined if this tree is\n     * is empty.\n     */\n    BSTreeKV.prototype.maximum = function () {\n        if (this.isEmpty() || this.root === null) {\n            return undefined;\n        }\n        return this.maximumAux(this.root).element;\n    };\n    /**\n     * Executes the provided function once for each element present in this tree in inorder.\n     * Equivalent to inorderTraversal.\n     * @param {function(Object):*} callback function to execute, it is\n     * invoked with one argument: the element value, to break the iteration you can\n     * optionally return false.\n     */\n    BSTreeKV.prototype.forEach = function (callback) {\n        this.inorderTraversal(callback);\n    };\n    /**\n     * Returns an array containing all of the elements in this tree in in-order.\n     * @return {Array} an array containing all of the elements in this tree in in-order.\n     */\n    BSTreeKV.prototype.toArray = function () {\n        var array = [];\n        this.inorderTraversal(function (element) {\n            array.push(element);\n            return true;\n        });\n        return array;\n    };\n    /**\n     * Returns the height of this tree.\n     * @return {number} the height of this tree or -1 if is empty.\n     */\n    BSTreeKV.prototype.height = function () {\n        return this.heightAux(this.root);\n    };\n    /**\n     * @private\n     */\n    BSTreeKV.prototype.searchNode = function (node, element) {\n        var cmp = 1;\n        while (node !== null && cmp !== 0) {\n            cmp = this.compare(element, node.element);\n            if (cmp < 0) {\n                node = node.leftCh;\n            }\n            else if (cmp > 0) {\n                node = node.rightCh;\n            }\n        }\n        return node;\n    };\n    /**\n     * @private\n     */\n    BSTreeKV.prototype.transplant = function (n1, n2) {\n        if (n1.parent === null) {\n            this.root = n2;\n        }\n        else if (n1 === n1.parent.leftCh) {\n            n1.parent.leftCh = n2;\n        }\n        else {\n            n1.parent.rightCh = n2;\n        }\n        if (n2 !== null) {\n            n2.parent = n1.parent;\n        }\n    };\n    /**\n     * @private\n     */\n    BSTreeKV.prototype.removeNode = function (node) {\n        if (node.leftCh === null) {\n            this.transplant(node, node.rightCh);\n        }\n        else if (node.rightCh === null) {\n            this.transplant(node, node.leftCh);\n        }\n        else {\n            var y = this.minimumAux(node.rightCh);\n            if (y.parent !== node) {\n                this.transplant(y, y.rightCh);\n                y.rightCh = node.rightCh;\n                y.rightCh.parent = y;\n            }\n            this.transplant(node, y);\n            y.leftCh = node.leftCh;\n            y.leftCh.parent = y;\n        }\n    };\n    /**\n     * @private\n     */\n    BSTreeKV.prototype.inorderTraversalAux = function (node, callback, signal) {\n        if (node === null || signal.stop) {\n            return;\n        }\n        this.inorderTraversalAux(node.leftCh, callback, signal);\n        if (signal.stop) {\n            return;\n        }\n        signal.stop = callback(node.element) === false;\n        if (signal.stop) {\n            return;\n        }\n        this.inorderTraversalAux(node.rightCh, callback, signal);\n    };\n    /**\n     * @private\n     */\n    BSTreeKV.prototype.levelTraversalAux = function (node, callback) {\n        var queue = new Queue_1.default();\n        if (node !== null) {\n            queue.enqueue(node);\n        }\n        node = queue.dequeue() || null;\n        while (node != null) {\n            if (callback(node.element) === false) {\n                return;\n            }\n            if (node.leftCh !== null) {\n                queue.enqueue(node.leftCh);\n            }\n            if (node.rightCh !== null) {\n                queue.enqueue(node.rightCh);\n            }\n            node = queue.dequeue() || null;\n        }\n    };\n    /**\n     * @private\n     */\n    BSTreeKV.prototype.preorderTraversalAux = function (node, callback, signal) {\n        if (node === null || signal.stop) {\n            return;\n        }\n        signal.stop = callback(node.element) === false;\n        if (signal.stop) {\n            return;\n        }\n        this.preorderTraversalAux(node.leftCh, callback, signal);\n        if (signal.stop) {\n            return;\n        }\n        this.preorderTraversalAux(node.rightCh, callback, signal);\n    };\n    /**\n     * @private\n     */\n    BSTreeKV.prototype.postorderTraversalAux = function (node, callback, signal) {\n        if (node === null || signal.stop) {\n            return;\n        }\n        this.postorderTraversalAux(node.leftCh, callback, signal);\n        if (signal.stop) {\n            return;\n        }\n        this.postorderTraversalAux(node.rightCh, callback, signal);\n        if (signal.stop) {\n            return;\n        }\n        signal.stop = callback(node.element) === false;\n    };\n    BSTreeKV.prototype.minimumAux = function (node) {\n        while (node != null && node.leftCh !== null) {\n            node = node.leftCh;\n        }\n        return node;\n    };\n    BSTreeKV.prototype.maximumAux = function (node) {\n        while (node != null && node.rightCh !== null) {\n            node = node.rightCh;\n        }\n        return node;\n    };\n    /**\n     * @private\n     */\n    BSTreeKV.prototype.heightAux = function (node) {\n        if (node === null) {\n            return -1;\n        }\n        return Math.max(this.heightAux(node.leftCh), this.heightAux(node.rightCh)) + 1;\n    };\n    /*\n    * @private\n    */\n    BSTreeKV.prototype.insertNode = function (node) {\n        var parent = null;\n        var position = this.root;\n        while (position !== null) {\n            var cmp = this.compare(node.element, position.element);\n            if (cmp === 0) {\n                return null;\n            }\n            else if (cmp < 0) {\n                parent = position;\n                position = position.leftCh;\n            }\n            else {\n                parent = position;\n                position = position.rightCh;\n            }\n        }\n        node.parent = parent;\n        if (parent === null) {\n            // tree is empty\n            this.root = node;\n        }\n        else if (this.compare(node.element, parent.element) < 0) {\n            parent.leftCh = node;\n        }\n        else {\n            parent.rightCh = node;\n        }\n        return node;\n    };\n    /**\n     * @private\n     */\n    BSTreeKV.prototype.createNode = function (element) {\n        return {\n            element: element,\n            leftCh: null,\n            rightCh: null,\n            parent: null\n        };\n    };\n    return BSTreeKV;\n}());\nexports.default = BSTreeKV;\n//# sourceMappingURL=BSTreeKV.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/BSTreeKV.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Bag.js":
/*!***************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Bag.js ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\nvar Dictionary_1 = __webpack_require__(/*! ./Dictionary */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Dictionary.js\");\nvar Set_1 = __webpack_require__(/*! ./Set */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Set.js\");\nvar Bag = /** @class */ (function () {\n    /**\n     * Creates an empty bag.\n     * @class <p>A bag is a special kind of set in which members are\n     * allowed to appear more than once.</p>\n     * <p>If the inserted elements are custom objects a function\n     * which converts elements to unique strings must be provided. Example:</p>\n     *\n     * <pre>\n     * function petToString(pet) {\n     *  return pet.name;\n     * }\n     * </pre>\n     *\n     * @constructor\n     * @param {function(Object):string=} toStrFunction optional function used\n     * to convert elements to strings. If the elements aren't strings or if toString()\n     * is not appropriate, a custom function which receives an object and returns a\n     * unique string must be provided.\n     */\n    function Bag(toStrFunction) {\n        this.toStrF = toStrFunction || util.defaultToString;\n        this.dictionary = new Dictionary_1.default(this.toStrF);\n        this.nElements = 0;\n    }\n    /**\n     * Adds nCopies of the specified object to this bag.\n     * @param {Object} element element to add.\n     * @param {number=} nCopies the number of copies to add, if this argument is\n     * undefined 1 copy is added.\n     * @return {boolean} true unless element is undefined.\n     */\n    Bag.prototype.add = function (element, nCopies) {\n        if (nCopies === void 0) { nCopies = 1; }\n        if (util.isUndefined(element) || nCopies <= 0) {\n            return false;\n        }\n        if (!this.contains(element)) {\n            var node = {\n                value: element,\n                copies: nCopies\n            };\n            this.dictionary.setValue(element, node);\n        }\n        else {\n            this.dictionary.getValue(element).copies += nCopies;\n        }\n        this.nElements += nCopies;\n        return true;\n    };\n    /**\n     * Counts the number of copies of the specified object in this bag.\n     * @param {Object} element the object to search for..\n     * @return {number} the number of copies of the object, 0 if not found\n     */\n    Bag.prototype.count = function (element) {\n        if (!this.contains(element)) {\n            return 0;\n        }\n        else {\n            return this.dictionary.getValue(element).copies;\n        }\n    };\n    /**\n     * Returns true if this bag contains the specified element.\n     * @param {Object} element element to search for.\n     * @return {boolean} true if this bag contains the specified element,\n     * false otherwise.\n     */\n    Bag.prototype.contains = function (element) {\n        return this.dictionary.containsKey(element);\n    };\n    /**\n     * Removes nCopies of the specified object to this bag.\n     * If the number of copies to remove is greater than the actual number\n     * of copies in the Bag, all copies are removed.\n     * @param {Object} element element to remove.\n     * @param {number=} nCopies the number of copies to remove, if this argument is\n     * undefined 1 copy is removed.\n     * @return {boolean} true if at least 1 element was removed.\n     */\n    Bag.prototype.remove = function (element, nCopies) {\n        if (nCopies === void 0) { nCopies = 1; }\n        if (util.isUndefined(element) || nCopies <= 0) {\n            return false;\n        }\n        if (!this.contains(element)) {\n            return false;\n        }\n        else {\n            var node = this.dictionary.getValue(element);\n            if (nCopies > node.copies) {\n                this.nElements -= node.copies;\n            }\n            else {\n                this.nElements -= nCopies;\n            }\n            node.copies -= nCopies;\n            if (node.copies <= 0) {\n                this.dictionary.remove(element);\n            }\n            return true;\n        }\n    };\n    /**\n     * Returns an array containing all of the elements in this big in arbitrary order,\n     * including multiple copies.\n     * @return {Array} an array containing all of the elements in this bag.\n     */\n    Bag.prototype.toArray = function () {\n        var a = [];\n        var values = this.dictionary.values();\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var node = values_1[_i];\n            var element = node.value;\n            var copies = node.copies;\n            for (var j = 0; j < copies; j++) {\n                a.push(element);\n            }\n        }\n        return a;\n    };\n    /**\n     * Returns a set of unique elements in this bag.\n     * @return {collections.Set<T>} a set of unique elements in this bag.\n     */\n    Bag.prototype.toSet = function () {\n        var toret = new Set_1.default(this.toStrF);\n        var elements = this.dictionary.values();\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var ele = elements_1[_i];\n            var value = ele.value;\n            toret.add(value);\n        }\n        return toret;\n    };\n    /**\n     * Executes the provided function once for each element\n     * present in this bag, including multiple copies.\n     * @param {function(Object):*} callback function to execute, it is\n     * invoked with one argument: the element. To break the iteration you can\n     * optionally return false.\n     */\n    Bag.prototype.forEach = function (callback) {\n        this.dictionary.forEach(function (k, v) {\n            var value = v.value;\n            var copies = v.copies;\n            for (var i = 0; i < copies; i++) {\n                if (callback(value) === false) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    };\n    /**\n     * Returns the number of elements in this bag.\n     * @return {number} the number of elements in this bag.\n     */\n    Bag.prototype.size = function () {\n        return this.nElements;\n    };\n    /**\n     * Returns true if this bag contains no elements.\n     * @return {boolean} true if this bag contains no elements.\n     */\n    Bag.prototype.isEmpty = function () {\n        return this.nElements === 0;\n    };\n    /**\n     * Removes all of the elements from this bag.\n     */\n    Bag.prototype.clear = function () {\n        this.nElements = 0;\n        this.dictionary.clear();\n    };\n    return Bag;\n}()); // End of bag\nexports.default = Bag;\n//# sourceMappingURL=Bag.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Bag.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Dictionary.js":
/*!**********************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Dictionary.js ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\nvar Dictionary = /** @class */ (function () {\n    /**\n     * Creates an empty dictionary.\n     * @class <p>Dictionaries map keys to values; each key can map to at most one value.\n     * This implementation accepts any kind of objects as keys.</p>\n     *\n     * <p>If the keys are custom objects a function which converts keys to unique\n     * strings must be provided. Example:</p>\n     * <pre>\n     * function petToString(pet) {\n     *  return pet.name;\n     * }\n     * </pre>\n     * @constructor\n     * @param {function(Object):string=} toStrFunction optional function used\n     * to convert keys to strings. If the keys aren't strings or if toString()\n     * is not appropriate, a custom function which receives a key and returns a\n     * unique string must be provided.\n     */\n    function Dictionary(toStrFunction) {\n        this.table = {};\n        this.nElements = 0;\n        this.toStr = toStrFunction || util.defaultToString;\n    }\n    /**\n     * Returns the value to which this dictionary maps the specified key.\n     * Returns undefined if this dictionary contains no mapping for this key.\n     * @param {Object} key key whose associated value is to be returned.\n     * @return {*} the value to which this dictionary maps the specified key or\n     * undefined if the map contains no mapping for this key.\n     */\n    Dictionary.prototype.getValue = function (key) {\n        var pair = this.table['$' + this.toStr(key)];\n        if (util.isUndefined(pair)) {\n            return undefined;\n        }\n        return pair.value;\n    };\n    /**\n     * Associates the specified value with the specified key in this dictionary.\n     * If the dictionary previously contained a mapping for this key, the old\n     * value is replaced by the specified value.\n     * @param {Object} key key with which the specified value is to be\n     * associated.\n     * @param {Object} value value to be associated with the specified key.\n     * @return {*} previous value associated with the specified key, or undefined if\n     * there was no mapping for the key or if the key/value are undefined.\n     */\n    Dictionary.prototype.setValue = function (key, value) {\n        if (util.isUndefined(key) || util.isUndefined(value)) {\n            return undefined;\n        }\n        var ret;\n        var k = '$' + this.toStr(key);\n        var previousElement = this.table[k];\n        if (util.isUndefined(previousElement)) {\n            this.nElements++;\n            ret = undefined;\n        }\n        else {\n            ret = previousElement.value;\n        }\n        this.table[k] = {\n            key: key,\n            value: value\n        };\n        return ret;\n    };\n    /**\n     * Removes the mapping for this key from this dictionary if it is present.\n     * @param {Object} key key whose mapping is to be removed from the\n     * dictionary.\n     * @return {*} previous value associated with specified key, or undefined if\n     * there was no mapping for key.\n     */\n    Dictionary.prototype.remove = function (key) {\n        var k = '$' + this.toStr(key);\n        var previousElement = this.table[k];\n        if (!util.isUndefined(previousElement)) {\n            delete this.table[k];\n            this.nElements--;\n            return previousElement.value;\n        }\n        return undefined;\n    };\n    /**\n     * Returns an array containing all of the keys in this dictionary.\n     * @return {Array} an array containing all of the keys in this dictionary.\n     */\n    Dictionary.prototype.keys = function () {\n        var array = [];\n        for (var name_1 in this.table) {\n            if (util.has(this.table, name_1)) {\n                var pair = this.table[name_1];\n                array.push(pair.key);\n            }\n        }\n        return array;\n    };\n    /**\n     * Returns an array containing all of the values in this dictionary.\n     * @return {Array} an array containing all of the values in this dictionary.\n     */\n    Dictionary.prototype.values = function () {\n        var array = [];\n        for (var name_2 in this.table) {\n            if (util.has(this.table, name_2)) {\n                var pair = this.table[name_2];\n                array.push(pair.value);\n            }\n        }\n        return array;\n    };\n    /**\n     * Executes the provided function once for each key-value pair\n     * present in this dictionary.\n     * @param {function(Object,Object):*} callback function to execute, it is\n     * invoked with two arguments: key and value. To break the iteration you can\n     * optionally return false.\n     */\n    Dictionary.prototype.forEach = function (callback) {\n        for (var name_3 in this.table) {\n            if (util.has(this.table, name_3)) {\n                var pair = this.table[name_3];\n                var ret = callback(pair.key, pair.value);\n                if (ret === false) {\n                    return;\n                }\n            }\n        }\n    };\n    /**\n     * Returns true if this dictionary contains a mapping for the specified key.\n     * @param {Object} key key whose presence in this dictionary is to be\n     * tested.\n     * @return {boolean} true if this dictionary contains a mapping for the\n     * specified key.\n     */\n    Dictionary.prototype.containsKey = function (key) {\n        return !util.isUndefined(this.getValue(key));\n    };\n    /**\n     * Removes all mappings from this dictionary.\n     * @this {collections.Dictionary}\n     */\n    Dictionary.prototype.clear = function () {\n        this.table = {};\n        this.nElements = 0;\n    };\n    /**\n     * Returns the number of keys in this dictionary.\n     * @return {number} the number of key-value mappings in this dictionary.\n     */\n    Dictionary.prototype.size = function () {\n        return this.nElements;\n    };\n    /**\n     * Returns true if this dictionary contains no mappings.\n     * @return {boolean} true if this dictionary contains no mappings.\n     */\n    Dictionary.prototype.isEmpty = function () {\n        return this.nElements <= 0;\n    };\n    Dictionary.prototype.toString = function () {\n        var toret = '{';\n        this.forEach(function (k, v) {\n            toret += \"\\n\\t\" + k + \" : \" + v;\n        });\n        return toret + '\\n}';\n    };\n    return Dictionary;\n}()); // End of dictionary\nexports.default = Dictionary;\n//# sourceMappingURL=Dictionary.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Dictionary.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/FactoryDictionary.js":
/*!*****************************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/FactoryDictionary.js ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Dictionary_1 = __webpack_require__(/*! ./Dictionary */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Dictionary.js\");\nvar util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\nvar FactoryDictionary = /** @class */ (function (_super) {\n    __extends(FactoryDictionary, _super);\n    /**\n     * Creates an empty dictionary.\n     * @class <p>Dictionaries map keys to values; each key can map to at most one value.\n     * This implementation accepts any kind of objects as keys.</p>\n     *\n     * <p>The default factory function should return a new object of the provided\n     * type. Example:</p>\n     * <pre>\n     * function petFactory() {\n     *  return new Pet();\n     * }\n     * </pre>\n     *\n     * <p>If the keys are custom objects a function which converts keys to unique\n     * strings must be provided. Example:</p>\n     * <pre>\n     * function petToString(pet) {\n     *  return pet.name;\n     * }\n     * </pre>\n     * @constructor\n     * @param {function():V=} defaultFactoryFunction function used to create a\n     * default object.\n     * @param {function(Object):string=} toStrFunction optional function used\n     * to convert keys to strings. If the keys aren't strings or if toString()\n     * is not appropriate, a custom function which receives a key and returns a\n     * unique string must be provided.\n     */\n    function FactoryDictionary(defaultFactoryFunction, toStrFunction) {\n        var _this = _super.call(this, toStrFunction) || this;\n        _this.defaultFactoryFunction = defaultFactoryFunction;\n        return _this;\n    }\n    /**\n     * Associates the specified default value with the specified key in this dictionary,\n     * if it didn't contain the key yet. If the key existed, the existing value will be used.\n     * @param {Object} key key with which the specified value is to be\n     * associated.\n     * @param {Object} defaultValue default value to be associated with the specified key.\n     * @return {*} previous value associated with the specified key, or the default value,\n     * if the key didn't exist yet.\n     */\n    FactoryDictionary.prototype.setDefault = function (key, defaultValue) {\n        var currentValue = _super.prototype.getValue.call(this, key);\n        if (util.isUndefined(currentValue)) {\n            this.setValue(key, defaultValue);\n            return defaultValue;\n        }\n        return currentValue;\n    };\n    /**\n     * Returns the value to which this dictionary maps the specified key.\n     * Returns a default value created by the factory passed in the constructor,\n     * if this dictionary contains no mapping for this key. The missing key will\n     * automatically be added to the dictionary.\n     * @param {Object} key key whose associated value is to be returned.\n     * @return {*} the value to which this dictionary maps the specified key or\n     * a default value if the map contains no mapping for this key.\n     */\n    FactoryDictionary.prototype.getValue = function (key) {\n        return this.setDefault(key, this.defaultFactoryFunction());\n    };\n    return FactoryDictionary;\n}(Dictionary_1.default));\nexports.default = FactoryDictionary;\n//# sourceMappingURL=FactoryDictionary.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/FactoryDictionary.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Heap.js":
/*!****************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Heap.js ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar collections = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\nvar arrays = __webpack_require__(/*! ./arrays */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/arrays.js\");\nvar Heap = /** @class */ (function () {\n    /**\n     * Creates an empty Heap.\n     * @class\n     * <p>A heap is a binary tree, where the nodes maintain the heap property:\n     * each node is smaller than each of its children and therefore a MinHeap\n     * This implementation uses an array to store elements.</p>\n     * <p>If the inserted elements are custom objects a compare function must be provided,\n     *  at construction time, otherwise the <=, === and >= operators are\n     * used to compare elements. Example:</p>\n     *\n     * <pre>\n     * function compare(a, b) {\n     *  if (a is less than b by some ordering criterion) {\n     *     return -1;\n     *  } if (a is greater than b by the ordering criterion) {\n     *     return 1;\n     *  }\n     *  // a must be equal to b\n     *  return 0;\n     * }\n     * </pre>\n     *\n     * <p>If a Max-Heap is wanted (greater elements on top) you can a provide a\n     * reverse compare function to accomplish that behavior. Example:</p>\n     *\n     * <pre>\n     * function reverseCompare(a, b) {\n     *  if (a is less than b by some ordering criterion) {\n     *     return 1;\n     *  } if (a is greater than b by the ordering criterion) {\n     *     return -1;\n     *  }\n     *  // a must be equal to b\n     *  return 0;\n     * }\n     * </pre>\n     *\n     * @constructor\n     * @param {function(Object,Object):number=} compareFunction optional\n     * function used to compare two elements. Must return a negative integer,\n     * zero, or a positive integer as the first argument is less than, equal to,\n     * or greater than the second.\n     */\n    function Heap(compareFunction) {\n        /**\n         * Array used to store the elements of the heap.\n         * @type {Array.<Object>}\n         * @private\n         */\n        this.data = [];\n        this.compare = compareFunction || collections.defaultCompare;\n    }\n    /**\n     * Returns the index of the left child of the node at the given index.\n     * @param {number} nodeIndex The index of the node to get the left child\n     * for.\n     * @return {number} The index of the left child.\n     * @private\n     */\n    Heap.prototype.leftChildIndex = function (nodeIndex) {\n        return (2 * nodeIndex) + 1;\n    };\n    /**\n     * Returns the index of the right child of the node at the given index.\n     * @param {number} nodeIndex The index of the node to get the right child\n     * for.\n     * @return {number} The index of the right child.\n     * @private\n     */\n    Heap.prototype.rightChildIndex = function (nodeIndex) {\n        return (2 * nodeIndex) + 2;\n    };\n    /**\n     * Returns the index of the parent of the node at the given index.\n     * @param {number} nodeIndex The index of the node to get the parent for.\n     * @return {number} The index of the parent.\n     * @private\n     */\n    Heap.prototype.parentIndex = function (nodeIndex) {\n        return Math.floor((nodeIndex - 1) / 2);\n    };\n    /**\n     * Returns the index of the smaller child node (if it exists).\n     * @param {number} leftChild left child index.\n     * @param {number} rightChild right child index.\n     * @return {number} the index with the minimum value or -1 if it doesn't\n     * exists.\n     * @private\n     */\n    Heap.prototype.minIndex = function (leftChild, rightChild) {\n        if (rightChild >= this.data.length) {\n            if (leftChild >= this.data.length) {\n                return -1;\n            }\n            else {\n                return leftChild;\n            }\n        }\n        else {\n            if (this.compare(this.data[leftChild], this.data[rightChild]) <= 0) {\n                return leftChild;\n            }\n            else {\n                return rightChild;\n            }\n        }\n    };\n    /**\n     * Moves the node at the given index up to its proper place in the heap.\n     * @param {number} index The index of the node to move up.\n     * @private\n     */\n    Heap.prototype.siftUp = function (index) {\n        var parent = this.parentIndex(index);\n        while (index > 0 && this.compare(this.data[parent], this.data[index]) > 0) {\n            arrays.swap(this.data, parent, index);\n            index = parent;\n            parent = this.parentIndex(index);\n        }\n    };\n    /**\n     * Moves the node at the given index down to its proper place in the heap.\n     * @param {number} nodeIndex The index of the node to move down.\n     * @private\n     */\n    Heap.prototype.siftDown = function (nodeIndex) {\n        //smaller child index\n        var min = this.minIndex(this.leftChildIndex(nodeIndex), this.rightChildIndex(nodeIndex));\n        while (min >= 0 && this.compare(this.data[nodeIndex], this.data[min]) > 0) {\n            arrays.swap(this.data, min, nodeIndex);\n            nodeIndex = min;\n            min = this.minIndex(this.leftChildIndex(nodeIndex), this.rightChildIndex(nodeIndex));\n        }\n    };\n    /**\n     * Retrieves but does not remove the root element of this heap.\n     * @return {*} The value at the root of the heap. Returns undefined if the\n     * heap is empty.\n     */\n    Heap.prototype.peek = function () {\n        if (this.data.length > 0) {\n            return this.data[0];\n        }\n        else {\n            return undefined;\n        }\n    };\n    /**\n     * Adds the given element into the heap.\n     * @param {*} element the element.\n     * @return true if the element was added or fals if it is undefined.\n     */\n    Heap.prototype.add = function (element) {\n        if (collections.isUndefined(element)) {\n            return false;\n        }\n        this.data.push(element);\n        this.siftUp(this.data.length - 1);\n        return true;\n    };\n    /**\n     * Retrieves and removes the root element of this heap.\n     * @return {*} The value removed from the root of the heap. Returns\n     * undefined if the heap is empty.\n     */\n    Heap.prototype.removeRoot = function () {\n        if (this.data.length > 0) {\n            var obj = this.data[0];\n            this.data[0] = this.data[this.data.length - 1];\n            this.data.splice(this.data.length - 1, 1);\n            if (this.data.length > 0) {\n                this.siftDown(0);\n            }\n            return obj;\n        }\n        return undefined;\n    };\n    /**\n     * Returns true if this heap contains the specified element.\n     * @param {Object} element element to search for.\n     * @return {boolean} true if this Heap contains the specified element, false\n     * otherwise.\n     */\n    Heap.prototype.contains = function (element) {\n        var equF = collections.compareToEquals(this.compare);\n        return arrays.contains(this.data, element, equF);\n    };\n    /**\n     * Returns the number of elements in this heap.\n     * @return {number} the number of elements in this heap.\n     */\n    Heap.prototype.size = function () {\n        return this.data.length;\n    };\n    /**\n     * Checks if this heap is empty.\n     * @return {boolean} true if and only if this heap contains no items; false\n     * otherwise.\n     */\n    Heap.prototype.isEmpty = function () {\n        return this.data.length <= 0;\n    };\n    /**\n     * Removes all of the elements from this heap.\n     */\n    Heap.prototype.clear = function () {\n        this.data.length = 0;\n    };\n    /**\n     * Executes the provided function once for each element present in this heap in\n     * no particular order.\n     * @param {function(Object):*} callback function to execute, it is\n     * invoked with one argument: the element value, to break the iteration you can\n     * optionally return false.\n     */\n    Heap.prototype.forEach = function (callback) {\n        arrays.forEach(this.data, callback);\n    };\n    return Heap;\n}());\nexports.default = Heap;\n//# sourceMappingURL=Heap.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Heap.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/LinkedDictionary.js":
/*!****************************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/LinkedDictionary.js ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Dictionary_1 = __webpack_require__(/*! ./Dictionary */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Dictionary.js\");\nvar util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\n/**\n * This class is used by the LinkedDictionary Internally\n * Has to be a class, not an interface, because it needs to have\n * the 'unlink' function defined.\n */\nvar LinkedDictionaryPair = /** @class */ (function () {\n    function LinkedDictionaryPair(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    LinkedDictionaryPair.prototype.unlink = function () {\n        this.prev.next = this.next;\n        this.next.prev = this.prev;\n    };\n    return LinkedDictionaryPair;\n}());\n/**\n * The head and tail elements of the list have null key and value properties but they\n * usually link to normal nodes.\n */\nvar HeadOrTailLinkedDictionaryPair = /** @class */ (function () {\n    function HeadOrTailLinkedDictionaryPair() {\n        this.key = null;\n        this.value = null;\n    }\n    HeadOrTailLinkedDictionaryPair.prototype.unlink = function () {\n        this.prev.next = this.next;\n        this.next.prev = this.prev;\n    };\n    return HeadOrTailLinkedDictionaryPair;\n}());\nfunction isHeadOrTailLinkedDictionaryPair(p) {\n    return !p.next;\n}\nvar LinkedDictionary = /** @class */ (function (_super) {\n    __extends(LinkedDictionary, _super);\n    function LinkedDictionary(toStrFunction) {\n        var _this = _super.call(this, toStrFunction) || this;\n        _this.head = new HeadOrTailLinkedDictionaryPair();\n        _this.tail = new HeadOrTailLinkedDictionaryPair();\n        _this.head.next = _this.tail;\n        _this.tail.prev = _this.head;\n        return _this;\n    }\n    /**\n     * Inserts the new node to the 'tail' of the list, updating the\n     * neighbors, and moving 'this.tail' (the End of List indicator) that\n     * to the end.\n     */\n    LinkedDictionary.prototype.appendToTail = function (entry) {\n        var lastNode = this.tail.prev;\n        lastNode.next = entry;\n        entry.prev = lastNode;\n        entry.next = this.tail;\n        this.tail.prev = entry;\n    };\n    /**\n     * Retrieves a linked dictionary from the table internally\n     */\n    LinkedDictionary.prototype.getLinkedDictionaryPair = function (key) {\n        if (util.isUndefined(key)) {\n            return undefined;\n        }\n        var k = '$' + this.toStr(key);\n        var pair = (this.table[k]);\n        return pair;\n    };\n    /**\n     * Returns the value to which this dictionary maps the specified key.\n     * Returns undefined if this dictionary contains no mapping for this key.\n     * @param {Object} key key whose associated value is to be returned.\n     * @return {*} the value to which this dictionary maps the specified key or\n     * undefined if the map contains no mapping for this key.\n     */\n    LinkedDictionary.prototype.getValue = function (key) {\n        var pair = this.getLinkedDictionaryPair(key);\n        if (!util.isUndefined(pair)) {\n            return pair.value;\n        }\n        return undefined;\n    };\n    /**\n     * Removes the mapping for this key from this dictionary if it is present.\n     * Also, if a value is present for this key, the entry is removed from the\n     * insertion ordering.\n     * @param {Object} key key whose mapping is to be removed from the\n     * dictionary.\n     * @return {*} previous value associated with specified key, or undefined if\n     * there was no mapping for key.\n     */\n    LinkedDictionary.prototype.remove = function (key) {\n        var pair = this.getLinkedDictionaryPair(key);\n        if (!util.isUndefined(pair)) {\n            _super.prototype.remove.call(this, key); // This will remove it from the table\n            pair.unlink(); // This will unlink it from the chain\n            return pair.value;\n        }\n        return undefined;\n    };\n    /**\n     * Removes all mappings from this LinkedDictionary.\n     * @this {collections.LinkedDictionary}\n     */\n    LinkedDictionary.prototype.clear = function () {\n        _super.prototype.clear.call(this);\n        this.head.next = this.tail;\n        this.tail.prev = this.head;\n    };\n    /**\n     * Internal function used when updating an existing KeyValue pair.\n     * It places the new value indexed by key into the table, but maintains\n     * its place in the linked ordering.\n     */\n    LinkedDictionary.prototype.replace = function (oldPair, newPair) {\n        var k = '$' + this.toStr(newPair.key);\n        // set the new Pair's links to existingPair's links\n        newPair.next = oldPair.next;\n        newPair.prev = oldPair.prev;\n        // Delete Existing Pair from the table, unlink it from chain.\n        // As a result, the nElements gets decremented by this operation\n        this.remove(oldPair.key);\n        // Link new Pair in place of where oldPair was,\n        // by pointing the old pair's neighbors to it.\n        newPair.prev.next = newPair;\n        newPair.next.prev = newPair;\n        this.table[k] = newPair;\n        // To make up for the fact that the number of elements was decremented,\n        // We need to increase it by one.\n        ++this.nElements;\n    };\n    /**\n     * Associates the specified value with the specified key in this dictionary.\n     * If the dictionary previously contained a mapping for this key, the old\n     * value is replaced by the specified value.\n     * Updating of a key that already exists maintains its place in the\n     * insertion order into the map.\n     * @param {Object} key key with which the specified value is to be\n     * associated.\n     * @param {Object} value value to be associated with the specified key.\n     * @return {*} previous value associated with the specified key, or undefined if\n     * there was no mapping for the key or if the key/value are undefined.\n     */\n    LinkedDictionary.prototype.setValue = function (key, value) {\n        if (util.isUndefined(key) || util.isUndefined(value)) {\n            return undefined;\n        }\n        var existingPair = this.getLinkedDictionaryPair(key);\n        var newPair = new LinkedDictionaryPair(key, value);\n        var k = '$' + this.toStr(key);\n        // If there is already an element for that key, we\n        // keep it's place in the LinkedList\n        if (!util.isUndefined(existingPair)) {\n            this.replace(existingPair, newPair);\n            return existingPair.value;\n        }\n        else {\n            this.appendToTail(newPair);\n            this.table[k] = newPair;\n            ++this.nElements;\n            return undefined;\n        }\n    };\n    /**\n     * Returns an array containing all of the keys in this LinkedDictionary, ordered\n     * by insertion order.\n     * @return {Array} an array containing all of the keys in this LinkedDictionary,\n     * ordered by insertion order.\n     */\n    LinkedDictionary.prototype.keys = function () {\n        var array = [];\n        this.forEach(function (key, value) {\n            array.push(key);\n        });\n        return array;\n    };\n    /**\n     * Returns an array containing all of the values in this LinkedDictionary, ordered by\n     * insertion order.\n     * @return {Array} an array containing all of the values in this LinkedDictionary,\n     * ordered by insertion order.\n     */\n    LinkedDictionary.prototype.values = function () {\n        var array = [];\n        this.forEach(function (key, value) {\n            array.push(value);\n        });\n        return array;\n    };\n    /**\n     * Executes the provided function once for each key-value pair\n     * present in this LinkedDictionary. It is done in the order of insertion\n     * into the LinkedDictionary\n     * @param {function(Object,Object):*} callback function to execute, it is\n     * invoked with two arguments: key and value. To break the iteration you can\n     * optionally return false.\n     */\n    LinkedDictionary.prototype.forEach = function (callback) {\n        var crawlNode = this.head.next;\n        while (!isHeadOrTailLinkedDictionaryPair(crawlNode)) {\n            var ret = callback(crawlNode.key, crawlNode.value);\n            if (ret === false) {\n                return;\n            }\n            crawlNode = crawlNode.next;\n        }\n    };\n    return LinkedDictionary;\n}(Dictionary_1.default)); // End of LinkedDictionary\nexports.default = LinkedDictionary;\n// /**\n//  * Returns true if this dictionary is equal to the given dictionary.\n//  * Two dictionaries are equal if they contain the same mappings.\n//  * @param {collections.Dictionary} other the other dictionary.\n//  * @param {function(Object,Object):boolean=} valuesEqualFunction optional\n//  * function used to check if two values are equal.\n//  * @return {boolean} true if this dictionary is equal to the given dictionary.\n//  */\n// collections.Dictionary.prototype.equals = function(other,valuesEqualFunction) {\n// \tconst eqF = valuesEqualFunction || collections.defaultEquals;\n// \tif(!(other instanceof collections.Dictionary)){\n// \t\treturn false;\n// \t}\n// \tif(this.size() !== other.size()){\n// \t\treturn false;\n// \t}\n// \treturn this.equalsAux(this.firstNode,other.firstNode,eqF);\n// }\n//# sourceMappingURL=LinkedDictionary.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/LinkedDictionary.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/LinkedList.js":
/*!**********************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/LinkedList.js ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\nvar arrays = __webpack_require__(/*! ./arrays */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/arrays.js\");\nvar LinkedList = /** @class */ (function () {\n    /**\n     * Creates an empty Linked List.\n     * @class A linked list is a data structure consisting of a group of nodes\n     * which together represent a sequence.\n     * @constructor\n     */\n    function LinkedList() {\n        /**\n         * First node in the list\n         * @type {Object}\n         * @private\n         */\n        this.firstNode = null;\n        /**\n         * Last node in the list\n         * @type {Object}\n         * @private\n         */\n        this.lastNode = null;\n        /**\n         * Number of elements in the list\n         * @type {number}\n         * @private\n         */\n        this.nElements = 0;\n    }\n    /**\n     * Adds an element to this list.\n     * @param {Object} item element to be added.\n     * @param {number=} index optional index to add the element. If no index is specified\n     * the element is added to the end of this list.\n     * @return {boolean} true if the element was added or false if the index is invalid\n     * or if the element is undefined.\n     */\n    LinkedList.prototype.add = function (item, index) {\n        if (util.isUndefined(index)) {\n            index = this.nElements;\n        }\n        if (index < 0 || index > this.nElements || util.isUndefined(item)) {\n            return false;\n        }\n        var newNode = this.createNode(item);\n        if (this.nElements === 0 || this.lastNode === null) {\n            // First node in the list.\n            this.firstNode = newNode;\n            this.lastNode = newNode;\n        }\n        else if (index === this.nElements) {\n            // Insert at the end.\n            this.lastNode.next = newNode;\n            this.lastNode = newNode;\n        }\n        else if (index === 0) {\n            // Change first node.\n            newNode.next = this.firstNode;\n            this.firstNode = newNode;\n        }\n        else {\n            var prev = this.nodeAtIndex(index - 1);\n            if (prev === null) {\n                return false;\n            }\n            newNode.next = prev.next;\n            prev.next = newNode;\n        }\n        this.nElements++;\n        return true;\n    };\n    /**\n     * Returns the first element in this list.\n     * @return {*} the first element of the list or undefined if the list is\n     * empty.\n     */\n    LinkedList.prototype.first = function () {\n        if (this.firstNode !== null) {\n            return this.firstNode.element;\n        }\n        return undefined;\n    };\n    /**\n     * Returns the last element in this list.\n     * @return {*} the last element in the list or undefined if the list is\n     * empty.\n     */\n    LinkedList.prototype.last = function () {\n        if (this.lastNode !== null) {\n            return this.lastNode.element;\n        }\n        return undefined;\n    };\n    /**\n     * Returns the element at the specified position in this list.\n     * @param {number} index desired index.\n     * @return {*} the element at the given index or undefined if the index is\n     * out of bounds.\n     */\n    LinkedList.prototype.elementAtIndex = function (index) {\n        var node = this.nodeAtIndex(index);\n        if (node === null) {\n            return undefined;\n        }\n        return node.element;\n    };\n    /**\n     * Returns the index in this list of the first occurrence of the\n     * specified element, or -1 if the List does not contain this element.\n     * <p>If the elements inside this list are\n     * not comparable with the === operator a custom equals function should be\n     * provided to perform searches, the function must receive two arguments and\n     * return true if they are equal, false otherwise. Example:</p>\n     *\n     * <pre>\n     * const petsAreEqualByName = function(pet1, pet2) {\n     *  return pet1.name === pet2.name;\n     * }\n     * </pre>\n     * @param {Object} item element to search for.\n     * @param {function(Object,Object):boolean=} equalsFunction Optional\n     * function used to check if two elements are equal.\n     * @return {number} the index in this list of the first occurrence\n     * of the specified element, or -1 if this list does not contain the\n     * element.\n     */\n    LinkedList.prototype.indexOf = function (item, equalsFunction) {\n        var equalsF = equalsFunction || util.defaultEquals;\n        if (util.isUndefined(item)) {\n            return -1;\n        }\n        var currentNode = this.firstNode;\n        var index = 0;\n        while (currentNode !== null) {\n            if (equalsF(currentNode.element, item)) {\n                return index;\n            }\n            index++;\n            currentNode = currentNode.next;\n        }\n        return -1;\n    };\n    /**\n     * Returns true if this list contains the specified element.\n     * <p>If the elements inside the list are\n     * not comparable with the === operator a custom equals function should be\n     * provided to perform searches, the function must receive two arguments and\n     * return true if they are equal, false otherwise. Example:</p>\n     *\n     * <pre>\n     * const petsAreEqualByName = function(pet1, pet2) {\n     *  return pet1.name === pet2.name;\n     * }\n     * </pre>\n     * @param {Object} item element to search for.\n     * @param {function(Object,Object):boolean=} equalsFunction Optional\n     * function used to check if two elements are equal.\n     * @return {boolean} true if this list contains the specified element, false\n     * otherwise.\n     */\n    LinkedList.prototype.contains = function (item, equalsFunction) {\n        return (this.indexOf(item, equalsFunction) >= 0);\n    };\n    /**\n     * Removes the first occurrence of the specified element in this list.\n     * <p>If the elements inside the list are\n     * not comparable with the === operator a custom equals function should be\n     * provided to perform searches, the function must receive two arguments and\n     * return true if they are equal, false otherwise. Example:</p>\n     *\n     * <pre>\n     * const petsAreEqualByName = function(pet1, pet2) {\n     *  return pet1.name === pet2.name;\n     * }\n     * </pre>\n     * @param {Object} item element to be removed from this list, if present.\n     * @return {boolean} true if the list contained the specified element.\n     */\n    LinkedList.prototype.remove = function (item, equalsFunction) {\n        var equalsF = equalsFunction || util.defaultEquals;\n        if (this.nElements < 1 || util.isUndefined(item)) {\n            return false;\n        }\n        var previous = null;\n        var currentNode = this.firstNode;\n        while (currentNode !== null) {\n            if (equalsF(currentNode.element, item)) {\n                if (previous === null) {\n                    this.firstNode = currentNode.next;\n                    if (currentNode === this.lastNode) {\n                        this.lastNode = null;\n                    }\n                }\n                else if (currentNode === this.lastNode) {\n                    this.lastNode = previous;\n                    previous.next = currentNode.next;\n                    currentNode.next = null;\n                }\n                else {\n                    previous.next = currentNode.next;\n                    currentNode.next = null;\n                }\n                this.nElements--;\n                return true;\n            }\n            previous = currentNode;\n            currentNode = currentNode.next;\n        }\n        return false;\n    };\n    /**\n     * Removes all of the elements from this list.\n     */\n    LinkedList.prototype.clear = function () {\n        this.firstNode = null;\n        this.lastNode = null;\n        this.nElements = 0;\n    };\n    /**\n     * Returns true if this list is equal to the given list.\n     * Two lists are equal if they have the same elements in the same order.\n     * @param {LinkedList} other the other list.\n     * @param {function(Object,Object):boolean=} equalsFunction optional\n     * function used to check if two elements are equal. If the elements in the lists\n     * are custom objects you should provide a function, otherwise\n     * the === operator is used to check equality between elements.\n     * @return {boolean} true if this list is equal to the given list.\n     */\n    LinkedList.prototype.equals = function (other, equalsFunction) {\n        var eqF = equalsFunction || util.defaultEquals;\n        if (!(other instanceof LinkedList)) {\n            return false;\n        }\n        if (this.size() !== other.size()) {\n            return false;\n        }\n        return this.equalsAux(this.firstNode, other.firstNode, eqF);\n    };\n    /**\n     * @private\n     */\n    LinkedList.prototype.equalsAux = function (n1, n2, eqF) {\n        while (n1 !== null && n2 !== null) {\n            if (!eqF(n1.element, n2.element)) {\n                return false;\n            }\n            n1 = n1.next;\n            n2 = n2.next;\n        }\n        return true;\n    };\n    /**\n     * Removes the element at the specified position in this list.\n     * @param {number} index given index.\n     * @return {*} removed element or undefined if the index is out of bounds.\n     */\n    LinkedList.prototype.removeElementAtIndex = function (index) {\n        if (index < 0 || index >= this.nElements || this.firstNode === null || this.lastNode === null) {\n            return undefined;\n        }\n        var element;\n        if (this.nElements === 1) {\n            //First node in the list.\n            element = this.firstNode.element;\n            this.firstNode = null;\n            this.lastNode = null;\n        }\n        else {\n            var previous = this.nodeAtIndex(index - 1);\n            if (previous === null) {\n                element = this.firstNode.element;\n                this.firstNode = this.firstNode.next;\n            }\n            else if (previous.next === this.lastNode) {\n                element = this.lastNode.element;\n                this.lastNode = previous;\n            }\n            if (previous !== null && previous.next !== null) {\n                element = previous.next.element;\n                previous.next = previous.next.next;\n            }\n        }\n        this.nElements--;\n        return element;\n    };\n    /**\n     * Executes the provided function once for each element present in this list in order.\n     * @param {function(Object):*} callback function to execute, it is\n     * invoked with one argument: the element value, to break the iteration you can\n     * optionally return false.\n     */\n    LinkedList.prototype.forEach = function (callback) {\n        var currentNode = this.firstNode;\n        while (currentNode !== null) {\n            if (callback(currentNode.element) === false) {\n                break;\n            }\n            currentNode = currentNode.next;\n        }\n    };\n    /**\n     * Reverses the order of the elements in this linked list (makes the last\n     * element first, and the first element last).\n     */\n    LinkedList.prototype.reverse = function () {\n        var previous = null;\n        var current = this.firstNode;\n        var temp = null;\n        while (current !== null) {\n            temp = current.next;\n            current.next = previous;\n            previous = current;\n            current = temp;\n        }\n        temp = this.firstNode;\n        this.firstNode = this.lastNode;\n        this.lastNode = temp;\n    };\n    /**\n     * Returns an array containing all of the elements in this list in proper\n     * sequence.\n     * @return {Array.<*>} an array containing all of the elements in this list,\n     * in proper sequence.\n     */\n    LinkedList.prototype.toArray = function () {\n        var array = [];\n        var currentNode = this.firstNode;\n        while (currentNode !== null) {\n            array.push(currentNode.element);\n            currentNode = currentNode.next;\n        }\n        return array;\n    };\n    /**\n     * Returns the number of elements in this list.\n     * @return {number} the number of elements in this list.\n     */\n    LinkedList.prototype.size = function () {\n        return this.nElements;\n    };\n    /**\n     * Returns true if this list contains no elements.\n     * @return {boolean} true if this list contains no elements.\n     */\n    LinkedList.prototype.isEmpty = function () {\n        return this.nElements <= 0;\n    };\n    LinkedList.prototype.toString = function () {\n        return arrays.toString(this.toArray());\n    };\n    /**\n     * @private\n     */\n    LinkedList.prototype.nodeAtIndex = function (index) {\n        if (index < 0 || index >= this.nElements) {\n            return null;\n        }\n        if (index === (this.nElements - 1)) {\n            return this.lastNode;\n        }\n        var node = this.firstNode;\n        for (var i = 0; i < index && node !== null; i++) {\n            node = node.next;\n        }\n        return node;\n    };\n    /**\n     * @private\n     */\n    LinkedList.prototype.createNode = function (item) {\n        return {\n            element: item,\n            next: null\n        };\n    };\n    return LinkedList;\n}()); // End of linked list\nexports.default = LinkedList;\n//# sourceMappingURL=LinkedList.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/LinkedList.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/MultiDictionary.js":
/*!***************************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/MultiDictionary.js ***!
  \***************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\nvar Dictionary_1 = __webpack_require__(/*! ./Dictionary */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Dictionary.js\");\nvar arrays = __webpack_require__(/*! ./arrays */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/arrays.js\");\nvar MultiDictionary = /** @class */ (function () {\n    /**\n     * Creates an empty multi dictionary.\n     * @class <p>A multi dictionary is a special kind of dictionary that holds\n     * multiple values against each key. Setting a value into the dictionary will\n     * add the value to an array at that key. Getting a key will return an array,\n     * holding all the values set to that key.\n     * You can configure to allow duplicates in the values.\n     * This implementation accepts any kind of objects as keys.</p>\n     *\n     * <p>If the keys are custom objects a function which converts keys to strings must be\n     * provided. Example:</p>\n     *\n     * <pre>\n     * function petToString(pet) {\n     *     return pet.name;\n     * }\n     * </pre>\n     * <p>If the values are custom objects a function to check equality between values\n     * must be provided. Example:</p>\n     *\n     * <pre>\n     * function petsAreEqualByAge(pet1,pet2) {\n     *     return pet1.age === pet2.age;\n     * }\n     * </pre>\n     * @constructor\n     * @param {function(Object):string=} toStrFunction optional function\n     * to convert keys to strings. If the keys aren't strings or if toString()\n     * is not appropriate, a custom function which receives a key and returns a\n     * unique string must be provided.\n     * @param {function(Object,Object):boolean=} valuesEqualsFunction optional\n     * function to check if two values are equal.\n     *\n     * @param allowDuplicateValues\n     */\n    function MultiDictionary(toStrFunction, valuesEqualsFunction, allowDuplicateValues) {\n        if (allowDuplicateValues === void 0) { allowDuplicateValues = false; }\n        this.dict = new Dictionary_1.default(toStrFunction);\n        this.equalsF = valuesEqualsFunction || util.defaultEquals;\n        this.allowDuplicate = allowDuplicateValues;\n    }\n    /**\n     * Returns an array holding the values to which this dictionary maps\n     * the specified key.\n     * Returns an empty array if this dictionary contains no mappings for this key.\n     * @param {Object} key key whose associated values are to be returned.\n     * @return {Array} an array holding the values to which this dictionary maps\n     * the specified key.\n     */\n    MultiDictionary.prototype.getValue = function (key) {\n        var values = this.dict.getValue(key);\n        if (util.isUndefined(values)) {\n            return [];\n        }\n        return arrays.copy(values);\n    };\n    /**\n     * Adds the value to the array associated with the specified key, if\n     * it is not already present.\n     * @param {Object} key key with which the specified value is to be\n     * associated.\n     * @param {Object} value the value to add to the array at the key\n     * @return {boolean} true if the value was not already associated with that key.\n     */\n    MultiDictionary.prototype.setValue = function (key, value) {\n        if (util.isUndefined(key) || util.isUndefined(value)) {\n            return false;\n        }\n        var array = this.dict.getValue(key);\n        if (util.isUndefined(array)) {\n            this.dict.setValue(key, [value]);\n            return true;\n        }\n        if (!this.allowDuplicate) {\n            if (arrays.contains(array, value, this.equalsF)) {\n                return false;\n            }\n        }\n        array.push(value);\n        return true;\n    };\n    /**\n     * Removes the specified values from the array of values associated with the\n     * specified key. If a value isn't given, all values associated with the specified\n     * key are removed.\n     * @param {Object} key key whose mapping is to be removed from the\n     * dictionary.\n     * @param {Object=} value optional argument to specify the value to remove\n     * from the array associated with the specified key.\n     * @return {*} true if the dictionary changed, false if the key doesn't exist or\n     * if the specified value isn't associated with the specified key.\n     */\n    MultiDictionary.prototype.remove = function (key, value) {\n        if (util.isUndefined(value)) {\n            var v = this.dict.remove(key);\n            return !util.isUndefined(v);\n        }\n        var array = this.dict.getValue(key);\n        if (!util.isUndefined(array) && arrays.remove(array, value, this.equalsF)) {\n            if (array.length === 0) {\n                this.dict.remove(key);\n            }\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Returns an array containing all of the keys in this dictionary.\n     * @return {Array} an array containing all of the keys in this dictionary.\n     */\n    MultiDictionary.prototype.keys = function () {\n        return this.dict.keys();\n    };\n    /**\n     * Returns an array containing all of the values in this dictionary.\n     * @return {Array} an array containing all of the values in this dictionary.\n     */\n    MultiDictionary.prototype.values = function () {\n        var values = this.dict.values();\n        var array = [];\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var v = values_1[_i];\n            for (var _a = 0, v_1 = v; _a < v_1.length; _a++) {\n                var w = v_1[_a];\n                array.push(w);\n            }\n        }\n        return array;\n    };\n    /**\n     * Returns true if this dictionary at least one value associatted the specified key.\n     * @param {Object} key key whose presence in this dictionary is to be\n     * tested.\n     * @return {boolean} true if this dictionary at least one value associatted\n     * the specified key.\n     */\n    MultiDictionary.prototype.containsKey = function (key) {\n        return this.dict.containsKey(key);\n    };\n    /**\n     * Removes all mappings from this dictionary.\n     */\n    MultiDictionary.prototype.clear = function () {\n        this.dict.clear();\n    };\n    /**\n     * Returns the number of keys in this dictionary.\n     * @return {number} the number of key-value mappings in this dictionary.\n     */\n    MultiDictionary.prototype.size = function () {\n        return this.dict.size();\n    };\n    /**\n     * Returns true if this dictionary contains no mappings.\n     * @return {boolean} true if this dictionary contains no mappings.\n     */\n    MultiDictionary.prototype.isEmpty = function () {\n        return this.dict.isEmpty();\n    };\n    return MultiDictionary;\n}()); // end of multi dictionary\nexports.default = MultiDictionary;\n//# sourceMappingURL=MultiDictionary.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/MultiDictionary.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/MultiRootTree.js":
/*!*************************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/MultiRootTree.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"BEFORE\"] = 0] = \"BEFORE\";\n    Direction[Direction[\"AFTER\"] = 1] = \"AFTER\";\n    Direction[Direction[\"INSIDE_AT_END\"] = 2] = \"INSIDE_AT_END\";\n    Direction[Direction[\"INSIDE_AT_START\"] = 3] = \"INSIDE_AT_START\";\n})(Direction || (Direction = {}));\nvar MultiRootTree = /** @class */ (function () {\n    function MultiRootTree(rootIds, nodes) {\n        if (rootIds === void 0) { rootIds = []; }\n        if (nodes === void 0) { nodes = {}; }\n        this.rootIds = rootIds;\n        this.nodes = nodes;\n        this.initRootIds();\n        this.initNodes();\n    }\n    MultiRootTree.prototype.initRootIds = function () {\n        for (var _i = 0, _a = this.rootIds; _i < _a.length; _i++) {\n            var rootId = _a[_i];\n            this.createEmptyNodeIfNotExist(rootId);\n        }\n    };\n    MultiRootTree.prototype.initNodes = function () {\n        for (var nodeKey in this.nodes) {\n            if (this.nodes.hasOwnProperty(nodeKey)) {\n                for (var _i = 0, _a = this.nodes[nodeKey]; _i < _a.length; _i++) {\n                    var nodeListItem = _a[_i];\n                    this.createEmptyNodeIfNotExist(nodeListItem);\n                }\n            }\n        }\n    };\n    MultiRootTree.prototype.createEmptyNodeIfNotExist = function (nodeKey) {\n        if (!this.nodes[nodeKey]) {\n            this.nodes[nodeKey] = [];\n        }\n    };\n    MultiRootTree.prototype.getRootIds = function () {\n        var clone = this.rootIds.slice();\n        return clone;\n    };\n    MultiRootTree.prototype.getNodes = function () {\n        var clone = {};\n        for (var nodeKey in this.nodes) {\n            if (this.nodes.hasOwnProperty(nodeKey)) {\n                clone[nodeKey] = this.nodes[nodeKey].slice();\n            }\n        }\n        return clone;\n    };\n    MultiRootTree.prototype.getObject = function () {\n        return {\n            rootIds: this.getRootIds(),\n            nodes: this.getNodes(),\n        };\n    };\n    MultiRootTree.prototype.toObject = function () {\n        return this.getObject();\n    };\n    MultiRootTree.prototype.flatten = function () {\n        var _this = this;\n        var extraPropsObject = [];\n        for (var i = 0; i < this.rootIds.length; i++) {\n            var rootId = this.rootIds[i];\n            extraPropsObject.push({\n                id: rootId,\n                level: 0,\n                hasParent: false,\n                childrenCount: 0,\n            });\n            traverse(rootId, this.nodes, extraPropsObject, 0);\n        }\n        for (var _i = 0, extraPropsObject_1 = extraPropsObject; _i < extraPropsObject_1.length; _i++) {\n            var o = extraPropsObject_1[_i];\n            o.childrenCount = countChildren(o.id);\n        }\n        return extraPropsObject;\n        function countChildren(id) {\n            if (!_this.nodes[id]) {\n                return 0;\n            }\n            else {\n                var childrenCount = _this.nodes[id].length;\n                return childrenCount;\n            }\n        }\n        function traverse(startId, nodes, returnArray, level) {\n            if (level === void 0) { level = 0; }\n            if (!startId || !nodes || !returnArray || !nodes[startId]) {\n                return;\n            }\n            level++;\n            var idsList = nodes[startId];\n            for (var i = 0; i < idsList.length; i++) {\n                var id = idsList[i];\n                returnArray.push({ id: id, level: level, hasParent: true });\n                traverse(id, nodes, returnArray, level);\n            }\n            level--;\n        }\n    };\n    MultiRootTree.prototype.moveIdBeforeId = function (moveId, beforeId) {\n        return this.moveId(moveId, beforeId, Direction.BEFORE);\n    };\n    MultiRootTree.prototype.moveIdAfterId = function (moveId, afterId) {\n        return this.moveId(moveId, afterId, Direction.AFTER);\n    };\n    MultiRootTree.prototype.moveIdIntoId = function (moveId, insideId, atStart) {\n        if (atStart === void 0) { atStart = true; }\n        if (atStart) {\n            return this.moveId(moveId, insideId, Direction.INSIDE_AT_START);\n        }\n        else {\n            return this.moveId(moveId, insideId, Direction.INSIDE_AT_END);\n        }\n    };\n    MultiRootTree.prototype.swapRootIdWithRootId = function (rootId, withRootId) {\n        var leftIndex = this.findRootId(rootId);\n        var rightIndex = this.findRootId(withRootId);\n        this.swapRootPositionWithRootPosition(leftIndex, rightIndex);\n    };\n    MultiRootTree.prototype.swapRootPositionWithRootPosition = function (swapRootPosition, withRootPosition) {\n        var temp = this.rootIds[withRootPosition];\n        this.rootIds[withRootPosition] = this.rootIds[swapRootPosition];\n        this.rootIds[swapRootPosition] = temp;\n    };\n    MultiRootTree.prototype.deleteId = function (id) {\n        this.rootDeleteId(id);\n        this.nodeAndSubNodesDelete(id);\n        this.nodeRefrencesDelete(id);\n    };\n    MultiRootTree.prototype.insertIdBeforeId = function (beforeId, insertId) {\n        var foundRootIdIndex = this.findRootId(beforeId);\n        if (foundRootIdIndex > -1) {\n            this.insertIdIntoRoot(insertId, foundRootIdIndex);\n        }\n        for (var nodeKey in this.nodes) {\n            if (this.nodes.hasOwnProperty(nodeKey)) {\n                var foundNodeIdIndex = this.findNodeId(nodeKey, beforeId);\n                if (foundNodeIdIndex > -1) {\n                    this.insertIdIntoNode(nodeKey, insertId, foundNodeIdIndex);\n                }\n            }\n        }\n    };\n    MultiRootTree.prototype.insertIdAfterId = function (belowId, insertId) {\n        var foundRootIdIndex = this.findRootId(belowId);\n        if (foundRootIdIndex > -1) {\n            this.insertIdIntoRoot(insertId, foundRootIdIndex + 1);\n        }\n        for (var nodeKey in this.nodes) {\n            if (this.nodes.hasOwnProperty(nodeKey)) {\n                var foundNodeIdIndex = this.findNodeId(nodeKey, belowId);\n                if (foundNodeIdIndex > -1) {\n                    this.insertIdIntoNode(nodeKey, insertId, foundNodeIdIndex + 1);\n                }\n            }\n        }\n    };\n    MultiRootTree.prototype.insertIdIntoId = function (insideId, insertId) {\n        this.nodeInsertAtEnd(insideId, insertId);\n        this.nodes[insertId] = [];\n    };\n    MultiRootTree.prototype.insertIdIntoRoot = function (id, position) {\n        if (position === undefined) {\n            this.rootInsertAtEnd(id);\n        }\n        else {\n            if (position < 0) {\n                var length_1 = this.rootIds.length;\n                this.rootIds.splice((position + length_1 + 1), 0, id);\n            }\n            else {\n                this.rootIds.splice(position, 0, id);\n            }\n        }\n        this.nodes[id] = this.nodes[id] || [];\n    };\n    MultiRootTree.prototype.insertIdIntoNode = function (nodeKey, id, position) {\n        this.nodes[nodeKey] = this.nodes[nodeKey] || [];\n        this.nodes[id] = this.nodes[id] || [];\n        if (position === undefined) {\n            this.nodeInsertAtEnd(nodeKey, id);\n        }\n        else {\n            if (position < 0) {\n                var length_2 = this.nodes[nodeKey].length;\n                this.nodes[nodeKey].splice((position + length_2 + 1), 0, id);\n            }\n            else {\n                this.nodes[nodeKey].splice(position, 0, id);\n            }\n        }\n    };\n    MultiRootTree.prototype.moveId = function (moveId, beforeId, direction) {\n        var sourceId = moveId;\n        var sourceRootIndex = this.findRootId(sourceId);\n        var sourceNodeKey;\n        var sourceNodeIdIndex;\n        if (this.nodes[beforeId]) {\n            sourceNodeKey = beforeId;\n        }\n        for (var nodeKey in this.nodes) {\n            if (this.nodes.hasOwnProperty(nodeKey)) {\n                sourceNodeIdIndex = this.findNodeId(nodeKey, beforeId);\n                break;\n            }\n        }\n        // got all\n        var targetId = beforeId;\n        var targetRootIndex = this.findRootId(targetId);\n        var targetNodeKey;\n        var targetNodeIdIndex;\n        if (this.nodes[beforeId]) {\n            targetNodeKey = beforeId;\n        }\n        for (var nodeKey in this.nodes) {\n            if (this.nodes.hasOwnProperty(nodeKey)) {\n                targetNodeIdIndex = this.findNodeId(nodeKey, beforeId);\n                break;\n            }\n        }\n        // got all\n        if (sourceRootIndex > -1) {\n            if (targetRootIndex > -1) {\n                // moving root to root\n                // console.log(`Moving ROOT to ROOT`);\n                // console.log(`RootIds:`);\n                // console.log(this.rootIds);\n                // console.log(`TargetIndex=${targetRootIndex}, SourceIndex=${sourceRootIndex}`);\n                // console.log(`TargetId=${targetId}, SourceId=${sourceId}`);\n                this.rootDelete(sourceRootIndex); // indexes change now\n                if (targetRootIndex > sourceRootIndex) {\n                    targetRootIndex--;\n                }\n                else {\n                }\n                switch (direction) {\n                    case Direction.BEFORE:\n                        this.insertIdIntoRoot(sourceId, targetRootIndex);\n                        break;\n                    case Direction.AFTER:\n                        this.insertIdIntoRoot(sourceId, targetRootIndex + 1);\n                        break;\n                    case Direction.INSIDE_AT_START:\n                        this.nodeInsertAtStart(targetId, sourceId);\n                        break;\n                    case Direction.INSIDE_AT_END:\n                        this.nodeInsertAtEnd(targetId, sourceId);\n                        break;\n                }\n            }\n            else {\n                // moving root (source) ABOVE node (target)\n                // will remove one entry from roots\n                this.rootDelete(sourceRootIndex);\n                for (var nodeKey in this.nodes) {\n                    if (this.nodes.hasOwnProperty(nodeKey)) {\n                        var index = this.findNodeId(nodeKey, targetId);\n                        if (index > -1) {\n                            switch (direction) {\n                                case Direction.BEFORE:\n                                    this.insertIdIntoNode(nodeKey, sourceId, index);\n                                    break;\n                                case Direction.AFTER:\n                                    this.insertIdIntoNode(nodeKey, sourceId, index + 1);\n                                    break;\n                                case Direction.INSIDE_AT_START:\n                                    this.nodeInsertAtStart(targetId, sourceId);\n                                    break;\n                                case Direction.INSIDE_AT_END:\n                                    this.nodeInsertAtEnd(targetId, sourceId);\n                                    break;\n                            }\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (targetRootIndex > -1) {\n                // moving node (source) ABOVE root (target)\n                // delete source id from each node\n                for (var nodeKey in this.nodes) {\n                    if (this.nodes.hasOwnProperty(nodeKey)) {\n                        var index = this.findNodeId(nodeKey, sourceId);\n                        if (index > -1) {\n                            // this.nodeInsertId(nodeKey, sourceId, index);\n                            this.nodeDeleteAtIndex(nodeKey, index);\n                            break;\n                        }\n                    }\n                }\n                switch (direction) {\n                    case Direction.BEFORE:\n                        this.insertIdIntoRoot(sourceId, targetRootIndex);\n                        break;\n                    case Direction.AFTER:\n                        this.insertIdIntoRoot(sourceId, targetRootIndex + 1);\n                        break;\n                    case Direction.INSIDE_AT_START:\n                        this.nodeInsertAtStart(targetId, sourceId);\n                        break;\n                    case Direction.INSIDE_AT_END:\n                        this.nodeInsertAtEnd(targetId, sourceId);\n                        break;\n                }\n            }\n            else {\n                // moving node (source) ABOVE node (target)\n                // delete source id from each node\n                for (var nodeKey in this.nodes) {\n                    if (this.nodes.hasOwnProperty(nodeKey)) {\n                        var index = this.findNodeId(nodeKey, sourceId);\n                        if (index > -1) {\n                            this.nodeDeleteAtIndex(nodeKey, index);\n                            break;\n                        }\n                    }\n                }\n                for (var nodeKey in this.nodes) {\n                    if (this.nodes.hasOwnProperty(nodeKey)) {\n                        var index = this.findNodeId(nodeKey, targetId);\n                        if (index > -1) {\n                            switch (direction) {\n                                case Direction.BEFORE:\n                                    this.insertIdIntoNode(nodeKey, sourceId, index);\n                                    break;\n                                case Direction.AFTER:\n                                    this.insertIdIntoNode(nodeKey, sourceId, index + 1);\n                                    break;\n                                case Direction.INSIDE_AT_START:\n                                    this.nodeInsertAtStart(targetId, sourceId);\n                                    break;\n                                case Direction.INSIDE_AT_END:\n                                    this.nodeInsertAtEnd(targetId, sourceId);\n                                    break;\n                            }\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    MultiRootTree.prototype.swapArrayElements = function (arr, indexA, indexB) {\n        var temp = arr[indexA];\n        arr[indexA] = arr[indexB];\n        arr[indexB] = temp;\n        return arr;\n    };\n    MultiRootTree.prototype.rootDeleteId = function (id) {\n        var index = this.findRootId(id);\n        if (index > -1) {\n            this.rootDelete(index);\n        }\n    };\n    MultiRootTree.prototype.nodeAndSubNodesDelete = function (nodeKey) {\n        var toDeleteLater = [];\n        for (var i = 0; i < this.nodes[nodeKey].length; i++) {\n            var id = this.nodes[nodeKey][i];\n            this.nodeAndSubNodesDelete(id);\n            toDeleteLater.push(nodeKey);\n        }\n        this.nodeDelete(nodeKey);\n        for (var i = 0; i < toDeleteLater.length; i++) {\n            this.nodeDelete(toDeleteLater[i]);\n        }\n    };\n    MultiRootTree.prototype.nodeRefrencesDelete = function (id) {\n        for (var nodeKey in this.nodes) {\n            if (this.nodes.hasOwnProperty(nodeKey)) {\n                for (var i = 0; i < this.nodes[nodeKey].length; i++) {\n                    var targetId = this.nodes[nodeKey][i];\n                    if (targetId === id) {\n                        this.nodeDeleteAtIndex(nodeKey, i);\n                    }\n                }\n            }\n        }\n    };\n    MultiRootTree.prototype.nodeDelete = function (nodeKey) {\n        delete this.nodes[nodeKey];\n    };\n    MultiRootTree.prototype.findRootId = function (id) {\n        return this.rootIds.indexOf(id);\n    };\n    MultiRootTree.prototype.findNodeId = function (nodeKey, id) {\n        return this.nodes[nodeKey].indexOf(id);\n    };\n    MultiRootTree.prototype.findNode = function (nodeKey) {\n        return this.nodes[nodeKey];\n    };\n    MultiRootTree.prototype.nodeInsertAtStart = function (nodeKey, id) {\n        this.nodes[nodeKey].unshift(id);\n    };\n    MultiRootTree.prototype.nodeInsertAtEnd = function (nodeKey, id) {\n        this.nodes[nodeKey].push(id);\n    };\n    MultiRootTree.prototype.rootDelete = function (index) {\n        this.rootIds.splice(index, 1);\n    };\n    MultiRootTree.prototype.nodeDeleteAtIndex = function (nodeKey, index) {\n        this.nodes[nodeKey].splice(index, 1);\n    };\n    MultiRootTree.prototype.rootInsertAtStart = function (id) {\n        this.rootIds.unshift(id);\n    };\n    MultiRootTree.prototype.rootInsertAtEnd = function (id) {\n        this.rootIds.push(id);\n    };\n    return MultiRootTree;\n}());\nexports.default = MultiRootTree;\n//# sourceMappingURL=MultiRootTree.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/MultiRootTree.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/PriorityQueue.js":
/*!*************************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/PriorityQueue.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\nvar Heap_1 = __webpack_require__(/*! ./Heap */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Heap.js\");\nvar PriorityQueue = /** @class */ (function () {\n    /**\n     * Creates an empty priority queue.\n     * @class <p>In a priority queue each element is associated with a \"priority\",\n     * elements are dequeued in highest-priority-first order (the elements with the\n     * highest priority are dequeued first). Priority Queues are implemented as heaps.\n     * If the inserted elements are custom objects a compare function must be provided,\n     * otherwise the <=, === and >= operators are used to compare object priority.</p>\n     * <pre>\n     * function compare(a, b) {\n     *  if (a is less than b by some ordering criterion) {\n     *     return -1;\n     *  } if (a is greater than b by the ordering criterion) {\n     *     return 1;\n     *  }\n     *  // a must be equal to b\n     *  return 0;\n     * }\n     * </pre>\n     * @constructor\n     * @param {function(Object,Object):number=} compareFunction optional\n     * function used to compare two element priorities. Must return a negative integer,\n     * zero, or a positive integer as the first argument is less than, equal to,\n     * or greater than the second.\n     */\n    function PriorityQueue(compareFunction) {\n        this.heap = new Heap_1.default(util.reverseCompareFunction(compareFunction));\n    }\n    /**\n     * Inserts the specified element into this priority queue.\n     * @param {Object} element the element to insert.\n     * @return {boolean} true if the element was inserted, or false if it is undefined.\n     */\n    PriorityQueue.prototype.enqueue = function (element) {\n        return this.heap.add(element);\n    };\n    /**\n     * Inserts the specified element into this priority queue.\n     * @param {Object} element the element to insert.\n     * @return {boolean} true if the element was inserted, or false if it is undefined.\n     */\n    PriorityQueue.prototype.add = function (element) {\n        return this.heap.add(element);\n    };\n    /**\n     * Retrieves and removes the highest priority element of this queue.\n     * @return {*} the the highest priority element of this queue,\n     *  or undefined if this queue is empty.\n     */\n    PriorityQueue.prototype.dequeue = function () {\n        if (this.heap.size() !== 0) {\n            var el = this.heap.peek();\n            this.heap.removeRoot();\n            return el;\n        }\n        return undefined;\n    };\n    /**\n     * Retrieves, but does not remove, the highest priority element of this queue.\n     * @return {*} the highest priority element of this queue, or undefined if this queue is empty.\n     */\n    PriorityQueue.prototype.peek = function () {\n        return this.heap.peek();\n    };\n    /**\n     * Returns true if this priority queue contains the specified element.\n     * @param {Object} element element to search for.\n     * @return {boolean} true if this priority queue contains the specified element,\n     * false otherwise.\n     */\n    PriorityQueue.prototype.contains = function (element) {\n        return this.heap.contains(element);\n    };\n    /**\n     * Checks if this priority queue is empty.\n     * @return {boolean} true if and only if this priority queue contains no items; false\n     * otherwise.\n     */\n    PriorityQueue.prototype.isEmpty = function () {\n        return this.heap.isEmpty();\n    };\n    /**\n     * Returns the number of elements in this priority queue.\n     * @return {number} the number of elements in this priority queue.\n     */\n    PriorityQueue.prototype.size = function () {\n        return this.heap.size();\n    };\n    /**\n     * Removes all of the elements from this priority queue.\n     */\n    PriorityQueue.prototype.clear = function () {\n        this.heap.clear();\n    };\n    /**\n     * Executes the provided function once for each element present in this queue in\n     * no particular order.\n     * @param {function(Object):*} callback function to execute, it is\n     * invoked with one argument: the element value, to break the iteration you can\n     * optionally return false.\n     */\n    PriorityQueue.prototype.forEach = function (callback) {\n        this.heap.forEach(callback);\n    };\n    return PriorityQueue;\n}()); // end of priority queue\nexports.default = PriorityQueue;\n//# sourceMappingURL=PriorityQueue.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/PriorityQueue.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Queue.js":
/*!*****************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Queue.js ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedList_1 = __webpack_require__(/*! ./LinkedList */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/LinkedList.js\");\nvar Queue = /** @class */ (function () {\n    /**\n     * Creates an empty queue.\n     * @class A queue is a First-In-First-Out (FIFO) data structure, the first\n     * element added to the queue will be the first one to be removed. This\n     * implementation uses a linked list as a container.\n     * @constructor\n     */\n    function Queue() {\n        this.list = new LinkedList_1.default();\n    }\n    /**\n     * Inserts the specified element into the end of this queue.\n     * @param {Object} elem the element to insert.\n     * @return {boolean} true if the element was inserted, or false if it is undefined.\n     */\n    Queue.prototype.enqueue = function (elem) {\n        return this.list.add(elem);\n    };\n    /**\n     * Inserts the specified element into the end of this queue.\n     * @param {Object} elem the element to insert.\n     * @return {boolean} true if the element was inserted, or false if it is undefined.\n     */\n    Queue.prototype.add = function (elem) {\n        return this.list.add(elem);\n    };\n    /**\n     * Retrieves and removes the head of this queue.\n     * @return {*} the head of this queue, or undefined if this queue is empty.\n     */\n    Queue.prototype.dequeue = function () {\n        if (this.list.size() !== 0) {\n            var el = this.list.first();\n            this.list.removeElementAtIndex(0);\n            return el;\n        }\n        return undefined;\n    };\n    /**\n     * Retrieves, but does not remove, the head of this queue.\n     * @return {*} the head of this queue, or undefined if this queue is empty.\n     */\n    Queue.prototype.peek = function () {\n        if (this.list.size() !== 0) {\n            return this.list.first();\n        }\n        return undefined;\n    };\n    /**\n     * Returns the number of elements in this queue.\n     * @return {number} the number of elements in this queue.\n     */\n    Queue.prototype.size = function () {\n        return this.list.size();\n    };\n    /**\n     * Returns true if this queue contains the specified element.\n     * <p>If the elements inside this stack are\n     * not comparable with the === operator, a custom equals function should be\n     * provided to perform searches, the function must receive two arguments and\n     * return true if they are equal, false otherwise. Example:</p>\n     *\n     * <pre>\n     * const petsAreEqualByName (pet1, pet2) {\n     *  return pet1.name === pet2.name;\n     * }\n     * </pre>\n     * @param {Object} elem element to search for.\n     * @param {function(Object,Object):boolean=} equalsFunction optional\n     * function to check if two elements are equal.\n     * @return {boolean} true if this queue contains the specified element,\n     * false otherwise.\n     */\n    Queue.prototype.contains = function (elem, equalsFunction) {\n        return this.list.contains(elem, equalsFunction);\n    };\n    /**\n     * Checks if this queue is empty.\n     * @return {boolean} true if and only if this queue contains no items; false\n     * otherwise.\n     */\n    Queue.prototype.isEmpty = function () {\n        return this.list.size() <= 0;\n    };\n    /**\n     * Removes all of the elements from this queue.\n     */\n    Queue.prototype.clear = function () {\n        this.list.clear();\n    };\n    /**\n     * Executes the provided function once for each element present in this queue in\n     * FIFO order.\n     * @param {function(Object):*} callback function to execute, it is\n     * invoked with one argument: the element value, to break the iteration you can\n     * optionally return false.\n     */\n    Queue.prototype.forEach = function (callback) {\n        this.list.forEach(callback);\n    };\n    return Queue;\n}()); // End of queue\nexports.default = Queue;\n//# sourceMappingURL=Queue.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Queue.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Set.js":
/*!***************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Set.js ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\nvar arrays = __webpack_require__(/*! ./arrays */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/arrays.js\");\nvar Dictionary_1 = __webpack_require__(/*! ./Dictionary */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Dictionary.js\");\nvar Set = /** @class */ (function () {\n    /**\n     * Creates an empty set.\n     * @class <p>A set is a data structure that contains no duplicate items.</p>\n     * <p>If the inserted elements are custom objects a function\n     * which converts elements to strings must be provided. Example:</p>\n     *\n     * <pre>\n     * function petToString(pet) {\n     *  return pet.name;\n     * }\n     * </pre>\n     *\n     * @constructor\n     * @param {function(Object):string=} toStringFunction optional function used\n     * to convert elements to strings. If the elements aren't strings or if toString()\n     * is not appropriate, a custom function which receives an object and returns a\n     * unique string must be provided.\n     */\n    function Set(toStringFunction) {\n        this.dictionary = new Dictionary_1.default(toStringFunction);\n    }\n    /**\n     * Returns true if this set contains the specified element.\n     * @param {Object} element element to search for.\n     * @return {boolean} true if this set contains the specified element,\n     * false otherwise.\n     */\n    Set.prototype.contains = function (element) {\n        return this.dictionary.containsKey(element);\n    };\n    /**\n     * Adds the specified element to this set if it is not already present.\n     * @param {Object} element the element to insert.\n     * @return {boolean} true if this set did not already contain the specified element.\n     */\n    Set.prototype.add = function (element) {\n        if (this.contains(element) || util.isUndefined(element)) {\n            return false;\n        }\n        else {\n            this.dictionary.setValue(element, element);\n            return true;\n        }\n    };\n    /**\n     * Performs an intersection between this and another set.\n     * Removes all values that are not present this set and the given set.\n     * @param {collections.Set} otherSet other set.\n     */\n    Set.prototype.intersection = function (otherSet) {\n        var set = this;\n        this.forEach(function (element) {\n            if (!otherSet.contains(element)) {\n                set.remove(element);\n            }\n            return true;\n        });\n    };\n    /**\n     * Performs a union between this and another set.\n     * Adds all values from the given set to this set.\n     * @param {collections.Set} otherSet other set.\n     */\n    Set.prototype.union = function (otherSet) {\n        var set = this;\n        otherSet.forEach(function (element) {\n            set.add(element);\n            return true;\n        });\n    };\n    /**\n     * Performs a difference between this and another set.\n     * Removes from this set all the values that are present in the given set.\n     * @param {collections.Set} otherSet other set.\n     */\n    Set.prototype.difference = function (otherSet) {\n        var set = this;\n        otherSet.forEach(function (element) {\n            set.remove(element);\n            return true;\n        });\n    };\n    /**\n     * Checks whether the given set contains all the elements in this set.\n     * @param {collections.Set} otherSet other set.\n     * @return {boolean} true if this set is a subset of the given set.\n     */\n    Set.prototype.isSubsetOf = function (otherSet) {\n        if (this.size() > otherSet.size()) {\n            return false;\n        }\n        var isSub = true;\n        this.forEach(function (element) {\n            if (!otherSet.contains(element)) {\n                isSub = false;\n                return false;\n            }\n            return true;\n        });\n        return isSub;\n    };\n    /**\n     * Removes the specified element from this set if it is present.\n     * @return {boolean} true if this set contained the specified element.\n     */\n    Set.prototype.remove = function (element) {\n        if (!this.contains(element)) {\n            return false;\n        }\n        else {\n            this.dictionary.remove(element);\n            return true;\n        }\n    };\n    /**\n     * Executes the provided function once for each element\n     * present in this set.\n     * @param {function(Object):*} callback function to execute, it is\n     * invoked with one arguments: the element. To break the iteration you can\n     * optionally return false.\n     */\n    Set.prototype.forEach = function (callback) {\n        this.dictionary.forEach(function (k, v) {\n            return callback(v);\n        });\n    };\n    /**\n     * Returns an array containing all of the elements in this set in arbitrary order.\n     * @return {Array} an array containing all of the elements in this set.\n     */\n    Set.prototype.toArray = function () {\n        return this.dictionary.values();\n    };\n    /**\n     * Returns true if this set contains no elements.\n     * @return {boolean} true if this set contains no elements.\n     */\n    Set.prototype.isEmpty = function () {\n        return this.dictionary.isEmpty();\n    };\n    /**\n     * Returns the number of elements in this set.\n     * @return {number} the number of elements in this set.\n     */\n    Set.prototype.size = function () {\n        return this.dictionary.size();\n    };\n    /**\n     * Removes all of the elements from this set.\n     */\n    Set.prototype.clear = function () {\n        this.dictionary.clear();\n    };\n    /*\n    * Provides a string representation for display\n    */\n    Set.prototype.toString = function () {\n        return arrays.toString(this.toArray());\n    };\n    return Set;\n}()); // end of Set\nexports.default = Set;\n//# sourceMappingURL=Set.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Set.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Stack.js":
/*!*****************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Stack.js ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedList_1 = __webpack_require__(/*! ./LinkedList */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/LinkedList.js\");\nvar Stack = /** @class */ (function () {\n    /**\n     * Creates an empty Stack.\n     * @class A Stack is a Last-In-First-Out (LIFO) data structure, the last\n     * element added to the stack will be the first one to be removed. This\n     * implementation uses a linked list as a container.\n     * @constructor\n     */\n    function Stack() {\n        this.list = new LinkedList_1.default();\n    }\n    /**\n     * Pushes an item onto the top of this stack.\n     * @param {Object} elem the element to be pushed onto this stack.\n     * @return {boolean} true if the element was pushed or false if it is undefined.\n     */\n    Stack.prototype.push = function (elem) {\n        return this.list.add(elem, 0);\n    };\n    /**\n     * Pushes an item onto the top of this stack.\n     * @param {Object} elem the element to be pushed onto this stack.\n     * @return {boolean} true if the element was pushed or false if it is undefined.\n     */\n    Stack.prototype.add = function (elem) {\n        return this.list.add(elem, 0);\n    };\n    /**\n     * Removes the object at the top of this stack and returns that object.\n     * @return {*} the object at the top of this stack or undefined if the\n     * stack is empty.\n     */\n    Stack.prototype.pop = function () {\n        return this.list.removeElementAtIndex(0);\n    };\n    /**\n     * Looks at the object at the top of this stack without removing it from the\n     * stack.\n     * @return {*} the object at the top of this stack or undefined if the\n     * stack is empty.\n     */\n    Stack.prototype.peek = function () {\n        return this.list.first();\n    };\n    /**\n     * Returns the number of elements in this stack.\n     * @return {number} the number of elements in this stack.\n     */\n    Stack.prototype.size = function () {\n        return this.list.size();\n    };\n    /**\n     * Returns true if this stack contains the specified element.\n     * <p>If the elements inside this stack are\n     * not comparable with the === operator, a custom equals function should be\n     * provided to perform searches, the function must receive two arguments and\n     * return true if they are equal, false otherwise. Example:</p>\n     *\n     * <pre>\n     * const petsAreEqualByName (pet1, pet2) {\n     *  return pet1.name === pet2.name;\n     * }\n     * </pre>\n     * @param {Object} elem element to search for.\n     * @param {function(Object,Object):boolean=} equalsFunction optional\n     * function to check if two elements are equal.\n     * @return {boolean} true if this stack contains the specified element,\n     * false otherwise.\n     */\n    Stack.prototype.contains = function (elem, equalsFunction) {\n        return this.list.contains(elem, equalsFunction);\n    };\n    /**\n     * Checks if this stack is empty.\n     * @return {boolean} true if and only if this stack contains no items; false\n     * otherwise.\n     */\n    Stack.prototype.isEmpty = function () {\n        return this.list.isEmpty();\n    };\n    /**\n     * Removes all of the elements from this stack.\n     */\n    Stack.prototype.clear = function () {\n        this.list.clear();\n    };\n    /**\n     * Executes the provided function once for each element present in this stack in\n     * LIFO order.\n     * @param {function(Object):*} callback function to execute, it is\n     * invoked with one argument: the element value, to break the iteration you can\n     * optionally return false.\n     */\n    Stack.prototype.forEach = function (callback) {\n        this.list.forEach(callback);\n    };\n    return Stack;\n}()); // End of stack\nexports.default = Stack;\n//# sourceMappingURL=Stack.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/Stack.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/arrays.js":
/*!******************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/arrays.js ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\n/**\n * Returns the position of the first occurrence of the specified item\n * within the specified array.4\n * @param {*} array the array in which to search the element.\n * @param {Object} item the element to search.\n * @param {function(Object,Object):boolean=} equalsFunction optional function used to\n * check equality between 2 elements.\n * @return {number} the position of the first occurrence of the specified element\n * within the specified array, or -1 if not found.\n */\nfunction indexOf(array, item, equalsFunction) {\n    var equals = equalsFunction || util.defaultEquals;\n    var length = array.length;\n    for (var i = 0; i < length; i++) {\n        if (equals(array[i], item)) {\n            return i;\n        }\n    }\n    return -1;\n}\nexports.indexOf = indexOf;\n/**\n * Returns the position of the last occurrence of the specified element\n * within the specified array.\n * @param {*} array the array in which to search the element.\n * @param {Object} item the element to search.\n * @param {function(Object,Object):boolean=} equalsFunction optional function used to\n * check equality between 2 elements.\n * @return {number} the position of the last occurrence of the specified element\n * within the specified array or -1 if not found.\n */\nfunction lastIndexOf(array, item, equalsFunction) {\n    var equals = equalsFunction || util.defaultEquals;\n    var length = array.length;\n    for (var i = length - 1; i >= 0; i--) {\n        if (equals(array[i], item)) {\n            return i;\n        }\n    }\n    return -1;\n}\nexports.lastIndexOf = lastIndexOf;\n/**\n * Returns true if the specified array contains the specified element.\n * @param {*} array the array in which to search the element.\n * @param {Object} item the element to search.\n * @param {function(Object,Object):boolean=} equalsFunction optional function to\n * check equality between 2 elements.\n * @return {boolean} true if the specified array contains the specified element.\n */\nfunction contains(array, item, equalsFunction) {\n    return indexOf(array, item, equalsFunction) >= 0;\n}\nexports.contains = contains;\n/**\n * Removes the first ocurrence of the specified element from the specified array.\n * @param {*} array the array in which to search element.\n * @param {Object} item the element to search.\n * @param {function(Object,Object):boolean=} equalsFunction optional function to\n * check equality between 2 elements.\n * @return {boolean} true if the array changed after this call.\n */\nfunction remove(array, item, equalsFunction) {\n    var index = indexOf(array, item, equalsFunction);\n    if (index < 0) {\n        return false;\n    }\n    array.splice(index, 1);\n    return true;\n}\nexports.remove = remove;\n/**\n * Returns the number of elements in the specified array equal\n * to the specified object.\n * @param {Array} array the array in which to determine the frequency of the element.\n * @param {Object} item the element whose frequency is to be determined.\n * @param {function(Object,Object):boolean=} equalsFunction optional function used to\n * check equality between 2 elements.\n * @return {number} the number of elements in the specified array\n * equal to the specified object.\n */\nfunction frequency(array, item, equalsFunction) {\n    var equals = equalsFunction || util.defaultEquals;\n    var length = array.length;\n    var freq = 0;\n    for (var i = 0; i < length; i++) {\n        if (equals(array[i], item)) {\n            freq++;\n        }\n    }\n    return freq;\n}\nexports.frequency = frequency;\n/**\n * Returns true if the two specified arrays are equal to one another.\n * Two arrays are considered equal if both arrays contain the same number\n * of elements, and all corresponding pairs of elements in the two\n * arrays are equal and are in the same order.\n * @param {Array} array1 one array to be tested for equality.\n * @param {Array} array2 the other array to be tested for equality.\n * @param {function(Object,Object):boolean=} equalsFunction optional function used to\n * check equality between elemements in the arrays.\n * @return {boolean} true if the two arrays are equal\n */\nfunction equals(array1, array2, equalsFunction) {\n    var equals = equalsFunction || util.defaultEquals;\n    if (array1.length !== array2.length) {\n        return false;\n    }\n    var length = array1.length;\n    for (var i = 0; i < length; i++) {\n        if (!equals(array1[i], array2[i])) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.equals = equals;\n/**\n * Returns shallow a copy of the specified array.\n * @param {*} array the array to copy.\n * @return {Array} a copy of the specified array\n */\nfunction copy(array) {\n    return array.concat();\n}\nexports.copy = copy;\n/**\n * Swaps the elements at the specified positions in the specified array.\n * @param {Array} array The array in which to swap elements.\n * @param {number} i the index of one element to be swapped.\n * @param {number} j the index of the other element to be swapped.\n * @return {boolean} true if the array is defined and the indexes are valid.\n */\nfunction swap(array, i, j) {\n    if (i < 0 || i >= array.length || j < 0 || j >= array.length) {\n        return false;\n    }\n    var temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n    return true;\n}\nexports.swap = swap;\nfunction toString(array) {\n    return '[' + array.toString() + ']';\n}\nexports.toString = toString;\n/**\n * Executes the provided function once for each element present in this array\n * starting from index 0 to length - 1.\n * @param {Array} array The array in which to iterate.\n * @param {function(Object):*} callback function to execute, it is\n * invoked with one argument: the element value, to break the iteration you can\n * optionally return false.\n */\nfunction forEach(array, callback) {\n    for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\n        var ele = array_1[_i];\n        if (callback(ele) === false) {\n            return;\n        }\n    }\n}\nexports.forEach = forEach;\n//# sourceMappingURL=arrays.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/arrays.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/index.js":
/*!*****************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/index.js ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright 2013 Basarat Ali Syed. All Rights Reserved.\n//\n// Licensed under MIT open source license http://opensource.org/licenses/MIT\n//\n// Orginal javascript code was by Mauricio Santos\n//\nvar _arrays = __webpack_require__(/*! ./arrays */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/arrays.js\");\nexports.arrays = _arrays;\nvar Bag_1 = __webpack_require__(/*! ./Bag */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Bag.js\");\nexports.Bag = Bag_1.default;\nvar BSTree_1 = __webpack_require__(/*! ./BSTree */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/BSTree.js\");\nexports.BSTree = BSTree_1.default;\nvar BSTreeKV_1 = __webpack_require__(/*! ./BSTreeKV */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/BSTreeKV.js\");\nexports.BSTreeKV = BSTreeKV_1.default;\nvar Dictionary_1 = __webpack_require__(/*! ./Dictionary */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Dictionary.js\");\nexports.Dictionary = Dictionary_1.default;\nvar Heap_1 = __webpack_require__(/*! ./Heap */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Heap.js\");\nexports.Heap = Heap_1.default;\nvar LinkedDictionary_1 = __webpack_require__(/*! ./LinkedDictionary */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/LinkedDictionary.js\");\nexports.LinkedDictionary = LinkedDictionary_1.default;\nvar LinkedList_1 = __webpack_require__(/*! ./LinkedList */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/LinkedList.js\");\nexports.LinkedList = LinkedList_1.default;\nvar MultiDictionary_1 = __webpack_require__(/*! ./MultiDictionary */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/MultiDictionary.js\");\nexports.MultiDictionary = MultiDictionary_1.default;\nvar FactoryDictionary_1 = __webpack_require__(/*! ./FactoryDictionary */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/FactoryDictionary.js\");\nexports.FactoryDictionary = FactoryDictionary_1.default;\nvar FactoryDictionary_2 = __webpack_require__(/*! ./FactoryDictionary */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/FactoryDictionary.js\");\nexports.DefaultDictionary = FactoryDictionary_2.default;\nvar Queue_1 = __webpack_require__(/*! ./Queue */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Queue.js\");\nexports.Queue = Queue_1.default;\nvar PriorityQueue_1 = __webpack_require__(/*! ./PriorityQueue */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/PriorityQueue.js\");\nexports.PriorityQueue = PriorityQueue_1.default;\nvar Set_1 = __webpack_require__(/*! ./Set */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Set.js\");\nexports.Set = Set_1.default;\nvar Stack_1 = __webpack_require__(/*! ./Stack */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/Stack.js\");\nexports.Stack = Stack_1.default;\nvar MultiRootTree_1 = __webpack_require__(/*! ./MultiRootTree */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/MultiRootTree.js\");\nexports.MultiRootTree = MultiRootTree_1.default;\nvar _util = __webpack_require__(/*! ./util */ \"../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js\");\nexports.util = _util;\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/index.js?");

/***/ }),

/***/ "../../pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js":
/*!****************************************************************************************************!*\
  !*** /Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\nexports.has = function (obj, prop) {\n    return _hasOwnProperty.call(obj, prop);\n};\n/**\n * Default function to compare element order.\n * @function\n */\nfunction defaultCompare(a, b) {\n    if (a < b) {\n        return -1;\n    }\n    else if (a === b) {\n        return 0;\n    }\n    else {\n        return 1;\n    }\n}\nexports.defaultCompare = defaultCompare;\n/**\n * Default function to test equality.\n * @function\n */\nfunction defaultEquals(a, b) {\n    return a === b;\n}\nexports.defaultEquals = defaultEquals;\n/**\n * Default function to convert an object to a string.\n * @function\n */\nfunction defaultToString(item) {\n    if (item === null) {\n        return 'COLLECTION_NULL';\n    }\n    else if (isUndefined(item)) {\n        return 'COLLECTION_UNDEFINED';\n    }\n    else if (isString(item)) {\n        return '$s' + item;\n    }\n    else {\n        return '$o' + item.toString();\n    }\n}\nexports.defaultToString = defaultToString;\n/**\n * Joins all the properies of the object using the provided join string\n */\nfunction makeString(item, join) {\n    if (join === void 0) { join = ','; }\n    if (item === null) {\n        return 'COLLECTION_NULL';\n    }\n    else if (isUndefined(item)) {\n        return 'COLLECTION_UNDEFINED';\n    }\n    else if (isString(item)) {\n        return item.toString();\n    }\n    else {\n        var toret = '{';\n        var first = true;\n        for (var prop in item) {\n            if (exports.has(item, prop)) {\n                if (first) {\n                    first = false;\n                }\n                else {\n                    toret = toret + join;\n                }\n                toret = toret + prop + ':' + item[prop];\n            }\n        }\n        return toret + '}';\n    }\n}\nexports.makeString = makeString;\n/**\n * Checks if the given argument is a function.\n * @function\n */\nfunction isFunction(func) {\n    return (typeof func) === 'function';\n}\nexports.isFunction = isFunction;\n/**\n * Checks if the given argument is undefined.\n * @function\n */\nfunction isUndefined(obj) {\n    return (typeof obj) === 'undefined';\n}\nexports.isUndefined = isUndefined;\n/**\n * Checks if the given argument is a string.\n * @function\n */\nfunction isString(obj) {\n    return Object.prototype.toString.call(obj) === '[object String]';\n}\nexports.isString = isString;\n/**\n * Reverses a compare function.\n * @function\n */\nfunction reverseCompareFunction(compareFunction) {\n    if (isUndefined(compareFunction) || !isFunction(compareFunction)) {\n        return function (a, b) {\n            if (a < b) {\n                return 1;\n            }\n            else if (a === b) {\n                return 0;\n            }\n            else {\n                return -1;\n            }\n        };\n    }\n    else {\n        return function (d, v) {\n            return compareFunction(d, v) * -1;\n        };\n    }\n}\nexports.reverseCompareFunction = reverseCompareFunction;\n/**\n * Returns an equal function given a compare function.\n * @function\n */\nfunction compareToEquals(compareFunction) {\n    return function (a, b) {\n        return compareFunction(a, b) === 0;\n    };\n}\nexports.compareToEquals = compareToEquals;\n//# sourceMappingURL=util.js.map\n\n//# sourceURL=webpack://picatown-core//Users/gxm/workspace/pixelpai/game-core/node_modules/typescript-collections/dist/lib/util.js?");

/***/ }),

/***/ "./node_modules/base64-js/index.js":
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n\n\n//# sourceURL=webpack://picatown-core/./node_modules/base64-js/index.js?");

/***/ }),

/***/ "./node_modules/copy-text-to-clipboard/index.js":
/*!******************************************************!*\
  !*** ./node_modules/copy-text-to-clipboard/index.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst copyTextToClipboard = (input, {target = document.body} = {}) => {\n\tconst element = document.createElement('textarea');\n\tconst previouslyFocusedElement = document.activeElement;\n\n\telement.value = input;\n\n\t// Prevent keyboard from showing on mobile\n\telement.setAttribute('readonly', '');\n\n\telement.style.contain = 'strict';\n\telement.style.position = 'absolute';\n\telement.style.left = '-9999px';\n\telement.style.fontSize = '12pt'; // Prevent zooming on iOS\n\n\tconst selection = document.getSelection();\n\tlet originalRange = false;\n\tif (selection.rangeCount > 0) {\n\t\toriginalRange = selection.getRangeAt(0);\n\t}\n\n\ttarget.append(element);\n\telement.select();\n\n\t// Explicit selection workaround for iOS\n\telement.selectionStart = 0;\n\telement.selectionEnd = input.length;\n\n\tlet isSuccess = false;\n\ttry {\n\t\tisSuccess = document.execCommand('copy');\n\t} catch (_) {}\n\n\telement.remove();\n\n\tif (originalRange) {\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(originalRange);\n\t}\n\n\t// Get the focus back on the previously focused element, if any\n\tif (previouslyFocusedElement) {\n\t\tpreviouslyFocusedElement.focus();\n\t}\n\n\treturn isSuccess;\n};\n\nmodule.exports = copyTextToClipboard;\n// TODO: Remove this for the next major release\nmodule.exports.default = copyTextToClipboard;\n\n\n//# sourceURL=webpack://picatown-core/./node_modules/copy-text-to-clipboard/index.js?");

/***/ }),

/***/ "./node_modules/ieee754/index.js":
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n//# sourceURL=webpack://picatown-core/./node_modules/ieee754/index.js?");

/***/ }),

/***/ "./node_modules/isarray/index.js":
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n//# sourceURL=webpack://picatown-core/./node_modules/isarray/index.js?");

/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/buffer/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/buffer/index.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\n\nvar base64 = __webpack_require__(/*! base64-js */ \"./node_modules/base64-js/index.js\")\nvar ieee754 = __webpack_require__(/*! ieee754 */ \"./node_modules/ieee754/index.js\")\nvar isArray = __webpack_require__(/*! isarray */ \"./node_modules/isarray/index.js\")\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack://picatown-core/./node_modules/node-libs-browser/node_modules/buffer/index.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack://picatown-core/(webpack)/buildin/global.js?");

/***/ }),

/***/ "./src sync recursive ^\\.\\/.*\\/.*$":
/*!*******************************!*\
  !*** ./src sync ^\.\/.*\/.*$ ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var map = {\n\t\"./ui/\": \"./src/ui/index.ts\",\n\t\"./ui/Activity\": \"./src/ui/Activity/index.ts\",\n\t\"./ui/Activity/\": \"./src/ui/Activity/index.ts\",\n\t\"./ui/Activity/ActivityMediator\": \"./src/ui/Activity/ActivityMediator.ts\",\n\t\"./ui/Activity/ActivityMediator.ts\": \"./src/ui/Activity/ActivityMediator.ts\",\n\t\"./ui/Activity/ActivityPanel\": \"./src/ui/Activity/ActivityPanel.ts\",\n\t\"./ui/Activity/ActivityPanel.ts\": \"./src/ui/Activity/ActivityPanel.ts\",\n\t\"./ui/Activity/index\": \"./src/ui/Activity/index.ts\",\n\t\"./ui/Activity/index.ts\": \"./src/ui/Activity/index.ts\",\n\t\"./ui/CharacterInfo\": \"./src/ui/CharacterInfo/index.ts\",\n\t\"./ui/CharacterInfo/\": \"./src/ui/CharacterInfo/index.ts\",\n\t\"./ui/CharacterInfo/CharacterEditorPanel\": \"./src/ui/CharacterInfo/CharacterEditorPanel.ts\",\n\t\"./ui/CharacterInfo/CharacterEditorPanel.ts\": \"./src/ui/CharacterInfo/CharacterEditorPanel.ts\",\n\t\"./ui/CharacterInfo/CharacterInfo\": \"./src/ui/CharacterInfo/CharacterInfo.ts\",\n\t\"./ui/CharacterInfo/CharacterInfo.ts\": \"./src/ui/CharacterInfo/CharacterInfo.ts\",\n\t\"./ui/CharacterInfo/CharacterInfoMediator\": \"./src/ui/CharacterInfo/CharacterInfoMediator.ts\",\n\t\"./ui/CharacterInfo/CharacterInfoMediator.ts\": \"./src/ui/CharacterInfo/CharacterInfoMediator.ts\",\n\t\"./ui/CharacterInfo/CharacterInfoPanel\": \"./src/ui/CharacterInfo/CharacterInfoPanel.ts\",\n\t\"./ui/CharacterInfo/CharacterInfoPanel.ts\": \"./src/ui/CharacterInfo/CharacterInfoPanel.ts\",\n\t\"./ui/CharacterInfo/GraphicsProgressBar\": \"./src/ui/CharacterInfo/GraphicsProgressBar.ts\",\n\t\"./ui/CharacterInfo/GraphicsProgressBar.ts\": \"./src/ui/CharacterInfo/GraphicsProgressBar.ts\",\n\t\"./ui/CharacterInfo/GridLayoutGroup\": \"./src/ui/CharacterInfo/GridLayoutGroup.ts\",\n\t\"./ui/CharacterInfo/GridLayoutGroup.ts\": \"./src/ui/CharacterInfo/GridLayoutGroup.ts\",\n\t\"./ui/CharacterInfo/ScrollRect\": \"./src/ui/CharacterInfo/ScrollRect.ts\",\n\t\"./ui/CharacterInfo/ScrollRect.ts\": \"./src/ui/CharacterInfo/ScrollRect.ts\",\n\t\"./ui/CharacterInfo/index\": \"./src/ui/CharacterInfo/index.ts\",\n\t\"./ui/CharacterInfo/index.ts\": \"./src/ui/CharacterInfo/index.ts\",\n\t\"./ui/Compose\": \"./src/ui/Compose/index.ts\",\n\t\"./ui/Compose/\": \"./src/ui/Compose/index.ts\",\n\t\"./ui/Compose/Compose\": \"./src/ui/Compose/Compose.ts\",\n\t\"./ui/Compose/Compose.ts\": \"./src/ui/Compose/Compose.ts\",\n\t\"./ui/Compose/ComposeMediator\": \"./src/ui/Compose/ComposeMediator.ts\",\n\t\"./ui/Compose/ComposeMediator.ts\": \"./src/ui/Compose/ComposeMediator.ts\",\n\t\"./ui/Compose/ComposePanel\": \"./src/ui/Compose/ComposePanel.ts\",\n\t\"./ui/Compose/ComposePanel.ts\": \"./src/ui/Compose/ComposePanel.ts\",\n\t\"./ui/Compose/index\": \"./src/ui/Compose/index.ts\",\n\t\"./ui/Compose/index.ts\": \"./src/ui/Compose/index.ts\",\n\t\"./ui/CutIn\": \"./src/ui/CutIn/index.ts\",\n\t\"./ui/CutIn/\": \"./src/ui/CutIn/index.ts\",\n\t\"./ui/CutIn/CutInMediator\": \"./src/ui/CutIn/CutInMediator.ts\",\n\t\"./ui/CutIn/CutInMediator.ts\": \"./src/ui/CutIn/CutInMediator.ts\",\n\t\"./ui/CutIn/CutInPanel\": \"./src/ui/CutIn/CutInPanel.ts\",\n\t\"./ui/CutIn/CutInPanel.ts\": \"./src/ui/CutIn/CutInPanel.ts\",\n\t\"./ui/CutIn/index\": \"./src/ui/CutIn/index.ts\",\n\t\"./ui/CutIn/index.ts\": \"./src/ui/CutIn/index.ts\",\n\t\"./ui/CutInMenu\": \"./src/ui/CutInMenu/index.ts\",\n\t\"./ui/CutInMenu/\": \"./src/ui/CutInMenu/index.ts\",\n\t\"./ui/CutInMenu/CutInMenu\": \"./src/ui/CutInMenu/CutInMenu.ts\",\n\t\"./ui/CutInMenu/CutInMenu.ts\": \"./src/ui/CutInMenu/CutInMenu.ts\",\n\t\"./ui/CutInMenu/CutInMenuMediator\": \"./src/ui/CutInMenu/CutInMenuMediator.ts\",\n\t\"./ui/CutInMenu/CutInMenuMediator.ts\": \"./src/ui/CutInMenu/CutInMenuMediator.ts\",\n\t\"./ui/CutInMenu/CutInMenuPanel\": \"./src/ui/CutInMenu/CutInMenuPanel.ts\",\n\t\"./ui/CutInMenu/CutInMenuPanel.ts\": \"./src/ui/CutInMenu/CutInMenuPanel.ts\",\n\t\"./ui/CutInMenu/index\": \"./src/ui/CutInMenu/index.ts\",\n\t\"./ui/CutInMenu/index.ts\": \"./src/ui/CutInMenu/index.ts\",\n\t\"./ui/EquipUpgrade\": \"./src/ui/EquipUpgrade/index.ts\",\n\t\"./ui/EquipUpgrade/\": \"./src/ui/EquipUpgrade/index.ts\",\n\t\"./ui/EquipUpgrade/EquipUpgrade\": \"./src/ui/EquipUpgrade/EquipUpgrade.ts\",\n\t\"./ui/EquipUpgrade/EquipUpgrade.ts\": \"./src/ui/EquipUpgrade/EquipUpgrade.ts\",\n\t\"./ui/EquipUpgrade/EquipUpgradeItem\": \"./src/ui/EquipUpgrade/EquipUpgradeItem.ts\",\n\t\"./ui/EquipUpgrade/EquipUpgradeItem.ts\": \"./src/ui/EquipUpgrade/EquipUpgradeItem.ts\",\n\t\"./ui/EquipUpgrade/EquipUpgradeMediator\": \"./src/ui/EquipUpgrade/EquipUpgradeMediator.ts\",\n\t\"./ui/EquipUpgrade/EquipUpgradeMediator.ts\": \"./src/ui/EquipUpgrade/EquipUpgradeMediator.ts\",\n\t\"./ui/EquipUpgrade/EquipUpgradePanel\": \"./src/ui/EquipUpgrade/EquipUpgradePanel.ts\",\n\t\"./ui/EquipUpgrade/EquipUpgradePanel.ts\": \"./src/ui/EquipUpgrade/EquipUpgradePanel.ts\",\n\t\"./ui/EquipUpgrade/index\": \"./src/ui/EquipUpgrade/index.ts\",\n\t\"./ui/EquipUpgrade/index.ts\": \"./src/ui/EquipUpgrade/index.ts\",\n\t\"./ui/FurniBag\": \"./src/ui/FurniBag/index.ts\",\n\t\"./ui/FurniBag/\": \"./src/ui/FurniBag/index.ts\",\n\t\"./ui/FurniBag/FurniBag\": \"./src/ui/FurniBag/FurniBag.ts\",\n\t\"./ui/FurniBag/FurniBag.ts\": \"./src/ui/FurniBag/FurniBag.ts\",\n\t\"./ui/FurniBag/FurniBagMediator\": \"./src/ui/FurniBag/FurniBagMediator.ts\",\n\t\"./ui/FurniBag/FurniBagMediator.ts\": \"./src/ui/FurniBag/FurniBagMediator.ts\",\n\t\"./ui/FurniBag/FurniBagPanel\": \"./src/ui/FurniBag/FurniBagPanel.ts\",\n\t\"./ui/FurniBag/FurniBagPanel.ts\": \"./src/ui/FurniBag/FurniBagPanel.ts\",\n\t\"./ui/FurniBag/index\": \"./src/ui/FurniBag/index.ts\",\n\t\"./ui/FurniBag/index.ts\": \"./src/ui/FurniBag/index.ts\",\n\t\"./ui/InfoPanel\": \"./src/ui/InfoPanel/index.ts\",\n\t\"./ui/InfoPanel/\": \"./src/ui/InfoPanel/index.ts\",\n\t\"./ui/InfoPanel/InfoPanel\": \"./src/ui/InfoPanel/InfoPanel.ts\",\n\t\"./ui/InfoPanel/InfoPanel.ts\": \"./src/ui/InfoPanel/InfoPanel.ts\",\n\t\"./ui/InfoPanel/InfoPanelMediator\": \"./src/ui/InfoPanel/InfoPanelMediator.ts\",\n\t\"./ui/InfoPanel/InfoPanelMediator.ts\": \"./src/ui/InfoPanel/InfoPanelMediator.ts\",\n\t\"./ui/InfoPanel/index\": \"./src/ui/InfoPanel/index.ts\",\n\t\"./ui/InfoPanel/index.ts\": \"./src/ui/InfoPanel/index.ts\",\n\t\"./ui/InteractivePanel\": \"./src/ui/InteractivePanel/index.ts\",\n\t\"./ui/InteractivePanel/\": \"./src/ui/InteractivePanel/index.ts\",\n\t\"./ui/InteractivePanel/InteractivePanel\": \"./src/ui/InteractivePanel/InteractivePanel.ts\",\n\t\"./ui/InteractivePanel/InteractivePanel.ts\": \"./src/ui/InteractivePanel/InteractivePanel.ts\",\n\t\"./ui/InteractivePanel/InteractivePanelMediator\": \"./src/ui/InteractivePanel/InteractivePanelMediator.ts\",\n\t\"./ui/InteractivePanel/InteractivePanelMediator.ts\": \"./src/ui/InteractivePanel/InteractivePanelMediator.ts\",\n\t\"./ui/InteractivePanel/index\": \"./src/ui/InteractivePanel/index.ts\",\n\t\"./ui/InteractivePanel/index.ts\": \"./src/ui/InteractivePanel/index.ts\",\n\t\"./ui/ItemDetail\": \"./src/ui/ItemDetail/index.ts\",\n\t\"./ui/ItemDetail/\": \"./src/ui/ItemDetail/index.ts\",\n\t\"./ui/ItemDetail/ItemDetail\": \"./src/ui/ItemDetail/ItemDetail.ts\",\n\t\"./ui/ItemDetail/ItemDetail.ts\": \"./src/ui/ItemDetail/ItemDetail.ts\",\n\t\"./ui/ItemDetail/ItemDetailMediator\": \"./src/ui/ItemDetail/ItemDetailMediator.ts\",\n\t\"./ui/ItemDetail/ItemDetailMediator.ts\": \"./src/ui/ItemDetail/ItemDetailMediator.ts\",\n\t\"./ui/ItemDetail/index\": \"./src/ui/ItemDetail/index.ts\",\n\t\"./ui/ItemDetail/index.ts\": \"./src/ui/ItemDetail/index.ts\",\n\t\"./ui/ItemPopCard\": \"./src/ui/ItemPopCard/index.ts\",\n\t\"./ui/ItemPopCard/\": \"./src/ui/ItemPopCard/index.ts\",\n\t\"./ui/ItemPopCard/ItemPopCardMediator\": \"./src/ui/ItemPopCard/ItemPopCardMediator.ts\",\n\t\"./ui/ItemPopCard/ItemPopCardMediator.ts\": \"./src/ui/ItemPopCard/ItemPopCardMediator.ts\",\n\t\"./ui/ItemPopCard/ItemPopCardPanel\": \"./src/ui/ItemPopCard/ItemPopCardPanel.ts\",\n\t\"./ui/ItemPopCard/ItemPopCardPanel.ts\": \"./src/ui/ItemPopCard/ItemPopCardPanel.ts\",\n\t\"./ui/ItemPopCard/index\": \"./src/ui/ItemPopCard/index.ts\",\n\t\"./ui/ItemPopCard/index.ts\": \"./src/ui/ItemPopCard/index.ts\",\n\t\"./ui/Market\": \"./src/ui/Market/index.ts\",\n\t\"./ui/Market/\": \"./src/ui/Market/index.ts\",\n\t\"./ui/Market/DetailDisplay\": \"./src/ui/Market/DetailDisplay.ts\",\n\t\"./ui/Market/DetailDisplay.ts\": \"./src/ui/Market/DetailDisplay.ts\",\n\t\"./ui/Market/ElementDetail\": \"./src/ui/Market/ElementDetail.ts\",\n\t\"./ui/Market/ElementDetail.ts\": \"./src/ui/Market/ElementDetail.ts\",\n\t\"./ui/Market/Market\": \"./src/ui/Market/Market.ts\",\n\t\"./ui/Market/Market.ts\": \"./src/ui/Market/Market.ts\",\n\t\"./ui/Market/MarketItem\": \"./src/ui/Market/MarketItem.ts\",\n\t\"./ui/Market/MarketItem.ts\": \"./src/ui/Market/MarketItem.ts\",\n\t\"./ui/Market/MarketMediator\": \"./src/ui/Market/MarketMediator.ts\",\n\t\"./ui/Market/MarketMediator.ts\": \"./src/ui/Market/MarketMediator.ts\",\n\t\"./ui/Market/MarketPanel\": \"./src/ui/Market/MarketPanel.ts\",\n\t\"./ui/Market/MarketPanel.ts\": \"./src/ui/Market/MarketPanel.ts\",\n\t\"./ui/Market/index\": \"./src/ui/Market/index.ts\",\n\t\"./ui/Market/index.ts\": \"./src/ui/Market/index.ts\",\n\t\"./ui/MessageBox\": \"./src/ui/MessageBox/index.ts\",\n\t\"./ui/MessageBox/\": \"./src/ui/MessageBox/index.ts\",\n\t\"./ui/MessageBox/MessageBoxMediator\": \"./src/ui/MessageBox/MessageBoxMediator.ts\",\n\t\"./ui/MessageBox/MessageBoxMediator.ts\": \"./src/ui/MessageBox/MessageBoxMediator.ts\",\n\t\"./ui/MessageBox/MessageBoxView\": \"./src/ui/MessageBox/MessageBoxView.ts\",\n\t\"./ui/MessageBox/MessageBoxView.ts\": \"./src/ui/MessageBox/MessageBoxView.ts\",\n\t\"./ui/MessageBox/index\": \"./src/ui/MessageBox/index.ts\",\n\t\"./ui/MessageBox/index.ts\": \"./src/ui/MessageBox/index.ts\",\n\t\"./ui/MineCar\": \"./src/ui/MineCar/index.ts\",\n\t\"./ui/MineCar/\": \"./src/ui/MineCar/index.ts\",\n\t\"./ui/MineCar/MineCar\": \"./src/ui/MineCar/MineCar.ts\",\n\t\"./ui/MineCar/MineCar.ts\": \"./src/ui/MineCar/MineCar.ts\",\n\t\"./ui/MineCar/MineCarMediator\": \"./src/ui/MineCar/MineCarMediator.ts\",\n\t\"./ui/MineCar/MineCarMediator.ts\": \"./src/ui/MineCar/MineCarMediator.ts\",\n\t\"./ui/MineCar/MineCarPanel\": \"./src/ui/MineCar/MineCarPanel.ts\",\n\t\"./ui/MineCar/MineCarPanel.ts\": \"./src/ui/MineCar/MineCarPanel.ts\",\n\t\"./ui/MineCar/index\": \"./src/ui/MineCar/index.ts\",\n\t\"./ui/MineCar/index.ts\": \"./src/ui/MineCar/index.ts\",\n\t\"./ui/MineSettle\": \"./src/ui/MineSettle/index.ts\",\n\t\"./ui/MineSettle/\": \"./src/ui/MineSettle/index.ts\",\n\t\"./ui/MineSettle/MineSettle\": \"./src/ui/MineSettle/MineSettle.ts\",\n\t\"./ui/MineSettle/MineSettle.ts\": \"./src/ui/MineSettle/MineSettle.ts\",\n\t\"./ui/MineSettle/MineSettleMediator\": \"./src/ui/MineSettle/MineSettleMediator.ts\",\n\t\"./ui/MineSettle/MineSettleMediator.ts\": \"./src/ui/MineSettle/MineSettleMediator.ts\",\n\t\"./ui/MineSettle/MineSettlePanel\": \"./src/ui/MineSettle/MineSettlePanel.ts\",\n\t\"./ui/MineSettle/MineSettlePanel.ts\": \"./src/ui/MineSettle/MineSettlePanel.ts\",\n\t\"./ui/MineSettle/index\": \"./src/ui/MineSettle/index.ts\",\n\t\"./ui/MineSettle/index.ts\": \"./src/ui/MineSettle/index.ts\",\n\t\"./ui/NpcDialogue\": \"./src/ui/NpcDialogue/index.ts\",\n\t\"./ui/NpcDialogue/\": \"./src/ui/NpcDialogue/index.ts\",\n\t\"./ui/NpcDialogue/NpcDialogue\": \"./src/ui/NpcDialogue/NpcDialogue.ts\",\n\t\"./ui/NpcDialogue/NpcDialogue.ts\": \"./src/ui/NpcDialogue/NpcDialogue.ts\",\n\t\"./ui/NpcDialogue/NpcDialogueMediator\": \"./src/ui/NpcDialogue/NpcDialogueMediator.ts\",\n\t\"./ui/NpcDialogue/NpcDialogueMediator.ts\": \"./src/ui/NpcDialogue/NpcDialogueMediator.ts\",\n\t\"./ui/NpcDialogue/NpcDialoguePanel\": \"./src/ui/NpcDialogue/NpcDialoguePanel.ts\",\n\t\"./ui/NpcDialogue/NpcDialoguePanel.ts\": \"./src/ui/NpcDialogue/NpcDialoguePanel.ts\",\n\t\"./ui/NpcDialogue/index\": \"./src/ui/NpcDialogue/index.ts\",\n\t\"./ui/NpcDialogue/index.ts\": \"./src/ui/NpcDialogue/index.ts\",\n\t\"./ui/PiCaMainUI\": \"./src/ui/PiCaMainUI/index.ts\",\n\t\"./ui/PiCaMainUI/\": \"./src/ui/PiCaMainUI/index.ts\",\n\t\"./ui/PiCaMainUI/PicaMainUI\": \"./src/ui/PiCaMainUI/PicaMainUI.ts\",\n\t\"./ui/PiCaMainUI/PicaMainUI.ts\": \"./src/ui/PiCaMainUI/PicaMainUI.ts\",\n\t\"./ui/PiCaMainUI/PicaMainUIMediator\": \"./src/ui/PiCaMainUI/PicaMainUIMediator.ts\",\n\t\"./ui/PiCaMainUI/PicaMainUIMediator.ts\": \"./src/ui/PiCaMainUI/PicaMainUIMediator.ts\",\n\t\"./ui/PiCaMainUI/PicaMainUIPanel\": \"./src/ui/PiCaMainUI/PicaMainUIPanel.ts\",\n\t\"./ui/PiCaMainUI/PicaMainUIPanel.ts\": \"./src/ui/PiCaMainUI/PicaMainUIPanel.ts\",\n\t\"./ui/PiCaMainUI/index\": \"./src/ui/PiCaMainUI/index.ts\",\n\t\"./ui/PiCaMainUI/index.ts\": \"./src/ui/PiCaMainUI/index.ts\",\n\t\"./ui/PicaChat\": \"./src/ui/PicaChat/index.ts\",\n\t\"./ui/PicaChat/\": \"./src/ui/PicaChat/index.ts\",\n\t\"./ui/PicaChat/PicaChat\": \"./src/ui/PicaChat/PicaChat.ts\",\n\t\"./ui/PicaChat/PicaChat.ts\": \"./src/ui/PicaChat/PicaChat.ts\",\n\t\"./ui/PicaChat/PicaChatMediator\": \"./src/ui/PicaChat/PicaChatMediator.ts\",\n\t\"./ui/PicaChat/PicaChatMediator.ts\": \"./src/ui/PicaChat/PicaChatMediator.ts\",\n\t\"./ui/PicaChat/PicaChatPanel\": \"./src/ui/PicaChat/PicaChatPanel.ts\",\n\t\"./ui/PicaChat/PicaChatPanel.ts\": \"./src/ui/PicaChat/PicaChatPanel.ts\",\n\t\"./ui/PicaChat/index\": \"./src/ui/PicaChat/index.ts\",\n\t\"./ui/PicaChat/index.ts\": \"./src/ui/PicaChat/index.ts\",\n\t\"./ui/PicaMessageBox\": \"./src/ui/PicaMessageBox/index.ts\",\n\t\"./ui/PicaMessageBox/\": \"./src/ui/PicaMessageBox/index.ts\",\n\t\"./ui/PicaMessageBox/PicaMessageBoxMediator\": \"./src/ui/PicaMessageBox/PicaMessageBoxMediator.ts\",\n\t\"./ui/PicaMessageBox/PicaMessageBoxMediator.ts\": \"./src/ui/PicaMessageBox/PicaMessageBoxMediator.ts\",\n\t\"./ui/PicaMessageBox/PicaMessageBoxPanel\": \"./src/ui/PicaMessageBox/PicaMessageBoxPanel.ts\",\n\t\"./ui/PicaMessageBox/PicaMessageBoxPanel.ts\": \"./src/ui/PicaMessageBox/PicaMessageBoxPanel.ts\",\n\t\"./ui/PicaMessageBox/index\": \"./src/ui/PicaMessageBox/index.ts\",\n\t\"./ui/PicaMessageBox/index.ts\": \"./src/ui/PicaMessageBox/index.ts\",\n\t\"./ui/PicaNavigate\": \"./src/ui/PicaNavigate/index.ts\",\n\t\"./ui/PicaNavigate/\": \"./src/ui/PicaNavigate/index.ts\",\n\t\"./ui/PicaNavigate/PicaNavigate\": \"./src/ui/PicaNavigate/PicaNavigate.ts\",\n\t\"./ui/PicaNavigate/PicaNavigate.ts\": \"./src/ui/PicaNavigate/PicaNavigate.ts\",\n\t\"./ui/PicaNavigate/PicaNavigateMediator\": \"./src/ui/PicaNavigate/PicaNavigateMediator.ts\",\n\t\"./ui/PicaNavigate/PicaNavigateMediator.ts\": \"./src/ui/PicaNavigate/PicaNavigateMediator.ts\",\n\t\"./ui/PicaNavigate/PicaNavigatePanel\": \"./src/ui/PicaNavigate/PicaNavigatePanel.ts\",\n\t\"./ui/PicaNavigate/PicaNavigatePanel.ts\": \"./src/ui/PicaNavigate/PicaNavigatePanel.ts\",\n\t\"./ui/PicaNavigate/index\": \"./src/ui/PicaNavigate/index.ts\",\n\t\"./ui/PicaNavigate/index.ts\": \"./src/ui/PicaNavigate/index.ts\",\n\t\"./ui/PicaNotice\": \"./src/ui/PicaNotice/index.ts\",\n\t\"./ui/PicaNotice/\": \"./src/ui/PicaNotice/index.ts\",\n\t\"./ui/PicaNotice/PicaNoticeMediator\": \"./src/ui/PicaNotice/PicaNoticeMediator.ts\",\n\t\"./ui/PicaNotice/PicaNoticeMediator.ts\": \"./src/ui/PicaNotice/PicaNoticeMediator.ts\",\n\t\"./ui/PicaNotice/PicaNoticePanel\": \"./src/ui/PicaNotice/PicaNoticePanel.ts\",\n\t\"./ui/PicaNotice/PicaNoticePanel.ts\": \"./src/ui/PicaNotice/PicaNoticePanel.ts\",\n\t\"./ui/PicaNotice/index\": \"./src/ui/PicaNotice/index.ts\",\n\t\"./ui/PicaNotice/index.ts\": \"./src/ui/PicaNotice/index.ts\",\n\t\"./ui/PicaRoomList\": \"./src/ui/PicaRoomList/index.ts\",\n\t\"./ui/PicaRoomList/\": \"./src/ui/PicaRoomList/index.ts\",\n\t\"./ui/PicaRoomList/PicaRoomListMediator\": \"./src/ui/PicaRoomList/PicaRoomListMediator.ts\",\n\t\"./ui/PicaRoomList/PicaRoomListMediator.ts\": \"./src/ui/PicaRoomList/PicaRoomListMediator.ts\",\n\t\"./ui/PicaRoomList/PicaRoomListPanel\": \"./src/ui/PicaRoomList/PicaRoomListPanel.ts\",\n\t\"./ui/PicaRoomList/PicaRoomListPanel.ts\": \"./src/ui/PicaRoomList/PicaRoomListPanel.ts\",\n\t\"./ui/PicaRoomList/RoomList\": \"./src/ui/PicaRoomList/RoomList.ts\",\n\t\"./ui/PicaRoomList/RoomList.ts\": \"./src/ui/PicaRoomList/RoomList.ts\",\n\t\"./ui/PicaRoomList/index\": \"./src/ui/PicaRoomList/index.ts\",\n\t\"./ui/PicaRoomList/index.ts\": \"./src/ui/PicaRoomList/index.ts\",\n\t\"./ui/Task\": \"./src/ui/Task/index.ts\",\n\t\"./ui/Task/\": \"./src/ui/Task/index.ts\",\n\t\"./ui/Task/Task\": \"./src/ui/Task/Task.ts\",\n\t\"./ui/Task/Task.ts\": \"./src/ui/Task/Task.ts\",\n\t\"./ui/Task/TaskMediator\": \"./src/ui/Task/TaskMediator.ts\",\n\t\"./ui/Task/TaskMediator.ts\": \"./src/ui/Task/TaskMediator.ts\",\n\t\"./ui/Task/TaskPanel\": \"./src/ui/Task/TaskPanel.ts\",\n\t\"./ui/Task/TaskPanel.ts\": \"./src/ui/Task/TaskPanel.ts\",\n\t\"./ui/Task/index\": \"./src/ui/Task/index.ts\",\n\t\"./ui/Task/index.ts\": \"./src/ui/Task/index.ts\",\n\t\"./ui/index\": \"./src/ui/index.ts\",\n\t\"./ui/index.ts\": \"./src/ui/index.ts\",\n\t\"./ui/loadview\": \"./src/ui/loadview.ts\",\n\t\"./ui/loadview.ts\": \"./src/ui/loadview.ts\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./src sync recursive ^\\\\.\\\\/.*\\\\/.*$\";\n\n//# sourceURL=webpack://picatown-core/./src_sync_^\\.\\/.*\\/.*$?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n\n// import { WorldService } from \"game-core/game\"\nclass PicatownCore extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasicPlugin\"] {\n    constructor() {\n        super();\n        this.uiManager = this.mWorld.uiManager;\n        this.uiLayerManager = this.uiManager.getUILayerManager();\n        this.uiScene = this.uiManager.getScene();\n        this.mWorld.emitter.on(\"SHOW_UI\", this.showUI, this);\n        this.mWorld.emitter.on(\"HIDE_UI\", this.hideUI, this);\n    }\n    destroy() {\n        this.mWorld.emitter.off(\"SHOW_UI\", this.showUI, this);\n        this.mWorld.emitter.off(\"HIDE_UI\", this.hideUI, this);\n        super.destroy();\n    }\n    showUI(param) {\n        const type = param[0];\n        const className = type + \"Mediator\";\n        const path = `./${type}/${type}Mediator`;\n        const ns = __webpack_require__(\"./src sync recursive ^\\\\.\\\\/.*\\\\/.*$\")(`./${type}/${className}`);\n        // \n        if (!ns)\n            return;\n        const mediator = new ns[className](this.uiLayerManager, this.uiScene, this.world);\n        if (!mediator) {\n            return;\n        }\n        this.uiManager.setMediator(type + \"Mediator\", mediator);\n        if (param)\n            mediator.setParam(param);\n        this.uiManager.checkUIState(className, false);\n        mediator.show(param);\n    }\n    hideUI(param) {\n        // uigame-coreshowuimediatoruimanager\n    }\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (PicatownCore);\n\n\n//# sourceURL=webpack://picatown-core/./src/index.ts?");

/***/ }),

/***/ "./src/ui/Activity/ActivityMediator.ts":
/*!*********************************************!*\
  !*** ./src/ui/Activity/ActivityMediator.ts ***!
  \*********************************************/
/*! exports provided: ActivityMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ActivityMediator\", function() { return ActivityMediator; });\n/* harmony import */ var _ActivityPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ActivityPanel */ \"./src/ui/Activity/ActivityPanel.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass ActivityMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BaseMediator\"] {\n    constructor(layerManager, scene, worldService) {\n        super();\n        this.layerManager = layerManager;\n        this.scene = scene;\n        this.mUIType = tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"UIType\"].Scene;\n        this.world = worldService;\n    }\n    show() {\n        if (this.mView && this.mView.isShow() || this.mShow) {\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _ActivityPanel__WEBPACK_IMPORTED_MODULE_0__[\"ActivityPanel\"](this.scene, this.world);\n        }\n        this.mView.show();\n        this.layerManager.addToUILayer(this.mView);\n    }\n    isSceneUI() {\n        return true;\n    }\n}\nActivityMediator.NAME = \"ActivityMediator\";\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Activity/ActivityMediator.ts?");

/***/ }),

/***/ "./src/ui/Activity/ActivityPanel.ts":
/*!******************************************!*\
  !*** ./src/ui/Activity/ActivityPanel.ts ***!
  \******************************************/
/*! exports provided: ActivityPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ActivityPanel\", function() { return ActivityPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n\nclass ActivityPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, worldService) {\n        super(scene, worldService);\n        this.key = \"activity\";\n    }\n    resize(w, h) {\n        const width = this.scaleWidth;\n        const height = this.scaleHeight;\n        this.content.x = width - 20 * this.dpr;\n        this.content.y = 120 * this.dpr;\n        this.setSize(w, h);\n    }\n    show(param) {\n        if (this.mInitialized) {\n            this.setInteractive();\n        }\n        super.show(param);\n    }\n    preload() {\n        this.addAtlas(this.key, \"activity/activity.png\", \"activity/activity.json\");\n        super.preload();\n    }\n    init() {\n        this.content = this.scene.make.container(undefined, false);\n        this.add(this.content);\n        for (let i = 0; i < 4; i++) {\n            const img = this.scene.make.image({\n                key: this.key,\n                frame: `icon_${i + 1}`\n            }, false);\n            // img.y = i * 50 * this.dpr;\n            this.content.add(img);\n        }\n        let mainMenuW = 160 * this.dpr;\n        const subList = this.content.list;\n        subList.map((btn) => mainMenuW -= btn.height);\n        const margin = mainMenuW / (subList.length - 1);\n        const offsetY = 15 * this.dpr;\n        let tmpWid = 0;\n        let tmpHei = 0;\n        for (let i = 1; i < subList.length; i++) {\n            const preButton = subList[i - 1];\n            const button = subList[i];\n            button.y = preButton.height + preButton.y + margin + offsetY;\n            tmpHei += button.y;\n            tmpWid = button.width;\n        }\n        this.resize(tmpWid, tmpHei);\n        super.init();\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Activity/ActivityPanel.ts?");

/***/ }),

/***/ "./src/ui/Activity/index.ts":
/*!**********************************!*\
  !*** ./src/ui/Activity/index.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// export { ActivityPanel } from \"./ActivityPanel\";\n// export { ActivityMediator } from \"./ActivityMediator\";\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Activity/index.ts?");

/***/ }),

/***/ "./src/ui/CharacterInfo/CharacterEditorPanel.ts":
/*!******************************************************!*\
  !*** ./src/ui/CharacterInfo/CharacterEditorPanel.ts ***!
  \******************************************************/
/*! exports provided: CharacterEditorPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CharacterEditorPanel\", function() { return CharacterEditorPanel; });\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\nclass CharacterEditorPanel extends Phaser.GameObjects.Container {\n    constructor(scene, x, y, width, height, key, dpr) {\n        super(scene, x, y);\n        this.dpr = 0;\n        this.key = \"\";\n        this.setSize(width, height);\n        this.key = key;\n        this.dpr = dpr;\n        const common_key = \"common_key\";\n        const mfont = `bold ${15 * this.dpr}px Source Han Sans`;\n        this.title = this.scene.make.text({ x: 0, y: -height * 0.5 + 50 * dpr, text: this.geti18n(\"edit_profile\"), style: { font: mfont, blod: true, color: \"#ffffff\", fontFamily: game_core__WEBPACK_IMPORTED_MODULE_1__[\"Font\"].DEFULT_FONT } }).setOrigin(0.5);\n        const bg = this.scene.make.graphics(undefined, false);\n        bg.clear();\n        bg.fillStyle(0xffffff, 0.5);\n        bg.fillRect(0, 0, 247 * dpr, 350 * dpr);\n        bg.setPosition(-width * 0.5, -184 * dpr);\n        const posx = -width * 0.5 + 9 * dpr;\n        const posy = -170 * dpr;\n        const offsetY = 50 * dpr;\n        const nameText = this.scene.make.text({ x: posx, y: posy, style: { blod: true, color: \"#0062BB\", fontSize: 15 * dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_1__[\"Font\"].DEFULT_FONT } }).setOrigin(0);\n        nameText.setText(this.geti18n(\"user_name\") + \":\");\n        this.inputText = new tooqingui__WEBPACK_IMPORTED_MODULE_0__[\"InputText\"](this.scene, posx + nameText.width + 20 * dpr, posy, 162 * dpr, 27 * dpr, {\n            type: \"input\",\n            fontSize: 18 * dpr + \"px\",\n            color: \"#0062BB\",\n            align: \"center\",\n            placeholder: this.geti18n(\"input_nickname\")\n        }).setOrigin(0);\n        const line = this.createLine(-230 * this.dpr * 0.5, posy + 32 * this.dpr);\n        this.add(bg);\n        this.add([this.title, nameText, this.inputText, line]);\n        this.idText = this.createText(\"I        D:\", \"49855555\", posx, posy + offsetY);\n        this.constellationText = this.createText(this.geti18n(\"constellation\") + \":\", \"\", posx, posy + offsetY * 2);\n        this.birthdayText = this.createText(this.geti18n(\"birthday\") + \":\", \"1998-04-24\", posx, posy + offsetY * 3);\n        this.cityText = this.createText(this.geti18n(\"city\") + \":\", \"\", posx, posy + offsetY * 4);\n        const signText = this.scene.make.text({ x: posx, y: posy + offsetY * 5, style: { blod: true, color: \"#0062BB\", fontSize: 15 * dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_1__[\"Font\"].DEFULT_FONT } }).setOrigin(0);\n        signText.setText(this.geti18n(\"signature\") + \":\");\n        this.signInput = new tooqingui__WEBPACK_IMPORTED_MODULE_0__[\"InputText\"](this.scene, posx + signText.width + 20 * dpr, posy + offsetY * 5, 162 * dpr, 76 * dpr, {\n            type: \"input\",\n            fontSize: 18 * dpr + \"px\",\n            color: \"#0062BB\",\n            align: \"center\",\n            placeholder: this.geti18n(\"input_signature\")\n        }).setOrigin(0);\n        this.add([signText, this.signInput]);\n        const backBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_0__[\"Button\"](this.scene, common_key, \"back_arrow\", \"back_arrow\");\n        const saveBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_0__[\"NineSliceButton\"](this.scene, 0, height * 0.5 - 40 * dpr, 174 * this.dpr, 37 * this.dpr, common_key, \"yellow_btn\", this.geti18n(\"save\"), this.dpr, this.scale, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 12 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        saveBtn.setTextStyle({ fontSize: 16 * this.dpr, color: \"#ED7814\" });\n        backBtn.setPosition(posx + 8 * dpr, -height * 0.5 + 50 * dpr);\n        backBtn.on(\"Tap\", this.onBackHandler, this);\n        saveBtn.on(\"Tap\", this.onSaveHandler, this);\n        this.add([backBtn, saveBtn]);\n    }\n    destroy() {\n        if (this.inputText)\n            this.inputText.destroy();\n        if (this.signInput)\n            this.signInput.destroy();\n        super.destroy();\n    }\n    createText(name, value, posx, posy) {\n        const nameText = this.scene.make.text({ x: posx, y: posy, style: { blod: true, color: \"#0062BB\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_1__[\"Font\"].DEFULT_FONT } }).setOrigin(0, 0);\n        nameText.setText(name);\n        const valueText = this.scene.make.text({ x: posx + nameText.width + 20 * this.dpr, y: posy, text: value, style: { blod: true, color: \"#ffffff\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_1__[\"Font\"].DEFULT_FONT } }).setOrigin(0, 0);\n        const line = this.createLine(-230 * this.dpr * 0.5, posy + 32 * this.dpr);\n        this.add([nameText, valueText, line]);\n        return valueText;\n    }\n    geti18n(name) {\n        return game_core__WEBPACK_IMPORTED_MODULE_1__[\"i18n\"].t(\"player_info.\" + name);\n    }\n    createLine(posx, posy) {\n        const line = this.scene.make.graphics(undefined, false);\n        line.clear();\n        line.fillStyle(0x0062BB, 0.6);\n        line.fillRect(0, 0, 230 * this.dpr, 3);\n        line.setPosition(posx, posy);\n        return line;\n    }\n    onBackHandler() {\n        this.visible = false;\n        this.emit(\"editorHide\");\n    }\n    onSaveHandler() {\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CharacterInfo/CharacterEditorPanel.ts?");

/***/ }),

/***/ "./src/ui/CharacterInfo/CharacterInfo.ts":
/*!***********************************************!*\
  !*** ./src/ui/CharacterInfo/CharacterInfo.ts ***!
  \***********************************************/
/*! exports provided: CharacterInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CharacterInfo\", function() { return CharacterInfo; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass CharacterInfo extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_PKT_SELF_PLAYER_INFO, this.onOwnerCharacterInfo);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_PKT_ANOTHER_PLAYER_INFO, this.onOtherCharacterInfo);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n    queryPlayerInfo() {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_PKT_SELF_PLAYER_INFO);\n        this.connection.send(packet);\n    }\n    onOwnerCharacterInfo(packge) {\n        const content = packge.content;\n        this.mEvent.emit(\"ownerInfo\", content);\n    }\n    onOtherCharacterInfo(packge) {\n        const content = packge.content;\n        this.mEvent.emit(\"otherInfo\", content);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CharacterInfo/CharacterInfo.ts?");

/***/ }),

/***/ "./src/ui/CharacterInfo/CharacterInfoMediator.ts":
/*!*******************************************************!*\
  !*** ./src/ui/CharacterInfo/CharacterInfoMediator.ts ***!
  \*******************************************************/
/*! exports provided: CharacterInfoMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CharacterInfoMediator\", function() { return CharacterInfoMediator; });\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _CharacterInfoPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CharacterInfoPanel */ \"./src/ui/CharacterInfo/CharacterInfoPanel.ts\");\n/* harmony import */ var _CharacterInfo__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CharacterInfo */ \"./src/ui/CharacterInfo/CharacterInfo.ts\");\n\n\n\n\nclass CharacterInfoMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BaseMediator\"] {\n    constructor(layerMgr, scene, worldService) {\n        super();\n        this.scene = scene;\n        this.layerMgr = layerMgr;\n        this.world = worldService;\n    }\n    show() {\n        if (this.mView) {\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _CharacterInfoPanel__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.scene, this.world);\n            this.mView.on(\"hide\", this.onHidePanel, this);\n            this.mView.on(\"queryOwnerInfo\", this.onQueryOwnerInfo, this);\n        }\n        if (!this.characterInfo) {\n            this.characterInfo = new _CharacterInfo__WEBPACK_IMPORTED_MODULE_3__[\"CharacterInfo\"](this.world);\n            this.characterInfo.on(\"ownerInfo\", this.onOwnerCharacterInfo, this);\n            this.characterInfo.on(\"otherInfo\", this.onOtherCharacterInfo, this);\n            this.characterInfo.register();\n        }\n        this.layerMgr.addToUILayer(this.mView);\n        this.mView.show();\n    }\n    isSceneUI() {\n        return true;\n    }\n    destroy() {\n        if (this.characterInfo) {\n            this.characterInfo.destroy();\n            this.characterInfo = undefined;\n        }\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = undefined;\n        }\n    }\n    onHidePanel() {\n        this.destroy();\n    }\n    onOwnerCharacterInfo(content) {\n        this.mView.setPlayerData(content);\n    }\n    onOtherCharacterInfo(content) {\n        this.mView.setPlayerData(content);\n    }\n    onQueryOwnerInfo() {\n        this.characterInfo.queryPlayerInfo();\n    }\n    testOwnerData() {\n        const player = this.world.roomManager.currentRoom.playerManager.actor;\n        const owner = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__[\"op_client\"].OP_VIRTUAL_WORLD_RES_CLIENT_PKT_SELF_PLAYER_INFO();\n        owner.id = player.id;\n        owner.cid = \"5524121555\";\n        owner.like = 652;\n        owner.currentAvatar = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__[\"op_pkt_def\"].PKT_Avatar();\n        owner.currentAvatar.avatar = player.model.avatar;\n        owner.nickname = player.model.nickname;\n        owner.level = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__[\"op_pkt_def\"].PKT_Level();\n        owner.level.level = 32;\n        owner.level.currentLevelExp = 100;\n        owner.level.nextLevelExp = 400;\n        owner.lifeSkills = [];\n        owner.currentTitle = \"\";\n        for (let i = 0; i < 20; i++) {\n            const item = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__[\"op_pkt_def\"].PKT_Skill();\n            item.id = i + 10 + \"\";\n            item.name = \"\" + i;\n            item.level = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_0__[\"op_pkt_def\"].PKT_Level();\n            item.level.level = 20 + i;\n            item.level.currentLevelExp = 200 + i * 10;\n            item.level.nextLevelExp = 400 + i * 10;\n            owner.lifeSkills.push(item);\n        }\n        return owner;\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CharacterInfo/CharacterInfoMediator.ts?");

/***/ }),

/***/ "./src/ui/CharacterInfo/CharacterInfoPanel.ts":
/*!****************************************************!*\
  !*** ./src/ui/CharacterInfo/CharacterInfoPanel.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CharacterInfoPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _CharacterEditorPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CharacterEditorPanel */ \"./src/ui/CharacterInfo/CharacterEditorPanel.ts\");\n\n\n\n\n\n\n\n\n\nvar Container = Phaser.GameObjects.Container;\n\nclass CharacterInfoPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"player_info\";\n        this.commonkey = \"common_key\";\n        this.isOwner = true;\n        this.scale = 1;\n    }\n    resize(width, height) {\n        const w = this.scaleWidth;\n        const h = this.scaleHeight;\n        super.resize(width, height);\n        this.setSize(w, h);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, w, h);\n        this.content.setPosition(w / 2, h / 2);\n        this.mGrideTable.refreshPos(w / 2 + 6 * this.dpr * this.scale, h / 2 + 180 * this.dpr * this.scale);\n        this.content.setInteractive();\n    }\n    show(param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.OnClosePanel, this);\n        this.nickEditor.on((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.onEditorHandler, this);\n        this.privaCharBtn.on((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.onPrivateChatHandler, this);\n        this.addFriendBtn.on((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.onAddFriendHandler, this);\n        this.tradeBtn.on((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.onTradingHandler, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.OnClosePanel, this);\n        this.nickEditor.off((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.onEditorHandler, this);\n        this.privaCharBtn.off((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.onPrivateChatHandler, this);\n        this.addFriendBtn.off((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.onAddFriendHandler, this);\n        this.tradeBtn.off((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.onTradingHandler, this);\n    }\n    preload() {\n        this.addAtlas(this.key, \"player_info/player_info.png\", \"player_info/player_info.json\");\n        this.addAtlas(this.commonkey, \"common/ui_base.png\", \"common/ui_base.json\");\n        super.preload();\n    }\n    init() {\n        const zoom = this.scale;\n        const wid = this.scene.cameras.main.width;\n        const hei = this.scene.cameras.main.height;\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, wid * zoom, hei * zoom);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height), Phaser.Geom.Rectangle.Contains);\n        this.bg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: \"bg\" });\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(this.bg.width, this.bg.height);\n        this.mainContent = this.scene.make.container(undefined, false);\n        this.mainContent.setSize(this.bg.width, this.bg.height);\n        const posY = -this.bg.height * 0.5 + 43 * this.dpr;\n        const mfont = `bold ${15 * this.dpr}px Source Han Sans`;\n        this.labelText = this.scene.make.text({ x: 0, y: posY, text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.title\"), style: { font: mfont, bold: true, color: \"#ffffff\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0.5, 0);\n        this.labelText.setStroke(\"#8F4300\", 1);\n        this.closeBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"Button\"](this.scene, this.commonkey, \"close\");\n        this.closeBtn.setPosition(this.mainContent.width * 0.5 - this.dpr * 30, posY - this.dpr * 10);\n        this.likeBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"Button\"](this.scene, this.key, \"praise_bef\", \"praise_bef\", \"999\");\n        this.likeBtn.setTextStyle({ fontSize: 13 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT });\n        this.likeBtn.text.setOrigin(0, 0.5).x += 10 * this.dpr;\n        this.likeBtn.setPosition(this.bg.width * 0.5 - 50 * this.dpr, posY + 50 * this.dpr);\n        this.likeBtn.visible = false;\n        this.avatar = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DragonbonesDisplay\"](this.scene, undefined, undefined, true);\n        this.avatar.scale = this.dpr * 2;\n        this.avatar.x = 0;\n        this.avatar.y = -80 * this.dpr;\n        this.avatar.once(\"initialized\", () => {\n            this.avatar.play({ animationName: \"idle\", flip: false });\n        });\n        const nickPosX = Math.round(-this.bg.width * 0.5 + 25 * this.dpr);\n        const nickPosY = Math.round(this.bg.height * 0.5 - 306 * this.dpr);\n        const nickOffsetY = 30 * this.dpr;\n        const fontSize = Math.round(13 * this.dpr);\n        this.nickName = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"BBCodeText\"](this.scene, nickPosX, nickPosY, \"\", {})\n            .setOrigin(0, 0.5).setFontSize(fontSize).setFontFamily(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT);\n        this.nickEditor = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"Button\"](this.scene, this.key, \"edit\", \"edit\");\n        this.nickEditor.setPosition(this.bg.width * 0.5 - 30 * this.dpr, nickPosY).visible = false;\n        const line1 = this.scene.make.image({ x: 0, y: nickPosY + 10 * this.dpr, key: this.key, frame: \"splitters\" });\n        this.idText = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"BBCodeText\"](this.scene, nickPosX, nickPosY + nickOffsetY)\n            .setFontSize(fontSize).setOrigin(0, 0.5).setFontFamily(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT);\n        const line2 = this.scene.make.image({ x: 0, y: this.idText.y + 10 * this.dpr, key: this.key, frame: \"splitters\" });\n        this.titleName = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"BBCodeText\"](this.scene, nickPosX, nickPosY + nickOffsetY * 2)\n            .setFontSize(fontSize).setOrigin(0, 0.5).setFontFamily(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT);\n        const line3 = this.scene.make.image({ x: 0, y: this.titleName.y + 10 * this.dpr, key: this.key, frame: \"splitters\" });\n        const lvbg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: \"level_bg\" });\n        this.lvText = this.scene.make.text({ x: 0, y: 0, text: \"lv 98\", style: { color: \"#996600\", fontSize, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0.5, 0.5);\n        this.lvCon = this.scene.make.container(undefined, false);\n        this.lvCon.setSize(lvbg.width, lvbg.height);\n        this.lvCon.add([lvbg, this.lvText]);\n        const bottomWidth = 234 * this.dpr;\n        const bottomHeight = 195 * this.dpr;\n        this.bottomCon = this.scene.make.container(undefined, false).setSize(bottomWidth, bottomHeight);\n        this.bottomCon.setPosition(0, (this.mainContent.height - bottomHeight) * 0.5 - 30 * this.dpr);\n        this.bottombg = this.scene.make.graphics(undefined, false);\n        const bottomBtnPosx = -60 * this.dpr;\n        const bottomBtnPosy = this.bottomCon.height * 0.5 - 20 * this.dpr;\n        this.addFriendBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NineSliceButton\"](this.scene, bottomBtnPosx, bottomBtnPosy, 94 * this.dpr, 37 * this.dpr, this.key, \"button_g\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.add_friend\"), this.dpr, this.scale, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 12 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        this.addFriendBtn.setFrameNormal(\"button_g\");\n        this.privaCharBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NineSliceButton\"](this.scene, bottomBtnPosx, bottomBtnPosy, 94 * this.dpr, 37 * this.dpr, this.commonkey, \"yellow_btn\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.private_chat\"), this.dpr, this.scale, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 12 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        this.tradeBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NineSliceButton\"](this.scene, -bottomBtnPosx, bottomBtnPosy, 94 * this.dpr, 37 * this.dpr, this.commonkey, \"red_btn\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.tade_btn\"), this.dpr, this.scale, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 12 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        this.addFriendBtn.setTextStyle({ fontSize: 16 * this.dpr, color: \"#000000\" });\n        this.privaCharBtn.setTextStyle({ fontSize: 16 * this.dpr, color: \"#996600\" });\n        this.tradeBtn.setTextStyle({ fontSize: 16 * this.dpr, color: \"#ffffff\" });\n        this.bottomCon.add([this.bottombg, this.addFriendBtn, this.privaCharBtn, this.tradeBtn]);\n        this.mainContent.add([this.closeBtn, this.likeBtn, this.labelText, line1, line2, line3, this.nickName, this.nickEditor, this.idText, this.titleName, this.lvCon, this.bottomCon]);\n        this.mainContent.add(this.avatar);\n        this.content.add(this.bg);\n        this.content.add(this.mainContent);\n        this.add([this.mBackGround, this.content]);\n        const w = this.scene.cameras.main.width;\n        const h = this.scene.cameras.main.height;\n        this.mCategoryScroll = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"GameScroller\"](this.scene, {\n            x: this.scaleWidth * 0.5,\n            y: this.scaleHeight * 0.5 + 62 * this.dpr * zoom,\n            width: bottomWidth,\n            height: 41 * this.dpr,\n            zoom: this.scale,\n            orientation: 1,\n            cellupCallBack: (gameobject) => {\n                this.onSelectSubCategoryHandler(gameobject);\n            }\n        });\n        this.add(this.mCategoryScroll);\n        const propFrame = this.scene.textures.getFrame(this.key, \"skill_bg\");\n        const capW = propFrame.width + 5 * this.dpr * zoom;\n        const capH = propFrame.height + 2 * this.dpr * zoom;\n        const tableConfig = {\n            x: w / 2,\n            y: h * 0.5 + 145 * this.dpr * zoom,\n            table: {\n                width: (this.bottomCon.width - 10 * this.dpr) * zoom,\n                height: 200 * this.dpr * zoom,\n                columns: 3,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellPadX: 24 * this.dpr * zoom\n                // cellOriginX:0.5,\n                // cellOriginY:0.5,\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: (cell, cellContainer) => {\n                const scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new CharacterOwnerItem(scene, 0, 0, this.key, this.dpr, zoom);\n                    this.add(cellContainer);\n                }\n                // cellContainer.setSize(width, height);\n                cellContainer.setData({ item });\n                cellContainer.setItemData(item, this.isOwner);\n                return cellContainer;\n            },\n        };\n        this.mGrideTable = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"GameGridTable\"](this.scene, tableConfig);\n        this.mGrideTable.layout();\n        this.mGrideTable.on(\"cellTap\", (cell) => {\n            if (cell) {\n                this.onSelectItemHandler(cell);\n            }\n        });\n        this.add(this.mGrideTable.table);\n        this.resize(w, h);\n        super.init();\n        this.reqPlayerInfo();\n    }\n    reqPlayerInfo() {\n        this.emit(\"queryOwnerInfo\");\n    }\n    setPlayerData(data) {\n        const nickname = data.nickname;\n        const current_title = data.currentTitle;\n        const exp = data.level.currentLevelExp;\n        const nexExp = data.level.nextLevelExp;\n        const cid = data.id;\n        const levle = data.level.level;\n        const spaceOffset = this.getspaceStr(1 * this.dpr);\n        if (this.avatar) {\n            this.avatar.load(new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DragonbonesModel\"]({\n                id: 0,\n                avatar: data.currentAvatar.avatar\n            }));\n        }\n        this.titleName.setText(this.getRichLabel(game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.player_title\")) + spaceOffset + current_title);\n        this.likeBtn.setText(data.like + \"\");\n        const likeposx = this.bg.width * 0.5 - this.likeBtn.width * 0.5 - this.likeBtn.text.width;\n        this.likeBtn.x = likeposx - 20 * this.dpr;\n        this.lvText.text = \"Lv\" + levle + \"\";\n        const subArr = [data.lifeSkills, data.badges];\n        if (data instanceof pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OP_VIRTUAL_WORLD_RES_CLIENT_PKT_SELF_PLAYER_INFO) {\n            this.nickName.setText(this.getRichLabel(game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.nick_name\")) + spaceOffset + nickname);\n            this.idText.setText(this.getRichLabel(game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.player_lv\")) + this.getspaceStr(20) + exp + \"/\" + nexExp);\n            this.lvCon.setPosition(this.idText.x + 58 * this.dpr, this.idText.y);\n            this.likeBtn.setFrame(\"praise_aft\");\n            subArr.push(data.titles);\n            this.addFriendBtn.visible = false;\n            this.privaCharBtn.visible = false;\n            this.tradeBtn.visible = false;\n            this.bottombg.clear();\n            this.bottombg.fillStyle(0x6AE2FF, 1);\n            this.bottombg.fillRect(-this.bottomCon.width * 0.5, -this.bottomCon.height * 0.5, this.bottomCon.width, this.bottomCon.height);\n            this.mGrideTable.setColumnCount(3);\n            this.isOwner = true;\n        }\n        else {\n            const remark = (data.remark ? data.remark : \"\");\n            this.nickName.setText(this.getRichLabel(game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.nick_name\")) + spaceOffset + nickname + ` (${remark})`);\n            this.idText.setText(this.getRichLabel(\"I   D\") + spaceOffset + cid);\n            this.lvCon.setPosition(this.idText.x + this.lvCon.width * 0.5, -this.mainContent.height * 0.5 + 100 * this.dpr);\n            this.likeBtn.setFrame(\"praise_bef\");\n            subArr.push(data.avatar);\n            this.addFriendBtn.visible = !data.friend;\n            this.privaCharBtn.visible = data.friend;\n            this.tradeBtn.visible = true;\n            this.bottombg.clear();\n            this.bottombg.fillStyle(0x6AE2FF, 1);\n            this.bottombg.fillRect(-this.bottomCon.width * 0.5, -this.bottomCon.height * 0.5, this.bottomCon.width, this.bottomCon.height - 55 * this.dpr);\n            this.mGrideTable.setColumnCount(2);\n            this.isOwner = false;\n        }\n        this.setSubCategory(subArr);\n    }\n    destroy() {\n        this.mGrideTable.destroy();\n        this.mCategoryScroll.destroy();\n        super.destroy();\n    }\n    OnClosePanel() {\n        this.emit(\"hide\");\n    }\n    setSubCategory(datas) {\n        const subNames = [game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.option_live\"), game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.option_badge\"), game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.option_title\"), game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.option_title\"), game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"player_info.option_title\")];\n        const len = 1; // datas.length;\n        const itemWidth = this.mScene.textures.getFrame(this.key, \"title_select\").width;\n        const items = [];\n        for (let i = 0; i < len; i++) {\n            const item = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"Button\"](this.scene, this.key, \"title_normal\", \"title_select\", subNames[i]);\n            item.width = itemWidth;\n            item.height = 41 * this.dpr;\n            items.push(item);\n            item.setTextStyle({ color: \"#2B4BB5\", bold: true, fontSize: 14 * this.dpr * this.scale, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT });\n            item.disInteractive();\n            item.removeListen();\n            item.setData(\"subData\", datas[i]);\n            this.mCategoryScroll.addItem(item);\n        }\n        if (items.length <= 3)\n            this.mCategoryScroll.setAlign(1);\n        else {\n            this.mCategoryScroll.setAlign(0);\n        }\n        this.onSelectSubCategoryHandler(items[0]);\n    }\n    onSelectSubCategoryHandler(obj) {\n        // Logger.getInstance().log(obj);\n        if (this.curSelectCategeory) {\n            this.curSelectCategeory.changeNormal();\n            this.curSelectCategeory.setTextColor(\"#2B4BB5\");\n        }\n        obj.changeDown();\n        obj.setTextColor(\"#996600\");\n        this.curSelectCategeory = obj;\n        const datas = obj.getData(\"subData\");\n        if (datas)\n            this.mGrideTable.setItems(datas);\n        this.mGrideTable.refreshPos(this.scene.cameras.main.width / 2, this.scene.cameras.main.height / 2 + 185 * this.dpr * this.scale, 0, 0);\n    }\n    onSelectItemHandler(item) {\n    }\n    onEditorHandler() {\n        const w = 247 * this.dpr;\n        const h = this.content.height;\n        if (!this.editorPanel)\n            this.editorPanel = new _CharacterEditorPanel__WEBPACK_IMPORTED_MODULE_3__[\"CharacterEditorPanel\"](this.scene, 0, 0, w, h, this.key, this.dpr);\n        this.content.add(this.editorPanel);\n        this.editorPanel.visible = true;\n        this.editorPanel.on(\"editorHide\", this.onEditorPanelHideHandler, this);\n        this.setMainUIVisible(false);\n    }\n    onAddFriendHandler() {\n    }\n    onTradingHandler() {\n    }\n    onPrivateChatHandler() {\n    }\n    onEditorPanelHideHandler() {\n        this.mainContent.visible = true;\n        this.remove(this.editorPanel);\n        this.editorPanel.off(\"editorHide\", this.onEditorPanelHideHandler, this);\n        this.editorPanel.destroy();\n        this.editorPanel = null;\n        this.setMainUIVisible(true);\n    }\n    setMainUIVisible(value) {\n        this.avatar.visible = value;\n        this.mCategoryScroll.visible = value;\n        this.mGrideTable.table.visible = value;\n        this.mainContent.visible = value;\n    }\n    getRichLabel(text, color = \"#2B4BB5\") {\n        const label = `[stroke=${color}][color=${color}]${text}:[/color][/stroke]`;\n        return label;\n    }\n    getspaceStr(num) {\n        let str = \"\";\n        for (let i = 0; i < num; i++) {\n            str += \" \";\n        }\n        return str;\n    }\n}\nclass CharacterOwnerItem extends Container {\n    constructor(scene, x, y, key, dpr, zoom = 1) {\n        super(scene, x, y);\n        this.dpr = 0;\n        this.zoom = 0;\n        const bg = this.scene.make.image({ x: 0, y: 0, key, frame: \"skill_bg\" });\n        this.nameText = this.scene.make.text({ x: -1 * dpr, y: 0, text: \"lv 98\", style: { color: \"#996600\", fontSize: 12 * dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        this.lvText = this.scene.make.text({ x: -1 * dpr, y: 0, text: \"lv 98\", style: { color: \"#996600\", fontSize: 12 * dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        this.progressBar = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ProgressBar\"](this.scene, {\n            x: 48 * dpr / 2,\n            y: 15 * dpr,\n            width: 41 * dpr,\n            height: 4 * dpr,\n            background: {\n                x: 0,\n                y: 0,\n                width: 41 * dpr,\n                height: 4 * dpr,\n                config: {\n                    top: 1 * dpr,\n                    left: 2 * dpr,\n                    right: 2 * dpr,\n                    bottom: 1 * dpr,\n                },\n                key,\n                frame: \"slider_bg\"\n            },\n            bar: {\n                x: 0,\n                y: 0,\n                width: 41 * dpr,\n                height: 4 * dpr,\n                config: {\n                    top: 1 * dpr,\n                    left: 2 * dpr,\n                    right: 2 * dpr,\n                    bottom: 1 * dpr,\n                },\n                key,\n                frame: \"slider_rate\"\n            },\n            dpr,\n            textConfig: undefined\n        });\n        this.icon = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](this.scene, -bg.width * 0.5 + 22 * dpr, 0);\n        this.add([bg, this.icon, this.nameText, this.lvText, this.progressBar]);\n        this.setSize(bg.width, bg.height);\n        this.dpr = dpr;\n        this.zoom = zoom;\n        this.key = key;\n        // this.progressBar.setProgress(1, 100);\n    }\n    setItemData(data, isOwner = false) {\n        this.itemData = data;\n        this.nameText.text = data.name;\n        const posY = (isOwner ? -16 * this.dpr * this.zoom : -11 * this.dpr * this.zoom);\n        const offsetY = (isOwner ? 20 * this.dpr * this.zoom : 25 * this.dpr * this.zoom);\n        const cheight = 10 * this.dpr * this.zoom;\n        this.nameText.y = posY + cheight * 0.5;\n        this.icon.setTexture(this.key, \"test_skillicon\");\n        const width = this.icon.width;\n        if (data.level) {\n            this.lvText.text = data.level.level;\n            this.lvText.y = posY + offsetY;\n            this.progressBar.setProgress(data.level.currentLevelExp, data.level.nextLevelExp);\n            this.progressBar.visible = isOwner;\n        }\n        else {\n            this.progressBar.visible = false;\n            this.lvText.visible = false;\n        }\n        const url = game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(data.display.texturePath);\n        this.icon.load(url, this, () => {\n            this.icon.scale = this.dpr * this.zoom;\n            const x = -this.width * 0.5 + width * 0.5 + 6 * this.dpr * this.zoom;\n            this.icon.setPosition(x, 0);\n        });\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CharacterInfo/CharacterInfoPanel.ts?");

/***/ }),

/***/ "./src/ui/CharacterInfo/GraphicsProgressBar.ts":
/*!*****************************************************!*\
  !*** ./src/ui/CharacterInfo/GraphicsProgressBar.ts ***!
  \*****************************************************/
/*! exports provided: GraphicsProgressBar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GraphicsProgressBar\", function() { return GraphicsProgressBar; });\nclass GraphicsProgressBar extends Phaser.GameObjects.Container {\n    constructor(scene, x, y, width, height, isHorizontal = true) {\n        super(scene, x, y);\n        this.value = 0.5;\n        this.bgGraphics = this.scene.make.graphics(undefined, false);\n        this.barGraphics = this.scene.make.graphics(undefined, false);\n        this.add([this.bgGraphics, this.barGraphics]);\n        this.setSize(width, height);\n        this.bgColor = 0x000000;\n        this.barColor = 0xff00000;\n        this.bgGraphics.clear();\n        this.bgGraphics.fillStyle(this.bgColor, 1);\n        this.bgGraphics.fillRect(0, 0, this.width, this.height);\n        this.setValue(this.value);\n    }\n    setColor(barColor, bgColor) {\n        this.barColor = barColor;\n        if (bgColor)\n            this.bgColor = bgColor;\n        this.bgGraphics.clear();\n        this.bgGraphics.fillStyle(this.bgColor, 1);\n        this.bgGraphics.fillRect(0, 0, this.width, this.height);\n        this.setValue(this.value);\n    }\n    setValue(value) {\n        this.value = value;\n        const width = this.width * (this.isHorizontal ? value : 1);\n        const height = this.height * (!this.isHorizontal ? value : 1);\n        this.barGraphics.clear();\n        this.barGraphics.fillStyle(this.barColor, 1);\n        this.barGraphics.fillRect(0, 0, width, height);\n    }\n    setRoundedRectValue(value, radius) {\n        this.value = value;\n        const width = this.width * (this.isHorizontal ? value : 1);\n        const height = this.height * (!this.isHorizontal ? value : 1);\n        this.barGraphics.clear();\n        this.barGraphics.fillStyle(this.barColor, 1);\n        this.barGraphics.fillRoundedRect(0, 0, width, height, radius);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CharacterInfo/GraphicsProgressBar.ts?");

/***/ }),

/***/ "./src/ui/CharacterInfo/GridLayoutGroup.ts":
/*!*************************************************!*\
  !*** ./src/ui/CharacterInfo/GridLayoutGroup.ts ***!
  \*************************************************/
/*! exports provided: GridLayoutGroup, AlignmentType, CornerType, AxisType, ConstraintType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GridLayoutGroup\", function() { return GridLayoutGroup; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlignmentType\", function() { return AlignmentType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CornerType\", function() { return CornerType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AxisType\", function() { return AxisType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ConstraintType\", function() { return ConstraintType; });\nclass GridLayoutGroup extends Phaser.GameObjects.Container {\n    constructor(scene, x, y) {\n        super(scene, x, y);\n        this.layoutElements = [];\n        this._padding = new Phaser.Math.Vector4(0, 0, 0, 0);\n        this._cellSize = new Phaser.Math.Vector2(100, 100);\n        this._spacing = new Phaser.Math.Vector2(0, 0);\n        this._alignmentType = AlignmentType.UpperLeft;\n        this._startCorner = CornerType.UpperLeft;\n        this._startAxis = AxisType.Horizontal;\n        this._constraint = ConstraintType.Flexible;\n        this._constraintCount = 4;\n    }\n    onPlay() {\n    }\n    start() {\n    }\n    set padding(value) {\n        if (value === undefined)\n            return;\n        this._padding = value;\n    }\n    get padding() {\n        return this._padding;\n    }\n    /**\n     * vec2(width,height);\n     */\n    set cellSize(value) {\n        if (value === undefined)\n            return;\n        if (value.x < 0)\n            value.x = 0;\n        if (value.y < 0)\n            value.y = 0;\n        this._cellSize = value;\n    }\n    get cellSize() {\n        return this._cellSize;\n    }\n    /**\n     * vec2(x,y);\n     */\n    set spacing(value) {\n        if (value === undefined)\n            return;\n        this._spacing = value;\n    }\n    get spacing() {\n        return this._spacing;\n    }\n    set alignmentType(value) {\n        if (value === this._alignmentType)\n            return;\n        this._alignmentType = value;\n    }\n    get alignmentType() {\n        return this._alignmentType;\n    }\n    set startCorner(value) {\n        if (value === this._startCorner)\n            return;\n        this._startCorner = value;\n    }\n    get startCorner() {\n        return this._startCorner;\n    }\n    set startAxis(value) {\n        if (value === this._startAxis)\n            return;\n        this._startAxis = value;\n    }\n    get startAxis() {\n        return this._startAxis;\n    }\n    set constraint(value) {\n        if (value === this._constraint)\n            return;\n        this._constraint = value;\n    }\n    get constraint() {\n        return this._constraint;\n    }\n    set constraintCount(value) {\n        if (value === undefined || isNaN(value))\n            return;\n        this._constraintCount = value;\n    }\n    get constraintCount() {\n        return this._constraintCount;\n    }\n    Layout() {\n        this.layoutElements.length = 0;\n        for (const child of this.list) {\n            if (child.active)\n                this.layoutElements.push(child);\n        }\n        if (this.layoutElements.length === 0)\n            return;\n        const cornerX = this._startCorner % 2;\n        const cornerY = Math.floor(this._startCorner / 2);\n        let cellsPerMainAxis = 0, actualCellCountX = 0, actualCellCountY = 0;\n        const cellCount = this.getCellCount();\n        if (this._startAxis === AxisType.Horizontal) {\n            cellsPerMainAxis = cellCount.x;\n            actualCellCountX = Phaser.Math.Clamp(cellCount.x, 1, this.layoutElements.length);\n            actualCellCountY = Phaser.Math.Clamp(cellCount.y, 1, Math.ceil(this.layoutElements.length / cellsPerMainAxis));\n        }\n        else {\n            cellsPerMainAxis = cellCount.y;\n            actualCellCountY = Phaser.Math.Clamp(cellCount.y, 1, this.layoutElements.length);\n            actualCellCountX = Phaser.Math.Clamp(cellCount.x, 1, Math.ceil(this.layoutElements.length / cellsPerMainAxis));\n        }\n        const requiredSpace = new Phaser.Math.Vector2(actualCellCountX * this._cellSize.x + (actualCellCountX - 1) * this._spacing.x, actualCellCountY * this._cellSize.y + (actualCellCountY - 1) * this._spacing.y);\n        const startOffset = new Phaser.Math.Vector2(this.getStartOffset(0, requiredSpace.x), this.getStartOffset(1, requiredSpace.y));\n        let positionX = 0;\n        let positionY = 0;\n        for (let i = 0; i < this.layoutElements.length; i++) {\n            if (this._startAxis === AxisType.Horizontal) {\n                positionX = i % cellsPerMainAxis;\n                positionY = Math.floor(i / cellsPerMainAxis);\n            }\n            else {\n                positionX = Math.floor(i / cellsPerMainAxis);\n                positionY = i % cellsPerMainAxis;\n            }\n            if (cornerX === 1)\n                positionX = actualCellCountX - 1 - positionX;\n            if (cornerY === 1)\n                positionY = actualCellCountY - 1 - positionY;\n            this.setChildAlongAxis(this.layoutElements[i], 0, startOffset.x + (this._cellSize.x + this._spacing.x) * positionX, this._cellSize.x);\n            this.setChildAlongAxis(this.layoutElements[i], 1, startOffset.y + (this._cellSize.y + this._spacing.y) * positionY, this._cellSize.y);\n        }\n        const maxWidth = startOffset.x + (this._cellSize.x + this._spacing.x) * (positionX + 1);\n        const maxHeight = startOffset.y + (this._cellSize.y + this._spacing.y) * (positionY + 1);\n        if (this.startAxis === AxisType.Horizontal) {\n            this.height = maxHeight;\n            this.setAllChildPositionOffset(0);\n        }\n        else {\n            this.width = maxWidth;\n            this.setAllChildPositionOffset(1);\n        }\n        if (this.width < maxWidth) {\n            this.width = maxWidth;\n        }\n        if (this.height < maxHeight) {\n            this.height = maxHeight;\n        }\n    }\n    setChildAlongAxis(child, axis, pos, size) {\n        if (axis === 0) {\n            child.width = size;\n        }\n        else {\n            child.height = size;\n        }\n        const value = pos;\n        if (axis === 0) {\n            child.x = value + size * child.originX;\n        }\n        else {\n            child.y = value + size * child.originY;\n        }\n    }\n    setAllChildPositionOffset(axis) {\n        for (const child of this.layoutElements) {\n            if (axis === 0) {\n                const offset = this.width * 0.5;\n                child.x -= offset;\n            }\n            else {\n                const offset = this.height * 0.5;\n                child.y -= offset;\n            }\n        }\n    }\n    getStartOffset(axis, requiredSpaceWithoutPadding) {\n        const requiredSpace = requiredSpaceWithoutPadding + (axis === 0 ? this.paddingHorizontal() : this.paddingVertical());\n        const availableSpace = (axis === 0 ? this.width : this.height);\n        const surplusSpace = availableSpace - requiredSpace;\n        const alignmentOnAxis = this.getAlignmentOnAxis(axis);\n        return (axis === 0 ? this._padding.x : this._padding.z) + surplusSpace * alignmentOnAxis;\n    }\n    getAlignmentOnAxis(axis) {\n        if (axis === 0)\n            return (this._alignmentType % 3) * 0.5;\n        else\n            return Math.floor(this._alignmentType / 3) * 0.5;\n    }\n    getCellCount() {\n        const cell = new Phaser.Math.Vector2();\n        if (this._constraint === ConstraintType.FixedColumnCount) {\n            cell.x = this._constraintCount;\n            if (this.layoutElements.length >= cell.x) {\n                cell.y = Math.floor(this.layoutElements.length / cell.x) + (this.layoutElements.length % cell.x > 0 ? 1 : 0);\n            }\n        }\n        else if (this._constraint === ConstraintType.FixedRowCount) {\n            cell.y = this._constraintCount;\n            if (this.layoutElements.length >= cell.y) {\n                cell.x = Math.floor(this.layoutElements.length / cell.y) + (this.layoutElements.length % cell.y > 0 ? 1 : 0);\n            }\n        }\n        else {\n            cell.x = Math.max(1, Math.floor((this.width - this.paddingHorizontal() + this._spacing.x + 0.001) / (this._cellSize.x + this._spacing.x)));\n            cell.y = Math.max(1, Math.floor((this.height - this.paddingVertical() + this._spacing.y + 0.001) / (this._cellSize.y + this._spacing.y)));\n        }\n        return cell;\n    }\n    paddingHorizontal() {\n        return this._padding.x + this._padding.y;\n    }\n    paddingVertical() {\n        return this._padding.z + this._padding.w;\n    }\n}\nGridLayoutGroup.ClassName = \"gridLayoutGroup\";\nvar AlignmentType;\n(function (AlignmentType) {\n    AlignmentType[AlignmentType[\"UpperLeft\"] = 0] = \"UpperLeft\";\n    AlignmentType[AlignmentType[\"UpperCenter\"] = 1] = \"UpperCenter\";\n    AlignmentType[AlignmentType[\"UpperRight\"] = 2] = \"UpperRight\";\n    AlignmentType[AlignmentType[\"MiddleLeft\"] = 3] = \"MiddleLeft\";\n    AlignmentType[AlignmentType[\"MiddleCenter\"] = 4] = \"MiddleCenter\";\n    AlignmentType[AlignmentType[\"MiddleRight\"] = 5] = \"MiddleRight\";\n    AlignmentType[AlignmentType[\"LowerLeft\"] = 6] = \"LowerLeft\";\n    AlignmentType[AlignmentType[\"LowerCenter\"] = 7] = \"LowerCenter\";\n    AlignmentType[AlignmentType[\"LowerRight\"] = 8] = \"LowerRight\";\n})(AlignmentType || (AlignmentType = {}));\nvar CornerType;\n(function (CornerType) {\n    CornerType[CornerType[\"UpperLeft\"] = 0] = \"UpperLeft\";\n    CornerType[CornerType[\"UpperRight\"] = 1] = \"UpperRight\";\n    CornerType[CornerType[\"LowerLeft\"] = 2] = \"LowerLeft\";\n    CornerType[CornerType[\"LowerRight\"] = 3] = \"LowerRight\";\n})(CornerType || (CornerType = {}));\nvar AxisType;\n(function (AxisType) {\n    AxisType[AxisType[\"Horizontal\"] = 0] = \"Horizontal\";\n    AxisType[AxisType[\"Vertical\"] = 1] = \"Vertical\";\n})(AxisType || (AxisType = {}));\nvar ConstraintType;\n(function (ConstraintType) {\n    ConstraintType[ConstraintType[\"Flexible\"] = 0] = \"Flexible\";\n    ConstraintType[ConstraintType[\"FixedColumnCount\"] = 1] = \"FixedColumnCount\";\n    ConstraintType[ConstraintType[\"FixedRowCount\"] = 2] = \"FixedRowCount\";\n})(ConstraintType || (ConstraintType = {}));\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CharacterInfo/GridLayoutGroup.ts?");

/***/ }),

/***/ "./src/ui/CharacterInfo/ScrollRect.ts":
/*!********************************************!*\
  !*** ./src/ui/CharacterInfo/ScrollRect.ts ***!
  \********************************************/
/*! exports provided: ScrollRect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ScrollRect\", function() { return ScrollRect; });\n/* harmony import */ var _GridLayoutGroup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GridLayoutGroup */ \"./src/ui/CharacterInfo/GridLayoutGroup.ts\");\n\nclass ScrollRect extends Phaser.GameObjects.Zone {\n    constructor(scene, x, y) {\n        super(scene, x, y);\n        this.content = new _GridLayoutGroup__WEBPACK_IMPORTED_MODULE_0__[\"GridLayoutGroup\"](scene, x, y);\n    }\n    setParent(parent) {\n        parent.add(this);\n        parent.add(this.content);\n    }\n    setPosition(x, y) {\n        super.setPosition(x, y);\n        return this;\n    }\n    addItem(item) {\n        this.content.add(item);\n    }\n    sort() {\n        this.content.Layout();\n        if (this.content.startAxis === _GridLayoutGroup__WEBPACK_IMPORTED_MODULE_0__[\"AxisType\"].Horizontal) {\n        }\n        else {\n        }\n    }\n    onMove(pointer) {\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CharacterInfo/ScrollRect.ts?");

/***/ }),

/***/ "./src/ui/CharacterInfo/index.ts":
/*!***************************************!*\
  !*** ./src/ui/CharacterInfo/index.ts ***!
  \***************************************/
/*! exports provided: CharacterEditorPanel, CharacterInfo, CharacterInfoMediator, GraphicsProgressBar, GridLayoutGroup, AlignmentType, CornerType, AxisType, ConstraintType, ScrollRect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _CharacterEditorPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CharacterEditorPanel */ \"./src/ui/CharacterInfo/CharacterEditorPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CharacterEditorPanel\", function() { return _CharacterEditorPanel__WEBPACK_IMPORTED_MODULE_0__[\"CharacterEditorPanel\"]; });\n\n/* harmony import */ var _CharacterInfo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CharacterInfo */ \"./src/ui/CharacterInfo/CharacterInfo.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CharacterInfo\", function() { return _CharacterInfo__WEBPACK_IMPORTED_MODULE_1__[\"CharacterInfo\"]; });\n\n/* harmony import */ var _CharacterInfoMediator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CharacterInfoMediator */ \"./src/ui/CharacterInfo/CharacterInfoMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CharacterInfoMediator\", function() { return _CharacterInfoMediator__WEBPACK_IMPORTED_MODULE_2__[\"CharacterInfoMediator\"]; });\n\n/* harmony import */ var _CharacterInfoPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CharacterInfoPanel */ \"./src/ui/CharacterInfo/CharacterInfoPanel.ts\");\n/* empty/unused harmony star reexport *//* harmony import */ var _GraphicsProgressBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GraphicsProgressBar */ \"./src/ui/CharacterInfo/GraphicsProgressBar.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"GraphicsProgressBar\", function() { return _GraphicsProgressBar__WEBPACK_IMPORTED_MODULE_4__[\"GraphicsProgressBar\"]; });\n\n/* harmony import */ var _GridLayoutGroup__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GridLayoutGroup */ \"./src/ui/CharacterInfo/GridLayoutGroup.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"GridLayoutGroup\", function() { return _GridLayoutGroup__WEBPACK_IMPORTED_MODULE_5__[\"GridLayoutGroup\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"AlignmentType\", function() { return _GridLayoutGroup__WEBPACK_IMPORTED_MODULE_5__[\"AlignmentType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CornerType\", function() { return _GridLayoutGroup__WEBPACK_IMPORTED_MODULE_5__[\"CornerType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"AxisType\", function() { return _GridLayoutGroup__WEBPACK_IMPORTED_MODULE_5__[\"AxisType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ConstraintType\", function() { return _GridLayoutGroup__WEBPACK_IMPORTED_MODULE_5__[\"ConstraintType\"]; });\n\n/* harmony import */ var _ScrollRect__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ScrollRect */ \"./src/ui/CharacterInfo/ScrollRect.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ScrollRect\", function() { return _ScrollRect__WEBPACK_IMPORTED_MODULE_6__[\"ScrollRect\"]; });\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CharacterInfo/index.ts?");

/***/ }),

/***/ "./src/ui/Compose/Compose.ts":
/*!***********************************!*\
  !*** ./src/ui/Compose/Compose.ts ***!
  \***********************************/
/*! exports provided: Compose */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Compose\", function() { return Compose; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass Compose extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_PKT_CRAFT_QUERY_FORMULA, this.onRetFormulaDetial);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n    onReqFormulaDetail(id) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_PKT_CRAFT_QUERY_FORMULA);\n        const content = packet.content;\n        content.id = id;\n        this.connection.send(packet);\n    }\n    onReqUseFormula(id) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_PKT_CRAFT_ALCHEMY);\n        const content = packet.content;\n        content.id = id;\n        this.connection.send(packet);\n    }\n    onRetFormulaDetial(packge) {\n        const content = packge.content;\n        this.mEvent.emit(\"formulaDetial\", content);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Compose/Compose.ts?");

/***/ }),

/***/ "./src/ui/Compose/ComposeMediator.ts":
/*!*******************************************!*\
  !*** ./src/ui/Compose/ComposeMediator.ts ***!
  \*******************************************/
/*! exports provided: ComposeMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ComposeMediator\", function() { return ComposeMediator; });\n/* harmony import */ var _ComposePanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ComposePanel */ \"./src/ui/Compose/ComposePanel.ts\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Compose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Compose */ \"./src/ui/Compose/Compose.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nclass ComposeMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"BaseMediator\"] {\n    constructor(layerMgr, scene, worldService) {\n        super();\n        this.tsetskills = [];\n        this.testDateils = [];\n        this.scene = scene;\n        this.layerMgr = layerMgr;\n        this.world = worldService;\n    }\n    show() {\n        if (this.mView) {\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _ComposePanel__WEBPACK_IMPORTED_MODULE_0__[\"ComposePanel\"](this.scene, this.world);\n            this.mView.on(\"hide\", this.onHideView, this);\n            this.mView.on(\"reqformula\", this.onReqFormulaDetial, this);\n            this.mView.on(\"reqUseFormula\", this.onReqUseFormula, this);\n        }\n        if (!this.compose) {\n            this.compose = new _Compose__WEBPACK_IMPORTED_MODULE_2__[\"Compose\"](this.world);\n            this.compose.on(\"formulaDetial\", this.onRetFormulaDetial, this);\n            this.compose.register();\n        }\n        this.layerMgr.addToUILayer(this.mView);\n        this.mView.show(this.mParam[0]);\n    }\n    isSceneUI() {\n        return true;\n    }\n    destroy() {\n        if (this.compose) {\n            this.compose.destroy();\n            this.compose = undefined;\n        }\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = undefined;\n        }\n    }\n    onReqFormulaDetial(id) {\n        this.compose.onReqFormulaDetail(id);\n    }\n    onReqUseFormula(id) {\n        this.compose.onReqUseFormula(id);\n    }\n    onRetFormulaDetial(content) {\n        const panel = this.mView;\n        panel.setComposeDetialData(content);\n    }\n    onHideView() {\n        this.destroy();\n    }\n    getTestData() {\n        const items = [];\n        for (let i = 0; i < 20; i++) {\n            const skill = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_pkt_def\"].PKT_Skill();\n            skill.id = \"1\" + i;\n            skill.name = \"\" + i;\n            skill.quality = (i % 3 === 0 ? \"A\" : (i % 2 === 0 ? \"B\" : \"C\"));\n            skill.active = (i % 6 === 0 ? false : true);\n            skill.qualified = (i % 8 === 0 ? false : true);\n            items.push(skill);\n        }\n        return items;\n    }\n    getTestDeitals() {\n        const items = this.getTestData();\n        this.tsetskills = items;\n        for (const skill of items) {\n            const ditem = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OP_VIRTUAL_WORLD_RES_CLIENT_PKT_CRAFT_QUERY_FORMULA();\n            ditem.id = skill.id;\n            ditem.productName = \"\" + skill.id;\n            ditem.productDes = \"\";\n            ditem.materials = [];\n            const mcount = 8 + Math.floor(Math.random() * 8);\n            for (let i = 0; i < mcount; i++) {\n                const mitem = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].CountablePackageItem();\n                mitem.count = mcount;\n                mitem.neededCount = (skill.qualified ? mitem.count - 2 : mitem.count + 2);\n                ditem.materials.push(mitem);\n            }\n            this.testDateils.push(ditem);\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Compose/ComposeMediator.ts?");

/***/ }),

/***/ "./src/ui/Compose/ComposePanel.ts":
/*!****************************************!*\
  !*** ./src/ui/Compose/ComposePanel.ts ***!
  \****************************************/
/*! exports provided: ComposePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ComposePanel\", function() { return ComposePanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Market_DetailDisplay__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Market/DetailDisplay */ \"./src/ui/Market/DetailDisplay.ts\");\n\n\n\n\n\n\n\n\n\n\nclass ComposePanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"compose\";\n        this.world = world;\n        this.scale = 1;\n    }\n    resize(width, height) {\n        super.resize(width, height);\n        this.content.x = width * 0.5;\n        this.content.y = height * 0.5;\n        this.mGrideTable.refreshPos(width * 0.5 + 10 * this.dpr, height - 70 * this.dpr);\n        this.setSize(width, height);\n    }\n    show(param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        this.scene.input.on(\"pointerup\", this.onInputPointUp, this);\n        this.makeBtn.on((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.onMakeHandler, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.scene.input.off(\"pointerup\", this.onInputPointUp, this);\n        this.makeBtn.off((tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"ClickEvent\"]).Tap, this.onMakeHandler, this);\n    }\n    preload() {\n        this.addAtlas(this.key, \"compose/compose.png\", \"compose/compose.json\");\n        this.addAtlas(game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasKey\"].commonKey, game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasName\"].common + \".png\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasName\"].common + \".json\");\n        super.preload();\n    }\n    init() {\n        const width = this.scaleWidth;\n        const height = this.scaleHeight;\n        const zoom = this.scale;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(width, height);\n        this.add(this.content);\n        const bggraphics = this.scene.make.graphics(undefined, false);\n        bggraphics.clear();\n        bggraphics.fillGradientStyle(0x7062EC, 0x7062EC, 0xCC99F5, 0xCC99F5);\n        bggraphics.fillRect(-width * 0.5, -height * 0.5, width * zoom, height * zoom);\n        const bg = this.scene.make.image({ key: this.key, frame: \"main_bg\" });\n        bg.y = -height * 0.5 + bg.height * 0.5;\n        bg.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height), Phaser.Geom.Rectangle.Contains);\n        bg.displayWidth = width;\n        this.content.add([bggraphics, bg]);\n        const mfont = `bold ${17 * this.dpr}px Source Han Sans`;\n        const titleBg = this.scene.make.image({ key: this.key, frame: \"title_bg\" });\n        titleBg.y = -height * 0.5 + 23 * this.dpr;\n        const titleTex = this.scene.make.text({ x: 0, y: titleBg.y, text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"compose.title\"), style: { font: mfont, bold: true, color: \"#8B5603\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0.5);\n        this.content.add([titleBg, titleTex]);\n        const backBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"Button\"](this.scene, game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasKey\"].commonKey, \"back_arrow\", \"back_arrow\");\n        backBtn.setPosition(-width * 0.5 + 20 * this.dpr, -height * 0.5 + 30 * this.dpr);\n        backBtn.on(\"Tap\", this.onBackHandler, this);\n        this.content.add(backBtn);\n        this.mDetailDisplay = new _Market_DetailDisplay__WEBPACK_IMPORTED_MODULE_3__[\"DetailDisplay\"](this.scene);\n        this.mDetailDisplay.y = -150 * this.dpr;\n        this.mDetailDisplay.scale = this.dpr * 2;\n        this.content.add(this.mDetailDisplay);\n        this.mDetailBubble = new DetailBubble(this.scene, this.dpr);\n        this.mDetailBubble.x = -width * 0.5;\n        this.mDetailBubble.y = height * 0.5 - 360 * this.dpr;\n        this.content.add(this.mDetailBubble);\n        this.makeBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NineSliceButton\"](this.scene, Math.ceil(width * 0.5 - 60 * this.dpr), Math.ceil(height * 0.5 - 310 * this.dpr), 106 * this.dpr, 40 * this.dpr, game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasKey\"].commonKey, \"yellow_btn\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"compose.make\"), this.dpr, this.scale, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 12 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        this.makeBtn.setTextStyle({ fontSize: 16 * this.dpr, color: \"#996600\" });\n        // this.makeBtn.on(\"click\", this.onMakeHandler, this);\n        this.content.add(this.makeBtn);\n        const materialConWdith = 360 * this.dpr, materialConHeight = 92 * this.dpr;\n        this.materialCon = this.scene.make.container(undefined, false).setSize(materialConWdith, materialConHeight);\n        this.content.add(this.materialCon);\n        this.materialCon.setPosition(0, height * 0.5 - 230 * this.dpr);\n        const materialbg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: \"sourcelist_bg\" });\n        materialbg.displayWidth = width;\n        const materialTitle = this.scene.make.text({\n            x: 0,\n            y: -materialConHeight * 0.5 + 12 * this.dpr,\n            text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"compose.needMaterials\"),\n            style: {\n                color: \"#ffffff\",\n                fontSize: 13 * this.dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                wordWrap: {\n                    width: 90 * this.dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false).setOrigin(0.5);\n        const materialLine = this.scene.make.image({ x: -10 * this.dpr, y: materialTitle.y, key: this.key, frame: \"sourcelist_title_1\" });\n        const materialLine2 = this.scene.make.image({ x: 10 * this.dpr, y: materialTitle.y, key: this.key, frame: \"sourcelist_title_1\" });\n        const linePosx = -materialTitle.width * 0.5 - materialLine.width * 0.5 - 10 * this.dpr;\n        materialLine.setPosition(linePosx, materialTitle.y);\n        materialLine2.setPosition(-linePosx, materialTitle.y).rotation = -Math.PI;\n        const materialLine3 = this.scene.make.image({ x: 0, y: materialTitle.y + 12 * this.dpr, key: this.key, frame: \"separator\" });\n        this.materialCon.add([materialbg, materialTitle, materialLine, materialLine2, materialLine3]);\n        this.materialGameScroll = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"GameScroller\"](this.scene, {\n            x: width * 0.5,\n            y: height - 220 * this.dpr,\n            width,\n            height: 70 * this.dpr,\n            zoom: this.scale,\n            align: 2,\n            orientation: 1,\n            valuechangeCallback: undefined,\n            celldownCallBack: (gameobject) => {\n                this.materialTipsCon.visible = true;\n                this.onMaterialItemHandler(gameobject);\n            },\n            cellupCallBack: (gameobject) => {\n                this.materialTipsCon.visible = false;\n            }\n        });\n        this.add(this.materialGameScroll);\n        this.materialTipsCon = this.scene.make.container(undefined, false).setPosition(0, -20 * this.dpr);\n        this.materialTipsCon.visible = false;\n        this.materialCon.add(this.materialTipsCon);\n        const tipsWidth = 109 * this.dpr;\n        const tipsHeight = 42 * this.dpr;\n        const tipsbg = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NinePatch\"](this.scene, 0, 0, tipsWidth, tipsHeight, this.key, \"tips_bg\", undefined, undefined, {\n            left: 20 * this.dpr,\n            top: 20 * this.dpr,\n            right: 20 * this.dpr,\n            bottom: 20 * this.dpr\n        });\n        tipsbg.setPosition(26 * this.dpr, -tipsHeight * 0.5);\n        this.tipsbg = tipsbg;\n        const tipsArrow = this.scene.make.image({ key: this.key, frame: \"tips_arrow\" });\n        const tipsName = this.scene.make.text({\n            x: 0,\n            y: -materialConHeight * 0.5 + 12 * this.dpr,\n            text: \"\",\n            style: {\n                color: \"#844ED5\",\n                fontSize: 13 * this.dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                wordWrap: {\n                    width: 90 * this.dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false).setOrigin(0, 0.5).setPosition(-19 * this.dpr, -tipsHeight + 10 * this.dpr);\n        this.materialTipsName = tipsName;\n        const tipsText = this.scene.make.text({\n            x: 0,\n            y: -materialConHeight * 0.5 + 12 * this.dpr,\n            text: \"\",\n            style: {\n                color: \"#333333\",\n                fontSize: 13 * this.dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                wordWrap: {\n                    width: 100 * this.dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false).setOrigin(0).setPosition(-19 * this.dpr, -tipsHeight + 20 * this.dpr);\n        this.materialTipsDes = tipsText;\n        this.materialTipsCon.add([tipsbg, tipsName, tipsText, tipsArrow]);\n        const propFrame = this.scene.textures.getFrame(this.key, \"bprint_bg_2\");\n        const capW = propFrame.width + 10 * this.dpr * zoom;\n        const capH = propFrame.height + 12 * this.dpr * zoom;\n        const tableConfig = {\n            x: width * zoom / 2,\n            y: height * zoom * 0.5 + 145 * this.dpr * zoom,\n            table: {\n                width: width * zoom,\n                height: 190 * this.dpr * zoom,\n                columns: 2,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellPadX: 40 * this.dpr * zoom,\n                zoom: this.scale\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: (cell, cellContainer) => {\n                const scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new ComposeItem(scene, this.key, this.dpr, zoom);\n                    this.add(cellContainer);\n                }\n                // cellContainer.setSize(width, height);\n                cellContainer.setItemData(item);\n                if (item && this.mSelectItemData && item.id === this.mSelectItemData.id)\n                    cellContainer.select = true;\n                return cellContainer;\n            },\n        };\n        this.mGrideTable = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"GameGridTable\"](this.scene, tableConfig);\n        this.mGrideTable.layout();\n        this.mGrideTable.on(\"cellTap\", (cell) => {\n            if (cell) {\n                this.onSelectItemHandler(cell);\n            }\n        });\n        this.add(this.mGrideTable.table);\n        this.resize(width, height);\n        super.init();\n        if (this.mShowData)\n            this.setComposeData(this.mShowData.skills);\n    }\n    destroy() {\n        super.destroy();\n        if (this.alertView)\n            this.alertView.destroy();\n    }\n    setComposeData(datas) {\n        this.mGrideTable.setItems(datas);\n        const cell = this.mGrideTable.getCell(0);\n        this.onSelectItemHandler(cell.container);\n    }\n    setComposeDetialData(data) {\n        this.mDetailBubble.setDetailData(data.productName, data.productDes);\n        this.setDetailDisplay(data);\n        this.setMaterialItems(data.materials);\n    }\n    setDetailDisplay(data) {\n        const resData = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE_ITEM_RESOURCE();\n        resData.animations = data.productAnimations;\n        resData.display = data.productDisplay;\n        resData.avatar = data.productAvatar;\n        if (resData.display) {\n            this.mDetailDisplay.loadDisplay(resData);\n        }\n        else if (resData.avatar) {\n            this.mDetailDisplay.loadAvatar(resData);\n        }\n        else {\n            // this.mDetailDisplay.loadUrl(this.mSelectedProp.icon);\n        }\n    }\n    onSelectItemHandler(item) {\n        const data = item.itemData;\n        this.emit(\"reqformula\", data.id);\n        item.select = true;\n        this.mSelectItemData = item.itemData;\n        this.makeBtn.enable = data.active && data.qualified;\n        this.mGrideTable.refresh();\n    }\n    setMaterialItems(datas) {\n        const len = datas.length;\n        const zoom = this.scale;\n        const items = [];\n        this.materialGameScroll.clearItems();\n        for (let i = 0; i < len; i++) {\n            const item = new ComposeMaterialItem(this.scene, this.key, this.dpr, zoom);\n            item.y = 0;\n            items.push(item);\n            item.setItemData(datas[i]);\n            item.setData(\"itemData\", datas[i]);\n            this.materialGameScroll.addItem(item);\n        }\n        this.materialGameScroll.Sort();\n    }\n    onMaterialItemHandler(item) {\n        const pos = item.getWorldTransformMatrix();\n        this.materialTipsCon.x = pos.tx - this.scaleWidth * 0.5;\n        this.materialTipsName.text = item.itemData.name;\n        this.materialTipsDes.text = item.itemData.source;\n        const tipsHeight = this.materialTipsName.height + this.materialTipsDes.height + 20 * this.dpr;\n        const tipsWidth = this.tipsbg.width;\n        this.tipsbg.resize(tipsWidth, tipsHeight);\n        this.tipsbg.y = -this.tipsbg.height * 0.5;\n        this.materialTipsName.y = -tipsHeight + 15 * this.dpr;\n        this.materialTipsDes.y = -tipsHeight + 25 * this.dpr;\n    }\n    onMakeHandler() {\n        if (!this.alertView)\n            this.alertView = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"AlertView\"](this.scene, this.mWorld);\n        if (this.mSelectItemData) {\n            this.alertView.show({\n                text: `${this.mSelectItemData.name}`,\n                title: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"compose.synthesis\"),\n                oy: 302 * this.dpr * this.mWorld.uiScale,\n                callback: () => {\n                    this.emit(\"reqUseFormula\", this.mSelectItemData.id);\n                },\n            });\n        }\n    }\n    onInputPointUp() {\n        this.materialTipsCon.visible = false;\n    }\n    onBackHandler() {\n        this.emit(\"hide\");\n    }\n}\nclass DetailBubble extends Phaser.GameObjects.Container {\n    constructor(scene, dpr) {\n        super(scene);\n        this.dpr = dpr;\n        this.mDetailBubble = this.scene.make.graphics(undefined, false);\n        const bubbleW = 198 * dpr;\n        const bubbleH = 96 * dpr;\n        this.mDetailBubble = this.scene.make.graphics(undefined, false);\n        this.mDetailBubble.fillStyle(0xFFFFFF, 0.1);\n        this.mDetailBubble.fillRoundedRect(0, 0, bubbleW, bubbleH);\n        this.mItemName = this.scene.make.text({\n            x: 7 * this.dpr,\n            y: 9 * this.dpr,\n            text: \"\",\n            style: {\n                fontSize: 12 * this.dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                color: \"#8C55E1\",\n                align: \"center\"\n            }\n        });\n        this.mDesText = this.scene.make.text({\n            x: 8 * dpr,\n            y: 30 * dpr,\n            style: {\n                color: \"#ffffff\",\n                fontSize: 10 * dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                wordWrap: {\n                    width: 180 * dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false);\n        this.add([this.mDetailBubble, this.mItemName, this.mDesText]);\n        this.setSize(bubbleW, bubbleH);\n    }\n    setDetailData(name, des) {\n        this.mItemName.setText(name);\n        this.mDesText.setText(des);\n        this.resize();\n    }\n    resize(w, h) {\n        if (w === undefined)\n            w = this.width;\n        const bubbleH = this.mDesText.height + 60 * this.dpr;\n        if (w === this.width && bubbleH === this.height) {\n            return;\n        }\n        this.mDetailBubble.clear();\n        this.mDetailBubble.fillStyle(0xFFFFFF, 0.1);\n        this.mDetailBubble.fillRoundedRect(0, 0, w, bubbleH);\n        this.setSize(w, bubbleH);\n        // this.mDetailBubbleContainer.y = this.height - this.y - this.mDetailBubbleContainer.height - 6 * this.dpr;\n    }\n}\nclass ComposeItem extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr, zoom) {\n        super(scene);\n        this.dpr = dpr;\n        this.key = key;\n        this.zoom = zoom;\n        this.bg = this.scene.make.image({ key: this.key, frame: \"bprint_bg_1\" });\n        this.setSize(this.bg.width, this.bg.height);\n        this.itemIcon = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](this.scene, 0, 0);\n        const width = this.width;\n        const height = this.height;\n        this.newIcon = this.scene.make.image({ key: this.key, frame: \"tag_new\" });\n        this.newIcon.setPosition(-width * 0.5 + 3 * dpr, -height * 0.5 + 3 * dpr);\n        this.newText = this.scene.make.text({\n            x: this.newIcon.x,\n            y: this.newIcon.y,\n            text: \"N\",\n            style: {\n                fontSize: 11 * this.dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                color: \"#ffffff\",\n                align: \"center\"\n            }\n        }).setOrigin(0.5);\n        this.qualityIcon = this.scene.make.image({ key: this.key, frame: \"tag_rank_a\" });\n        this.qualityIcon.setPosition(-width * 0.5 + this.qualityIcon.width * 0.5 - 2 * dpr, height * 0.5 - this.qualityIcon.height * 0.5);\n        this.qualityTex = this.scene.make.text({\n            x: this.qualityIcon.x,\n            y: this.qualityIcon.y,\n            text: \"A\",\n            style: {\n                fontSize: 11 * this.dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                color: \"#ffffff\",\n                align: \"center\"\n            }\n        }).setOrigin(0.5);\n        this.qualifiedIcon = this.scene.make.image({ key: this.key, frame: \"tag_ready\" });\n        this.qualifiedIcon.setOrigin(1).setPosition(width * 0.5 - 3 * dpr, height * 0.5 - 3 * dpr);\n        this.lockbg = this.scene.make.image({ key: this.key, frame: \"bprint_mask\" });\n        this.lockIcon = this.scene.make.image({ key: this.key, frame: \"lock\" });\n        this.add([this.bg, this.itemIcon, this.newIcon, this.newText, this.qualityIcon, this.qualityTex, this.qualifiedIcon, this.lockbg, this.lockIcon]);\n    }\n    setItemData(data) {\n        this.itemData = data;\n        const active = data.active;\n        this.newIcon.visible = active;\n        this.newText.visible = active;\n        this.qualityIcon.visible = active;\n        this.qualityTex.visible = active;\n        this.qualityTex.text = data.quality;\n        this.qualifiedIcon.visible = active && data.qualified;\n        this.lockbg.visible = !data.active;\n        this.lockIcon.visible = !data.active;\n        this.setQualityTexture(data.quality);\n        if (data.display)\n            this.setItemIcon(data.display);\n        this.select = false;\n    }\n    set select(value) {\n        if (value)\n            this.bg.setFrame(\"bprint_bg_2\");\n        else\n            this.bg.setFrame(\"bprint_bg_1\");\n    }\n    setItemIcon(display) {\n        const url = game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(display.texturePath);\n        this.itemIcon.load(url, this, () => {\n            this.itemIcon.scale = this.dpr * this.zoom;\n            this.itemIcon.setPosition(0, 0);\n        });\n    }\n    setQualityTexture(quality) {\n        this.qualityIcon.visible = true;\n        if (quality === \"A\")\n            this.qualityIcon.setFrame(\"tag_rank_a\");\n        else if (quality === \"B\")\n            this.qualityIcon.setFrame(\"tag_rank_b\");\n        else if (quality === \"C\")\n            this.qualityIcon.setFrame(\"tag_rank_c\");\n        else\n            this.qualityIcon.visible = false;\n    }\n}\nclass ComposeMaterialItem extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr, zoom) {\n        super(scene);\n        this.dpr = dpr;\n        this.key = key;\n        this.zoom = zoom;\n        const bg = this.scene.make.image({ key: this.key, frame: \"source_bg\" });\n        this.itemIcon = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](scene, 0, 0);\n        this.itemCount = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"BBCodeText\"](this.scene, 0, 0, \"\", {})\n            .setOrigin(0.5).setFontSize(11 * dpr).setFontFamily(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT);\n        this.add([bg, this.itemIcon, this.itemCount]);\n        this.setSize(bg.width, bg.height);\n        this.itemCount.y = this.height * 0.5;\n    }\n    setItemData(data) {\n        this.itemData = data;\n        this.itemCount.text = this.getCountText(data.count, data.neededCount);\n        const url = game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(data.display.texturePath);\n        this.itemIcon.load(url, this, () => {\n            this.itemIcon.scale = this.dpr * this.zoom;\n            this.itemIcon.setPosition(0, 0);\n        });\n    }\n    getCountText(count, needcount) {\n        const color = (count >= needcount ? \"#ffffff\" : \"#ff0000\");\n        const text = `[stroke=${color}][color=${color}]${count}[/color][/stroke]/` + needcount;\n        return text;\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Compose/ComposePanel.ts?");

/***/ }),

/***/ "./src/ui/Compose/index.ts":
/*!*********************************!*\
  !*** ./src/ui/Compose/index.ts ***!
  \*********************************/
/*! exports provided: Compose, ComposeMediator, ComposePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Compose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Compose */ \"./src/ui/Compose/Compose.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Compose\", function() { return _Compose__WEBPACK_IMPORTED_MODULE_0__[\"Compose\"]; });\n\n/* harmony import */ var _ComposeMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComposeMediator */ \"./src/ui/Compose/ComposeMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ComposeMediator\", function() { return _ComposeMediator__WEBPACK_IMPORTED_MODULE_1__[\"ComposeMediator\"]; });\n\n/* harmony import */ var _ComposePanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ComposePanel */ \"./src/ui/Compose/ComposePanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ComposePanel\", function() { return _ComposePanel__WEBPACK_IMPORTED_MODULE_2__[\"ComposePanel\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Compose/index.ts?");

/***/ }),

/***/ "./src/ui/CutIn/CutInMediator.ts":
/*!***************************************!*\
  !*** ./src/ui/CutIn/CutInMediator.ts ***!
  \***************************************/
/*! exports provided: CutInMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CutInMediator\", function() { return CutInMediator; });\n/* harmony import */ var _CutInPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CutInPanel */ \"./src/ui/CutIn/CutInPanel.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass CutInMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BaseMediator\"] {\n    constructor(layerManager, scene, world) {\n        super();\n        this.layerManager = layerManager;\n        this.scene = scene;\n        this.world = world;\n    }\n    show(param) {\n        if (this.mView && this.mView.isShow()) {\n            return;\n        }\n        this.mView = new _CutInPanel__WEBPACK_IMPORTED_MODULE_0__[\"CutInPanel\"](this.scene, this.world);\n        this.mView.once(\"close\", this.onCloseHandler, this);\n        this.mView.show(param);\n        // this.layerManager.addToToolTipsLayer(this.mView.view);\n    }\n    onCloseHandler() {\n        if (this.mView) {\n            this.mView.destroy();\n            this.mView = undefined;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CutIn/CutInMediator.ts?");

/***/ }),

/***/ "./src/ui/CutIn/CutInPanel.ts":
/*!************************************!*\
  !*** ./src/ui/CutIn/CutInPanel.ts ***!
  \************************************/
/*! exports provided: CutInPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CutInPanel\", function() { return CutInPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass CutInPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"cut_in\";\n    }\n    show(param) {\n        this.mShowData = param;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        // if (!param || param.length < 1) return;\n        if (param && param.length > 0) {\n            const text = param[0].text;\n            if (this.mName) {\n                this.mName.setText(text[0].text);\n            }\n        }\n        else {\n            if (this.mName) {\n                this.mName.setText(\"???\");\n            }\n        }\n        const width = this.scene.cameras.main.width;\n        this.x = width + this.width / 2;\n        // this.view.alpha = 0;\n        const _x = this.scene.cameras.main.width / 2;\n        this.scene.tweens.timeline({\n            targets: this,\n            duration: 300,\n            tweens: [{\n                    x: _x,\n                    alpha: 1,\n                    ease: \"Sine.easeInOut\"\n                }, {\n                    delay: 2000,\n                    y: this.y - 10 * this.dpr,\n                    alpha: 0\n                }],\n            onComplete: () => {\n                this.emit(\"close\");\n            }\n        });\n    }\n    resize(w, h) {\n        // this.x = w / 2;\n        this.y = 140 * this.dpr;\n    }\n    preload() {\n        this.scene.load.image(this.key, game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getUIRes(this.dpr, \"cut_in/cut_in_bg.png\"));\n        super.preload();\n    }\n    init() {\n        const background = this.scene.make.image({\n            key: this.key\n        }, false);\n        this.setSize(background.width * this.scale, background.height * this.scale);\n        this.mName = this.scene.make.text({\n            style: {\n                color: \"#ffcc33\",\n                fontSize: 18 * this.dpr,\n                fotnFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        this.mName.setFontStyle(\"bold\");\n        this.mName.setStroke(\"#000000\", 1 * this.dpr);\n        this.add([background, this.mName]);\n        super.init();\n        this.resize(this.scene.cameras.main.width, this.scene.cameras.main.height);\n        this.mWorld.uiManager.getUILayerManager().addToToolTipsLayer(this);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CutIn/CutInPanel.ts?");

/***/ }),

/***/ "./src/ui/CutIn/index.ts":
/*!*******************************!*\
  !*** ./src/ui/CutIn/index.ts ***!
  \*******************************/
/*! exports provided: CutInMediator, CutInPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _CutInMediator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CutInMediator */ \"./src/ui/CutIn/CutInMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CutInMediator\", function() { return _CutInMediator__WEBPACK_IMPORTED_MODULE_0__[\"CutInMediator\"]; });\n\n/* harmony import */ var _CutInPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CutInPanel */ \"./src/ui/CutIn/CutInPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CutInPanel\", function() { return _CutInPanel__WEBPACK_IMPORTED_MODULE_1__[\"CutInPanel\"]; });\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CutIn/index.ts?");

/***/ }),

/***/ "./src/ui/CutInMenu/CutInMenu.ts":
/*!***************************************!*\
  !*** ./src/ui/CutInMenu/CutInMenu.ts ***!
  \***************************************/
/*! exports provided: CutInMenu */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CutInMenu\", function() { return CutInMenu; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass CutInMenu extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            //  this.addHandlerFun(op_client.OPCODE._OP_VIRTUAL_WORLD_REQ_CLIENT_MINING_MODE_SHOW_REWARD_PACKAGE, this.onMineSettlePackageHandler);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    reqRightButton(uiid, btnid) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_TARGET_UI);\n        const content = packet.content;\n        content.uiId = uiid;\n        content.componentId = btnid;\n        this.connection.send(packet);\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CutInMenu/CutInMenu.ts?");

/***/ }),

/***/ "./src/ui/CutInMenu/CutInMenuMediator.ts":
/*!***********************************************!*\
  !*** ./src/ui/CutInMenu/CutInMenuMediator.ts ***!
  \***********************************************/
/*! exports provided: CutInMenuMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CutInMenuMediator\", function() { return CutInMenuMediator; });\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CutInMenu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CutInMenu */ \"./src/ui/CutInMenu/CutInMenu.ts\");\n/* harmony import */ var _CutInMenuPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CutInMenuPanel */ \"./src/ui/CutInMenu/CutInMenuPanel.ts\");\n\n\n\nclass CutInMenuMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_0__[\"BaseMediator\"] {\n    constructor(layerMgr, scene, worldService) {\n        super();\n        this.scene = scene;\n        this.layerMgr = layerMgr;\n        this.world = worldService;\n    }\n    show(mParam) {\n        if (this.mView) {\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _CutInMenuPanel__WEBPACK_IMPORTED_MODULE_2__[\"CutInMenuPanel\"](this.scene, this.world);\n            this.mView.on(\"hide\", this.onHideView, this);\n            this.mView.on(\"rightButton\", this.onRightButtonHandler, this);\n        }\n        if (!this.cutInMenu) {\n            this.cutInMenu = new _CutInMenu__WEBPACK_IMPORTED_MODULE_1__[\"CutInMenu\"](this.world);\n            this.cutInMenu.register();\n        }\n        this.layerMgr.addToUILayer(this.mView);\n        this.mView.show(mParam);\n    }\n    isSceneUI() {\n        return true;\n    }\n    destroy() {\n        if (this.cutInMenu) {\n            this.cutInMenu.destroy();\n            this.cutInMenu = undefined;\n        }\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = undefined;\n        }\n    }\n    onRightButtonHandler(uiid, btnid) {\n        this.cutInMenu.reqRightButton(uiid, btnid);\n    }\n    onHideView() {\n        this.destroy();\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CutInMenu/CutInMenuMediator.ts?");

/***/ }),

/***/ "./src/ui/CutInMenu/CutInMenuPanel.ts":
/*!********************************************!*\
  !*** ./src/ui/CutInMenu/CutInMenuPanel.ts ***!
  \********************************************/
/*! exports provided: CutInMenuPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CutInMenuPanel\", function() { return CutInMenuPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass CutInMenuPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"cutinmenupanel\";\n        this.mapPop = new Map();\n        this.world = world;\n    }\n    resize(width, height) {\n        super.resize(width, height);\n        this.setSize(width, height);\n    }\n    show(param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.addListen();\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n    }\n    preload() {\n        this.addAtlas(this.key, \"cutInmenu/cutInmenu.png\", \"cutInmenu/cutInmenu.json\");\n        super.preload();\n    }\n    init() {\n        const width = this.scaleWidth;\n        const height = this.scaleHeight;\n        this.rightPopButton = new RightPopContainer(this.scene, width, this.key, this.dpr);\n        const posx = width + this.rightPopButton.width * 0.5 - 15 * this.dpr;\n        this.rightPopButton.setPosition(posx, height * 0.5);\n        this.rightPopButton.setClickHandler(new game_core__WEBPACK_IMPORTED_MODULE_0__[\"Handler\"](this, this.onRightClickHandler));\n        this.add(this.rightPopButton);\n        this.resize(width, height);\n        super.init();\n    }\n    destroy() {\n        super.destroy();\n    }\n    onRightClickHandler() {\n        const data = this.mShowData[0];\n        this.emit(\"rightButton\", data.id, data.button[0].node.id);\n    }\n}\nclass RightPopContainer extends Phaser.GameObjects.Container {\n    constructor(scene, width, key, dpr) {\n        super(scene);\n        this.isPop = false;\n        this.isPlaying = false;\n        this.dpr = dpr;\n        this.key = key;\n        this.scaleWidth = width;\n        const minecarbg = this.scene.make.image({ key: this.key, frame: \"minebag_bg\" });\n        this.bgSprite = this.scene.make.image({ key: this.key, frame: \"minebag_bg_brth\" }, false);\n        this.minecarBtn = this.scene.make.image({ key: this.key, frame: \"minecar\" }); // new Button(this.scene, this.key, \"minecar\", \"minecar\");\n        this.minecarBtn.setPosition(-12 * dpr, -this.minecarBtn.height * 0.5);\n        this.teximg = this.scene.make.image({ key: this.key, frame: \"text_minebag\" });\n        this.teximg.setPosition(this.minecarBtn.x, 2 * dpr);\n        const arrow = this.scene.make.image({ key: this.key, frame: \"arow\" });\n        arrow.setPosition(-minecarbg.width * 0.5 + 10 * dpr, 0);\n        this.add([this.bgSprite, minecarbg, this.minecarBtn, this.teximg, arrow]);\n        minecarbg.on(\"pointerup\", this.onClickHandler, this);\n        minecarbg.setInteractive();\n        this.setSize(minecarbg.width, minecarbg.height);\n        // this.scene.anims.create({\n        //     key: \"minecarFrame\",\n        //     frames: [{ key: this.key, frame: \"minebag_bg\" }, { key: this.key, frame: \"minebag_bg_brth\" }],\n        //     repeat: -1,\n        //     duration: 150\n        // });\n        this.tween = this.scene.tweens.add({\n            targets: this.bgSprite,\n            alpha: { value: 0, duration: 500, ease: \"Power1\", yoyo: true },\n            repeat: -1\n        });\n        // this.tween = this.scene.tweens.addCounter({\n        //     from: 1,\n        //     to: 0,\n        //     duration: 300,\n        //     yoyo: true,\n        //     onUpdate: () => {\n        //         this.bgSprite.alpha = this.tween.getValue();\n        //     }\n        // });\n        // this.play();\n    }\n    setClickHandler(handler) {\n        this.clickHandler = handler;\n    }\n    setPopData(data) {\n        this.popData = data;\n    }\n    play() {\n        // this.bgSprite.play(\"minecarFrame\");\n        this.bgSprite.alpha = 1;\n        this.tween.resume();\n        this.isPop = false;\n    }\n    stop() {\n        // this.bgSprite.anims.remove();\n        this.tween.pause();\n        this.bgSprite.alpha = 0;\n        this.isPop = true;\n    }\n    onClickHandler() {\n        if (!this.isPlaying && !this.isPop) {\n            this.popAnim();\n        }\n        else if (!this.isPlaying && this.isPop) {\n            this.takeback();\n            if (this.clickHandler)\n                this.clickHandler.runWith(this.popData);\n        }\n    }\n    popAnim() {\n        this.isPlaying = true;\n        const posTx = this.scaleWidth - 15 * this.dpr;\n        const target = this;\n        this.scene.tweens.add({\n            targets: target,\n            x: { value: posTx, duration: 300, ease: \"Bounce.easeOut\" },\n            onComplete: () => {\n                target.stop();\n                target.isPlaying = false;\n                target.timeID = setTimeout(() => {\n                    target.takeback();\n                }, 3000);\n            }\n        });\n    }\n    takeback() {\n        if (this.timeID) {\n            clearTimeout(this.timeID);\n            this.timeID = undefined;\n        }\n        this.isPlaying = true;\n        const posx = this.scaleWidth + this.width * 0.5 - 15 * this.dpr;\n        const target = this;\n        this.scene.tweens.add({\n            targets: target,\n            x: { value: posx, duration: 300, ease: \"Bounce.easeOut\" },\n            onComplete: () => {\n                target.play();\n                target.isPlaying = false;\n            }\n        });\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CutInMenu/CutInMenuPanel.ts?");

/***/ }),

/***/ "./src/ui/CutInMenu/index.ts":
/*!***********************************!*\
  !*** ./src/ui/CutInMenu/index.ts ***!
  \***********************************/
/*! exports provided: CutInMenu, CutInMenuMediator, CutInMenuPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _CutInMenu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CutInMenu */ \"./src/ui/CutInMenu/CutInMenu.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CutInMenu\", function() { return _CutInMenu__WEBPACK_IMPORTED_MODULE_0__[\"CutInMenu\"]; });\n\n/* harmony import */ var _CutInMenuMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CutInMenuMediator */ \"./src/ui/CutInMenu/CutInMenuMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CutInMenuMediator\", function() { return _CutInMenuMediator__WEBPACK_IMPORTED_MODULE_1__[\"CutInMenuMediator\"]; });\n\n/* harmony import */ var _CutInMenuPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CutInMenuPanel */ \"./src/ui/CutInMenu/CutInMenuPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CutInMenuPanel\", function() { return _CutInMenuPanel__WEBPACK_IMPORTED_MODULE_2__[\"CutInMenuPanel\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/CutInMenu/index.ts?");

/***/ }),

/***/ "./src/ui/EquipUpgrade/EquipUpgrade.ts":
/*!*********************************************!*\
  !*** ./src/ui/EquipUpgrade/EquipUpgrade.ts ***!
  \*********************************************/
/*! exports provided: EquipUpgrade */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EquipUpgrade\", function() { return EquipUpgrade; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass EquipUpgrade extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_MINING_MODE_ACTIVE_EQUIPMENT, this.onActiveEquipmend);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n    reqEquipedEquipment(id) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_RES_VIRTUAL_WORLD_MINING_MODE_EQUIP_EQUIPMENT);\n        const content = packet.content;\n        content.equipmentId = id;\n        this.connection.send(packet);\n    }\n    reqActiveEquipment(id) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_RES_VIRTUAL_WORLD_MINING_MODE_ACTIVE_EQUIPMENT);\n        const content = packet.content;\n        content.equipmentId = id;\n        this.connection.send(packet);\n    }\n    onActiveEquipmend(packge) {\n        const content = packge.content;\n        this.mEvent.emit(\"activeEquip\", content.mineEquipment);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/EquipUpgrade/EquipUpgrade.ts?");

/***/ }),

/***/ "./src/ui/EquipUpgrade/EquipUpgradeItem.ts":
/*!*************************************************!*\
  !*** ./src/ui/EquipUpgrade/EquipUpgradeItem.ts ***!
  \*************************************************/
/*! exports provided: EquipUpgradeItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EquipUpgradeItem\", function() { return EquipUpgradeItem; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nclass EquipUpgradeItem extends Phaser.Events.EventEmitter {\n    constructor(scene, container, dpr, zoom, key, commonKey) {\n        super();\n        this.haveEquiped = false;\n        this.cellWidth = 0;\n        this.cellHeight = 0;\n        this.dpr = dpr;\n        this.zoom = zoom;\n        this.key = key;\n        this.commonKey = commonKey;\n        this.mScene = scene;\n        this.mContainer = container;\n        this.create();\n    }\n    setEquipItems(data) {\n        const name = data.equipmentType;\n        const items = data.mineEquipments;\n        this.titleName.text = name;\n        let index = 0;\n        for (const item of items) {\n            if (item.selected) {\n                this.haveEquiped = true;\n                break;\n            }\n            index++;\n        }\n        this.gridTable.setItems(items);\n        if (this.haveEquiped)\n            // this.gridTable.setT((index + 1) / items.length);\n            this.setBgTexture(data[\"isblue\"]);\n    }\n    setTransPosition(x, y) {\n        // const w = this.mScene.cameras.main.width, h = this.mScene.cameras.main.height;\n        // const posX = w * 0.5 + this.mContainer.x * this.zoom;\n        // const posY = h * 0.5 + this.mContainer.y * this.zoom - 20 * this.dpr;\n        //  -posX + this.cellWidth / 2 * this.zoom, -posY);\n        this.bg.x += x;\n        this.bg.y += y;\n        this.titleName.x += x;\n        this.titleName.y += y;\n        this.bottombg.x += x;\n        this.bottombg.y += y;\n        this.equipName.x += x;\n        this.equipName.y += y;\n        this.penetrationText.x += x;\n        this.penetrationText.y += y;\n        this.equipDes.x += x;\n        this.equipDes.y += y;\n        this.topbg.x += x;\n        this.topbg.y += y;\n        this.unlockbtn.x += x;\n        this.unlockbtn.y += y;\n        this.costNum.x += x;\n        this.costNum.y += y;\n        this.diamondIcon.x += x;\n        this.diamondIcon.y += y;\n        this.curEquipItem.x += x;\n        this.curEquipItem.y += y;\n        this.gridTable.refreshPos(x, y - 10 * this.dpr * this.zoom);\n        // this.gridTable.x = posX;\n        // this.gridTable.y = posY;\n        // this.gridTable.layout();\n        // this.mScrollContainer.setPosition(-this.gridTable.x + this.cellWidth / 2 * this.zoom, -this.gridTable.y);\n    }\n    get displayList() {\n        return [this.bg, this.topbg, this.bottombg, this.titleName, this.equipName, this.penetrationText, this.equipDes];\n    }\n    refreshEquipData(data, index) {\n        this.gridTable.items[index] = data;\n        this.gridTable.refresh();\n        // this.gridTable.setT((index + 1) / this.gridTable.items.length);\n        this.updateEquipItem(this.curEquipItem);\n    }\n    destroy() {\n        if (this.unlockbtn)\n            this.unlockbtn.off(\"pointerup\", this.onUnlockEquipHandler, this);\n        super.destroy();\n        if (this.gridTable)\n            this.gridTable.destroy();\n        this.bg = null;\n        this.topbg = null;\n        this.bottombg = null;\n        this.gridTable = null;\n        this.titleName = null;\n        this.equipName = null;\n        this.penetrationText = null;\n        this.equipDes = null;\n        this.unlockbtn = null;\n        this.costNum = null;\n        this.diamondIcon = null;\n        this.curEquipItem = null;\n    }\n    setBgTexture(isblue) {\n        const topName = !isblue ? \"topbg\" : \"topbg1\";\n        const bottombg = !isblue ? \"bottombg\" : \"bottombg1\";\n        const fontColor = !isblue ? \"#8F4300\" : \"#0867AE\";\n        this.topbg.setTexture(this.key, topName);\n        this.bottombg.setTexture(this.key, bottombg);\n        this.titleName.setColor(fontColor).setStroke(fontColor, 1);\n        this.equipName.setColor(fontColor).setStroke(fontColor, 1);\n        this.penetrationText.setColor(fontColor).setStroke(fontColor, 1);\n    }\n    create() {\n        this.bg = this.mScene.make.image({ x: 0, y: -21 * this.dpr, key: this.key, frame: \"bg1\" });\n        this.topbg = this.mScene.make.image({ x: 0, y: -61 * this.dpr, key: this.key, frame: \"topbg\" });\n        this.titleName = this.mScene.make.text({ x: 0, y: this.topbg.y + 0 * this.dpr, text: \"\", style: { blod: true, color: \"#8F4300\", fontSize: 14 * this.dpr, font: this.getBoldFont(14 * this.dpr) } }).setOrigin(0.5, 0.5);\n        this.bottombg = this.mScene.make.image({ x: 0, y: 42 * this.dpr, key: this.key, frame: \"bottombg\" });\n        this.equipName = this.mScene.make.text({ x: -120 * this.dpr, y: 15 * this.dpr, text: \"\", style: { color: \"#8F4300\", fontSize: 14 * this.dpr, font: this.getBoldFont(14 * this.dpr) } });\n        this.penetrationText = this.mScene.make.text({ x: -60 * this.dpr, y: 16 * this.dpr, text: \":10\", style: { color: \"#8F4300\", fontSize: 12 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } });\n        this.equipDes = this.mScene.make.text({ x: -120 * this.dpr, y: 35 * this.dpr, text: \"\", style: { color: \"#000000\", fontSize: 10 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT, wordWrap: { width: 130 * this.dpr, useAdvancedWrap: true } } });\n        this.equipDes.setStroke(\"#000000\", 1);\n        this.mContainer.add([this.bg, this.topbg, this.bottombg, this.titleName, this.equipName, this.penetrationText, this.equipDes]);\n        this.createGridTable();\n        this.createBtn();\n    }\n    createGridTable() {\n        // this.mScrollContainer = this.mScene.make.container(undefined, false);\n        // this.mScrollContainer.setPosition(0, 0);\n        const propFrame = this.mScene.textures.getFrame(this.key, \"equipbg\");\n        const capW = (propFrame.width + 10 * this.dpr * this.zoom);\n        const capH = (propFrame.height + 30 * this.dpr * this.zoom);\n        this.cellWidth = capW;\n        this.cellHeight = capH;\n        const config = {\n            scrollMode: 1,\n            // background: (<any>this.mScene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFFFFF, .5),\n            table: {\n                width: 259 * this.dpr * this.zoom,\n                height: 77 * this.dpr * this.zoom,\n                columns: 1,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0\n            },\n            clamplChildOY: false,\n            createCellContainerCallback: (cell, cellContainer) => {\n                const scene = cell.scene, item = cell.item;\n                const index = cell.index;\n                if (cellContainer === null) {\n                    cellContainer = new EquipItemCell(scene, this.dpr, this.key, this.zoom);\n                    cellContainer.setSize(capW, capH);\n                    this.mContainer.add(cellContainer);\n                    cellContainer.setChildPosition();\n                }\n                cellContainer.setData({ item });\n                cellContainer.setItemData(item, index);\n                if (this.curEquipItem == null) {\n                    if (this.haveEquiped) {\n                        if (item.selected)\n                            this.onSelectItemHandler(cellContainer);\n                    }\n                    else {\n                        this.onSelectItemHandler(cellContainer);\n                    }\n                }\n                // Logger.getInstance().log(item);\n                return cellContainer;\n            }\n        };\n        this.gridTable = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"GameGridTable\"](this.mScene, config);\n        this.gridTable.layout();\n        this.gridTable.on(\"cellTap\", (cell) => {\n            this.onSelectItemHandler(cell);\n        });\n        this.mContainer.add(this.gridTable.table);\n    }\n    onSelectItemHandler(cell) {\n        // Logger.getInstance().log(cell.itemData);\n        if (this.curEquipItem)\n            this.curEquipItem.setSelect(false);\n        const data = cell.itemData;\n        this.updateEquipItem(cell);\n        this.curEquipItem = cell;\n        if (data.owned && !data.selected)\n            this.emit(\"reqEquiped\", data.id);\n    }\n    updateEquipItem(cell) {\n        const data = cell.itemData;\n        this.penetrationText.text = data.buffDisplayNames[0];\n        this.equipDes.text = data.description;\n        this.equipName.text = data.name;\n        this.costNum.text = data.price + \"\";\n        if (data.owned)\n            this.unlockbtn.visible = false;\n        else\n            this.unlockbtn.visible = true;\n        if (data.qualified) {\n            this.unlockCondition.visible = false;\n            this.unlockbtn.setInteractive();\n        }\n        else if (!data.owned) {\n            this.unlockCondition.visible = true;\n            this.unlockCondition.text = data.conditionDisplayNames[0];\n            this.unlockbtn.disableInteractive();\n        }\n        if (data.price == null) {\n            this.costNum.visible = false;\n            this.diamondIcon.visible = false;\n            this.btnName.setPosition(0, 0 * this.dpr);\n        }\n        else {\n            this.costNum.visible = true;\n            this.diamondIcon.visible = true;\n            this.btnName.setPosition(0, 6 * this.dpr);\n        }\n        cell.setSelect(true);\n    }\n    onUnlockEquipHandler() {\n        this.emit(\"reqActive\", this.curEquipItem.itemData.id);\n    }\n    createBtn() {\n        this.unlockCondition = this.mScene.make.text({ x: 0, y: -26 * this.dpr, text: \"\", style: { color: \"#000000\", fontSize: 10 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0.5, 0.5);\n        this.unlockbtn = this.mScene.make.container(undefined, false);\n        const btnBg = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NinePatch\"](this.mScene, 0, 0, 88 * this.dpr * this.zoom, 31 * this.dpr * this.zoom, this.commonKey, \"yellow_btn_normal\", undefined, undefined, {\n            left: 12 * this.dpr * this.zoom,\n            top: 12 * this.dpr * this.zoom,\n            right: 12 * this.dpr * this.zoom,\n            bottom: 12 * this.dpr * this.zoom\n        });\n        this.diamondIcon = this.mScene.make.image({ x: -15 * this.dpr, y: -8 * this.dpr, key: this.commonKey, frame: \"test_diamond\" });\n        this.costNum = this.mScene.make.text({ x: 0, y: -8 * this.dpr, text: \"1000\", style: { color: \"#ffffff\", fontSize: 10 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        this.btnName = this.mScene.make.text({ x: 0, y: 6 * this.dpr, text: \"\", style: { color: \"#8F4300\", fontSize: 13 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0.5, 0.5);\n        this.costNum.setStroke(\"#ffffff\", 1);\n        this.btnName.setStroke(\"#8F4300\", 1);\n        this.unlockCondition.setStroke(\"#000000\", 1);\n        this.unlockbtn.setPosition(70 * this.dpr, 48 * this.dpr);\n        this.unlockbtn.setSize(btnBg.width, btnBg.height);\n        this.unlockbtn.add([this.unlockCondition, btnBg, this.diamondIcon, this.costNum, this.btnName]);\n        this.unlockbtn.on(\"pointerup\", this.onUnlockEquipHandler, this);\n        this.mContainer.add(this.unlockbtn);\n    }\n    getBoldFont(size) {\n        const font = `bold ${size}px Source Han Sans`;\n        return font;\n    }\n}\nclass EquipItemCell extends Phaser.GameObjects.Container {\n    constructor(scene, dpr, key, zoom) {\n        super(scene);\n        this.index = 0;\n        this.isSelect = false;\n        this.isUnlock = false;\n        this.dpr = dpr;\n        this.key = key;\n        this.zoom = zoom;\n        this.create();\n    }\n    setItemData(data, index) {\n        this.itemData = data;\n        this.index = index;\n        const url = game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(data.display.texturePath);\n        this.equipIcon.load(url, this, () => {\n            this.equipIcon.scale = this.dpr * this.zoom;\n            // const x = this.equipIcon.width * 0.5 + 18 * this.dpr * this.zoom;\n            // const y = this.equipIcon.height * 0.5 + 15 * this.dpr * this.zoom;\n            // this.equipIcon.setPosition(x, y);\n        });\n        this.setEquiped(data.selected, data.owned);\n        this.setSelect(this.isSelect);\n    }\n    setSelect(isSelect) {\n        this.isSelect = isSelect;\n        let bgName = \"equipbg\";\n        if (!isSelect) {\n            if (this.isUnlock)\n                bgName = \"equipbg2\";\n            else\n                bgName = \"equipbg1\";\n        }\n        if (this.itemData.selected)\n            bgName = \"equipbg2\";\n        this.bg.setTexture(this.key, bgName);\n    }\n    setChildPosition() {\n        let x = this.bg.width * 0.5 + 10 * this.dpr * this.zoom;\n        let y = this.height - 10 * this.dpr * this.zoom;\n        this.bg.setPosition(x, y);\n        x = x + 1 * this.dpr * this.zoom;\n        y = this.height * 0.5 + 2 * this.dpr * this.zoom;\n        this.equipIcon.setPosition(x, y);\n        x = x + 22 * this.dpr * this.zoom;\n        y = 8 * this.dpr * this.zoom;\n        this.unlock.setPosition(x, y);\n    }\n    setEquiped(isequiped, unlock) {\n        this.isUnlock = unlock;\n        this.unlock.visible = false;\n        if (isequiped) {\n            this.isUnlock = true;\n            this.unlock.visible = true;\n            this.unlock.setTexture(this.key, \"ok\");\n        }\n        else if (!this.isUnlock) {\n            this.unlock.visible = true;\n            this.unlock.setTexture(this.key, \"lock\");\n        }\n    }\n    create() {\n        this.bg = this.scene.make.image({ x: 0, y: -10 * this.dpr * this.zoom, key: this.key, frame: \"equipbg\" });\n        this.equipIcon = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](this.scene, 15 * this.dpr * this.zoom, 0 * this.dpr * this.zoom);\n        this.unlock = this.scene.make.image({ x: 30 * this.dpr * this.zoom, y: -10 * this.dpr * this.zoom, key: this.key, frame: \"lock\" });\n        this.add([this.bg, this.equipIcon, this.unlock]);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/EquipUpgrade/EquipUpgradeItem.ts?");

/***/ }),

/***/ "./src/ui/EquipUpgrade/EquipUpgradeMediator.ts":
/*!*****************************************************!*\
  !*** ./src/ui/EquipUpgrade/EquipUpgradeMediator.ts ***!
  \*****************************************************/
/*! exports provided: EquipUpgradeMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EquipUpgradeMediator\", function() { return EquipUpgradeMediator; });\n/* harmony import */ var _EquipUpgradePanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EquipUpgradePanel */ \"./src/ui/EquipUpgrade/EquipUpgradePanel.ts\");\n/* harmony import */ var _EquipUpgrade__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EquipUpgrade */ \"./src/ui/EquipUpgrade/EquipUpgrade.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nclass EquipUpgradeMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"BaseMediator\"] {\n    constructor(layerMgr, scene, worldService) {\n        super();\n        this.scene = scene;\n        this.layerMgr = layerMgr;\n        this.world = worldService;\n    }\n    show() {\n        if ((this.mView && this.mView.isShow()) || this.mShow) {\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _EquipUpgradePanel__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.scene, this.world);\n            this.mView.on(\"hide\", this.onHidePanel, this);\n            this.mView.on(\"reqActive\", this.onReqActiveEquipment, this);\n            this.mView.on(\"reqEquiped\", this.onReqEquipedEquipment, this);\n        }\n        if (!this.equipUpgrade) {\n            this.equipUpgrade = new _EquipUpgrade__WEBPACK_IMPORTED_MODULE_1__[\"EquipUpgrade\"](this.world);\n            this.equipUpgrade.on(\"activeEquip\", this.onActiveEquipment, this);\n            this.equipUpgrade.register();\n        }\n        this.layerMgr.addToUILayer(this.mView);\n        if (this.mParam && this.mParam.length > 0)\n            this.onEquipUpgradePacket(this.mParam[0]);\n        this.mView.show();\n    }\n    isSceneUI() {\n        return true;\n    }\n    destroy() {\n        if (this.equipUpgrade) {\n            this.equipUpgrade.destroy();\n            this.equipUpgrade = undefined;\n        }\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = undefined;\n        }\n    }\n    onHidePanel() {\n        this.destroy();\n    }\n    onEquipUpgradePacket(content) {\n        const panel = this.mView;\n        if (!panel)\n            return;\n        panel.setData(\"upgradeData\", content);\n        panel.setEquipDatas(content);\n    }\n    onActiveEquipment(data) {\n        if (this.mView) {\n            const panel = this.mView;\n            panel.setActiveEquipment(data);\n        }\n    }\n    onReqEquipedEquipment(id) {\n        if (this.equipUpgrade)\n            this.equipUpgrade.reqEquipedEquipment(id);\n    }\n    onReqActiveEquipment(id) {\n        if (this.equipUpgrade)\n            this.equipUpgrade.reqActiveEquipment(id);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/EquipUpgrade/EquipUpgradeMediator.ts?");

/***/ }),

/***/ "./src/ui/EquipUpgrade/EquipUpgradePanel.ts":
/*!**************************************************!*\
  !*** ./src/ui/EquipUpgrade/EquipUpgradePanel.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EquipUpgradePanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _EquipUpgradeItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EquipUpgradeItem */ \"./src/ui/EquipUpgrade/EquipUpgradeItem.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n\nclass EquipUpgradePanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"equip_upgrade\";\n        this.commonkey = \"common_key\";\n        this.equipItems = [];\n        this.scale = 1;\n    }\n    resize(width, height) {\n        const w = this.scene.cameras.main.width / this.scale;\n        const h = this.scene.cameras.main.height / this.scale;\n        super.resize(width, height);\n        this.setSize(w, h);\n        this.bg.x = w / 2; // - 24 * this.dpr * this.scale;\n        this.bg.y = h / 2; // - 20 * this.dpr * this.scale;\n        this.tilteName.x = this.bg.x;\n        this.tilteName.y = this.bg.y - this.bg.height / 2;\n        this.titlebg.x = this.bg.x;\n        this.titlebg.y = this.bg.y - this.bg.height / 2;\n        this.closeBtn.x = this.bg.x + this.bg.width / 2 - 10 * this.dpr * this.scale; // + this.bg.width / 2 - this.dpr * 8;\n        this.closeBtn.y = this.bg.y - this.bg.height / 2 + 10 * this.dpr * this.scale; // + posY + this.dpr * 8;\n        this.blackBg.clear();\n        this.blackBg.fillStyle(0, 0.5);\n        this.blackBg.fillRoundedRect(-this.x, -this.y, w, h);\n        this.add([this.blackBg, this.bg, this.closeBtn, this.titlebg, this.tilteName]);\n    }\n    show(param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.refreshData();\n        this.addListen();\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on(\"pointerup\", this.OnClosePanel, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off(\"pointerup\", this.OnClosePanel, this);\n    }\n    preload() {\n        this.addAtlas(this.key, \"equip_upgrade/mine_eqpm.png\", \"equip_upgrade/mine_eqpm.json\");\n        this.addAtlas(this.commonkey, \"common/ui_base.png\", \"common/ui_base.json\");\n        super.preload();\n    }\n    init() {\n        const w = this.scene.cameras.main.width / this.scale;\n        const h = this.scene.cameras.main.height / this.scale;\n        this.setSize(w, h);\n        this.blackBg = this.scene.make.graphics(undefined, false);\n        this.blackBg.clear();\n        this.blackBg.fillStyle(0, 0.5);\n        this.blackBg.fillRoundedRect(0, 0, w, h);\n        this.blackBg.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height), Phaser.Geom.Rectangle.Contains);\n        this.bg = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NinePatch\"](this.scene, 0, 0, 300 * this.dpr, 300 * this.dpr, this.commonkey, \"bg\", undefined, undefined, {\n            left: 40,\n            top: 40,\n            bottom: 40,\n            right: 40,\n        });\n        const posY = -this.bg.height * 0.5;\n        this.titlebg = this.scene.make.image({ x: 0, y: posY, key: this.key, frame: \"titlebg\" });\n        const mfont = `bold ${15 * this.dpr}px Source Han Sans`;\n        this.tilteName = this.scene.make.text({ x: 0, y: posY, text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"equipupgrade.title\"), style: { font: mfont, color: \"#8F4300\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0.5, 0);\n        this.closeBtn = this.scene.make.image({ x: this.bg.width * 0.5 - this.dpr * 5, y: posY + this.dpr * 5, key: this.commonkey, frame: \"close\" });\n        this.tilteName.setStroke(\"#8F4300\", 1);\n        this.closeBtn.setInteractive();\n        this.add([this.blackBg, this.bg, this.closeBtn, this.titlebg, this.tilteName]);\n        this.resize(this.scene.cameras.main.width, this.scene.cameras.main.height);\n        super.init();\n    }\n    setEquipDatas(content) {\n        this.content = content;\n        if (!this.mInitialized)\n            return;\n        const w = this.scene.cameras.main.width / this.scale;\n        const h = this.scene.cameras.main.height / this.scale;\n        const arr = content.mineEquipments; // this.getEuipDatas();// [content.minePicks, content.minePicks];\n        const height = 175 * this.dpr;\n        const bgHeight = height * arr.length - (arr.length >= 2 ? 40 * (arr.length - 2) : 0);\n        const cellHeight = 155 * this.dpr;\n        this.resetPosition(this.bg.width, bgHeight);\n        let posY = -bgHeight * 0.5 + 100 * this.dpr;\n        let index = 0;\n        for (const value of arr) {\n            value[\"isblue\"] = (index % 2 === 0 ? false : true);\n            const item = new _EquipUpgradeItem__WEBPACK_IMPORTED_MODULE_1__[\"EquipUpgradeItem\"](this.scene, this, this.dpr, this.scale, this.key, this.commonkey);\n            item.on(\"reqActive\", this.onReqActiveEquipment, this);\n            item.on(\"reqEquiped\", this.onReqEquipedEquipment, this);\n            item.setEquipItems(value);\n            item.setTransPosition(w / 2, posY + h / 2);\n            this.equipItems.push(item);\n            posY += cellHeight;\n            index++;\n        }\n        this.resize(w, h);\n    }\n    setActiveEquipment(equip) {\n        let index = 0;\n        for (const value of this.content.mineEquipments) {\n            const item = this.equipItems[index];\n            let activeIndex = -1;\n            // tslint:disable-next-line: prefer-for-of\n            for (let i = 0; i < value.mineEquipments.length; i++) {\n                const data = value.mineEquipments[i];\n                if (data.id === equip.id) {\n                    value.mineEquipments[i] = equip;\n                    item.refreshEquipData(equip, i);\n                    activeIndex = i;\n                }\n                else {\n                    if (data.selected)\n                        data.selected = false;\n                }\n            }\n            if (activeIndex >= 0) {\n                item.refreshEquipData(equip, activeIndex);\n            }\n            index++;\n        }\n    }\n    destroy() {\n        if (this.equipItems) {\n            for (const item of this.equipItems) {\n                item.destroy();\n            }\n            this.equipItems.length = 0;\n        }\n        this.equipItems = null;\n        this.content = null;\n        super.destroy();\n    }\n    getEuipDatas() {\n        const arr = [];\n        for (let i = 0; i < 3; i++) {\n            const obj = {};\n            obj[\"name\"] = i === 0 ? \"\" : \"\";\n            obj[\"items\"] = [];\n            obj[\"isblue\"] = !(i % 2 === 0);\n            for (let j = 0; j < 15; j++) {\n                const item = {};\n                item[\"name\"] = \"\" + j;\n                item[\"penetration\"] = 10 + j;\n                item[\"des\"] = \"describle\";\n                item[\"cost\"] = 100 * j;\n                item[\"unlock\"] = false;\n                obj[\"items\"].push(item);\n            }\n            arr.push(obj);\n        }\n        return arr;\n    }\n    refreshData() {\n        const upgradeData = this.getData(\"upgradeData\");\n        if (upgradeData)\n            this.setEquipDatas(upgradeData);\n    }\n    resetPosition(width, height) {\n        this.bg.resize(width, height);\n        const posY = -height * 0.5;\n        this.titlebg.setPosition(0, posY);\n        this.tilteName.setPosition(0, posY);\n        this.closeBtn.setPosition(width * 0.5 - this.dpr * 8, posY + this.dpr * 8);\n    }\n    OnClosePanel() {\n        this.emit(\"hide\");\n    }\n    onReqActiveEquipment(id) {\n        this.emit(\"reqActive\", id);\n    }\n    onReqEquipedEquipment(id) {\n        this.emit(\"reqEquiped\", id);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/EquipUpgrade/EquipUpgradePanel.ts?");

/***/ }),

/***/ "./src/ui/EquipUpgrade/index.ts":
/*!**************************************!*\
  !*** ./src/ui/EquipUpgrade/index.ts ***!
  \**************************************/
/*! exports provided: EquipUpgrade, EquipUpgradeItem, EquipUpgradeMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _EquipUpgrade__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EquipUpgrade */ \"./src/ui/EquipUpgrade/EquipUpgrade.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"EquipUpgrade\", function() { return _EquipUpgrade__WEBPACK_IMPORTED_MODULE_0__[\"EquipUpgrade\"]; });\n\n/* harmony import */ var _EquipUpgradeItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EquipUpgradeItem */ \"./src/ui/EquipUpgrade/EquipUpgradeItem.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"EquipUpgradeItem\", function() { return _EquipUpgradeItem__WEBPACK_IMPORTED_MODULE_1__[\"EquipUpgradeItem\"]; });\n\n/* harmony import */ var _EquipUpgradeMediator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EquipUpgradeMediator */ \"./src/ui/EquipUpgrade/EquipUpgradeMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"EquipUpgradeMediator\", function() { return _EquipUpgradeMediator__WEBPACK_IMPORTED_MODULE_2__[\"EquipUpgradeMediator\"]; });\n\n/* harmony import */ var _EquipUpgradePanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EquipUpgradePanel */ \"./src/ui/EquipUpgrade/EquipUpgradePanel.ts\");\n/* empty/unused harmony star reexport */\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/EquipUpgrade/index.ts?");

/***/ }),

/***/ "./src/ui/FurniBag/FurniBag.ts":
/*!*************************************!*\
  !*** ./src/ui/FurniBag/FurniBag.ts ***!
  \*************************************/
/*! exports provided: FurniBag */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FurniBag\", function() { return FurniBag; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass FurniBag extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor($world, sceneType) {\n        super();\n        this.world = $world;\n        this.mSceneType = sceneType;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_EDIT_MODE_GET_PACKAGE_CATEGORIES, this.onPackageCategoriesHandler);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE, this.onQueryMarketPackage);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE_ITEM_RESOURCE, this.onQueryCommodityResultHandler);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_EDIT_MODE_QUERY_EDIT_PACKAGE, this.onQueryEditPackage);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_PKT_RESET_AVATAR, this.onQueryResetAvatar);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_PKT_CURRENT_DRESS_AVATAR_ITEM_ID, this.onRetDressAvatarItemIDS);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    getCategories(categoryType) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_EDIT_MODE_GET_PACKAGE_CATEGORIES);\n        const content = packet.content;\n        content.category = categoryType;\n        this.connection.send(packet);\n        this.categoryType = categoryType;\n    }\n    queryPackage(key, queryString) {\n        if (this.mSceneType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_def\"].SceneTypeEnum.NORMAL_SCENE_TYPE) {\n            this.queryMarketPackage(key, queryString);\n        }\n        else {\n            this.queryEditPackage(key, queryString);\n        }\n    }\n    queryCommodityResource(id) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_MARKET_QUERY_PACKAGE_ITEM_RESOURCE);\n        const content = packet.content;\n        content.id = id;\n        this.connection.send(packet);\n    }\n    addFurniToScene(id) {\n        if (this.mSceneType !== pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_def\"].SceneTypeEnum.EDIT_SCENE_TYPE) {\n            return;\n        }\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_EDIT_MODE_SELECTED_SPRITE);\n        const content = packet.content;\n        content.id = id;\n        this.connection.send(packet);\n    }\n    enterEditAndSelectedSprite(id) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_EDIT_MODE_ENABLE_AND_SELECTED_SPRITE);\n        const content = packet.content;\n        content.id = id;\n        this.connection.send(packet);\n    }\n    seachPackage(seach, category) {\n        this.queryPackage(category, seach);\n    }\n    sellProps(prop, count, category) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_MARKET_SELL_PACKAGE_ITEM);\n        const content = packet.content;\n        content.category = category;\n        const item = pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].CountablePackageItem.create(prop);\n        item.count = count;\n        content.items = [item];\n        content.totalPrice = item.sellingPrice;\n        content.totalPrice.price *= count;\n        this.connection.send(packet);\n    }\n    querySaveAvatar(avatarids) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_PKT_DRESS_UP_AVATAR);\n        const content = packet.content;\n        content.avatarItemIds = avatarids;\n        this.connection.send(packet);\n    }\n    queryResetAvatar(avatar) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_PKT_RESET_AVATAR);\n        this.connection.send(packet);\n    }\n    queryDressAvatarItemIDs() {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_PKT_CURRENT_DRESS_AVATAR_ITEM_ID);\n        this.connection.send(packet);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    onPackageCategoriesHandler(packet) {\n        const content = packet.content;\n        if (content.category === this.categoryType) {\n            this.mEvent.emit(\"packageCategory\", content.subcategory);\n        }\n    }\n    onQueryMarketPackage(packge) {\n        // OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE\n        const content = packge.content;\n        if (content.category === this.categoryType) {\n            this.mEvent.emit(\"queryPackage\", content);\n        }\n    }\n    onQueryEditPackage(packet) {\n        const content = packet.content;\n        if (content.category === this.categoryType) {\n            this.mEvent.emit(\"queryPackage\", content);\n        }\n    }\n    onQueryCommodityResultHandler(packet) {\n        this.mEvent.emit(\"queryCommodityResource\", packet.content);\n    }\n    onQueryResetAvatar(packet) {\n        const content = packet.content;\n        this.mEvent.emit(\"queryResetAvatar\", content);\n    }\n    queryMarketPackage(key, queryString) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_MARKET_QUERY_PACKAGE);\n        const content = packet.content;\n        content.category = this.categoryType;\n        content.page = 1;\n        content.perPage = 30;\n        content.subcategory = key;\n        content.queryString = queryString;\n        this.connection.send(packet);\n    }\n    queryEditPackage(key, queryString) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_EDIT_MODE_QUERY_EDIT_PACKAGE);\n        const content = packet.content;\n        content.category = this.categoryType;\n        content.page = 1;\n        content.perPage = 30;\n        content.subcategory = key;\n        content.queryString = queryString;\n        this.connection.send(packet);\n    }\n    onRetDressAvatarItemIDS(packet) {\n        const content = packet.content;\n        this.mEvent.emit(\"avatarIDs\", content.avatarItemIds);\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/FurniBag/FurniBag.ts?");

/***/ }),

/***/ "./src/ui/FurniBag/FurniBagMediator.ts":
/*!*********************************************!*\
  !*** ./src/ui/FurniBag/FurniBagMediator.ts ***!
  \*********************************************/
/*! exports provided: FurniBagMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FurniBagMediator\", function() { return FurniBagMediator; });\n/* harmony import */ var _FurniBagPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FurniBagPanel */ \"./src/ui/FurniBag/FurniBagPanel.ts\");\n/* harmony import */ var _FurniBag__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FurniBag */ \"./src/ui/FurniBag/FurniBag.ts\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nclass FurniBagMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"BaseMediator\"] {\n    constructor(layerManager, scene, worldService) {\n        super();\n        this.layerManager = layerManager;\n        this.world = worldService;\n        this.scene = this.layerManager.scene;\n        if (this.world && this.world.roomManager && this.world.roomManager.currentRoom) {\n            this.mScneType = this.world.roomManager.currentRoom.sceneType;\n        }\n        else {\n            this.mScneType = pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].SceneTypeEnum.NORMAL_SCENE_TYPE;\n        }\n    }\n    show() {\n        if ((this.mView && this.mView.isShow()) || this.mShow) {\n            this.layerManager.addToUILayer(this.mView);\n            return;\n        }\n        if (!this.mFurniBag) {\n            this.mFurniBag = new _FurniBag__WEBPACK_IMPORTED_MODULE_1__[\"FurniBag\"](this.world, this.mScneType);\n            this.mFurniBag.register();\n            this.mFurniBag.on(\"packageCategory\", this.onPackageCategoryHandler, this);\n            this.mFurniBag.on(\"queryPackage\", this.onQueryPackageHandler, this);\n            this.mFurniBag.on(\"queryCommodityResource\", this.onQueryCommodityResourceHandler, this);\n            this.mFurniBag.on(\"queryResetAvatar\", this.onResetAvatar, this);\n            this.mFurniBag.on(\"avatarIDs\", this.onDressAvatarIDS, this);\n        }\n        if (!this.mView) {\n            this.mView = new _FurniBagPanel__WEBPACK_IMPORTED_MODULE_0__[\"FurniBagPanel\"](this.scene, this.world, this.mScneType);\n            this.mView.on(\"getCategories\", this.onGetCategoriesHandler, this);\n            this.mView.on(\"queryPackage\", this.onQueryPackage, this);\n            this.mView.on(\"close\", this.onCloseHandler, this);\n            this.mView.on(\"queryPropResource\", this.onQueryPropResourceHandler, this);\n            this.mView.on(\"seachPackage\", this.onSeachPackageHandler, this);\n            this.mView.on(\"addFurniToScene\", this.onAddFurniHandler, this);\n            this.mView.on(\"sellProps\", this.onSellPropsHandler, this);\n            this.mView.on(\"querySaveAvatar\", this.onQuerySaveAvatar, this);\n            this.mView.on(\"queryResetAvatar\", this.onQueryResetAvatar, this);\n            this.mView.on(\"queryDressAvatarIDS\", this.queryDressAvatarIDS, this);\n        }\n        this.mView.show();\n        this.layerManager.addToUILayer(this.mView);\n    }\n    destroy() {\n        if (this.mFurniBag) {\n            this.mFurniBag.destroy();\n            this.mFurniBag = undefined;\n        }\n        if (this.mView) {\n            this.mView.destroy();\n            this.mView = undefined;\n        }\n        super.destroy();\n    }\n    onCloseHandler() {\n        // if (this.mView) {\n        //     this.layerManager.removeToUILayer(this.mView);\n        // }\n        this.destroy();\n    }\n    onPackageCategoryHandler(subcategory) {\n        if (!this.mView) {\n            return;\n        }\n        this.mView.setCategories(subcategory);\n    }\n    onQueryCommodityResourceHandler(content) {\n        this.mView.setSelectedResource(content);\n    }\n    onGetCategoriesHandler(categoryType) {\n        if (this.mFurniBag) {\n            this.mFurniBag.getCategories(categoryType);\n        }\n    }\n    onQueryPackageHandler(content) {\n        this.mView.setProp(content.items);\n    }\n    onQueryPackage(key) {\n        this.mFurniBag.queryPackage(key);\n    }\n    onQueryPropResourceHandler(prop) {\n        this.mFurniBag.queryCommodityResource(prop.id);\n    }\n    onQuerySaveAvatar(avatarids) {\n        this.mFurniBag.querySaveAvatar(avatarids);\n    }\n    onQueryResetAvatar(avatar) {\n        this.mFurniBag.queryResetAvatar(avatar);\n    }\n    onSeachPackageHandler(query, categories) {\n        this.mFurniBag.seachPackage(query, categories);\n    }\n    onAddFurniHandler(id) {\n        if (this.mView.enableEdit) {\n            this.mFurniBag.enterEditAndSelectedSprite(id);\n        }\n        else {\n            this.mFurniBag.addFurniToScene(id);\n        }\n        this.destroy();\n    }\n    onSellPropsHandler(prop, count, category) {\n        this.mFurniBag.sellProps(prop, count, category);\n    }\n    onResetAvatar(content) {\n        this.mView.resetAvatar(content);\n    }\n    onDressAvatarIDS(ids) {\n        this.mView.setDressAvatarIds(ids);\n    }\n    queryDressAvatarIDS() {\n        this.mFurniBag.queryDressAvatarItemIDs();\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/FurniBag/FurniBagMediator.ts?");

/***/ }),

/***/ "./src/ui/FurniBag/FurniBagPanel.ts":
/*!******************************************!*\
  !*** ./src/ui/FurniBag/FurniBagPanel.ts ***!
  \******************************************/
/*! exports provided: FurniBagPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FurniBagPanel\", function() { return FurniBagPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Market_DetailDisplay__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Market/DetailDisplay */ \"./src/ui/Market/DetailDisplay.ts\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\n\n\n\n\n\n\nclass FurniBagPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world, sceneType) {\n        super(scene, world);\n        this.key = \"furni_bag\";\n        this.commonkey = \"common_key\";\n        this.seachKey = \"key.seach\";\n        this.topBtns = [];\n        this.mEnableEdit = false;\n        this.mInputBoo = false;\n        this.mSelectedItemData = [];\n        this.mSceneType = sceneType;\n        this.scale = 1;\n        this.setInteractive();\n    }\n    resize(w, h) {\n        const width = this.scaleWidth;\n        const height = this.scaleHeight;\n        super.resize(width, height);\n        const zoom = this.mWorld.uiScale;\n        this.mBackground.clear();\n        this.mBackground.fillGradientStyle(0x6f75ff, 0x6f75ff, 0x04cbff, 0x04cbff);\n        this.mBackground.fillRect(0, 0, width * zoom, height * zoom);\n        this.mShelfContainer.setSize(width, 295 * this.dpr * zoom);\n        this.mShelfContainer.y = height - this.mShelfContainer.height;\n        this.mDetailBubble.y = this.mShelfContainer.y - 10 * this.dpr * zoom - this.mDetailBubble.height;\n        this.mCategoriesBar.clear();\n        this.mCategoriesBar.fillStyle(0x33ccff);\n        this.mCategoriesBar.fillRect(0, 0, width, 40 * this.dpr * zoom);\n        this.mCategoriesBar.fillStyle(0x00cccc);\n        this.mCategoriesBar.fillRect(0, 40 * this.dpr * zoom, width, 3 * this.dpr * zoom);\n        this.mBg.x = width / 2;\n        this.mBg.y = this.mBg.height / 2 + 10 * this.dpr * zoom;\n        //  this.mTiltle.x = width / 2;\n        // this.mCategoryScroll.resize(width, 41 * this.dpr * zoom);\n        this.mAdd.x = width - this.mAdd.width / 2 - 10 * this.dpr;\n        this.mAdd.y = this.mShelfContainer.y - this.mAdd.height / 2 - 9 * this.dpr * zoom;\n        this.useBtn.x = this.mAdd.x;\n        this.useBtn.y = this.mAdd.y;\n        this.sellBtn.x = this.mAdd.x - this.sellBtn.width - 10 * this.dpr;\n        this.sellBtn.y = this.mAdd.y;\n        this.resetBtn.x = this.mAdd.x + 25 * this.dpr;\n        this.resetBtn.y = this.mAdd.y;\n        this.saveBtn.x = this.resetBtn.x - (this.saveBtn.width + this.resetBtn.width) / 2 - 10 * this.dpr;\n        this.saveBtn.y = this.resetBtn.y;\n        this.mDetailDisplay.x = width / 2;\n        this.mDetailDisplay.y = this.mBg.y;\n        this.mPropGrid.refreshPos(this.mShelfContainer.width / 2, this.mShelfContainer.y + 170 * this.dpr * zoom, 8 * this.dpr * zoom, 3 * this.dpr * zoom);\n        // this.mPropGrid.y = this.mShelfContainer.y + 43 * this.dpr * zoom + 120 * this.dpr * zoom;\n        this.setSize(width, height);\n    }\n    setCategories(subcategorys) {\n        // subcategorys.unshift({ key: this.seachKey, value: \"\" });\n        this.mPreCategoryBtn = null;\n        this.mSelectedCategeories = null;\n        const zoom = this.mWorld.uiScale;\n        const capW = 60 * this.dpr * zoom;\n        const capH = 41 * this.dpr * zoom;\n        const items = [];\n        if (this.mSeachInput.parentContainer)\n            this.closeSeach(null);\n        this.mCategoryScroll.clearItems();\n        const seachBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"Button\"](this.scene, this.key, \"seach_normal\", \"seach_down\");\n        seachBtn.setData(\"item\", { key: this.seachKey, value: \"\" });\n        seachBtn.y = capH - 40 * this.dpr * zoom;\n        this.mCategoryScroll.addItem(seachBtn);\n        for (let i = 0; i < subcategorys.length; i++) {\n            const item = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"TextButton\"](this.scene, this.dpr, zoom, subcategorys[i].value, 0, 0);\n            item.x = i * capW;\n            item.y = capH - item.text.height - 40 * this.dpr * zoom >> 1;\n            item.setData(\"item\", subcategorys[i]);\n            item.setSize(capW, capH);\n            this.mCategoryScroll.addItem(item);\n            items[i] = item;\n            item.setFontSize(17 * this.dpr * zoom);\n            item.setFontStyle(\"bold\");\n        }\n        if (items.length > 1)\n            this.onSelectSubCategoryHandler(items[0]);\n        // this.mSeachInput.x = capW - this.mSeachInput.width / 2;\n        // this.mPropGrid.refreshPos(this.mShelfContainer.width / 2, this.mShelfContainer.y + 170 * this.dpr * zoom, 8 * this.dpr * zoom, 10 * this.dpr * zoom);\n        this.updateCategeoriesLoc(false);\n    }\n    setProp(props) {\n        if (!props) {\n            return;\n        }\n        const len = props.length;\n        if (len < 24) {\n            props = props.concat(new Array(24 - len));\n        }\n        this.mPropGrid.setItems(props);\n        if (this.categoryType !== pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_AVATAR) {\n            this.mSelectedItemData.length = 0;\n            const cell = this.mPropGrid.getCell(0);\n            this.onSelectItemHandler(cell.container);\n        }\n        else {\n            if (this.mSelectedItemData.length === 0) {\n                for (const prop of props) {\n                    if (prop && prop.rightSubscript === pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_pkt_def\"].PKT_Subscript.PKT_SUBSCRIPT_CHECKMARK) {\n                        this.mSelectedItemData.push(prop);\n                    }\n                }\n                this.updateAvatarItems();\n            }\n        }\n    }\n    setDressAvatarIds(ids) {\n        this.dressAvatarIDS = ids;\n        this.updateAvatarItems();\n    }\n    displayAvatar() {\n        const content = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_client\"].OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_PACKAGE_ITEM_RESOURCE();\n        content.avatar = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_gameconfig\"].Avatar();\n        const player = this.mWorld.roomManager.currentRoom.playerManager.actor;\n        const avatar = player.model.avatar;\n        for (const key in avatar) {\n            if (avatar.hasOwnProperty(key)) {\n                const element = avatar[key];\n                if (element)\n                    content.avatar[key] = element;\n            }\n        }\n        const offset = new Phaser.Geom.Point(0, 20 * this.dpr);\n        this.mDetailDisplay.loadAvatar(content, 2, offset);\n    }\n    setSelectedResource(content) {\n        if (content.display) {\n            this.mDetailDisplay.loadDisplay(content);\n        }\n        else if (content.avatar) {\n            const player = this.mWorld.roomManager.currentRoom.playerManager.actor;\n            const avatar = player.model.avatar;\n            for (const key in avatar) {\n                if (avatar.hasOwnProperty(key)) {\n                    const element = avatar[key];\n                    if (element)\n                        content.avatar[key] = element;\n                }\n            }\n            for (const item of this.mSelectedItemData) {\n                const dataAvatar = item.avatar;\n                for (const key in dataAvatar) {\n                    if (dataAvatar.hasOwnProperty(key)) {\n                        const element = dataAvatar[key];\n                        if (element)\n                            content.avatar[key] = element;\n                    }\n                }\n            }\n            const offset = new Phaser.Geom.Point(0, 20 * this.dpr);\n            this.mDetailDisplay.loadAvatar(content, 2, offset);\n        }\n    }\n    resetAvatar(avatar) {\n        const content = new pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_client\"].OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_COMMODITY_RESOURCE();\n        content.avatar = avatar.avatar;\n        const offset = new Phaser.Geom.Point(0, 20 * this.dpr);\n        this.mDetailDisplay.loadAvatar(content, 2, offset);\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.on(\"pointerup\", this.onCloseHandler, this);\n        this.mSeachInput.on(\"seach\", this.onSeachHandler, this);\n        this.mAdd.on(\"pointerup\", this.onAddFurniToSceneHandler, this);\n        this.sellBtn.on(\"pointerup\", this.onSellBtnHandler, this);\n        this.useBtn.on(\"pointerup\", this.onUseBtnHandler, this);\n        this.saveBtn.on(\"pointerup\", this.onSaveBtnHandler, this);\n        this.resetBtn.on(\"pointerup\", this.onResetBtnHandler, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.off(\"pointerup\", this.onCloseHandler, this);\n        this.mSeachInput.off(\"seach\", this.onSeachHandler, this);\n        this.mAdd.off(\"pointerup\", this.onAddFurniToSceneHandler, this);\n        this.sellBtn.off(\"pointerup\", this.onSellBtnHandler, this);\n        this.useBtn.off(\"pointerup\", this.onUseBtnHandler, this);\n        this.saveBtn.on(\"pointerup\", this.onSaveBtnHandler, this);\n        this.resetBtn.on(\"pointerup\", this.onResetBtnHandler, this);\n    }\n    destroy() {\n        if (this.mCategoryScroll) {\n            this.mCategoryScroll.destroy();\n        }\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        if (this.itemPopPanel) {\n            this.itemPopPanel.off(\"itempopclose\", () => {\n                this.mCategoryScroll.addListen();\n            });\n            this.itemPopPanel.destroy();\n        }\n        super.destroy();\n    }\n    preload() {\n        this.addAtlas(this.key, \"furni_bag/furni_bag.png\", \"furni_bag/furni_bag.json\");\n        this.addAtlas(this.commonkey, \"common/ui_base.png\", \"common/ui_base.json\");\n        super.preload();\n    }\n    init() {\n        const width = this.scene.cameras.main.width;\n        const height = this.scene.cameras.main.height;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        const zoom = this.mWorld.uiScale;\n        this.mBg = this.scene.make.image({\n            key: this.key,\n            frame: \"bg\"\n        }, false).setScale(zoom);\n        this.mShelfContainer = this.scene.make.container(undefined, false);\n        this.mShelfContainer.setSize(width, 295 * this.dpr * zoom);\n        this.mShelfContainer.y = height - this.mShelfContainer.height;\n        // this.mPropsContainer = this.scene.make.container(undefined, false);\n        // this.mCategeoriesContainer = this.scene.make.container(undefined, false);\n        // this.mCategeoriesContainer.x = this.mShelfContainer.x;\n        // this.mCategeoriesContainer.y = this.mShelfContainer.y;\n        this.mCategoriesBar = this.scene.make.graphics(undefined, false);\n        this.mBackground.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height), Phaser.Geom.Rectangle.Contains);\n        this.mCloseBtn = this.scene.make.image({\n            key: this.key,\n            frame: \"back_arrow\",\n            x: 21 * this.dpr,\n            y: 30 * this.dpr\n        }).setScale(zoom).setInteractive();\n        const btnwidth = 90 * this.dpr * zoom;\n        const btnHeight = 40 * this.dpr * zoom;\n        const btnPosX = width - btnwidth / 2 - 20 * this.dpr;\n        const btnPosY = this.mShelfContainer.y - 25 * this.dpr * zoom;\n        this.mAdd = this.createNineButton(btnPosX + 100 * this.dpr * zoom, btnPosY, btnwidth, btnHeight, this.commonkey, \"yellow_btn\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"furni_bag.add\"), \"#996600\");\n        this.sellBtn = this.createNineButton(btnPosX, btnPosY, btnwidth, btnHeight, this.commonkey, \"red_btn\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"furni_bag.sold\"), \"#FFFFFF\");\n        this.useBtn = this.createNineButton(btnPosX + 100 * this.dpr * zoom, btnPosY, btnwidth, btnHeight, this.commonkey, \"yellow_btn\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"furni_bag.use\"), \"#996600\");\n        this.saveBtn = this.createNineButton(btnPosX + 100 * this.dpr * zoom, btnPosY, btnwidth, btnHeight, this.commonkey, \"yellow_btn\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"furni_bag.save\"), \"#996600\");\n        this.resetBtn = this.createNineButton(btnPosX + 100 * this.dpr * zoom, btnPosY - btnHeight - 5 * this.dpr * zoom, 40 * this.dpr, 40 * this.dpr, this.commonkey, \"red_btn\");\n        const reseticon = this.scene.make.image({ key: this.key, frame: \"restore\" });\n        this.resetBtn.add(reseticon);\n        this.mDetailDisplay = new _Market_DetailDisplay__WEBPACK_IMPORTED_MODULE_1__[\"DetailDisplay\"](this.scene);\n        this.mDetailDisplay.setTexture(this.key, \"ghost\");\n        this.mDetailDisplay.setNearest();\n        this.mDetailDisplay.y = this.mBg.y + this.mBg.height / 2;\n        this.mDetailDisplay.scale = this.dpr;\n        this.mDetailBubble = new DetailBubble(this.scene, this.key, this.dpr, zoom);\n        this.mDetailBubble.x = 10 * this.dpr;\n        this.mSeachInput = new SeachInput(this.scene, this.mWorld, this.key, this.dpr);\n        // this.mSeachInput.x = this.mSeachInput.width / 2 + 6 * this.dpr;\n        const inputWid = this.mInputBoo ? 260 * this.dpr * zoom : 0;\n        let w = this.scene.cameras.main.width + inputWid;\n        this.mCategoryScroll = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"GameScroller\"](this.scene, {\n            x: w * .5,\n            y: this.mShelfContainer.y + 20 * this.dpr * zoom,\n            width: this.scene.cameras.main.width,\n            height: 41 * this.dpr * zoom,\n            zoom: this.scale,\n            orientation: 1,\n            // valuechangeCallback: (newValue) => {\n            //   this.refreshPos(newValue);\n            // },\n            cellupCallBack: (gameobject) => {\n                this.onSelectSubCategoryHandler(gameobject);\n            }\n        });\n        this.add([this.mBackground, this.mBg, this.mCloseBtn, this.mDetailDisplay, this.mDetailBubble, this.mShelfContainer, this.mCategoryScroll]);\n        this.add([this.sellBtn, this.useBtn, this.mAdd, this.saveBtn, this.resetBtn]);\n        this.mShelfContainer.add(this.mCategoriesBar);\n        // this.mCategeoriesContainer.add([this.mCategoriesBar]);\n        if (this.mWorld && this.mWorld.roomManager && this.mWorld.roomManager.currentRoom) {\n            this.mEnableEdit = this.mWorld.roomManager.currentRoom.enableEdit;\n        }\n        const topCapW = 67 * this.dpr * zoom;\n        const topCapH = 30 * this.dpr * zoom;\n        const topPosY = 30 * this.dpr * zoom;\n        const topStyle = {\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            fontSize: 20 * this.dpr * zoom,\n            color: \"#FFFFFF\"\n        };\n        this.topCheckBox = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"CheckboxGroup\"]();\n        let topCategorys = [pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_ITEM, pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_FURNITURE, pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_AVATAR];\n        let topBtnTexts = [game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"furni_bag.Props\"), game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"furni_bag.furni\"), game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"furni_bag.decorate\")];\n        if (this.mSceneType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].SceneTypeEnum.EDIT_SCENE_TYPE) {\n            topCategorys = [pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_FURNITURE];\n            topBtnTexts = [game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"furni_bag.furni\")];\n        }\n        const topPosX = width * 0.5 - topCapW * 0.5 * (topCategorys.length - 1);\n        for (const key in topCategorys) {\n            const index = Number(key);\n            const category = topCategorys[index];\n            const button = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"TabButton\"](this.scene, this.key, \"tab_normal\", \"tab_down\", topBtnTexts[index]);\n            button.setTextStyle(topStyle);\n            button.setData(\"data\", category);\n            button.setSize(topCapW, topCapH);\n            button.setFontStyle(\"bold\");\n            button.y = topPosY;\n            button.x = topPosX + topCapW * index;\n            this.topBtns.push(button);\n        }\n        this.topCheckBox.appendItemAll(this.topBtns);\n        this.topCheckBox.on(\"selected\", this.onTopCategoryHandler, this);\n        this.topBtns.forEach((btn) => {\n            this.add(btn);\n        });\n        if (this.mEnableEdit) {\n            const index = topCategorys.indexOf(pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_FURNITURE);\n            this.topCheckBox.selectIndex(index);\n        }\n        else {\n            this.topCheckBox.selectIndex(0);\n        }\n        const propFrame = this.scene.textures.getFrame(this.key, \"prop_bg\");\n        const capW = (propFrame.width + 10 * this.dpr) * zoom;\n        const capH = (propFrame.height + 10 * this.dpr) * zoom;\n        w = this.scene.cameras.main.width + 35 * this.dpr * zoom + inputWid;\n        const tableConfig = {\n            x: 0,\n            y: 0,\n            table: {\n                width: this.scene.cameras.main.width - 16 * this.dpr * zoom,\n                height: 250 * this.dpr * zoom,\n                columns: 4,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0,\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: (cell, cellContainer) => {\n                const scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new Item(scene, 0, 0, this.key, this.dpr, zoom);\n                    this.add(cellContainer);\n                }\n                cellContainer.setData({ item });\n                cellContainer.setProp(item);\n                if (item) {\n                    if (this.isSelectedItemData(item))\n                        cellContainer.isSelect = true;\n                    if (item.rightSubscript === pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_pkt_def\"].PKT_Subscript.PKT_SUBSCRIPT_CHECKMARK) {\n                        cellContainer.isEquip = true;\n                    }\n                    else\n                        cellContainer.isEquip = false;\n                }\n                else {\n                    cellContainer.isSelect = false;\n                    cellContainer.isEquip = false;\n                }\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"GameGridTable\"](this.scene, tableConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on(\"cellTap\", (cell) => {\n            if (cell) {\n                this.onSelectItemHandler(cell);\n            }\n        });\n        this.add(this.mPropGrid.table);\n        this.resize(0, 0);\n        super.init();\n    }\n    createNineButton(x, y, width, height, key, frame, text, color) {\n        const zoom = this.scale;\n        const btn = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"NineSliceButton\"](this.scene, x, y, width, height, key, frame, text, this.dpr, this.scale, {\n            left: 12 * this.dpr * zoom,\n            top: 12 * this.dpr * zoom,\n            right: 12 * this.dpr * zoom,\n            bottom: 12 * this.dpr * zoom\n        });\n        if (text) {\n            btn.setTextStyle({\n                color,\n                fontSize: 16 * this.dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            });\n            btn.setFontStyle(\"bold\");\n        }\n        return btn;\n    }\n    updateAvatarItems() {\n        if (this.dressAvatarIDS && this.mSelectedItemData.length > 0) {\n            this.mSelectedItemData.length = 0;\n            const cells = this.mPropGrid.getCells();\n            for (const id of this.dressAvatarIDS) {\n                for (const cell of cells) {\n                    if (cell) {\n                        const item = cell.container.getData(\"item\");\n                        if (item && id === item.id && item.rightSubscript === pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_pkt_def\"].PKT_Subscript.PKT_SUBSCRIPT_CHECKMARK) {\n                            this.onSelectItemHandler(cell.container);\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            this.mDetailBubble.setProp(null);\n            this.mDetailBubble.y = this.mShelfContainer.y - 10 * this.dpr - this.mDetailBubble.height;\n        }\n    }\n    replaceSelectItem(data) {\n        if (this.categoryType !== pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_AVATAR) {\n            this.mSelectedItemData.length = 0;\n            this.mSelectedItemData.push(data);\n        }\n        else {\n            const dataAvatar = data.avatar;\n            const removeArr = [];\n            for (const item of this.mSelectedItemData) {\n                const avatar = item.avatar;\n                if (this.isContainProperty(avatar, dataAvatar)) {\n                    const index = this.mSelectedItemData.indexOf(item);\n                    removeArr.push(item);\n                }\n            }\n            for (const item of removeArr) {\n                const index = this.mSelectedItemData.indexOf(item);\n                this.mSelectedItemData.splice(index, 1);\n            }\n            this.mSelectedItemData.push(data);\n        }\n    }\n    isContainProperty(obj, obj1) {\n        let canreplace = true;\n        for (const key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                if (!obj1.hasOwnProperty(key)) {\n                    canreplace = false;\n                    break;\n                }\n            }\n        }\n        return canreplace;\n    }\n    isContainObject(obj, obj1) {\n        if (!obj && !obj1)\n            return true;\n        if (typeof obj !== typeof obj1)\n            return false;\n        if (typeof obj === \"object\") {\n            let canreplace = true;\n            for (const key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    if (obj1.hasOwnProperty(key)) {\n                        const value = obj1[key];\n                        if (!this.isContainObject(value, obj[key])) {\n                            canreplace = false;\n                            break;\n                        }\n                    }\n                    else {\n                        canreplace = false;\n                        break;\n                    }\n                }\n            }\n            return canreplace;\n        }\n        else {\n            if (obj === obj1)\n                return true;\n            else\n                return false;\n        }\n    }\n    isSelectedItemData(data) {\n        for (const temp of this.mSelectedItemData) {\n            if (temp.indexId === data.indexId) {\n                return true;\n            }\n        }\n        return false;\n    }\n    setSelectedItem(prop) {\n        this.emit(\"queryPropResource\", prop);\n        this.sellBtn.enable = prop.recyclable;\n        this.useBtn.enable = prop.executable;\n        this.mAdd.enable = (this.mSceneType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].SceneTypeEnum.EDIT_SCENE_TYPE || this.mEnableEdit);\n        if (this.categoryType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_AVATAR) {\n            this.saveBtn.enable = true;\n            this.resetBtn.enable = true;\n        }\n        else {\n            const url = game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(prop.display.texturePath);\n            this.mDetailDisplay.loadUrl(url);\n        }\n    }\n    onSelectSubCategoryHandler(gameobject) {\n        const type = gameobject.getData(\"type\");\n        if (type) {\n            if (type === \"seachBtn\") {\n                this.onSeachHandler(this.mSeachInput.seachText);\n            }\n            else if (type === \"label\") {\n                this.mSeachInput.showInputPanel();\n            }\n            return;\n        }\n        // if (!(gameobject instanceof TextButton)) {\n        //   return;\n        // }\n        const category = gameobject.getData(\"item\");\n        if (category) {\n            if (this.mPreCategoryBtn && (this.mPreCategoryBtn instanceof game_core__WEBPACK_IMPORTED_MODULE_0__[\"TextButton\"])) {\n                this.mPreCategoryBtn.changeNormal();\n            }\n            if (gameobject instanceof game_core__WEBPACK_IMPORTED_MODULE_0__[\"TextButton\"])\n                gameobject.changeDown();\n            let key = category.key;\n            if (key === this.seachKey) {\n                this.showSeach(gameobject);\n            }\n            else {\n                if (this.mPreCategoryBtn) {\n                    const preBtn = this.mPreCategoryBtn.getData(\"item\");\n                    key = preBtn.key;\n                    if (key === this.seachKey) {\n                        this.closeSeach(gameobject);\n                    }\n                }\n                else {\n                    this.closeSeach(gameobject);\n                }\n                this.mSelectedCategeories = category;\n                this.queryPackege();\n            }\n            this.mPreCategoryBtn = gameobject;\n        }\n    }\n    onCloseHandler() {\n        this.emit(\"close\");\n    }\n    queryPackege() {\n        if (this.mSelectedCategeories) {\n            this.emit(\"queryPackage\", this.mSelectedCategeories.key);\n        }\n    }\n    onSelectItemHandler(cell) {\n        const item = cell.getData(\"item\");\n        this.mDetailBubble.setProp(item);\n        this.mDetailBubble.y = this.mShelfContainer.y - 10 * this.dpr - this.mDetailBubble.height;\n        if (item) {\n            this.replaceSelectItem(item);\n            this.setSelectedItem(item);\n            this.mPropGrid.refresh();\n        }\n        else {\n            if (this.categoryType !== pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_AVATAR && this.mSelectedItemData.length === 0) {\n                this.sellBtn.enable = false;\n                this.useBtn.enable = false;\n                this.mAdd.enable = false;\n                this.saveBtn.enable = false;\n                this.resetBtn.enable = false;\n                this.mDetailDisplay.setTexture(this.key, \"ghost\");\n                this.mDetailDisplay.setNearest();\n            }\n        }\n    }\n    onSeachHandler(val) {\n        if (this.mSelectedCategeories && val.length > 0) {\n            this.emit(\"seachPackage\", val, this.mSelectedCategeories.key);\n        }\n    }\n    onAddFurniToSceneHandler() {\n        if (!this.mSelectedItemData) {\n            return;\n        }\n        this.emit(\"addFurniToScene\", this.mSelectedItemData[0].id);\n    }\n    onTopCategoryHandler(item) {\n        const categoryType = item.getData(\"data\");\n        const width = this.scaleWidth;\n        this.mSelectedItemData.length = 0;\n        // this.mDetailDisplay.setTexture(this.key, \"ghost\");\n        // this.mDetailDisplay.setNearest();\n        if (categoryType) {\n            this.onSelectedCategory(categoryType);\n            if (categoryType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_FURNITURE) {\n                this.sellBtn.visible = true;\n                this.mAdd.visible = true;\n                this.useBtn.visible = false;\n                this.saveBtn.visible = false;\n                this.resetBtn.visible = false;\n            }\n            else if (categoryType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_AVATAR) {\n                this.sellBtn.visible = false;\n                this.saveBtn.visible = true;\n                this.resetBtn.visible = true;\n                this.useBtn.visible = false;\n                this.mAdd.visible = false;\n            }\n            else {\n                this.sellBtn.visible = true;\n                this.useBtn.visible = true;\n                this.mAdd.visible = false;\n                this.saveBtn.visible = false;\n                this.resetBtn.visible = false;\n            }\n        }\n        this.layoutTopBtn(item);\n    }\n    layoutTopBtn(button) {\n        const width = this.scene.cameras.main.width;\n        const zoom = this.mWorld.uiScale;\n        let allRadiu = 0;\n        for (const btn of this.topBtns) {\n            allRadiu += btn.width;\n        }\n        allRadiu /= 2;\n        let offsetX = width * 0.5 - allRadiu;\n        for (const btn of this.topBtns) {\n            let posY = 0;\n            if (btn !== button) {\n                btn.setTextStyle({\n                    fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                    fontSize: 12 * this.dpr * zoom,\n                    color: \"#2B4BB5\"\n                });\n                posY = btn.height * 0.5;\n            }\n            else {\n                btn.setTextStyle({\n                    fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                    fontSize: 16 * this.dpr * zoom,\n                    color: \"#8B5603\"\n                });\n                posY = btn.height * 0.5 + 2 * this.dpr * zoom;\n            }\n            const radiu = btn.width * 0.5;\n            btn.x = offsetX + radiu;\n            btn.y = posY;\n            offsetX += radiu * 2 + 12 * this.dpr * zoom;\n        }\n    }\n    onSelectedCategory(categoryType) {\n        this.categoryType = categoryType;\n        if (categoryType === pixelpai_proto__WEBPACK_IMPORTED_MODULE_2__[\"op_def\"].EditModePackageCategory.EDIT_MODE_PACKAGE_CATEGORY_AVATAR) {\n            this.displayAvatar();\n            this.emit(\"queryDressAvatarIDS\");\n        }\n        this.emit(\"getCategories\", categoryType);\n    }\n    onSellBtnHandler() {\n        this.popItemsPopPanle();\n        if (this.mSelectedItemData.length > 0)\n            this.itemPopPanel.setProp(this.mSelectedItemData[0], 0, this.categoryType, new game_core__WEBPACK_IMPORTED_MODULE_0__[\"Handler\"](this, this.onSellPropsHandler));\n    }\n    onUseBtnHandler() {\n        this.popItemsPopPanle();\n        if (this.mSelectedItemData.length > 0)\n            this.itemPopPanel.setProp(this.mSelectedItemData[0], 1, this.categoryType, new game_core__WEBPACK_IMPORTED_MODULE_0__[\"Handler\"](this, this.onUsePropsHandler));\n    }\n    onSaveBtnHandler() {\n        if (this.mSelectedItemData.length > 0) {\n            const idsArr = [];\n            for (const item of this.mSelectedItemData) {\n                idsArr.push(item.id);\n            }\n            this.emit(\"querySaveAvatar\", idsArr);\n            this.queryPackege();\n        }\n    }\n    onResetBtnHandler() {\n        if (this.mSelectedItemData.length > 0)\n            this.emit(\"queryResetAvatar\");\n    }\n    onSellPropsHandler(prop, count, category) {\n        this.emit(\"sellProps\", prop, count, category);\n    }\n    onUsePropsHandler(prop, count, category) {\n    }\n    popItemsPopPanle() {\n        const zoom = this.mWorld.uiScale;\n        const width = this.scene.cameras.main.width;\n        const height = this.scene.cameras.main.height;\n        if (!this.itemPopPanel) {\n            this.itemPopPanel = new ItemsPopPanel(this.scene, width * 0.5, height * 0.5, this.key, this.commonkey, this.dpr, zoom);\n        }\n        this.itemPopPanel.once(\"itempopclose\", () => {\n            this.mCategoryScroll.addListen();\n        });\n        this.mCategoryScroll.removeListen();\n        this.add(this.itemPopPanel);\n    }\n    showSeach(parent) {\n        this.mCategoryScroll.addItemAt(this.mSeachInput, 1);\n        this.mCategoryScroll.setInteractiveObject(this.mSeachInput.seachBtn);\n        this.mCategoryScroll.setInteractiveObject(this.mSeachInput.label);\n        this.updateCategeoriesLoc(true);\n    }\n    closeSeach(parent) {\n        if (this.mSeachInput.parentContainer) {\n            this.mSeachInput.parentContainer.remove(this.mSeachInput);\n        }\n        this.mCategoryScroll.removeInteractiveObject(this.mSeachInput.seachBtn);\n        this.mCategoryScroll.removeInteractiveObject(this.mSeachInput.label);\n        this.updateCategeoriesLoc(false);\n    }\n    updateCategeoriesLoc(inputBoo) {\n        const list = this.mCategoryScroll.getItemList();\n        const zoom = this.scale;\n        const h = 41 * this.dpr * zoom;\n        let preBtn = null;\n        const offset = 30 * this.dpr * zoom;\n        const w = this.mScene.cameras.main.width;\n        let tmpW = offset;\n        for (let i = 0; i < list.length; i++) {\n            const item = list[i];\n            if (i > 0) {\n                preBtn = list[i - 1];\n                item.x = preBtn.x + preBtn.width; // - item.width * item.originX;\n            }\n            else {\n                item.x = tmpW;\n            }\n            tmpW += item.width;\n        }\n        this.mCategoryScroll.setAlign();\n    }\n    get enableEdit() {\n        return this.mEnableEdit;\n    }\n}\nclass SeachInput extends Phaser.GameObjects.Container {\n    constructor(scene, world, key, dpr) {\n        super(scene);\n        this.mWorldService = world;\n        this.bg = scene.make.image({\n            key,\n            frame: \"seach_bg\"\n        }, false).setOrigin(0.5, 0.5);\n        // this.mLabelInput = new LabelInput(this.scene, {\n        //   x: -10 * dpr,\n        //   y: 0,\n        //   width: 160,\n        //   height: 60,\n        //   fontSize: 14 * dpr + \"px\",\n        //   color: \"#666666\",\n        // });\n        this.mLabelInput = this.scene.make.text({\n            x: 0,\n            width: this.bg.width,\n            height: this.bg.height,\n            style: {\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 14 * dpr,\n                wordWrap: { width: 200, useAdvancedWrap: true },\n            }\n        }, false).setData(\"type\", \"label\").setOrigin(0, 0.5);\n        this.mLabelInput.setSize(this.bg.width, this.bg.height);\n        this.mLabelInput.setInteractive();\n        this.mSeachBtn = scene.make.image({\n            key,\n            frame: \"seach_normal\"\n        }, false).setData(\"type\", \"seachBtn\");\n        this.mLabelInput.x = -this.bg.width / 2 + 6 * dpr * world.uiScale;\n        this.mSeachBtn.x = this.bg.width / 2 - this.mSeachBtn.width,\n            this.add([this.bg, this.mLabelInput, this.mSeachBtn]);\n        this.disableInteractive();\n        this.setSize(this.bg.width, this.bg.height);\n    }\n    showInputPanel() {\n        if (this.mInputText) {\n            return;\n        }\n        this.mInputText = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"InputPanel\"](this.scene, this.mWorldService, this.mLabelInput.text);\n        this.mInputText.once(\"close\", this.sendChat, this);\n    }\n    sendChat(val) {\n        this.mInputText.destroy();\n        this.mInputText = null;\n        this.mLabelInput.setText(val);\n        this.mLabelInput.setSize(this.bg.width, this.bg.height);\n    }\n    get seachBtn() {\n        return this.mSeachBtn;\n    }\n    get label() {\n        return this.mLabelInput;\n    }\n    get seachText() {\n        return this.mLabelInput.text;\n    }\n}\nclass DetailBubble extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr, zoom = 1) {\n        super(scene);\n        this.dpr = dpr;\n        this.mDetailBubble = this.scene.make.graphics(undefined, false);\n        const bubbleW = 100 * dpr * zoom;\n        const bubbleH = 96 * dpr * zoom;\n        this.mDetailBubble = this.scene.make.graphics(undefined, false);\n        this.mDetailBubble.fillStyle(0xFFFFFF, 0.1);\n        this.mDetailBubble.fillRoundedRect(0, 0, bubbleW, bubbleH);\n        this.mNickName = this.scene.make.text({\n            x: 7 * this.dpr,\n            y: 9 * this.dpr,\n            text: \"\",\n            style: {\n                fontSize: 12 * this.dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                color: \"#FFFF00\",\n                align: \"center\"\n            }\n        });\n        this.mPriceText = this.scene.make.text({\n            x: 7 * this.dpr,\n            y: 28 * this.dpr,\n            text: \"\",\n            style: {\n                fontSize: 10 * this.dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                color: \"#DC143C\",\n                align: \"center\"\n            }\n        });\n        this.mSource = this.scene.make.text({\n            x: 8 * dpr,\n            y: 47 * dpr,\n            text: \"\",\n            style: {\n                fontSize: 10 * dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            }\n        }, false);\n        this.mDesText = this.scene.make.text({\n            x: 8 * dpr,\n            y: 66 * dpr,\n            style: {\n                color: \"#32347b\",\n                fontSize: 10 * dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                wordWrap: {\n                    width: 90 * dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false);\n        this.add([this.mDetailBubble, this.mNickName, this.mDesText, this.mSource, this.mPriceText]);\n        this.setSize(bubbleW, bubbleH);\n    }\n    setProp(prop) {\n        if (!prop) {\n            this.mNickName.setText(\"\");\n            this.mPriceText.text = \"\";\n            this.mSource.text = \"\";\n            this.mDesText.text = \"\";\n            this.resize();\n        }\n        else {\n            this.mNickName.setText(prop.shortName || prop.name);\n            let posY = 9 * this.dpr;\n            const offsetY = 21 * this.dpr;\n            // this.mDesText.setText(prop.des);\n            if (prop.recyclable) {\n                posY += offsetY;\n                this.mPriceText.y = posY;\n                this.mPriceText.setText(`${prop.sellingPrice.price} `);\n            }\n            else {\n                posY += offsetY;\n                this.mPriceText.y = posY;\n                this.mPriceText.setText(``);\n            }\n            // if (prop.tradable) {\n            //   this.mPriceText.setText(``);\n            // }\n            if (prop.source) {\n                this.mSource.setText(` ${prop.source}`);\n                posY += offsetY;\n                this.mSource.y = posY;\n            }\n            else {\n                this.mSource.setText(\"\");\n            }\n            const offset = 15 * this.dpr;\n            const width = this.getMaxWidth(offset);\n            if (prop.des) {\n                posY += offsetY;\n                this.mDesText.setWordWrapWidth(width - offset, true);\n                this.mDesText.setText(prop.des);\n                this.mDesText.y = posY;\n            }\n            else {\n                this.mDesText.setText(\"\");\n            }\n            this.resize(width);\n        }\n        return this;\n    }\n    resize(w, h) {\n        if (w === undefined)\n            w = this.width;\n        const bubbleH = this.mDesText.height + 80 * this.dpr;\n        if (w === this.width && bubbleH === this.height) {\n            return;\n        }\n        this.mDetailBubble.clear();\n        this.mDetailBubble.fillStyle(0xFFFFFF, 0.1);\n        this.mDetailBubble.fillRoundedRect(0, 0, w, bubbleH);\n        this.setSize(w, bubbleH);\n        // this.mDetailBubbleContainer.y = this.height - this.y - this.mDetailBubbleContainer.height - 6 * this.dpr;\n    }\n    getMaxWidth(offset = 0) {\n        const width = 100 * this.dpr;\n        let maxWidth = 0;\n        if (maxWidth < this.mNickName.width)\n            maxWidth = this.mNickName.width;\n        if (maxWidth < this.mPriceText.width)\n            maxWidth = this.mPriceText.width;\n        if (maxWidth < this.mSource.width)\n            maxWidth = this.mSource.width;\n        if (width - maxWidth < offset)\n            maxWidth += offset + ((maxWidth - width) >= 0 ? 0 : (maxWidth - width));\n        if (maxWidth < width)\n            maxWidth = width;\n        return maxWidth;\n    }\n}\nclass Item extends Phaser.GameObjects.Container {\n    constructor(scene, x, y, key, dpr, zoom = 1) {\n        super(scene, x, y);\n        this.dpr = dpr;\n        this.zoom = zoom;\n        const background = scene.make.image({\n            key,\n            frame: \"grid_bg\"\n        }, false).setOrigin(0).setScale(zoom);\n        this.setSize(background.width, background.height);\n        this.selectbg = scene.make.image({\n            key,\n            frame: \"grid_choose\"\n        }, false).setOrigin(0).setScale(zoom).setPosition(-2 * dpr * zoom, -2 * dpr * zoom);\n        this.selectIcon = scene.make.image({\n            key,\n            frame: \"selected\"\n        }, false).setOrigin(1).setScale(zoom).setPosition(this.width, this.height);\n        this.mPropImage = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](this.scene, 0, 0);\n        this.mPropImage.scale = dpr * zoom;\n        this.mCounter = scene.make.text({\n            x: this.width - 4 * dpr,\n            y: this.height + 2 * dpr,\n            style: {\n                fontSize: 12 * dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(1);\n        this.add([background, this.selectbg, this.selectIcon]);\n        this.isSelect = false;\n        this.isEquip = false;\n        // this.setInteractive(new Phaser.Geom.Rectangle(0, 0, background.width, background.height), Phaser.Geom.Rectangle.Contains);\n        // this.on(\"pointerup\", this.onSelectedHandler, this);\n    }\n    setProp(prop) {\n        this.mProp = prop;\n        this.isSelect = false;\n        if (!prop) {\n            // this.mPropImage.setFrame(\"\");\n            this.mCounter.setText(\"\");\n            this.remove(this.mPropImage);\n            return;\n        }\n        this.mPropImage.load(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(prop.display.texturePath), this, this.onPropLoadCompleteHandler);\n        this.add(this.mPropImage);\n        if (prop.count > 1) {\n            this.mCounter.setText(prop.count.toString());\n            this.add(this.mCounter);\n        }\n        else {\n            if (this.mCounter.parentContainer)\n                this.remove(this.mCounter);\n        }\n    }\n    onPropLoadCompleteHandler() {\n        if (this.mPropImage && this.mPropImage.texture) {\n            const texture = this.mPropImage.texture;\n            // this.mPropImage.setPosition((this.mPropImage.width) / 2, (this.mPropImage.height) / 2);\n            this.mPropImage.x = this.width + 3 * this.dpr * this.zoom >> 1;\n            this.mPropImage.y = this.height + 3 * this.dpr * this.zoom >> 1;\n            this.mPropImage.displayHeight = 45 * this.dpr;\n            this.mPropImage.scaleX = this.mPropImage.scaleY;\n            if (texture) {\n                texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\n            }\n        }\n    }\n    set isSelect(value) {\n        this.selectbg.visible = value;\n    }\n    set isEquip(value) {\n        this.selectIcon.visible = value;\n    }\n    onSelectedHandler() {\n        this.emit(\"select\", this.mProp);\n    }\n}\nclass ItemsPopPanel extends Phaser.GameObjects.Container {\n    constructor(scene, x, y, key, commonKey, dpr, zoom = 1) {\n        super(scene, x, y);\n        this.itemCount = 1;\n        this.popState = 0; // 0  1 \n        const bg = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"NinePatch\"](this.scene, 0, 0, 286 * dpr * zoom, 331 * dpr * zoom, commonKey, \"bg\", undefined, undefined, {\n            top: 40,\n            bottom: 40\n        });\n        this.blackBg = this.scene.make.graphics(undefined, false);\n        this.blackBg.clear();\n        this.blackBg.fillStyle(0, 0.5);\n        const w = this.scene.cameras.main.width / this.scale;\n        const h = this.scene.cameras.main.height / this.scale;\n        this.blackBg.fillRect(-w / 2, -h / 2, w, h);\n        bg.setInteractive(new Phaser.Geom.Rectangle(0, 0, w, h), Phaser.Geom.Rectangle.Contains);\n        const posY = -bg.height * 0.5 + 3 * dpr * zoom;\n        const titlebg = this.scene.make.image({ x: 0, y: posY, key, frame: \"title\" });\n        this.titleName = scene.make.text({\n            x: 0,\n            y: posY + 3 * dpr * zoom,\n            text: \"\",\n            style: {\n                color: \"#905B06\",\n                fontSize: 15 * dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        this.titleName.setFontStyle(\"bold\");\n        this.itemName = scene.make.text({\n            x: 0,\n            y: posY + 40 * dpr * zoom,\n            style: {\n                color: \"#000000\",\n                fontSize: 15 * dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        const iconOffset = -56 * dpr * zoom;\n        const iconBg = this.scene.make.image({ x: 0, y: iconOffset, key, frame: \"sell_bg\" });\n        this.icon = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](this.scene, 0, iconOffset);\n        this.icon.scale = dpr * zoom;\n        const priceOffset = 10 * dpr * zoom;\n        this.priceBg = this.scene.make.image({ x: 0, y: priceOffset, key: commonKey, frame: \"price_bg\" });\n        this.pricText = scene.make.text({\n            x: 0,\n            y: priceOffset,\n            style: {\n                color: \"#FFFFFF\",\n                fontSize: 15 * dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        // this.pricText.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.priceBg.width, this.priceBg.height),Phaser.Geom.Rectangle.Contains);\n        const countOffsetY = 50 * dpr * zoom;\n        const countOffsetX = -58 * dpr * zoom;\n        const countBg = this.scene.make.image({ x: 0, y: countOffsetY, key: commonKey, frame: \"input_bg\" });\n        this.itemCountText = scene.make.text({\n            x: 0,\n            y: countOffsetY,\n            style: {\n                color: \"#0771AC\",\n                fontSize: 15 * dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        const minusBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"Button\"](this.scene, commonKey, \"reduce\", \"reduce\");\n        const addBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"Button\"](this.scene, commonKey, \"increase\", \"increase\");\n        minusBtn.x = countOffsetX;\n        minusBtn.y = countOffsetY;\n        addBtn.x = -countOffsetX;\n        addBtn.y = countOffsetY;\n        const bottomOffsetY = bg.height * 0.5 - 50 * dpr * zoom;\n        const bottomOffsetX = -66 * dpr * zoom;\n        const cancelBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"NineSliceButton\"](this.scene, bottomOffsetX, bottomOffsetY, 112 * dpr * zoom, 40 * dpr * zoom, commonKey, \"red_btn\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"common.cancel\"), dpr, zoom, {\n            left: 12 * dpr * zoom,\n            top: 12 * dpr * zoom,\n            right: 12 * dpr * zoom,\n            bottom: 12 * dpr * zoom\n        });\n        const confirmBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"NineSliceButton\"](this.scene, -bottomOffsetX, bottomOffsetY, 112 * dpr * zoom, 40 * dpr * zoom, commonKey, \"yellow_btn\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"common.confirm\"), dpr, zoom, {\n            left: 12 * dpr * zoom,\n            top: 12 * dpr * zoom,\n            right: 12 * dpr * zoom,\n            bottom: 12 * dpr * zoom\n        });\n        cancelBtn.setTextStyle({\n            color: \"#FFFFFF\",\n            fontSize: 16 * dpr * zoom,\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n        });\n        confirmBtn.setTextStyle({\n            color: \"#976400\",\n            fontSize: 16 * dpr * zoom,\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n        });\n        this.add([this.blackBg, bg, titlebg, this.titleName, this.itemName, iconBg, this.icon, this.priceBg, this.pricText, countBg, this.itemCountText, minusBtn, addBtn, cancelBtn, confirmBtn]);\n        minusBtn.on(\"Tap\", this.onMinusBtnHandler, this);\n        addBtn.on(\"Tap\", this.onAddBtnHandler, this);\n        cancelBtn.on(\"Tap\", this.onCancelBtnHandler, this);\n        confirmBtn.on(\"Tap\", this.onConfirmBtnHandler, this);\n    }\n    setProp(prop, stated, category, handler) {\n        this.itemData = prop;\n        this.itemCount = 1;\n        this.icon.load(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(prop.display.texturePath), this, this.onPropLoadCompleteHandler);\n        this.itemName.text = prop.name || prop.shortName;\n        this.pricText.text = prop.sellingPrice.price * this.itemCount + \"  \";\n        this.itemCountText.text = this.itemCount + \"\";\n        this.popState = stated;\n        if (stated === 0) {\n            this.titleName.text = game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"furni_bag.sold\");\n            this.pricText.visible = true;\n            this.priceBg.visible = true;\n        }\n        else {\n            this.titleName.text = game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"furni_bag.use\");\n            this.pricText.visible = false;\n            this.priceBg.visible = false;\n        }\n        this.handler = handler;\n        this.category = category;\n    }\n    onMinusBtnHandler() {\n        if (this.itemCount === 1)\n            return;\n        this.itemCount--;\n        this.updateData();\n    }\n    onAddBtnHandler() {\n        if (this.itemCount === this.itemData.count)\n            return;\n        this.itemCount++;\n        this.updateData();\n    }\n    updateData() {\n        this.itemCountText.text = this.itemCount + \"\";\n        this.pricText.text = this.itemData.sellingPrice.price * this.itemCount + \"  \";\n    }\n    onCancelBtnHandler() {\n        this.emit(\"itempopclose\");\n        if (this.parentContainer)\n            this.parentContainer.remove(this);\n    }\n    onConfirmBtnHandler() {\n        this.emit(\"itempopclose\");\n        if (this.parentContainer)\n            this.parentContainer.remove(this);\n        if (this.handler)\n            this.handler.runWith([this.itemData, this.itemCount, this.category]);\n    }\n    onPropLoadCompleteHandler() {\n        if (this.icon && this.icon.texture) {\n            const texture = this.icon.texture;\n            if (texture) {\n                texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/FurniBag/FurniBagPanel.ts?");

/***/ }),

/***/ "./src/ui/FurniBag/index.ts":
/*!**********************************!*\
  !*** ./src/ui/FurniBag/index.ts ***!
  \**********************************/
/*! exports provided: FurniBag, FurniBagMediator, FurniBagPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _FurniBag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FurniBag */ \"./src/ui/FurniBag/FurniBag.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FurniBag\", function() { return _FurniBag__WEBPACK_IMPORTED_MODULE_0__[\"FurniBag\"]; });\n\n/* harmony import */ var _FurniBagMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FurniBagMediator */ \"./src/ui/FurniBag/FurniBagMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FurniBagMediator\", function() { return _FurniBagMediator__WEBPACK_IMPORTED_MODULE_1__[\"FurniBagMediator\"]; });\n\n/* harmony import */ var _FurniBagPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FurniBagPanel */ \"./src/ui/FurniBag/FurniBagPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FurniBagPanel\", function() { return _FurniBagPanel__WEBPACK_IMPORTED_MODULE_2__[\"FurniBagPanel\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/FurniBag/index.ts?");

/***/ }),

/***/ "./src/ui/InfoPanel/InfoPanel.ts":
/*!***************************************!*\
  !*** ./src/ui/InfoPanel/InfoPanel.ts ***!
  \***************************************/
/*! exports provided: InfoPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InfoPanel\", function() { return InfoPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _InfoPanelMediator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InfoPanelMediator */ \"./src/ui/InfoPanel/InfoPanelMediator.ts\");\n\n\n\n\n\nconst GetValue = Phaser.Utils.Objects.GetValue;\nclass InfoPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, worldService) {\n        super(scene, worldService);\n        this.mWorld = worldService;\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        if (this.mCloseBtn)\n            this.mCloseBtn.on(\"pointerup\", this.closeHandler, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        if (this.mCloseBtn)\n            this.mCloseBtn.off(\"pointerup\", this.closeHandler, this);\n    }\n    resize(wid, hei) {\n        if (!this.mInitialized)\n            return;\n        const size = this.mWorld.getSize();\n        const scale = this.mWorld.uiScale;\n        const zoom = this.mWorld.uiRatio;\n        this.x = size.width >> 1;\n        this.y = size.height >> 1;\n        this.mActor.x = -this.width / 2 + 80 * scale * zoom;\n        this.mActor.y = -this.height / 2 + 160 * scale * zoom;\n        this.mNameTextArea.setMinSize(220 * this.dpr * scale, 222 * this.dpr * scale);\n        this.mNameTextArea.setPosition(size.width / 2 + 60 * this.dpr * scale, size.height / 2 - 110 * this.dpr * scale);\n        this.mNameTextArea.layout();\n        const textMask = this.mNameTextArea.childrenMap.text;\n        textMask.x = -10 * this.dpr * scale;\n        textMask.y = -200 * this.dpr * scale;\n        this.mAttributesTextArea.setMinSize(360 * this.dpr * scale, 180 * this.dpr * scale);\n        this.mAttributesTextArea.setPosition(size.width / 2 + 3 * this.dpr * scale, size.height / 2 + 95 * this.dpr * scale);\n        this.mAttributesTextArea.layout();\n        const attributesMask = this.mAttributesTextArea.childrenMap.text;\n        attributesMask.x = -this.width / 2 + 30 * this.dpr * scale;\n        attributesMask.y = 5 * this.dpr * scale;\n    }\n    show(param) {\n        if (this.mShow)\n            return;\n        super.show(param);\n        if (this.mInitialized) {\n            const size = this.mWorld.getSize();\n            this.setData(\"data\", param);\n            this.setInfo(param);\n            this.resize(size.width, size.height);\n        }\n    }\n    hide() {\n        super.hide();\n    }\n    setInfo(data) {\n        if (!this.mInitialized || !data)\n            return;\n        if (data.actors) {\n            if (data.actors.length === 0) {\n                return;\n            }\n            const actor = data.actors[0];\n            this.mWorld.httpService.userDetail(actor.platformId).then((response) => {\n                if (response.code === 200) {\n                    const resData = response.data;\n                    if (resData) {\n                        this.mActor.load(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(`show/${resData.username}.png`), this, undefined, this.loadDefaultAvatar);\n                        // this.mNickName.setText(resData.nickname);\n                        // this.mLv.setText(resData.level);\n                    }\n                }\n            });\n        }\n        const text = data.text;\n        if (text[0]) {\n            this.mNameTextArea.setText(this.checkValue(text[0]));\n        }\n        if (text[1]) {\n            this.mAttributesTextArea.setText(this.checkValue(text[1]));\n        }\n    }\n    destroy() {\n        if (this.mActor) {\n            this.mActor.destroy(true);\n            this.mActor = null;\n        }\n        if (this.mNameTextArea) {\n            this.mNameTextArea.destroy();\n            this.mNameTextArea = null;\n        }\n        if (this.mAttributesTextArea) {\n            this.mAttributesTextArea.destroy();\n            this.mAttributesTextArea = null;\n        }\n        this.mWorld = null;\n        super.destroy();\n    }\n    preload() {\n        this.scene.load.image(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Border\"].getName(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"Border\"].getPNG());\n        this.scene.load.image(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Background\"].getName(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"Background\"].getPNG());\n        this.scene.load.atlas(game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getName(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getPNG(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getJSON());\n        super.preload();\n    }\n    init() {\n        const size = this.mWorld.getSize();\n        const scale = this.mWorld.uiScale;\n        this.setSize(400 * this.dpr * scale, 500 * this.dpr * scale);\n        // const background = new NinePatch(this.scene, {\n        //     width: this.width,\n        //     height: this.height,\n        //     key: Background.getName(),\n        //     columns: Background.getColumns(),\n        //     rows: Background.getRows()\n        // });\n        // const border = new NinePatch(this.scene, {\n        //     width: this.width - 20 * this.dpr * scale,\n        //     height: this.height - 20 * this.dpr * scale,\n        //     key: Border.getName(),\n        //     columns: Border.getColumns(),\n        //     rows: Border.getRows()\n        // });\n        this.mNameBBCodeText = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BBCodeText\"](this.scene, 0, 0, \"\", {\n            fontSize: 14 * this.dpr * scale + \"px\",\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            textMask: false,\n            wrap: {\n                mode: \"char\",\n                width: 270 * this.dpr * scale\n            }\n        });\n        this.mNameTextArea = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"TextArea\"](this.scene, {\n            x: this.width / 2 - 80 * scale * this.dpr,\n            y: -75 * scale * this.dpr,\n            textWidth: 270 * this.dpr * scale,\n            textHeight: 180 * this.dpr * scale,\n            textMask: true,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            text: this.mNameBBCodeText,\n        })\n            .layout();\n        this.mAttributesBBCodeText = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BBCodeText\"](this.scene, 0, 0, \"\", {\n            fontSize: 14 * this.dpr * scale + \"px\",\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            textMask: false,\n            wrap: {\n                mode: \"char\",\n                width: this.width - 30 * this.dpr * scale\n            }\n        });\n        this.mAttributesTextArea = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"TextArea\"](this.scene, {\n            x: size.width / 2 + 3 * this.dpr * scale,\n            y: size.height / 2 + 95 * this.dpr * scale,\n            textMask: true,\n            textWidth: this.width - 60 * this.dpr * scale,\n            textHeight: 180 * this.dpr * scale,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            text: this.mAttributesBBCodeText,\n        })\n            .layout();\n        this.mCloseBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NineSliceButton\"](this.scene, 258, 145, 80, 34, game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getName(), \"\", \"\", this.dpr, this.scale, game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getConfig());\n        this.mCloseBtn.x = 0;\n        this.mCloseBtn.y = this.height - 100 * this.mWorld.uiRatio * scale >> 1;\n        this.mCloseBtn.setTextStyle({ font: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].YAHEI_16_BOLD });\n        this.mActor = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](this.scene, 300, 125).setOrigin(0.5, 1);\n        this.mActor.scale = 2;\n        this.mWorld.uiManager.getMediator(_InfoPanelMediator__WEBPACK_IMPORTED_MODULE_2__[\"InfoPanelMediator\"].NAME).resize();\n        this.add([\n            this.mNameBBCodeText, this.mAttributesBBCodeText, this.mCloseBtn, this.mActor\n        ]);\n        // this.mAttributesTextArea, this.mAttributesBBCodeText,this.mNameTextArea, this.mNameTextArea,\n        this.addListen();\n        super.init();\n        this.setInfo(this.getData(\"data\"));\n    }\n    closeHandler(pointer) {\n        if (this.checkPointerDis(pointer)) {\n            this.hide();\n        }\n    }\n    checkPointerDis(pointer) {\n        if (!this.mWorld)\n            return true;\n        return Math.abs(pointer.downX - pointer.upX) < 10 * this.mWorld.uiRatio * this.mWorld.uiScale ||\n            Math.abs(pointer.downY - pointer.upY) < 10 * this.mWorld.uiRatio * this.mWorld.uiScale;\n    }\n    loadDefaultAvatar() {\n        const url = game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(\"show/avatar_default.png\");\n        if (this.scene.textures.exists(url)) {\n            this.mActor.setTexture(url);\n            return;\n        }\n        this.mActor.load(url);\n    }\n    checkValue(data) {\n        return GetValue(data, \"text\", \"\");\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/InfoPanel/InfoPanel.ts?");

/***/ }),

/***/ "./src/ui/InfoPanel/InfoPanelMediator.ts":
/*!***********************************************!*\
  !*** ./src/ui/InfoPanel/InfoPanelMediator.ts ***!
  \***********************************************/
/*! exports provided: InfoPanelMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InfoPanelMediator\", function() { return InfoPanelMediator; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _InfoPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InfoPanel */ \"./src/ui/InfoPanel/InfoPanel.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nclass InfoPanelMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"BaseMediator\"] {\n    constructor(mLayerManager, mScene, world) {\n        super();\n        this.mLayerManager = mLayerManager;\n        this.mScene = mScene;\n        this.world = world;\n    }\n    hide() {\n        this.mShow = false;\n        this.world.emitter.off(game_core__WEBPACK_IMPORTED_MODULE_0__[\"MessageType\"].SCENE_BACKGROUND_CLICK, this.onClosePanel, this);\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = null;\n        }\n    }\n    isSceneUI() {\n        return false;\n    }\n    isShow() {\n        if (!this.mView)\n            return false;\n        return this.mView.isShow();\n    }\n    resize() {\n        if (this.mView)\n            this.mView.resize();\n    }\n    show(param) {\n        if (this.mView && this.mView.isShow()) {\n            return;\n        }\n        if (!param || param.length === 0) {\n            return;\n        }\n        this.mView = new _InfoPanel__WEBPACK_IMPORTED_MODULE_1__[\"InfoPanel\"](this.mScene, this.world);\n        this.mView.show(param[0]);\n        this.mLayerManager.addToUILayer(this.mView);\n        this.world.emitter.on(game_core__WEBPACK_IMPORTED_MODULE_0__[\"MessageType\"].SCENE_BACKGROUND_CLICK, this.onClosePanel, this);\n        super.show(param);\n    }\n    destroy() {\n        if (this.mView)\n            this.mView.destroy();\n    }\n    update(param) {\n        if (this.mView)\n            this.mView.update(param);\n    }\n    onClosePanel(pointer) {\n        if (game_core__WEBPACK_IMPORTED_MODULE_0__[\"Tool\"].checkPointerContains(this.mView, pointer))\n            return;\n        this.hide();\n    }\n}\nInfoPanelMediator.NAME = \"InfoPanelMediator\";\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/InfoPanel/InfoPanelMediator.ts?");

/***/ }),

/***/ "./src/ui/InfoPanel/index.ts":
/*!***********************************!*\
  !*** ./src/ui/InfoPanel/index.ts ***!
  \***********************************/
/*! exports provided: InfoPanel, InfoPanelMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _InfoPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InfoPanel */ \"./src/ui/InfoPanel/InfoPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"InfoPanel\", function() { return _InfoPanel__WEBPACK_IMPORTED_MODULE_0__[\"InfoPanel\"]; });\n\n/* harmony import */ var _InfoPanelMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InfoPanelMediator */ \"./src/ui/InfoPanel/InfoPanelMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"InfoPanelMediator\", function() { return _InfoPanelMediator__WEBPACK_IMPORTED_MODULE_1__[\"InfoPanelMediator\"]; });\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/InfoPanel/index.ts?");

/***/ }),

/***/ "./src/ui/InteractivePanel/InteractivePanel.ts":
/*!*****************************************************!*\
  !*** ./src/ui/InteractivePanel/InteractivePanel.ts ***!
  \*****************************************************/
/*! exports provided: InteractivePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InteractivePanel\", function() { return InteractivePanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _InteractivePanelMediator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InteractivePanelMediator */ \"./src/ui/InteractivePanel/InteractivePanelMediator.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\n\nclass InteractivePanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.mRadioCom = false;\n        this.mLeftBaseScaleX = 1;\n        this.mLeftBaseScaleY = 1;\n        this.mMidBaseScaleX = 1;\n        this.mMidBaseScaleY = 1;\n        this.mRightBaseScaleX = 1;\n        this.mRightBaseScaleY = 1;\n        this.mDisDelection = 10;\n        // this.setEnabled(false);\n        this.setTween(false);\n    }\n    /**\n     * ui\n     * @param param\n     * @param radioClick\n     */\n    show(param) {\n        super.show(param);\n        const size = this.mWorld.getSize();\n        this.mShowData = param;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        this.mShow = true;\n        const med = this.mWorld.uiManager.getMediator(_InteractivePanelMediator__WEBPACK_IMPORTED_MODULE_2__[\"InteractivePanelMediator\"].NAME);\n        const data = this.mShowData[0];\n        if (this.mLeftFaceIcon)\n            this.mLeftFaceIcon.visible = false;\n        if (this.mRightFaceIcon)\n            this.mRightFaceIcon.visible = false;\n        if (this.mMidFaceIcon)\n            this.mMidFaceIcon.visible = false;\n        if (data.display && data.display.length > 0) {\n            const uiDisplay = data.display[0];\n            const url = game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(uiDisplay.texturePath);\n            if (this.scene.cache.obj.get(url)) {\n                this.onLoadComplete();\n            }\n            else {\n                this.scene.load.image(url, url);\n                this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.onLoadComplete, this);\n                this.scene.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR, this.onLoadError, this);\n                this.scene.load.start();\n            }\n        }\n        this.mDescTF.text = \"\";\n        this.mNameTF.text = \"\";\n        if (data.text) {\n            if (data.text.length > 0) {\n                const descData = data.text[0];\n                this.mDescCon.setData(\"nodeID\", descData.node.id);\n                this.mTextArea.setText(descData.text);\n                // this.mDescTF.text = descData.text;\n                this.mDescCon.off(\"pointerup\", this.descConClick, this);\n                this.mDescCon.on(\"pointerup\", this.descConClick, this);\n                if (data.text[1]) {\n                    const nameData = data.text[1];\n                    this.mNameCon.setData(\"nodeID\", nameData.node.id);\n                    this.mNameTF.text = nameData.text;\n                    this.mNameTF.x = -this.mNameTF.width >> 1;\n                    this.mNameCon.off(\"pointerup\", this.nameConClick, this);\n                    this.mNameCon.on(\"pointerup\", this.nameConClick, this);\n                }\n            }\n        }\n        if (this.mRadio)\n            this.mRadio.visible = false;\n        if (data.button && data.button.length > 0) {\n            const tmpHei = (data.button.length - 1) * 33 + 46;\n            if (!this.mRadio) {\n                this.mRadio = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"Radio\"](this.mScene, {\n                    wid: 350,\n                    hei: tmpHei,\n                    resKey: \"juqing\",\n                    resPng: \"./resources/ui/juqing/juqing.png\",\n                    resJson: \"./resources/ui/juqing/juqing.json\",\n                    resBg: \"radio_bg.png\",\n                    resArrow: \"radio_arrow.png\",\n                    fontStyle: { size: 20, color: \"#ffcc00\", bold: false },\n                    completeBack: () => {\n                        this.radioComplete();\n                    },\n                    clickCallBack: (itemShowData) => {\n                        if (!itemShowData || !med)\n                            return;\n                        med.componentClick(itemShowData.data);\n                    }\n                });\n                this.radioComplete();\n            }\n            this.setRadioData(data.button);\n            this.mRadio.visible = true;\n        }\n        this.resize();\n        if (this.mShow) {\n            return;\n        }\n    }\n    hide() {\n        super.hide();\n    }\n    update(param) {\n        this.show(param);\n    }\n    getRadio() {\n        return this.mRadio;\n    }\n    setRadioData(data) {\n        this.mRadio.setRadioData(data);\n    }\n    resize(wid = 0, hei = 0) {\n        this.scale = this.mWorld.uiScale;\n        const size = this.mWorld.getSize();\n        const width = this.mWorld.getSize().width;\n        const height = this.mWorld.getSize().height;\n        const zoom = this.mWorld.uiScale;\n        this.mNameCon.add(this.mNameBg);\n        this.mNameCon.add(this.mNameTF);\n        this.mDescCon.add(this.mBg);\n        this.mDescCon.add(this.mBorder);\n        this.mDescCon.add(this.mDescTF);\n        this.mDescCon.add(this.mTextArea);\n        this.add(this.mNameCon);\n        this.add(this.mDescCon);\n        this.setSize(width, height);\n        if (this.mWorld.game.device.os.desktop) {\n            this.y = size.height / 2 - 250;\n        }\n        else {\n            if (this.mWorld.game.scale.orientation === Phaser.Scale.Orientation.LANDSCAPE) {\n                this.mBg.resize((size.width - 10) / this.mWorld.uiScale, size.height * .5 / this.mWorld.uiScale);\n                this.mBorder.resize((size.width - 20) / this.mWorld.uiScale, (size.height * .5 - 20) / this.mWorld.uiScale);\n            }\n            else {\n                this.mBg.resize((size.width - 10) / this.mWorld.uiScale, size.height * .5 / this.mWorld.uiScale);\n                this.mBorder.resize((size.width - 20) / this.mWorld.uiScale, (size.height * .5 - 20) / this.mWorld.uiScale);\n            }\n            this.y = this.mBg.height * 1.5 * this.mWorld.uiScale;\n        }\n        // this.y = 0;\n        this.x = size.width >> 1;\n        this.refreshUIPos();\n        if (this.mRadio) {\n            this.add(this.mRadio);\n        }\n        this.mTextArea.childrenMap.child.setMinSize(this.mBorder.width - 10 * this.dpr * zoom, this.mBorder.height - 3 * this.dpr * zoom);\n        this.mTextArea.layout();\n        this.mTextArea.setPosition(width / 2, this.y + this.mDescCon.y);\n        const textMask = this.mTextArea.childrenMap.text;\n        textMask.x = -this.mBorder.width >> 1;\n        textMask.y = -this.mBorder.height / 2 + 20 * this.dpr;\n        textMask.resize(this.mBorder.width, this.mDescTF.displayHeight + 2000);\n        // textMask.bottomChildOY = this.mDescTF.displayHeight + 20 * this.dpr * zoom;\n        this.mTextArea.scrollToBottom();\n        super.resize(wid, hei);\n    }\n    // public addListen() {\n    // super.addListen();\n    // this.on(\"panelClick\", this.panelClick, this);\n    // }\n    // public removeListen() {\n    //     super.removeListen();\n    //     this.off(\"panelClick\", this.panelClick, this);\n    // }\n    destroy() {\n        this.mInitialized = false;\n        if (this.mNameCon) {\n            this.mNameCon.destroy(true);\n        }\n        if (this.mDescCon) {\n            this.mDescCon.destroy(true);\n        }\n        if (this.mLeftFaceIcon) {\n            this.mLeftFaceIcon.destroy(true);\n        }\n        if (this.mMidFaceIcon) {\n            this.mMidFaceIcon.destroy(true);\n        }\n        if (this.mRightFaceIcon) {\n            this.mRightFaceIcon.destroy(true);\n        }\n        if (this.mNameTF) {\n            this.mNameTF.destroy(true);\n        }\n        if (this.mDescTF) {\n            this.mDescTF.destroy(true);\n        }\n        if (this.mRadio) {\n            this.mRadio.destroy();\n        }\n        this.mNameCon = null;\n        this.mDescCon = null;\n        this.mLeftFaceIcon = null;\n        this.mMidFaceIcon = null;\n        this.mRightFaceIcon = null;\n        this.mNameTF = null;\n        this.mDescTF = null;\n        this.mRadio = null;\n        super.destroy();\n    }\n    preload() {\n        if (!this.mScene) {\n            return;\n        }\n        this.scene.load.image(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Background\"].getName(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"Background\"].getPNG());\n        this.scene.load.image(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Border\"].getName(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"Border\"].getPNG());\n        this.mScene.load.atlas(\"juqing\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getRes(\"ui/juqing/juqing.png\"), game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getRes(\"ui/juqing/juqing.json\"));\n        super.preload();\n    }\n    init() {\n        const width = this.mWorld.getSize().width;\n        const height = this.mWorld.getSize().height;\n        const zoom = this.mWorld.uiScale;\n        this.mWorld.uiManager.getUILayerManager().addToToolTipsLayer(this);\n        this.mNameCon = this.mScene.make.container(undefined, false);\n        this.mDescCon = this.mScene.make.container(undefined, false);\n        this.mBg = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"NinePatch\"](this.scene, 0, 0, 1080, 320, game_core__WEBPACK_IMPORTED_MODULE_0__[\"Background\"].getName(), null, undefined, undefined, game_core__WEBPACK_IMPORTED_MODULE_0__[\"Background\"].getConfig());\n        this.setSize(width, height);\n        this.mBorder = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"NinePatch\"](this.scene, 0, 0, 1040, 280, game_core__WEBPACK_IMPORTED_MODULE_0__[\"Border\"].getName(), null, undefined, undefined, game_core__WEBPACK_IMPORTED_MODULE_0__[\"Border\"].getConfig());\n        this.mLeftFaceIcon = this.mScene.make.image(undefined, false);\n        this.mMidFaceIcon = this.mScene.make.image(undefined, false);\n        this.mRightFaceIcon = this.mScene.make.image(undefined, false);\n        this.mNameTF = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"BBCodeText\"](this.mScene, 0, 0, \"\", {\n            fontSize: \"20px\",\n            wrap: {\n                mode: \"char\",\n                width: this.mBorder.width\n            },\n        });\n        this.mNameBg = this.mScene.make.image(undefined, false);\n        this.mNameBg.setTexture(\"juqing\", \"juqing_name.png\");\n        this.mDescTF = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"BBCodeText\"](this.mScene, 0, 0, \"\", {\n            // width: this.mBorder.width - 20 * this.dpr * zoom,\n            fontSize: \"20px\",\n            halign: \"left\",\n            textMask: false,\n            padding: {\n                top: 0,\n                bottom: 0,\n                left: 8 * this.dpr * zoom,\n                right: 3 * this.dpr * zoom,\n            },\n            wrap: {\n                mode: \"character\",\n                width: this.mBorder.width - 12 * this.dpr * zoom,\n            },\n        });\n        this.mTextArea = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"TextArea\"](this.mScene, {\n            x: width / 2,\n            y: this.mBorder.y + this.mBorder.height / 2 + 80 * this.dpr * zoom,\n            width: this.mBorder.width,\n            height: this.mBorder.height - 20 * this.dpr * zoom,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            textWidth: this.mBorder.width - 12 * this.dpr * zoom,\n            textHeight: 0,\n            text: this.mDescTF,\n        })\n            .layout();\n        // const bg1 = this.mScene.make.graphics(undefined, false);\n        // bg1.fillStyle(0xffcc00);\n        // bg1.fillRect(-this.mBg.width >> 1, -this.mBg.height >> 1, this.mBg.width, this.mBg.height);\n        // this.mDescCon.add(bg1);\n        this.mDescCon.setSize(this.mBg.width, this.mBg.height);\n        this.mNameCon.setSize(this.mNameBg.width, this.mNameBg.height);\n        this.mDescCon.setInteractive();\n        this.mNameCon.setInteractive();\n        super.init();\n    }\n    tweenComplete(show) {\n        super.tweenComplete(show);\n        if (show)\n            this.resize();\n    }\n    // private panelClick(pointer: Phaser.Input.Pointer) {\n    //     if (Tool.checkPointerContains(this.mNameCon, pointer)) {\n    //         this.nameConClick(pointer);\n    //         return;\n    //     }\n    //     if (Tool.checkPointerContains(this.mDescCon, pointer)) {\n    //         this.descConClick(pointer);\n    //         return;\n    //     }\n    //     if (this.mLeftFaceIcon && Tool.checkPointerContains(this.mLeftFaceIcon, pointer)) {\n    //         this.leftFaceClick(pointer);\n    //         return;\n    //     }\n    //     if (this.mMidFaceIcon && Tool.checkPointerContains(this.mMidFaceIcon, pointer)) {\n    //         this.midFaceClick(pointer);\n    //         return;\n    //     }\n    //     if (this.mRightFaceIcon && Tool.checkPointerContains(this.mRightFaceIcon, pointer)) {\n    //         this.rightFaceClick(pointer);\n    //         return;\n    //     }\n    // }\n    refreshUIPos() {\n        const size = this.mWorld.getSize();\n        const zoom = this.mWorld.uiScale;\n        this.mDescCon.setSize(this.mBg.width, this.mBg.height);\n        this.mNameCon.setSize(this.mNameBg.width, this.mNameBg.height);\n        this.mNameTF.y = -8 * this.mWorld.uiScale;\n        // this.mDescTF.x = -this.mBorder.width / 2;\n        // this.mDescTF.y = -this.mBorder.height / 2;\n        this.mDescCon.y = this.mWorld.game.device.os.desktop ? size.height / 2 + 80 : 0;\n        this.mNameCon.x = 150 - this.mDescCon.width / 2;\n        this.mNameCon.y = this.mDescCon.y - this.mDescCon.height / 2 - this.mNameCon.height / 2 - 10;\n        this.mNameTF.setWrapWidth(this.mBorder.width);\n        this.mDescTF.setWrapWidth(this.mBorder.width - 10 * this.dpr * zoom);\n        this.mNameTF.x = -this.mNameTF.width >> 1;\n        const desConWorldY = this.mDescCon.getWorldTransformMatrix().ty;\n        if (!this.mWorld.game.device.os.desktop) {\n            const leftIconWid = this.mLeftFaceIcon.width * this.mWorld.uiScale;\n            const leftIconHei = this.mLeftFaceIcon.height * this.mWorld.uiScale;\n            const leftScale = this.getScale(InteractivePanel.baseWidth, InteractivePanel.baseHeight, leftIconWid, leftIconHei);\n            this.mLeftFaceIcon.scaleX = this.mLeftBaseScaleX * leftScale * .7;\n            this.mLeftFaceIcon.scaleY = this.mLeftBaseScaleY * leftScale * .7;\n            this.mLeftFaceIcon.x = this.mNameCon.x;\n            this.mLeftFaceIcon.y = this.mNameTF.y - this.mLeftFaceIcon.height; // desConWorldY - this.mLeftFaceIcon.height / 2 - this.mDescCon.height / 2; // this.mNameCon.y + this.mNameCon.height / 2 + 10 - this.mLeftFaceIcon.height * leftScale * .7 / 2;\n            const midIconWid = this.mMidFaceIcon.width * this.mWorld.uiScale;\n            const midIconHei = this.mMidFaceIcon.height * this.mWorld.uiScale;\n            const midScale = this.getScale(InteractivePanel.baseWidth, InteractivePanel.baseHeight, midIconWid, midIconHei);\n            this.mMidFaceIcon.scaleX = this.mMidBaseScaleX * midScale * .7;\n            this.mMidFaceIcon.scaleY = this.mMidBaseScaleY * midScale * .7;\n            this.mMidFaceIcon.x = 0;\n            this.mMidFaceIcon.y = this.mNameTF.y - this.mMidFaceIcon.height;\n            // this.mMidFaceIcon.y = this.mNameCon.y + this.mNameCon.height / 2 + 10 - this.mMidFaceIcon.height * midScale * .7 / 2;\n            const rightIconWid = this.mRightFaceIcon.width * this.mWorld.uiScale;\n            const rightIconHei = this.mRightFaceIcon.height * this.mWorld.uiScale;\n            const rightScale = this.getScale(InteractivePanel.baseWidth, InteractivePanel.baseHeight, rightIconWid, rightIconHei);\n            this.mRightFaceIcon.scaleX = this.mRightBaseScaleX * rightScale * .7;\n            this.mRightFaceIcon.scaleY = this.mRightBaseScaleY * rightScale * .7;\n            this.mRightFaceIcon.x = -this.mNameCon.x;\n            this.mRightFaceIcon.y = this.mNameTF.y - this.mRightFaceIcon.height;\n            // this.mRightFaceIcon.y = this.mNameCon.y + this.mNameCon.height / 2 + 10 - this.mRightFaceIcon.height * rightScale * .7 / 2;\n        }\n        if (this.mRadioCom) {\n            if (this.mWorld.game.device.os.desktop) {\n                this.mRadio.x = this.mBg.x + this.mBg.width / 2 - this.mRadio.width;\n                this.mRadio.y = this.mDescCon.y + this.mDescCon.height / 2 - this.mRadio.height;\n            }\n            else {\n                this.mRadio.x = this.mBg.width / 2 - this.mRadio.width;\n                this.mRadio.y = this.mBg.height / 2 - this.mRadio.height;\n            }\n        }\n    }\n    getScale(baseWid, baseHei, curWid, curHei) {\n        return baseWid / curWid > baseHei / curHei ? baseWid / curWid : baseHei / curHei;\n    }\n    onLoadComplete() {\n        const size = this.mWorld.getSize();\n        const data = this.mShowData[0];\n        const uiDisplay = data.display[0];\n        const url = game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(uiDisplay.texturePath);\n        const imgX = -this.mBorder.width / 2;\n        const imgY = -this.mBorder.height / 2;\n        const scaleX = uiDisplay.scaleX;\n        const scaleY = uiDisplay.scaleY;\n        let scale = 1;\n        const med = this.mWorld.uiManager.getMediator(_InteractivePanelMediator__WEBPACK_IMPORTED_MODULE_2__[\"InteractivePanelMediator\"].NAME);\n        switch (uiDisplay.horizontal) {\n            case pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_def\"].HorizontalAlignment.HORIZONTAL_LEFT:\n                this.mLeftFaceIcon.setTexture(url);\n                this.mLeftFaceIcon.setData(\"nodeID\", uiDisplay.node.id);\n                this.mLeftBaseScaleX = scaleX;\n                this.mLeftBaseScaleY = scaleY;\n                scale = this.getScale(InteractivePanel.baseWidth, InteractivePanel.baseHeight, this.mLeftFaceIcon.width, this.mLeftFaceIcon.height);\n                this.mLeftFaceIcon.scaleX = scaleX * scale;\n                this.mLeftFaceIcon.scaleY = scaleY * scale;\n                this.mLeftFaceIcon.x = imgX + 200;\n                // this.mLeftFaceIcon.y = desConWorldY - this.mLeftFaceIcon.height / 2;\n                // this.mLeftFaceIcon.y = imgY + this.mLeftFaceIcon.height / 4;\n                this.mLeftFaceIcon.setInteractive();\n                this.addAt(this.mLeftFaceIcon, 0);\n                this.mLeftFaceIcon.visible = true;\n                this.mLeftFaceIcon.off(\"pointerup\", this.leftFaceClick, this);\n                this.mLeftFaceIcon.on(\"pointerup\", this.leftFaceClick, this);\n                break;\n            case pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_def\"].HorizontalAlignment.HORIZONTAL_CENTER:\n                this.mMidFaceIcon.setTexture(url);\n                this.mMidFaceIcon.setData(\"nodeID\", uiDisplay.node.id);\n                this.mMidBaseScaleX = scaleX;\n                this.mMidBaseScaleY = scaleY;\n                scale = this.getScale(InteractivePanel.baseWidth, InteractivePanel.baseHeight, this.mMidFaceIcon.width, this.mMidFaceIcon.height);\n                this.mMidFaceIcon.scaleX = scaleX * scale;\n                this.mMidFaceIcon.scaleY = scaleY * scale;\n                this.mMidFaceIcon.x = 0;\n                // this.mMidFaceIcon.y = desConWorldY - this.mMidFaceIcon.height / 2;\n                // this.mMidFaceIcon.y = imgY + this.mMidFaceIcon.height / 4;\n                this.addAt(this.mMidFaceIcon, 0);\n                this.mMidFaceIcon.visible = true;\n                this.mMidFaceIcon.setInteractive();\n                this.mLeftFaceIcon.off(\"pointerup\", this.midFaceClick, this);\n                this.mMidFaceIcon.on(\"pointerup\", this.midFaceClick, this);\n                break;\n            case pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_def\"].HorizontalAlignment.HORIZONTAL_RIGHT:\n                this.mRightFaceIcon.setTexture(url);\n                this.mRightFaceIcon.setData(\"nodeID\", uiDisplay.node.id);\n                this.mRightBaseScaleX = scaleX;\n                this.mRightBaseScaleY = scaleY;\n                scale = this.getScale(InteractivePanel.baseWidth, InteractivePanel.baseHeight, this.mRightFaceIcon.width, this.mRightFaceIcon.height);\n                this.mRightFaceIcon.scaleX = scaleX * scale;\n                this.mRightFaceIcon.scaleY = scaleY * scale;\n                this.mRightFaceIcon.x = 200;\n                // this.mRightFaceIcon.y = desConWorldY - this.mRightFaceIcon.height / 2;\n                // this.mRightFaceIcon.y = imgY + this.mRightFaceIcon.height / 4;\n                this.addAt(this.mRightFaceIcon, 0);\n                this.mRightFaceIcon.visible = true;\n                this.mRightFaceIcon.setInteractive();\n                this.mRightFaceIcon.off(\"pointerup\", this.rightFaceClick, this);\n                this.mRightFaceIcon.on(\"pointerup\", this.rightFaceClick, this);\n                break;\n        }\n        this.resize();\n    }\n    rightFaceClick(pointer) {\n        if (!this.checkPointer(pointer))\n            return;\n        const med = this.mWorld.uiManager.getMediator(_InteractivePanelMediator__WEBPACK_IMPORTED_MODULE_2__[\"InteractivePanelMediator\"].NAME);\n        if (!med)\n            return;\n        med.componentClick(this.mRightFaceIcon.getData(\"nodeID\"));\n    }\n    midFaceClick(pointer) {\n        if (!this.checkPointer(pointer))\n            return;\n        const med = this.mWorld.uiManager.getMediator(_InteractivePanelMediator__WEBPACK_IMPORTED_MODULE_2__[\"InteractivePanelMediator\"].NAME);\n        if (!med)\n            return;\n        med.componentClick(this.mMidFaceIcon.getData(\"nodeID\"));\n    }\n    leftFaceClick(pointer) {\n        if (!this.checkPointer(pointer))\n            return;\n        const med = this.mWorld.uiManager.getMediator(_InteractivePanelMediator__WEBPACK_IMPORTED_MODULE_2__[\"InteractivePanelMediator\"].NAME);\n        if (!med)\n            return;\n        med.componentClick(this.mLeftFaceIcon.getData(\"nodeID\"));\n    }\n    descConClick(pointer) {\n        if (!this.checkPointer(pointer))\n            return;\n        const med = this.mWorld.uiManager.getMediator(_InteractivePanelMediator__WEBPACK_IMPORTED_MODULE_2__[\"InteractivePanelMediator\"].NAME);\n        if (!this.mDescCon.getData(\"nodeID\") || !med)\n            return;\n        med.componentClick(this.mDescCon.getData(\"nodeID\"));\n    }\n    nameConClick(pointer) {\n        if (!this.checkPointer(pointer))\n            return;\n        const med = this.mWorld.uiManager.getMediator(_InteractivePanelMediator__WEBPACK_IMPORTED_MODULE_2__[\"InteractivePanelMediator\"].NAME);\n        if (!this.mNameCon.getData(\"nodeID\") || !med)\n            return;\n        med.componentClick(this.mNameCon.getData(\"nodeID\"));\n    }\n    checkPointer(pointer) {\n        return Math.abs(pointer.downX - pointer.upX) < this.mDisDelection &&\n            Math.abs(pointer.downY - pointer.upY) < this.mDisDelection;\n    }\n    onLoadError(file) {\n    }\n    radioComplete() {\n        this.mRadioCom = true;\n        if (!this.mRadio)\n            return;\n        this.mRadio.x = 220;\n        this.mRadio.y = this.mDescCon.height + 200;\n        this.resize();\n    }\n}\nInteractivePanel.baseWidth = 720;\nInteractivePanel.baseHeight = 720;\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/InteractivePanel/InteractivePanel.ts?");

/***/ }),

/***/ "./src/ui/InteractivePanel/InteractivePanelMediator.ts":
/*!*************************************************************!*\
  !*** ./src/ui/InteractivePanel/InteractivePanelMediator.ts ***!
  \*************************************************************/
/*! exports provided: InteractivePanelMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InteractivePanelMediator\", function() { return InteractivePanelMediator; });\n/* harmony import */ var _InteractivePanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InteractivePanel */ \"./src/ui/InteractivePanel/InteractivePanel.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass InteractivePanelMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BaseMediator\"] {\n    constructor(layerManager, scene, world) {\n        super();\n        this.mUIType = tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"UIType\"].Monopoly;\n        this.mScene = scene;\n        this.world = world;\n    }\n    isShow() {\n        if (!this.mView)\n            return false;\n        return this.mView.isShow();\n    }\n    isSceneUI() {\n        return false;\n    }\n    resize() {\n        if (this.mView && this.mView.isShow)\n            return this.mView.resize();\n    }\n    getView() {\n        return this.mView;\n    }\n    show(param) {\n        if (this.mView && this.isShow()) {\n            return;\n        }\n        this.mView = new _InteractivePanel__WEBPACK_IMPORTED_MODULE_0__[\"InteractivePanel\"](this.mScene, this.world);\n        this.mView.show(param);\n        super.show(param);\n    }\n    update(param) {\n        if (!this.mView || !this.mView.isShow) {\n            return;\n        }\n        super.update(param);\n    }\n    hide() {\n        this.mShow = false;\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = null;\n        }\n    }\n    destroy() {\n        this.world = null;\n        this.mScene = null;\n        this.mParam = null;\n        super.destroy();\n    }\n    componentClick(componentID) {\n        if (this.mParam) {\n            this.world.roomManager.currentRoom.playerManager.actor.getInteractive().requestTargetUI(this.mParam[0].id, componentID);\n        }\n    }\n}\nInteractivePanelMediator.NAME = \"InteractivePanelMediator\";\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/InteractivePanel/InteractivePanelMediator.ts?");

/***/ }),

/***/ "./src/ui/InteractivePanel/index.ts":
/*!******************************************!*\
  !*** ./src/ui/InteractivePanel/index.ts ***!
  \******************************************/
/*! exports provided: InteractivePanel, InteractivePanelMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _InteractivePanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./InteractivePanel */ \"./src/ui/InteractivePanel/InteractivePanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"InteractivePanel\", function() { return _InteractivePanel__WEBPACK_IMPORTED_MODULE_0__[\"InteractivePanel\"]; });\n\n/* harmony import */ var _InteractivePanelMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InteractivePanelMediator */ \"./src/ui/InteractivePanel/InteractivePanelMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"InteractivePanelMediator\", function() { return _InteractivePanelMediator__WEBPACK_IMPORTED_MODULE_1__[\"InteractivePanelMediator\"]; });\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/InteractivePanel/index.ts?");

/***/ }),

/***/ "./src/ui/ItemDetail/ItemDetail.ts":
/*!*****************************************!*\
  !*** ./src/ui/ItemDetail/ItemDetail.ts ***!
  \*****************************************/
/*! exports provided: ItemDetail */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItemDetail\", function() { return ItemDetail; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\nclass ItemDetail extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.mBtnWid = 100;\n        this.mBtnHei = 40;\n        this.mWid = 0;\n        this.mHei = 0;\n    }\n    getBtnList() {\n        return this.mBtnList;\n    }\n    resize(wid = 0, hei = 0) {\n        const size = this.mWorld.getSize();\n        if (this.mWorld.game.device.os.desktop) {\n            this.x = size.width - (this.width + this.mBtnWid) / 2 * this.mWorld.uiScale >> 1;\n            this.y = size.height - this.height * this.mWorld.uiScale >> 1;\n        }\n        else {\n            this.x = size.width - (this.width + this.mBtnWid) / 2 * this.mWorld.uiScale >> 1;\n            this.y = size.height - this.height * this.mWorld.uiScale >> 1;\n        }\n        this.scale = this.mWorld.uiScale;\n    }\n    show(param) {\n        this.mShowData = param;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        this.mShow = true;\n        const data = this.mShowData[0];\n        if (data.display.length > 0) {\n            this.loadIcon(data.display[0]);\n        }\n        if (data.text.length > 0) {\n            this.setText(data.text[0].text);\n        }\n        if (data.button.length > 0) {\n            this.mBtnList = [];\n            let btn;\n            const len = data.button.length;\n            let preY = 20;\n            const preX = this.mWid + 50;\n            for (let i = 0; i < len; i++) {\n                const btnData = data.button[i];\n                btn = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NineSliceButton\"](this.mScene, 0, 0, this.mBtnWid, this.mBtnHei, game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getName(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getName(), btnData.text, this.dpr, this.scale, game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getConfig(), btnData);\n                this.mBtnList.push(btn);\n                btn.x = preX;\n                btn.y = preY;\n                preY += btn.height + 40;\n                this.add(btn);\n            }\n        }\n        const bg = this.mScene.add.graphics();\n        bg.fillStyle(0, .6);\n        bg.fillRoundedRect(0, 0, this.mWid, this.mHei, 6);\n        this.addAt(bg, 0);\n        this.setSize(this.mWid + 120, this.mHei);\n        this.resize();\n        this.setInteractive();\n    }\n    setText(value) {\n        this.mDescTF.setText(value);\n        this.mHei += this.mDescTF.y + this.mDescTF.height + 10;\n    }\n    loadIcon(value) {\n        if (this.mIcon) {\n            this.mIcon.load(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(value), () => {\n                this.mHei += this.mIcon.y + this.mIcon.height;\n                // if (this.mCallBack) this.mCallBack();\n            });\n        }\n    }\n    hide() {\n        this.disInteractive();\n        super.hide();\n    }\n    destroy() {\n        if (this.mBtnList) {\n            this.mBtnList.forEach((btn) => {\n                btn.destroy();\n                btn = null;\n            });\n            this.mBtnList = null;\n        }\n        this.mResStr = \"\";\n        this.mResPng = \"\";\n        this.mResJson = \"\";\n        if (this.mNameTF)\n            this.mNameTF.destroy(true);\n        if (this.mDescTF)\n            this.mDescTF.destroy(true);\n        if (this.mIcon)\n            this.mIcon.destroy();\n        this.mNameTF = null;\n        this.mDescTF = null;\n        this.mIcon = null;\n        this.mWid = 0;\n        this.mHei = 0;\n        super.destroy();\n    }\n    preload() {\n        this.mResStr = \"itemDetail\";\n        this.mResPng = \"ui/bag/bagView.png\";\n        this.mResJson = \"ui/bag/bagView.json\";\n        if (!this.mScene) {\n            return;\n        }\n        this.mScene.load.atlas(game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getName(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getPNG(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getJSON());\n        this.mScene.load.atlas(\"itemDetail\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getRes(\"ui/bag/bagView.png\"), game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getRes(\"ui/bag/bagView.json\"));\n        super.preload();\n    }\n    init() {\n        const size = this.mWorld.getSize();\n        this.mWid = 290;\n        this.mHei = 0;\n        this.mIcon = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DragDropIcon\"](this.mScene, 30, 25);\n        this.add(this.mIcon);\n        this.mNameTF = this.scene.make.text({\n            style: {\n                fontFamily: \"YaHei\",\n                fontSize: 20,\n                origin: { x: 0, y: 0 },\n                wordWrap: { width: 250, useAdvancedWrap: true }\n            }\n        }, false);\n        this.mNameTF.setFontStyle(\"bold\");\n        this.mNameTF.setAlign(\"left\");\n        this.mNameTF.x = this.mIcon.x + this.mIcon.width;\n        this.mNameTF.y = this.mIcon.y;\n        this.add(this.mNameTF);\n        this.mDescTF = this.scene.make.text({\n            style: {\n                fontFamily: \"YaHei\",\n                fontSize: 25,\n                origin: { x: 0, y: 0 },\n                wordWrap: { width: 250, useAdvancedWrap: true }\n            }\n        }, false);\n        this.mDescTF.setFontStyle(\"bold\");\n        this.mDescTF.setAlign(\"left\");\n        this.mDescTF.x = this.mIcon.x - this.mIcon.width / 2;\n        this.mDescTF.y = this.mIcon.y + this.mIcon.height + 20;\n        this.add(this.mDescTF);\n        this.mInitialized = true;\n        this.show(this.mShowData);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/ItemDetail/ItemDetail.ts?");

/***/ }),

/***/ "./src/ui/ItemDetail/ItemDetailMediator.ts":
/*!*************************************************!*\
  !*** ./src/ui/ItemDetail/ItemDetailMediator.ts ***!
  \*************************************************/
/*! exports provided: ItemDetailMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItemDetailMediator\", function() { return ItemDetailMediator; });\n/* harmony import */ var _ItemDetail__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ItemDetail */ \"./src/ui/ItemDetail/ItemDetail.ts\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nclass ItemDetailMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"BaseMediator\"] {\n    constructor(layerManager, scene, world) {\n        super();\n        this.world = world;\n        this.mScene = scene;\n        this.mUIType = tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"UIType\"].Tips;\n        this.mLayerManager = layerManager;\n    }\n    isSceneUI() {\n        return false;\n    }\n    isShow() {\n        return this.mView ? this.mView.isShow() : false;\n    }\n    show(param) {\n        if (this.mView && this.isShow()) {\n            return;\n        }\n        this.mView = new _ItemDetail__WEBPACK_IMPORTED_MODULE_0__[\"ItemDetail\"](this.mScene, this.world);\n        this.mView.show(param);\n        this.mLayerManager.addToToolTipsLayer(this.mView);\n        this.mScene.input.on(\"gameobjectdown\", this.onBtnHandler, this);\n        this.mShow = true;\n    }\n    update(param) {\n        super.update(param);\n    }\n    hide() {\n        if (!this.mView)\n            return;\n        this.mScene.input.off(\"gameobjectdown\", this.onBtnHandler, this);\n        this.mView.hide();\n        this.mView = null;\n        super.hide();\n    }\n    destroy() {\n        this.mScene.input.off(\"gameobjectdown\", this.onBtnHandler, this);\n        super.destroy();\n    }\n    onBtnHandler(pointer, gameobject) {\n        if (!gameobject)\n            return;\n        if (gameobject instanceof tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"NineSliceButton\"]) {\n            const param = this.mParam[0];\n            const pkt = new net_socket_packet__WEBPACK_IMPORTED_MODULE_2__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_TARGET_UI);\n            const content = pkt.content;\n            content.uiId = param.id;\n            content.componentId = gameobject.getBtnData().node.id;\n            this.world.connection.send(pkt);\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/ItemDetail/ItemDetailMediator.ts?");

/***/ }),

/***/ "./src/ui/ItemDetail/index.ts":
/*!************************************!*\
  !*** ./src/ui/ItemDetail/index.ts ***!
  \************************************/
/*! exports provided: ItemDetail, ItemDetailMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ItemDetail__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ItemDetail */ \"./src/ui/ItemDetail/ItemDetail.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ItemDetail\", function() { return _ItemDetail__WEBPACK_IMPORTED_MODULE_0__[\"ItemDetail\"]; });\n\n/* harmony import */ var _ItemDetailMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ItemDetailMediator */ \"./src/ui/ItemDetail/ItemDetailMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ItemDetailMediator\", function() { return _ItemDetailMediator__WEBPACK_IMPORTED_MODULE_1__[\"ItemDetailMediator\"]; });\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/ItemDetail/index.ts?");

/***/ }),

/***/ "./src/ui/ItemPopCard/ItemPopCardMediator.ts":
/*!***************************************************!*\
  !*** ./src/ui/ItemPopCard/ItemPopCardMediator.ts ***!
  \***************************************************/
/*! exports provided: ItemPopCardMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItemPopCardMediator\", function() { return ItemPopCardMediator; });\n/* harmony import */ var _ItemPopCardPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ItemPopCardPanel */ \"./src/ui/ItemPopCard/ItemPopCardPanel.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass ItemPopCardMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BaseMediator\"] {\n    constructor($layerManager, $scene, worldService) {\n        super();\n        this.scene = $scene;\n        this.world = worldService;\n        this.layerManager = $layerManager;\n    }\n    show(param) {\n        if (this.mView && this.mView.isShow() || this.mShow) {\n            return;\n        }\n        this.mView = new _ItemPopCardPanel__WEBPACK_IMPORTED_MODULE_0__[\"ItemPopCardPanel\"](this.scene, this.world);\n        this.mView.show(param);\n        this.mView.on(\"close\", this.onCloseHandler, this);\n        this.layerManager.addToDialogLayer(this.mView);\n    }\n    onCloseHandler() {\n        if (!this.mView)\n            return;\n        this.mView.hide();\n        this.mView = undefined;\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/ItemPopCard/ItemPopCardMediator.ts?");

/***/ }),

/***/ "./src/ui/ItemPopCard/ItemPopCardPanel.ts":
/*!************************************************!*\
  !*** ./src/ui/ItemPopCard/ItemPopCardPanel.ts ***!
  \************************************************/
/*! exports provided: ItemPopCardPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItemPopCardPanel\", function() { return ItemPopCardPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var copy_text_to_clipboard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! copy-text-to-clipboard */ \"./node_modules/copy-text-to-clipboard/index.js\");\n/* harmony import */ var copy_text_to_clipboard__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(copy_text_to_clipboard__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Market_DetailDisplay__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Market/DetailDisplay */ \"./src/ui/Market/DetailDisplay.ts\");\n\n\n\n\n\n\nclass ItemPopCardPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, worldService) {\n        super(scene, worldService);\n        this.key = \"item_pop_card\";\n        this.mPressDelay = 1000;\n        this.setTween(false);\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        this.mDetailDisplay.on(\"show\", this.onShowHandler, this);\n        this.on(\"pointerup\", this.onCloseHandler, this);\n        this.mCloseBtn.on(\"pointerup\", this.onCloseHandler, this);\n        this.mNickName.on(\"pointerup\", this.onPointerNickNameHandler, this);\n        this.mNickName.on(\"pointerdown\", this.onPointerNickNameDownHandler, this);\n        this.mDesText.on(\"pointerdown\", this.onPointerDesDownHandler, this);\n        this.mDesText.on(\"pointerup\", this.onPointerNickNameHandler, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.mDetailDisplay.off(\"show\", this.onShowHandler, this);\n        this.off(\"pointerup\", this.onCloseHandler, this);\n        this.mCloseBtn.off(\"pointerup\", this.onCloseHandler, this);\n        this.mNickName.off(\"pointerup\", this.onPointerNickNameHandler, this);\n        this.mNickName.off(\"pointerdown\", this.onPointerNickNameDownHandler, this);\n        this.mDesText.off(\"pointerdown\", this.onPointerDesDownHandler, this);\n        this.mDesText.off(\"pointerup\", this.onPointerNickNameHandler, this);\n    }\n    resize(w, h) {\n        // const scale = this.scene.cameras.main.height / 1920;\n        const zoom = this.mWorld.uiScale;\n        const width = this.scene.cameras.main.width / zoom;\n        const height = this.scene.cameras.main.height / zoom;\n        const centerX = this.scene.cameras.main.centerX / zoom;\n        const centerY = this.scene.cameras.main.centerY / zoom;\n        // this.setScale(scale);\n        this.setSize(width, height);\n        // this.mCardContainer.setScale(scale);\n        this.mCardContainer.x = centerX; // - this.mCardContainer.width / 2;\n        this.mCardContainer.y = centerY; // - this.mCardContainer.height / 2;\n        this.mCloseBtn.x = centerX;\n        this.mCloseBtn.y = centerY + this.mCardContainer.height / 2 + 48 * this.dpr;\n        // this.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        // this.mDetailDisplay.scale = 1 / scale;\n        // this.mCloseBtn.x = centerX;\n        // this.mCloseBtn.y = centerY;\n        // const graphics = this.scene.make.graphics(undefined, false);\n        // graphics.fillStyle(0xFF9900, 0.7);\n        // graphics.fillRect(0, 0, centerX, centerY);\n        // this.add(graphics);\n        // this.setSize(width, height);\n        super.resize(w, h);\n    }\n    setProp() {\n        if (!this.mShowData) {\n            return;\n        }\n        const prop = this.mShowData[0].prop;\n        if (!prop) {\n            return;\n        }\n        this.mDesText.setText(prop.des);\n        this.mNickName.setText(prop.name);\n        if (prop.source) {\n            this.mSource.setText(game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"item.source\") + prop.source);\n        }\n        else {\n            this.mSource.setText(\"\");\n        }\n        const resource = this.mShowData[0].display;\n        if (resource) {\n            if (resource.display) {\n                this.mDetailDisplay.loadDisplay(resource);\n            }\n            else if (resource.avatar) {\n                this.mDetailDisplay.loadAvatar(resource.avatar);\n            }\n            else {\n                this.mDetailDisplay.loadUrl(prop.icon);\n            }\n        }\n    }\n    preload() {\n        this.addAtlas(this.key, \"item_pop_card/item_pop_card.png\", \"item_pop_card/item_pop_card.json\");\n        // this.scene.load.atlas(this.key, Url.getRes(\"ui/item_pop_card/item_pop_card.png\"), Url.getRes(\"ui/item_pop_card/item_pop_card.json\"));\n        super.preload();\n    }\n    init() {\n        this.mCardContainer = this.scene.make.container({\n            width: 325 * this.dpr,\n            height: 468 * this.dpr\n        }, false);\n        this.mCardContainer.setSize(325 * this.dpr, 468 * this.dpr);\n        this.mCardContainer.setInteractive();\n        this.mBorder = this.scene.make.graphics(undefined, false);\n        this.mBorder.fillGradientStyle(0x6f75ff, 0x6f75ff, 0x01cdff, 0x01cdff);\n        this.mBorder.fillRect(-this.mCardContainer.width / 2, -this.mCardContainer.height / 2, this.mCardContainer.width, this.mCardContainer.height);\n        // this.mBorder.setInteractive();\n        const background = this.scene.make.image({\n            key: this.key,\n            frame: \"bg.png\"\n        }, false);\n        background.y = 23 * this.dpr - background.height / 2;\n        const nickNameBg = this.scene.make.image({\n            y: 42 * this.dpr,\n            key: this.key,\n            frame: \"name_bg.png\"\n        });\n        this.mNickName = this.scene.make.text({\n            y: 42 * this.dpr,\n            style: {\n                fontSize: 18 * this.dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5).setInteractive();\n        const desBg = this.scene.make.image({\n            y: 138 * this.dpr,\n            key: this.key,\n            frame: \"des_bg.png\"\n        }, false);\n        this.mDesText = this.scene.make.text({\n            x: desBg.x - desBg.width / 2 + 12 * this.dpr,\n            y: desBg.y - desBg.height / 2 + 10 * this.dpr,\n            style: {\n                fontSize: 10 * this.dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                wordWrap: {\n                    width: 240 * this.dpr,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false).setInteractive();\n        this.mDetailDisplay = new _Market_DetailDisplay__WEBPACK_IMPORTED_MODULE_2__[\"DetailDisplay\"](this.scene);\n        this.mDetailDisplay.scale = this.dpr * 2;\n        // this.mDetailDisplay.y = -150;\n        this.mCloseBtn = this.scene.make.image({\n            key: this.key,\n            frame: \"close.png\"\n        }, false).setInteractive();\n        this.mSource = this.scene.make.text({\n            x: desBg.x - desBg.width / 2 + 12 * this.dpr,\n            y: desBg.y + desBg.height / 2 - 23 * this.dpr,\n            style: {\n                fontSize: 10 * this.dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false);\n        this.add(this.mCardContainer);\n        this.mCardContainer.add([this.mBorder, background, desBg, this.mDetailDisplay, nickNameBg, this.mNickName, this.mDesText, this.mSource]);\n        this.add(this.mCloseBtn);\n        this.resize(0, 0);\n        super.init();\n        this.setInteractive();\n        this.setProp();\n    }\n    onCloseHandler() {\n        this.emit(\"close\");\n        clearTimeout(this.mPressTime);\n        this.mNickNameDown = false;\n    }\n    onPointerNickNameHandler() {\n        // if (this.mNickNameDown) {\n        //   copy(this.mNickName.text);\n        //   const content = {\n        //     noticeContext: \"\"\n        //   };\n        //   this.mWorld.emitter.emit(MessageType.SHOW_NOTICE, { content });\n        // }\n        clearTimeout(this.mPressTime);\n        this.mNickNameDown = false;\n    }\n    onPointerNickNameDownHandler() {\n        // this.mNickNameDown = true;\n        this.mPressTime = setTimeout(() => {\n            this.copyName();\n        }, this.mPressDelay);\n    }\n    onPointerDesDownHandler() {\n        this.mPressTime = setTimeout(() => {\n            this.copyDes();\n        }, this.mPressDelay);\n    }\n    copyName() {\n        if (this.mNickName) {\n            copy_text_to_clipboard__WEBPACK_IMPORTED_MODULE_1__(this.mNickName.text);\n            const content = {\n                noticeContext: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"item.copy_suc\", { name: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"item.name\") })\n            };\n            this.mWorld.emitter.emit(game_core__WEBPACK_IMPORTED_MODULE_0__[\"MessageType\"].SHOW_NOTICE, { content });\n        }\n    }\n    copyDes() {\n        if (this.mDesText) {\n            copy_text_to_clipboard__WEBPACK_IMPORTED_MODULE_1__(this.mDesText.text);\n            const content = {\n                noticeContext: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"item.copy_suc\", { name: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"item.des\") })\n            };\n            this.mWorld.emitter.emit(game_core__WEBPACK_IMPORTED_MODULE_0__[\"MessageType\"].SHOW_NOTICE, { content });\n        }\n    }\n    onShowHandler(image) {\n        this.mDetailDisplay.y = -this.mCardContainer.height / 4;\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/ItemPopCard/ItemPopCardPanel.ts?");

/***/ }),

/***/ "./src/ui/ItemPopCard/index.ts":
/*!*************************************!*\
  !*** ./src/ui/ItemPopCard/index.ts ***!
  \*************************************/
/*! exports provided: ItemPopCardMediator, ItemPopCardPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ItemPopCardMediator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ItemPopCardMediator */ \"./src/ui/ItemPopCard/ItemPopCardMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ItemPopCardMediator\", function() { return _ItemPopCardMediator__WEBPACK_IMPORTED_MODULE_0__[\"ItemPopCardMediator\"]; });\n\n/* harmony import */ var _ItemPopCardPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ItemPopCardPanel */ \"./src/ui/ItemPopCard/ItemPopCardPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ItemPopCardPanel\", function() { return _ItemPopCardPanel__WEBPACK_IMPORTED_MODULE_1__[\"ItemPopCardPanel\"]; });\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/ItemPopCard/index.ts?");

/***/ }),

/***/ "./src/ui/Market/DetailDisplay.ts":
/*!****************************************!*\
  !*** ./src/ui/Market/DetailDisplay.ts ***!
  \****************************************/
/*! exports provided: DetailDisplay */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DetailDisplay\", function() { return DetailDisplay; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass DetailDisplay extends Phaser.GameObjects.Container {\n    constructor(scene) {\n        super(scene);\n    }\n    loadDisplay(content) {\n        this.mDisplay = content;\n        this.destroyDragon();\n        if (!this.mImage) {\n            this.mImage = this.scene.make.image(undefined, false);\n        }\n        this.add(this.mImage);\n        if (content.display) {\n            const display = content.display;\n            if (this.scene.textures.exists(display.texturePath)) {\n                this.onCompleteHandler();\n            }\n            else {\n                this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.onCompleteHandler, this);\n                this.scene.load.atlas(display.texturePath, game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(display.texturePath), game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(display.dataPath));\n                this.scene.load.start();\n            }\n        }\n    }\n    loadAvatar(content, scale = 1, offset) {\n        if (!this.mDragonboneDisplay) {\n            this.mDragonboneDisplay = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DragonbonesDisplay\"](this.scene, undefined, undefined, true);\n            if (offset) {\n                this.mDragonboneDisplay.x += offset.x;\n                this.mDragonboneDisplay.y += offset.y;\n            }\n        }\n        if (this.mImage) {\n            this.remove(this.mImage);\n        }\n        this.mDragonboneDisplay.once(\"initialized\", () => {\n            this.mDragonboneDisplay.play({ animationName: \"idle\", flip: false });\n        });\n        this.mDragonboneDisplay.load(new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DragonbonesModel\"]({\n            id: 0,\n            avatar: content.avatar\n        }));\n        this.mDragonboneDisplay.scale = scale;\n        this.add(this.mDragonboneDisplay);\n    }\n    loadUrl(url) {\n        this.mUrl = url;\n        if (this.mDisplay)\n            this.mDisplay = null;\n        this.destroyDragon();\n        if (!this.mImage) {\n            this.mImage = this.scene.make.image(undefined, false);\n        }\n        this.add(this.mImage);\n        if (this.scene.textures.exists(url)) {\n            this.onCompleteHandler();\n        }\n        else {\n            this.scene.load.image(url, game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(url));\n            this.scene.load.once(Phaser.Loader.Events.COMPLETE, this.onCompleteHandler, this);\n            this.scene.load.start();\n        }\n    }\n    setTexture(key, frame) {\n        this.destroyDragon();\n        if (!this.mImage) {\n            this.mImage = this.scene.make.image({\n                key,\n                frame\n            }, false);\n        }\n        else {\n            this.mImage.setTexture(key, frame);\n        }\n        this.setSize(this.mImage.width * this.scale, this.mImage.height * this.scale);\n        this.add(this.mImage);\n        this.emit(\"show\", this.mImage);\n    }\n    setNearest() {\n        if (this.mImage) {\n            this.mImage.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\n        }\n    }\n    get display() {\n        return this.mDisplay;\n    }\n    onCompleteHandler() {\n        if (!this.scene) {\n            return;\n        }\n        if (this.mDisplay) {\n            const display = this.mDisplay.display;\n            const ani = this.mDisplay.animations;\n            if (!ani || ani.length <= 0) {\n                return;\n            }\n            this.mImage.setTexture(this.mDisplay.display.texturePath, ani[0].frameName[0]);\n        }\n        else {\n            this.mImage.setTexture(this.mUrl);\n        }\n        this.setNearest();\n        this.setSize(this.mImage.width * this.scale, this.mImage.height * this.scale);\n        this.emit(\"show\", this.mImage);\n    }\n    destroyDragon() {\n        if (this.mDragonboneDisplay) {\n            this.mDragonboneDisplay.destroy();\n            this.mDragonboneDisplay = undefined;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Market/DetailDisplay.ts?");

/***/ }),

/***/ "./src/ui/Market/ElementDetail.ts":
/*!****************************************!*\
  !*** ./src/ui/Market/ElementDetail.ts ***!
  \****************************************/
/*! exports provided: ElementDetail */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ElementDetail\", function() { return ElementDetail; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _DetailDisplay__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DetailDisplay */ \"./src/ui/Market/DetailDisplay.ts\");\n\n\n\n\n\n\nclass ElementDetail extends Phaser.GameObjects.Container {\n    constructor(scene, world, $key, dpr, uiScale) {\n        super(scene);\n        this.key = $key;\n        this.mWorld = world;\n        this.uiScale = uiScale || 1;\n        this.dpr = dpr;\n        this.setPosition(0, 0);\n        // this.mBackground = this.scene.make.image({\n        //   x: this.scene.cameras.main.width >> 1,\n        //   key: this.key,\n        //   frame: \"bg\"\n        // });\n        // this.mBackground.y = (this.mBackground.height >> 1) + 43 * this.dpr;\n        this.mCounter = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"NumberCounter\"](this.scene, $key, 360, 700, this.dpr, uiScale);\n        const frame = this.scene.textures.getFrame(this.key, \"yellow_button_normal\");\n        let w = 60;\n        let h = 65;\n        if (frame) {\n            w = frame.width;\n            h = frame.height;\n        }\n        this.mBuyBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NineSliceButton\"](this.scene, 440, 700, 81 * this.dpr, 41 * this.dpr, this.key, \"yellow_button\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"market.buy_button\"), this.dpr, this.scale, {\n            left: 14 * this.dpr,\n            top: 14 * this.dpr,\n            right: w - 2 - 14 * this.dpr,\n            bottom: h - 2 - 14 * this.dpr\n        }).setScale(uiScale);\n        this.mBuyBtn.setTextStyle({\n            color: \"#976400\",\n            fontSize: 16 * this.dpr * uiScale,\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n        });\n        this.mBuyBtn.setFontStyle(\"bold\");\n        // this.mBuyBtn.setTextOffset(0, 10 * this.dpr);\n        this.mBuyBtn.on(\"pointerup\", this.onBuyHandler, this);\n        // this.mNickNameContainer = this.scene.make.container(undefined, false);\n        // this.mNickNameBg = this.scene.make.image({\n        //   key: this.key,\n        //   frame: \"name_bg\"\n        // }, false);\n        // this.mNickNameContainer.setSize(this.mNickNameBg.width, this.mNickNameBg.height);\n        this.mNickName = this.scene.make.text({\n            x: 7 * this.dpr,\n            y: 9 * this.dpr,\n            style: {\n                fontSize: 12 * this.dpr * uiScale,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                color: \"#FFFF00\",\n                align: \"center\"\n            }\n        });\n        this.mPriceContainer = this.scene.make.container(undefined, false);\n        this.mPriceIcon = this.scene.make.image({\n            x: -78,\n            key: this.key,\n            frame: \"iv_coin\"\n        }, false).setScale(uiScale);\n        this.mPriceText = this.scene.make.text({\n            x: 0,\n            style: {\n                fontSize: 14 * this.dpr * uiScale,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }).setOrigin(0.5);\n        const priceBg = this.scene.make.image({\n            key: this.key,\n            frame: \"price_bg\"\n        }).setScale(uiScale);\n        this.mDetailDisplay = new _DetailDisplay__WEBPACK_IMPORTED_MODULE_3__[\"DetailDisplay\"](this.scene);\n        this.mDetailDisplay.scale = this.dpr;\n        this.mDetailDisplay.y = 110 * this.dpr;\n        const bubbleW = 110 * this.dpr * this.uiScale;\n        const bubbleH = 96 * this.dpr * this.uiScale;\n        this.mDetailBubble = this.scene.make.graphics(undefined, false);\n        this.mDetailBubble.fillStyle(0xFFFFFF, 0.1);\n        this.mDetailBubble.fillRoundedRect(0, 0, bubbleW, bubbleH);\n        this.mDetailBubbleContainer = this.scene.make.container(undefined, false);\n        this.mDetailBubbleContainer.setSize(bubbleW, bubbleH);\n        this.mDesText = this.scene.make.text({\n            x: 8 * this.dpr,\n            y: 56 * this.dpr,\n            style: {\n                color: \"#32347b\",\n                fontSize: 10 * this.dpr * uiScale,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                wordWrap: {\n                    width: 90 * this.dpr * uiScale,\n                    useAdvancedWrap: true\n                }\n            }\n        }, false);\n        this.mSource = this.scene.make.text({\n            x: 8 * this.dpr,\n            y: 38 * this.dpr,\n            style: {\n                fontSize: 10 * this.dpr * uiScale,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            }\n        }, false);\n        this.add([this.mDetailDisplay, this.mPriceContainer, this.mCounter, this.mBuyBtn, this.mDetailBubbleContainer]);\n        this.mDetailBubbleContainer.add([this.mDetailBubble, this.mNickName, this.mDesText, this.mSource]);\n        this.mPriceContainer.add([priceBg, this.mPriceIcon, this.mPriceText]);\n        // this.mNickNameContainer.add([this.mNickNameBg, this.mNickName]);\n        this.addActionListener();\n    }\n    resize(w, h) {\n        const width = (this.scene.cameras.main.width);\n        const height = ((this.scene.cameras.main.height) >> 1) - 150;\n        const centerX = this.scene.cameras.main.centerX;\n        this.mBuyBtn.x = width - this.mBuyBtn.displayWidth / 2 - 10 * this.dpr * this.uiScale;\n        this.mBuyBtn.y = this.height - this.y - this.mBuyBtn.displayHeight / 2 - 12 * this.dpr * this.uiScale;\n        const counterX = this.mBuyBtn.x - this.mBuyBtn.displayWidth / 2 - this.mCounter.displayWidth / 2 - 17 * this.dpr * this.uiScale;\n        // if (counterX < this.mCounter.displayWidth / 2 + 10) {\n        //   counterX = this.mCounter.displayWidth / 2 + 10;\n        // }\n        this.mCounter.x = counterX;\n        this.mCounter.y = this.mBuyBtn.y;\n        this.mDetailBubbleContainer.x = 10 * this.dpr;\n        const endW = width - (width - this.mCounter.x) - this.mCounter.width / 2;\n        if (this.mDetailBubbleContainer.displayWidth + this.mDetailBubbleContainer.x + 10 * this.dpr > endW) {\n            const bubbleW = endW - 16 * this.dpr * this.uiScale;\n            this.mDesText.setWordWrapWidth(bubbleW - 10 * this.dpr * this.uiScale, true);\n            this.resizeDesBubble(bubbleW, this.mDetailBubbleContainer.height);\n        }\n        // this.mDetailBubbleContainer.y = this.height - this.y - this.mDetailBubbleContainer.height - 6 * this.dpr;\n        this.mPriceContainer.x = this.mCounter.x;\n        this.mPriceContainer.y = this.mCounter.y - 35 * this.dpr;\n        this.mDetailDisplay.x = centerX;\n        this.mDetailDisplay.y = (this.height - this.y) / 2;\n        // this.mDetailBubbleContainer.y = this.mDetailDisplay.y;\n        const clickW = width * 0.8;\n        const clickH = height * 0.7;\n        this.setInteractive(new Phaser.Geom.Rectangle((width >> 1) + (width - clickW >> 1), height >> 1, clickW, clickH), Phaser.Geom.Rectangle.Contains);\n        // test interactive\n        // const graphics = this.scene.make.graphics(undefined, false);\n        // graphics.fillStyle(0xFF9900, 0.5);\n        // graphics.fillRect(width - clickW >> 1, 0, clickW, clickH);\n        // this.add(graphics);\n        this.mCounter.resize();\n    }\n    addActionListener() {\n        if (!this.mCounter) {\n            return;\n        }\n        this.mCounter.addActionListener();\n        this.mCounter.on(\"change\", this.onChangeCounterHandler, this);\n        // this.mDetailDisplay.on(\"show\", this.onShowDisplayHandler, this);\n        this.on(\"pointerup\", this.onPointerUpHandler, this);\n    }\n    removeActionListener() {\n        if (!this.mCounter) {\n            return;\n        }\n        this.mCounter.removeActionListener();\n        this.mCounter.off(\"change\", this.onChangeCounterHandler, this);\n        // this.mDetailDisplay.off(\"show\", this.onShowDisplayHandler, this);\n        this.off(\"gameobjectup\", this.onPointerUpHandler, this);\n    }\n    setProp(prop) {\n        this.mSelectedProp = prop;\n        this.mNickName.setText(prop.shortName || prop.name);\n        this.mDesText.setText(prop.des);\n        if (prop.price && prop.price.length > 0) {\n            this.mPriceIcon.setTexture(this.key, game_core__WEBPACK_IMPORTED_MODULE_0__[\"Coin\"].getIcon(prop.price[0].coinType));\n            this.updatePrice(prop.price[0].price.toString());\n        }\n        else {\n            this.mPriceText.setText(\"\");\n        }\n        if (prop.source) {\n            this.mSource.setText(` ${prop.source}`);\n        }\n        else {\n            this.mSource.setText(\"\");\n        }\n        this.resizeDesBubble();\n        this.mCounter.setCounter(1);\n    }\n    setResource(content) {\n        if (content.display) {\n            this.mDetailDisplay.loadDisplay(content);\n        }\n        else if (content.avatar) {\n            const player = this.mWorld.roomManager.currentRoom.playerManager.actor;\n            const avatar = player.model.avatar;\n            for (const key in avatar) {\n                if (avatar.hasOwnProperty(key)) {\n                    const element = avatar[key];\n                    if (element && !content.avatar[key])\n                        content.avatar[key] = element;\n                }\n            }\n            const offset = new Phaser.Geom.Point(0, 35 * 2);\n            this.mDetailDisplay.loadAvatar(content, 2, offset);\n        }\n        else {\n            this.mDetailDisplay.loadUrl(this.mSelectedProp.icon);\n        }\n        // this.mDetailDisplay.loadDisplay(content.display || this.mSelectedProp.icon);\n    }\n    updatePrice(price) {\n        this.mPriceText.setText(price);\n        this.mPriceIcon.x = this.mPriceText.x - this.mPriceText.width / 2 - 16 * this.dpr;\n    }\n    onBuyHandler() {\n        if (!this.mSelectedProp) {\n            return;\n        }\n        const prop = pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_def\"].OrderCommodities.create();\n        prop.id = this.mSelectedProp.id;\n        prop.quantity = this.mCounter.number;\n        prop.category = this.mSelectedProp.category;\n        this.emit(\"buyItem\", prop);\n    }\n    onChangeCounterHandler(num) {\n        if (!this.mSelectedProp) {\n            return;\n        }\n        if (!this.mSelectedProp.price || this.mSelectedProp.price.length < 1) {\n            return;\n        }\n        this.updatePrice((this.mSelectedProp.price[0].price * this.mCounter.number).toString());\n    }\n    onPointerUpHandler() {\n        this.emit(\"popItemCard\", this.mSelectedProp, this.mDetailDisplay.display);\n        this.mCounter.setBlur();\n    }\n    resizeDesBubble(w, h) {\n        // const bubbleW = 110 * this.dpr;\n        if (w === undefined)\n            w = this.mDetailBubbleContainer.width;\n        const bubbleH = this.mDesText.height + 60 * this.dpr * this.uiScale;\n        if (w === this.mDetailBubbleContainer.width && bubbleH === this.mDetailBubbleContainer.height) {\n            return;\n        }\n        this.mDetailBubble.clear();\n        this.mDetailBubble.fillStyle(0xFFFFFF, 0.1);\n        this.mDetailBubble.fillRoundedRect(0, 0, w, bubbleH);\n        this.mDetailBubbleContainer.setSize(w, bubbleH);\n        this.mDetailBubbleContainer.y = this.height - this.y - this.mDetailBubbleContainer.height - 6 * this.dpr;\n    }\n    onShowDisplayHandler(image) {\n        if (!image) {\n            return;\n        }\n        // this.mNickNameContainer.x = this.mDetailDisplay.x; // + this.mDetailDisplay.width / 2 - this.mNickNameContainer.width / 2;\n        // let _y = this.mDetailDisplay.y + this.mDetailDisplay.height / 2 + this.mNickNameContainer.height / 2 + 45;\n        // if (_y > this.mCounter.y - this.mNickNameContainer.height - 45) {\n        //   _y = this.mCounter.y - this.mNickNameContainer.height - 45;\n        // }\n        // this.mNickNameContainer.y = _y;\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Market/ElementDetail.ts?");

/***/ }),

/***/ "./src/ui/Market/Market.ts":
/*!*********************************!*\
  !*** ./src/ui/Market/Market.ts ***!
  \*********************************/
/*! exports provided: Market */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Market\", function() { return Market; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass Market extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor($world) {\n        super();\n        this.world = $world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_GET_MARKET_CATEGORIES, this.onGetMarketCategoriesHandler);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY, this.onQueryMarketHandler);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_MARKET_QUERY_COMMODITY_RESOURCE, this.onQueryCommodityResultHandler);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    /**\n     * \n     */\n    getMarkCategories() {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_MARKET_GET_CATEGORIES);\n        this.connection.send(packet);\n    }\n    queryMarket(page, category, subCategory) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_MARKET_QUERY);\n        const content = packet.content;\n        content.page = page;\n        content.category = category;\n        content.subcategory = subCategory;\n        this.connection.send(packet);\n    }\n    buyMarketCommodities(commodities) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_MARKET_BUY_ORDER_COMMODITIES);\n        const content = packet.content;\n        content.orderCommodities = commodities;\n        this.connection.send(packet);\n    }\n    queryCommodityResource(id, category) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_MARKET_QUERY_COMMODITY_RESOURCE);\n        const content = packet.content;\n        content.id = id;\n        content.category = category;\n        this.connection.send(packet);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    onGetMarketCategoriesHandler(packet) {\n        // const content: op_client.IOP_VIRTUAL_WORLD_RES_CLIENT_GET_MARKET_CATEGORIES = ;\n        this.mEvent.emit(\"getMarketCategories\", packet.content);\n    }\n    onQueryMarketHandler(packet) {\n        this.mEvent.emit(\"queryMarket\", packet.content);\n    }\n    onQueryCommodityResultHandler(packet) {\n        const content = packet.content;\n        this.mEvent.emit(\"queryCommodityResource\", packet.content);\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Market/Market.ts?");

/***/ }),

/***/ "./src/ui/Market/MarketItem.ts":
/*!*************************************!*\
  !*** ./src/ui/Market/MarketItem.ts ***!
  \*************************************/
/*! exports provided: MarketItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MarketItem\", function() { return MarketItem; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass MarketItem extends Phaser.GameObjects.Container {\n    constructor(scene, x, y, dpr, zoom) {\n        super(scene, x, y);\n        this.dpr = dpr;\n        this.mBackground = this.scene.make.image({\n            key: \"market\",\n            frame: \"border\"\n        }, false).setOrigin(0).setScale(zoom);\n        this.mBorder = this.scene.make.image({\n            x: 3 * dpr * zoom,\n            y: 3 * dpr * zoom,\n            key: \"market\",\n            frame: \"item_border\"\n        }, false).setOrigin(0).setScale(zoom);\n        // this.mBorder.x = -42 * this.dpr;\n        // this.mBorder.x = -this.mBackground.width / 2 + this.mBorder.width / 2 + (this.mBackground.height - this.mBorder.height / 2);\n        // this.mBorder.x = -(this.mBackground.displayWidth - this.mBorder.displayWidth) / 2 + (this.mBackground.displayHeight - this.mBorder.displayHeight) / 2;\n        this.mPropImage = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](scene, 0, 0);\n        this.mPropImage.scale = this.dpr * zoom;\n        this.mNickName = this.scene.make.text({\n            x: 62 * this.dpr * zoom,\n            y: 6 * this.dpr * zoom,\n            style: {\n                fontSize: 13 * this.dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                color: \"#3399cc\"\n            }\n        }, false);\n        this.mCoinIcon = this.scene.make.image({\n            x: 45 * this.dpr * zoom,\n            y: 40 * this.dpr * zoom,\n            key: \"market\",\n            frame: \"tuding_icon\"\n        }, false).setOrigin(0).setScale(zoom);\n        const priceBg = this.scene.make.image({\n            x: 62 * this.dpr * zoom,\n            y: 39 * this.dpr * zoom,\n            key: \"market\",\n            frame: \"price_border\"\n        }, false).setOrigin(0).setScale(zoom);\n        this.mPriceText = this.scene.make.text({\n            x: 92 * this.dpr * zoom,\n            y: 49 * this.dpr * zoom,\n            style: {\n                fontSize: 13 * this.dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                color: \"#996600\"\n            }\n        }).setOrigin(0.5);\n        this.mTagIcon = this.scene.make.image({\n            key: \"market\",\n            frame: \"tip_red\",\n            x: -86 * this.dpr,\n            y: -34 * this.dpr\n        }, false).setOrigin(0).setScale(zoom);\n        this.add([this.mBackground, this.mBorder, this.mPropImage, this.mNickName, priceBg, this.mCoinIcon, this.mPriceText]);\n        this.setSize(this.mBackground.displayWidth, this.mBackground.displayHeight);\n    }\n    setProp(content) {\n        this.mProp = content;\n        this.mPropImage.load(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(content.icon), this, this.onPropLoadComplete);\n        this.mPropImage.x = this.mBorder.x + this.mBorder.displayWidth / 2;\n        this.mPropImage.y = this.mBorder.y + this.mBorder.displayHeight / 2;\n        let nickname = content.shortName || content.name;\n        if (nickname.length > 4) {\n            const maxWidth = 50 * this.dpr;\n            for (let i = 4; i < nickname.length; i++) {\n                let text = nickname.slice(0, i);\n                const width = this.mNickName.setText(text).width;\n                if (width > maxWidth) {\n                    text += \"...\";\n                    nickname = text;\n                    break;\n                }\n            }\n        }\n        this.mNickName.setText(nickname);\n        this.mPriceText.setText(content.price[0].price.toString());\n        const coinIcon = game_core__WEBPACK_IMPORTED_MODULE_0__[\"Coin\"].getIcon(content.price[0].coinType);\n        this.mCoinIcon.setFrame(coinIcon);\n    }\n    onPropLoadComplete() {\n        if (this.mPropImage) {\n            const texture = this.mPropImage.texture;\n            if (texture) {\n                texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\n            }\n        }\n    }\n    onPointerUpHandler() {\n        this.emit(\"select\", this.mProp);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Market/MarketItem.ts?");

/***/ }),

/***/ "./src/ui/Market/MarketMediator.ts":
/*!*****************************************!*\
  !*** ./src/ui/Market/MarketMediator.ts ***!
  \*****************************************/
/*! exports provided: MarketMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MarketMediator\", function() { return MarketMediator; });\n/* harmony import */ var _MarketPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MarketPanel */ \"./src/ui/Market/MarketPanel.ts\");\n/* harmony import */ var _Market__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Market */ \"./src/ui/Market/Market.ts\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nclass MarketMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"BaseMediator\"] {\n    constructor($layerManager, $scene, world) {\n        super();\n        this.scene = $scene;\n        this.world = world;\n        this.layerManager = $layerManager;\n    }\n    show(param) {\n        if (this.mView && this.mView.isShow() || this.mShow) {\n            return;\n        }\n        this.mMarket = new _Market__WEBPACK_IMPORTED_MODULE_1__[\"Market\"](this.world);\n        this.mMarket.register();\n        this.mMarket.on(\"getMarketCategories\", this.onCategoriesHandler, this);\n        this.mMarket.on(\"queryMarket\", this.onQueryResuleHandler, this);\n        this.mMarket.on(\"queryCommodityResource\", this.onQueryCommodityResourceHandler, this);\n        this.mView = new _MarketPanel__WEBPACK_IMPORTED_MODULE_0__[\"MarketPanel\"](this.scene, this.world);\n        this.mView.on(\"getCategories\", this.onGetCategoriesHandler, this);\n        this.mView.on(\"queryProp\", this.onQueryPropHandler, this);\n        this.mView.on(\"buyItem\", this.onBuyItemHandler, this);\n        this.mView.on(\"close\", this.onCloseHandler, this);\n        this.mView.on(\"popItemCard\", this.onPopItemCardHandler, this);\n        this.mView.on(\"queryPropResource\", this.onQueryPropresouceHandler, this);\n        this.mView.show();\n        this.layerManager.addToUILayer(this.mView);\n    }\n    onCategoriesHandler(content) {\n        this.mView.setCategories(content);\n    }\n    onQueryResuleHandler(content) {\n        this.mView.setProp(content);\n    }\n    onGetCategoriesHandler() {\n        this.mMarket.getMarkCategories();\n    }\n    onQueryPropHandler(page, category, subCategory) {\n        this.mMarket.queryMarket(page, category, subCategory);\n    }\n    onBuyItemHandler(prop) {\n        this.mMarket.buyMarketCommodities([prop]);\n    }\n    onQueryPropresouceHandler(prop) {\n        this.mMarket.queryCommodityResource(prop.id, prop.category);\n    }\n    onPopItemCardHandler(prop, display) {\n        // const packet: PBpacket = new PBpacket(op_client.OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_SHOW_UI);\n        // const content: op_client.OP_VIRTUAL_WORLD_RES_CLIENT_SHOW_UI = packet.content;\n        // content.name = \"ItemPopCard\";\n        const packet = {\n            content: {\n                name: \"ItemPopCard\",\n                prop,\n                display\n            }\n        };\n        this.world.emitter.emit(game_core__WEBPACK_IMPORTED_MODULE_2__[\"MessageType\"].SHOW_UI, packet);\n    }\n    onQueryCommodityResourceHandler(content) {\n        if (!this.mView) {\n            return;\n        }\n        this.mView.setCommodityResource(content);\n    }\n    onCloseHandler() {\n        if (!this.mMarket) {\n            return;\n        }\n        this.mMarket.destroy();\n        this.mMarket = undefined;\n        this.mView.hide();\n        this.mView = undefined;\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Market/MarketMediator.ts?");

/***/ }),

/***/ "./src/ui/Market/MarketPanel.ts":
/*!**************************************!*\
  !*** ./src/ui/Market/MarketPanel.ts ***!
  \**************************************/
/*! exports provided: MarketPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MarketPanel\", function() { return MarketPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _ElementDetail__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ElementDetail */ \"./src/ui/Market/ElementDetail.ts\");\n/* harmony import */ var _MarketItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MarketItem */ \"./src/ui/Market/MarketItem.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\n\n\n\nclass MarketPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"market\";\n        this.mSubTabs = [];\n        this.mTabs = [];\n        this.scale = 1;\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        this.mSelectItem.on(\"buyItem\", this.onBuyItemHandler, this);\n        this.mSelectItem.on(\"popItemCard\", this.onPopItemCardHandler, this);\n        this.mCloseBtn.on(\"pointerup\", this.onCloseHandler, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.mSelectItem.off(\"buyItem\", this.onBuyItemHandler, this);\n        this.mSelectItem.off(\"popItemCard\", this.onPopItemCardHandler, this);\n        this.mCloseBtn.off(\"pointerup\", this.onCloseHandler, this);\n    }\n    resize(w, h) {\n        // super.resize(w, h);\n        const scale = this.scale;\n        const zoom = this.mWorld.uiScale;\n        const width = this.scene.cameras.main.width / scale;\n        const height = this.scene.cameras.main.height / scale;\n        const centerX = this.scene.cameras.main.centerX / scale;\n        this.setSize(width, height);\n        this.mTIle.x = centerX;\n        const shelfHeight = 290 * this.dpr * zoom;\n        // if (shelfHeight > height / 2) {\n        //   shelfHeight = height / 2;\n        // }\n        this.mBackgroundColor.setInteractive(new Phaser.Geom.Rectangle(0, 0, width * zoom, height * zoom), Phaser.Geom.Rectangle.Contains);\n        this.mShelfContainer.setSize(width, shelfHeight);\n        this.mShelfContainer.setPosition(0, height - this.mShelfContainer.height);\n        this.mShelfBackground.clear();\n        this.mShelfBackground.fillStyle(0x02ccff);\n        this.mShelfBackground.fillRect(0, 0, this.mShelfContainer.width, this.mShelfContainer.height);\n        this.mShelfBackground.y = this.mSubCategeoriesContainer.y + 43 * this.dpr * zoom;\n        this.mSelectItem.setSize(width, height - this.mShelfContainer.height);\n        // this.mSelectItem.y = 45 * this.dpr;\n        this.mSelectItem.resize(w, h);\n        this.mCategoriesBar.clear();\n        this.mCategoriesBar.fillStyle(0x3ee1ff);\n        this.mCategoriesBar.fillRect(0, 0, width, 40 * this.dpr * zoom);\n        this.mCategoriesBar.fillStyle(0x04b3d3);\n        this.mCategoriesBar.fillRect(0, 40 * this.dpr * zoom, width, 3 * this.dpr * zoom);\n        this.mSubCategeoriesContainer.setSize(width, 43 * this.dpr * zoom);\n        // this.setInteractive();\n        // this.setInteractive(new Phaser.Geom.Rectangle(-(width >> 1), -(height >> 1), width, height), Phaser.Geom.Rectangle.Contains);\n    }\n    setCategories(content) {\n        if (!this.mCategoriesContainer) {\n            return;\n        }\n        this.mCategoriesContainer.removeAll(true);\n        const categorys = content.marketCategory;\n        this.mTabs = [];\n        const frame = this.scene.textures.getFrame(this.key, \"categories_normal\");\n        let w = 60;\n        let h = 65;\n        if (frame) {\n            w = frame.width;\n            h = frame.height;\n        }\n        const config0 = {\n            left: w / 2 + 2 * this.dpr,\n            top: 12 * this.dpr,\n            right: w / 2 - 4 * this.dpr,\n            bottom: 2 * this.dpr\n        };\n        const group = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"CheckboxGroup\"]();\n        const zoom = this.mWorld.uiScale;\n        const capW = 77 * this.dpr * zoom;\n        const capH = 38 * this.dpr * zoom;\n        for (let i = 0; i < categorys.length; i++) {\n            const btn = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"NinePatchTabButton\"](this.scene, capW, capH, this.key, \"categories_normal\", \"categories_down\", categorys[i].category.value, [config0], this.dpr, this.scale);\n            // btn.removeAllListeners();\n            btn.setTextStyle({\n                fontSize: 18 * this.dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            });\n            this.mTabs[i] = btn;\n            btn.setData(\"category\", categorys[i]);\n            btn.x = i * 80 * this.dpr * zoom + capW / 2;\n            btn.y = capH / 2;\n            // this.add(btn);\n        }\n        this.mCategoriesContainer.setSize(this.mTabs.length * capW, capH);\n        this.mShelfContainer.add(this.mTabs);\n        // this.mSubCategeoriesContainer.y = this.mCategoriesContainer.height;\n        this.mCategoriesBar.y = this.mCategoriesContainer.height + this.mShelfContainer.y;\n        this.mSubCategeoriesContainer.addAt(this.mCategoriesBar, 0);\n        this.mPropContainer.y = this.mSubCategeoriesContainer.y + 43 * this.dpr * zoom + this.mSubCategeoriesContainer.height + 9 * this.dpr;\n        this.mShelfBackground.y = this.mSubCategeoriesContainer.y + 43 * this.dpr * zoom;\n        this.mSubCategorisScroll.y = this.mCategoriesBar.y + (33 * this.dpr);\n        this.mPropGrid.y = this.mCategoriesBar.y + this.mSubCategeoriesContainer.height + 122 * this.dpr * zoom;\n        this.mPropGrid.layout();\n        this.mSubCategorisScroll.layout();\n        group.on(\"selected\", this.onSelectCategoryHandler, this);\n        group.appendItemAll(this.mTabs);\n        game_core__WEBPACK_IMPORTED_MODULE_0__[\"Logger\"].getInstance().log(this.mTabs[0].getWorldTransformMatrix());\n        group.selectIndex(0);\n        // for (const category of categorys) {\n        //   const btn = new NinePatchButton(this.scene, )\n        // }\n    }\n    setProp(content) {\n        this.clearCategories(this.mItems);\n        this.mItems = [];\n        const commodities = content.commodities;\n        // const zoom = this.mWorld.uiScale;\n        // for (let i = 0; i < commodities.length; i++) {\n        //   const item = new MarketItem(this.scene, Math.floor(i / 3) * (135 * this.dpr * zoom) + (72 * this.dpr * zoom), Math.floor(i % 3) * (68 * this.dpr * zoom) + 30 * this.dpr * zoom, this.dpr, zoom);\n        //   item.setProp(commodities[i]);\n        //   item.on(\"select\", this.onSelectItemHandler, this);\n        //   this.mItems[i] = item;\n        // }\n        // this.mPropContainer.add(this.mItems);\n        this.mPropGrid.setItems(commodities);\n        this.mPropGrid.layout();\n        if (commodities.length > 0)\n            this.onSelectItemHandler(commodities[0]);\n    }\n    setCommodityResource(content) {\n        if (this.mSelectItem) {\n            this.mSelectItem.setResource(content);\n        }\n    }\n    destroy() {\n        if (this.mSubCategorisScroll) {\n            this.mSubCategorisScroll.destroy();\n        }\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        super.destroy();\n    }\n    preload() {\n        // this.scene.load.atlas(this.key, Url.getUIRes(this.dpr, \"market/market\"), Url.getUIRes(this.dpr, \"market/market.json\"));\n        this.addAtlas(this.key, \"market/market.png\", \"market/market.json\");\n        super.preload();\n    }\n    init() {\n        if (this.mInitialized)\n            return;\n        const w = this.scene.scale.width / this.scale;\n        const h = this.scene.scale.height / this.scale;\n        const zoom = this.mWorld.uiScale;\n        this.mBackgroundColor = this.scene.make.graphics(undefined, false);\n        this.mBackgroundColor.fillGradientStyle(0x6f75ff, 0x6f75ff, 0x04cbff, 0x04cbff);\n        // this.mBackgroundColor.fillStyle(0x6f75ff);\n        this.mBackgroundColor.fillRect(0, 0, w, h);\n        this.add(this.mBackgroundColor);\n        this.mShelfContainer = this.scene.make.container({\n            x: (w / 2),\n            y: h\n        }, false).setSize(w, 290 * this.dpr * zoom);\n        const frame = this.scene.textures.getFrame(this.key, \"bg\");\n        const countW = Math.ceil(w / (frame.width * zoom));\n        const countH = Math.ceil((h - this.mShelfContainer.height + frame.height * zoom) / (frame.height * zoom));\n        for (let i = 0; i < countW; i++) {\n            for (let j = 0; j < countH; j++) {\n                const bg = this.scene.make.image({\n                    x: i * frame.width * zoom,\n                    y: j * frame.height * zoom,\n                    key: this.key,\n                    frame: \"bg\"\n                }, false).setScale(zoom);\n                this.add(bg);\n            }\n        }\n        this.mShelfBackground = this.scene.make.graphics(undefined, false);\n        this.mCloseBtn = this.scene.make.image({\n            key: this.key,\n            frame: \"back_arrow\",\n            x: 21 * this.dpr,\n            y: 30 * this.dpr\n        }).setInteractive().setScale(zoom);\n        this.mPropContainer = this.scene.make.container(undefined, false);\n        this.mCategoriesContainer = this.scene.make.container(undefined, false);\n        this.mSubCategeoriesContainer = this.scene.make.container(undefined, false);\n        this.mShelfContainer.add([this.mShelfBackground, this.mCategoriesContainer, this.mPropContainer]);\n        this.add([this.mShelfContainer, this.mSubCategeoriesContainer]);\n        this.mSelectItem = new _ElementDetail__WEBPACK_IMPORTED_MODULE_1__[\"ElementDetail\"](this.scene, this.mWorld, this.key, this.dpr, this.mWorld.uiScale);\n        this.mSelectItem.setSize(w, h - this.mShelfContainer.height);\n        this.mTIle = this.scene.make.text({\n            text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"market.title\"),\n            y: 30 * this.dpr * zoom,\n            style: {\n                fontSize: 36 * this.dpr * zoom,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }).setOrigin(0.5);\n        this.add([this.mTIle, this.mSelectItem, this.mCloseBtn]);\n        super.init();\n        this.mCategoriesBar = this.scene.make.graphics(undefined, false);\n        const capW = 56 * this.dpr;\n        const capH = 41 * this.dpr;\n        const config = {\n            x: w / 2,\n            // y: 0,\n            // width: w,\n            // height: capH,\n            table: {\n                width: w,\n                height: capH,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0,\n            },\n            scrollMode: 1,\n            createCellContainerCallback: (cell, cellContainer) => {\n                const scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"TextButton\"](scene, this.dpr, zoom);\n                    // cellContainer.width = capW;\n                    // cellContainer.height = capH;\n                    this.add(cellContainer);\n                }\n                cellContainer.setText(item.value);\n                // cellContainer.setSize(width, height);\n                cellContainer.setData({ item });\n                if (item && this.mPreSubCategoris && this.mPreSubCategoris.key === item.key) {\n                    cellContainer.changeDown();\n                }\n                else {\n                    cellContainer.changeNormal();\n                }\n                return cellContainer;\n            },\n        };\n        this.mSubCategorisScroll = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"GameGridTable\"](this.scene, config);\n        this.mSubCategorisScroll.on(\"cellTap\", (cell, index) => {\n            this.onSelectSubCategoryHandler(cell);\n        });\n        this.add(this.mSubCategorisScroll.table);\n        const propFrame = this.scene.textures.getFrame(this.key, \"border\");\n        const cellWidth = propFrame.width * zoom + 10 * this.dpr;\n        const cellHeight = propFrame.height * zoom + 10 * this.dpr;\n        const propGridConfig = {\n            x: w / 2,\n            y: 1050 + (41 * this.dpr * zoom) / 2,\n            // y: 0,\n            table: {\n                width: w - 20 * this.dpr * zoom,\n                height: 224 * this.dpr * zoom,\n                columns: 3,\n                cellWidth,\n                cellHeight,\n                reuseCellContainer: true,\n                // mask: false,\n                cellOriginX: 0,\n                cellOriginY: 0\n            },\n            scrollMode: 1,\n            clamplChildOY: false,\n            createCellContainerCallback: (cell, cellContainer) => {\n                const scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new _MarketItem__WEBPACK_IMPORTED_MODULE_2__[\"MarketItem\"](scene, 0, 0, this.dpr, zoom);\n                    // cellContainer.width = capW;\n                    // cellContainer.height = capH;\n                    this.add(cellContainer);\n                }\n                // cellContainer.setSize(width, height);\n                cellContainer.setData({ item });\n                cellContainer.setProp(item);\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"GameGridTable\"](this.scene, propGridConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on(\"cellTap\", (cell) => {\n            const data = cell.getData(\"item\");\n            if (data) {\n                this.onSelectItemHandler(data);\n            }\n        });\n        this.add(this.mPropGrid.table);\n        this.resize(0, 0);\n        this.emit(\"getCategories\");\n    }\n    setSelect() {\n        // this.mSelectItem.setProp();\n    }\n    clearCategories(tabs) {\n        if (!tabs) {\n            return;\n        }\n        tabs.map((tab) => tab.destroy());\n        tabs = undefined;\n    }\n    onSelectCategoryHandler(gameobject) {\n        if (!this.mSubCategeoriesContainer) {\n            return;\n        }\n        this.mPreSubCategoris = null;\n        this.clearCategories(this.mSubTabs);\n        const subcategory = gameobject.getData(\"category\");\n        this.mSelectedCategories = gameobject;\n        if (subcategory) {\n            const subcategorys = subcategory.subcategory;\n            if (this.mSubCategorisScroll) {\n                this.mSubCategorisScroll.setItems(subcategorys);\n                this.mSubCategorisScroll.layout();\n                const cell = this.mSubCategorisScroll.getCell(0);\n                this.onSelectSubCategoryHandler(cell.container);\n            }\n        }\n    }\n    onSelectSubCategoryHandler(gameobject) {\n        if (!this.mSelectedCategories) {\n            return;\n        }\n        if (!(gameobject instanceof game_core__WEBPACK_IMPORTED_MODULE_0__[\"TextButton\"])) {\n            return;\n        }\n        const categories = this.mSelectedCategories.getData(\"category\");\n        if (!categories) {\n            return;\n        }\n        const subCategories = gameobject.getData(\"item\");\n        if (!subCategories) {\n            return;\n        }\n        this.queryProp(categories.category.key, subCategories.key);\n        this.mPreSubCategoris = subCategories;\n        this.mSubCategorisScroll.refresh();\n    }\n    queryProp(category, subCategory) {\n        this.emit(\"queryProp\", 1, category, subCategory);\n    }\n    onSelectItemHandler(prop) {\n        this.mSelectItem.setProp(prop);\n        this.emit(\"queryPropResource\", prop);\n    }\n    onBuyItemHandler(prop) {\n        this.emit(\"buyItem\", prop);\n    }\n    onCloseHandler() {\n        this.emit(\"close\");\n    }\n    onPopItemCardHandler(prop, display) {\n        if (prop) {\n            this.emit(\"popItemCard\", prop, display);\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Market/MarketPanel.ts?");

/***/ }),

/***/ "./src/ui/Market/index.ts":
/*!********************************!*\
  !*** ./src/ui/Market/index.ts ***!
  \********************************/
/*! exports provided: DetailDisplay, ElementDetail, Market, MarketItem, MarketMediator, MarketPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _DetailDisplay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DetailDisplay */ \"./src/ui/Market/DetailDisplay.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"DetailDisplay\", function() { return _DetailDisplay__WEBPACK_IMPORTED_MODULE_0__[\"DetailDisplay\"]; });\n\n/* harmony import */ var _ElementDetail__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ElementDetail */ \"./src/ui/Market/ElementDetail.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ElementDetail\", function() { return _ElementDetail__WEBPACK_IMPORTED_MODULE_1__[\"ElementDetail\"]; });\n\n/* harmony import */ var _Market__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Market */ \"./src/ui/Market/Market.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Market\", function() { return _Market__WEBPACK_IMPORTED_MODULE_2__[\"Market\"]; });\n\n/* harmony import */ var _MarketItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MarketItem */ \"./src/ui/Market/MarketItem.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MarketItem\", function() { return _MarketItem__WEBPACK_IMPORTED_MODULE_3__[\"MarketItem\"]; });\n\n/* harmony import */ var _MarketMediator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MarketMediator */ \"./src/ui/Market/MarketMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MarketMediator\", function() { return _MarketMediator__WEBPACK_IMPORTED_MODULE_4__[\"MarketMediator\"]; });\n\n/* harmony import */ var _MarketPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MarketPanel */ \"./src/ui/Market/MarketPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MarketPanel\", function() { return _MarketPanel__WEBPACK_IMPORTED_MODULE_5__[\"MarketPanel\"]; });\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Market/index.ts?");

/***/ }),

/***/ "./src/ui/MessageBox/MessageBoxMediator.ts":
/*!*************************************************!*\
  !*** ./src/ui/MessageBox/MessageBoxMediator.ts ***!
  \*************************************************/
/*! exports provided: MessageBoxMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MessageBoxMediator\", function() { return MessageBoxMediator; });\n/* harmony import */ var _MessageBoxView__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBoxView */ \"./src/ui/MessageBox/MessageBoxView.ts\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nclass MessageBoxMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"BaseMediator\"] {\n    constructor(layerManager, scene, world) {\n        super();\n        this.world = world;\n        this.mScene = scene;\n        this.mLayerManager = layerManager;\n        this.mUIType = tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"UIType\"].Tips;\n    }\n    isSceneUI() {\n        return false;\n    }\n    isShow() {\n        return this.mView ? this.mView.isShow() : false;\n    }\n    show(param) {\n        if (this.mView && this.isShow()) {\n            return;\n        }\n        this.mView = new _MessageBoxView__WEBPACK_IMPORTED_MODULE_0__[\"MessageBoxView\"](this.mScene, this.world);\n        this.mView.show(param);\n        this.mLayerManager.addToToolTipsLayer(this.mView);\n        this.mScene.input.on(\"gameobjectdown\", this.onBtnHandler, this);\n        super.show(param);\n    }\n    update(param) {\n        super.update(param);\n    }\n    hide() {\n        this.mShow = false;\n        this.mScene.input.off(\"gameobjectdown\", this.onBtnHandler, this);\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = null;\n        }\n    }\n    destroy() {\n        this.mScene.input.off(\"gameobjectdown\", this.onBtnHandler, this);\n        super.destroy();\n    }\n    onBtnHandler(pointer, gameobject) {\n        if (!gameobject)\n            return;\n        if (gameobject instanceof tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"NineSliceButton\"]) {\n            const btn = gameobject.getBtnData();\n            if (!btn) {\n                return;\n            }\n            const param = this.mParam[0];\n            const pkt = new net_socket_packet__WEBPACK_IMPORTED_MODULE_2__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_TARGET_UI);\n            const content = pkt.content;\n            content.uiId = param.id;\n            content.componentId = btn.node.id;\n            this.world.connection.send(pkt);\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MessageBox/MessageBoxMediator.ts?");

/***/ }),

/***/ "./src/ui/MessageBox/MessageBoxView.ts":
/*!*********************************************!*\
  !*** ./src/ui/MessageBox/MessageBoxView.ts ***!
  \*********************************************/
/*! exports provided: MessageBoxView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MessageBoxView\", function() { return MessageBoxView; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nclass MessageBoxView extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n    }\n    resize() {\n        const size = this.mWorld.getSize();\n        if (this.mWorld.game.device.os.desktop) {\n            this.x = size.width >> 1;\n            this.y = size.height >> 1;\n        }\n        else {\n            this.x = size.width >> 1;\n            this.y = size.height >> 1;\n        }\n    }\n    show(param) {\n        super.show(param);\n        if (!this.mInitialized) {\n            return;\n        }\n        this.mButtons = [];\n        if (param[0] && param[0].text && param[0].text[0]) {\n            this.mTxt.setText(param[0].text[0].text);\n        }\n        const buttons = param[0].button;\n        // buttons.push({text:\"\",});\n        if (buttons) {\n            const btnWid = 46;\n            const btnHei = 24;\n            const w = (this.mWidth) / buttons.length;\n            const btnSp = this.mScene.make.container(undefined, false);\n            btnSp.y = this.mHeight - btnHei - 100;\n            for (let i = 0; i < buttons.length; i++) {\n                const txt = buttons[i] ? buttons[i].text : \"\";\n                const btn = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NineSliceButton\"](this.mScene, 0, 0, btnWid, btnHei, \"button_blue\", \"button_blue\", buttons[i].text, this.dpr, this.scale, game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getConfig(), buttons[i]);\n                btn.x = i * w + btnWid / 2;\n                this.mButtons.push(btn);\n                btnSp.add(btn);\n            }\n            btnSp.setSize((buttons.length - 1) * w + btnWid, btnHei);\n            btnSp.x = this.width - btnSp.width >> 1;\n            this.add(btnSp);\n        }\n        this.resize();\n    }\n    destroy() {\n        if (this.mTxt) {\n            this.mTxt.destroy(true);\n        }\n        if (this.mButtons && this.mButtons.length > 0) {\n            this.mButtons.forEach((btn) => {\n                if (!btn)\n                    return;\n                btn.destroy();\n            });\n            this.mButtons.length = 0;\n            this.mButtons = [];\n        }\n        this.mTxt = null;\n        this.mButtons = null;\n        super.destroy();\n    }\n    get buttons() {\n        return this.mButtons;\n    }\n    preload() {\n        if (!this.mScene) {\n            return;\n        }\n        this.mScene.load.atlas(game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getName(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getPNG(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"BlueButton\"].getJSON());\n        this.mScene.load.image(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Border\"].getName(), game_core__WEBPACK_IMPORTED_MODULE_0__[\"Border\"].getPNG());\n        super.preload();\n    }\n    init() {\n        const size = this.mWorld.getSize();\n        this.mWidth = 300;\n        this.mHeight = 200;\n        const border = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NinePatch\"](this.scene, 0, 0, this.mWidth, this.mHeight, game_core__WEBPACK_IMPORTED_MODULE_0__[\"Border\"].getName(), null, undefined, undefined, game_core__WEBPACK_IMPORTED_MODULE_0__[\"Border\"].getConfig());\n        border.x = 0;\n        border.y = 0;\n        this.add(border);\n        this.mTxt = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BBCodeText\"](this.mScene, 0, 0, \"\", {\n            fontSize: \"16px\",\n            wrap: {\n                mode: \"char\",\n                width: border.width\n            },\n            halign: \"center\"\n        });\n        this.mTxt.x = -this.mWidth / 2 + 10;\n        this.mTxt.y = -this.mHeight / 2 + 10;\n        this.add(this.mTxt);\n        super.init();\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MessageBox/MessageBoxView.ts?");

/***/ }),

/***/ "./src/ui/MessageBox/index.ts":
/*!************************************!*\
  !*** ./src/ui/MessageBox/index.ts ***!
  \************************************/
/*! exports provided: MessageBoxMediator, MessageBoxView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _MessageBoxMediator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MessageBoxMediator */ \"./src/ui/MessageBox/MessageBoxMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MessageBoxMediator\", function() { return _MessageBoxMediator__WEBPACK_IMPORTED_MODULE_0__[\"MessageBoxMediator\"]; });\n\n/* harmony import */ var _MessageBoxView__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MessageBoxView */ \"./src/ui/MessageBox/MessageBoxView.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MessageBoxView\", function() { return _MessageBoxView__WEBPACK_IMPORTED_MODULE_1__[\"MessageBoxView\"]; });\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MessageBox/index.ts?");

/***/ }),

/***/ "./src/ui/MineCar/MineCar.ts":
/*!***********************************!*\
  !*** ./src/ui/MineCar/MineCar.ts ***!
  \***********************************/
/*! exports provided: MineCar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MineCar\", function() { return MineCar; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass MineCar extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor($world) {\n        super();\n        this.world = $world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_MINING_MODE_QUERY_MINE_PACKAGE, this.onQueryMinePackageHandler);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    discard(items) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_MINING_MODE_DELETE_MINEPACKAGE_ITEM);\n        const content = packet.content;\n        content.items = items;\n        this.connection.send(packet);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    onQueryMinePackageHandler(packet) {\n        const content = packet.content;\n        if (content && content.subcategories)\n            content.subcategories.unshift({ key: \"all\", value: \"\" });\n        this.mEvent.emit(\"query\", packet.content);\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MineCar/MineCar.ts?");

/***/ }),

/***/ "./src/ui/MineCar/MineCarMediator.ts":
/*!*******************************************!*\
  !*** ./src/ui/MineCar/MineCarMediator.ts ***!
  \*******************************************/
/*! exports provided: MineCarMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MineCarMediator\", function() { return MineCarMediator; });\n/* harmony import */ var _MineCarPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MineCarPanel */ \"./src/ui/MineCar/MineCarPanel.ts\");\n/* harmony import */ var _MineCar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MineCar */ \"./src/ui/MineCar/MineCar.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nclass MineCarMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"BaseMediator\"] {\n    constructor(layerManager, scene, worldService) {\n        super();\n        this.layerManager = layerManager;\n        this.scene = scene;\n        this.world = worldService;\n        this.mMineCar = new _MineCar__WEBPACK_IMPORTED_MODULE_1__[\"MineCar\"](worldService);\n        this.mMineCar.register();\n        this.mMineCar.on(\"query\", this.onQueryHandler, this);\n    }\n    show(param) {\n        if (this.mShow) {\n            return;\n        }\n        super.show(param);\n        if (!this.mView) {\n            this.mView = new _MineCarPanel__WEBPACK_IMPORTED_MODULE_0__[\"MineCarPanel\"](this.scene, this.world);\n        }\n        this.mView.show(param);\n        this.mView.on(\"close\", this.onCloseHandler, this);\n        this.mView.on(\"discard\", this.onDiscardHandler, this);\n        this.layerManager.addToUILayer(this.mView);\n    }\n    update(param) {\n        if (!this.mView) {\n            this.show(param);\n            return;\n        }\n        super.update(param);\n    }\n    destroy() {\n        this.mShow = false;\n        if (this.mMineCar) {\n            this.mMineCar.off(\"query\", this.onQueryHandler, this);\n            this.mMineCar.unregister();\n            this.mMineCar.destroy();\n            this.mMineCar = null;\n        }\n        super.destroy();\n    }\n    onQueryHandler(packet) {\n        this.update(packet);\n    }\n    onDiscardHandler(items) {\n        if (this.mMineCar) {\n            this.mMineCar.discard(items);\n        }\n    }\n    onCloseHandler() {\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = undefined;\n        }\n        this.mShow = false;\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MineCar/MineCarMediator.ts?");

/***/ }),

/***/ "./src/ui/MineCar/MineCarPanel.ts":
/*!****************************************!*\
  !*** ./src/ui/MineCar/MineCarPanel.ts ***!
  \****************************************/
/*! exports provided: MineCarPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MineCarPanel\", function() { return MineCarPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\n\nclass MineCarPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"mine_car\";\n        this.scale = 1;\n        this.disInteractive();\n    }\n    resize(width, height) {\n        const w = this.scene.cameras.main.width / this.scale;\n        const h = this.scene.cameras.main.height / this.scale;\n        super.resize(width, height);\n        const zoom = this.mWorld.uiScale;\n        this.setSize(w, h);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, w, h);\n        this.mBg.x = w / 2;\n        this.mBg.y = this.mBg.displayHeight / 2 + 107 * this.dpr * zoom;\n        this.carIcon.x = this.mBg.x / 2 - 4 * this.dpr * zoom;\n        this.carIcon.y = this.mBg.y - (this.mBg.displayHeight - this.carIcon.displayHeight) / 2 + 4 * this.dpr * zoom;\n        this.mCloseBtn.x = this.mBg.x + this.mBg.displayWidth / 2;\n        this.mCloseBtn.y = this.mBg.y - (this.mBg.displayHeight - this.mCloseBtn.displayHeight) / 2 + 10 * this.dpr * zoom;\n        this.mCounter.x = this.mBg.x / 2;\n        this.mCounter.y = this.mBg.y + (this.mBg.displayHeight - this.mDiscardBtn.displayHeight) / 2 - 16 * this.dpr * zoom;\n        this.mTips.x = this.mBg.x + 20 * this.dpr * zoom;\n        this.mTips.y = this.mBg.y - this.mBg.displayHeight / 2 - 15 * this.dpr * zoom;\n        this.mDiscardBtn.x = this.mBg.x + this.mBg.displayWidth / 2 - this.mDiscardBtn.displayWidth / 2 - 9 * this.dpr * zoom;\n        this.mDiscardBtn.y = this.mBg.y + this.mBg.displayHeight / 2 - this.mDiscardBtn.displayHeight / 2 - 9 * this.dpr * zoom;\n        this.categoriesBg.x = this.mBg.x;\n        this.categoriesBg.y = this.mBg.y - this.mBg.displayHeight / 2 + this.categoriesBg.displayHeight / 2 + 38 * this.dpr * zoom;\n        this.mPropGrid.refreshPos(this.mBg.x + 2 * this.dpr * zoom, this.mBg.y + 6 * this.dpr * zoom);\n        this.mCategoryTable.refreshPos(this.mBg.x, this.mBg.y - this.mBg.displayHeight / 2 + this.categoriesBg.displayHeight / 2 + 44 * this.dpr * zoom);\n    }\n    show(param) {\n        super.show(param);\n        if (this.mInitialized && !this.mPreLoad) {\n            this.refreshData();\n        }\n    }\n    update(param) {\n        super.update(param);\n        if (this.mInitialized && this.mShow) {\n            this.refreshData();\n        }\n    }\n    setCategories(subcategorys) {\n        this.mPreSelectedCategorie = undefined;\n        this.mCategoryTable.setItems(subcategorys);\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        this.removeListen();\n        this.mCloseBtn.on(\"pointerup\", this.onCloseHandler, this);\n        this.mDiscardBtn.on(\"Tap\", this.enterDiscardMode, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.off(\"pointerup\", this.onCloseHandler, this);\n        this.mDiscardBtn.off(\"Tap\", this.enterDiscardMode, this);\n    }\n    setProp() { }\n    destroy() {\n        if (this.mPropGrid) {\n            this.mPropGrid.destroy();\n        }\n        // if (this.mPanel) {\n        //   this.mPanel.removeAll(true);\n        // }\n        if (this.mCategoryTable) {\n            this.mCategoryTable.destroy();\n        }\n        super.destroy();\n    }\n    preload() {\n        this.addAtlas(this.key, `mine_car/mine_car.png`, `mine_car/mine_car.json`);\n        super.preload();\n    }\n    init() {\n        const w = this.scene.cameras.main.width / this.scale;\n        const h = this.scene.cameras.main.height / this.scale;\n        this.setSize(w, h);\n        // this.mPanel = this.scene.make.container(undefined, false);\n        // this.mMask = this.scene.make.graphics(undefined, false);\n        const zoom = this.mWorld.uiScale;\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, w, h);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height), Phaser.Geom.Rectangle.Contains);\n        this.mBg = this.scene.make\n            .image({\n            key: this.key,\n            frame: \"bg.png\",\n        })\n            .setScale(zoom);\n        this.mBg.x = w / 2;\n        this.mBg.y = h / 2;\n        // this.mPanel.setSize(bg.displayWidth, bg.displayHeight);\n        this.carIcon = this.scene.make\n            .image({\n            key: this.key,\n            frame: \"car_icon.png\",\n        }, false)\n            .setScale(zoom);\n        this.carIcon.x = (-(this.mBg.width - this.carIcon.width) * zoom) / 2 + 28 * this.dpr * zoom;\n        this.carIcon.y = (-(this.mBg.height - this.carIcon.height / 2) * zoom) / 2 + 10 * this.dpr * zoom;\n        this.mCloseBtn = this.scene.make\n            .image({\n            // x: 110 * this.dpr * zoom,\n            // y: -125 * this.dpr * zoom,\n            key: this.key,\n            frame: \"close_btn.png\",\n        }, false)\n            .setScale(zoom);\n        this.mCloseBtn.setInteractive();\n        this.mCloseBtn.x = (this.mBg.width * zoom) / 2;\n        this.mCloseBtn.y = (-(this.mBg.height - this.mCloseBtn.height) * zoom) / 2 + 10 * this.dpr * zoom;\n        this.mCounter = this.scene.make.text({\n            text: \"25/50\",\n            style: {\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                color: \"#FFFFFF\",\n                fontSize: 12 * this.dpr * zoom,\n            },\n        }, false);\n        this.mCounter.x = -this.displayWidth / 2 + 17 * this.dpr * zoom;\n        this.mCounter.y = this.displayHeight / 2 - 18 * this.dpr * zoom - this.mCounter.height;\n        this.mCounter.setFontStyle(\"bold\");\n        this.mTips = new Tips(this.scene, this.key, this.dpr, zoom);\n        this.mTips.scale = zoom;\n        this.mTips.x = 40 * this.dpr * zoom; // - this.mTips.width / 2;\n        this.mTips.y = (-(this.mBg.height + this.mTips.height) * zoom) / 2 + 15 * this.dpr * zoom;\n        this.mDiscardBtn = new DiscardButton(this.scene, this.key, \"yellow_btn.png\", undefined, \"\");\n        this.mDiscardBtn.setScale(zoom);\n        (this.mDiscardBtn.x = ((this.mBg.width - this.mDiscardBtn.displayWidth) * zoom) / 2 - 17 * this.dpr * zoom),\n            (this.mDiscardBtn.y = ((this.mBg.height - this.mDiscardBtn.displayHeight) * zoom) / 2 - 10 * this.dpr * zoom),\n            this.mDiscardBtn.setTextStyle({\n                color: \"##996600\",\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 10 * this.dpr * zoom,\n            });\n        this.mDiscardBtn.changeState(DiscardEnum.Discard);\n        this.categoriesBg = this.scene.make\n            .image({\n            key: this.key,\n            frame: \"nav_bg.png\",\n        })\n            .setScale(zoom);\n        // this.categoriesBg.y = -111 * this.dpr * zoom + this.categoriesBg.height * zoom / 2;\n        this.categoriesBg.y = -(this.displayHeight - this.categoriesBg.displayHeight) / 2 + 36 * this.dpr * zoom;\n        const propFrame = this.scene.textures.getFrame(this.key, \"item_border.png\");\n        const capW = propFrame.width * zoom + 4 * this.dpr * zoom;\n        const capH = propFrame.height * zoom + 4 * this.dpr * zoom;\n        // this.cellHeight = capH;\n        const gridW = 236 * this.dpr * zoom;\n        const propConfig = {\n            x: -7 * this.dpr * zoom,\n            y: -16 * this.dpr * zoom,\n            table: {\n                width: gridW,\n                height: 295 * this.dpr * zoom,\n                columns: 4,\n                cellsCount: 25,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0\n                // mask: false\n            },\n            scrollMode: 0,\n            clamplChildOY: false,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: (cell, cellContainer) => {\n                const scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new PackageItem(scene, this.key, this.dpr, zoom);\n                    this.add(cellContainer);\n                }\n                cellContainer.setData({ item });\n                cellContainer.setProp(item);\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"GameGridTable\"](this.scene, propConfig);\n        this.mPropGrid.layout();\n        this.mPropGrid.on(\"cellTap\", (cell) => {\n            // const item = cell.getData(\"item\");\n            // if (item) {\n            this.onSelectItemHandler(cell);\n            // }\n        });\n        const frame = this.scene.textures.getFrame(this.key, \"nav_btn_normal.png\");\n        const categoryTableConfig = {\n            x: -9 * this.dpr * zoom,\n            y: -155 * this.dpr * zoom,\n            table: {\n                width: gridW,\n                height: this.categoriesBg.displayHeight,\n                cellWidth: (frame.width + 4 * this.dpr) * zoom,\n                cellHeight: (29 * this.dpr) * zoom,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0\n                // mask: false\n            },\n            scrollMode: 1,\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            createCellContainerCallback: (cell, cellContainer) => {\n                const scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new CategorieButton(scene, this.key, \"nav_btn_normal.png\", \"nav_btn_down.png\", \"1\");\n                    cellContainer.setTextStyle({\n                        color: \"#566ddb\",\n                        fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                        fontSize: 10 * this.dpr * zoom\n                    });\n                    cellContainer.setFontStyle(\"bold\");\n                    cellContainer.setScale(zoom);\n                    this.add(cellContainer);\n                }\n                cellContainer.setText(item.value);\n                cellContainer.setData(\"data\", item);\n                if (!this.mPreSelectedCategorie) {\n                    this.onClickCategoryHandler(cellContainer);\n                }\n                return cellContainer;\n            }\n        };\n        this.mCategoryTable = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"GameGridTable\"](this.scene, categoryTableConfig);\n        this.mCategoryTable.layout();\n        this.mCategoryTable.on(\"cellTap\", (cell) => {\n            this.onClickCategoryHandler(cell);\n        });\n        // this.add(this.mPanel);\n        this.add([\n            this.mBackGround,\n            this.mBg,\n            this.carIcon,\n            this.mCounter,\n            this.categoriesBg,\n            this.mPropGrid.table,\n            this.mCategoryTable.table,\n            this.mCloseBtn,\n            this.mDiscardBtn,\n        ]);\n        this.resize(this.scene.cameras.main.width, this.scene.cameras.main.height);\n        super.init();\n    }\n    refreshData() {\n        const minePackage = this.mShowData;\n        const mineItem = minePackage.items || [];\n        this.mLimit = minePackage.limit || 0;\n        this.mAllItem = [];\n        for (const item of mineItem) {\n            this.mAllItem.push({ item });\n        }\n        this.mDiscardBtn.changeState(DiscardEnum.Discard);\n        this.mCounter.setText(`${mineItem.length}/${this.mLimit}`);\n        this.setCategories(minePackage.subcategories);\n    }\n    onCloseHandler() {\n        this.emit(\"close\");\n    }\n    onSelectedCategory(subcategory) {\n        this.mFilterItem = [];\n        let pkgItem = null;\n        for (const item of this.mAllItem) {\n            pkgItem = item.item;\n            if (pkgItem && (pkgItem.subcategory === subcategory || subcategory === \"all\")) {\n                this.mFilterItem.push(item);\n            }\n        }\n        const len = this.mLimit - this.mFilterItem.length;\n        for (let i = 0; i < len; i++) {\n            this.mFilterItem.push({ item: null });\n        }\n        this.mPropGrid.setItems(this.mFilterItem);\n    }\n    onSelectItemHandler(packageItem) {\n        if (this.mDiscardBtn && this.mDiscardBtn.buttonState !== DiscardEnum.Discard) {\n            packageItem.switchSelect();\n            this.checkMode();\n            return;\n        }\n        if (packageItem && packageItem.item.item) {\n            if (!this.mTips.parentContainer) {\n                this.add(this.mTips);\n            }\n            this.mTips.setItem(packageItem.item.item);\n        }\n        else {\n            this.remove(this.mTips);\n        }\n    }\n    onClickCategoryHandler(item) {\n        const data = item.getData(\"data\");\n        if (data) {\n            this.onSelectedCategory(data.key);\n            if (this.mPreSelectedCategorie) {\n                this.mPreSelectedCategorie.changeNormal();\n            }\n            item.changeDown();\n            this.mPreSelectedCategorie = item;\n        }\n    }\n    checkMode() {\n        if (!this.mFilterItem || this.mFilterItem.length < 1) {\n            return;\n        }\n        for (const item of this.mFilterItem) {\n            if (item.selected) {\n                this.mDiscardBtn.changeState(DiscardEnum.Sutmit);\n                return;\n            }\n        }\n        this.mDiscardBtn.changeState(DiscardEnum.Cancel);\n    }\n    onDiscardSelectedItem() {\n        if (!this.mFilterItem || this.mFilterItem.length < 1) {\n            return;\n        }\n        // const selected = this.mAllItem.filter((item) => item.selected);\n        const selected = [];\n        const label = [];\n        for (const item of this.mFilterItem) {\n            if (item.item && item.selected) {\n                selected.push(item.item);\n                label.push(`${item.item.name}*${item.item.count}`);\n            }\n        }\n        new game_core__WEBPACK_IMPORTED_MODULE_0__[\"AlertView\"](this.scene, this.mWorld).show({\n            text: ` [color=#0157BC]${label.join(\"\")}[/color] `,\n            title: \"\",\n            oy: 302 * this.dpr * this.mWorld.uiScale,\n            callback: () => {\n                this.emit(\"discard\", selected);\n            },\n        });\n    }\n    enterDiscardMode() {\n        if (!this.mFilterItem) {\n            return;\n        }\n        const state = this.mDiscardBtn.buttonState;\n        let visible = false;\n        if (state === DiscardEnum.Discard) {\n            this.mDiscardBtn.changeState(DiscardEnum.Cancel);\n            visible = true;\n        }\n        else {\n            if (state === DiscardEnum.Sutmit) {\n                this.onDiscardSelectedItem();\n            }\n            this.mDiscardBtn.changeState(DiscardEnum.Discard);\n        }\n        if (this.mFilterItem.length > 0 && this.mFilterItem[0].selectVisible !== visible) {\n            this.mFilterItem.map((item) => {\n                item.selectVisible = visible;\n                item.selected = false;\n            });\n            this.mPropGrid.setItems(this.mFilterItem);\n        }\n    }\n}\nclass PackageItem extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr, zoom) {\n        super(scene);\n        const border = this.scene.make\n            .image({\n            key,\n            frame: \"item_border.png\",\n        }, false)\n            .setOrigin(0)\n            .setScale(zoom);\n        this.setSize(border.width * zoom, border.height * zoom);\n        this.mItemImage = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](this.scene, 0, 0);\n        this.mItemImage.setOrigin(0);\n        this.mItemImage.setScale(dpr * zoom);\n        this.mCounter = this.scene.make\n            .text({\n            x: border.displayWidth - 2 * dpr,\n            y: border.displayHeight - 1 * dpr,\n            style: {\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 9 * dpr * zoom,\n                color: \"#566DDB\",\n            },\n        })\n            .setOrigin(1);\n        this.mCounter.setFontStyle(\"bold\");\n        this.mSelectedIcon = this.scene.make.image({\n            key,\n            frame: \"icon_normal.png\",\n        }, false);\n        this.mSelectedIcon.x = border.width * zoom - 2 * dpr - (this.mSelectedIcon.width * zoom) / 2;\n        this.mSelectedIcon.y = 2 * dpr + (this.mSelectedIcon.height * zoom) / 2;\n        this.add(border);\n        this.add([this.mItemImage, this.mCounter, this.mSelectedIcon]);\n    }\n    setProp(data) {\n        this.mItem = data;\n        const packageItem = data.item;\n        if (!data || !packageItem) {\n            this.mItemImage.visible = false;\n            this.mCounter.visible = false;\n            this.mSelectedIcon.visible = false;\n            return;\n        }\n        if (this.mItem) {\n            this.mItemImage.load(game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(packageItem.display.texturePath), this, this.onLoadCompleteHandler);\n            this.mItemImage.visible = true;\n            if (packageItem.count > 1) {\n                this.mCounter.setText(packageItem.count.toString());\n                this.mCounter.visible = true;\n            }\n            else {\n                this.mCounter.visible = false;\n            }\n            this.mSelectedIcon.visible = (this.mItem.selectVisible ? true : false);\n            this.setSelected();\n        }\n    }\n    switchSelect() {\n        if (!this.mItem.item) {\n            return;\n        }\n        this.mItem.selected = !this.mItem.selected;\n        this.setSelected();\n    }\n    get item() {\n        return this.mItem;\n    }\n    onLoadCompleteHandler() {\n        if (this.mItemImage) {\n            this.mItemImage.x = (this.width - this.mItemImage.displayWidth) >> 1;\n            this.mItemImage.y = (this.height - this.mItemImage.displayHeight) >> 1;\n        }\n    }\n    setSelected() {\n        if (this.mItem.selected) {\n            this.mSelectedIcon.setFrame(\"icon_selected.png\");\n        }\n        else {\n            this.mSelectedIcon.setFrame(\"icon_normal.png\");\n        }\n    }\n}\nclass Tips extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr, zoom = 1) {\n        super(scene);\n        this.mDpr = dpr;\n        const bg = this.scene.make.image({\n            key,\n            frame: \"tips_bg.png\",\n        }, false);\n        this.mName = this.scene.make.text({\n            x: -bg.width / 2 + 12 * dpr * zoom,\n            y: -bg.height / 2 + 5 * dpr * zoom,\n            style: {\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 10 * dpr * zoom,\n                color: \"#000000\",\n            },\n        }, false);\n        this.mDes = this.scene.make\n            .text({\n            x: this.mName.x,\n            style: {\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 10 * dpr * zoom,\n                color: \"#000000\",\n            },\n        }, false)\n            .setOrigin(0, 1);\n        this.add([bg, this.mName, this.mDes]);\n        this.setSize(bg.width * zoom, bg.height * zoom);\n    }\n    setItem(item) {\n        if (!item) {\n            return;\n        }\n        const tmpY = this.y;\n        const tmpAlpha = this.alpha;\n        this.y = tmpY + 50 * this.mDpr;\n        this.alpha = 0;\n        this.scene.tweens.add({\n            targets: this,\n            props: {\n                alpha: tmpAlpha,\n                y: tmpY,\n            },\n            duration: 200,\n            ease: Phaser.Math.Easing.Elastic.Out,\n        });\n        this.mName.setText(item.shortName || item.name);\n        this.mDes.setText(item.des);\n    }\n}\nclass DiscardButton extends tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"Button\"] {\n    constructor(scene, key, frame, downFrame, text) {\n        super(scene, key, frame, downFrame, text);\n    }\n    changeState(val) {\n        if (this.mState === val) {\n            return;\n        }\n        this.mState = val;\n        switch (val) {\n            case DiscardEnum.Cancel:\n                this.setText(\"\");\n                this.setFrame(\"gray_btn.png\");\n                break;\n            case DiscardEnum.Sutmit:\n                this.setText(\"\");\n                this.setFrame(\"yellow_btn.png\");\n                break;\n            default:\n                this.setText(\"\");\n                this.setFrame(\"yellow_btn.png\");\n                break;\n        }\n    }\n    get buttonState() {\n        return this.mState;\n    }\n}\nvar DiscardEnum;\n(function (DiscardEnum) {\n    DiscardEnum[DiscardEnum[\"Discard\"] = 0] = \"Discard\";\n    DiscardEnum[DiscardEnum[\"Cancel\"] = 1] = \"Cancel\";\n    DiscardEnum[DiscardEnum[\"Sutmit\"] = 2] = \"Sutmit\";\n})(DiscardEnum || (DiscardEnum = {}));\nclass CategorieButton extends tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"TabButton\"] {\n    constructor(scene, key, frame, downFrame, text) {\n        super(scene, key, frame, downFrame, text);\n        this.disInteractive();\n        this.removeListen();\n        this.mBackground.setOrigin(0);\n        if (this.mText) {\n            this.mText.setPosition(this.mBackground.width / 2, this.mBackground.height / 2);\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MineCar/MineCarPanel.ts?");

/***/ }),

/***/ "./src/ui/MineCar/index.ts":
/*!*********************************!*\
  !*** ./src/ui/MineCar/index.ts ***!
  \*********************************/
/*! exports provided: MineCar, MineCarMediator, MineCarPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _MineCar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MineCar */ \"./src/ui/MineCar/MineCar.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MineCar\", function() { return _MineCar__WEBPACK_IMPORTED_MODULE_0__[\"MineCar\"]; });\n\n/* harmony import */ var _MineCarMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MineCarMediator */ \"./src/ui/MineCar/MineCarMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MineCarMediator\", function() { return _MineCarMediator__WEBPACK_IMPORTED_MODULE_1__[\"MineCarMediator\"]; });\n\n/* harmony import */ var _MineCarPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MineCarPanel */ \"./src/ui/MineCar/MineCarPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MineCarPanel\", function() { return _MineCarPanel__WEBPACK_IMPORTED_MODULE_2__[\"MineCarPanel\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MineCar/index.ts?");

/***/ }),

/***/ "./src/ui/MineSettle/MineSettle.ts":
/*!*****************************************!*\
  !*** ./src/ui/MineSettle/MineSettle.ts ***!
  \*****************************************/
/*! exports provided: MineSettle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MineSettle\", function() { return MineSettle; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass MineSettle extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_REQ_CLIENT_MINING_MODE_SHOW_REWARD_PACKAGE, this.onMineSettlePackageHandler);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    reqMineSettlePacket() {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_MINING_MODE_STORAGE_REWARD);\n        this.connection.send(packet);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n    onMineSettlePackageHandler(packge) {\n        const content = packge.content;\n        this.mEvent.emit(\"minesettlepacket\", content);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MineSettle/MineSettle.ts?");

/***/ }),

/***/ "./src/ui/MineSettle/MineSettleMediator.ts":
/*!*************************************************!*\
  !*** ./src/ui/MineSettle/MineSettleMediator.ts ***!
  \*************************************************/
/*! exports provided: MineSettleMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MineSettleMediator\", function() { return MineSettleMediator; });\n/* harmony import */ var _MineSettlePanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MineSettlePanel */ \"./src/ui/MineSettle/MineSettlePanel.ts\");\n/* harmony import */ var _MineSettle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MineSettle */ \"./src/ui/MineSettle/MineSettle.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nclass MineSettleMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"BaseMediator\"] {\n    constructor(layerMgr, scene, worldService) {\n        super();\n        this.scene = scene;\n        this.layerMgr = layerMgr;\n        this.world = worldService;\n    }\n    show() {\n        if ((this.mView && this.mView.isShow()) || this.mShow) {\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _MineSettlePanel__WEBPACK_IMPORTED_MODULE_0__[\"MineSettlePanel\"](this.scene, this.world);\n            this.mView.on(\"hide\", this.onHideMineSettle, this);\n        }\n        if (!this.mineSettle) {\n            this.mineSettle = new _MineSettle__WEBPACK_IMPORTED_MODULE_1__[\"MineSettle\"](this.world);\n            this.mineSettle.on(\"minesettlepacket\", this.onMineSettlePacket, this);\n            this.mineSettle.register();\n        }\n        this.layerMgr.addToUILayer(this.mView);\n        if (this.mParam && this.mParam.length > 0)\n            this.onMineSettlePacket(this.mParam[0]);\n        this.mView.show();\n    }\n    isSceneUI() {\n        return true;\n    }\n    destroy() {\n        if (this.mineSettle) {\n            this.mineSettle.destroy();\n            this.mineSettle = undefined;\n        }\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = undefined;\n        }\n    }\n    onHideMineSettle() {\n        this.mineSettle.reqMineSettlePacket();\n        this.destroy();\n    }\n    onMineSettlePacket(content) {\n        const panel = this.mView;\n        panel.setData(\"settleData\", content);\n        panel.setMineSettlePacket(content);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MineSettle/MineSettleMediator.ts?");

/***/ }),

/***/ "./src/ui/MineSettle/MineSettlePanel.ts":
/*!**********************************************!*\
  !*** ./src/ui/MineSettle/MineSettlePanel.ts ***!
  \**********************************************/
/*! exports provided: MineSettlePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MineSettlePanel\", function() { return MineSettlePanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\n\nclass MineSettlePanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"mine_settle\";\n        this.scale = 1;\n    }\n    resize(w, h) {\n        const width = this.scaleWidth;\n        const height = this.scaleHeight;\n        super.resize(width, height);\n        this.bg.x = width / 2;\n        this.bg.y = height / 2;\n        this.titleimage.x = width / 2;\n        this.titleimage.y = this.bg.y - this.bg.displayHeight / 2 - 8 * this.dpr;\n        this.confirmBtn.x = width / 2;\n        this.confirmBtn.y = this.bg.y + 100 * this.dpr;\n        this.titleName.x = width / 2;\n        this.titleName.y = this.titleimage.y + 32 * this.dpr;\n        this.blackGraphic.clear();\n        this.blackGraphic.fillStyle(0, 0.66);\n        this.blackGraphic.fillRect(0, 0, width / this.scale, height / this.scale);\n        this.mPropGrid.refreshPos(width / 2, this.bg.y - 2 * this.dpr);\n        this.setSize(width * this.scale * this.scale, height * this.scale * this.scale);\n    }\n    show(param) {\n        this.mShowData = param;\n        this.refreshData();\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        this.confirmBtn.on(\"click\", this.onConfirmBtnClick, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.confirmBtn.off(\"click\", this.onConfirmBtnClick, this);\n    }\n    preload() {\n        this.addAtlas(this.key, \"minesettle/settlement.png\", \"minesettle/settlement.json\");\n        super.preload();\n    }\n    init() {\n        const width = this.cameraWidth;\n        const height = this.cameraHeight;\n        this.bg = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NinePatch\"](this.scene, 0, 0, 293 * this.dpr, 260 * this.dpr, this.key, \"bg\", undefined, undefined, {\n            left: 10,\n            top: 10,\n            right: 10,\n            bottom: 10\n        });\n        this.blackGraphic = this.scene.make.graphics(undefined, false);\n        this.blackGraphic.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        const propFrame = this.scene.textures.getFrame(this.key, \"icon_test\");\n        const zoom = this.scale;\n        const capW = (propFrame.width + 20 * this.dpr * zoom);\n        const capH = (propFrame.height + 25 * this.dpr * zoom);\n        const config = {\n            x: 0,\n            y: 0,\n            table: {\n                width: 280 * this.dpr * zoom,\n                height: 160 * this.dpr * zoom,\n                columns: 5,\n                cellWidth: capW,\n                cellHeight: capH,\n                reuseCellContainer: true,\n                cellOriginX: 0,\n                cellOriginY: 0,\n                cellPadX: 18 * this.dpr * zoom,\n                zoom: this.scale\n            },\n            // background: (<any>this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, .2),\n            clamplChildOY: false,\n            createCellContainerCallback: (cell, cellContainer) => {\n                const scene = cell.scene, item = cell.item;\n                if (cellContainer === null) {\n                    cellContainer = new MineSettleItem(scene, this.dpr);\n                    this.add(cellContainer);\n                }\n                cellContainer.setData({ item });\n                cellContainer.setItemData(item);\n                return cellContainer;\n            },\n        };\n        this.mPropGrid = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"GameGridTable\"](this.scene, config);\n        this.mPropGrid.layout();\n        this.mPropGrid.on(\"cellTap\", (cell) => {\n            const data = cell.itemData;\n            if (data) {\n                this.onSelectItemHandler(data);\n            }\n        });\n        this.titleimage = this.scene.make.image({ x: 0, y: -this.bg.displayWidth * 0.5 - 10 * this.dpr, key: this.key, frame: \"title\" }, false);\n        this.titleName = this.scene.make.text({\n            x: 0, y: this.titleimage.y + 32 * this.dpr, text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"minesettle.settle\"),\n            style: { fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT }\n        }).setOrigin(0.5, 0.5);\n        this.confirmBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NineSliceButton\"](this.scene, 0, 100 * this.dpr, 90 * this.dpr, 40 * this.dpr, this.key, \"button\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"minesettle.savebag\"), this.dpr, this.scale, {\n            left: 20,\n            top: 20,\n            right: 20,\n            bottom: 20\n        });\n        this.confirmBtn.setTextStyle({\n            color: \"#976400\",\n            fontSize: 16 * this.dpr,\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n        });\n        this.add([this.blackGraphic, this.bg, this.titleimage, this.titleName, this.confirmBtn]);\n        this.add(this.mPropGrid.table);\n        this.resize(0, 0);\n        super.init();\n    }\n    setMineSettlePacket(content) {\n        if (this.mInitialized) {\n            this.mPropGrid.setItems(content.items);\n        }\n    }\n    destroy() {\n        if (this.mPropGrid)\n            this.mPropGrid.destroy();\n        if (this.confirmBtn)\n            this.confirmBtn.destroy();\n        this.mPropGrid = null;\n        this.confirmBtn = null;\n        super.destroy();\n    }\n    refreshData() {\n        const settleData = this.getData(\"settleData\");\n        if (settleData)\n            this.setMineSettlePacket(settleData);\n    }\n    onSelectItemHandler(data) {\n    }\n    onConfirmBtnClick(pointer) {\n        if (!this.checkPointerDis(pointer))\n            return;\n        this.emit(\"hide\");\n    }\n    checkPointerDis(pointer) {\n        if (!this.mWorld)\n            return true;\n        return Math.abs(pointer.downX - pointer.upX) < 10 * this.mWorld.uiRatio * this.mWorld.uiScale &&\n            Math.abs(pointer.downY - pointer.upY) < 10 * this.mWorld.uiRatio * this.mWorld.uiScale;\n    }\n}\nclass MineSettleItem extends Phaser.GameObjects.Container {\n    constructor(scene, dpr) {\n        super(scene);\n        this.dpr = dpr;\n        this.icon = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](scene, 0, 0);\n        this.itemCount = this.scene.make.text({\n            text: \"600\",\n            style: {\n                fontSize: 18,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false);\n        this.itemCount.setOrigin(0.5, 0);\n        this.icon.setOrigin(0, 0);\n        this.icon.setScale(this.dpr);\n        // this.icon.setSize(50, 50);\n        this.itemCount.setPosition(0, this.icon.height);\n        this.add(this.icon);\n        this.add(this.itemCount);\n    }\n    setItemData(data) {\n        this.itemData = data;\n        this.itemCount.setFontSize(this.dpr * 14);\n        this.itemCount.text = data.count + \"\";\n        const url = game_core__WEBPACK_IMPORTED_MODULE_0__[\"Url\"].getOsdRes(data.display.texturePath);\n        this.icon.load(url, this, () => {\n            ///  this.icon.setDisplaySize(33 * this.dpr, 33 * this.dpr);\n            this.icon.setScale(33 * this.dpr / this.icon.width);\n            this.icon.setPosition(0, 3 * this.dpr);\n            this.itemCount.setPosition(this.icon.displayWidth * 0.5, this.icon.x + this.icon.displayHeight + 3 * this.dpr);\n        });\n    }\n    destroy() {\n        super.destroy();\n        if (this.icon)\n            this.icon.destroy();\n        if (this.itemCount)\n            this.itemCount.destroy();\n        this.itemData = null;\n        this.icon = null;\n        this.itemCount = null;\n        this.scene = null;\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MineSettle/MineSettlePanel.ts?");

/***/ }),

/***/ "./src/ui/MineSettle/index.ts":
/*!************************************!*\
  !*** ./src/ui/MineSettle/index.ts ***!
  \************************************/
/*! exports provided: MineSettle, MineSettleMediator, MineSettlePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _MineSettle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MineSettle */ \"./src/ui/MineSettle/MineSettle.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MineSettle\", function() { return _MineSettle__WEBPACK_IMPORTED_MODULE_0__[\"MineSettle\"]; });\n\n/* harmony import */ var _MineSettleMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MineSettleMediator */ \"./src/ui/MineSettle/MineSettleMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MineSettleMediator\", function() { return _MineSettleMediator__WEBPACK_IMPORTED_MODULE_1__[\"MineSettleMediator\"]; });\n\n/* harmony import */ var _MineSettlePanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MineSettlePanel */ \"./src/ui/MineSettle/MineSettlePanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MineSettlePanel\", function() { return _MineSettlePanel__WEBPACK_IMPORTED_MODULE_2__[\"MineSettlePanel\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/MineSettle/index.ts?");

/***/ }),

/***/ "./src/ui/NpcDialogue/NpcDialogue.ts":
/*!*******************************************!*\
  !*** ./src/ui/NpcDialogue/NpcDialogue.ts ***!
  \*******************************************/
/*! exports provided: NpcDialogue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NpcDialogue\", function() { return NpcDialogue; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n\nclass NpcDialogue extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/NpcDialogue/NpcDialogue.ts?");

/***/ }),

/***/ "./src/ui/NpcDialogue/NpcDialogueMediator.ts":
/*!***************************************************!*\
  !*** ./src/ui/NpcDialogue/NpcDialogueMediator.ts ***!
  \***************************************************/
/*! exports provided: NpcDialogueMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NpcDialogueMediator\", function() { return NpcDialogueMediator; });\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _NpcDialogue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./NpcDialogue */ \"./src/ui/NpcDialogue/NpcDialogue.ts\");\n/* harmony import */ var _NpcDialoguePanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./NpcDialoguePanel */ \"./src/ui/NpcDialogue/NpcDialoguePanel.ts\");\n\n\n\nclass NpcDialogueMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_0__[\"BaseMediator\"] {\n    constructor(layerMgr, scene, worldService) {\n        super();\n        this.scene = scene;\n        this.layerMgr = layerMgr;\n        this.world = worldService;\n    }\n    show() {\n        if ((this.mView && this.mView.isShow()) || this.mShow) {\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _NpcDialoguePanel__WEBPACK_IMPORTED_MODULE_2__[\"NpcDialoguePanel\"](this.scene, this.world);\n        }\n        if (!this.npcDialogue) {\n            this.npcDialogue = new _NpcDialogue__WEBPACK_IMPORTED_MODULE_1__[\"NpcDialogue\"](this.world);\n            this.npcDialogue.register();\n        }\n        this.layerMgr.addToUILayer(this.mView);\n        this.mView.show();\n    }\n    isSceneUI() {\n        return true;\n    }\n    destroy() {\n        if (this.npcDialogue) {\n            this.npcDialogue.destroy();\n            this.npcDialogue = undefined;\n        }\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = undefined;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/NpcDialogue/NpcDialogueMediator.ts?");

/***/ }),

/***/ "./src/ui/NpcDialogue/NpcDialoguePanel.ts":
/*!************************************************!*\
  !*** ./src/ui/NpcDialogue/NpcDialoguePanel.ts ***!
  \************************************************/
/*! exports provided: NpcDialoguePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NpcDialoguePanel\", function() { return NpcDialoguePanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\n\nclass NpcDialoguePanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"commonkey\";\n        this.listItems = [];\n    }\n    resize(w, h) {\n        const zoom = this.mWorld.uiScale;\n        const width = this.scene.cameras.main.width / zoom;\n        const height = this.scene.cameras.main.height / zoom;\n        const cheight = 177 * this.dpr * zoom;\n        super.resize(width, height);\n        this.x = width / 2;\n        this.y = height / 2;\n        this.content.setPosition(0, (height - cheight) / 2);\n        this.setSize(width, height);\n    }\n    preload() {\n        this.addAtlas(this.key, \"common/ui_base.png\", \"common/ui_base.json\");\n        super.preload();\n    }\n    init() {\n        const zoom = this.mWorld.uiScale;\n        const width = this.scene.cameras.main.width / zoom;\n        const height = this.scene.cameras.main.height / zoom;\n        const cheight = 177 * this.dpr * zoom;\n        this.content = this.scene.make.container({ x: 0 * this.dpr * zoom, y: (height - cheight) / 2, width, height: cheight }, false);\n        this.content.setSize(width, cheight);\n        const bg = this.scene.make.image({ x: 0, y: 0, key: this.key, frame: \"menu_bg_l\" });\n        bg.scaleY = zoom;\n        bg.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\n        bg.displayWidth = width;\n        bg.displayHeight = cheight;\n        const whiteGraphic = this.scene.make.graphics(undefined, false);\n        const graphicWidth = width - 30 * this.dpr * zoom;\n        const graphicHeight = 122 * this.dpr * zoom;\n        whiteGraphic.setPosition(-graphicWidth >> 1, -graphicHeight * 0.5 + 13 * this.dpr * zoom);\n        whiteGraphic.clear();\n        whiteGraphic.fillStyle(0xffffff, 1);\n        whiteGraphic.fillRoundedRect(0, 0, graphicWidth, graphicHeight, 8 * this.dpr * zoom);\n        const iconPosx = -width * 0.5 + 38 * this.dpr * zoom;\n        const iconPosy = -cheight * 0.5 + 25 * this.dpr * zoom;\n        this.npcIcon = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](this.scene, iconPosx, iconPosy);\n        const nameBg = this.scene.make.image({ x: iconPosx + 100 * this.dpr * zoom, y: iconPosy, key: this.key, frame: \"name_bg\" });\n        this.npcName = this.scene.make.text({\n            x: nameBg.x - (48 * this.dpr * zoom), y: nameBg.y, text: \".\",\n            style: { fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT }\n        }).setOrigin(0, 0.5);\n        const closeBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"Button\"](this.scene, this.key, \"close_1\", \"close_1\");\n        closeBtn.setPosition(width * 0.5 - 30 * this.dpr * zoom, -cheight * 0.5 + 10 * this.dpr * zoom);\n        closeBtn.on(\"Tap\", this.onCloseHandler, this);\n        this.content.add([bg, whiteGraphic, this.npcIcon, nameBg, this.npcName, closeBtn]);\n        this.add(this.content);\n        this.resize(0, 0);\n        super.init();\n        this.layoutItem(undefined);\n    }\n    layoutItem(arr) {\n        arr = [\"\", \"\", \"\"];\n        const len = arr.length;\n        const scaleRadio = (len > 4 ? 2 : 1);\n        const zoom = this.mWorld.uiScale;\n        const height = 177 * this.dpr * zoom;\n        const width = 295 * this.dpr * zoom;\n        const cheight = 27 * this.dpr * zoom;\n        const cwidth = width / scaleRadio;\n        let offsetY = 4 * this.dpr * zoom;\n        if (len === 2)\n            offsetY = 15 * this.dpr * zoom;\n        else if (len === 3)\n            offsetY = 10 * this.dpr * zoom;\n        const posX = 0;\n        const posy = (124 * this.dpr * zoom - (offsetY + cheight) * (len < 4 ? len : 4) - offsetY) / 2 - 42 * this.dpr * zoom;\n        for (let i = 0; i < len; i++) {\n            const item = new NpcDialogueItem(this.scene, this.dpr, zoom, this.key);\n            const x = (width - cwidth) * 0.5 * (i < 4 ? -1 : 1);\n            const y = posy + cheight * 0.5 + (cheight + offsetY) * (i % 4);\n            item.setItemSize(cwidth, cheight);\n            item.setPosition(x, y);\n            item.setItemData(arr[i], new game_core__WEBPACK_IMPORTED_MODULE_0__[\"Handler\"](this, this.onItemHandler));\n            this.content.add(item);\n        }\n    }\n    onItemHandler(item) {\n        if (this.curSelectItem)\n            this.curSelectItem.select = false;\n        item.select = true;\n        this.curSelectItem = item;\n    }\n    onCloseHandler() {\n        this.hide();\n    }\n}\nclass NpcDialogueItem extends Phaser.GameObjects.Container {\n    constructor(scene, dpr, zoom, key) {\n        super(scene);\n        this.dpr = 0;\n        this.zoom = 0;\n        this.zoom = zoom;\n        this.dpr = dpr;\n        this.selectBg = this.scene.make.image({ x: 0, y: 0, key, frame: \"select_bg\" });\n        this.arrImg = this.scene.make.image({ x: -this.selectBg.width * 0.5, y: 0, key, frame: \"arrow_r\" });\n        this.content = this.scene.make.text({\n            x: 0, y: 0, text: \"\",\n            style: { color: \"#000000\", fontSize: 15 * dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT }\n        }).setOrigin(0, 0.5);\n        this.add([this.selectBg, this.arrImg, this.content]);\n        this.width = this.selectBg.width;\n        this.height = this.selectBg.height;\n        this.on(\"pointerdown\", this.onClickHandler, this);\n    }\n    setItemData(data, handler) {\n        this.itemData = data;\n        this.content.text = data;\n        this.handler = handler;\n        this.select = false;\n    }\n    set select(value) {\n        this.selectBg.visible = value;\n    }\n    setItemSize(width, height) {\n        super.setSize(width, height);\n        this.selectBg.displayWidth = width;\n        this.arrImg.x = -width * 0.5 * 0.9;\n        this.content.x = this.arrImg.x + 20 * this.dpr * this.zoom;\n        this.removeInteractive();\n        this.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n    }\n    onClickHandler() {\n        if (this.handler)\n            this.handler.runWith(this);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/NpcDialogue/NpcDialoguePanel.ts?");

/***/ }),

/***/ "./src/ui/NpcDialogue/index.ts":
/*!*************************************!*\
  !*** ./src/ui/NpcDialogue/index.ts ***!
  \*************************************/
/*! exports provided: NpcDialogue, NpcDialogueMediator, NpcDialoguePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _NpcDialogue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NpcDialogue */ \"./src/ui/NpcDialogue/NpcDialogue.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NpcDialogue\", function() { return _NpcDialogue__WEBPACK_IMPORTED_MODULE_0__[\"NpcDialogue\"]; });\n\n/* harmony import */ var _NpcDialogueMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./NpcDialogueMediator */ \"./src/ui/NpcDialogue/NpcDialogueMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NpcDialogueMediator\", function() { return _NpcDialogueMediator__WEBPACK_IMPORTED_MODULE_1__[\"NpcDialogueMediator\"]; });\n\n/* harmony import */ var _NpcDialoguePanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./NpcDialoguePanel */ \"./src/ui/NpcDialogue/NpcDialoguePanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NpcDialoguePanel\", function() { return _NpcDialoguePanel__WEBPACK_IMPORTED_MODULE_2__[\"NpcDialoguePanel\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/NpcDialogue/index.ts?");

/***/ }),

/***/ "./src/ui/PiCaMainUI/PicaMainUI.ts":
/*!*****************************************!*\
  !*** ./src/ui/PiCaMainUI/PicaMainUI.ts ***!
  \*****************************************/
/*! exports provided: PicaMainUI */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaMainUI\", function() { return PicaMainUI; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass PicaMainUI extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n        this.register();\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_REQ_CLIENT_PKT_PLAYER_INFO, this.onUpdatePlayerInfo);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_EDIT_MODE_ROOM_INFO, this.onUpdateModeRoomInfo);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    sendEnterDecorate() {\n        if (this.connection) {\n            this.connection.send(new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_EDIT_MODE_ENTER));\n        }\n    }\n    destroy() {\n        this.unregister();\n    }\n    onUpdatePlayerInfo(packet) {\n        this.mEvent.emit(\"update\", packet.content);\n    }\n    onUpdateModeRoomInfo(packet) {\n        this.mEvent.emit(\"update\", packet.content);\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PiCaMainUI/PicaMainUI.ts?");

/***/ }),

/***/ "./src/ui/PiCaMainUI/PicaMainUIMediator.ts":
/*!*************************************************!*\
  !*** ./src/ui/PiCaMainUI/PicaMainUIMediator.ts ***!
  \*************************************************/
/*! exports provided: PicaMainUIMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaMainUIMediator\", function() { return PicaMainUIMediator; });\n/* harmony import */ var _PicaMainUIPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaMainUIPanel */ \"./src/ui/PiCaMainUI/PicaMainUIPanel.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _PicaMainUI__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PicaMainUI */ \"./src/ui/PiCaMainUI/PicaMainUI.ts\");\n\n\n\nclass PicaMainUIMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BaseMediator\"] {\n    constructor(layerManager, scene, worldService) {\n        super();\n        this.layerManager = layerManager;\n        this.scene = scene;\n        this.world = worldService;\n        this.mainUI = new _PicaMainUI__WEBPACK_IMPORTED_MODULE_2__[\"PicaMainUI\"](worldService);\n        this.mainUI.on(\"update\", this.onUpdateHandler, this);\n    }\n    show(param) {\n        if (this.mView) {\n            this.update(param);\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _PicaMainUIPanel__WEBPACK_IMPORTED_MODULE_0__[\"PicaMainUIPanel\"](this.scene, this.world);\n            this.mView.on(\"showPanel\", this.onShowPanelHandler, this);\n        }\n        this.mView.show(param);\n        this.mView.on(\"enterEdit\", this.onEnterEditSceneHandler, this);\n        this.layerManager.addToUILayer(this.mView);\n    }\n    destroy() {\n        if (this.mainUI) {\n            this.mainUI.destroy();\n        }\n        super.destroy();\n    }\n    onEnterEditSceneHandler() {\n        if (this.mainUI) {\n            this.mainUI.sendEnterDecorate();\n        }\n    }\n    onUpdateHandler(content) {\n        this.show(content);\n    }\n    onShowPanelHandler(panel, data) {\n        if (!panel || !this.world) {\n            return;\n        }\n        const uiManager = this.world.uiManager;\n        if (data)\n            uiManager.showMed(panel, data);\n        else\n            uiManager.showMed(panel);\n    }\n}\nPicaMainUIMediator.NAME = \"PicaMainUIMediator\";\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PiCaMainUI/PicaMainUIMediator.ts?");

/***/ }),

/***/ "./src/ui/PiCaMainUI/PicaMainUIPanel.ts":
/*!**********************************************!*\
  !*** ./src/ui/PiCaMainUI/PicaMainUIPanel.ts ***!
  \**********************************************/
/*! exports provided: PicaMainUIPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaMainUIPanel\", function() { return PicaMainUIPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\nclass PicaMainUIPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, worldService) {\n        super(scene, worldService);\n        this.key = \"main_ui\";\n    }\n    show(param) {\n        super.show(param);\n        if (this.mInitialized) {\n            this.setInteractive();\n            this.update(param);\n        }\n    }\n    resize(w, h) {\n        const width = this.scene.cameras.main.width / this.scale;\n        const height = this.scene.cameras.main.height / this.scale;\n        super.resize(width, height);\n        this.mCoinValue.x = width - this.mCoinValue.width / 2 - 5 * this.dpr;\n        this.mDiamondValue.x = width - this.mDiamondValue.width / 2 - 5 * this.dpr;\n    }\n    preload() {\n        this.addAtlas(this.key, \"main_ui/main_ui.png\", \"main_ui/main_ui.json\");\n        super.preload();\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        if (!this.mSceneName) {\n            game_core__WEBPACK_IMPORTED_MODULE_0__[\"Logger\"].getInstance().fatal(`${PicaMainUIPanel.name}: sceneName does not exist!`);\n            return;\n        }\n        this.mSceneName.on(\"pointerup\", this.onEnterEditScene, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        if (!this.mSceneName) {\n            game_core__WEBPACK_IMPORTED_MODULE_0__[\"Logger\"].getInstance().fatal(`${PicaMainUIPanel.name}: sceneName does not exist!`);\n            return;\n        }\n        this.mSceneName.off(\"pointerup\", this.onEnterEditScene, this);\n    }\n    update(param) {\n        Object.assign(this.mShowData, param);\n        super.update(this.mShowData);\n        if (!param) {\n            return;\n        }\n        if (!this.mInitialized) {\n            return;\n        }\n        if (param.hasOwnProperty(\"level\"))\n            this.mExpProgress.setLv(param.level);\n        if (param.hasOwnProperty(\"coin\"))\n            this.mCoinValue.setText(param.coin.toString());\n        if (param.hasOwnProperty(\"diamond\"))\n            this.mDiamondValue.setText(param.diamond.toString());\n        if (param.hasOwnProperty(\"energy\")) {\n            const energy = param.energy;\n            if (energy) {\n                this.mStrengthValue.setValue(energy.currentValue, energy.max);\n            }\n            else {\n                this.mStrengthValue.setValue(0, 100);\n            }\n        }\n        if (param.hasOwnProperty(\"name\")) {\n            this.mSceneName.setText(param.name);\n            const bound = this.mSceneName.getBounds();\n            this.mSceneName.setSize(bound.width, bound.height);\n            this.mSceneName.setInteractive(new Phaser.Geom.Rectangle(this.mSceneName.width / 2, 0, this.mSceneName.width, this.mSceneName.height), Phaser.Geom.Rectangle.Contains);\n        }\n        if (param.hasOwnProperty(\"ownerName\")) {\n            this.mSceneType.setText(param.ownerName);\n        }\n        if (param.hasOwnProperty(\"playerCount\")) {\n            // TODO \n            this.mCounter.setText(`${param.playerCount}`);\n        }\n    }\n    init() {\n        const w = this.scene.cameras.main.width;\n        const h = this.scene.cameras.main.height;\n        this.mCoinValue = new ValueContainer(this.scene, this.key, \"coin\", this.dpr);\n        this.mCoinValue.y = 28 * this.dpr;\n        this.mDiamondValue = new ValueContainer(this.scene, this.key, \"diamond\", this.dpr);\n        this.mDiamondValue.y = 68 * this.dpr;\n        this.mSceneName = new SceneName(this.scene, this.key, \"room_icon\", \"setting_icon\", this.dpr);\n        this.mSceneName.setText(\"\");\n        this.mSceneName.x = 15 * this.dpr;\n        this.mSceneName.y = 55 * this.dpr;\n        this.mSceneType = new IconText(this.scene, this.key, \"star_icon\", this.dpr);\n        this.mSceneType.setText(\"\");\n        this.mSceneType.x = 15 * this.dpr;\n        this.mSceneType.y = 80 * this.dpr;\n        this.mSceneType.setColor(\"#FFFF00\");\n        this.mCounter = new IconText(this.scene, this.key, \"counter_icon\", this.dpr);\n        this.mCounter.setText(\"1\");\n        this.mCounter.x = 15 * this.dpr;\n        this.mCounter.y = 105 * this.dpr;\n        this.mCounter.setColor(\"#27f6ff\");\n        this.add([this.mCoinValue, this.mDiamondValue, this.mSceneName, this.mSceneType, this.mCounter]);\n        const frame = this.scene.textures.getFrame(this.key, \"strength_progress\");\n        this.mStrengthValue = new ProgressValue(this.scene, this.key, \"strength_icon\", this.dpr);\n        this.mStrengthValue.x = 78 * this.dpr;\n        this.mStrengthValue.y = 27 * this.dpr;\n        const ninePatch = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NinePatch\"](this.scene, 60 * this.dpr / 2, this.mStrengthValue.height / 2 - frame.height - 1 * this.dpr, 62 * this.dpr, frame.height, this.key, \"strength_progress\", undefined, undefined, {\n            left: 8 * this.dpr,\n            top: 3 * this.dpr,\n            right: frame.width - 2 - 8 * this.dpr,\n            bottom: frame.height - 1 - 3 * this.dpr\n        });\n        this.mStrengthValue.setProgress(ninePatch, this.scale);\n        this.playerIcon = this.scene.make.image({ key: this.key, frame: \"head\" });\n        this.playerIcon.x = -this.mStrengthValue.width * 0.5 - 18 * this.dpr;\n        this.mStrengthValue.add(this.playerIcon);\n        this.playerIcon.on(\"pointerup\", this.onHeadHandler, this);\n        this.playerIcon.setInteractive();\n        this.add(this.mStrengthValue);\n        this.mStrengthValue.setValue(1000, 1000);\n        this.mStrengthValue.setInteractive();\n        this.mStrengthValue.on(\"pointerup\", this.onStrengthHandler, this);\n        // frame = this.scene.textures.getFrame(this.key, \"health_progress\");\n        // const healthValue = new ProgressValue(this.scene, this.key, \"health_con\", this.dpr);\n        // healthValue.x = 150 * this.dpr;\n        // healthValue.y = 27 * this.dpr;\n        // const healthNinePatch = new NinePatch(this.scene, 60 * this.dpr / 2, healthValue.height / 2 - frame.height - 1 * this.dpr, 62 * this.dpr, frame.height, this.key, \"health_progress\", {\n        //     left: 8 * this.dpr,\n        //     top: 3 * this.dpr,\n        //     right: frame.width - 2 - 8 * this.dpr,\n        //     bottom: frame.height - 1 - 3 * this.dpr\n        // });\n        // healthValue.setProgress(healthNinePatch, this.scale);\n        // this.add(healthValue);\n        // healthValue.setValue(200, 1000);\n        this.mExpProgress = new ExpProgress(this.scene, this.key, this.dpr, this.scale, this.mWorld);\n        this.textToolTip = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"TextToolTips\"](this.scene, this.key, \"tips_bg\", this.dpr, this.scale);\n        this.add(this.mExpProgress);\n        this.add(this.textToolTip);\n        this.textToolTip.setSize(160 * this.dpr, 45).visible = false;\n        this.resize(w, h);\n        super.init();\n    }\n    onEnterEditScene() {\n        this.emit(\"enterEdit\");\n    }\n    onHeadHandler() {\n        this.emit(\"showPanel\", \"CharacterInfo\");\n    }\n    onStrengthHandler() {\n        const width = this.scaleWidth;\n        const height = this.scaleHeight;\n        const energy = this.showData.energy;\n        const text = \"\" + `${energy.currentValue}/${energy.max}\\n` + \"151\";\n        this.textToolTip.setTextData(text, 3000);\n        this.textToolTip.setPosition(120 * this.dpr, 80 * this.dpr);\n    }\n}\nclass ValueContainer extends Phaser.GameObjects.Container {\n    constructor(scene, key, leftIcon, dpr = 1) {\n        super(scene);\n        this.init(key, leftIcon, dpr);\n    }\n    setText(val) {\n        this.mText.setText(val);\n    }\n    init(key, leftIcon, dpr) {\n        const bg = this.scene.make.image({\n            key,\n            frame: \"price_bg\"\n        }, false);\n        const left = this.scene.make.image({\n            key,\n            frame: leftIcon,\n        }, false);\n        this.mText = this.scene.make.text({\n            text: \"0\",\n            width: bg.width,\n            height: bg.height,\n            style: {\n                fontSize: 14 * dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(1, 0);\n        this.mText.setStroke(\"#000000\", 1 * dpr);\n        this.mAddBtn = this.scene.make.image({\n            key,\n            frame: \"add_btn\"\n        });\n        this.setSize(bg.width, bg.height);\n        left.x = -this.width * this.originX + 10 * dpr;\n        this.mAddBtn.x = this.width * this.originX - this.mAddBtn.width * this.originX;\n        this.mAddBtn.y = (this.height - this.mAddBtn.height) / 2 + 2 * dpr;\n        this.mText.x = this.width / 2 - 30 * dpr;\n        this.mText.y = -(this.height - 12 * dpr) / 2;\n        this.add([bg, left, this.mText, this.mAddBtn]);\n    }\n}\nclass IconText extends Phaser.GameObjects.Container {\n    constructor(scene, key, frame, dpr = 1) {\n        super(scene);\n        const icon = scene.make.image({\n            key,\n            frame\n        }, false);\n        this.mText = scene.make.text({\n            style: {\n                fontSize: 14 * dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        this.mText.x = icon.width / 2 + 8 * dpr;\n        // this.mText.y = -icon.height / 2;\n        this.mText.setStroke(\"#000000\", 2 * dpr);\n        this.add([icon, this.mText]);\n    }\n    setText(val) {\n        this.mText.setText(val);\n    }\n    setStroke(color, thickness) {\n        this.mText.setStroke(color, thickness);\n    }\n    setColor(color) {\n        this.mText.setColor(color);\n    }\n}\nclass SceneName extends IconText {\n    constructor(scene, key, leftFrame, rightFrame, dpr = 1) {\n        super(scene, key, leftFrame, dpr);\n        this.mDpr = dpr;\n        this.mRightIcon = scene.make.image({\n            y: 2 * dpr,\n            key,\n            frame: rightFrame\n        }, false);\n        this.add(this.mRightIcon);\n        this.mRightIcon.y = -1 * dpr;\n    }\n    setText(val) {\n        super.setText(val);\n        this.mRightIcon.x = this.mText.x + this.mText.width + this.mRightIcon.width / 2 + 2 * this.mDpr;\n    }\n}\nclass ExpProgress extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr, scale, world) {\n        super(scene);\n        const width = world.getSize().width / scale;\n        let frame = this.scene.textures.getFrame(key, \"exp_bg\");\n        this.setSize(width, frame.height);\n        const progressW = this.width;\n        const progressH = this.height;\n        this.mProgressBar = new ProgressBar(scene, dpr);\n        this.mProgressBar.setSize(this.width, this.height);\n        const bg = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NinePatch\"](this.scene, progressW / 2, progressH / 2, progressW, progressH, key, \"exp_bg\", undefined, undefined, {\n            left: 8 * dpr,\n            top: 3 * dpr,\n            right: frame.width - 2 - 8 * dpr,\n            bottom: frame.height - 1 - 3 * dpr\n        });\n        this.mProgressBar.setBackground(bg);\n        frame = this.scene.textures.getFrame(key, \"exp_progress\");\n        const progres = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NinePatch\"](this.scene, progressW / 2, progressH / 2, width, frame.height, key, \"exp_progress\", undefined, undefined, {\n            left: 8 * dpr,\n            top: 3 * dpr,\n            right: frame.width - 2 - 10 * dpr,\n            bottom: frame.height - 1 - 5 * dpr\n        });\n        this.mProgressBar.setProgress(progres, this.x, this.y, scale);\n        this.mProgressBar.setRatio(0.5);\n        this.mCurrentLv = scene.make.text({\n            text: \"Lv. 57\",\n            style: {\n                fontSize: 10 * dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false);\n        this.mCurrentLv.setStroke(\"#000000\", 1 * dpr);\n        this.mNextLv = scene.make.text({\n            text: \"Lv. 58\",\n            style: {\n                fontSize: 10 * dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0);\n        this.mNextLv.setStroke(\"#000000\", 1 * dpr);\n        this.mNextLv.x = this.width - this.mNextLv.width;\n        this.add([this.mProgressBar, this.mCurrentLv, this.mNextLv]);\n    }\n    setLv(val) {\n        this.mCurrentLv.setText(val.toString());\n        this.mNextLv.setText((val + 1).toString());\n        this.mNextLv.x = this.width - this.mNextLv.width;\n    }\n}\nclass ProgressValue extends ValueContainer {\n    constructor(scene, key, leftIcon, dpr) {\n        super(scene, key, leftIcon, dpr);\n    }\n    setProgress(progres, scale) {\n        this.mProgress.setProgress(progres, this.x + this.mProgress.x, this.y + this.mProgress.y, scale);\n    }\n    setValue(val, maxValue) {\n        if (this.mText) {\n            this.mText.text = val.toString();\n            this.mProgress.setRatio(val / maxValue);\n        }\n    }\n    setInteractive(shape) {\n        shape = shape || new Phaser.Geom.Rectangle(0, 0, this.width, this.height);\n        super.setInteractive(shape, Phaser.Geom.Rectangle.Contains);\n        return this;\n    }\n    init(key, leftIcon, dpr) {\n        const bg = this.scene.make.image({\n            key,\n            frame: \"strength_bg\"\n        }, false);\n        this.setSize(bg.width, bg.height);\n        const left = this.scene.make.image({\n            key,\n            frame: leftIcon,\n        }, false);\n        this.mProgress = new ProgressBar(this.scene, dpr);\n        this.mProgress.x = -this.width / 2 + 10 * dpr;\n        this.mProgress.y = 4 * dpr;\n        this.mText = this.scene.make.text({\n            text: \"0\",\n            width: bg.width,\n            height: bg.height,\n            style: {\n                fontSize: 10 * dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0.5);\n        this.mText.setStroke(\"#000000\", 1 * dpr);\n        this.mAddBtn = this.scene.make.image({\n            key,\n            frame: \"add_btn\"\n        });\n        this.setSize(bg.width, bg.height);\n        left.x = -this.width * this.originX + 10 * dpr;\n        this.mAddBtn.x = this.width * this.originX - 10 * dpr;\n        this.mAddBtn.y = 6 * dpr;\n        // this.mText.x = this.width / 2\n        this.mText.y = (this.height - this.mText.height) / 2;\n        this.add([bg, this.mProgress, left, this.mText, this.mAddBtn]);\n    }\n}\nclass ProgressBar extends Phaser.GameObjects.Container {\n    constructor(scene, dpr) {\n        super(scene);\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.dpr = dpr;\n    }\n    setBackground(bg) {\n        this.addAt(bg, 0);\n    }\n    setProgress(progress, offsetX, offsetY, scale) {\n        this.offsetX = offsetX;\n        this.offsetY = offsetY;\n        this.mScale = scale;\n        this.mProgress = progress;\n        this.setSize(progress.width * this.mScale, progress.height * this.mScale);\n        this.mMaskGraphics = this.scene.make.graphics(undefined, false);\n        this.mMaskGraphics.fillStyle(0xFF9900);\n        this.mMaskGraphics.fillRoundedRect(0, progress.y * this.mScale - progress.height * this.mScale / 2, this.width, progress.height, 10);\n        this.add(this.mProgress);\n        this.mProgress.mask = new Phaser.Display.Masks.GeometryMask(this.scene, this.mMaskGraphics);\n        this.mMaskGraphics.x = offsetX * scale;\n        this.mMaskGraphics.y = offsetY * scale;\n    }\n    setRatio(ratio) {\n        if (!this.mMaskGraphics) {\n            return;\n        }\n        this.mMaskGraphics.x = ((this.width * ratio) - this.width + this.offsetX);\n        // setInterval(() => {\n        //     this.mMaskGraphics.x += 1 * this.dpr;\n        // }, 100);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PiCaMainUI/PicaMainUIPanel.ts?");

/***/ }),

/***/ "./src/ui/PiCaMainUI/index.ts":
/*!************************************!*\
  !*** ./src/ui/PiCaMainUI/index.ts ***!
  \************************************/
/*! exports provided: PicaMainUI, PicaMainUIMediator, PicaMainUIPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _PicaMainUI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaMainUI */ \"./src/ui/PiCaMainUI/PicaMainUI.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaMainUI\", function() { return _PicaMainUI__WEBPACK_IMPORTED_MODULE_0__[\"PicaMainUI\"]; });\n\n/* harmony import */ var _PicaMainUIMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaMainUIMediator */ \"./src/ui/PiCaMainUI/PicaMainUIMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaMainUIMediator\", function() { return _PicaMainUIMediator__WEBPACK_IMPORTED_MODULE_1__[\"PicaMainUIMediator\"]; });\n\n/* harmony import */ var _PicaMainUIPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PicaMainUIPanel */ \"./src/ui/PiCaMainUI/PicaMainUIPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaMainUIPanel\", function() { return _PicaMainUIPanel__WEBPACK_IMPORTED_MODULE_2__[\"PicaMainUIPanel\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PiCaMainUI/index.ts?");

/***/ }),

/***/ "./src/ui/PicaChat/PicaChat.ts":
/*!*************************************!*\
  !*** ./src/ui/PicaChat/PicaChat.ts ***!
  \*************************************/
/*! exports provided: PicaChat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaChat\", function() { return PicaChat; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass PicaChat extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor($world) {\n        super();\n        this.world = $world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_CHAT, this.handleCharacterChat);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    sendMessage(val) {\n        const pkt = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_GATEWAY_REQ_VIRTUAL_WORLD_CHAT);\n        const content = pkt.content;\n        content.chatChannel = 0;\n        content.chatContext = val;\n        this.connection.send(pkt);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    handleCharacterChat(packet) {\n        this.mEvent.emit(\"chat\", packet.content);\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaChat/PicaChat.ts?");

/***/ }),

/***/ "./src/ui/PicaChat/PicaChatMediator.ts":
/*!*********************************************!*\
  !*** ./src/ui/PicaChat/PicaChatMediator.ts ***!
  \*********************************************/
/*! exports provided: PicaChatMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaChatMediator\", function() { return PicaChatMediator; });\n/* harmony import */ var _PicaChatPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaChatPanel */ \"./src/ui/PicaChat/PicaChatPanel.ts\");\n/* harmony import */ var _PicaNavigate_PicaNavigateMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../PicaNavigate/PicaNavigateMediator */ \"./src/ui/PicaNavigate/PicaNavigateMediator.ts\");\n/* harmony import */ var _PicaChat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PicaChat */ \"./src/ui/PicaChat/PicaChat.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nclass PicaChatMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"BaseMediator\"] {\n    constructor(layerManager, scene, worldService) {\n        super();\n        this.layerManager = layerManager;\n        this.world = worldService;\n        this.scene = this.layerManager.scene;\n    }\n    show() {\n        if ((this.mView && this.mView.isShow()) || this.mShow) {\n            this.mView.show();\n            this.layerManager.addToUILayer(this.mView);\n            return;\n        }\n        if (!this.mChat) {\n            this.mChat = new _PicaChat__WEBPACK_IMPORTED_MODULE_2__[\"PicaChat\"](this.world);\n            this.mChat.on(\"chat\", this.onChatHandler, this);\n            this.mChat.register();\n        }\n        if (!this.mView) {\n            this.mView = new _PicaChatPanel__WEBPACK_IMPORTED_MODULE_0__[\"PicaChatPanel\"](this.scene, this.world);\n            this.mView.on(\"showNavigate\", this.onShowNavigateHandler, this);\n            this.mView.on(\"chat\", this.onSendChatHandler, this);\n        }\n        this.mView.show();\n        this.layerManager.addToUILayer(this.mView);\n    }\n    isSceneUI() {\n        return true;\n    }\n    destroy() {\n        if (this.mChat) {\n            this.mChat.destroy();\n            this.mChat = undefined;\n        }\n        super.destroy();\n    }\n    onShowNavigateHandler() {\n        if (!this.world) {\n            return;\n        }\n        const uiManager = this.world.uiManager;\n        const mediator = uiManager.getMediator(_PicaNavigate_PicaNavigateMediator__WEBPACK_IMPORTED_MODULE_1__[\"PicaNavigateMediator\"].name);\n        if (mediator) {\n            mediator.show();\n            this.mView.hide();\n            this.mView.removeListen();\n            this.layerManager.removeToUILayer(this.mView);\n        }\n    }\n    onChatHandler(content) {\n        if (!this.mView || !this.world || !this.world.roomManager || !this.world.roomManager.currentRoom) {\n            return;\n        }\n        const playerManager = this.world.roomManager.currentRoom.playerManager;\n        const player = playerManager.get(content.chatSenderid);\n        if (player) {\n            this.mView.appendChat(`[color=#ffffff][]${player.model.nickname}: ${content.chatContext}[/color]\\n`);\n        }\n    }\n    onSendChatHandler(val) {\n        if (!this.mChat) {\n            return;\n        }\n        if (val === \"whosyourdaddy\") {\n            this.world.uiManager.showMed(\"DebugLogger\");\n        }\n        this.mChat.sendMessage(val);\n    }\n}\nPicaChatMediator.NAME = \"PicaChatMediator\";\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaChat/PicaChatMediator.ts?");

/***/ }),

/***/ "./src/ui/PicaChat/PicaChatPanel.ts":
/*!******************************************!*\
  !*** ./src/ui/PicaChat/PicaChatPanel.ts ***!
  \******************************************/
/*! exports provided: PicaChatPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaChatPanel\", function() { return PicaChatPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\nclass PicaChatPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"pica_chat\";\n        this.MAX_HEIGHT = 460 * this.dpr;\n        this.MIN_HEIGHT = 100 * this.dpr;\n        this.scale = 1;\n    }\n    show(param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.setInteractive();\n        this.addListen();\n    }\n    resize(w, h) {\n        this.setSize(w, h);\n        const zoom = this.scale;\n        const width = this.scene.cameras.main.width;\n        const height = this.scene.cameras.main.height;\n        const frame = this.scene.textures.getFrame(this.key, \"title_bg.png\");\n        const scaleRatio = width / frame.width;\n        this.mTitleBg.scaleX = scaleRatio;\n        this.mTitleBg.x = width / 2;\n        this.y = height - this.height;\n        this.mBackground.clear();\n        this.mBackground.fillStyle(0, 0.6);\n        this.mBackground.fillRect(0, 0, width, h);\n        // this.mBackground.setInteractive();\n        this.mNavigateBtn.x = width - this.mNavigateBtn.width / 2 - 2 * this.dpr * zoom;\n        this.mNavigateBtn.y = this.height - this.mNavigateBtn.height / 2 - 5 * this.dpr * zoom;\n        this.mScrollBtn.x = width - this.mScrollBtn.width / 2 - 2 * this.dpr * zoom;\n        this.mTextArea.childrenMap.child.setMinSize(w, (h - 16 * this.dpr) * zoom);\n        this.mTextArea.layout();\n        this.mTextArea.setPosition(this.width / 2 + 4 * this.dpr, this.y + this.mTextArea.height / 2 + 10 * this.dpr * zoom);\n        const textMask = this.mTextArea.childrenMap.text;\n        textMask.y = 8 * this.dpr;\n        this.mTextArea.scrollToBottom();\n        super.resize(w, h);\n    }\n    appendChat(val) {\n        if (this.mTextArea) {\n            this.mTextArea.appendText(val);\n            this.mTextArea.scrollToBottom();\n        }\n    }\n    hide() {\n        this.mShow = false;\n    }\n    addListen() {\n        if (!this.mInitialized || !this.interactiveBoo)\n            return;\n        // this.mBackground.setInteractive();\n        this.mChatBtn.setInteractive();\n        this.mEmojiBtn.setInteractive();\n        this.mScrollBtn.setInteractive();\n        this.mNavigateBtn.setInteractive();\n        this.mTextArea.childrenMap.child.setInteractive();\n        this.mScrollBtn.on(\"drag\", this.onDragHandler, this);\n        this.scene.input.setDraggable(this.mScrollBtn, true);\n        this.mNavigateBtn.on(\"pointerup\", this.onShowNavigateHandler, this);\n        this.mChatBtn.on(\"pointerup\", this.onShowInputHanldler, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.mBackground.disableInteractive();\n        this.mChatBtn.disableInteractive();\n        this.mEmojiBtn.disableInteractive();\n        this.mScrollBtn.disableInteractive();\n        this.mNavigateBtn.disableInteractive();\n        this.mTextArea.childrenMap.child.disableInteractive();\n        this.mScrollBtn.off(\"drag\", this.onDragHandler, this);\n        this.mNavigateBtn.off(\"pointerup\", this.onShowNavigateHandler, this);\n        this.mChatBtn.off(\"pointerup\", this.onShowInputHanldler, this);\n    }\n    preload() {\n        this.addAtlas(this.key, \"pica_chat/pica_chat.png\", \"pica_chat/pica_chat.json\");\n        super.preload();\n    }\n    init() {\n        const width = this.scene.cameras.main.width;\n        const height = this.scene.cameras.main.height;\n        this.mBackground = this.scene.make.graphics(undefined, false);\n        const zoom = this.scale;\n        this.setSize(width, 135 * this.dpr);\n        this.mTileContainer = this.scene.make.container(undefined, false);\n        this.mScrollBtn = this.scene.make\n            .image({\n            key: this.key,\n            frame: \"scroll_btn.png\"\n        }, false)\n            .setScale(zoom);\n        this.mTitleBg = this.scene.make.image({\n            key: this.key,\n            frame: \"title_bg.png\"\n        }, false)\n            .setScale(zoom);\n        this.mTitleBg.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\n        this.mChatBtn = this.scene.make\n            .image({\n            x: 33 * this.dpr * zoom,\n            key: this.key,\n            frame: \"chat_icon.png\"\n        }, false)\n            .setScale(zoom);\n        this.mHornBtn = this.scene.make\n            .image({\n            x: 96 * this.dpr * zoom,\n            key: this.key,\n            frame: \"horn_icon.png\"\n        }, false)\n            .setScale(zoom);\n        this.mEmojiBtn = this.scene.make\n            .image({\n            x: 155 * this.dpr * zoom,\n            key: this.key,\n            frame: \"emoji.png\"\n        }, false)\n            .setScale(zoom);\n        this.mChatBtn.y = -this.mChatBtn.height / 2 + this.mTitleBg.height;\n        this.mHornBtn.y = -this.mHornBtn.height / 2 + this.mTitleBg.height;\n        this.mEmojiBtn.y = -this.mEmojiBtn.height / 2 + this.mTitleBg.height;\n        this.mOutputText = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BBCodeText\"](this.mScene, 0, 0, \"\", {\n            fontSize: 14 * this.dpr / zoom + \"px\",\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            stroke: \"#000000\",\n            strokeThickness: 1 * this.dpr * zoom,\n            textMask: false,\n            shadow: {\n                offsetX: 0,\n                offsetY: 0,\n                color: \"#000\",\n                blur: 4,\n                stroke: true,\n                fill: true\n            },\n            wrap: {\n                mode: \"char\",\n                width: width - 12 * this.dpr * zoom\n            }\n        });\n        const background = this.scene.make.graphics(undefined, false);\n        this.mTextArea = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"TextArea\"](this.mScene, {\n            x: width / 2 + 4 * this.dpr * zoom,\n            y: 160 * this.dpr * zoom,\n            // background: (<any> this.scene).rexUI.add.roundRectangle(0, 0, 2, 2, 0, 0xFF9900, 0.2),\n            textWidth: width - 4 * this.dpr * zoom,\n            textHeight: this.MAX_HEIGHT,\n            text: this.mOutputText,\n        })\n            .layout();\n        this.mNavigateBtn = this.scene.make.image({\n            key: this.key,\n            frame: \"more_btn.png\"\n        }, false)\n            .setScale(zoom);\n        this.mTileContainer.add([\n            this.mTitleBg,\n            this.mChatBtn,\n            this.mHornBtn,\n            this.mEmojiBtn,\n            this.mScrollBtn\n        ]);\n        this.add([\n            this.mBackground,\n            this.mTileContainer,\n            this.mTextArea,\n            this.mOutputText,\n            background,\n            this.mNavigateBtn\n        ]);\n        this.mTextArea.setSliderEnable(false);\n        // this.mTextArea.childrenMap.child.disableInteractive();\n        this.resize(this.width, 400);\n        super.init();\n        this.removeInteractive();\n        // this.addActionListener();\n        // this.appendChat(\"[color=yellow][/color]\\n\");\n        // this.appendChat(\"[color=yellow][/color]\\n\");\n        // this.appendChat(\"[color=#ffffff][]Lv1[/color]\\n\");\n        // this.appendChat(\"[color=#66ffff][]44h[/color]\\n\");\n        // this.appendChat(\"[color=#ffff00]6[/color]\\n\");\n    }\n    onDragHandler(pointer, dragX, dragY) {\n        const height = this.height + (pointer.prevPosition.y - pointer.position.y);\n        if (height > this.MAX_HEIGHT || height < this.MIN_HEIGHT) {\n            return;\n        }\n        this.resize(this.width, height);\n    }\n    onShowNavigateHandler() {\n        this.emit(\"showNavigate\");\n    }\n    onShowInputHanldler() {\n        // new InputPanel(this.scene);\n        if (this.mInputText) {\n            return;\n        }\n        this.mInputText = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"InputPanel\"](this.scene, this.mWorld);\n        this.mInputText.once(\"close\", this.sendChat, this);\n    }\n    sendChat(val) {\n        this.mInputText = undefined;\n        if (!val) {\n            return;\n        }\n        this.emit(\"chat\", val);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaChat/PicaChatPanel.ts?");

/***/ }),

/***/ "./src/ui/PicaChat/index.ts":
/*!**********************************!*\
  !*** ./src/ui/PicaChat/index.ts ***!
  \**********************************/
/*! exports provided: PicaChat, PicaChatMediator, PicaChatPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _PicaChat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaChat */ \"./src/ui/PicaChat/PicaChat.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaChat\", function() { return _PicaChat__WEBPACK_IMPORTED_MODULE_0__[\"PicaChat\"]; });\n\n/* harmony import */ var _PicaChatMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaChatMediator */ \"./src/ui/PicaChat/PicaChatMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaChatMediator\", function() { return _PicaChatMediator__WEBPACK_IMPORTED_MODULE_1__[\"PicaChatMediator\"]; });\n\n/* harmony import */ var _PicaChatPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PicaChatPanel */ \"./src/ui/PicaChat/PicaChatPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaChatPanel\", function() { return _PicaChatPanel__WEBPACK_IMPORTED_MODULE_2__[\"PicaChatPanel\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaChat/index.ts?");

/***/ }),

/***/ "./src/ui/PicaMessageBox/PicaMessageBoxMediator.ts":
/*!*********************************************************!*\
  !*** ./src/ui/PicaMessageBox/PicaMessageBoxMediator.ts ***!
  \*********************************************************/
/*! exports provided: PicaMessageBoxMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaMessageBoxMediator\", function() { return PicaMessageBoxMediator; });\n/* harmony import */ var _PicaMessageBoxPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaMessageBoxPanel */ \"./src/ui/PicaMessageBox/PicaMessageBoxPanel.ts\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nclass PicaMessageBoxMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"BaseMediator\"] {\n    constructor(layerManager, scene, worldService) {\n        super();\n        this.layerManager = layerManager;\n        this.world = worldService;\n        this.scene = this.layerManager.scene;\n    }\n    show(params) {\n        this.mParam = params;\n        if ((this.mView && this.mView.isShow()) || this.mShow) {\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _PicaMessageBoxPanel__WEBPACK_IMPORTED_MODULE_0__[\"PicaMessageBoxPanel\"](this.scene, this.world);\n            this.mView.on(\"click\", this.onClickHandler, this);\n        }\n        this.mView.show(params);\n        this.layerManager.addToDialogLayer(this.mView);\n    }\n    hide() {\n        super.hide();\n        if (this.mView) {\n            this.mView.destroy();\n            this.mView = undefined;\n        }\n    }\n    onClickHandler(data) {\n        const param = this.mParam[0];\n        const pkt = new net_socket_packet__WEBPACK_IMPORTED_MODULE_2__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_TARGET_UI);\n        const content = pkt.content;\n        content.uiId = param.id;\n        content.componentId = data.node.id;\n        this.world.connection.send(pkt);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaMessageBox/PicaMessageBoxMediator.ts?");

/***/ }),

/***/ "./src/ui/PicaMessageBox/PicaMessageBoxPanel.ts":
/*!******************************************************!*\
  !*** ./src/ui/PicaMessageBox/PicaMessageBoxPanel.ts ***!
  \******************************************************/
/*! exports provided: PicaMessageBoxPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaMessageBoxPanel\", function() { return PicaMessageBoxPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nclass PicaMessageBoxPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"pica_message_box\";\n        // this.disInteractive();\n    }\n    show(param) {\n        super.show(param);\n        if (!this.mInitialized) {\n            return;\n        }\n        this.mButtons = [];\n        if (param[0] && param[0].text && param[0].text[0]) {\n            this.mText.setText(param[0].text[0].text);\n            this.mText.x = -this.mText.width / 2;\n            this.mText.y = -this.mText.height;\n        }\n        const buttons = param[0].button;\n        if (buttons) {\n            const btnWid = 114 * this.dpr;\n            const btnHei = 40 * this.dpr;\n            const w = (this.width - 42 * this.dpr) / buttons.length;\n            // const mButtonsContainer = this.mScene.make.container(undefined, false);\n            this.mButtonContaier.y = this.height / 2 - btnHei;\n            const frame = this.scene.textures.getFrame(this.key, \"yellow_btn_normal\");\n            if (!frame) {\n                return;\n            }\n            const config = {\n                left: 13 * this.dpr,\n                top: 13 * this.dpr,\n                bottom: frame.width - 2 - 13 * this.dpr,\n                right: frame.height - 2 - 13 * this.dpr\n            };\n            let totalW = 0;\n            for (let i = 0; i < buttons.length; i++) {\n                const txt = buttons[i] ? buttons[i].text : \"\";\n                const btn = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NineSliceButton\"](this.mScene, 0, 0, btnWid, btnHei, this.key, i === 0 ? \"yellow_btn\" : \"red_btn\", buttons[i].text, this.dpr, this.scale, config, buttons[i]);\n                btn.setTextStyle({\n                    fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                    fontSize: 16 * this.dpr\n                });\n                btn.x = i * w + btnWid / 2;\n                totalW += i * w + btnWid / 2;\n                this.mButtons.push(btn);\n                btn.on(\"click\", this.onClickHandler, this);\n            }\n            this.mButtonContaier.add(this.mButtons);\n            // btnSp.setSize((buttons.length - 1) * w + btnWid, btnHei);\n            this.mButtonContaier.x = -totalW / 2;\n        }\n        this.resize(0, 0);\n    }\n    resize(w, h) {\n        const width = this.scene.cameras.main.width;\n        const height = this.scene.cameras.main.height;\n        this.x = width / 2;\n        this.y = height / 2;\n        super.resize(w, h);\n    }\n    preload() {\n        this.addAtlas(this.key, \"pica_message_box/pica_message_box.png\", \"pica_message_box/pica_message_box.json\");\n        super.preload();\n    }\n    init() {\n        const { width, height } = this.scene.cameras.main;\n        const border = this.scene.make.graphics(undefined, false);\n        border.fillStyle(0, 0.6);\n        border.fillRect(-width * 0.5, -height * 0.5, width, height);\n        border.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n        this.add(border);\n        const frame = this.scene.textures.getFrame(this.key, \"bg\");\n        const background = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"NinePatch\"](this.scene, 0, 0, 286 * this.dpr, frame.height, this.key, \"bg\", undefined, undefined, {\n            left: 22 * this.dpr,\n            top: frame.height,\n            right: 22 * this.dpr,\n            bottom: 0\n        });\n        this.setSize(background.width, background.height);\n        this.mButtonContaier = this.scene.make.container(undefined, false);\n        const title = this.scene.make.image({\n            y: -background.height / 2,\n            key: this.key,\n            frame: \"title\"\n        });\n        this.mTitleLabel = this.scene.make.text({\n            y: title.y - 6 * this.dpr,\n            style: {\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 16 * this.dpr,\n                color: \"#3366cc\"\n            }\n        }, false).setOrigin(0.5);\n        this.mText = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BBCodeText\"](this.mScene, 0, 0, \"\", {\n            fontSize: `${14 * this.dpr}px`,\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            color: \"#000000\",\n            origin: { x: 0.5, y: 0.5 },\n            wrap: {\n                mode: \"char\",\n                width: this.width\n            },\n            align: \"center\"\n        });\n        // this.mText.x = -this.mWidth / 2 + 10;\n        // this.mText.y = -this.mHeight / 2 + 10;\n        this.add([background, title, this.mTitleLabel, this.mText, this.mButtonContaier]);\n        super.init();\n        this.resize(width, height);\n        this.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), Phaser.Geom.Rectangle.Contains);\n    }\n    onClickHandler(pointer, gameobject) {\n        if (!gameobject) {\n            return;\n        }\n        const btn = gameobject.getBtnData();\n        if (!btn) {\n            return;\n        }\n        this.emit(\"click\", btn);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaMessageBox/PicaMessageBoxPanel.ts?");

/***/ }),

/***/ "./src/ui/PicaMessageBox/index.ts":
/*!****************************************!*\
  !*** ./src/ui/PicaMessageBox/index.ts ***!
  \****************************************/
/*! exports provided: PicaMessageBoxMediator, PicaMessageBoxPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _PicaMessageBoxMediator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaMessageBoxMediator */ \"./src/ui/PicaMessageBox/PicaMessageBoxMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaMessageBoxMediator\", function() { return _PicaMessageBoxMediator__WEBPACK_IMPORTED_MODULE_0__[\"PicaMessageBoxMediator\"]; });\n\n/* harmony import */ var _PicaMessageBoxPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaMessageBoxPanel */ \"./src/ui/PicaMessageBox/PicaMessageBoxPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaMessageBoxPanel\", function() { return _PicaMessageBoxPanel__WEBPACK_IMPORTED_MODULE_1__[\"PicaMessageBoxPanel\"]; });\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaMessageBox/index.ts?");

/***/ }),

/***/ "./src/ui/PicaNavigate/PicaNavigate.ts":
/*!*********************************************!*\
  !*** ./src/ui/PicaNavigate/PicaNavigate.ts ***!
  \*********************************************/
/*! exports provided: PicaNavigate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaNavigate\", function() { return PicaNavigate; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass PicaNavigate extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor($world) {\n        super();\n        this.world = $world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    queryGOHomeHandler() {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_PKT_GO_HOME);\n        this.connection.send(packet);\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaNavigate/PicaNavigate.ts?");

/***/ }),

/***/ "./src/ui/PicaNavigate/PicaNavigateMediator.ts":
/*!*****************************************************!*\
  !*** ./src/ui/PicaNavigate/PicaNavigateMediator.ts ***!
  \*****************************************************/
/*! exports provided: PicaNavigateMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaNavigateMediator\", function() { return PicaNavigateMediator; });\n/* harmony import */ var _PicaNavigatePanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaNavigatePanel */ \"./src/ui/PicaNavigate/PicaNavigatePanel.ts\");\n/* harmony import */ var _PicaChat_PicaChatMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../PicaChat/PicaChatMediator */ \"./src/ui/PicaChat/PicaChatMediator.ts\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _PicaNavigate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PicaNavigate */ \"./src/ui/PicaNavigate/PicaNavigate.ts\");\n\n\n\n\nclass PicaNavigateMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"BaseMediator\"] {\n    constructor(layerManager, scene, worldService) {\n        super();\n        this.layerManager = layerManager;\n        this.world = worldService;\n        this.scene = this.layerManager.scene;\n    }\n    show() {\n        if ((this.mView && this.mView.isShow()) || this.mShow) {\n            this.mView.show();\n            this.layerManager.addToUILayer(this.mView);\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _PicaNavigatePanel__WEBPACK_IMPORTED_MODULE_0__[\"PicaNavigatePanel\"](this.scene, this.world);\n            this.mView.on(\"showPanel\", this.onShowPanelHandler, this);\n            this.mView.on(\"close\", this.onCloseHandler, this);\n            this.mView.on(\"goHome\", this.onGomeHomeHandler, this);\n        }\n        if (!this.picaNa) {\n            this.picaNa = new _PicaNavigate__WEBPACK_IMPORTED_MODULE_3__[\"PicaNavigate\"](this.world);\n        }\n        this.mView.show();\n        this.layerManager.addToUILayer(this.mView);\n    }\n    isSceneUI() {\n        return false;\n    }\n    onCloseHandler() {\n        if (!this.world) {\n            return;\n        }\n        const uiManager = this.world.uiManager;\n        const mediator = uiManager.getMediator(_PicaChat_PicaChatMediator__WEBPACK_IMPORTED_MODULE_1__[\"PicaChatMediator\"].name);\n        if (mediator) {\n            mediator.show();\n            this.mView.hide();\n            this.mView.removeListen();\n            this.layerManager.removeToUILayer(this.mView);\n        }\n    }\n    onShowPanelHandler(panel, data) {\n        if (!panel || !this.world) {\n            return;\n        }\n        const uiManager = this.world.uiManager;\n        if (data)\n            uiManager.showMed(panel, data);\n        else\n            uiManager.showMed(panel);\n    }\n    onGomeHomeHandler() {\n        this.picaNa.queryGOHomeHandler();\n    }\n}\nPicaNavigateMediator.NAME = \"PicaNavigateMediator\";\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaNavigate/PicaNavigateMediator.ts?");

/***/ }),

/***/ "./src/ui/PicaNavigate/PicaNavigatePanel.ts":
/*!**************************************************!*\
  !*** ./src/ui/PicaNavigate/PicaNavigatePanel.ts ***!
  \**************************************************/
/*! exports provided: PicaNavigatePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaNavigatePanel\", function() { return PicaNavigatePanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n\n\nclass PicaNavigatePanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"pica_navigate\";\n        this.setTween(false);\n        this.setInteractive();\n    }\n    resize(w, h) {\n        this.setSize(w, h);\n        const zoom = this.scale;\n        const width = this.scene.cameras.main.width / zoom;\n        const height = this.scene.cameras.main.height;\n        const frame = this.scene.textures.getFrame(this.key, \"bg\");\n        const scaleRatio = width / frame.width * this.dpr;\n        this.mBackground.scaleX = scaleRatio;\n        this.mBackground.x = width / 2;\n        this.mBackground.setInteractive();\n        this.mCloseBtn.x = width - this.mCloseBtn.width / 2 - 3 * this.dpr;\n        this.y = height - this.height / 2;\n        super.resize(w, h);\n    }\n    addListen() {\n        if (!this.mInitialized || !this.interactiveBoo)\n            return;\n        this.mMapBtn.on(\"pointerup\", this.onShowMapHandler, this);\n        this.mShopBtn.on(\"pointerup\", this.onShowShopHandler, this);\n        this.mBagBtn.on(\"pointerup\", this.onShowBagHandler, this);\n        this.mFamilyBtn.on(\"pointerup\", this.onShowFamilyHandler, this);\n        this.mGoHomeBtn.on(\"pointerup\", this.onShowGoHomeHandler, this);\n        this.mPlayerBtn.on(\"pointerup\", this.onShowPlayerHandler, this);\n        this.mCloseBtn.on(\"pointerup\", this.onCloseHandler, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.mMapBtn.off(\"pointerup\", this.onShowMapHandler, this);\n        this.mShopBtn.off(\"pointerup\", this.onShowShopHandler, this);\n        this.mBagBtn.off(\"pointerup\", this.onShowBagHandler, this);\n        this.mFamilyBtn.off(\"pointerup\", this.onShowFamilyHandler, this);\n        this.mGoHomeBtn.on(\"pointerup\", this.onShowGoHomeHandler, this);\n        this.mPlayerBtn.on(\"pointerup\", this.onShowPlayerHandler, this);\n        this.mCloseBtn.off(\"pointerup\", this.onCloseHandler, this);\n    }\n    hide() {\n        this.mShow = false;\n    }\n    preload() {\n        this.addAtlas(this.key, \"pica_navigate/pica_navigate.png\", \"pica_navigate/pica_navigate.json\");\n        super.preload();\n    }\n    init() {\n        this.mBackground = this.createImage(this.key, \"bg\");\n        this.mBackground.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\n        this.mMapBtn = this.createImage(this.key, \"map_btn\").setInteractive();\n        this.mShopBtn = this.createImage(this.key, \"shop_btn\").setInteractive();\n        this.mBagBtn = this.createImage(this.key, \"bag_btn\").setInteractive();\n        this.mFamilyBtn = this.createImage(this.key, \"family_btn\").setInteractive();\n        this.mGoHomeBtn = this.createImage(this.key, \"home_btn\").setInteractive();\n        this.mPlayerBtn = this.createImage(this.key, \"family_btn\").setInteractive();\n        this.mCloseBtn = this.createImage(this.key, \"close_btn\").setInteractive();\n        this.alertView = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"AlertView\"](this.scene, this.mWorld);\n        const list = [this.mMapBtn, this.mMapBtn, this.mShopBtn, this.mBagBtn, this.mFamilyBtn, this.mGoHomeBtn, this.mPlayerBtn];\n        this.add([this.mBackground]);\n        this.add(list);\n        this.add(this.mCloseBtn);\n        for (let i = 0; i < list.length; i++) {\n            list[i].x = i * 50 * this.dpr - list[i].width / 2;\n        }\n        const zoom = this.scale;\n        this.resize(this.mBackground.width * zoom, this.mBackground.height * zoom);\n        super.init();\n    }\n    createImage(key, frame) {\n        return this.scene.make.image({\n            key,\n            frame\n        }, false);\n    }\n    onShowMapHandler() {\n        this.emit(\"showPanel\", \"PicaRoomList\");\n    }\n    onShowShopHandler() {\n        this.emit(\"showPanel\", \"Market\");\n    }\n    onShowBagHandler() {\n        this.emit(\"showPanel\", \"FurniBag\");\n    }\n    onShowFamilyHandler() {\n        this.emit(\"showPanel\", \"CharacterInfo\");\n    }\n    onShowGoHomeHandler() {\n        // this.alertView.show({\n        //   text: ``,\n        //   title: \"\",\n        //   oy: 302 * this.dpr * this.mWorld.uiScale,\n        //   callback: () => {\n        //     this.emit(\"goHome\");\n        //   },\n        // });\n        this.emit(\"goHome\");\n    }\n    onShowPlayerHandler() {\n        this.emit(\"showPanel\", \"Task\");\n    }\n    onCloseHandler() {\n        this.emit(\"close\");\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaNavigate/PicaNavigatePanel.ts?");

/***/ }),

/***/ "./src/ui/PicaNavigate/index.ts":
/*!**************************************!*\
  !*** ./src/ui/PicaNavigate/index.ts ***!
  \**************************************/
/*! exports provided: PicaNavigate, PicaNavigateMediator, PicaNavigatePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _PicaNavigate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaNavigate */ \"./src/ui/PicaNavigate/PicaNavigate.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaNavigate\", function() { return _PicaNavigate__WEBPACK_IMPORTED_MODULE_0__[\"PicaNavigate\"]; });\n\n/* harmony import */ var _PicaNavigateMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaNavigateMediator */ \"./src/ui/PicaNavigate/PicaNavigateMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaNavigateMediator\", function() { return _PicaNavigateMediator__WEBPACK_IMPORTED_MODULE_1__[\"PicaNavigateMediator\"]; });\n\n/* harmony import */ var _PicaNavigatePanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PicaNavigatePanel */ \"./src/ui/PicaNavigate/PicaNavigatePanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaNavigatePanel\", function() { return _PicaNavigatePanel__WEBPACK_IMPORTED_MODULE_2__[\"PicaNavigatePanel\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaNavigate/index.ts?");

/***/ }),

/***/ "./src/ui/PicaNotice/PicaNoticeMediator.ts":
/*!*************************************************!*\
  !*** ./src/ui/PicaNotice/PicaNoticeMediator.ts ***!
  \*************************************************/
/*! exports provided: PicaNoticeMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaNoticeMediator\", function() { return PicaNoticeMediator; });\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _PicaNoticePanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaNoticePanel */ \"./src/ui/PicaNotice/PicaNoticePanel.ts\");\n\n\nclass PicaNoticeMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_0__[\"BaseMediator\"] {\n    constructor(layerManager, scene, world) {\n        super();\n        this.layerManager = layerManager;\n        this.scene = scene;\n        this.world = world;\n    }\n    show(param) {\n        if (this.mView && this.mView.isShow()) {\n            return;\n        }\n        this.mView = new _PicaNoticePanel__WEBPACK_IMPORTED_MODULE_1__[\"PicaNoticePanel\"](this.scene, this.world);\n        this.mView.once(\"close\", this.onCloseHandler, this);\n        this.mView.show(param);\n        // this.layerManager.addToToolTipsLayer(this.mView.view);\n    }\n    onCloseHandler() {\n        if (this.mView) {\n            this.mView.destroy();\n            this.mView = undefined;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaNotice/PicaNoticeMediator.ts?");

/***/ }),

/***/ "./src/ui/PicaNotice/PicaNoticePanel.ts":
/*!**********************************************!*\
  !*** ./src/ui/PicaNotice/PicaNoticePanel.ts ***!
  \**********************************************/
/*! exports provided: PicaNoticePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaNoticePanel\", function() { return PicaNoticePanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nclass PicaNoticePanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n    }\n    show(param) {\n        this.mShowData = param;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (param && param.length > 0) {\n            const text = param[0].text;\n            if (this.mContent) {\n                this.mContent.setText(text[0].text);\n            }\n            const width = this.scene.cameras.main.width;\n            // this.view.alpha = 0;\n            this.scene.tweens.timeline({\n                targets: this,\n                duration: 500,\n                tweens: [{\n                        y: `-=${20 * this.dpr}`,\n                        ease: \"Bounce.easeOut\",\n                    }, {\n                        delay: 2000,\n                        y: `-=${20 * this.dpr}`,\n                        ease: \"Linear\",\n                        alpha: 0\n                    }],\n                onComplete: () => {\n                    this.emit(\"close\");\n                }\n            });\n        }\n    }\n    resize() {\n        this.x = this.scene.cameras.main.width / 2;\n        this.y = 170 * this.dpr;\n    }\n    preload() {\n        this.addImage(\"pica_notice_bg\", \"pica_notice/bg.png\");\n        super.preload();\n    }\n    init() {\n        const bg = this.scene.make.image({\n            key: \"pica_notice_bg\"\n        }, false);\n        this.mContent = new tooqingui__WEBPACK_IMPORTED_MODULE_1__[\"BBCodeText\"](this.mScene, 0, 0, \"\", {\n            fontSize: 16 * this.dpr + \"px\",\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            stroke: \"#000000\",\n            strokeThickness: 1 * this.dpr,\n            align: \"center\",\n            textMask: false,\n            shadow: {\n                offsetX: 0,\n                offsetY: 0,\n                color: \"#000\",\n                blur: 4,\n                stroke: true,\n                fill: true\n            },\n            wrap: {\n                mode: \"char\",\n                width: bg.width * this.scale - 12 * this.dpr\n            }\n        }).setOrigin(0.5, 0.5);\n        this.mContent.setFontStyle(\"bold\");\n        this.add([bg, this.mContent]);\n        this.mWorld.uiManager.getUILayerManager().addToToolTipsLayer(this);\n        super.init();\n        this.resize();\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaNotice/PicaNoticePanel.ts?");

/***/ }),

/***/ "./src/ui/PicaNotice/index.ts":
/*!************************************!*\
  !*** ./src/ui/PicaNotice/index.ts ***!
  \************************************/
/*! exports provided: PicaNoticeMediator, PicaNoticePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _PicaNoticeMediator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaNoticeMediator */ \"./src/ui/PicaNotice/PicaNoticeMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaNoticeMediator\", function() { return _PicaNoticeMediator__WEBPACK_IMPORTED_MODULE_0__[\"PicaNoticeMediator\"]; });\n\n/* harmony import */ var _PicaNoticePanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaNoticePanel */ \"./src/ui/PicaNotice/PicaNoticePanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaNoticePanel\", function() { return _PicaNoticePanel__WEBPACK_IMPORTED_MODULE_1__[\"PicaNoticePanel\"]; });\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaNotice/index.ts?");

/***/ }),

/***/ "./src/ui/PicaRoomList/PicaRoomListMediator.ts":
/*!*****************************************************!*\
  !*** ./src/ui/PicaRoomList/PicaRoomListMediator.ts ***!
  \*****************************************************/
/*! exports provided: PicaRoomListMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaRoomListMediator\", function() { return PicaRoomListMediator; });\n/* harmony import */ var _PicaRoomListPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaRoomListPanel */ \"./src/ui/PicaRoomList/PicaRoomListPanel.ts\");\n/* harmony import */ var _RoomList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RoomList */ \"./src/ui/PicaRoomList/RoomList.ts\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nclass PicaRoomListMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_3__[\"BaseMediator\"] {\n    constructor(layerManager, scene, worldService) {\n        super();\n        this.layerManager = layerManager;\n        this.world = worldService;\n        this.scene = this.layerManager.scene;\n    }\n    show() {\n        if ((this.mView && this.mView.isShow()) || this.mShow) {\n            this.layerManager.addToUILayer(this.mView);\n            return;\n        }\n        this.roomList = new _RoomList__WEBPACK_IMPORTED_MODULE_1__[\"RoomList\"](this.world);\n        this.roomList.register();\n        this.roomList.on(\"myRoomList\", this.updateMyRoomListHandler, this);\n        this.roomList.on(\"roomList\", this.updateRoomListHandler, this);\n        this.roomList.on(\"enterRoomResult\", this.onEnterRoomResuleHandler, this);\n        if (!this.mView) {\n            this.mView = new _PicaRoomListPanel__WEBPACK_IMPORTED_MODULE_0__[\"PicaRoomListPanel\"](this.scene, this.world);\n        }\n        this.mView.on(\"close\", this.onCloseHandler, this);\n        this.mView.on(\"getRoomList\", this.onGetRoomListHandler, this);\n        this.mView.on(\"getMyRoomList\", this.onGetMyRoomListHandler, this);\n        this.mView.on(\"enterRoom\", this.onEnterRoomHandler, this);\n        this.mView.show();\n        this.layerManager.addToUILayer(this.mView);\n    }\n    getView() {\n        return this.mView;\n    }\n    destroy() {\n        if (this.roomList) {\n            this.roomList.destroy();\n        }\n        if (this.mView) {\n            this.mView.destroy();\n            this.mView = undefined;\n        }\n        super.destroy();\n    }\n    onCloseHandler() {\n        this.destroy();\n    }\n    updateRoomListHandler(content) {\n        if (!this.mView) {\n            return;\n        }\n        this.mView.updateRoomList(content);\n    }\n    updateMyRoomListHandler(content) {\n        if (!this.mView) {\n            return;\n        }\n        this.mView.updateMyRoomList(content);\n    }\n    onEnterRoomResuleHandler(content) {\n        game_core__WEBPACK_IMPORTED_MODULE_2__[\"Logger\"].getInstance().log(\"enter room result:\", content);\n    }\n    onGetRoomListHandler() {\n        if (!this.roomList) {\n            return;\n        }\n        this.roomList.sendGetRoomList();\n    }\n    onGetMyRoomListHandler() {\n        if (!this.roomList) {\n            return;\n        }\n        this.roomList.sendMyHistory();\n    }\n    onEnterRoomHandler(roomID, passworld) {\n        if (!this.roomList) {\n            return;\n        }\n        this.roomList.sendEnterRoom(roomID, passworld);\n        // this.onCloseHandler();\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaRoomList/PicaRoomListMediator.ts?");

/***/ }),

/***/ "./src/ui/PicaRoomList/PicaRoomListPanel.ts":
/*!**************************************************!*\
  !*** ./src/ui/PicaRoomList/PicaRoomListPanel.ts ***!
  \**************************************************/
/*! exports provided: PicaRoomListPanel, RoomDelegate, RoomZoon */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PicaRoomListPanel\", function() { return PicaRoomListPanel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RoomDelegate\", function() { return RoomDelegate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RoomZoon\", function() { return RoomZoon; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n\n\nclass PicaRoomListPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"pica_roomlist\";\n        this.scale = 1;\n    }\n    resize(w, h) {\n        const scale = this.scale;\n        const width = this.scene.cameras.main.width / scale;\n        const height = this.scene.cameras.main.height / scale;\n        const centerX = this.scene.cameras.main.centerX / scale;\n        this.x = width / 2;\n        this.y = height / 2;\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(-this.x, -this.y, width, height);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height), Phaser.Geom.Rectangle.Contains);\n        super.resize(w, h);\n    }\n    updateRoomList(content) {\n        if (!content) {\n            return;\n        }\n        this.mRoomDele.updateList(content);\n    }\n    updateMyRoomList(content) {\n        if (!content) {\n            return;\n        }\n        this.mMyRoomDele.updateList(content);\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.on(\"pointerup\", this.onCloseHandler, this);\n        this.mSeachBtn.on(\"pointerup\", this.onSeachHandler, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.mCloseBtn.off(\"pointerup\", this.onCloseHandler, this);\n        this.mSeachBtn.off(\"pointerup\", this.onSeachHandler, this);\n    }\n    destroy() {\n        if (this.mScroller)\n            this.mScroller.destroy();\n        super.destroy();\n    }\n    preload() {\n        this.addAtlas(this.key, \"pica_roomlist/pica_roomlist.png\", \"pica_roomlist/pica_roomlist.json\");\n        super.preload();\n    }\n    init() {\n        const zoom = this.mWorld.uiScale;\n        const background = this.scene.make.image({\n            key: this.key,\n            frame: \"bg.png\"\n        }, false).setInteractive();\n        const wid = this.scene.cameras.main.width;\n        const hei = this.scene.cameras.main.height;\n        this.setSize(background.width, background.height);\n        this.mBackGround = this.scene.make.graphics(undefined, false);\n        this.mBackGround.clear();\n        this.mBackGround.fillStyle(0x6AE2FF, 0);\n        this.mBackGround.fillRect(0, 0, wid * zoom, hei * zoom);\n        this.mBackGround.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.scene.cameras.main.width, this.scene.cameras.main.height), Phaser.Geom.Rectangle.Contains);\n        this.mCloseBtn = this.scene.make.image({\n            key: this.key,\n            frame: \"close_btn.png\"\n        }, false).setInteractive();\n        this.mCloseBtn.x = this.width / 2 - this.mCloseBtn.width / 2 - 2 * this.dpr;\n        this.mCloseBtn.y = -this.height / 2 + this.mCloseBtn.height / 2;\n        this.mRoomDeleBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"TabButton\"](this.scene, this.key, \"checkbox_normal\", \"checkbox_down\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"room_list.visit\"));\n        this.mRoomDeleBtn.x = -54 * this.dpr;\n        this.mRoomDeleBtn.y = -this.height / 2 + this.mRoomDeleBtn.displayHeight / 2 - 4 * this.dpr;\n        this.mRoomDeleBtn.setTextStyle({\n            color: \"#3333cc\",\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            fontSize: 14 * this.dpr\n        });\n        this.mRoomDeleBtn.setFontStyle(\"bold\");\n        this.mMyRoomDeleBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"TabButton\"](this.scene, this.key, \"checkbox_normal\", \"checkbox_down\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"room_list.my\"));\n        this.mMyRoomDeleBtn.x = 54 * this.dpr;\n        this.mMyRoomDeleBtn.y = this.mRoomDeleBtn.y;\n        this.mMyRoomDeleBtn.setTextStyle({\n            color: \"#3333cc\",\n            fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n            fontSize: 16 * this.dpr\n        });\n        this.mMyRoomDeleBtn.setFontStyle(\"bold\");\n        const checkbox = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"CheckboxGroup\"]();\n        checkbox.appendItemAll([this.mRoomDeleBtn, this.mMyRoomDeleBtn]);\n        checkbox.on(\"selected\", this.onSelectedHandler, this);\n        this.mRoomContainer = this.scene.make.container(undefined, false);\n        this.mRoomContainer.setSize(272 * this.dpr, 362 * this.dpr);\n        this.mRoomContainer.y = -this.height / 2 + 11 * this.dpr * zoom;\n        this.mSeachBtn = this.scene.make.image({\n            key: this.key,\n            frame: \"seach_btn.png\"\n        }, false).setInteractive();\n        this.mSeachBtn.y = this.height / 2 - this.mSeachBtn.height / 2 + 12 * this.dpr;\n        const seachText = this.scene.make.text({\n            x: -35 * this.dpr,\n            y: this.mSeachBtn.y,\n            text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"room_list.seach\"),\n            style: {\n                color: \"#996600\",\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 14 * this.dpr\n            }\n        }, false).setOrigin(0.5);\n        const roomText = this.scene.make.text({\n            x: 35 * this.dpr,\n            y: this.mSeachBtn.y,\n            text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"room_list.room\"),\n            style: {\n                color: \"#996600\",\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 14 * this.dpr\n            }\n        }, false).setOrigin(0.5);\n        this.add([this.mBackGround, background, this.mRoomContainer, this.mCloseBtn, this.mSeachBtn, seachText, roomText]);\n        super.init();\n        this.resize(0, 0);\n        const w = this.mRoomContainer.width * this.scale;\n        const h = this.mRoomContainer.height * this.scale;\n        const config = {\n            x: this.x - w / 2,\n            y: this.y - h / 2 - 20 * this.dpr * this.scale,\n            clickX: 0,\n            clickY: 0,\n            width: w,\n            height: h,\n            boundPad0: -25 * this.dpr * zoom,\n            // bounds: [\n            //   this.y,\n            //   this.y - h - 100 * this.dpr + (350 * this.dpr / 2)\n            // ],\n            value: this.y,\n            valuechangeCallback: (newValue) => {\n                this.mRoomContainer.y = newValue - this.y - h / 2;\n                game_core__WEBPACK_IMPORTED_MODULE_0__[\"Logger\"].getInstance().log(this.mRoomContainer.y + \",\" + this.y);\n            },\n            cellupCallBack: (gameobject) => {\n                gameobject.onEnterRoomHandler();\n                game_core__WEBPACK_IMPORTED_MODULE_0__[\"Logger\"].getInstance().log(gameobject.roomData().name);\n            }\n        };\n        this.mScroller = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"BaseScroller\"](this.scene, config, this.mRoomContainer);\n        this.add([this.mRoomDeleBtn, this.mMyRoomDeleBtn, this.mCloseBtn]);\n        checkbox.selectIndex(0);\n    }\n    showRoomList() {\n        if (this.mMyRoomDele) {\n            this.mMyRoomDele.removeFromContainer();\n            this.mMyRoomDele.off(\"enterRoom\", this.onEnterRoomHandler, this);\n        }\n        if (!this.mRoomDele)\n            this.mRoomDele = new RoomDelegate(this.mRoomContainer, this.mScroller, this.scene, this.mWorld, this.key, this.dpr);\n        this.mRoomDele.on(\"enterRoom\", this.onEnterRoomHandler, this);\n        this.mRoomDele.addToContainer();\n        this.emit(\"getRoomList\");\n    }\n    showMyRoomList() {\n        if (this.mRoomDele) {\n            this.mRoomDele.removeFromContainer();\n            this.mRoomDele.off(\"enterRoom\", this.onEnterRoomHandler, this);\n        }\n        if (!this.mMyRoomDele)\n            this.mMyRoomDele = new MyRoomDelegate(this.mRoomContainer, this.mScroller, this.mWorld, this.scene, this.key, this.dpr);\n        this.mMyRoomDele.on(\"enterRoom\", this.onEnterRoomHandler, this);\n        this.mMyRoomDele.addToContainer();\n        this.emit(\"getMyRoomList\");\n    }\n    onEnterRoomHandler(room) {\n        this.emit(\"enterRoom\", room);\n    }\n    onSelectedHandler(gameobject, prevButton) {\n        if (!(gameobject instanceof tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"Button\"])) {\n            return;\n        }\n        this.mRoomContainer.removeAll(false);\n        switch (gameobject) {\n            case this.mRoomDeleBtn:\n                this.showRoomList();\n                break;\n            case this.mMyRoomDeleBtn:\n                this.showMyRoomList();\n                break;\n        }\n        (gameobject).setTextColor(\"#996600\");\n        if (prevButton) {\n            if (prevButton instanceof tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"Button\"]) {\n                prevButton.setTextColor(\"#3333cc\");\n            }\n        }\n    }\n    onSeachHandler() {\n        // TODO seach\n    }\n    onCloseHandler() {\n        this.emit(\"close\");\n    }\n}\nclass RoomDelegate extends Phaser.Events.EventEmitter {\n    constructor(container, scroller, scene, world, key, dpr = 1) {\n        super();\n        this.mChildPad = 0;\n        this.mDpr = 1;\n        this.mHeight = 0;\n        this.mDpr = dpr;\n        this.mWorld = world;\n        this.mChildPad = 0;\n        this.mScene = scene;\n        this.mContainer = container;\n        this.mScroller = scroller;\n        this.mKey = key;\n        this.init();\n    }\n    addListen() {\n        this.mPopularityRoom.on(\"enterRoom\", this.onEnterRoomHandler, this);\n        this.mPlayerRoom.on(\"enterRoom\", this.onEnterRoomHandler, this);\n    }\n    removeListen() {\n        this.mPopularityRoom.off(\"enterRoom\", this.onEnterRoomHandler, this);\n        this.mPlayerRoom.off(\"enterRoom\", this.onEnterRoomHandler, this);\n    }\n    updateList(content) {\n        this.mContent = content;\n        this.mScroller.clearInteractiveObject();\n        this.mHeight = this.activity.height;\n        this.mChildPad = this.activity.height + 14 * this.mDpr * this.mWorld.uiScale;\n        if (!this.mContent) {\n            return;\n        }\n        this.mPopularityRoom.addItem(content.popularRooms, this.mChildPad);\n    }\n    addToContainer() {\n        this.addListen();\n        this.refreshPos();\n    }\n    removeFromContainer() {\n        this.removeListen();\n        if (this.mPopularityRoom)\n            this.mPopularityRoom.clear();\n        if (this.mPlayerRoom)\n            this.mPlayerRoom.clear();\n    }\n    destroy() {\n        this.removeListen();\n        if (this.mPlayerRoom)\n            this.mPopularityRoom.destroy();\n        if (this.mPopularityRoom)\n            this.mPopularityRoom.destroy();\n        if (this.mScroller)\n            this.mScroller.destroy();\n        if (this.activity)\n            this.activity.destroy();\n        super.destroy();\n    }\n    init() {\n        this.activity = this.mScene.make.image({\n            key: this.mKey,\n            frame: \"activity_title.png\"\n        }, false);\n        this.activity.y = this.activity.height / 2 + 2 * this.mDpr;\n        this.mChildPad += this.activity.height / 2 + 18 * this.mDpr;\n        this.mPopularityRoom = new PopularRoomZoon(this.mScene, this.mKey, \"popularity_icon.png\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"room_list.popularity_room\"), this.mDpr, this.mWorld.uiScale, 0, this.mChildPad, (hei) => {\n            if (this.mPopularityRoom.roomList)\n                this.setScrollInteractive(this.mPopularityRoom.roomList);\n            this.mHeight += hei;\n            this.refreshPos();\n            this.mChildPad += this.mPopularityRoom.height;\n            this.mPlayerRoom.addItem(this.mContent.playerRooms, this.mChildPad);\n        });\n        this.mPlayerRoom = new RoomZoon(this.mScene, this.mKey, \"player_icon.png\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"room_list.player_room\"), this.mDpr, this.mWorld.uiScale, 0, this.mChildPad, (hei) => {\n            if (this.mPlayerRoom.roomList)\n                this.setScrollInteractive(this.mPlayerRoom.roomList);\n            this.mHeight += hei;\n            this.refreshPos();\n            this.mScroller.refreshBound(this.mHeight);\n            this.mScroller.setValue(this.mContainer.parentContainer.y);\n        });\n        this.mScroller.refreshBound(this.activity.height);\n        this.mScroller.setValue(this.mContainer.parentContainer.y);\n    }\n    refreshPos() {\n        if (this.activity) {\n            this.activity.setTexture(this.mKey, \"activity_title.png\");\n            this.mContainer.add(this.activity);\n        }\n        if (this.mPopularityRoom) {\n            if (this.mPopularityRoom.showList) {\n                this.mContainer.add(this.mPopularityRoom.showList);\n                if (this.mPopularityRoom.roomList) {\n                    this.mContainer.add(this.mPopularityRoom.roomList);\n                }\n            }\n        }\n        if (this.mPlayerRoom) {\n            if (this.mPlayerRoom.showList) {\n                this.mContainer.add(this.mPlayerRoom.showList);\n                if (this.mPlayerRoom.roomList) {\n                    this.mContainer.add(this.mPlayerRoom.roomList);\n                }\n            }\n        }\n        // const zoom: number = this.mWorld.uiScale;\n        // const baseHei: number = 362 * this.mDpr;\n        // let topY: number = this.mContainer.parentContainer.y;\n        // Logger.getInstance().log(this.mContainer.height);\n        // let bottomY: number = 0;\n        // if (this.mHeight > baseHei) {\n        //   topY = topY;\n        //   bottomY = topY - this.mHeight + baseHei - 25 * this.mDpr * zoom;\n        // } else {\n        //   topY = topY;\n        //   bottomY = topY;\n        // }\n        // this.mScroller.resize(this.mScroller.width, this.mHeight, topY, bottomY);\n    }\n    onEnterRoomHandler(room) {\n        this.emit(\"enterRoom\", room);\n    }\n    setScrollInteractive(roomList) {\n        for (let i = 0, len = roomList.length; i < len; i++) {\n            const roomItem = roomList[i];\n            this.mScroller.setInteractiveObject(roomItem);\n        }\n    }\n}\nclass MyRoomDelegate extends RoomDelegate {\n    constructor(container, scroller, world, scene, key, dpr = 1) {\n        super(container, scroller, scene, world, key, dpr);\n    }\n    addListen() {\n        this.mMyRoom.on(\"enterRoom\", this.onEnterRoomHandler, this);\n        this.mMyHistory.on(\"enterRoom\", this.onEnterRoomHandler, this);\n    }\n    removeListen() {\n        this.mMyRoom.off(\"enterRoom\", this.onEnterRoomHandler, this);\n        this.mMyHistory.off(\"enterRoom\", this.onEnterRoomHandler, this);\n    }\n    addToContainer() {\n        this.addListen();\n        this.refreshPos();\n    }\n    removeFromContainer() {\n        this.removeListen();\n        if (this.mMyRoom)\n            this.mMyRoom.clear();\n        if (this.mMyHistory)\n            this.mMyHistory.clear();\n    }\n    updateList(content) {\n        if (!this.mMyRoom) {\n            return;\n        }\n        this.mContent = content;\n        this.mScroller.clearInteractiveObject();\n        this.mHeight = this.activity.height;\n        this.mChildPad = this.activity.height + 14 * this.mDpr * this.mWorld.uiScale;\n        this.mMyRoom.addItem(content.selfRooms, this.mChildPad);\n    }\n    destroy() {\n        if (this.mMyRoom)\n            this.mMyRoom.destroy();\n        if (this.mMyHistory)\n            this.mMyHistory.destroy();\n        super.destroy();\n    }\n    refreshPos() {\n        if (this.activity) {\n            this.activity.setTexture(this.mKey, \"activity_title.png\");\n            this.mContainer.add(this.activity);\n        }\n        if (this.mMyRoom) {\n            if (this.mMyRoom.showList) {\n                this.mContainer.add(this.mMyRoom.showList);\n                if (this.mMyRoom.roomList)\n                    this.mContainer.add(this.mMyRoom.roomList);\n            }\n        }\n        if (this.mMyHistory) {\n            if (this.mMyHistory.showList) {\n                this.mContainer.add(this.mMyHistory.showList);\n                if (this.mMyHistory.roomList)\n                    this.mContainer.add(this.mMyHistory.roomList);\n            }\n        }\n        // const zoom: number = this.mWorld.uiScale;\n        // const baseHei: number = 362 * this.mDpr;\n        // let topY: number = this.mContainer.parentContainer.y;\n        // let bottomY: number = 0;\n        // if (this.mHeight > baseHei) {\n        //   topY = topY;\n        //   bottomY = topY - this.mHeight + baseHei - 25 * this.mDpr * zoom;\n        // } else {\n        //   topY = topY;\n        //   bottomY = topY;\n        // }\n        // this.mScroller.resize(this.mScroller.width, this.mHeight, topY, bottomY);\n    }\n    init() {\n        this.activity = this.mScene.make.image({\n            key: this.mKey,\n            frame: \"activity_title.png\"\n        }, false);\n        this.activity.y = this.activity.height / 2 + 2 * this.mDpr;\n        this.mChildPad = this.activity.height + 14 * this.mDpr * this.mWorld.uiScale;\n        this.mMyRoom = new MyRoomZoon(this.mScene, this.mKey, \"my_room_icon.png\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"room_list.my_room\"), this.mDpr, this.mWorld.uiScale, 0, this.mChildPad, (hei) => {\n            if (this.mMyRoom.roomList)\n                this.setScrollInteractive(this.mMyRoom.roomList);\n            this.mHeight += hei;\n            this.refreshPos();\n            this.mChildPad += this.mMyRoom.height;\n            this.mMyHistory.addItem(this.mContent.historyRooms, this.mChildPad);\n        });\n        this.mMyHistory = new RoomZoon(this.mScene, this.mKey, \"history_icon.png\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"room_list.my_history\"), this.mDpr, this.mWorld.uiScale, 0, this.mChildPad, (hei) => {\n            if (this.mMyHistory.roomList)\n                this.setScrollInteractive(this.mMyHistory.roomList);\n            this.mHeight += hei;\n            this.refreshPos();\n            this.mScroller.refreshBound(this.mHeight);\n            this.mScroller.setValue(this.mContainer.parentContainer.y);\n        });\n        this.mScroller.refreshBound(this.activity.height);\n        this.mScroller.setValue(this.mContainer.parentContainer.y);\n    }\n    onEnterRoomHandler(room) {\n        this.emit(\"enterRoom\", room);\n    }\n}\nclass RoomZoon extends Phaser.Events.EventEmitter {\n    /**\n     *\n     * @param scene\n     * @param key\n     * @param iconFrame\n     * @param label\n     * @param dpr\n     * @param scrollMode 0   1 \n     * @param pad\n     * @param addCallBack\n     */\n    constructor(scene, key, iconFrame, label, dpr, uiscale, scrollMode = 0, pad = 0, addCallBack) {\n        super();\n        this.mWidth = 0;\n        this.mHeight = 0;\n        this.mShowList = [];\n        this.mScene = scene;\n        this.mKey = key;\n        this.mDpr = dpr;\n        this.uiScale = uiscale;\n        this.mPad = pad;\n        this.mOrientaction = scrollMode;\n        this.mIconFrame = iconFrame;\n        this.mLabel = label;\n        this.icon = scene.make.image({\n            key,\n            frame: iconFrame\n        }, false);\n        this.icon.x = scrollMode ? -254 * dpr / 2 + pad : -254 * dpr / 2;\n        this.icon.y = scrollMode ? 0 : pad;\n        this.text = scene.make.text({\n            text: label,\n            style: {\n                color: \"#ffcc33\",\n                fontSize: 16 * dpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        this.text.setStroke(\"#663300\", 2 * dpr);\n        this.text.x = scrollMode ? this.icon.x + this.icon.width / 2 + 4 * dpr + pad : this.icon.x + this.icon.width / 2 + 4 * dpr;\n        this.text.y = scrollMode ? 0 : pad;\n        this.mWidth = this.icon.width;\n        this.mHeight = this.icon.height;\n        this.mAddCallBack = addCallBack;\n        this.mRooms = [];\n    }\n    get showList() {\n        return this.mShowList;\n    }\n    get roomList() {\n        return this.mRooms;\n    }\n    addItem(rooms, pad = 0) {\n        this.icon = this.mScene.make.image({\n            key: this.mKey,\n            frame: this.mIconFrame\n        }, false);\n        this.text = this.mScene.make.text({\n            text: this.mLabel,\n            style: {\n                color: \"#ffcc33\",\n                fontSize: 16 * this.mDpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        this.text.setStroke(\"#663300\", 2 * this.mDpr);\n        this.icon.x = this.mOrientaction ? -254 * this.mDpr / 2 + pad : -254 * this.mDpr / 2;\n        this.icon.y = this.mOrientaction ? 0 : pad;\n        this.text.x = this.mOrientaction ? this.icon.x + this.icon.width / 2 + 4 * this.mDpr + pad : this.icon.x + this.icon.width / 2 + 4 * this.mDpr;\n        this.text.y = this.mOrientaction ? 0 : pad;\n        this.mShowList.push(this.icon);\n        this.mShowList.push(this.text);\n        this.mHeight = this.icon.height;\n        this.mPad = pad ? pad : this.mPad;\n        const len = rooms.length;\n        const zoom = this.uiScale;\n        const tmpWid = this.mOrientaction ? this.mPad + pad : 0;\n        const tmpHei = 6 * this.mDpr * zoom;\n        if (len > 0) {\n            this.mPad += this.icon.height + 12 * this.mDpr * zoom;\n            for (let i = 0; i < len; i++) {\n                const room = new RoomItem(this.mScene, this.mKey, this.mDpr);\n                room.setInfo(rooms[i]);\n                room.on(\"enterRoom\", this.onEnterRoomHandler, this);\n                room.x = tmpWid;\n                const roomY = i * (room.height + tmpHei) + this.mPad;\n                room.y = roomY;\n                this.mHeight += room.height + tmpHei;\n                this.mRooms[i] = room;\n            }\n        }\n        this.mHeight += tmpHei;\n        if (this.mAddCallBack) {\n            this.mAddCallBack(this.mHeight);\n        }\n    }\n    get width() {\n        return this.mWidth;\n    }\n    get height() {\n        return this.mHeight;\n    }\n    destroy() {\n        this.clear();\n        super.destroy();\n    }\n    clear() {\n        for (const room of this.mRooms) {\n            room.destroy();\n        }\n        for (const show of this.mShowList) {\n            show.destroy();\n        }\n        this.icon.destroy();\n        this.text.destroy();\n        this.mShowList.length = 0;\n        this.mRooms.length = 0;\n    }\n    onEnterRoomHandler(room) {\n        this.emit(\"enterRoom\", room);\n    }\n}\nclass MyRoomZoon extends RoomZoon {\n    addItem(rooms, pad = 0) {\n        // this.clear();\n        this.icon = this.mScene.make.image({\n            key: this.mKey,\n            frame: this.mIconFrame\n        }, false);\n        this.text = this.mScene.make.text({\n            text: this.mLabel,\n            style: {\n                color: \"#ffcc33\",\n                fontSize: 16 * this.mDpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        this.text.setStroke(\"#663300\", 2 * this.mDpr);\n        this.icon.x = this.mOrientaction ? -254 * this.mDpr / 2 + pad : -254 * this.mDpr / 2;\n        this.icon.y = this.mOrientaction ? 0 : pad;\n        this.text.x = this.mOrientaction ? this.icon.x + this.icon.width / 2 + 4 * this.mDpr + pad : this.icon.x + this.icon.width / 2 + 4 * this.mDpr;\n        this.text.y = this.mOrientaction ? 0 : pad;\n        this.mShowList.push(this.icon);\n        this.mShowList.push(this.text);\n        this.mHeight = this.icon.height;\n        this.mPad = pad ? pad : this.mPad;\n        const zoom = this.uiScale;\n        const tmpWid = this.mOrientaction ? this.mPad + pad : 0;\n        const tmpHei = 6 * this.mDpr * zoom;\n        if (rooms.length > 0) {\n            this.mPad += this.icon.height + 14 * this.mDpr * zoom;\n            // TODO \n            for (let i = 0; i < rooms.length; i++) {\n                const room = new MyRoomItem(this.mScene, this.mKey, this.mDpr);\n                room.setInfo(rooms[i]);\n                room.on(\"enterRoom\", this.onEnterRoomHandler, this);\n                room.x = tmpWid;\n                const roomY = i * (room.height + tmpHei) + this.mPad;\n                room.y = roomY;\n                this.mHeight += room.height + tmpHei;\n                this.mRooms[i] = room;\n            }\n        }\n        this.mHeight += tmpHei;\n        if (this.mAddCallBack) {\n            game_core__WEBPACK_IMPORTED_MODULE_0__[\"Logger\"].getInstance().log(\"myroomheight:\" + this.mHeight);\n            this.mAddCallBack(this.mHeight);\n        }\n    }\n}\nclass PopularRoomZoon extends RoomZoon {\n    addItem(rooms, pad = 0) {\n        // this.clear();\n        this.icon = this.mScene.make.image({\n            key: this.mKey,\n            frame: this.mIconFrame\n        }, false);\n        this.text = this.mScene.make.text({\n            text: this.mLabel,\n            style: {\n                color: \"#ffcc33\",\n                fontSize: 16 * this.mDpr,\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT\n            }\n        }, false).setOrigin(0, 0.5);\n        this.text.setStroke(\"#663300\", 2 * this.mDpr);\n        this.icon.x = this.mOrientaction ? -254 * this.mDpr / 2 + pad : -254 * this.mDpr / 2;\n        this.icon.y = this.mOrientaction ? 0 : pad;\n        this.text.x = this.mOrientaction ? this.icon.x + this.icon.width / 2 + 4 * this.mDpr + pad : this.icon.x + this.icon.width / 2 + 4 * this.mDpr;\n        this.text.y = this.mOrientaction ? 0 : pad;\n        this.mShowList.push(this.icon);\n        this.mShowList.push(this.text);\n        this.mHeight = this.icon.height;\n        this.mPad = pad ? pad : this.mPad;\n        const zoom = this.uiScale;\n        const tmpWid = this.mOrientaction ? this.mPad : 0;\n        const tmpHei = 6 * this.mDpr * zoom;\n        if (rooms.length > 0) {\n            this.mPad += this.icon.height + 12 * this.mDpr * zoom;\n            for (let i = 0; i < rooms.length; i++) {\n                const room = new PopularRoomItem(this.mScene, this.mKey, this.mDpr);\n                room.setInfo(rooms[i]);\n                room.setRank(i + 1);\n                room.on(\"enterRoom\", this.onEnterRoomHandler, this);\n                room.x = tmpWid;\n                const roomY = i * (room.height + tmpHei) + this.mPad;\n                room.y = roomY;\n                this.mHeight += room.height + tmpHei;\n                this.mRooms[i] = room;\n            }\n        }\n        this.mHeight += tmpHei;\n        if (this.mAddCallBack) {\n            game_core__WEBPACK_IMPORTED_MODULE_0__[\"Logger\"].getInstance().log(\"popheight:\" + this.mHeight);\n            this.mAddCallBack(this.mHeight);\n        }\n        return this.mHeight;\n    }\n}\nclass RoomItem extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr = 1) {\n        super(scene);\n        this.mKey = key;\n        this.mDpr = dpr;\n        this.init(key, dpr);\n    }\n    setInfo(room) {\n        if (room) {\n            if (room.name)\n                this.mNickName.setText(room.name);\n            if (room.playerCount)\n                this.mCounter.setText(room.playerCount.toString());\n        }\n        this.mCounterIcon.x = this.mCounter.x - this.mCounter.width / 2 - this.mCounterIcon.width / 2 - 4 * this.mDpr;\n        this.crateLabel(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_def\"].EditModeRoomPrivacy.EDIT_MODE_ROOM_LOCKED);\n        this.mRoom = room;\n    }\n    roomData() {\n        return this.mRoom;\n    }\n    onEnterRoomHandler(pointer) {\n        if (this.mRoom) {\n            this.emit(\"enterRoom\", this.mRoom.roomId);\n        }\n    }\n    init(key, dpr) {\n        this.mBackground = this.scene.make.image({\n            key,\n            frame: \"room_gray.png\"\n        }, false).setInteractive();\n        this.setSize(this.mBackground.width, this.mBackground.height);\n        this.mNickName = this.scene.make.text({\n            style: {\n                color: \"#000000\",\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 14 * dpr\n            }\n        }, false);\n        this.mNickName.x = -this.width / 2 + 12 * dpr;\n        this.mNickName.y = -(this.mNickName.height) / 2;\n        this.mCounterIcon = this.scene.make.image({\n            key,\n            frame: \"counter_icon.png\"\n        }, false);\n        this.mCounter = this.scene.make.text({\n            style: {\n                color: \"#000000\",\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 14 * dpr\n            }\n        }, false).setOrigin(0.5);\n        this.mCounter.x = this.width / 2 - 23 * dpr;\n        this.add([this.mBackground, this.mNickName, this.mCounterIcon, this.mCounter]);\n    }\n    crateLabel(state) {\n        // TODO \n        let frame = \"\";\n        let text = \"\";\n        if (state === pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_def\"].EditModeRoomPrivacy.EDIT_MODE_ROOM_LOCKED) {\n            frame = \"passworld_label.png\";\n            text = game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"room_list.password\");\n        }\n        else if (state === pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_def\"].EditModeRoomPrivacy.EDIT_MODE_ROOM_PRIVATE) {\n            frame = \"close_label.png\";\n            text = game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"room_list.close\");\n        }\n        if (frame === \"\" || text === \"\") {\n            return;\n        }\n        this.mLabelImg = this.scene.make.image({\n            key: this.mKey,\n            frame\n        }, false);\n        this.mLabelText = this.scene.make.text({\n            text,\n            style: {\n                color: \"#666666\",\n                fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT,\n                fontSize: 12 * this.mDpr\n            }\n        }, false).setOrigin(0, 0.5);\n        this.add([this.mLabelImg, this.mLabelText]);\n        this.mLabelImg.x = this.width / 2 - 85 * this.mDpr;\n        this.mLabelText.x = this.mLabelImg.x - 7 * this.mDpr;\n    }\n}\nclass MyRoomItem extends RoomItem {\n    constructor(scene, key, dpr = 1) {\n        super(scene, key, dpr);\n    }\n    init(key, dpr) {\n        super.init(key, dpr);\n        if (this.mBackground) {\n            this.mBackground.setFrame(\"room_yellow.png\");\n        }\n        if (this.mNickName) {\n            this.mNickName.setColor(\"#663300\");\n            this.mCounter.setColor(\"#663300\");\n        }\n    }\n}\nclass PopularRoomItem extends MyRoomItem {\n    constructor(scene, key, dpr = 1) {\n        super(scene, key, dpr);\n    }\n    setRank(num) {\n        if (this.mRankImage) {\n            this.mRankImage.setTexture(this.mKey, `rank_${num}.png`);\n            this.mRankImage.x = -this.width / 2 + this.mRankImage.width / 2 - 2 * this.mDpr;\n            this.add(this.mRankImage);\n        }\n    }\n    init(key, dpr) {\n        super.init(key, dpr);\n        this.mRankImage = this.scene.make.image(undefined, false);\n        this.mNickName.x = -this.width / 2 + 37 * dpr;\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaRoomList/PicaRoomListPanel.ts?");

/***/ }),

/***/ "./src/ui/PicaRoomList/RoomList.ts":
/*!*****************************************!*\
  !*** ./src/ui/PicaRoomList/RoomList.ts ***!
  \*****************************************/
/*! exports provided: RoomList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RoomList\", function() { return RoomList; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass RoomList extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor($world) {\n        super();\n        this.world = $world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_EDIT_MODE_ROOM_LIST, this.onRoomListHandler);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_EDIT_MODE_GET_PLAYER_ENTER_ROOM_HISTORY, this.onMyRoomListHandler);\n            this.addHandlerFun(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_client\"].OPCODE._OP_VIRTUAL_WORLD_RES_CLIENT_EDIT_MODE_ENTER_ROOM, this.onEnterRoomResultHandler);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    sendGetRoomList() {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_EDIT_MODE_GET_ROOM_LIST);\n        const content = packet.content;\n        content.page = 1;\n        content.perPage = 30;\n        this.connection.send(packet);\n    }\n    sendMyHistory() {\n        this.connection.send(new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_EDIT_MODE_GET_PLAYER_ENTER_ROOM_HISTORY));\n    }\n    sendEnterRoom(roomID, password) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_EDIT_MODE_ENTER_ROOM);\n        const content = packet.content;\n        content.roomId = roomID;\n        content.password = password;\n        this.connection.send(packet);\n    }\n    onRoomListHandler(packet) {\n        this.mEvent.emit(\"roomList\", packet.content);\n    }\n    onMyRoomListHandler(packet) {\n        this.mEvent.emit(\"myRoomList\", packet.content);\n    }\n    onEnterRoomResultHandler(packet) {\n        this.mEvent.emit(\"enterRoomResult\", packet);\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaRoomList/RoomList.ts?");

/***/ }),

/***/ "./src/ui/PicaRoomList/index.ts":
/*!**************************************!*\
  !*** ./src/ui/PicaRoomList/index.ts ***!
  \**************************************/
/*! exports provided: PicaRoomListMediator, PicaRoomListPanel, RoomDelegate, RoomZoon, RoomList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _PicaRoomListMediator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PicaRoomListMediator */ \"./src/ui/PicaRoomList/PicaRoomListMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaRoomListMediator\", function() { return _PicaRoomListMediator__WEBPACK_IMPORTED_MODULE_0__[\"PicaRoomListMediator\"]; });\n\n/* harmony import */ var _PicaRoomListPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PicaRoomListPanel */ \"./src/ui/PicaRoomList/PicaRoomListPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"PicaRoomListPanel\", function() { return _PicaRoomListPanel__WEBPACK_IMPORTED_MODULE_1__[\"PicaRoomListPanel\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"RoomDelegate\", function() { return _PicaRoomListPanel__WEBPACK_IMPORTED_MODULE_1__[\"RoomDelegate\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"RoomZoon\", function() { return _PicaRoomListPanel__WEBPACK_IMPORTED_MODULE_1__[\"RoomZoon\"]; });\n\n/* harmony import */ var _RoomList__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RoomList */ \"./src/ui/PicaRoomList/RoomList.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"RoomList\", function() { return _RoomList__WEBPACK_IMPORTED_MODULE_2__[\"RoomList\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/PicaRoomList/index.ts?");

/***/ }),

/***/ "./src/ui/Task/Task.ts":
/*!*****************************!*\
  !*** ./src/ui/Task/Task.ts ***!
  \*****************************/
/*! exports provided: Task */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Task\", function() { return Task; });\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net-socket-packet */ \"../../pixelpai/game-core/node_modules/net-socket-packet/dist/index.js\");\n/* harmony import */ var net_socket_packet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net_socket_packet__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass Task extends net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PacketHandler\"] {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.mEvent = new Phaser.Events.EventEmitter();\n    }\n    register() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.addPacketListener(this);\n        }\n    }\n    unregister() {\n        const connection = this.connection;\n        if (connection) {\n            this.connection.removePacketListener(this);\n        }\n    }\n    on(event, fn, context) {\n        this.mEvent.on(event, fn, context);\n    }\n    off(event, fn, context) {\n        this.mEvent.off(event, fn, context);\n    }\n    destroy() {\n        this.unregister();\n        this.mEvent.destroy();\n    }\n    get connection() {\n        if (this.world) {\n            return this.world.connection;\n        }\n    }\n    queryQuestList() {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_PKT_QUERY_QUEST_LIST);\n        this.connection.send(packet);\n    }\n    queryQuestDetail(id) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_PKT_QUERY_QUEST_DETAIL);\n        const content = packet.content;\n        content.id = id;\n        this.connection.send(packet);\n    }\n    querySubmitQuest(id) {\n        const packet = new net_socket_packet__WEBPACK_IMPORTED_MODULE_0__[\"PBpacket\"](pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_virtual_world\"].OPCODE._OP_CLIENT_REQ_VIRTUAL_WORLD_PKT_SUBMIT_QUEST);\n        const content = packet.content;\n        content.id = id;\n        this.connection.send(packet);\n    }\n    onRetQuestList(packet) {\n        const content = packet.content;\n        this.mEvent.emit(\"questlist\", content.quests);\n    }\n    onRetQuestDetail(packet) {\n        const content = packet.content;\n        this.mEvent.emit(\"questdetail\", content.quest);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Task/Task.ts?");

/***/ }),

/***/ "./src/ui/Task/TaskMediator.ts":
/*!*************************************!*\
  !*** ./src/ui/Task/TaskMediator.ts ***!
  \*************************************/
/*! exports provided: TaskMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TaskMediator\", function() { return TaskMediator; });\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Task */ \"./src/ui/Task/Task.ts\");\n/* harmony import */ var _TaskPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TaskPanel */ \"./src/ui/Task/TaskPanel.ts\");\n\n\n\nclass TaskMediator extends tooqingui__WEBPACK_IMPORTED_MODULE_0__[\"BaseMediator\"] {\n    constructor(layerMgr, scene, worldService) {\n        super();\n        this.scene = scene;\n        this.layerMgr = layerMgr;\n        this.world = worldService;\n    }\n    show() {\n        if ((this.mView && this.mView.isShow()) || this.mShow) {\n            return;\n        }\n        if (!this.mView) {\n            this.mView = new _TaskPanel__WEBPACK_IMPORTED_MODULE_2__[\"TaskPanel\"](this.scene, this.world);\n            this.mView.on(\"hide\", this.onHideView, this);\n            this.mView.on(\"questlist\", this.onQueryQuestList, this);\n            this.mView.on(\"questdetail\", this.onQueryQuestDetail, this);\n            this.mView.on(\"submitquest\", this.onQuerySubmitQuest, this);\n        }\n        if (!this.task) {\n            this.task = new _Task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"](this.world);\n            this.task.register();\n            this.task.on(\"questlist\", this.onRetQuestList, this);\n            this.task.on(\"questdetail\", this.onRetQuestDetail, this);\n        }\n        this.layerMgr.addToUILayer(this.mView);\n        this.mView.show();\n    }\n    isSceneUI() {\n        return true;\n    }\n    destroy() {\n        if (this.task) {\n            this.task.destroy();\n            this.task = undefined;\n        }\n        if (this.mView) {\n            this.mView.hide();\n            this.mView = undefined;\n        }\n    }\n    onHideView() {\n        this.destroy();\n    }\n    onQueryQuestList() {\n        this.task.queryQuestList();\n    }\n    onQueryQuestDetail(id) {\n        this.task.queryQuestDetail(id);\n    }\n    onQuerySubmitQuest(id) {\n        this.task.querySubmitQuest(id);\n    }\n    onRetQuestList(quests) {\n        this.mView.setTaskDatas(quests);\n    }\n    onRetQuestDetail(quest) {\n        this.mView.setTaskDetail(quest);\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Task/TaskMediator.ts?");

/***/ }),

/***/ "./src/ui/Task/TaskPanel.ts":
/*!**********************************!*\
  !*** ./src/ui/Task/TaskPanel.ts ***!
  \**********************************/
/*! exports provided: TaskPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TaskPanel\", function() { return TaskPanel; });\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! game-core */ \"game-core\");\n/* harmony import */ var game_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(game_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixelpai_proto */ \"pixelpai_proto\");\n/* harmony import */ var pixelpai_proto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tooqingui */ \"tooqingui\");\n/* harmony import */ var tooqingui__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tooqingui__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n\n\n\n\nclass TaskPanel extends game_core__WEBPACK_IMPORTED_MODULE_0__[\"BasePanel\"] {\n    constructor(scene, world) {\n        super(scene, world);\n        this.key = \"task_ui\";\n        this.taskItems = [];\n        this.scale = 1;\n    }\n    resize(width, height) {\n        const w = this.scaleWidth;\n        const h = this.scaleHeight;\n        super.resize(w, h);\n        this.setSize(w, h);\n        this.blackBg.clear();\n        this.blackBg.fillStyle(0, 0.5);\n        this.blackBg.fillRoundedRect(-this.x, -this.y, w, h);\n        this.content.x = w * 0.5;\n        this.content.y = h * 0.5;\n        this.mGameScroll.refreshMask();\n    }\n    show(param) {\n        this.mShowData = param;\n        if (this.mPreLoad)\n            return;\n        if (!this.mInitialized) {\n            this.preload();\n            return;\n        }\n        if (this.mShow)\n            return;\n        if (this.soundGroup && this.soundGroup.open)\n            this.playSound(this.soundGroup.open);\n        if (!this.mTweening && this.mTweenBoo) {\n            this.showTween(true);\n        }\n        else {\n            this.mShow = true;\n        }\n        this.addListen();\n    }\n    addListen() {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.on(\"pointerup\", this.OnClosePanel, this);\n    }\n    removeListen() {\n        if (!this.mInitialized)\n            return;\n        this.closeBtn.off(\"pointerup\", this.OnClosePanel, this);\n    }\n    preload() {\n        this.addAtlas(this.key, \"task/task.png\", \"task/task.json\");\n        this.addAtlas(game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasKey\"].commonKey, game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasName\"].common + \".png\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasName\"].common + \".json\");\n        super.preload();\n    }\n    init() {\n        this.setSize(this.scaleWidth, this.scaleWidth);\n        this.blackBg = this.scene.make.graphics(undefined, false);\n        this.add(this.blackBg);\n        const conWdith = 300 * this.dpr;\n        const conHeight = 418 * this.dpr;\n        this.content = this.scene.make.container(undefined, false);\n        this.content.setSize(conWdith, conHeight);\n        this.add(this.content);\n        this.bg = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NinePatch\"](this.scene, 0, 0, conWdith, conHeight, game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasKey\"].commonKey, \"bg\", undefined, undefined, {\n            left: 40,\n            top: 40,\n            bottom: 40,\n            right: 40,\n        });\n        const bgwidth = this.bg.width;\n        const bgHeight = this.bg.height;\n        const posY = -this.bg.height * 0.5;\n        this.titlebg = this.scene.make.image({ x: 0, y: posY, key: this.key, frame: \"title\" });\n        const mfont = `bold ${15 * this.dpr}px Source Han Sans`;\n        this.tilteName = this.scene.make.text({ x: 0, y: posY, text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"task.title\"), style: { font: mfont, color: \"#8F4300\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0.5, 0);\n        this.closeBtn = this.scene.make.image({ x: this.bg.width * 0.5 - this.dpr * 5, y: posY + this.dpr * 5, key: game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasKey\"].commonKey, frame: \"close\" });\n        this.tilteName.setStroke(\"#8F4300\", 1);\n        this.closeBtn.setInteractive();\n        const optionWidth = 253 * this.dpr;\n        const optionHeight = 26 * this.dpr;\n        this.optionBtn = this.scene.make.text({ x: 0, y: posY, text: \"\", style: { color: \"#8F4300\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } });\n        this.optionBtn.setInteractive();\n        this.optionBtn.on(\"pointerup\", this.onOpenOptionHandler, this);\n        this.optionArrow = this.scene.make.image({ x: 0, y: posY, key: this.key, frame: \"drop_down\" });\n        this.optionCon = this.scene.make.container(undefined, false);\n        const optionLine = this.scene.make.graphics(undefined, false);\n        optionLine.clear();\n        optionLine.fillStyle(0, 1);\n        optionLine.fillRect(-optionWidth * 0.5, -1, optionWidth, 2);\n        this.optionCon.add(optionLine);\n        this.mGameScroll = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"GameScroller\"](this.scene, {\n            x: 0,\n            y: 0,\n            width: bgwidth,\n            height: bgHeight - 60 * this.dpr,\n            zoom: this.scale,\n            align: 2,\n            orientation: 0,\n            space: 40 * this.dpr\n        });\n        this.content.add([this.bg, this.closeBtn, this.titlebg, this.tilteName, this.mGameScroll, this.optionCon]);\n        this.resize();\n        super.init();\n        this.setTaskDatas(null);\n    }\n    setTaskDatas(quests) {\n        if (!this.mInitialized)\n            return;\n        for (let i = 0; i < 10; i++) {\n            const item = new TaskItem(this.scene, this.key, this.dpr, this.scale);\n            this.mGameScroll.addItem(item);\n            item.setHandler(new game_core__WEBPACK_IMPORTED_MODULE_0__[\"Handler\"](this, this.onExtendsHandler), new game_core__WEBPACK_IMPORTED_MODULE_0__[\"Handler\"](this, this.onFinishHandler));\n            this.taskItems.push(item);\n        }\n        this.mGameScroll.Sort();\n    }\n    setTaskDetail(quest) {\n    }\n    setTaskOptions() {\n        const enumArr = [];\n        const PKT_Quest_Type = pixelpai_proto__WEBPACK_IMPORTED_MODULE_1__[\"op_pkt_def\"].PKT_Quest_Type;\n        for (const key in PKT_Quest_Type) {\n            if (!isNaN(Number(key))) {\n                const quest_Type = PKT_Quest_Type[key];\n                const questEnum = quest_Type;\n                enumArr.push(questEnum);\n            }\n        }\n        const list = this.optionCon.list;\n        for (const option of list) {\n            option.visible = false;\n        }\n        for (let i = 0; i < enumArr.length; i++) {\n            let option;\n            if (i < enumArr.length) {\n                option = list[i];\n            }\n            else {\n                option = new TaskOption(this.scene, this.key, this.dpr, this.scale);\n                option.setOptionData(enumArr[i]);\n                option.setHandler(new game_core__WEBPACK_IMPORTED_MODULE_0__[\"Handler\"](this, this.onTaskOptionHandler));\n                list.push(option);\n            }\n        }\n        let value = 0;\n        const offsety = 10 * this.dpr;\n        for (const item of list) {\n            item.y = item.height * item.originY + value;\n            value += item.height + offsety;\n        }\n    }\n    destroy() {\n        super.destroy();\n    }\n    OnClosePanel() {\n        this.emit(\"hide\");\n    }\n    onFinishHandler() {\n    }\n    onExtendsHandler() {\n    }\n    onOpenOptionHandler() {\n        this.optionCon.visible = !this.optionCon.visible;\n    }\n    onTaskOptionHandler(taskOption) {\n        const list = this.optionCon.list;\n        for (const option of list) {\n            option.changeNormal();\n        }\n    }\n}\nclass TaskItem extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr, zoom) {\n        super(scene);\n        this.key = key;\n        this.dpr = dpr;\n        this.zoom = zoom;\n        const width = 254 * dpr;\n        const height = 45 * dpr;\n        this.bg = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NinePatch\"](this.scene, 0, 0, width, height, key, \"main_bg\", undefined, undefined, {\n            left: 6 * dpr,\n            top: 6 * dpr,\n            bottom: 6 * dpr,\n            right: 6 * dpr,\n        });\n        const posx = -width * 0.5, posy = -height * 0.5;\n        this.headIcon = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](scene, posx + 40 * dpr, 0);\n        this.headIcon.setTexture(key, \"head_test\");\n        this.typeBg = scene.make.image({ key, frame: \"tag_main\" });\n        this.typeBg.setPosition(posx + this.typeBg.width * 0.5, posy + this.typeBg.height * 0.5);\n        this.typeTex = scene.make.text({ x: 0, y: 0, text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"task.m\"), style: { color: \"#8F4300\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } });\n        this.typeTex.setOrigin(0.5).setPosition(this.typeBg.x, this.typeBg.y);\n        this.taskName = scene.make.text({ x: this.headIcon.x + 10 * dpr, y: -10 * dpr, text: \"\", style: { color: \"#8F4300\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        this.taskDes = scene.make.text({ x: this.headIcon.x + 10 * dpr, y: 10 * dpr, text: \"\", style: { color: \"#8F4300\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } });\n        this.finish = scene.make.image({ key, frame: \"done\" });\n        this.finish.setPosition(width * 0.5, 0);\n        this.openBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"Button\"](scene, key, \"open\", \"open\");\n        this.openBtn.setPosition(width * 0.5 - 20 * dpr, 0);\n        this.closeBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"Button\"](scene, key, \"close\");\n        this.closeBtn.setPosition(this.openBtn.x, 0).visible = false;\n        this.openBtn.on(\"Tap\", this.onOpenHandler, this);\n        this.closeBtn.on(\"Tap\", this.onCloseHandler, this);\n        this.add([this.bg, this.headIcon, this.typeBg, this.typeTex, this.taskName, this.taskDes, this.finish, this.openBtn, this.closeBtn]);\n        this.setSize(width, height);\n    }\n    setTaskData(data) {\n    }\n    setHandler(extend, finish) {\n        this.extendHandler = extend;\n        this.finishHandler = finish;\n    }\n    onOpenHandler() {\n        if (!this.extend) {\n            this.extend = new TaskItemExtend(this.scene, this.key, this.dpr, this.zoom);\n            this.extend.setFinishHandler(new game_core__WEBPACK_IMPORTED_MODULE_0__[\"Handler\"](this, this.onFinishHandler));\n            this.add(this.extend);\n        }\n        this.extend.visible = true;\n        this.height += this.extend.height;\n        if (this.extendHandler)\n            this.extendHandler.runWith(true);\n    }\n    onFinishHandler() {\n        if (this.finishHandler)\n            this.finishHandler.run();\n    }\n    onCloseHandler() {\n        if (this.extend)\n            this.extend.visible = false;\n        this.height = this.height - this.extend.height;\n        if (this.extendHandler)\n            this.extendHandler.runWith(false);\n    }\n}\nclass TaskItemExtend extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr, zoom) {\n        super(scene);\n        this.needArr = [];\n        this.rewardArr = [];\n        this.dpr = 0;\n        this.zoom = 0;\n        const width = 240 * dpr;\n        const height = 202 * dpr;\n        this.dpr = dpr;\n        const bg = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NinePatch\"](this.scene, 0, 0, 286 * dpr * zoom, 331 * dpr * zoom, key, \"detail_bg\", undefined, undefined, {\n            left: 4,\n            top: 4,\n            right: 4,\n            bottom: 4\n        });\n        const posx = -width * 0.5 + 20 * dpr;\n        const posy = -height * 0.5 + 10 * dpr;\n        this.taskLabel = scene.make.text({ x: posx, y: posy, text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"task.objective\"), style: { color: \"#8F4300\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } });\n        this.taskTex = scene.make.text({ x: posx, y: posy + 50 * dpr, text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"task.m\"), style: { color: \"#8F4300\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } });\n        this.rewardLabel = scene.make.text({ x: posx, y: posy + 80 * dpr, text: game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"task.rewards\"), style: { color: \"#8F4300\", fontSize: 15 * this.dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } });\n        const line = scene.make.image({ key, frame: \"reward_cutline\" });\n        line.setPosition(0, posy + 120 * dpr);\n        this.finishBtn = new tooqingui__WEBPACK_IMPORTED_MODULE_2__[\"NineSliceButton\"](this.scene, Math.ceil(width * 0.5 - 60 * this.dpr), Math.ceil(height * 0.5 - 40 * this.dpr), 60 * this.dpr, 30 * this.dpr, game_core__WEBPACK_IMPORTED_MODULE_0__[\"UIAtlasKey\"].commonKey, \"button_g\", game_core__WEBPACK_IMPORTED_MODULE_0__[\"i18n\"].t(\"task.submit_task\"), this.dpr, this.scale, {\n            left: 12 * this.dpr,\n            top: 12 * this.dpr,\n            right: 12 * this.dpr,\n            bottom: 12 * this.dpr\n        });\n        this.finishBtn.on(\"Tap\", this.onFinishHandler, this);\n        this.add([bg, this.taskLabel, this.taskTex, this.rewardLabel, line, this.finishBtn]);\n        this.setSize(width, height);\n        this.key = key;\n        this.zoom = zoom;\n    }\n    setItemData() {\n        const taskArr = 6;\n        this.createTaskCells(this.needArr, 6);\n        this.createTaskCells(this.rewardArr, 6);\n        this.sortItem(this.needArr, -60 * this.dpr);\n        this.sortItem(this.rewardArr, 60 * this.dpr);\n    }\n    setFinishHandler(comp) {\n        this.finishHandler = comp;\n    }\n    sortItem(taskcells, posY = 0) {\n        const posx = -this.width * 0.5;\n        const list = taskcells;\n        let value = 0;\n        const offsetx = 10 * this.dpr;\n        for (const item of list) {\n            item.x = posx + item.width * item.originX + value;\n            value += item.width + offsetx;\n        }\n    }\n    createTaskCells(arr, len) {\n        for (const item of arr) {\n            item.visible = false;\n        }\n        for (let i = 0; i < len; i++) {\n            let item;\n            if (i < arr.length) {\n                item = arr[i];\n            }\n            else {\n                item = new TaskCell(this.scene, this.key, this.dpr, this.zoom);\n                arr.push(item);\n                this.add(item);\n            }\n        }\n        return arr;\n    }\n    onFinishHandler() {\n        if (this.finishHandler)\n            this.finishHandler.run();\n    }\n}\nclass TaskCell extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr, zoom) {\n        super(scene);\n        this.key = key;\n        this.bg = scene.make.image({ key, frame: \"task_bg\" });\n        this.setSize(this.bg.width, this.bg.height);\n        this.itemIcon = new game_core__WEBPACK_IMPORTED_MODULE_0__[\"DynamicImage\"](scene, 0, 0);\n        this.countTex = scene.make.text({ x: 0, y: 0, text: \"\", style: { color: \"#8F4300\", fontSize: 15 * dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0.5);\n        this.countTex.setPosition(this.width * 0.5, this.height * 0.5);\n        this.add([this.bg, this.itemIcon, this.countTex]);\n    }\n    setCellData(isTask = true) {\n        const frame = isTask ? \"task_bg\" : \"reward_bg\";\n        this.bg.setTexture(this.key, frame);\n    }\n}\nclass TaskOption extends Phaser.GameObjects.Container {\n    constructor(scene, key, dpr, zoom) {\n        super(scene);\n        const width = 253 * dpr;\n        const height = 26 * dpr;\n        this.bg = scene.make.graphics(undefined, false);\n        this.text = scene.make.text({ x: 0, y: 0, text: \"\", style: { color: \"#8F4300\", fontSize: 15 * dpr, fontFamily: game_core__WEBPACK_IMPORTED_MODULE_0__[\"Font\"].DEFULT_FONT } }).setOrigin(0, 0.5);\n        this.bg.clear();\n        this.bg.fillStyle(0xffffff, 1);\n        const optionLine = this.scene.make.graphics(undefined, false);\n        optionLine.clear();\n        optionLine.fillStyle(0, 1);\n        optionLine.fillRect(-width * 0.5, height * 0.5, width, 2);\n        this.add([this.bg, this.text, optionLine]);\n        this.setSize(width, height);\n        this.setInteractive(new Phaser.Geom.Rectangle(0, 0, this.width, this.height), Phaser.Geom.Rectangle.Contains);\n        this.on(\"pointerup\", this.onClickHandler, this);\n    }\n    setSize(width, height) {\n        super.setSize(width, height);\n        this.text.setPosition(-width * 0.5, 0);\n        this.changeNormal();\n        return this;\n    }\n    setOptionData(data) {\n        this.optionData = data;\n    }\n    changeDown() {\n        this.bg.clear();\n        this.bg.fillStyle(0xffffff, 1);\n        this.bg.fillRect(-this.width * 0.5, -this.height, this.width, this.height);\n    }\n    changeNormal() {\n        this.bg.clear();\n        this.bg.fillStyle(0x452342, 1);\n        this.bg.fillRect(-this.width * 0.5, -this.height, this.width, this.height);\n    }\n    setHandler(handler) {\n        this.clickHandler = handler;\n    }\n    onClickHandler() {\n        if (this.clickHandler)\n            this.clickHandler.runWith(this);\n        this.changeDown();\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Task/TaskPanel.ts?");

/***/ }),

/***/ "./src/ui/Task/index.ts":
/*!******************************!*\
  !*** ./src/ui/Task/index.ts ***!
  \******************************/
/*! exports provided: Task, TaskMediator, TaskPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Task */ \"./src/ui/Task/Task.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Task\", function() { return _Task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]; });\n\n/* harmony import */ var _TaskMediator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TaskMediator */ \"./src/ui/Task/TaskMediator.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"TaskMediator\", function() { return _TaskMediator__WEBPACK_IMPORTED_MODULE_1__[\"TaskMediator\"]; });\n\n/* harmony import */ var _TaskPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TaskPanel */ \"./src/ui/Task/TaskPanel.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"TaskPanel\", function() { return _TaskPanel__WEBPACK_IMPORTED_MODULE_2__[\"TaskPanel\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/Task/index.ts?");

/***/ }),

/***/ "./src/ui/index.ts":
/*!*************************!*\
  !*** ./src/ui/index.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// export { ActivityPanel, ActivityMediator } from \"./Activity\";\n// export { PopUpTextUI } from \"./alert\";\n// export * from \"./Bubble\";\n// export * from \"./CharacterInfo\";\n// export * from \"./ComponentRank\";\n// export * from \"./Compose\";\n// export * from \"./ControlF\";\n// export * from \"./CreateRole\";\n// export * from \"./CutIn\";\n// export * from \"./CutInMenu\";\n// export * from \"./DebugLogger\";\n// export * from \"./ElementStorage\";\n// export * from \"./EquipUpgrade\";\n// export * from \"./FurniBag\";\n// export * from \"./InfoPanel\";\n// export * from \"./InteractivePanel\";\n// export * from \"./ItemDetail\";\n// export * from \"./ItemPopCard\";\n// export * from \"./Market\";\n// export * from \"./MessageBox\";\n// export * from \"./MineCar\";\n// export * from \"./MineSettle\";\n// export * from \"./Notice\";\n// export * from \"./NpcDialogue\";\n// export * from \"./PiCaMainUI\";\n// export * from \"./PicaChat\";\n// export * from \"./PicaMessageBox\";\n// export * from \"./PicaNavigate\";\n// export * from \"./PicaNotice\";\n// export * from \"./PicaRoomList\";\n// export * from \"./Rank\";\n// export * from \"./ReAwardTips\";\n// export * from \"./Shop\";\n// export * from \"./UserInfo\";\n// export * from \"./UserMenu\";\n// export * from \"./Bag\";\n// export * from \"./BaseView\";\n// export * from \"./Chat\";\n// export * from \"./Friend\";\n// export * from \"./Task\";\n// export * from \"./Tips\";\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/index.ts?");

/***/ }),

/***/ "./src/ui/loadview.ts":
/*!****************************!*\
  !*** ./src/ui/loadview.ts ***!
  \****************************/
/*! exports provided: LoadingView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LoadingView\", function() { return LoadingView; });\nclass LoadingView {\n    constructor(mScene) {\n        this.mScene = mScene;\n        this.mShowing = false;\n        this.createPanel();\n    }\n    setFollow(gameObject, fromScene, callBack) {\n    }\n    isShow() {\n        return this.mShowing;\n    }\n    show(param) {\n        this.mTween = this.mScene.tweens.add({\n            targets: this.mBg,\n            duration: 2000000,\n            ease: \"Linear\",\n            props: {\n                rotation: 360,\n            }\n        });\n    }\n    update(param) {\n    }\n    hide() {\n        if (this.mTween) {\n            this.mTween.stop();\n            this.mTween.remove();\n            // this.mTween = null;\n        }\n    }\n    tweenExpand(show) {\n    }\n    resize() {\n    }\n    destroy() {\n        if (this.mBg) {\n            this.mBg.destroy();\n        }\n    }\n    createPanel() {\n        const size = this.mScene.game.scale.gameSize;\n        this.mBg = this.mScene.add.sprite(size.width >> 1, size.height >> 1, \"stars\");\n        this.mBg.scaleX = this.mBg.scaleY = 1.3;\n    }\n}\n\n\n//# sourceURL=webpack://picatown-core/./src/ui/loadview.ts?");

/***/ }),

/***/ "game-core":
/*!****************************!*\
  !*** external "game-core" ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_game_core__;\n\n//# sourceURL=webpack://picatown-core/external_%22game-core%22?");

/***/ }),

/***/ "pixelpai_proto":
/*!*********************************!*\
  !*** external "pixelpai_proto" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_pixelpai_proto__;\n\n//# sourceURL=webpack://picatown-core/external_%22pixelpai_proto%22?");

/***/ }),

/***/ "tooqingui":
/*!****************************!*\
  !*** external "tooqingui" ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_tooqingui__;\n\n//# sourceURL=webpack://picatown-core/external_%22tooqingui%22?");

/***/ })

/******/ });
});