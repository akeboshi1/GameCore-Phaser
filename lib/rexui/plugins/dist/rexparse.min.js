!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rexparse=t():e.rexparse=t()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1789)}({0:function(e,t){e.exports=function(e,t,r){if(e&&"number"!=typeof e){if(e.hasOwnProperty(t))return e[t];if(-1!==t.indexOf(".")){for(var n=t.split("."),a=e,i=r,o=0;o<n.length;o++){if(!a.hasOwnProperty(n[o])){i=r;break}i=a[n[o]],a=a[n[o]]}return i}return r}return r}},120:function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},153:function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},1745:function(e,t,r){"use strict";var n=r(391),a=r(22),i=a(r(262)),o=a(r(233)),s=a(r(75)),u=a(r(1764)),l=n(r(264)),c=a(r(1765)),f={initialize:function(e,t){s.default.get("IS_NODE")&&!process.env.SERVER_RENDERING&&console.log("It looks like you're using the browser version of the SDK in a node.js environment. You should require('parse/node') instead."),f._initialize(e,t)},_initialize:function(e,t,r){s.default.set("APPLICATION_ID",e),s.default.set("JAVASCRIPT_KEY",t),s.default.set("MASTER_KEY",r),s.default.set("USE_MASTER_KEY",!1)},setAsyncStorage:function(e){s.default.setAsyncStorage(e)},setLocalDatastoreController:function(e){s.default.setLocalDatastoreController(e)}};Object.defineProperty(f,"applicationId",{get:function(){return s.default.get("APPLICATION_ID")},set:function(e){s.default.set("APPLICATION_ID",e)}}),Object.defineProperty(f,"javaScriptKey",{get:function(){return s.default.get("JAVASCRIPT_KEY")},set:function(e){s.default.set("JAVASCRIPT_KEY",e)}}),Object.defineProperty(f,"masterKey",{get:function(){return s.default.get("MASTER_KEY")},set:function(e){s.default.set("MASTER_KEY",e)}}),Object.defineProperty(f,"serverURL",{get:function(){return s.default.get("SERVER_URL")},set:function(e){s.default.set("SERVER_URL",e)}}),Object.defineProperty(f,"serverAuthToken",{get:function(){return s.default.get("SERVER_AUTH_TOKEN")},set:function(e){s.default.set("SERVER_AUTH_TOKEN",e)}}),Object.defineProperty(f,"serverAuthType",{get:function(){return s.default.get("SERVER_AUTH_TYPE")},set:function(e){s.default.set("SERVER_AUTH_TYPE",e)}}),Object.defineProperty(f,"liveQueryServerURL",{get:function(){return s.default.get("LIVEQUERY_SERVER_URL")},set:function(e){s.default.set("LIVEQUERY_SERVER_URL",e)}}),f.ACL=r(263).default,f.Analytics=r(1766),f.AnonymousUtils=r(780).default,f.Cloud=r(1767),f.CoreManager=r(75),f.Config=r(1768).default,f.Error=r(178).default,f.FacebookUtils=r(1769).default,f.File=r(191).default,f.GeoPoint=r(234).default,f.Polygon=r(393).default,f.Installation=r(1770).default,f.LocalDatastore=r(1771),f.Object=r(74).default,f.Op={Set:l.SetOp,Unset:l.UnsetOp,Increment:l.IncrementOp,Add:l.AddOp,Remove:l.RemoveOp,AddUnique:l.AddUniqueOp,Relation:l.RelationOp},f.Push=r(1781),f.Query=r(265).default,f.Relation=r(192).default,f.Role=r(773).default,f.Schema=r(1782).default,f.Session=r(782).default,f.Storage=r(395),f.User=r(297).default,f.LiveQuery=r(1783).default,f.LiveQueryClient=r(783).default,f._request=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s.default.getRESTController().request.apply(null,t)},f._ajax=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s.default.getRESTController().ajax.apply(null,t)},f._decode=function(e,t){return(0,i.default)(t)},f._encode=function(e,t,r){return(0,o.default)(e,r)},f._getInstallationId=function(){return s.default.getInstallationController().currentInstallationId()},f.enableLocalDatastore=function(){f.LocalDatastore.isEnabled=!0},f.isLocalDatastoreEnabled=function(){return f.LocalDatastore.isEnabled},f.dumpLocalDatastore=function(){return f.LocalDatastore.isEnabled?f.LocalDatastore._getAllContents():(console.log("Parse.enableLocalDatastore() must be called first"),Promise.resolve({}))},s.default.setInstallationController(u.default),s.default.setRESTController(c.default),f.Parse=f,e.exports=f},1746:function(e,t,r){var n=r(153);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},1747:function(e,t,r){var n=r(153),a=r(495),i=r(1748),o=r(1749);function s(t){var r="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},s(t)}e.exports=s},1748:function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},1749:function(e,t,r){var n=r(495);function a(t,r,i){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?e.exports=a=function(e,t,r){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return r&&n(i,r.prototype),i}:e.exports=a=Reflect.construct,a.apply(null,arguments)}e.exports=a},1750:function(e,t,r){(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(e){"use strict";var r,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),o=new C(n||[]);return i._invoke=function(e,t,r){var n=f;return function(a,i){if(n===h)throw new Error("Generator is already running");if(n===v){if("throw"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?v:d,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=v,r.method="throw",r.arg=u.arg)}}}(e,r,o),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",h="executing",v="completed",p={};function y(){}function g(){}function _(){}var m={};m[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&a.call(w,o)&&(m=w);var O=_.prototype=y.prototype=Object.create(m);function k(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function S(e){var r;this._invoke=function(n,i){function o(){return new Promise(function(r,o){!function r(n,i,o,s){var u=c(e[n],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===t(f)&&a.call(f,"__await")?Promise.resolve(f.__await).then(function(e){r("next",e,o,s)},function(e){r("throw",e,o,s)}):Promise.resolve(f).then(function(e){l.value=e,o(l)},function(e){return r("throw",e,o,s)})}s(u.arg)}(n,i,r,o)})}return r=r?r.then(o,o):o()}}function E(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,E(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=c(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,p;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:r,done:!0}}return g.prototype=O.constructor=_,_.constructor=g,_[u]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},k(S.prototype),S.prototype[s]=function(){return this},e.AsyncIterator=S,e.async=function(t,r,n,a){var i=new S(l(t,r,n,a));return e.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},k(O),O[u]="Generator",O[o]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=r),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;A(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),p}},e}("object"===t(e)?e.exports:{});try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}}).call(this,r(1751)(e))},1751:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},1752:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof o.default))return!0;var t=e.attributes;for(var r in t){var n=t[r];if(!u(n))return!1}return!0};var a=n(r(64)),i=n(r(191)),o=n(r(74)),s=n(r(192));function u(e){if("object"!==(0,a.default)(e))return!0;if(e instanceof s.default)return!0;if(e instanceof o.default)return!!e.id;if(e instanceof i.default)return!!e.url();if(Array.isArray(e)){for(var t=0;t<e.length;t++)if(!u(e[t]))return!1;return!0}for(var r in e)if(!u(e[r]))return!1;return!0}},1753:function(e,t,r){"use strict";var n=r(22)(r(64)),a=r(1754).default,i=r(262).default,o=r(178).default,s=r(393).default,u=r(234).default;function l(e,t){if(t&&t.__type&&("Pointer"===t.__type||"Object"===t.__type)){for(var r in e){var n=e[r];if("string"==typeof n&&n===t.objectId)return!0;if(n.className===t.className&&n.objectId===t.objectId)return!0}return!1}return e.indexOf(t)>-1}function c(e){return e._toFullJSON?e._toFullJSON():e}function f(e,t,r,n){if(t.className!==e)return!1;var a=t,i=n;for(var o in t.toJSON&&(a=t.toJSON()),n.toJSON&&(i=n.toJSON().where),a.className=e,i)if(!h(e,a,r,o,i[o]))return!1;return!0}function d(e,t,r){if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(r(e[n],t))return!0;return!1}return r(e,t)}function h(e,t,r,v,p){if(null===p)return!1;if(v.indexOf(".")>=0){var y=v.split("."),g=y[0],_=y.slice(1).join(".");return h(e,t[g]||{},r,_,p)}var m,b;if("$or"===v){for(m=0;m<p.length;m++)if(f(e,t,r,p[m]))return!0;return!1}if("$and"===v){for(m=0;m<p.length;m++)if(!f(e,t,r,p[m]))return!1;return!0}if("$nor"===v){for(m=0;m<p.length;m++)if(f(e,t,r,p[m]))return!1;return!0}if("$relatedTo"===v)return!1;if(!/^[A-Za-z][0-9A-Za-z_]*$/.test(v))throw new o(o.INVALID_KEY_NAME,"Invalid Key: ".concat(v));if("object"!==(0,n.default)(p))return Array.isArray(t[v])?t[v].indexOf(p)>-1:t[v]===p;if(p.__type)return"Pointer"===p.__type?d(t[v],p,function(e,t){return void 0!==e&&t.className===e.className&&t.objectId===e.objectId}):d(i(t[v]),i(p),a);for(var w in p)switch((b=p[w]).__type&&(b=i(b)),("[object Date]"===toString.call(b)||"string"==typeof b&&"Invalid Date"!==new Date(b)&&!isNaN(new Date(b)))&&(t[v]=new Date(t[v].iso?t[v].iso:t[v])),w){case"$lt":if(t[v]>=b)return!1;break;case"$lte":if(t[v]>b)return!1;break;case"$gt":if(t[v]<=b)return!1;break;case"$gte":if(t[v]<b)return!1;break;case"$ne":if(a(t[v],b))return!1;break;case"$in":if(!l(b,t[v]))return!1;break;case"$nin":if(l(b,t[v]))return!1;break;case"$all":for(m=0;m<b.length;m++)if(t[v].indexOf(b[m])<0)return!1;break;case"$exists":var O=void 0!==t[v],k=p.$exists;if("boolean"!=typeof p.$exists)break;if(!O&&k||O&&!k)return!1;break;case"$regex":if("object"===(0,n.default)(b))return b.test(t[v]);for(var S="",E=-2,P=b.indexOf("\\Q");P>-1;)S+=b.substring(E+2,P),(E=b.indexOf("\\E",P))>-1&&(S+=b.substring(P+2,E).replace(/\\\\\\\\E/g,"\\E").replace(/\W/g,"\\$&")),P=b.indexOf("\\Q",E);S+=b.substring(Math.max(P,E+2));var A=p.$options||"";if(A=A.replace("x","").replace("s",""),!new RegExp(S,A).test(t[v]))return!1;break;case"$nearSphere":return!(!b||!t[v])&&b.radiansTo(t[v])<=(p.$maxDistance||1/0);case"$within":if(!b||!t[v])return!1;var C=b.$box[0],N=b.$box[1];return!(C.latitude>N.latitude||C.longitude>N.longitude)&&(t[v].latitude>C.latitude&&t[v].latitude<N.latitude&&t[v].longitude>C.longitude&&t[v].longitude<N.longitude);case"$options":case"$maxDistance":break;case"$select":for(var I=r.filter(function(e,t,r){return f(b.query.className,e,r,b.query.where)}),T=0;T<I.length;T+=1){var j=c(I[T]);return a(t[v],j[b.key])}return!1;case"$dontSelect":for(var R=r.filter(function(e,t,r){return f(b.query.className,e,r,b.query.where)}),x=0;x<R.length;x+=1){var D=c(R[x]);return!a(t[v],D[b.key])}return!1;case"$inQuery":for(var L=r.filter(function(e,t,r){return f(b.className,e,r,b.where)}),M=0;M<L.length;M+=1){var U=c(L[M]);if(t[v].className===U.className&&t[v].objectId===U.objectId)return!0}return!1;case"$notInQuery":for(var F=r.filter(function(e,t,r){return f(b.className,e,r,b.where)}),K=0;K<F.length;K+=1){var W=c(F[K]);if(t[v].className===W.className&&t[v].objectId===W.objectId)return!1}return!0;case"$containedBy":var q=!0,J=!1,$=void 0;try{for(var Q,V=t[v][Symbol.iterator]();!(q=(Q=V.next()).done);q=!0){var B=Q.value;if(!l(b,B))return!1}}catch(e){J=!0,$=e}finally{try{q||null==V.return||V.return()}finally{if(J)throw $}}return!0;case"$geoWithin":var G=b.$polygon.map(function(e){return[e.latitude,e.longitude]});return new s(G).containsPoint(t[v]);case"$geoIntersects":var z=new s(t[v].coordinates),Y=new u(b.$point);return z.containsPoint(Y);default:return!1}return!0}var v={matchesQuery:f,validateQuery:function(e){var t=e;e.toJSON&&(t=e.toJSON().where);var r=["$and","$or","$nor","_rperm","_wperm","_perishable_token","_email_verify_token","_email_verify_token_expires_at","_account_lockout_expires_at","_failed_login_count"];Object.keys(t).forEach(function(e){if(t&&t[e]&&t[e].$regex&&"string"==typeof t[e].$options&&!t[e].$options.match(/^[imxs]+$/))throw new o(o.INVALID_QUERY,"Bad $options value for query: ".concat(t[e].$options));if(r.indexOf(e)<0&&!e.match(/^[a-zA-Z][a-zA-Z0-9_\.]*$/))throw new o(o.INVALID_KEY_NAME,"Invalid key name: ".concat(e))})}};e.exports=v},1754:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){if("[object Date]"===l.call(t)||"[object Date]"===l.call(r)){var n=new Date(t),c=new Date(r);return+n==+c}if((0,a.default)(t)!==(0,a.default)(r))return!1;if(!t||"object"!==(0,a.default)(t))return t===r;if(Array.isArray(t)||Array.isArray(r)){if(!Array.isArray(t)||!Array.isArray(r))return!1;if(t.length!==r.length)return!1;for(var f=t.length;f--;)if(!e(t[f],r[f]))return!1;return!0}if(t instanceof i.default||t instanceof o.default||t instanceof s.default||t instanceof u.default)return t.equals(r);if(r instanceof u.default&&("Object"===t.__type||"Pointer"===t.__type))return t.objectId===r.id&&t.className===r.className;if(Object.keys(t).length!==Object.keys(r).length)return!1;for(var d in t)if(!e(t[d],r[d]))return!1;return!0};var a=n(r(64)),i=n(r(263)),o=n(r(191)),s=n(r(234)),u=n(r(74)),l=Object.prototype.toString},1755:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$").exec(e);if(!t)return null;var r=parseInt(t[1])||0,n=(parseInt(t[2])||1)-1,a=parseInt(t[3])||0,i=parseInt(t[4])||0,o=parseInt(t[5])||0,s=parseInt(t[6])||0,u=parseInt(t[8])||0;return new Date(Date.UTC(r,n,a,i,o,s,u))}},1756:function(e,t,r){"use strict";var n=r(391);Object.defineProperty(t,"__esModule",{value:!0}),t.getState=o,t.initializeState=s,t.removeState=function(e){var t=o(e);if(null===t)return null;return delete i[e.className][e.id],t},t.getServerData=u,t.setServerData=function(e,t){var r=s(e).serverData;a.setServerData(r,t)},t.getPendingOps=l,t.setPendingOp=function(e,t,r){var n=s(e).pendingOps;a.setPendingOp(n,t,r)},t.pushPendingState=function(e){var t=s(e).pendingOps;a.pushPendingState(t)},t.popPendingState=function(e){var t=s(e).pendingOps;return a.popPendingState(t)},t.mergeFirstPendingState=function(e){var t=l(e);a.mergeFirstPendingState(t)},t.getObjectCache=function(e){var t=o(e);if(t)return t.objectCache;return{}},t.estimateAttribute=function(e,t){var r=u(e),n=l(e);return a.estimateAttribute(r,n,e.className,e.id,t)},t.estimateAttributes=function(e){var t=u(e),r=l(e);return a.estimateAttributes(t,r,e.className,e.id)},t.commitServerChanges=function(e,t){var r=s(e);a.commitServerChanges(r.serverData,r.objectCache,t)},t.enqueueTask=function(e,t){return s(e).tasks.enqueue(t)},t.clearAllState=function(){i={}},t.duplicateState=function(e,t){t.id=e.id};var a=n(r(778)),i={};function o(e){var t=i[e.className];return t&&t[e.id]||null}function s(e,t){var r=o(e);return r||(i[e.className]||(i[e.className]={}),t||(t=a.defaultState()),r=i[e.className][e.id]=t)}function u(e){var t=o(e);return t?t.serverData:{}}function l(e){var t=o(e);return t?t.pendingOps:[{}]}},1757:function(e,t,r){"use strict";var n=r(22),a=r(391);Object.defineProperty(t,"__esModule",{value:!0}),t.getState=u,t.initializeState=l,t.removeState=function(e){var t=u(e);if(null===t)return null;return s.delete(e),t},t.getServerData=c,t.setServerData=function(e,t){var r=l(e).serverData;i.setServerData(r,t)},t.getPendingOps=f,t.setPendingOp=function(e,t,r){var n=l(e).pendingOps;i.setPendingOp(n,t,r)},t.pushPendingState=function(e){var t=l(e).pendingOps;i.pushPendingState(t)},t.popPendingState=function(e){var t=l(e).pendingOps;return i.popPendingState(t)},t.mergeFirstPendingState=function(e){var t=f(e);i.mergeFirstPendingState(t)},t.getObjectCache=function(e){var t=u(e);if(t)return t.objectCache;return{}},t.estimateAttribute=function(e,t){var r=c(e),n=f(e);return i.estimateAttribute(r,n,e.className,e.id,t)},t.estimateAttributes=function(e){var t=c(e),r=f(e);return i.estimateAttributes(t,r,e.className,e.id)},t.commitServerChanges=function(e,t){var r=l(e);i.commitServerChanges(r.serverData,r.objectCache,t)},t.enqueueTask=function(e,t){return l(e).tasks.enqueue(t)},t.duplicateState=function(e,t){var r=l(e),n=l(t);for(var a in r.serverData)n.serverData[a]=r.serverData[a];for(var i=0;i<r.pendingOps.length;i++)for(var o in r.pendingOps[i])n.pendingOps[i][o]=r.pendingOps[i][o];for(var s in r.objectCache)n.objectCache[s]=r.objectCache[s];n.existed=r.existed},t.clearAllState=function(){s=new WeakMap};var i=a(r(778)),o=n(r(779)),s=new WeakMap;function u(e){return s.get(e)||null}function l(e,t){var r=u(e);return r||(t||(t={serverData:{},pendingOps:[{}],objectCache:{},tasks:new o.default,existed:!1}),r=t,s.set(e,r),r)}function c(e){var t=u(e);return t?t.serverData:{}}function f(e){var t=u(e);return t?t.pendingOps:[{}]}},1758:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r={objects:{},files:[]},n=e.className+":"+e._getId();r.objects[n]=!e.dirty()||e;var i=e.attributes;for(var o in i)"object"===(0,a.default)(i[o])&&u(i[o],r,!1,!!t);var s=[];for(var l in r.objects)l!==n&&!0!==r.objects[l]&&s.push(r.objects[l]);return s.concat(r.files)};var a=n(r(64)),i=n(r(191)),o=n(r(74)),s=n(r(192));function u(e,t,r,n){if(e instanceof o.default){if(!e.id&&r)throw new Error("Cannot create a pointer to an unsaved Object.");var l=e.className+":"+e._getId();if(!t.objects[l]){t.objects[l]=!e.dirty()||e;var c=e.attributes;for(var f in c)"object"===(0,a.default)(c[f])&&u(c[f],t,!n,n)}}else if(e instanceof i.default)!e.url()&&t.files.indexOf(e)<0&&t.files.push(e);else if(!(e instanceof s.default))for(var d in Array.isArray(e)&&e.forEach(function(e){"object"===(0,a.default)(e)&&u(e,t,r,n)}),e)"object"===(0,a.default)(e[d])&&u(e[d],t,r,n)}},1759:function(e,t,r){var n=r(1760),a=r(1762);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[i+s]=o[s];return t||a(o)}},1760:function(e,t,r){var n=r(1761);e.exports=function(){return n.randomBytes(16)}},1761:function(e,t){e.exports=require("crypto")},1762:function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,a=r;return[a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]]].join("")}},1763:function(e,t,r){"use strict";var n={async:0,getItem:function(e){return localStorage.getItem(e)},setItem:function(e,t){try{localStorage.setItem(e,t)}catch(e){}},removeItem:function(e){localStorage.removeItem(e)},clear:function(){localStorage.clear()}};e.exports=n},1764:function(e,t,r){"use strict";var n=r(22)(r(395)),a=null;function i(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var o={currentInstallationId:function(){if("string"==typeof a)return Promise.resolve(a);var e=n.default.generatePath("installationId");return n.default.getItemAsync(e).then(function(t){return t?(a=t,t):(t=i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i(),n.default.setItemAsync(e,t).then(function(){return a=t,t}))})},_clearCache:function(){a=null},_setInstallationIdCache:function(e){a=e}};e.exports=o},1765:function(e,t,r){"use strict";var n=r(22),a=n(r(120)),i=n(r(64)),o=n(r(75)),s=n(r(178));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var l=null;"undefined"!=typeof XMLHttpRequest&&(l=XMLHttpRequest);var c=!1;"undefined"==typeof XDomainRequest||"withCredentials"in new XMLHttpRequest||(c=!0);var f={ajax:function(e,t,r,n,a){if(c)return function(e,t,r,n){return new Promise(function(a,i){var o=new XDomainRequest;o.onload=function(){var e;try{e=JSON.parse(o.responseText)}catch(e){i(e)}e&&a({response:e})},o.onerror=o.ontimeout=function(){var e={responseText:JSON.stringify({code:s.default.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};i(e)},o.onprogress=function(){n&&"function"==typeof n.progress&&n.progress(o.responseText)},o.open(e,t),o.send(r)})}(e,t,r,n);var i,u,f=new Promise(function(e,t){i=e,u=t});f.resolve=i,f.reject=u;var d=0;return function i(){if(null==l)throw new Error("Cannot make a request: No definition of XMLHttpRequest was found.");var s=!1,u=new l;for(var c in u.onreadystatechange=function(){if(4===u.readyState&&!s)if(s=!0,u.status>=200&&u.status<300){var e;try{e=JSON.parse(u.responseText),"function"==typeof u.getResponseHeader&&(u.getAllResponseHeaders()||"").includes("x-parse-job-status-id: ")&&(e=u.getResponseHeader("x-parse-job-status-id"))}catch(e){f.reject(e.toString())}e&&f.resolve({response:e,status:u.status,xhr:u})}else if(u.status>=500||0===u.status)if(++d<o.default.get("REQUEST_ATTEMPT_LIMIT")){var t=Math.round(125*Math.random()*Math.pow(2,d));setTimeout(i,t)}else 0===u.status?f.reject("Unable to connect to the Parse API"):f.reject(u);else f.reject(u)},"string"!=typeof(n=n||{})["Content-Type"]&&(n["Content-Type"]="text/plain"),o.default.get("IS_NODE")&&(n["User-Agent"]="Parse/"+o.default.get("VERSION")+" (NodeJS "+process.versions.node+")"),o.default.get("SERVER_AUTH_TYPE")&&o.default.get("SERVER_AUTH_TOKEN")&&(n.Authorization=o.default.get("SERVER_AUTH_TYPE")+" "+o.default.get("SERVER_AUTH_TOKEN")),a&&"function"==typeof a.progress&&(u.upload?u.upload.addEventListener("progress",function(e){e.lengthComputable?a.progress(e.loaded/e.total):a.progress(null)}):u.addEventListener&&u.addEventListener("progress",function(e){e.lengthComputable?a.progress(e.loaded/e.total):a.progress(null)})),u.open(e,t,!0),n)u.setRequestHeader(c,n[c]);u.send(r)}(),f},request:function(e,t,r,n){n=n||{};var l=o.default.get("SERVER_URL");"/"!==l[l.length-1]&&(l+="/"),l+=t;var c={};if(r&&"object"===(0,i.default)(r))for(var d in r)c[d]=r[d];"POST"!==e&&(c._method=e,e="POST"),c._ApplicationId=o.default.get("APPLICATION_ID");var h=o.default.get("JAVASCRIPT_KEY");h&&(c._JavaScriptKey=h),c._ClientVersion=o.default.get("VERSION");var v=n.useMasterKey;if(void 0===v&&(v=o.default.get("USE_MASTER_KEY")),v){if(!o.default.get("MASTER_KEY"))throw new Error("Cannot use the Master Key, it has not been provided.");delete c._JavaScriptKey,c._MasterKey=o.default.get("MASTER_KEY")}o.default.get("FORCE_REVOCABLE_SESSION")&&(c._RevocableSession="1");var p,y=n.installationId;y&&"string"==typeof y?p=Promise.resolve(y):p=o.default.getInstallationController().currentInstallationId();return p.then(function(e){c._InstallationId=e;var t=o.default.getUserController();return n&&"string"==typeof n.sessionToken?Promise.resolve(n.sessionToken):t?t.currentUserAsync().then(function(e){return e?Promise.resolve(e.getSessionToken()):Promise.resolve(null)}):Promise.resolve(null)}).then(function(t){t&&(c._SessionToken=t);var r=JSON.stringify(c);return f.ajax(e,l,r,{},n).then(function(e){var t=e.response,r=e.status;return n.returnStatus?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t,{_status:r}):t})}).catch(function(e){var t;if(e&&e.responseText)try{var r=JSON.parse(e.responseText);t=new s.default(r.code,r.error)}catch(r){t=new s.default(s.default.INVALID_JSON,"Received an error with invalid JSON from Parse: "+e.responseText)}else t=new s.default(s.default.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(e));return Promise.reject(t)})},_setXHR:function(e){l=e}};e.exports=f},1766:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.track=function(e,t){if(0===(e=(e=(e=e||"").replace(/^\s*/,"")).replace(/\s*$/,"")).length)throw new TypeError("A name for the custom event must be provided");for(var r in t)if("string"!=typeof r||"string"!=typeof t[r])throw new TypeError('track() dimensions expects keys and values of type "string".');return a.default.getAnalyticsController().track(e,t)};var a=n(r(75));var i={track:function(e,t){return a.default.getRESTController().request("POST","events/"+e,{dimensions:t})}};a.default.setAnalyticsController(i)},1767:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.run=function(e,t,r){if(r=r||{},"string"!=typeof e||0===e.length)throw new TypeError("Cloud function name must be a string.");var n={};r.useMasterKey&&(n.useMasterKey=r.useMasterKey);r.sessionToken&&(n.sessionToken=r.sessionToken);return i.default.getCloudController().run(e,t,n)},t.getJobsData=function(){return i.default.getCloudController().getJobsData({useMasterKey:!0})},t.startJob=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("Cloud job name must be a string.");return i.default.getCloudController().startJob(e,t,{useMasterKey:!0})},t.getJobStatus=function(e){return new l.default("_JobStatus").get(e,{useMasterKey:!0})};var a=n(r(64)),i=n(r(75)),o=n(r(262)),s=n(r(233)),u=n(r(178)),l=n(r(265));n(r(74));var c={run:function(e,t,r){var n=i.default.getRESTController(),l=(0,s.default)(t,!0);return n.request("POST","functions/"+e,l,r).then(function(e){if("object"===(0,a.default)(e)&&Object.keys(e).length>0&&!e.hasOwnProperty("result"))throw new u.default(u.default.INVALID_JSON,"The server returned an invalid response.");var t=(0,o.default)(e);return t&&t.hasOwnProperty("result")?Promise.resolve(t.result):Promise.resolve(void 0)})},getJobsData:function(e){return i.default.getRESTController().request("GET","cloud_code/jobs/data",null,e)},startJob:function(e,t,r){var n=i.default.getRESTController(),a=(0,s.default)(t,!0);return n.request("POST","jobs/"+e,a,r)}};i.default.setCloudController(c)},1768:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(64)),i=n(r(73)),o=n(r(83)),s=n(r(120)),u=n(r(75)),l=n(r(262)),c=n(r(233)),f=n(r(777)),d=n(r(178)),h=n(r(395)),v=function(){function e(){(0,i.default)(this,e),(0,s.default)(this,"attributes",void 0),(0,s.default)(this,"_escapedAttributes",void 0),this.attributes={},this._escapedAttributes={}}return(0,o.default)(e,[{key:"get",value:function(e){return this.attributes[e]}},{key:"escape",value:function(e){var t=this._escapedAttributes[e];if(t)return t;var r=this.attributes[e],n="";return null!=r&&(n=(0,f.default)(r.toString())),this._escapedAttributes[e]=n,n}}],[{key:"current",value:function(){return u.default.getConfigController().current()}},{key:"get",value:function(){return u.default.getConfigController().get()}},{key:"save",value:function(e){var t=u.default.getConfigController();return t.save(e).then(function(){return t.get()},function(e){return Promise.reject(e)})}}]),e}(),p=null;function y(e){try{var t=JSON.parse(e);if(t&&"object"===(0,a.default)(t))return(0,l.default)(t)}catch(e){return null}}var g={current:function(){if(p)return p;var e,t=new v,r=h.default.generatePath("currentConfig");if(!h.default.async()){if(e=h.default.getItem(r)){var n=y(e);n&&(t.attributes=n,p=t)}return t}return h.default.getItemAsync(r).then(function(e){if(e){var r=y(e);r&&(t.attributes=r,p=t)}return t})},get:function(){return u.default.getRESTController().request("GET","config",{},{}).then(function(e){if(!e||!e.params){var t=new d.default(d.default.INVALID_JSON,"Config JSON response invalid.");return Promise.reject(t)}var r=new v;for(var n in r.attributes={},e.params)r.attributes[n]=(0,l.default)(e.params[n]);return p=r,h.default.setItemAsync(h.default.generatePath("currentConfig"),JSON.stringify(e.params)).then(function(){return r})})},save:function(e){var t=u.default.getRESTController(),r={};for(var n in e)r[n]=(0,c.default)(e[n]);return t.request("PUT","config",{params:r},{useMasterKey:!0}).then(function(e){if(e&&e.result)return Promise.resolve();var t=new d.default(d.default.INTERNAL_SERVER_ERROR,"Error occured updating Config.");return Promise.reject(t)})}};u.default.setConfigController(g);var _=v;t.default=_},1769:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i,o=n(r(297)),s=!1,u={authenticate:function(e){var t=this;"undefined"==typeof FB&&e.error(this,"Facebook SDK not found."),FB.login(function(r){r.authResponse?e.success&&e.success(t,{id:r.authResponse.userID,access_token:r.authResponse.accessToken,expiration_date:new Date(1e3*r.authResponse.expiresIn+(new Date).getTime()).toJSON()}):e.error&&e.error(t,r)},{scope:a})},restoreAuthentication:function(e){if(e){var t={};if(i)for(var r in i)t[r]=i[r];t.status=!1;var n=FB.getAuthResponse();n&&n.userID!==e.id&&FB.logout(),FB.init(t)}return!0},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}},l={init:function(e){if("undefined"==typeof FB)throw new Error("The Facebook JavaScript SDK must be loaded before calling init.");if(i={},e)for(var t in e)i[t]=e[t];i.status&&"undefined"!=typeof console&&(console.warn||console.log||function(){}).call(console,'The "status" flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.');i.status=!1,FB.init(i),o.default._registerAuthenticationProvider(u),s=!0},isLinked:function(e){return e._isLinked("facebook")},logIn:function(e,t){if(!e||"string"==typeof e){if(!s)throw new Error("You must initialize FacebookUtils before calling logIn.");return a=e,o.default._logInWith("facebook",t)}return o.default._logInWith("facebook",{authData:e},t)},link:function(e,t,r){if(!t||"string"==typeof t){if(!s)throw new Error("You must initialize FacebookUtils before calling link.");return a=t,e._linkWith("facebook",r)}return e._linkWith("facebook",{authData:t},r)},unlink:function(e,t){if(!s)throw new Error("You must initialize FacebookUtils before calling unlink.");return e._unlinkFrom("facebook",t)},_getAuthProvider:function(){return u}};t.default=l},1770:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(64)),i=n(r(73)),o=n(r(189)),s=n(r(153)),u=n(r(190)),l=n(r(74)),c=function(e){function t(e){var r;if((0,i.default)(this,t),r=(0,o.default)(this,(0,s.default)(t).call(this,"_Installation")),e&&"object"===(0,a.default)(e)&&!r.set(e||{}))throw new Error("Can't create an invalid Session");return r}return(0,u.default)(t,e),t}(l.default);t.default=c,l.default.registerSubclass("_Installation",c)},1771:function(e,t,r){"use strict";var n,a,i,o,s,u,l,c,f=r(22),d=f(r(295)),h=f(r(1772)),v=f(r(1776)),p=f(r(296)),y=f(r(75)),g=f(r(265)),_=r(394),m={isEnabled:!1,isSyncing:!1,fromPinWithName:function(e){return y.default.getLocalDatastoreController().fromPinWithName(e)},pinWithName:function(e,t){return y.default.getLocalDatastoreController().pinWithName(e,t)},unPinWithName:function(e){return y.default.getLocalDatastoreController().unPinWithName(e)},_getAllContents:function(){return y.default.getLocalDatastoreController().getAllContents()},_getRawStorage:function(){return y.default.getLocalDatastoreController().getRawStorage()},_clear:function(){return y.default.getLocalDatastoreController().clear()},_handlePinAllWithName:(c=(0,p.default)(d.default.mark(function e(t,r){var n,a,i,o,s,u,l,c,f,p,y,g,_,m,b,w,O,k;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.getPinName(t),a=[],i=[],o=!0,s=!1,u=void 0,e.prev=6,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0)for(_ in f=c.value,p=this._getChildren(f),y=this.getKeyForObject(f),g=f._toFullJSON(),f._localId&&(g._localId=f._localId),p[y]=g,p)i.push(_),a.push(this.pinWithName(_,[p[_]]));e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),s=!0,u=e.t0;case 14:e.prev=14,e.prev=15,o||null==l.return||l.return();case 17:if(e.prev=17,!s){e.next=20;break}throw u;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return m=this.fromPinWithName(n),e.next=25,Promise.all([m,a]);case 25:return b=e.sent,w=(0,v.default)(b,1),O=w[0],k=(0,h.default)(new Set([].concat((0,h.default)(O||[]),i))),e.abrupt("return",this.pinWithName(n,k));case 30:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21]])})),function(){return c.apply(this,arguments)}),_handleUnPinAllWithName:(l=(0,p.default)(d.default.mark(function e(t,r){var n,a,i,o,s,u,l,c,f,v,p,y,g,m,b,w,O,k,S,E,P,A;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getAllContents();case 2:for(n=e.sent,a=this.getPinName(t),i=[],o=[],s=!0,u=!1,l=void 0,e.prev=9,c=r[Symbol.iterator]();!(s=(f=c.next()).done);s=!0)p=f.value,y=this._getChildren(p),g=this.getKeyForObject(p),(v=o).push.apply(v,[g].concat((0,h.default)(Object.keys(y))));e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),u=!0,l=e.t0;case 17:e.prev=17,e.prev=18,s||null==c.return||c.return();case 20:if(e.prev=20,!u){e.next=23;break}throw l;case 23:return e.finish(20);case 24:return e.finish(17);case 25:o=(0,h.default)(new Set(o)),0==(m=(m=n[a]||[]).filter(function(e){return!o.includes(e)})).length?(i.push(this.unPinWithName(a)),delete n[a]):(i.push(this.pinWithName(a,m)),n[a]=m),b=!0,w=!1,O=void 0,e.prev=32,k=o[Symbol.iterator]();case 34:if(b=(S=k.next()).done){e.next=51;break}E=S.value,P=!1,e.t1=d.default.keys(n);case 38:if((e.t2=e.t1()).done){e.next=47;break}if((A=e.t2.value)!==_.DEFAULT_PIN&&!A.startsWith(_.PIN_PREFIX)){e.next=45;break}if(!(n[A]||[]).includes(E)){e.next=45;break}return P=!0,e.abrupt("break",47);case 45:e.next=38;break;case 47:P||i.push(this.unPinWithName(E));case 48:b=!0,e.next=34;break;case 51:e.next=57;break;case 53:e.prev=53,e.t3=e.catch(32),w=!0,O=e.t3;case 57:e.prev=57,e.prev=58,b||null==k.return||k.return();case 60:if(e.prev=60,!w){e.next=63;break}throw O;case 63:return e.finish(60);case 64:return e.finish(57);case 65:return e.abrupt("return",Promise.all(i));case 66:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24],[32,53,57,65],[58,,60,64]])})),function(){return l.apply(this,arguments)}),_getChildren:function(e){var t={},r=e._toFullJSON();for(var n in r)r[n]&&r[n].__type&&"Object"===r[n].__type&&this._traverse(r[n],t);return t},_traverse:function(e,t){if(e.objectId){var r=this.getKeyForObject(e);if(!t[r])for(var n in t[r]=e,e){var a=e[n];e[n]||(a=e),a.__type&&"Object"===a.__type&&this._traverse(a,t)}}},_serializeObjectsFromPinName:(u=(0,p.default)(d.default.mark(function e(t){var r,n,a,i,o,s,u,l,c=this;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getAllContents();case 2:for(i in n=e.sent,a=[],n)i.startsWith(_.OBJECT_PREFIX)&&a.push(n[i][0]);if(t){e.next=7;break}return e.abrupt("return",a);case 7:if(o=this.getPinName(t),s=n[o],Array.isArray(s)){e.next=11;break}return e.abrupt("return",[]);case 11:return u=s.map(function(e){return c.fromPinWithName(e)}),e.next=14,Promise.all(u);case 14:return l=e.sent,l=(r=[]).concat.apply(r,(0,h.default)(l)),e.abrupt("return",l.filter(function(e){return null!=e}));case 17:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)}),_serializeObject:(s=(0,p.default)(d.default.mark(function e(t,r){var n,a,i,o,s,u,l,c,f,h,v;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r){e.next=5;break}return e.next=4,this._getAllContents();case 4:n=e.sent;case 5:if(n[t]&&0!==n[t].length){e.next=7;break}return e.abrupt("return",null);case 7:for(a=n[t][0],i=[],(o={})[s=0]=a,i.push(s);0!==i.length;)for(c in u=i.shift(),l=o[u])(f=l[c]).__type&&"Object"===f.__type&&(h=this.getKeyForObject(f),n[h]&&n[h].length>0&&(v=n[h][0],o[++s]=v,l[c]=v,i.push(s)));return e.abrupt("return",a);case 15:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),_updateObjectIfPinned:(o=(0,p.default)(d.default.mark(function e(t){var r,n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnabled){e.next=2;break}return e.abrupt("return");case 2:return r=this.getKeyForObject(t),e.next=5,this.fromPinWithName(r);case 5:if((n=e.sent)&&0!==n.length){e.next=8;break}return e.abrupt("return");case 8:return e.abrupt("return",this.pinWithName(r,[t._toFullJSON()]));case 9:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),_destroyObjectIfPinned:(i=(0,p.default)(d.default.mark(function e(t){var r,n,a,i,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnabled){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._getAllContents();case 4:if(r=e.sent,n=this.getKeyForObject(t),r[n]){e.next=9;break}return e.abrupt("return");case 9:for(i in a=[this.unPinWithName(n)],delete r[n],r)(i===_.DEFAULT_PIN||i.startsWith(_.PIN_PREFIX))&&(o=r[i]||[]).includes(n)&&(0==(o=o.filter(function(e){return e!==n})).length?(a.push(this.unPinWithName(i)),delete r[i]):(a.push(this.pinWithName(i,o)),r[i]=o));return e.abrupt("return",Promise.all(a));case 13:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),_updateLocalIdForObject:(a=(0,p.default)(d.default.mark(function e(t,r){var n,a,i,o,s,u,l;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnabled){e.next=2;break}return e.abrupt("return");case 2:return n="".concat(_.OBJECT_PREFIX).concat(r.className,"_").concat(t),a=this.getKeyForObject(r),e.next=6,this.fromPinWithName(n);case 6:if((i=e.sent)&&0!==i.length){e.next=9;break}return e.abrupt("return");case 9:return o=[this.unPinWithName(n),this.pinWithName(a,i)],e.next=12,this._getAllContents();case 12:for(u in s=e.sent)(u===_.DEFAULT_PIN||u.startsWith(_.PIN_PREFIX))&&(l=s[u]||[]).includes(n)&&((l=l.filter(function(e){return e!==n})).push(a),o.push(this.pinWithName(u,l)),s[u]=l);return e.abrupt("return",Promise.all(o));case 15:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)}),updateFromServer:(n=(0,p.default)(d.default.mark(function e(){var t,r,n,a,i,o,s,u,l,c,f,h,p,y,m,b=this;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkIfEnabled()&&!this.isSyncing){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._getAllContents();case 4:for(n in t=e.sent,r=[],t)n.startsWith(_.OBJECT_PREFIX)&&r.push(n);if(0!==r.length){e.next=9;break}return e.abrupt("return");case 9:this.isSyncing=!0,a={},i=0,o=r;case 12:if(!(i<o.length)){e.next=23;break}if(s=o[i],u=s.split("_"),l=(0,v.default)(u,4),c=l[2],f=l[3],5===s.split("_").length&&"User"===s.split("_")[3]&&(c="_User",f=s.split("_")[4]),!f.startsWith("local")){e.next=18;break}return e.abrupt("continue",20);case 18:c in a||(a[c]=new Set),a[c].add(f);case 20:i++,e.next=12;break;case 23:return h=Object.keys(a).map(function(e){var t=Array.from(a[e]),r=new g.default(e);return r.limit(t.length),1===t.length?r.equalTo("objectId",t[0]):r.containedIn("objectId",t),r.find()}),e.prev=24,e.next=27,Promise.all(h);case 27:return p=e.sent,y=[].concat.apply([],p),m=y.map(function(e){var t=b.getKeyForObject(e);return b.pinWithName(t,e._toFullJSON())}),e.next=32,Promise.all(m);case 32:this.isSyncing=!1,e.next=39;break;case 35:e.prev=35,e.t0=e.catch(24),console.error("Error syncing LocalDatastore: ",e.t0),this.isSyncing=!1;case 39:case"end":return e.stop()}},e,this,[[24,35]])})),function(){return n.apply(this,arguments)}),getKeyForObject:function(e){var t=e.objectId||e._getId();return"".concat(_.OBJECT_PREFIX).concat(e.className,"_").concat(t)},getPinName:function(e){return e&&e!==_.DEFAULT_PIN?_.PIN_PREFIX+e:_.DEFAULT_PIN},checkIfEnabled:function(){return this.isEnabled||console.error("Parse.enableLocalDatastore() must be called first"),this.isEnabled}};e.exports=m,y.default.setLocalDatastoreController(r(1780)),y.default.setLocalDatastore(m)},1772:function(e,t,r){var n=r(1773),a=r(1774),i=r(1775);e.exports=function(e){return n(e)||a(e)||i()}},1773:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},1774:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},1775:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},1776:function(e,t,r){var n=r(1777),a=r(1778),i=r(1779);e.exports=function(e,t){return n(e)||a(e,t)||i()}},1777:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},1778:function(e,t){e.exports=function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}},1779:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},178:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(73)),i=n(r(83)),o=n(r(189)),s=n(r(153)),u=n(r(392)),l=n(r(190)),c=function(e){function t(e,r){var n;return(0,a.default)(this,t),(n=(0,o.default)(this,(0,s.default)(t).call(this,r))).code=e,Object.defineProperty((0,u.default)(n),"message",{enumerable:!0,value:r}),n}return(0,l.default)(t,e),(0,i.default)(t,[{key:"toString",value:function(){return"ParseError: "+this.code+" "+this.message}}]),t}((0,n(r(1747)).default)(Error));c.OTHER_CAUSE=-1,c.INTERNAL_SERVER_ERROR=1,c.CONNECTION_FAILED=100,c.OBJECT_NOT_FOUND=101,c.INVALID_QUERY=102,c.INVALID_CLASS_NAME=103,c.MISSING_OBJECT_ID=104,c.INVALID_KEY_NAME=105,c.INVALID_POINTER=106,c.INVALID_JSON=107,c.COMMAND_UNAVAILABLE=108,c.NOT_INITIALIZED=109,c.INCORRECT_TYPE=111,c.INVALID_CHANNEL_NAME=112,c.PUSH_MISCONFIGURED=115,c.OBJECT_TOO_LARGE=116,c.OPERATION_FORBIDDEN=119,c.CACHE_MISS=120,c.INVALID_NESTED_KEY=121,c.INVALID_FILE_NAME=122,c.INVALID_ACL=123,c.TIMEOUT=124,c.INVALID_EMAIL_ADDRESS=125,c.MISSING_CONTENT_TYPE=126,c.MISSING_CONTENT_LENGTH=127,c.INVALID_CONTENT_LENGTH=128,c.FILE_TOO_LARGE=129,c.FILE_SAVE_ERROR=130,c.DUPLICATE_VALUE=137,c.INVALID_ROLE_NAME=139,c.EXCEEDED_QUOTA=140,c.SCRIPT_FAILED=141,c.VALIDATION_ERROR=142,c.INVALID_IMAGE_DATA=143,c.UNSAVED_FILE_ERROR=151,c.INVALID_PUSH_TIME_ERROR=152,c.FILE_DELETE_ERROR=153,c.REQUEST_LIMIT_EXCEEDED=155,c.INVALID_EVENT_NAME=160,c.USERNAME_MISSING=200,c.PASSWORD_MISSING=201,c.USERNAME_TAKEN=202,c.EMAIL_TAKEN=203,c.EMAIL_MISSING=204,c.EMAIL_NOT_FOUND=205,c.SESSION_MISSING=206,c.MUST_CREATE_USER_THROUGH_SIGNUP=207,c.ACCOUNT_ALREADY_LINKED=208,c.INVALID_SESSION_TOKEN=209,c.LINKED_ID_MISSING=250,c.INVALID_LINKED_SESSION=251,c.UNSUPPORTED_SERVICE=252,c.INVALID_SCHEMA_OPERATION=255,c.AGGREGATE_ERROR=600,c.FILE_READ_ERROR=601,c.X_DOMAIN_REQUEST=602;var f=c;t.default=f},1780:function(e,t,r){"use strict";var n=r(394),a={fromPinWithName:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]},pinWithName:function(e,t){try{var r=JSON.stringify(t);localStorage.setItem(e,r)}catch(e){console.log(e.message)}},unPinWithName:function(e){localStorage.removeItem(e)},getAllContents:function(){for(var e={},t=0;t<localStorage.length;t+=1){var r=localStorage.key(t);if((0,n.isLocalDatastoreKey)(r)){var a=localStorage.getItem(r);try{e[r]=JSON.parse(a)}catch(e){console.error("Error getAllContents: ",e)}}}return e},getRawStorage:function(){for(var e={},t=0;t<localStorage.length;t+=1){var r=localStorage.key(t),n=localStorage.getItem(r);e[r]=n}return e},clear:function(){for(var e=[],t=0;t<localStorage.length;t+=1){var r=localStorage.key(t);(0,n.isLocalDatastoreKey)(r)&&e.push(r)}var a=e.map(this.unPinWithName);return Promise.all(a)}};e.exports=a},1781:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.send=function(e,t){t=t||{},e.where&&e.where instanceof o.default&&(e.where=e.where.toJSON().where);e.push_time&&"object"===(0,a.default)(e.push_time)&&(e.push_time=e.push_time.toJSON());e.expiration_time&&"object"===(0,a.default)(e.expiration_time)&&(e.expiration_time=e.expiration_time.toJSON());if(e.expiration_time&&e.expiration_interval)throw new Error("expiration_time and expiration_interval cannot both be set.");return i.default.getPushController().send(e,{useMasterKey:t.useMasterKey})};var a=n(r(64)),i=n(r(75)),o=n(r(265));var s={send:function(e,t){return i.default.getRESTController().request("POST","push",e,{useMasterKey:!!t.useMasterKey})}};i.default.setPushController(s)},1782:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(73)),i=n(r(83)),o=n(r(120)),s=n(r(75)),u=["String","Number","Boolean","Date","File","GeoPoint","Polygon","Array","Object","Pointer","Relation"],l=function(){function e(t){(0,a.default)(this,e),(0,o.default)(this,"className",void 0),(0,o.default)(this,"_fields",void 0),(0,o.default)(this,"_indexes",void 0),"string"==typeof t&&("User"===t&&s.default.get("PERFORM_USER_REWRITE")?this.className="_User":this.className=t),this._fields={},this._indexes={}}return(0,i.default)(e,[{key:"get",value:function(e){return this.assertClassName(),e=e||{},s.default.getSchemaController().get(this.className,e).then(function(e){if(!e)throw new Error("Schema not found.");return e})}},{key:"save",value:function(e){this.assertClassName(),e=e||{};var t=s.default.getSchemaController(),r={className:this.className,fields:this._fields,indexes:this._indexes};return t.create(this.className,r,e).then(function(e){return e})}},{key:"update",value:function(e){this.assertClassName(),e=e||{};var t=s.default.getSchemaController(),r={className:this.className,fields:this._fields,indexes:this._indexes};return this._fields={},this._indexes={},t.update(this.className,r,e).then(function(e){return e})}},{key:"delete",value:function(e){return this.assertClassName(),e=e||{},s.default.getSchemaController().delete(this.className,e).then(function(e){return e})}},{key:"purge",value:function(){return this.assertClassName(),s.default.getSchemaController().purge(this.className).then(function(e){return e})}},{key:"assertClassName",value:function(){if(!this.className)throw new Error("You must set a Class Name before making any request.")}},{key:"addField",value:function(e,t){if(t=t||"String",!e)throw new Error("field name may not be null.");if(-1===u.indexOf(t))throw new Error("".concat(t," is not a valid type."));return this._fields[e]={type:t},this}},{key:"addIndex",value:function(e,t){if(!e)throw new Error("index name may not be null.");if(!t)throw new Error("index may not be null.");return this._indexes[e]=t,this}},{key:"addString",value:function(e){return this.addField(e,"String")}},{key:"addNumber",value:function(e){return this.addField(e,"Number")}},{key:"addBoolean",value:function(e){return this.addField(e,"Boolean")}},{key:"addDate",value:function(e){return this.addField(e,"Date")}},{key:"addFile",value:function(e){return this.addField(e,"File")}},{key:"addGeoPoint",value:function(e){return this.addField(e,"GeoPoint")}},{key:"addPolygon",value:function(e){return this.addField(e,"Polygon")}},{key:"addArray",value:function(e){return this.addField(e,"Array")}},{key:"addObject",value:function(e){return this.addField(e,"Object")}},{key:"addPointer",value:function(e,t){if(!e)throw new Error("field name may not be null.");if(!t)throw new Error("You need to set the targetClass of the Pointer.");return this._fields[e]={type:"Pointer",targetClass:t},this}},{key:"addRelation",value:function(e,t){if(!e)throw new Error("field name may not be null.");if(!t)throw new Error("You need to set the targetClass of the Relation.");return this._fields[e]={type:"Relation",targetClass:t},this}},{key:"deleteField",value:function(e){this._fields[e]={__op:"Delete"}}},{key:"deleteIndex",value:function(e){this._indexes[e]={__op:"Delete"}}}],[{key:"all",value:function(e){return e=e||{},s.default.getSchemaController().get("",e).then(function(e){if(0===e.results.length)throw new Error("Schema not found.");return e.results})}}]),e}(),c={send:function(e,t,r,n){var a=s.default.getRESTController(),i={useMasterKey:!0};return n.hasOwnProperty("sessionToken")&&(i.sessionToken=n.sessionToken),a.request(t,"schemas/".concat(e),r,i)},get:function(e,t){return this.send(e,"GET",{},t)},create:function(e,t,r){return this.send(e,"POST",t,r)},update:function(e,t,r){return this.send(e,"PUT",t,r)},delete:function(e,t){return this.send(e,"DELETE",{},t)},purge:function(e){return s.default.getRESTController().request("DELETE","purge/".concat(e),{},{useMasterKey:!0})}};s.default.setSchemaController(c);var f=l;t.default=f},1783:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(295)),i=n(r(296)),o=n(r(497)),s=n(r(783)),u=n(r(75));function l(){return u.default.getLiveQueryController().getDefaultLiveQueryClient()}var c=new o.default;c.open=(0,i.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return t=e.sent,e.abrupt("return",t.open());case 4:case"end":return e.stop()}},e)})),c.close=(0,i.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return t=e.sent,e.abrupt("return",t.close());case 4:case"end":return e.stop()}},e)})),c.on("error",function(){});var f,d=c;t.default=d;var h,v={setDefaultLiveQueryClient:function(e){f=e},getDefaultLiveQueryClient:(h=(0,i.default)(a.default.mark(function e(){var t,r,n,i,o,l,d,h,v;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return",f);case 2:return e.next=4,u.default.getUserController().currentUserAsync();case 4:if(t=e.sent,r=t?t.getSessionToken():void 0,!(n=u.default.get("LIVEQUERY_SERVER_URL"))||0===n.indexOf("ws")){e.next=9;break}throw new Error("You need to set a proper Parse LiveQuery server url before using LiveQueryClient");case 9:return n||(i=u.default.get("SERVER_URL"),o=0===i.indexOf("https")?"wss://":"ws://",l=i.replace(/^https?:\/\//,""),n=o+l,u.default.set("LIVEQUERY_SERVER_URL",n)),d=u.default.get("APPLICATION_ID"),h=u.default.get("JAVASCRIPT_KEY"),v=u.default.get("MASTER_KEY"),(f=new s.default({applicationId:d,serverURL:n,javascriptKey:h,masterKey:v,sessionToken:r})).on("error",function(e){c.emit("error",e)}),f.on("open",function(){c.emit("open")}),f.on("close",function(){c.emit("close")}),e.abrupt("return",f);case 18:case"end":return e.stop()}},e)})),function(){return h.apply(this,arguments)}),_clearCachedDefaultClient:function(){f=null}};u.default.setLiveQueryController(v)},1784:function(e,t){e.exports=require("events")},1785:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(73)),i=n(r(83)),o=n(r(189)),s=n(r(153)),u=n(r(190)),l=n(r(497)),c=n(r(75)),f=function(e){function t(e,r,n){var i;return(0,a.default)(this,t),(i=(0,o.default)(this,(0,s.default)(t).call(this))).id=e,i.query=r,i.sessionToken=n,i.on("error",function(){}),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"unsubscribe",value:function(){var e=this;return c.default.getLiveQueryController().getDefaultLiveQueryClient().then(function(t){t.unsubscribe(e),e.emit("close")})}}]),t}(l.default);t.default=f},1789:function(e,t,r){"use strict";r.r(t);var n=r(90),a=r.n(n),i=r(0),o=r.n(i),s=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=1/0);var n=[],a=r<=1e3,i=Math.min(r,1e3);return new Promise(function(r,o){!function t(s){e.skip(s).limit(i).find().then(function(e){n.push.apply(n,e),a||e.length<i?r(n):t(s+i)}).catch(o)}(t)})};function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[],this.resetFromJSON(t)}var t,r,n;return t=e,(r=[{key:"resetFromJSON",value:function(e){this.items.length=0,this.startIndex=0,this.pageIndex=0,this.isLastPage=!1,this.setLinesCount(o()(e,"lines",10))}},{key:"setLinesCount",value:function(e){return this.linesInPage=e,this}},{key:"loadLines",value:function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=1/0),this.items.length=0;var n=this;return new Promise(function(a,i){s(e,t,r).then(function(e){n.items=e,n.startIndex=t,n.pageIndex=Math.floor(t/n.linesInPage),n.isLastPage=!(r<=1e3)||e.length<r,a(e,t)}).catch(function(e){n.isLastPage=!1,i(e)})})}},{key:"loadPage",value:function(e,t){var r=t*this.linesInPage;return this.loadLines(e,r,this.linesInPage)}},{key:"loadCurrentPage",value:function(e){return this.loadLines(e,this.startIndex,this.linesInPage)}},{key:"loadNextPage",value:function(e){var t=this.startIndex+this.linesInPage;return this.loadLines(e,t,this.linesInPage)}},{key:"loadPreviousPage",value:function(e){var t=this.startIndex-this.linesInPage;return this.loadLines(e,t,this.linesInPage)}},{key:"getItem",value:function(e){return this.items[e-this.startIndex]}},{key:"findFirst",value:function(e,t,r){void 0===r&&(r=0);for(var n,a=this.items.length;n<a;n++)if(this.items[n].get(e)===t)return n+this.startIndex;return-1}}])&&u(t.prototype,r),n&&u(t,n),e}(),c=r(35),f=r(18),d=function(e,t){var r;if(e instanceof t)r=e;else for(var n in r=new t,e)r.set(n,e[n]);return r},h=function(e,t,r){if(!t&&!r)return e;var n=a.a.User.current();if(!n)return e;var i=new a.a.ACL(n);return r||i.setPublicWriteAccess(!0),t||i.setPublicReadAccess(!0),e.setACL(i),e},v=function(e){for(var t,r,n=this.createQuery().select("id"),a=e instanceof this.customClass,i=0,o=this.primaryKeys.length;i<o;i++)t=this.primaryKeys[i],r=a?e.get(t):e[t],n.equalTo(t,r);return n},p=function(e){var t=d(e,this.customClass);return h(t,this.ownerRead,this.ownerWrite),t.save()},y=function(e){if(Object(f.a)(e))return this.saveItems(e);var t=this;return new Promise(function(r,n){t.primaryKeys.length>0?v.call(t,e).first().then(function(a){if(a){var i=a.id;e instanceof t.customClass?e.set("id",i):e.id=i}p.call(t,e).then(r).catch(n)}).catch(n):p.call(t,e).then(r).catch(n)})},g=function(e){if(this.primaryKeys.length>0){for(var t=[],r=0,n=e.length;r<n;r++)t.push(this.save(e[r]));return Promise.all(t)}var i,o=[];for(r=0,n=e.length;r<n;r++)i=d(e[r],this.customClass),h(i,this.ownerRead,this.ownerWrite),o.push(i);return a.a.Object.saveAll(o)},_=function(e){return e.select("id"),new Promise(function(t,r){s(e).then(function(e){0!==e.length?a.a.Object.destroyAll(e).then(t).catch(r):t(e)}).catch(r)})},m=r(42),b=r.n(m),w=function(e,t){"number"==typeof e&&(t=e,e=void 0),void 0===e&&(e=this.createQuery()),void 0===t&&(t=1);var r=this;return new Promise(function(n,a){e.select("id"),r.loadAll(e).then(function(i){b()(i),t=Math.min(t,i.length);for(var o=[],s=0;s<t;s++)o.push(i[s].id);e=r.createQuery().containedIn("objectId",o),r.loadAll(e).then(n).catch(a)}).catch(a)})},O=function(e){return void 0===e&&(e=this.createQuery()),e.count()};function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setClassName(o()(t,"className","Item")),this.primaryKeys=[];var r=o()(t,"primaryKeys",void 0);r&&this.setPrimaryKey(r),this.setOwnerReadMode(o()(t,"ownerRead",void 0)),this.setOwnerWriteMode(o()(t,"ownerWrite",void 0)),this.pageLoader=new l({lines:o()(t,"lines",10)})}var t,r,n;return t=e,(r=[{key:"setClassName",value:function(e){return this.customClass=a.a.Object.extend(e),this}},{key:"setPrimaryKey",value:function(e){return e?"string"==typeof e?(this.primaryKeys.length=1,this.primaryKeys[0]=e):Object(c.a)(this.primaryKeys,e):this.primaryKeys.length=0,this}},{key:"setOwnerReadMode",value:function(e){return this.ownerRead=e,this}},{key:"setOwnerWriteMode",value:function(e){return this.ownerWrite=e,this}},{key:"createItem",value:function(){return new this.customClass}},{key:"createQuery",value:function(){return new a.a.Query(this.customClass)}},{key:"loadItem",value:function(e){return this.createQuery().get(e)}},{key:"loadPage",value:function(e,t){return this.pageLoader.loadPage(e,t)}},{key:"loadCurrentPage",value:function(e){return this.pageLoader.loadCurrentPage(e)}},{key:"loadNextPage",value:function(e){return this.pageLoader.loadNextPage(e)}},{key:"loadPreviousPage",value:function(e){return this.pageLoader.loadPreviousPage(e)}},{key:"loadLines",value:function(e,t,r){return this.pageLoader.loadLines(e,t,r)}},{key:"loadAll",value:function(e){return void 0===e&&(e=this.createQuery()),this.pageLoader.loadLines(e)}},{key:"removeItem",value:function(e){return this.createItem().set("id",e).destroy()}},{key:"startIndex",get:function(){return this.pageLoader.startIndex}},{key:"pageIndex",get:function(){return this.pageLoader.pageIndex}},{key:"isLastPage",get:function(){return this.pageLoader.isLastPage}}])&&k(t.prototype,r),n&&k(t,n),e}(),E={save:y,saveItems:g,remove:_,loadRandomItems:w,getItemCount:O};Object.assign(S.prototype,E);var P=S,A=function(e,t){return new Promise(function(r,n){a.a.User.logOut().then(function(){return a.a.User.logIn(e,t)}).then(r,function(){(new a.a.User).set("username",e).set("password",t).signUp().then(function(){return a.a.User.logIn(e,t)}).then(r).catch(n)})})},C=r(3);Object(C.a)(window,"Parse",a.a),Object(C.a)(window,"RexPlugins.Parse.ItemTable",P),Object(C.a)(window,"RexPlugins.Parse.QuickLogin",A)},18:function(e,t,r){"use strict";t.a=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},189:function(e,t,r){var n=r(64),a=r(392);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?a(e):t}},190:function(e,t,r){var n=r(495);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},191:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(295)),i=n(r(296)),o=n(r(73)),s=n(r(83)),u=n(r(120)),l=n(r(75)),c=null;"undefined"!=typeof XMLHttpRequest&&(c=XMLHttpRequest);var f=/^data:([a-zA-Z]+\/[-a-zA-Z0-9+.]+)(;charset=[a-zA-Z0-9\-\/]*)?;base64,/;function d(e){if(e<26)return String.fromCharCode(65+e);if(e<52)return String.fromCharCode(e-26+97);if(e<62)return String.fromCharCode(e-52+48);if(62===e)return"+";if(63===e)return"/";throw new TypeError("Tried to encode large digit "+e+" in base64.")}var h=function(){function e(t,r,n){(0,o.default)(this,e),(0,u.default)(this,"_name",void 0),(0,u.default)(this,"_url",void 0),(0,u.default)(this,"_source",void 0),(0,u.default)(this,"_previousSave",void 0),(0,u.default)(this,"_data",void 0);var a=n||"";if(this._name=t,void 0!==r)if(Array.isArray(r))this._data=e.encodeBase64(r),this._source={format:"base64",base64:this._data,type:a};else if("undefined"!=typeof Blob&&r instanceof Blob)this._source={format:"file",file:r,type:a};else if(r&&"string"==typeof r.uri&&void 0!==r.uri)this._source={format:"uri",uri:r.uri,type:a};else{if(!r||"string"!=typeof r.base64)throw new TypeError("Cannot create a Parse.File with that data.");var i=r.base64,s=i.indexOf(",");if(-1!==s){var l=f.exec(i.slice(0,s+1));this._data=i.slice(s+1),this._source={format:"base64",base64:this._data,type:l[1]}}else this._data=i,this._source={format:"base64",base64:i,type:a}}}var t;return(0,s.default)(e,[{key:"getData",value:(t=(0,i.default)(a.default.mark(function e(){var t,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._data){e.next=2;break}return e.abrupt("return",this._data);case 2:if(this._url){e.next=4;break}throw new Error("Cannot retrieve data for unsaved ParseFile.");case 4:return t=l.default.getFileController(),e.next=7,t.download(this._url);case 7:return r=e.sent,this._data=r.base64,e.abrupt("return",this._data);case 10:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"name",value:function(){return this._name}},{key:"url",value:function(e){if(e=e||{},this._url)return e.forceSecure?this._url.replace(/^http:\/\//i,"https://"):this._url}},{key:"save",value:function(e){var t=this;e=e||{};var r=l.default.getFileController();if(this._previousSave||("file"===this._source.format?this._previousSave=r.saveFile(this._name,this._source,e).then(function(e){return t._name=e.name,t._url=e.url,t._data=null,t}):"uri"===this._source.format?this._previousSave=r.download(this._source.uri).then(function(n){var a={format:"base64",base64:n.base64,type:n.contentType};return t._data=n.base64,r.saveBase64(t._name,a,e)}).then(function(e){return t._name=e.name,t._url=e.url,t}):this._previousSave=r.saveBase64(this._name,this._source,e).then(function(e){return t._name=e.name,t._url=e.url,t})),this._previousSave)return this._previousSave}},{key:"toJSON",value:function(){return{__type:"File",name:this._name,url:this._url}}},{key:"equals",value:function(t){return this===t||t instanceof e&&this.name()===t.name()&&this.url()===t.url()&&void 0!==this.url()}}],[{key:"fromJSON",value:function(t){if("File"!==t.__type)throw new TypeError("JSON object does not represent a ParseFile");var r=new e(t.name);return r._url=t.url,r}},{key:"encodeBase64",value:function(e){var t=[];t.length=Math.ceil(e.length/3);for(var r=0;r<t.length;r++){var n=e[3*r],a=e[3*r+1]||0,i=e[3*r+2]||0,o=3*r+1<e.length,s=3*r+2<e.length;t[r]=[d(n>>2&63),d(n<<4&48|a>>4&15),o?d(a<<2&60|i>>6&3):"=",s?d(63&i):"="].join("")}return t.join("")}}]),e}(),v={saveFile:function(e,t,r){if("file"!==t.format)throw new Error("saveFile can only be used with File-type sources.");var n={"X-Parse-Application-ID":l.default.get("APPLICATION_ID"),"Content-Type":t.type||(t.file?t.file.type:null)},a=l.default.get("JAVASCRIPT_KEY");a&&(n["X-Parse-JavaScript-Key"]=a);var i=l.default.get("SERVER_URL");return"/"!==i[i.length-1]&&(i+="/"),i+="files/"+e,l.default.getRESTController().ajax("POST",i,t.file,n,r).then(function(e){return e.response})},saveBase64:function(e,t,r){if("base64"!==t.format)throw new Error("saveBase64 can only be used with Base64-type sources.");var n={base64:t.base64};return t.type&&(n._ContentType=t.type),l.default.getRESTController().request("POST","files/"+e,n,r)},download:function(e){return c?this.downloadAjax(e):Promise.reject("Cannot make a request: No definition of XMLHttpRequest was found.")},downloadAjax:function(e){return new Promise(function(t,r){var n=new c;n.open("GET",e,!0),n.responseType="arraybuffer",n.onerror=function(e){r(e)},n.onreadystatechange=function(){if(4===n.readyState){var e=new Uint8Array(this.response);t({base64:h.encodeBase64(e),contentType:n.getResponseHeader("content-type")})}},n.send()})},_setXHR:function(e){c=e}};l.default.setFileController(v);var p=h;t.default=p},192:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(73)),i=n(r(83)),o=n(r(120)),s=r(264),u=(n(r(74)),n(r(265))),l=function(){function e(t,r){(0,a.default)(this,e),(0,o.default)(this,"parent",void 0),(0,o.default)(this,"key",void 0),(0,o.default)(this,"targetClassName",void 0),this.parent=t,this.key=r,this.targetClassName=null}return(0,i.default)(e,[{key:"_ensureParentAndKey",value:function(e,t){if(this.key=this.key||t,this.key!==t)throw new Error("Internal Error. Relation retrieved from two different keys.");if(this.parent){if(this.parent.className!==e.className)throw new Error("Internal Error. Relation retrieved from two different Objects.");if(this.parent.id){if(this.parent.id!==e.id)throw new Error("Internal Error. Relation retrieved from two different Objects.")}else e.id&&(this.parent=e)}else this.parent=e}},{key:"add",value:function(e){Array.isArray(e)||(e=[e]);var t=new s.RelationOp(e,[]),r=this.parent;if(!r)throw new Error("Cannot add to a Relation without a parent");return r.set(this.key,t),this.targetClassName=t._targetClassName,r}},{key:"remove",value:function(e){Array.isArray(e)||(e=[e]);var t=new s.RelationOp([],e);if(!this.parent)throw new Error("Cannot remove from a Relation without a parent");this.parent.set(this.key,t),this.targetClassName=t._targetClassName}},{key:"toJSON",value:function(){return{__type:"Relation",className:this.targetClassName}}},{key:"query",value:function(){var e,t=this.parent;if(!t)throw new Error("Cannot construct a query for a Relation without a parent");return this.targetClassName?e=new u.default(this.targetClassName):(e=new u.default(t.className),e._extraOptions.redirectClassNameForKey=this.key),e._addCondition("$relatedTo","object",{__type:"Pointer",className:t.className,objectId:t.id}),e._addCondition("$relatedTo","key",this.key),e}}]),e}();t.default=l},22:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},233:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){return function e(t,r,n,h){if(t instanceof l.default){if(r)throw new Error("Parse Objects not allowed here");var v=t.id?t.className+":"+t.id:t;return n||!h||h.indexOf(v)>-1||t.dirty()||Object.keys(t._getServerData()).length<1?t.toPointer():(h=h.concat(v),t._toFullJSON(h))}if(t instanceof c.Op||t instanceof i.default||t instanceof s.default||t instanceof u.default||t instanceof f.default)return t.toJSON();if(t instanceof o.default){if(!t.url())throw new Error("Tried to encode an unsaved file.");return t.toJSON()}if("[object Date]"===d.call(t)){if(isNaN(t))throw new Error("Tried to encode an invalid date.");return{__type:"Date",iso:t.toJSON()}}if("[object RegExp]"===d.call(t)&&"string"==typeof t.source)return t.source;if(Array.isArray(t))return t.map(function(t){return e(t,r,n,h)});if(t&&"object"===(0,a.default)(t)){var p={};for(var y in t)p[y]=e(t[y],r,n,h);return p}return t}(e,!!t,!!r,n||[])};var a=n(r(64)),i=n(r(263)),o=n(r(191)),s=n(r(234)),u=n(r(393)),l=n(r(74)),c=r(264),f=n(r(192)),d=Object.prototype.toString},234:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(64)),i=n(r(73)),o=n(r(83)),s=n(r(120)),u=function(){function e(t,r){(0,i.default)(this,e),(0,s.default)(this,"_latitude",void 0),(0,s.default)(this,"_longitude",void 0),Array.isArray(t)?(e._validate(t[0],t[1]),this._latitude=t[0],this._longitude=t[1]):"object"===(0,a.default)(t)?(e._validate(t.latitude,t.longitude),this._latitude=t.latitude,this._longitude=t.longitude):void 0!==t&&void 0!==r?(e._validate(t,r),this._latitude=t,this._longitude=r):(this._latitude=0,this._longitude=0)}return(0,o.default)(e,[{key:"toJSON",value:function(){return e._validate(this._latitude,this._longitude),{__type:"GeoPoint",latitude:this._latitude,longitude:this._longitude}}},{key:"equals",value:function(t){return t instanceof e&&this.latitude===t.latitude&&this.longitude===t.longitude}},{key:"radiansTo",value:function(e){var t=Math.PI/180,r=this.latitude*t,n=this.longitude*t,a=e.latitude*t,i=e.longitude*t,o=Math.sin((r-a)/2),s=Math.sin((n-i)/2),u=o*o+Math.cos(r)*Math.cos(a)*s*s;return u=Math.min(1,u),2*Math.asin(Math.sqrt(u))}},{key:"kilometersTo",value:function(e){return 6371*this.radiansTo(e)}},{key:"milesTo",value:function(e){return 3958.8*this.radiansTo(e)}},{key:"latitude",get:function(){return this._latitude},set:function(t){e._validate(t,this.longitude),this._latitude=t}},{key:"longitude",get:function(){return this._longitude},set:function(t){e._validate(this.latitude,t),this._longitude=t}}],[{key:"_validate",value:function(e,t){if(isNaN(e)||isNaN(t)||"number"!=typeof e||"number"!=typeof t)throw new TypeError("GeoPoint latitude and longitude must be valid numbers");if(e<-90)throw new TypeError("GeoPoint latitude out of bounds: "+e+" < -90.0.");if(e>90)throw new TypeError("GeoPoint latitude out of bounds: "+e+" > 90.0.");if(t<-180)throw new TypeError("GeoPoint longitude out of bounds: "+t+" < -180.0.");if(t>180)throw new TypeError("GeoPoint longitude out of bounds: "+t+" > 180.0.")}},{key:"current",value:function(){return navigator.geolocation.getCurrentPosition(function(t){return new e(t.coords.latitude,t.coords.longitude)})}}]),e}();t.default=u},262:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){if(null===t||"object"!==(0,a.default)(t))return t;if(Array.isArray(t)){var r=[];return t.forEach(function(t,n){r[n]=e(t)}),r}if("string"==typeof t.__op)return(0,l.opFromJSON)(t);if("Pointer"===t.__type&&t.className)return u.default.fromJSON(t);if("Object"===t.__type&&t.className)return u.default.fromJSON(t);if("Relation"===t.__type){var n=new c.default(null,null);return n.targetClassName=t.className,n}if("Date"===t.__type)return new Date(t.iso);if("File"===t.__type)return i.default.fromJSON(t);if("GeoPoint"===t.__type)return new o.default({latitude:t.latitude,longitude:t.longitude});if("Polygon"===t.__type)return new s.default(t.coordinates);var f={};for(var d in t)f[d]=e(t[d]);return f};var a=n(r(64)),i=(n(r(263)),n(r(191))),o=n(r(234)),s=n(r(393)),u=n(r(74)),l=r(264),c=n(r(192))},263:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(64)),i=n(r(73)),o=n(r(83)),s=n(r(120)),u=n(r(773)),l=n(r(297)),c=function(){function e(t){if((0,i.default)(this,e),(0,s.default)(this,"permissionsById",void 0),this.permissionsById={},t&&"object"===(0,a.default)(t))if(t instanceof l.default)this.setReadAccess(t,!0),this.setWriteAccess(t,!0);else for(var r in t){var n=t[r];if("string"!=typeof r)throw new TypeError("Tried to create an ACL with an invalid user id.");for(var o in this.permissionsById[r]={},n){var u=n[o];if("read"!==o&&"write"!==o)throw new TypeError("Tried to create an ACL with an invalid permission type.");if("boolean"!=typeof u)throw new TypeError("Tried to create an ACL with an invalid permission value.");this.permissionsById[r][o]=u}}else if("function"==typeof t)throw new TypeError("ParseACL constructed with a function. Did you forget ()?")}return(0,o.default)(e,[{key:"toJSON",value:function(){var e={};for(var t in this.permissionsById)e[t]=this.permissionsById[t];return e}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var r=Object.keys(this.permissionsById),n=Object.keys(t.permissionsById);if(r.length!==n.length)return!1;for(var a in this.permissionsById){if(!t.permissionsById[a])return!1;if(this.permissionsById[a].read!==t.permissionsById[a].read)return!1;if(this.permissionsById[a].write!==t.permissionsById[a].write)return!1}return!0}},{key:"_setAccess",value:function(e,t,r){if(t instanceof l.default)t=t.id;else if(t instanceof u.default){var n=t.getName();if(!n)throw new TypeError("Role must have a name");t="role:"+n}if("string"!=typeof t)throw new TypeError("userId must be a string.");if("boolean"!=typeof r)throw new TypeError("allowed must be either true or false.");var a=this.permissionsById[t];if(!a){if(!r)return;a={},this.permissionsById[t]=a}r?this.permissionsById[t][e]=!0:(delete a[e],0===Object.keys(a).length&&delete this.permissionsById[t])}},{key:"_getAccess",value:function(e,t){if(t instanceof l.default){if(!(t=t.id))throw new Error("Cannot get access for a ParseUser without an ID")}else if(t instanceof u.default){var r=t.getName();if(!r)throw new TypeError("Role must have a name");t="role:"+r}var n=this.permissionsById[t];return!!n&&!!n[e]}},{key:"setReadAccess",value:function(e,t){this._setAccess("read",e,t)}},{key:"getReadAccess",value:function(e){return this._getAccess("read",e)}},{key:"setWriteAccess",value:function(e,t){this._setAccess("write",e,t)}},{key:"getWriteAccess",value:function(e){return this._getAccess("write",e)}},{key:"setPublicReadAccess",value:function(e){this.setReadAccess("*",e)}},{key:"getPublicReadAccess",value:function(){return this.getReadAccess("*")}},{key:"setPublicWriteAccess",value:function(e){this.setWriteAccess("*",e)}},{key:"getPublicWriteAccess",value:function(){return this.getWriteAccess("*")}},{key:"getRoleReadAccess",value:function(e){if(e instanceof u.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");return this.getReadAccess("role:"+e)}},{key:"getRoleWriteAccess",value:function(e){if(e instanceof u.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");return this.getWriteAccess("role:"+e)}},{key:"setRoleReadAccess",value:function(e,t){if(e instanceof u.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");this.setReadAccess("role:"+e,t)}},{key:"setRoleWriteAccess",value:function(e,t){if(e instanceof u.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");this.setWriteAccess("role:"+e,t)}}]),e}();t.default=c},264:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.opFromJSON=function(e){if(!e||!e.__op)return null;switch(e.__op){case"Delete":return new m;case"Increment":return new b(e.amount);case"Add":return new w((0,d.default)(e.objects));case"AddUnique":return new O((0,d.default)(e.objects));case"Remove":return new k((0,d.default)(e.objects));case"AddRelation":var t=(0,d.default)(e.objects);return Array.isArray(t)?new S(t,[]):new S([],[]);case"RemoveRelation":var r=(0,d.default)(e.objects);return Array.isArray(r)?new S([],r):new S([],[]);case"Batch":for(var n=[],a=[],i=0;i<e.ops.length;i++)"AddRelation"===e.ops[i].__op?n=n.concat((0,d.default)(e.ops[i].objects)):"RemoveRelation"===e.ops[i].__op&&(a=a.concat((0,d.default)(e.ops[i].objects)));return new S(n,a)}return null},t.RelationOp=t.RemoveOp=t.AddUniqueOp=t.AddOp=t.IncrementOp=t.UnsetOp=t.SetOp=t.Op=void 0;var a=n(r(189)),i=n(r(153)),o=n(r(392)),s=n(r(190)),u=n(r(120)),l=n(r(73)),c=n(r(83)),f=n(r(775)),d=n(r(262)),h=n(r(233)),v=n(r(74)),p=n(r(192)),y=n(r(776));var g=function(){function e(){(0,l.default)(this,e)}return(0,c.default)(e,[{key:"applyTo",value:function(){}},{key:"mergeWith",value:function(){}},{key:"toJSON",value:function(){}}]),e}();t.Op=g;var _=function(e){function t(e){var r;return(0,l.default)(this,t),r=(0,a.default)(this,(0,i.default)(t).call(this)),(0,u.default)((0,o.default)(r),"_value",void 0),r._value=e,r}return(0,s.default)(t,e),(0,c.default)(t,[{key:"applyTo",value:function(){return this._value}},{key:"mergeWith",value:function(){return new t(this._value)}},{key:"toJSON",value:function(){return(0,h.default)(this._value,!1,!0)}}]),t}(g);t.SetOp=_;var m=function(e){function t(){return(0,l.default)(this,t),(0,a.default)(this,(0,i.default)(t).apply(this,arguments))}return(0,s.default)(t,e),(0,c.default)(t,[{key:"applyTo",value:function(){}},{key:"mergeWith",value:function(){return new t}},{key:"toJSON",value:function(){return{__op:"Delete"}}}]),t}(g);t.UnsetOp=m;var b=function(e){function t(e){var r;if((0,l.default)(this,t),r=(0,a.default)(this,(0,i.default)(t).call(this)),(0,u.default)((0,o.default)(r),"_amount",void 0),"number"!=typeof e)throw new TypeError("Increment Op must be initialized with a numeric amount.");return r._amount=e,r}return(0,s.default)(t,e),(0,c.default)(t,[{key:"applyTo",value:function(e){if(void 0===e)return this._amount;if("number"!=typeof e)throw new TypeError("Cannot increment a non-numeric value.");return this._amount+e}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof _)return new _(this.applyTo(e._value));if(e instanceof m)return new _(this._amount);if(e instanceof t)return new t(this.applyTo(e._amount));throw new Error("Cannot merge Increment Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Increment",amount:this._amount}}}]),t}(g);t.IncrementOp=b;var w=function(e){function t(e){var r;return(0,l.default)(this,t),r=(0,a.default)(this,(0,i.default)(t).call(this)),(0,u.default)((0,o.default)(r),"_value",void 0),r._value=Array.isArray(e)?e:[e],r}return(0,s.default)(t,e),(0,c.default)(t,[{key:"applyTo",value:function(e){if(null==e)return this._value;if(Array.isArray(e))return e.concat(this._value);throw new Error("Cannot add elements to a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof _)return new _(this.applyTo(e._value));if(e instanceof m)return new _(this._value);if(e instanceof t)return new t(this.applyTo(e._value));throw new Error("Cannot merge Add Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Add",objects:(0,h.default)(this._value,!1,!0)}}}]),t}(g);t.AddOp=w;var O=function(e){function t(e){var r;return(0,l.default)(this,t),r=(0,a.default)(this,(0,i.default)(t).call(this)),(0,u.default)((0,o.default)(r),"_value",void 0),r._value=(0,y.default)(Array.isArray(e)?e:[e]),r}return(0,s.default)(t,e),(0,c.default)(t,[{key:"applyTo",value:function(e){if(null==e)return this._value||[];if(Array.isArray(e)){var t=e,r=[];return this._value.forEach(function(e){e instanceof v.default?(0,f.default)(t,e)||r.push(e):t.indexOf(e)<0&&r.push(e)}),e.concat(r)}throw new Error("Cannot add elements to a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof _)return new _(this.applyTo(e._value));if(e instanceof m)return new _(this._value);if(e instanceof t)return new t(this.applyTo(e._value));throw new Error("Cannot merge AddUnique Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"AddUnique",objects:(0,h.default)(this._value,!1,!0)}}}]),t}(g);t.AddUniqueOp=O;var k=function(e){function t(e){var r;return(0,l.default)(this,t),r=(0,a.default)(this,(0,i.default)(t).call(this)),(0,u.default)((0,o.default)(r),"_value",void 0),r._value=(0,y.default)(Array.isArray(e)?e:[e]),r}return(0,s.default)(t,e),(0,c.default)(t,[{key:"applyTo",value:function(e){if(null==e)return[];if(Array.isArray(e)){for(var t=e.concat([]),r=0;r<this._value.length;r++){for(var n=t.indexOf(this._value[r]);n>-1;)t.splice(n,1),n=t.indexOf(this._value[r]);if(this._value[r]instanceof v.default&&this._value[r].id)for(var a=0;a<t.length;a++)t[a]instanceof v.default&&this._value[r].id===t[a].id&&(t.splice(a,1),a--)}return t}throw new Error("Cannot remove elements from a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof _)return new _(this.applyTo(e._value));if(e instanceof m)return new m;if(e instanceof t){for(var r=e._value.concat([]),n=0;n<this._value.length;n++)this._value[n]instanceof v.default?(0,f.default)(r,this._value[n])||r.push(this._value[n]):r.indexOf(this._value[n])<0&&r.push(this._value[n]);return new t(r)}throw new Error("Cannot merge Remove Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Remove",objects:(0,h.default)(this._value,!1,!0)}}}]),t}(g);t.RemoveOp=k;var S=function(e){function t(e,r){var n;return(0,l.default)(this,t),n=(0,a.default)(this,(0,i.default)(t).call(this)),(0,u.default)((0,o.default)(n),"_targetClassName",void 0),(0,u.default)((0,o.default)(n),"relationsToAdd",void 0),(0,u.default)((0,o.default)(n),"relationsToRemove",void 0),n._targetClassName=null,Array.isArray(e)&&(n.relationsToAdd=(0,y.default)(e.map(n._extractId,(0,o.default)(n)))),Array.isArray(r)&&(n.relationsToRemove=(0,y.default)(r.map(n._extractId,(0,o.default)(n)))),n}return(0,s.default)(t,e),(0,c.default)(t,[{key:"_extractId",value:function(e){if("string"==typeof e)return e;if(!e.id)throw new Error("You cannot add or remove an unsaved Parse Object from a relation");if(this._targetClassName||(this._targetClassName=e.className),this._targetClassName!==e.className)throw new Error("Tried to create a Relation with 2 different object types: "+this._targetClassName+" and "+e.className+".");return e.id}},{key:"applyTo",value:function(e,t,r){if(!e){if(!t||!r)throw new Error("Cannot apply a RelationOp without either a previous value, or an object and a key");var n=new v.default(t.className);t.id&&0===t.id.indexOf("local")?n._localId=t.id:t.id&&(n.id=t.id);var a=new p.default(n,r);return a.targetClassName=this._targetClassName,a}if(e instanceof p.default){if(this._targetClassName)if(e.targetClassName){if(this._targetClassName!==e.targetClassName)throw new Error("Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in.")}else e.targetClassName=this._targetClassName;return e}throw new Error("Relation cannot be applied to a non-relation field")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof m)throw new Error("You cannot modify a relation after deleting it.");if(e instanceof _&&e._value instanceof p.default)return this;if(e instanceof t){if(e._targetClassName&&e._targetClassName!==this._targetClassName)throw new Error("Related object must be of class "+e._targetClassName+", but "+(this._targetClassName||"null")+" was passed in.");var r=e.relationsToAdd.concat([]);this.relationsToRemove.forEach(function(e){var t=r.indexOf(e);t>-1&&r.splice(t,1)}),this.relationsToAdd.forEach(function(e){r.indexOf(e)<0&&r.push(e)});var n=e.relationsToRemove.concat([]);this.relationsToAdd.forEach(function(e){var t=n.indexOf(e);t>-1&&n.splice(t,1)}),this.relationsToRemove.forEach(function(e){n.indexOf(e)<0&&n.push(e)});var a=new t(r,n);return a._targetClassName=this._targetClassName,a}throw new Error("Cannot merge Relation Op with the previous Op")}},{key:"toJSON",value:function(){var e=this,t=function(t){return{__type:"Pointer",className:e._targetClassName,objectId:t}},r=null,n=null;return this.relationsToAdd.length>0&&(r={__op:"AddRelation",objects:this.relationsToAdd.map(t)}),this.relationsToRemove.length>0&&(n={__op:"RemoveRelation",objects:this.relationsToRemove.map(t)}),r&&n?{__op:"Batch",ops:[r,n]}:r||n||{}}}]),t}(g);t.RelationOp=S},265:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(64)),i=n(r(295)),o=n(r(296)),s=n(r(73)),u=n(r(83)),l=n(r(120)),c=n(r(75)),f=n(r(233)),d=r(496),h=n(r(178)),v=n(r(234)),p=n(r(74)),y=n(r(1753)),g=r(394);function _(e){return"\\Q"+e.replace("\\E","\\E\\\\E\\Q")+"\\E"}function m(e){var t=null;return e.forEach(function(e){if(t||(t=e.className),t!==e.className)throw new Error("All queries must be for the same class.")}),t}function b(e,t){var r={};(t.forEach(function(t){var n=-1!==t.indexOf(".");if(n||e.hasOwnProperty(t)){if(n){var a=t.split("."),i=e,o=r;a.forEach(function(e,t,r){i&&!i.hasOwnProperty(e)&&(i[e]=void 0),void 0!==i&&(i=i[e]),t<r.length-1&&(o[e]||(o[e]={}),o=o[e])})}}else e[t]=void 0}),Object.keys(r).length>0)&&function e(t,r,n,a){if(a)for(var i in t)t.hasOwnProperty(i)&&!r.hasOwnProperty(i)&&(r[i]=t[i]);for(var o in n)void 0!==r[o]&&null!==r[o]&&void 0!==t&&null!==t&&e(t[o],r[o],n[o],!0)}(c.default.getObjectStateController().getServerData({id:e.objectId,className:e.className}),e,r,!1)}function w(e,t,r){var n=r[0],a="-"===n.slice(0,1);if(a&&(n=n.substring(1)),"_created_at"===n&&(n="createdAt"),"_updated_at"===n&&(n="updatedAt"),!/^[A-Za-z][0-9A-Za-z_]*$/.test(n)||"password"===n)throw new h.default(h.default.INVALID_KEY_NAME,"Invalid Key: ".concat(n));var i=e.get(n),o=t.get(n);return i<o?a?1:-1:i>o?a?-1:1:r.length>1?w(e,t,r.slice(1)):0}var O=function(){function e(t){if((0,s.default)(this,e),(0,l.default)(this,"className",void 0),(0,l.default)(this,"_where",void 0),(0,l.default)(this,"_include",void 0),(0,l.default)(this,"_exclude",void 0),(0,l.default)(this,"_select",void 0),(0,l.default)(this,"_limit",void 0),(0,l.default)(this,"_skip",void 0),(0,l.default)(this,"_count",void 0),(0,l.default)(this,"_order",void 0),(0,l.default)(this,"_readPreference",void 0),(0,l.default)(this,"_includeReadPreference",void 0),(0,l.default)(this,"_subqueryReadPreference",void 0),(0,l.default)(this,"_queriesLocalDatastore",void 0),(0,l.default)(this,"_localDatastorePinName",void 0),(0,l.default)(this,"_extraOptions",void 0),"string"==typeof t)"User"===t&&c.default.get("PERFORM_USER_REWRITE")?this.className="_User":this.className=t;else if(t instanceof p.default)this.className=t.className;else{if("function"!=typeof t)throw new TypeError("A ParseQuery must be constructed with a ParseObject or class name.");if("string"==typeof t.className)this.className=t.className;else{var r=new t;this.className=r.className}}this._where={},this._include=[],this._exclude=[],this._count=!1,this._limit=-1,this._skip=0,this._readPreference=null,this._includeReadPreference=null,this._subqueryReadPreference=null,this._queriesLocalDatastore=!1,this._localDatastorePinName=null,this._extraOptions={}}var t,r;return(0,u.default)(e,[{key:"_orQuery",value:function(e){var t=e.map(function(e){return e.toJSON().where});return this._where.$or=t,this}},{key:"_andQuery",value:function(e){var t=e.map(function(e){return e.toJSON().where});return this._where.$and=t,this}},{key:"_norQuery",value:function(e){var t=e.map(function(e){return e.toJSON().where});return this._where.$nor=t,this}},{key:"_addCondition",value:function(e,t,r){return this._where[e]&&"string"!=typeof this._where[e]||(this._where[e]={}),this._where[e][t]=(0,f.default)(r,!1,!0),this}},{key:"_regexStartWith",value:function(e){return"^"+_(e)}},{key:"_handleOfflineQuery",value:(r=(0,o.default)(i.default.mark(function e(t){var r,n,a,o,s,u,l,f,d=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.default.validateQuery(this),r=c.default.getLocalDatastore(),e.next=4,r._serializeObjectsFromPinName(this._localDatastorePinName);case 4:if(n=e.sent,a=n.map(function(e,t,r){var n=p.default.fromJSON(e,!1);return e._localId&&!e.objectId&&(n._localId=e._localId),y.default.matchesQuery(d.className,n,r,d)?n:null}).filter(function(e){return null!==e}),t.keys&&(o=t.keys.split(","),s=["className","objectId","createdAt","updatedAt","ACL"],o=o.concat(s),a=a.map(function(e){var t=e._toFullJSON();return Object.keys(t).forEach(function(e){o.includes(e)||delete t[e]}),p.default.fromJSON(t,!1)})),t.order&&(u=t.order.split(","),a.sort(function(e,t){return w(e,t,u)})),t.count&&(l=a.length),t.skip&&(a=t.skip>=a.length?[]:a.splice(t.skip,a.length)),f=a.length,0!==t.limit&&t.limit<a.length&&(f=t.limit),a=a.splice(0,f),"number"!=typeof l){e.next=15;break}return e.abrupt("return",{results:a,count:l});case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"toJSON",value:function(){var e={where:this._where};for(var t in this._include.length&&(e.include=this._include.join(",")),this._exclude.length&&(e.excludeKeys=this._exclude.join(",")),this._select&&(e.keys=this._select.join(",")),this._count&&(e.count=1),this._limit>=0&&(e.limit=this._limit),this._skip>0&&(e.skip=this._skip),this._order&&(e.order=this._order.join(",")),this._readPreference&&(e.readPreference=this._readPreference),this._includeReadPreference&&(e.includeReadPreference=this._includeReadPreference),this._subqueryReadPreference&&(e.subqueryReadPreference=this._subqueryReadPreference),this._extraOptions)e[t]=this._extraOptions[t];return e}},{key:"withJSON",value:function(e){for(var t in e.where&&(this._where=e.where),e.include&&(this._include=e.include.split(",")),e.keys&&(this._select=e.keys.split(",")),e.excludeKeys&&(this._exclude=e.excludeKeys.split(",")),e.count&&(this._count=1===e.count),e.limit&&(this._limit=e.limit),e.skip&&(this._skip=e.skip),e.order&&(this._order=e.order.split(",")),e.readPreference&&(this._readPreference=e.readPreference),e.includeReadPreference&&(this._includeReadPreference=e.includeReadPreference),e.subqueryReadPreference&&(this._subqueryReadPreference=e.subqueryReadPreference),e)e.hasOwnProperty(t)&&-1===["where","include","keys","count","limit","skip","order","readPreference","includeReadPreference","subqueryReadPreference"].indexOf(t)&&(this._extraOptions[t]=e[t]);return this}},{key:"get",value:function(e,t){this.equalTo("objectId",e);var r={};return t&&t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t&&t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),this.first(r).then(function(e){if(e)return e;var t=new h.default(h.default.OBJECT_NOT_FOUND,"Object not found.");return Promise.reject(t)})}},{key:"find",value:function(e){var t=this,r={};(e=e||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(r.sessionToken=e.sessionToken);var n=c.default.getQueryController(),a=this._select;return this._queriesLocalDatastore?this._handleOfflineQuery(this.toJSON()):n.find(this.className,this.toJSON(),r).then(function(e){var r=e.results.map(function(r){var n=e.className||t.className;return r.className||(r.className=n),a&&b(r,a),p.default.fromJSON(r,!a)}),n=e.count;return"number"==typeof n?{results:r,count:n}:r})}},{key:"count",value:function(e){var t={};(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken);var r=c.default.getQueryController(),n=this.toJSON();return n.limit=0,n.count=1,r.find(this.className,n,t).then(function(e){return e.count})}},{key:"distinct",value:function(e,t){var r={useMasterKey:!0};(t=t||{}).hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken);var n=c.default.getQueryController(),a={distinct:e,where:this._where};return n.aggregate(this.className,a,r).then(function(e){return e.results})}},{key:"aggregate",value:function(e,t){var r={useMasterKey:!0};(t=t||{}).hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken);var n=c.default.getQueryController();if(!Array.isArray(e)&&"object"!==(0,a.default)(e))throw new Error("Invalid pipeline must be Array or Object");return n.aggregate(this.className,{pipeline:e},r).then(function(e){return e.results})}},{key:"first",value:function(e){var t=this,r={};(e=e||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(r.sessionToken=e.sessionToken);var n=c.default.getQueryController(),a=this.toJSON();a.limit=1;var i=this._select;return this._queriesLocalDatastore?this._handleOfflineQuery(a).then(function(e){if(e[0])return e[0]}):n.find(this.className,a,r).then(function(e){var r=e.results;if(r[0])return r[0].className||(r[0].className=t.className),i&&b(r[0],i),p.default.fromJSON(r[0],!i)})}},{key:"each",value:function(t,r){if(r=r||{},this._order||this._skip||this._limit>=0)return Promise.reject("Cannot iterate on a query with sort, skip, or limit.");var n=new e(this.className);for(var i in n._limit=r.batchSize||100,n._include=this._include.map(function(e){return e}),this._select&&(n._select=this._select.map(function(e){return e})),n._where={},this._where){var o=this._where[i];if(Array.isArray(o))n._where[i]=o.map(function(e){return e});else if(o&&"object"===(0,a.default)(o)){var s={};for(var u in n._where[i]=s,o)s[u]=o[u]}else n._where[i]=o}n.ascending("objectId");var l={};r.hasOwnProperty("useMasterKey")&&(l.useMasterKey=r.useMasterKey),r.hasOwnProperty("sessionToken")&&(l.sessionToken=r.sessionToken);var c=!1;return(0,d.continueWhile)(function(){return!c},function(){return n.find(l).then(function(e){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return t(e)})}),r.then(function(){e.length>=n._limit?n.greaterThan("objectId",e[e.length-1].id):c=!0})})})}},{key:"equalTo",value:function(e,t){return void 0===t?this.doesNotExist(e):(this._where[e]=(0,f.default)(t,!1,!0),this)}},{key:"notEqualTo",value:function(e,t){return this._addCondition(e,"$ne",t)}},{key:"lessThan",value:function(e,t){return this._addCondition(e,"$lt",t)}},{key:"greaterThan",value:function(e,t){return this._addCondition(e,"$gt",t)}},{key:"lessThanOrEqualTo",value:function(e,t){return this._addCondition(e,"$lte",t)}},{key:"greaterThanOrEqualTo",value:function(e,t){return this._addCondition(e,"$gte",t)}},{key:"containedIn",value:function(e,t){return this._addCondition(e,"$in",t)}},{key:"notContainedIn",value:function(e,t){return this._addCondition(e,"$nin",t)}},{key:"containedBy",value:function(e,t){return this._addCondition(e,"$containedBy",t)}},{key:"containsAll",value:function(e,t){return this._addCondition(e,"$all",t)}},{key:"containsAllStartingWith",value:function(e,t){var r=this;Array.isArray(t)||(t=[t]);var n=t.map(function(e){return{$regex:r._regexStartWith(e)}});return this.containsAll(e,n)}},{key:"exists",value:function(e){return this._addCondition(e,"$exists",!0)}},{key:"doesNotExist",value:function(e){return this._addCondition(e,"$exists",!1)}},{key:"matches",value:function(e,t,r){return this._addCondition(e,"$regex",t),r||(r=""),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),r.length&&this._addCondition(e,"$options",r),this}},{key:"matchesQuery",value:function(e,t){var r=t.toJSON();return r.className=t.className,this._addCondition(e,"$inQuery",r)}},{key:"doesNotMatchQuery",value:function(e,t){var r=t.toJSON();return r.className=t.className,this._addCondition(e,"$notInQuery",r)}},{key:"matchesKeyInQuery",value:function(e,t,r){var n=r.toJSON();return n.className=r.className,this._addCondition(e,"$select",{key:t,query:n})}},{key:"doesNotMatchKeyInQuery",value:function(e,t,r){var n=r.toJSON();return n.className=r.className,this._addCondition(e,"$dontSelect",{key:t,query:n})}},{key:"contains",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",_(t))}},{key:"fullText",value:function(e,t,r){if(r=r||{},!e)throw new Error("A key is required.");if(!t)throw new Error("A search term is required");if("string"!=typeof t)throw new Error("The value being searched for must be a string.");var n={};for(var a in n.$term=t,r)switch(a){case"language":n.$language=r[a];break;case"caseSensitive":n.$caseSensitive=r[a];break;case"diacriticSensitive":n.$diacriticSensitive=r[a];break;default:throw new Error("Unknown option: ".concat(a))}return this._addCondition(e,"$text",{$search:n})}},{key:"sortByTextScore",value:function(){return this.ascending("$score"),this.select(["$score"]),this}},{key:"startsWith",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",this._regexStartWith(t))}},{key:"endsWith",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",_(t)+"$")}},{key:"near",value:function(e,t){return t instanceof v.default||(t=new v.default(t)),this._addCondition(e,"$nearSphere",t)}},{key:"withinRadians",value:function(e,t,r,n){return n||void 0===n?(this.near(e,t),this._addCondition(e,"$maxDistance",r)):this._addCondition(e,"$geoWithin",{$centerSphere:[[t.longitude,t.latitude],r]})}},{key:"withinMiles",value:function(e,t,r,n){return this.withinRadians(e,t,r/3958.8,n)}},{key:"withinKilometers",value:function(e,t,r,n){return this.withinRadians(e,t,r/6371,n)}},{key:"withinGeoBox",value:function(e,t,r){return t instanceof v.default||(t=new v.default(t)),r instanceof v.default||(r=new v.default(r)),this._addCondition(e,"$within",{$box:[t,r]}),this}},{key:"withinPolygon",value:function(e,t){return this._addCondition(e,"$geoWithin",{$polygon:t})}},{key:"polygonContains",value:function(e,t){return this._addCondition(e,"$geoIntersects",{$point:t})}},{key:"ascending",value:function(){this._order=[];for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addAscending.apply(this,t)}},{key:"addAscending",value:function(){var e=this;this._order||(this._order=[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)&&(t=t.join()),e._order=e._order.concat(t.replace(/\s/g,"").split(","))}),this}},{key:"descending",value:function(){this._order=[];for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addDescending.apply(this,t)}},{key:"addDescending",value:function(){var e=this;this._order||(this._order=[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)&&(t=t.join()),e._order=e._order.concat(t.replace(/\s/g,"").split(",").map(function(e){return"-"+e}))}),this}},{key:"skip",value:function(e){if("number"!=typeof e||e<0)throw new Error("You can only skip by a positive number");return this._skip=e,this}},{key:"limit",value:function(e){if("number"!=typeof e)throw new Error("You can only set the limit to a numeric value");return this._limit=e,this}},{key:"withCount",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("boolean"!=typeof e)throw new Error("You can only set withCount to a boolean value");return this._count=e,this}},{key:"include",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)?e._include=e._include.concat(t):e._include.push(t)}),this}},{key:"includeAll",value:function(){return this.include("*")}},{key:"select",value:function(){var e=this;this._select||(this._select=[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)?e._select=e._select.concat(t):e._select.push(t)}),this}},{key:"exclude",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)?e._exclude=e._exclude.concat(t):e._exclude.push(t)}),this}},{key:"readPreference",value:function(e,t,r){return this._readPreference=e,this._includeReadPreference=t,this._subqueryReadPreference=r,this}},{key:"subscribe",value:(t=(0,o.default)(i.default.mark(function e(t){var r,n,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.getUserController().currentUserAsync();case 2:return r=e.sent,t||(t=r?r.getSessionToken():void 0),e.next=6,c.default.getLiveQueryController().getDefaultLiveQueryClient();case 6:return(n=e.sent).shouldOpen()&&n.open(),a=n.subscribe(this,t),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"fromLocalDatastore",value:function(){return this.fromPinWithName(null)}},{key:"fromPin",value:function(){return this.fromPinWithName(g.DEFAULT_PIN)}},{key:"fromPinWithName",value:function(e){return c.default.getLocalDatastore().checkIfEnabled()&&(this._queriesLocalDatastore=!0,this._localDatastorePinName=e),this}}],[{key:"fromJSON",value:function(t,r){return new e(t).withJSON(r)}},{key:"or",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=new e(m(r));return a._orQuery(r),a}},{key:"and",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=new e(m(r));return a._andQuery(r),a}},{key:"nor",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=new e(m(r));return a._norQuery(r),a}}]),e}(),k={find:function(e,t,r){return c.default.getRESTController().request("GET","classes/"+e,t,r)},aggregate:function(e,t,r){return c.default.getRESTController().request("GET","aggregate/"+e,t,r)}};c.default.setQueryController(k);var S=O;t.default=S},295:function(e,t,r){e.exports=r(1750)},296:function(e,t){function r(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,u,"next",e)}function u(e){r(o,a,i,s,u,"throw",e)}s(void 0)})}}},297:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(64)),i=n(r(73)),o=n(r(83)),s=n(r(189)),u=n(r(153)),l=n(r(774)),c=n(r(190)),f=n(r(780)),d=n(r(75)),h=n(r(781)),v=n(r(178)),p=n(r(74)),y=n(r(782)),g=n(r(395)),_=!d.default.get("IS_NODE"),m=!1,b=null,w={},O=function(e){function t(e){var r;if((0,i.default)(this,t),r=(0,s.default)(this,(0,u.default)(t).call(this,"_User")),e&&"object"===(0,a.default)(e)&&!r.set(e||{}))throw new Error("Can't create an invalid Parse User");return r}return(0,c.default)(t,e),(0,o.default)(t,[{key:"_upgradeToRevocableSession",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),d.default.getUserController().upgradeToRevocableSession(this,t)}},{key:"_linkWith",value:function(e,t){var r,n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i.sessionToken=i.sessionToken||this.getSessionToken()||"","string"==typeof e)if(r=e,w[e])e=w[e];else{var o={restoreAuthentication:function(){return!0},getAuthType:function(){return r}};w[r]=o,e=o}else r=e.getAuthType();if(t&&t.hasOwnProperty("authData")){var s=this.get("authData")||{};if("object"!==(0,a.default)(s))throw new Error("Invalid type: authData field should be an object");return s[r]=t.authData,d.default.getUserController().linkWith(this,s,i)}return new Promise(function(t,r){e.authenticate({success:function(e,a){var o={};o.authData=a,n._linkWith(e,o,i).then(function(){t(n)},function(e){r(e)})},error:function(e,t){r(t)}})})}},{key:"_synchronizeAuthData",value:function(e){if(this.isCurrent()&&e){var t;"string"==typeof e?e=w[t=e]:t=e.getAuthType();var r=this.get("authData");if(e&&r&&"object"===(0,a.default)(r))e.restoreAuthentication(r[t])||this._unlinkFrom(e)}}},{key:"_synchronizeAllAuthData",value:function(){var e=this.get("authData");if("object"===(0,a.default)(e))for(var t in e)this._synchronizeAuthData(t)}},{key:"_cleanupAuthData",value:function(){if(this.isCurrent()){var e=this.get("authData");if("object"===(0,a.default)(e))for(var t in e)e[t]||delete e[t]}}},{key:"_unlinkFrom",value:function(e,t){var r=this;return"string"==typeof e&&(e=w[e]),this._linkWith(e,{authData:null},t).then(function(){return r._synchronizeAuthData(e),Promise.resolve(r)})}},{key:"_isLinked",value:function(e){var t;t="string"==typeof e?e:e.getAuthType();var r=this.get("authData")||{};return"object"===(0,a.default)(r)&&!!r[t]}},{key:"_logOutWithAll",value:function(){var e=this.get("authData");if("object"===(0,a.default)(e))for(var t in e)this._logOutWith(t)}},{key:"_logOutWith",value:function(e){this.isCurrent()&&("string"==typeof e&&(e=w[e]),e&&e.deauthenticate&&e.deauthenticate())}},{key:"_preserveFieldsOnFetch",value:function(){return{sessionToken:this.get("sessionToken")}}},{key:"isCurrent",value:function(){var e=t.current();return!!e&&e.id===this.id}},{key:"getUsername",value:function(){var e=this.get("username");return null==e||"string"==typeof e?e:""}},{key:"setUsername",value:function(e){var t=this.get("authData");t&&"object"===(0,a.default)(t)&&t.hasOwnProperty("anonymous")&&(t.anonymous=null),this.set("username",e)}},{key:"setPassword",value:function(e){this.set("password",e)}},{key:"getEmail",value:function(){var e=this.get("email");return null==e||"string"==typeof e?e:""}},{key:"setEmail",value:function(e){return this.set("email",e)}},{key:"getSessionToken",value:function(){var e=this.get("sessionToken");return null==e||"string"==typeof e?e:""}},{key:"authenticated",value:function(){var e=t.current();return!!this.get("sessionToken")&&!!e&&e.id===this.id}},{key:"signUp",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("installationId")&&(r.installationId=t.installationId),d.default.getUserController().signUp(this,e,r)}},{key:"logIn",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("installationId")&&(t.installationId=e.installationId),d.default.getUserController().logIn(this,t)}},{key:"save",value:function(){for(var e=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(0,l.default)((0,u.default)(t.prototype),"save",this).apply(this,n).then(function(){return e.isCurrent()?d.default.getUserController().updateUserOnDisk(e):e})}},{key:"destroy",value:function(){for(var e=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(0,l.default)((0,u.default)(t.prototype),"destroy",this).apply(this,n).then(function(){return e.isCurrent()?d.default.getUserController().removeUserFromDisk():e})}},{key:"fetch",value:function(){for(var e=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(0,l.default)((0,u.default)(t.prototype),"fetch",this).apply(this,n).then(function(){return e.isCurrent()?d.default.getUserController().updateUserOnDisk(e):e})}},{key:"fetchWithInclude",value:function(){for(var e=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(0,l.default)((0,u.default)(t.prototype),"fetchWithInclude",this).apply(this,n).then(function(){return e.isCurrent()?d.default.getUserController().updateUserOnDisk(e):e})}}],[{key:"readOnlyAttributes",value:function(){return["sessionToken"]}},{key:"extend",value:function(e,r){if(e)for(var n in e)"className"!==n&&Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1,writable:!0,configurable:!0});if(r)for(var a in r)"className"!==a&&Object.defineProperty(t,a,{value:r[a],enumerable:!1,writable:!0,configurable:!0});return t}},{key:"current",value:function(){return _?d.default.getUserController().currentUser():null}},{key:"currentAsync",value:function(){return _?d.default.getUserController().currentUserAsync():Promise.resolve(null)}},{key:"signUp",value:function(e,t,r,n){return(r=r||{}).username=e,r.password=t,new this(r).signUp({},n)}},{key:"logIn",value:function(e,t,r){if("string"!=typeof e)return Promise.reject(new v.default(v.default.OTHER_CAUSE,"Username must be a string."));if("string"!=typeof t)return Promise.reject(new v.default(v.default.OTHER_CAUSE,"Password must be a string."));var n=new this;return n._finishFetch({username:e,password:t}),n.logIn(r)}},{key:"become",value:function(e,t){if(!_)throw new Error("It is not memory-safe to become a user in a server environment");var r={sessionToken:e};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),d.default.getUserController().become(r)}},{key:"me",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=d.default.getUserController(),n={sessionToken:e};return t.useMasterKey&&(n.useMasterKey=t.useMasterKey),r.me(n)}},{key:"hydrate",value:function(e){return d.default.getUserController().hydrate(e)}},{key:"logInWith",value:function(e,r,n){return t._logInWith(e,r,n)}},{key:"logOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.getUserController().logOut(e)}},{key:"requestPasswordReset",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),d.default.getUserController().requestPasswordReset(e,r)}},{key:"allowCustomUserClass",value:function(e){d.default.set("PERFORM_USER_REWRITE",!e)}},{key:"enableRevocableSession",value:function(e){if(e=e||{},d.default.set("FORCE_REVOCABLE_SESSION",!0),_){var r=t.current();if(r)return r._upgradeToRevocableSession(e)}return Promise.resolve()}},{key:"enableUnsafeCurrentUser",value:function(){_=!0}},{key:"disableUnsafeCurrentUser",value:function(){_=!1}},{key:"_registerAuthenticationProvider",value:function(e){w[e.getAuthType()]=e,t.currentAsync().then(function(t){t&&t._synchronizeAuthData(e.getAuthType())})}},{key:"_logInWith",value:function(e,r,n){return(new t)._linkWith(e,r,n)}},{key:"_clearCache",value:function(){b=null,m=!1}},{key:"_setCurrentUserCache",value:function(e){b=e}}]),t}(p.default);p.default.registerSubclass("_User",O);var k={updateUserOnDisk:function(e){var t=g.default.generatePath("currentUser"),r=e.toJSON();return r.className="_User",g.default.setItemAsync(t,JSON.stringify(r)).then(function(){return e})},removeUserFromDisk:function(){var e=g.default.generatePath("currentUser");return m=!0,b=null,g.default.removeItemAsync(e)},setCurrentUser:function(e){var t=this.currentUser(),r=Promise.resolve();return t&&!e.equals(t)&&f.default.isLinked(t)&&(r=t.destroy({sessionToken:t.getSessionToken()})),b=e,e._cleanupAuthData(),e._synchronizeAllAuthData(),r.then(function(){return k.updateUserOnDisk(e)})},currentUser:function(){if(b)return b;if(m)return null;if(g.default.async())throw new Error("Cannot call currentUser() when using a platform with an async storage system. Call currentUserAsync() instead.");var e=g.default.generatePath("currentUser"),t=g.default.getItem(e);if(m=!0,!t)return b=null,null;(t=JSON.parse(t)).className||(t.className="_User"),t._id&&(t.objectId!==t._id&&(t.objectId=t._id),delete t._id),t._sessionToken&&(t.sessionToken=t._sessionToken,delete t._sessionToken);var r=p.default.fromJSON(t);return b=r,r._synchronizeAllAuthData(),r},currentUserAsync:function(){if(b)return Promise.resolve(b);if(m)return Promise.resolve(null);var e=g.default.generatePath("currentUser");return g.default.getItemAsync(e).then(function(e){if(m=!0,!e)return b=null,Promise.resolve(null);(e=JSON.parse(e)).className||(e.className="_User"),e._id&&(e.objectId!==e._id&&(e.objectId=e._id),delete e._id),e._sessionToken&&(e.sessionToken=e._sessionToken,delete e._sessionToken);var t=p.default.fromJSON(e);return b=t,t._synchronizeAllAuthData(),Promise.resolve(t)})},signUp:function(e,t,r){var n=t&&t.username||e.get("username"),a=t&&t.password||e.get("password");return n&&n.length?a&&a.length?e.save(t,r).then(function(){return e._finishFetch({password:void 0}),_?k.setCurrentUser(e):e}):Promise.reject(new v.default(v.default.OTHER_CAUSE,"Cannot sign up user with an empty password.")):Promise.reject(new v.default(v.default.OTHER_CAUSE,"Cannot sign up user with an empty name."))},logIn:function(e,t){var r=d.default.getRESTController(),n=d.default.getObjectStateController(),a={username:e.get("username"),password:e.get("password")};return r.request("GET","login",a,t).then(function(t){return e._migrateId(t.objectId),e._setExisted(!0),n.setPendingOp(e._getStateIdentifier(),"username",void 0),n.setPendingOp(e._getStateIdentifier(),"password",void 0),t.password=void 0,e._finishFetch(t),_?k.setCurrentUser(e):Promise.resolve(e)})},become:function(e){var t=new O;return d.default.getRESTController().request("GET","users/me",{},e).then(function(e){return t._finishFetch(e),t._setExisted(!0),k.setCurrentUser(t)})},hydrate:function(e){var t=new O;return t._finishFetch(e),t._setExisted(!0),e.sessionToken&&_?k.setCurrentUser(t):Promise.resolve(t)},me:function(e){return d.default.getRESTController().request("GET","users/me",{},e).then(function(e){var t=new O;return t._finishFetch(e),t._setExisted(!0),t})},logOut:function(e){var t=d.default.getRESTController();return e.sessionToken?t.request("POST","logout",{},e):k.currentUserAsync().then(function(e){var r=g.default.generatePath("currentUser"),n=g.default.removeItemAsync(r);if(null!==e){var a=f.default.isLinked(e),i=e.getSessionToken();i&&(0,h.default)(i)&&(n=n.then(function(){if(a)return e.destroy({sessionToken:i})}).then(function(){return t.request("POST","logout",{},{sessionToken:i})})),e._logOutWithAll(),e._finishFetch({sessionToken:void 0})}return m=!0,b=null,n})},requestPasswordReset:function(e,t){return d.default.getRESTController().request("POST","requestPasswordReset",{email:e},t)},upgradeToRevocableSession:function(e,t){var r=e.getSessionToken();return r?(t.sessionToken=r,d.default.getRESTController().request("POST","upgradeToRevocableSession",{},t).then(function(t){var r=new y.default;return r._finishFetch(t),e._finishFetch({sessionToken:r.getSessionToken()}),e.isCurrent()?k.setCurrentUser(e):Promise.resolve(e)})):Promise.reject(new v.default(v.default.SESSION_MISSING,"Cannot upgrade a user with no session token"))},linkWith:function(e,t,r){return e.save({authData:t},r).then(function(){return _?k.setCurrentUser(e):e})}};d.default.setUserController(k);var S=O;t.default=S},3:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function(e){return null==e||""===e||0===e.length};t.a=function(e,t,r){if("object"===n(e))if(a(t)){if(null==r)return;"object"===n(r)&&(e=r)}else{"string"==typeof t&&(t=t.split("."));var i=t.pop();((function(e,t,r){void 0===r&&(r={});var i=e;if(a(t));else{var o;"string"==typeof t&&(t=t.split("."));for(var s=0,u=t.length;s<u;s++){var l;null!=i[o=t[s]]&&"object"===n(i[o])||(l=s===u-1?r:{},i[o]=l),i=i[o]}}return i})(e,t))[i]=r}}},35:function(e,t,r){"use strict";t.a=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=t.length),e.length=n-r;for(var a=0,i=e.length;a<i;a++)e[a]=t[a+r];return e}},391:function(e,t){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}},392:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},393:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(73)),i=n(r(83)),o=n(r(120)),s=n(r(234)),u=function(){function e(t){(0,a.default)(this,e),(0,o.default)(this,"_coordinates",void 0),this._coordinates=e._validate(t)}return(0,i.default)(e,[{key:"toJSON",value:function(){return e._validate(this._coordinates),{__type:"Polygon",coordinates:this._coordinates}}},{key:"equals",value:function(t){if(!(t instanceof e)||this.coordinates.length!==t.coordinates.length)return!1;for(var r=!0,n=1;n<this._coordinates.length;n+=1)if(this._coordinates[n][0]!=t.coordinates[n][0]||this._coordinates[n][1]!=t.coordinates[n][1]){r=!1;break}return r}},{key:"containsPoint",value:function(e){for(var t=this._coordinates[0][0],r=this._coordinates[0][0],n=this._coordinates[0][1],a=this._coordinates[0][1],i=1;i<this._coordinates.length;i+=1){var o=this._coordinates[i];t=Math.min(o[0],t),r=Math.max(o[0],r),n=Math.min(o[1],n),a=Math.max(o[1],a)}if(e.latitude<t||e.latitude>r||e.longitude<n||e.longitude>a)return!1;for(var s=!1,u=0,l=this._coordinates.length-1;u<this._coordinates.length;l=u++){var c=this._coordinates[u][0],f=this._coordinates[u][1],d=this._coordinates[l][0],h=this._coordinates[l][1];f>e.longitude!=h>e.longitude&&e.latitude<(d-c)*(e.longitude-f)/(h-f)+c&&(s=!s)}return s}},{key:"coordinates",get:function(){return this._coordinates},set:function(t){this._coordinates=e._validate(t)}}],[{key:"_validate",value:function(e){if(!Array.isArray(e))throw new TypeError("Coordinates must be an Array");if(e.length<3)throw new TypeError("Polygon must have at least 3 GeoPoints or Points");for(var t=[],r=0;r<e.length;r+=1){var n=e[r],a=void 0;if(n instanceof s.default)a=n;else{if(!Array.isArray(n)||2!==n.length)throw new TypeError("Coordinates must be an Array of GeoPoints or Points");a=new s.default(n[0],n[1])}t.push([a.latitude,a.longitude])}return t}}]),e}();t.default=u},394:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLocalDatastoreKey=function(e){return!(!e||e!==n&&!e.startsWith(a)&&!e.startsWith(i))},t.OBJECT_PREFIX=t.PIN_PREFIX=t.DEFAULT_PIN=void 0;var n="_default";t.DEFAULT_PIN=n;var a="parsePin_";t.PIN_PREFIX=a;var i="Parse_LDS_";t.OBJECT_PREFIX=i},395:function(e,t,r){"use strict";var n=r(22)(r(75)),a={async:function(){return!!n.default.getStorageController().async},getItem:function(e){var t=n.default.getStorageController();if(1===t.async)throw new Error("Synchronous storage is not supported by the current storage controller");return t.getItem(e)},getItemAsync:function(e){var t=n.default.getStorageController();return 1===t.async?t.getItemAsync(e):Promise.resolve(t.getItem(e))},setItem:function(e,t){var r=n.default.getStorageController();if(1===r.async)throw new Error("Synchronous storage is not supported by the current storage controller");return r.setItem(e,t)},setItemAsync:function(e,t){var r=n.default.getStorageController();return 1===r.async?r.setItemAsync(e,t):Promise.resolve(r.setItem(e,t))},removeItem:function(e){var t=n.default.getStorageController();if(1===t.async)throw new Error("Synchronous storage is not supported by the current storage controller");return t.removeItem(e)},removeItemAsync:function(e){var t=n.default.getStorageController();return 1===t.async?t.removeItemAsync(e):Promise.resolve(t.removeItem(e))},generatePath:function(e){if(!n.default.get("APPLICATION_ID"))throw new Error("You need to call Parse.initialize before using Parse.");if("string"!=typeof e)throw new Error("Tried to get a Storage path that was not a String.");return"/"===e[0]&&(e=e.substr(1)),"Parse/"+n.default.get("APPLICATION_ID")+"/"+e},_clear:function(){var e=n.default.getStorageController();e.hasOwnProperty("clear")&&e.clear()}};e.exports=a,n.default.setStorageController(r(1763))},42:function(e,t){e.exports=function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}},495:function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},496:function(e,t,r){"use strict";function n(){var e,t,r=new Promise(function(r,n){e=r,t=n});return r.resolve=e,r.reject=t,r}Object.defineProperty(t,"__esModule",{value:!0}),t.resolvingPromise=n,t.when=function(e){var t,r=Array.isArray(e);t=r?e:arguments;var a=t.length,i=!1,o=[],s=r?[o]:o,u=[];if(o.length=t.length,u.length=t.length,0===a)return Promise.resolve(s);for(var l=new n,c=function(){--a<=0&&(i?l.reject(u):l.resolve(s))},f=function(e,t){e&&"function"==typeof e.then?e.then(function(e){o[t]=e,c()},function(e){u[t]=e,i=!0,c()}):(o[t]=e,c())},d=0;d<t.length;d++)f(t[d],d);return l},t.continueWhile=function e(t,r){if(t())return r().then(function(){return e(t,r)});return Promise.resolve()}},497:function(e,t,r){"use strict";e.exports=r(1784).EventEmitter},64:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return(n="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function a(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=a=function(e){return n(e)}:e.exports=a=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},a(t)}e.exports=a},73:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},74:function(e,t,r){"use strict";var n=r(391),a=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(295)),o=a(r(296)),s=a(r(64)),u=a(r(73)),l=a(r(83)),c=a(r(120)),f=a(r(75)),d=a(r(1752)),h=a(r(262)),v=a(r(233)),p=a(r(777)),y=a(r(263)),g=a(r(1755)),_=a(r(178)),m=a(r(191)),b=r(496),w=r(394),O=r(264),k=a(r(265)),S=a(r(192)),E=n(r(1756)),P=a(r(776)),A=n(r(1757)),C=a(r(1758)),N={},I=0,T=0,j=!f.default.get("IS_NODE");function R(){var e=f.default.get("SERVER_URL");"/"!==e[e.length-1]&&(e+="/");var t=e.replace(/https?:\/\//,"");return t.substr(t.indexOf("/"))}j?f.default.setObjectStateController(E):f.default.setObjectStateController(A);var x,D=function(){function e(t,r,n){(0,u.default)(this,e),(0,c.default)(this,"id",void 0),(0,c.default)(this,"_localId",void 0),(0,c.default)(this,"_objCount",void 0),(0,c.default)(this,"className",void 0),"function"==typeof this.initialize&&this.initialize.apply(this,arguments);var a=null;if(this._objCount=T++,"string"==typeof t)this.className=t,r&&"object"===(0,s.default)(r)&&(a=r);else if(t&&"object"===(0,s.default)(t)){for(var i in this.className=t.className,a={},t)"className"!==i&&(a[i]=t[i]);r&&"object"===(0,s.default)(r)&&(n=r)}if(a&&!this.set(a,n))throw new Error("Can't create an invalid Parse Object")}var t,r;return(0,l.default)(e,[{key:"_getId",value:function(){if("string"==typeof this.id)return this.id;if("string"==typeof this._localId)return this._localId;var e="local"+String(I++);return this._localId=e,e}},{key:"_getStateIdentifier",value:function(){if(j){var e=this.id;return e||(e=this._getId()),{id:e,className:this.className}}return this}},{key:"_getServerData",value:function(){return f.default.getObjectStateController().getServerData(this._getStateIdentifier())}},{key:"_clearServerData",value:function(){var e=this._getServerData(),t={};for(var r in e)t[r]=void 0;f.default.getObjectStateController().setServerData(this._getStateIdentifier(),t)}},{key:"_getPendingOps",value:function(){return f.default.getObjectStateController().getPendingOps(this._getStateIdentifier())}},{key:"_clearPendingOps",value:function(e){var t=this._getPendingOps(),r=t[t.length-1];(e||Object.keys(r)).forEach(function(e){delete r[e]})}},{key:"_getDirtyObjectAttributes",value:function(){var t=this.attributes,r=f.default.getObjectStateController().getObjectCache(this._getStateIdentifier()),n={};for(var a in t){var i=t[a];if(i&&"object"===(0,s.default)(i)&&!(i instanceof e)&&!(i instanceof m.default)&&!(i instanceof S.default))try{var o=(0,v.default)(i,!1,!0),u=JSON.stringify(o);r[a]!==u&&(n[a]=i)}catch(e){n[a]=i}}return n}},{key:"_toFullJSON",value:function(e){var t=this.toJSON(e);return t.__type="Object",t.className=this.className,t}},{key:"_getSaveJSON",value:function(){var e=this._getPendingOps(),t=this._getDirtyObjectAttributes(),r={};for(var n in t){for(var a=!1,i=0;i<e.length;i+=1)for(var o in e[i]){if(o.includes("."))if(o.split(".")[0]===n){a=!0;break}}a||(r[n]=new O.SetOp(t[n]).toJSON())}for(n in e[0])r[n]=e[0][n].toJSON();return r}},{key:"_getSaveParams",value:function(){var e=this.id?"PUT":"POST",t=this._getSaveJSON(),r="classes/"+this.className;return this.id?r+="/"+this.id:"_User"===this.className&&(r="users"),{method:e,body:t,path:r}}},{key:"_finishFetch",value:function(e){!this.id&&e.objectId&&(this.id=e.objectId);var t=f.default.getObjectStateController();t.initializeState(this._getStateIdentifier());var r={};for(var n in e)"ACL"===n?r[n]=new y.default(e[n]):"objectId"!==n&&(r[n]=(0,h.default)(e[n]),r[n]instanceof S.default&&r[n]._ensureParentAndKey(this,n));r.createdAt&&"string"==typeof r.createdAt&&(r.createdAt=(0,g.default)(r.createdAt)),r.updatedAt&&"string"==typeof r.updatedAt&&(r.updatedAt=(0,g.default)(r.updatedAt)),!r.updatedAt&&r.createdAt&&(r.updatedAt=r.createdAt),t.commitServerChanges(this._getStateIdentifier(),r)}},{key:"_setExisted",value:function(e){var t=f.default.getObjectStateController().getState(this._getStateIdentifier());t&&(t.existed=e)}},{key:"_migrateId",value:function(e){if(this._localId&&e)if(j){var t=f.default.getObjectStateController(),r=t.removeState(this._getStateIdentifier());this.id=e,delete this._localId,r&&t.initializeState(this._getStateIdentifier(),r)}else this.id=e,delete this._localId}},{key:"_handleSaveResponse",value:function(e,t){var r={},n=f.default.getObjectStateController(),a=n.popPendingState(this._getStateIdentifier());for(var i in a)a[i]instanceof O.RelationOp?r[i]=a[i].applyTo(void 0,this,i):i in e||(r[i]=a[i].applyTo(void 0));for(i in e)"createdAt"!==i&&"updatedAt"!==i||"string"!=typeof e[i]?"ACL"===i?r[i]=new y.default(e[i]):"objectId"!==i&&(r[i]=(0,h.default)(e[i]),r[i]instanceof O.UnsetOp&&(r[i]=void 0)):r[i]=(0,g.default)(e[i]);r.createdAt&&!r.updatedAt&&(r.updatedAt=r.createdAt),this._migrateId(e.objectId),201!==t&&this._setExisted(!0),n.commitServerChanges(this._getStateIdentifier(),r)}},{key:"_handleSaveError",value:function(){f.default.getObjectStateController().mergeFirstPendingState(this._getStateIdentifier())}},{key:"initialize",value:function(){}},{key:"toJSON",value:function(e){var t=this.id?this.className+":"+this.id:this;e=e||[t];var r={},n=this.attributes;for(var a in n)"createdAt"!==a&&"updatedAt"!==a||!n[a].toJSON?r[a]=(0,v.default)(n[a],!1,!1,e):r[a]=n[a].toJSON();var i=this._getPendingOps();for(var o in i[0])r[o]=i[0][o].toJSON();return this.id&&(r.objectId=this.id),r}},{key:"equals",value:function(t){return this===t||t instanceof e&&this.className===t.className&&this.id===t.id&&void 0!==this.id}},{key:"dirty",value:function(e){if(!this.id)return!0;var t=this._getPendingOps(),r=this._getDirtyObjectAttributes();if(e){if(r.hasOwnProperty(e))return!0;for(var n=0;n<t.length;n++)if(t[n].hasOwnProperty(e))return!0;return!1}return 0!==Object.keys(t[0]).length||0!==Object.keys(r).length}},{key:"dirtyKeys",value:function(){for(var e=this._getPendingOps(),t={},r=0;r<e.length;r++)for(var n in e[r])t[n]=!0;var a=this._getDirtyObjectAttributes();for(var i in a)t[i]=!0;return Object.keys(t)}},{key:"isDataAvailable",value:function(){var e=this._getServerData();return!!Object.keys(e).length}},{key:"toPointer",value:function(){if(!this.id)throw new Error("Cannot create a pointer to an unsaved ParseObject");return{__type:"Pointer",className:this.className,objectId:this.id}}},{key:"get",value:function(e){return this.attributes[e]}},{key:"relation",value:function(e){var t=this.get(e);if(t){if(!(t instanceof S.default))throw new Error("Called relation() on non-relation field "+e);return t._ensureParentAndKey(this,e),t}return new S.default(this,e)}},{key:"escape",value:function(e){var t=this.attributes[e];if(null==t)return"";if("string"!=typeof t){if("function"!=typeof t.toString)return"";t=t.toString()}return(0,p.default)(t)}},{key:"has",value:function(e){var t=this.attributes;return!!t.hasOwnProperty(e)&&null!=t[e]}},{key:"set",value:function(e,t,r){var n={},a={};if(e&&"object"===(0,s.default)(e))n=e,r=t;else{if("string"!=typeof e)return this;n[e]=t}r=r||{};var i=[];for(var o in"function"==typeof this.constructor.readOnlyAttributes&&(i=i.concat(this.constructor.readOnlyAttributes())),n)if("createdAt"!==o&&"updatedAt"!==o){if(i.indexOf(o)>-1)throw new Error("Cannot modify readonly attribute: "+o);if(r.unset)a[o]=new O.UnsetOp;else if(n[o]instanceof O.Op)a[o]=n[o];else if(n[o]&&"object"===(0,s.default)(n[o])&&"string"==typeof n[o].__op)a[o]=(0,O.opFromJSON)(n[o]);else if("objectId"===o||"id"===o)"string"==typeof n[o]&&(this.id=n[o]);else if("ACL"!==o||"object"!==(0,s.default)(n[o])||n[o]instanceof y.default)if(n[o]instanceof S.default){var u=new S.default(this,o);u.targetClassName=n[o].targetClassName,a[o]=new O.SetOp(u)}else a[o]=new O.SetOp(n[o]);else a[o]=new O.SetOp(new y.default(n[o]))}var l=this.attributes,c=this._getServerData();if("string"==typeof e&&e.includes(".")&&!c[e.split(".")[0]])return this;var d={};for(var h in a)a[h]instanceof O.RelationOp?d[h]=a[h].applyTo(l[h],this,h):a[h]instanceof O.UnsetOp||(d[h]=a[h].applyTo(l[h]));if(!r.ignoreValidation){var v=this.validate(d);if(v)return"function"==typeof r.error&&r.error(this,v),!1}var p=this._getPendingOps(),g=p.length-1,_=f.default.getObjectStateController();for(var m in a){var b=a[m].mergeWith(p[g][m]);_.setPendingOp(this._getStateIdentifier(),m,b)}return this}},{key:"unset",value:function(e,t){return(t=t||{}).unset=!0,this.set(e,null,t)}},{key:"increment",value:function(e,t){if(void 0===t&&(t=1),"number"!=typeof t)throw new Error("Cannot increment by a non-numeric amount.");return this.set(e,new O.IncrementOp(t))}},{key:"add",value:function(e,t){return this.set(e,new O.AddOp([t]))}},{key:"addAll",value:function(e,t){return this.set(e,new O.AddOp(t))}},{key:"addUnique",value:function(e,t){return this.set(e,new O.AddUniqueOp([t]))}},{key:"addAllUnique",value:function(e,t){return this.set(e,new O.AddUniqueOp(t))}},{key:"remove",value:function(e,t){return this.set(e,new O.RemoveOp([t]))}},{key:"removeAll",value:function(e,t){return this.set(e,new O.RemoveOp(t))}},{key:"op",value:function(e){for(var t=this._getPendingOps(),r=t.length;r--;)if(t[r][e])return t[r][e]}},{key:"clone",value:function(){var e=new this.constructor;e.className||(e.className=this.className);var t=this.attributes;if("function"==typeof this.constructor.readOnlyAttributes){var r=this.constructor.readOnlyAttributes()||[],n={};for(var a in t)r.indexOf(a)<0&&(n[a]=t[a]);t=n}return e.set&&e.set(t),e}},{key:"newInstance",value:function(){var e=new this.constructor;if(e.className||(e.className=this.className),e.id=this.id,j)return e;var t=f.default.getObjectStateController();return t&&t.duplicateState(this._getStateIdentifier(),e._getStateIdentifier()),e}},{key:"isNew",value:function(){return!this.id}},{key:"existed",value:function(){if(!this.id)return!1;var e=f.default.getObjectStateController().getState(this._getStateIdentifier());return!!e&&e.existed}},{key:"isValid",value:function(){return!this.validate(this.attributes)}},{key:"validate",value:function(e){if(e.hasOwnProperty("ACL")&&!(e.ACL instanceof y.default))return new _.default(_.default.OTHER_CAUSE,"ACL must be a Parse ACL.");for(var t in e)if(!/^[A-Za-z][0-9A-Za-z_.]*$/.test(t))return new _.default(_.default.INVALID_KEY_NAME);return!1}},{key:"getACL",value:function(){var e=this.get("ACL");return e instanceof y.default?e:null}},{key:"setACL",value:function(e,t){return this.set("ACL",e,t)}},{key:"revert",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length){e=[];for(var a=0,i=r;a<i.length;a++){var o=i[a];if("string"!=typeof o)throw new Error("Parse.Object#revert expects either no, or a list of string, arguments.");e.push(o)}}this._clearPendingOps(e)}},{key:"clear",value:function(){var e=this.attributes,t={},r=["createdAt","updatedAt"];for(var n in"function"==typeof this.constructor.readOnlyAttributes&&(r=r.concat(this.constructor.readOnlyAttributes())),e)r.indexOf(n)<0&&(t[n]=!0);return this.set(t,{unset:!0})}},{key:"fetch",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken),e.hasOwnProperty("include")&&(t.include=[],Array.isArray(e.include)?e.include.forEach(function(e){Array.isArray(e)?t.include=t.include.concat(e):t.include.push(e)}):t.include.push(e.include)),f.default.getObjectController().fetch(this,!0,t)}},{key:"fetchWithInclude",value:function(e,t){return(t=t||{}).include=e,this.fetch(t)}},{key:"save",value:function(e,t,r){var n,a,i=this;if("object"===(0,s.default)(e)||void 0===e?(n=e,"object"===(0,s.default)(t)&&(a=t)):((n={})[e]=t,a=r),!a&&n&&(a={},"function"==typeof n.success&&(a.success=n.success,delete n.success),"function"==typeof n.error&&(a.error=n.error,delete n.error)),n){var o=this.validate(n);if(o)return a&&"function"==typeof a.error&&a.error(this,o),Promise.reject(o);this.set(n,a)}var u={};(a=a||{}).hasOwnProperty("useMasterKey")&&(u.useMasterKey=!!a.useMasterKey),a.hasOwnProperty("sessionToken")&&"string"==typeof a.sessionToken&&(u.sessionToken=a.sessionToken);var l=f.default.getObjectController(),c=(0,C.default)(this);return l.save(c,u).then(function(){return l.save(i,u)})}},{key:"destroy",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken),this.id?f.default.getObjectController().destroy(this,t):Promise.resolve()}},{key:"pin",value:function(){return e.pinAllWithName(w.DEFAULT_PIN,[this])}},{key:"unPin",value:function(){return e.unPinAllWithName(w.DEFAULT_PIN,[this])}},{key:"isPinned",value:(r=(0,o.default)(i.default.mark(function e(){var t,r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=f.default.getLocalDatastore()).isEnabled){e.next=3;break}return e.abrupt("return",Promise.reject("Parse.enableLocalDatastore() must be called first"));case 3:return r=t.getKeyForObject(this),e.next=6,t.fromPinWithName(r);case 6:return n=e.sent,e.abrupt("return",n.length>0);case 8:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"pinWithName",value:function(t){return e.pinAllWithName(t,[this])}},{key:"unPinWithName",value:function(t){return e.unPinAllWithName(t,[this])}},{key:"fetchFromLocalDatastore",value:(t=(0,o.default)(i.default.mark(function t(){var r,n,a,o;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((r=f.default.getLocalDatastore()).isEnabled){t.next=3;break}throw new Error("Parse.enableLocalDatastore() must be called first");case 3:return n=r.getKeyForObject(this),t.next=6,r._serializeObject(n);case 6:if(a=t.sent){t.next=9;break}throw new Error("Cannot fetch an unsaved ParseObject");case 9:return o=e.fromJSON(a),this._finishFetch(o.toJSON()),t.abrupt("return",this);case 12:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"attributes",get:function(){var e=f.default.getObjectStateController();return Object.freeze(e.estimateAttributes(this._getStateIdentifier()))}},{key:"createdAt",get:function(){return this._getServerData().createdAt}},{key:"updatedAt",get:function(){return this._getServerData().updatedAt}}],[{key:"_clearAllState",value:function(){f.default.getObjectStateController().clearAllState()}},{key:"fetchAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),t.hasOwnProperty("include")&&(r.include=[],Array.isArray(t.include)?t.include.forEach(function(e){Array.isArray(e)?r.include=r.include.concat(e):r.include.push(e)}):r.include.push(t.include)),f.default.getObjectController().fetch(e,!0,r)}},{key:"fetchAllWithInclude",value:function(t,r,n){return(n=n||{}).include=r,e.fetchAll(t,n)}},{key:"fetchAllIfNeeded",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),f.default.getObjectController().fetch(e,!1,r)}},{key:"destroyAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),t.hasOwnProperty("batchSize")&&"number"==typeof t.batchSize&&(r.batchSize=t.batchSize),f.default.getObjectController().destroy(e,r)}},{key:"saveAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),t.hasOwnProperty("batchSize")&&"number"==typeof t.batchSize&&(r.batchSize=t.batchSize),f.default.getObjectController().save(e,r)}},{key:"createWithoutData",value:function(e){var t=new this;return t.id=e,t}},{key:"fromJSON",value:function(t,r){if(!t.className)throw new Error("Cannot create an object without a className");var n=N[t.className],a=n?new n:new e(t.className),i={};for(var o in t)"className"!==o&&"__type"!==o&&(i[o]=t[o]);if(r){i.objectId&&(a.id=i.objectId);var s=null;"function"==typeof a._preserveFieldsOnFetch&&(s=a._preserveFieldsOnFetch()),a._clearServerData(),s&&a._finishFetch(s)}return a._finishFetch(i),t.objectId&&a._setExisted(!0),a}},{key:"registerSubclass",value:function(e,t){if("string"!=typeof e)throw new TypeError("The first argument must be a valid class name.");if(void 0===t)throw new TypeError("You must supply a subclass constructor.");if("function"!=typeof t)throw new TypeError("You must register the subclass constructor. Did you attempt to register an instance of the subclass?");N[e]=t,t.className||(t.className=e)}},{key:"extend",value:function(t,r,n){if("string"!=typeof t){if(t&&"string"==typeof t.className)return e.extend(t.className,t,r);throw new Error("Parse.Object.extend's first argument should be the className.")}var a=t;"User"===a&&f.default.get("PERFORM_USER_REWRITE")&&(a="_User");var i=e.prototype;this.hasOwnProperty("__super__")&&this.__super__?i=this.prototype:N[a]&&(i=N[a].prototype);var o=function(e,t){if(this.className=a,this._objCount=T++,"function"==typeof this.initialize&&this.initialize.apply(this,arguments),e&&"object"===(0,s.default)(e)&&!this.set(e||{},t))throw new Error("Can't create an invalid Parse Object")};if(o.className=a,o.__super__=i,o.prototype=Object.create(i,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),r)for(var u in r)"className"!==u&&Object.defineProperty(o.prototype,u,{value:r[u],enumerable:!1,writable:!0,configurable:!0});if(n)for(var l in n)"className"!==l&&Object.defineProperty(o,l,{value:n[l],enumerable:!1,writable:!0,configurable:!0});return o.extend=function(t,r,n){return"string"==typeof t?e.extend.call(o,t,r,n):e.extend.call(o,a,t,r)},o.createWithoutData=e.createWithoutData,N[a]=o,o}},{key:"enableSingleInstance",value:function(){j=!0,f.default.setObjectStateController(E)}},{key:"disableSingleInstance",value:function(){j=!1,f.default.setObjectStateController(A)}},{key:"pinAll",value:function(t){return f.default.getLocalDatastore().isEnabled?e.pinAllWithName(w.DEFAULT_PIN,t):Promise.reject("Parse.enableLocalDatastore() must be called first")}},{key:"pinAllWithName",value:function(e,t){var r=f.default.getLocalDatastore();return r.isEnabled?r._handlePinAllWithName(e,t):Promise.reject("Parse.enableLocalDatastore() must be called first")}},{key:"unPinAll",value:function(t){return f.default.getLocalDatastore().isEnabled?e.unPinAllWithName(w.DEFAULT_PIN,t):Promise.reject("Parse.enableLocalDatastore() must be called first")}},{key:"unPinAllWithName",value:function(e,t){var r=f.default.getLocalDatastore();return r.isEnabled?r._handleUnPinAllWithName(e,t):Promise.reject("Parse.enableLocalDatastore() must be called first")}},{key:"unPinAllObjects",value:function(){var e=f.default.getLocalDatastore();return e.isEnabled?e.unPinWithName(w.DEFAULT_PIN):Promise.reject("Parse.enableLocalDatastore() must be called first")}},{key:"unPinAllObjectsWithName",value:function(e){var t=f.default.getLocalDatastore();return t.isEnabled?t.unPinWithName(w.PIN_PREFIX+e):Promise.reject("Parse.enableLocalDatastore() must be called first")}}]),e}(),L={fetch:function(e,t,r){var n=f.default.getLocalDatastore();if(Array.isArray(e)){if(e.length<1)return Promise.resolve([]);var a=[],s=[],u=null,l=[],c=null;if(e.forEach(function(e){c||(u||(u=e.className),u!==e.className&&(c=new _.default(_.default.INVALID_CLASS_NAME,"All objects should be of the same class")),e.id||(c=new _.default(_.default.MISSING_OBJECT_ID,"All objects must have an ID")),!t&&e.isDataAvailable()||(s.push(e.id),a.push(e)),l.push(e))}),c)return Promise.reject(c);var d=new k.default(u);return d.containedIn("objectId",s),r&&r.include&&d.include(r.include),d._limit=s.length,d.find(r).then(function(){var e=(0,o.default)(i.default.mark(function e(r){var o,s,u,c,f,d,h,v,p;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o={},r.forEach(function(e){o[e.id]=e}),s=0;case 3:if(!(s<a.length)){e.next=11;break}if((u=a[s])&&u.id&&o[u.id]){e.next=8;break}if(!t){e.next=8;break}return e.abrupt("return",Promise.reject(new _.default(_.default.OBJECT_NOT_FOUND,"All objects must exist on the server.")));case 8:s++,e.next=3;break;case 11:if(!j)for(c=0;c<l.length;c++)(f=l[c])&&f.id&&o[f.id]&&(d=f.id,f._finishFetch(o[d].toJSON()),l[c]=o[d]);h=0,v=l;case 13:if(!(h<v.length)){e.next=20;break}return p=v[h],e.next=17,n._updateObjectIfPinned(p);case 17:h++,e.next=13;break;case 20:return e.abrupt("return",Promise.resolve(l));case 21:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}())}var h=f.default.getRESTController(),v={};return r&&r.include&&(v.include=r.include.join()),h.request("GET","classes/"+e.className+"/"+e._getId(),v,r).then(function(){var t=(0,o.default)(i.default.mark(function t(r){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e instanceof D&&(e._clearPendingOps(),e._clearServerData(),e._finishFetch(r)),t.next=3,n._updateObjectIfPinned(e);case 3:return t.abrupt("return",e);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}())},destroy:(x=(0,o.default)(i.default.mark(function e(t,r){var n,a,s,u,l,c;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r&&r.batchSize?r.batchSize:20,a=f.default.getLocalDatastore(),s=f.default.getRESTController(),!Array.isArray(t)){e.next=15;break}if(!(t.length<1)){e.next=6;break}return e.abrupt("return",Promise.resolve([]));case 6:return u=[[]],t.forEach(function(e){e.id&&(u[u.length-1].push(e),u[u.length-1].length>=n&&u.push([]))}),0===u[u.length-1].length&&u.pop(),l=Promise.resolve(),c=[],u.forEach(function(e){l=l.then(function(){return s.request("POST","batch",{requests:e.map(function(e){return{method:"DELETE",path:R()+"classes/"+e.className+"/"+e._getId(),body:{}}})},r).then(function(t){for(var r=0;r<t.length;r++)if(t[r]&&t[r].hasOwnProperty("error")){var n=new _.default(t[r].error.code,t[r].error.error);n.object=e[r],c.push(n)}})})}),e.abrupt("return",l.then((0,o.default)(i.default.mark(function e(){var r,n,o,s,u,l,f;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.length){e.next=4;break}return(r=new _.default(_.default.AGGREGATE_ERROR)).errors=c,e.abrupt("return",Promise.reject(r));case 4:n=!0,o=!1,s=void 0,e.prev=7,u=t[Symbol.iterator]();case 9:if(n=(l=u.next()).done){e.next=16;break}return f=l.value,e.next=13,a._destroyObjectIfPinned(f);case 13:n=!0,e.next=9;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),o=!0,s=e.t0;case 22:e.prev=22,e.prev=23,n||null==u.return||u.return();case 25:if(e.prev=25,!o){e.next=28;break}throw s;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",Promise.resolve(t));case 31:case"end":return e.stop()}},e,null,[[7,18,22,30],[23,,25,29]])}))));case 15:if(!(t instanceof D)){e.next=17;break}return e.abrupt("return",s.request("DELETE","classes/"+t.className+"/"+t._getId(),{},r).then((0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._destroyObjectIfPinned(t);case 2:return e.abrupt("return",Promise.resolve(t));case 3:case"end":return e.stop()}},e)}))));case 17:return e.next=19,a._destroyObjectIfPinned(t);case 19:return e.abrupt("return",Promise.resolve(t));case 20:case"end":return e.stop()}},e)})),function(){return x.apply(this,arguments)}),save:function(e,t){var r=t&&t.batchSize?t.batchSize:20,n=f.default.getLocalDatastore(),a={},s=f.default.getRESTController(),u=f.default.getObjectStateController();if((t=t||{}).returnStatus=t.returnStatus||!0,Array.isArray(e)){if(e.length<1)return Promise.resolve([]);for(var l=e.concat(),c=0;c<e.length;c++)e[c]instanceof D&&(l=l.concat((0,C.default)(e[c],!0)));l=(0,P.default)(l);var h=Promise.resolve(),v=[];return l.forEach(function(e){e instanceof m.default?h=h.then(function(){return e.save()}):e instanceof D&&v.push(e)}),h.then(function(){var l=null;return(0,b.continueWhile)(function(){return v.length>0},function(){var e,n,i=[],o=[];if(v.forEach(function(e){i.length<r&&(0,d.default)(e)?i.push(e):o.push(e)}),v=o,i.length<1)return Promise.reject(new _.default(_.default.OTHER_CAUSE,"Tried to save a batch with a cycle."));var c=new Promise(function(t,r){e=t,n=r});c.resolve=e,c.reject=n;var f=[],h=[];return i.forEach(function(e,t){var r,n,i=new Promise(function(e,t){r=e,n=t});i.resolve=r,i.reject=n,f.push(i),u.pushPendingState(e._getStateIdentifier()),h.push(u.enqueueTask(e._getStateIdentifier(),function(){return i.resolve(),c.then(function(r){if(r[t].hasOwnProperty("success")){var n=r[t].success.objectId,i=r[t]._status;delete r[t]._status,a[n]=e._localId,e._handleSaveResponse(r[t].success,i)}else{if(!l&&r[t].hasOwnProperty("error")){var o=r[t].error;l=new _.default(o.code,o.error),v=[]}e._handleSaveError()}})}))}),(0,b.when)(f).then(function(){return s.request("POST","batch",{requests:i.map(function(e){var t=e._getSaveParams();return t.path=R()+t.path,t})},t)}).then(c.resolve,function(e){c.reject(new _.default(_.default.INCORRECT_TYPE,e.message))}),(0,b.when)(h)}).then((0,o.default)(i.default.mark(function t(){var r,o,s,u,c,f;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}return t.abrupt("return",Promise.reject(l));case 2:r=!0,o=!1,s=void 0,t.prev=5,u=e[Symbol.iterator]();case 7:if(r=(c=u.next()).done){t.next=16;break}return f=c.value,t.next=11,n._updateLocalIdForObject(a[f.id],f);case 11:return t.next=13,n._updateObjectIfPinned(f);case 13:r=!0,t.next=7;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(5),o=!0,s=t.t0;case 22:t.prev=22,t.prev=23,r||null==u.return||u.return();case 25:if(t.prev=25,!o){t.next=28;break}throw s;case 28:return t.finish(25);case 29:return t.finish(22);case 30:return t.abrupt("return",Promise.resolve(e));case 31:case"end":return t.stop()}},t,null,[[5,18,22,30],[23,,25,29]])})))})}if(e instanceof D){var p=e._localId,y=e;return u.pushPendingState(e._getStateIdentifier()),u.enqueueTask(e._getStateIdentifier(),function(){var e=y._getSaveParams();return s.request(e.method,e.path,e.body,t).then(function(e){var t=e._status;delete e._status,y._handleSaveResponse(e,t)},function(e){return y._handleSaveError(),Promise.reject(e)})}).then((0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateLocalIdForObject(p,e);case 2:return t.next=4,n._updateObjectIfPinned(e);case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}},t)})),function(e){return Promise.reject(e)})}return Promise.resolve()}};f.default.setObjectController(L);var M=D;t.default=M},75:function(e,t,r){"use strict";var n={IS_NODE:"undefined"!=typeof process&&!!process.versions&&!!process.versions.node&&!process.versions.electron,REQUEST_ATTEMPT_LIMIT:5,SERVER_URL:"https://api.parse.com/1",SERVER_AUTH_TYPE:null,SERVER_AUTH_TOKEN:null,LIVEQUERY_SERVER_URL:null,VERSION:"js2.6.0",APPLICATION_ID:null,JAVASCRIPT_KEY:null,MASTER_KEY:null,USE_MASTER_KEY:!1,PERFORM_USER_REWRITE:!0,FORCE_REVOCABLE_SESSION:!1};function a(e,t,r){t.forEach(function(t){if("function"!=typeof r[t])throw new Error("".concat(e," must implement ").concat(t,"()"))})}e.exports={get:function(e){if(n.hasOwnProperty(e))return n[e];throw new Error("Configuration key not found: "+e)},set:function(e,t){n[e]=t},setAnalyticsController:function(e){a("AnalyticsController",["track"],e),n.AnalyticsController=e},getAnalyticsController:function(){return n.AnalyticsController},setCloudController:function(e){a("CloudController",["run","getJobsData","startJob"],e),n.CloudController=e},getCloudController:function(){return n.CloudController},setConfigController:function(e){a("ConfigController",["current","get","save"],e),n.ConfigController=e},getConfigController:function(){return n.ConfigController},setFileController:function(e){a("FileController",["saveFile","saveBase64"],e),n.FileController=e},getFileController:function(){return n.FileController},setInstallationController:function(e){a("InstallationController",["currentInstallationId"],e),n.InstallationController=e},getInstallationController:function(){return n.InstallationController},setObjectController:function(e){a("ObjectController",["save","fetch","destroy"],e),n.ObjectController=e},getObjectController:function(){return n.ObjectController},setObjectStateController:function(e){a("ObjectStateController",["getState","initializeState","removeState","getServerData","setServerData","getPendingOps","setPendingOp","pushPendingState","popPendingState","mergeFirstPendingState","getObjectCache","estimateAttribute","estimateAttributes","commitServerChanges","enqueueTask","clearAllState"],e),n.ObjectStateController=e},getObjectStateController:function(){return n.ObjectStateController},setPushController:function(e){a("PushController",["send"],e),n.PushController=e},getPushController:function(){return n.PushController},setQueryController:function(e){a("QueryController",["find","aggregate"],e),n.QueryController=e},getQueryController:function(){return n.QueryController},setRESTController:function(e){a("RESTController",["request","ajax"],e),n.RESTController=e},getRESTController:function(){return n.RESTController},setSchemaController:function(e){a("SchemaController",["get","create","update","delete","send","purge"],e),n.SchemaController=e},getSchemaController:function(){return n.SchemaController},setSessionController:function(e){a("SessionController",["getSession"],e),n.SessionController=e},getSessionController:function(){return n.SessionController},setStorageController:function(e){e.async?a("An async StorageController",["getItemAsync","setItemAsync","removeItemAsync"],e):a("A synchronous StorageController",["getItem","setItem","removeItem"],e),n.StorageController=e},setLocalDatastoreController:function(e){a("LocalDatastoreController",["pinWithName","fromPinWithName","unPinWithName","getAllContents","clear"],e),n.LocalDatastoreController=e},getLocalDatastoreController:function(){return n.LocalDatastoreController},setLocalDatastore:function(e){n.LocalDatastore=e},getLocalDatastore:function(){return n.LocalDatastore},getStorageController:function(){return n.StorageController},setAsyncStorage:function(e){n.AsyncStorage=e},getAsyncStorage:function(){return n.AsyncStorage},setWebSocketController:function(e){n.WebSocketController=e},getWebSocketController:function(){return n.WebSocketController},setUserController:function(e){a("UserController",["setCurrentUser","currentUser","currentUserAsync","signUp","logIn","become","logOut","me","requestPasswordReset","upgradeToRevocableSession","linkWith"],e),n.UserController=e},getUserController:function(){return n.UserController},setLiveQueryController:function(e){a("LiveQueryController",["setDefaultLiveQueryClient","getDefaultLiveQueryClient","_clearCachedDefaultClient"],e),n.LiveQueryController=e},getLiveQueryController:function(){return n.LiveQueryController},setHooksController:function(e){a("HooksController",["create","get","update","remove"],e),n.HooksController=e},getHooksController:function(){return n.HooksController}}},773:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(73)),i=n(r(83)),o=n(r(189)),s=n(r(153)),u=n(r(774)),l=n(r(190)),c=n(r(263)),f=n(r(178)),d=n(r(74)),h=function(e){function t(e,r){var n;return(0,a.default)(this,t),n=(0,o.default)(this,(0,s.default)(t).call(this,"_Role")),"string"==typeof e&&r instanceof c.default&&(n.setName(e),n.setACL(r)),n}return(0,l.default)(t,e),(0,i.default)(t,[{key:"getName",value:function(){var e=this.get("name");return null==e||"string"==typeof e?e:""}},{key:"setName",value:function(e,t){return this.set("name",e,t)}},{key:"getUsers",value:function(){return this.relation("users")}},{key:"getRoles",value:function(){return this.relation("roles")}},{key:"validate",value:function(e,r){var n=(0,u.default)((0,s.default)(t.prototype),"validate",this).call(this,e,r);if(n)return n;if("name"in e&&e.name!==this.getName()){var a=e.name;if(this.id&&this.id!==e.objectId)return new f.default(f.default.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if("string"!=typeof a)return new f.default(f.default.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(a))return new f.default(f.default.OTHER_CAUSE,"A role's name can be only contain alphanumeric characters, _, -, and spaces.")}return!1}}]),t}(d.default);d.default.registerSubclass("_Role",h);var v=h;t.default=v},774:function(e,t,r){var n=r(1746);function a(t,r,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=a=Reflect.get:e.exports=a=function(e,t,r){var a=n(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(r):i.value}},a(t,r,i||t)}e.exports=a},775:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.indexOf(t)>-1)return!0;for(var r=0;r<e.length;r++)if(e[r]instanceof a.default&&e[r].className===t.className&&e[r]._getId()===t._getId())return!0;return!1};var a=n(r(74))},776:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];return e.forEach(function(e){e instanceof i.default?(0,a.default)(t,e)||t.push(e):t.indexOf(e)<0&&t.push(e)}),t};var a=n(r(775)),i=n(r(74))},777:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/[&<>\/'"]/g,function(e){return n[e]})};var n={"&":"&amp;","<":"&lt;",">":"&gt;","/":"&#x2F;","'":"&#x27;",'"':"&quot;"}},778:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState=function(){return{serverData:{},pendingOps:[{}],objectCache:{},tasks:new l.default,existed:!1}},t.setServerData=function(e,t){for(var r in t)void 0!==t[r]?e[r]=t[r]:delete e[r]},t.setPendingOp=function(e,t,r){var n=e.length-1;r?e[n][t]=r:delete e[n][t]},t.pushPendingState=function(e){e.push({})},t.popPendingState=f,t.mergeFirstPendingState=function(e){var t=f(e),r=e[0];for(var n in t)if(r[n]&&t[n]){var a=r[n].mergeWith(t[n]);a&&(r[n]=a)}else r[n]=t[n]},t.estimateAttribute=function(e,t,r,n,a){for(var i=e[a],o=0;o<t.length;o++)t[o][a]&&(t[o][a]instanceof c.RelationOp?n&&(i=t[o][a].applyTo(i,{className:r,id:n},a)):i=t[o][a].applyTo(i));return i},t.estimateAttributes=function(e,t,r,n){var a={};for(var i in e)a[i]=e[i];for(var o=0;o<t.length;o++)for(i in t[o])if(t[o][i]instanceof c.RelationOp)n&&(a[i]=t[o][i].applyTo(a[i],{className:r,id:n},i));else if(i.includes(".")){for(var s=i.split("."),u=s[s.length-1],l=Object.assign({},a),f=0;f<s.length-1;f++)l=l[s[f]];l[u]=t[o][i].applyTo(l[u])}else a[i]=t[o][i].applyTo(a[i]);return a},t.commitServerChanges=function(e,t,r){for(var n in r){var l=r[n];if(e[n]=l,l&&"object"===(0,a.default)(l)&&!(l instanceof s.default)&&!(l instanceof o.default)&&!(l instanceof u.default)){var c=(0,i.default)(l,!1,!0);t[n]=JSON.stringify(c)}}};var a=n(r(64)),i=n(r(233)),o=n(r(191)),s=n(r(74)),u=n(r(192)),l=n(r(779)),c=r(264);function f(e){var t=e.shift();return e.length||(e[0]={}),t}},779:function(e,t,r){"use strict";var n=r(22),a=n(r(73)),i=n(r(83)),o=n(r(120)),s=function(){function e(){(0,a.default)(this,e),(0,o.default)(this,"queue",void 0),this.queue=[]}return(0,i.default)(e,[{key:"enqueue",value:function(e){var t,r,n=this,a=new Promise(function(e,n){t=e,r=n});return a.resolve=t,a.reject=r,this.queue.push({task:e,_completion:a}),1===this.queue.length&&e().then(function(){n._dequeue(),a.resolve()},function(e){n._dequeue(),a.reject(e)}),a}},{key:"_dequeue",value:function(){var e=this;if(this.queue.shift(),this.queue.length){var t=this.queue[0];t.task().then(function(){e._dequeue(),t._completion.resolve()},function(r){e._dequeue(),t._completion.reject(r)})}}}]),e}();e.exports=s},780:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(297)),i=r(1759),o=!1,s={isLinked:function(e){var t=this._getAuthProvider();return e._isLinked(t.getAuthType())},logIn:function(e){var t=this._getAuthProvider();return a.default._logInWith(t.getAuthType(),t.getAuthData(),e)},link:function(e,t){var r=this._getAuthProvider();return e._linkWith(r.getAuthType(),r.getAuthData(),t)},_getAuthProvider:function(){var e={restoreAuthentication:function(){return!0},getAuthType:function(){return"anonymous"},getAuthData:function(){return{authData:{id:i()}}}};return o||(a.default._registerAuthenticationProvider(e),o=!0),e}};t.default=s},781:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.indexOf("r:")>-1}},782:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(64)),i=n(r(73)),o=n(r(83)),s=n(r(189)),u=n(r(153)),l=n(r(190)),c=n(r(75)),f=n(r(781)),d=n(r(74)),h=n(r(297)),v=function(e){function t(e){var r;if((0,i.default)(this,t),r=(0,s.default)(this,(0,u.default)(t).call(this,"_Session")),e&&"object"===(0,a.default)(e)&&!r.set(e||{}))throw new Error("Can't create an invalid Session");return r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"getSessionToken",value:function(){var e=this.get("sessionToken");return"string"==typeof e?e:""}}],[{key:"readOnlyAttributes",value:function(){return["createdWith","expiresAt","installationId","restricted","sessionToken","user"]}},{key:"current",value:function(e){e=e||{};var t=c.default.getSessionController(),r={};return e.hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),h.default.currentAsync().then(function(e){return e?(r.sessionToken=e.getSessionToken(),t.getSession(r)):Promise.reject("There is no current user.")})}},{key:"isCurrentSessionRevocable",value:function(){var e=h.default.current();return!!e&&(0,f.default)(e.getSessionToken()||"")}}]),t}(d.default);d.default.registerSubclass("_Session",v);var p={getSession:function(e){var t=c.default.getRESTController(),r=new v;return t.request("GET","sessions/me",{},e).then(function(e){return r._finishFetch(e),r._setExisted(!0),r})}};c.default.setSessionController(p);var y=v;t.default=y},783:function(e,t,r){"use strict";var n=r(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(64)),i=n(r(73)),o=n(r(83)),s=n(r(189)),u=n(r(153)),l=n(r(392)),c=n(r(190)),f=n(r(120)),d=n(r(75)),h=n(r(497)),v=n(r(74)),p=n(r(1785)),y=r(496),g={INITIALIZED:"initialized",CONNECTING:"connecting",CONNECTED:"connected",CLOSED:"closed",RECONNECTING:"reconnecting",DISCONNECTED:"disconnected"},_="connect",m="subscribe",b="unsubscribe",w="connected",O="subscribed",k="unsubscribed",S="error",E="close",P="error",A="open",C="open",N="close",I="error",T=function(e){function t(e){var r,n=e.applicationId,a=e.serverURL,o=e.javascriptKey,c=e.masterKey,d=e.sessionToken;if((0,i.default)(this,t),r=(0,s.default)(this,(0,u.default)(t).call(this)),(0,f.default)((0,l.default)(r),"attempts",void 0),(0,f.default)((0,l.default)(r),"id",void 0),(0,f.default)((0,l.default)(r),"requestId",void 0),(0,f.default)((0,l.default)(r),"applicationId",void 0),(0,f.default)((0,l.default)(r),"serverURL",void 0),(0,f.default)((0,l.default)(r),"javascriptKey",void 0),(0,f.default)((0,l.default)(r),"masterKey",void 0),(0,f.default)((0,l.default)(r),"sessionToken",void 0),(0,f.default)((0,l.default)(r),"connectPromise",void 0),(0,f.default)((0,l.default)(r),"subscriptions",void 0),(0,f.default)((0,l.default)(r),"socket",void 0),(0,f.default)((0,l.default)(r),"state",void 0),!a||0!==a.indexOf("ws"))throw new Error("You need to set a proper Parse LiveQuery server url before using LiveQueryClient");return r.reconnectHandle=null,r.attempts=1,r.id=0,r.requestId=1,r.serverURL=a,r.applicationId=n,r.javascriptKey=o,r.masterKey=c,r.sessionToken=d,r.connectPromise=(0,y.resolvingPromise)(),r.subscriptions=new Map,r.state=g.INITIALIZED,r}return(0,c.default)(t,e),(0,o.default)(t,[{key:"shouldOpen",value:function(){return this.state===g.INITIALIZED||this.state===g.DISCONNECTED}},{key:"subscribe",value:function(e,t){var r=this;if(e){var n=e.className,a=e.toJSON(),i=a.where,o=a.keys?a.keys.split(","):void 0,s={op:m,requestId:this.requestId,query:{className:n,where:i,fields:o}};t&&(s.sessionToken=t);var u=new p.default(this.requestId,e,t);return this.subscriptions.set(this.requestId,u),this.requestId+=1,this.connectPromise.then(function(){r.socket.send(JSON.stringify(s))}),u}}},{key:"unsubscribe",value:function(e){var t=this;if(e){this.subscriptions.delete(e.id);var r={op:b,requestId:e.id};this.connectPromise.then(function(){t.socket.send(JSON.stringify(r))})}}},{key:"open",value:function(){var e=this,t=d.default.getWebSocketController();t?(this.state!==g.RECONNECTING&&(this.state=g.CONNECTING),this.socket=new t(this.serverURL),this.socket.onopen=function(){e._handleWebSocketOpen()},this.socket.onmessage=function(t){e._handleWebSocketMessage(t)},this.socket.onclose=function(){e._handleWebSocketClose()},this.socket.onerror=function(t){e._handleWebSocketError(t)}):this.emit(P,"Can not find WebSocket implementation")}},{key:"resubscribe",value:function(){var e=this;this.subscriptions.forEach(function(t,r){var n=t.query,a=n.toJSON(),i=a.where,o=a.keys?a.keys.split(","):void 0,s=n.className,u=t.sessionToken,l={op:m,requestId:r,query:{className:s,where:i,fields:o}};u&&(l.sessionToken=u),e.connectPromise.then(function(){e.socket.send(JSON.stringify(l))})})}},{key:"close",value:function(){if(this.state!==g.INITIALIZED&&this.state!==g.DISCONNECTED){this.state=g.DISCONNECTED,this.socket.close();var e=!0,t=!1,r=void 0;try{for(var n,a=this.subscriptions.values()[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){n.value.emit(N)}}catch(e){t=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}this._handleReset(),this.emit(E)}}},{key:"_handleReset",value:function(){this.attempts=1,this.id=0,this.requestId=1,this.connectPromise=(0,y.resolvingPromise)(),this.subscriptions=new Map}},{key:"_handleWebSocketOpen",value:function(){this.attempts=1;var e={op:_,applicationId:this.applicationId,javascriptKey:this.javascriptKey,masterKey:this.masterKey,sessionToken:this.sessionToken};this.socket.send(JSON.stringify(e))}},{key:"_handleWebSocketMessage",value:function(e){var t=e.data;"string"==typeof t&&(t=JSON.parse(t));var r=null;switch(t.requestId&&(r=this.subscriptions.get(t.requestId)),t.op){case w:this.state===g.RECONNECTING&&this.resubscribe(),this.emit(A),this.id=t.clientId,this.connectPromise.resolve(),this.state=g.CONNECTED;break;case O:r&&r.emit(C);break;case S:t.requestId?r&&r.emit(I,t.error):this.emit(P,t.error);break;case k:break;default:if(!r)break;var n=!1;if(t.original){for(var a in n=!0,delete t.original.__type,t.original)a in t.object||(t.object[a]=void 0);t.original=v.default.fromJSON(t.original,!1)}delete t.object.__type;var i=v.default.fromJSON(t.object,n);r.emit(t.op,i,t.original);var o=d.default.getLocalDatastore();n&&o.isEnabled&&o._updateObjectIfPinned(i).then(function(){})}}},{key:"_handleWebSocketClose",value:function(){if(this.state!==g.DISCONNECTED){this.state=g.CLOSED,this.emit(E);var e=!0,t=!1,r=void 0;try{for(var n,a=this.subscriptions.values()[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){n.value.emit(N)}}catch(e){t=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}this._handleReconnect()}}},{key:"_handleWebSocketError",value:function(e){this.emit(P,e);var t=!0,r=!1,n=void 0;try{for(var a,i=this.subscriptions.values()[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){a.value.emit(I)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}this._handleReconnect()}},{key:"_handleReconnect",value:function(){var e=this;if(this.state!==g.DISCONNECTED){this.state=g.RECONNECTING;var t,r=(t=this.attempts,Math.random()*Math.min(30,Math.pow(2,t)-1)*1e3);this.reconnectHandle&&clearTimeout(this.reconnectHandle),this.reconnectHandle=setTimeout(function(){e.attempts++,e.connectPromise=(0,y.resolvingPromise)(),e.open()}.bind(this),r)}}}]),t}(h.default);d.default.setWebSocketController("function"==typeof WebSocket||"object"===("undefined"==typeof WebSocket?"undefined":(0,a.default)(WebSocket))?WebSocket:null);var j=T;t.default=j},83:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},90:function(e,t,r){e.exports=r(1745)}}).default});